function KN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function qb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gb={exports:{}},mf={},Kb={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qc=Symbol.for("react.element"),XN=Symbol.for("react.portal"),QN=Symbol.for("react.fragment"),YN=Symbol.for("react.strict_mode"),JN=Symbol.for("react.profiler"),ZN=Symbol.for("react.provider"),e4=Symbol.for("react.context"),t4=Symbol.for("react.forward_ref"),n4=Symbol.for("react.suspense"),r4=Symbol.for("react.memo"),s4=Symbol.for("react.lazy"),l1=Symbol.iterator;function i4(t){return t===null||typeof t!="object"?null:(t=l1&&t[l1]||t["@@iterator"],typeof t=="function"?t:null)}var Xb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qb=Object.assign,Yb={};function Ua(t,e,n){this.props=t,this.context=e,this.refs=Yb,this.updater=n||Xb}Ua.prototype.isReactComponent={};Ua.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ua.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jb(){}Jb.prototype=Ua.prototype;function Hy(t,e,n){this.props=t,this.context=e,this.refs=Yb,this.updater=n||Xb}var Wy=Hy.prototype=new Jb;Wy.constructor=Hy;Qb(Wy,Ua.prototype);Wy.isPureReactComponent=!0;var c1=Array.isArray,Zb=Object.prototype.hasOwnProperty,qy={current:null},eT={key:!0,ref:!0,__self:!0,__source:!0};function tT(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Zb.call(e,r)&&!eT.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:qc,type:t,key:i,ref:o,props:s,_owner:qy.current}}function o4(t,e){return{$$typeof:qc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Gy(t){return typeof t=="object"&&t!==null&&t.$$typeof===qc}function a4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var u1=/\/+/g;function np(t,e){return typeof t=="object"&&t!==null&&t.key!=null?a4(""+t.key):e.toString(36)}function gd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case qc:case XN:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+np(o,0):r,c1(s)?(n="",t!=null&&(n=t.replace(u1,"$&/")+"/"),gd(s,e,n,"",function(c){return c})):s!=null&&(Gy(s)&&(s=o4(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(u1,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",c1(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+np(i,a);o+=gd(i,e,n,l,s)}else if(l=i4(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+np(i,a++),o+=gd(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Au(t,e,n){if(t==null)return t;var r=[],s=0;return gd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function l4(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var on={current:null},yd={transition:null},c4={ReactCurrentDispatcher:on,ReactCurrentBatchConfig:yd,ReactCurrentOwner:qy};ge.Children={map:Au,forEach:function(t,e,n){Au(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Au(t,function(){e++}),e},toArray:function(t){return Au(t,function(e){return e})||[]},only:function(t){if(!Gy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=Ua;ge.Fragment=QN;ge.Profiler=JN;ge.PureComponent=Hy;ge.StrictMode=YN;ge.Suspense=n4;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c4;ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Qb({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=qy.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Zb.call(e,l)&&!eT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:qc,type:t.type,key:s,ref:i,props:r,_owner:o}};ge.createContext=function(t){return t={$$typeof:e4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ZN,_context:t},t.Consumer=t};ge.createElement=tT;ge.createFactory=function(t){var e=tT.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:t4,render:t}};ge.isValidElement=Gy;ge.lazy=function(t){return{$$typeof:s4,_payload:{_status:-1,_result:t},_init:l4}};ge.memo=function(t,e){return{$$typeof:r4,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=yd.transition;yd.transition={};try{t()}finally{yd.transition=e}};ge.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ge.useCallback=function(t,e){return on.current.useCallback(t,e)};ge.useContext=function(t){return on.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return on.current.useDeferredValue(t)};ge.useEffect=function(t,e){return on.current.useEffect(t,e)};ge.useId=function(){return on.current.useId()};ge.useImperativeHandle=function(t,e,n){return on.current.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return on.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return on.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return on.current.useMemo(t,e)};ge.useReducer=function(t,e,n){return on.current.useReducer(t,e,n)};ge.useRef=function(t){return on.current.useRef(t)};ge.useState=function(t){return on.current.useState(t)};ge.useSyncExternalStore=function(t,e,n){return on.current.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return on.current.useTransition()};ge.version="18.2.0";Kb.exports=ge;var f=Kb.exports;const nT=qb(f),Ky=KN({__proto__:null,default:nT},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u4=f,d4=Symbol.for("react.element"),h4=Symbol.for("react.fragment"),f4=Object.prototype.hasOwnProperty,m4=u4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p4={key:!0,ref:!0,__self:!0,__source:!0};function rT(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)f4.call(e,r)&&!p4.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:d4,type:t,key:i,ref:o,props:s,_owner:m4.current}}mf.Fragment=h4;mf.jsx=rT;mf.jsxs=rT;Gb.exports=mf;var u=Gb.exports;var Dg={},sT={exports:{}},$n={},iT={exports:{}},oT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,z){var q=I.length;I.push(z);e:for(;0<q;){var j=q-1>>>1,Q=I[j];if(0<s(Q,z))I[j]=z,I[q]=Q,q=j;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var z=I[0],q=I.pop();if(q!==z){I[0]=q;e:for(var j=0,Q=I.length,ee=Q>>>1;j<ee;){var ie=2*(j+1)-1,De=I[ie],ve=ie+1,Re=I[ve];if(0>s(De,q))ve<Q&&0>s(Re,De)?(I[j]=Re,I[ve]=q,j=ve):(I[j]=De,I[ie]=q,j=ie);else if(ve<Q&&0>s(Re,q))I[j]=Re,I[ve]=q,j=ve;else break e}}return z}function s(I,z){var q=I.sortIndex-z.sortIndex;return q!==0?q:I.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,m=3,p=!1,v=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(I){for(var z=n(c);z!==null;){if(z.callback===null)r(c);else if(z.startTime<=I)r(c),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(c)}}function E(I){if(y=!1,w(I),!v)if(n(l)!==null)v=!0,W(S);else{var z=n(c);z!==null&&U(E,z.startTime-I)}}function S(I,z){v=!1,y&&(y=!1,x(b),b=-1),p=!0;var q=m;try{for(w(z),h=n(l);h!==null&&(!(h.expirationTime>z)||I&&!M());){var j=h.callback;if(typeof j=="function"){h.callback=null,m=h.priorityLevel;var Q=j(h.expirationTime<=z);z=t.unstable_now(),typeof Q=="function"?h.callback=Q:h===n(l)&&r(l),w(z)}else r(l);h=n(l)}if(h!==null)var ee=!0;else{var ie=n(c);ie!==null&&U(E,ie.startTime-z),ee=!1}return ee}finally{h=null,m=q,p=!1}}var k=!1,T=null,b=-1,C=5,R=-1;function M(){return!(t.unstable_now()-R<C)}function B(){if(T!==null){var I=t.unstable_now();R=I;var z=!0;try{z=T(!0,I)}finally{z?O():(k=!1,T=null)}}else k=!1}var O;if(typeof g=="function")O=function(){g(B)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,$=V.port2;V.port1.onmessage=B,O=function(){$.postMessage(null)}}else O=function(){_(B,0)};function W(I){T=I,k||(k=!0,O())}function U(I,z){b=_(function(){I(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,W(S))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(I){switch(m){case 1:case 2:case 3:var z=3;break;default:z=m}var q=m;m=z;try{return I()}finally{m=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,z){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var q=m;m=I;try{return z()}finally{m=q}},t.unstable_scheduleCallback=function(I,z,q){var j=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?j+q:j):q=j,I){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=q+Q,I={id:d++,callback:z,priorityLevel:I,startTime:q,expirationTime:Q,sortIndex:-1},q>j?(I.sortIndex=q,e(c,I),n(l)===null&&I===n(c)&&(y?(x(b),b=-1):y=!0,U(E,q-j))):(I.sortIndex=Q,e(l,I),v||p||(v=!0,W(S))),I},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(I){var z=m;return function(){var q=m;m=z;try{return I.apply(this,arguments)}finally{m=q}}}})(oT);iT.exports=oT;var g4=iT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT=f,On=g4;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lT=new Set,Xl={};function xo(t,e){va(t,e),va(t+"Capture",e)}function va(t,e){for(Xl[t]=e,t=0;t<e.length;t++)lT.add(e[t])}var as=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Og=Object.prototype.hasOwnProperty,y4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d1={},h1={};function v4(t){return Og.call(h1,t)?!0:Og.call(d1,t)?!1:y4.test(t)?h1[t]=!0:(d1[t]=!0,!1)}function x4(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function w4(t,e,n,r){if(e===null||typeof e>"u"||x4(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function an(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ot[t]=new an(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ot[e]=new an(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ot[t]=new an(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ot[t]=new an(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ot[t]=new an(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ot[t]=new an(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ot[t]=new an(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ot[t]=new an(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ot[t]=new an(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xy=/[\-:]([a-z])/g;function Qy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xy,Qy);Ot[e]=new an(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xy,Qy);Ot[e]=new an(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xy,Qy);Ot[e]=new an(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ot[t]=new an(t,1,!1,t.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new an("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ot[t]=new an(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yy(t,e,n,r){var s=Ot.hasOwnProperty(e)?Ot[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(w4(e,n,s,r)&&(n=null),r||s===null?v4(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var xs=aT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ru=Symbol.for("react.element"),zo=Symbol.for("react.portal"),Vo=Symbol.for("react.fragment"),Jy=Symbol.for("react.strict_mode"),Mg=Symbol.for("react.profiler"),cT=Symbol.for("react.provider"),uT=Symbol.for("react.context"),Zy=Symbol.for("react.forward_ref"),Lg=Symbol.for("react.suspense"),Fg=Symbol.for("react.suspense_list"),ev=Symbol.for("react.memo"),As=Symbol.for("react.lazy"),dT=Symbol.for("react.offscreen"),f1=Symbol.iterator;function ol(t){return t===null||typeof t!="object"?null:(t=f1&&t[f1]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,rp;function wl(t){if(rp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rp=e&&e[1]||""}return`
`+rp+t}var sp=!1;function ip(t,e){if(!t||sp)return"";sp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{sp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?wl(t):""}function _4(t){switch(t.tag){case 5:return wl(t.type);case 16:return wl("Lazy");case 13:return wl("Suspense");case 19:return wl("SuspenseList");case 0:case 2:case 15:return t=ip(t.type,!1),t;case 11:return t=ip(t.type.render,!1),t;case 1:return t=ip(t.type,!0),t;default:return""}}function $g(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vo:return"Fragment";case zo:return"Portal";case Mg:return"Profiler";case Jy:return"StrictMode";case Lg:return"Suspense";case Fg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case uT:return(t.displayName||"Context")+".Consumer";case cT:return(t._context.displayName||"Context")+".Provider";case Zy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ev:return e=t.displayName||null,e!==null?e:$g(t.type)||"Memo";case As:e=t._payload,t=t._init;try{return $g(t(e))}catch{}}return null}function E4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $g(e);case 8:return e===Jy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ii(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function S4(t){var e=hT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Pu(t){t._valueTracker||(t._valueTracker=S4(t))}function fT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=hT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Hd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bg(t,e){var n=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function m1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ii(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mT(t,e){e=e.checked,e!=null&&Yy(t,"checked",e,!1)}function zg(t,e){mT(t,e);var n=ii(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vg(t,e.type,ii(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function p1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vg(t,e,n){(e!=="number"||Hd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var _l=Array.isArray;function na(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ii(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ug(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function g1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(L(92));if(_l(n)){if(1<n.length)throw Error(L(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ii(n)}}function pT(t,e){var n=ii(e.value),r=ii(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function y1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function gT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?gT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Nu,yT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Nu=Nu||document.createElement("div"),Nu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Nu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ql(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Pl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},b4=["Webkit","ms","Moz","O"];Object.keys(Pl).forEach(function(t){b4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Pl[e]=Pl[t]})});function vT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Pl.hasOwnProperty(t)&&Pl[t]?(""+e).trim():e+"px"}function xT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=vT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var T4=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wg(t,e){if(e){if(T4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function qg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gg=null;function tv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Kg=null,ra=null,sa=null;function v1(t){if(t=Xc(t)){if(typeof Kg!="function")throw Error(L(280));var e=t.stateNode;e&&(e=xf(e),Kg(t.stateNode,t.type,e))}}function wT(t){ra?sa?sa.push(t):sa=[t]:ra=t}function _T(){if(ra){var t=ra,e=sa;if(sa=ra=null,v1(t),e)for(t=0;t<e.length;t++)v1(e[t])}}function ET(t,e){return t(e)}function ST(){}var op=!1;function bT(t,e,n){if(op)return t(e,n);op=!0;try{return ET(t,e,n)}finally{op=!1,(ra!==null||sa!==null)&&(ST(),_T())}}function Yl(t,e){var n=t.stateNode;if(n===null)return null;var r=xf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(L(231,e,typeof n));return n}var Xg=!1;if(as)try{var al={};Object.defineProperty(al,"passive",{get:function(){Xg=!0}}),window.addEventListener("test",al,al),window.removeEventListener("test",al,al)}catch{Xg=!1}function k4(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Nl=!1,Wd=null,qd=!1,Qg=null,I4={onError:function(t){Nl=!0,Wd=t}};function C4(t,e,n,r,s,i,o,a,l){Nl=!1,Wd=null,k4.apply(I4,arguments)}function A4(t,e,n,r,s,i,o,a,l){if(C4.apply(this,arguments),Nl){if(Nl){var c=Wd;Nl=!1,Wd=null}else throw Error(L(198));qd||(qd=!0,Qg=c)}}function wo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function TT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function x1(t){if(wo(t)!==t)throw Error(L(188))}function R4(t){var e=t.alternate;if(!e){if(e=wo(t),e===null)throw Error(L(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return x1(s),t;if(i===r)return x1(s),e;i=i.sibling}throw Error(L(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?t:e}function kT(t){return t=R4(t),t!==null?IT(t):null}function IT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=IT(t);if(e!==null)return e;t=t.sibling}return null}var CT=On.unstable_scheduleCallback,w1=On.unstable_cancelCallback,P4=On.unstable_shouldYield,N4=On.unstable_requestPaint,st=On.unstable_now,j4=On.unstable_getCurrentPriorityLevel,nv=On.unstable_ImmediatePriority,AT=On.unstable_UserBlockingPriority,Gd=On.unstable_NormalPriority,D4=On.unstable_LowPriority,RT=On.unstable_IdlePriority,pf=null,Rr=null;function O4(t){if(Rr&&typeof Rr.onCommitFiberRoot=="function")try{Rr.onCommitFiberRoot(pf,t,void 0,(t.current.flags&128)===128)}catch{}}var hr=Math.clz32?Math.clz32:F4,M4=Math.log,L4=Math.LN2;function F4(t){return t>>>=0,t===0?32:31-(M4(t)/L4|0)|0}var ju=64,Du=4194304;function El(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Kd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=El(a):(i&=o,i!==0&&(r=El(i)))}else o=n&~s,o!==0?r=El(o):i!==0&&(r=El(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-hr(e),s=1<<n,r|=t[n],e&=~s;return r}function $4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function B4(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-hr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=$4(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Yg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function PT(){var t=ju;return ju<<=1,!(ju&4194240)&&(ju=64),t}function ap(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Gc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hr(e),t[e]=n}function z4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-hr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function rv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-hr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ie=0;function NT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jT,sv,DT,OT,MT,Jg=!1,Ou=[],Hs=null,Ws=null,qs=null,Jl=new Map,Zl=new Map,Ps=[],V4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _1(t,e){switch(t){case"focusin":case"focusout":Hs=null;break;case"dragenter":case"dragleave":Ws=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":Jl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zl.delete(e.pointerId)}}function ll(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Xc(e),e!==null&&sv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function U4(t,e,n,r,s){switch(e){case"focusin":return Hs=ll(Hs,t,e,n,r,s),!0;case"dragenter":return Ws=ll(Ws,t,e,n,r,s),!0;case"mouseover":return qs=ll(qs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Jl.set(i,ll(Jl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Zl.set(i,ll(Zl.get(i)||null,t,e,n,r,s)),!0}return!1}function LT(t){var e=Li(t.target);if(e!==null){var n=wo(e);if(n!==null){if(e=n.tag,e===13){if(e=TT(n),e!==null){t.blockedOn=e,MT(t.priority,function(){DT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Gg=r,n.target.dispatchEvent(r),Gg=null}else return e=Xc(n),e!==null&&sv(e),t.blockedOn=n,!1;e.shift()}return!0}function E1(t,e,n){vd(t)&&n.delete(e)}function H4(){Jg=!1,Hs!==null&&vd(Hs)&&(Hs=null),Ws!==null&&vd(Ws)&&(Ws=null),qs!==null&&vd(qs)&&(qs=null),Jl.forEach(E1),Zl.forEach(E1)}function cl(t,e){t.blockedOn===e&&(t.blockedOn=null,Jg||(Jg=!0,On.unstable_scheduleCallback(On.unstable_NormalPriority,H4)))}function ec(t){function e(s){return cl(s,t)}if(0<Ou.length){cl(Ou[0],t);for(var n=1;n<Ou.length;n++){var r=Ou[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Hs!==null&&cl(Hs,t),Ws!==null&&cl(Ws,t),qs!==null&&cl(qs,t),Jl.forEach(e),Zl.forEach(e),n=0;n<Ps.length;n++)r=Ps[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ps.length&&(n=Ps[0],n.blockedOn===null);)LT(n),n.blockedOn===null&&Ps.shift()}var ia=xs.ReactCurrentBatchConfig,Xd=!0;function W4(t,e,n,r){var s=Ie,i=ia.transition;ia.transition=null;try{Ie=1,iv(t,e,n,r)}finally{Ie=s,ia.transition=i}}function q4(t,e,n,r){var s=Ie,i=ia.transition;ia.transition=null;try{Ie=4,iv(t,e,n,r)}finally{Ie=s,ia.transition=i}}function iv(t,e,n,r){if(Xd){var s=Zg(t,e,n,r);if(s===null)yp(t,e,r,Qd,n),_1(t,r);else if(U4(s,t,e,n,r))r.stopPropagation();else if(_1(t,r),e&4&&-1<V4.indexOf(t)){for(;s!==null;){var i=Xc(s);if(i!==null&&jT(i),i=Zg(t,e,n,r),i===null&&yp(t,e,r,Qd,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else yp(t,e,r,null,n)}}var Qd=null;function Zg(t,e,n,r){if(Qd=null,t=tv(r),t=Li(t),t!==null)if(e=wo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=TT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qd=t,null}function FT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(j4()){case nv:return 1;case AT:return 4;case Gd:case D4:return 16;case RT:return 536870912;default:return 16}default:return 16}}var $s=null,ov=null,xd=null;function $T(){if(xd)return xd;var t,e=ov,n=e.length,r,s="value"in $s?$s.value:$s.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return xd=s.slice(t,1<r?1-r:void 0)}function wd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mu(){return!0}function S1(){return!1}function Bn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Mu:S1,this.isPropagationStopped=S1,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mu)},persist:function(){},isPersistent:Mu}),e}var Ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},av=Bn(Ha),Kc=Ke({},Ha,{view:0,detail:0}),G4=Bn(Kc),lp,cp,ul,gf=Ke({},Kc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ul&&(ul&&t.type==="mousemove"?(lp=t.screenX-ul.screenX,cp=t.screenY-ul.screenY):cp=lp=0,ul=t),lp)},movementY:function(t){return"movementY"in t?t.movementY:cp}}),b1=Bn(gf),K4=Ke({},gf,{dataTransfer:0}),X4=Bn(K4),Q4=Ke({},Kc,{relatedTarget:0}),up=Bn(Q4),Y4=Ke({},Ha,{animationName:0,elapsedTime:0,pseudoElement:0}),J4=Bn(Y4),Z4=Ke({},Ha,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),e5=Bn(Z4),t5=Ke({},Ha,{data:0}),T1=Bn(t5),n5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},r5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},s5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function i5(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=s5[t])?!!e[t]:!1}function lv(){return i5}var o5=Ke({},Kc,{key:function(t){if(t.key){var e=n5[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?r5[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lv,charCode:function(t){return t.type==="keypress"?wd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),a5=Bn(o5),l5=Ke({},gf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),k1=Bn(l5),c5=Ke({},Kc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lv}),u5=Bn(c5),d5=Ke({},Ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),h5=Bn(d5),f5=Ke({},gf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),m5=Bn(f5),p5=[9,13,27,32],cv=as&&"CompositionEvent"in window,jl=null;as&&"documentMode"in document&&(jl=document.documentMode);var g5=as&&"TextEvent"in window&&!jl,BT=as&&(!cv||jl&&8<jl&&11>=jl),I1=String.fromCharCode(32),C1=!1;function zT(t,e){switch(t){case"keyup":return p5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function VT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Uo=!1;function y5(t,e){switch(t){case"compositionend":return VT(e);case"keypress":return e.which!==32?null:(C1=!0,I1);case"textInput":return t=e.data,t===I1&&C1?null:t;default:return null}}function v5(t,e){if(Uo)return t==="compositionend"||!cv&&zT(t,e)?(t=$T(),xd=ov=$s=null,Uo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return BT&&e.locale!=="ko"?null:e.data;default:return null}}var x5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!x5[t.type]:e==="textarea"}function UT(t,e,n,r){wT(r),e=Yd(e,"onChange"),0<e.length&&(n=new av("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Dl=null,tc=null;function w5(t){ek(t,0)}function yf(t){var e=qo(t);if(fT(e))return t}function _5(t,e){if(t==="change")return e}var HT=!1;if(as){var dp;if(as){var hp="oninput"in document;if(!hp){var R1=document.createElement("div");R1.setAttribute("oninput","return;"),hp=typeof R1.oninput=="function"}dp=hp}else dp=!1;HT=dp&&(!document.documentMode||9<document.documentMode)}function P1(){Dl&&(Dl.detachEvent("onpropertychange",WT),tc=Dl=null)}function WT(t){if(t.propertyName==="value"&&yf(tc)){var e=[];UT(e,tc,t,tv(t)),bT(w5,e)}}function E5(t,e,n){t==="focusin"?(P1(),Dl=e,tc=n,Dl.attachEvent("onpropertychange",WT)):t==="focusout"&&P1()}function S5(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yf(tc)}function b5(t,e){if(t==="click")return yf(e)}function T5(t,e){if(t==="input"||t==="change")return yf(e)}function k5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mr=typeof Object.is=="function"?Object.is:k5;function nc(t,e){if(mr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Og.call(e,s)||!mr(t[s],e[s]))return!1}return!0}function N1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function j1(t,e){var n=N1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=N1(n)}}function qT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function GT(){for(var t=window,e=Hd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Hd(t.document)}return e}function uv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function I5(t){var e=GT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qT(n.ownerDocument.documentElement,n)){if(r!==null&&uv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=j1(n,i);var o=j1(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var C5=as&&"documentMode"in document&&11>=document.documentMode,Ho=null,e0=null,Ol=null,t0=!1;function D1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;t0||Ho==null||Ho!==Hd(r)||(r=Ho,"selectionStart"in r&&uv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ol&&nc(Ol,r)||(Ol=r,r=Yd(e0,"onSelect"),0<r.length&&(e=new av("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ho)))}function Lu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wo={animationend:Lu("Animation","AnimationEnd"),animationiteration:Lu("Animation","AnimationIteration"),animationstart:Lu("Animation","AnimationStart"),transitionend:Lu("Transition","TransitionEnd")},fp={},KT={};as&&(KT=document.createElement("div").style,"AnimationEvent"in window||(delete Wo.animationend.animation,delete Wo.animationiteration.animation,delete Wo.animationstart.animation),"TransitionEvent"in window||delete Wo.transitionend.transition);function vf(t){if(fp[t])return fp[t];if(!Wo[t])return t;var e=Wo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in KT)return fp[t]=e[n];return t}var XT=vf("animationend"),QT=vf("animationiteration"),YT=vf("animationstart"),JT=vf("transitionend"),ZT=new Map,O1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vi(t,e){ZT.set(t,e),xo(e,[t])}for(var mp=0;mp<O1.length;mp++){var pp=O1[mp],A5=pp.toLowerCase(),R5=pp[0].toUpperCase()+pp.slice(1);vi(A5,"on"+R5)}vi(XT,"onAnimationEnd");vi(QT,"onAnimationIteration");vi(YT,"onAnimationStart");vi("dblclick","onDoubleClick");vi("focusin","onFocus");vi("focusout","onBlur");vi(JT,"onTransitionEnd");va("onMouseEnter",["mouseout","mouseover"]);va("onMouseLeave",["mouseout","mouseover"]);va("onPointerEnter",["pointerout","pointerover"]);va("onPointerLeave",["pointerout","pointerover"]);xo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xo("onBeforeInput",["compositionend","keypress","textInput","paste"]);xo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sl));function M1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,A4(r,e,void 0,t),t.currentTarget=null}function ek(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;M1(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;M1(s,a,c),i=l}}}if(qd)throw t=Qg,qd=!1,Qg=null,t}function Fe(t,e){var n=e[o0];n===void 0&&(n=e[o0]=new Set);var r=t+"__bubble";n.has(r)||(tk(e,t,2,!1),n.add(r))}function gp(t,e,n){var r=0;e&&(r|=4),tk(n,t,r,e)}var Fu="_reactListening"+Math.random().toString(36).slice(2);function rc(t){if(!t[Fu]){t[Fu]=!0,lT.forEach(function(n){n!=="selectionchange"&&(P5.has(n)||gp(n,!1,t),gp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fu]||(e[Fu]=!0,gp("selectionchange",!1,e))}}function tk(t,e,n,r){switch(FT(e)){case 1:var s=W4;break;case 4:s=q4;break;default:s=iv}n=s.bind(null,e,n,t),s=void 0,!Xg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function yp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Li(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}bT(function(){var c=i,d=tv(n),h=[];e:{var m=ZT.get(t);if(m!==void 0){var p=av,v=t;switch(t){case"keypress":if(wd(n)===0)break e;case"keydown":case"keyup":p=a5;break;case"focusin":v="focus",p=up;break;case"focusout":v="blur",p=up;break;case"beforeblur":case"afterblur":p=up;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=b1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=X4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=u5;break;case XT:case QT:case YT:p=J4;break;case JT:p=h5;break;case"scroll":p=G4;break;case"wheel":p=m5;break;case"copy":case"cut":case"paste":p=e5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=k1}var y=(e&4)!==0,_=!y&&t==="scroll",x=y?m!==null?m+"Capture":null:m;y=[];for(var g=c,w;g!==null;){w=g;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,x!==null&&(E=Yl(g,x),E!=null&&y.push(sc(g,E,w)))),_)break;g=g.return}0<y.length&&(m=new p(m,v,null,n,d),h.push({event:m,listeners:y}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==Gg&&(v=n.relatedTarget||n.fromElement)&&(Li(v)||v[ls]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(v=n.relatedTarget||n.toElement,p=c,v=v?Li(v):null,v!==null&&(_=wo(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=c),p!==v)){if(y=b1,E="onMouseLeave",x="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(y=k1,E="onPointerLeave",x="onPointerEnter",g="pointer"),_=p==null?m:qo(p),w=v==null?m:qo(v),m=new y(E,g+"leave",p,n,d),m.target=_,m.relatedTarget=w,E=null,Li(d)===c&&(y=new y(x,g+"enter",v,n,d),y.target=w,y.relatedTarget=_,E=y),_=E,p&&v)t:{for(y=p,x=v,g=0,w=y;w;w=Ro(w))g++;for(w=0,E=x;E;E=Ro(E))w++;for(;0<g-w;)y=Ro(y),g--;for(;0<w-g;)x=Ro(x),w--;for(;g--;){if(y===x||x!==null&&y===x.alternate)break t;y=Ro(y),x=Ro(x)}y=null}else y=null;p!==null&&L1(h,m,p,y,!1),v!==null&&_!==null&&L1(h,_,v,y,!0)}}e:{if(m=c?qo(c):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var S=_5;else if(A1(m))if(HT)S=T5;else{S=S5;var k=E5}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=b5);if(S&&(S=S(t,c))){UT(h,S,n,d);break e}k&&k(t,m,c),t==="focusout"&&(k=m._wrapperState)&&k.controlled&&m.type==="number"&&Vg(m,"number",m.value)}switch(k=c?qo(c):window,t){case"focusin":(A1(k)||k.contentEditable==="true")&&(Ho=k,e0=c,Ol=null);break;case"focusout":Ol=e0=Ho=null;break;case"mousedown":t0=!0;break;case"contextmenu":case"mouseup":case"dragend":t0=!1,D1(h,n,d);break;case"selectionchange":if(C5)break;case"keydown":case"keyup":D1(h,n,d)}var T;if(cv)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Uo?zT(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(BT&&n.locale!=="ko"&&(Uo||b!=="onCompositionStart"?b==="onCompositionEnd"&&Uo&&(T=$T()):($s=d,ov="value"in $s?$s.value:$s.textContent,Uo=!0)),k=Yd(c,b),0<k.length&&(b=new T1(b,t,null,n,d),h.push({event:b,listeners:k}),T?b.data=T:(T=VT(n),T!==null&&(b.data=T)))),(T=g5?y5(t,n):v5(t,n))&&(c=Yd(c,"onBeforeInput"),0<c.length&&(d=new T1("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=T))}ek(h,e)})}function sc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yd(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Yl(t,n),i!=null&&r.unshift(sc(t,i,s)),i=Yl(t,e),i!=null&&r.push(sc(t,i,s))),t=t.return}return r}function Ro(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function L1(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Yl(n,i),l!=null&&o.unshift(sc(n,l,a))):s||(l=Yl(n,i),l!=null&&o.push(sc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var N5=/\r\n?/g,j5=/\u0000|\uFFFD/g;function F1(t){return(typeof t=="string"?t:""+t).replace(N5,`
`).replace(j5,"")}function $u(t,e,n){if(e=F1(e),F1(t)!==e&&n)throw Error(L(425))}function Jd(){}var n0=null,r0=null;function s0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var i0=typeof setTimeout=="function"?setTimeout:void 0,D5=typeof clearTimeout=="function"?clearTimeout:void 0,$1=typeof Promise=="function"?Promise:void 0,O5=typeof queueMicrotask=="function"?queueMicrotask:typeof $1<"u"?function(t){return $1.resolve(null).then(t).catch(M5)}:i0;function M5(t){setTimeout(function(){throw t})}function vp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ec(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ec(e)}function Gs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function B1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Wa=Math.random().toString(36).slice(2),Er="__reactFiber$"+Wa,ic="__reactProps$"+Wa,ls="__reactContainer$"+Wa,o0="__reactEvents$"+Wa,L5="__reactListeners$"+Wa,F5="__reactHandles$"+Wa;function Li(t){var e=t[Er];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ls]||n[Er]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=B1(t);t!==null;){if(n=t[Er])return n;t=B1(t)}return e}t=n,n=t.parentNode}return null}function Xc(t){return t=t[Er]||t[ls],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function xf(t){return t[ic]||null}var a0=[],Go=-1;function xi(t){return{current:t}}function ze(t){0>Go||(t.current=a0[Go],a0[Go]=null,Go--)}function Me(t,e){Go++,a0[Go]=t.current,t.current=e}var oi={},Kt=xi(oi),mn=xi(!1),Yi=oi;function xa(t,e){var n=t.type.contextTypes;if(!n)return oi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function pn(t){return t=t.childContextTypes,t!=null}function Zd(){ze(mn),ze(Kt)}function z1(t,e,n){if(Kt.current!==oi)throw Error(L(168));Me(Kt,e),Me(mn,n)}function nk(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(L(108,E4(t)||"Unknown",s));return Ke({},n,r)}function eh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||oi,Yi=Kt.current,Me(Kt,t),Me(mn,mn.current),!0}function V1(t,e,n){var r=t.stateNode;if(!r)throw Error(L(169));n?(t=nk(t,e,Yi),r.__reactInternalMemoizedMergedChildContext=t,ze(mn),ze(Kt),Me(Kt,t)):ze(mn),Me(mn,n)}var Qr=null,wf=!1,xp=!1;function rk(t){Qr===null?Qr=[t]:Qr.push(t)}function $5(t){wf=!0,rk(t)}function wi(){if(!xp&&Qr!==null){xp=!0;var t=0,e=Ie;try{var n=Qr;for(Ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qr=null,wf=!1}catch(s){throw Qr!==null&&(Qr=Qr.slice(t+1)),CT(nv,wi),s}finally{Ie=e,xp=!1}}return null}var Ko=[],Xo=0,th=null,nh=0,Gn=[],Kn=0,Ji=null,Yr=1,Jr="";function Pi(t,e){Ko[Xo++]=nh,Ko[Xo++]=th,th=t,nh=e}function sk(t,e,n){Gn[Kn++]=Yr,Gn[Kn++]=Jr,Gn[Kn++]=Ji,Ji=t;var r=Yr;t=Jr;var s=32-hr(r)-1;r&=~(1<<s),n+=1;var i=32-hr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Yr=1<<32-hr(e)+s|n<<s|r,Jr=i+t}else Yr=1<<i|n<<s|r,Jr=t}function dv(t){t.return!==null&&(Pi(t,1),sk(t,1,0))}function hv(t){for(;t===th;)th=Ko[--Xo],Ko[Xo]=null,nh=Ko[--Xo],Ko[Xo]=null;for(;t===Ji;)Ji=Gn[--Kn],Gn[Kn]=null,Jr=Gn[--Kn],Gn[Kn]=null,Yr=Gn[--Kn],Gn[Kn]=null}var Nn=null,Cn=null,We=!1,ar=null;function ik(t,e){var n=Yn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function U1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Nn=t,Cn=Gs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Nn=t,Cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ji!==null?{id:Yr,overflow:Jr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Nn=t,Cn=null,!0):!1;default:return!1}}function l0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function c0(t){if(We){var e=Cn;if(e){var n=e;if(!U1(t,e)){if(l0(t))throw Error(L(418));e=Gs(n.nextSibling);var r=Nn;e&&U1(t,e)?ik(r,n):(t.flags=t.flags&-4097|2,We=!1,Nn=t)}}else{if(l0(t))throw Error(L(418));t.flags=t.flags&-4097|2,We=!1,Nn=t}}}function H1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Nn=t}function Bu(t){if(t!==Nn)return!1;if(!We)return H1(t),We=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!s0(t.type,t.memoizedProps)),e&&(e=Cn)){if(l0(t))throw ok(),Error(L(418));for(;e;)ik(t,e),e=Gs(e.nextSibling)}if(H1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Cn=Gs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Cn=null}}else Cn=Nn?Gs(t.stateNode.nextSibling):null;return!0}function ok(){for(var t=Cn;t;)t=Gs(t.nextSibling)}function wa(){Cn=Nn=null,We=!1}function fv(t){ar===null?ar=[t]:ar.push(t)}var B5=xs.ReactCurrentBatchConfig;function ir(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var rh=xi(null),sh=null,Qo=null,mv=null;function pv(){mv=Qo=sh=null}function gv(t){var e=rh.current;ze(rh),t._currentValue=e}function u0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function oa(t,e){sh=t,mv=Qo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fn=!0),t.firstContext=null)}function er(t){var e=t._currentValue;if(mv!==t)if(t={context:t,memoizedValue:e,next:null},Qo===null){if(sh===null)throw Error(L(308));Qo=t,sh.dependencies={lanes:0,firstContext:t}}else Qo=Qo.next=t;return e}var Fi=null;function yv(t){Fi===null?Fi=[t]:Fi.push(t)}function ak(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,yv(e)):(n.next=s.next,s.next=n),e.interleaved=n,cs(t,r)}function cs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Rs=!1;function vv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ss(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ks(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,cs(t,n)}return s=r.interleaved,s===null?(e.next=e,yv(r)):(e.next=s.next,s.next=e),r.interleaved=e,cs(t,n)}function _d(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rv(t,n)}}function W1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ih(t,e,n,r){var s=t.updateQueue;Rs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var m=a.lane,p=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,y=a;switch(m=e,p=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){h=v.call(p,h,m);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,m=typeof v=="function"?v.call(p,h,m):v,m==null)break e;h=Ke({},h,m);break e;case 2:Rs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else p={eventTime:p,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(1);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);eo|=o,t.lanes=o,t.memoizedState=h}}function q1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(L(191,s));s.call(r)}}}var ck=new aT.Component().refs;function d0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _f={isMounted:function(t){return(t=t._reactInternals)?wo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=nn(),s=Qs(t),i=ss(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ks(t,i,s),e!==null&&(fr(e,t,s,r),_d(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=nn(),s=Qs(t),i=ss(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ks(t,i,s),e!==null&&(fr(e,t,s,r),_d(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=nn(),r=Qs(t),s=ss(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ks(t,s,r),e!==null&&(fr(e,t,r,n),_d(e,t,r))}};function G1(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!nc(n,r)||!nc(s,i):!0}function uk(t,e,n){var r=!1,s=oi,i=e.contextType;return typeof i=="object"&&i!==null?i=er(i):(s=pn(e)?Yi:Kt.current,r=e.contextTypes,i=(r=r!=null)?xa(t,s):oi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_f,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function K1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_f.enqueueReplaceState(e,e.state,null)}function h0(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=ck,vv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=er(i):(i=pn(e)?Yi:Kt.current,s.context=xa(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(d0(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&_f.enqueueReplaceState(s,s.state,null),ih(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function dl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===ck&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,t))}return t}function zu(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function X1(t){var e=t._init;return e(t._payload)}function dk(t){function e(x,g){if(t){var w=x.deletions;w===null?(x.deletions=[g],x.flags|=16):w.push(g)}}function n(x,g){if(!t)return null;for(;g!==null;)e(x,g),g=g.sibling;return null}function r(x,g){for(x=new Map;g!==null;)g.key!==null?x.set(g.key,g):x.set(g.index,g),g=g.sibling;return x}function s(x,g){return x=Ys(x,g),x.index=0,x.sibling=null,x}function i(x,g,w){return x.index=w,t?(w=x.alternate,w!==null?(w=w.index,w<g?(x.flags|=2,g):w):(x.flags|=2,g)):(x.flags|=1048576,g)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,g,w,E){return g===null||g.tag!==6?(g=kp(w,x.mode,E),g.return=x,g):(g=s(g,w),g.return=x,g)}function l(x,g,w,E){var S=w.type;return S===Vo?d(x,g,w.props.children,E,w.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===As&&X1(S)===g.type)?(E=s(g,w.props),E.ref=dl(x,g,w),E.return=x,E):(E=Id(w.type,w.key,w.props,null,x.mode,E),E.ref=dl(x,g,w),E.return=x,E)}function c(x,g,w,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=Ip(w,x.mode,E),g.return=x,g):(g=s(g,w.children||[]),g.return=x,g)}function d(x,g,w,E,S){return g===null||g.tag!==7?(g=qi(w,x.mode,E,S),g.return=x,g):(g=s(g,w),g.return=x,g)}function h(x,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=kp(""+g,x.mode,w),g.return=x,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ru:return w=Id(g.type,g.key,g.props,null,x.mode,w),w.ref=dl(x,null,g),w.return=x,w;case zo:return g=Ip(g,x.mode,w),g.return=x,g;case As:var E=g._init;return h(x,E(g._payload),w)}if(_l(g)||ol(g))return g=qi(g,x.mode,w,null),g.return=x,g;zu(x,g)}return null}function m(x,g,w,E){var S=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(x,g,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ru:return w.key===S?l(x,g,w,E):null;case zo:return w.key===S?c(x,g,w,E):null;case As:return S=w._init,m(x,g,S(w._payload),E)}if(_l(w)||ol(w))return S!==null?null:d(x,g,w,E,null);zu(x,w)}return null}function p(x,g,w,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return x=x.get(w)||null,a(g,x,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ru:return x=x.get(E.key===null?w:E.key)||null,l(g,x,E,S);case zo:return x=x.get(E.key===null?w:E.key)||null,c(g,x,E,S);case As:var k=E._init;return p(x,g,w,k(E._payload),S)}if(_l(E)||ol(E))return x=x.get(w)||null,d(g,x,E,S,null);zu(g,E)}return null}function v(x,g,w,E){for(var S=null,k=null,T=g,b=g=0,C=null;T!==null&&b<w.length;b++){T.index>b?(C=T,T=null):C=T.sibling;var R=m(x,T,w[b],E);if(R===null){T===null&&(T=C);break}t&&T&&R.alternate===null&&e(x,T),g=i(R,g,b),k===null?S=R:k.sibling=R,k=R,T=C}if(b===w.length)return n(x,T),We&&Pi(x,b),S;if(T===null){for(;b<w.length;b++)T=h(x,w[b],E),T!==null&&(g=i(T,g,b),k===null?S=T:k.sibling=T,k=T);return We&&Pi(x,b),S}for(T=r(x,T);b<w.length;b++)C=p(T,x,b,w[b],E),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?b:C.key),g=i(C,g,b),k===null?S=C:k.sibling=C,k=C);return t&&T.forEach(function(M){return e(x,M)}),We&&Pi(x,b),S}function y(x,g,w,E){var S=ol(w);if(typeof S!="function")throw Error(L(150));if(w=S.call(w),w==null)throw Error(L(151));for(var k=S=null,T=g,b=g=0,C=null,R=w.next();T!==null&&!R.done;b++,R=w.next()){T.index>b?(C=T,T=null):C=T.sibling;var M=m(x,T,R.value,E);if(M===null){T===null&&(T=C);break}t&&T&&M.alternate===null&&e(x,T),g=i(M,g,b),k===null?S=M:k.sibling=M,k=M,T=C}if(R.done)return n(x,T),We&&Pi(x,b),S;if(T===null){for(;!R.done;b++,R=w.next())R=h(x,R.value,E),R!==null&&(g=i(R,g,b),k===null?S=R:k.sibling=R,k=R);return We&&Pi(x,b),S}for(T=r(x,T);!R.done;b++,R=w.next())R=p(T,x,b,R.value,E),R!==null&&(t&&R.alternate!==null&&T.delete(R.key===null?b:R.key),g=i(R,g,b),k===null?S=R:k.sibling=R,k=R);return t&&T.forEach(function(B){return e(x,B)}),We&&Pi(x,b),S}function _(x,g,w,E){if(typeof w=="object"&&w!==null&&w.type===Vo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ru:e:{for(var S=w.key,k=g;k!==null;){if(k.key===S){if(S=w.type,S===Vo){if(k.tag===7){n(x,k.sibling),g=s(k,w.props.children),g.return=x,x=g;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===As&&X1(S)===k.type){n(x,k.sibling),g=s(k,w.props),g.ref=dl(x,k,w),g.return=x,x=g;break e}n(x,k);break}else e(x,k);k=k.sibling}w.type===Vo?(g=qi(w.props.children,x.mode,E,w.key),g.return=x,x=g):(E=Id(w.type,w.key,w.props,null,x.mode,E),E.ref=dl(x,g,w),E.return=x,x=E)}return o(x);case zo:e:{for(k=w.key;g!==null;){if(g.key===k)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(x,g.sibling),g=s(g,w.children||[]),g.return=x,x=g;break e}else{n(x,g);break}else e(x,g);g=g.sibling}g=Ip(w,x.mode,E),g.return=x,x=g}return o(x);case As:return k=w._init,_(x,g,k(w._payload),E)}if(_l(w))return v(x,g,w,E);if(ol(w))return y(x,g,w,E);zu(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(x,g.sibling),g=s(g,w),g.return=x,x=g):(n(x,g),g=kp(w,x.mode,E),g.return=x,x=g),o(x)):n(x,g)}return _}var _a=dk(!0),hk=dk(!1),Qc={},Pr=xi(Qc),oc=xi(Qc),ac=xi(Qc);function $i(t){if(t===Qc)throw Error(L(174));return t}function xv(t,e){switch(Me(ac,e),Me(oc,t),Me(Pr,Qc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Hg(e,t)}ze(Pr),Me(Pr,e)}function Ea(){ze(Pr),ze(oc),ze(ac)}function fk(t){$i(ac.current);var e=$i(Pr.current),n=Hg(e,t.type);e!==n&&(Me(oc,t),Me(Pr,n))}function wv(t){oc.current===t&&(ze(Pr),ze(oc))}var qe=xi(0);function oh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wp=[];function _v(){for(var t=0;t<wp.length;t++)wp[t]._workInProgressVersionPrimary=null;wp.length=0}var Ed=xs.ReactCurrentDispatcher,_p=xs.ReactCurrentBatchConfig,Zi=0,Ge=null,yt=null,Et=null,ah=!1,Ml=!1,lc=0,z5=0;function Mt(){throw Error(L(321))}function Ev(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mr(t[n],e[n]))return!1;return!0}function Sv(t,e,n,r,s,i){if(Zi=i,Ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ed.current=t===null||t.memoizedState===null?W5:q5,t=n(r,s),Ml){i=0;do{if(Ml=!1,lc=0,25<=i)throw Error(L(301));i+=1,Et=yt=null,e.updateQueue=null,Ed.current=G5,t=n(r,s)}while(Ml)}if(Ed.current=lh,e=yt!==null&&yt.next!==null,Zi=0,Et=yt=Ge=null,ah=!1,e)throw Error(L(300));return t}function bv(){var t=lc!==0;return lc=0,t}function wr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Ge.memoizedState=Et=t:Et=Et.next=t,Et}function tr(){if(yt===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var e=Et===null?Ge.memoizedState:Et.next;if(e!==null)Et=e,yt=t;else{if(t===null)throw Error(L(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Et===null?Ge.memoizedState=Et=t:Et=Et.next=t}return Et}function cc(t,e){return typeof e=="function"?e(t):e}function Ep(t){var e=tr(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=yt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Zi&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Ge.lanes|=d,eo|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,mr(r,e.memoizedState)||(fn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ge.lanes|=i,eo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Sp(t){var e=tr(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);mr(i,e.memoizedState)||(fn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function mk(){}function pk(t,e){var n=Ge,r=tr(),s=e(),i=!mr(r.memoizedState,s);if(i&&(r.memoizedState=s,fn=!0),r=r.queue,Tv(vk.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Et!==null&&Et.memoizedState.tag&1){if(n.flags|=2048,uc(9,yk.bind(null,n,r,s,e),void 0,null),Tt===null)throw Error(L(349));Zi&30||gk(n,e,s)}return s}function gk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function yk(t,e,n,r){e.value=n,e.getSnapshot=r,xk(e)&&wk(t)}function vk(t,e,n){return n(function(){xk(e)&&wk(t)})}function xk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mr(t,n)}catch{return!0}}function wk(t){var e=cs(t,1);e!==null&&fr(e,t,1,-1)}function Q1(t){var e=wr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cc,lastRenderedState:t},e.queue=t,t=t.dispatch=H5.bind(null,Ge,t),[e.memoizedState,t]}function uc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function _k(){return tr().memoizedState}function Sd(t,e,n,r){var s=wr();Ge.flags|=t,s.memoizedState=uc(1|e,n,void 0,r===void 0?null:r)}function Ef(t,e,n,r){var s=tr();r=r===void 0?null:r;var i=void 0;if(yt!==null){var o=yt.memoizedState;if(i=o.destroy,r!==null&&Ev(r,o.deps)){s.memoizedState=uc(e,n,i,r);return}}Ge.flags|=t,s.memoizedState=uc(1|e,n,i,r)}function Y1(t,e){return Sd(8390656,8,t,e)}function Tv(t,e){return Ef(2048,8,t,e)}function Ek(t,e){return Ef(4,2,t,e)}function Sk(t,e){return Ef(4,4,t,e)}function bk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Tk(t,e,n){return n=n!=null?n.concat([t]):null,Ef(4,4,bk.bind(null,e,t),n)}function kv(){}function kk(t,e){var n=tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ev(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ik(t,e){var n=tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ev(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ck(t,e,n){return Zi&21?(mr(n,e)||(n=PT(),Ge.lanes|=n,eo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fn=!0),t.memoizedState=n)}function V5(t,e){var n=Ie;Ie=n!==0&&4>n?n:4,t(!0);var r=_p.transition;_p.transition={};try{t(!1),e()}finally{Ie=n,_p.transition=r}}function Ak(){return tr().memoizedState}function U5(t,e,n){var r=Qs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Rk(t))Pk(e,n);else if(n=ak(t,e,n,r),n!==null){var s=nn();fr(n,t,r,s),Nk(n,e,r)}}function H5(t,e,n){var r=Qs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Rk(t))Pk(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,mr(a,o)){var l=e.interleaved;l===null?(s.next=s,yv(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=ak(t,e,s,r),n!==null&&(s=nn(),fr(n,t,r,s),Nk(n,e,r))}}function Rk(t){var e=t.alternate;return t===Ge||e!==null&&e===Ge}function Pk(t,e){Ml=ah=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Nk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rv(t,n)}}var lh={readContext:er,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},W5={readContext:er,useCallback:function(t,e){return wr().memoizedState=[t,e===void 0?null:e],t},useContext:er,useEffect:Y1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Sd(4194308,4,bk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sd(4,2,t,e)},useMemo:function(t,e){var n=wr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=wr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=U5.bind(null,Ge,t),[r.memoizedState,t]},useRef:function(t){var e=wr();return t={current:t},e.memoizedState=t},useState:Q1,useDebugValue:kv,useDeferredValue:function(t){return wr().memoizedState=t},useTransition:function(){var t=Q1(!1),e=t[0];return t=V5.bind(null,t[1]),wr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ge,s=wr();if(We){if(n===void 0)throw Error(L(407));n=n()}else{if(n=e(),Tt===null)throw Error(L(349));Zi&30||gk(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Y1(vk.bind(null,r,i,t),[t]),r.flags|=2048,uc(9,yk.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=wr(),e=Tt.identifierPrefix;if(We){var n=Jr,r=Yr;n=(r&~(1<<32-hr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=lc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=z5++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},q5={readContext:er,useCallback:kk,useContext:er,useEffect:Tv,useImperativeHandle:Tk,useInsertionEffect:Ek,useLayoutEffect:Sk,useMemo:Ik,useReducer:Ep,useRef:_k,useState:function(){return Ep(cc)},useDebugValue:kv,useDeferredValue:function(t){var e=tr();return Ck(e,yt.memoizedState,t)},useTransition:function(){var t=Ep(cc)[0],e=tr().memoizedState;return[t,e]},useMutableSource:mk,useSyncExternalStore:pk,useId:Ak,unstable_isNewReconciler:!1},G5={readContext:er,useCallback:kk,useContext:er,useEffect:Tv,useImperativeHandle:Tk,useInsertionEffect:Ek,useLayoutEffect:Sk,useMemo:Ik,useReducer:Sp,useRef:_k,useState:function(){return Sp(cc)},useDebugValue:kv,useDeferredValue:function(t){var e=tr();return yt===null?e.memoizedState=t:Ck(e,yt.memoizedState,t)},useTransition:function(){var t=Sp(cc)[0],e=tr().memoizedState;return[t,e]},useMutableSource:mk,useSyncExternalStore:pk,useId:Ak,unstable_isNewReconciler:!1};function Sa(t,e){try{var n="",r=e;do n+=_4(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function bp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function f0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var K5=typeof WeakMap=="function"?WeakMap:Map;function jk(t,e,n){n=ss(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){uh||(uh=!0,S0=r),f0(t,e)},n}function Dk(t,e,n){n=ss(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){f0(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){f0(t,e),typeof r!="function"&&(Xs===null?Xs=new Set([this]):Xs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function J1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new K5;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=l3.bind(null,t,e,n),e.then(t,t))}function Z1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function e_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ss(-1,1),e.tag=2,Ks(n,e,1))),n.lanes|=1),t)}var X5=xs.ReactCurrentOwner,fn=!1;function Zt(t,e,n,r){e.child=t===null?hk(e,null,n,r):_a(e,t.child,n,r)}function t_(t,e,n,r,s){n=n.render;var i=e.ref;return oa(e,s),r=Sv(t,e,n,r,i,s),n=bv(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,us(t,e,s)):(We&&n&&dv(e),e.flags|=1,Zt(t,e,r,s),e.child)}function n_(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Dv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Ok(t,e,i,r,s)):(t=Id(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:nc,n(o,r)&&t.ref===e.ref)return us(t,e,s)}return e.flags|=1,t=Ys(i,r),t.ref=e.ref,t.return=e,e.child=t}function Ok(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(nc(i,r)&&t.ref===e.ref)if(fn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(fn=!0);else return e.lanes=t.lanes,us(t,e,s)}return m0(t,e,n,r,s)}function Mk(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(Jo,kn),kn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Me(Jo,kn),kn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Me(Jo,kn),kn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Me(Jo,kn),kn|=r;return Zt(t,e,s,n),e.child}function Lk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function m0(t,e,n,r,s){var i=pn(n)?Yi:Kt.current;return i=xa(e,i),oa(e,s),n=Sv(t,e,n,r,i,s),r=bv(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,us(t,e,s)):(We&&r&&dv(e),e.flags|=1,Zt(t,e,n,s),e.child)}function r_(t,e,n,r,s){if(pn(n)){var i=!0;eh(e)}else i=!1;if(oa(e,s),e.stateNode===null)bd(t,e),uk(e,n,r),h0(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=er(c):(c=pn(n)?Yi:Kt.current,c=xa(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&K1(e,o,r,c),Rs=!1;var m=e.memoizedState;o.state=m,ih(e,r,o,s),l=e.memoizedState,a!==r||m!==l||mn.current||Rs?(typeof d=="function"&&(d0(e,n,d,r),l=e.memoizedState),(a=Rs||G1(e,n,a,r,m,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,lk(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ir(e.type,a),o.props=c,h=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=er(l):(l=pn(n)?Yi:Kt.current,l=xa(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==l)&&K1(e,o,r,l),Rs=!1,m=e.memoizedState,o.state=m,ih(e,r,o,s);var v=e.memoizedState;a!==h||m!==v||mn.current||Rs?(typeof p=="function"&&(d0(e,n,p,r),v=e.memoizedState),(c=Rs||G1(e,n,c,r,m,v,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return p0(t,e,n,r,i,s)}function p0(t,e,n,r,s,i){Lk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&V1(e,n,!1),us(t,e,i);r=e.stateNode,X5.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=_a(e,t.child,null,i),e.child=_a(e,null,a,i)):Zt(t,e,a,i),e.memoizedState=r.state,s&&V1(e,n,!0),e.child}function Fk(t){var e=t.stateNode;e.pendingContext?z1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&z1(t,e.context,!1),xv(t,e.containerInfo)}function s_(t,e,n,r,s){return wa(),fv(s),e.flags|=256,Zt(t,e,n,r),e.child}var g0={dehydrated:null,treeContext:null,retryLane:0};function y0(t){return{baseLanes:t,cachePool:null,transitions:null}}function $k(t,e,n){var r=e.pendingProps,s=qe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Me(qe,s&1),t===null)return c0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Tf(o,r,0,null),t=qi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=y0(n),e.memoizedState=g0,t):Iv(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Q5(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ys(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ys(a,i):(i=qi(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?y0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=g0,r}return i=t.child,t=i.sibling,r=Ys(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Iv(t,e){return e=Tf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vu(t,e,n,r){return r!==null&&fv(r),_a(e,t.child,null,n),t=Iv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Q5(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=bp(Error(L(422))),Vu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Tf({mode:"visible",children:r.children},s,0,null),i=qi(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&_a(e,t.child,null,o),e.child.memoizedState=y0(o),e.memoizedState=g0,i);if(!(e.mode&1))return Vu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(L(419)),r=bp(i,r,void 0),Vu(t,e,o,r)}if(a=(o&t.childLanes)!==0,fn||a){if(r=Tt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,cs(t,s),fr(r,t,s,-1))}return jv(),r=bp(Error(L(421))),Vu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=c3.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Cn=Gs(s.nextSibling),Nn=e,We=!0,ar=null,t!==null&&(Gn[Kn++]=Yr,Gn[Kn++]=Jr,Gn[Kn++]=Ji,Yr=t.id,Jr=t.overflow,Ji=e),e=Iv(e,r.children),e.flags|=4096,e)}function i_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),u0(t.return,e,n)}function Tp(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Bk(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Zt(t,e,r.children,n),r=qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&i_(t,n,e);else if(t.tag===19)i_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Me(qe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&oh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Tp(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&oh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Tp(e,!0,n,null,i);break;case"together":Tp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function us(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),eo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,n=Ys(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ys(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Y5(t,e,n){switch(e.tag){case 3:Fk(e),wa();break;case 5:fk(e);break;case 1:pn(e.type)&&eh(e);break;case 4:xv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Me(rh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Me(qe,qe.current&1),e.flags|=128,null):n&e.child.childLanes?$k(t,e,n):(Me(qe,qe.current&1),t=us(t,e,n),t!==null?t.sibling:null);Me(qe,qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Bk(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Me(qe,qe.current),r)break;return null;case 22:case 23:return e.lanes=0,Mk(t,e,n)}return us(t,e,n)}var zk,v0,Vk,Uk;zk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};v0=function(){};Vk=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,$i(Pr.current);var i=null;switch(n){case"input":s=Bg(t,s),r=Bg(t,r),i=[];break;case"select":s=Ke({},s,{value:void 0}),r=Ke({},r,{value:void 0}),i=[];break;case"textarea":s=Ug(t,s),r=Ug(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Jd)}Wg(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Xl.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Xl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Fe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Uk=function(t,e,n,r){n!==r&&(e.flags|=4)};function hl(t,e){if(!We)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function J5(t,e,n){var r=e.pendingProps;switch(hv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(e),null;case 1:return pn(e.type)&&Zd(),Lt(e),null;case 3:return r=e.stateNode,Ea(),ze(mn),ze(Kt),_v(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Bu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ar!==null&&(k0(ar),ar=null))),v0(t,e),Lt(e),null;case 5:wv(e);var s=$i(ac.current);if(n=e.type,t!==null&&e.stateNode!=null)Vk(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(L(166));return Lt(e),null}if(t=$i(Pr.current),Bu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Er]=e,r[ic]=i,t=(e.mode&1)!==0,n){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(s=0;s<Sl.length;s++)Fe(Sl[s],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":m1(r,i),Fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Fe("invalid",r);break;case"textarea":g1(r,i),Fe("invalid",r)}Wg(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&$u(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&$u(r.textContent,a,t),s=["children",""+a]):Xl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Fe("scroll",r)}switch(n){case"input":Pu(r),p1(r,i,!0);break;case"textarea":Pu(r),y1(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Jd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Er]=e,t[ic]=r,zk(t,e,!1,!1),e.stateNode=t;e:{switch(o=qg(n,r),n){case"dialog":Fe("cancel",t),Fe("close",t),s=r;break;case"iframe":case"object":case"embed":Fe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Sl.length;s++)Fe(Sl[s],t);s=r;break;case"source":Fe("error",t),s=r;break;case"img":case"image":case"link":Fe("error",t),Fe("load",t),s=r;break;case"details":Fe("toggle",t),s=r;break;case"input":m1(t,r),s=Bg(t,r),Fe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ke({},r,{value:void 0}),Fe("invalid",t);break;case"textarea":g1(t,r),s=Ug(t,r),Fe("invalid",t);break;default:s=r}Wg(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?xT(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&yT(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ql(t,l):typeof l=="number"&&Ql(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Xl.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Fe("scroll",t):l!=null&&Yy(t,i,l,o))}switch(n){case"input":Pu(t),p1(t,r,!1);break;case"textarea":Pu(t),y1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ii(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?na(t,!!r.multiple,i,!1):r.defaultValue!=null&&na(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Jd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lt(e),null;case 6:if(t&&e.stateNode!=null)Uk(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(L(166));if(n=$i(ac.current),$i(Pr.current),Bu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Er]=e,(i=r.nodeValue!==n)&&(t=Nn,t!==null))switch(t.tag){case 3:$u(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$u(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Er]=e,e.stateNode=r}return Lt(e),null;case 13:if(ze(qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(We&&Cn!==null&&e.mode&1&&!(e.flags&128))ok(),wa(),e.flags|=98560,i=!1;else if(i=Bu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(L(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(L(317));i[Er]=e}else wa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lt(e),i=!1}else ar!==null&&(k0(ar),ar=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||qe.current&1?vt===0&&(vt=3):jv())),e.updateQueue!==null&&(e.flags|=4),Lt(e),null);case 4:return Ea(),v0(t,e),t===null&&rc(e.stateNode.containerInfo),Lt(e),null;case 10:return gv(e.type._context),Lt(e),null;case 17:return pn(e.type)&&Zd(),Lt(e),null;case 19:if(ze(qe),i=e.memoizedState,i===null)return Lt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)hl(i,!1);else{if(vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=oh(t),o!==null){for(e.flags|=128,hl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Me(qe,qe.current&1|2),e.child}t=t.sibling}i.tail!==null&&st()>ba&&(e.flags|=128,r=!0,hl(i,!1),e.lanes=4194304)}else{if(!r)if(t=oh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),hl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!We)return Lt(e),null}else 2*st()-i.renderingStartTime>ba&&n!==1073741824&&(e.flags|=128,r=!0,hl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=st(),e.sibling=null,n=qe.current,Me(qe,r?n&1|2:n&1),e):(Lt(e),null);case 22:case 23:return Nv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?kn&1073741824&&(Lt(e),e.subtreeFlags&6&&(e.flags|=8192)):Lt(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function Z5(t,e){switch(hv(e),e.tag){case 1:return pn(e.type)&&Zd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ea(),ze(mn),ze(Kt),_v(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wv(e),null;case 13:if(ze(qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));wa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ze(qe),null;case 4:return Ea(),null;case 10:return gv(e.type._context),null;case 22:case 23:return Nv(),null;case 24:return null;default:return null}}var Uu=!1,Vt=!1,e3=typeof WeakSet=="function"?WeakSet:Set,G=null;function Yo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qe(t,e,r)}else n.current=null}function x0(t,e,n){try{n()}catch(r){Qe(t,e,r)}}var o_=!1;function t3(t,e){if(n0=Xd,t=GT(),uv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,m=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===t)break t;if(m===n&&++c===s&&(a=o),m===i&&++d===r&&(l=o),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(r0={focusedElem:t,selectionRange:n},Xd=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,_=v.memoizedState,x=e.stateNode,g=x.getSnapshotBeforeUpdate(e.elementType===e.type?y:ir(e.type,y),_);x.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(E){Qe(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return v=o_,o_=!1,v}function Ll(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&x0(e,n,i)}s=s.next}while(s!==r)}}function Sf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function w0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Hk(t){var e=t.alternate;e!==null&&(t.alternate=null,Hk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Er],delete e[ic],delete e[o0],delete e[L5],delete e[F5])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Wk(t){return t.tag===5||t.tag===3||t.tag===4}function a_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Wk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Jd));else if(r!==4&&(t=t.child,t!==null))for(_0(t,e,n),t=t.sibling;t!==null;)_0(t,e,n),t=t.sibling}function E0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(E0(t,e,n),t=t.sibling;t!==null;)E0(t,e,n),t=t.sibling}var At=null,or=!1;function bs(t,e,n){for(n=n.child;n!==null;)qk(t,e,n),n=n.sibling}function qk(t,e,n){if(Rr&&typeof Rr.onCommitFiberUnmount=="function")try{Rr.onCommitFiberUnmount(pf,n)}catch{}switch(n.tag){case 5:Vt||Yo(n,e);case 6:var r=At,s=or;At=null,bs(t,e,n),At=r,or=s,At!==null&&(or?(t=At,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):At.removeChild(n.stateNode));break;case 18:At!==null&&(or?(t=At,n=n.stateNode,t.nodeType===8?vp(t.parentNode,n):t.nodeType===1&&vp(t,n),ec(t)):vp(At,n.stateNode));break;case 4:r=At,s=or,At=n.stateNode.containerInfo,or=!0,bs(t,e,n),At=r,or=s;break;case 0:case 11:case 14:case 15:if(!Vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&x0(n,e,o),s=s.next}while(s!==r)}bs(t,e,n);break;case 1:if(!Vt&&(Yo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Qe(n,e,a)}bs(t,e,n);break;case 21:bs(t,e,n);break;case 22:n.mode&1?(Vt=(r=Vt)||n.memoizedState!==null,bs(t,e,n),Vt=r):bs(t,e,n);break;default:bs(t,e,n)}}function l_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new e3),e.forEach(function(r){var s=u3.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function rr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:At=a.stateNode,or=!1;break e;case 3:At=a.stateNode.containerInfo,or=!0;break e;case 4:At=a.stateNode.containerInfo,or=!0;break e}a=a.return}if(At===null)throw Error(L(160));qk(i,o,s),At=null,or=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Qe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Gk(e,t),e=e.sibling}function Gk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rr(e,t),yr(t),r&4){try{Ll(3,t,t.return),Sf(3,t)}catch(y){Qe(t,t.return,y)}try{Ll(5,t,t.return)}catch(y){Qe(t,t.return,y)}}break;case 1:rr(e,t),yr(t),r&512&&n!==null&&Yo(n,n.return);break;case 5:if(rr(e,t),yr(t),r&512&&n!==null&&Yo(n,n.return),t.flags&32){var s=t.stateNode;try{Ql(s,"")}catch(y){Qe(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&mT(s,i),qg(a,o);var c=qg(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?xT(s,h):d==="dangerouslySetInnerHTML"?yT(s,h):d==="children"?Ql(s,h):Yy(s,d,h,c)}switch(a){case"input":zg(s,i);break;case"textarea":pT(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?na(s,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?na(s,!!i.multiple,i.defaultValue,!0):na(s,!!i.multiple,i.multiple?[]:"",!1))}s[ic]=i}catch(y){Qe(t,t.return,y)}}break;case 6:if(rr(e,t),yr(t),r&4){if(t.stateNode===null)throw Error(L(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){Qe(t,t.return,y)}}break;case 3:if(rr(e,t),yr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ec(e.containerInfo)}catch(y){Qe(t,t.return,y)}break;case 4:rr(e,t),yr(t);break;case 13:rr(e,t),yr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Rv=st())),r&4&&l_(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Vt=(c=Vt)||d,rr(e,t),Vt=c):rr(e,t),yr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(G=t,d=t.child;d!==null;){for(h=G=d;G!==null;){switch(m=G,p=m.child,m.tag){case 0:case 11:case 14:case 15:Ll(4,m,m.return);break;case 1:Yo(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){Qe(r,n,y)}}break;case 5:Yo(m,m.return);break;case 22:if(m.memoizedState!==null){u_(h);continue}}p!==null?(p.return=m,G=p):u_(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=vT("display",o))}catch(y){Qe(t,t.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){Qe(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:rr(e,t),yr(t),r&4&&l_(t);break;case 21:break;default:rr(e,t),yr(t)}}function yr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Wk(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ql(s,""),r.flags&=-33);var i=a_(t);E0(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=a_(t);_0(t,a,o);break;default:throw Error(L(161))}}catch(l){Qe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function n3(t,e,n){G=t,Kk(t)}function Kk(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Uu;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Vt;a=Uu;var c=Vt;if(Uu=o,(Vt=l)&&!c)for(G=s;G!==null;)o=G,l=o.child,o.tag===22&&o.memoizedState!==null?d_(s):l!==null?(l.return=o,G=l):d_(s);for(;i!==null;)G=i,Kk(i),i=i.sibling;G=s,Uu=a,Vt=c}c_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):c_(t)}}function c_(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||Sf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ir(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&q1(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}q1(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ec(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}Vt||e.flags&512&&w0(e)}catch(m){Qe(e,e.return,m)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function u_(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function d_(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sf(4,e)}catch(l){Qe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Qe(e,s,l)}}var i=e.return;try{w0(e)}catch(l){Qe(e,i,l)}break;case 5:var o=e.return;try{w0(e)}catch(l){Qe(e,o,l)}}}catch(l){Qe(e,e.return,l)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var r3=Math.ceil,ch=xs.ReactCurrentDispatcher,Cv=xs.ReactCurrentOwner,Jn=xs.ReactCurrentBatchConfig,_e=0,Tt=null,ht=null,jt=0,kn=0,Jo=xi(0),vt=0,dc=null,eo=0,bf=0,Av=0,Fl=null,dn=null,Rv=0,ba=1/0,Kr=null,uh=!1,S0=null,Xs=null,Hu=!1,Bs=null,dh=0,$l=0,b0=null,Td=-1,kd=0;function nn(){return _e&6?st():Td!==-1?Td:Td=st()}function Qs(t){return t.mode&1?_e&2&&jt!==0?jt&-jt:B5.transition!==null?(kd===0&&(kd=PT()),kd):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:FT(t.type)),t):1}function fr(t,e,n,r){if(50<$l)throw $l=0,b0=null,Error(L(185));Gc(t,n,r),(!(_e&2)||t!==Tt)&&(t===Tt&&(!(_e&2)&&(bf|=n),vt===4&&Ns(t,jt)),gn(t,r),n===1&&_e===0&&!(e.mode&1)&&(ba=st()+500,wf&&wi()))}function gn(t,e){var n=t.callbackNode;B4(t,e);var r=Kd(t,t===Tt?jt:0);if(r===0)n!==null&&w1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&w1(n),e===1)t.tag===0?$5(h_.bind(null,t)):rk(h_.bind(null,t)),O5(function(){!(_e&6)&&wi()}),n=null;else{switch(NT(r)){case 1:n=nv;break;case 4:n=AT;break;case 16:n=Gd;break;case 536870912:n=RT;break;default:n=Gd}n=nI(n,Xk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Xk(t,e){if(Td=-1,kd=0,_e&6)throw Error(L(327));var n=t.callbackNode;if(aa()&&t.callbackNode!==n)return null;var r=Kd(t,t===Tt?jt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=hh(t,r);else{e=r;var s=_e;_e|=2;var i=Yk();(Tt!==t||jt!==e)&&(Kr=null,ba=st()+500,Wi(t,e));do try{o3();break}catch(a){Qk(t,a)}while(1);pv(),ch.current=i,_e=s,ht!==null?e=0:(Tt=null,jt=0,e=vt)}if(e!==0){if(e===2&&(s=Yg(t),s!==0&&(r=s,e=T0(t,s))),e===1)throw n=dc,Wi(t,0),Ns(t,r),gn(t,st()),n;if(e===6)Ns(t,r);else{if(s=t.current.alternate,!(r&30)&&!s3(s)&&(e=hh(t,r),e===2&&(i=Yg(t),i!==0&&(r=i,e=T0(t,i))),e===1))throw n=dc,Wi(t,0),Ns(t,r),gn(t,st()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(L(345));case 2:Ni(t,dn,Kr);break;case 3:if(Ns(t,r),(r&130023424)===r&&(e=Rv+500-st(),10<e)){if(Kd(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){nn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=i0(Ni.bind(null,t,dn,Kr),e);break}Ni(t,dn,Kr);break;case 4:if(Ns(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-hr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=st()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*r3(r/1960))-r,10<r){t.timeoutHandle=i0(Ni.bind(null,t,dn,Kr),r);break}Ni(t,dn,Kr);break;case 5:Ni(t,dn,Kr);break;default:throw Error(L(329))}}}return gn(t,st()),t.callbackNode===n?Xk.bind(null,t):null}function T0(t,e){var n=Fl;return t.current.memoizedState.isDehydrated&&(Wi(t,e).flags|=256),t=hh(t,e),t!==2&&(e=dn,dn=n,e!==null&&k0(e)),t}function k0(t){dn===null?dn=t:dn.push.apply(dn,t)}function s3(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!mr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ns(t,e){for(e&=~Av,e&=~bf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-hr(e),r=1<<n;t[n]=-1,e&=~r}}function h_(t){if(_e&6)throw Error(L(327));aa();var e=Kd(t,0);if(!(e&1))return gn(t,st()),null;var n=hh(t,e);if(t.tag!==0&&n===2){var r=Yg(t);r!==0&&(e=r,n=T0(t,r))}if(n===1)throw n=dc,Wi(t,0),Ns(t,e),gn(t,st()),n;if(n===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ni(t,dn,Kr),gn(t,st()),null}function Pv(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(ba=st()+500,wf&&wi())}}function to(t){Bs!==null&&Bs.tag===0&&!(_e&6)&&aa();var e=_e;_e|=1;var n=Jn.transition,r=Ie;try{if(Jn.transition=null,Ie=1,t)return t()}finally{Ie=r,Jn.transition=n,_e=e,!(_e&6)&&wi()}}function Nv(){kn=Jo.current,ze(Jo)}function Wi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,D5(n)),ht!==null)for(n=ht.return;n!==null;){var r=n;switch(hv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zd();break;case 3:Ea(),ze(mn),ze(Kt),_v();break;case 5:wv(r);break;case 4:Ea();break;case 13:ze(qe);break;case 19:ze(qe);break;case 10:gv(r.type._context);break;case 22:case 23:Nv()}n=n.return}if(Tt=t,ht=t=Ys(t.current,null),jt=kn=e,vt=0,dc=null,Av=bf=eo=0,dn=Fl=null,Fi!==null){for(e=0;e<Fi.length;e++)if(n=Fi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Fi=null}return t}function Qk(t,e){do{var n=ht;try{if(pv(),Ed.current=lh,ah){for(var r=Ge.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ah=!1}if(Zi=0,Et=yt=Ge=null,Ml=!1,lc=0,Cv.current=null,n===null||n.return===null){vt=1,dc=e,ht=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=jt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Z1(o);if(p!==null){p.flags&=-257,e_(p,o,a,i,e),p.mode&1&&J1(i,c,e),e=p,l=c;var v=e.updateQueue;if(v===null){var y=new Set;y.add(l),e.updateQueue=y}else v.add(l);break e}else{if(!(e&1)){J1(i,c,e),jv();break e}l=Error(L(426))}}else if(We&&a.mode&1){var _=Z1(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),e_(_,o,a,i,e),fv(Sa(l,a));break e}}i=l=Sa(l,a),vt!==4&&(vt=2),Fl===null?Fl=[i]:Fl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=jk(i,l,e);W1(i,x);break e;case 1:a=l;var g=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Xs===null||!Xs.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=Dk(i,a,e);W1(i,E);break e}}i=i.return}while(i!==null)}Zk(n)}catch(S){e=S,ht===n&&n!==null&&(ht=n=n.return);continue}break}while(1)}function Yk(){var t=ch.current;return ch.current=lh,t===null?lh:t}function jv(){(vt===0||vt===3||vt===2)&&(vt=4),Tt===null||!(eo&268435455)&&!(bf&268435455)||Ns(Tt,jt)}function hh(t,e){var n=_e;_e|=2;var r=Yk();(Tt!==t||jt!==e)&&(Kr=null,Wi(t,e));do try{i3();break}catch(s){Qk(t,s)}while(1);if(pv(),_e=n,ch.current=r,ht!==null)throw Error(L(261));return Tt=null,jt=0,vt}function i3(){for(;ht!==null;)Jk(ht)}function o3(){for(;ht!==null&&!P4();)Jk(ht)}function Jk(t){var e=tI(t.alternate,t,kn);t.memoizedProps=t.pendingProps,e===null?Zk(t):ht=e,Cv.current=null}function Zk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Z5(n,e),n!==null){n.flags&=32767,ht=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vt=6,ht=null;return}}else if(n=J5(n,e,kn),n!==null){ht=n;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);vt===0&&(vt=5)}function Ni(t,e,n){var r=Ie,s=Jn.transition;try{Jn.transition=null,Ie=1,a3(t,e,n,r)}finally{Jn.transition=s,Ie=r}return null}function a3(t,e,n,r){do aa();while(Bs!==null);if(_e&6)throw Error(L(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(z4(t,i),t===Tt&&(ht=Tt=null,jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hu||(Hu=!0,nI(Gd,function(){return aa(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Jn.transition,Jn.transition=null;var o=Ie;Ie=1;var a=_e;_e|=4,Cv.current=null,t3(t,n),Gk(n,t),I5(r0),Xd=!!n0,r0=n0=null,t.current=n,n3(n),N4(),_e=a,Ie=o,Jn.transition=i}else t.current=n;if(Hu&&(Hu=!1,Bs=t,dh=s),i=t.pendingLanes,i===0&&(Xs=null),O4(n.stateNode),gn(t,st()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(uh)throw uh=!1,t=S0,S0=null,t;return dh&1&&t.tag!==0&&aa(),i=t.pendingLanes,i&1?t===b0?$l++:($l=0,b0=t):$l=0,wi(),null}function aa(){if(Bs!==null){var t=NT(dh),e=Jn.transition,n=Ie;try{if(Jn.transition=null,Ie=16>t?16:t,Bs===null)var r=!1;else{if(t=Bs,Bs=null,dh=0,_e&6)throw Error(L(331));var s=_e;for(_e|=4,G=t.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(G=c;G!==null;){var d=G;switch(d.tag){case 0:case 11:case 15:Ll(8,d,i)}var h=d.child;if(h!==null)h.return=d,G=h;else for(;G!==null;){d=G;var m=d.sibling,p=d.return;if(Hk(d),d===c){G=null;break}if(m!==null){m.return=p,G=m;break}G=p}}}var v=i.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ll(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,G=x;break e}G=i.return}}var g=t.current;for(G=g;G!==null;){o=G;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,G=w;else e:for(o=g;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Sf(9,a)}}catch(S){Qe(a,a.return,S)}if(a===o){G=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,G=E;break e}G=a.return}}if(_e=s,wi(),Rr&&typeof Rr.onPostCommitFiberRoot=="function")try{Rr.onPostCommitFiberRoot(pf,t)}catch{}r=!0}return r}finally{Ie=n,Jn.transition=e}}return!1}function f_(t,e,n){e=Sa(n,e),e=jk(t,e,1),t=Ks(t,e,1),e=nn(),t!==null&&(Gc(t,1,e),gn(t,e))}function Qe(t,e,n){if(t.tag===3)f_(t,t,n);else for(;e!==null;){if(e.tag===3){f_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xs===null||!Xs.has(r))){t=Sa(n,t),t=Dk(e,t,1),e=Ks(e,t,1),t=nn(),e!==null&&(Gc(e,1,t),gn(e,t));break}}e=e.return}}function l3(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=nn(),t.pingedLanes|=t.suspendedLanes&n,Tt===t&&(jt&n)===n&&(vt===4||vt===3&&(jt&130023424)===jt&&500>st()-Rv?Wi(t,0):Av|=n),gn(t,e)}function eI(t,e){e===0&&(t.mode&1?(e=Du,Du<<=1,!(Du&130023424)&&(Du=4194304)):e=1);var n=nn();t=cs(t,e),t!==null&&(Gc(t,e,n),gn(t,n))}function c3(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),eI(t,n)}function u3(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(e),eI(t,n)}var tI;tI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||mn.current)fn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return fn=!1,Y5(t,e,n);fn=!!(t.flags&131072)}else fn=!1,We&&e.flags&1048576&&sk(e,nh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;bd(t,e),t=e.pendingProps;var s=xa(e,Kt.current);oa(e,n),s=Sv(null,e,r,t,s,n);var i=bv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pn(r)?(i=!0,eh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,vv(e),s.updater=_f,e.stateNode=s,s._reactInternals=e,h0(e,r,t,n),e=p0(null,e,r,!0,i,n)):(e.tag=0,We&&i&&dv(e),Zt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(bd(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=h3(r),t=ir(r,t),s){case 0:e=m0(null,e,r,t,n);break e;case 1:e=r_(null,e,r,t,n);break e;case 11:e=t_(null,e,r,t,n);break e;case 14:e=n_(null,e,r,ir(r.type,t),n);break e}throw Error(L(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ir(r,s),m0(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ir(r,s),r_(t,e,r,s,n);case 3:e:{if(Fk(e),t===null)throw Error(L(387));r=e.pendingProps,i=e.memoizedState,s=i.element,lk(t,e),ih(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Sa(Error(L(423)),e),e=s_(t,e,r,n,s);break e}else if(r!==s){s=Sa(Error(L(424)),e),e=s_(t,e,r,n,s);break e}else for(Cn=Gs(e.stateNode.containerInfo.firstChild),Nn=e,We=!0,ar=null,n=hk(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wa(),r===s){e=us(t,e,n);break e}Zt(t,e,r,n)}e=e.child}return e;case 5:return fk(e),t===null&&c0(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,s0(r,s)?o=null:i!==null&&s0(r,i)&&(e.flags|=32),Lk(t,e),Zt(t,e,o,n),e.child;case 6:return t===null&&c0(e),null;case 13:return $k(t,e,n);case 4:return xv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_a(e,null,r,n):Zt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ir(r,s),t_(t,e,r,s,n);case 7:return Zt(t,e,e.pendingProps,n),e.child;case 8:return Zt(t,e,e.pendingProps.children,n),e.child;case 12:return Zt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Me(rh,r._currentValue),r._currentValue=o,i!==null)if(mr(i.value,o)){if(i.children===s.children&&!mn.current){e=us(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=ss(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),u0(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(L(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),u0(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Zt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,oa(e,n),s=er(s),r=r(s),e.flags|=1,Zt(t,e,r,n),e.child;case 14:return r=e.type,s=ir(r,e.pendingProps),s=ir(r.type,s),n_(t,e,r,s,n);case 15:return Ok(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ir(r,s),bd(t,e),e.tag=1,pn(r)?(t=!0,eh(e)):t=!1,oa(e,n),uk(e,r,s),h0(e,r,s,n),p0(null,e,r,!0,t,n);case 19:return Bk(t,e,n);case 22:return Mk(t,e,n)}throw Error(L(156,e.tag))};function nI(t,e){return CT(t,e)}function d3(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(t,e,n,r){return new d3(t,e,n,r)}function Dv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function h3(t){if(typeof t=="function")return Dv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zy)return 11;if(t===ev)return 14}return 2}function Ys(t,e){var n=t.alternate;return n===null?(n=Yn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Id(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Dv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Vo:return qi(n.children,s,i,e);case Jy:o=8,s|=8;break;case Mg:return t=Yn(12,n,e,s|2),t.elementType=Mg,t.lanes=i,t;case Lg:return t=Yn(13,n,e,s),t.elementType=Lg,t.lanes=i,t;case Fg:return t=Yn(19,n,e,s),t.elementType=Fg,t.lanes=i,t;case dT:return Tf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cT:o=10;break e;case uT:o=9;break e;case Zy:o=11;break e;case ev:o=14;break e;case As:o=16,r=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=Yn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function qi(t,e,n,r){return t=Yn(7,t,r,e),t.lanes=n,t}function Tf(t,e,n,r){return t=Yn(22,t,r,e),t.elementType=dT,t.lanes=n,t.stateNode={isHidden:!1},t}function kp(t,e,n){return t=Yn(6,t,null,e),t.lanes=n,t}function Ip(t,e,n){return e=Yn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function f3(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ap(0),this.expirationTimes=ap(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ap(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ov(t,e,n,r,s,i,o,a,l){return t=new f3(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Yn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vv(i),t}function m3(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rI(t){if(!t)return oi;t=t._reactInternals;e:{if(wo(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var n=t.type;if(pn(n))return nk(t,n,e)}return e}function sI(t,e,n,r,s,i,o,a,l){return t=Ov(n,r,!0,t,s,i,o,a,l),t.context=rI(null),n=t.current,r=nn(),s=Qs(n),i=ss(r,s),i.callback=e??null,Ks(n,i,s),t.current.lanes=s,Gc(t,s,r),gn(t,r),t}function kf(t,e,n,r){var s=e.current,i=nn(),o=Qs(s);return n=rI(n),e.context===null?e.context=n:e.pendingContext=n,e=ss(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ks(s,e,o),t!==null&&(fr(t,s,o,i),_d(t,s,o)),o}function fh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function m_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mv(t,e){m_(t,e),(t=t.alternate)&&m_(t,e)}function p3(){return null}var iI=typeof reportError=="function"?reportError:function(t){console.error(t)};function Lv(t){this._internalRoot=t}If.prototype.render=Lv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));kf(t,e,null,null)};If.prototype.unmount=Lv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;to(function(){kf(null,t,null,null)}),e[ls]=null}};function If(t){this._internalRoot=t}If.prototype.unstable_scheduleHydration=function(t){if(t){var e=OT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ps.length&&e!==0&&e<Ps[n].priority;n++);Ps.splice(n,0,t),n===0&&LT(t)}};function Fv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function p_(){}function g3(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=fh(o);i.call(c)}}var o=sI(e,r,t,0,null,!1,!1,"",p_);return t._reactRootContainer=o,t[ls]=o.current,rc(t.nodeType===8?t.parentNode:t),to(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=fh(l);a.call(c)}}var l=Ov(t,0,!1,null,null,!1,!1,"",p_);return t._reactRootContainer=l,t[ls]=l.current,rc(t.nodeType===8?t.parentNode:t),to(function(){kf(e,l,n,r)}),l}function Af(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=fh(o);a.call(l)}}kf(e,o,t,s)}else o=g3(n,e,t,s,r);return fh(o)}jT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=El(e.pendingLanes);n!==0&&(rv(e,n|1),gn(e,st()),!(_e&6)&&(ba=st()+500,wi()))}break;case 13:to(function(){var r=cs(t,1);if(r!==null){var s=nn();fr(r,t,1,s)}}),Mv(t,1)}};sv=function(t){if(t.tag===13){var e=cs(t,134217728);if(e!==null){var n=nn();fr(e,t,134217728,n)}Mv(t,134217728)}};DT=function(t){if(t.tag===13){var e=Qs(t),n=cs(t,e);if(n!==null){var r=nn();fr(n,t,e,r)}Mv(t,e)}};OT=function(){return Ie};MT=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}};Kg=function(t,e,n){switch(e){case"input":if(zg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=xf(r);if(!s)throw Error(L(90));fT(r),zg(r,s)}}}break;case"textarea":pT(t,n);break;case"select":e=n.value,e!=null&&na(t,!!n.multiple,e,!1)}};ET=Pv;ST=to;var y3={usingClientEntryPoint:!1,Events:[Xc,qo,xf,wT,_T,Pv]},fl={findFiberByHostInstance:Li,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},v3={bundleType:fl.bundleType,version:fl.version,rendererPackageName:fl.rendererPackageName,rendererConfig:fl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=kT(t),t===null?null:t.stateNode},findFiberByHostInstance:fl.findFiberByHostInstance||p3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wu.isDisabled&&Wu.supportsFiber)try{pf=Wu.inject(v3),Rr=Wu}catch{}}$n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y3;$n.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fv(e))throw Error(L(200));return m3(t,e,null,n)};$n.createRoot=function(t,e){if(!Fv(t))throw Error(L(299));var n=!1,r="",s=iI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ov(t,1,!1,null,null,n,!1,r,s),t[ls]=e.current,rc(t.nodeType===8?t.parentNode:t),new Lv(e)};$n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=kT(e),t=t===null?null:t.stateNode,t};$n.flushSync=function(t){return to(t)};$n.hydrate=function(t,e,n){if(!Cf(e))throw Error(L(200));return Af(null,t,e,!0,n)};$n.hydrateRoot=function(t,e,n){if(!Fv(t))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=iI;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=sI(e,null,t,1,n??null,s,!1,i,o),t[ls]=e.current,rc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new If(e)};$n.render=function(t,e,n){if(!Cf(e))throw Error(L(200));return Af(null,t,e,!1,n)};$n.unmountComponentAtNode=function(t){if(!Cf(t))throw Error(L(40));return t._reactRootContainer?(to(function(){Af(null,null,t,!1,function(){t._reactRootContainer=null,t[ls]=null})}),!0):!1};$n.unstable_batchedUpdates=Pv;$n.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Cf(n))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return Af(t,e,n,!1,r)};$n.version="18.2.0-next-9e3b772b8-20220608";function oI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oI)}catch(t){console.error(t)}}oI(),sT.exports=$n;var qa=sT.exports,g_=qa;Dg.createRoot=g_.createRoot,Dg.hydrateRoot=g_.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ta(){return Ta=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ta.apply(this,arguments)}var zs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(zs||(zs={}));const y_="popstate";function x3(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=_o(s.location.hash.substr(1));return I0("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:mh(i))}function r(s,i){Rf(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return _3(e,n,r,t)}function at(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Rf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function w3(){return Math.random().toString(36).substr(2,8)}function v_(t,e){return{usr:t.state,key:t.key,idx:e}}function I0(t,e,n,r){return n===void 0&&(n=null),Ta({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?_o(e):e,{state:n,key:e&&e.key||r||w3()})}function mh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function _o(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function _3(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=zs.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Ta({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=zs.Pop;let _=d(),x=_==null?null:_-c;c=_,l&&l({action:a,location:y.location,delta:x})}function m(_,x){a=zs.Push;let g=I0(y.location,_,x);n&&n(g,_),c=d()+1;let w=v_(g,c),E=y.createHref(g);try{o.pushState(w,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(E)}i&&l&&l({action:a,location:y.location,delta:1})}function p(_,x){a=zs.Replace;let g=I0(y.location,_,x);n&&n(g,_),c=d();let w=v_(g,c),E=y.createHref(g);o.replaceState(w,"",E),i&&l&&l({action:a,location:y.location,delta:0})}function v(_){let x=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof _=="string"?_:mh(_);return at(x,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,x)}let y={get action(){return a},get location(){return t(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(y_,h),l=_,()=>{s.removeEventListener(y_,h),l=null}},createHref(_){return e(s,_)},createURL:v,encodeLocation(_){let x=v(_);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:p,go(_){return o.go(_)}};return y}var x_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(x_||(x_={}));function E3(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?_o(e):e,s=$v(r.pathname||"/",n);if(s==null)return null;let i=aI(t);S3(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=N3(i[a],O3(s));return o}function aI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(at(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Js([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(at(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),aI(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:R3(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of lI(i.path))s(i,o,l)}),e}function lI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=lI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function S3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:P3(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const b3=/^:\w+$/,T3=3,k3=2,I3=1,C3=10,A3=-2,w_=t=>t==="*";function R3(t,e){let n=t.split("/"),r=n.length;return n.some(w_)&&(r+=A3),e&&(r+=k3),n.filter(s=>!w_(s)).reduce((s,i)=>s+(b3.test(i)?T3:i===""?I3:C3),r)}function P3(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function N3(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=j3({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!d)return null;Object.assign(r,d.params);let h=a.route;i.push({params:r,pathname:Js([s,d.pathname]),pathnameBase:$3(Js([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=Js([s,d.pathnameBase]))}return i}function j3(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=D3(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{if(d==="*"){let m=a[h]||"";o=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}return c[d]=M3(a[h]||"",d),c},{}),pathname:i,pathnameBase:o,pattern:t}}function D3(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Rf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function O3(t){try{return decodeURI(t)}catch(e){return Rf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function M3(t,e){try{return decodeURIComponent(t)}catch(n){return Rf(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function $v(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function L3(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?_o(t):t;return{pathname:n?n.startsWith("/")?n:F3(n,e):e,search:B3(r),hash:z3(s)}}function F3(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Cp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Bv(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zv(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=_o(t):(s=Ta({},t),at(!s.pathname||!s.pathname.includes("?"),Cp("?","pathname","search",s)),at(!s.pathname||!s.pathname.includes("#"),Cp("#","pathname","hash",s)),at(!s.search||!s.search.includes("#"),Cp("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(r||o==null)a=n;else{let h=e.length-1;if(o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}a=h>=0?e[h]:"/"}let l=L3(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Js=t=>t.join("/").replace(/\/\/+/g,"/"),$3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),B3=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,z3=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,V3=function(e,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let s=new Headers(r.headers);return s.set("Location",e),new Response(null,Ta({},r,{headers:s}))};function U3(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const cI=["post","put","patch","delete"];new Set(cI);const H3=["get",...cI];new Set(H3);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ph(){return ph=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ph.apply(this,arguments)}const Vv=f.createContext(null),W3=f.createContext(null),Ga=f.createContext(null),Pf=f.createContext(null),Vr=f.createContext({outlet:null,matches:[],isDataRoute:!1}),uI=f.createContext(null);function q3(t,e){let{relative:n}=e===void 0?{}:e;Ka()||at(!1);let{basename:r,navigator:s}=f.useContext(Ga),{hash:i,pathname:o,search:a}=hI(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Js([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Ka(){return f.useContext(Pf)!=null}function zn(){return Ka()||at(!1),f.useContext(Pf).location}function dI(t){f.useContext(Ga).static||f.useLayoutEffect(t)}function wn(){let{isDataRoute:t}=f.useContext(Vr);return t?aj():G3()}function G3(){Ka()||at(!1);let t=f.useContext(Vv),{basename:e,navigator:n}=f.useContext(Ga),{matches:r}=f.useContext(Vr),{pathname:s}=zn(),i=JSON.stringify(Bv(r).map(l=>l.pathnameBase)),o=f.useRef(!1);return dI(()=>{o.current=!0}),f.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=zv(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Js([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,i,s,t])}const K3=f.createContext(null);function X3(t){let e=f.useContext(Vr).outlet;return e&&f.createElement(K3.Provider,{value:t},e)}function Nf(){let{matches:t}=f.useContext(Vr),e=t[t.length-1];return e?e.params:{}}function hI(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=f.useContext(Vr),{pathname:s}=zn(),i=JSON.stringify(Bv(r).map(o=>o.pathnameBase));return f.useMemo(()=>zv(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function Q3(t,e){return Y3(t,e)}function Y3(t,e,n){Ka()||at(!1);let{navigator:r}=f.useContext(Ga),{matches:s}=f.useContext(Vr),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let l=zn(),c;if(e){var d;let y=typeof e=="string"?_o(e):e;a==="/"||(d=y.pathname)!=null&&d.startsWith(a)||at(!1),c=y}else c=l;let h=c.pathname||"/",m=a==="/"?h:h.slice(a.length)||"/",p=E3(t,{pathname:m}),v=nj(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:Js([a,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?a:Js([a,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,n);return e&&v?f.createElement(Pf.Provider,{value:{location:ph({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:zs.Pop}},v):v}function J3(){let t=oj(),e=U3(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},e),n?f.createElement("pre",{style:s},n):null,i)}const Z3=f.createElement(J3,null);class ej extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?f.createElement(Vr.Provider,{value:this.props.routeContext},f.createElement(uI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tj(t){let{routeContext:e,match:n,children:r}=t,s=f.useContext(Vv);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(Vr.Provider,{value:e},r)}function nj(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let i=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=i.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||at(!1),i=i.slice(0,Math.min(i.length,a+1))}return i.reduceRight((a,l,c)=>{let d=l.route.id?o==null?void 0:o[l.route.id]:null,h=null;n&&(h=l.route.errorElement||Z3);let m=e.concat(i.slice(0,c+1)),p=()=>{let v;return d?v=h:l.route.Component?v=f.createElement(l.route.Component,null):l.route.element?v=l.route.element:v=a,f.createElement(tj,{match:l,routeContext:{outlet:a,matches:m,isDataRoute:n!=null},children:v})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?f.createElement(ej,{location:n.location,revalidation:n.revalidation,component:h,error:d,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}var C0;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(C0||(C0={}));var hc;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(hc||(hc={}));function rj(t){let e=f.useContext(Vv);return e||at(!1),e}function sj(t){let e=f.useContext(W3);return e||at(!1),e}function ij(t){let e=f.useContext(Vr);return e||at(!1),e}function fI(t){let e=ij(),n=e.matches[e.matches.length-1];return n.route.id||at(!1),n.route.id}function oj(){var t;let e=f.useContext(uI),n=sj(hc.UseRouteError),r=fI(hc.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function aj(){let{router:t}=rj(C0.UseNavigateStable),e=fI(hc.UseNavigateStable),n=f.useRef(!1);return dI(()=>{n.current=!0}),f.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ph({fromRouteId:e},i)))},[t,e])}function lj(t){let{to:e,replace:n,state:r,relative:s}=t;Ka()||at(!1);let{matches:i}=f.useContext(Vr),{pathname:o}=zn(),a=wn(),l=zv(e,Bv(i).map(d=>d.pathnameBase),o,s==="path"),c=JSON.stringify(l);return f.useEffect(()=>a(JSON.parse(c),{replace:n,state:r,relative:s}),[a,c,s,n,r]),null}function mI(t){return X3(t.context)}function Cs(t){at(!1)}function cj(t){let{basename:e="/",children:n=null,location:r,navigationType:s=zs.Pop,navigator:i,static:o=!1}=t;Ka()&&at(!1);let a=e.replace(/^\/*/,"/"),l=f.useMemo(()=>({basename:a,navigator:i,static:o}),[a,i,o]);typeof r=="string"&&(r=_o(r));let{pathname:c="/",search:d="",hash:h="",state:m=null,key:p="default"}=r,v=f.useMemo(()=>{let y=$v(c,a);return y==null?null:{location:{pathname:y,search:d,hash:h,state:m,key:p},navigationType:s}},[a,c,d,h,m,p,s]);return v==null?null:f.createElement(Ga.Provider,{value:l},f.createElement(Pf.Provider,{children:n,value:v}))}function uj(t){let{children:e,location:n}=t;return Q3(A0(e),n)}var __;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(__||(__={}));new Promise(()=>{});function A0(t,e){e===void 0&&(e=[]);let n=[];return f.Children.forEach(t,(r,s)=>{if(!f.isValidElement(r))return;let i=[...e,s];if(r.type===f.Fragment){n.push.apply(n,A0(r.props.children,i));return}r.type!==Cs&&at(!1),!r.props.index||!r.props.children||at(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=A0(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function R0(){return R0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},R0.apply(this,arguments)}function dj(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function hj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fj(t,e){return t.button===0&&(!e||e==="_self")&&!hj(t)}const mj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],pj="startTransition",E_=Ky[pj];function gj(t){let{basename:e,children:n,future:r,window:s}=t,i=f.useRef();i.current==null&&(i.current=x3({window:s,v5Compat:!0}));let o=i.current,[a,l]=f.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=f.useCallback(h=>{c&&E_?E_(()=>l(h)):l(h)},[l,c]);return f.useLayoutEffect(()=>o.listen(d),[o,d]),f.createElement(cj,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const yj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zs=f.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d}=e,h=dj(e,mj),{basename:m}=f.useContext(Ga),p,v=!1;if(typeof c=="string"&&vj.test(c)&&(p=c,yj))try{let g=new URL(window.location.href),w=c.startsWith("//")?new URL(g.protocol+c):new URL(c),E=$v(w.pathname,m);w.origin===g.origin&&E!=null?c=E+w.search+w.hash:v=!0}catch{}let y=q3(c,{relative:s}),_=xj(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s});function x(g){r&&r(g),g.defaultPrevented||_(g)}return f.createElement("a",R0({},h,{href:p||y,onClick:v||i?r:x,ref:n,target:l}))});var S_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(S_||(S_={}));var b_;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(b_||(b_={}));function xj(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o}=e===void 0?{}:e,a=wn(),l=zn(),c=hI(t,{relative:o});return f.useCallback(d=>{if(fj(d,n)){d.preventDefault();let h=r!==void 0?r:mh(l)===mh(c);a(t,{replace:h,state:s,preventScrollReset:i,relative:o})}},[l,a,c,r,s,n,t,i,o])}function pI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=pI(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function wj(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=pI(t))&&(r&&(r+=" "),r+=e);return r}const T_=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,k_=wj,gI=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return k_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const m=T_(d)||T_(h);return s[c][m]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,m]=d;return m===void 0||(c[h]=m),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:m,...p}=d;return Object.entries(p).every(v=>{let[y,_]=v;return Array.isArray(_)?_.includes({...i,...a}[y]):{...i,...a}[y]===_})?[...c,h,m]:c},[]);return k_(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function _j({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75"}))}const Ej=f.forwardRef(_j),yI=Ej;function Sj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const bj=f.forwardRef(Sj),Tj=bj;function kj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}))}const Ij=f.forwardRef(kj),Cj=Ij;function Aj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3"}))}const Rj=f.forwardRef(Aj),Pj=Rj;function Nj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const jj=f.forwardRef(Nj),ds=jj;function Dj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"}))}const Oj=f.forwardRef(Dj),vI=Oj;function Mj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"}))}const Lj=f.forwardRef(Mj),Fj=Lj;function $j({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}))}const Bj=f.forwardRef($j),zj=Bj;function Vj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953l7.108-4.062A1.125 1.125 0 0121 8.688v8.123zM11.25 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953L9.567 7.71a1.125 1.125 0 011.683.977v8.123z"}))}const Uj=f.forwardRef(Vj),Hj=Uj;function Wj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const qj=f.forwardRef(Wj),xI=qj;function Gj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))}const Kj=f.forwardRef(Gj),Cd=Kj;function Xj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"}))}const Qj=f.forwardRef(Xj),Yj=Qj;function Jj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"}))}const Zj=f.forwardRef(Jj),eD=Zj;function tD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const nD=f.forwardRef(tD),rD=nD;function sD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}const iD=f.forwardRef(sD),oD=iD;function aD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const lD=f.forwardRef(aD),Ap=lD;function cD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"}))}const uD=f.forwardRef(cD),dD=uD;function hD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const fD=f.forwardRef(hD),wI=fD;function mD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const pD=f.forwardRef(mD),_I=pD;function gD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25"}))}const yD=f.forwardRef(gD),vD=yD;function xD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const wD=f.forwardRef(xD),_D=wD;function ED({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))}const SD=f.forwardRef(ED),Uv=SD;function bD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z"}))}const TD=f.forwardRef(bD),EI=TD;function kD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const ID=f.forwardRef(kD),SI=ID;function CD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const AD=f.forwardRef(CD),RD=AD;function PD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const ND=f.forwardRef(PD),bI=ND;function jD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const DD=f.forwardRef(jD),I_=DD;function OD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"}))}const MD=f.forwardRef(OD),TI=MD;function LD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"}))}const FD=f.forwardRef(LD),ka=FD;function $D({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}))}const BD=f.forwardRef($D),kI=BD;function zD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const VD=f.forwardRef(zD),jf=VD;function UD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))}const HD=f.forwardRef(UD),II=HD;function WD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"}))}const qD=f.forwardRef(WD),Hv=qD;function GD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"}))}const KD=f.forwardRef(GD),C_=KD;function XD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const QD=f.forwardRef(XD),gh=QD;function YD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const JD=f.forwardRef(YD),Vs=JD;function ZD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"}))}const eO=f.forwardRef(ZD),tO=eO;function nO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"}))}const rO=f.forwardRef(nO),sO=rO;function iO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"}))}const oO=f.forwardRef(iO),aO=oO;function lO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75L19.5 12m0 0l2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6l4.72-4.72a.75.75 0 011.28.531V19.94a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.506-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.395C2.806 8.757 3.63 8.25 4.51 8.25H6.75z"}))}const cO=f.forwardRef(lO),uO=cO;function dO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"}))}const hO=f.forwardRef(dO),fc=hO;function fO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const mO=f.forwardRef(fO),yh=mO;function pO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const gO=f.forwardRef(pO),yO=gO;function vO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const xO=f.forwardRef(vO),Bi=xO,wO=gI("inline-flex font-[500] items-center ",{variants:{variant:{default:"",circle:"rounded-[99px] justify-center",list:"flex items-center py-[5px] w-full",primary:"px-[16px] py-[4px]",outline:"border rounded-full"},size:{clear:"",half:"w-1/2",full:"w-full",small:"px-[10px] py-[3px]",normal:"px-[16px] py-[4px]",large:"h-[40px] w-[40px]"},hover:{default:"hover:brightness-90",scale:"transition-transform hover:scale-[1.05]",clear:""}},defaultVariants:{variant:"default",size:"normal",hover:"default"}}),Y=({className:t,children:e,variant:n,size:r,isLoading:s,hover:i,onClick:o,...a})=>u.jsxs("button",{type:"button",onClick:l=>o?o(l):"",...a,className:wO({variant:n,size:r,hover:i,className:t}),disabled:s,children:[s?u.jsx(ds,{className:"w-[22px] animate-spin"}):null,!s&&e]}),vh=[{name:"Red",id:"red",type:"dark",bottom_player_bg:"bg-[#3b1113]",side_bar_bg:"bg-[#391b1c]",content_text:"text-[#ca4954]",content_hover_text:"hover:text-[#ca4954]",content_border:"border-[#ca4954]",content_hover_border:"hover:border-[#ca4954]",content_bg:"!bg-[#ca4954]  text-[#fff]",content_code:"#ca4954",content_hover_bg:"hover:!bg-[#ca4954] hover:text-[#fff] ",container:"bg-[#2e0f10]"},{name:"Black",id:"black",type:"dark",bottom_player_bg:"bg-[#181818]",side_bar_bg:"bg-[#242424]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585]  text-[#fff]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff] ",container:"bg-[#1e1e1e]"},{name:"Deep blue",id:"deep_blue",type:"dark",bottom_player_bg:"bg-[#111f3b]",side_bar_bg:"bg-[#1b2639]",content_text:"text-[#0c9e85]",content_hover_text:"hover:text-[#0c9e85]",content_border:"border-[#0c9e85]",content_hover_border:"hover:border-[#0c9e85]",content_bg:"!bg-[#0c9e85]  text-[#fff]",content_code:"#0c9e85",content_hover_bg:"hover:!bg-[#0c9e85] hover:text-[#fff] ",container:"bg-[#0f1a2e]"},{name:"White",id:"white",type:"light",bottom_player_bg:"bg-[#fff]",side_bar_bg:"bg-[#f2f2f2]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585] text-[#fff]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff]",container:"bg-[#fff]"},{name:"Light green",id:"green_light",type:"light",bottom_player_bg:"bg-[#c0d8d8]",side_bar_bg:"bg-[#dde5e5]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585] text-[#fff]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff]",container:"bg-[#ced9d9]"},{name:"Brown",id:"gray",type:"light",bottom_player_bg:"bg-[#dedad1]",side_bar_bg:"bg-[#d9d7d4]",content_text:"text-[#644646]",content_hover_text:"hover:text-[#644646]",content_border:"border-[#644646]",content_hover_border:"hover:border-[#644646]",content_bg:"!bg-[#644646]  text-[#fff]",content_code:"#644646",content_hover_bg:"hover:!bg-[#644646] hover:text-[#fff]",container:"bg-[#e5e3df]"}],_O="End-Of-Stream";class ot extends Error{constructor(){super(_O)}}class EO{constructor(){this.maxStreamReadSize=1*1024*1024,this.endOfStream=!1,this.peekQueue=[]}async peek(e,n,r){const s=await this.read(e,n,r);return this.peekQueue.push(e.subarray(n,n+s)),s}async read(e,n,r){if(r===0)return 0;let s=this.readFromPeekBuffer(e,n,r);if(s+=await this.readRemainderFromStream(e,n+s,r-s),s===0)throw new ot;return s}readFromPeekBuffer(e,n,r){let s=r,i=0;for(;this.peekQueue.length>0&&s>0;){const o=this.peekQueue.pop();if(!o)throw new Error("peekData should be defined");const a=Math.min(o.length,s);e.set(o.subarray(0,a),n+i),i+=a,s-=a,a<o.length&&this.peekQueue.push(o.subarray(a))}return i}async readRemainderFromStream(e,n,r){let s=r,i=0;for(;s>0&&!this.endOfStream;){const o=Math.min(s,this.maxStreamReadSize),a=await this.readFromStream(e,n+i,o);if(a===0)break;i+=a,s-=a}return i}}class SO extends EO{constructor(e){super(),this.reader=e.getReader({mode:"byob"})}async readFromStream(e,n,r){if(this.endOfStream)throw new ot;const s=await this.reader.read(new Uint8Array(r));return s.done&&(this.endOfStream=s.done),s.value?(e.set(s.value,n),s.value.byteLength):0}}class CI{constructor(e){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=(e==null?void 0:e.fileInfo)??{},this.onClose=e==null?void 0:e.onClose}async readToken(e,n=this.position){const r=new Uint8Array(e.len);if(await this.readBuffer(r,{position:n})<e.len)throw new ot;return e.get(r,0)}async peekToken(e,n=this.position){const r=new Uint8Array(e.len);if(await this.peekBuffer(r,{position:n})<e.len)throw new ot;return e.get(r,0)}async readNumber(e){if(await this.readBuffer(this.numBuffer,{length:e.len})<e.len)throw new ot;return e.get(this.numBuffer,0)}async peekNumber(e){if(await this.peekBuffer(this.numBuffer,{length:e.len})<e.len)throw new ot;return e.get(this.numBuffer,0)}async ignore(e){if(this.fileInfo.size!==void 0){const n=this.fileInfo.size-this.position;if(e>n)return this.position+=n,n}return this.position+=e,e}async close(){var e;await((e=this.onClose)==null?void 0:e.call(this))}normalizeOptions(e,n){if(n&&n.position!==void 0&&n.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return n?{mayBeLess:n.mayBeLess===!0,offset:n.offset?n.offset:0,length:n.length?n.length:e.length-(n.offset?n.offset:0),position:n.position?n.position:this.position}:{mayBeLess:!1,offset:0,length:e.length,position:this.position}}}const bO=256e3;class TO extends CI{constructor(e,n){super(n),this.streamReader=e}async readBuffer(e,n){const r=this.normalizeOptions(e,n),s=r.position-this.position;if(s>0)return await this.ignore(s),this.readBuffer(e,n);if(s<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(r.length===0)return 0;const i=await this.streamReader.read(e,r.offset,r.length);if(this.position+=i,(!n||!n.mayBeLess)&&i<r.length)throw new ot;return i}async peekBuffer(e,n){const r=this.normalizeOptions(e,n);let s=0;if(r.position){const i=r.position-this.position;if(i>0){const o=new Uint8Array(r.length+i);return s=await this.peekBuffer(o,{mayBeLess:r.mayBeLess}),e.set(o.subarray(i),r.offset),s-i}if(i<0)throw new Error("Cannot peek from a negative offset in a stream")}if(r.length>0){try{s=await this.streamReader.peek(e,r.offset,r.length)}catch(i){if(n!=null&&n.mayBeLess&&i instanceof ot)return 0;throw i}if(!r.mayBeLess&&s<r.length)throw new ot}return s}async ignore(e){const n=Math.min(bO,e),r=new Uint8Array(n);let s=0;for(;s<e;){const i=e-s,o=await this.readBuffer(r,{length:Math.min(n,i)});if(o<0)return o;s+=o}return s}}class kO extends CI{constructor(e,n){super(n),this.uint8Array=e,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:e.length}async readBuffer(e,n){if(n!=null&&n.position){if(n.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=n.position}const r=await this.peekBuffer(e,n);return this.position+=r,r}async peekBuffer(e,n){const r=this.normalizeOptions(e,n),s=Math.min(this.uint8Array.length-r.position,r.length);if(!r.mayBeLess&&s<r.length)throw new ot;return e.set(this.uint8Array.subarray(r.position,r.position+s),r.offset),s}close(){return super.close()}}function AI(t,e){return new TO(new SO(t),e)}function Ia(t,e){return new kO(t,e)}/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Df=function(t,e,n,r,s){var i,o,a=s*8-r-1,l=(1<<a)-1,c=l>>1,d=-7,h=n?s-1:0,m=n?-1:1,p=t[e+h];for(h+=m,i=p&(1<<-d)-1,p>>=-d,d+=a;d>0;i=i*256+t[e+h],h+=m,d-=8);for(o=i&(1<<-d)-1,i>>=-d,d+=r;d>0;o=o*256+t[e+h],h+=m,d-=8);if(i===0)i=1-c;else{if(i===l)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-c}return(p?-1:1)*o*Math.pow(2,i-r)},Of=function(t,e,n,r,s,i){var o,a,l,c=i*8-s-1,d=(1<<c)-1,h=d>>1,m=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,v=r?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=m/l:e+=m*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=d?(a=0,o=d):o+h>=1?(a=(e*l-1)*Math.pow(2,s),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,s),o=0));s>=8;t[n+p]=a&255,p+=v,a/=256,s-=8);for(o=o<<s|a,c+=s;c>0;t[n+p]=o&255,p+=v,o/=256,c-=8);t[n+p-v]|=y*128};function de(t){return new DataView(t.buffer,t.byteOffset)}const fe={len:1,get(t,e){return de(t).getUint8(e)},put(t,e,n){return de(t).setUint8(e,n),e+1}},ke={len:2,get(t,e){return de(t).getUint16(e,!0)},put(t,e,n){return de(t).setUint16(e,n,!0),e+2}},Pe={len:2,get(t,e){return de(t).getUint16(e)},put(t,e,n){return de(t).setUint16(e,n),e+2}},xh={len:3,get(t,e){const n=de(t);return n.getUint8(e)+(n.getUint16(e+1,!0)<<8)},put(t,e,n){const r=de(t);return r.setUint8(e,n&255),r.setUint16(e+1,n>>8,!0),e+3}},rn={len:3,get(t,e){const n=de(t);return(n.getUint16(e)<<8)+n.getUint8(e+2)},put(t,e,n){const r=de(t);return r.setUint16(e,n>>8),r.setUint8(e+2,n&255),e+3}},Z={len:4,get(t,e){return de(t).getUint32(e,!0)},put(t,e,n){return de(t).setUint32(e,n,!0),e+4}},se={len:4,get(t,e){return de(t).getUint32(e)},put(t,e,n){return de(t).setUint32(e,n),e+4}},mc={len:1,get(t,e){return de(t).getInt8(e)},put(t,e,n){return de(t).setInt8(e,n),e+1}},Zr={len:2,get(t,e){return de(t).getInt16(e)},put(t,e,n){return de(t).setInt16(e,n),e+2}},IO={len:2,get(t,e){return de(t).getInt16(e,!0)},put(t,e,n){return de(t).setInt16(e,n,!0),e+2}},CO={len:3,get(t,e){const n=xh.get(t,e);return n>8388607?n-16777216:n},put(t,e,n){const r=de(t);return r.setUint8(e,n&255),r.setUint16(e+1,n>>8,!0),e+3}},Wv={len:3,get(t,e){const n=rn.get(t,e);return n>8388607?n-16777216:n},put(t,e,n){const r=de(t);return r.setUint16(e,n>>8),r.setUint8(e+2,n&255),e+3}},jn={len:4,get(t,e){return de(t).getInt32(e)},put(t,e,n){return de(t).setInt32(e,n),e+4}},rt={len:4,get(t,e){return de(t).getInt32(e,!0)},put(t,e,n){return de(t).setInt32(e,n,!0),e+4}},en={len:8,get(t,e){return de(t).getBigUint64(e,!0)},put(t,e,n){return de(t).setBigUint64(e,n,!0),e+8}},wh={len:8,get(t,e){return de(t).getBigInt64(e,!0)},put(t,e,n){return de(t).setBigInt64(e,n,!0),e+8}},qv={len:8,get(t,e){return de(t).getBigUint64(e)},put(t,e,n){return de(t).setBigUint64(e,n),e+8}},RI={len:8,get(t,e){return de(t).getBigInt64(e)},put(t,e,n){return de(t).setBigInt64(e,n),e+8}},AO={len:2,get(t,e){return Df(t,e,!1,10,this.len)},put(t,e,n){return Of(t,n,e,!1,10,this.len),e+this.len}},RO={len:2,get(t,e){return Df(t,e,!0,10,this.len)},put(t,e,n){return Of(t,n,e,!0,10,this.len),e+this.len}},PI={len:4,get(t,e){return de(t).getFloat32(e)},put(t,e,n){return de(t).setFloat32(e,n),e+4}},PO={len:4,get(t,e){return de(t).getFloat32(e,!0)},put(t,e,n){return de(t).setFloat32(e,n,!0),e+4}},P0={len:8,get(t,e){return de(t).getFloat64(e)},put(t,e,n){return de(t).setFloat64(e,n),e+8}},NO={len:8,get(t,e){return de(t).getFloat64(e,!0)},put(t,e,n){return de(t).setFloat64(e,n,!0),e+8}},jO={len:10,get(t,e){return Df(t,e,!1,63,this.len)},put(t,e,n){return Of(t,n,e,!1,63,this.len),e+this.len}},DO={len:10,get(t,e){return Df(t,e,!0,63,this.len)},put(t,e,n){return Of(t,n,e,!0,63,this.len),e+this.len}};class OO{constructor(e){this.len=e}get(e,n){}}class ln{constructor(e){this.len=e}get(e,n){return e.subarray(n,n+this.len)}}class re{constructor(e,n){this.len=e,this.encoding=n,this.textDecoder=new TextDecoder(n)}get(e,n){return this.textDecoder.decode(e.subarray(n,n+this.len))}}class MO{constructor(e){this.len=e,this.textDecoder=new TextDecoder("windows-1252")}get(e,n=0){return this.textDecoder.decode(e.subarray(n,n+this.len))}}const LO=Object.freeze(Object.defineProperty({__proto__:null,AnsiStringType:MO,Float16_BE:AO,Float16_LE:RO,Float32_BE:PI,Float32_LE:PO,Float64_BE:P0,Float64_LE:NO,Float80_BE:jO,Float80_LE:DO,INT16_BE:Zr,INT16_LE:IO,INT24_BE:Wv,INT24_LE:CO,INT32_BE:jn,INT32_LE:rt,INT64_BE:RI,INT64_LE:wh,INT8:mc,IgnoreType:OO,StringType:re,UINT16_BE:Pe,UINT16_LE:ke,UINT24_BE:rn,UINT24_LE:xh,UINT32_BE:se,UINT32_LE:Z,UINT64_BE:qv,UINT64_LE:en,UINT8:fe,Uint8ArrayType:ln},Symbol.toStringTag,{value:"Module"})),FO=Object.prototype.toString,$O="[object Uint8Array]",BO="[object ArrayBuffer]";function NI(t,e,n){return t?t.constructor===e?!0:FO.call(t)===n:!1}function jI(t){return NI(t,Uint8Array,$O)}function zO(t){return NI(t,ArrayBuffer,BO)}function VO(t){return jI(t)||zO(t)}function UO(t){if(!jI(t))throw new TypeError(`Expected \`Uint8Array\`, got \`${typeof t}\``)}function HO(t){if(!VO(t))throw new TypeError(`Expected \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof t}\``)}const qu={utf8:new globalThis.TextDecoder("utf8")};function Gv(t,e="utf8"){return HO(t),qu[e]??(qu[e]=new globalThis.TextDecoder(e)),qu[e].decode(t)}function DI(t){if(typeof t!="string")throw new TypeError(`Expected \`string\`, got \`${typeof t}\``)}const WO=new globalThis.TextEncoder;function qO(t){return DI(t),WO.encode(t)}const GO=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Kv(t){UO(t);let e="";for(let n=0;n<t.length;n++)e+=GO[t[n]];return e}const A_={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,A:10,B:11,C:12,D:13,E:14,F:15};function R_(t){if(DI(t),t.length%2!==0)throw new Error("Invalid Hex string length.");const e=t.length/2,n=new Uint8Array(e);for(let r=0;r<e;r++){const s=A_[t[r*2]],i=A_[t[r*2+1]];if(s===void 0||i===void 0)throw new Error(`Invalid Hex character encountered at position ${r*2}`);n[r]=s<<4|i}return n}function P_(t){const{byteLength:e}=t;if(e===6)return t.getUint16(0)*2**32+t.getUint32(2);if(e===5)return t.getUint8(0)*2**32+t.getUint32(1);if(e===4)return t.getUint32(0);if(e===3)return t.getUint8(0)*2**16+t.getUint16(1);if(e===2)return t.getUint16(0);if(e===1)return t.getUint8(0)}function OI(t,e){const n=t.length,r=e.length;if(r===0||r>n)return-1;const s=n-r;for(let i=0;i<=s;i++){let o=!0;for(let a=0;a<r;a++)if(t[i+a]!==e[a]){o=!1;break}if(o)return i}return-1}function KO(t,e){return OI(t,e)!==-1}function XO(t){return[...t].map(e=>e.charCodeAt(0))}function QO(t,e=0){const n=Number.parseInt(new re(6).get(t,148).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(n))return!1;let r=8*32;for(let s=e;s<e+148;s++)r+=t[s];for(let s=e+156;s<e+512;s++)r+=t[s];return n===r}const YO={get:(t,e)=>t[e+3]&127|t[e+2]<<7|t[e+1]<<14|t[e]<<21,len:4},JO=["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","elf","macho","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","j2c","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf","jls","pst","dwg","parquet","class","arj","cpio","ace","avro","icc","fbx","vsdx"],ZO=["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/wav","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-elf","application/x-mach-binary","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/j2c","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd","image/jls","application/vnd.ms-outlook","image/vnd.dwg","application/x-parquet","application/java-vm","application/x-arj","application/x-cpio","application/x-ace-compressed","application/avro","application/vnd.iccprofile","application/x.autodesk.fbx","application/vnd.visio"],N_=4100;async function MI(t){return new eM().fromBuffer(t)}function vr(t,e,n){n={offset:0,...n};for(const[r,s]of e.entries())if(n.mask){if(s!==(n.mask[r]&t[r+n.offset]))return!1}else if(s!==t[r+n.offset])return!1;return!0}class eM{constructor(e){this.detectors=e==null?void 0:e.customDetectors,this.fromTokenizer=this.fromTokenizer.bind(this),this.fromBuffer=this.fromBuffer.bind(this),this.parse=this.parse.bind(this)}async fromTokenizer(e){const n=e.position;for(const r of this.detectors||[]){const s=await r(e);if(s)return s;if(n!==e.position)return}return this.parse(e)}async fromBuffer(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof e}\``);const n=e instanceof Uint8Array?e:new Uint8Array(e);if((n==null?void 0:n.length)>1)return this.fromTokenizer(Ia(n))}async fromBlob(e){return this.fromStream(e.stream())}async fromStream(e){const n=await AI(e);try{return await this.fromTokenizer(n)}finally{await n.close()}}async toDetectionStream(e,n){const{sampleSize:r=N_}=n;let s,i;const o=e.getReader({mode:"byob"});try{const{value:c,done:d}=await o.read(new Uint8Array(r));if(i=c,!d&&c)try{s=await this.fromBuffer(c.slice(0,r))}catch(h){if(!(h instanceof ot))throw h;s=void 0}i=c}finally{o.releaseLock()}const a=new TransformStream({async start(c){c.enqueue(i)},transform(c,d){d.enqueue(c)}}),l=e.pipeThrough(a);return l.fileType=s,l}check(e,n){return vr(this.buffer,e,n)}checkString(e,n){return this.check(XO(e),n)}async parse(e){if(this.buffer=new Uint8Array(N_),e.fileInfo.size===void 0&&(e.fileInfo.size=Number.MAX_SAFE_INTEGER),this.tokenizer=e,await e.peekBuffer(this.buffer,{length:12,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33]))return await e.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.parse(e);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await e.ignore(6);const n=await e.readToken(YO);return e.position+n>e.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await e.ignore(n),this.fromTokenizer(e))}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((this.buffer[0]===67||this.buffer[0]===70)&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255]))return this.check([247],{offset:3})?{ext:"jls",mime:"image/jls"}:{ext:"jpg",mime:"image/jpeg"};if(this.check([79,98,106,1]))return{ext:"avro",mime:"application/avro"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){try{for(;e.position+30<e.fileInfo.size;){await e.readBuffer(this.buffer,{length:30});const n=new DataView(this.buffer.buffer),r={compressedSize:n.getUint32(18,!0),uncompressedSize:n.getUint32(22,!0),filenameLength:n.getUint16(26,!0),extraFieldLength:n.getUint16(28,!0)};if(r.filename=await e.readToken(new re(r.filenameLength,"utf-8")),await e.ignore(r.extraFieldLength),r.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(r.filename.endsWith(".rels")||r.filename.endsWith(".xml"))switch(r.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};case"visio":return{ext:"vsdx",mime:"application/vnd.visio"};default:break}if(r.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(r.filename.startsWith("3D/")&&r.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(r.filename==="mimetype"&&r.compressedSize===r.uncompressedSize){let s=await e.readToken(new re(r.compressedSize,"utf-8"));switch(s=s.trim(),s){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}}if(r.compressedSize===0){let s=-1;for(;s<0&&e.position<e.fileInfo.size;)await e.peekBuffer(this.buffer,{mayBeLess:!0}),s=OI(this.buffer,new Uint8Array([80,75,3,4])),await e.ignore(s>=0?s:this.buffer.length)}else await e.ignore(r.compressedSize)}}catch(n){if(!(n instanceof ot))throw n}return{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await e.ignore(28);const n=new Uint8Array(8);return await e.readBuffer(n),vr(n,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:vr(n,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:vr(n,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:vr(n,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:vr(n,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:vr(n,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(this.buffer[2]===3||this.buffer[2]===5||this.buffer[2]===7)&&(this.buffer[3]===4||this.buffer[3]===6||this.buffer[3]===8))return{ext:"zip",mime:"application/zip"};if(this.checkString("ftyp",{offset:4})&&this.buffer[8]&96){const n=new re(4,"latin1").get(this.buffer,8).replace("\0"," ").trim();switch(n){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return n.startsWith("3g")?n.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF")){try{await e.ignore(1350);const n=10*1024*1024,r=new Uint8Array(Math.min(n,e.fileInfo.size));if(await e.readBuffer(r,{mayBeLess:!0}),KO(r,new TextEncoder().encode("AIPrivateData")))return{ext:"ai",mime:"application/postscript"}}catch(n){if(!(n instanceof ot))throw n}return{ext:"pdf",mime:"application/pdf"}}if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){const n=await this.readTiffHeader(!1);if(n)return n}if(this.check([77,77])){const n=await this.readTiffHeader(!0);if(n)return n}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function n(){const a=await e.peekNumber(fe);let l=128,c=0;for(;!(a&l)&&l!==0;)++c,l>>=1;const d=new Uint8Array(c+1);return await e.readBuffer(d),d}async function r(){const a=await n(),l=await n();l[0]^=128>>l.length-1;const c=Math.min(6,l.length),d=new DataView(a.buffer),h=new DataView(l.buffer,l.length-c,c);return{id:P_(d),len:P_(h)}}async function s(a){for(;a>0;){const l=await r();if(l.id===17026)return(await e.readToken(new re(l.len))).replaceAll(/\00.*$/g,"");await e.ignore(l.len),--a}}const i=await r();switch(await s(i.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(this.check([82,73,70,70])){if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/wav"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1"))return{ext:"parquet",mime:"application/x-parquet"};if(this.check([207,250,237,254]))return{ext:"macho",mime:"application/x-mach-binary"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190]))return{ext:"class",mime:"application/java-vm"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(this.buffer[6]===0||this.buffer[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){const n=new re(4,"latin1").get(this.buffer,2);if(n.match("^d*")&&n>=1e3&&n<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>"))return await e.ignore(8),await e.readToken(new re(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(this.checkString("**ACE",{offset:7})&&(await e.peekBuffer(this.buffer,{length:14,mayBeLess:!0}),this.checkString("**",{offset:12})))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.check([137,80,78,71,13,10,26,10])){await e.ignore(8);async function n(){return{length:await e.readToken(jn),type:await e.readToken(new re(4,"latin1"))}}do{const r=await n();if(r.length<0)return;switch(r.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await e.ignore(r.length+4)}}while(e.position+8<e.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function n(){const r=new Uint8Array(16);return await e.readBuffer(r),{id:r,size:Number(await e.readToken(en))}}for(await e.ignore(30);e.position+24<e.fileInfo.size;){const r=await n();let s=r.size-24;if(vr(r.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const i=new Uint8Array(16);if(s-=await e.readBuffer(i),vr(i,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(vr(i,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await e.ignore(s)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await e.ignore(20),await e.readToken(new re(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255]))return this.check([0,60,0,63,0,120,0,109,0,108],{offset:2})?{ext:"xml",mime:"application/xml"}:void 0;if(this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await e.peekBuffer(this.buffer,{length:Math.min(256,e.fileInfo.size),mayBeLess:!0}),this.check([97,99,115,112],{offset:36}))return{ext:"icc",mime:"application/vnd.iccprofile"};if(this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){const n=new DataView(this.buffer.buffer).getUint32(12,!0);if(n>12&&this.buffer.length>=n+16)try{const r=new TextDecoder().decode(this.buffer.slice(16,n+16));if(JSON.parse(r).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.checkString("Kaydara FBX Binary  \0"))return{ext:"fbx",mime:"application/x.autodesk.fbx"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await e.peekBuffer(this.buffer,{length:Math.min(512,e.fileInfo.size),mayBeLess:!0}),QO(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254]))return this.check([60,0,63,0,120,0,109,0,108,0],{offset:2})?{ext:"xml",mime:"application/xml"}:this.check([255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0],{offset:2})?{ext:"skp",mime:"application/vnd.sketchup.skp"}:void 0;if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(this.buffer.length>=2&&this.check([255,224],{offset:0,mask:[255,224]})){if(this.check([16],{offset:1,mask:[22]}))return this.check([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(this.check([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}async readTiffTag(e){const n=await this.tokenizer.readToken(e?Pe:ke);switch(this.tokenizer.ignore(10),n){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"}}}async readTiffIFD(e){const n=await this.tokenizer.readToken(e?Pe:ke);for(let r=0;r<n;++r){const s=await this.readTiffTag(e);if(s)return s}}async readTiffHeader(e){const n=(e?Pe:ke).get(this.buffer,2),r=(e?se:Z).get(this.buffer,4);if(n===42){if(r>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(r>=8&&(this.check([28,0,254,0],{offset:8})||this.check([31,0,11,0],{offset:8})))return{ext:"nef",mime:"image/x-nikon-nef"}}return await this.tokenizer.ignore(r),await this.readTiffIFD(e)??{ext:"tif",mime:"image/tiff"}}if(n===43)return{ext:"tif",mime:"image/tiff"}}}new Set(JO);new Set(ZO);var Xv={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var j_=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,tM=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,LI=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,nM=/\\([\u000b\u0020-\u00ff])/g,rM=/([\\"])/g,FI=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;Xv.format=sM;Xv.parse=iM;function sM(t){if(!t||typeof t!="object")throw new TypeError("argument obj is required");var e=t.parameters,n=t.type;if(!n||!FI.test(n))throw new TypeError("invalid type");var r=n;if(e&&typeof e=="object")for(var s,i=Object.keys(e).sort(),o=0;o<i.length;o++){if(s=i[o],!LI.test(s))throw new TypeError("invalid parameter name");r+="; "+s+"="+aM(e[s])}return r}function iM(t){if(!t)throw new TypeError("argument string is required");var e=typeof t=="object"?oM(t):t;if(typeof e!="string")throw new TypeError("argument string is required to be a string");var n=e.indexOf(";"),r=n!==-1?e.slice(0,n).trim():e.trim();if(!FI.test(r))throw new TypeError("invalid media type");var s=new lM(r.toLowerCase());if(n!==-1){var i,o,a;for(j_.lastIndex=n;o=j_.exec(e);){if(o.index!==n)throw new TypeError("invalid parameter format");n+=o[0].length,i=o[1].toLowerCase(),a=o[2],a.charCodeAt(0)===34&&(a=a.slice(1,-1),a.indexOf("\\")!==-1&&(a=a.replace(nM,"$1"))),s.parameters[i]=a}if(n!==e.length)throw new TypeError("invalid parameter format")}return s}function oM(t){var e;if(typeof t.getHeader=="function"?e=t.getHeader("content-type"):typeof t.headers=="object"&&(e=t.headers&&t.headers["content-type"]),typeof e!="string")throw new TypeError("content-type header is missing from object");return e}function aM(t){var e=String(t);if(LI.test(e))return e;if(e.length>0&&!tM.test(e))throw new TypeError("invalid parameter value");return'"'+e.replace(rM,"\\$1")+'"'}function lM(t){this.parameters=Object.create(null),this.type=t}/*!
 * media-typer
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */var cM=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/,uM=dM;function dM(t){if(!t)throw new TypeError("argument string is required");if(typeof t!="string")throw new TypeError("argument string is required to be a string");var e=cM.exec(t.toLowerCase());if(!e)throw new TypeError("invalid media type");var n=e[1],r=e[2],s,i=r.lastIndexOf("+");return i!==-1&&(s=r.substr(i+1),r=r.substr(0,i)),new hM(n,r,s)}function hM(t,e,n){this.type=t,this.subtype=e,this.suffix=n}var N0={exports:{}},Rp,D_;function fM(){if(D_)return Rp;D_=1;var t=1e3,e=t*60,n=e*60,r=n*24,s=r*7,i=r*365.25;Rp=function(d,h){h=h||{};var m=typeof d;if(m==="string"&&d.length>0)return o(d);if(m==="number"&&isFinite(d))return h.long?l(d):a(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function o(d){if(d=String(d),!(d.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(h){var m=parseFloat(h[1]),p=(h[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return m*i;case"weeks":case"week":case"w":return m*s;case"days":case"day":case"d":return m*r;case"hours":case"hour":case"hrs":case"hr":case"h":return m*n;case"minutes":case"minute":case"mins":case"min":case"m":return m*e;case"seconds":case"second":case"secs":case"sec":case"s":return m*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function a(d){var h=Math.abs(d);return h>=r?Math.round(d/r)+"d":h>=n?Math.round(d/n)+"h":h>=e?Math.round(d/e)+"m":h>=t?Math.round(d/t)+"s":d+"ms"}function l(d){var h=Math.abs(d);return h>=r?c(d,h,r,"day"):h>=n?c(d,h,n,"hour"):h>=e?c(d,h,e,"minute"):h>=t?c(d,h,t,"second"):d+" ms"}function c(d,h,m,p){var v=h>=m*1.5;return Math.round(d/m)+" "+p+(v?"s":"")}return Rp}function mM(t){n.debug=n,n.default=n,n.coerce=l,n.disable=i,n.enable=s,n.enabled=o,n.humanize=fM(),n.destroy=c,Object.keys(t).forEach(d=>{n[d]=t[d]}),n.names=[],n.skips=[],n.formatters={};function e(d){let h=0;for(let m=0;m<d.length;m++)h=(h<<5)-h+d.charCodeAt(m),h|=0;return n.colors[Math.abs(h)%n.colors.length]}n.selectColor=e;function n(d){let h,m=null,p,v;function y(..._){if(!y.enabled)return;const x=y,g=Number(new Date),w=g-(h||g);x.diff=w,x.prev=h,x.curr=g,h=g,_[0]=n.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let E=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(k,T)=>{if(k==="%%")return"%";E++;const b=n.formatters[T];if(typeof b=="function"){const C=_[E];k=b.call(x,C),_.splice(E,1),E--}return k}),n.formatArgs.call(x,_),(x.log||n.log).apply(x,_)}return y.namespace=d,y.useColors=n.useColors(),y.color=n.selectColor(d),y.extend=r,y.destroy=n.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(p!==n.namespaces&&(p=n.namespaces,v=n.enabled(d)),v),set:_=>{m=_}}),typeof n.init=="function"&&n.init(y),y}function r(d,h){const m=n(this.namespace+(typeof h>"u"?":":h)+d);return m.log=this.log,m}function s(d){n.save(d),n.namespaces=d,n.names=[],n.skips=[];let h;const m=(typeof d=="string"?d:"").split(/[\s,]+/),p=m.length;for(h=0;h<p;h++)m[h]&&(d=m[h].replace(/\*/g,".*?"),d[0]==="-"?n.skips.push(new RegExp("^"+d.slice(1)+"$")):n.names.push(new RegExp("^"+d+"$")))}function i(){const d=[...n.names.map(a),...n.skips.map(a).map(h=>"-"+h)].join(",");return n.enable(""),d}function o(d){if(d[d.length-1]==="*")return!0;let h,m;for(h=0,m=n.skips.length;h<m;h++)if(n.skips[h].test(d))return!1;for(h=0,m=n.names.length;h<m;h++)if(n.names[h].test(d))return!0;return!1}function a(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function l(d){return d instanceof Error?d.stack||d.message:d}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var pM=mM;(function(t,e){e.formatArgs=r,e.save=s,e.load=i,e.useColors=n,e.storage=o(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;l.splice(1,0,c,"color: inherit");let d=0,h=0;l[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(d++,m==="%c"&&(h=d))}),l.splice(h,0,c)}e.log=console.debug||console.log||(()=>{});function s(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function i(){let l;try{l=e.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l={}.DEBUG),l}function o(){try{return localStorage}catch{}}t.exports=pM(e);const{formatters:a}=t.exports;a.j=function(l){try{return JSON.stringify(l)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}})(N0,N0.exports);var gM=N0.exports;const je=qb(gM);var j0;(function(t){t[t.shot=10]="shot",t[t.scene=20]="scene",t[t.track=30]="track",t[t.part=40]="part",t[t.album=50]="album",t[t.edition=60]="edition",t[t.collection=70]="collection"})(j0||(j0={}));var no;(function(t){t[t.video=1]="video",t[t.audio=2]="audio",t[t.complex=3]="complex",t[t.logo=4]="logo",t[t.subtitle=17]="subtitle",t[t.button=18]="button",t[t.control=32]="control"})(no||(no={}));function Ye(t,e,n){return(t[e]&1<<n)!==0}function Sn(t,e,n,r){let s=e;if(r==="utf-16le"){for(;t[s]!==0||t[s+1]!==0;){if(s>=n)return n;s+=2}return s}for(;t[s]!==0;){if(s>=n)return n;s++}return s}function $I(t){const e=t.indexOf("\0");return e===-1?t:t.substr(0,e)}function yM(t){const e=t.length;if(e&1)throw new Error("Buffer length must be even");for(let n=0;n<e;n+=2){const r=t[n];t[n]=t[n+1],t[n+1]=r}return t}function gt(t,e){if(t[0]===255&&t[1]===254)return gt(t.subarray(2),e);if(e==="utf-16le"&&t[0]===254&&t[1]===255){if(t.length&1)throw new Error("Expected even number of octets for 16-bit unicode string");return gt(yM(t),e)}return new re(t.length,e).get(t,0)}function js(t){return t=t.replace(/^\x00+/g,""),t=t.replace(/\x00+$/g,""),t}function ye(t,e,n,r){const s=e+~~(n/8),i=n%8;let o=t[s];o&=255>>i;const a=8-i,l=r-a;return l<0?o>>=8-i-r:l>0&&(o<<=l,o|=ye(t,e,n+a,l)),o}function In(t,e,n){return ye(t,e,n,1)===1}function vM(t){const e=[];for(let n=0,r=t.length;n<r;n++){const s=Number(t.charCodeAt(n)).toString(16);e.push(s.length===1?`0${s}`:s)}return e.join(" ")}function xM(t){return 10*Math.log10(t)}function wM(t){return 10**(t/10)}function _M(t){const e=t.split(" ").map(n=>n.trim().toLowerCase());if(e.length>=1){const n=Number.parseFloat(e[0]);return e.length===2&&e[1]==="db"?{dB:n,ratio:wM(n)}:{dB:xM(n),ratio:n}}}var pc;(function(t){t[t.Other=0]="Other",t[t["32x32 pixels 'file icon' (PNG only)"]=1]="32x32 pixels 'file icon' (PNG only)",t[t["Other file icon"]=2]="Other file icon",t[t["Cover (front)"]=3]="Cover (front)",t[t["Cover (back)"]=4]="Cover (back)",t[t["Leaflet page"]=5]="Leaflet page",t[t["Media (e.g. label side of CD)"]=6]="Media (e.g. label side of CD)",t[t["Lead artist/lead performer/soloist"]=7]="Lead artist/lead performer/soloist",t[t["Artist/performer"]=8]="Artist/performer",t[t.Conductor=9]="Conductor",t[t["Band/Orchestra"]=10]="Band/Orchestra",t[t.Composer=11]="Composer",t[t["Lyricist/text writer"]=12]="Lyricist/text writer",t[t["Recording Location"]=13]="Recording Location",t[t["During recording"]=14]="During recording",t[t["During performance"]=15]="During performance",t[t["Movie/video screen capture"]=16]="Movie/video screen capture",t[t["A bright coloured fish"]=17]="A bright coloured fish",t[t.Illustration=18]="Illustration",t[t["Band/artist logotype"]=19]="Band/artist logotype",t[t["Publisher/Studio logotype"]=20]="Publisher/Studio logotype"})(pc||(pc={}));var O_;(function(t){t[t.other=0]="other",t[t.lyrics=1]="lyrics",t[t.text=2]="text",t[t.movement_part=3]="movement_part",t[t.events=4]="events",t[t.chord=5]="chord",t[t.trivia_pop=6]="trivia_pop"})(O_||(O_={}));var M_;(function(t){t[t.notSynchronized0=0]="notSynchronized0",t[t.mpegFrameNumber=1]="mpegFrameNumber",t[t.milliseconds=2]="milliseconds"})(M_||(M_={}));const BI={get:(t,e)=>t[e+3]&127|t[e+2]<<7|t[e+1]<<14|t[e]<<21,len:4},D0={len:10,get:(t,e)=>({fileIdentifier:new re(3,"ascii").get(t,e),version:{major:mc.get(t,e+3),revision:mc.get(t,e+4)},flags:{unsynchronisation:Ye(t,e+5,7),isExtendedHeader:Ye(t,e+5,6),expIndicator:Ye(t,e+5,5),footer:Ye(t,e+5,4)},size:BI.get(t,e+6)})},L_={len:10,get:(t,e)=>({size:se.get(t,e),extendedFlags:Pe.get(t,e+4),sizeOfPadding:se.get(t,e+6),crcDataPresent:Ye(t,e+4,31)})},zI={len:1,get:(t,e)=>{switch(t[e]){case 0:return{encoding:"latin1"};case 1:return{encoding:"utf-16le",bom:!0};case 2:return{encoding:"utf-16le",bom:!1};case 3:return{encoding:"utf8",bom:!1};default:return{encoding:"utf8",bom:!1}}}},O0={len:4,get:(t,e)=>({encoding:zI.get(t,e),language:new re(3,"latin1").get(t,e+1)})},F_={len:6,get:(t,e)=>{const n=O0.get(t,e);return{encoding:n.encoding,language:n.language,timeStampFormat:fe.get(t,e+4),contentType:fe.get(t,e+5)}}},_h={year:{multiple:!1},track:{multiple:!1},disk:{multiple:!1},title:{multiple:!1},artist:{multiple:!1},artists:{multiple:!0,unique:!0},albumartist:{multiple:!1},album:{multiple:!1},date:{multiple:!1},originaldate:{multiple:!1},originalyear:{multiple:!1},releasedate:{multiple:!1},comment:{multiple:!0,unique:!1},genre:{multiple:!0,unique:!0},picture:{multiple:!0,unique:!0},composer:{multiple:!0,unique:!0},lyrics:{multiple:!0,unique:!1},albumsort:{multiple:!1,unique:!0},titlesort:{multiple:!1,unique:!0},work:{multiple:!1,unique:!0},artistsort:{multiple:!1,unique:!0},albumartistsort:{multiple:!1,unique:!0},composersort:{multiple:!1,unique:!0},lyricist:{multiple:!0,unique:!0},writer:{multiple:!0,unique:!0},conductor:{multiple:!0,unique:!0},remixer:{multiple:!0,unique:!0},arranger:{multiple:!0,unique:!0},engineer:{multiple:!0,unique:!0},producer:{multiple:!0,unique:!0},technician:{multiple:!0,unique:!0},djmixer:{multiple:!0,unique:!0},mixer:{multiple:!0,unique:!0},label:{multiple:!0,unique:!0},grouping:{multiple:!1},subtitle:{multiple:!0},discsubtitle:{multiple:!1},totaltracks:{multiple:!1},totaldiscs:{multiple:!1},compilation:{multiple:!1},rating:{multiple:!0},bpm:{multiple:!1},mood:{multiple:!1},media:{multiple:!1},catalognumber:{multiple:!0,unique:!0},tvShow:{multiple:!1},tvShowSort:{multiple:!1},tvSeason:{multiple:!1},tvEpisode:{multiple:!1},tvEpisodeId:{multiple:!1},tvNetwork:{multiple:!1},podcast:{multiple:!1},podcasturl:{multiple:!1},releasestatus:{multiple:!1},releasetype:{multiple:!0},releasecountry:{multiple:!1},script:{multiple:!1},language:{multiple:!1},copyright:{multiple:!1},license:{multiple:!1},encodedby:{multiple:!1},encodersettings:{multiple:!1},gapless:{multiple:!1},barcode:{multiple:!1},isrc:{multiple:!0},asin:{multiple:!1},musicbrainz_recordingid:{multiple:!1},musicbrainz_trackid:{multiple:!1},musicbrainz_albumid:{multiple:!1},musicbrainz_artistid:{multiple:!0},musicbrainz_albumartistid:{multiple:!0},musicbrainz_releasegroupid:{multiple:!1},musicbrainz_workid:{multiple:!1},musicbrainz_trmid:{multiple:!1},musicbrainz_discid:{multiple:!1},acoustid_id:{multiple:!1},acoustid_fingerprint:{multiple:!1},musicip_puid:{multiple:!1},musicip_fingerprint:{multiple:!1},website:{multiple:!1},"performer:instrument":{multiple:!0,unique:!0},averageLevel:{multiple:!1},peakLevel:{multiple:!1},notes:{multiple:!0,unique:!1},key:{multiple:!1},originalalbum:{multiple:!1},originalartist:{multiple:!1},discogs_artist_id:{multiple:!0,unique:!0},discogs_release_id:{multiple:!1},discogs_label_id:{multiple:!1},discogs_master_release_id:{multiple:!1},discogs_votes:{multiple:!1},discogs_rating:{multiple:!1},replaygain_track_peak:{multiple:!1},replaygain_track_gain:{multiple:!1},replaygain_album_peak:{multiple:!1},replaygain_album_gain:{multiple:!1},replaygain_track_minmax:{multiple:!1},replaygain_album_minmax:{multiple:!1},replaygain_undo:{multiple:!1},description:{multiple:!0},longDescription:{multiple:!1},category:{multiple:!0},hdVideo:{multiple:!1},keywords:{multiple:!0},movement:{multiple:!1},movementIndex:{multiple:!1},movementTotal:{multiple:!1},podcastId:{multiple:!1},showMovement:{multiple:!1},stik:{multiple:!1}};function EM(t){return _h[t]&&!_h[t].multiple}function SM(t){return!_h[t].multiple||_h[t].unique||!1}class An{static toIntOrNull(e){const n=Number.parseInt(e,10);return Number.isNaN(n)?null:n}static normalizeTrack(e){const n=e.toString().split("/");return{no:Number.parseInt(n[0],10)||null,of:Number.parseInt(n[1],10)||null}}constructor(e,n){this.tagTypes=e,this.tagMap=n}mapGenericTag(e,n){e={id:e.id,value:e.value},this.postMap(e,n);const r=this.getCommonName(e.id);return r?{id:r,value:e.value}:null}getCommonName(e){return this.tagMap[e]}postMap(e,n){}}An.maxRatingScore=1;const bM={title:"title",artist:"artist",album:"album",year:"year",comment:"comment",track:"track",genre:"genre"};class TM extends An{constructor(){super(["ID3v1"],bM)}}class Yc extends An{constructor(e,n){const r={};for(const s of Object.keys(n))r[s.toUpperCase()]=n[s];super(e,r)}getCommonName(e){return this.tagMap[e.toUpperCase()]}}const kM={TIT2:"title",TPE1:"artist","TXXX:Artists":"artists",TPE2:"albumartist",TALB:"album",TDRV:"date",TORY:"originalyear",TPOS:"disk",TCON:"genre",APIC:"picture",TCOM:"composer",USLT:"lyrics",TSOA:"albumsort",TSOT:"titlesort",TOAL:"originalalbum",TSOP:"artistsort",TSO2:"albumartistsort",TSOC:"composersort",TEXT:"lyricist","TXXX:Writer":"writer",TPE3:"conductor",TPE4:"remixer","IPLS:arranger":"arranger","IPLS:engineer":"engineer","IPLS:producer":"producer","IPLS:DJ-mix":"djmixer","IPLS:mix":"mixer",TPUB:"label",TIT1:"grouping",TIT3:"subtitle",TRCK:"track",TCMP:"compilation",POPM:"rating",TBPM:"bpm",TMED:"media","TXXX:CATALOGNUMBER":"catalognumber","TXXX:MusicBrainz Album Status":"releasestatus","TXXX:MusicBrainz Album Type":"releasetype","TXXX:MusicBrainz Album Release Country":"releasecountry","TXXX:RELEASECOUNTRY":"releasecountry","TXXX:SCRIPT":"script",TLAN:"language",TCOP:"copyright",WCOP:"license",TENC:"encodedby",TSSE:"encodersettings","TXXX:BARCODE":"barcode","TXXX:ISRC":"isrc",TSRC:"isrc","TXXX:ASIN":"asin","TXXX:originalyear":"originalyear","UFID:http://musicbrainz.org":"musicbrainz_recordingid","TXXX:MusicBrainz Release Track Id":"musicbrainz_trackid","TXXX:MusicBrainz Album Id":"musicbrainz_albumid","TXXX:MusicBrainz Artist Id":"musicbrainz_artistid","TXXX:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","TXXX:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","TXXX:MusicBrainz Work Id":"musicbrainz_workid","TXXX:MusicBrainz TRM Id":"musicbrainz_trmid","TXXX:MusicBrainz Disc Id":"musicbrainz_discid","TXXX:ACOUSTID_ID":"acoustid_id","TXXX:Acoustid Id":"acoustid_id","TXXX:Acoustid Fingerprint":"acoustid_fingerprint","TXXX:MusicIP PUID":"musicip_puid","TXXX:MusicMagic Fingerprint":"musicip_fingerprint",WOAR:"website",TDRC:"date",TYER:"year",TDOR:"originaldate","TIPL:arranger":"arranger","TIPL:engineer":"engineer","TIPL:producer":"producer","TIPL:DJ-mix":"djmixer","TIPL:mix":"mixer",TMOO:"mood",SYLT:"lyrics",TSST:"discsubtitle",TKEY:"key",COMM:"comment",TOPE:"originalartist","PRIV:AverageLevel":"averageLevel","PRIV:PeakLevel":"peakLevel","TXXX:DISCOGS_ARTIST_ID":"discogs_artist_id","TXXX:DISCOGS_ARTISTS":"artists","TXXX:DISCOGS_ARTIST_NAME":"artists","TXXX:DISCOGS_ALBUM_ARTISTS":"albumartist","TXXX:DISCOGS_CATALOG":"catalognumber","TXXX:DISCOGS_COUNTRY":"releasecountry","TXXX:DISCOGS_DATE":"originaldate","TXXX:DISCOGS_LABEL":"label","TXXX:DISCOGS_LABEL_ID":"discogs_label_id","TXXX:DISCOGS_MASTER_RELEASE_ID":"discogs_master_release_id","TXXX:DISCOGS_RATING":"discogs_rating","TXXX:DISCOGS_RELEASED":"date","TXXX:DISCOGS_RELEASE_ID":"discogs_release_id","TXXX:DISCOGS_VOTES":"discogs_votes","TXXX:CATALOGID":"catalognumber","TXXX:STYLE":"genre","TXXX:REPLAYGAIN_TRACK_PEAK":"replaygain_track_peak","TXXX:REPLAYGAIN_TRACK_GAIN":"replaygain_track_gain","TXXX:REPLAYGAIN_ALBUM_PEAK":"replaygain_album_peak","TXXX:REPLAYGAIN_ALBUM_GAIN":"replaygain_album_gain","TXXX:MP3GAIN_MINMAX":"replaygain_track_minmax","TXXX:MP3GAIN_ALBUM_MINMAX":"replaygain_album_minmax","TXXX:MP3GAIN_UNDO":"replaygain_undo",MVNM:"movement",MVIN:"movementIndex",PCST:"podcast",TCAT:"category",TDES:"description",TDRL:"releasedate",TGID:"podcastId",TKWD:"keywords",WFED:"podcasturl",GRP1:"grouping"};class Qv extends Yc{static toRating(e){return{source:e.email,rating:e.rating>0?(e.rating-1)/254*An.maxRatingScore:void 0}}constructor(){super(["ID3v2.3","ID3v2.4"],kM)}postMap(e,n){switch(e.id){case"UFID":{const r=e.value;r.owner_identifier==="http://musicbrainz.org"&&(e.id+=`:${r.owner_identifier}`,e.value=gt(r.identifier,"latin1"))}break;case"PRIV":{const r=e.value;switch(r.owner_identifier){case"AverageLevel":case"PeakValue":e.id+=`:${r.owner_identifier}`,e.value=r.data.length===4?Z.get(r.data,0):null,e.value===null&&n.addWarning("Failed to parse PRIV:PeakValue");break;default:n.addWarning(`Unknown PRIV owner-identifier: ${r.data}`)}}break;case"POPM":e.value=Qv.toRating(e.value);break}}}const IM={Title:"title",Author:"artist","WM/AlbumArtist":"albumartist","WM/AlbumTitle":"album","WM/Year":"date","WM/OriginalReleaseTime":"originaldate","WM/OriginalReleaseYear":"originalyear",Description:"comment","WM/TrackNumber":"track","WM/PartOfSet":"disk","WM/Genre":"genre","WM/Composer":"composer","WM/Lyrics":"lyrics","WM/AlbumSortOrder":"albumsort","WM/TitleSortOrder":"titlesort","WM/ArtistSortOrder":"artistsort","WM/AlbumArtistSortOrder":"albumartistsort","WM/ComposerSortOrder":"composersort","WM/Writer":"lyricist","WM/Conductor":"conductor","WM/ModifiedBy":"remixer","WM/Engineer":"engineer","WM/Producer":"producer","WM/DJMixer":"djmixer","WM/Mixer":"mixer","WM/Publisher":"label","WM/ContentGroupDescription":"grouping","WM/SubTitle":"subtitle","WM/SetSubTitle":"discsubtitle","WM/IsCompilation":"compilation","WM/SharedUserRating":"rating","WM/BeatsPerMinute":"bpm","WM/Mood":"mood","WM/Media":"media","WM/CatalogNo":"catalognumber","MusicBrainz/Album Status":"releasestatus","MusicBrainz/Album Type":"releasetype","MusicBrainz/Album Release Country":"releasecountry","WM/Script":"script","WM/Language":"language",Copyright:"copyright",LICENSE:"license","WM/EncodedBy":"encodedby","WM/EncodingSettings":"encodersettings","WM/Barcode":"barcode","WM/ISRC":"isrc","MusicBrainz/Track Id":"musicbrainz_recordingid","MusicBrainz/Release Track Id":"musicbrainz_trackid","MusicBrainz/Album Id":"musicbrainz_albumid","MusicBrainz/Artist Id":"musicbrainz_artistid","MusicBrainz/Album Artist Id":"musicbrainz_albumartistid","MusicBrainz/Release Group Id":"musicbrainz_releasegroupid","MusicBrainz/Work Id":"musicbrainz_workid","MusicBrainz/TRM Id":"musicbrainz_trmid","MusicBrainz/Disc Id":"musicbrainz_discid","Acoustid/Id":"acoustid_id","Acoustid/Fingerprint":"acoustid_fingerprint","MusicIP/PUID":"musicip_puid","WM/ARTISTS":"artists","WM/InitialKey":"key",ASIN:"asin","WM/Work":"work","WM/AuthorURL":"website","WM/Picture":"picture"};class Yv extends An{static toRating(e){return{rating:Number.parseFloat(e+1)/5}}constructor(){super(["asf"],IM)}postMap(e){switch(e.id){case"WM/SharedUserRating":{const n=e.id.split(":");e.value=Yv.toRating(e.value),e.id=n[0];break}}}}const CM={TT2:"title",TP1:"artist",TP2:"albumartist",TAL:"album",TYE:"year",COM:"comment",TRK:"track",TPA:"disk",TCO:"genre",PIC:"picture",TCM:"composer",TOR:"originaldate",TOT:"originalalbum",TXT:"lyricist",TP3:"conductor",TPB:"label",TT1:"grouping",TT3:"subtitle",TLA:"language",TCR:"copyright",WCP:"license",TEN:"encodedby",TSS:"encodersettings",WAR:"website",PCS:"podcast",TCP:"compilation",TDR:"date",TS2:"albumartistsort",TSA:"albumsort",TSC:"composersort",TSP:"artistsort",TST:"titlesort",WFD:"podcasturl",TBP:"bpm"};class AM extends Yc{constructor(){super(["ID3v2.2"],CM)}}const RM={Title:"title",Artist:"artist",Artists:"artists","Album Artist":"albumartist",Album:"album",Year:"date",Originalyear:"originalyear",Originaldate:"originaldate",Releasedate:"releasedate",Comment:"comment",Track:"track",Disc:"disk",DISCNUMBER:"disk",Genre:"genre","Cover Art (Front)":"picture","Cover Art (Back)":"picture",Composer:"composer",Lyrics:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",Lyricist:"lyricist",Writer:"writer",Conductor:"conductor",MixArtist:"remixer",Arranger:"arranger",Engineer:"engineer",Producer:"producer",DJMixer:"djmixer",Mixer:"mixer",Label:"label",Grouping:"grouping",Subtitle:"subtitle",DiscSubtitle:"discsubtitle",Compilation:"compilation",BPM:"bpm",Mood:"mood",Media:"media",CatalogNumber:"catalognumber",MUSICBRAINZ_ALBUMSTATUS:"releasestatus",MUSICBRAINZ_ALBUMTYPE:"releasetype",RELEASECOUNTRY:"releasecountry",Script:"script",Language:"language",Copyright:"copyright",LICENSE:"license",EncodedBy:"encodedby",EncoderSettings:"encodersettings",Barcode:"barcode",ISRC:"isrc",ASIN:"asin",musicbrainz_trackid:"musicbrainz_recordingid",musicbrainz_releasetrackid:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",Acoustid_Id:"acoustid_id",ACOUSTID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",Weblink:"website",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",MP3GAIN_MINMAX:"replaygain_track_minmax",MP3GAIN_UNDO:"replaygain_undo"};class PM extends Yc{constructor(){super(["APEv2"],RM)}}const NM={"©nam":"title","©ART":"artist",aART:"albumartist","----:com.apple.iTunes:Band":"albumartist","©alb":"album","©day":"date","©cmt":"comment","©com":"comment",trkn:"track",disk:"disk","©gen":"genre",covr:"picture","©wrt":"composer","©lyr":"lyrics",soal:"albumsort",sonm:"titlesort",soar:"artistsort",soaa:"albumartistsort",soco:"composersort","----:com.apple.iTunes:LYRICIST":"lyricist","----:com.apple.iTunes:CONDUCTOR":"conductor","----:com.apple.iTunes:REMIXER":"remixer","----:com.apple.iTunes:ENGINEER":"engineer","----:com.apple.iTunes:PRODUCER":"producer","----:com.apple.iTunes:DJMIXER":"djmixer","----:com.apple.iTunes:MIXER":"mixer","----:com.apple.iTunes:LABEL":"label","©grp":"grouping","----:com.apple.iTunes:SUBTITLE":"subtitle","----:com.apple.iTunes:DISCSUBTITLE":"discsubtitle",cpil:"compilation",tmpo:"bpm","----:com.apple.iTunes:MOOD":"mood","----:com.apple.iTunes:MEDIA":"media","----:com.apple.iTunes:CATALOGNUMBER":"catalognumber",tvsh:"tvShow",tvsn:"tvSeason",tves:"tvEpisode",sosn:"tvShowSort",tven:"tvEpisodeId",tvnn:"tvNetwork",pcst:"podcast",purl:"podcasturl","----:com.apple.iTunes:MusicBrainz Album Status":"releasestatus","----:com.apple.iTunes:MusicBrainz Album Type":"releasetype","----:com.apple.iTunes:MusicBrainz Album Release Country":"releasecountry","----:com.apple.iTunes:SCRIPT":"script","----:com.apple.iTunes:LANGUAGE":"language",cprt:"copyright","©cpy":"copyright","----:com.apple.iTunes:LICENSE":"license","©too":"encodedby",pgap:"gapless","----:com.apple.iTunes:BARCODE":"barcode","----:com.apple.iTunes:ISRC":"isrc","----:com.apple.iTunes:ASIN":"asin","----:com.apple.iTunes:NOTES":"comment","----:com.apple.iTunes:MusicBrainz Track Id":"musicbrainz_recordingid","----:com.apple.iTunes:MusicBrainz Release Track Id":"musicbrainz_trackid","----:com.apple.iTunes:MusicBrainz Album Id":"musicbrainz_albumid","----:com.apple.iTunes:MusicBrainz Artist Id":"musicbrainz_artistid","----:com.apple.iTunes:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","----:com.apple.iTunes:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","----:com.apple.iTunes:MusicBrainz Work Id":"musicbrainz_workid","----:com.apple.iTunes:MusicBrainz TRM Id":"musicbrainz_trmid","----:com.apple.iTunes:MusicBrainz Disc Id":"musicbrainz_discid","----:com.apple.iTunes:Acoustid Id":"acoustid_id","----:com.apple.iTunes:Acoustid Fingerprint":"acoustid_fingerprint","----:com.apple.iTunes:MusicIP PUID":"musicip_puid","----:com.apple.iTunes:fingerprint":"musicip_fingerprint","----:com.apple.iTunes:replaygain_track_gain":"replaygain_track_gain","----:com.apple.iTunes:replaygain_track_peak":"replaygain_track_peak","----:com.apple.iTunes:replaygain_album_gain":"replaygain_album_gain","----:com.apple.iTunes:replaygain_album_peak":"replaygain_album_peak","----:com.apple.iTunes:replaygain_track_minmax":"replaygain_track_minmax","----:com.apple.iTunes:replaygain_album_minmax":"replaygain_album_minmax","----:com.apple.iTunes:replaygain_undo":"replaygain_undo",gnre:"genre","----:com.apple.iTunes:ALBUMARTISTSORT":"albumartistsort","----:com.apple.iTunes:ARTISTS":"artists","----:com.apple.iTunes:ORIGINALDATE":"originaldate","----:com.apple.iTunes:ORIGINALYEAR":"originalyear","----:com.apple.iTunes:RELEASEDATE":"releasedate",desc:"description",ldes:"longDescription","©mvn":"movement","©mvi":"movementIndex","©mvc":"movementTotal","©wrk":"work",catg:"category",egid:"podcastId",hdvd:"hdVideo",keyw:"keywords",shwm:"showMovement",stik:"stik",rate:"rating"},jM="iTunes";class $_ extends Yc{constructor(){super([jM],NM)}postMap(e,n){switch(e.id){case"rate":e.value={source:void 0,rating:Number.parseFloat(e.value)/100};break}}}const DM={TITLE:"title",ARTIST:"artist",ARTISTS:"artists",ALBUMARTIST:"albumartist","ALBUM ARTIST":"albumartist",ALBUM:"album",DATE:"date",ORIGINALDATE:"originaldate",ORIGINALYEAR:"originalyear",RELEASEDATE:"releasedate",COMMENT:"comment",TRACKNUMBER:"track",DISCNUMBER:"disk",GENRE:"genre",METADATA_BLOCK_PICTURE:"picture",COMPOSER:"composer",LYRICS:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",LYRICIST:"lyricist",WRITER:"writer",CONDUCTOR:"conductor",REMIXER:"remixer",ARRANGER:"arranger",ENGINEER:"engineer",PRODUCER:"producer",DJMIXER:"djmixer",MIXER:"mixer",LABEL:"label",GROUPING:"grouping",SUBTITLE:"subtitle",DISCSUBTITLE:"discsubtitle",TRACKTOTAL:"totaltracks",DISCTOTAL:"totaldiscs",COMPILATION:"compilation",RATING:"rating",BPM:"bpm",KEY:"key",MOOD:"mood",MEDIA:"media",CATALOGNUMBER:"catalognumber",RELEASESTATUS:"releasestatus",RELEASETYPE:"releasetype",RELEASECOUNTRY:"releasecountry",SCRIPT:"script",LANGUAGE:"language",COPYRIGHT:"copyright",LICENSE:"license",ENCODEDBY:"encodedby",ENCODERSETTINGS:"encodersettings",BARCODE:"barcode",ISRC:"isrc",ASIN:"asin",MUSICBRAINZ_TRACKID:"musicbrainz_recordingid",MUSICBRAINZ_RELEASETRACKID:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",ACOUSTID_ID:"acoustid_id",ACOUSTID_ID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",WEBSITE:"website",NOTES:"notes",TOTALTRACKS:"totaltracks",TOTALDISCS:"totaldiscs",DISCOGS_ARTIST_ID:"discogs_artist_id",DISCOGS_ARTISTS:"artists",DISCOGS_ARTIST_NAME:"artists",DISCOGS_ALBUM_ARTISTS:"albumartist",DISCOGS_CATALOG:"catalognumber",DISCOGS_COUNTRY:"releasecountry",DISCOGS_DATE:"originaldate",DISCOGS_LABEL:"label",DISCOGS_LABEL_ID:"discogs_label_id",DISCOGS_MASTER_RELEASE_ID:"discogs_master_release_id",DISCOGS_RATING:"discogs_rating",DISCOGS_RELEASED:"date",DISCOGS_RELEASE_ID:"discogs_release_id",DISCOGS_VOTES:"discogs_votes",CATALOGID:"catalognumber",STYLE:"genre",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",REPLAYGAIN_ALBUM_GAIN:"replaygain_album_gain",REPLAYGAIN_ALBUM_PEAK:"replaygain_album_peak",REPLAYGAIN_MINMAX:"replaygain_track_minmax",REPLAYGAIN_ALBUM_MINMAX:"replaygain_album_minmax",REPLAYGAIN_UNDO:"replaygain_undo"};class Eh extends An{static toRating(e,n,r){return{source:e?e.toLowerCase():void 0,rating:Number.parseFloat(n)/r*An.maxRatingScore}}constructor(){super(["vorbis"],DM)}postMap(e){if(e.id==="RATING")e.value=Eh.toRating(void 0,e.value,100);else if(e.id.indexOf("RATING:")===0){const n=e.id.split(":");e.value=Eh.toRating(n[1],e.value,1),e.id=n[0]}}}const OM={IART:"artist",ICRD:"date",INAM:"title",TITL:"title",IPRD:"album",ITRK:"track",IPRT:"track",COMM:"comment",ICMT:"comment",ICNT:"releasecountry",GNRE:"genre",IWRI:"writer",RATE:"rating",YEAR:"year",ISFT:"encodedby",CODE:"encodedby",TURL:"website",IGNR:"genre",IENG:"engineer",ITCH:"technician",IMED:"media",IRPD:"album"};class MM extends An{constructor(){super(["exif"],OM)}}const LM={"segment:title":"title","album:ARTIST":"albumartist","album:ARTISTSORT":"albumartistsort","album:TITLE":"album","album:DATE_RECORDED":"originaldate","album:DATE_RELEASED":"releasedate","album:PART_NUMBER":"disk","album:TOTAL_PARTS":"totaltracks","track:ARTIST":"artist","track:ARTISTSORT":"artistsort","track:TITLE":"title","track:PART_NUMBER":"track","track:MUSICBRAINZ_TRACKID":"musicbrainz_recordingid","track:MUSICBRAINZ_ALBUMID":"musicbrainz_albumid","track:MUSICBRAINZ_ARTISTID":"musicbrainz_artistid","track:PUBLISHER":"label","track:GENRE":"genre","track:ENCODER":"encodedby","track:ENCODER_OPTIONS":"encodersettings","edition:TOTAL_PARTS":"totaldiscs",picture:"picture"};class FM extends Yc{constructor(){super(["matroska"],LM)}}const $M={NAME:"title",AUTH:"artist","(c) ":"copyright",ANNO:"comment"};class BM extends An{constructor(){super(["AIFF"],$M)}}class zM{constructor(){this.tagMappers={},[new TM,new AM,new Qv,new $_,new $_,new Eh,new PM,new Yv,new MM,new FM,new BM].forEach(e=>{this.registerTagMapper(e)})}mapTag(e,n,r){if(this.tagMappers[e])return this.tagMappers[e].mapGenericTag(n,r);throw new Error(`No generic tag mapper defined for tag-format: ${e}`)}registerTagMapper(e){for(const n of e.tagTypes)this.tagMappers[n]=e}}const Ii=je("music-metadata:collector"),VM=["matroska","APEv2","vorbis","ID3v2.4","ID3v2.3","ID3v2.2","exif","asf","iTunes","AIFF","ID3v1"];class UM{constructor(e){this.opts=e,this.format={tagTypes:[],trackInfo:[]},this.native={},this.common={track:{no:null,of:null},disk:{no:null,of:null},movementIndex:{no:null,of:null}},this.quality={warnings:[]},this.commonOrigin={},this.originPriority={},this.tagMapper=new zM;let n=1;for(const r of VM)this.originPriority[r]=n++;this.originPriority.artificial=500,this.originPriority.id3v1=600}hasAny(){return Object.keys(this.native).length>0}addStreamInfo(e){Ii(`streamInfo: type=${e.type?no[e.type]:"?"}, codec=${e.codecName}`),this.format.trackInfo.push(e)}setFormat(e,n){var r;Ii(`format: ${e} = ${n}`),this.format[e]=n,(r=this.opts)!=null&&r.observer&&this.opts.observer({metadata:this,tag:{type:"format",id:e,value:n}})}async addTag(e,n,r){Ii(`tag ${e}.${n} = ${r}`),this.native[e]||(this.format.tagTypes.push(e),this.native[e]=[]),this.native[e].push({id:n,value:r}),await this.toCommon(e,n,r)}addWarning(e){this.quality.warnings.push({message:e})}async postMap(e,n){switch(n.id){case"artist":if(this.commonOrigin.artist===this.originPriority[e])return this.postMap("artificial",{id:"artists",value:n.value});this.common.artists||this.setGenericTag("artificial",{id:"artists",value:n.value});break;case"artists":if((!this.common.artist||this.commonOrigin.artist===this.originPriority.artificial)&&(!this.common.artists||this.common.artists.indexOf(n.value)===-1)){const r=(this.common.artists||[]).concat([n.value]),i={id:"artist",value:HM(r)};this.setGenericTag("artificial",i)}break;case"picture":return this.postFixPicture(n.value).then(r=>{r!==null&&(n.value=r,this.setGenericTag(e,n))});case"totaltracks":this.common.track.of=An.toIntOrNull(n.value);return;case"totaldiscs":this.common.disk.of=An.toIntOrNull(n.value);return;case"movementTotal":this.common.movementIndex.of=An.toIntOrNull(n.value);return;case"track":case"disk":case"movementIndex":{const r=this.common[n.id].of;this.common[n.id]=An.normalizeTrack(n.value),this.common[n.id].of=r??this.common[n.id].of;return}case"bpm":case"year":case"originalyear":n.value=Number.parseInt(n.value,10);break;case"date":{const r=Number.parseInt(n.value.substr(0,4),10);Number.isNaN(r)||(this.common.year=r);break}case"discogs_label_id":case"discogs_release_id":case"discogs_master_release_id":case"discogs_artist_id":case"discogs_votes":n.value=typeof n.value=="string"?Number.parseInt(n.value,10):n.value;break;case"replaygain_track_gain":case"replaygain_track_peak":case"replaygain_album_gain":case"replaygain_album_peak":n.value=_M(n.value);break;case"replaygain_track_minmax":n.value=n.value.split(",").map(r=>Number.parseInt(r,10));break;case"replaygain_undo":{const r=n.value.split(",").map(s=>Number.parseInt(s,10));n.value={leftChannel:r[0],rightChannel:r[1]};break}case"gapless":case"compilation":case"podcast":case"showMovement":n.value=n.value==="1"||n.value===1;break;case"isrc":{const r=this.common[n.id];if(r&&r.indexOf(n.value)!==-1)return;break}case"comment":typeof n.value=="string"&&(n.value={text:n.value}),n.value.descriptor==="iTunPGAP"&&this.setGenericTag(e,{id:"gapless",value:n.value.text==="1"});break}n.value!==null&&this.setGenericTag(e,n)}toCommonMetadata(){return{format:this.format,native:this.native,quality:this.quality,common:this.common}}async postFixPicture(e){if(e.data&&e.data.length>0){if(!e.format){const n=await MI(Uint8Array.from(e.data));if(n)e.format=n.mime;else return null}switch(e.format=e.format.toLocaleLowerCase(),e.format){case"image/jpg":e.format="image/jpeg"}return e}return this.addWarning("Empty picture tag found"),null}async toCommon(e,n,r){const s={id:n,value:r},i=this.tagMapper.mapTag(e,s,this);i&&await this.postMap(e,i)}setGenericTag(e,n){var i;Ii(`common.${n.id} = ${n.value}`);const r=this.commonOrigin[n.id]||1e3,s=this.originPriority[e];if(EM(n.id))if(s<=r)this.common[n.id]=n.value,this.commonOrigin[n.id]=s;else return Ii(`Ignore native tag (singleton): ${e}.${n.id} = ${n.value}`);else if(s===r)!SM(n.id)||this.common[n.id].indexOf(n.value)===-1?this.common[n.id].push(n.value):Ii(`Ignore duplicate value: ${e}.${n.id} = ${n.value}`);else if(s<r)this.common[n.id]=[n.value],this.commonOrigin[n.id]=s;else return Ii(`Ignore native tag (list): ${e}.${n.id} = ${n.value}`);(i=this.opts)!=null&&i.observer&&this.opts.observer({metadata:this,tag:{type:"common",id:n.id,value:n.value}})}}function HM(t){return t.length>2?`${t.slice(0,t.length-1).join(", ")} & ${t[t.length-1]}`:t.join(" & ")}class Vn{constructor(){this.metadata=void 0,this.tokenizer=void 0,this.options=void 0}init(e,n,r){return this.metadata=e,this.tokenizer=n,this.options=r,this}}const WM=/^[\x21-\x7e©][\x20-\x7e\x00()]{3}/,He={len:4,get:(t,e)=>{const n=Gv(t.slice(e,e+He.len),"latin1");if(!n.match(WM))throw new Error(`FourCC contains invalid characters: ${vM(n)} "${n}"`);return n},put:(t,e,n)=>{const r=qO(n);if(r.length!==4)throw new Error("Invalid length");return t.set(r,e),e+4}};var Zo;(function(t){t[t.text_utf8=0]="text_utf8",t[t.binary=1]="binary",t[t.external_info=2]="external_info",t[t.reserved=3]="reserved"})(Zo||(Zo={}));const B_={len:52,get:(t,e)=>({ID:He.get(t,e),version:Z.get(t,e+4)/1e3,descriptorBytes:Z.get(t,e+8),headerBytes:Z.get(t,e+12),seekTableBytes:Z.get(t,e+16),headerDataBytes:Z.get(t,e+20),apeFrameDataBytes:Z.get(t,e+24),apeFrameDataBytesHigh:Z.get(t,e+28),terminatingDataBytes:Z.get(t,e+32),fileMD5:new ln(16).get(t,e+36)})},qM={len:24,get:(t,e)=>({compressionLevel:ke.get(t,e),formatFlags:ke.get(t,e+2),blocksPerFrame:Z.get(t,e+4),finalFrameBlocks:Z.get(t,e+8),totalFrames:Z.get(t,e+12),bitsPerSample:ke.get(t,e+16),channel:ke.get(t,e+18),sampleRate:Z.get(t,e+20)})},qn={len:32,get:(t,e)=>({ID:new re(8,"ascii").get(t,e),version:Z.get(t,e+8),size:Z.get(t,e+12),fields:Z.get(t,e+16),flags:VI(Z.get(t,e+20))})},Pp={len:8,get:(t,e)=>({size:Z.get(t,e),flags:VI(Z.get(t,e+4))})};function VI(t){return{containsHeader:Gu(t,31),containsFooter:Gu(t,30),isHeader:Gu(t,29),readOnly:Gu(t,0),dataType:(t&6)>>1}}function Gu(t,e){return(t&1<<e)!==0}const Ci=je("music-metadata:parser:APEv2"),z_="APEv2",V_="APETAGEX";class Tr extends Vn{constructor(){super(...arguments),this.ape={}}static tryParseApeHeader(e,n,r){const s=new Tr;return s.init(e,n,r),s.tryParseApeHeader()}static calculateDuration(e){let n=e.totalFrames>1?e.blocksPerFrame*(e.totalFrames-1):0;return n+=e.finalFrameBlocks,n/e.sampleRate}static async findApeFooterOffset(e,n){const r=new Uint8Array(qn.len);await e.randomRead(r,0,qn.len,n-qn.len);const s=qn.get(r,0);if(s.ID==="APETAGEX")return s.flags.isHeader?Ci(`APE Header found at offset=${n-qn.len}`):(Ci(`APE Footer found at offset=${n-qn.len}`),n-=s.size),{footer:s,offset:n}}static parseTagFooter(e,n,r){const s=qn.get(n,n.length-qn.len);if(s.ID!==V_)throw new Error("Unexpected APEv2 Footer ID preamble value.");Ia(n);const i=new Tr;return i.init(e,Ia(n),r),i.parseTags(s)}async tryParseApeHeader(){if(this.tokenizer.fileInfo.size&&this.tokenizer.fileInfo.size-this.tokenizer.position<qn.len){Ci("No APEv2 header found, end-of-file reached");return}const e=await this.tokenizer.peekToken(qn);if(e.ID===V_)return await this.tokenizer.ignore(qn.len),this.parseTags(e);if(Ci(`APEv2 header not found at offset=${this.tokenizer.position}`),this.tokenizer.fileInfo.size){const n=this.tokenizer.fileInfo.size-this.tokenizer.position,r=new Uint8Array(n);return await this.tokenizer.readBuffer(r),Tr.parseTagFooter(this.metadata,r,this.options)}}async parse(){const e=await this.tokenizer.readToken(B_);if(e.ID!=="MAC ")throw new Error("Unexpected descriptor ID");this.ape.descriptor=e;const n=e.descriptorBytes-B_.len,r=await(n>0?this.parseDescriptorExpansion(n):this.parseHeader());return await this.tokenizer.ignore(r.forwardBytes),this.tryParseApeHeader()}async parseTags(e){const n=new Uint8Array(256);let r=e.size-qn.len;Ci(`Parse APE tags at offset=${this.tokenizer.position}, size=${r}`);for(let s=0;s<e.fields;s++){if(r<Pp.len){this.metadata.addWarning(`APEv2 Tag-header: ${e.fields-s} items remaining, but no more tag data to read.`);break}const i=await this.tokenizer.readToken(Pp);r-=Pp.len+i.size,await this.tokenizer.peekBuffer(n,{length:Math.min(n.length,r)});let o=Sn(n,0,n.length);const a=await this.tokenizer.readToken(new re(o,"ascii"));switch(await this.tokenizer.ignore(1),r-=a.length+1,i.flags.dataType){case Zo.text_utf8:{const c=(await this.tokenizer.readToken(new re(i.size,"utf8"))).split(/\x00/g);await Promise.all(c.map(d=>this.metadata.addTag(z_,a,d)));break}case Zo.binary:if(this.options.skipCovers)await this.tokenizer.ignore(i.size);else{const l=new Uint8Array(i.size);await this.tokenizer.readBuffer(l),o=Sn(l,0,l.length);const c=Gv(l.slice(0,o)),d=l.slice(o+1);await this.metadata.addTag(z_,a,{description:c,data:d})}break;case Zo.external_info:Ci(`Ignore external info ${a}`),await this.tokenizer.ignore(i.size);break;case Zo.reserved:Ci(`Ignore external info ${a}`),this.metadata.addWarning(`APEv2 header declares a reserved datatype for "${a}"`),await this.tokenizer.ignore(i.size);break}}}async parseDescriptorExpansion(e){return await this.tokenizer.ignore(e),this.parseHeader()}async parseHeader(){const e=await this.tokenizer.readToken(qM);if(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("container","Monkey's Audio"),this.metadata.setFormat("bitsPerSample",e.bitsPerSample),this.metadata.setFormat("sampleRate",e.sampleRate),this.metadata.setFormat("numberOfChannels",e.channel),this.metadata.setFormat("duration",Tr.calculateDuration(e)),!this.ape.descriptor)throw new Error("Missing APE descriptor");return{forwardBytes:this.ape.descriptor.seekTableBytes+this.ape.descriptor.headerDataBytes+this.ape.descriptor.apeFrameDataBytes+this.ape.descriptor.terminatingDataBytes}}}const Ku=je("music-metadata:parser:ID3v1"),Sh=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","Alt. Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast-Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big Beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio Theatre","Neue Deutsche Welle","Podcast","Indie Rock","G-Funk","Dubstep","Garage Rock","Psybient"],Xu={len:128,get:(t,e)=>{const n=new Po(3).get(t,e);return n==="TAG"?{header:n,title:new Po(30).get(t,e+3),artist:new Po(30).get(t,e+33),album:new Po(30).get(t,e+63),year:new Po(4).get(t,e+93),comment:new Po(28).get(t,e+97),zeroByte:fe.get(t,e+127),track:fe.get(t,e+126),genre:fe.get(t,e+127)}:null}};class Po{constructor(e){this.len=e,this.stringType=new re(e,"latin1")}get(e,n){let r=this.stringType.get(e,n);return r=$I(r),r=r.trim(),r.length>0?r:void 0}}class Jv extends Vn{static getGenre(e){if(e<Sh.length)return Sh[e]}async parse(){if(!this.tokenizer.fileInfo.size){Ku("Skip checking for ID3v1 because the file-size is unknown");return}if(this.options.apeHeader){this.tokenizer.ignore(this.options.apeHeader.offset-this.tokenizer.position);const r=new Tr;r.init(this.metadata,this.tokenizer,this.options),await r.parseTags(this.options.apeHeader.footer)}const e=this.tokenizer.fileInfo.size-Xu.len;if(this.tokenizer.position>e){Ku("Already consumed the last 128 bytes");return}const n=await this.tokenizer.readToken(Xu,e);if(n){Ku("ID3v1 header found at: pos=%s",this.tokenizer.fileInfo.size-Xu.len);const r=["title","artist","album","comment","track","year"];for(const i of r)n[i]&&n[i]!==""&&await this.addTag(i,n[i]);const s=Jv.getGenre(n.genre);s&&await this.addTag("genre",s)}else Ku("ID3v1 header not found at: pos=%s",this.tokenizer.fileInfo.size-Xu.len)}async addTag(e,n){await this.metadata.addTag("ID3v1",e,n)}}const U_=je("music-metadata:id3v2:frame-parser"),sr="latin1";function GM(t){const e=[];let n,r="";for(const s of t)if(typeof n=="string")if(s==="("&&n==="")r+="(",n=void 0;else if(s===")"){r!==""&&(e.push(r),r="");const i=H_(n);i&&e.push(i),n=void 0}else n+=s;else s==="("?n="":r+=s;return r&&(e.length===0&&r.match(/^\d*$/)&&(r=H_(r)),r&&e.push(r)),e}function H_(t){if(t==="RX")return"Remix";if(t==="CR")return"Cover";if(t.match(/^\d*$/))return Sh[Number.parseInt(t)]}class bn{constructor(e,n){this.major=e,this.warningCollector=n}readData(e,n,r){if(e.length===0){this.warningCollector.addWarning(`id3v2.${this.major} header has empty tag type=${n}`);return}const{encoding:s,bom:i}=zI.get(e,0),o=e.length;let a=0,l=[];const c=bn.getNullTerminatorLength(s);let d;switch(U_(`Parsing tag type=${n}, encoding=${s}, bom=${i}`),n!=="TXXX"&&n[0]==="T"?"T*":n){case"T*":case"GRP1":case"IPLS":case"MVIN":case"MVNM":case"PCS":case"PCST":{let h;try{h=gt(e.slice(1),s).replace(/\x00+$/,"")}catch(m){if(m instanceof Error){this.warningCollector.addWarning(`id3v2.${this.major} type=${n} header has invalid string value: ${m.message}`);break}throw m}switch(n){case"TMCL":case"TIPL":case"IPLS":l=bn.functionList(this.splitValue(n,h));break;case"TRK":case"TRCK":case"TPOS":l=h;break;case"TCOM":case"TEXT":case"TOLY":case"TOPE":case"TPE1":case"TSRC":l=this.splitValue(n,h);break;case"TCO":case"TCON":l=this.splitValue(n,h).map(m=>GM(m)).reduce((m,p)=>m.concat(p),[]);break;case"PCS":case"PCST":l=this.major>=4?this.splitValue(n,h):[h],l=Array.isArray(l)&&l[0]===""?1:0;break;default:l=this.major>=4?this.splitValue(n,h):[h]}break}case"TXXX":{const h=bn.readIdentifierAndData(e,a+1,o,s);l={description:h.id,text:this.splitValue(n,gt(h.data,s).replace(/\x00+$/,""))};break}case"PIC":case"APIC":if(r){const h={};switch(a+=1,this.major){case 2:h.format=gt(e.slice(a,a+3),"latin1"),a+=3;break;case 3:case 4:d=Sn(e,a,o,sr),h.format=gt(e.slice(a,d),sr),a=d+1;break;default:throw new Error(`Warning: unexpected major versionIndex: ${this.major}`)}h.format=bn.fixPictureMimeType(h.format),h.type=pc[e[a]],a+=1,d=Sn(e,a,o,s),h.description=gt(e.slice(a,d),s),a=d+c,h.data=e.slice(a,o),l=h}break;case"CNT":case"PCNT":l=se.get(e,0);break;case"SYLT":{const h=F_.get(e,0);a+=F_.len;const m={descriptor:"",language:h.language,contentType:h.contentType,timeStampFormat:h.timeStampFormat,syncText:[]};let p=!1;for(;a<o;){const v=bn.readNullTerminatedString(e.subarray(a),h.encoding);if(a+=v.len,p){const y=se.get(e,a);a+=se.len,m.syncText.push({text:v.text,timestamp:y})}else m.descriptor=v.text,p=!0}l=m;break}case"ULT":case"USLT":case"COM":case"COMM":{const h=O0.get(e,a);a+=O0.len;const m=bn.readNullTerminatedString(e.subarray(a),h.encoding);a+=m.len;const p=bn.readNullTerminatedString(e.subarray(a),h.encoding);l={language:h.language,descriptor:m.text,text:p.text};break}case"UFID":{const h=bn.readIdentifierAndData(e,a,o,sr);l={owner_identifier:h.id,identifier:h.data};break}case"PRIV":{const h=bn.readIdentifierAndData(e,a,o,sr);l={owner_identifier:h.id,data:h.data};break}case"POPM":{d=Sn(e,a,o,sr);const h=gt(e.slice(a,d),sr);a=d+1;const m=o-a;l={email:h,rating:fe.get(e,a),counter:m>=5?se.get(e,a+1):void 0};break}case"GEOB":{d=Sn(e,a+1,o,s);const h=gt(e.slice(a+1,d),sr);a=d+1,d=Sn(e,a,o-a,s);const m=gt(e.slice(a,d),sr);a=d+1,d=Sn(e,a,o-a,s);const p=gt(e.slice(a,d),sr);l={type:h,filename:m,description:p,data:e.slice(a+1,o)};break}case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":d=Sn(e,a+1,o,s),l=gt(e.slice(a,d),sr);break;case"WXXX":{d=Sn(e,a+1,o,s);const h=gt(e.slice(a+1,d),s);a=d+(s==="utf-16le"?2:1),l={description:h,url:gt(e.slice(a,o),sr)};break}case"WFD":case"WFED":l=gt(e.slice(a+1,Sn(e,a+1,o,s)),s);break;case"MCDI":{l=e.slice(0,o);break}default:U_(`Warning: unsupported id3v2-tag-type: ${n}`);break}return l}static readNullTerminatedString(e,n){let r=n.bom?2:0;const s=Sn(e,r,e.length,n.encoding),i=e.slice(r,s);return n.encoding==="utf-16le"?r=s+2:r=s+1,{text:gt(i,n.encoding),len:r}}static fixPictureMimeType(e){switch(e=e.toLocaleLowerCase(),e){case"jpg":return"image/jpeg";case"png":return"image/png"}return e}static functionList(e){const n={};for(let r=0;r+1<e.length;r+=2){const s=e[r+1].split(",");n[e[r]]=n[e[r]]?n[e[r]].concat(s):s}return n}splitValue(e,n){let r;return this.major<4?(r=n.split(/\x00/g),r.length>1?this.warningCollector.addWarning(`ID3v2.${this.major} ${e} uses non standard null-separator.`):r=n.split(/\//g)):r=n.split(/\x00/g),bn.trimArray(r)}static trimArray(e){return e.map(n=>n.replace(/\x00+$/,"").trim())}static readIdentifierAndData(e,n,r,s){const i=Sn(e,n,r,s),o=gt(e.slice(n,i),s);return n=i+bn.getNullTerminatorLength(s),{id:o,data:e.slice(n,r)}}static getNullTerminatorLength(e){return e==="utf-16le"?2:1}}const W_=new TextDecoder("ascii");class lr{constructor(){this.tokenizer=void 0,this.id3Header=void 0,this.metadata=void 0,this.headerType=void 0,this.options=void 0}static removeUnsyncBytes(e){let n=0,r=0;for(;n<e.length-1;)n!==r&&(e[r]=e[n]),n+=e[n]===255&&e[n+1]===0?2:1,r++;return n<e.length&&(e[r++]=e[n]),e.slice(0,r)}static getFrameHeaderLength(e){switch(e){case 2:return 6;case 3:case 4:return 10;default:throw new Error("header versionIndex is incorrect")}}static readFrameFlags(e){return{status:{tag_alter_preservation:Ye(e,0,6),file_alter_preservation:Ye(e,0,5),read_only:Ye(e,0,4)},format:{grouping_identity:Ye(e,1,7),compression:Ye(e,1,3),encryption:Ye(e,1,2),unsynchronisation:Ye(e,1,1),data_length_indicator:Ye(e,1,0)}}}static readFrameData(e,n,r,s,i){var a,l;const o=new bn(r,i);switch(r){case 2:return o.readData(e,n.id,s);case 3:case 4:return(a=n.flags)!=null&&a.format.unsynchronisation&&(e=lr.removeUnsyncBytes(e)),(l=n.flags)!=null&&l.format.data_length_indicator&&(e=e.slice(4,e.length)),o.readData(e,n.id,s);default:throw new Error(`Unexpected majorVer: ${r}`)}}static makeDescriptionTagName(e,n){return e+(n?`:${n}`:"")}async parse(e,n,r){this.tokenizer=n,this.metadata=e,this.options=r;const s=await this.tokenizer.readToken(D0);if(s.fileIdentifier!=="ID3")throw new Error("expected ID3-header file-identifier 'ID3' was not found");return this.id3Header=s,this.headerType=`ID3v2.${s.version.major}`,s.flags.isExtendedHeader?this.parseExtendedHeader():this.parseId3Data(s.size)}async parseExtendedHeader(){const e=await this.tokenizer.readToken(L_),n=e.size-L_.len;return n>0?this.parseExtendedHeaderData(n,e.size):this.parseId3Data(this.id3Header.size-e.size)}async parseExtendedHeaderData(e,n){return await this.tokenizer.ignore(e),this.parseId3Data(this.id3Header.size-n)}async parseId3Data(e){const n=await this.tokenizer.readToken(new ln(e));for(const r of this.parseMetadata(n))switch(r.id){case"TXXX":r.value&&await this.handleTag(r,r.value.text,()=>r.value.description);break;default:await(Array.isArray(r.value)?Promise.all(r.value.map(s=>this.addTag(r.id,s))):this.addTag(r.id,r.value))}}async handleTag(e,n,r,s=i=>i){await Promise.all(n.map(i=>this.addTag(lr.makeDescriptionTagName(e.id,r(i)),s(i))))}async addTag(e,n){await this.metadata.addTag(this.headerType,e,n)}parseMetadata(e){let n=0;const r=[];for(;n!==e.length;){const s=lr.getFrameHeaderLength(this.id3Header.version.major);if(n+s>e.length){this.metadata.addWarning("Illegal ID3v2 tag length");break}const i=e.slice(n,n+s);n+=s;const o=this.readFrameHeader(i,this.id3Header.version.major),a=e.slice(n,n+o.length);n+=o.length;const l=lr.readFrameData(a,o,this.id3Header.version.major,!this.options.skipCovers,this.metadata);l&&r.push({id:o.id,value:l})}return r}readFrameHeader(e,n){let r;switch(n){case 2:r={id:W_.decode(e.slice(0,3)),length:rn.get(e,3)},r.id.match(/[A-Z0-9]{3}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${r.id}`);break;case 3:case 4:r={id:W_.decode(e.slice(0,4)),length:(n===4?BI:se).get(e,4),flags:lr.readFrameFlags(e.slice(8,10))},r.id.match(/[A-Z0-9]{4}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${r.id}`);break;default:throw new Error(`Unexpected majorVer: ${n}`)}return r}}const KM={NONE:"not compressed	PCM	Apple Computer",sowt:"PCM (byte swapped)",fl32:"32-bit floating point IEEE 32-bit float",fl64:"64-bit floating point IEEE 64-bit float	Apple Computer",alaw:"ALaw 2:1	8-bit ITU-T G.711 A-law",ulaw:"µLaw 2:1	8-bit ITU-T G.711 µ-law	Apple Computer",ULAW:"CCITT G.711 u-law 8-bit ITU-T G.711 µ-law",ALAW:"CCITT G.711 A-law 8-bit ITU-T G.711 A-law",FL32:"Float 32	IEEE 32-bit float "};class XM{constructor(e,n){this.isAifc=n;const r=n?22:18;if(e.chunkSize<r)throw new Error(`COMMON CHUNK size should always be at least ${r}`);this.len=e.chunkSize}get(e,n){const r=Pe.get(e,n+8)-16398,s=Pe.get(e,n+8+2),i={numChannels:Pe.get(e,n),numSampleFrames:se.get(e,n+2),sampleSize:Pe.get(e,n+6),sampleRate:r<0?s>>Math.abs(r):s<<r};if(this.isAifc){if(i.compressionType=He.get(e,n+18),this.len>22){const o=fe.get(e,n+22);if(o>0){const a=(o+1)%2;if(23+o+a===this.len)i.compressionName=new re(o,"latin1").get(e,n+23);else throw new Error("Illegal pstring length")}else i.compressionName=void 0}}else i.compressionName="PCM";return i}}const Np={len:8,get:(t,e)=>({chunkID:He.get(t,e),chunkSize:Number(BigInt(se.get(t,e+4)))})},jp=je("music-metadata:parser:aiff");class QM extends Vn{constructor(){super(...arguments),this.isCompressed=null}async parse(){if((await this.tokenizer.readToken(Np)).chunkID!=="FORM")throw new Error("Invalid Chunk-ID, expected 'FORM'");const n=await this.tokenizer.readToken(He);switch(n){case"AIFF":this.metadata.setFormat("container",n),this.isCompressed=!1;break;case"AIFC":this.metadata.setFormat("container","AIFF-C"),this.isCompressed=!0;break;default:throw new Error(`Unsupported AIFF type: ${n}`)}this.metadata.setFormat("lossless",!this.isCompressed);try{for(;!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=Np.len;){jp(`Reading AIFF chunk at offset=${this.tokenizer.position}`);const r=await this.tokenizer.readToken(Np),s=2*Math.round(r.chunkSize/2),i=await this.readData(r);await this.tokenizer.ignore(s-i)}}catch(r){if(r instanceof ot)jp("End-of-stream");else throw r}}async readData(e){switch(e.chunkID){case"COMM":{if(this.isCompressed===null)throw new Error("Failed to parse AIFF.COMM chunk when compression type is unknown");const n=await this.tokenizer.readToken(new XM(e,this.isCompressed));return this.metadata.setFormat("bitsPerSample",n.sampleSize),this.metadata.setFormat("sampleRate",n.sampleRate),this.metadata.setFormat("numberOfChannels",n.numChannels),this.metadata.setFormat("numberOfSamples",n.numSampleFrames),this.metadata.setFormat("duration",n.numSampleFrames/n.sampleRate),(n.compressionName||n.compressionType)&&this.metadata.setFormat("codec",n.compressionName??KM[n.compressionType]),e.chunkSize}case"ID3 ":{const n=await this.tokenizer.readToken(new ln(e.chunkSize)),r=Ia(n);return await new lr().parse(this.metadata,r,this.options),e.chunkSize}case"SSND":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*e.chunkSize/this.metadata.format.duration),0;case"NAME":case"AUTH":case"(c) ":case"ANNO":return this.readTextChunk(e);default:return jp(`Ignore chunk id=${e.chunkID}, size=${e.chunkSize}`),0}}async readTextChunk(e){const r=(await this.tokenizer.readToken(new re(e.chunkSize,"ascii"))).split("\0").map(s=>s.trim()).filter(s=>s==null?void 0:s.length);return await Promise.all(r.map(s=>this.metadata.addTag("AIFF",e.chunkID,s))),e.chunkSize}}class A{static fromBin(e,n=0){return new A(A.decode(e,n))}static decode(e,n=0){const r=new DataView(e.buffer,n);return`${r.getUint32(0,!0).toString(16)}-${r.getUint16(4,!0).toString(16)}-${r.getUint16(6,!0).toString(16)}-${r.getUint16(8).toString(16)}-${Kv(e.slice(n+10,n+16))}`.toUpperCase()}static decodeMediaType(e){switch(e.str){case A.AudioMedia.str:return"audio";case A.VideoMedia.str:return"video";case A.CommandMedia.str:return"command";case A.Degradable_JPEG_Media.str:return"degradable-jpeg";case A.FileTransferMedia.str:return"file-transfer";case A.BinaryMedia.str:return"binary"}}static encode(e){const n=new Uint8Array(16),r=new DataView(n.buffer);return r.setUint32(0,Number.parseInt(e.slice(0,8),16),!0),r.setUint16(4,Number.parseInt(e.slice(9,13),16),!0),r.setUint16(6,Number.parseInt(e.slice(14,18),16),!0),n.set(R_(e.slice(19,23)),8),n.set(R_(e.slice(24)),10),n}constructor(e){this.str=e}equals(e){return this.str===e.str}toBin(){return A.encode(this.str)}}A.HeaderObject=new A("75B22630-668E-11CF-A6D9-00AA0062CE6C");A.DataObject=new A("75B22636-668E-11CF-A6D9-00AA0062CE6C");A.SimpleIndexObject=new A("33000890-E5B1-11CF-89F4-00A0C90349CB");A.IndexObject=new A("D6E229D3-35DA-11D1-9034-00A0C90349BE");A.MediaObjectIndexObject=new A("FEB103F8-12AD-4C64-840F-2A1D2F7AD48C");A.TimecodeIndexObject=new A("3CB73FD0-0C4A-4803-953D-EDF7B6228F0C");A.FilePropertiesObject=new A("8CABDCA1-A947-11CF-8EE4-00C00C205365");A.StreamPropertiesObject=new A("B7DC0791-A9B7-11CF-8EE6-00C00C205365");A.HeaderExtensionObject=new A("5FBF03B5-A92E-11CF-8EE3-00C00C205365");A.CodecListObject=new A("86D15240-311D-11D0-A3A4-00A0C90348F6");A.ScriptCommandObject=new A("1EFB1A30-0B62-11D0-A39B-00A0C90348F6");A.MarkerObject=new A("F487CD01-A951-11CF-8EE6-00C00C205365");A.BitrateMutualExclusionObject=new A("D6E229DC-35DA-11D1-9034-00A0C90349BE");A.ErrorCorrectionObject=new A("75B22635-668E-11CF-A6D9-00AA0062CE6C");A.ContentDescriptionObject=new A("75B22633-668E-11CF-A6D9-00AA0062CE6C");A.ExtendedContentDescriptionObject=new A("D2D0A440-E307-11D2-97F0-00A0C95EA850");A.ContentBrandingObject=new A("2211B3FA-BD23-11D2-B4B7-00A0C955FC6E");A.StreamBitratePropertiesObject=new A("7BF875CE-468D-11D1-8D82-006097C9A2B2");A.ContentEncryptionObject=new A("2211B3FB-BD23-11D2-B4B7-00A0C955FC6E");A.ExtendedContentEncryptionObject=new A("298AE614-2622-4C17-B935-DAE07EE9289C");A.DigitalSignatureObject=new A("2211B3FC-BD23-11D2-B4B7-00A0C955FC6E");A.PaddingObject=new A("1806D474-CADF-4509-A4BA-9AABCB96AAE8");A.ExtendedStreamPropertiesObject=new A("14E6A5CB-C672-4332-8399-A96952065B5A");A.AdvancedMutualExclusionObject=new A("A08649CF-4775-4670-8A16-6E35357566CD");A.GroupMutualExclusionObject=new A("D1465A40-5A79-4338-B71B-E36B8FD6C249");A.StreamPrioritizationObject=new A("D4FED15B-88D3-454F-81F0-ED5C45999E24");A.BandwidthSharingObject=new A("A69609E6-517B-11D2-B6AF-00C04FD908E9");A.LanguageListObject=new A("7C4346A9-EFE0-4BFC-B229-393EDE415C85");A.MetadataObject=new A("C5F8CBEA-5BAF-4877-8467-AA8C44FA4CCA");A.MetadataLibraryObject=new A("44231C94-9498-49D1-A141-1D134E457054");A.IndexParametersObject=new A("D6E229DF-35DA-11D1-9034-00A0C90349BE");A.MediaObjectIndexParametersObject=new A("6B203BAD-3F11-48E4-ACA8-D7613DE2CFA7");A.TimecodeIndexParametersObject=new A("F55E496D-9797-4B5D-8C8B-604DFE9BFB24");A.CompatibilityObject=new A("26F18B5D-4584-47EC-9F5F-0E651F0452C9");A.AdvancedContentEncryptionObject=new A("43058533-6981-49E6-9B74-AD12CB86D58C");A.AudioMedia=new A("F8699E40-5B4D-11CF-A8FD-00805F5C442B");A.VideoMedia=new A("BC19EFC0-5B4D-11CF-A8FD-00805F5C442B");A.CommandMedia=new A("59DACFC0-59E6-11D0-A3AC-00A0C90348F6");A.JFIF_Media=new A("B61BE100-5B4E-11CF-A8FD-00805F5C442B");A.Degradable_JPEG_Media=new A("35907DE0-E415-11CF-A917-00805F5C442B");A.FileTransferMedia=new A("91BD222C-F21C-497A-8B6D-5AA86BFC0185");A.BinaryMedia=new A("3AFB65E2-47EF-40F2-AC2C-70A90D71D343");A.ASF_Index_Placeholder_Object=new A("D9AADE20-7C17-4F9C-BC28-8555DD98E2A2");function YM(t){return JM[t]}function Mf(t){return js(gt(t,"utf-16le"))}const JM=[Mf,q_,ZM,eL,tL,UI,q_];function q_(t){return new Uint8Array(t)}function ZM(t,e=0){return UI(t,e)===1}function eL(t,e=0){return Z.get(t,e)}function tL(t,e=0){return en.get(t,e)}function UI(t,e=0){return ke.get(t,e)}var G_;(function(t){t[t.UnicodeString=0]="UnicodeString",t[t.ByteArray=1]="ByteArray",t[t.Bool=2]="Bool",t[t.DWord=3]="DWord",t[t.QWord=4]="QWord",t[t.Word=5]="Word"})(G_||(G_={}));const nL={len:30,get:(t,e)=>({objectId:A.fromBin(t,e),objectSize:Number(en.get(t,e+16)),numberOfHeaderObjects:Z.get(t,e+24)})},ji={len:24,get:(t,e)=>({objectId:A.fromBin(t,e),objectSize:Number(en.get(t,e+16))})};class Eo{constructor(e){this.len=Number(e.objectSize)-ji.len}postProcessTag(e,n,r,s){if(n==="WM/Picture")e.push({id:n,value:Zv.fromBuffer(s)});else{const i=YM(r);if(!i)throw new Error(`unexpected value headerType: ${r}`);e.push({id:n,value:i(s)})}}}class K_ extends Eo{get(e,n){return null}}class M0 extends Eo{get(e,n){return{fileId:A.fromBin(e,n),fileSize:en.get(e,n+16),creationDate:en.get(e,n+24),dataPacketsCount:en.get(e,n+32),playDuration:en.get(e,n+40),sendDuration:en.get(e,n+48),preroll:en.get(e,n+56),flags:{broadcast:Ye(e,n+64,24),seekable:Ye(e,n+64,25)},minimumDataPacketSize:Z.get(e,n+68),maximumDataPacketSize:Z.get(e,n+72),maximumBitrate:Z.get(e,n+76)}}}M0.guid=A.FilePropertiesObject;class L0 extends Eo{get(e,n){return{streamType:A.decodeMediaType(A.fromBin(e,n)),errorCorrectionType:A.fromBin(e,n+8)}}}L0.guid=A.StreamPropertiesObject;class F0{constructor(){this.len=22}get(e,n){const r=new DataView(e.buffer,n);return{reserved1:A.fromBin(e,n),reserved2:r.getUint16(16,!0),extensionDataSize:r.getUint16(18,!0)}}}F0.guid=A.HeaderExtensionObject;const rL={len:20,get:(t,e)=>({entryCount:new DataView(t.buffer,e).getUint16(16,!0)})};async function X_(t){const e=await t.readNumber(ke);return(await t.readToken(new re(e*2,"utf-16le"))).replace("\0","")}async function sL(t){const e=await t.readToken(rL),n=[];for(let r=0;r<e.entryCount;++r)n.push(await oL(t));return n}async function iL(t){const e=await t.readNumber(ke),n=new Uint8Array(e);return await t.readBuffer(n),n}async function oL(t){const e=await t.readNumber(ke);return{type:{videoCodec:(e&1)===1,audioCodec:(e&2)===2},codecName:await X_(t),description:await X_(t),information:await iL(t)}}class ro extends Eo{get(e,n){const r=[],s=new DataView(e.buffer,n);let i=10;for(let o=0;o<ro.contentDescTags.length;++o){const a=s.getUint16(o*2,!0);if(a>0){const l=ro.contentDescTags[o],c=i+a;r.push({id:l,value:Mf(e.slice(n+i,n+c))}),i=c}}return r}}ro.guid=A.ContentDescriptionObject;ro.contentDescTags=["Title","Author","Copyright","Description","Rating"];class $0 extends Eo{get(e,n){const r=[],s=new DataView(e.buffer,n),i=s.getUint16(0,!0);let o=2;for(let a=0;a<i;a+=1){const l=s.getUint16(o,!0);o+=2;const c=Mf(e.slice(n+o,n+o+l));o+=l;const d=s.getUint16(o,!0);o+=2;const h=s.getUint16(o,!0);o+=2;const m=e.slice(n+o,n+o+h);o+=h,this.postProcessTag(r,c,d,m)}return r}}$0.guid=A.ExtendedContentDescriptionObject;class B0 extends Eo{get(e,n){const r=new DataView(e.buffer,n);return{startTime:en.get(e,n),endTime:en.get(e,n+8),dataBitrate:r.getInt32(12,!0),bufferSize:r.getInt32(16,!0),initialBufferFullness:r.getInt32(20,!0),alternateDataBitrate:r.getInt32(24,!0),alternateBufferSize:r.getInt32(28,!0),alternateInitialBufferFullness:r.getInt32(32,!0),maximumObjectSize:r.getInt32(36,!0),flags:{reliableFlag:Ye(e,n+40,0),seekableFlag:Ye(e,n+40,1),resendLiveCleanpointsFlag:Ye(e,n+40,2)},streamNumber:r.getInt16(42,!0),streamLanguageId:r.getInt16(44,!0),averageTimePerFrame:r.getInt32(52,!0),streamNameCount:r.getInt32(54,!0),payloadExtensionSystems:r.getInt32(56,!0),streamNames:[],streamPropertiesObject:null}}}B0.guid=A.ExtendedStreamPropertiesObject;class bh extends Eo{get(e,n){const r=[],s=new DataView(e.buffer,n),i=s.getUint16(0,!0);let o=2;for(let a=0;a<i;a+=1){o+=4;const l=s.getUint16(o,!0);o+=2;const c=s.getUint16(o,!0);o+=2;const d=s.getUint32(o,!0);o+=4;const h=Mf(e.slice(n+o,n+o+l));o+=l;const m=e.slice(n+o,n+o+d);o+=d,this.postProcessTag(r,h,c,m)}return r}}bh.guid=A.MetadataObject;class z0 extends bh{}z0.guid=A.MetadataLibraryObject;class Zv{static fromBuffer(e){return new Zv(e.length).get(e,0)}constructor(e){this.len=e}get(e,n){const r=new DataView(e.buffer,n),s=r.getUint8(0),i=r.getInt32(1,!0);let o=5;for(;r.getUint16(o)!==0;)o+=2;const a=new re(o-5,"utf-16le").get(e,5);for(;r.getUint16(o)!==0;)o+=2;const l=new re(o-5,"utf-16le").get(e,5);return{type:pc[s],format:a,description:l,size:i,data:e.slice(o+4)}}}const Qu=je("music-metadata:parser:ASF"),aL="asf";class lL extends Vn{async parse(){const e=await this.tokenizer.readToken(nL);if(!e.objectId.equals(A.HeaderObject))throw new Error(`expected asf header; but was not found; got: ${e.objectId.str}`);try{await this.parseObjectHeader(e.numberOfHeaderObjects)}catch(n){Qu("Error while parsing ASF: %s",n)}}async parseObjectHeader(e){let n;do{const r=await this.tokenizer.readToken(ji);switch(Qu("header GUID=%s",r.objectId.str),r.objectId.str){case M0.guid.str:{const s=await this.tokenizer.readToken(new M0(r));this.metadata.setFormat("duration",Number(s.playDuration/BigInt(1e3))/1e4-Number(s.preroll)/1e3),this.metadata.setFormat("bitrate",s.maximumBitrate);break}case L0.guid.str:{const s=await this.tokenizer.readToken(new L0(r));this.metadata.setFormat("container",`ASF/${s.streamType}`);break}case F0.guid.str:{const s=await this.tokenizer.readToken(new F0);await this.parseExtensionObject(s.extensionDataSize);break}case ro.guid.str:n=await this.tokenizer.readToken(new ro(r)),await this.addTags(n);break;case $0.guid.str:n=await this.tokenizer.readToken(new $0(r)),await this.addTags(n);break;case A.CodecListObject.str:{const s=await sL(this.tokenizer);s.forEach(o=>{this.metadata.addStreamInfo({type:o.type.videoCodec?no.video:no.audio,codecName:o.codecName})});const i=s.filter(o=>o.type.audioCodec).map(o=>o.codecName).join("/");this.metadata.setFormat("codec",i);break}case A.StreamBitratePropertiesObject.str:await this.tokenizer.ignore(r.objectSize-ji.len);break;case A.PaddingObject.str:Qu("Padding: %s bytes",r.objectSize-ji.len),await this.tokenizer.ignore(r.objectSize-ji.len);break;default:this.metadata.addWarning(`Ignore ASF-Object-GUID: ${r.objectId.str}`),Qu("Ignore ASF-Object-GUID: %s",r.objectId.str),await this.tokenizer.readToken(new K_(r))}}while(--e)}async addTags(e){await Promise.all(e.map(({id:n,value:r})=>this.metadata.addTag(aL,n,r)))}async parseExtensionObject(e){do{const n=await this.tokenizer.readToken(ji),r=n.objectSize-ji.len;switch(n.objectId.str){case B0.guid.str:await this.tokenizer.readToken(new B0(n));break;case bh.guid.str:{const s=await this.tokenizer.readToken(new bh(n));await this.addTags(s);break}case z0.guid.str:{const s=await this.tokenizer.readToken(new z0(n));await this.addTags(s);break}case A.PaddingObject.str:await this.tokenizer.ignore(r);break;case A.CompatibilityObject.str:this.tokenizer.ignore(r);break;case A.ASF_Index_Placeholder_Object.str:await this.tokenizer.ignore(r);break;default:this.metadata.addWarning(`Ignore ASF-Object-GUID: ${n.objectId.str}`),await this.tokenizer.readToken(new K_(n));break}e-=n.objectSize}while(e>0)}}class gc{static fromBase64(e){return gc.fromBuffer(Uint8Array.from(atob(e),n=>n.charCodeAt(0)))}static fromBuffer(e){return new gc(e.length).get(e,0)}constructor(e){this.len=e}get(e,n){const r=pc[se.get(e,n)];n+=4;const s=se.get(e,n);n+=4;const i=new re(s,"utf-8").get(e,n);n+=s;const o=se.get(e,n);n+=4;const a=new re(o,"utf-8").get(e,n);n+=o;const l=se.get(e,n);n+=4;const c=se.get(e,n);n+=4;const d=se.get(e,n);n+=4;const h=se.get(e,n);n+=4;const m=se.get(e,n);n+=4;const p=Uint8Array.from(e.slice(n,n+m));return{type:r,format:i,description:a,width:l,height:c,colour_depth:d,indexed_color:h,data:p}}}const Yu={len:7,get:(t,e)=>({packetType:fe.get(t,e),vorbis:new re(6,"ascii").get(t,e+1)})},cL={len:23,get:(t,e)=>({version:Z.get(t,e+0),channelMode:fe.get(t,e+4),sampleRate:Z.get(t,e+5),bitrateMax:Z.get(t,e+9),bitrateNominal:Z.get(t,e+13),bitrateMin:Z.get(t,e+17)})},Dp=je("music-metadata:parser:ID3");class Lf extends Vn{constructor(){super(...arguments),this.id3parser=new lr}static async startsWithID3v2Header(e){return(await e.peekToken(D0)).fileIdentifier==="ID3"}async parse(){try{await this.parseID3v2()}catch(e){if(e instanceof ot)Dp("End-of-stream");else throw e}}finalize(){}async parseID3v2(){await this.tryReadId3v2Headers(),Dp("End of ID3v2 header, go to MPEG-parser: pos=%s",this.tokenizer.position),await this.postId3v2Parse(),this.options.skipPostHeaders&&this.metadata.hasAny()?this.finalize():(await new Jv().init(this.metadata,this.tokenizer,this.options).parse(),this.finalize())}async tryReadId3v2Headers(){if((await this.tokenizer.peekToken(D0)).fileIdentifier==="ID3")return Dp("Found ID3v2 header, pos=%s",this.tokenizer.position),await this.id3parser.parse(this.metadata,this.tokenizer,this.options),this.tryReadId3v2Headers()}}class HI{constructor(e,n){this.data=e,this.offset=n}readInt32(){const e=Z.get(this.data,this.offset);return this.offset+=4,e}readStringUtf8(){const e=this.readInt32(),n=new TextDecoder("utf-8").decode(this.data.subarray(this.offset,this.offset+e));return this.offset+=e,n}parseUserComment(){const e=this.offset,n=this.readStringUtf8(),r=n.indexOf("=");return{key:n.slice(0,r).toUpperCase(),value:n.slice(r+1),len:this.offset-e}}}const No=je("music-metadata:parser:ogg:vorbis1");class so{constructor(e,n){this.metadata=e,this.options=n,this.pageSegments=[]}async parsePage(e,n){if(e.headerType.firstPage)this.parseFirstPage(e,n);else{if(e.headerType.continued){if(this.pageSegments.length===0)throw new Error("Cannot continue on previous page");this.pageSegments.push(n)}if(e.headerType.lastPage||!e.headerType.continued){if(this.pageSegments.length>0){const r=so.mergeUint8Arrays(this.pageSegments);await this.parseFullPage(r)}this.pageSegments=e.headerType.lastPage?[]:[n]}}e.headerType.lastPage&&this.calculateDuration(e)}static mergeUint8Arrays(e){const n=e.reduce((s,i)=>s+i.length,0),r=new Uint8Array(n);return e.forEach((s,i,o)=>{const a=o.slice(0,i).reduce((l,c)=>l+c.length,0);r.set(s,a)}),r}async flush(){await this.parseFullPage(so.mergeUint8Arrays(this.pageSegments))}async parseUserComment(e,n){const s=new HI(e,n).parseUserComment();return await this.addTag(s.key,s.value),s.len}async addTag(e,n){if(e==="METADATA_BLOCK_PICTURE"&&typeof n=="string"){if(this.options.skipCovers){No("Ignore picture");return}n=gc.fromBase64(n),No(`Push picture: id=${e}, format=${n.format}`)}else No(`Push tag: id=${e}, value=${n}`);await this.metadata.addTag("vorbis",e,n)}calculateDuration(e){this.metadata.format.sampleRate&&e.absoluteGranulePosition>=0&&(this.metadata.setFormat("numberOfSamples",e.absoluteGranulePosition),this.metadata.setFormat("duration",e.absoluteGranulePosition/this.metadata.format.sampleRate))}parseFirstPage(e,n){this.metadata.setFormat("codec","Vorbis I"),No("Parse first page");const r=Yu.get(n,0);if(r.vorbis!=="vorbis")throw new Error("Metadata does not look like Vorbis");if(r.packetType===1){const s=cL.get(n,Yu.len);this.metadata.setFormat("sampleRate",s.sampleRate),this.metadata.setFormat("bitrate",s.bitrateNominal),this.metadata.setFormat("numberOfChannels",s.channelMode),No("sample-rate=%s[hz], bitrate=%s[b/s], channel-mode=%s",s.sampleRate,s.bitrateNominal,s.channelMode)}else throw new Error("First Ogg page should be type 1: the identification header")}async parseFullPage(e){const n=Yu.get(e,0);switch(No("Parse full page: type=%s, byteLength=%s",n.packetType,e.byteLength),n.packetType){case 3:return this.parseUserCommentList(e,Yu.len)}}async parseUserCommentList(e,n){const r=Z.get(e,n);n+=4,n+=r;let s=Z.get(e,n);for(n+=4;s-- >0;)n+=await this.parseUserComment(e,n)}}const uL=je("music-metadata:parser:FLAC");var Xr;(function(t){t[t.STREAMINFO=0]="STREAMINFO",t[t.PADDING=1]="PADDING",t[t.APPLICATION=2]="APPLICATION",t[t.SEEKTABLE=3]="SEEKTABLE",t[t.VORBIS_COMMENT=4]="VORBIS_COMMENT",t[t.CUESHEET=5]="CUESHEET",t[t.PICTURE=6]="PICTURE"})(Xr||(Xr={}));class dL extends Lf{constructor(){super(...arguments),this.padding=0}init(e,n,r){return super.init(e,n,r),this.vorbisParser=new so(e,r),this}async postId3v2Parse(){if((await this.tokenizer.readToken(He)).toString()!=="fLaC")throw new Error("Invalid FLAC preamble");let n;do n=await this.tokenizer.readToken(hL),await this.parseDataBlock(n);while(!n.lastBlock);if(this.tokenizer.fileInfo.size&&this.metadata.format.duration){const r=this.tokenizer.fileInfo.size-this.tokenizer.position;this.metadata.setFormat("bitrate",8*r/this.metadata.format.duration)}}async parseDataBlock(e){switch(uL(`blockHeader type=${e.type}, length=${e.length}`),e.type){case Xr.STREAMINFO:return this.parseBlockStreamInfo(e.length);case Xr.PADDING:this.padding+=e.length;break;case Xr.APPLICATION:break;case Xr.SEEKTABLE:break;case Xr.VORBIS_COMMENT:return this.parseComment(e.length);case Xr.CUESHEET:break;case Xr.PICTURE:await this.parsePicture(e.length);return;default:this.metadata.addWarning(`Unknown block type: ${e.type}`)}return this.tokenizer.ignore(e.length).then()}async parseBlockStreamInfo(e){if(e!==Q_.len)throw new Error("Unexpected block-stream-info length");const n=await this.tokenizer.readToken(Q_);this.metadata.setFormat("container","FLAC"),this.metadata.setFormat("codec","FLAC"),this.metadata.setFormat("lossless",!0),this.metadata.setFormat("numberOfChannels",n.channels),this.metadata.setFormat("bitsPerSample",n.bitsPerSample),this.metadata.setFormat("sampleRate",n.sampleRate),n.totalSamples>0&&this.metadata.setFormat("duration",n.totalSamples/n.sampleRate)}async parseComment(e){const n=await this.tokenizer.readToken(new ln(e)),r=new HI(n,0);r.readStringUtf8();const s=r.readInt32(),i=new Array(s);for(let o=0;o<s;o++)i[o]=r.parseUserComment();await Promise.all(i.map(o=>this.vorbisParser.addTag(o.key,o.value)))}async parsePicture(e){if(this.options.skipCovers)return this.tokenizer.ignore(e);const n=await this.tokenizer.readToken(new gc(e));this.vorbisParser.addTag("METADATA_BLOCK_PICTURE",n)}}const hL={len:4,get:(t,e)=>({lastBlock:Ye(t,e,7),type:ye(t,e,1,7),length:rn.get(t,e+1)})},Q_={len:34,get:(t,e)=>({minimumBlockSize:Pe.get(t,e),maximumBlockSize:Pe.get(t,e+2)/1e3,minimumFrameSize:rn.get(t,e+4),maximumFrameSize:rn.get(t,e+7),sampleRate:rn.get(t,e+10)>>4,channels:ye(t,e+12,4,3)+1,bitsPerSample:ye(t,e+12,7,5)+1,totalSamples:ye(t,e+13,4,36),fileMD5:new ln(16).get(t,e+18)})},WI=je("music-metadata:parser:MP4:atom"),Th={len:8,get:(t,e)=>{const n=se.get(t,e);if(n<0)throw new Error("Invalid atom header length");return{length:BigInt(n),name:new re(4,"latin1").get(t,e+4)}},put:(t,e,n)=>(se.put(t,e,Number(n.length)),He.put(t,e+4,n.name))},fL=qv,Y_={len:4,get:(t,e)=>({type:new re(4,"ascii").get(t,e)})};class qI{constructor(e,n,r){if(this.len=e,e<n)throw new Error(`Atom ${r} expected to be ${n}, but specifies ${e} bytes long.`);e>n&&WI(`Warning: atom ${r} expected to be ${n}, but was actually ${e} bytes long.`)}}const Ca={len:4,get:(t,e)=>{const n=se.get(t,e)-2082844800;return new Date(n*1e3)}};class mL extends qI{constructor(e){super(e,24,"mdhd"),this.len=e}get(e,n){return{version:fe.get(e,n+0),flags:rn.get(e,n+1),creationTime:Ca.get(e,n+4),modificationTime:Ca.get(e,n+8),timeScale:se.get(e,n+12),duration:se.get(e,n+16),language:Pe.get(e,n+20),quality:Pe.get(e,n+22)}}}class pL extends qI{constructor(e){super(e,100,"mvhd"),this.len=e}get(e,n){return{version:fe.get(e,n),flags:rn.get(e,n+1),creationTime:Ca.get(e,n+4),modificationTime:Ca.get(e,n+8),timeScale:se.get(e,n+12),duration:se.get(e,n+16),preferredRate:se.get(e,n+20),preferredVolume:Pe.get(e,n+24),previewTime:se.get(e,n+72),previewDuration:se.get(e,n+76),posterTime:se.get(e,n+80),selectionTime:se.get(e,n+84),selectionDuration:se.get(e,n+88),currentTime:se.get(e,n+92),nextTrackID:se.get(e,n+96)}}}class gL{constructor(e){this.len=e}get(e,n){return{type:{set:fe.get(e,n+0),type:rn.get(e,n+1)},locale:rn.get(e,n+4),value:new ln(this.len-8).get(e,n+8)}}}class yL{constructor(e){this.len=e}get(e,n){return{version:fe.get(e,n),flags:rn.get(e,n+1),name:new re(this.len-4,"utf-8").get(e,n+4)}}}class vL{constructor(e){this.len=e}get(e,n){return{version:fe.get(e,n),flags:rn.get(e,n+1),creationTime:Ca.get(e,n+4),modificationTime:Ca.get(e,n+8),trackId:se.get(e,n+12),duration:se.get(e,n+20),layer:Pe.get(e,n+24),alternateGroup:Pe.get(e,n+26),volume:Pe.get(e,n+28)}}}const J_={len:8,get:(t,e)=>({version:fe.get(t,e),flags:rn.get(t,e+1),numberOfEntries:se.get(t,e+4)})};class xL{constructor(e){this.len=e}get(e,n){return{dataFormat:He.get(e,n),dataReferenceIndex:Pe.get(e,n+10),description:new ln(this.len-12).get(e,n+12)}}}class wL{constructor(e){this.len=e}get(e,n){const r=J_.get(e,n);n+=J_.len;const s=[];for(let i=0;i<r.numberOfEntries;++i){const o=se.get(e,n);n+=se.len,s.push(new xL(o).get(e,n)),n+=o}return{header:r,table:s}}}const Z_={len:8,get(t,e){return{version:Zr.get(t,e),revision:Zr.get(t,e+2),vendor:jn.get(t,e+4)}}},_L={len:12,get(t,e){return{numAudioChannels:Zr.get(t,e+0),sampleSize:Zr.get(t,e+2),compressionId:Zr.get(t,e+4),packetSize:Zr.get(t,e+6),sampleRate:Pe.get(t,e+8)+Pe.get(t,e+10)/1e4}}};class ex{constructor(e,n){this.len=e,this.token=n}get(e,n){const r=jn.get(e,n+4);return{version:mc.get(e,n+0),flags:Wv.get(e,n+1),numberOfEntries:r,entries:GI(e,this.token,n+8,this.len-8,r)}}}const EL={len:8,get(t,e){return{count:jn.get(t,e+0),duration:jn.get(t,e+4)}}};class SL extends ex{constructor(e){super(e,EL),this.len=e}}const bL={len:12,get(t,e){return{firstChunk:jn.get(t,e),samplesPerChunk:jn.get(t,e+4),sampleDescriptionId:jn.get(t,e+8)}}};class TL extends ex{constructor(e){super(e,bL),this.len=e}}class kL{constructor(e){this.len=e}get(e,n){const r=jn.get(e,n+8);return{version:mc.get(e,n),flags:Wv.get(e,n+1),sampleSize:jn.get(e,n+4),numberOfEntries:r,entries:GI(e,jn,n+12,this.len-12,r)}}}class IL extends ex{constructor(e){super(e,jn),this.len=e}}class CL{constructor(e){this.len=e}get(e,n){const r=Zr.get(e,n+0);return new re(r,"utf-8").get(e,n+2)}}function GI(t,e,n,r,s){if(WI(`remainingLen=${r}, numberOfEntries=${s} * token-len=${e.len}`),r===0)return[];if(r!==s*e.len)throw new Error("mismatch number-of-entries with remaining atom-length");const i=[];for(let o=0;o<s;++o)i.push(e.get(t,n)),n+=e.len;return i}const AL=je("music-metadata:parser:MP4:Atom");class kh{static async readAtom(e,n,r,s){const i=e.position,o=await e.readToken(Th);o.length===BigInt(1)&&(o.length=await e.readToken(fL));const l=new kh(o,o.length===BigInt(1),r),c=l.getPayloadLength(s);return AL(`parse atom name=${l.atomPath}, extended=${l.extended}, offset=${i}, len=${l.header.length}`),await l.readData(e,n,c),l}constructor(e,n,r){this.header=e,this.extended=n,this.parent=r,this.children=[],this.atomPath=(this.parent?`${this.parent.atomPath}.`:"")+this.header.name}getHeaderLength(){return this.extended?16:8}getPayloadLength(e){return(this.header.length===BigInt(0)?e:Number(this.header.length))-this.getHeaderLength()}async readAtoms(e,n,r){for(;r>0;){const s=await kh.readAtom(e,n,this,r);this.children.push(s),r-=s.header.length===BigInt(0)?r:Number(s.header.length)}}async readData(e,n,r){switch(this.header.name){case"moov":case"udta":case"trak":case"mdia":case"minf":case"stbl":case"<id>":case"ilst":case"tref":return this.readAtoms(e,n,this.getPayloadLength(r));case"meta":{const i=(await e.peekToken(Th)).name==="hdlr"?0:4;return await e.ignore(i),this.readAtoms(e,n,this.getPayloadLength(r)-i)}default:return n(this,r)}}}const xr=je("music-metadata:parser:MP4"),RL="iTunes",eE={raw:{lossy:!1,format:"raw"},MAC3:{lossy:!0,format:"MACE 3:1"},MAC6:{lossy:!0,format:"MACE 6:1"},ima4:{lossy:!0,format:"IMA 4:1"},ulaw:{lossy:!0,format:"uLaw 2:1"},alaw:{lossy:!0,format:"uLaw 2:1"},Qclp:{lossy:!0,format:"QUALCOMM PureVoice"},".mp3":{lossy:!0,format:"MPEG-1 layer 3"},alac:{lossy:!1,format:"ALAC"},"ac-3":{lossy:!0,format:"AC-3"},mp4a:{lossy:!0,format:"MPEG-4/AAC"},mp4s:{lossy:!0,format:"MP4S"},c608:{lossy:!0,format:"CEA-608"},c708:{lossy:!0,format:"CEA-708"}};function tE(t,e,n){return n.indexOf(t)===e}class Ih extends Vn{constructor(){super(...arguments),this.tracks=[],this.atomParsers={mvhd:async e=>{const n=await this.tokenizer.readToken(new pL(e));this.metadata.setFormat("creationTime",n.creationTime),this.metadata.setFormat("modificationTime",n.modificationTime)},mdhd:async e=>{const n=await this.tokenizer.readToken(new mL(e)),r=this.getTrackDescription();r.creationTime=n.creationTime,r.modificationTime=n.modificationTime,r.timeScale=n.timeScale,r.duration=n.duration},chap:async e=>{const n=this.getTrackDescription(),r=[];for(;e>=se.len;)r.push(await this.tokenizer.readNumber(se)),e-=se.len;n.chapterList=r},tkhd:async e=>{const n=await this.tokenizer.readToken(new vL(e));this.tracks.push(n)},mdat:async e=>{if(this.audioLengthInBytes=e,this.calculateBitRate(),this.options.includeChapters){const n=this.tracks.filter(r=>r.chapterList);if(n.length===1){const r=n[0].chapterList,s=this.tracks.filter(i=>r.indexOf(i.trackId)!==-1);if(s.length===1)return this.parseChapterTrack(s[0],n[0],e)}}await this.tokenizer.ignore(e)},ftyp:async e=>{const n=[];for(;e>0;){const s=await this.tokenizer.readToken(Y_);e-=Y_.len;const i=s.type.replace(/\W/g,"");i.length>0&&n.push(i)}xr(`ftyp: ${n.join("/")}`);const r=n.filter(tE).join("/");this.metadata.setFormat("container",r)},stsd:async e=>{const n=await this.tokenizer.readToken(new wL(e)),r=this.getTrackDescription();r.soundSampleDescription=n.table.map(s=>this.parseSoundSampleDescription(s))},stsc:async e=>{const n=await this.tokenizer.readToken(new TL(e));this.getTrackDescription().sampleToChunkTable=n.entries},stts:async e=>{const n=await this.tokenizer.readToken(new SL(e));this.getTrackDescription().timeToSampleTable=n.entries},stsz:async e=>{const n=await this.tokenizer.readToken(new kL(e)),r=this.getTrackDescription();r.sampleSize=n.sampleSize,r.sampleSizeTable=n.entries},stco:async e=>{const n=await this.tokenizer.readToken(new IL(e));this.getTrackDescription().chunkOffsetTable=n.entries},date:async e=>{const n=await this.tokenizer.readToken(new re(e,"utf-8"));await this.addTag("date",n)}}}static read_BE_Integer(e,n){const r=(n?"INT":"UINT")+e.length*8+(e.length>1?"_BE":""),s=LO[r];if(!s)throw new Error(`Token for integer type not found: "${r}"`);return Number(s.get(e,0))}async parse(){this.tracks=[];let e=this.tokenizer.fileInfo.size||0;for(;!this.tokenizer.fileInfo.size||e>0;){try{if((await this.tokenizer.peekToken(Th)).name==="\0\0\0\0"){const o=`Error at offset=${this.tokenizer.position}: box.id=0`;xr(o),this.addWarning(o);break}}catch(i){if(i instanceof Error){const o=`Error at offset=${this.tokenizer.position}: ${i.message}`;xr(o),this.addWarning(o)}else throw i;break}const s=await kh.readAtom(this.tokenizer,(i,o)=>this.handleAtom(i,o),null,e);e-=s.header.length===BigInt(0)?e:Number(s.header.length)}const n=[];this.tracks.forEach(s=>{const i=[];s.soundSampleDescription.forEach(o=>{const a={},l=eE[o.dataFormat];if(l?(i.push(l.format),a.codecName=l.format):a.codecName=`<${o.dataFormat}>`,o.description){const{description:c}=o;c.sampleRate>0&&(a.type=no.audio,a.audio={samplingFrequency:c.sampleRate,bitDepth:c.sampleSize,channels:c.numAudioChannels})}this.metadata.addStreamInfo(a)}),i.length>=1&&n.push(i.join("/"))}),n.length>0&&this.metadata.setFormat("codec",n.filter(tE).join("+"));const r=this.tracks.filter(s=>s.soundSampleDescription.length>=1&&s.soundSampleDescription[0].description&&s.soundSampleDescription[0].description.numAudioChannels>0);if(r.length>=1){const s=r[0];if(s.timeScale>0){const a=s.duration/s.timeScale;this.metadata.setFormat("duration",a)}const i=s.soundSampleDescription[0];if(i.description&&(this.metadata.setFormat("sampleRate",i.description.sampleRate),this.metadata.setFormat("bitsPerSample",i.description.sampleSize),this.metadata.setFormat("numberOfChannels",i.description.numAudioChannels),s.timeScale===0&&s.timeToSampleTable.length>0)){const l=s.timeToSampleTable.map(c=>c.count*c.duration).reduce((c,d)=>c+d)/i.description.sampleRate;this.metadata.setFormat("duration",l)}const o=eE[i.dataFormat];o&&this.metadata.setFormat("lossless",!o.lossy),this.calculateBitRate()}}async handleAtom(e,n){if(e.parent)switch(e.parent.header.name){case"ilst":case"<id>":return this.parseMetadataItemData(e)}if(this.atomParsers[e.header.name])return this.atomParsers[e.header.name](n);xr(`No parser for atom path=${e.atomPath}, payload-len=${n}, ignoring atom`),await this.tokenizer.ignore(n)}getTrackDescription(){return this.tracks[this.tracks.length-1]}calculateBitRate(){this.audioLengthInBytes&&this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*this.audioLengthInBytes/this.metadata.format.duration)}async addTag(e,n){await this.metadata.addTag(RL,e,n)}addWarning(e){xr(`Warning: ${e}`),this.metadata.addWarning(e)}parseMetadataItemData(e){let n=e.header.name;return e.readAtoms(this.tokenizer,async(r,s)=>{const i=r.getPayloadLength(s);switch(r.header.name){case"data":return this.parseValueAtom(n,r);case"name":case"mean":case"rate":{const o=await this.tokenizer.readToken(new yL(i));n+=`:${o.name}`;break}default:{const o=await this.tokenizer.readToken(new ln(i));this.addWarning(`Unsupported meta-item: ${n}[${r.header.name}] => value=${Kv(o)} ascii=${Gv(o,"ascii")}`)}}},e.getPayloadLength(0))}async parseValueAtom(e,n){const r=await this.tokenizer.readToken(new gL(Number(n.header.length)-Th.len));if(r.type.set!==0)throw new Error(`Unsupported type-set != 0: ${r.type.set}`);switch(r.type.type){case 0:switch(e){case"trkn":case"disk":{const s=fe.get(r.value,3),i=fe.get(r.value,5);await this.addTag(e,`${s}/${i}`);break}case"gnre":{const s=fe.get(r.value,1),i=Sh[s-1];await this.addTag(e,i);break}case"rate":{const s=new TextDecoder("ascii").decode(r.value);await this.addTag(e,s);break}default:xr(`unknown proprietary value type for: ${n.atomPath}`)}break;case 1:case 18:await this.addTag(e,new TextDecoder("utf-8").decode(r.value));break;case 13:if(this.options.skipCovers)break;await this.addTag(e,{format:"image/jpeg",data:Uint8Array.from(r.value)});break;case 14:if(this.options.skipCovers)break;await this.addTag(e,{format:"image/png",data:Uint8Array.from(r.value)});break;case 21:await this.addTag(e,Ih.read_BE_Integer(r.value,!0));break;case 22:await this.addTag(e,Ih.read_BE_Integer(r.value,!1));break;case 65:await this.addTag(e,fe.get(r.value,0));break;case 66:await this.addTag(e,Pe.get(r.value,0));break;case 67:await this.addTag(e,se.get(r.value,0));break;default:this.addWarning(`atom key=${e}, has unknown well-known-type (data-type): ${r.type.type}`)}}parseSoundSampleDescription(e){const n={dataFormat:e.dataFormat,dataReferenceIndex:e.dataReferenceIndex};let r=0;const s=Z_.get(e.description,r);return r+=Z_.len,s.version===0||s.version===1?n.description=_L.get(e.description,r):xr(`Warning: sound-sample-description ${s} not implemented`),n}async parseChapterTrack(e,n,r){if(!e.sampleSize&&e.chunkOffsetTable.length!==e.sampleSizeTable.length)throw new Error("Expected equal chunk-offset-table & sample-size-table length.");const s=[];for(let i=0;i<e.chunkOffsetTable.length&&r>0;++i){const a=e.chunkOffsetTable[i]-this.tokenizer.position,l=e.sampleSize>0?e.sampleSize:e.sampleSizeTable[i];if(r-=a+l,r<0)throw new Error("Chapter chunk exceeding token length");await this.tokenizer.ignore(a);const c=await this.tokenizer.readToken(new CL(l));xr(`Chapter ${i+1}: ${c}`);const d={title:c,sampleOffset:this.findSampleOffset(n,this.tokenizer.position)};xr(`Chapter title=${d.title}, offset=${d.sampleOffset}/${this.tracks[0].duration}`),s.push(d)}this.metadata.setFormat("chapters",s),await this.tokenizer.ignore(r)}findSampleOffset(e,n){let r=0;e.timeToSampleTable.forEach(i=>{r+=i.count*i.duration}),xr(`Total duration=${r}`);let s=0;for(;s<e.chunkOffsetTable.length&&e.chunkOffsetTable[s]<n;)++s;return this.getChunkDuration(s+1,e)}getChunkDuration(e,n){let r=0,s=n.timeToSampleTable[r].count,i=n.timeToSampleTable[r].duration,o=1,a=this.getSamplesPerChunk(o,n.sampleToChunkTable),l=0;for(;o<e;){const c=Math.min(s,a);l+=c*i,s-=c,a-=c,a===0?(++o,a=this.getSamplesPerChunk(o,n.sampleToChunkTable)):(++r,s=n.timeToSampleTable[r].count,i=n.timeToSampleTable[r].duration)}return l}getSamplesPerChunk(e,n){for(let r=0;r<n.length-1;++r)if(e>=n[r].firstChunk&&e<n[r+1].firstChunk)return n[r].samplesPerChunk;return n[n.length-1].samplesPerChunk}}var nE;(function(t){t[t.not_set=0]="not_set",t[t.radio=1]="radio",t[t.audiophile=2]="audiophile"})(nE||(nE={}));var rE;(function(t){t[t.unspecified=0]="unspecified",t[t.engineer=1]="engineer",t[t.user=2]="user",t[t.automatic=3]="automatic",t[t.rms_average=4]="rms_average"})(rE||(rE={}));const sE={len:2,get:(t,e)=>{const n=ye(t,e,0,3),r=ye(t,e,6,1),s=ye(t,e,7,9)/10;if(n>0)return{type:ye(t,e,0,3),origin:ye(t,e,3,3),adjustment:r?-s:s}}},PL={len:27,get:(t,e)=>{const n=se.get(t,e+2);return{revision:ye(t,e,0,4),vbr_method:ye(t,e,4,4),lowpass_filter:100*fe.get(t,e+1),track_peak:n===0?null:n/2**23,track_gain:sE.get(t,6),album_gain:sE.get(t,8),music_length:se.get(t,e+20),music_crc:fe.get(t,e+24),header_crc:Pe.get(t,e+24)}}},iE=new re(4,"ascii"),Op=new re(6,"ascii"),NL={len:4,get:(t,e)=>({frames:In(t,e,31),bytes:In(t,e,30),toc:In(t,e,29),vbrScale:In(t,e,28)})};async function jL(t){const e=await t.readToken(NL),n={numFrames:null,streamSize:null,vbrScale:null};if(e.frames&&(n.numFrames=await t.readToken(se)),e.bytes&&(n.streamSize=await t.readToken(se)),e.toc&&(n.toc=new Uint8Array(100),await t.readBuffer(n.toc)),e.vbrScale&&(n.vbrScale=await t.readToken(se)),await t.peekToken(new re(4,"ascii"))==="LAME"){await t.ignore(4),n.lame={version:await t.readToken(new re(5,"ascii"))};const s=n.lame.version.match(/\d+.\d+/g);if(s!==null){const o=s[0].split(".").map(a=>Number.parseInt(a,10));o[0]>=3&&o[1]>=90&&(n.lame.extended=await t.readToken(PL))}}return n}const Tn=je("music-metadata:parser:mpeg"),oE=1024,aE={AudioObjectTypes:["AAC Main","AAC LC","AAC SSR","AAC LTP"],SamplingFrequencies:[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,null,null,-1]},DL=[void 0,["front-center"],["front-left","front-right"],["front-center","front-left","front-right"],["front-center","front-left","front-right","back-center"],["front-center","front-left","front-right","back-left","back-right"],["front-center","front-left","front-right","back-left","back-right","LFE-channel"],["front-center","front-left","front-right","side-left","side-right","back-left","back-right","LFE-channel"]];class St{constructor(e,n){this.bitrateIndex=null,this.sampRateFreqIndex=null,this.padding=null,this.privateBit=null,this.channelModeIndex=null,this.modeExtension=null,this.isOriginalMedia=null,this.version=null,this.bitrate=null,this.samplingRate=null,this.frameLength=0,this.versionIndex=ye(e,n+1,3,2),this.layer=St.LayerDescription[ye(e,n+1,5,2)],this.versionIndex>1&&this.layer===0?this.parseAdtsHeader(e,n):this.parseMpegHeader(e,n),this.isProtectedByCRC=!In(e,n+1,7)}calcDuration(e){return this.samplingRate==null?null:e*this.calcSamplesPerFrame()/this.samplingRate}calcSamplesPerFrame(){return St.samplesInFrameTable[this.version===1?0:1][this.layer]}calculateSideInfoLength(){if(this.layer!==3)return 2;if(this.channelModeIndex===3){if(this.version===1)return 17;if(this.version===2||this.version===2.5)return 9}else{if(this.version===1)return 32;if(this.version===2||this.version===2.5)return 17}return null}calcSlotSize(){return[null,4,1,1][this.layer]}parseMpegHeader(e,n){this.container="MPEG",this.bitrateIndex=ye(e,n+2,0,4),this.sampRateFreqIndex=ye(e,n+2,4,2),this.padding=In(e,n+2,6),this.privateBit=In(e,n+2,7),this.channelModeIndex=ye(e,n+3,0,2),this.modeExtension=ye(e,n+3,2,2),this.isCopyrighted=In(e,n+3,4),this.isOriginalMedia=In(e,n+3,5),this.emphasis=ye(e,n+3,7,2),this.version=St.VersionID[this.versionIndex],this.channelMode=St.ChannelMode[this.channelModeIndex],this.codec=`MPEG ${this.version} Layer ${this.layer}`;const r=this.calcBitrate();if(!r)throw new Error("Cannot determine bit-rate");if(this.bitrate=r*1e3,this.samplingRate=this.calcSamplingRate(),this.samplingRate==null)throw new Error("Cannot determine sampling-rate")}parseAdtsHeader(e,n){Tn("layer=0 => ADTS"),this.version=this.versionIndex===2?4:2,this.container=`ADTS/MPEG-${this.version}`;const r=ye(e,n+2,0,2);this.codec="AAC",this.codecProfile=aE.AudioObjectTypes[r],Tn(`MPEG-4 audio-codec=${this.codec}`);const s=ye(e,n+2,2,4);this.samplingRate=aE.SamplingFrequencies[s],Tn(`sampling-rate=${this.samplingRate}`);const i=ye(e,n+2,7,3);this.mp4ChannelConfig=DL[i],Tn(`channel-config=${this.mp4ChannelConfig?this.mp4ChannelConfig.join("+"):"?"}`),this.frameLength=ye(e,n+3,6,2)<<11}calcBitrate(){if(this.bitrateIndex===0||this.bitrateIndex===15)return null;if(this.version&&this.bitrateIndex){const e=10*Math.floor(this.version)+this.layer;return St.bitrate_index[this.bitrateIndex][e]}return null}calcSamplingRate(){return this.sampRateFreqIndex===3||this.version===null||this.sampRateFreqIndex==null?null:St.sampling_rate_freq_index[this.version][this.sampRateFreqIndex]}}St.SyncByte1=255;St.SyncByte2=224;St.VersionID=[2.5,null,2,1];St.LayerDescription=[0,3,2,1];St.ChannelMode=["stereo","joint_stereo","dual_channel","mono"];St.bitrate_index={1:{11:32,12:32,13:32,21:32,22:8,23:8},2:{11:64,12:48,13:40,21:48,22:16,23:16},3:{11:96,12:56,13:48,21:56,22:24,23:24},4:{11:128,12:64,13:56,21:64,22:32,23:32},5:{11:160,12:80,13:64,21:80,22:40,23:40},6:{11:192,12:96,13:80,21:96,22:48,23:48},7:{11:224,12:112,13:96,21:112,22:56,23:56},8:{11:256,12:128,13:112,21:128,22:64,23:64},9:{11:288,12:160,13:128,21:144,22:80,23:80},10:{11:320,12:192,13:160,21:160,22:96,23:96},11:{11:352,12:224,13:192,21:176,22:112,23:112},12:{11:384,12:256,13:224,21:192,22:128,23:128},13:{11:416,12:320,13:256,21:224,22:144,23:144},14:{11:448,12:384,13:320,21:256,22:160,23:160}};St.sampling_rate_freq_index={1:{0:44100,1:48e3,2:32e3},2:{0:22050,1:24e3,2:16e3},2.5:{0:11025,1:12e3,2:8e3}};St.samplesInFrameTable=[[0,384,1152,1152],[0,384,1152,576]];const lE={len:4,get:(t,e)=>new St(t,e)};function OL(t){return`V${Math.floor((100-t)/10)}`}class ML extends Lf{constructor(){super(...arguments),this.frameCount=0,this.syncFrameCount=-1,this.countSkipFrameData=0,this.totalDataLength=0,this.bitrates=[],this.offset=0,this.frame_size=0,this.crc=null,this.calculateEofDuration=!1,this.samplesPerFrame=null,this.buf_frame_header=new Uint8Array(4),this.mpegOffset=null,this.syncPeek={buf:new Uint8Array(oE),len:0}}async postId3v2Parse(){this.metadata.setFormat("lossless",!1);try{let e=!1;for(;!e;)await this.sync(),e=await this.parseCommonMpegHeader()}catch(e){if(e instanceof ot){if(Tn("End-of-stream"),this.calculateEofDuration&&this.samplesPerFrame!==null){const n=this.frameCount*this.samplesPerFrame;if(this.metadata.setFormat("numberOfSamples",n),this.metadata.format.sampleRate){const r=n/this.metadata.format.sampleRate;Tn(`Calculate duration at EOF: ${r} sec.`,r),this.metadata.setFormat("duration",r)}}}else throw e}}finalize(){const e=this.metadata.format,n=!!this.metadata.native.ID3v1;if(this.mpegOffset!==null){if(e.duration&&this.tokenizer.fileInfo.size){const r=this.tokenizer.fileInfo.size-this.mpegOffset-(n?128:0);e.codecProfile&&e.codecProfile[0]==="V"&&this.metadata.setFormat("bitrate",r*8/e.duration)}else if(this.tokenizer.fileInfo.size&&e.codecProfile==="CBR"){const r=this.tokenizer.fileInfo.size-this.mpegOffset-(n?128:0);if(this.frame_size!==null&&this.samplesPerFrame!==null){const s=Math.round(r/this.frame_size)*this.samplesPerFrame;if(this.metadata.setFormat("numberOfSamples",s),e.sampleRate){const i=s/e.sampleRate;Tn("Calculate CBR duration based on file size: %s",i),this.metadata.setFormat("duration",i)}}}}}async sync(){let e=!1;for(;;){let n=0;if(this.syncPeek.len=await this.tokenizer.peekBuffer(this.syncPeek.buf,{length:oE,mayBeLess:!0}),this.syncPeek.len<=163)throw new ot;for(;;){if(e&&(this.syncPeek.buf[n]&224)===224){this.buf_frame_header[0]=St.SyncByte1,this.buf_frame_header[1]=this.syncPeek.buf[n],await this.tokenizer.ignore(n),Tn(`Sync at offset=${this.tokenizer.position-1}, frameCount=${this.frameCount}`),this.syncFrameCount===this.frameCount&&(Tn(`Re-synced MPEG stream, frameCount=${this.frameCount}`),this.frameCount=0,this.frame_size=0),this.syncFrameCount=this.frameCount;return}if(e=!1,n=this.syncPeek.buf.indexOf(St.SyncByte1,n),n===-1){if(this.syncPeek.len<this.syncPeek.buf.length)throw new ot;await this.tokenizer.ignore(this.syncPeek.len);break}++n,e=!0}}}async parseCommonMpegHeader(){this.frameCount===0&&(this.mpegOffset=this.tokenizer.position-1),await this.tokenizer.peekBuffer(this.buf_frame_header,{offset:1,length:3});let e;try{e=lE.get(this.buf_frame_header,0)}catch(n){if(await this.tokenizer.ignore(1),n instanceof Error)return this.metadata.addWarning(`Parse error: ${n.message}`),!1;throw n}return await this.tokenizer.ignore(3),this.metadata.setFormat("container",e.container),this.metadata.setFormat("codec",e.codec),this.metadata.setFormat("lossless",!1),this.metadata.setFormat("sampleRate",e.samplingRate),this.frameCount++,e.version!==null&&e.version>=2&&e.layer===0?this.parseAdts(e):this.parseAudioFrameHeader(e)}async parseAudioFrameHeader(e){this.metadata.setFormat("numberOfChannels",e.channelMode==="mono"?1:2),this.metadata.setFormat("bitrate",e.bitrate),this.frameCount<20*1e4&&Tn("offset=%s MP%s bitrate=%s sample-rate=%s",this.tokenizer.position-4,e.layer,e.bitrate,e.samplingRate);const n=e.calcSlotSize();if(n===null)throw new Error("invalid slot_size");const r=e.calcSamplesPerFrame();Tn(`samples_per_frame=${r}`);const s=r/8;if(e.bitrate!==null&&e.samplingRate!=null){const i=s*e.bitrate/e.samplingRate+(e.padding?n:0);this.frame_size=Math.floor(i)}if(this.audioFrameHeader=e,e.bitrate!==null&&this.bitrates.push(e.bitrate),this.frameCount===1)return this.offset=lE.len,await this.skipSideInformation(),!1;if(this.frameCount===3){if(this.areAllSame(this.bitrates)){if(this.samplesPerFrame=r,this.metadata.setFormat("codecProfile","CBR"),this.tokenizer.fileInfo.size)return!0}else if(this.metadata.format.duration)return!0;if(!this.options.duration)return!0}return this.options.duration&&this.frameCount===4&&(this.samplesPerFrame=r,this.calculateEofDuration=!0),this.offset=4,e.isProtectedByCRC?(await this.parseCrc(),!1):(await this.skipSideInformation(),!1)}async parseAdts(e){const n=new Uint8Array(3);if(await this.tokenizer.readBuffer(n),e.frameLength+=ye(n,0,0,11),this.totalDataLength+=e.frameLength,this.samplesPerFrame=1024,e.samplingRate!==null){const r=e.samplingRate/this.samplesPerFrame,i=8*(this.frameCount===0?0:this.totalDataLength/this.frameCount)*r+.5;this.metadata.setFormat("bitrate",i),Tn(`frame-count=${this.frameCount}, size=${e.frameLength} bytes, bit-rate=${i}`)}if(await this.tokenizer.ignore(e.frameLength>7?e.frameLength-7:1),this.frameCount===3)if(this.metadata.setFormat("codecProfile",e.codecProfile),e.mp4ChannelConfig&&this.metadata.setFormat("numberOfChannels",e.mp4ChannelConfig.length),this.options.duration)this.calculateEofDuration=!0;else return!0;return!1}async parseCrc(){return this.crc=await this.tokenizer.readNumber(Zr),this.offset+=2,this.skipSideInformation()}async skipSideInformation(){if(this.audioFrameHeader){const e=this.audioFrameHeader.calculateSideInfoLength();if(e!==null){await this.tokenizer.readToken(new ln(e)),this.offset+=e,await this.readXtraInfoHeader();return}}}async readXtraInfoHeader(){const e=await this.tokenizer.readToken(iE);switch(this.offset+=iE.len,e){case"Info":return this.metadata.setFormat("codecProfile","CBR"),this.readXingInfoHeader();case"Xing":{const r=await this.readXingInfoHeader();if(r.vbrScale!==null){const s=OL(r.vbrScale);this.metadata.setFormat("codecProfile",s)}return null}case"Xtra":break;case"LAME":{const r=await this.tokenizer.readToken(Op);if(this.frame_size!==null&&this.frame_size>=this.offset+Op.len)return this.offset+=Op.len,this.metadata.setFormat("tool",`LAME ${r}`),await this.skipFrameData(this.frame_size-this.offset),null;this.metadata.addWarning("Corrupt LAME header");break}}const n=this.frame_size-this.offset;return n<0?this.metadata.addWarning(`Frame ${this.frameCount}corrupt: negative frameDataLeft`):await this.skipFrameData(n),null}async readXingInfoHeader(){const e=this.tokenizer.position,n=await jL(this.tokenizer);if(this.offset+=this.tokenizer.position-e,n.lame&&(this.metadata.setFormat("tool",`LAME ${js(n.lame.version)}`),n.lame.extended&&(this.metadata.setFormat("trackPeakLevel",n.lame.extended.track_peak),n.lame.extended.track_gain&&this.metadata.setFormat("trackGain",n.lame.extended.track_gain.adjustment),n.lame.extended.album_gain&&this.metadata.setFormat("albumGain",n.lame.extended.album_gain.adjustment),this.metadata.setFormat("duration",n.lame.extended.music_length/1e3))),n.streamSize&&this.audioFrameHeader&&n.numFrames!==null){const s=this.audioFrameHeader.calcDuration(n.numFrames);return this.metadata.setFormat("duration",s),Tn("Get duration from Xing header: %s",this.metadata.format.duration),n}const r=this.frame_size-this.offset;return await this.skipFrameData(r),n}async skipFrameData(e){if(e<0)throw new Error("frame-data-left cannot be negative");await this.tokenizer.ignore(e),this.countSkipFrameData+=e}areAllSame(e){const n=e[0];return e.every(r=>r===n)}}const cE=je("music-metadata:parser:musepack:sv8"),LL=new re(2,"latin1"),uE={len:5,get:(t,e)=>({crc:Z.get(t,e),streamVersion:fe.get(t,e+4)})},dE={len:2,get:(t,e)=>({sampleFrequency:[44100,48e3,37800,32e3][ye(t,e,0,3)],maxUsedBands:ye(t,e,3,5),channelCount:ye(t,e+1,0,4)+1,msUsed:In(t,e+1,4),audioBlockFrames:ye(t,e+1,5,3)})};class FL{constructor(e){this.tokenizer=e}async readPacketHeader(){const e=await this.tokenizer.readToken(LL),n=await this.readVariableSizeField();return{key:e,payloadLength:n.value-2-n.len}}async readStreamHeader(e){const n={};cE(`Reading SH at offset=${this.tokenizer.position}`);const r=await this.tokenizer.readToken(uE);e-=uE.len,Object.assign(n,r),cE(`SH.streamVersion = ${r.streamVersion}`);const s=await this.readVariableSizeField();e-=s.len,n.sampleCount=s.value;const i=await this.readVariableSizeField();e-=i.len,n.beginningOfSilence=i.value;const o=await this.tokenizer.readToken(dE);return e-=dE.len,Object.assign(n,o),await this.tokenizer.ignore(e),n}async readVariableSizeField(e=1,n=0){let r=await this.tokenizer.readNumber(fe);return r&128?(r&=127,r+=n,this.readVariableSizeField(e+1,r<<7)):{len:e,value:n+r}}}const $L=je("music-metadata:parser:musepack");class BL extends Vn{constructor(){super(...arguments),this.audioLength=0}async parse(){if(await this.tokenizer.readToken(He)!=="MPCK")throw new Error("Invalid Magic number");return this.metadata.setFormat("container","Musepack, SV8"),this.parsePacket()}async parsePacket(){const e=new FL(this.tokenizer);do{const n=await e.readPacketHeader();switch($L(`packet-header key=${n.key}, payloadLength=${n.payloadLength}`),n.key){case"SH":{const r=await e.readStreamHeader(n.payloadLength);this.metadata.setFormat("numberOfSamples",r.sampleCount),this.metadata.setFormat("sampleRate",r.sampleFrequency),this.metadata.setFormat("duration",r.sampleCount/r.sampleFrequency),this.metadata.setFormat("numberOfChannels",r.channelCount);break}case"AP":this.audioLength+=n.payloadLength,await this.tokenizer.ignore(n.payloadLength);break;case"RG":case"EI":case"SO":case"ST":case"CT":await this.tokenizer.ignore(n.payloadLength);break;case"SE":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",this.audioLength*8/this.metadata.format.duration),Tr.tryParseApeHeader(this.metadata,this.tokenizer,this.options);default:throw new Error(`Unexpected header: ${n.key}`)}}while(!0)}}class zL{constructor(e){this.tokenizer=e,this.pos=0,this.dword=null}async read(e){for(;this.dword===null;)this.dword=await this.tokenizer.readToken(Z);let n=this.dword;return this.pos+=e,this.pos<32?(n>>>=32-this.pos,n&(1<<e)-1):(this.pos-=32,this.pos===0?(this.dword=null,n&(1<<e)-1):(this.dword=await this.tokenizer.readToken(Z),this.pos&&(n<<=this.pos,n|=this.dword>>>32-this.pos),n&(1<<e)-1))}async ignore(e){if(this.pos>0){const s=32-this.pos;this.dword=null,e-=s,this.pos=0}const n=e%32,r=(e-n)/32;return await this.tokenizer.ignore(r*4),this.read(n)}}const VL={len:6*4,get:(t,e)=>{const n={signature:new TextDecoder("latin1").decode(t.subarray(e,e+3)),streamMinorVersion:ye(t,e+3,0,4),streamMajorVersion:ye(t,e+3,4,4),frameCount:Z.get(t,e+4),maxLevel:ke.get(t,e+8),sampleFrequency:[44100,48e3,37800,32e3][ye(t,e+10,0,2)],link:ye(t,e+10,2,2),profile:ye(t,e+10,4,4),maxBand:ye(t,e+11,0,6),intensityStereo:In(t,e+11,6),midSideStereo:In(t,e+11,7),titlePeak:ke.get(t,e+12),titleGain:ke.get(t,e+14),albumPeak:ke.get(t,e+16),albumGain:ke.get(t,e+18),lastFrameLength:Z.get(t,e+20)>>>20&2047,trueGapless:In(t,e+23,0)};return n.lastFrameLength=n.trueGapless?Z.get(t,20)>>>20&2047:0,n}},hE=je("music-metadata:parser:musepack");class UL extends Vn{constructor(){super(...arguments),this.bitreader=null,this.audioLength=0,this.duration=null}async parse(){const e=await this.tokenizer.readToken(VL);if(e.signature!=="MP+")throw new Error("Unexpected magic number");hE(`stream-version=${e.streamMajorVersion}.${e.streamMinorVersion}`),this.metadata.setFormat("container","Musepack, SV7"),this.metadata.setFormat("sampleRate",e.sampleFrequency);const n=1152*(e.frameCount-1)+e.lastFrameLength;this.metadata.setFormat("numberOfSamples",n),this.duration=n/e.sampleFrequency,this.metadata.setFormat("duration",this.duration),this.bitreader=new zL(this.tokenizer),this.metadata.setFormat("numberOfChannels",e.midSideStereo||e.intensityStereo?2:1);const r=await this.bitreader.read(8);return this.metadata.setFormat("codec",(r/100).toFixed(2)),await this.skipAudioData(e.frameCount),hE(`End of audio stream, switching to APEv2, offset=${this.tokenizer.position}`),Tr.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async skipAudioData(e){for(;e-- >0;){const r=await this.bitreader.read(20);this.audioLength+=20+r,await this.bitreader.ignore(r)}const n=await this.bitreader.read(11);this.audioLength+=n,this.duration!==null&&this.metadata.setFormat("bitrate",this.audioLength/this.duration)}}const fE=je("music-metadata:parser:musepack");class HL extends Lf{async postId3v2Parse(){const e=await this.tokenizer.peekToken(new re(3,"latin1"));let n;switch(e){case"MP+":{fE("Musepack stream-version 7"),n=new UL;break}case"MPC":{fE("Musepack stream-version 8"),n=new BL;break}default:throw new Error("Invalid Musepack signature prefix")}return n.init(this.metadata,this.tokenizer,this.options),n.parse()}}class WL{constructor(e){if(this.len=e,e<19)throw new Error("ID-header-page 0 should be at least 19 bytes long")}get(e,n){return{magicSignature:new re(8,"ascii").get(e,n+0),version:fe.get(e,n+8),channelCount:fe.get(e,n+9),preSkip:ke.get(e,n+10),inputSampleRate:Z.get(e,n+12),outputGain:ke.get(e,n+16),channelMapping:fe.get(e,n+18)}}}class qL extends so{constructor(e,n,r){super(e,n),this.tokenizer=r,this.idHeader=null,this.lastPos=-1}parseFirstPage(e,n){if(this.metadata.setFormat("codec","Opus"),this.idHeader=new WL(n.length).get(n,0),this.idHeader.magicSignature!=="OpusHead")throw new Error("Illegal ogg/Opus magic-signature");this.metadata.setFormat("sampleRate",this.idHeader.inputSampleRate),this.metadata.setFormat("numberOfChannels",this.idHeader.channelCount)}async parseFullPage(e){switch(new re(8,"ascii").get(e,0)){case"OpusTags":await this.parseUserCommentList(e,8),this.lastPos=this.tokenizer.position-e.length;break}}calculateDuration(e){if(this.metadata.format.sampleRate&&e.absoluteGranulePosition>=0){const n=e.absoluteGranulePosition-this.idHeader.preSkip;if(this.metadata.setFormat("numberOfSamples",n),this.metadata.setFormat("duration",n/48e3),this.lastPos!==-1&&this.tokenizer.fileInfo.size&&this.metadata.format.duration){const r=this.tokenizer.fileInfo.size-this.lastPos;this.metadata.setFormat("bitrate",8*r/this.metadata.format.duration)}}}}const GL={len:80,get:(t,e)=>({speex:new re(8,"ascii").get(t,e+0),version:$I(new re(20,"ascii").get(t,e+8)),version_id:rt.get(t,e+28),header_size:rt.get(t,e+32),rate:rt.get(t,e+36),mode:rt.get(t,e+40),mode_bitstream_version:rt.get(t,e+44),nb_channels:rt.get(t,e+48),bitrate:rt.get(t,e+52),frame_size:rt.get(t,e+56),vbr:rt.get(t,e+60),frames_per_packet:rt.get(t,e+64),extra_headers:rt.get(t,e+68),reserved1:rt.get(t,e+72),reserved2:rt.get(t,e+76)})},KL=je("music-metadata:parser:ogg:speex");class XL extends so{constructor(e,n,r){super(e,n),this.tokenizer=r}parseFirstPage(e,n){KL("First Ogg/Speex page");const r=GL.get(n,0);this.metadata.setFormat("codec",`Speex ${r.version}`),this.metadata.setFormat("numberOfChannels",r.nb_channels),this.metadata.setFormat("sampleRate",r.rate),r.bitrate!==-1&&this.metadata.setFormat("bitrate",r.bitrate)}}const QL={len:42,get:(t,e)=>({id:new re(7,"ascii").get(t,e),vmaj:fe.get(t,e+7),vmin:fe.get(t,e+8),vrev:fe.get(t,e+9),vmbw:Pe.get(t,e+10),vmbh:Pe.get(t,e+17),nombr:rn.get(t,e+37),nqual:fe.get(t,e+40)})},Mp=je("music-metadata:parser:ogg:theora");class YL{constructor(e,n,r){this.metadata=e,this.tokenizer=r}async parsePage(e,n){e.headerType.firstPage&&await this.parseFirstPage(e,n)}async flush(){Mp("flush")}calculateDuration(e){Mp("duration calculation not implemented")}async parseFirstPage(e,n){Mp("First Ogg/Theora page"),this.metadata.setFormat("codec","Theora");const r=QL.get(n,0);this.metadata.setFormat("bitrate",r.nombr)}}const Gr=je("music-metadata:parser:ogg");class tx{static sum(e,n,r){const s=new DataView(e.buffer,0);let i=0;for(let o=n;o<n+r;++o)i+=s.getUint8(o);return i}constructor(e){this.len=e.page_segments}get(e,n){return{totalPageSize:tx.sum(e,n,this.len)}}}class Ff extends Vn{constructor(){super(...arguments),this.header=null,this.pageNumber=0,this.pageConsumer=null}async parse(){Gr("pos=%s, parsePage()",this.tokenizer.position);try{let e;do{if(e=await this.tokenizer.readToken(Ff.Header),e.capturePattern!=="OggS")throw new Error("Invalid Ogg capture pattern");this.metadata.setFormat("container","Ogg"),this.header=e,this.pageNumber=e.pageSequenceNo,Gr("page#=%s, Ogg.id=%s",e.pageSequenceNo,e.capturePattern);const n=await this.tokenizer.readToken(new tx(e));Gr("totalPageSize=%s",n.totalPageSize);const r=await this.tokenizer.readToken(new ln(n.totalPageSize));if(Gr("firstPage=%s, lastPage=%s, continued=%s",e.headerType.firstPage,e.headerType.lastPage,e.headerType.continued),e.headerType.firstPage){const s=new TextDecoder("ascii").decode(r.subarray(0,7));switch(s){case"vorbis":Gr("Set page consumer to Ogg/Vorbis"),this.pageConsumer=new so(this.metadata,this.options);break;case"OpusHea":Gr("Set page consumer to Ogg/Opus"),this.pageConsumer=new qL(this.metadata,this.options,this.tokenizer);break;case"Speex  ":Gr("Set page consumer to Ogg/Speex"),this.pageConsumer=new XL(this.metadata,this.options,this.tokenizer);break;case"fishead":case"\0theora":Gr("Set page consumer to Ogg/Theora"),this.pageConsumer=new YL(this.metadata,this.options,this.tokenizer);break;default:throw new Error(`gg audio-codec not recognized (id=${s})`)}}await this.pageConsumer.parsePage(e,r)}while(!e.headerType.lastPage)}catch(e){if(e instanceof Error)e instanceof ot?(this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),Gr("End-of-stream"),this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),this.header&&this.pageConsumer.calculateDuration(this.header)):e.message.startsWith("FourCC")&&this.pageNumber>0&&(this.metadata.addWarning("Invalid FourCC ID, maybe last OGG-page is not marked with last-page flag"),await this.pageConsumer.flush());else throw e}}}Ff.Header={len:27,get:(t,e)=>({capturePattern:He.get(t,e),version:fe.get(t,e+4),headerType:{continued:Ye(t,e+5,0),firstPage:Ye(t,e+5,1),lastPage:Ye(t,e+5,2)},absoluteGranulePosition:Number(en.get(t,e+6)),streamSerialNumber:Z.get(t,e+14),pageSequenceNo:Z.get(t,e+18),pageChecksum:Z.get(t,e+22),page_segments:fe.get(t,e+26)})};const ml={len:8,get:(t,e)=>({chunkID:new re(4,"latin1").get(t,e),chunkSize:Z.get(t,e+4)})};class JL{constructor(e){this.tagHeader=e,this.len=e.chunkSize,this.len+=this.len&1}get(e,n){return new re(this.tagHeader.chunkSize,"ascii").get(e,n)}}var V0;(function(t){t[t.PCM=1]="PCM",t[t.ADPCM=2]="ADPCM",t[t.IEEE_FLOAT=3]="IEEE_FLOAT",t[t.MPEG_ADTS_AAC=5632]="MPEG_ADTS_AAC",t[t.MPEG_LOAS=5634]="MPEG_LOAS",t[t.RAW_AAC1=255]="RAW_AAC1",t[t.DOLBY_AC3_SPDIF=146]="DOLBY_AC3_SPDIF",t[t.DVM=8192]="DVM",t[t.RAW_SPORT=576]="RAW_SPORT",t[t.ESST_AC3=577]="ESST_AC3",t[t.DRM=9]="DRM",t[t.DTS2=8193]="DTS2",t[t.MPEG=80]="MPEG"})(V0||(V0={}));class ZL{constructor(e){if(e.chunkSize<16)throw new Error("Invalid chunk size");this.len=e.chunkSize}get(e,n){return{wFormatTag:ke.get(e,n),nChannels:ke.get(e,n+2),nSamplesPerSec:Z.get(e,n+4),nAvgBytesPerSec:Z.get(e,n+8),nBlockAlign:ke.get(e,n+12),wBitsPerSample:ke.get(e,n+14)}}}class eF{constructor(e){if(e.chunkSize<4)throw new Error("Invalid fact chunk size.");this.len=e.chunkSize}get(e,n){return{dwSampleLength:Z.get(e,n)}}}const mE={len:420,get:(t,e)=>({description:js(new re(256,"ascii").get(t,e)).trim(),originator:js(new re(32,"ascii").get(t,e+256)).trim(),originatorReference:js(new re(32,"ascii").get(t,e+288)).trim(),originationDate:js(new re(10,"ascii").get(t,e+320)).trim(),originationTime:js(new re(8,"ascii").get(t,e+330)).trim(),timeReferenceLow:Z.get(t,e+338),timeReferenceHigh:Z.get(t,e+342),version:ke.get(t,e+346),umid:new ln(64).get(t,e+348),loudnessValue:ke.get(t,e+412),maxTruePeakLevel:ke.get(t,e+414),maxMomentaryLoudness:ke.get(t,e+416),maxShortTermLoudness:ke.get(t,e+418)})},Ts=je("music-metadata:parser:RIFF");class tF extends Vn{constructor(){super(...arguments),this.blockAlign=0}async parse(){const e=await this.tokenizer.readToken(ml);if(Ts(`pos=${this.tokenizer.position}, parse: chunkID=${e.chunkID}`),e.chunkID==="RIFF")return this.parseRiffChunk(e.chunkSize).catch(n=>{if(!(n instanceof ot))throw n})}async parseRiffChunk(e){const n=await this.tokenizer.readToken(He);switch(this.metadata.setFormat("container",n),n){case"WAVE":return this.readWaveChunk(e-He.len);default:throw new Error(`Unsupported RIFF format: RIFF/${n}`)}}async readWaveChunk(e){for(;e>=ml.len;){const n=await this.tokenizer.readToken(ml);switch(e-=ml.len+n.chunkSize,n.chunkSize>e&&this.metadata.addWarning("Data chunk size exceeds file size"),this.header=n,Ts(`pos=${this.tokenizer.position}, readChunk: chunkID=RIFF/WAVE/${n.chunkID}`),n.chunkID){case"LIST":await this.parseListTag(n);break;case"fact":this.metadata.setFormat("lossless",!1),this.fact=await this.tokenizer.readToken(new eF(n));break;case"fmt ":{const r=await this.tokenizer.readToken(new ZL(n));let s=V0[r.wFormatTag];s||(Ts(`WAVE/non-PCM format=${r.wFormatTag}`),s=`non-PCM (${r.wFormatTag})`),this.metadata.setFormat("codec",s),this.metadata.setFormat("bitsPerSample",r.wBitsPerSample),this.metadata.setFormat("sampleRate",r.nSamplesPerSec),this.metadata.setFormat("numberOfChannels",r.nChannels),this.metadata.setFormat("bitrate",r.nBlockAlign*r.nSamplesPerSec*8),this.blockAlign=r.nBlockAlign;break}case"id3 ":case"ID3 ":{const r=await this.tokenizer.readToken(new ln(n.chunkSize)),s=Ia(r);await new lr().parse(this.metadata,s,this.options);break}case"data":{this.metadata.format.lossless!==!1&&this.metadata.setFormat("lossless",!0);let r=n.chunkSize;if(this.tokenizer.fileInfo.size){const i=this.tokenizer.fileInfo.size-this.tokenizer.position;i<r&&(this.metadata.addWarning("data chunk length exceeding file length"),r=i)}const s=this.fact?this.fact.dwSampleLength:r===4294967295?void 0:r/this.blockAlign;s&&(this.metadata.setFormat("numberOfSamples",s),this.metadata.format.sampleRate&&this.metadata.setFormat("duration",s/this.metadata.format.sampleRate)),this.metadata.format.codec==="ADPCM"?this.metadata.setFormat("bitrate",352e3):this.metadata.format.sampleRate&&this.metadata.setFormat("bitrate",this.blockAlign*this.metadata.format.sampleRate*8),await this.tokenizer.ignore(n.chunkSize);break}case"bext":{const r=await this.tokenizer.readToken(mE);Object.keys(r).forEach(i=>{this.metadata.addTag("exif",`bext.${i}`,r[i])});const s=n.chunkSize-mE.len;await this.tokenizer.ignore(s);break}case"\0\0\0\0":Ts(`Ignore padding chunk: RIFF/${n.chunkID} of ${n.chunkSize} bytes`),this.metadata.addWarning(`Ignore chunk: RIFF/${n.chunkID}`),await this.tokenizer.ignore(n.chunkSize);break;default:Ts(`Ignore chunk: RIFF/${n.chunkID} of ${n.chunkSize} bytes`),this.metadata.addWarning(`Ignore chunk: RIFF/${n.chunkID}`),await this.tokenizer.ignore(n.chunkSize)}this.header.chunkSize%2===1&&(Ts("Read odd padding byte"),await this.tokenizer.ignore(1))}}async parseListTag(e){const n=await this.tokenizer.readToken(new re(4,"latin1"));switch(Ts("pos=%s, parseListTag: chunkID=RIFF/WAVE/LIST/%s",this.tokenizer.position,n),n){case"INFO":return this.parseRiffInfoTags(e.chunkSize-4);default:return this.metadata.addWarning(`Ignore chunk: RIFF/WAVE/LIST/${n}`),Ts(`Ignoring chunkID=RIFF/WAVE/LIST/${n}`),this.tokenizer.ignore(e.chunkSize-4).then()}}async parseRiffInfoTags(e){for(;e>=8;){const n=await this.tokenizer.readToken(ml),r=new JL(n),s=await this.tokenizer.readToken(r);this.addTag(n.chunkID,js(s)),e-=8+r.len}if(e!==0)throw new Error(`Illegal remaining size: ${e}`)}addTag(e,n){this.metadata.addTag("exif",e,n)}}const nF=[6e3,8e3,9600,11025,12e3,16e3,22050,24e3,32e3,44100,48e3,64e3,88200,96e3,192e3,-1],Ju={len:32,get:(t,e)=>{const n=Z.get(t,e+24),r={BlockID:He.get(t,e),blockSize:Z.get(t,e+4),version:ke.get(t,e+8),totalSamples:Z.get(t,e+12),blockIndex:Z.get(t,e+16),blockSamples:Z.get(t,e+20),flags:{bitsPerSample:(1+Ch(n,0,2))*8,isMono:_r(n,2),isHybrid:_r(n,3),isJointStereo:_r(n,4),crossChannel:_r(n,5),hybridNoiseShaping:_r(n,6),floatingPoint:_r(n,7),samplingRate:nF[Ch(n,23,4)],isDSD:_r(n,31)},crc:new ln(4).get(t,e+28)};return r.flags.isDSD&&(r.totalSamples*=8),r}},Lp={len:1,get:(t,e)=>({functionId:Ch(t[e],0,6),isOptional:_r(t[e],5),isOddSize:_r(t[e],6),largeBlock:_r(t[e],7)})};function _r(t,e){return Ch(t,e,1)===1}function Ch(t,e,n){return t>>>e&4294967295>>>32-n}const Ai=je("music-metadata:parser:WavPack");class rF extends Vn{constructor(){super(...arguments),this.audioDataSize=0}async parse(){return this.audioDataSize=0,await this.parseWavPackBlocks(),Tr.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async parseWavPackBlocks(){do{if(await this.tokenizer.peekToken(He)!=="wvpk")break;const n=await this.tokenizer.readToken(Ju);if(n.BlockID!=="wvpk")throw new Error("Invalid WavPack Block-ID");Ai(`WavPack header blockIndex=${n.blockIndex}, len=${Ju.len}`),n.blockIndex===0&&!this.metadata.format.container&&(this.metadata.setFormat("container","WavPack"),this.metadata.setFormat("lossless",!n.flags.isHybrid),this.metadata.setFormat("bitsPerSample",n.flags.bitsPerSample),n.flags.isDSD||(this.metadata.setFormat("sampleRate",n.flags.samplingRate),this.metadata.setFormat("duration",n.totalSamples/n.flags.samplingRate)),this.metadata.setFormat("numberOfChannels",n.flags.isMono?1:2),this.metadata.setFormat("numberOfSamples",n.totalSamples),this.metadata.setFormat("codec",n.flags.isDSD?"DSD":"PCM"));const r=n.blockSize-(Ju.len-8);await(n.blockIndex===0?this.parseMetadataSubBlock(n,r):this.tokenizer.ignore(r)),n.blockSamples>0&&(this.audioDataSize+=n.blockSize)}while(!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=Ju.len);this.metadata.format.duration&&this.metadata.setFormat("bitrate",this.audioDataSize*8/this.metadata.format.duration)}async parseMetadataSubBlock(e,n){let r=n;for(;r>Lp.len;){const s=await this.tokenizer.readToken(Lp),i=await this.tokenizer.readNumber(s.largeBlock?xh:fe),o=new Uint8Array(i*2-(s.isOddSize?1:0));switch(await this.tokenizer.readBuffer(o),Ai(`Metadata Sub-Blocks functionId=0x${s.functionId.toString(16)}, id.largeBlock=${s.largeBlock},data-size=${o.length}`),s.functionId){case 0:break;case 14:{Ai("ID_DSD_BLOCK");const a=1<<fe.get(o,0),l=e.flags.samplingRate*a*8;if(!e.flags.isDSD)throw new Error("Only expect DSD block if DSD-flag is set");this.metadata.setFormat("sampleRate",l),this.metadata.setFormat("duration",e.totalSamples/l);break}case 36:Ai("ID_ALT_TRAILER: trailer for non-wav files");break;case 38:this.metadata.setFormat("audioMD5",o);break;case 47:Ai(`ID_BLOCK_CHECKSUM: checksum=${Kv(o)}`);break;default:Ai(`Ignore unsupported meta-sub-block-id functionId=0x${s.functionId.toString(16)}`);break}r-=Lp.len+(s.largeBlock?xh.len:fe.len)+i*2,Ai(`remainingLength=${r}`),s.isOddSize&&this.tokenizer.ignore(1)}if(r!==0)throw new Error("metadata-sub-block should fit it remaining length")}}const Zu={len:12,get:(t,e)=>({id:He.get(t,e),size:en.get(t,e+4)})},sF={len:16,get:(t,e)=>({fileSize:wh.get(t,e),metadataPointer:wh.get(t,e+8)})};var pE;(function(t){t[t.mono=1]="mono",t[t.stereo=2]="stereo",t[t.channels=3]="channels",t[t.quad=4]="quad",t[t["4 channels"]=5]="4 channels",t[t["5 channels"]=6]="5 channels",t[t["5.1 channels"]=7]="5.1 channels"})(pE||(pE={}));const iF={len:40,get:(t,e)=>({formatVersion:rt.get(t,e),formatID:rt.get(t,e+4),channelType:rt.get(t,e+8),channelNum:rt.get(t,e+12),samplingFrequency:rt.get(t,e+16),bitsPerSample:rt.get(t,e+20),sampleCount:wh.get(t,e+24),blockSizePerChannel:rt.get(t,e+32)})},Fp=je("music-metadata:parser:DSF");class oF extends Lf{async postId3v2Parse(){const e=this.tokenizer.position,n=await this.tokenizer.readToken(Zu);if(n.id!=="DSD ")throw new Error("Invalid chunk signature");this.metadata.setFormat("container","DSF"),this.metadata.setFormat("lossless",!0);const r=await this.tokenizer.readToken(sF);if(r.metadataPointer===BigInt(0))Fp("No ID3v2 tag present");else return Fp(`expect ID3v2 at offset=${r.metadataPointer}`),await this.parseChunks(r.fileSize-n.size),await this.tokenizer.ignore(Number(r.metadataPointer)-this.tokenizer.position-e),new lr().parse(this.metadata,this.tokenizer,this.options)}async parseChunks(e){for(;e>=Zu.len;){const n=await this.tokenizer.readToken(Zu);switch(Fp(`Parsing chunk name=${n.id} size=${n.size}`),n.id){case"fmt ":{const r=await this.tokenizer.readToken(iF);this.metadata.setFormat("numberOfChannels",r.channelNum),this.metadata.setFormat("sampleRate",r.samplingFrequency),this.metadata.setFormat("bitsPerSample",r.bitsPerSample),this.metadata.setFormat("numberOfSamples",r.sampleCount),this.metadata.setFormat("duration",Number(r.sampleCount)/r.samplingFrequency);const s=r.bitsPerSample*r.samplingFrequency*r.channelNum;this.metadata.setFormat("bitrate",s);return}default:this.tokenizer.ignore(Number(n.size)-Zu.len);break}e-=n.size}}}const jo={len:12,get:(t,e)=>({chunkID:He.get(t,e),chunkSize:RI.get(t,e+4)})},Yt=je("music-metadata:parser:aiff");class aF extends Vn{async parse(){const e=await this.tokenizer.readToken(jo);if(e.chunkID!=="FRM8")throw new Error("Unexpected chunk-ID");const n=(await this.tokenizer.readToken(He)).trim();switch(n){case"DSD":return this.metadata.setFormat("container",`DSDIFF/${n}`),this.metadata.setFormat("lossless",!0),this.readFmt8Chunks(e.chunkSize-BigInt(He.len));default:throw new Error(`Unsupported DSDIFF type: ${n}`)}}async readFmt8Chunks(e){for(;e>=jo.len;){const n=await this.tokenizer.readToken(jo);Yt(`Chunk id=${n.chunkID}`),await this.readData(n),e-=BigInt(jo.len)+n.chunkSize}}async readData(e){Yt(`Reading data of chunk[ID=${e.chunkID}, size=${e.chunkSize}]`);const n=this.tokenizer.position;switch(e.chunkID.trim()){case"FVER":{const s=await this.tokenizer.readToken(Z);Yt(`DSDIFF version=${s}`);break}case"PROP":{if(await this.tokenizer.readToken(He)!=="SND ")throw new Error("Unexpected PROP-chunk ID");await this.handleSoundPropertyChunks(e.chunkSize-BigInt(He.len));break}case"ID3":{const s=await this.tokenizer.readToken(new ln(Number(e.chunkSize))),i=Ia(s);await new lr().parse(this.metadata,i,this.options);break}case"DSD":this.metadata.format.numberOfChannels&&this.metadata.setFormat("numberOfSamples",Number(e.chunkSize*BigInt(8)/BigInt(this.metadata.format.numberOfChannels))),this.metadata.format.numberOfSamples&&this.metadata.format.sampleRate&&this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate);break;default:Yt(`Ignore chunk[ID=${e.chunkID}, size=${e.chunkSize}]`);break}const r=e.chunkSize-BigInt(this.tokenizer.position-n);r>0&&(Yt(`After Parsing chunk, remaining ${r} bytes`),await this.tokenizer.ignore(Number(r)))}async handleSoundPropertyChunks(e){for(Yt(`Parsing sound-property-chunks, remainingSize=${e}`);e>0;){const n=await this.tokenizer.readToken(jo);Yt(`Sound-property-chunk[ID=${n.chunkID}, size=${n.chunkSize}]`);const r=this.tokenizer.position;switch(n.chunkID.trim()){case"FS":{const i=await this.tokenizer.readToken(se);this.metadata.setFormat("sampleRate",i);break}case"CHNL":{const i=await this.tokenizer.readToken(Pe);this.metadata.setFormat("numberOfChannels",i),await this.handleChannelChunks(n.chunkSize-BigInt(Pe.len));break}case"CMPR":{const i=(await this.tokenizer.readToken(He)).trim(),o=await this.tokenizer.readToken(fe),a=await this.tokenizer.readToken(new re(o,"ascii"));i==="DSD"&&(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("bitsPerSample",1)),this.metadata.setFormat("codec",`${i} (${a})`);break}case"ABSS":{const i=await this.tokenizer.readToken(Pe),o=await this.tokenizer.readToken(fe),a=await this.tokenizer.readToken(fe),l=await this.tokenizer.readToken(se);Yt(`ABSS ${i}:${o}:${a}.${l}`);break}case"LSCO":{const i=await this.tokenizer.readToken(Pe);Yt(`LSCO lsConfig=${i}`);break}default:Yt(`Unknown sound-property-chunk[ID=${n.chunkID}, size=${n.chunkSize}]`),await this.tokenizer.ignore(Number(n.chunkSize))}const s=n.chunkSize-BigInt(this.tokenizer.position-r);s>0&&(Yt(`After Parsing sound-property-chunk ${n.chunkSize}, remaining ${s} bytes`),await this.tokenizer.ignore(Number(s))),e-=BigInt(jo.len)+n.chunkSize,Yt(`Parsing sound-property-chunks, remainingSize=${e}`)}if(this.metadata.format.lossless&&this.metadata.format.sampleRate&&this.metadata.format.numberOfChannels&&this.metadata.format.bitsPerSample){const n=this.metadata.format.sampleRate*this.metadata.format.numberOfChannels*this.metadata.format.bitsPerSample;this.metadata.setFormat("bitrate",n)}}async handleChannelChunks(e){Yt(`Parsing channel-chunks, remainingSize=${e}`);const n=[];for(;e>=He.len;){const r=await this.tokenizer.readToken(He);Yt(`Channel[ID=${r}]`),n.push(r),e-=BigInt(He.len)}return Yt(`Channels: ${n.join(", ")}`),n}}var P;(function(t){t[t.string=0]="string",t[t.uint=1]="uint",t[t.uid=2]="uid",t[t.bool=3]="bool",t[t.binary=4]="binary",t[t.float=5]="float"})(P||(P={}));const lF={name:"dtd",container:{440786851:{name:"ebml",container:{17030:{name:"ebmlVersion",value:P.uint},17143:{name:"ebmlReadVersion",value:P.uint},17138:{name:"ebmlMaxIDWidth",value:P.uint},17139:{name:"ebmlMaxSizeWidth",value:P.uint},17026:{name:"docType",value:P.string},17031:{name:"docTypeVersion",value:P.uint},17029:{name:"docTypeReadVersion",value:P.uint}}},408125543:{name:"segment",container:{290298740:{name:"seekHead",container:{19899:{name:"seek",multiple:!0,container:{21419:{name:"id",value:P.binary},21420:{name:"position",value:P.uint}}}}},357149030:{name:"info",container:{29604:{name:"uid",value:P.uid},29572:{name:"filename",value:P.string},3979555:{name:"prevUID",value:P.uid},3965867:{name:"prevFilename",value:P.string},4110627:{name:"nextUID",value:P.uid},4096955:{name:"nextFilename",value:P.string},2807729:{name:"timecodeScale",value:P.uint},17545:{name:"duration",value:P.float},17505:{name:"dateUTC",value:P.uint},31657:{name:"title",value:P.string},19840:{name:"muxingApp",value:P.string},22337:{name:"writingApp",value:P.string}}},524531317:{name:"cluster",multiple:!0,container:{231:{name:"timecode",value:P.uid},22743:{name:"silentTracks ",multiple:!0},167:{name:"position",value:P.uid},171:{name:"prevSize",value:P.uid},160:{name:"blockGroup"},163:{name:"simpleBlock"}}},374648427:{name:"tracks",container:{174:{name:"entries",multiple:!0,container:{215:{name:"trackNumber",value:P.uint},29637:{name:"uid",value:P.uid},131:{name:"trackType",value:P.uint},185:{name:"flagEnabled",value:P.bool},136:{name:"flagDefault",value:P.bool},21930:{name:"flagForced",value:P.bool},156:{name:"flagLacing",value:P.bool},28135:{name:"minCache",value:P.uint},28136:{name:"maxCache",value:P.uint},2352003:{name:"defaultDuration",value:P.uint},2306383:{name:"timecodeScale",value:P.float},21358:{name:"name",value:P.string},2274716:{name:"language",value:P.string},134:{name:"codecID",value:P.string},25506:{name:"codecPrivate",value:P.binary},2459272:{name:"codecName",value:P.string},3839639:{name:"codecSettings",value:P.string},3883072:{name:"codecInfoUrl",value:P.string},2536e3:{name:"codecDownloadUrl",value:P.string},170:{name:"codecDecodeAll",value:P.bool},28587:{name:"trackOverlay",value:P.uint},224:{name:"video",container:{154:{name:"flagInterlaced",value:P.bool},21432:{name:"stereoMode",value:P.uint},176:{name:"pixelWidth",value:P.uint},186:{name:"pixelHeight",value:P.uint},21680:{name:"displayWidth",value:P.uint},21690:{name:"displayHeight",value:P.uint},21683:{name:"aspectRatioType",value:P.uint},3061028:{name:"colourSpace",value:P.uint},3126563:{name:"gammaValue",value:P.float}}},225:{name:"audio",container:{181:{name:"samplingFrequency",value:P.float},30901:{name:"outputSamplingFrequency",value:P.float},159:{name:"channels",value:P.uint},148:{name:"channels",value:P.uint},32123:{name:"channelPositions",value:P.binary},25188:{name:"bitDepth",value:P.uint}}},28032:{name:"contentEncodings",container:{25152:{name:"contentEncoding",container:{20529:{name:"order",value:P.uint},20530:{name:"scope",value:P.bool},20531:{name:"type",value:P.uint},20532:{name:"contentEncoding",container:{16980:{name:"contentCompAlgo",value:P.uint},16981:{name:"contentCompSettings",value:P.binary}}},20533:{name:"contentEncoding",container:{18401:{name:"contentEncAlgo",value:P.uint},18402:{name:"contentEncKeyID",value:P.binary},18403:{name:"contentSignature ",value:P.binary},18404:{name:"ContentSigKeyID  ",value:P.binary},18405:{name:"contentSigAlgo ",value:P.uint},18406:{name:"contentSigHashAlgo ",value:P.uint}}},25188:{name:"bitDepth",value:P.uint}}}}}}}}},475249515:{name:"cues",container:{187:{name:"cuePoint",container:{179:{name:"cueTime",value:P.uid},183:{name:"positions",container:{247:{name:"track",value:P.uint},241:{name:"clusterPosition",value:P.uint},21368:{name:"blockNumber",value:P.uint},234:{name:"codecState",value:P.uint},219:{name:"reference",container:{150:{name:"time",value:P.uint},151:{name:"cluster",value:P.uint},21343:{name:"number",value:P.uint},235:{name:"codecState",value:P.uint}}},240:{name:"relativePosition",value:P.uint}}}}}}},423732329:{name:"attachments",container:{24999:{name:"attachedFiles",multiple:!0,container:{18046:{name:"description",value:P.string},18030:{name:"name",value:P.string},18016:{name:"mimeType",value:P.string},18012:{name:"data",value:P.binary},18094:{name:"uid",value:P.uid}}}}},272869232:{name:"chapters",container:{17849:{name:"editionEntry",container:{182:{name:"chapterAtom",container:{29636:{name:"uid",value:P.uid},145:{name:"timeStart",value:P.uint},146:{name:"timeEnd",value:P.uid},152:{name:"hidden",value:P.bool},17816:{name:"enabled",value:P.uid},143:{name:"track",container:{137:{name:"trackNumber",value:P.uid},128:{name:"display",container:{133:{name:"string",value:P.string},17276:{name:"language ",value:P.string},17278:{name:"country ",value:P.string}}}}}}}}}}},307544935:{name:"tags",container:{29555:{name:"tag",multiple:!0,container:{25536:{name:"target",container:{25541:{name:"tagTrackUID",value:P.uid},25540:{name:"tagChapterUID",value:P.uint},25542:{name:"tagAttachmentUID",value:P.uid},25546:{name:"targetType",value:P.string},26826:{name:"targetTypeValue",value:P.uint},25545:{name:"tagEditionUID",value:P.uid}}},26568:{name:"simpleTags",multiple:!0,container:{17827:{name:"name",value:P.string},17543:{name:"string",value:P.string},17541:{name:"binary",value:P.binary},17530:{name:"language",value:P.string},17531:{name:"languageIETF",value:P.string},17540:{name:"default",value:P.bool}}}}}}}}}}},Do=je("music-metadata:parser:ebml");var cr;(function(t){t[t.ReadNext=0]="ReadNext",t[t.IgnoreElement=2]="IgnoreElement",t[t.SkipSiblings=3]="SkipSiblings",t[t.TerminateParsing=4]="TerminateParsing",t[t.SkipElement=5]="SkipElement"})(cr||(cr={}));class cF{constructor(e){this.tokenizer=e,this.padding=0,this.parserMap=new Map,this.ebmlMaxIDLength=4,this.ebmlMaxSizeLength=8,this.parserMap.set(P.uint,n=>this.readUint(n)),this.parserMap.set(P.string,n=>this.readString(n)),this.parserMap.set(P.binary,n=>this.readBuffer(n)),this.parserMap.set(P.uid,async n=>this.readBuffer(n)),this.parserMap.set(P.bool,n=>this.readFlag(n)),this.parserMap.set(P.float,n=>this.readFloat(n))}async iterate(e,n,r){return this.parseContainer(KI(e),n,r)}async parseContainer(e,n,r){const s={};for(;this.tokenizer.position<n;){let i;const o=this.tokenizer.position;try{i=await this.readElement()}catch(l){if(l instanceof ot)break;throw l}const a=e.container[i.id];if(a)switch(r.startNext(a)){case cr.ReadNext:if(i.id,Do(`Read element: name=${Di(a)}{id=0x${i.id.toString(16)}, container=${!!a.container}} at position=${o}`),a.container){const c=await this.parseContainer(a,i.len>=0?this.tokenizer.position+i.len:-1,r);a.multiple?(s[a.name]||(s[a.name]=[]),s[a.name].push(c)):s[a.name]=c,await r.elementValue(a,c,o)}else{const c=this.parserMap.get(a.value);if(typeof c=="function"){const d=await c(i);s[a.name]=d,await r.elementValue(a,d,o)}}break;case cr.SkipElement:Do(`Go to next element: name=${Di(a)}, element.id=0x${i.id}, container=${!!a.container} at position=${o}`);break;case cr.IgnoreElement:Do(`Ignore element: name=${Di(a)}, element.id=0x${i.id}, container=${!!a.container} at position=${o}`),await this.tokenizer.ignore(i.len);break;case cr.SkipSiblings:Do(`Ignore remaining container, at: name=${Di(a)}, element.id=0x${i.id}, container=${!!a.container} at position=${o}`),await this.tokenizer.ignore(n-this.tokenizer.position);break;case cr.TerminateParsing:return Do(`Terminate parsing at element: name=${Di(a)}, element.id=0x${i.id}, container=${!!a.container} at position=${o}`),s}else switch(i.id){case 236:this.padding+=i.len,await this.tokenizer.ignore(i.len);break;default:Do(`parseEbml: parent=${Di(e)}, unknown child: id=${i.id.toString(16)} at position=${o}`),this.padding+=i.len,await this.tokenizer.ignore(i.len)}}return s}async readVintData(e){const n=await this.tokenizer.peekNumber(fe);let r=128,s=1;for(;!(n&r);){if(s>e)throw new Error("VINT value exceeding maximum size");++s,r>>=1}const i=new Uint8Array(s);return await this.tokenizer.readBuffer(i),i}async readElement(){const e=await this.readVintData(this.ebmlMaxIDLength),n=await this.readVintData(this.ebmlMaxSizeLength);return n[0]^=128>>n.length-1,{id:$p(e,e.length),len:$p(n,n.length)}}async readFloat(e){switch(e.len){case 0:return 0;case 4:return this.tokenizer.readNumber(PI);case 8:return this.tokenizer.readNumber(P0);case 10:return this.tokenizer.readNumber(P0);default:throw new Error(`Invalid IEEE-754 float length: ${e.len}`)}}async readFlag(e){return await this.readUint(e)===1}async readUint(e){const n=await this.readBuffer(e);return $p(n,e.len)}async readString(e){return(await this.tokenizer.readToken(new re(e.len,"utf-8"))).replace(/\x00.*$/g,"")}async readBuffer(e){const n=new Uint8Array(e.len);return await this.tokenizer.readBuffer(n),n}}function $p(t,e){return Number(uF(t,e))}function uF(t,e){const n=new Uint8Array(8),r=t.subarray(0,e);try{return n.set(r,8-e),qv.get(n,0)}catch{return BigInt(-1)}}function KI(t){return t.container&&Object.keys(t.container).map(e=>{const n=t.container[e];return n.id=Number.parseInt(e),n}).forEach(e=>{e.parent=t,KI(e)}),t}function Di(t){let e="";return t.parent&&t.parent.name!=="dtd"&&(e+=`${Di(t.parent)}/`),e+t.name}const ed=je("music-metadata:parser:matroska");class dF extends Vn{constructor(){super(...arguments),this.seekHeadOffset=0,this.flagUseIndexToSkipClusters=!1}init(e,n,r){return super.init(e,n,r),this.flagUseIndexToSkipClusters=r.mkvUseIndex??!1,this}async parse(){const e=this.tokenizer.fileInfo.size??Number.MAX_SAFE_INTEGER,n=new cF(this.tokenizer);ed("Initializing DTD end MatroskaIterator"),await n.iterate(lF,e,{startNext:r=>{switch(r.id){case 475249515:return ed(`Skip element: name=${r.name}, id=0x${r.id.toString(16)}`),cr.IgnoreElement;case 524531317:if(this.flagUseIndexToSkipClusters&&this.seekHead){const s=this.seekHead.seek.find(i=>i.position+this.seekHeadOffset>this.tokenizer.position);if(s){const i=s.position+this.seekHeadOffset-this.tokenizer.position;return ed(`Use index to go to next position, ignoring ${i} bytes`),this.tokenizer.ignore(i),cr.SkipElement}}return cr.IgnoreElement;default:return cr.ReadNext}},elementValue:async(r,s,i)=>{switch(ed(`Received: name=${r.name}, value=${s}`),r.id){case 17026:this.metadata.setFormat("container",`EBML/${s}`);break;case 290298740:this.seekHead=s,this.seekHeadOffset=i;break;case 357149030:{const o=s,a=o.timecodeScale?o.timecodeScale:1e6;if(typeof o.duration=="number"){const l=o.duration*a/1e9;await this.addTag("segment:title",o.title),this.metadata.setFormat("duration",Number(l))}}break;case 374648427:{const o=s;if(o!=null&&o.entries){o.entries.forEach(l=>{const c={codecName:l.codecID.replace("A_","").replace("V_",""),codecSettings:l.codecSettings,flagDefault:l.flagDefault,flagLacing:l.flagLacing,flagEnabled:l.flagEnabled,language:l.language,name:l.name,type:l.trackType,audio:l.audio,video:l.video};this.metadata.addStreamInfo(c)});const a=o.entries.filter(l=>l.trackType===no.audio).reduce((l,c)=>!l||c.flagDefault&&!l.flagDefault||c.trackNumber<l.trackNumber?c:l,null);a&&(this.metadata.setFormat("codec",a.codecID.replace("A_","")),this.metadata.setFormat("sampleRate",a.audio.samplingFrequency),this.metadata.setFormat("numberOfChannels",a.audio.channels))}}break;case 307544935:{const o=s;await Promise.all(o.tag.map(async a=>{const l=a.target,c=l!=null&&l.targetTypeValue?j0[l.targetTypeValue]:l!=null&&l.targetType?l.targetType:"track";await Promise.all(a.simpleTags.map(async d=>{const h=d.string?d.string:d.binary;await this.addTag(`${c}:${d.name}`,h)}))}))}break;case 423732329:{const o=s;await Promise.all(o.attachedFiles.filter(a=>a.mimeType.startsWith("image/")).map(a=>this.addTag("picture",{data:a.data,format:a.mimeType,description:a.description,name:a.name})))}break}}})}async addTag(e,n){await this.metadata.addTag("matroska",e,n)}}const Ah=je("music-metadata:parser:factory");function hF(t){const e=Xv.parse(t),n=uM(e.type);return{type:n.type,subtype:n.subtype,suffix:n.suffix,parameters:e.parameters}}async function fF(t,e){const{mimeType:n,path:r,url:s}=t.fileInfo,i=XI(n)||U0(r)||U0(s);return i||Ah(`No parser found for MIME-type / extension: ${n}`),mF(t,i,e)}async function mF(t,e,n){if(!e){Ah("Guess parser on content...");const i=new Uint8Array(4100);if(await t.peekBuffer(i,{mayBeLess:!0}),t.fileInfo.path&&(e=U0(t.fileInfo.path)),!e){const o=await MI(i);if(!o)throw new Error("Failed to determine audio format");if(Ah(`Guessed file type is mime=${o.mime}, extension=${o.ext}`),e=XI(o.mime),!e)throw new Error(`Guessed MIME-type not supported: ${o.mime}`)}}const r=await pF(e),s=new UM(n);return await r.init(s,t,n??{}).parse(),s.toCommonMetadata()}function U0(t){if(!t)return;switch(gF(t).toLocaleLowerCase()||t){case".mp2":case".mp3":case".m2a":case".aac":return"mpeg";case".ape":return"apev2";case".mp4":case".m4a":case".m4b":case".m4pa":case".m4v":case".m4r":case".3gp":return"mp4";case".wma":case".wmv":case".asf":return"asf";case".flac":return"flac";case".ogg":case".ogv":case".oga":case".ogm":case".ogx":case".opus":case".spx":return"ogg";case".aif":case".aiff":case".aifc":return"aiff";case".wav":case".bwf":return"riff";case".wv":case".wvp":return"wavpack";case".mpc":return"musepack";case".dsf":return"dsf";case".dff":return"dsdiff";case".mka":case".mkv":case".mk3d":case".mks":case".webm":return"matroska"}}async function pF(t){switch(t){case"aiff":return new QM;case"adts":case"mpeg":return new ML;case"apev2":return new Tr;case"asf":return new lL;case"dsf":return new oF;case"dsdiff":return new aF;case"flac":return new dL;case"mp4":return new Ih;case"musepack":return new HL;case"ogg":return new Ff;case"riff":return new tF;case"wavpack":return new rF;case"matroska":return new dF;default:throw new Error(`Unknown parser type: ${t}`)}}function gF(t){const e=t.lastIndexOf(".");return e===-1?"":t.slice(e)}function XI(t){let e;if(!t)return;try{e=hF(t)}catch{Ah(`Invalid HTTP Content-Type header value: ${t}`);return}const n=e.subtype.indexOf("x-")===0?e.subtype.substring(2):e.subtype;switch(e.type){case"audio":switch(n){case"mp3":case"mpeg":return"mpeg";case"aac":case"aacp":return"adts";case"flac":return"flac";case"ape":case"monkeys-audio":return"apev2";case"mp4":case"m4a":return"mp4";case"ogg":case"opus":case"speex":return"ogg";case"ms-wma":case"ms-wmv":case"ms-asf":return"asf";case"aiff":case"aif":case"aifc":return"aiff";case"vnd.wave":case"wav":case"wave":return"riff";case"wavpack":return"wavpack";case"musepack":return"musepack";case"matroska":case"webm":return"matroska";case"dsf":return"dsf"}break;case"video":switch(n){case"ms-asf":case"ms-wmv":return"asf";case"m4v":case"mp4":return"mp4";case"ogg":return"ogg";case"matroska":case"webm":return"matroska"}break;case"application":switch(n){case"vnd.ms-asf":return"asf";case"ogg":return"ogg"}break}}async function yF(t,e={}){const n={mimeType:t.type,size:t.size};return t instanceof File&&(n.path=t.name),vF(t.stream(),n,e)}function vF(t,e,n={}){return xF(AI(t,{fileInfo:typeof e=="string"?{mimeType:e}:e}),n)}function xF(t,e){return fF(t,e)}let Rh=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");function QI(t,e){return function(){return t.apply(e,arguments)}}const{toString:wF}=Object.prototype,{getPrototypeOf:nx}=Object,$f=(t=>e=>{const n=wF.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ur=t=>(t=t.toLowerCase(),e=>$f(e)===t),Bf=t=>e=>typeof e===t,{isArray:Xa}=Array,yc=Bf("undefined");function _F(t){return t!==null&&!yc(t)&&t.constructor!==null&&!yc(t.constructor)&&Zn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const YI=Ur("ArrayBuffer");function EF(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&YI(t.buffer),e}const SF=Bf("string"),Zn=Bf("function"),JI=Bf("number"),zf=t=>t!==null&&typeof t=="object",bF=t=>t===!0||t===!1,Ad=t=>{if($f(t)!=="object")return!1;const e=nx(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},TF=Ur("Date"),kF=Ur("File"),IF=Ur("Blob"),CF=Ur("FileList"),AF=t=>zf(t)&&Zn(t.pipe),RF=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Zn(t.append)&&((e=$f(t))==="formdata"||e==="object"&&Zn(t.toString)&&t.toString()==="[object FormData]"))},PF=Ur("URLSearchParams"),NF=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Jc(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Xa(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function ZI(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const e2=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),t2=t=>!yc(t)&&t!==e2;function H0(){const{caseless:t}=t2(this)&&this||{},e={},n=(r,s)=>{const i=t&&ZI(e,s)||s;Ad(e[i])&&Ad(r)?e[i]=H0(e[i],r):Ad(r)?e[i]=H0({},r):Xa(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Jc(arguments[r],n);return e}const jF=(t,e,n,{allOwnKeys:r}={})=>(Jc(e,(s,i)=>{n&&Zn(s)?t[i]=QI(s,n):t[i]=s},{allOwnKeys:r}),t),DF=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),OF=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},MF=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&nx(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},LF=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},FF=t=>{if(!t)return null;if(Xa(t))return t;let e=t.length;if(!JI(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},$F=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&nx(Uint8Array)),BF=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},zF=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},VF=Ur("HTMLFormElement"),UF=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),gE=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),HF=Ur("RegExp"),n2=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Jc(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},WF=t=>{n2(t,(e,n)=>{if(Zn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Zn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},qF=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Xa(t)?r(t):r(String(t).split(e)),n},GF=()=>{},KF=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Bp="abcdefghijklmnopqrstuvwxyz",yE="0123456789",r2={DIGIT:yE,ALPHA:Bp,ALPHA_DIGIT:Bp+Bp.toUpperCase()+yE},XF=(t=16,e=r2.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function QF(t){return!!(t&&Zn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const YF=t=>{const e=new Array(10),n=(r,s)=>{if(zf(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Xa(r)?[]:{};return Jc(r,(o,a)=>{const l=n(o,s+1);!yc(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},JF=Ur("AsyncFunction"),ZF=t=>t&&(zf(t)||Zn(t))&&Zn(t.then)&&Zn(t.catch),N={isArray:Xa,isArrayBuffer:YI,isBuffer:_F,isFormData:RF,isArrayBufferView:EF,isString:SF,isNumber:JI,isBoolean:bF,isObject:zf,isPlainObject:Ad,isUndefined:yc,isDate:TF,isFile:kF,isBlob:IF,isRegExp:HF,isFunction:Zn,isStream:AF,isURLSearchParams:PF,isTypedArray:$F,isFileList:CF,forEach:Jc,merge:H0,extend:jF,trim:NF,stripBOM:DF,inherits:OF,toFlatObject:MF,kindOf:$f,kindOfTest:Ur,endsWith:LF,toArray:FF,forEachEntry:BF,matchAll:zF,isHTMLForm:VF,hasOwnProperty:gE,hasOwnProp:gE,reduceDescriptors:n2,freezeMethods:WF,toObjectSet:qF,toCamelCase:UF,noop:GF,toFiniteNumber:KF,findKey:ZI,global:e2,isContextDefined:t2,ALPHABET:r2,generateString:XF,isSpecCompliantForm:QF,toJSONObject:YF,isAsyncFn:JF,isThenable:ZF};function we(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}N.inherits(we,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:N.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const s2=we.prototype,i2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{i2[t]={value:t}});Object.defineProperties(we,i2);Object.defineProperty(s2,"isAxiosError",{value:!0});we.from=(t,e,n,r,s,i)=>{const o=Object.create(s2);return N.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),we.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const e6=null;function W0(t){return N.isPlainObject(t)||N.isArray(t)}function o2(t){return N.endsWith(t,"[]")?t.slice(0,-2):t}function vE(t,e,n){return t?t.concat(e).map(function(s,i){return s=o2(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function t6(t){return N.isArray(t)&&!t.some(W0)}const n6=N.toFlatObject(N,{},null,function(e){return/^is[A-Z]/.test(e)});function Vf(t,e,n){if(!N.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=N.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,_){return!N.isUndefined(_[y])});const r=n.metaTokens,s=n.visitor||d,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&N.isSpecCompliantForm(e);if(!N.isFunction(s))throw new TypeError("visitor must be a function");function c(v){if(v===null)return"";if(N.isDate(v))return v.toISOString();if(!l&&N.isBlob(v))throw new we("Blob is not supported. Use a Buffer instead.");return N.isArrayBuffer(v)||N.isTypedArray(v)?l&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function d(v,y,_){let x=v;if(v&&!_&&typeof v=="object"){if(N.endsWith(y,"{}"))y=r?y:y.slice(0,-2),v=JSON.stringify(v);else if(N.isArray(v)&&t6(v)||(N.isFileList(v)||N.endsWith(y,"[]"))&&(x=N.toArray(v)))return y=o2(y),x.forEach(function(w,E){!(N.isUndefined(w)||w===null)&&e.append(o===!0?vE([y],E,i):o===null?y:y+"[]",c(w))}),!1}return W0(v)?!0:(e.append(vE(_,y,i),c(v)),!1)}const h=[],m=Object.assign(n6,{defaultVisitor:d,convertValue:c,isVisitable:W0});function p(v,y){if(!N.isUndefined(v)){if(h.indexOf(v)!==-1)throw Error("Circular reference detected in "+y.join("."));h.push(v),N.forEach(v,function(x,g){(!(N.isUndefined(x)||x===null)&&s.call(e,x,N.isString(g)?g.trim():g,y,m))===!0&&p(x,y?y.concat(g):[g])}),h.pop()}}if(!N.isObject(t))throw new TypeError("data must be an object");return p(t),e}function xE(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function rx(t,e){this._pairs=[],t&&Vf(t,this,e)}const a2=rx.prototype;a2.append=function(e,n){this._pairs.push([e,n])};a2.toString=function(e){const n=e?function(r){return e.call(this,r,xE)}:xE;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function r6(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function l2(t,e,n){if(!e)return t;const r=n&&n.encode||r6,s=n&&n.serialize;let i;if(s?i=s(e,n):i=N.isURLSearchParams(e)?e.toString():new rx(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class s6{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){N.forEach(this.handlers,function(r){r!==null&&e(r)})}}const wE=s6,c2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},i6=typeof URLSearchParams<"u"?URLSearchParams:rx,o6=typeof FormData<"u"?FormData:null,a6=typeof Blob<"u"?Blob:null,l6=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),c6=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),kr={isBrowser:!0,classes:{URLSearchParams:i6,FormData:o6,Blob:a6},isStandardBrowserEnv:l6,isStandardBrowserWebWorkerEnv:c6,protocols:["http","https","file","blob","url","data"]};function u6(t,e){return Vf(t,new kr.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return kr.isNode&&N.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function d6(t){return N.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function h6(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function u2(t){function e(n,r,s,i){let o=n[i++];const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&N.isArray(s)?s.length:o,l?(N.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!N.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&N.isArray(s[o])&&(s[o]=h6(s[o])),!a)}if(N.isFormData(t)&&N.isFunction(t.entries)){const n={};return N.forEachEntry(t,(r,s)=>{e(d6(r),s,n,0)}),n}return null}function f6(t,e,n){if(N.isString(t))try{return(e||JSON.parse)(t),N.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const sx={transitional:c2,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=N.isObject(e);if(i&&N.isHTMLForm(e)&&(e=new FormData(e)),N.isFormData(e))return s&&s?JSON.stringify(u2(e)):e;if(N.isArrayBuffer(e)||N.isBuffer(e)||N.isStream(e)||N.isFile(e)||N.isBlob(e))return e;if(N.isArrayBufferView(e))return e.buffer;if(N.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return u6(e,this.formSerializer).toString();if((a=N.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Vf(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),f6(e)):e}],transformResponse:[function(e){const n=this.transitional||sx.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&N.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?we.from(a,we.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:kr.classes.FormData,Blob:kr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};N.forEach(["delete","get","head","post","put","patch"],t=>{sx.headers[t]={}});const ix=sx,m6=N.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),p6=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&m6[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},_E=Symbol("internals");function pl(t){return t&&String(t).trim().toLowerCase()}function Rd(t){return t===!1||t==null?t:N.isArray(t)?t.map(Rd):String(t)}function g6(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const y6=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function zp(t,e,n,r,s){if(N.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!N.isString(e)){if(N.isString(r))return e.indexOf(r)!==-1;if(N.isRegExp(r))return r.test(e)}}function v6(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function x6(t,e){const n=N.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class Uf{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,c){const d=pl(l);if(!d)throw new Error("header name must be a non-empty string");const h=N.findKey(s,d);(!h||s[h]===void 0||c===!0||c===void 0&&s[h]!==!1)&&(s[h||l]=Rd(a))}const o=(a,l)=>N.forEach(a,(c,d)=>i(c,d,l));return N.isPlainObject(e)||e instanceof this.constructor?o(e,n):N.isString(e)&&(e=e.trim())&&!y6(e)?o(p6(e),n):e!=null&&i(n,e,r),this}get(e,n){if(e=pl(e),e){const r=N.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return g6(s);if(N.isFunction(n))return n.call(this,s,r);if(N.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=pl(e),e){const r=N.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||zp(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=pl(o),o){const a=N.findKey(r,o);a&&(!n||zp(r,r[a],a,n))&&(delete r[a],s=!0)}}return N.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||zp(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return N.forEach(this,(s,i)=>{const o=N.findKey(r,i);if(o){n[o]=Rd(s),delete n[i];return}const a=e?v6(i):String(i).trim();a!==i&&delete n[i],n[a]=Rd(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return N.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&N.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[_E]=this[_E]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=pl(o);r[a]||(x6(s,o),r[a]=!0)}return N.isArray(e)?e.forEach(i):i(e),this}}Uf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);N.reduceDescriptors(Uf.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});N.freezeMethods(Uf);const is=Uf;function Vp(t,e){const n=this||ix,r=e||n,s=is.from(r.headers);let i=r.data;return N.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function d2(t){return!!(t&&t.__CANCEL__)}function Zc(t,e,n){we.call(this,t??"canceled",we.ERR_CANCELED,e,n),this.name="CanceledError"}N.inherits(Zc,we,{__CANCEL__:!0});function w6(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new we("Request failed with status code "+n.status,[we.ERR_BAD_REQUEST,we.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const _6=kr.isStandardBrowserEnv?function(){return{write:function(n,r,s,i,o,a){const l=[];l.push(n+"="+encodeURIComponent(r)),N.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),N.isString(i)&&l.push("path="+i),N.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function E6(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function S6(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function h2(t,e){return t&&!E6(e)?S6(t,e):e}const b6=kr.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let o=i;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){const a=N.isString(o)?s(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function T6(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function k6(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[i];o||(o=c),n[s]=l,r[s]=c;let h=i,m=0;for(;h!==s;)m+=n[h++],h=h%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const p=d&&c-d;return p?Math.round(m*1e3/p):void 0}}function EE(t,e){let n=0;const r=k6(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-n,l=r(a),c=i<=o;n=i;const d={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-i)/l:void 0,event:s};d[e?"download":"upload"]=!0,t(d)}}const I6=typeof XMLHttpRequest<"u",C6=I6&&function(t){return new Promise(function(n,r){let s=t.data;const i=is.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let c;N.isFormData(s)&&(kr.isStandardBrowserEnv||kr.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?N.isString(c=i.getContentType())&&i.setContentType(c.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let d=new XMLHttpRequest;if(t.auth){const v=t.auth.username||"",y=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(v+":"+y))}const h=h2(t.baseURL,t.url);d.open(t.method.toUpperCase(),l2(h,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function m(){if(!d)return;const v=is.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),_={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:v,config:t,request:d};w6(function(g){n(g),l()},function(g){r(g),l()},_),d=null}if("onloadend"in d?d.onloadend=m:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(m)},d.onabort=function(){d&&(r(new we("Request aborted",we.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new we("Network Error",we.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let y=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const _=t.transitional||c2;t.timeoutErrorMessage&&(y=t.timeoutErrorMessage),r(new we(y,_.clarifyTimeoutError?we.ETIMEDOUT:we.ECONNABORTED,t,d)),d=null},kr.isStandardBrowserEnv){const v=b6(h)&&t.xsrfCookieName&&_6.read(t.xsrfCookieName);v&&i.set(t.xsrfHeaderName,v)}s===void 0&&i.setContentType(null),"setRequestHeader"in d&&N.forEach(i.toJSON(),function(y,_){d.setRequestHeader(_,y)}),N.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),o&&o!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",EE(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",EE(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=v=>{d&&(r(!v||v.type?new Zc(null,t,d):v),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const p=T6(h);if(p&&kr.protocols.indexOf(p)===-1){r(new we("Unsupported protocol "+p+":",we.ERR_BAD_REQUEST,t));return}d.send(s||null)})},q0={http:e6,xhr:C6};N.forEach(q0,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const SE=t=>`- ${t}`,A6=t=>N.isFunction(t)||t===null||t===!1,f2={getAdapter:t=>{t=N.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!A6(n)&&(r=q0[(o=String(n)).toLowerCase()],r===void 0))throw new we(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(SE).join(`
`):" "+SE(i[0]):"as no adapter specified";throw new we("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:q0};function Up(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Zc(null,t)}function bE(t){return Up(t),t.headers=is.from(t.headers),t.data=Vp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),f2.getAdapter(t.adapter||ix.adapter)(t).then(function(r){return Up(t),r.data=Vp.call(t,t.transformResponse,r),r.headers=is.from(r.headers),r},function(r){return d2(r)||(Up(t),r&&r.response&&(r.response.data=Vp.call(t,t.transformResponse,r.response),r.response.headers=is.from(r.response.headers))),Promise.reject(r)})}const TE=t=>t instanceof is?t.toJSON():t;function Aa(t,e){e=e||{};const n={};function r(c,d,h){return N.isPlainObject(c)&&N.isPlainObject(d)?N.merge.call({caseless:h},c,d):N.isPlainObject(d)?N.merge({},d):N.isArray(d)?d.slice():d}function s(c,d,h){if(N.isUndefined(d)){if(!N.isUndefined(c))return r(void 0,c,h)}else return r(c,d,h)}function i(c,d){if(!N.isUndefined(d))return r(void 0,d)}function o(c,d){if(N.isUndefined(d)){if(!N.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,h){if(h in e)return r(c,d);if(h in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d)=>s(TE(c),TE(d),!0)};return N.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=l[d]||s,m=h(t[d],e[d],d);N.isUndefined(m)&&h!==a||(n[d]=m)}),n}const m2="1.6.0",ox={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{ox[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const kE={};ox.transitional=function(e,n,r){function s(i,o){return"[Axios v"+m2+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new we(s(o," has been removed"+(n?" in "+n:"")),we.ERR_DEPRECATED);return n&&!kE[o]&&(kE[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};function R6(t,e,n){if(typeof t!="object")throw new we("options must be an object",we.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new we("option "+i+" must be "+l,we.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new we("Unknown option "+i,we.ERR_BAD_OPTION)}}const G0={assertOptions:R6,validators:ox},ks=G0.validators;class Ph{constructor(e){this.defaults=e,this.interceptors={request:new wE,response:new wE}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Aa(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&G0.assertOptions(r,{silentJSONParsing:ks.transitional(ks.boolean),forcedJSONParsing:ks.transitional(ks.boolean),clarifyTimeoutError:ks.transitional(ks.boolean)},!1),s!=null&&(N.isFunction(s)?n.paramsSerializer={serialize:s}:G0.assertOptions(s,{encode:ks.function,serialize:ks.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&N.merge(i.common,i[n.method]);i&&N.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),n.headers=is.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const c=[];this.interceptors.response.forEach(function(y){c.push(y.fulfilled,y.rejected)});let d,h=0,m;if(!l){const v=[bE.bind(this),void 0];for(v.unshift.apply(v,a),v.push.apply(v,c),m=v.length,d=Promise.resolve(n);h<m;)d=d.then(v[h++],v[h++]);return d}m=a.length;let p=n;for(h=0;h<m;){const v=a[h++],y=a[h++];try{p=v(p)}catch(_){y.call(this,_);break}}try{d=bE.call(this,p)}catch(v){return Promise.reject(v)}for(h=0,m=c.length;h<m;)d=d.then(c[h++],c[h++]);return d}getUri(e){e=Aa(this.defaults,e);const n=h2(e.baseURL,e.url);return l2(n,e.params,e.paramsSerializer)}}N.forEach(["delete","get","head","options"],function(e){Ph.prototype[e]=function(n,r){return this.request(Aa(r||{},{method:e,url:n,data:(r||{}).data}))}});N.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(Aa(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Ph.prototype[e]=n(),Ph.prototype[e+"Form"]=n(!0)});const Pd=Ph;class ax{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new Zc(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new ax(function(s){e=s}),cancel:e}}}const P6=ax;function N6(t){return function(n){return t.apply(null,n)}}function j6(t){return N.isObject(t)&&t.isAxiosError===!0}const K0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(K0).forEach(([t,e])=>{K0[e]=t});const D6=K0;function p2(t){const e=new Pd(t),n=QI(Pd.prototype.request,e);return N.extend(n,Pd.prototype,e,{allOwnKeys:!0}),N.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return p2(Aa(t,s))},n}const mt=p2(ix);mt.Axios=Pd;mt.CanceledError=Zc;mt.CancelToken=P6;mt.isCancel=d2;mt.VERSION=m2;mt.toFormData=Vf;mt.AxiosError=we;mt.Cancel=mt.CanceledError;mt.all=function(e){return Promise.all(e)};mt.spread=N6;mt.isAxiosError=j6;mt.mergeConfig=Aa;mt.AxiosHeaders=is;mt.formToJSON=t=>u2(N.isHTMLForm(t)?new FormData(t):t);mt.getAdapter=f2.getAdapter;mt.HttpStatusCode=D6;mt.default=mt;const O6=mt,g2=O6.create({baseURL:{}.VITE_ENDPOINT||"https://express-zingmp3-awx6.vercel.app"}),M6=t=>new Date(t.toDate().getTime()).toLocaleString(),Nr=()=>JSON.parse(localStorage.getItem("HD-MP3")||"{}"),bt=(t,e)=>{const n=Nr();return n[t]=e,localStorage.setItem("HD-MP3",JSON.stringify(n))},lx=t=>(n=>n.toLocaleLowerCase().replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ/g,"a").replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e").replace(/ì|í|ị|ỉ|ĩ/g,"i").replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ/g,"o").replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u").replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y").replace(/đ/g,"d"))(t).toLocaleLowerCase().replaceAll(/[\W_]/g,"")+"_"+Rh(4),L6=async t=>{if(!t)return;const e=await yF(t);if(!e)return;const{common:{title:n,artist:r}}=e,s={name:"",singer:"",image:null};return s.name=n||t.name,s.singer=r||"...",s},y2=async t=>{const e=Date.now(),n=await g2.post("/api/image/encode",t);let r;n&&(r=n.data.encode);const s=(Date.now()-e)/1e3;return console.log(">>> api: get blurHash encode finished after",s),{encode:r}},F6=async t=>{const e=new FormData;e.append("file",t);const n=Date.now(),r=await g2.post("/api/image/optimize",e,{responseType:"blob"});let s;r&&(s=r.data);const i=(Date.now()-n)/1e3;return console.log(">>> api: optimize finished after",i),s},Ra=t=>{if(!t)return"";let e=0,n=+t.toFixed(0);for(;n>=60;)n-=60,e++;return e<10?n>=10?`0${e}:${n}`:`0${e}:0${n}`:n>=10?`${e}:${n}`:`${e}:0${n}`},$6=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);if(n!=-1)return e[n]=t,n},cx=({...t})=>({...{name:"",singer:"",image_url:"",song_url:"",by:"",duration:0,lyric_id:"",image_file_path:"",song_file_path:"",id:"",song_in:"",blurhash_encode:"",size:0},...t}),ux=({...t})=>({...{id:"",name:"",song_ids:[],by:"",image_url:"",blurhash_encode:""},...t}),dx=async t=>{await new Promise(e=>setTimeout(e,t))},B6=(t,e,n,r,s)=>{if(!s||!r){console.log("song list item lack of props");return}e||n&&n(!0);let i=[...r];const o=i.indexOf(t);o===-1?i.push(t):i.splice(o,1),s(i),i.length||n&&n(!1)};let X0=vh[0];const z6=Nr(),IE=z6.theme;IE&&vh.forEach(t=>{t.id===IE&&(X0=t)});const v2={theme:{...X0,alpha:X0.type==="light"?"[#000]/[.1]":"[#fff]/[.1]"},isOnMobile:window.innerWidth<800,isDev:!1},V6=(t,e)=>{switch(e.type){case 0:{const n=e.payload.theme;return{...t,theme:{...n,alpha:n.type==="dark"?"[#fff]/[.1]":"[#000]/[.1]"}}}}},U6=()=>{const[t,e]=f.useReducer(V6,v2),n=f.useCallback(r=>{console.log("set theme"),e({type:0,payload:{theme:r}})},[]);return{state:t,setTheme:n}},H6={state:v2,setTheme:()=>{}},x2=f.createContext(H6),W6=({children:t})=>u.jsx(x2.Provider,{value:U6(),children:t}),ne=()=>{const{state:{...t},...e}=f.useContext(x2);return{...t,...e}};function Je({className:t}){const{theme:e}=ne();return u.jsx("div",{className:`animate-pulse rounded-[4px] bg-${e.alpha} ${t}`})}const Hf=[...Array(4).keys()].map(t=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Je,{className:"h-[18px] w-[18px]"}),u.jsx(Je,{className:"h-[54px] w-[54px] ml-[10px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Je,{className:"h-[20px] mb-[5px] w-[150px]"}),u.jsx(Je,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},t)),w2=[...Array(1).keys()].map(t=>u.jsx(Je,{className:"w-full h-[40px] mb-[10px]"},t)),q6=[...Array(2).keys()].map(t=>u.jsxs("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:[u.jsx(Je,{className:"pt-[100%] rounded-[8px]"}),u.jsx(Je,{className:"h-[22px] mt-[6px] w-[50%]"})]},t));var G6=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],bl=t=>{let e=0;for(let n=0;n<t.length;n++){let r=t[n],s=G6.indexOf(r);e=e*83+s}return e},Hp=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},Wp=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},K6=t=>t<0?-1:1,qp=(t,e)=>K6(t)*Math.pow(Math.abs(t),e),CE=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},X6=t=>{if(!t||t.length<6)throw new CE("The blurhash string must be at least 6 characters");let e=bl(t[0]),n=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*n)throw new CE(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*n}`)},Q6=t=>{let e=t>>16,n=t>>8&255,r=t&255;return[Hp(e),Hp(n),Hp(r)]},Y6=(t,e)=>{let n=Math.floor(t/361),r=Math.floor(t/19)%19,s=t%19;return[qp((n-9)/9,2)*e,qp((r-9)/9,2)*e,qp((s-9)/9,2)*e]},J6=(t,e,n,r)=>{X6(t),r=r|1;let s=bl(t[0]),i=Math.floor(s/9)+1,o=s%9+1,a=(bl(t[1])+1)/166,l=new Array(o*i);for(let h=0;h<l.length;h++)if(h===0){let m=bl(t.substring(2,6));l[h]=Q6(m)}else{let m=bl(t.substring(4+h*2,6+h*2));l[h]=Y6(m,a*r)}let c=e*4,d=new Uint8ClampedArray(c*n);for(let h=0;h<n;h++)for(let m=0;m<e;m++){let p=0,v=0,y=0;for(let w=0;w<i;w++)for(let E=0;E<o;E++){let S=Math.cos(Math.PI*m*E/e)*Math.cos(Math.PI*h*w/n),k=l[E+w*o];p+=k[0]*S,v+=k[1]*S,y+=k[2]*S}let _=Wp(p),x=Wp(v),g=Wp(y);d[4*m+0+h*c]=_,d[4*m+1+h*c]=x,d[4*m+2+h*c]=g,d[4*m+3+h*c]=255}return d},Z6=J6,e$=Object.defineProperty,t$=Object.defineProperties,n$=Object.getOwnPropertyDescriptors,Nh=Object.getOwnPropertySymbols,_2=Object.prototype.hasOwnProperty,E2=Object.prototype.propertyIsEnumerable,AE=(t,e,n)=>e in t?e$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Q0=(t,e)=>{for(var n in e||(e={}))_2.call(e,n)&&AE(t,n,e[n]);if(Nh)for(var n of Nh(e))E2.call(e,n)&&AE(t,n,e[n]);return t},Y0=(t,e)=>t$(t,n$(e)),S2=(t,e)=>{var n={};for(var r in t)_2.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Nh)for(var r of Nh(t))e.indexOf(r)<0&&E2.call(t,r)&&(n[r]=t[r]);return n},b2=class extends f.PureComponent{constructor(){super(...arguments),this.canvas=null,this.handleRef=e=>{this.canvas=e,this.draw()},this.draw=()=>{let{hash:e,height:n,punch:r,width:s}=this.props;if(this.canvas){let i=Z6(e,s,n,r),o=this.canvas.getContext("2d"),a=o.createImageData(s,n);a.data.set(i),o.putImageData(a,0,0)}}}componentDidUpdate(){this.draw()}render(){let e=this.props,{hash:n,height:r,width:s}=e,i=S2(e,["hash","height","width"]);return f.createElement("canvas",Y0(Q0({},i),{height:r,width:s,ref:this.handleRef}))}};b2.defaultProps={height:128,width:128};var r$={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},T2=class extends f.PureComponent{componentDidUpdate(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")}render(){let e=this.props,{hash:n,height:r,width:s,punch:i,resolutionX:o,resolutionY:a,style:l}=e,c=S2(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return f.createElement("div",Y0(Q0({},c),{style:Y0(Q0({display:"inline-block",height:r,width:s},l),{position:"relative"})}),f.createElement(b2,{hash:n,height:a,width:o,punch:i,style:r$}))}};T2.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32};const s$="/HD-MP3/assets/logo-17dffbdd.png";function ws({src:t,classNames:e,blurHashEncode:n,onError:r}){const[s,i]=f.useState(!1),o=f.useRef(null),a=()=>{i(!0),t&&t!=null&&t.includes("blob")&&URL.revokeObjectURL(t)},l=()=>{const d=o.current;d.src="https://placehold.co/100",i(!0)},c=()=>{r?(r(),l()):l()};return u.jsxs(u.Fragment,{children:[!s&&u.jsx(u.Fragment,{children:n?u.jsx(T2,{hash:n,height:"100%",width:"100%"}):u.jsx(Je,{className:"w-full h-0"})}),u.jsx("img",{onLoad:a,onError:c,className:`${e||""} w-full ${s?"":"hidden"}`,src:t||s$,ref:o})]})}const i$=({className:t,onClick:e,theme:n})=>u.jsx("div",{className:`w-full rounded-[8px] border ${n.type==="light"?"border-[#333]":"border-[#fff]"} relative`,children:u.jsx("div",{onClick:()=>e(),className:`${n==null?void 0:n.content_hover_text} ${t} cursor-pointer`,children:u.jsx(Y,{className:`absolute top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ${n.type==="light"?"text-[#333]":"text-[#fff]"}`,children:u.jsx(gh,{className:"w-[40px] max-[549px]:w-[30px]"})})})}),o$=gI("",{variants:{variant:{default:"py-[20px] px-[14px]",thin:"p-[6px]"}},defaultVariants:{variant:"default"}});function So({children:t,theme:e,className:n,color:r="container",variant:s}){const i={black:"bg-[#292929]",container:e.container,sidebar:e.side_bar_bg};return u.jsx("div",{className:`rounded-[6px]  ${e.type==="light"?"text-[#333]":"text-white"} ${i[r]} border-[1px] border-${e.alpha} ${o$({variant:s,className:n})}`,children:t})}function la({className:t,icon:e,label:n,to:r,arrowIcon:s,children:i,onClick:o}){return r?u.jsxs(Zs,{className:"w-full flex flex-row justify-between items-center "+t,to:r,children:[u.jsxs("div",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]}),i,s&&u.jsx("span",{children:s})]}):o?u.jsx("button",{onClick:o,className:"w-full flex flex-row justify-between items-center "+t,children:u.jsxs("p",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]})}):u.jsx("p",{children:"No onClick"})}const hx={userSongs:[],userPlaylists:[],adminSongs:[],adminPlaylists:[],initial:!1},a$=(t,e)=>{switch(e.type){case 8:{const n=e.payload;return{...t,...n,initial:!0}}case 2:{const{songs:n}=e.payload,r=[...t.userSongs,...n];return{...t,userSongs:r}}case 3:{const{song:n}=e.payload,r=[...t.userSongs],s=r.findIndex(i=>i.id===n.id);return s===-1?t:(r[s]=n,{...t,userSongs:r})}case 4:{const{playlist:n}=e.payload;return{...t,userPlaylists:[...t.userPlaylists,n]}}case 5:{const{playlist:n}=e.payload,r=[...t.userPlaylists],s=r.findIndex(i=>i.id===n.id);return s===-1?t:(r[s]=n,{...t,userPlaylists:r})}case 9:return hx;case 0:{const{songs:n}=e.payload;return{...t,userSongs:n}}case 6:{const{playlists:n}=e.payload;return{...t,userPlaylists:n}}default:return t}},l$=()=>{const[t,e]=f.useReducer(a$,hx),n=f.useCallback(d=>e({type:0,payload:{songs:d}}),[]),r=f.useCallback(d=>e({type:2,payload:{songs:d}}),[]),s=f.useCallback(d=>e({type:3,payload:{song:d}}),[]),i=f.useCallback(d=>e({type:4,payload:{playlist:d}}),[]),o=f.useCallback(d=>e({type:6,payload:{playlists:d}}),[]),a=f.useCallback(d=>e({type:5,payload:{playlist:d}}),[]),l=f.useCallback(()=>e({type:9}),[]),c=f.useCallback(d=>e({type:8,payload:d}),[]);return{state:t,resetSongPlaylistStore:l,setUserSongs:n,addUserSongs:r,addUserPlaylist:i,updateUserSong:s,updateUserPlaylist:a,initSongsContext:c,setUserPlaylists:o}},c$={state:hx,initSongsContext:()=>{},addUserPlaylist:()=>{},addUserSongs:()=>{},resetSongPlaylistStore:()=>{},setUserSongs:()=>{},updateUserPlaylist:()=>{},updateUserSong:()=>{},setUserPlaylists:()=>{}},k2=f.createContext(c$),u$=({children:t})=>u.jsx(k2.Provider,{value:l$(),children:t}),lt=()=>{const{state:{...t},...e}=f.useContext(k2);return{...t,...e}};function d$({data:t,theme:e,selectedSongs:n,active:r,onClick:s,isChecked:i,setSelectedSongs:o,setIsChecked:a,inProcess:l},c){const d=f.useCallback(()=>n?(n==null?void 0:n.indexOf(t))!=-1:!1,[n]),h=p=>{!o||!n||!a||i!==void 0&&B6(p,i,a,n,o)},m={button:`${e.content_bg} rounded-full`,songListButton:"mr-[10px] px-[5px]",itemContainer:`hover:bg-${e.alpha} item-container cursor-pointer transition-opacity duration-[.3s] border-b last:border-none border-${e.alpha} flex rounded-[4px] justify-between w-[100%] p-[10px] ${d()&&"bg-"+e.alpha}`,imageFrame:"w-[54px] h-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]"};return u.jsx(u.Fragment,{children:u.jsx("div",{ref:c,className:`${m.itemContainer} ${l?"pointer-events-none":""}`,children:u.jsxs("div",{className:"flex flex-row w-[100%]",children:[!l&&u.jsx(u.Fragment,{children:i?u.jsx("button",{onClick:()=>h(t),className:`${m.songListButton} text-[inherit]`,children:d()?u.jsx(Cd,{className:"w-[18px]"}):u.jsx(fc,{className:"w-[18px]"})}):u.jsx("button",{onClick:()=>h(t),className:`${m.songListButton} block`,children:u.jsx(fc,{className:"w-[18px] "})})}),u.jsxs("div",{className:"flex-grow flex",onClick:p=>i?h(t):s(p),children:[u.jsxs("div",{className:`${m.imageFrame} ${l?"ml-[28px]":""} `,children:[u.jsx(ws,{blurHashEncode:t.blurhash_encode,src:t.image_url}),r&&u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex songContainers-center items-center justify-center",children:u.jsx(jf,{className:"w-[28px] text-[#fff]"})})]}),u.jsxs("div",{className:`ml-[10px] ${l?"opacity-60":""}`,children:[u.jsx("h5",{className:`text-mg line-clamp-1 ${r&&e.content_text}`,children:t.name}),u.jsx("p",{className:"text-xs opacity-60 bg-blend-lighten line-clamp-1",children:t.singer})]}),l&&u.jsxs("p",{className:"ml-auto self-center flex",children:[u.jsx(ds,{className:"w-[20px] animate-spin mr-[4px]"}),"in process..."]})]})]})})})}const I2=f.forwardRef(d$);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},h$=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},A2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(m=64)),r.push(n[d],n[h],n[m],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(C2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):h$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new f$;const m=i<<2|a>>4;if(r.push(m),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const v=c<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class f$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const m$=function(t){const e=C2(t);return A2.encodeByteArray(e,!0)},jh=function(t){return m$(t).replace(/\./g,"")},R2=function(t){try{return A2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g$=()=>p$().__FIREBASE_DEFAULTS__,y$=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},v$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&R2(t[1]);return e&&JSON.parse(e)},Wf=()=>{try{return g$()||y$()||v$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},P2=t=>{var e,n;return(n=(e=Wf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},N2=t=>{const e=P2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},j2=()=>{var t;return(t=Wf())===null||t===void 0?void 0:t.config},D2=t=>{var e;return(e=Wf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[jh(JSON.stringify(n)),jh(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function w$(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function _$(){var t;const e=(t=Wf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function E$(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function S$(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function b$(){const t=Xt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function T$(){try{return typeof indexedDB=="object"}catch{return!1}}function k$(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I$="FirebaseError";class Hr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=I$,Object.setPrototypeOf(this,Hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eu.prototype.create)}}class eu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?C$(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Hr(s,a,r)}}function C$(t,e){return t.replace(A$,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const A$=/\{\$([^}]+)}/g;function R$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Dh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(RE(i)&&RE(o)){if(!Dh(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function RE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function P$(t,e){const n=new N$(t,e);return n.subscribe.bind(n)}class N${constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");j$(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Gp),s.error===void 0&&(s.error=Gp),s.complete===void 0&&(s.complete=Gp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function j$(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Gp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t){return t&&t._delegate?t._delegate:t}class ai{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let D$=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new x$;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(M$(e))try{this.getOrInitializeService({instanceIdentifier:Oi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oi){return this.instances.has(e)}getOptions(e=Oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:O$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Oi){return this.component?this.component.multipleInstances?e:Oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function O$(t){return t===Oi?void 0:t}function M$(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new D$(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const F$={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},$$=Ee.INFO,B$={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},z$=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=B$[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fx{constructor(e){this.name=e,this._logLevel=$$,this._logHandler=z$,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?F$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const V$=(t,e)=>e.some(n=>t instanceof n);let PE,NE;function U$(){return PE||(PE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function H$(){return NE||(NE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const M2=new WeakMap,J0=new WeakMap,L2=new WeakMap,Kp=new WeakMap,mx=new WeakMap;function W$(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ei(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&M2.set(n,t)}).catch(()=>{}),mx.set(e,t),e}function q$(t){if(J0.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});J0.set(t,e)}let Z0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return J0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||L2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ei(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function G$(t){Z0=t(Z0)}function K$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Xp(this),e,...n);return L2.set(r,e.sort?e.sort():[e]),ei(r)}:H$().includes(t)?function(...e){return t.apply(Xp(this),e),ei(M2.get(this))}:function(...e){return ei(t.apply(Xp(this),e))}}function X$(t){return typeof t=="function"?K$(t):(t instanceof IDBTransaction&&q$(t),V$(t,U$())?new Proxy(t,Z0):t)}function ei(t){if(t instanceof IDBRequest)return W$(t);if(Kp.has(t))return Kp.get(t);const e=X$(t);return e!==t&&(Kp.set(t,e),mx.set(e,t)),e}const Xp=t=>mx.get(t);function Q$(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ei(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ei(o.result),l.oldVersion,l.newVersion,ei(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Y$=["get","getKey","getAll","getAllKeys","count"],J$=["put","add","delete","clear"],Qp=new Map;function jE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qp.get(e))return Qp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=J$.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Y$.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Qp.set(e,i),i}G$(t=>({...t,get:(e,n,r)=>jE(e,n)||t.get(e,n,r),has:(e,n)=>!!jE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(e9(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function e9(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ey="@firebase/app",DE="0.9.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=new fx("@firebase/app"),t9="@firebase/app-compat",n9="@firebase/analytics-compat",r9="@firebase/analytics",s9="@firebase/app-check-compat",i9="@firebase/app-check",o9="@firebase/auth",a9="@firebase/auth-compat",l9="@firebase/database",c9="@firebase/database-compat",u9="@firebase/functions",d9="@firebase/functions-compat",h9="@firebase/installations",f9="@firebase/installations-compat",m9="@firebase/messaging",p9="@firebase/messaging-compat",g9="@firebase/performance",y9="@firebase/performance-compat",v9="@firebase/remote-config",x9="@firebase/remote-config-compat",w9="@firebase/storage",_9="@firebase/storage-compat",E9="@firebase/firestore",S9="@firebase/firestore-compat",b9="firebase",T9="10.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="[DEFAULT]",k9={[ey]:"fire-core",[t9]:"fire-core-compat",[r9]:"fire-analytics",[n9]:"fire-analytics-compat",[i9]:"fire-app-check",[s9]:"fire-app-check-compat",[o9]:"fire-auth",[a9]:"fire-auth-compat",[l9]:"fire-rtdb",[c9]:"fire-rtdb-compat",[u9]:"fire-fn",[d9]:"fire-fn-compat",[h9]:"fire-iid",[f9]:"fire-iid-compat",[m9]:"fire-fcm",[p9]:"fire-fcm-compat",[g9]:"fire-perf",[y9]:"fire-perf-compat",[v9]:"fire-rc",[x9]:"fire-rc-compat",[w9]:"fire-gcs",[_9]:"fire-gcs-compat",[E9]:"fire-fst",[S9]:"fire-fst-compat","fire-js":"fire-js",[b9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh=new Map,ny=new Map;function I9(t,e){try{t.container.addComponent(e)}catch(n){io.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function oo(t){const e=t.name;if(ny.has(e))return io.debug(`There were multiple attempts to register component ${e}.`),!1;ny.set(e,t);for(const n of Oh.values())I9(n,t);return!0}function qf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ti=new eu("app","Firebase",C9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A9{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ai("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ti.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=T9;function F2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ty,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ti.create("bad-app-name",{appName:String(s)});if(n||(n=j2()),!n)throw ti.create("no-options");const i=Oh.get(s);if(i){if(Dh(n,i.options)&&Dh(r,i.config))return i;throw ti.create("duplicate-app",{appName:s})}const o=new L$(s);for(const l of ny.values())o.addComponent(l);const a=new A9(n,r,o);return Oh.set(s,a),a}function px(t=ty){const e=Oh.get(t);if(!e&&t===ty&&j2())return F2();if(!e)throw ti.create("no-app",{appName:t});return e}function jr(t,e,n){var r;let s=(r=k9[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),io.warn(a.join(" "));return}oo(new ai(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R9="firebase-heartbeat-database",P9=1,vc="firebase-heartbeat-store";let Yp=null;function $2(){return Yp||(Yp=Q$(R9,P9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(vc)}}}).catch(t=>{throw ti.create("idb-open",{originalErrorMessage:t.message})})),Yp}async function N9(t){try{return await(await $2()).transaction(vc).objectStore(vc).get(B2(t))}catch(e){if(e instanceof Hr)io.warn(e.message);else{const n=ti.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});io.warn(n.message)}}}async function OE(t,e){try{const r=(await $2()).transaction(vc,"readwrite");await r.objectStore(vc).put(e,B2(t)),await r.done}catch(n){if(n instanceof Hr)io.warn(n.message);else{const r=ti.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});io.warn(r.message)}}}function B2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9=1024,D9=30*24*60*60*1e3;class O9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new L9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ME();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=D9}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ME(),{heartbeatsToSend:n,unsentEntries:r}=M9(this._heartbeatsCache.heartbeats),s=jh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function ME(){return new Date().toISOString().substring(0,10)}function M9(t,e=j9){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),LE(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),LE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class L9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return T$()?k$().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await N9(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return OE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return OE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function LE(t){return jh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F9(t){oo(new ai("platform-logger",e=>new Z$(e),"PRIVATE")),oo(new ai("heartbeat",e=>new O9(e),"PRIVATE")),jr(ey,DE,t),jr(ey,DE,"esm2017"),jr("fire-js","")}F9("");function gx(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function z2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $9=z2,V2=new eu("auth","Firebase",z2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new fx("@firebase/auth");function B9(t,...e){Mh.logLevel<=Ee.WARN&&Mh.warn(`Auth (${bo}): ${t}`,...e)}function Nd(t,...e){Mh.logLevel<=Ee.ERROR&&Mh.error(`Auth (${bo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(t,...e){throw yx(t,...e)}function Dr(t,...e){return yx(t,...e)}function U2(t,e,n){const r=Object.assign(Object.assign({},$9()),{[e]:n});return new eu("auth","Firebase",r).create(e,{appName:t.name})}function z9(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&$r(t,"argument-error"),U2(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return V2.create(t,...e)}function ue(t,e,...n){if(!t)throw yx(e,...n)}function es(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nd(e),new Error(e)}function hs(t,e){t||es(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function V9(){return FE()==="http:"||FE()==="https:"}function FE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(V9()||E$()||"connection"in navigator)?navigator.onLine:!0}function H9(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n){this.shortDelay=e,this.longDelay=n,hs(n>e,"Short delay should be less than long delay!"),this.isMobile=w$()||S$()}get(){return U9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(t,e){hs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;es("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;es("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;es("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9=new nu(3e4,6e4);function W2(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ru(t,e,n,r,s={}){return q2(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=tu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),H2.fetch()(G2(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function q2(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},W9),e);try{const s=new K9(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw td(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw td(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw td(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw td(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw U2(t,d,c);$r(t,d)}}catch(s){if(s instanceof Hr)throw s;$r(t,"network-request-failed",{message:String(s)})}}async function G9(t,e,n,r,s={}){const i=await ru(t,e,n,r,s);return"mfaPendingCredential"in i&&$r(t,"multi-factor-auth-required",{_serverResponse:i}),i}function G2(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?vx(t.config,s):`${t.config.apiScheme}://${s}`}class K9{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Dr(this.auth,"network-request-failed")),q9.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function td(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Dr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X9(t,e){return ru(t,"POST","/v1/accounts:delete",e)}async function Q9(t,e){return ru(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Y9(t,e=!1){const n=wt(t),r=await n.getIdToken(e),s=xx(r);ue(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Bl(Jp(s.auth_time)),issuedAtTime:Bl(Jp(s.iat)),expirationTime:Bl(Jp(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Jp(t){return Number(t)*1e3}function xx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Nd("JWT malformed, contained fewer than 3 sections"),null;try{const s=R2(n);return s?JSON.parse(s):(Nd("Failed to decode base64 JWT payload"),null)}catch(s){return Nd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function J9(t){const e=xx(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Hr&&Z9(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Z9({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bl(this.lastLoginAt),this.creationTime=Bl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lh(t){var e;const n=t.auth,r=await t.getIdToken(),s=await xc(t,Q9(n,{idToken:r}));ue(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?rB(i.providerUserInfo):[],a=nB(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new K2(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function tB(t){const e=wt(t);await Lh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nB(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function rB(t){return t.map(e=>{var{providerId:n}=e,r=gx(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sB(t,e){const n=await q2(t,{},async()=>{const r=tu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=G2(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",H2.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):J9(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ue(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await sB(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new wc;return r&&(ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ue(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ue(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wc,this.toJSON())}_performRefresh(){return es("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Gi{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=gx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new K2(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await xc(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Y9(this,e)}reload(){return tB(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Gi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Lh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await xc(this,X9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:E,isAnonymous:S,providerData:k,stsTokenManager:T}=n;ue(w&&T,e,"internal-error");const b=wc.fromJSON(this.name,T);ue(typeof w=="string",e,"internal-error"),Is(h,e.name),Is(m,e.name),ue(typeof E=="boolean",e,"internal-error"),ue(typeof S=="boolean",e,"internal-error"),Is(p,e.name),Is(v,e.name),Is(y,e.name),Is(_,e.name),Is(x,e.name),Is(g,e.name);const C=new Gi({uid:w,auth:e,email:m,emailVerified:E,displayName:h,isAnonymous:S,photoURL:v,phoneNumber:p,tenantId:y,stsTokenManager:b,createdAt:x,lastLoginAt:g});return k&&Array.isArray(k)&&(C.providerData=k.map(R=>Object.assign({},R))),_&&(C._redirectEventId=_),C}static async _fromIdTokenResponse(e,n,r=!1){const s=new wc;s.updateFromServerResponse(n);const i=new Gi({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Lh(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=new Map;function ts(t){hs(t instanceof Function,"Expected a class definition");let e=$E.get(t);return e?(hs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$E.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}X2.type="NONE";const BE=X2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(t,e,n){return`firebase:${t}:${e}:${n}`}class ca{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=jd(this.userKey,s.apiKey,i),this.fullPersistenceKey=jd("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Gi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ca(ts(BE),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||ts(BE);const o=jd(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=Gi._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new ca(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new ca(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(J2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Q2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eC(e))return"Blackberry";if(tC(e))return"Webos";if(wx(e))return"Safari";if((e.includes("chrome/")||Y2(e))&&!e.includes("edge/"))return"Chrome";if(Z2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Q2(t=Xt()){return/firefox\//i.test(t)}function wx(t=Xt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Y2(t=Xt()){return/crios\//i.test(t)}function J2(t=Xt()){return/iemobile/i.test(t)}function Z2(t=Xt()){return/android/i.test(t)}function eC(t=Xt()){return/blackberry/i.test(t)}function tC(t=Xt()){return/webos/i.test(t)}function Gf(t=Xt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function iB(t=Xt()){var e;return Gf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oB(){return b$()&&document.documentMode===10}function nC(t=Xt()){return Gf(t)||Z2(t)||tC(t)||eC(t)||/windows phone/i.test(t)||J2(t)}function aB(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(t,e=[]){let n;switch(t){case"Browser":n=zE(Xt());break;case"Worker":n=`${zE(Xt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cB(t,e={}){return ru(t,"GET","/v2/passwordPolicy",W2(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB=6;class dB{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:uB,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VE(this),this.idTokenSubscription=new VE(this),this.beforeStateQueue=new lB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=V2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ts(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ca.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Lh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=H9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?wt(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ts(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cB(this),n=new dB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new eu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ts(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await ca.create(this,[ts(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&B9(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Kf(t){return wt(t)}class VE{constructor(e){this.auth=e,this.observer=null,this.addObserver=P$(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function mB(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Dr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",fB().appendChild(r)})}function pB(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gB(t,e){const n=qf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Dh(i,e??{}))return s;$r(s,"already-initialized")}return n.initialize({options:e})}function yB(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ts);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function vB(t,e,n){const r=Kf(t);ue(r._canInitEmulator,r,"emulator-config-failed"),ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=sC(e),{host:o,port:a}=xB(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||wB()}function sC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xB(t){const e=sC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:UE(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:UE(o)}}}function UE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function wB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return es("not implemented")}_getIdTokenResponse(e){return es("not implemented")}_linkToIdToken(e,n){return es("not implemented")}_getReauthenticationResolver(e){return es("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ua(t,e){return G9(t,"POST","/v1/accounts:signInWithIdp",W2(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B="http://localhost";class ao extends iC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ao(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$r("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=gx(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ao(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ua(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ua(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ua(e,n)}buildRequest(){const e={requestUri:_B,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=tu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends _x{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends su{constructor(){super("facebook.com")}static credential(e){return ao._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ds.credential(e.oauthAccessToken)}catch{return null}}}Ds.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ds.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends su{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ao._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Sr.credential(n,r)}catch{return null}}}Sr.GOOGLE_SIGN_IN_METHOD="google.com";Sr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends su{constructor(){super("github.com")}static credential(e){return ao._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Os.credential(e.oauthAccessToken)}catch{return null}}}Os.GITHUB_SIGN_IN_METHOD="github.com";Os.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends su{constructor(){super("twitter.com")}static credential(e,n){return ao._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ms.credential(n,r)}catch{return null}}}Ms.TWITTER_SIGN_IN_METHOD="twitter.com";Ms.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Gi._fromIdTokenResponse(e,r,s),o=HE(r);return new Pa({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=HE(r);return new Pa({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function HE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh extends Hr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Fh.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Fh(e,n,r,s)}}function oC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Fh._fromErrorAndOperation(t,i,e,r):i})}async function EB(t,e,n=!1){const r=await xc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Pa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SB(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await xc(t,oC(r,s,e,t),n);ue(i.idToken,r,"internal-error");const o=xx(i.idToken);ue(o,r,"internal-error");const{sub:a}=o;return ue(t.uid===a,r,"user-mismatch"),Pa._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&$r(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bB(t,e,n=!1){const r="signIn",s=await oC(t,r,e),i=await Pa._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function TB(t,e,n,r){return wt(t).onIdTokenChanged(e,n,r)}function kB(t,e,n){return wt(t).beforeAuthStateChanged(e,n)}function IB(t,e,n,r){return wt(t).onAuthStateChanged(e,n,r)}function aC(t){return wt(t).signOut()}const $h="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($h,"1"),this.storage.removeItem($h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CB(){const t=Xt();return wx(t)||Gf(t)}const AB=1e3,RB=10;class cC extends lC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=CB()&&aB(),this.fallbackToPolling=nC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);oB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,RB):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},AB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}cC.type="LOCAL";const PB=cC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC extends lC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}uC.type="SESSION";const dC=uC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NB(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Xf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await NB(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Ex("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const m=h;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(){return window}function DB(t){Or().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(){return typeof Or().WorkerGlobalScope<"u"&&typeof Or().importScripts=="function"}async function OB(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MB(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function LB(){return hC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="firebaseLocalStorageDb",FB=1,Bh="firebaseLocalStorage",mC="fbase_key";class iu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Qf(t,e){return t.transaction([Bh],e?"readwrite":"readonly").objectStore(Bh)}function $B(){const t=indexedDB.deleteDatabase(fC);return new iu(t).toPromise()}function sy(){const t=indexedDB.open(fC,FB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Bh,{keyPath:mC})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Bh)?e(r):(r.close(),await $B(),e(await sy()))})})}async function WE(t,e,n){const r=Qf(t,!0).put({[mC]:e,value:n});return new iu(r).toPromise()}async function BB(t,e){const n=Qf(t,!1).get(e),r=await new iu(n).toPromise();return r===void 0?null:r.value}function qE(t,e){const n=Qf(t,!0).delete(e);return new iu(n).toPromise()}const zB=800,VB=3;class pC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>VB)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xf._getInstance(LB()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await OB(),!this.activeServiceWorker)return;this.sender=new jB(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||MB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sy();return await WE(e,$h,"1"),await qE(e,$h),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>WE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>BB(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>qE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Qf(s,!1).getAll();return new iu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pC.type="LOCAL";const UB=pC;new nu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(t,e){return e?ts(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx extends iC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ua(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ua(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ua(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function HB(t){return bB(t.auth,new Sx(t),t.bypassAuthState)}function WB(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),SB(n,new Sx(t),t.bypassAuthState)}async function qB(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),EB(n,new Sx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HB;case"linkViaPopup":case"linkViaRedirect":return qB;case"reauthViaPopup":case"reauthViaRedirect":return WB;default:$r(this.auth,"internal-error")}}resolve(e){hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GB=new nu(2e3,1e4);async function KB(t,e,n){const r=Kf(t);z9(t,e,_x);const s=gC(r,n);return new zi(r,"signInViaPopup",e,s).executeNotNull()}class zi extends yC{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,zi.currentPopupAction&&zi.currentPopupAction.cancel(),zi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){hs(this.filter.length===1,"Popup operations only handle one event");const e=Ex();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Dr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Dr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,GB.get())};e()}}zi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XB="pendingRedirect",Dd=new Map;class QB extends yC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Dd.get(this.auth._key());if(!e){try{const r=await YB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Dd.set(this.auth._key(),e)}return this.bypassAuthState||Dd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YB(t,e){const n=ez(e),r=ZB(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function JB(t,e){Dd.set(t._key(),e)}function ZB(t){return ts(t._redirectPersistence)}function ez(t){return jd(XB,t.config.apiKey,t.name)}async function tz(t,e,n=!1){const r=Kf(t),s=gC(r,e),o=await new QB(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nz=10*60*1e3;class rz{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sz(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!vC(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Dr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nz&&this.cachedEventUids.clear(),this.cachedEventUids.has(GE(e))}saveEventToCache(e){this.cachedEventUids.add(GE(e)),this.lastProcessedEventTime=Date.now()}}function GE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function vC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sz(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iz(t,e={}){return ru(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,az=/^https?/;async function lz(t){if(t.config.emulator)return;const{authorizedDomains:e}=await iz(t);for(const n of e)try{if(cz(n))return}catch{}$r(t,"unauthorized-domain")}function cz(t){const e=ry(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!az.test(n))return!1;if(oz.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uz=new nu(3e4,6e4);function KE(){const t=Or().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function dz(t){return new Promise((e,n)=>{var r,s,i;function o(){KE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{KE(),n(Dr(t,"network-request-failed"))},timeout:uz.get()})}if(!((s=(r=Or().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Or().gapi)===null||i===void 0)&&i.load)o();else{const a=pB("iframefcb");return Or()[a]=()=>{gapi.load?o():n(Dr(t,"network-request-failed"))},mB(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Od=null,e})}let Od=null;function hz(t){return Od=Od||dz(t),Od}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fz=new nu(5e3,15e3),mz="__/auth/iframe",pz="emulator/auth/iframe",gz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vz(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?vx(e,pz):`https://${t.config.authDomain}/${mz}`,r={apiKey:e.apiKey,appName:t.name,v:bo},s=yz.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${tu(r).slice(1)}`}async function xz(t){const e=await hz(t),n=Or().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:vz(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gz,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Dr(t,"network-request-failed"),a=Or().setTimeout(()=>{i(o)},fz.get());function l(){Or().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_z=500,Ez=600,Sz="_blank",bz="http://localhost";class XE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Tz(t,e,n,r=_z,s=Ez){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},wz),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Xt().toLowerCase();n&&(a=Y2(c)?Sz:n),Q2(c)&&(e=e||bz,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[p,v])=>`${m}${p}=${v},`,"");if(iB(c)&&a!=="_self")return kz(e||"",a),new XE(null);const h=window.open(e||"",a,d);ue(h,t,"popup-blocked");try{h.focus()}catch{}return new XE(h)}function kz(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iz="__/auth/handler",Cz="emulator/auth/handler",Az=encodeURIComponent("fac");async function QE(t,e,n,r,s,i){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:bo,eventId:s};if(e instanceof _x){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",R$(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(i||{}))o[d]=h}if(e instanceof su){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${Az}=${encodeURIComponent(l)}`:"";return`${Rz(t)}?${tu(a).slice(1)}${c}`}function Rz({config:t}){return t.emulator?vx(t,Cz):`https://${t.authDomain}/${Iz}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="webStorageSupport";class Pz{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dC,this._completeRedirectFn=tz,this._overrideRedirectResult=JB}async _openPopup(e,n,r,s){var i;hs((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await QE(e,n,r,ry(),s);return Tz(e,o,Ex())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await QE(e,n,r,ry(),s);return DB(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(hs(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await xz(e),r=new rz(e);return n.register("authEvent",s=>(ue(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Zp,{type:Zp},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Zp];o!==void 0&&n(!!o),$r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lz(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return nC()||wx()||Gf()}}const Nz=Pz;var YE="@firebase/auth",JE="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jz{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Oz(t){oo(new ai("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rC(t)},c=new hB(r,s,i,l);return yB(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),oo(new ai("auth-internal",e=>{const n=Kf(e.getProvider("auth").getImmediate());return(r=>new jz(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),jr(YE,JE,Dz(t)),jr(YE,JE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mz=5*60,Lz=D2("authIdTokenMaxAge")||Mz;let ZE=null;const Fz=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Lz)return;const s=n==null?void 0:n.token;ZE!==s&&(ZE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function $z(t=px()){const e=qf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=gB(t,{popupRedirectResolver:Nz,persistence:[UB,PB,dC]}),r=D2("authTokenSyncURL");if(r){const i=Fz(r);kB(n,i,()=>i(n.currentUser)),TB(n,o=>i(o))}const s=P2("auth");return s&&vB(n,`http://${s}`),n}Oz("Browser");var Bz="firebase",zz="10.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jr(Bz,zz,"app");var Vz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},H,bx=bx||{},le=Vz||self;function Yf(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ou(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Uz(t){return Object.prototype.hasOwnProperty.call(t,eg)&&t[eg]||(t[eg]=++Hz)}var eg="closure_uid_"+(1e9*Math.random()>>>0),Hz=0;function Wz(t,e,n){return t.call.apply(t.bind,arguments)}function qz(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Wt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Wt=Wz:Wt=qz,Wt.apply(null,arguments)}function nd(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function It(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function _i(){this.s=this.s,this.o=this.o}var Gz=0;_i.prototype.s=!1;_i.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Gz!=0)&&Uz(this)};_i.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const xC=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Tx(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function eS(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Yf(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function qt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}qt.prototype.h=function(){this.defaultPrevented=!0};var Kz=function(){if(!le.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{le.addEventListener("test",()=>{},e),le.removeEventListener("test",()=>{},e)}catch{}return t}();function _c(t){return/^[\s\xa0]*$/.test(t)}function Jf(){var t=le.navigator;return t&&(t=t.userAgent)?t:""}function br(t){return Jf().indexOf(t)!=-1}function kx(t){return kx[" "](t),t}kx[" "]=function(){};function Xz(t,e){var n=zV;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var Qz=br("Opera"),Na=br("Trident")||br("MSIE"),wC=br("Edge"),iy=wC||Na,_C=br("Gecko")&&!(Jf().toLowerCase().indexOf("webkit")!=-1&&!br("Edge"))&&!(br("Trident")||br("MSIE"))&&!br("Edge"),Yz=Jf().toLowerCase().indexOf("webkit")!=-1&&!br("Edge");function EC(){var t=le.document;return t?t.documentMode:void 0}var oy;e:{var tg="",ng=function(){var t=Jf();if(_C)return/rv:([^\);]+)(\)|;)/.exec(t);if(wC)return/Edge\/([\d\.]+)/.exec(t);if(Na)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Yz)return/WebKit\/(\S+)/.exec(t);if(Qz)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(ng&&(tg=ng?ng[1]:""),Na){var rg=EC();if(rg!=null&&rg>parseFloat(tg)){oy=String(rg);break e}}oy=tg}var ay;if(le.document&&Na){var tS=EC();ay=tS||parseInt(oy,10)||void 0}else ay=void 0;var Jz=ay;function Ec(t,e){if(qt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(_C){e:{try{kx(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Zz[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ec.$.h.call(this)}}It(Ec,qt);var Zz={2:"touch",3:"pen",4:"mouse"};Ec.prototype.h=function(){Ec.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var au="closure_listenable_"+(1e6*Math.random()|0),eV=0;function tV(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++eV,this.fa=this.ia=!1}function Zf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Ix(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function nV(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function SC(t){const e={};for(const n in t)e[n]=t[n];return e}const nS="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bC(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<nS.length;i++)n=nS[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function em(t){this.src=t,this.g={},this.h=0}em.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=cy(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new tV(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function ly(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=xC(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Zf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function cy(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var Cx="closure_lm_"+(1e6*Math.random()|0),sg={};function TC(t,e,n,r,s){if(r&&r.once)return IC(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)TC(t,e[i],n,r,s);return null}return n=Px(n),t&&t[au]?t.O(e,n,ou(r)?!!r.capture:!!r,s):kC(t,e,n,!1,r,s)}function kC(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=ou(s)?!!s.capture:!!s,a=Rx(t);if(a||(t[Cx]=a=new em(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=rV(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Kz||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(AC(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function rV(){function t(n){return e.call(t.src,t.listener,n)}const e=sV;return t}function IC(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)IC(t,e[i],n,r,s);return null}return n=Px(n),t&&t[au]?t.P(e,n,ou(r)?!!r.capture:!!r,s):kC(t,e,n,!0,r,s)}function CC(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)CC(t,e[i],n,r,s);else r=ou(r)?!!r.capture:!!r,n=Px(n),t&&t[au]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=cy(i,n,r,s),-1<n&&(Zf(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=Rx(t))&&(e=t.g[e.toString()],t=-1,e&&(t=cy(e,n,r,s)),(n=-1<t?e[t]:null)&&Ax(n))}function Ax(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[au])ly(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(AC(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Rx(e))?(ly(n,t),n.h==0&&(n.src=null,e[Cx]=null)):Zf(t)}}}function AC(t){return t in sg?sg[t]:sg[t]="on"+t}function sV(t,e){if(t.fa)t=!0;else{e=new Ec(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Ax(t),t=n.call(r,e)}return t}function Rx(t){return t=t[Cx],t instanceof em?t:null}var ig="__closure_events_fn_"+(1e9*Math.random()>>>0);function Px(t){return typeof t=="function"?t:(t[ig]||(t[ig]=function(e){return t.handleEvent(e)}),t[ig])}function kt(){_i.call(this),this.i=new em(this),this.S=this,this.J=null}It(kt,_i);kt.prototype[au]=!0;kt.prototype.removeEventListener=function(t,e,n,r){CC(this,t,e,n,r)};function Dt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new qt(e,t);else if(e instanceof qt)e.target=e.target||t;else{var s=e;e=new qt(r,t),bC(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=rd(o,r,!0,e)&&s}if(o=e.g=t,s=rd(o,r,!0,e)&&s,s=rd(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=rd(o,r,!1,e)&&s}kt.prototype.N=function(){if(kt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Zf(n[r]);delete t.g[e],t.h--}}this.J=null};kt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};kt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function rd(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&ly(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var Nx=le.JSON.stringify;class iV{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function oV(){var t=jx;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class aV{constructor(){this.h=this.g=null}add(e,n){const r=RC.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var RC=new iV(()=>new lV,t=>t.reset());class lV{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function cV(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function uV(t){le.setTimeout(()=>{throw t},0)}let Sc,bc=!1,jx=new aV,PC=()=>{const t=le.Promise.resolve(void 0);Sc=()=>{t.then(dV)}};var dV=()=>{for(var t;t=oV();){try{t.h.call(t.g)}catch(n){uV(n)}var e=RC;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}bc=!1};function tm(t,e){kt.call(this),this.h=t||1,this.g=e||le,this.j=Wt(this.qb,this),this.l=Date.now()}It(tm,kt);H=tm.prototype;H.ga=!1;H.T=null;H.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Dt(this,"tick"),this.ga&&(Dx(this),this.start()))}};H.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Dx(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}H.N=function(){tm.$.N.call(this),Dx(this),delete this.g};function Ox(t,e,n){if(typeof t=="function")n&&(t=Wt(t,n));else if(t&&typeof t.handleEvent=="function")t=Wt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:le.setTimeout(t,e||0)}function NC(t){t.g=Ox(()=>{t.g=null,t.i&&(t.i=!1,NC(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class hV extends _i{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:NC(this)}N(){super.N(),this.g&&(le.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tc(t){_i.call(this),this.h=t,this.g={}}It(Tc,_i);var rS=[];function jC(t,e,n,r){Array.isArray(n)||(n&&(rS[0]=n.toString()),n=rS);for(var s=0;s<n.length;s++){var i=TC(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function DC(t){Ix(t.g,function(e,n){this.g.hasOwnProperty(n)&&Ax(e)},t),t.g={}}Tc.prototype.N=function(){Tc.$.N.call(this),DC(this)};Tc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function nm(){this.g=!0}nm.prototype.Ea=function(){this.g=!1};function fV(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var d=c[0];c=c[1];var h=d.split("_");o=2<=h.length&&h[1]=="type"?o+(d+"="+c+"&"):o+(d+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function mV(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function ea(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+gV(t,n)+(r?" "+r:"")})}function pV(t,e){t.info(function(){return"TIMEOUT: "+e})}nm.prototype.info=function(){};function gV(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Nx(n)}catch{return e}}var To={},sS=null;function rm(){return sS=sS||new kt}To.Ta="serverreachability";function OC(t){qt.call(this,To.Ta,t)}It(OC,qt);function kc(t){const e=rm();Dt(e,new OC(e))}To.STAT_EVENT="statevent";function MC(t,e){qt.call(this,To.STAT_EVENT,t),this.stat=e}It(MC,qt);function tn(t){const e=rm();Dt(e,new MC(e,t))}To.Ua="timingevent";function LC(t,e){qt.call(this,To.Ua,t),this.size=e}It(LC,qt);function lu(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return le.setTimeout(function(){t()},e)}var sm={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},FC={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Mx(){}Mx.prototype.h=null;function iS(t){return t.h||(t.h=t.i())}function $C(){}var cu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Lx(){qt.call(this,"d")}It(Lx,qt);function Fx(){qt.call(this,"c")}It(Fx,qt);var uy;function im(){}It(im,Mx);im.prototype.g=function(){return new XMLHttpRequest};im.prototype.i=function(){return{}};uy=new im;function uu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Tc(this),this.P=yV,t=iy?125:void 0,this.V=new tm(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new BC}function BC(){this.i=null,this.g="",this.h=!1}var yV=45e3,dy={},zh={};H=uu.prototype;H.setTimeout=function(t){this.P=t};function hy(t,e,n){t.L=1,t.v=am(fs(e)),t.s=n,t.S=!0,zC(t,null)}function zC(t,e){t.G=Date.now(),du(t),t.A=fs(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),XC(n.i,"t",r),t.C=0,n=t.l.J,t.h=new BC,t.g=gA(t.l,n?e:null,!t.s),0<t.O&&(t.M=new hV(Wt(t.Pa,t,t.g),t.O)),jC(t.U,t.g,"readystatechange",t.nb),e=t.I?SC(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),kc(),fV(t.j,t.u,t.A,t.m,t.W,t.s)}H.nb=function(t){t=t.target;const e=this.M;e&&Ir(t)==3?e.l():this.Pa(t)};H.Pa=function(t){try{if(t==this.g)e:{const d=Ir(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>d)&&(d!=3||iy||this.g&&(this.h.h||this.g.ja()||cS(this.g)))){this.J||d!=4||e==7||(e==8||0>=h?kc(3):kc(2)),om(this);var n=this.g.da();this.ca=n;t:if(VC(this)){var r=cS(this.g);t="";var s=r.length,i=Ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vi(this),zl(this);var o="";break t}this.h.i=new le.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,mV(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_c(a)){var c=a;break t}}c=null}if(n=c)ea(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fy(this,n);else{this.i=!1,this.o=3,tn(12),Vi(this),zl(this);break e}}this.S?(UC(this,d,o),iy&&this.i&&d==3&&(jC(this.U,this.V,"tick",this.mb),this.V.start())):(ea(this.j,this.m,o,null),fy(this,o)),d==4&&Vi(this),this.i&&!this.J&&(d==4?hA(this.l,this):(this.i=!1,du(this)))}else FV(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,tn(12)):(this.o=0,tn(13)),Vi(this),zl(this)}}}catch{}finally{}};function VC(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function UC(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=vV(t,n),s==zh){e==4&&(t.o=4,tn(14),r=!1),ea(t.j,t.m,null,"[Incomplete Response]");break}else if(s==dy){t.o=4,tn(15),ea(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else ea(t.j,t.m,s,null),fy(t,s);VC(t)&&s!=zh&&s!=dy&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,tn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Hx(e),e.M=!0,tn(11))):(ea(t.j,t.m,n,"[Invalid Chunked Response]"),Vi(t),zl(t))}H.mb=function(){if(this.g){var t=Ir(this.g),e=this.g.ja();this.C<e.length&&(om(this),UC(this,t,e),this.i&&t!=4&&du(this))}};function vV(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?zh:(n=Number(e.substring(n,r)),isNaN(n)?dy:(r+=1,r+n>e.length?zh:(e=e.slice(r,r+n),t.C=r+n,e)))}H.cancel=function(){this.J=!0,Vi(this)};function du(t){t.Y=Date.now()+t.P,HC(t,t.P)}function HC(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=lu(Wt(t.lb,t),e)}function om(t){t.B&&(le.clearTimeout(t.B),t.B=null)}H.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(pV(this.j,this.A),this.L!=2&&(kc(),tn(17)),Vi(this),this.o=2,zl(this)):HC(this,this.Y-t)};function zl(t){t.l.H==0||t.J||hA(t.l,t)}function Vi(t){om(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Dx(t.V),DC(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function fy(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||my(n.i,t))){if(!t.K&&my(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Hh(n),dm(n);else break e;Ux(n),tn(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=lu(Wt(n.ib,n),6e3));if(1>=JC(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ui(n,11)}else if((t.K||n.g==t)&&Hh(n),!_c(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const d=c[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const m=c[5];m!=null&&typeof m=="number"&&0<m&&(r=1.5*m,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const p=t.g;if(p){const v=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var i=r.i;i.g||v.indexOf("spdy")==-1&&v.indexOf("quic")==-1&&v.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&($x(i,i.h),i.h=null))}if(r.F){const y=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.Da=y,$e(r.I,r.F,y))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=pA(r,r.J?r.pa:null,r.Y),o.K){ZC(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(om(a),du(a)),r.g=o}else uA(r);0<n.j.length&&hm(n)}else c[0]!="stop"&&c[0]!="close"||Ui(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Ui(n,7):Vx(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}kc(4)}catch{}}function xV(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Yf(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function wV(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Yf(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function WC(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Yf(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=wV(t),r=xV(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var qC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _V(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Ki(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ki){this.h=t.h,Vh(this,t.j),this.s=t.s,this.g=t.g,Uh(this,t.m),this.l=t.l;var e=t.i,n=new Ic;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),oS(this,n),this.o=t.o}else t&&(e=String(t).match(qC))?(this.h=!1,Vh(this,e[1]||"",!0),this.s=Tl(e[2]||""),this.g=Tl(e[3]||"",!0),Uh(this,e[4]),this.l=Tl(e[5]||"",!0),oS(this,e[6]||"",!0),this.o=Tl(e[7]||"")):(this.h=!1,this.i=new Ic(null,this.h))}Ki.prototype.toString=function(){var t=[],e=this.j;e&&t.push(kl(e,aS,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(kl(e,aS,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(kl(n,n.charAt(0)=="/"?bV:SV,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",kl(n,kV)),t.join("")};function fs(t){return new Ki(t)}function Vh(t,e,n){t.j=n?Tl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Uh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function oS(t,e,n){e instanceof Ic?(t.i=e,IV(t.i,t.h)):(n||(e=kl(e,TV)),t.i=new Ic(e,t.h))}function $e(t,e,n){t.i.set(e,n)}function am(t){return $e(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Tl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function kl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,EV),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function EV(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var aS=/[#\/\?@]/g,SV=/[#\?:]/g,bV=/[#\?]/g,TV=/[#\?@]/g,kV=/#/g;function Ic(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ei(t){t.g||(t.g=new Map,t.h=0,t.i&&_V(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}H=Ic.prototype;H.add=function(t,e){Ei(this),this.i=null,t=Qa(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function GC(t,e){Ei(t),e=Qa(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function KC(t,e){return Ei(t),e=Qa(t,e),t.g.has(e)}H.forEach=function(t,e){Ei(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};H.ta=function(){Ei(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};H.Z=function(t){Ei(this);let e=[];if(typeof t=="string")KC(this,t)&&(e=e.concat(this.g.get(Qa(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};H.set=function(t,e){return Ei(this),this.i=null,t=Qa(this,t),KC(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};H.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function XC(t,e,n){GC(t,e),0<n.length&&(t.i=null,t.g.set(Qa(t,e),Tx(n)),t.h+=n.length)}H.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function Qa(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function IV(t,e){e&&!t.j&&(Ei(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(GC(this,r),XC(this,s,n))},t)),t.j=e}var CV=class{constructor(t,e){this.g=t,this.map=e}};function QC(t){this.l=t||AV,le.PerformanceNavigationTiming?(t=le.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(le.g&&le.g.Ka&&le.g.Ka()&&le.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var AV=10;function YC(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function JC(t){return t.h?1:t.g?t.g.size:0}function my(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function $x(t,e){t.g?t.g.add(e):t.h=e}function ZC(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}QC.prototype.cancel=function(){if(this.i=eA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function eA(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Tx(t.i)}var RV=class{stringify(t){return le.JSON.stringify(t,void 0)}parse(t){return le.JSON.parse(t,void 0)}};function PV(){this.g=new RV}function NV(t,e,n){const r=n||"";try{WC(t,function(s,i){let o=s;ou(s)&&(o=Nx(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function jV(t,e){const n=new nm;if(le.Image){const r=new Image;r.onload=nd(sd,n,r,"TestLoadImage: loaded",!0,e),r.onerror=nd(sd,n,r,"TestLoadImage: error",!1,e),r.onabort=nd(sd,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=nd(sd,n,r,"TestLoadImage: timeout",!1,e),le.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function sd(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function lm(t){this.l=t.fc||null,this.j=t.ob||!1}It(lm,Mx);lm.prototype.g=function(){return new cm(this.l,this.j)};lm.prototype.i=function(t){return function(){return t}}({});function cm(t,e){kt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Bx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}It(cm,kt);var Bx=0;H=cm.prototype;H.open=function(t,e){if(this.readyState!=Bx)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Cc(this)};H.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||le).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};H.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hu(this)),this.readyState=Bx};H.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Cc(this)),this.g&&(this.readyState=3,Cc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof le.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tA(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function tA(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}H.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?hu(this):Cc(this),this.readyState==3&&tA(this)}};H.Za=function(t){this.g&&(this.response=this.responseText=t,hu(this))};H.Ya=function(t){this.g&&(this.response=t,hu(this))};H.ka=function(){this.g&&hu(this)};function hu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Cc(t)}H.setRequestHeader=function(t,e){this.v.append(t,e)};H.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};H.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Cc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(cm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var DV=le.JSON.parse;function Ze(t){kt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=nA,this.L=this.M=!1}It(Ze,kt);var nA="",OV=/^https?$/i,MV=["POST","PUT"];H=Ze.prototype;H.Oa=function(t){this.M=t};H.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():uy.g(),this.C=this.u?iS(this.u):iS(uy),this.g.onreadystatechange=Wt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){lS(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=le.FormData&&t instanceof le.FormData,!(0<=xC(MV,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{iA(this),0<this.B&&((this.L=LV(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Wt(this.ua,this)):this.A=Ox(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){lS(this,i)}};function LV(t){return Na&&typeof t.timeout=="number"&&t.ontimeout!==void 0}H.ua=function(){typeof bx<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Dt(this,"timeout"),this.abort(8))};function lS(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,rA(t),um(t)}function rA(t){t.F||(t.F=!0,Dt(t,"complete"),Dt(t,"error"))}H.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Dt(this,"complete"),Dt(this,"abort"),um(this))};H.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),um(this,!0)),Ze.$.N.call(this)};H.La=function(){this.s||(this.G||this.v||this.l?sA(this):this.kb())};H.kb=function(){sA(this)};function sA(t){if(t.h&&typeof bx<"u"&&(!t.C[1]||Ir(t)!=4||t.da()!=2)){if(t.v&&Ir(t)==4)Ox(t.La,0,t);else if(Dt(t,"readystatechange"),Ir(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(qC)[1]||null;!s&&le.self&&le.self.location&&(s=le.self.location.protocol.slice(0,-1)),r=!OV.test(s?s.toLowerCase():"")}n=r}if(n)Dt(t,"complete"),Dt(t,"success");else{t.m=6;try{var i=2<Ir(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",rA(t)}}finally{um(t)}}}}function um(t,e){if(t.g){iA(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Dt(t,"ready");try{n.onreadystatechange=r}catch{}}}function iA(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(le.clearTimeout(t.A),t.A=null)}H.isActive=function(){return!!this.g};function Ir(t){return t.g?t.g.readyState:0}H.da=function(){try{return 2<Ir(this)?this.g.status:-1}catch{return-1}};H.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};H.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),DV(e)}};function cS(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case nA:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function FV(t){const e={};t=(t.g&&2<=Ir(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(_c(t[r]))continue;var n=cV(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}nV(e,function(r){return r.join(", ")})}H.Ia=function(){return this.m};H.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function oA(t){let e="";return Ix(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function zx(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=oA(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):$e(t,e,n))}function gl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function aA(t){this.Ga=0,this.j=[],this.l=new nm,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=gl("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=gl("baseRetryDelayMs",5e3,t),this.hb=gl("retryDelaySeedMs",1e4,t),this.eb=gl("forwardChannelMaxRetries",2,t),this.xa=gl("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new QC(t&&t.concurrentRequestLimit),this.Ja=new PV,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}H=aA.prototype;H.ra=8;H.H=1;function Vx(t){if(lA(t),t.H==3){var e=t.W++,n=fs(t.I);if($e(n,"SID",t.K),$e(n,"RID",e),$e(n,"TYPE","terminate"),fu(t,n),e=new uu(t,t.l,e),e.L=2,e.v=am(fs(n)),n=!1,le.navigator&&le.navigator.sendBeacon)try{n=le.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&le.Image&&(new Image().src=e.v,n=!0),n||(e.g=gA(e.l,null),e.g.ha(e.v)),e.G=Date.now(),du(e)}mA(t)}function dm(t){t.g&&(Hx(t),t.g.cancel(),t.g=null)}function lA(t){dm(t),t.u&&(le.clearTimeout(t.u),t.u=null),Hh(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&le.clearTimeout(t.m),t.m=null)}function hm(t){if(!YC(t.i)&&!t.m){t.m=!0;var e=t.Na;Sc||PC(),bc||(Sc(),bc=!0),jx.add(e,t),t.C=0}}function $V(t,e){return JC(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=lu(Wt(t.Na,t,e),fA(t,t.C)),t.C++,!0)}H.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new uu(this,this.l,t);let i=this.s;if(this.U&&(i?(i=SC(i),bC(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=cA(this,s,e),n=fs(this.I),$e(n,"RID",t),$e(n,"CVER",22),this.F&&$e(n,"X-HTTP-Session-Id",this.F),fu(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(oA(i)))+"&"+e:this.o&&zx(n,this.o,i)),$x(this.i,s),this.bb&&$e(n,"TYPE","init"),this.P?($e(n,"$req",e),$e(n,"SID","null"),s.aa=!0,hy(s,n,null)):hy(s,n,e),this.H=2}}else this.H==3&&(t?uS(this,t):this.j.length==0||YC(this.i)||uS(this))};function uS(t,e){var n;e?n=e.m:n=t.W++;const r=fs(t.I);$e(r,"SID",t.K),$e(r,"RID",n),$e(r,"AID",t.V),fu(t,r),t.o&&t.s&&zx(r,t.o,t.s),n=new uu(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=cA(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),$x(t.i,n),hy(n,r,e)}function fu(t,e){t.na&&Ix(t.na,function(n,r){$e(e,r,n)}),t.h&&WC({},function(n,r){$e(e,r,n)})}function cA(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Wt(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const d=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{NV(d,o,"req"+c+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function uA(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Sc||PC(),bc||(Sc(),bc=!0),jx.add(e,t),t.A=0}}function Ux(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=lu(Wt(t.Ma,t),fA(t,t.A)),t.A++,!0)}H.Ma=function(){if(this.u=null,dA(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=lu(Wt(this.jb,this),t)}};H.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,tn(10),dm(this),dA(this))};function Hx(t){t.B!=null&&(le.clearTimeout(t.B),t.B=null)}function dA(t){t.g=new uu(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=fs(t.wa);$e(e,"RID","rpc"),$e(e,"SID",t.K),$e(e,"AID",t.V),$e(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&$e(e,"TO",t.qa),$e(e,"TYPE","xmlhttp"),fu(t,e),t.o&&t.s&&zx(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=am(fs(e)),n.s=null,n.S=!0,zC(n,t)}H.ib=function(){this.v!=null&&(this.v=null,dm(this),Ux(this),tn(19))};function Hh(t){t.v!=null&&(le.clearTimeout(t.v),t.v=null)}function hA(t,e){var n=null;if(t.g==e){Hh(t),Hx(t),t.g=null;var r=2}else if(my(t.i,e))n=e.F,ZC(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=rm(),Dt(r,new LC(r,n)),hm(t)}else uA(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&$V(t,e)||r==2&&Ux(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Ui(t,5);break;case 4:Ui(t,10);break;case 3:Ui(t,6);break;default:Ui(t,2)}}}function fA(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ui(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Wt(t.pb,t);n||(n=new Ki("//www.google.com/images/cleardot.gif"),le.location&&le.location.protocol=="http"||Vh(n,"https"),am(n)),jV(n.toString(),r)}else tn(2);t.H=0,t.h&&t.h.za(e),mA(t),lA(t)}H.pb=function(t){t?(this.l.info("Successfully pinged google.com"),tn(2)):(this.l.info("Failed to ping google.com"),tn(1))};function mA(t){if(t.H=0,t.ma=[],t.h){const e=eA(t.i);(e.length!=0||t.j.length!=0)&&(eS(t.ma,e),eS(t.ma,t.j),t.i.i.length=0,Tx(t.j),t.j.length=0),t.h.ya()}}function pA(t,e,n){var r=n instanceof Ki?fs(n):new Ki(n);if(r.g!="")e&&(r.g=e+"."+r.g),Uh(r,r.m);else{var s=le.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new Ki(null);r&&Vh(i,r),e&&(i.g=e),s&&Uh(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&$e(r,n,e),$e(r,"VER",t.ra),fu(t,r),r}function gA(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Ze(new lm({ob:!0})):new Ze(t.va),e.Oa(t.J),e}H.isActive=function(){return!!this.h&&this.h.isActive(this)};function yA(){}H=yA.prototype;H.Ba=function(){};H.Aa=function(){};H.za=function(){};H.ya=function(){};H.isActive=function(){return!0};H.Va=function(){};function Wh(){if(Na&&!(10<=Number(Jz)))throw Error("Environmental error: no available transport.")}Wh.prototype.g=function(t,e){return new Mn(t,e)};function Mn(t,e){kt.call(this),this.g=new aA(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!_c(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!_c(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Ya(this)}It(Mn,kt);Mn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;tn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=pA(t,null,t.Y),hm(t)};Mn.prototype.close=function(){Vx(this.g)};Mn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Nx(t),t=n);e.j.push(new CV(e.fb++,t)),e.H==3&&hm(e)};Mn.prototype.N=function(){this.g.h=null,delete this.j,Vx(this.g),delete this.g,Mn.$.N.call(this)};function vA(t){Lx.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}It(vA,Lx);function xA(){Fx.call(this),this.status=1}It(xA,Fx);function Ya(t){this.g=t}It(Ya,yA);Ya.prototype.Ba=function(){Dt(this.g,"a")};Ya.prototype.Aa=function(t){Dt(this.g,new vA(t))};Ya.prototype.za=function(t){Dt(this.g,new xA)};Ya.prototype.ya=function(){Dt(this.g,"b")};function BV(){this.blockSize=-1}function pr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}It(pr,BV);pr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function og(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}pr.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)og(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){og(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){og(this,r),s=0;break}}this.h=s,this.i+=e};pr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ce(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var zV={};function Wx(t){return-128<=t&&128>t?Xz(t,function(e){return new Ce([e|0],0>e?-1:0)}):new Ce([t|0],0>t?-1:0)}function Cr(t){if(isNaN(t)||!isFinite(t))return da;if(0>t)return Pt(Cr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=py;return new Ce(e,0)}function wA(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Pt(wA(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Cr(Math.pow(e,8)),r=da,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=Cr(Math.pow(e,i)),r=r.R(i).add(Cr(o))):(r=r.R(n),r=r.add(Cr(o)))}return r}var py=4294967296,da=Wx(0),gy=Wx(1),dS=Wx(16777216);H=Ce.prototype;H.ea=function(){if(Xn(this))return-Pt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:py+r)*e,e*=py}return t};H.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ns(this))return"0";if(Xn(this))return"-"+Pt(this).toString(t);for(var e=Cr(Math.pow(t,6)),n=this,r="";;){var s=Gh(n,e).g;n=qh(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,ns(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};H.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ns(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Xn(t){return t.h==-1}H.X=function(t){return t=qh(this,t),Xn(t)?-1:ns(t)?0:1};function Pt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ce(n,~t.h).add(gy)}H.abs=function(){return Xn(this)?Pt(this):this};H.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new Ce(n,n[n.length-1]&-2147483648?-1:0)};function qh(t,e){return t.add(Pt(e))}H.R=function(t){if(ns(this)||ns(t))return da;if(Xn(this))return Xn(t)?Pt(this).R(Pt(t)):Pt(Pt(this).R(t));if(Xn(t))return Pt(this.R(Pt(t)));if(0>this.X(dS)&&0>t.X(dS))return Cr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,id(n,2*r+2*s),n[2*r+2*s+1]+=i*l,id(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,id(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,id(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ce(n,0)};function id(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function yl(t,e){this.g=t,this.h=e}function Gh(t,e){if(ns(e))throw Error("division by zero");if(ns(t))return new yl(da,da);if(Xn(t))return e=Gh(Pt(t),e),new yl(Pt(e.g),Pt(e.h));if(Xn(e))return e=Gh(t,Pt(e)),new yl(Pt(e.g),e.h);if(30<t.g.length){if(Xn(t)||Xn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=gy,r=e;0>=r.X(t);)n=hS(n),r=hS(r);var s=Oo(n,1),i=Oo(r,1);for(r=Oo(r,2),n=Oo(n,2);!ns(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=Oo(r,1),n=Oo(n,1)}return e=qh(t,s.R(e)),new yl(s,e)}for(s=da;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Cr(n),o=i.R(e);Xn(o)||0<o.X(t);)n-=r,i=Cr(n),o=i.R(e);ns(i)&&(i=gy),s=s.add(i),t=qh(t,o)}return new yl(s,t)}H.gb=function(t){return Gh(this,t).h};H.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ce(n,this.h&t.h)};H.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ce(n,this.h|t.h)};H.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ce(n,this.h^t.h)};function hS(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ce(n,t.h)}function Oo(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new Ce(s,t.h)}Wh.prototype.createWebChannel=Wh.prototype.g;Mn.prototype.send=Mn.prototype.u;Mn.prototype.open=Mn.prototype.m;Mn.prototype.close=Mn.prototype.close;sm.NO_ERROR=0;sm.TIMEOUT=8;sm.HTTP_ERROR=6;FC.COMPLETE="complete";$C.EventType=cu;cu.OPEN="a";cu.CLOSE="b";cu.ERROR="c";cu.MESSAGE="d";kt.prototype.listen=kt.prototype.O;Ze.prototype.listenOnce=Ze.prototype.P;Ze.prototype.getLastError=Ze.prototype.Sa;Ze.prototype.getLastErrorCode=Ze.prototype.Ia;Ze.prototype.getStatus=Ze.prototype.da;Ze.prototype.getResponseJson=Ze.prototype.Wa;Ze.prototype.getResponseText=Ze.prototype.ja;Ze.prototype.send=Ze.prototype.ha;Ze.prototype.setWithCredentials=Ze.prototype.Oa;pr.prototype.digest=pr.prototype.l;pr.prototype.reset=pr.prototype.reset;pr.prototype.update=pr.prototype.j;Ce.prototype.add=Ce.prototype.add;Ce.prototype.multiply=Ce.prototype.R;Ce.prototype.modulo=Ce.prototype.gb;Ce.prototype.compare=Ce.prototype.X;Ce.prototype.toNumber=Ce.prototype.ea;Ce.prototype.toString=Ce.prototype.toString;Ce.prototype.getBits=Ce.prototype.D;Ce.fromNumber=Cr;Ce.fromString=wA;var VV=function(){return new Wh},UV=function(){return rm()},ag=sm,HV=FC,WV=To,fS={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},od=$C,qV=Ze,GV=pr,ha=Ce;const mS="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja="10.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=new fx("@firebase/firestore");function pS(){return lo.logLevel}function J(t,...e){if(lo.logLevel<=Ee.DEBUG){const n=e.map(qx);lo.debug(`Firestore (${Ja}): ${t}`,...n)}}function ms(t,...e){if(lo.logLevel<=Ee.ERROR){const n=e.map(qx);lo.error(`Firestore (${Ja}): ${t}`,...n)}}function ja(t,...e){if(lo.logLevel<=Ee.WARN){const n=e.map(qx);lo.warn(`Firestore (${Ja}): ${t}`,...n)}}function qx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${Ja}) INTERNAL ASSERTION FAILED: `+t;throw ms(e),new Error(e)}function Ve(t,e){t||oe()}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Hr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Bt.UNAUTHENTICATED))}shutdown(){}}class XV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class QV{constructor(e){this.t=e,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new os;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new os,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new os)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ve(typeof r.accessToken=="string"),new _A(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ve(e===null||typeof e=="string"),new Bt(e)}}class YV{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class JV{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new YV(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ZV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eU{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ve(typeof n.token=="string"),this.R=n.token,new ZV(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=tU(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Se(t,e){return t<e?-1:t>e?1:0}function Da(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return xt.fromMillis(Date.now())}static fromDate(e){return xt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new xt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new xt(0,0))}static max(){return new ce(new xt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ac.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ac?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Be extends Ac{construct(e,n,r){return new Be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(D.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const nU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends Ac{construct(e,n,r){return new Ht(e,n,r)}static isValidIdentifier(e){return nU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ht(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new K(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new K(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(n)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Be.fromString(e))}static fromName(e){return new te(Be.fromString(e).popFirst(5))}static empty(){return new te(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Be(e.slice()))}}function rU(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(r===1e9?new xt(n+1,0):new xt(n,r));return new li(s,te.empty(),e)}function sU(t){return new li(t.readTime,t.key,-1)}class li{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new li(ce.min(),te.empty(),-1)}static max(){return new li(ce.max(),te.empty(),-1)}}function iU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mu(t){if(t.code!==D.FAILED_PRECONDITION||t.message!==oU)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function pu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Gx.ae=-1;function fm(t){return t==null}function Kh(t){return t===0&&1/t==-1/0}function lU(t){return typeof t=="number"&&Number.isInteger(t)&&!Kh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Za(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function SA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ad(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ad(this.root,e,this.comparator,!1)}getReverseIterator(){return new ad(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ad(this.root,e,this.comparator,!0)}}class ad{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Rt.RED,this.left=s??Rt.EMPTY,this.right=i??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Rt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Rt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new yS(this.data.getIterator())}getIteratorFrom(e){return new yS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Gt(this.comparator);return n.data=e,n}}class yS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new dr([])}unionWith(e){let n=new Gt(Ht.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new dr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Da(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new bA("Invalid base64 string: "+i):i}}(e);return new Qt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qt.EMPTY_BYTE_STRING=new Qt("");const cU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ci(t){if(Ve(!!t),typeof t=="string"){let e=0;const n=cU.exec(t);if(Ve(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dt(t.seconds),nanos:dt(t.nanos)}}function dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function co(t){return typeof t=="string"?Qt.fromBase64String(t):Qt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Xx(t){const e=t.mapValue.fields.__previous_value__;return Kx(e)?Xx(e):e}function Rc(t){const e=ci(t.mapValue.fields.__local_write_time__.timestampValue);return new xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Pc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Pc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Pc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function uo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Kx(t)?4:dU(t)?9007199254740991:10:oe()}function Br(t,e){if(t===e)return!0;const n=uo(t);if(n!==uo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Rc(t).isEqual(Rc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ci(s.timestampValue),a=ci(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return co(s.bytesValue).isEqual(co(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return dt(s.geoPointValue.latitude)===dt(i.geoPointValue.latitude)&&dt(s.geoPointValue.longitude)===dt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return dt(s.integerValue)===dt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=dt(s.doubleValue),a=dt(i.doubleValue);return o===a?Kh(o)===Kh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Da(t.arrayValue.values||[],e.arrayValue.values||[],Br);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(gS(o)!==gS(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Br(o[l],a[l])))return!1;return!0}(t,e);default:return oe()}}function Nc(t,e){return(t.values||[]).find(n=>Br(n,e))!==void 0}function Oa(t,e){if(t===e)return 0;const n=uo(t),r=uo(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=dt(i.integerValue||i.doubleValue),l=dt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return vS(t.timestampValue,e.timestampValue);case 4:return vS(Rc(t),Rc(e));case 5:return Se(t.stringValue,e.stringValue);case 6:return function(i,o){const a=co(i),l=co(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Se(a[c],l[c]);if(d!==0)return d}return Se(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Se(dt(i.latitude),dt(o.latitude));return a!==0?a:Se(dt(i.longitude),dt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const d=Oa(a[c],l[c]);if(d)return d}return Se(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===ld.mapValue&&o===ld.mapValue)return 0;if(i===ld.mapValue)return 1;if(o===ld.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const m=Se(l[h],d[h]);if(m!==0)return m;const p=Oa(a[l[h]],c[d[h]]);if(p!==0)return p}return Se(l.length,d.length)}(t.mapValue,e.mapValue);default:throw oe()}}function vS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=ci(t),r=ci(e),s=Se(n.seconds,r.seconds);return s!==0?s:Se(n.nanos,r.nanos)}function Ma(t){return yy(t)}function yy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ci(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return co(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=yy(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${yy(n.fields[o])}`;return s+"}"}(t.mapValue):oe()}function xS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function vy(t){return!!t&&"integerValue"in t}function Qx(t){return!!t&&"arrayValue"in t}function wS(t){return!!t&&"nullValue"in t}function _S(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Md(t){return!!t&&"mapValue"in t}function Vl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Za(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Vl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function dU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.value=e}static empty(){return new Qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Md(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vl(n)}setAll(e){let n=Ht.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Vl(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Md(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Br(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Md(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Za(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Qn(Vl(this.value))}}function TA(t){const e=[];return Za(t.fields,(n,r)=>{const s=new Ht([n]);if(Md(r)){const i=TA(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new dr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ut(e,0,ce.min(),ce.min(),ce.min(),Qn.empty(),0)}static newFoundDocument(e,n,r,s){return new Ut(e,1,n,ce.min(),r,s,0)}static newNoDocument(e,n){return new Ut(e,2,n,ce.min(),ce.min(),Qn.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,ce.min(),ce.min(),Qn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n){this.position=e,this.inclusive=n}}function ES(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=Oa(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function SS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Br(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n="asc"){this.field=e,this.dir=n}}function hU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{}class ft extends kA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new mU(e,n,r):n==="array-contains"?new yU(e,r):n==="in"?new vU(e,r):n==="not-in"?new xU(e,r):n==="array-contains-any"?new wU(e,r):new ft(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new pU(e,r):new gU(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Oa(n,this.value)):n!==null&&uo(this.value)===uo(n)&&this.matchesComparison(Oa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class gr extends kA{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new gr(e,n)}matches(e){return IA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function IA(t){return t.op==="and"}function CA(t){return fU(t)&&IA(t)}function fU(t){for(const e of t.filters)if(e instanceof gr)return!1;return!0}function xy(t){if(t instanceof ft)return t.field.canonicalString()+t.op.toString()+Ma(t.value);if(CA(t))return t.filters.map(e=>xy(e)).join(",");{const e=t.filters.map(n=>xy(n)).join(",");return`${t.op}(${e})`}}function AA(t,e){return t instanceof ft?function(r,s){return s instanceof ft&&r.op===s.op&&r.field.isEqual(s.field)&&Br(r.value,s.value)}(t,e):t instanceof gr?function(r,s){return s instanceof gr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&AA(o,s.filters[a]),!0):!1}(t,e):void oe()}function RA(t){return t instanceof ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Ma(n.value)}`}(t):t instanceof gr?function(n){return n.op.toString()+" {"+n.getFilters().map(RA).join(" ,")+"}"}(t):"Filter"}class mU extends ft{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class pU extends ft{constructor(e,n){super(e,"in",n),this.keys=PA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class gU extends ft{constructor(e,n){super(e,"not-in",n),this.keys=PA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function PA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class yU extends ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Qx(n)&&Nc(n.arrayValue,this.value)}}class vU extends ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Nc(this.value.arrayValue,n)}}class xU extends ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(Nc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Nc(this.value.arrayValue,n)}}class wU extends ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Qx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Nc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.he=null}}function bS(t,e=null,n=[],r=[],s=null,i=null,o=null){return new _U(t,e,n,r,s,i,o)}function Yx(t){const e=he(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>xy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),fm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ma(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ma(r)).join(",")),e.he=n}return e.he}function Jx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!AA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!SS(t.startAt,e.startAt)&&SS(t.endAt,e.endAt)}function wy(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function EU(t,e,n,r,s,i,o,a){return new gu(t,e,n,r,s,i,o,a)}function Zx(t){return new gu(t)}function TS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function NA(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function ew(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function jA(t){return t.collectionGroup!==null}function Hl(t){const e=he(t);if(e.Pe===null){e.Pe=[];const n=ew(e),r=NA(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new Ul(n)),e.Pe.push(new Ul(Ht.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.Pe.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Ul(Ht.keyField(),i))}}}return e.Pe}function ps(t){const e=he(t);return e.Ie||(e.Ie=SU(e,Hl(t))),e.Ie}function SU(t,e){if(t.limitType==="F")return bS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ul(s.field,i)});const n=t.endAt?new Xh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Xh(t.startAt.position,t.startAt.inclusive):null;return bS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function _y(t,e){e.getFirstInequalityField(),ew(t);const n=t.filters.concat([e]);return new gu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ey(t,e,n){return new gu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function mm(t,e){return Jx(ps(t),ps(e))&&t.limitType===e.limitType}function DA(t){return`${Yx(ps(t))}|lt:${t.limitType}`}function Sy(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>RA(s)).join(", ")}]`),fm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ma(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ma(s)).join(",")),`Target(${r})`}(ps(t))}; limitType=${t.limitType})`}function pm(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Hl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=ES(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Hl(r),s)||r.endAt&&!function(o,a,l){const c=ES(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Hl(r),s))}(t,e)}function bU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function OA(t){return(e,n)=>{let r=!1;for(const s of Hl(t)){const i=TU(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function TU(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Oa(l,c):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Za(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return SA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU=new Xe(te.comparator);function gs(){return kU}const MA=new Xe(te.comparator);function Il(...t){let e=MA;for(const n of t)e=e.insert(n.key,n);return e}function LA(t){let e=MA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hi(){return Wl()}function FA(){return Wl()}function Wl(){return new el(t=>t.toString(),(t,e)=>t.isEqual(e))}const IU=new Xe(te.comparator),CU=new Gt(te.comparator);function pe(...t){let e=CU;for(const n of t)e=e.add(n);return e}const AU=new Gt(Se);function RU(){return AU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kh(e)?"-0":e}}function BA(t){return{integerValue:""+t}}function PU(t,e){return lU(e)?BA(e):$A(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(){this._=void 0}}function NU(t,e,n){return t instanceof Qh?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Kx(i)&&(i=Xx(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof jc?VA(t,e):t instanceof Dc?UA(t,e):function(s,i){const o=zA(s,i),a=kS(o)+kS(s.Ee);return vy(o)&&vy(s.Ee)?BA(a):$A(s.serializer,a)}(t,e)}function jU(t,e,n){return t instanceof jc?VA(t,e):t instanceof Dc?UA(t,e):n}function zA(t,e){return t instanceof Yh?function(r){return vy(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Qh extends gm{}class jc extends gm{constructor(e){super(),this.elements=e}}function VA(t,e){const n=HA(e);for(const r of t.elements)n.some(s=>Br(s,r))||n.push(r);return{arrayValue:{values:n}}}class Dc extends gm{constructor(e){super(),this.elements=e}}function UA(t,e){let n=HA(e);for(const r of t.elements)n=n.filter(s=>!Br(s,r));return{arrayValue:{values:n}}}class Yh extends gm{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function kS(t){return dt(t.integerValue||t.doubleValue)}function HA(t){return Qx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function DU(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof jc&&s instanceof jc||r instanceof Dc&&s instanceof Dc?Da(r.elements,s.elements,Br):r instanceof Yh&&s instanceof Yh?Br(r.Ee,s.Ee):r instanceof Qh&&s instanceof Qh}(t.transform,e.transform)}class OU{constructor(e,n){this.version=e,this.transformResults=n}}class Mr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mr}static exists(e){return new Mr(void 0,e)}static updateTime(e){return new Mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ld(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ym{}function WA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new tw(t.key,Mr.none()):new yu(t.key,t.data,Mr.none());{const n=t.data,r=Qn.empty();let s=new Gt(Ht.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ko(t.key,r,new dr(s.toArray()),Mr.none())}}function MU(t,e,n){t instanceof yu?function(s,i,o){const a=s.value.clone(),l=CS(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ko?function(s,i,o){if(!Ld(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=CS(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(qA(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ql(t,e,n,r){return t instanceof yu?function(i,o,a,l){if(!Ld(i.precondition,o))return a;const c=i.value.clone(),d=AS(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ko?function(i,o,a,l){if(!Ld(i.precondition,o))return a;const c=AS(i.fieldTransforms,l,o),d=o.data;return d.setAll(qA(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Ld(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function LU(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=zA(r.transform,s||null);i!=null&&(n===null&&(n=Qn.empty()),n.set(r.field,i))}return n||null}function IS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Da(r,s,(i,o)=>DU(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yu extends ym{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ko extends ym{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function qA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function CS(t,e,n){const r=new Map;Ve(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,jU(o,a,n[s]))}return r}function AS(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,NU(i,o,e))}return r}class tw extends ym{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class FU extends ym{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&MU(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ql(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ql(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=FA();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=WA(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&Da(this.mutations,e.mutations,(n,r)=>IS(n,r))&&Da(this.baseMutations,e.baseMutations,(n,r)=>IS(n,r))}}class nw{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ve(e.mutations.length===r.length);let s=function(){return IU}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new nw(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut,xe;function VU(t){switch(t){default:return oe();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0}}function GA(t){if(t===void 0)return ms("GRPC error has no .code"),D.UNKNOWN;switch(t){case ut.OK:return D.OK;case ut.CANCELLED:return D.CANCELLED;case ut.UNKNOWN:return D.UNKNOWN;case ut.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case ut.INTERNAL:return D.INTERNAL;case ut.UNAVAILABLE:return D.UNAVAILABLE;case ut.UNAUTHENTICATED:return D.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case ut.NOT_FOUND:return D.NOT_FOUND;case ut.ALREADY_EXISTS:return D.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return D.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case ut.ABORTED:return D.ABORTED;case ut.OUT_OF_RANGE:return D.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return D.UNIMPLEMENTED;case ut.DATA_LOSS:return D.DATA_LOSS;default:return oe()}}(xe=ut||(ut={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU=new ha([4294967295,4294967295],0);function RS(t){const e=UU().encode(t),n=new GV;return n.update(e),new Uint8Array(n.digest())}function PS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ha([n,r],0),new ha([s,i],0)]}class rw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Cl(`Invalid padding: ${n}`);if(r<0)throw new Cl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Cl(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=ha.fromNumber(this.Ae)}Ve(e,n,r){let s=e.add(n.multiply(ha.fromNumber(r)));return s.compare(HU)===1&&(s=new ha([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=RS(e),[r,s]=PS(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);if(!this.me(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new rw(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=RS(e),[r,s]=PS(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Cl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,vu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new vm(ce.min(),s,new Xe(Se),gs(),pe())}}class vu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new vu(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n,r,s){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=s}}class KA{constructor(e,n){this.targetId=e,this.ye=n}}class XA{constructor(e,n,r=Qt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class NS{constructor(){this.we=0,this.Se=DS(),this.be=Qt.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=pe(),n=pe(),r=pe();return this.Se.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:oe()}}),new vu(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=DS()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class WU{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=gs(),this.Ue=jS(),this.We=new Xe(Se)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,s)=>{this.Ye(s)&&n(s)})}Xe(e){const n=e.targetId,r=e.ye.count,s=this.et(n);if(s){const i=s.target;if(wy(i))if(r===0){const o=new te(i.path);this.je(n,o,Ut.newNoDocument(o,ce.min()))}else Ve(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),l=a?this.rt(a,e,o):1;if(l!==0){this.Ze(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,c)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=co(r).toUint8Array()}catch(l){if(l instanceof bA)return ja("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new rw(o,s,i)}catch(l){return ja(l instanceof Cl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.je(n,i,null),s++)}),s}_t(e){const n=new Map;this.Ke.forEach((i,o)=>{const a=this.et(o);if(a){if(i.current&&wy(a.target)){const l=new te(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,Ut.newNoDocument(l,e))}i.Fe&&(n.set(o,i.xe()),i.Oe())}});let r=pe();this.Ue.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.et(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.$e.forEach((i,o)=>o.setReadTime(e));const s=new vm(e,n,this.We,this.$e,r);return this.$e=gs(),this.Ue=jS(),this.We=new Xe(Se),s}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const s=this.Je(e);this.ut(e,n)?s.Ne(n,1):s.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new NS,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Gt(Se),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new NS),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function jS(){return new Xe(te.comparator)}function DS(){return new Xe(te.comparator)}const qU=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),GU=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),KU=(()=>({and:"AND",or:"OR"}))();class XU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function by(t,e){return t.useProto3Json||fm(e)?e:{value:e}}function Jh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function QU(t,e){return Jh(t,e.toTimestamp())}function Lr(t){return Ve(!!t),ce.fromTimestamp(function(n){const r=ci(n);return new xt(r.seconds,r.nanos)}(t))}function sw(t,e){return function(r){return new Be(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function YA(t){const e=Be.fromString(t);return Ve(tR(e)),e}function Ty(t,e){return sw(t.databaseId,e.path)}function lg(t,e){const n=YA(e);if(n.get(1)!==t.databaseId.projectId)throw new K(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(JA(n))}function ky(t,e){return sw(t.databaseId,e)}function YU(t){const e=YA(t);return e.length===4?Be.emptyPath():JA(e)}function Iy(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JA(t){return Ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function OS(t,e,n){return{name:Ty(t,e),fields:n.value.mapValue.fields}}function JU(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Ve(d===void 0||typeof d=="string"),Qt.fromBase64String(d||"")):(Ve(d===void 0||d instanceof Uint8Array),Qt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?D.UNKNOWN:GA(c.code);return new K(d,c.message||"")}(o);n=new XA(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=lg(t,r.document.name),i=Lr(r.document.updateTime),o=r.document.createTime?Lr(r.document.createTime):ce.min(),a=new Qn({mapValue:{fields:r.document.fields}}),l=Ut.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Fd(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=lg(t,r.document),i=r.readTime?Lr(r.readTime):ce.min(),o=Ut.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Fd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=lg(t,r.document),i=r.removedTargetIds||[];n=new Fd([],i,s,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new zU(s,i),a=r.targetId;n=new KA(a,o)}}return n}function ZU(t,e){let n;if(e instanceof yu)n={update:OS(t,e.key,e.value)};else if(e instanceof tw)n={delete:Ty(t,e.key)};else if(e instanceof ko)n={update:OS(t,e.key,e.data),updateMask:l8(e.fieldMask)};else{if(!(e instanceof FU))return oe();n={verify:Ty(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Qh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof jc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Dc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Yh)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:QU(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:oe()}(t,e.precondition)),n}function e8(t,e){return t&&t.length>0?(Ve(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Lr(s.updateTime):Lr(i);return o.isEqual(ce.min())&&(o=Lr(i)),new OU(o,s.transformResults||[])}(n,e))):[]}function t8(t,e){return{documents:[ky(t,e.path)]}}function n8(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=ky(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ky(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return eR(gr.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:Fo(h.field),direction:i8(h.dir)}}(c))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=by(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function r8(t){let e=YU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ve(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const m=ZA(h);return m instanceof gr&&CA(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(m=>function(v){return new Ul($o(v.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(h){let m;return m=typeof h=="object"?h.value:h,fm(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(h){const m=!!h.before,p=h.values||[];return new Xh(p,m)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const m=!h.before,p=h.values||[];return new Xh(p,m)}(n.endAt)),EU(e,s,o,i,a,"F",l,c)}function s8(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ZA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=$o(n.unaryFilter.field);return ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=$o(n.unaryFilter.field);return ft.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=$o(n.unaryFilter.field);return ft.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=$o(n.unaryFilter.field);return ft.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return ft.create($o(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return gr.create(n.compositeFilter.filters.map(r=>ZA(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function i8(t){return qU[t]}function o8(t){return GU[t]}function a8(t){return KU[t]}function Fo(t){return{fieldPath:t.canonicalString()}}function $o(t){return Ht.fromServerFormat(t.fieldPath)}function eR(t){return t instanceof ft?function(n){if(n.op==="=="){if(_S(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NAN"}};if(wS(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_S(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NOT_NAN"}};if(wS(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fo(n.field),op:o8(n.op),value:n.value}}}(t):t instanceof gr?function(n){const r=n.getFilters().map(s=>eR(s));return r.length===1?r[0]:{compositeFilter:{op:a8(n.op),filters:r}}}(t):oe()}function l8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function tR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,n,r,s,i=ce.min(),o=ce.min(),a=Qt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(e){this.ht=e}}function u8(t){const e=r8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ey(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(){this._n=new h8}addToCollectionParentIndex(e,n){return this._n.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(li.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(li.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class h8{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Gt(Be.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Gt(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new La(0)}static Bn(){return new La(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(){this.changes=new el(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ql(r.mutation,s,dr.empty(),xt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const s=Hi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Il();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Hi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=gs();const o=Wl(),a=function(){return Wl()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof ko)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),ql(d.mutation,c,d.mutation.getFieldMask(),xt.now())):o.set(c.key,dr.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new m8(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Wl();let s=new Xe((o,a)=>o-a),i=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||dr.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||pe()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=FA();d.forEach(m=>{if(!i.has(m)){const p=WA(n.get(m),r.get(m));p!==null&&h.set(m,p),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return te.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Hi());let a=-1,l=i;return o.next(c=>F.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?F.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,pe())).next(d=>({batchId:a,changes:LA(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=Il();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=Il();return this.indexManager.getCollectionParents(e,s).next(o=>F.forEach(o,a=>{const l=function(d,h){return new gu(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((d,h)=>{i=i.insert(d,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((a,l)=>{const c=l.getKey();i.get(c)===null&&(i=i.insert(c,Ut.newInvalidDocument(c)))});let o=Il();return i.forEach((a,l)=>{const c=s.get(a);c!==void 0&&ql(c.mutation,l,dr.empty(),xt.now()),pm(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return F.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Lr(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:u8(s.bundledQuery),readTime:Lr(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(){this.overlays=new Xe(te.comparator),this.hr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hi();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.It(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Hi(),i=n.length+1,o=new te(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Xe((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Hi(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Hi(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return F.resolve(a)}It(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new BU(n,r));let i=this.hr.get(n);i===void 0&&(i=pe(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(){this.Pr=new Gt(_t.Ir),this.Tr=new Gt(_t.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new _t(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new _t(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new te(new Be([])),r=new _t(n,e),s=new _t(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new te(new Be([])),r=new _t(n,e),s=new _t(n,e+1);let i=pe();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new _t(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class _t{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return te.comparator(e.key,n.key)||Se(e.pr,n.pr)}static Er(e,n){return Se(e.pr,n.pr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Gt(_t.Ir)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new $U(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new _t(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new _t(n,0),s=new _t(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Gt(Se);return n.forEach(s=>{const i=new _t(s,0),o=new _t(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),F.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new _t(new te(i),0);let a=new Gt(Se);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),F.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ve(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return F.forEach(n.mutations,s=>{const i=new _t(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new _t(n,0),s=this.wr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}vr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(e){this.Cr=e,this.docs=function(){return new Xe(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let r=gs();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ut.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=gs();const o=n.path,a=new te(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||iU(sU(d),r)<=0||(s.has(d.key)||pm(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){oe()}Fr(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new w8(this)}getSize(e){return F.resolve(this.size)}}class w8 extends f8{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(e){this.persistence=e,this.Mr=new el(n=>Yx(n),Jx),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Or=0,this.Nr=new iw,this.targetCount=0,this.Br=La.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),F.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new La(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.qn(n),F.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(e,n){this.Lr={},this.overlays={},this.kr=new Gx(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new _8(this),this.indexManager=new d8,this.remoteDocumentCache=function(s){return new x8(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new c8(n),this.$r=new g8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new y8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new v8(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const s=new S8(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return F.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class S8 extends aU{constructor(e){super(),this.currentSequenceNumber=e}}class ow{constructor(e){this.persistence=e,this.zr=new iw,this.jr=null}static Hr(e){return new ow(e)}get Jr(){if(this.jr)return this.jr;throw oe()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),F.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Jr,r=>{const s=te.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,ce.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return F.or([()=>F.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=pe(),s=pe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new aw(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(){this.$i=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Wi(e,n).next(i=>i||this.Gi(e,n,s,r)).next(i=>i||this.zi(e,n))}Wi(e,n){if(TS(n))return F.resolve(null);let r=ps(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ey(n,null,"F"),r=ps(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=pe(...i);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ji(n,a);return this.Hi(n,c,o,l.readTime)?this.Wi(e,Ey(n,null,"F")):this.Ji(e,c,n,l)}))})))}Gi(e,n,r,s){return TS(n)||s.isEqual(ce.min())?this.zi(e,n):this.Ui.getDocuments(e,r).next(i=>{const o=this.ji(n,i);return this.Hi(n,o,r,s)?this.zi(e,n):(pS()<=Ee.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Sy(n)),this.Ji(e,o,n,rU(s,-1)))})}ji(e,n){let r=new Gt(OA(e));return n.forEach((s,i)=>{pm(e,i)&&(r=r.add(i))}),r}Hi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}zi(e,n){return pS()<=Ee.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Sy(n)),this.Ui.getDocumentsMatchingQuery(e,n,li.min())}Ji(e,n,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8{constructor(e,n,r,s){this.persistence=e,this.Yi=n,this.serializer=s,this.Zi=new Xe(Se),this.Xi=new el(i=>Yx(i),Jx),this.es=new Map,this.ts=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this.ns(r)}ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new p8(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Zi))}}function k8(t,e,n,r){return new T8(t,e,n,r)}async function nR(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=pe();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function I8(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.ts.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,m=h.keys();let p=F.resolve();return m.forEach(v=>{p=p.next(()=>d.getEntry(l,v)).next(y=>{const _=c.docVersions.get(v);Ve(_!==null),y.version.compareTo(_)<0&&(h.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),d.addEntry(y)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=pe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function rR(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function C8(t,e){const n=he(t),r=e.snapshotVersion;let s=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ts.newChangeBuffer({trackRemovals:!0});s=n.Zi;const a=[];e.targetChanges.forEach((d,h)=>{const m=s.get(h);if(!m)return;a.push(n.Qr.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(i,d.addedDocuments,h)));let p=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(Qt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),s=s.insert(h,p),function(y,_,x){return y.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,p,d)&&a.push(n.Qr.updateTargetData(i,p))});let l=gs(),c=pe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(A8(i,o,e.documentUpdates).next(d=>{l=d.ss,c=d.os})),!r.isEqual(ce.min())){const d=n.Qr.getLastRemoteSnapshotVersion(i).next(h=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return F.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Zi=s,i))}function A8(t,e,n){let r=pe(),s=pe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=gs();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ce.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):J("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ss:o,os:s}})}function R8(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function P8(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new Us(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Zi.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(r.targetId,r),n.Xi.set(e,r.targetId)),r})}async function Cy(t,e,n){const r=he(t),s=r.Zi.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!pu(o))throw o;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Zi=r.Zi.remove(e),r.Xi.delete(s.target)}function MS(t,e,n){const r=he(t);let s=ce.min(),i=pe();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,c,d){const h=he(l),m=h.Xi.get(d);return m!==void 0?F.resolve(h.Zi.get(m)):h.Qr.getTargetData(c,d)}(r,o,ps(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Yi.getDocumentsMatchingQuery(o,e,n?s:ce.min(),n?i:pe())).next(a=>(N8(r,bU(e),a),{documents:a,_s:i})))}function N8(t,e,n){let r=t.es.get(e)||ce.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.es.set(e,r)}class LS{constructor(){this.activeTargetIds=RU()}Is(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ts(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ps(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class j8{constructor(){this.Ys=new LS,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}updateQueryState(e,n,r){this.Zs[e]=n}removeLocalQueryTarget(e){this.Ys.Ts(e)}isLocalQueryTarget(e){return this.Ys.activeTargetIds.has(e)}clearQueryState(e){delete this.Zs[e]}getAllActiveQueryTargets(){return this.Ys.activeTargetIds}isActiveQueryTarget(e){return this.Ys.activeTargetIds.has(e)}start(){return this.Ys=new LS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{Xs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(){this.eo=()=>this.no(),this.ro=()=>this.io(),this.so=[],this.oo()}Xs(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}oo(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}no(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}io(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cd=null;function cg(){return cd===null?cd=function(){return 268435456+Math.round(2147483648*Math.random())}():cd++,"0x"+cd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(e){this._o=e._o,this.ao=e.ao}uo(e){this.co=e}lo(e){this.ho=e}onMessage(e){this.Po=e}close(){this.ao()}send(e){this._o(e)}Io(){this.co()}To(e){this.ho(e)}Eo(e){this.Po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection";class L8 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ao=r+"://"+n.host,this.Ro=`projects/${s}/databases/${i}`,this.Vo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get mo(){return!1}fo(n,r,s,i,o){const a=cg(),l=this.po(n,r);J("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(c,i,o),this.wo(n,l,c,s).then(d=>(J("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw ja("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}So(n,r,s,i,o,a){return this.fo(n,r,s,i,o)}yo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ja}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}po(n,r){const s=O8[n];return`${this.Ao}/v1/${r}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}wo(e,n,r,s){const i=cg();return new Promise((o,a)=>{const l=new qV;l.setWithCredentials(!0),l.listenOnce(HV.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ag.NO_ERROR:const d=l.getResponseJson();J(Ft,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case ag.TIMEOUT:J(Ft,`RPC '${e}' ${i} timed out`),a(new K(D.DEADLINE_EXCEEDED,"Request time out"));break;case ag.HTTP_ERROR:const h=l.getStatus();if(J(Ft,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const v=function(_){const x=_.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(x)>=0?x:D.UNKNOWN}(p.status);a(new K(v,p.message))}else a(new K(D.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new K(D.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{J(Ft,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);J(Ft,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}bo(e,n,r){const s=cg(),i=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=VV(),a=UV(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.yo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");J(Ft,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);let m=!1,p=!1;const v=new M8({_o:_=>{p?J(Ft,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(m||(J(Ft,`Opening RPC '${e}' stream ${s} transport.`),h.open(),m=!0),J(Ft,`RPC '${e}' stream ${s} sending:`,_),h.send(_))},ao:()=>h.close()}),y=(_,x,g)=>{_.listen(x,w=>{try{g(w)}catch(E){setTimeout(()=>{throw E},0)}})};return y(h,od.EventType.OPEN,()=>{p||J(Ft,`RPC '${e}' stream ${s} transport opened.`)}),y(h,od.EventType.CLOSE,()=>{p||(p=!0,J(Ft,`RPC '${e}' stream ${s} transport closed`),v.To())}),y(h,od.EventType.ERROR,_=>{p||(p=!0,ja(Ft,`RPC '${e}' stream ${s} transport errored:`,_),v.To(new K(D.UNAVAILABLE,"The operation could not be completed")))}),y(h,od.EventType.MESSAGE,_=>{var x;if(!p){const g=_.data[0];Ve(!!g);const w=g,E=w.error||((x=w[0])===null||x===void 0?void 0:x.error);if(E){J(Ft,`RPC '${e}' stream ${s} received error:`,E);const S=E.status;let k=function(C){const R=ut[C];if(R!==void 0)return GA(R)}(S),T=E.message;k===void 0&&(k=D.INTERNAL,T="Unknown error status: "+S+" with message "+E.message),p=!0,v.To(new K(k,T)),h.close()}else J(Ft,`RPC '${e}' stream ${s} received:`,g),v.Eo(g)}}),y(a,WV.STAT_EVENT,_=>{_.stat===fS.PROXY?J(Ft,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===fS.NOPROXY&&J(Ft,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.Io()},0),v}}function ug(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(t){return new XU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Do=r,this.vo=s,this.Co=i,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}reset(){this.Fo=0}Oo(){this.Fo=this.Co}No(e){this.cancel();const n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),s=Math.max(0,n-r);s>0&&J("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Fo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Mo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.xo=Date.now(),e())),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}Lo(){this.Mo!==null&&(this.Mo.skipDelay(),this.Mo=null)}cancel(){this.Mo!==null&&(this.Mo.cancel(),this.Mo=null)}Bo(){return(Math.random()-.5)*this.Fo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.ko=r,this.qo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new sR(e,n)}Wo(){return this.state===1||this.state===5||this.Go()}Go(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.zo()}async stop(){this.Wo()&&await this.close(0)}jo(){this.state=0,this.Uo.reset()}Ho(){this.Go()&&this.Ko===null&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,()=>this.Jo()))}Yo(e){this.Zo(),this.stream.send(e)}async Jo(){if(this.Go())return this.close(0)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}Xo(){this.$o&&(this.$o.cancel(),this.$o=null)}async close(e,n){this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,e!==4?this.Uo.reset():n&&n.code===D.RESOURCE_EXHAUSTED?(ms(n.toString()),ms("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.e_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.lo(n)}e_(){}auth(){this.state=1;const e=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Qo===n&&this.n_(r,s)},r=>{e(()=>{const s=new K(D.UNKNOWN,"Fetching auth token failed: "+r.message);return this.r_(s)})})}n_(e,n){const r=this.t_(this.Qo);this.stream=this.i_(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.$o=this.oi.enqueueAfterDelay(this.qo,1e4,()=>(this.Go()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.lo(s=>{r(()=>this.r_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}zo(){this.state=5,this.Uo.No(async()=>{this.state=0,this.start()})}r_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}t_(e){return n=>{this.oi.enqueueAndForget(()=>this.Qo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class F8 extends iR{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}i_(e,n){return this.connection.bo("Listen",e,n)}onMessage(e){this.Uo.reset();const n=JU(this.serializer,e),r=function(i){if(!("targetChange"in i))return ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?Lr(o.readTime):ce.min()}(e);return this.listener.s_(n,r)}o_(e){const n={};n.database=Iy(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=wy(l)?{documents:t8(i,l)}:{query:n8(i,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=QA(i,o.resumeToken);const c=by(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=Jh(i,o.snapshotVersion.toTimestamp());const c=by(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=s8(this.serializer,e);r&&(n.labels=r),this.Yo(n)}__(e){const n={};n.database=Iy(this.serializer),n.removeTarget=e,this.Yo(n)}}class $8 extends iR{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.a_=!1}get u_(){return this.a_}start(){this.a_=!1,this.lastStreamToken=void 0,super.start()}e_(){this.a_&&this.c_([])}i_(e,n){return this.connection.bo("Write",e,n)}onMessage(e){if(Ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();const n=e8(e.writeResults,e.commitTime),r=Lr(e.commitTime);return this.listener.l_(r,n)}return Ve(!e.writeResults||e.writeResults.length===0),this.a_=!0,this.listener.h_()}P_(){const e={};e.database=Iy(this.serializer),this.Yo(e)}c_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ZU(this.serializer,r))};this.Yo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.I_=!1}T_(){if(this.I_)throw new K(D.FAILED_PRECONDITION,"The client has already been terminated.")}fo(e,n,r){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.fo(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(D.UNKNOWN,s.toString())})}So(e,n,r,s){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(D.UNKNOWN,i.toString())})}terminate(){this.I_=!0}}class z8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}V_(){this.d_===0&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.A_=null,this.f_("Backend didn't respond within 10 seconds."),this.m_("Offline"),Promise.resolve())))}g_(e){this.state==="Online"?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.m_("Offline")))}set(e){this.p_(),this.d_=0,e==="Online"&&(this.R_=!1),this.m_(e)}m_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}f_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.R_?(ms(n),this.R_=!1):J("OnlineStateTracker",n)}p_(){this.A_!==null&&(this.A_.cancel(),this.A_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=i,this.D_.Xs(o=>{r.enqueueAndForget(async()=>{Io(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=he(l);c.S_.add(4),await xu(c),c.v_.set("Unknown"),c.S_.delete(4),await wm(c)}(this))})}),this.v_=new z8(r,s)}}async function wm(t){if(Io(t))for(const e of t.b_)await e(!0)}async function xu(t){for(const e of t.b_)await e(!1)}function oR(t,e){const n=he(t);n.w_.has(e.targetId)||(n.w_.set(e.targetId,e),uw(n)?cw(n):tl(n).Go()&&lw(n,e))}function aR(t,e){const n=he(t),r=tl(n);n.w_.delete(e),r.Go()&&lR(n,e),n.w_.size===0&&(r.Go()?r.Ho():Io(n)&&n.v_.set("Unknown"))}function lw(t,e){if(t.C_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}tl(t).o_(e)}function lR(t,e){t.C_.Le(e),tl(t).__(e)}function cw(t){t.C_=new WU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.w_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),tl(t).start(),t.v_.V_()}function uw(t){return Io(t)&&!tl(t).Wo()&&t.w_.size>0}function Io(t){return he(t).S_.size===0}function cR(t){t.C_=void 0}async function U8(t){t.w_.forEach((e,n)=>{lw(t,e)})}async function H8(t,e){cR(t),uw(t)?(t.v_.g_(e),cw(t)):t.v_.set("Unknown")}async function W8(t,e,n){if(t.v_.set("Online"),e instanceof XA&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.w_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.w_.delete(a),s.C_.removeTarget(a))}(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zh(t,r)}else if(e instanceof Fd?t.C_.Ge(e):e instanceof KA?t.C_.Xe(e):t.C_.He(e),!n.isEqual(ce.min()))try{const r=await rR(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.C_._t(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.w_.get(c);d&&i.w_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.w_.get(l);if(!d)return;i.w_.set(l,d.withResumeToken(Qt.EMPTY_BYTE_STRING,d.snapshotVersion)),lR(i,l);const h=new Us(d.target,l,c,d.sequenceNumber);lw(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){J("RemoteStore","Failed to raise snapshot:",r),await Zh(t,r)}}async function Zh(t,e,n){if(!pu(e))throw e;t.S_.add(1),await xu(t),t.v_.set("Offline"),n||(n=()=>rR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),t.S_.delete(1),await wm(t)})}function uR(t,e){return e().catch(n=>Zh(t,n,e))}async function _m(t){const e=he(t),n=ui(e);let r=e.y_.length>0?e.y_[e.y_.length-1].batchId:-1;for(;q8(e);)try{const s=await R8(e.localStore,r);if(s===null){e.y_.length===0&&n.Ho();break}r=s.batchId,G8(e,s)}catch(s){await Zh(e,s)}dR(e)&&hR(e)}function q8(t){return Io(t)&&t.y_.length<10}function G8(t,e){t.y_.push(e);const n=ui(t);n.Go()&&n.u_&&n.c_(e.mutations)}function dR(t){return Io(t)&&!ui(t).Wo()&&t.y_.length>0}function hR(t){ui(t).start()}async function K8(t){ui(t).P_()}async function X8(t){const e=ui(t);for(const n of t.y_)e.c_(n.mutations)}async function Q8(t,e,n){const r=t.y_.shift(),s=nw.from(r,e,n);await uR(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await _m(t)}async function Y8(t,e){e&&ui(t).u_&&await async function(r,s){if(function(o){return VU(o)&&o!==D.ABORTED}(s.code)){const i=r.y_.shift();ui(r).jo(),await uR(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await _m(r)}}(t,e),dR(t)&&hR(t)}async function $S(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=Io(n);n.S_.add(3),await xu(n),r&&n.v_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.S_.delete(3),await wm(n)}async function J8(t,e){const n=he(t);e?(n.S_.delete(2),await wm(n)):e||(n.S_.add(2),await xu(n),n.v_.set("Unknown"))}function tl(t){return t.F_||(t.F_=function(n,r,s){const i=he(n);return i.T_(),new F8(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:U8.bind(null,t),lo:H8.bind(null,t),s_:W8.bind(null,t)}),t.b_.push(async e=>{e?(t.F_.jo(),uw(t)?cw(t):t.v_.set("Unknown")):(await t.F_.stop(),cR(t))})),t.F_}function ui(t){return t.M_||(t.M_=function(n,r,s){const i=he(n);return i.T_(),new $8(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:K8.bind(null,t),lo:Y8.bind(null,t),h_:X8.bind(null,t),l_:Q8.bind(null,t)}),t.b_.push(async e=>{e?(t.M_.jo(),await _m(t)):(await t.M_.stop(),t.y_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.y_.length} pending writes`),t.y_=[]))})),t.M_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new dw(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hw(t,e){if(ms("AsyncQueue",`${e}: ${t}`),pu(t))return new K(D.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=Il(),this.sortedSet=new Xe(this.comparator)}static emptySet(e){return new fa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new fa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(){this.x_=new Xe(te.comparator)}track(e){const n=e.doc.key,r=this.x_.get(n);r?e.type!==0&&r.type===3?this.x_=this.x_.insert(n,e):e.type===3&&r.type!==1?this.x_=this.x_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.x_=this.x_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.x_=this.x_.remove(n):e.type===1&&r.type===2?this.x_=this.x_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):oe():this.x_=this.x_.insert(n,e)}O_(){const e=[];return this.x_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Fa{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Fa(e,n,fa.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8{constructor(){this.N_=void 0,this.listeners=[]}}class e7{constructor(){this.queries=new el(e=>DA(e),mm),this.onlineState="Unknown",this.B_=new Set}}async function fR(t,e){const n=he(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new Z8),s)try{i.N_=await n.onListen(r)}catch(o){const a=hw(o,`Initialization of query '${Sy(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.L_(n.onlineState),i.N_&&e.k_(i.N_)&&fw(n)}async function mR(t,e){const n=he(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function t7(t,e){const n=he(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.k_(s)&&(r=!0);o.N_=s}}r&&fw(n)}function n7(t,e,n){const r=he(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function fw(t){t.B_.forEach(e=>{e.next()})}class pR{constructor(e,n,r){this.query=e,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}k_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Fa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),n=!0):this.W_(e,this.onlineState)&&(this.G_(e),n=!0),this.K_=e,n}onError(e){this.q_.error(e)}L_(e){this.onlineState=e;let n=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),n=!0),n}W_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}U_(e){if(e.docChanges.length>0)return!0;const n=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}G_(e){e=Fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.key=e}}class yR{constructor(e){this.key=e}}class r7{constructor(e,n){this.query=e,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=pe(),this.mutatedKeys=pe(),this.ia=OA(e),this.sa=new fa(this.ia)}get oa(){return this.ta}_a(e,n){const r=n?n.aa:new BS,s=n?n.sa:this.sa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const m=s.get(d),p=pm(this.query,h)?h:null,v=!!m&&this.mutatedKeys.has(m.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let _=!1;m&&p?m.data.isEqual(p.data)?v!==y&&(r.track({type:3,doc:p}),_=!0):this.ua(m,p)||(r.track({type:2,doc:p}),_=!0,(l&&this.ia(p,l)>0||c&&this.ia(p,c)<0)&&(a=!0)):!m&&p?(r.track({type:0,doc:p}),_=!0):m&&!p&&(r.track({type:1,doc:m}),_=!0,(l||c)&&(a=!0)),_&&(p?(o=o.add(p),i=y?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{sa:o,aa:r,Hi:a,mutatedKeys:i}}ua(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;const i=e.aa.O_();i.sort((c,d)=>function(m,p){const v=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return v(m)-v(p)}(c.type,d.type)||this.ia(c.doc,d.doc)),this.ca(r);const o=n?this.la():[],a=this.ra.size===0&&this.current?1:0,l=a!==this.na;return this.na=a,i.length!==0||l?{snapshot:new Fa(this.query,e.sa,s,i,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ha:o}:{ha:o}}L_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({sa:this.sa,aa:new BS,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}Pa(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}ca(e){e&&(e.addedDocuments.forEach(n=>this.ta=this.ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ta=this.ta.delete(n)),this.current=e.current)}la(){if(!this.current)return[];const e=this.ra;this.ra=pe(),this.sa.forEach(r=>{this.Pa(r.key)&&(this.ra=this.ra.add(r.key))});const n=[];return e.forEach(r=>{this.ra.has(r)||n.push(new yR(r))}),this.ra.forEach(r=>{e.has(r)||n.push(new gR(r))}),n}Ia(e){this.ta=e._s,this.ra=pe();const n=this._a(e.documents);return this.applyChanges(n,!0)}Ta(){return Fa.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,this.na===0,this.hasCachedResults)}}class s7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class i7{constructor(e){this.key=e,this.Ea=!1}}class o7{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.da={},this.Aa=new el(a=>DA(a),mm),this.Ra=new Map,this.Va=new Set,this.ma=new Xe(te.comparator),this.fa=new Map,this.ga=new iw,this.pa={},this.ya=new Map,this.wa=La.Bn(),this.onlineState="Unknown",this.Sa=void 0}get isPrimaryClient(){return this.Sa===!0}}async function a7(t,e){const n=y7(t);let r,s;const i=n.Aa.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Ta();else{const o=await P8(n.localStore,ps(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await l7(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&oR(n.remoteStore,o)}return s}async function l7(t,e,n,r,s){t.ba=(h,m,p)=>async function(y,_,x,g){let w=_.view._a(x);w.Hi&&(w=await MS(y.localStore,_.query,!1).then(({documents:k})=>_.view._a(k,w)));const E=g&&g.targetChanges.get(_.targetId),S=_.view.applyChanges(w,y.isPrimaryClient,E);return VS(y,_.targetId,S.ha),S.snapshot}(t,h,m,p);const i=await MS(t.localStore,e,!0),o=new r7(e,i._s),a=o._a(i.documents),l=vu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);VS(t,n,c.ha);const d=new s7(e,n,o);return t.Aa.set(e,d),t.Ra.has(n)?t.Ra.get(n).push(e):t.Ra.set(n,[e]),c.snapshot}async function c7(t,e){const n=he(t),r=n.Aa.get(e),s=n.Ra.get(r.targetId);if(s.length>1)return n.Ra.set(r.targetId,s.filter(i=>!mm(i,e))),void n.Aa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Cy(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),aR(n.remoteStore,r.targetId),Ay(n,r.targetId)}).catch(mu)):(Ay(n,r.targetId),await Cy(n.localStore,r.targetId,!0))}async function u7(t,e,n){const r=v7(t);try{const s=await function(o,a){const l=he(o),c=xt.now(),d=a.reduce((p,v)=>p.add(v.key),pe());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let v=gs(),y=pe();return l.ts.getEntries(p,d).next(_=>{v=_,v.forEach((x,g)=>{g.isValidDocument()||(y=y.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,v)).next(_=>{h=_;const x=[];for(const g of a){const w=LU(g,h.get(g.key).overlayedDocument);w!=null&&x.push(new ko(g.key,w,TA(w.value.mapValue),Mr.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,x,a)}).next(_=>{m=_;const x=_.applyToLocalDocumentSet(h,y);return l.documentOverlayCache.saveOverlays(p,_.batchId,x)})}).then(()=>({batchId:m.batchId,changes:LA(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.pa[o.currentUser.toKey()];c||(c=new Xe(Se)),c=c.insert(a,l),o.pa[o.currentUser.toKey()]=c}(r,s.batchId,n),await wu(r,s.changes),await _m(r.remoteStore)}catch(s){const i=hw(s,"Failed to persist write");n.reject(i)}}async function vR(t,e){const n=he(t);try{const r=await C8(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.fa.get(i);o&&(Ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ea=!0:s.modifiedDocuments.size>0?Ve(o.Ea):s.removedDocuments.size>0&&(Ve(o.Ea),o.Ea=!1))}),await wu(n,r,e)}catch(r){await mu(r)}}function zS(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Aa.forEach((i,o)=>{const a=o.view.L_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=he(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const m of h.listeners)m.L_(a)&&(c=!0)}),c&&fw(l)}(r.eventManager,e),s.length&&r.da.s_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function d7(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.fa.get(e),i=s&&s.key;if(i){let o=new Xe(te.comparator);o=o.insert(i,Ut.newNoDocument(i,ce.min()));const a=pe().add(i),l=new vm(ce.min(),new Map,new Xe(Se),o,a);await vR(r,l),r.ma=r.ma.remove(i),r.fa.delete(e),mw(r)}else await Cy(r.localStore,e,!1).then(()=>Ay(r,e,n)).catch(mu)}async function h7(t,e){const n=he(t),r=e.batch.batchId;try{const s=await I8(n.localStore,e);wR(n,r,null),xR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await wu(n,s)}catch(s){await mu(s)}}async function f7(t,e,n){const r=he(t);try{const s=await function(o,a){const l=he(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Ve(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);wR(r,e,n),xR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await wu(r,s)}catch(s){await mu(s)}}function xR(t,e){(t.ya.get(e)||[]).forEach(n=>{n.resolve()}),t.ya.delete(e)}function wR(t,e,n){const r=he(t);let s=r.pa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.pa[r.currentUser.toKey()]=s}}function Ay(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ra.get(e))t.Aa.delete(r),n&&t.da.Da(r,n);t.Ra.delete(e),t.isPrimaryClient&&t.ga.Vr(e).forEach(r=>{t.ga.containsKey(r)||_R(t,r)})}function _R(t,e){t.Va.delete(e.path.canonicalString());const n=t.ma.get(e);n!==null&&(aR(t.remoteStore,n),t.ma=t.ma.remove(e),t.fa.delete(n),mw(t))}function VS(t,e,n){for(const r of n)r instanceof gR?(t.ga.addReference(r.key,e),m7(t,r)):r instanceof yR?(J("SyncEngine","Document no longer in limbo: "+r.key),t.ga.removeReference(r.key,e),t.ga.containsKey(r.key)||_R(t,r.key)):oe()}function m7(t,e){const n=e.key,r=n.path.canonicalString();t.ma.get(n)||t.Va.has(r)||(J("SyncEngine","New document in limbo: "+n),t.Va.add(r),mw(t))}function mw(t){for(;t.Va.size>0&&t.ma.size<t.maxConcurrentLimboResolutions;){const e=t.Va.values().next().value;t.Va.delete(e);const n=new te(Be.fromString(e)),r=t.wa.next();t.fa.set(r,new i7(n)),t.ma=t.ma.insert(n,r),oR(t.remoteStore,new Us(ps(Zx(n.path)),r,"TargetPurposeLimboResolution",Gx.ae))}}async function wu(t,e,n){const r=he(t),s=[],i=[],o=[];r.Aa.isEmpty()||(r.Aa.forEach((a,l)=>{o.push(r.ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const d=aw.Ki(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.da.s_(s),await async function(l,c){const d=he(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>F.forEach(c,m=>F.forEach(m.qi,p=>d.persistence.referenceDelegate.addReference(h,m.targetId,p)).next(()=>F.forEach(m.Qi,p=>d.persistence.referenceDelegate.removeReference(h,m.targetId,p)))))}catch(h){if(!pu(h))throw h;J("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const m=h.targetId;if(!h.fromCache){const p=d.Zi.get(m),v=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(v);d.Zi=d.Zi.insert(m,y)}}}(r.localStore,i))}async function p7(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const r=await nR(n.localStore,e);n.currentUser=e,function(i,o){i.ya.forEach(a=>{a.forEach(l=>{l.reject(new K(D.CANCELLED,o))})}),i.ya.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await wu(n,r.rs)}}function g7(t,e){const n=he(t),r=n.fa.get(e);if(r&&r.Ea)return pe().add(r.key);{let s=pe();const i=n.Ra.get(e);if(!i)return s;for(const o of i){const a=n.Aa.get(o);s=s.unionWith(a.view.oa)}return s}}function y7(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=g7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=d7.bind(null,e),e.da.s_=t7.bind(null,e.eventManager),e.da.Da=n7.bind(null,e.eventManager),e}function v7(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=h7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f7.bind(null,e),e}class US{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=xm(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return k8(this.persistence,new b8,e.initialUser,this.serializer)}createPersistence(e){return new E8(ow.Hr,this.serializer)}createSharedClientState(e){return new j8}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class x7{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>zS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=p7.bind(null,this.syncEngine),await J8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new e7}()}createDatastore(e){const n=xm(e.databaseInfo.databaseId),r=function(i){return new L8(i)}(e.databaseInfo);return function(i,o,a,l){return new B8(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new V8(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>zS(this.syncEngine,n,0),function(){return FS.v()?new FS:new D8}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new o7(s,i,o,a,l,c);return d&&(h.Sa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=he(n);J("RemoteStore","RemoteStore shutting down."),r.S_.add(5),await xu(r),r.D_.shutdown(),r.v_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Fa(this.observer.next,e)}error(e){this.observer.error?this.Fa(this.observer.error,e):ms("Uncaught Error in snapshot listener:",e.toString())}Ma(){this.muted=!0}Fa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Bt.UNAUTHENTICATED,this.clientId=EA.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{J("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(J("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new K(D.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=hw(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function dg(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await nR(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function HS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await E7(t);J("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>$S(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>$S(e.remoteStore,i)),t._onlineComponents=e}function _7(t){return t.name==="FirebaseError"?t.code===D.FAILED_PRECONDITION||t.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function E7(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await dg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!_7(n))throw n;ja("Error using user provided cache. Falling back to memory cache: "+n),await dg(t,new US)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await dg(t,new US);return t._offlineComponents}async function SR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await HS(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await HS(t,new x7))),t._onlineComponents}function S7(t){return SR(t).then(e=>e.syncEngine)}async function bR(t){const e=await SR(t),n=e.eventManager;return n.onListen=a7.bind(null,e.syncEngine),n.onUnlisten=c7.bind(null,e.syncEngine),n}function b7(t,e,n={}){const r=new os;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new ER({next:m=>{o.enqueueAndForget(()=>mR(i,h));const p=m.docs.has(a);!p&&m.fromCache?c.reject(new K(D.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&l&&l.source==="server"?c.reject(new K(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new pR(Zx(a.path),d,{includeMetadataChanges:!0,z_:!0});return fR(i,h)}(await bR(t),t.asyncQueue,e,n,r)),r.promise}function T7(t,e,n={}){const r=new os;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new ER({next:m=>{o.enqueueAndForget(()=>mR(i,h)),m.fromCache&&l.source==="server"?c.reject(new K(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new pR(a,d,{includeMetadataChanges:!0,z_:!0});return fR(i,h)}(await bR(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(t,e,n){if(!n)throw new K(D.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function k7(t,e,n,r){if(e===!0&&r===!0)throw new K(D.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function qS(t){if(!te.isDocumentKey(t))throw new K(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function GS(t){if(te.isDocumentKey(t))throw new K(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Em(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function di(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Em(t);throw new K(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}k7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(D.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(D.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(D.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new KS({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new K(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new K(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new KS(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new KV;switch(r.type){case"firstParty":return new JV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=WS.get(n);r&&(J("ComponentProvider","Removing Datastore"),WS.delete(n),r.terminate())}(this),Promise.resolve()}}function I7(t,e,n,r={}){var s;const i=(t=di(t,Sm))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ja("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Bt.MOCK_USER;else{a=O2(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new K(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Bt(c)}t._authCredentials=new XV(new _A(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new nl(this.firestore,e,this._query)}}class yn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yn(this.firestore,e,this._key)}}class ni extends nl{constructor(e,n,r){super(e,n,Zx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yn(this.firestore,null,new te(e))}withConverter(e){return new ni(this.firestore,e,this._path)}}function rl(t,e,...n){if(t=wt(t),kR("collection","path",e),t instanceof Sm){const r=Be.fromString(e,...n);return GS(r),new ni(t,null,r)}{if(!(t instanceof yn||t instanceof ni))throw new K(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return GS(r),new ni(t.firestore,null,r)}}function pw(t,e,...n){if(t=wt(t),arguments.length===1&&(e=EA.V()),kR("doc","path",e),t instanceof Sm){const r=Be.fromString(e,...n);return qS(r),new yn(t,null,new te(r))}{if(!(t instanceof yn||t instanceof ni))throw new K(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return qS(r),new yn(t.firestore,t instanceof ni?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(){this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new sR(this,"async_queue_retry"),this.tu=()=>{const n=ug();n&&J("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Uo.Lo()};const e=ug();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.tu)}get isShuttingDown(){return this.Ha}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nu(),this.ru(e)}enterRestrictedMode(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;const n=ug();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.tu)}}enqueue(e){if(this.nu(),this.Ha)return new Promise(()=>{});const n=new os;return this.ru(()=>this.Ha&&this.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ja.push(e),this.iu()))}async iu(){if(this.ja.length!==0){try{await this.ja[0](),this.ja.shift(),this.Uo.reset()}catch(e){if(!pu(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.ja.length>0&&this.Uo.No(()=>this.iu())}}ru(e){const n=this.za.then(()=>(this.Za=!0,e().catch(r=>{this.Ya=r,this.Za=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ms("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Za=!1,r))));return this.za=n,n}enqueueAfterDelay(e,n,r){this.nu(),this.eu.indexOf(e)>-1&&(n=0);const s=dw.createAndSchedule(this,e,n,r,i=>this.su(i));return this.Ja.push(s),s}nu(){this.Ya&&oe()}verifyOperationInProgress(){}async ou(){let e;do e=this.za,await e;while(e!==this.za)}_u(e){for(const n of this.Ja)if(n.timerId===e)return!0;return!1}au(e){return this.ou().then(()=>{this.Ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ou()})}uu(e){this.eu.push(e)}su(e){const n=this.Ja.indexOf(e);this.Ja.splice(n,1)}}class _u extends Sm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new C7}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||IR(this),this._firestoreClient.terminate()}}function A7(t,e){const n=typeof t=="object"?t:px(),r=typeof t=="string"?t:e||"(default)",s=qf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=N2("firestore");i&&I7(s,...i)}return s}function gw(t){return t._firestoreClient||IR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function IR(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new uU(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,TR(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new w7(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $a(Qt.fromBase64String(e))}catch(n){throw new K(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $a(Qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R7=/^__.*__$/;class P7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ko(e,this.data,this.fieldMask,n,this.fieldTransforms):new yu(e,this.data,n,this.fieldTransforms)}}function AR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class xw{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.cu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get lu(){return this.settings.lu}hu(e){return new xw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.Tu(e),s}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.cu(),s}du(e){return this.hu({path:void 0,Iu:!0})}Au(e){return ef(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}cu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}Tu(e){if(e.length===0)throw this.Au("Document fields must not be empty");if(AR(this.lu)&&R7.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}class N7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||xm(e)}mu(e,n,r,s=!1){return new xw({lu:e,methodName:n,Vu:r,path:Ht.emptyPath(),Iu:!1,Ru:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function RR(t){const e=t._freezeSettings(),n=xm(t._databaseId);return new N7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function j7(t,e,n,r,s,i={}){const o=t.mu(i.merge||i.mergeFields?2:0,e,n,s);jR("Data must be an object, but it was:",o,r);const a=PR(r,o);let l,c;if(i.merge)l=new dr(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const m=O7(e,h,n);if(!o.contains(m))throw new K(D.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);L7(d,m)||d.push(m)}l=new dr(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new P7(new Qn(a),l,c)}function D7(t,e,n,r=!1){return ww(n,t.mu(r?4:3,e))}function ww(t,e){if(NR(t=wt(t)))return jR("Unsupported field value:",e,t),PR(t,e);if(t instanceof CR)return function(r,s){if(!AR(s.lu))throw s.Au(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Au(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Iu&&e.lu!==4)throw e.Au("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=ww(a,s.du(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return PU(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=xt.fromDate(r);return{timestampValue:Jh(s.serializer,i)}}if(r instanceof xt){const i=new xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jh(s.serializer,i)}}if(r instanceof vw)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $a)return{bytesValue:QA(s.serializer,r._byteString)};if(r instanceof yn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Au(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:sw(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Au(`Unsupported field value: ${Em(r)}`)}(t,e)}function PR(t,e){const n={};return SA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Za(t,(r,s)=>{const i=ww(s,e.Pu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function NR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xt||t instanceof vw||t instanceof $a||t instanceof yn||t instanceof CR)}function jR(t,e,n){if(!NR(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Em(n);throw r==="an object"?e.Au(t+" a custom object"):e.Au(t+" "+r)}}function O7(t,e,n){if((e=wt(e))instanceof yw)return e._internalPath;if(typeof e=="string")return DR(t,e);throw ef("Field path arguments must be of type string or ",t,!1,void 0,n)}const M7=new RegExp("[~\\*/\\[\\]]");function DR(t,e,n){if(e.search(M7)>=0)throw ef(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yw(...e.split("."))._internalPath}catch{throw ef(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ef(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new K(D.INVALID_ARGUMENT,a+t+l)}function L7(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new F7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_w("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class F7 extends OR{data(){return super.data()}}function _w(t,e){return typeof e=="string"?DR(t,e):e instanceof yw?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ew{}class B7 extends Ew{}function Si(t,e,...n){let r=[];e instanceof Ew&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Sw).length,a=i.filter(l=>l instanceof bm).length;if(o>1||o>0&&a>0)throw new K(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class bm extends B7{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new bm(e,n,r)}_apply(e){const n=this._parse(e);return MR(e._query,n),new nl(e.firestore,e.converter,_y(e._query,n))}_parse(e){const n=RR(e.firestore);return function(i,o,a,l,c,d,h){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new K(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){QS(h,d);const p=[];for(const v of h)p.push(XS(l,i,v));m={arrayValue:{values:p}}}else m=XS(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||QS(h,d),m=D7(a,o,h,d==="in"||d==="not-in");return ft.create(c,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function bi(t,e,n){const r=e,s=_w("where",t);return bm._create(s,r,n)}class Sw extends Ew{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Sw(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:gr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)MR(o,l),o=_y(o,l)}(e._query,n),new nl(e.firestore,e.converter,_y(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function XS(t,e,n){if(typeof(n=wt(n))=="string"){if(n==="")throw new K(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jA(e)&&n.indexOf("/")!==-1)throw new K(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Be.fromString(n));if(!te.isDocumentKey(r))throw new K(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xS(t,new te(r))}if(n instanceof yn)return xS(t,n._key);throw new K(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Em(n)}.`)}function QS(t,e){if(!Array.isArray(t)||t.length===0)throw new K(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MR(t,e){if(e.isInequality()){const r=ew(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new K(D.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const i=NA(t);i!==null&&z7(t,s,i)}const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function z7(t,e,n){if(!n.isEqual(e))throw new K(D.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class V7{convertValue(e,n="none"){switch(uo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(co(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Za(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new vw(dt(e.latitude),dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Xx(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Rc(e));default:return null}}convertTimestamp(e){const n=ci(e);return new xt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Be.fromString(e);Ve(tR(r));const s=new Pc(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||ms(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U7(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class LR extends OR{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $d(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(_w("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class $d extends LR{data(e={}){return super.data(e)}}class H7{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Al(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new $d(this._firestore,this._userDataWriter,r.key,r,new Al(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new $d(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Al(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new $d(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Al(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:W7(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function W7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q7(t){t=di(t,yn);const e=di(t.firestore,_u);return b7(gw(e),t._key).then(n=>X7(e,t,n))}class FR extends V7{constructor(e){super(),this.firestore=e}convertBytes(e){return new $a(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,n)}}function Ti(t){t=di(t,nl);const e=di(t.firestore,_u),n=gw(e),r=new FR(e);return $7(t._query),T7(n,t._query).then(s=>new H7(e,r,t,s))}function G7(t,e,n){t=di(t,yn);const r=di(t.firestore,_u),s=U7(t.converter,e,n);return $R(r,[j7(RR(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Mr.none())])}function K7(t){return $R(di(t.firestore,_u),[new tw(t._key,Mr.none())])}function $R(t,e){return function(r,s){const i=new os;return r.asyncQueue.enqueueAndForget(async()=>u7(await S7(r),s,i)),i.promise}(gw(t),e)}function X7(t,e,n){const r=n.docs.get(e._key),s=new FR(t);return new LR(t,s,e._key,r,new Al(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Ja=s})(bo),oo(new ai("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new _u(new QV(r.getProvider("auth-internal")),new eU(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new K(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pc(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),jr(mS,"4.1.2",e),jr(mS,"4.1.2","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="firebasestorage.googleapis.com",zR="storageBucket",Q7=2*60*1e3,Y7=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt extends Hr{constructor(e,n,r=0){super(hg(e),`Firebase Storage: ${n} (${hg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return hg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var et;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(et||(et={}));function hg(t){return"storage/"+t}function bw(){const t="An unknown error occurred, please check the error payload for server response.";return new tt(et.UNKNOWN,t)}function J7(t){return new tt(et.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Z7(t){return new tt(et.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function eH(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new tt(et.UNAUTHENTICATED,t)}function tH(){return new tt(et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function nH(t){return new tt(et.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function rH(){return new tt(et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function sH(){return new tt(et.CANCELED,"User canceled the upload/download.")}function iH(t){return new tt(et.INVALID_URL,"Invalid URL '"+t+"'.")}function oH(t){return new tt(et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function aH(){return new tt(et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+zR+"' property when initializing the app?")}function lH(){return new tt(et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function cH(){return new tt(et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function uH(t){return new tt(et.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ry(t){return new tt(et.INVALID_ARGUMENT,t)}function VR(){return new tt(et.APP_DELETED,"The Firebase app was deleted.")}function dH(t){return new tt(et.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Gl(t,e){return new tt(et.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function vl(t){throw new tt(et.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Rn.makeFromUrl(e,n)}catch{return new Rn(e,"")}if(r.path==="")return r;throw oH(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${d}/b/${s}/o${m}`,"i"),v={bucket:1,path:3},y=n===BR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",x=new RegExp(`^https?://${y}/${s}/${_}`,"i"),w=[{regex:a,indices:l,postModify:i},{regex:p,indices:v,postModify:c},{regex:x,indices:{bucket:1,path:2},postModify:c}];for(let E=0;E<w.length;E++){const S=w[E],k=S.regex.exec(e);if(k){const T=k[S.indices.bucket];let b=k[S.indices.path];b||(b=""),r=new Rn(T,b),S.postModify(r);break}}if(r==null)throw iH(e);return r}}class hH{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fH(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(..._){c||(c=!0,e.apply(null,_))}function h(_){s=setTimeout(()=>{s=null,t(p,l())},_)}function m(){i&&clearTimeout(i)}function p(_,...x){if(c){m();return}if(_){m(),d.call(null,_,...x);return}if(l()||o){m(),d.call(null,_,...x);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,h(w)}let v=!1;function y(_){v||(v=!0,m(),!c&&(s!==null?(_||(a=2),clearTimeout(s),h(0)):_||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,y(!0)},n),y}function mH(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pH(t){return t!==void 0}function gH(t){return typeof t=="object"&&!Array.isArray(t)}function Tw(t){return typeof t=="string"||t instanceof String}function YS(t){return kw()&&t instanceof Blob}function kw(){return typeof Blob<"u"&&!_$()}function JS(t,e,n,r){if(r<e)throw Ry(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ry(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function UR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Xi||(Xi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yH(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vH{constructor(e,n,r,s,i,o,a,l,c,d,h,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,v)=>{this.resolve_=p,this.reject_=v,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new ud(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Xi.NO_ERROR,l=i.getStatus();if(!a||yH(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Xi.ABORT;r(!1,new ud(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new ud(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());pH(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=bw();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?VR():sH();o(l)}else{const l=rH();o(l)}};this.canceled_?n(!1,new ud(!1,null,!0)):this.backoffId_=fH(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&mH(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ud{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function xH(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function wH(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _H(t,e){e&&(t["X-Firebase-GMPID"]=e)}function EH(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function SH(t,e,n,r,s,i,o=!0){const a=UR(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return _H(c,e),xH(c,n),wH(c,i),EH(c,r),new vH(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function TH(...t){const e=bH();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(kw())return new Blob(t);throw new tt(et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function kH(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IH(t){if(typeof atob>"u")throw uH("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class fg{constructor(e,n){this.data=e,this.contentType=n||null}}function CH(t,e){switch(t){case Ar.RAW:return new fg(HR(e));case Ar.BASE64:case Ar.BASE64URL:return new fg(WR(t,e));case Ar.DATA_URL:return new fg(RH(e),PH(e))}throw bw()}function HR(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function AH(t){let e;try{e=decodeURIComponent(t)}catch{throw Gl(Ar.DATA_URL,"Malformed data URL.")}return HR(e)}function WR(t,e){switch(t){case Ar.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Gl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ar.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Gl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=IH(e)}catch(s){throw s.message.includes("polyfill")?s:Gl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class qR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Gl(Ar.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=NH(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function RH(t){const e=new qR(t);return e.base64?WR(Ar.BASE64,e.rest):AH(e.rest)}function PH(t){return new qR(t).contentType}function NH(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n){let r=0,s="";YS(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(YS(this.data_)){const r=this.data_,s=kH(r,e,n);return s===null?null:new Ls(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ls(r,!0)}}static getBlob(...e){if(kw()){const n=e.map(r=>r instanceof Ls?r.data_:r);return new Ls(TH.apply(null,n))}else{const n=e.map(o=>Tw(o)?CH(Ar.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Ls(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(t){let e;try{e=JSON.parse(t)}catch{return null}return gH(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jH(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function DH(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function KR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OH(t,e){return e}class Jt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||OH}}let dd=null;function MH(t){return!Tw(t)||t.length<2?t:KR(t)}function XR(){if(dd)return dd;const t=[];t.push(new Jt("bucket")),t.push(new Jt("generation")),t.push(new Jt("metageneration")),t.push(new Jt("name","fullPath",!0));function e(i,o){return MH(o)}const n=new Jt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Jt("size");return s.xform=r,t.push(s),t.push(new Jt("timeCreated")),t.push(new Jt("updated")),t.push(new Jt("md5Hash",null,!0)),t.push(new Jt("cacheControl",null,!0)),t.push(new Jt("contentDisposition",null,!0)),t.push(new Jt("contentEncoding",null,!0)),t.push(new Jt("contentLanguage",null,!0)),t.push(new Jt("contentType",null,!0)),t.push(new Jt("metadata","customMetadata",!0)),dd=t,dd}function LH(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Rn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function FH(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return LH(r,t),r}function QR(t,e,n){const r=GR(e);return r===null?null:FH(t,r,n)}function $H(t,e,n,r){const s=GR(e);if(s===null||!Tw(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,m="/b/"+o(d)+"/o/"+o(h),p=Tm(m,n,r),v=UR({alt:"media",token:c});return p+v})[0]}function BH(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Iw{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t){if(!t)throw bw()}function zH(t,e){function n(r,s){const i=QR(t,s,e);return YR(i!==null),i}return n}function VH(t,e){function n(r,s){const i=QR(t,s,e);return YR(i!==null),$H(i,s,t.host,t._protocol)}return n}function JR(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=tH():s=eH():n.getStatus()===402?s=Z7(t.bucket):n.getStatus()===403?s=nH(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function ZR(t){const e=JR(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=J7(t.path)),i.serverResponse=s.serverResponse,i}return n}function UH(t,e,n){const r=e.fullServerUrl(),s=Tm(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Iw(s,i,VH(t,n),o);return a.errorHandler=ZR(e),a}function HH(t,e){const n=e.fullServerUrl(),r=Tm(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new Iw(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=ZR(e),a}function WH(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function qH(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=WH(null,e)),r}function GH(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=qH(e,r,s),d=BH(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,m=`\r
--`+l+"--",p=Ls.getBlob(h,r,m);if(p===null)throw lH();const v={name:c.fullPath},y=Tm(i,t.host,t._protocol),_="POST",x=t.maxUploadRetryTime,g=new Iw(y,_,zH(t,n),x);return g.urlParams=v,g.headers=o,g.body=p.uploadData(),g.errorHandler=JR(e),g}class KH{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw vl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw vl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw vl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw vl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw vl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class XH extends KH{initXhr(){this.xhr_.responseType="text"}}function Cw(){return new XH}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n){this._service=e,n instanceof Rn?this._location=n:this._location=Rn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ho(e,n)}get root(){const e=new Rn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return KR(this._location.path)}get storage(){return this._service}get parent(){const e=jH(this._location.path);if(e===null)return null;const n=new Rn(this._location.bucket,e);return new ho(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw dH(e)}}function QH(t,e,n){t._throwIfRoot("uploadBytes");const r=GH(t.storage,t._location,XR(),new Ls(e,!0),n);return t.storage.makeRequestWithTokens(r,Cw).then(s=>({metadata:s,ref:t}))}function YH(t){t._throwIfRoot("getDownloadURL");const e=UH(t.storage,t._location,XR());return t.storage.makeRequestWithTokens(e,Cw).then(n=>{if(n===null)throw cH();return n})}function JH(t){t._throwIfRoot("deleteObject");const e=HH(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Cw)}function ZH(t,e){const n=DH(t._location.path,e),r=new Rn(t._location.bucket,n);return new ho(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eW(t){return/^[A-Za-z]+:\/\//.test(t)}function tW(t,e){return new ho(t,e)}function eP(t,e){if(t instanceof Aw){const n=t;if(n._bucket==null)throw aH();const r=new ho(n,n._bucket);return e!=null?eP(r,e):r}else return e!==void 0?ZH(t,e):t}function nW(t,e){if(e&&eW(e)){if(t instanceof Aw)return tW(t,e);throw Ry("To use ref(service, url), the first argument must be a Storage instance.")}else return eP(t,e)}function ZS(t,e){const n=e==null?void 0:e[zR];return n==null?null:Rn.makeFromBucketSpec(n,t)}function rW(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:O2(s,t.app.options.projectId))}class Aw{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=BR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Q7,this._maxUploadRetryTime=Y7,this._requests=new Set,s!=null?this._bucket=Rn.makeFromBucketSpec(s,this._host):this._bucket=ZS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Rn.makeFromBucketSpec(this._url,e):this._bucket=ZS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){JS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){JS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ho(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new hH(VR());{const o=SH(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const eb="@firebase/storage",tb="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP="storage";function nP(t,e,n){return t=wt(t),QH(t,e,n)}function rP(t){return t=wt(t),YH(t)}function sW(t){return t=wt(t),JH(t)}function Rw(t,e){return t=wt(t),nW(t,e)}function iW(t=px(),e){t=wt(t);const r=qf(t,tP).getImmediate({identifier:e}),s=N2("storage");return s&&oW(r,...s),r}function oW(t,e,n,r={}){rW(t,e,n,r)}function aW(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Aw(n,r,s,e,bo)}function lW(){oo(new ai(tP,aW,"PUBLIC").setMultipleInstances(!0)),jr(eb,tb,""),jr(eb,tb,"esm2017")}lW();const cW={apiKey:"AIzaSyBPNpckpYiu009eSzHz_1YMlwHLtScgVjE",authDomain:"zingmp3-clone-61799.firebaseapp.com",projectId:"zingmp3-clone-61799",storageBucket:"zingmp3-clone-61799.appspot.com",messagingSenderId:"938280289868",appId:"1:938280289868:web:1b426fc2dba5d03dde96e9"},Pw=F2(cW),_s=A7(Pw),hi=$z(Pw);new Sr;const Nw=iW(Pw);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function sP(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function iP(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ta=function(){return ta=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ta.apply(this,arguments)},oP=function(t){return{loading:t==null,value:t}},uW=function(){return function(t,e){switch(e.type){case"error":return ta(ta({},t),{error:e.error,loading:!1,value:void 0});case"reset":return oP(e.defaultValue);case"value":return ta(ta({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},dW=function(t){var e=t?t():void 0,n=f.useReducer(uW(),oP(e)),r=n[0],s=n[1],i=f.useCallback(function(){var l=t?t():void 0;s({type:"reset",defaultValue:l})},[t]),o=f.useCallback(function(l){s({type:"error",error:l})},[]),a=f.useCallback(function(l){s({type:"value",value:l})},[]);return f.useMemo(function(){return{error:r.error,loading:r.loading,reset:i,setError:o,setValue:a,value:r.value}},[r.error,r.loading,i,o,a,r.value])},Eu=function(t,e){var n=dW(function(){return t.currentUser}),r=n.error,s=n.loading,i=n.setError,o=n.setValue,a=n.value;return f.useEffect(function(){var l=IB(t,function(c){return sP(void 0,void 0,void 0,function(){var d;return iP(this,function(h){switch(h.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return h.sent(),[3,4];case 3:return d=h.sent(),i(d),[3,4];case 4:return o(c),[2]}})})},i);return function(){l()}},[t]),[a,s,r]},hW=function(t){var e=f.useCallback(function(n,r){var s=new Sr;return n&&n.forEach(function(i){return s.addScope(i)}),r&&s.setCustomParameters(r),s},[]);return fW(t,e)},fW=function(t,e){var n=f.useState(),r=n[0],s=n[1],i=f.useState(),o=i[0],a=i[1],l=f.useState(!1),c=l[0],d=l[1],h=f.useCallback(function(m,p){return sP(void 0,void 0,void 0,function(){var v,y,_;return iP(this,function(x){switch(x.label){case 0:d(!0),s(void 0),x.label=1;case 1:return x.trys.push([1,3,4,5]),v=e(m,p),[4,KB(t,v)];case 2:return y=x.sent(),a(y),[2,y];case 3:return _=x.sent(),s(_),[3,5];case 4:return d(!1),[7];case 5:return[2]}})})},[t,e]);return[h,o,c,r]},aP={exports:{}},lP={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ba=f;function mW(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pW=typeof Object.is=="function"?Object.is:mW,gW=Ba.useState,yW=Ba.useEffect,vW=Ba.useLayoutEffect,xW=Ba.useDebugValue;function wW(t,e){var n=e(),r=gW({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return vW(function(){s.value=n,s.getSnapshot=e,mg(s)&&i({inst:s})},[t,n,e]),yW(function(){return mg(s)&&i({inst:s}),t(function(){mg(s)&&i({inst:s})})},[t]),xW(n),n}function mg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pW(t,n)}catch{return!0}}function _W(t,e){return e()}var EW=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_W:wW;lP.useSyncExternalStore=Ba.useSyncExternalStore!==void 0?Ba.useSyncExternalStore:EW;aP.exports=lP;var SW=aP.exports,cP={exports:{}},uP={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var km=f,bW=SW;function TW(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kW=typeof Object.is=="function"?Object.is:TW,IW=bW.useSyncExternalStore,CW=km.useRef,AW=km.useEffect,RW=km.useMemo,PW=km.useDebugValue;uP.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=CW(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=RW(function(){function l(p){if(!c){if(c=!0,d=p,p=r(p),s!==void 0&&o.hasValue){var v=o.value;if(s(v,p))return h=v}return h=p}if(v=h,kW(d,p))return v;var y=r(p);return s!==void 0&&s(v,y)?v:(d=p,h=y)}var c=!1,d,h,m=n===void 0?null:n;return[function(){return l(e())},m===null?void 0:function(){return l(m())}]},[e,n,r,s]);var a=IW(t,i[0],i[1]);return AW(function(){o.hasValue=!0,o.value=a},[a]),PW(a),a};cP.exports=uP;var NW=cP.exports;function jW(t){t()}let dP=jW;const DW=t=>dP=t,OW=()=>dP,nb=Symbol.for("react-redux-context"),rb=typeof globalThis<"u"?globalThis:{};function MW(){var t;if(!f.createContext)return{};const e=(t=rb[nb])!=null?t:rb[nb]=new Map;let n=e.get(f.createContext);return n||(n=f.createContext(null),e.set(f.createContext,n)),n}const fi=MW();function jw(t=fi){return function(){return f.useContext(t)}}const hP=jw(),LW=()=>{throw new Error("uSES not initialized!")};let fP=LW;const FW=t=>{fP=t},$W=(t,e)=>t===e;function BW(t=fi){const e=t===fi?hP:jw(t);return function(r,s={}){const{equalityFn:i=$W,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof s=="function"?{equalityFn:s}:s,{store:l,subscription:c,getServerState:d,stabilityCheck:h,noopCheck:m}=e();f.useRef(!0);const p=f.useCallback({[r.name](y){return r(y)}}[r.name],[r,h,o]),v=fP(c.addNestedSub,l.getState,d||l.getState,p,i);return f.useDebugValue(v),v}}const X=BW();var mP={exports:{}},Ae={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ct=typeof Symbol=="function"&&Symbol.for,Dw=Ct?Symbol.for("react.element"):60103,Ow=Ct?Symbol.for("react.portal"):60106,Im=Ct?Symbol.for("react.fragment"):60107,Cm=Ct?Symbol.for("react.strict_mode"):60108,Am=Ct?Symbol.for("react.profiler"):60114,Rm=Ct?Symbol.for("react.provider"):60109,Pm=Ct?Symbol.for("react.context"):60110,Mw=Ct?Symbol.for("react.async_mode"):60111,Nm=Ct?Symbol.for("react.concurrent_mode"):60111,jm=Ct?Symbol.for("react.forward_ref"):60112,Dm=Ct?Symbol.for("react.suspense"):60113,zW=Ct?Symbol.for("react.suspense_list"):60120,Om=Ct?Symbol.for("react.memo"):60115,Mm=Ct?Symbol.for("react.lazy"):60116,VW=Ct?Symbol.for("react.block"):60121,UW=Ct?Symbol.for("react.fundamental"):60117,HW=Ct?Symbol.for("react.responder"):60118,WW=Ct?Symbol.for("react.scope"):60119;function Un(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Dw:switch(t=t.type,t){case Mw:case Nm:case Im:case Am:case Cm:case Dm:return t;default:switch(t=t&&t.$$typeof,t){case Pm:case jm:case Mm:case Om:case Rm:return t;default:return e}}case Ow:return e}}}function pP(t){return Un(t)===Nm}Ae.AsyncMode=Mw;Ae.ConcurrentMode=Nm;Ae.ContextConsumer=Pm;Ae.ContextProvider=Rm;Ae.Element=Dw;Ae.ForwardRef=jm;Ae.Fragment=Im;Ae.Lazy=Mm;Ae.Memo=Om;Ae.Portal=Ow;Ae.Profiler=Am;Ae.StrictMode=Cm;Ae.Suspense=Dm;Ae.isAsyncMode=function(t){return pP(t)||Un(t)===Mw};Ae.isConcurrentMode=pP;Ae.isContextConsumer=function(t){return Un(t)===Pm};Ae.isContextProvider=function(t){return Un(t)===Rm};Ae.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Dw};Ae.isForwardRef=function(t){return Un(t)===jm};Ae.isFragment=function(t){return Un(t)===Im};Ae.isLazy=function(t){return Un(t)===Mm};Ae.isMemo=function(t){return Un(t)===Om};Ae.isPortal=function(t){return Un(t)===Ow};Ae.isProfiler=function(t){return Un(t)===Am};Ae.isStrictMode=function(t){return Un(t)===Cm};Ae.isSuspense=function(t){return Un(t)===Dm};Ae.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Im||t===Nm||t===Am||t===Cm||t===Dm||t===zW||typeof t=="object"&&t!==null&&(t.$$typeof===Mm||t.$$typeof===Om||t.$$typeof===Rm||t.$$typeof===Pm||t.$$typeof===jm||t.$$typeof===UW||t.$$typeof===HW||t.$$typeof===WW||t.$$typeof===VW)};Ae.typeOf=Un;mP.exports=Ae;var qW=mP.exports,gP=qW,GW={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},KW={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},yP={};yP[gP.ForwardRef]=GW;yP[gP.Memo]=KW;var Ne={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lw=Symbol.for("react.element"),Fw=Symbol.for("react.portal"),Lm=Symbol.for("react.fragment"),Fm=Symbol.for("react.strict_mode"),$m=Symbol.for("react.profiler"),Bm=Symbol.for("react.provider"),zm=Symbol.for("react.context"),XW=Symbol.for("react.server_context"),Vm=Symbol.for("react.forward_ref"),Um=Symbol.for("react.suspense"),Hm=Symbol.for("react.suspense_list"),Wm=Symbol.for("react.memo"),qm=Symbol.for("react.lazy"),QW=Symbol.for("react.offscreen"),vP;vP=Symbol.for("react.module.reference");function nr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Lw:switch(t=t.type,t){case Lm:case $m:case Fm:case Um:case Hm:return t;default:switch(t=t&&t.$$typeof,t){case XW:case zm:case Vm:case qm:case Wm:case Bm:return t;default:return e}}case Fw:return e}}}Ne.ContextConsumer=zm;Ne.ContextProvider=Bm;Ne.Element=Lw;Ne.ForwardRef=Vm;Ne.Fragment=Lm;Ne.Lazy=qm;Ne.Memo=Wm;Ne.Portal=Fw;Ne.Profiler=$m;Ne.StrictMode=Fm;Ne.Suspense=Um;Ne.SuspenseList=Hm;Ne.isAsyncMode=function(){return!1};Ne.isConcurrentMode=function(){return!1};Ne.isContextConsumer=function(t){return nr(t)===zm};Ne.isContextProvider=function(t){return nr(t)===Bm};Ne.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Lw};Ne.isForwardRef=function(t){return nr(t)===Vm};Ne.isFragment=function(t){return nr(t)===Lm};Ne.isLazy=function(t){return nr(t)===qm};Ne.isMemo=function(t){return nr(t)===Wm};Ne.isPortal=function(t){return nr(t)===Fw};Ne.isProfiler=function(t){return nr(t)===$m};Ne.isStrictMode=function(t){return nr(t)===Fm};Ne.isSuspense=function(t){return nr(t)===Um};Ne.isSuspenseList=function(t){return nr(t)===Hm};Ne.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Lm||t===$m||t===Fm||t===Um||t===Hm||t===QW||typeof t=="object"&&t!==null&&(t.$$typeof===qm||t.$$typeof===Wm||t.$$typeof===Bm||t.$$typeof===zm||t.$$typeof===Vm||t.$$typeof===vP||t.getModuleId!==void 0)};Ne.typeOf=nr;function YW(){const t=OW();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0,i=n={callback:r,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){!s||e===null||(s=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}const sb={notify(){},get:()=>[]};function JW(t,e){let n,r=sb;function s(h){return l(),r.subscribe(h)}function i(){r.notify()}function o(){d.onStateChange&&d.onStateChange()}function a(){return!!n}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=YW())}function c(){n&&(n(),n=void 0,r.clear(),r=sb)}const d={addNestedSub:s,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:c,getListeners:()=>r};return d}const ZW=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eq=ZW?f.useLayoutEffect:f.useEffect;function tq({store:t,context:e,children:n,serverState:r,stabilityCheck:s="once",noopCheck:i="once"}){const o=f.useMemo(()=>{const c=JW(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:s,noopCheck:i}},[t,r,s,i]),a=f.useMemo(()=>t.getState(),[t]);eq(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||fi;return f.createElement(l.Provider,{value:o},n)}function xP(t=fi){const e=t===fi?hP:jw(t);return function(){const{store:r}=e();return r}}const nq=xP();function rq(t=fi){const e=t===fi?nq:xP(t);return function(){return e().dispatch}}const Le=rq();FW(NW.useSyncExternalStoreWithSelector);DW(qa.unstable_batchedUpdates);function ur(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function mi(t){return!!t&&!!t[Ue]}function ys(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var s=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return s===Object||typeof s=="function"&&Function.toString.call(s)===dq}(t)||Array.isArray(t)||!!t[db]||!!(!((e=t.constructor)===null||e===void 0)&&e[db])||$w(t)||Bw(t))}function fo(t,e,n){n===void 0&&(n=!1),sl(t)===0?(n?Object.keys:pa)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,s){return e(s,r,t)})}function sl(t){var e=t[Ue];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:$w(t)?2:Bw(t)?3:0}function ma(t,e){return sl(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function sq(t,e){return sl(t)===2?t.get(e):t[e]}function wP(t,e,n){var r=sl(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function _P(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function $w(t){return cq&&t instanceof Map}function Bw(t){return uq&&t instanceof Set}function Mi(t){return t.o||t.t}function zw(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=SP(t);delete e[Ue];for(var n=pa(e),r=0;r<n.length;r++){var s=n[r],i=e[s];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[s]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[s]})}return Object.create(Object.getPrototypeOf(t),e)}function Vw(t,e){return e===void 0&&(e=!1),Uw(t)||mi(t)||!ys(t)||(sl(t)>1&&(t.set=t.add=t.clear=t.delete=iq),Object.freeze(t),e&&fo(t,function(n,r){return Vw(r,!0)},!0)),t}function iq(){ur(2)}function Uw(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function Fr(t){var e=Oy[t];return e||ur(18,t),e}function oq(t,e){Oy[t]||(Oy[t]=e)}function Py(){return Oc}function pg(t,e){e&&(Fr("Patches"),t.u=[],t.s=[],t.v=e)}function tf(t){Ny(t),t.p.forEach(aq),t.p=null}function Ny(t){t===Oc&&(Oc=t.l)}function ib(t){return Oc={p:[],l:Oc,h:t,m:!0,_:0}}function aq(t){var e=t[Ue];e.i===0||e.i===1?e.j():e.g=!0}function gg(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||Fr("ES5").S(e,t,r),r?(n[Ue].P&&(tf(e),ur(4)),ys(t)&&(t=nf(e,t),e.l||rf(e,t)),e.u&&Fr("Patches").M(n[Ue].t,t,e.u,e.s)):t=nf(e,n,[]),tf(e),e.u&&e.v(e.u,e.s),t!==EP?t:void 0}function nf(t,e,n){if(Uw(e))return e;var r=e[Ue];if(!r)return fo(e,function(a,l){return ob(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return rf(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var s=r.i===4||r.i===5?r.o=zw(r.k):r.o,i=s,o=!1;r.i===3&&(i=new Set(s),s.clear(),o=!0),fo(i,function(a,l){return ob(t,r,s,a,l,n,o)}),rf(t,s,!1),n&&t.u&&Fr("Patches").N(r,n,t.u,t.s)}return r.o}function ob(t,e,n,r,s,i,o){if(mi(s)){var a=nf(t,s,i&&e&&e.i!==3&&!ma(e.R,r)?i.concat(r):void 0);if(wP(n,r,a),!mi(a))return;t.m=!1}else o&&n.add(s);if(ys(s)&&!Uw(s)){if(!t.h.D&&t._<1)return;nf(t,s),e&&e.A.l||rf(t,s)}}function rf(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&Vw(e,n)}function yg(t,e){var n=t[Ue];return(n?Mi(n):t)[e]}function ab(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Fs(t){t.P||(t.P=!0,t.l&&Fs(t.l))}function vg(t){t.o||(t.o=zw(t.t))}function jy(t,e,n){var r=$w(e)?Fr("MapSet").F(e,n):Bw(e)?Fr("MapSet").T(e,n):t.O?function(s,i){var o=Array.isArray(s),a={i:o?1:0,A:i?i.A:Py(),P:!1,I:!1,R:{},l:i,t:s,k:null,o:null,j:null,C:!1},l=a,c=Mc;o&&(l=[a],c=Rl);var d=Proxy.revocable(l,c),h=d.revoke,m=d.proxy;return a.k=m,a.j=h,m}(e,n):Fr("ES5").J(e,n);return(n?n.A:Py()).p.push(r),r}function Dy(t){return mi(t)||ur(22,t),function e(n){if(!ys(n))return n;var r,s=n[Ue],i=sl(n);if(s){if(!s.P&&(s.i<4||!Fr("ES5").K(s)))return s.t;s.I=!0,r=lb(n,i),s.I=!1}else r=lb(n,i);return fo(r,function(o,a){s&&sq(s.t,o)===a||wP(r,o,e(a))}),i===3?new Set(r):r}(t)}function lb(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return zw(t)}function lq(){function t(i,o){var a=s[i];return a?a.enumerable=o:s[i]=a={configurable:!0,enumerable:o,get:function(){var l=this[Ue];return Mc.get(l,i)},set:function(l){var c=this[Ue];Mc.set(c,i,l)}},a}function e(i){for(var o=i.length-1;o>=0;o--){var a=i[o][Ue];if(!a.P)switch(a.i){case 5:r(a)&&Fs(a);break;case 4:n(a)&&Fs(a)}}}function n(i){for(var o=i.t,a=i.k,l=pa(a),c=l.length-1;c>=0;c--){var d=l[c];if(d!==Ue){var h=o[d];if(h===void 0&&!ma(o,d))return!0;var m=a[d],p=m&&m[Ue];if(p?p.t!==h:!_P(m,h))return!0}}var v=!!o[Ue];return l.length!==pa(o).length+(v?0:1)}function r(i){var o=i.k;if(o.length!==i.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var s={};oq("ES5",{J:function(i,o){var a=Array.isArray(i),l=function(d,h){if(d){for(var m=Array(h.length),p=0;p<h.length;p++)Object.defineProperty(m,""+p,t(p,!0));return m}var v=SP(h);delete v[Ue];for(var y=pa(v),_=0;_<y.length;_++){var x=y[_];v[x]=t(x,d||!!v[x].enumerable)}return Object.create(Object.getPrototypeOf(h),v)}(a,i),c={i:a?5:4,A:o?o.A:Py(),P:!1,I:!1,R:{},l:o,t:i,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,Ue,{value:c,writable:!0}),l},S:function(i,o,a){a?mi(o)&&o[Ue].A===i&&e(i.p):(i.u&&function l(c){if(c&&typeof c=="object"){var d=c[Ue];if(d){var h=d.t,m=d.k,p=d.R,v=d.i;if(v===4)fo(m,function(w){w!==Ue&&(h[w]!==void 0||ma(h,w)?p[w]||l(m[w]):(p[w]=!0,Fs(d)))}),fo(h,function(w){m[w]!==void 0||ma(m,w)||(p[w]=!1,Fs(d))});else if(v===5){if(r(d)&&(Fs(d),p.length=!0),m.length<h.length)for(var y=m.length;y<h.length;y++)p[y]=!1;else for(var _=h.length;_<m.length;_++)p[_]=!0;for(var x=Math.min(m.length,h.length),g=0;g<x;g++)m.hasOwnProperty(g)||(p[g]=!0),p[g]===void 0&&l(m[g])}}}}(i.p[0]),e(i.p))},K:function(i){return i.i===4?n(i):r(i)}})}var cb,Oc,Hw=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",cq=typeof Map<"u",uq=typeof Set<"u",ub=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",EP=Hw?Symbol.for("immer-nothing"):((cb={})["immer-nothing"]=!0,cb),db=Hw?Symbol.for("immer-draftable"):"__$immer_draftable",Ue=Hw?Symbol.for("immer-state"):"__$immer_state",dq=""+Object.prototype.constructor,pa=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,SP=Object.getOwnPropertyDescriptors||function(t){var e={};return pa(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},Oy={},Mc={get:function(t,e){if(e===Ue)return t;var n=Mi(t);if(!ma(n,e))return function(s,i,o){var a,l=ab(i,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(s.k):void 0}(t,n,e);var r=n[e];return t.I||!ys(r)?r:r===yg(t.t,e)?(vg(t),t.o[e]=jy(t.A.h,r,t)):r},has:function(t,e){return e in Mi(t)},ownKeys:function(t){return Reflect.ownKeys(Mi(t))},set:function(t,e,n){var r=ab(Mi(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var s=yg(Mi(t),e),i=s==null?void 0:s[Ue];if(i&&i.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(_P(n,s)&&(n!==void 0||ma(t.t,e)))return!0;vg(t),Fs(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return yg(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,vg(t),Fs(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Mi(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){ur(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){ur(12)}},Rl={};fo(Mc,function(t,e){Rl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Rl.deleteProperty=function(t,e){return Rl.set.call(this,t,e,void 0)},Rl.set=function(t,e,n){return Mc.set.call(this,t[0],e,n,t[0])};var hq=function(){function t(n){var r=this;this.O=ub,this.D=!0,this.produce=function(s,i,o){if(typeof s=="function"&&typeof i!="function"){var a=i;i=s;var l=r;return function(y){var _=this;y===void 0&&(y=a);for(var x=arguments.length,g=Array(x>1?x-1:0),w=1;w<x;w++)g[w-1]=arguments[w];return l.produce(y,function(E){var S;return(S=i).call.apply(S,[_,E].concat(g))})}}var c;if(typeof i!="function"&&ur(6),o!==void 0&&typeof o!="function"&&ur(7),ys(s)){var d=ib(r),h=jy(r,s,void 0),m=!0;try{c=i(h),m=!1}finally{m?tf(d):Ny(d)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(y){return pg(d,o),gg(y,d)},function(y){throw tf(d),y}):(pg(d,o),gg(c,d))}if(!s||typeof s!="object"){if((c=i(s))===void 0&&(c=s),c===EP&&(c=void 0),r.D&&Vw(c,!0),o){var p=[],v=[];Fr("Patches").M(s,c,p,v),o(p,v)}return c}ur(21,s)},this.produceWithPatches=function(s,i){if(typeof s=="function")return function(c){for(var d=arguments.length,h=Array(d>1?d-1:0),m=1;m<d;m++)h[m-1]=arguments[m];return r.produceWithPatches(c,function(p){return s.apply(void 0,[p].concat(h))})};var o,a,l=r.produce(s,i,function(c,d){o=c,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){ys(n)||ur(8),mi(n)&&(n=Dy(n));var r=ib(this),s=jy(this,n,void 0);return s[Ue].C=!0,Ny(r),s},e.finishDraft=function(n,r){var s=n&&n[Ue],i=s.A;return pg(i,r),gg(void 0,i)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!ub&&ur(20),this.O=n},e.applyPatches=function(n,r){var s;for(s=r.length-1;s>=0;s--){var i=r[s];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}s>-1&&(r=r.slice(s+1));var o=Fr("Patches").$;return mi(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),Ln=new hq,bP=Ln.produce;Ln.produceWithPatches.bind(Ln);Ln.setAutoFreeze.bind(Ln);Ln.setUseProxies.bind(Ln);Ln.applyPatches.bind(Ln);Ln.createDraft.bind(Ln);Ln.finishDraft.bind(Ln);function Lc(t){"@babel/helpers - typeof";return Lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lc(t)}function fq(t,e){if(Lc(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Lc(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mq(t){var e=fq(t,"string");return Lc(e)==="symbol"?e:String(e)}function pq(t,e,n){return e=mq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function fb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hb(Object(n),!0).forEach(function(r){pq(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $t(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var mb=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),xg=function(){return Math.random().toString(36).substring(7).split("").join(".")},sf={INIT:"@@redux/INIT"+xg(),REPLACE:"@@redux/REPLACE"+xg(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+xg()}};function gq(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function TP(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error($t(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error($t(1));return n(TP)(t,e)}if(typeof t!="function")throw new Error($t(2));var s=t,i=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function d(){if(l)throw new Error($t(3));return i}function h(y){if(typeof y!="function")throw new Error($t(4));if(l)throw new Error($t(5));var _=!0;return c(),a.push(y),function(){if(_){if(l)throw new Error($t(6));_=!1,c();var g=a.indexOf(y);a.splice(g,1),o=null}}}function m(y){if(!gq(y))throw new Error($t(7));if(typeof y.type>"u")throw new Error($t(8));if(l)throw new Error($t(9));try{l=!0,i=s(i,y)}finally{l=!1}for(var _=o=a,x=0;x<_.length;x++){var g=_[x];g()}return y}function p(y){if(typeof y!="function")throw new Error($t(10));s=y,m({type:sf.REPLACE})}function v(){var y,_=h;return y={subscribe:function(g){if(typeof g!="object"||g===null)throw new Error($t(11));function w(){g.next&&g.next(d())}w();var E=_(w);return{unsubscribe:E}}},y[mb]=function(){return this},y}return m({type:sf.INIT}),r={dispatch:m,subscribe:h,getState:d,replaceReducer:p},r[mb]=v,r}function yq(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:sf.INIT});if(typeof r>"u")throw new Error($t(12));if(typeof n(void 0,{type:sf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error($t(13))})}function vq(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var s=e[r];typeof t[s]=="function"&&(n[s]=t[s])}var i=Object.keys(n),o;try{yq(n)}catch(a){o=a}return function(l,c){if(l===void 0&&(l={}),o)throw o;for(var d=!1,h={},m=0;m<i.length;m++){var p=i[m],v=n[p],y=l[p],_=v(y,c);if(typeof _>"u")throw c&&c.type,new Error($t(14));h[p]=_,d=d||_!==y}return d=d||i.length!==Object.keys(l).length,d?h:l}}function of(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,s){return function(){return r(s.apply(void 0,arguments))}})}function xq(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var s=r.apply(void 0,arguments),i=function(){throw new Error($t(15))},o={getState:s.getState,dispatch:function(){return i.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return i=of.apply(void 0,a)(s.dispatch),fb(fb({},s),{},{dispatch:i})}}}function kP(t){var e=function(r){var s=r.dispatch,i=r.getState;return function(o){return function(a){return typeof a=="function"?a(s,i,t):o(a)}}};return e}var IP=kP();IP.withExtraArgument=kP;const pb=IP;var CP=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wq=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},za=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,s=t.length;n<r;n++,s++)t[s]=e[n];return t},_q=Object.defineProperty,Eq=Object.defineProperties,Sq=Object.getOwnPropertyDescriptors,gb=Object.getOwnPropertySymbols,bq=Object.prototype.hasOwnProperty,Tq=Object.prototype.propertyIsEnumerable,yb=function(t,e,n){return e in t?_q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},ri=function(t,e){for(var n in e||(e={}))bq.call(e,n)&&yb(t,n,e[n]);if(gb)for(var r=0,s=gb(e);r<s.length;r++){var n=s[r];Tq.call(e,n)&&yb(t,n,e[n])}return t},wg=function(t,e){return Eq(t,Sq(e))},kq=function(t,e,n){return new Promise(function(r,s){var i=function(l){try{a(n.next(l))}catch(c){s(c)}},o=function(l){try{a(n.throw(l))}catch(c){s(c)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(i,o)};a((n=n.apply(t,e)).next())})},Iq=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?of:of.apply(null,arguments)};function Cq(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var Aq=function(t){CP(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,za([void 0],n[0].concat(this)))):new(e.bind.apply(e,za([void 0],n.concat(this))))},e}(Array),Rq=function(t){CP(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,za([void 0],n[0].concat(this)))):new(e.bind.apply(e,za([void 0],n.concat(this))))},e}(Array);function My(t){return ys(t)?bP(t,function(){}):t}function Pq(t){return typeof t=="boolean"}function Nq(){return function(e){return jq(e)}}function jq(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new Aq;return n&&(Pq(n)?r.push(pb):r.push(pb.withExtraArgument(n.extraArgument))),r}var Dq=!0;function Oq(t){var e=Nq(),n=t||{},r=n.reducer,s=r===void 0?void 0:r,i=n.middleware,o=i===void 0?e():i,a=n.devTools,l=a===void 0?!0:a,c=n.preloadedState,d=c===void 0?void 0:c,h=n.enhancers,m=h===void 0?void 0:h,p;if(typeof s=="function")p=s;else if(Cq(s))p=vq(s);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var v=o;typeof v=="function"&&(v=v(e));var y=xq.apply(void 0,v),_=of;l&&(_=Iq(ri({trace:!Dq},typeof l=="object"&&l)));var x=new Rq(y),g=x;Array.isArray(m)?g=za([y],m):typeof m=="function"&&(g=m(x));var w=_.apply(void 0,g);return TP(p,d,w)}function si(t,e){function n(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(e){var i=e.apply(void 0,r);if(!i)throw new Error("prepareAction did not return an object");return ri(ri({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function AP(t){var e={},n=[],r,s={addCase:function(i,o){var a=typeof i=="string"?i:i.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,s},addMatcher:function(i,o){return n.push({matcher:i,reducer:o}),s},addDefaultCase:function(i){return r=i,s}};return t(s),[e,n,r]}function Mq(t){return typeof t=="function"}function Lq(t,e,n,r){n===void 0&&(n=[]);var s=typeof e=="function"?AP(e):[e,n,r],i=s[0],o=s[1],a=s[2],l;if(Mq(t))l=function(){return My(t())};else{var c=My(t);l=function(){return c}}function d(h,m){h===void 0&&(h=l());var p=za([i[m.type]],o.filter(function(v){var y=v.matcher;return y(m)}).map(function(v){var y=v.reducer;return y}));return p.filter(function(v){return!!v}).length===0&&(p=[a]),p.reduce(function(v,y){if(y)if(mi(v)){var _=v,x=y(_,m);return x===void 0?v:x}else{if(ys(v))return bP(v,function(g){return y(g,m)});var x=y(v,m);if(x===void 0){if(v===null)return v;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}return v},h)}return d.getInitialState=l,d}function Fq(t,e){return t+"/"+e}function Gm(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:My(t.initialState),r=t.reducers||{},s=Object.keys(r),i={},o={},a={};s.forEach(function(d){var h=r[d],m=Fq(e,d),p,v;"reducer"in h?(p=h.reducer,v=h.prepare):p=h,i[d]=p,o[m]=p,a[d]=v?si(m,v):si(m)});function l(){var d=typeof t.extraReducers=="function"?AP(t.extraReducers):[t.extraReducers],h=d[0],m=h===void 0?{}:h,p=d[1],v=p===void 0?[]:p,y=d[2],_=y===void 0?void 0:y,x=ri(ri({},m),o);return Lq(n,function(g){for(var w in x)g.addCase(w,x[w]);for(var E=0,S=v;E<S.length;E++){var k=S[E];g.addMatcher(k.matcher,k.reducer)}_&&g.addDefaultCase(_)})}var c;return{name:e,reducer:function(d,h){return c||(c=l()),c(d,h)},actions:a,caseReducers:i,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var $q="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Bq=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=$q[Math.random()*64|0];return e},zq=["name","message","stack","code"],_g=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),vb=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),Vq=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=zq;n<r.length;n++){var s=r[n];typeof t[s]=="string"&&(e[s]=t[s])}return e}return{message:String(t)}};(function(){function t(e,n,r){var s=si(e+"/fulfilled",function(c,d,h,m){return{payload:c,meta:wg(ri({},m||{}),{arg:h,requestId:d,requestStatus:"fulfilled"})}}),i=si(e+"/pending",function(c,d,h){return{payload:void 0,meta:wg(ri({},h||{}),{arg:d,requestId:c,requestStatus:"pending"})}}),o=si(e+"/rejected",function(c,d,h,m,p){return{payload:m,error:(r&&r.serializeError||Vq)(c||"Rejected"),meta:wg(ri({},p||{}),{arg:h,requestId:d,rejectedWithValue:!!m,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(d,h,m){var p=r!=null&&r.idGenerator?r.idGenerator(c):Bq(),v=new a,y;function _(g){y=g,v.abort()}var x=function(){return kq(this,null,function(){var g,w,E,S,k,T,b;return wq(this,function(C){switch(C.label){case 0:return C.trys.push([0,4,,5]),S=(g=r==null?void 0:r.condition)==null?void 0:g.call(r,c,{getState:h,extra:m}),Hq(S)?[4,S]:[3,2];case 1:S=C.sent(),C.label=2;case 2:if(S===!1||v.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return k=new Promise(function(R,M){return v.signal.addEventListener("abort",function(){return M({name:"AbortError",message:y||"Aborted"})})}),d(i(p,c,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:p,arg:c},{getState:h,extra:m}))),[4,Promise.race([k,Promise.resolve(n(c,{dispatch:d,getState:h,extra:m,requestId:p,signal:v.signal,abort:_,rejectWithValue:function(R,M){return new _g(R,M)},fulfillWithValue:function(R,M){return new vb(R,M)}})).then(function(R){if(R instanceof _g)throw R;return R instanceof vb?s(R.payload,p,c,R.meta):s(R,p,c)})])];case 3:return E=C.sent(),[3,5];case 4:return T=C.sent(),E=T instanceof _g?o(null,p,c,T.payload,T.meta):o(T,p,c),[3,5];case 5:return b=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,b||d(E),[2,E]}})})}();return Object.assign(x,{abort:_,requestId:p,arg:c,unwrap:function(){return x.then(Uq)}})}}return Object.assign(l,{pending:i,rejected:o,fulfilled:s,typePrefix:e})}return t.withTypes=function(){return t},t})();function Uq(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function Hq(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var Ww="listenerMiddleware";si(Ww+"/add");si(Ww+"/removeAll");si(Ww+"/remove");var xb;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);lq();const Wq=Nr();let qq=Wq.current||{...cx({}),currentIndex:0,song_in:""};const Gq={currentSong:qq},RP=Gm({name:"currentSong",initialState:Gq,reducers:{setSong(t,e){t.currentSong=e.payload},updateSong:(t,e)=>{const n=e.payload;Object.assign(t.currentSong,n)},resetCurrentSong:t=>{t.currentSong={...cx({}),currentIndex:0,song_in:""}}}}),be=t=>t.currentSong,{setSong:vn,resetCurrentSong:pi,updateSong:GQ}=RP.actions,Kq=RP.reducer,Xq=Nr(),Qq={queueSongs:Xq.queue||[],from:[]},PP=Gm({name:"songQueue",initialState:Qq,reducers:{setQueue:(t,e)=>{const{songs:n}=e.payload;t.queueSongs=n,t.from=[n[0].song_in],bt("queue",t.queueSongs)},removeSongFromQueue:(t,e)=>{const{index:n}=e.payload,[r]=t.queueSongs.splice(n,1);bt("queue",t.queueSongs),t.from.findIndex(i=>i===r.song_in)!==-1&&t.from.slice(n,1)},addSongToQueue:(t,e)=>{const{songs:n}=e.payload;t.from.includes(n[0].song_in)||t.from.push(n[0].song_in),t.queueSongs.push(...n),bt("queue",t.queueSongs)},updateSongInQueue:(t,e)=>{const{song:n}=e.payload,r=t.queueSongs.findIndex(s=>s.id===n.id);Object.assign(t.queueSongs[r],n)},resetSongQueue:t=>{t.queueSongs=[],bt("queue",[])}}}),Wr=t=>t.songQueue,{addSongToQueue:Su,updateSongInQueue:Yq,removeSongFromQueue:Jq,setQueue:bu,resetSongQueue:NP}=PP.actions,Zq=PP.reducer,jP={user:null,loading:!0},eG=(t,e)=>{switch(e.type){case 0:return{user:e.payload.user,loading:!1};case 1:return{user:null,loading:!0};default:return{user:t.user,loading:t.loading}}},tG={state:{user:jP.user,loading:!0},setUser:()=>{}},DP=f.createContext(tG),nG=()=>{const[t,e]=f.useReducer(eG,jP),n=f.useCallback(r=>{switch(r.type){case"set-user":return console.log("set user"),e({type:0,payload:{user:r.user}});case"reset":return console.log("reset user"),e({type:1,payload:{user:null}})}},[]);return{state:{loading:t.loading,user:t.user},setUser:n}},rG=({children:t})=>{const{state:{loading:e,user:n},setUser:r}=nG();return u.jsx(DP.Provider,{value:{state:{loading:e,user:n},setUser:r},children:t})},pt=()=>{const{state:{loading:t,user:e},setUser:n}=f.useContext(DP);return{loading:t,user:e,setUser:n}},Tu=()=>{const t=wn(),e=Le(),{setUser:n}=pt(),{resetSongPlaylistStore:r}=lt(),[s]=hW(hi),i=()=>{document.querySelector(".hd-mp3").pause(),e(pi())};return{logOut:async()=>{await aC(hi),n({type:"reset"}),e(NP()),r(),i(),t(Nt.Home)},logIn:async()=>{await s()&&(e(pi()),r(),n({type:"reset"}))}}},sG={toasts:[]},iG={state:sG,setToasts:()=>{},setErrorToast:()=>{},setSuccessToast:()=>{}},OP=f.createContext(iG),oG=({children:t})=>{const[e,n]=f.useState([]),r=({message:i="Somethings went wrong"})=>n(o=>[...o,{title:"error",id:Rh(4),desc:i}]),s=({message:i="Success"})=>n(o=>[...o,{title:"success",id:Rh(4),desc:`${i}`}]);return u.jsx(OP.Provider,{value:{state:{toasts:e},setToasts:n,setErrorToast:r,setSuccessToast:s},children:t})},_n=()=>{const{state:{toasts:t},setToasts:e,setErrorToast:n,setSuccessToast:r}=f.useContext(OP);return{toasts:t,setToasts:e,setErrorToast:n,setSuccessToast:r}},MP={tempSongs:[],status:""},aG=(t,e)=>{switch(e.type){case 0:{const{songs:n}=e.payload;return{...t,tempSongs:n,status:"uploading"}}case 1:{const n=[...t.tempSongs];return n.shift(),{...t,tempSongs:n}}case 2:{const{status:n}=e.payload;return{...t,tempSongs:[],status:n}}}},lG=()=>{const[t,e]=f.useReducer(aG,MP),n=f.useCallback(i=>{e({type:0,payload:{songs:i}})},[]),r=f.useCallback(()=>{e({type:1})},[]),s=f.useCallback(i=>{e({type:2,payload:{status:i}})},[]);return{state:t,setTempSongs:n,shiftSong:r,clearTempSongs:s}},cG={state:MP,setTempSongs:()=>{},shiftSong:()=>{},clearTempSongs:()=>{}},LP=f.createContext(cG),uG=({children:t})=>u.jsx(LP.Provider,{value:lG(),children:t}),Km=()=>{const{state:{...t},...e}=f.useContext(LP);return{...e,...t}},Fc=async({collection:t,id:e,msg:n})=>{await K7(pw(_s,t,e))},Va=async({collection:t,id:e,msg:n})=>q7(pw(_s,t,e)),xn=async({collection:t,id:e,data:n,msg:r})=>await G7(pw(_s,t,e),{...n},{merge:!0}),FP=async({file:t,folder:e,email:n,msg:r})=>{const s=n.replace("@gmail.com","")+"_"+t.name.replaceAll(" ","").toLowerCase(),i=Rw(Nw,`${e+s}`),o=await nP(i,t);return{fileURL:await rP(o.ref),filePath:o.metadata.fullPath}},$P=async({blob:t,folder:e,songId:n,msg:r})=>{const s=n+"_stock",i=Rw(Nw,`${e+s}`),o=await nP(i,t);return{fileURL:await rP(o.ref),filePath:o.metadata.fullPath}},Ly=async({filePath:t,msg:e})=>{const n=Rw(Nw,t);await sW(n)},BP=async t=>{await Fc({collection:"songs",id:t.id,msg:">>> api: delete song doc"}),await Ly({filePath:t.song_file_path,msg:">>> api: delete song file"}),t.lyric_id&&await Fc({collection:"lyrics",id:t.lyric_id,msg:">>> api: delete song lyric doc"}),t.image_file_path&&await Ly({filePath:t.image_file_path,msg:">>> api: delete song's image file"})},wb=async(t,e)=>{const n=t.map(r=>r.id);await xn({collection:"users",data:{playlist_ids:n},id:e.email,msg:">>> api: set user playlist_ids"})},Eg={currentPlaylist:ux({}),playlistSongs:[]},zP=Gm({name:"currentPlaylist",initialState:Eg,reducers:{setCurrentPlaylist(t,e){const{playlist:n,songs:r}=e.payload;t.currentPlaylist=n,t.playlistSongs=r},updateCurrentPlaylist:(t,e)=>{const n=e.payload;Object.assign(t.currentPlaylist,n)},addSongsAndUpdateCurrent(t,e){const{songs:n}=e.payload,r=n.map(s=>({...s,song_in:`playlist_${t.currentPlaylist.id}`}));console.log("current",Dy(t.playlistSongs).map(s=>s.id)),console.log("add playlist songs",n.map(s=>s.id)),t.playlistSongs.push(...r),t.currentPlaylist.song_ids.push(...n.map(s=>s.id))},setPlaylistSongs(t,e){const{songs:n}=e.payload;t.playlistSongs=n},removeSong(t,e){const{index:n}=e.payload;t.playlistSongs.splice(n,1)},setPlaylistSongsAndUpdateCurrent(t,e){const{songs:n}=e.payload;console.log("current",Dy(t.playlistSongs).map(r=>r.id)),console.log("set playlist songs",n.map(r=>r.id)),t.playlistSongs=n,t.currentPlaylist.song_ids=n.map(r=>r.id)},resetCurrentPlaylist:t=>{t.currentPlaylist=Eg.currentPlaylist,t.playlistSongs=Eg.playlistSongs}}}),Es=t=>t.currentPlaylist,{addSongsAndUpdateCurrent:dG,removeSong:KQ,setCurrentPlaylist:hG,updateCurrentPlaylist:Bd,resetCurrentPlaylist:qw,setPlaylistSongs:_b,setPlaylistSongsAndUpdateCurrent:Eb}=zP.actions,fG=zP.reducer;function Co(){const t=Le(),{user:e}=pt(),{currentPlaylist:n,playlistSongs:r}=X(Es),{currentSong:s}=X(be),{userPlaylists:i,updateUserPlaylist:o,setUserPlaylists:a}=lt(),[l,c]=f.useState(!1),{setErrorToast:d,setSuccessToast:h}=_n(),m=wn(),p=async S=>{await xn({collection:"playlist",data:S,id:S.id,msg:">>> api: set playlist doc"}),o(S)},v=async S=>{if(!e)throw new Error("user not found");if(!S)throw new Error("playlist name invalid");const k=lx(S),T=ux({id:k,by:e.email,name:S});c(!0);const b=[...i,T];await xn({collection:"playlist",data:T,id:k,msg:">>> api: set playlist doc"}),await wb(b,e),a(b),c(!1)},y=async()=>{if(!e)return;c(!0);const S=i.filter(k=>k.id!==n.id);await Fc({collection:"playlist",id:n.id,msg:">>> api: delete playlist doc"}),await wb(S,e),a(S),t(qw()),s.song_in===`playlist_${n.id}`&&t(pi()),c(!1),m("/mysongs")},_=async S=>{c(!0);const k={...n};if(k.song_ids=[...n.song_ids,...S.map(T=>T.id)],await p(k),console.log(">>> playlist songs",r.length),t(dG({songs:S})),s.song_in===`playlist_${n.id}`){const T=S.map(b=>({...b,song_in:`playlist_${n.id}`}));t(Su({songs:T}))}c(!1),h({message:`${S.length} songs added`})},x=async(S,k)=>{try{c(!0);const T={...k,name:S};await p(T),t(Bd(T)),h({message:"Playlist edited"})}catch(T){throw console.log(T),new Error("Error when edit playlist")}finally{c(!1)}},g=async(S,k)=>{try{c(!0);const T={...k};T.song_ids.push(S.id),await p(T)}catch(T){throw console.log({message:T}),new Error("Error when edit playlist")}finally{c(!1)}},w=async S=>{c(!0);const k=r.filter(b=>b.id!==S.id);console.log("delete songs",r.map(b=>b.id),k.map(b=>b.id));const T={...n};T.song_ids=k.map(b=>b.id),await p(T),t(Eb({songs:k})),c(!1),h({message:`'${S.name}' removed`})};return{isFetching:l,addPlaylist:v,editPlaylist:x,deletePlaylist:y,addSongsToPlaylist:_,deleteSongsFromPlaylist:async S=>{if(console.log("playlist action deleteManyFromPlaylist"),!n.song_ids)throw console.log("Wrong playlist data"),d({}),new Error("Wrong playlist data");if(S.length===1)return w(S[0]);const k=S.map(C=>C.id),T=r.filter(C=>!k.includes(C.id)),b={...n};return b.song_ids=T.map(C=>C.id),c(!0),await p(b),t(Eb({songs:T})),c(!1),h({message:`${S.length} songs removed`}),T},deleteSongFromPlaylist:w,addSongToPlaylistSongItem:g,setPlaylistDocAndUpdateUserPlaylist:p}}function mG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M10 17a.75.75 0 01-.75-.75V5.612L5.29 9.77a.75.75 0 01-1.08-1.04l5.25-5.5a.75.75 0 011.08 0l5.25 5.5a.75.75 0 11-1.08 1.04l-3.96-4.158V16.25A.75.75 0 0110 17z",clipRule:"evenodd"}))}const pG=f.forwardRef(mG),gG=pG;function yG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10zm0 5.25a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75z",clipRule:"evenodd"}))}const vG=f.forwardRef(yG),xG=vG;function wG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z",clipRule:"evenodd"}))}const _G=f.forwardRef(wG),Fy=_G;function EG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"}))}const SG=f.forwardRef(EG),bG=SG;function TG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"}))}const kG=f.forwardRef(TG),VP=kG;function IG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"}))}const CG=f.forwardRef(IG),AG=CG;function RG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M7.84 1.804A1 1 0 018.82 1h2.36a1 1 0 01.98.804l.331 1.652a6.993 6.993 0 011.929 1.115l1.598-.54a1 1 0 011.186.447l1.18 2.044a1 1 0 01-.205 1.251l-1.267 1.113a7.047 7.047 0 010 2.228l1.267 1.113a1 1 0 01.206 1.25l-1.18 2.045a1 1 0 01-1.187.447l-1.598-.54a6.993 6.993 0 01-1.929 1.115l-.33 1.652a1 1 0 01-.98.804H8.82a1 1 0 01-.98-.804l-.331-1.652a6.993 6.993 0 01-1.929-1.115l-1.598.54a1 1 0 01-1.186-.447l-1.18-2.044a1 1 0 01.205-1.251l1.267-1.114a7.05 7.05 0 010-2.227L1.821 7.773a1 1 0 01-.206-1.25l1.18-2.045a1 1 0 011.187-.447l1.598.54A6.993 6.993 0 017.51 3.456l.33-1.652zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"}))}const PG=f.forwardRef(RG),NG=PG;function jG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M4.5 2A1.5 1.5 0 003 3.5v13A1.5 1.5 0 004.5 18h11a1.5 1.5 0 001.5-1.5V7.621a1.5 1.5 0 00-.44-1.06l-4.12-4.122A1.5 1.5 0 0011.378 2H4.5zm2.25 8.5a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5zm0 3a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5z",clipRule:"evenodd"}))}const DG=f.forwardRef(jG),OG=DG;function MG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"}))}const LG=f.forwardRef(MG),FG=LG;function $G({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"}))}const BG=f.forwardRef($G),zG=BG;function ki({close:t,title:e}){return u.jsxs("div",{className:"flex justify-between mb-[15px]",children:[u.jsx("h1",{className:"text-[26px] font-semibold",children:e}),u.jsx("button",{onClick:t,children:u.jsx(zG,{className:"w-[30px]"})})]})}function VG({close:t,playlistSongs:e}){const{theme:n}=ne(),[r,s]=f.useState([]),{userSongs:i}=lt(),{addSongsToPlaylist:o,isFetching:a}=Co(),l={addSongContainer:"pb-[40px] relative",addSongContent:"max-h-[calc(60vh)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full max-[549px]:w-full"},c=f.useMemo(()=>!!r.length,[r]),d=async()=>{try{if(!r.length)return;await o(r)}catch(h){console.log({message:h})}finally{t()}};return u.jsxs("div",{className:l.addSongContainer,children:[u.jsx(ki,{close:t,title:"Add song to playlist"}),u.jsxs("div",{className:l.addSongContent,children:[u.jsxs(Y,{onClick:d,variant:"primary",isLoading:a,className:`rounded-full ${n.content_bg} absolute bottom-0 right-[15px] min-w-[34px] h-[32px] ${!c&&"opacity-60 pointer-events-none"}`,children:["Add",`${r.length?` (${r.length})`:""}`]}),i.map((h,m)=>{if(e.findIndex(v=>v.id===h.id)===-1)return u.jsx("div",{className:l.songItem,children:u.jsx(I2,{isChecked:!0,selectedSongs:r,setSelectedSongs:s,theme:n,data:h,active:!1,onClick:()=>{},setIsChecked:()=>{}})},m)})]})]})}function UP({children:t,active:e,done:n,inUpload:r,className:s,scrollBehavior:i}){const o=f.useRef(null),a=()=>{const l=o.current;l&&(l.scrollIntoView({behavior:i.current,block:"center"}),i.current==="instant"&&(i.current="smooth"))};return f.useEffect(()=>{e&&a()},[e]),u.jsxs("p",{ref:o,className:`lyric ${s&&s} ${r?"text-[16px]":""}  select-none  max-[549px]:text-center font-bold ${n&&"opacity-40"} ${r?"flex":""} ${e&&!r?"text-[#ffed00]":""}`,children:[t,r&&e&&u.jsx("span",{className:"ml-[10px] text-[16px]"})]})}const UG=()=>{const t=Nr();return{playStatus:{isError:!1,isPlaying:!1,isWaiting:!1,lyricSize:t.lyricSize||"medium",isLoaded:!0,isRepeat:t.isRepeat||"no",isShuffle:t.isShuffle||!1,isTimer:t.isTimer||0,isCrossFade:t.isCrossFade||!1,songBackground:t.songBackground||!1,songImage:t.songImage||!1}}},HP=Gm({name:"playStatus",initialState:()=>UG(),reducers:{setPlayStatus(t,e){t.playStatus={...t.playStatus,...e.payload}},togglePlayControl(t,e){const{variant:n}=e.payload;switch(n){default:if(typeof t.playStatus[n]=="boolean"){const r=!t.playStatus[n];t.playStatus[n]=r,bt(n,r)}}}}}),cn=t=>t.playStatus,{setPlayStatus:zt,togglePlayControl:Sb}=HP.actions,HG=HP.reducer;function WG({handlePlayPause:t}){const{playStatus:{isError:e,isPlaying:n,isWaiting:r}}=X(cn),{currentSong:s}=X(be),i=f.useMemo(()=>r?u.jsx(ds,{className:"w-[36px] max-[549px]:w-[46px] animate-spin"}):e&&s.name?u.jsx(Uv,{className:"w-[30px] max-[549px]:w-[40px]"}):n?u.jsx(jf,{className:"w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]"}):u.jsx(Hv,{className:"w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]"}),[r,e,n,s]);return u.jsx(u.Fragment,{children:u.jsx("button",{className:`p-[5px] ${r&&"pointer-events-none"} inline-flex items-center justify-center w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]`,onClick:()=>t(),children:i})})}const bb=f.memo(WG);function WP({bgRef:t,currentSong:e}){const{playStatus:{songBackground:n}}=X(cn);f.useEffect(()=>{if(n&&e.image_url){const r=t.current;r&&(r.style.backgroundImage=`url(${e.image_url})`)}},[e,n]),f.useEffect(()=>{if(!n){const r=t.current;r&&(r.style.backgroundImage="none")}},[n])}function qG({audioEle:t,isOpenFullScreen:e}){const{currentSong:n}=X(be),{playStatus:{isError:r}}=X(cn),[s,i]=f.useState({id:"",base:"",real_time:[]}),[o,a]=f.useState(!1),[l,c]=f.useState(!1),d=f.useRef(),h=async()=>{a(!0);try{const p=await Va({collection:"lyrics",id:n.lyric_id,msg:">>> api: get lyric doc"});if(p.exists()){const v=p.data();i(v)}}catch{console.log("[error] get lyric error")}finally{a(!1)}},m=()=>{clearTimeout(d.current),c(!1),a(!0),i({base:"",real_time:[],id:""})};return f.useEffect(()=>{const p=async()=>{console.log("song loaded"),c(!0)};return t&&t.addEventListener("loadeddata",p),()=>{t&&t.removeEventListener("loadeddata",p)}},[]),f.useEffect(()=>{if(!n.lyric_id&&l){a(!1);return}s.real_time.length||l&&e&&(d.current=setTimeout(()=>{h()},500))},[l,e]),f.useEffect(()=>{if(r){a(!1);return}return()=>{m()}},[n,r]),{songLyric:s,loading:o}}const Gw=(t,e)=>{const[n,r]=f.useState(()=>JSON.parse(localStorage.getItem("HD-MP3")||"{}")[t]||e);return f.useEffect(()=>{const s=JSON.parse(localStorage.getItem("HD-MP3")||"{}");s[t]=n,localStorage.setItem("HD-MP3",JSON.stringify(s))},[n]),[n,r]};function GG(){const t=Le(),{currentPlaylist:e,playlistSongs:n}=X(Es),r=Nf(),{setErrorToast:s}=_n(),i=f.useRef(!1),[o,a]=f.useState(!0),l=async()=>{if(!r.id)throw new Error("invalid playlist id");const h=await Va({collection:"playlist",id:r.id,msg:">>> api get playlist"});if(h.exists())return h.data()},c=async h=>{if(!h.song_ids.length)return[];console.log(">>> api: get playlist songs");const m=rl(_s,"songs"),p=Si(m,bi("id","in",h.song_ids)),v=await Ti(p);return v.docs.length?v.docs.map(_=>({..._.data(),song_in:`playlist_${h.id}`})):(h.song_ids.length&&s({}),[])},d=async()=>{try{if(!r.id)throw new Error("invalid playlist id");let h;const m=e.id===r.id;if(a(!0),m?h=e:h=await l(),!h)throw new Error("playlist not found");const p=await c(h);m||t(hG({playlist:h,songs:p})),t(_b({songs:p}))}catch(h){console.log({message:h}),s({})}finally{a(!1)}};return f.useEffect(()=>{i.current||(i.current=!0,console.log("run init"),d())},[]),{isFetching:o,setPlaylistSongs:_b,playlistSongs:n,currentPlaylist:e}}function KG(){const t=Le(),{currentPlaylist:e}=X(Es),{isFetching:n,playlistSongs:r}=GG(),s=async()=>{const o=r.find(l=>l.image_url);if(!o||e.image_url&&e.image_url===o.image_url)return;const a={...e,image_url:o.image_url,blurhash_encode:o.blurhash_encode||""};await xn({collection:"playlist",id:e.id,data:a,msg:">>> api: update playlist doc"}),t(Bd({image_url:o.image_url}))},i=async()=>{if(console.log(e.song_ids.length,r.length),!e.song_ids.length){if(e.image_url){const l={...e,image_url:"",blurhash_encode:""};await xn({collection:"playlist",id:e.id,data:l,msg:">>> api: update playlist doc"})}t(Bd({image_url:"",blurhash_encode:""}));return}if(e.song_ids.length===r.length)return;const o=r.map(l=>l.id),a={...e,song_ids:o};await xn({collection:"playlist",id:e.id,data:a,msg:">>> api: update playlist doc"}),t(Bd({song_ids:o}))};return f.useEffect(()=>{n||!r.length||!e||s()},[r]),f.useEffect(()=>{n||e&&i()},[n]),{playlistSongs:r,loading:n}}const qP=()=>{window.dispatchEvent(new Event("mousemove"))},GP=(t,e,n=!1)=>{const r=window.innerWidth;if(!t||!e){console.log("ele not found");return}const i=t.getBoundingClientRect().left,o=r-(i+t.offsetWidth),a=Math.abs(Math.ceil(i-o))/2;if(a<5)return!1;n&&(e.onscroll=()=>{},setTimeout(()=>{e.onscroll=qP},900)),n||Math.abs(i)>r||Math.abs(o)>r?e.style.scrollBehavior="auto":e.style.scrollBehavior="smooth";let l=e.scrollLeft;return o>i?setTimeout(()=>{e.scrollLeft=l-a},300):o<i&&setTimeout(()=>{e.scrollLeft=l+a},300),!0};function XG({containerRef:t,songItemRef:e,isOpenFullScreen:n,idle:r}){const{currentSong:s}=X(be),i=()=>{const o=e==null?void 0:e.current,a=t==null?void 0:t.current;GP(o,a,r)};f.useEffect(()=>{if(n){if(!scroll||!(t!=null&&t.current)||!(e!=null&&e.current)){console.log("lack props");return}s.name&&n&&i()}},[s,n]),f.useEffect(()=>{const o=t==null?void 0:t.current;if(o)return o.onscroll=qP,()=>{o.onscroll=()=>{}}},[])}function QG({textRef:t,textWrapperRef:e,autoScroll:n}){const{currentSong:r}=X(be),{playStatus:{isPlaying:s}}=X(cn),i=f.useRef(),o=f.useRef(),a=f.useRef(0),l=f.useRef(""),c=f.useRef(0),d=f.useRef(!1),h=f.useCallback(()=>{const y=t==null?void 0:t.current;y&&(y.style.transition="none",y.style.transform="translateX(0)",d.current=!1)},[t]),m=()=>{if(!t){console.log("lack of prop");return}if(!a.current&&!c.current)return;const y=t.current;y&&(console.log("scroll"),y.innerHTML=l.current+"&nbsp; &nbsp; &nbsp;"+l.current,d.current=!0,y.style.transition=`transform linear ${a.current}s`,y.style.transform=`translateX(-${c.current}px)`,o.current=setTimeout(()=>{h(),console.log("call unscroll")},a.current*1e3))},p=()=>{if(!n||!t||!e)return;if(d.current){console.log("reScroll cancel cause is scroll");return}const y=t.current,_=e.current;y.offsetWidth-_.offsetWidth>0&&(l.current=y.innerText,c.current=y.offsetWidth+20,a.current=Math.ceil(c.current/35))},v=()=>{h(),a.current=0,c.current=0};f.useEffect(()=>{if(!(!r.name||!s)&&(p(),!!c.current))return n&&a.current&&!d.current&&(setTimeout(()=>{m()},1e3),i.current=setInterval(()=>{m()},a.current*1e3+3e3+1e3)),()=>{clearInterval(i.current),clearTimeout(o.current),v()}},[r,s])}const YG=({song:t,closeModal:e,setIsOpenPopup:n})=>{const r=Le(),{setErrorToast:s,setSuccessToast:i}=_n(),{currentSong:o}=X(be),{userSongs:a,setUserSongs:l}=lt(),[c,d]=f.useState(!1),{addSongToPlaylistSongItem:h,deleteSongFromPlaylist:m}=Co();return{updateAndSetUserSongs:f.useCallback(async({song:g})=>{let w=[...a];const E=w.indexOf(g);w.splice(E,1);const S=w.map(k=>k.id);if(w.length!==a.length)return l(w),S},[a]),handleDeleteSong:async()=>{try{d(!0);let g=[...a];const w=g.indexOf(t);g.splice(w,1),await BP(t),l(g),o.id===t.id&&r(pi()),i({message:`'${t.name}' deleted`})}catch(g){throw console.log({message:g}),new Error("Error when delete song")}finally{d(!1),e()}},handleAddSongToPlaylistMobile:async g=>{try{d(!0),await h(t,g),i({message:`'${t.name}' added to '${g.name}'`})}catch(w){throw console.log(w),new Error("Error when add song to playlist")}finally{d(!1),e()}},handleRemoveSongFromPlaylist:async()=>{try{d(!0),await m(t)}catch(g){throw console.log({message:g}),new Error("Error when remove song from playlist")}finally{d(!1),n(!1)}},handleAddSongToPlaylist:async g=>{if(!t||!g){s({message:"Lack of props"});return}try{d(!0),await h(t,g),i({message:`'${t.name}' added to '${g.name}'`})}catch(w){throw console.log(w),new Error("Error when add song to playlist")}finally{d(!1),n(!1)}},loading:c}},$c={isDebug:!1,focusDelay:3e3,scrollSongDelay:4e3,loadingDuration:200},KP=rl(_s,"songs"),XP=rl(_s,"playlist"),JG=async()=>{const t=Si(KP,bi("by","==","admin")),e=await Ti(t);if(e.docs)return e.docs.map(r=>({...r.data(),song_in:"admin"}))},ZG=async()=>{const t=Si(XP,bi("by","==","admin")),e=await Ti(t);if(e.docs)return e.docs.map(r=>r.data())},eK=async t=>{const e=Si(XP,bi("by","==",t.email)),n=await Ti(e);if(n.docs.length)return n.docs.map(s=>s.data())},tK=async t=>{const e=Si(KP,bi("by","==",t.email)),n=await Ti(e);if(n.docs.length)return n.docs.map(s=>({...s.data(),song_in:"user"}))},nK=async t=>{const e={userSongs:[],userPlaylists:[]},n=await tK(t);n!=null&&n.length&&(e.userSongs=n);const r=await eK(t);return r!=null&&r.length&&(e.userPlaylists=r),e};function Xm({admin:t}){const{setErrorToast:e}=_n(),{user:n,loading:r}=pt(),{initial:s,initSongsContext:i}=lt(),[o,a]=f.useState(""),[l,c]=f.useState(!0),d=m=>{c(!1),a(m),e({message:"Use song error"})},h=async()=>{try{const m=await JG(),p=await ZG();if(t){i({userSongs:m,userPlaylists:p}),console.log("admin",p,m),c(!1);return}if(!n)await dx($c.loadingDuration),i({adminSongs:m,adminPlaylists:p});else{const v=await nK(n);i({...v,adminSongs:m,adminPlaylists:p})}}catch(m){console.log({message:m}),d("init song error")}finally{c(!1)}};return f.useEffect(()=>{if(r)return c(!0);if(s){console.log("Already init"),setTimeout(()=>c(!1),$c.loadingDuration);return}else{h();return}},[r]),{initial:s,loading:l,errorMsg:o,initSongsAndPlaylists:h}}function rK({audioRef:t,admin:e,inputRef:n,testImageRef:r}){const{user:s}=pt(),{isDev:i}=ne(),{userSongs:o,addUserSongs:a}=lt(),{currentSong:l}=X(be),{setTempSongs:c,tempSongs:d,clearTempSongs:h,shiftSong:m,status:p}=Km(),v=f.useRef([]),y=f.useRef([]),_=f.useRef(!1),{setErrorToast:x,setSuccessToast:g,setToasts:w}=_n(),E=b=>{if(!n.current)return;const C=n.current;C&&(C.value="",y.current=[]),h(b)},S=f.useCallback(async b=>{if(!s)return x({message:"Missing user data"});h("uploading");const R=b.target.files;if(!R.length){h("finish");return}let M=cx({by:e?"admin":s.email,song_in:e?"admin":"user"}),B=[];const O=Date.now(),V=$=>o.some(W=>W.singer===$.singer&&W.name===$.name&&W.size===$.size)||B.some(W=>W.singer===$.singer&&W.name===$.name&&W.size===$.size);try{let $;for($=0;$<=R.length-1;$++){const W=R[$],U=await L6(W);if(!U){x({message:"Error when parser song"}),E("finish-error");return}let I={...M,name:U.name,singer:U.singer,size:Math.floor(W.size/1024)};if(V(I)){console.log(">>>duplicate"),_.current=!0,v.current.push(I);continue}B.push(I),y.current=[...y.current,$],Object.assign(W,{for_song_id:B.length-1})}if(o.length+y.current.length>5&&s.role!=="ADMIN"){E("finish-error"),x({message:"You have reach the upload limit"});return}if(!B.length){_.current=!1,E("finish-error"),x({message:"Duplicate song"});return}c(B);for(let W of y.current){let U=R[W],I=lx(B[U.for_song_id].name);e&&(I+="_admin");const z=U.for_song_id,q={...B[z]};q.image_url&&await k(U.imageBlob,I,q);const{filePath:j,fileURL:Q}=await FP({file:U,folder:"/songs/",email:s.email,msg:">>> api: upload song file"});Object.assign(q,{id:I,song_file_path:j,song_url:Q});const ee=t.current;ee.src=URL.createObjectURL(U),await T(q)}}catch($){console.log({message:$}),E("finish-error"),x({});return}try{y.current=[],_.current?(E("finish-error"),w(W=>[...W,{id:Rh(4),title:"warning",desc:"Song duplicate"}])):(E("finish"),g({message:`${B.length} songs uploaded`}));const $=Date.now();i&&console.log(">>> upload songs finished after",($-O)/1e3)}catch($){console.log({message:$}),x({}),E("finish-error");return}},[s,o,l.song_in]),k=async(b,C,R)=>new Promise((M,B)=>{const O=r.current,V=URL.createObjectURL(b);O.src=V;const $=async()=>{try{URL.revokeObjectURL(V);const{encode:U}=await y2(b),{fileURL:I,filePath:z}=await $P({blob:b,folder:"/images/",songId:C,msg:">>> api: upload song's image blob"});U&&(R.blurhash_encode=U),R.image_url=I,R.image_file_path=z,M(),O.removeEventListener("error",W),B()}finally{O.removeEventListener("load",$)}},W=()=>{URL.revokeObjectURL(V),R.image_url="",O.removeEventListener("error",W),M()};O.addEventListener("load",$),O.addEventListener("error",W)}),T=async b=>new Promise((C,R)=>{const M=t.current,B=async()=>{try{const O=Math.ceil(M.duration);Object.assign(b,{duration:O}),await xn({collection:"songs",data:b,id:b.id,msg:">>> api: set song doc"}),a([b]),m(),(e||l.song_in==="user")&&Su({songs:[{...b}]}),URL.revokeObjectURL(M.src),i&&console.log(b,"uploaded"),C()}catch{R()}finally{M.removeEventListener("loadedmetadata",B)}};M.addEventListener("loadedmetadata",B)});return f.useEffect(()=>{const b=document.querySelector(".temp-song");b&&b.scrollIntoView({behavior:"smooth",block:"center"})},[d]),{handleInputChange:S}}function sK(t,e){const{theme:n}=ne(),[r,s]=f.useState(!1),[i,o]=Gw("volume",1),a=d=>{const m=d.target.getBoundingClientRect(),p=t.current;if(p){let v=+((d.clientX-m.x)/p.clientWidth).toFixed(2);v>.9?v=1:v<.05?(v=0,s(!0)):s(!1),o(v)}},l=d=>{d.preventDefault();const h=.1;let m=i;d.deltaY>0?m-h>0?m-=h:m=0:m+h<1?m+=h:m=1,o(+m.toFixed(2))},c=()=>{if(!e)return;const d=!r;s(d),e.muted=d};return f.useEffect(()=>{if(t.current&&e){const d=i*100;t.current.style.background=`linear-gradient(to right, ${n.content_code} ${d}%, white ${d}%, white 100%)`,e.volume=i,s(i===0)}},[i,n]),{volume:i,handleSetVolume:a,isMute:r,handleMute:c,handleWheel:l}}const iK=/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;function oK({data:t,inputFields:e,imageURLFromLocal:n}){const[r,s]=f.useState(!!t.name),[i,o]=f.useState(!!t.singer),[a,l]=f.useState(!1),[c,d]=f.useState(!1),[h,m]=f.useState(!1);return f.useEffect(()=>{e.name?s(!0):s(!1)},[e.name]),f.useEffect(()=>{e.singer?o(!0):o(!1)},[e.singer]),f.useEffect(()=>{if(!e.image_url){l(!0);return}const p=iK.test(e.image_url);l(p)},[e.image_url]),f.useEffect(()=>{(e.name!==t.name||e.singer!==t.singer||e.image_url)&&m(!0)},[e,n]),f.useEffect(()=>{d(r&&i&&a&&h)},[r,i,a,h]),{validName:r,validSinger:i,validURL:a,isAbleToSubmit:c,isChangeInEdit:h,setValidURL:l}}function aK({song:t,close:e}){const n=Le(),{theme:r}=ne(),{user:s}=pt(),{setErrorToast:i,setSuccessToast:o}=_n(),{currentSong:a}=X(be),{updateUserSong:l}=lt(),[c,d]=f.useState(!1),[h,m]=f.useState(!1),[p,v]=f.useState(t.image_url),[y,_]=f.useState(""),[x,g]=f.useState(),[w,E]=f.useState({name:t.name,singer:t.singer,image_url:""}),S=f.useRef(null),{isAbleToSubmit:k,validName:T,validSinger:b,validURL:C,isChangeInEdit:R,setValidURL:M}=oK({data:t,inputFields:w,imageURLFromLocal:y}),B=f.useMemo(()=>{if(y)return y;if(p)return p;if(C)return w.image_url},[w,y,p,t,C]),O=f.useMemo(()=>!!y||!!p,[y,p]),V=(j,Q)=>{E({...w,[j]:Q})},$=f.useCallback(()=>{t.image_file_path&&!y?v(""):y?(_(""),g(void 0)):v(""),m(!0);const j=S.current;j&&(j.value="")},[y,t.image_file_path]),W=f.useCallback(j=>{const ee=j.target.files[0];_(URL.createObjectURL(ee)),m(!0),g(ee)},[]),U=()=>{d(!1),e()},I=j=>{j.stopPropagation(),U()},z=async()=>{if(s){if(!t.id){i({message:"Edit song wrong data id"});return}try{let j={...t};if(R){if(console.log("is change in edit"),!w.name||!w.singer){console.log("input invalid"),i({});return}const Q=w.image_url&&C?w.image_url:j.image_url;if(d(!0),j={...j,name:w.name,singer:w.singer,image_url:Q},j.name!==w.name||j.singer!==w.singer){console.log("input invalid"),i({});return}if(x&&h){const{filePath:ee,fileURL:ie}=await FP({file:x,folder:"/images/",email:s.email});j.image_file_path=ee,j.image_url=ie}else h&&(j.image_file_path="");h||l(j)}if(h&&(d(!0),console.log("isImpactOnImage"),t.image_file_path&&(j.image_file_path="",j.image_url="",await Ly({filePath:t.image_file_path,msg:">>> api: delete song's image file"})),!p&&!x&&(console.log("remove current image url"),j.image_file_path="",j.image_url=""),x)){console.log("upload new file");const Q=await F6(x);if(Q==null)return;const ee=$P({blob:Q,folder:"/images/",songId:j.id}),{encode:ie}=await y2(Q);ie&&(j.blurhash_encode=ie,console.log("check encode",ie));const{filePath:De,fileURL:ve}=await ee;j.image_file_path=De,j.image_url=ve}await xn({collection:"songs",data:j,id:j.id,msg:">>> api: update song doc"}),l(j),n(Yq({song:j})),a.id===j.id&&n(vn({...j,currentIndex:a.currentIndex,song_in:a.song_in})),o({message:"Song edited"}),U()}catch(j){console.log({message:j}),i({})}finally{d(!1)}}},q={textColor:r.type==="light"?"text-[#333]":"text-[#fff]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${r.alpha} text-[14px] font-[500]`};return u.jsxs("div",{className:`w-[500px] max-w-[calc(90vw-40px)] h-[auto] ${c?"opacity-60 pointer-events-none":""}`,children:[u.jsx("input",{ref:S,id:"editImageInput",type:"file",accept:"image/*",onChange:W,className:"hidden"}),u.jsx("h1",{className:"text-[20px] font-semibold",children:"Edit"}),u.jsxs("div",{className:"flex gap-[20px] mt-[10px] max-[800px]:flex-col",children:[u.jsxs("div",{className:"w-[30%] max-[800px]:flex max-[800px]:w-full max-[800px]:gap-[12px]",children:[u.jsx("div",{className:"w-full rounded-[5px] overflow-hidden",children:u.jsx(ws,{classNames:"object-cover object-center w-full h-full",onError:()=>M(!1),src:B,blurHashEncode:t.blurhash_encode})}),u.jsxs("div",{className:"md:mt-[10px]",children:[u.jsxs("div",{className:"flex gap-[10px]",children:[u.jsx("label",{htmlFor:"editImageInput",className:`inline-block cursor-pointer hover:brightness-90 px-[20px] py-[5px] bg-${r.alpha} rounded-full text-[14px]`,children:u.jsx(zj,{className:"w-[15px]"})}),O&&u.jsx(Y,{onClick:()=>$(),className:`inline-block hover:brightness-90 px-[20px] py-[5px] ${r.content_bg} rounded-full text-[14px]`,children:u.jsx(Bi,{className:"w-[15px]"})})]}),u.jsx("p",{className:`text-[12px] ${q.textColor} mt-[10px]`,children:"* Image from URL will not be apply until you remove current image"})]})]}),u.jsxs("div",{className:"flex flex-col flex-grow gap-[10px]",children:[u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"text-[14px] inline-flex",children:["Name:",T?u.jsx(Cd,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Bi,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:`${q.input} ${q.textColor}`,value:w.name,type:"text",onChange:j=>V("name",j.target.value),placeholder:t.name})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Singer:",b?u.jsx(Cd,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Bi,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:q.input,value:w.singer,onChange:j=>V("singer",j.target.value),type:"text",placeholder:t.singer})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Image URL:",w.image_url&&u.jsx(u.Fragment,{children:C?u.jsx(Cd,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Bi,{className:"w-[20px] text-red-500 ml-[10px]"})})]}),u.jsx("input",{className:q.input,value:w.image_url,onChange:j=>V("image_url",j.target.value),type:"text"})]}),u.jsxs("div",{className:"flex gap-[10px] mt-[10px]",children:[u.jsx(Y,{isLoading:c,onClick:z,className:`${r.content_bg} rounded-full text-[14px] ${k?"":!h&&"pointer-events-none opacity-60"}`,variant:"primary",children:"Save"}),u.jsx(Y,{onClick:I,className:`bg-${r.alpha} rounded-full hover:bg-red-500 hover:text-[#fff] text-[14px]`,variant:"primary",children:"Close"})]})]})]})]})}function lK({toast:t,theme:e,onClick:n}){const r={icon:"w-[30px] max-[549px]:w-[25px]",container:`text-white px-[12px] py-[6px] rounded-[4px] flex items-center  ${e.side_bar_bg} border border-${e.alpha}`,text:`font-[500] text-[14px] max-[549px]:text-[14px] ${e.type==="light"?"text-[#333]":""}`};return u.jsxs("div",{onClick:()=>n?n(t.id):void 0,className:`${r.container} animate-[fadeIn_0.3s_linear]`,children:[t.title&&u.jsxs("span",{className:"mr-[10px]",children:[t.title==="success"&&u.jsx(xI,{className:`${r.icon} text-emerald-500 `}),t.title==="error"&&u.jsx(yO,{className:`${r.icon} text-red-500`}),t.title==="warning"&&u.jsx(Uv,{className:`${r.icon} text-yellow-500`})]}),u.jsx("p",{className:r.text,children:t.desc})]})}function cK({lyric:t,handleSetTime:e,theme:n,realTimeLyrics:r,index:s,setRealTimeLyrics:i}){const[o,a]=f.useState(!1),[l,c]=f.useState(t.text),d=f.useRef(null),h=p=>{p.preventDefault();const v=[...r],y={...v[s],text:l};v[s]=y,console.log("check new lyric ",y),i(v),a(!1)},m={input:`bg-${n.alpha} rounded-[4px] outline-none w-full px-[8px] text-[16px]`};return f.useEffect(()=>{var p;o&&((p=d.current)==null||p.focus())},[o]),u.jsxs("div",{className:"pb-[10px]",children:[!o&&u.jsxs("p",{className:"text-[16px] leading-[1.2] font-bold select-none flex items-center",children:[t.text,u.jsx("button",{onClick:()=>a(!0),className:"ml-[8px]",children:u.jsx(II,{className:"w-[16px]"})})]}),o&&u.jsx("form",{action:"",onSubmit:h,children:u.jsx("input",{onBlur:()=>a(!1),value:l,onChange:p=>c(p.target.value),ref:d,type:"text",className:m.input})}),u.jsxs("div",{className:"flex gap-[10px] h-[20px]",children:[u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.start),children:[t.start,"s"]}),u.jsx("span",{children:" - "}),u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.end),children:[t.end,"s"]})]})]})}function zd({cb:t,active:e,className:n,size:r="default"}){const{theme:s}=ne(),i={circle:`${r==="default"?"w-[20px] h-[20px]":"w-[16px] h-[16px]"}  absolute bg-white left-[3px] rounded-[50%] transition-transform top-[50%] translate-y-[-50%]`,active:`${r==="default"?"translate-x-[14px]":"translate-x-[18px]"} `,inActive:"translate-x-[0]"};return u.jsx("div",{onClick:t,className:`relative  cursor-pointer ${r==="default"?"h-[24px]":"h-[20px]"} rounded-[99px] w-[40px] ${n||""} 
         ${e?s.content_bg:"bg-"+s.alpha} `,children:u.jsx("div",{className:`${i.circle} ${e?i.active:i.inActive}`})})}const $y=Math.min,ga=Math.max,af=Math.round,hd=Math.floor,gi=t=>({x:t,y:t});function uK(t,e){return typeof t=="function"?t(e):t}function Kw(t){return t.split("-")[0]}function QP(t){return t.split("-")[1]}function dK(t){return t==="x"?"y":"x"}function hK(t){return t==="y"?"height":"width"}function Xw(t){return["top","bottom"].includes(Kw(t))?"y":"x"}function fK(t){return dK(Xw(t))}function YP(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function Tb(t,e,n){let{reference:r,floating:s}=t;const i=Xw(e),o=fK(e),a=hK(o),l=Kw(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,m=r[a]/2-s[a]/2;let p;switch(l){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-s.width,y:h};break;default:p={x:r.x,y:r.y}}switch(QP(e)){case"start":p[o]-=m*(n&&c?-1:1);break;case"end":p[o]+=m*(n&&c?-1:1);break}return p}const mK=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=Tb(c,r,l),m=r,p={},v=0;for(let y=0;y<a.length;y++){const{name:_,fn:x}=a[y],{x:g,y:w,data:E,reset:S}=await x({x:d,y:h,initialPlacement:r,placement:m,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});if(d=g??d,h=w??h,p={...p,[_]:{...p[_],...E}},S&&v<=50){v++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):S.rects),{x:d,y:h}=Tb(c,m,l)),y=-1;continue}}return{x:d,y:h,placement:m,strategy:s,middlewareData:p}};async function pK(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Kw(n),a=QP(n),l=Xw(n)==="y",c=["left","top"].includes(o)?-1:1,d=i&&l?-1:1,h=uK(e,t);let{mainAxis:m,crossAxis:p,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof v=="number"&&(p=a==="end"?v*-1:v),l?{x:p*d,y:m*c}:{x:m*c,y:p*d}}const JP=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,s=await pK(e,t);return{x:n+s.x,y:r+s.y,data:s}}}};function yi(t){return ZP(t)?(t.nodeName||"").toLowerCase():"#document"}function Dn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ss(t){var e;return(e=(ZP(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function ZP(t){return t instanceof Node||t instanceof Dn(t).Node}function it(t){return t instanceof Element||t instanceof Dn(t).Element}function sn(t){return t instanceof HTMLElement||t instanceof Dn(t).HTMLElement}function By(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Dn(t).ShadowRoot}function ku(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Fn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function gK(t){return["table","td","th"].includes(yi(t))}function Qw(t){const e=Yw(),n=Fn(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function yK(t){let e=mo(t);for(;sn(e)&&!Iu(e);){if(Qw(e))return e;e=mo(e)}return null}function Yw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Iu(t){return["html","body","#document"].includes(yi(t))}function Fn(t){return Dn(t).getComputedStyle(t)}function Qm(t){return it(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function mo(t){if(yi(t)==="html")return t;const e=t.assignedSlot||t.parentNode||By(t)&&t.host||Ss(t);return By(e)?e.host:e}function eN(t){const e=mo(t);return Iu(e)?t.ownerDocument?t.ownerDocument.body:t.body:sn(e)&&ku(e)?e:eN(e)}function Qi(t,e){var n;e===void 0&&(e=[]);const r=eN(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=Dn(r);return s?e.concat(i,i.visualViewport||[],ku(r)?r:[]):e.concat(r,Qi(r))}function tN(t){const e=Fn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=sn(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=af(n)!==i||af(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Jw(t){return it(t)?t:t.contextElement}function ya(t){const e=Jw(t);if(!sn(e))return gi(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=tN(e);let o=(i?af(n.width):n.width)/r,a=(i?af(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const vK=gi(0);function nN(t){const e=Dn(t);return!Yw()||!e.visualViewport?vK:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function xK(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Dn(t)?!1:e}function po(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Jw(t);let o=gi(1);e&&(r?it(r)&&(o=ya(r)):o=ya(t));const a=xK(i,n,r)?nN(i):gi(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const m=Dn(i),p=r&&it(r)?Dn(r):r;let v=m.frameElement;for(;v&&r&&p!==m;){const y=ya(v),_=v.getBoundingClientRect(),x=Fn(v),g=_.left+(v.clientLeft+parseFloat(x.paddingLeft))*y.x,w=_.top+(v.clientTop+parseFloat(x.paddingTop))*y.y;l*=y.x,c*=y.y,d*=y.x,h*=y.y,l+=g,c+=w,v=Dn(v).frameElement}}return YP({width:d,height:h,x:l,y:c})}function wK(t){let{rect:e,offsetParent:n,strategy:r}=t;const s=sn(n),i=Ss(n);if(n===i)return e;let o={scrollLeft:0,scrollTop:0},a=gi(1);const l=gi(0);if((s||!s&&r!=="fixed")&&((yi(n)!=="body"||ku(i))&&(o=Qm(n)),sn(n))){const c=po(n);a=ya(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function _K(t){return Array.from(t.getClientRects())}function rN(t){return po(Ss(t)).left+Qm(t).scrollLeft}function EK(t){const e=Ss(t),n=Qm(t),r=t.ownerDocument.body,s=ga(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=ga(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+rN(t);const a=-n.scrollTop;return Fn(r).direction==="rtl"&&(o+=ga(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function SK(t,e){const n=Dn(t),r=Ss(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Yw();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function bK(t,e){const n=po(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=sn(t)?ya(t):gi(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function kb(t,e,n){let r;if(e==="viewport")r=SK(t,n);else if(e==="document")r=EK(Ss(t));else if(it(e))r=bK(e,n);else{const s=nN(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return YP(r)}function sN(t,e){const n=mo(t);return n===e||!it(n)||Iu(n)?!1:Fn(n).position==="fixed"||sN(n,e)}function TK(t,e){const n=e.get(t);if(n)return n;let r=Qi(t).filter(a=>it(a)&&yi(a)!=="body"),s=null;const i=Fn(t).position==="fixed";let o=i?mo(t):t;for(;it(o)&&!Iu(o);){const a=Fn(o),l=Qw(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||ku(o)&&!l&&sN(t,o))?r=r.filter(d=>d!==o):s=a,o=mo(o)}return e.set(t,r),r}function kK(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?TK(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=kb(e,d,s);return c.top=ga(h.top,c.top),c.right=$y(h.right,c.right),c.bottom=$y(h.bottom,c.bottom),c.left=ga(h.left,c.left),c},kb(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function IK(t){return tN(t)}function CK(t,e,n){const r=sn(e),s=Ss(e),i=n==="fixed",o=po(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=gi(0);if(r||!r&&!i)if((yi(e)!=="body"||ku(s))&&(a=Qm(e)),r){const c=po(e,!0,i,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else s&&(l.x=rN(s));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Ib(t,e){return!sn(t)||Fn(t).position==="fixed"?null:e?e(t):t.offsetParent}function iN(t,e){const n=Dn(t);if(!sn(t))return n;let r=Ib(t,e);for(;r&&gK(r)&&Fn(r).position==="static";)r=Ib(r,e);return r&&(yi(r)==="html"||yi(r)==="body"&&Fn(r).position==="static"&&!Qw(r))?n:r||yK(t)||n}const AK=async function(t){let{reference:e,floating:n,strategy:r}=t;const s=this.getOffsetParent||iN,i=this.getDimensions;return{reference:CK(e,await s(n),r),floating:{x:0,y:0,...await i(n)}}};function RK(t){return Fn(t).direction==="rtl"}const PK={convertOffsetParentRelativeRectToViewportRelativeRect:wK,getDocumentElement:Ss,getClippingRect:kK,getOffsetParent:iN,getElementRects:AK,getClientRects:_K,getDimensions:IK,getScale:ya,isElement:it,isRTL:RK};function NK(t,e){let n=null,r;const s=Ss(t);function i(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:d,width:h,height:m}=t.getBoundingClientRect();if(a||e(),!h||!m)return;const p=hd(d),v=hd(s.clientWidth-(c+h)),y=hd(s.clientHeight-(d+m)),_=hd(c),g={rootMargin:-p+"px "+-v+"px "+-y+"px "+-_+"px",threshold:ga(0,$y(1,l))||1};let w=!0;function E(S){const k=S[0].intersectionRatio;if(k!==l){if(!w)return o();k?o(!1,k):r=setTimeout(()=>{o(!1,1e-7)},100)}w=!1}try{n=new IntersectionObserver(E,{...g,root:s.ownerDocument})}catch{n=new IntersectionObserver(E,g)}n.observe(t)}return o(!0),i}function oN(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Jw(t),d=s||i?[...c?Qi(c):[],...Qi(e)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=c&&a?NK(c,n):null;let m=-1,p=null;o&&(p=new ResizeObserver(x=>{let[g]=x;g&&g.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{p&&p.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let v,y=l?po(t):null;l&&_();function _(){const x=po(t);y&&(x.x!==y.x||x.y!==y.y||x.width!==y.width||x.height!==y.height)&&n(),y=x,v=requestAnimationFrame(_)}return n(),()=>{d.forEach(x=>{s&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),h&&h(),p&&p.disconnect(),p=null,l&&cancelAnimationFrame(v)}}const jK=(t,e,n)=>{const r=new Map,s={platform:PK,...n},i={...s.platform,_c:r};return mK(t,e,{...s,platform:i})};var Vd=typeof document<"u"?f.useLayoutEffect:f.useEffect;function lf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!lf(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!lf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function aN(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Cb(t,e){const n=aN(t);return Math.round(e*n)/n}function Ab(t){const e=f.useRef(t);return Vd(()=>{e.current=t}),e}function DK(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=f.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,p]=f.useState(r);lf(m,r)||p(r);const[v,y]=f.useState(null),[_,x]=f.useState(null),g=f.useCallback(W=>{W!=k.current&&(k.current=W,y(W))},[y]),w=f.useCallback(W=>{W!==T.current&&(T.current=W,x(W))},[x]),E=i||v,S=o||_,k=f.useRef(null),T=f.useRef(null),b=f.useRef(d),C=Ab(l),R=Ab(s),M=f.useCallback(()=>{if(!k.current||!T.current)return;const W={placement:e,strategy:n,middleware:m};R.current&&(W.platform=R.current),jK(k.current,T.current,W).then(U=>{const I={...U,isPositioned:!0};B.current&&!lf(b.current,I)&&(b.current=I,qa.flushSync(()=>{h(I)}))})},[m,e,n,R]);Vd(()=>{c===!1&&b.current.isPositioned&&(b.current.isPositioned=!1,h(W=>({...W,isPositioned:!1})))},[c]);const B=f.useRef(!1);Vd(()=>(B.current=!0,()=>{B.current=!1}),[]),Vd(()=>{if(E&&(k.current=E),S&&(T.current=S),E&&S){if(C.current)return C.current(E,S,M);M()}},[E,S,M,C]);const O=f.useMemo(()=>({reference:k,floating:T,setReference:g,setFloating:w}),[g,w]),V=f.useMemo(()=>({reference:E,floating:S}),[E,S]),$=f.useMemo(()=>{const W={position:n,left:0,top:0};if(!V.floating)return W;const U=Cb(V.floating,d.x),I=Cb(V.floating,d.y);return a?{...W,transform:"translate("+U+"px, "+I+"px)",...aN(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:I}},[n,a,V.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:M,refs:O,elements:V,floatingStyles:$}),[d,M,O,V,$])}function Bo(t){let e=t.activeElement;for(;((n=e)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;e=e.shadowRoot.activeElement}return e}function un(t,e){if(!t||!e)return!1;const n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&By(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function OK(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function MK(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function LK(t){if(t.mozInputSource===0&&t.isTrusted)return!0;const e=/Android/i;return(e.test(OK())||e.test(MK()))&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function FK(t){return t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType!=="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0}function $K(){return/apple/i.test(navigator.vendor)}function cf(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function BK(t){return"nativeEvent"in t}function zK(t){return t.matches("html,body")}function hn(t){return(t==null?void 0:t.ownerDocument)||document}function Sg(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function lN(t){return"composedPath"in t?t.composedPath()[0]:t.target}const VK="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function cN(t){return sn(t)&&t.matches(VK)}function bg(t){t.preventDefault(),t.stopPropagation()}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var UK=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],zy=UK.join(","),uN=typeof Element>"u",Bc=uN?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,uf=!uN&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},df=function t(e,n){var r;n===void 0&&(n=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=s===""||s==="true",o=i||n&&e&&t(e.parentNode);return o},HK=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},WK=function(e,n,r){if(df(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(zy));return n&&Bc.call(e,zy)&&s.unshift(e),s=s.filter(r),s},qK=function t(e,n,r){for(var s=[],i=Array.from(e);i.length;){var o=i.shift();if(!df(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?s.push.apply(s,c):s.push({scopeParent:o,candidates:c})}else{var d=Bc.call(o,zy);d&&r.filter(o)&&(n||!e.includes(o))&&s.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),m=!df(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&m){var p=t(h===!0?o.children:h.children,!0,r);r.flatten?s.push.apply(s,p):s.push({scopeParent:o,candidates:p})}else i.unshift.apply(i,o.children)}}return s},dN=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},hN=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||HK(e))&&!dN(e)?0:e.tabIndex},GK=function(e,n){var r=hN(e);return r<0&&n&&!dN(e)?0:r},KK=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},fN=function(e){return e.tagName==="INPUT"},XK=function(e){return fN(e)&&e.type==="hidden"},QK=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},YK=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},JK=function(e){if(!e.name)return!0;var n=e.form||uf(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var i=YK(s,e.form);return!i||i===e},ZK=function(e){return fN(e)&&e.type==="radio"},eX=function(e){return ZK(e)&&!JK(e)},tX=function(e){var n,r=e&&uf(e),s=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==e){var o,a,l;for(i=!!((o=s)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(s)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!i&&s;){var c,d,h;r=uf(s),s=(c=r)===null||c===void 0?void 0:c.host,i=!!((d=s)!==null&&d!==void 0&&(h=d.ownerDocument)!==null&&h!==void 0&&h.contains(s))}}return i},Rb=function(e){var n=e.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},nX=function(e,n){var r=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=Bc.call(e,"details>summary:first-of-type"),o=i?e.parentElement:e;if(Bc.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var a=e;e;){var l=e.parentElement,c=uf(e);if(l&&!l.shadowRoot&&s(l)===!0)return Rb(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(tX(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Rb(e);return!1},rX=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return Bc.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},sX=function(e,n){return!(n.disabled||df(n)||XK(n)||nX(n,e)||QK(n)||rX(n))},Pb=function(e,n){return!(eX(n)||hN(n)<0||!sX(e,n))},iX=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},oX=function t(e){var n=[],r=[];return e.forEach(function(s,i){var o=!!s.scopeParent,a=o?s.scopeParent:s,l=GK(a,o),c=o?t(s.candidates):a;l===0?o?n.push.apply(n,c):n.push(a):r.push({documentOrder:i,tabIndex:l,item:s,isScope:o,content:c})}),r.sort(KK).reduce(function(s,i){return i.isScope?s.push.apply(s,i.content):s.push(i.content),s},[]).concat(n)},mN=function(e,n){n=n||{};var r;return n.getShadowRoot?r=qK([e],n.includeContainer,{filter:Pb.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:iX}):r=WK(e,n.includeContainer,Pb.bind(null,n)),oX(r)};function hf(){return hf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hf.apply(this,arguments)}var Pn=typeof document<"u"?f.useLayoutEffect:f.useEffect;let Tg=!1,aX=0;const Nb=()=>"floating-ui-"+aX++;function lX(){const[t,e]=f.useState(()=>Tg?Nb():void 0);return Pn(()=>{t==null&&e(Nb())},[]),f.useEffect(()=>{Tg||(Tg=!0)},[]),t}const cX=Ky["useId".toString()],pN=cX||lX;function uX(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(s=>s(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(s=>s!==n))||[])}}}const dX=f.createContext(null),hX=f.createContext(null),gN=()=>{var t;return((t=f.useContext(dX))==null?void 0:t.id)||null},Ym=()=>f.useContext(hX);function zc(t){return"data-floating-ui-"+t}function rs(t){const e=f.useRef(t);return Pn(()=>{e.current=t}),e}const jb=zc("safe-polygon");function kg(t,e,n){return n&&!cf(n)?0:typeof t=="number"?t:t==null?void 0:t[e]}function fX(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,events:i,elements:{domReference:o,floating:a},refs:l}=t,{enabled:c=!0,delay:d=0,handleClose:h=null,mouseOnly:m=!1,restMs:p=0,move:v=!0}=e,y=Ym(),_=gN(),x=rs(h),g=rs(d),w=f.useRef(),E=f.useRef(),S=f.useRef(),k=f.useRef(),T=f.useRef(!0),b=f.useRef(!1),C=f.useRef(()=>{}),R=f.useCallback(()=>{var V;const $=(V=s.current.openEvent)==null?void 0:V.type;return($==null?void 0:$.includes("mouse"))&&$!=="mousedown"},[s]);f.useEffect(()=>{if(!c)return;function V(){clearTimeout(E.current),clearTimeout(k.current),T.current=!0}return i.on("dismiss",V),()=>{i.off("dismiss",V)}},[c,i]),f.useEffect(()=>{if(!c||!x.current||!n)return;function V(W){R()&&r(!1,W)}const $=hn(a).documentElement;return $.addEventListener("mouseleave",V),()=>{$.removeEventListener("mouseleave",V)}},[a,n,r,c,x,s,R]);const M=f.useCallback(function(V,$){$===void 0&&($=!0);const W=kg(g.current,"close",w.current);W&&!S.current?(clearTimeout(E.current),E.current=setTimeout(()=>r(!1,V),W)):$&&(clearTimeout(E.current),r(!1,V))},[g,r]),B=f.useCallback(()=>{C.current(),S.current=void 0},[]),O=f.useCallback(()=>{if(b.current){const V=hn(l.floating.current).body;V.style.pointerEvents="",V.removeAttribute(jb),b.current=!1}},[l]);return f.useEffect(()=>{if(!c)return;function V(){return s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1}function $(I){if(clearTimeout(E.current),T.current=!1,m&&!cf(w.current)||p>0&&kg(g.current,"open")===0)return;const z=kg(g.current,"open",w.current);z?E.current=setTimeout(()=>{r(!0,I)},z):r(!0,I)}function W(I){if(V())return;C.current();const z=hn(a);if(clearTimeout(k.current),x.current){n||clearTimeout(E.current),S.current=x.current({...t,tree:y,x:I.clientX,y:I.clientY,onClose(){O(),B(),M(I)}});const j=S.current;z.addEventListener("mousemove",j),C.current=()=>{z.removeEventListener("mousemove",j)};return}(w.current==="touch"?!un(a,I.relatedTarget):!0)&&M(I)}function U(I){V()||x.current==null||x.current({...t,tree:y,x:I.clientX,y:I.clientY,onClose(){O(),B(),M(I)}})(I)}if(it(o)){const I=o;return n&&I.addEventListener("mouseleave",U),a==null||a.addEventListener("mouseleave",U),v&&I.addEventListener("mousemove",$,{once:!0}),I.addEventListener("mouseenter",$),I.addEventListener("mouseleave",W),()=>{n&&I.removeEventListener("mouseleave",U),a==null||a.removeEventListener("mouseleave",U),v&&I.removeEventListener("mousemove",$),I.removeEventListener("mouseenter",$),I.removeEventListener("mouseleave",W)}}},[o,a,c,t,m,p,v,M,B,O,r,n,y,g,x,s]),Pn(()=>{var V;if(c&&n&&(V=x.current)!=null&&V.__options.blockPointerEvents&&R()){const U=hn(a).body;if(U.setAttribute(jb,""),U.style.pointerEvents="none",b.current=!0,it(o)&&a){var $,W;const I=o,z=y==null||($=y.nodesRef.current.find(q=>q.id===_))==null||(W=$.context)==null?void 0:W.elements.floating;return z&&(z.style.pointerEvents=""),I.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{I.style.pointerEvents="",a.style.pointerEvents=""}}}},[c,n,_,a,o,y,x,s,R]),Pn(()=>{n||(w.current=void 0,B(),O())},[n,B,O]),f.useEffect(()=>()=>{B(),clearTimeout(E.current),clearTimeout(k.current),O()},[c,o,B,O]),f.useMemo(()=>{if(!c)return{};function V($){w.current=$.pointerType}return{reference:{onPointerDown:V,onPointerEnter:V,onMouseMove($){n||p===0||(clearTimeout(k.current),k.current=setTimeout(()=>{T.current||r(!0,$.nativeEvent)},p))}},floating:{onMouseEnter(){clearTimeout(E.current)},onMouseLeave($){i.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),M($.nativeEvent,!1)}}}},[i,c,p,n,r,M])}let Db=0;function Ri(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:s=!1}=e;r&&cancelAnimationFrame(Db);const i=()=>t==null?void 0:t.focus({preventScroll:n});s?i():Db=requestAnimationFrame(i)}function mX(t,e){var n;let r=[],s=(n=t.find(i=>i.id===e))==null?void 0:n.parentId;for(;s;){const i=t.find(o=>o.id===s);s=i==null?void 0:i.parentId,i&&(r=r.concat(i))}return r}function Kl(t,e){let n=t.filter(s=>{var i;return s.parentId===e&&((i=s.context)==null?void 0:i.open)}),r=n;for(;r.length;)r=t.filter(s=>{var i;return(i=r)==null?void 0:i.some(o=>{var a;return s.parentId===o.id&&((a=s.context)==null?void 0:a.open)})}),n=n.concat(r);return n}let Mo=new WeakMap,fd=new WeakSet,md={},Ig=0;const pX=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,yN=t=>t&&(t.host||yN(t.parentNode)),gX=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=yN(n);return t.contains(r)?r:null}).filter(n=>n!=null);function yX(t,e,n,r){const s="data-floating-ui-inert",i=r?"inert":n?"aria-hidden":null,o=gX(e,t),a=new Set,l=new Set(o),c=[];md[s]||(md[s]=new WeakMap);const d=md[s];o.forEach(h),m(e),a.clear();function h(p){!p||a.has(p)||(a.add(p),p.parentNode&&h(p.parentNode))}function m(p){!p||l.has(p)||Array.prototype.forEach.call(p.children,v=>{if(a.has(v))m(v);else{const y=i?v.getAttribute(i):null,_=y!==null&&y!=="false",x=(Mo.get(v)||0)+1,g=(d.get(v)||0)+1;Mo.set(v,x),d.set(v,g),c.push(v),x===1&&_&&fd.add(v),g===1&&v.setAttribute(s,""),!_&&i&&v.setAttribute(i,"true")}})}return Ig++,()=>{c.forEach(p=>{const v=(Mo.get(p)||0)-1,y=(d.get(p)||0)-1;Mo.set(p,v),d.set(p,y),v||(!fd.has(p)&&i&&p.removeAttribute(i),fd.delete(p)),y||p.removeAttribute(s)}),Ig--,Ig||(Mo=new WeakMap,Mo=new WeakMap,fd=new WeakSet,md={})}}function Ob(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=hn(t[0]).body;return yX(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const vN=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function xN(t,e){const n=mN(t,vN());e==="prev"&&n.reverse();const r=n.indexOf(Bo(hn(t)));return n.slice(r+1)[0]}function vX(){return xN(document.body,"next")}function xX(){return xN(document.body,"prev")}function Mb(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!un(n,r)}const wN={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let wX;function Lb(t){t.key==="Tab"&&(t.target,clearTimeout(wX))}const Fb=f.forwardRef(function(e,n){const[r,s]=f.useState();Pn(()=>($K()&&s("button"),document.addEventListener("keydown",Lb),()=>{document.removeEventListener("keydown",Lb)}),[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[zc("focus-guard")]:"",style:wN};return f.createElement("span",hf({},e,i))}),_X=f.createContext(null),EX=()=>f.useContext(_X),SX=f.forwardRef(function(e,n){return f.createElement("button",hf({},e,{type:"button",ref:n,tabIndex:-1,style:wN}))});function _N(t){const{context:e,children:n,disabled:r=!1,order:s=["content"],guards:i=!0,initialFocus:o=0,returnFocus:a=!0,modal:l=!0,visuallyHiddenDismiss:c=!1,closeOnFocusOut:d=!0}=t,{open:h,refs:m,nodeId:p,onOpenChange:v,events:y,dataRef:_,elements:{domReference:x,floating:g}}=e,w=pX()?i:!0,E=rs(s),S=rs(o),k=rs(a),T=Ym(),b=EX(),C=typeof o=="number"&&o<0,R=f.useRef(null),M=f.useRef(null),B=f.useRef(!1),O=f.useRef(null),V=f.useRef(!1),$=b!=null,W=x&&x.getAttribute("role")==="combobox"&&cN(x),U=f.useCallback(function(j){return j===void 0&&(j=g),j?mN(j,vN()):[]},[g]),I=f.useCallback(j=>{const Q=U(j);return E.current.map(ee=>x&&ee==="reference"?x:g&&ee==="floating"?g:Q).filter(Boolean).flat()},[x,g,E,U]);f.useEffect(()=>{if(r||!l)return;function j(ee){if(ee.key==="Tab"){un(g,Bo(hn(g)))&&U().length===0&&!W&&bg(ee);const ie=I(),De=lN(ee);E.current[0]==="reference"&&De===x&&(bg(ee),ee.shiftKey?Ri(ie[ie.length-1]):Ri(ie[1])),E.current[1]==="floating"&&De===g&&ee.shiftKey&&(bg(ee),Ri(ie[0]))}}const Q=hn(g);return Q.addEventListener("keydown",j),()=>{Q.removeEventListener("keydown",j)}},[r,x,g,l,E,m,W,U,I]),f.useEffect(()=>{if(r||!d)return;function j(){V.current=!0,setTimeout(()=>{V.current=!1})}function Q(ee){const ie=ee.relatedTarget;queueMicrotask(()=>{const De=!(un(x,ie)||un(g,ie)||un(ie,g)||un(b==null?void 0:b.portalNode,ie)||ie!=null&&ie.hasAttribute(zc("focus-guard"))||T&&(Kl(T.nodesRef.current,p).find(ve=>{var Re,Wn;return un((Re=ve.context)==null?void 0:Re.elements.floating,ie)||un((Wn=ve.context)==null?void 0:Wn.elements.domReference,ie)})||mX(T.nodesRef.current,p).find(ve=>{var Re,Wn;return((Re=ve.context)==null?void 0:Re.elements.floating)===ie||((Wn=ve.context)==null?void 0:Wn.elements.domReference)===ie})));ie&&De&&!V.current&&ie!==O.current&&(B.current=!0,v(!1,ee))})}if(g&&sn(x))return x.addEventListener("focusout",Q),x.addEventListener("pointerdown",j),!l&&g.addEventListener("focusout",Q),()=>{x.removeEventListener("focusout",Q),x.removeEventListener("pointerdown",j),!l&&g.removeEventListener("focusout",Q)}},[r,x,g,l,p,T,b,v,d]),f.useEffect(()=>{var j;if(r)return;const Q=Array.from((b==null||(j=b.portalNode)==null?void 0:j.querySelectorAll("["+zc("portal")+"]"))||[]);if(g){const ee=[g,...Q,R.current,M.current,E.current.includes("reference")||W?x:null].filter(De=>De!=null),ie=l?Ob(ee,w,!w):Ob(ee);return()=>{ie()}}},[r,x,g,l,E,b,W,w]),Pn(()=>{if(r||!g)return;const j=hn(g),Q=Bo(j);queueMicrotask(()=>{const ee=I(g),ie=S.current,De=(typeof ie=="number"?ee[ie]:ie.current)||g,ve=un(g,Q);!C&&!ve&&h&&Ri(De,{preventScroll:De===g})})},[r,h,g,C,I,S]),Pn(()=>{if(r||!g)return;let j=!1;const Q=hn(g),ee=Bo(Q),ie=_.current;O.current=ee;function De(ve){if(ve.type==="escapeKey"&&m.domReference.current&&(O.current=m.domReference.current),["referencePress","escapeKey"].includes(ve.type))return;const Re=ve.data.returnFocus;typeof Re=="object"?(B.current=!1,j=Re.preventScroll):B.current=!Re}return y.on("dismiss",De),()=>{y.off("dismiss",De);const ve=Bo(Q);(un(g,ve)||T&&Kl(T.nodesRef.current,p).some(Wn=>{var qr;return un((qr=Wn.context)==null?void 0:qr.elements.floating,ve)})||ie.openEvent&&["click","mousedown"].includes(ie.openEvent.type))&&m.domReference.current&&(O.current=m.domReference.current),k.current&&sn(O.current)&&!B.current&&Ri(O.current,{cancelPrevious:!1,preventScroll:j})}},[r,g,k,_,m,y,T,p]),Pn(()=>{if(!(r||!b))return b.setFocusManagerState({modal:l,closeOnFocusOut:d,open:h,onOpenChange:v,refs:m}),()=>{b.setFocusManagerState(null)}},[r,b,l,h,v,m,d]),Pn(()=>{if(!r&&g&&typeof MutationObserver=="function"){const j=()=>{const ee=g.getAttribute("tabindex");E.current.includes("floating")||Bo(hn(g))!==m.domReference.current&&U().length===0?ee!=="0"&&g.setAttribute("tabindex","0"):ee!=="-1"&&g.setAttribute("tabindex","-1")};j();const Q=new MutationObserver(j);return Q.observe(g,{childList:!0,subtree:!0,attributes:!0}),()=>{Q.disconnect()}}},[r,g,m,E,U]);function z(j){return r||!c||!l?null:f.createElement(SX,{ref:j==="start"?R:M,onClick:Q=>v(!1,Q.nativeEvent)},typeof c=="string"?c:"Dismiss")}const q=!r&&w&&!W&&($||l);return f.createElement(f.Fragment,null,q&&f.createElement(Fb,{"data-type":"inside",ref:b==null?void 0:b.beforeInsideRef,onFocus:j=>{if(l){const ee=I();Ri(s[0]==="reference"?ee[0]:ee[ee.length-1])}else if(b!=null&&b.preserveTabOrder&&b.portalNode)if(B.current=!1,Mb(j,b.portalNode)){const ee=vX()||x;ee==null||ee.focus()}else{var Q;(Q=b.beforeOutsideRef.current)==null||Q.focus()}}}),!W&&z("start"),n,z("end"),q&&f.createElement(Fb,{"data-type":"inside",ref:b==null?void 0:b.afterInsideRef,onFocus:j=>{if(l)Ri(I()[0]);else if(b!=null&&b.preserveTabOrder&&b.portalNode)if(d&&(B.current=!0),Mb(j,b.portalNode)){const ee=xX()||x;ee==null||ee.focus()}else{var Q;(Q=b.afterOutsideRef.current)==null||Q.focus()}}}))}function $b(t){return sn(t.target)&&t.target.tagName==="BUTTON"}function Bb(t){return cN(t)}function bX(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,elements:{domReference:i}}=t,{enabled:o=!0,event:a="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:d=!0}=e,h=f.useRef(),m=f.useRef(!1);return f.useMemo(()=>o?{reference:{onPointerDown(p){h.current=p.pointerType},onMouseDown(p){p.button===0&&(cf(h.current,!0)&&c||a!=="click"&&(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="mousedown")?r(!1,p.nativeEvent):(p.preventDefault(),r(!0,p.nativeEvent))))},onClick(p){if(a==="mousedown"&&h.current){h.current=void 0;return}cf(h.current,!0)&&c||(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="click")?r(!1,p.nativeEvent):r(!0,p.nativeEvent))},onKeyDown(p){h.current=void 0,!(p.defaultPrevented||!d||$b(p))&&(p.key===" "&&!Bb(i)&&(p.preventDefault(),m.current=!0),p.key==="Enter"&&r(!(n&&l),p.nativeEvent))},onKeyUp(p){p.defaultPrevented||!d||$b(p)||Bb(i)||p.key===" "&&m.current&&(m.current=!1,r(!(n&&l),p.nativeEvent))}}}:{},[o,s,a,c,d,i,l,n,r])}const TX=Ky["useInsertionEffect".toString()],kX=TX||(t=>t());function Ud(t){const e=f.useRef(()=>{});return kX(()=>{e.current=t}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}const IX={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},CX={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},AX=t=>{var e,n;return{escapeKeyBubbles:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePressBubbles:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function EN(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:s,nodeId:i,elements:{reference:o,domReference:a,floating:l},dataRef:c}=t,{enabled:d=!0,escapeKey:h=!0,outsidePress:m=!0,outsidePressEvent:p="pointerdown",referencePress:v=!1,referencePressEvent:y="pointerdown",ancestorScroll:_=!1,bubbles:x}=e,g=Ym(),w=gN()!=null,E=Ud(typeof m=="function"?m:()=>!1),S=typeof m=="function"?E:m,k=f.useRef(!1),{escapeKeyBubbles:T,outsidePressBubbles:b}=AX(x),C=Ud(M=>{if(!n||!d||!h||M.key!=="Escape")return;const B=g?Kl(g.nodesRef.current,i):[];if(!T&&(M.stopPropagation(),B.length>0)){let O=!0;if(B.forEach(V=>{var $;if(($=V.context)!=null&&$.open&&!V.context.dataRef.current.__escapeKeyBubbles){O=!1;return}}),!O)return}s.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1,BK(M)?M.nativeEvent:M)}),R=Ud(M=>{const B=k.current;if(k.current=!1,B||typeof S=="function"&&!S(M))return;const O=lN(M),V="["+zc("inert")+"]",$=hn(l).querySelectorAll(V);let W=it(O)?O:null;for(;W&&!Iu(W);){const z=mo(W);if(z===hn(l).body||!it(z))break;W=z}if($.length&&it(O)&&!zK(O)&&!un(O,l)&&Array.from($).every(z=>!un(W,z)))return;if(sn(O)&&l){const z=O.clientWidth>0&&O.scrollWidth>O.clientWidth,q=O.clientHeight>0&&O.scrollHeight>O.clientHeight;let j=q&&M.offsetX>O.clientWidth;if(q&&Fn(O).direction==="rtl"&&(j=M.offsetX<=O.offsetWidth-O.clientWidth),j||z&&M.offsetY>O.clientHeight)return}const U=g&&Kl(g.nodesRef.current,i).some(z=>{var q;return Sg(M,(q=z.context)==null?void 0:q.elements.floating)});if(Sg(M,l)||Sg(M,a)||U)return;const I=g?Kl(g.nodesRef.current,i):[];if(I.length>0){let z=!0;if(I.forEach(q=>{var j;if((j=q.context)!=null&&j.open&&!q.context.dataRef.current.__outsidePressBubbles){z=!1;return}}),!z)return}s.emit("dismiss",{type:"outsidePress",data:{returnFocus:w?{preventScroll:!0}:LK(M)||FK(M)}}),r(!1,M)});return f.useEffect(()=>{if(!n||!d)return;c.current.__escapeKeyBubbles=T,c.current.__outsidePressBubbles=b;function M(V){r(!1,V)}const B=hn(l);h&&B.addEventListener("keydown",C),S&&B.addEventListener(p,R);let O=[];return _&&(it(a)&&(O=Qi(a)),it(l)&&(O=O.concat(Qi(l))),!it(o)&&o&&o.contextElement&&(O=O.concat(Qi(o.contextElement)))),O=O.filter(V=>{var $;return V!==(($=B.defaultView)==null?void 0:$.visualViewport)}),O.forEach(V=>{V.addEventListener("scroll",M,{passive:!0})}),()=>{h&&B.removeEventListener("keydown",C),S&&B.removeEventListener(p,R),O.forEach(V=>{V.removeEventListener("scroll",M)})}},[c,l,a,o,h,S,p,n,r,_,d,T,b,C,R]),f.useEffect(()=>{k.current=!1},[S,p]),f.useMemo(()=>d?{reference:{onKeyDown:C,[IX[y]]:M=>{v&&(s.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1,M.nativeEvent))}},floating:{onKeyDown:C,[CX[p]]:()=>{k.current=!0}}}:{},[d,s,v,p,y,r,C])}function SN(t){var e;t===void 0&&(t={});const{open:n=!1,onOpenChange:r,nodeId:s}=t,[i,o]=f.useState(null),a=((e=t.elements)==null?void 0:e.reference)||i,l=DK(t),c=Ym(),d=Ud((E,S)=>{E&&(m.current.openEvent=S),r==null||r(E,S)}),h=f.useRef(null),m=f.useRef({}),p=f.useState(()=>uX())[0],v=pN(),y=f.useCallback(E=>{const S=it(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;l.refs.setReference(S)},[l.refs]),_=f.useCallback(E=>{(it(E)||E===null)&&(h.current=E,o(E)),(it(l.refs.reference.current)||l.refs.reference.current===null||E!==null&&!it(E))&&l.refs.setReference(E)},[l.refs]),x=f.useMemo(()=>({...l.refs,setReference:_,setPositionReference:y,domReference:h}),[l.refs,_,y]),g=f.useMemo(()=>({...l.elements,domReference:a}),[l.elements,a]),w=f.useMemo(()=>({...l,refs:x,elements:g,dataRef:m,nodeId:s,floatingId:v,events:p,open:n,onOpenChange:d}),[l,s,v,p,n,d,x,g]);return Pn(()=>{const E=c==null?void 0:c.nodesRef.current.find(S=>S.id===s);E&&(E.context=w)}),f.useMemo(()=>({...l,context:w,refs:x,elements:g}),[l,x,g,w])}function Cg(t,e,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...t,...e.map(s=>s?s[n]:null).concat(t).reduce((s,i)=>(i&&Object.entries(i).forEach(o=>{let[a,l]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof l=="function"){var c;(c=r.get(a))==null||c.push(l),s[a]=function(){for(var d,h=arguments.length,m=new Array(h),p=0;p<h;p++)m[p]=arguments[p];return(d=r.get(a))==null?void 0:d.map(v=>v(...m)).find(v=>v!==void 0)}}}else s[a]=l}),s),{})}}function bN(t){t===void 0&&(t=[]);const e=t,n=f.useCallback(i=>Cg(i,t,"reference"),e),r=f.useCallback(i=>Cg(i,t,"floating"),e),s=f.useCallback(i=>Cg(i,t,"item"),t.map(i=>i==null?void 0:i.item));return f.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:s}),[n,r,s])}function TN(t,e){e===void 0&&(e={});const{open:n,floatingId:r}=t,{enabled:s=!0,role:i="dialog"}=e,o=pN();return f.useMemo(()=>{const a={id:r,role:i};return s?i==="tooltip"?{reference:{"aria-describedby":n?r:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?r:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:o}},floating:{...a,...i==="menu"&&{"aria-labelledby":o}}}:{}},[s,i,n,r,o])}const zb=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function Lo(t,e){return typeof t=="function"?t(e):t}function RX(t,e){const[n,r]=f.useState(t);return t&&!n&&r(!0),f.useEffect(()=>{if(!t){const s=setTimeout(()=>r(!1),e);return()=>clearTimeout(s)}},[t,e]),n}function kN(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:s=250}=e,o=(typeof s=="number"?s:s.close)||0,[a,l]=f.useState(!1),[c,d]=f.useState("unmounted"),h=RX(n,o);return Pn(()=>{a&&!h&&d("unmounted")},[a,h]),Pn(()=>{if(r)if(n){d("initial");const m=requestAnimationFrame(()=>{d("open")});return()=>{cancelAnimationFrame(m)}}else l(!0),d("close")},[n,r]),{isMounted:h,status:c}}function PX(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:s,common:i,duration:o=250}=e,a=t.placement,l=a.split("-")[0],c=f.useMemo(()=>({side:l,placement:a}),[l,a]),d=typeof o=="number",h=(d?o:o.open)||0,m=(d?o:o.close)||0,[p,v]=f.useState(()=>({...Lo(i,c),...Lo(n,c)})),{isMounted:y,status:_}=kN(t,{duration:o}),x=rs(n),g=rs(r),w=rs(s),E=rs(i);return Pn(()=>{const S=Lo(x.current,c),k=Lo(w.current,c),T=Lo(E.current,c),b=Lo(g.current,c)||Object.keys(S).reduce((C,R)=>(C[R]="",C),{});if(_==="initial"&&v(C=>({transitionProperty:C.transitionProperty,...T,...S})),_==="open"&&v({transitionProperty:Object.keys(b).map(zb).join(","),transitionDuration:h+"ms",...T,...b}),_==="close"){const C=k||S;v({transitionProperty:Object.keys(C).map(zb).join(","),transitionDuration:m+"ms",...T,...C})}},[m,w,x,g,E,h,_,c]),{isMounted:y,styles:p}}function NX({placement:t="bottom"}={}){const[e,n]=f.useState(!1),{context:r,floatingStyles:s,refs:i}=SN({placement:t,open:e,onOpenChange:n,whileElementsMounted:oN,middleware:[JP(10)]}),o=fX(r,{move:!1}),a=EN(r),l=TN(r,{role:"tooltip"}),{getFloatingProps:c,getReferenceProps:d}=bN([o,a,l]);return{isOpen:e,setIsOpen:n,getFloatingProps:c,getReferenceProps:d,floatingStyles:s,refs:i,context:r}}const IN=f.createContext(null),CN=()=>{const t=f.useContext(IN);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function Vc({children:t,...e}){const n=NX({...e});return u.jsx(IN.Provider,{value:n,children:t})}function Uc({children:t,...e}){const{getReferenceProps:n,refs:r,isOpen:s}=CN();return u.jsx("button",{ref:r.setReference,"data-state":s?"open":"closed",...n(e),children:t})}function Hc({children:t,className:e,...n}){const{theme:r}=ne(),{context:s,refs:i,getFloatingProps:o,floatingStyles:a,isOpen:l}=CN(),c={container:`${r.type==="dark"?"bg-white/70 text-[#333]":"bg-black/70 text-white"}`};if(l)return u.jsx(_N,{context:s,modal:!1,children:u.jsx("div",{className:`${c.container}  text-[12px] font-semibold px-[6px] py-[3px] rounded-[4px]`,ref:i.setFloating,style:{...a},...o(n),children:t})})}const Zw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABnCAMAAADBqBfIAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAu5QTFRF+9t4AAAA////+tp4+9t6iWRS/fDGkm1W//35imVT///+imRT/Oah9NN25sRx/eej+91+//78i2ZT+9x7kGtV/vbeiWRS9tZ2+Nd3/fHL+96C/OWd//zz//32/vPS2rlu/vLOjWhU/e/D+9+F//rslXBX/euy/vTXl3NX/vTV+dl3/ems7s10/OGN/vfhlnBQ/Oem/OSa/OKQt5Ri8dB1/N+I/vXaoHta/eu1/vjk/fHJ/vnp/OCK/e26o39b6chyj2lR/e/BimVSiWRS7Mtz/eiqjGdR/eqv//vv/OSYjWdR4b9vzqxp/OOWk21Qi2ZRnXlZ/vnnpoJcv5xl3bxumnNP/OKUimRSimVSkGlRm3ZZimRSq4del3BP1LJrmnJPzKppnXVO2LZtroZMt45Mj2hRqH9MrIJKmXJPqIRdrIhelG1Qn3dPxaNms49hqoJLlG1Qm3NPupFJoXlOnXZPnHVPlG5QlW5QkWtRjmhRjGZSi2ZSn3dOmHFPjWdSnXVOtZJhoXhO/e6948FwvZpk/OGPmXJQqoJJu5djrodFvpVIj2hRl3BPj2lRjGdRsohLkWpRm3NP////jWdRw5lGqIFNpHxPlm9QlG1Qn3dPl3BPsYhNx6Rn0K5qsY5gmHBP//vxkWtR////////zqNJ////////s4pIkGpRl3BQ///+pn1M////ropfmHFQpn5PjmhRmnNPonpOm3VOl3BQxp9JxZlLkmxRwp9lk2xRs4lK////lnBQwplJnXZPkmtQzLqvkmtQ////lW9Q9/Tx+vj2sJN74s+lkmxQ6+Xjo4Rx2c3EspmN2rt4////5sqFwa6k////xZtD5dfDoXhKlnRl////uaCQ+/jy////zKBH////totJ////////4MeV////////1Kc++vfznHdYu5RFn3hOr4dLnXZP8ezp////////vpVD////////mnNP////l3BQkWtRmXJPpH1Np39Q////rINMmnROoHhQyC8s0wAAAPp0Uk5T/wD////3///////9//////////////r///////////////////////////////9o/////////////////////7//4u7//9X////K////iN///////0P/8uyf/+j/Q/8Y/x3/AwKuBg1O//9xDP//C4Q1BRMuK3hWirnn2idLzxf/Cf////86A/8CA7RSqNAIm0v5xQEVFmJqEl0E////WP+kBVcBf7wCkT0VEeP/XgujPCBVfwEClf+OD8pLBTqrwkqTJsneoApf///h6P8d///rAv8E66f//4sCKxNpw/+i1wHWXwIxCyf/sTQKDOoh9G7EZC4NkhEsBY8dBX0AAAe/SURBVHic7ZpnWBNJGMd3E0IIoYQQktACoUZ6C6GDdFEBkd6kSrFixY7KoWfvXRTLnd07z16v9957P73e77z7drshOxOyk82mPPfcPY//j+/svr+Zd2benbIY/i8Iuwf5P0Pe/3Duw0v2REf/dqCh59z3tofcmRO9fkOVUCzhBwergoP5SoE0e2tvZ/Msm0Gubh4qkSo1fU3luQnOMrlc5pwQ4dJyuVslzFk67/bnNoDM6GznSbqaMsMwupzL+1WCkt7FbdZB7uzKF2r2R3ARhGHJXeL5VWt7LlgO2T1lIX8w0yhAp7BxGYKs45Mtg7RGZ0smJphCkOKOrZdmLbYA0jaQJelzZoPQyi9D2rvbXMjymdIyk4EaGTT+ogbzIE8USZqM9zZaCfWC81PNgJypLss1E0E2plG5dQdbyOR54j7UtDAtl9KSAXaQN28JG80NFSXnripUx9AgJx/it1iIICSP550xDZm8QOJiOYPomNXSR7aZgMyo4a+0hkFQJvLWMUO2bVJa1Q5S3D7ebSbI3l3KRmsZRL+czv6aAXKdZ/YURElWu2GjUciyutM2QBDK5F9ZZQTyd3sp+4zILD/pASOQKWKrOx1osHo3ErKjOt5mDCxCdWwVAtJaY7NgkfLjVSAgAzw/GzIwbkbRGhqkrSjDlgwiIyuv0yA94nLbQrjTi84aQCZnddtiGuorVzDfANLDG2tjBoZ1FelBrn37+NFH3/GujFQH2tkSMlYwF0I4Orn5pMbZEiIvvQIhP3OAxqAeTk8qyItxih0fF+kObHZs2jyubjsK4o16FpS6qYGtYJTC398zxV6ngNFarUgPCXcdo6YqkCDsBJAfIcQJBXEDxZHAZs9hkENiuncaSdK0A8gpWJyHgjiA4vuALYUJQspXUeCFXV54g4J8BotC2EI8TUEIudm/IlhMQT6G9nQUxAcB8WcB4XDeffVLCvI2tNqjIIWguBIBCXClFBOeHqBI9nXUxzz5sg5yFNoSUZAJoHg8sCmAzWCs2MUVJLrpUa79MAw5DE2pKIgHKIbTCELoo17kHaXXmj8PaSEfbAEWBxQkFOFwFKJ1ehi9cbHlOy3kxGvQFIh4BQ5XGBoIjkS8gYmSocv3tJBnnoIWVL3SQSmcRhCCqhaGOcGAPaCFdLwAIeG6h9xFXuq0yMpYp5jwEBgaOI0Sgc0dCVE7GEBmvwghCqe8kPQAT0ViVGqhr/4o0SqdDkH24gjIp1rIpLdg2xwdOQyC0wiMuEI0JBb6OTwMyfmGybOeFHRIMhoCh/ipEzrIGywhHnRIKJJRCSP90fBknFT9CWOQoFLBpyqKMiETUVoqeOWLQ8OQ2XUv+SB9Et3qE+ShsAfjtVBEg6DydhxMRM89rctdHdn76UnVN3lUQFJMbBrp1psy+nhRfsBko2cV9xBY5YPPF+sgN/L3jdGrfGpoSlJMZZoX/IoHgjK1IcTNYMLbqQs8YOw94vi/UOuuBfF2ED5BhBnKzldX5gg+KFRAYNsIicaH+x+E1XWzF8kEnRTkUhk3ALYEsSwCPeBtCHHwTElJ8STkrwiNCvLl6CGivN2xXOkcChKtkkXCGRpAh4AqFFCWVA6zHJPzyIiUVy+jIAPKCDuYjA7Sl1SutAqYgES5DodxX/5GCnJX6IfpdX0sDaKm4gCmXpBxgM+oJGo0cOuHwIL7Qkk/Zge/5AoaxJ2qeDIzxDHIPyRWDfOyLDgaruqHNBgWDkaeQxqNMpqqJWVI9FB4BqxIKggnFrDD8h4TpzZM+y5wSYTjZ8QyTAQrt4IGiaWqSrnxErFZDE+rngUhzTl+er3L8aVNFRGZ8ApDV+ShP1HGpFmvtwlqyxokAg+bEk57PNkjKTbQPAKGOQsO6O+05ksSiKaA/FzoZfi8Rbujpuzd+pCTvHFEU8BHwjHJEp+Gkms2XRyxZ1xfS+xL49yM94oFGrGdI3VcSp6rwIyPXN6bqe78r0ZC9i7oDiMGJuh7H/RyyhzlCg232HiFmDx7BMPYgz4hzVV8/lRDyJqtGeRpgXYh55CC3KCaJxflEtwQgjdIyeOCNCIV+o+3xXa+K7+VDmmrqSWPomI8K02+z0booyi8uWoixnKDblrOtTWtKAg+T2zWjQmj+nK240jI8rUa2x10zsfREGK9Omib86hc/jFjR7Y4vo5MYdZLXpo/8kpoBOTIFKUV1xqAMZ3xGB3fO2TdxYZW8bybOBMEX97Ot5ISNo23B2eG4B2/WknpFx540BQEv7qWb8W5qryfF23oEXVxNvWW5ZcosnredVo70FeAxcJ+y64AMzXZFXR/6MvM1meruiy4zOQ2SoqaUQwj17K/L5K0mNsY50Fp73KkN2MXzDtmCrsizGKMU5U8dj/amfH7+Iqlyn7W+ZK7soy36a4xVwyX/n/sWhg8UcaKMbZbnNXTatQT4+8LHb11ktW5phKz3K9MuKECMXDZQXB8WfFCZZcfQ3O4EdNqhUWbZzB6MflLyawl7VXisn2ZiO4JSyhfrRIuKj53xIQPFj/HvN68c0GOOLj+cotLglxXf1nuyv2rNXxhyaWGsyYdsP3NZ81fO2s21PEEAkmwSkX+5SOsKskq7txOu6+2BkJq1uyfbq6Lnjdz5vkpOzfPae64yPrN/9yvV/cgOP4PsP50Fs+e30kAAAAASUVORK5CYII=";function jX({vinylRef:t}){const{playStatus:{isPlaying:e}}=X(cn);f.useEffect(()=>{const n=t.current;n&&(e?n.style.animationPlayState="running":n.style.animationPlayState="paused")},[e])}function DX({isOpenFullScreen:t,admin:e}){const n=f.useRef(null),{currentSong:r}=X(be);jX({vinylRef:n});const s={songInfoWrapper:`${e?"w-1/4":"w-1/4 "}`,songInfoChild:"flex flex-row items-center h-full origin-center"};return u.jsx("div",{className:`${s.songInfoWrapper}  ${t?"hidden":""}`,children:u.jsxs("div",{className:`${s.songInfoChild} ${t?"hidden":""}`,children:[u.jsx("div",{className:e?"w-[36px]":"w-[46px]",children:u.jsx("img",{ref:n,src:r.image_url||Zw,className:"rounded-full w-full animate-[spin_8s_linear_infinite]"})}),u.jsxs("div",{className:"ml-[10px] flex-grow",children:[u.jsx("div",{className:"h-[24px] w-full mask-image-horizontal",children:u.jsx(ff,{autoScroll:!0,classNames:"text-[18px] font-[500]",label:r.name||"name"})}),u.jsx("div",{className:"h-[20px] w-full mask-image-horizontal",children:u.jsx(ff,{autoScroll:!0,classNames:"text-[14px] opacity-60",label:r.singer||"singer"})})]})]})})}function OX({idle:t,audioEle:e,admin:n,isOpenFullScreen:r,setIsOpenFullScreen:s,isOpenSongQueue:i,setIsOpenSongQueue:o}){const{theme:a}=ne(),{currentSong:l}=X(be),{playStatus:{isPlaying:c,isWaiting:d}}=X(cn),h=f.useRef(null),m=zn(),{handleSetVolume:p,isMute:v,handleMute:y,handleWheel:_}=sK(h,e),x=f.useMemo(()=>m.pathname.includes("edit"),[m]),g=()=>{i&&o(!1),s(!0)},w={before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]",wrapper:`border-${a.alpha} fixed bottom-0 w-full border-t transition-transform z-50 px-10 ${n?"h-[60px]":"h-[90px]"}`,container:"flex flex-row gap-[10px] h-full items-stretch",controlWrapper:"flex max-w-[450px] flex-grow",controlWrapperChild_1:`${r?"max-w-[600px] flex-col-reverse pb-[10px]":"flex-col justify-center"}`,controlWrapperChild_2:`${!l.song_url&&"pointer-events-none opacity-60"}`,volumeWrapper:`volume-control ${n?"w-1/4":"w-1/4 "} flex items-center justify-end gap-[8px]`,volumeLineBase:"ml-3 w-full relative h-[4px] cursor-pointer rounded-full",volumeLineCurrent:"absolute left-0 top-0 h-full w-full ",blurBg:`bg-opacity-[0.8] backdrop-blur-[15px] z-[-1] absolute inset-0 ${a.bottom_player_bg}`};return u.jsxs("div",{className:`${w.wrapper} ${r&&"border-transparent"} ${x&&"translate-y-[100%] "} bg-transparent`,children:[u.jsx("div",{className:`${w.blurBg} ${r?"opacity-0 transition-opacity delay-[.2s]":""}`}),u.jsxs("div",{className:`${w.container} ${r?"justify-center text-white":"justify-between"} ${t&&"transition-opacity duration-[.3s] opacity-0"}`,children:[u.jsx(DX,{isOpenFullScreen:r,admin:n}),u.jsx("div",{className:` ${w.controlWrapper} ${n?"":w.controlWrapperChild_1}  ${w.controlWrapperChild_2}`,children:f.useMemo(()=>u.jsx(AN,{admin:n,audioEle:e,idle:!1,isOpenFullScreen:r}),[c,r,d])}),u.jsxs("div",{className:`${w.volumeWrapper}  ${r?"hidden":""}`,children:[u.jsxs("div",{className:"flex flex-grow items-center max-w-[150px]",children:[u.jsx("button",{onClick:()=>y(),children:v?u.jsx(uO,{className:"w-[24px]"}):u.jsx(aO,{className:"w-[24px]"})}),u.jsx("div",{onClick:E=>p(E),onWheel:_,ref:h,className:`${w.volumeLineBase} ${w.before}`,style:{backgroundColor:"white"}})]}),!n&&u.jsxs(u.Fragment,{children:[u.jsxs(Vc,{placement:"top",children:[u.jsx(Uc,{onClick:g,className:`h-[35px] w-[35px] rounded-[99px] ${a.side_bar_bg}  ${a.content_hover_bg} p-[7px] ${l.name?"":"opacity-20 pointer-events-none"}`,children:u.jsx(dD,{className:"w-full"})}),u.jsx(Hc,{children:"Fullscreen mode"})]}),u.jsxs(Vc,{placement:"top",children:[u.jsx(Uc,{onClick:()=>o(!i),className:`${a.content_hover_bg} h-[35px] w-[35px] p-[8px] rounded-[4px] ${l.name?"":"opacity-20 pointer-events-none"} ${i?a.content_bg:a.side_bar_bg}`,children:u.jsx(sO,{className:"w-full"})}),u.jsx(Hc,{children:"Queue"})]})]})]})]})]})}const MX=f.memo(OX);function LX(t,e){f.useEffect(()=>{if(t)return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[...e])}function FX({audioEle:t,isOpenFullScreen:e,timelineRef:n,currentTimeRef:r,remainingTimeRef:s}){const i=Le(),{theme:o}=ne(),{user:a}=pt(),{queueSongs:l}=X(Wr),{playStatus:{isPlaying:c,isRepeat:d,isShuffle:h,isCrossFade:m}}=X(cn),{currentSong:p}=X(be),{currentPlaylist:v}=X(Es),[y,_]=f.useState(!1),[x,g]=f.useState(0),w=f.useRef(!0),E=f.useRef(0),S=f.useRef(0),k=f.useRef(),T=f.useRef(0),b=f.useRef(0),C=f.useRef(0),R=f.useRef(o.content_code),M=f.useRef(!1),B=f.useRef(!0),O=f.useRef(),V=zn(),$=f.useMemo(()=>V.pathname.includes("edit"),[V]);LX(()=>{var me;k.current=(me=n.current)==null?void 0:me.offsetWidth},[e]);const U=()=>{try{if(t==null||t.play(),!a)return;B.current&&(m&&(t.volume=0),B.current=!1)}catch{}},I=()=>{t==null||t.pause()},z=me=>l[me],q=()=>{i(zt({isPlaying:!1})),O.current&&clearInterval(O.current)},j=()=>{w.current=!1,i(zt({isPlaying:!0,isWaiting:!1,isError:!1}))},Q=()=>{_(!1),bt("duration",0),n.current&&r.current&&s.current&&(r.current.innerText="00:00",s.current.innerText="00:00",n.current.style.background="white")},ee=f.useCallback(me=>{const nt=me.target;if(k.current&&S.current){const ct=nt.getBoundingClientRect(),Zm=(me.clientX-ct.left)/k.current,il=Math.ceil(Zm*S.current);if(t){const ep=t.currentTime;if(T.current&&Math.abs(ep-T.current)<1&&Math.abs(il-T.current)<1){console.log("no seek");return}t.currentTime=il,T.current=il}}},[e,p,c]),ie=f.useCallback(()=>{let me=E.current+1,nt;me<l.length?nt=l[me]:(me=0,nt=l[0]),i(vn({...nt,currentIndex:me,song_in:p.song_in}))},[p,l]),De=f.useCallback(()=>{let me=E.current-1,nt;me>=0?nt=l[me]:(nt=l[l.length-1],me=l.length-1),i(vn({...nt,currentIndex:me,song_in:p.song_in}))},[p,l]),ve=me=>{const ct=Nr().volume||1;if(me<=2){const En=me/2*ct;t.volume=En}else if(me<b.current){t.volume!=ct&&(t.volume=ct);return}if(me>=b.current){const En=(S.current-me)/2*ct;t.volume=En}},Re=()=>{if(!t){console.log("auto ele is undefined when update time");return}const me=t==null?void 0:t.currentTime,nt=n.current;if(S.current&&me&&nt){const ct=me/(S.current/100);nt.style.background=`linear-gradient(to right, ${R.current} ${ct}%, white ${ct}%, white 100%)`}r.current&&(r.current.innerText=Ra(me)||"00:00"),m&&ve(me)},Wn=()=>{const nt=Nr().volume||1;if(t.volume=nt,d==="one")return U();if(h){let ct=E.current;for(;ct===E.current;)ct=Math.floor(Math.random()*l.length);const En=z(ct);return i(vn({...En,currentIndex:ct,song_in:p.song_in}))}return E.current===l.length-1&&(d==="all"?M.current=!1:M.current=!0),ie()},qr=()=>{var ct;if(!t)return;const me=s.current,nt=t.duration;if(_(!0),S.current=nt,me.innerText=Ra(nt),k.current=(ct=n.current)==null?void 0:ct.offsetWidth,b.current=nt-3,w.current||bt("current",p),M.current){M.current=!1,i(zt({isWaiting:!1,isPlaying:!1}));return}if($||w.current){if(i(zt({isWaiting:!1,isPlaying:!1})),w.current){w.current=!1;const En=Nr();En.current.id===p.id&&(t.currentTime=En.duration||0),Re(),En.current||(bt("current",p),U())}return}U()},Ao=()=>{g(Math.random())};return f.useEffect(()=>{if(!t){console.log("Audio element is undefined in use control");return}return t.addEventListener("error",Ao),t.addEventListener("pause",q),t.addEventListener("playing",j),()=>{t.removeEventListener("error",Ao),t.removeEventListener("pause",q),t.removeEventListener("playing",j)}},[]),f.useEffect(()=>{x&&p.name&&i(zt({isWaiting:!1,isError:!0}))},[x]),f.useEffect(()=>{if(!t||!p.name){i(zt({isWaiting:!1,isPlaying:!1}));return}return I(),i(zt({isWaiting:!0,isError:!1,isPlaying:!1})),t.src=p.song_url,E.current=p.currentIndex,p.name&&(document.title=`${p.name} - ${p.singer}`),()=>{Q(),clearInterval(O.current),B.current=!0}},[p.id+p.song_in]),f.useEffect(()=>{if(!p.name)return;let me=`${p.name} - ${p.singer}`;!c&&v.name&&p.song_in.includes(v.id)&&(me=`${v.name}`),document.title=me},[c]),f.useEffect(()=>{if(t)return t==null||t.addEventListener("ended",Wn),()=>t==null?void 0:t.removeEventListener("ended",Wn)},[d,h,p.song_in,l]),f.useEffect(()=>(t.addEventListener("timeupdate",Re),()=>t.removeEventListener("timeupdate",Re)),[m]),f.useEffect(()=>{R.current=o.content_code,c||Re()},[o]),f.useEffect(()=>{if(t)return $&&c&&I(),t.addEventListener("loadedmetadata",qr),()=>{t.removeEventListener("loadedmetadata",qr)}},[$,p.id,m]),f.useEffect(()=>(C.current=t.volume,c&&(O.current=setInterval(()=>{bt("duration",t.currentTime.toFixed(1))},3e3)),()=>clearInterval(O.current)),[c]),{handleNext:ie,handlePrevious:De,handleSeek:ee,play:U,pause:I,isLoaded:y}}function AN({audioEle:t,admin:e,isOpenFullScreen:n,className:r}){const s=Le(),{theme:i}=ne(),{queueSongs:o}=X(Wr),{playStatus:{isPlaying:a,isRepeat:l,isShuffle:c,isError:d}}=X(cn),{currentSong:h}=X(be),m=f.useRef(null),p=f.useRef(null),v=f.useRef(null),{handleNext:y,handlePrevious:_,handleSeek:x,play:g,pause:w,isLoaded:E}=FX({audioEle:t,isOpenFullScreen:n,admin:e,timelineRef:m,currentTimeRef:p,remainingTimeRef:v}),S=f.useCallback(()=>{a?w():g()},[a]),k=()=>{let C;switch(l){case"no":C="one";break;case"one":C="all";break;case"all":C="no";break;default:C="no"}bt("isRepeat",C),s(zt({isRepeat:C}))},T=()=>{const C=!c;s(zt({isShuffle:C})),bt("isShuffle",C)},b={button:`p-[5px] ${o.length<=1&&"opacity-20 pointer-events-none"}`,buttonsContainer:`w-full flex justify-between sm:justify-center items-center gap-x-[20px] ${e?"":"h-[50px]"}`,processContainer:`flex w-full flex-row items-center h-[30px] ${e?"h-full":""}`,processLineBase:"h-[4px] flex-grow relative cursor-pointer rounded-[99px] ",processLineCurrent:`absolute left-0 rounded-l-[99px] top-0 h-full ${i.content_bg}`,currentTime:"opacity-60 text-[14px] font-semibold",duration:"text-[14px] font-semibold",icon:"w-[35px] max-[350px]:w-[25px]",before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]"};return u.jsxs("div",{className:`relative h-full w-full ${r||""}`,children:[u.jsx("div",{className:`${b.buttonsContainer}`,children:!e&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{className:`relative ${b.button} ${l!=="no"&&i.content_text}`,onClick:k,children:[u.jsx(Pj,{className:b.icon}),u.jsx("span",{className:"absolute font-bold text-[12px] top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ",children:h.name&&(l==="one"?"1":l==="all"?"--":"")})]}),u.jsx("button",{className:b.button,onClick:()=>_(),children:u.jsx(Hj,{className:b.icon})}),u.jsx(bb,{handlePlayPause:S}),u.jsx("button",{className:`${b.button}`,onClick:()=>y(),children:u.jsx(EI,{className:b.icon})}),u.jsx("button",{className:`${b.button} ${c&&i.content_text}`,onClick:T,children:u.jsx(Fj,{className:b.icon})})]})}),u.jsxs("div",{className:`${b.processContainer} ${d?"opacity-[.6] pointer-events-none":""}`,children:[u.jsx("div",{className:"w-[45px]",children:t&&u.jsx("span",{ref:p,className:`${b.currentTime}`,children:"00:00"})}),u.jsx("div",{ref:m,onClick:C=>x(C),className:`${b.processLineBase} ${!E&&"pointer-events-none"}  ${b.before}`,style:{backgroundColor:"white"}}),u.jsx("div",{className:"w-[46px] pl-[5px]",children:t&&u.jsx("span",{ref:v,className:b.duration,children:"00:00"})}),e&&u.jsx("div",{className:"flex items-center",children:u.jsx(bb,{handlePlayPause:S})})]}),!e&&u.jsx(pQ,{isOpenFullScreen:n,cb:w,play:g,isPlaying:a})]})}function Vb(t,e){const n=f.useRef(),[r,s]=f.useState(0),[i,o]=f.useState(0);return f.useEffect(()=>{r&&(n.current=setTimeout(()=>n.current=void 0,e))},[i,$c]),f.useEffect(()=>{n.current||(t(),o(Math.random()*10))},[r]),()=>s(Math.random()*10)}function $X({placement:t="bottom",isOpenFromParent:e,setIsOpenFromParent:n}={}){const[r,s]=f.useState(!1),{context:i,floatingStyles:o,refs:a}=SN({placement:t,open:e||r,onOpenChange:n||s,whileElementsMounted:oN,middleware:[JP(6)]}),l=bX(i),c=EN(i,{escapeKey:!1}),d=TN(i),{isMounted:h,styles:m}=PX(i,{duration:150,initial:{opacity:0,transform:"scale(0.8)"},close:{opacity:0,transform:"scale(0.8)"},open:{opacity:1,transform:"scale(1)"},common:({side:y})=>({transformOrigin:{top:"bottom",bottom:"top",left:"right",right:"left"}[y]})}),{getFloatingProps:p,getReferenceProps:v}=bN([l,c,d]);return{isOpen:e||r,setIsOpen:n||s,getFloatingProps:p,getReferenceProps:v,floatingStyles:o,refs:a,context:i,styles:m,isMounted:h}}const RN=f.createContext(null),PN=()=>{const t=f.useContext(RN);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function go({children:t,...e}){const n=$X({...e});return u.jsx(RN.Provider,{value:n,children:t})}function yo({children:t,className:e,asChild:n=!1,...r}){const{getReferenceProps:s,refs:i,isOpen:o}=PN();return n&&f.isValidElement(t)?f.cloneElement(t,s({ref:i.setReference,...r,...t.props,"data-state":o?"open":"closed"})):u.jsx("button",{type:"button",ref:i.setReference,"data-state":o?"open":"closed",className:`${e??""}`,...s(r),children:t})}function vo({children:t,className:e,...n}){const{context:r,refs:s,getFloatingProps:i,floatingStyles:o,styles:a}=PN(),{isMounted:l,status:c}=kN(r);return u.jsx(u.Fragment,{children:l&&u.jsx(_N,{context:r,modal:!1,children:u.jsx("div",{ref:s.setFloating,className:`${e||"z-[20]"}`,style:{...o},...i(n),"data-status":c,children:u.jsx("div",{style:{...a},children:t})})})})}function NN(){const{theme:t,isOnMobile:e}=ne(),n=Le(),{playStatus:{isTimer:r,lyricSize:s,songBackground:i,songImage:o}}=X(cn),[a,l]=f.useState(),c=()=>{l("")},d=p=>{n(zt({lyricSize:p})),bt("lyricSize",p)},h=()=>{if(r)return n(zt({isTimer:0}));l("")},m={disableBtn:"bg-white/10 bg-opacity-20",lyricSizeBtn:`group/text !hover:brightness-100 font-[600] h-[30px] w-[30px] sm:h-[26px] sm:w-[26px] relative ${t.content_hover_bg}`,itemContainer:"flex justify-between items-center min-h-[30px]",text:"text-md text-[#ccc]"};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-[240px] sm:w-[220px]",children:u.jsxs(So,{variant:"default",color:"black",className:"space-y-[6px] text-white",theme:t,children:[u.jsxs("div",{className:m.itemContainer,children:[u.jsx("p",{className:m.text,children:"Lyric size"}),u.jsxs("div",{className:"flex space-x-[8px]",children:[u.jsx(Y,{onClick:()=>d("small"),variant:"circle",size:"clear",className:`${s==="small"?t.content_bg:m.disableBtn} ${m.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[11px]",children:"A"})}),u.jsx(Y,{onClick:()=>d("medium"),variant:"circle",size:"clear",className:`${s==="medium"?t.content_bg:m.disableBtn} ${m.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[13px]",children:"A"})}),u.jsx(Y,{onClick:()=>d("large"),variant:"circle",size:"clear",className:`${s==="large"?t.content_bg:m.disableBtn} ${m.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[15px]",children:"A"})})]})]}),u.jsxs("div",{className:`${m.itemContainer}`,children:[u.jsx("p",{className:m.text,children:"Song background"}),u.jsx(zd,{size:"thin",className:"bg-white/10",active:i,cb:()=>n(Sb({variant:"songBackground"}))})]}),!e&&u.jsxs("div",{className:`${m.itemContainer}`,children:[u.jsx("p",{className:m.text,children:"Song image"}),u.jsx(zd,{size:"thin",className:"bg-white/10",active:o,cb:()=>n(Sb({variant:"songImage"}))})]}),u.jsxs("div",{className:`${m.itemContainer}`,children:[u.jsx("p",{className:m.text,children:"Sleep timer"}),u.jsx(zd,{className:"bg-white/10",size:"thin",active:!!r,cb:h})]})]})}),a&&u.jsx(Hn,{classNames:"z-[999]",closeModal:c,children:u.jsx(s1,{close:c})})]})}function BX({isOpenFullScreen:t,setIsOpenFullScreen:e,idle:n,audioEle:r}){const s=Le(),{theme:i}=ne(),{currentSong:o}=X(be),{queueSongs:a}=X(Wr),{playStatus:{songImage:l}}=X(cn),[c,d]=f.useState("Lyric"),h=f.useRef(null),m=f.useRef(null),p=f.useRef(null),v=wn();WP({bgRef:h,currentSong:o}),XG({containerRef:m,songItemRef:p,isOpenFullScreen:t,idle:n});const y=Vb(()=>g("next"),200),_=Vb(()=>g("previous"),200),x=(T,b)=>{o.id!==T.id&&s(vn({...T,currentIndex:b,song_in:o.song_in}))},g=(T="next")=>{const b=m.current;b.style.scrollBehavior="smooth",T==="next"?b.scrollLeft+=500:T==="previous"&&(b.scrollLeft-=500)},w=()=>{e(!1),setTimeout(()=>{v(`/mysongs/edit/${o.id}`)},300)},E={button:`h-[35px] w-[35px] bg-white/10 rounded-[99px] hover:scale-[1.05] transition-transform ${i.content_hover_bg}`,mainContainer:`fixed inset-0 z-50 overflow-hidden text-white bg-zinc-900
    } transition-transform duration-[.7s] linear delay-100`,bg:"-z-10 bg-no-repeat bg-cover bg-center blur-[50px]",overplay:"bg-zinc-900 bg-opacity-60 bg-blend-multiply",absoluteFull:"absolute h-[100vh] w-[100vw] inset-0",headerWrapper:"py-[20px] px-[40px] w-full",header:"relative flex",headerCta:"absolute h-full flex items-center",contentContainer:"h-[calc(100%-120px)] relative overflow-hidden",songsListTab:" relative h-full no-scrollbar flex items-center flex-row overflow-auto scroll-smooth px-[calc(50%-350px/2)]",absoluteButton:`absolute top-[50%] -translate-y-[50%] p-[8px] bg-white/30 rounded-full ${i.content_hover_bg}`,songNameSinger:"relative text-center",lyricTabContainer:"px-[40px] min-[1536px]:container min-[1536px]:mx-auto min-[1536px]:px-[200px] h-full flex items-center justify-center flex-row",fadeTransition:"opacity-0 transition-opacity duration-[.3s]",before:"before:content-[''] before:w-[50px] before:h-[10px] before:absolute before:bottom-[-7px] ",logo:"animate-[spin_8s_linear_infinite] w-[46px] mr-[10px]"},S=f.useMemo(()=>{if(o.id&&a.length)return a.map((T,b)=>{const C=b===o.currentIndex;return C?u.jsx(Rg,{ref:p,classNames:"active",hasTitle:!0,onClick:()=>x(T,b),active:C,data:T},b):u.jsx(Rg,{idleClass:`${!C&&n?E.fadeTransition:""}`,hasTitle:!0,active:C,data:T,onClick:()=>x(T,b)},b)})},[o,a,n]),k=u.jsxs("div",{className:E.lyricTabContainer,children:[l&&u.jsx(Rg,{active:!0,data:o}),u.jsx(DN,{className:`w-full ml-[40px] h-full ${!l&&"text-center"}`,audioEle:r,isOpenFullScreen:t&&c==="Lyric",active:c==="Lyric"})]});return u.jsxs("div",{className:`${E.mainContainer}  ${t?"translate-y-0":"translate-y-full"}`,children:[u.jsx("div",{ref:h,className:`${E.absoluteFull} ${E.bg}`}),u.jsx("div",{className:`${E.absoluteFull} ${E.overplay}`}),u.jsxs("div",{className:"h-[calc(100vh-90px)]",children:[u.jsx("div",{className:E.headerWrapper,children:u.jsxs("div",{className:E.header,children:[n&&u.jsxs("div",{className:`${E.headerCta} left-0`,children:[u.jsx("img",{className:`${E.logo}`,src:Zw,alt:""}),c==="Lyric"&&u.jsxs("p",{className:`${E.songNameSinger}`,children:[o.name," -"," ",u.jsx("span",{className:"opacity-50",children:o.singer})]})]}),u.jsx(n1,{inFullScreen:!0,activeTab:c,setActiveTab:d,className:`${n&&E.fadeTransition}`,tabs:["Songs","Karaoke","Lyric"],render:T=>T}),u.jsxs("div",{className:`${E.headerCta} right-0 gap-[10px] ${n&&E.fadeTransition}`,children:[o.by!=="admin"&&c==="Lyric"&&u.jsxs(Vc,{placement:"bottom",children:[u.jsx(Uc,{onClick:()=>w(),className:`p-[8px] ${E.button}`,children:u.jsx(OG,{})}),u.jsx(Hc,{children:"Lyric"})]}),u.jsxs(go,{placement:"bottom-end",children:[u.jsx(yo,{className:`${E.button} p-[8px]`,children:u.jsx(NG,{})}),u.jsx(vo,{className:"z-[99]",children:u.jsx(NN,{})})]}),u.jsxs(Vc,{placement:"bottom",children:[u.jsx(Uc,{onClick:()=>e(!1),className:`p-[4px] ${E.button}`,children:u.jsx(bG,{})}),u.jsx(Hc,{children:"Close"})]})]})]})}),u.jsxs("div",{className:E.contentContainer,children:[u.jsx("div",{ref:m,className:`song-list-container ${E.songsListTab} ${c!=="Songs"?"opacity-0":"opacity-100"}`,children:S}),c==="Songs"&&!n&&u.jsxs(u.Fragment,{children:[u.jsx(Y,{hover:"scale",size:"clear",onClick:()=>_(),className:`${E.absoluteButton} left-[20px]`,children:u.jsx(VP,{className:"w-[30px]"})}),u.jsx(Y,{hover:"scale",size:"clear",onClick:()=>y(),className:`${E.absoluteButton} right-[20px]`,children:u.jsx(AG,{className:"w-[30px]"})})]}),u.jsx("div",{className:`absolute inset-0 z-20 ${c==="Lyric"?"":"hidden"}`,children:k}),u.jsx("div",{className:`absolute inset-0 z-20 ${c==="Karaoke"?"":"hidden"}`,children:u.jsx("h1",{className:"text-center font-semibold opacity-60 relative top-[50%]",children:"Coming soon..."})})]}),t&&c==="Lyric"&&!n&&u.jsxs("p",{className:`pt-[20px] ${E.songNameSinger} ${n&&E.fadeTransition}`,children:[o.name," -"," ",u.jsx("span",{className:"opacity-50",children:o.singer})]})]})]})}const zX=f.memo(BX),VX="/HD-MP3/assets/tutorial1-1bb11af6.png",UX="/HD-MP3/assets/tutorial2-2363d450.png";function jN({audioRef:t,theme:e,song:n,admin:r,lyric:s}){const{userSongs:i,setUserSongs:o}=lt(),[a,l]=f.useState(!1),[c,d]=f.useState(!1),[h,m]=f.useState(s?s.base:""),[p,v]=f.useState([]),[y,_]=f.useState(s?s.real_time:[]),[x,g]=f.useState(!1),[w,E]=f.useState(1),[S,k]=f.useState(!1),[T,b]=f.useState(""),[C,R]=f.useState(y?y.length:0),[M,B]=f.useState(h||""),[O,V]=f.useState(!1),$=f.useRef(!0),W=f.useRef(null),U=f.useRef(0),I=f.useRef(0),z=f.useRef("smooth"),{setSuccessToast:q,setErrorToast:j}=_n(),Q=wn(),ee=f.useMemo(()=>y.length>=p.length,[p,y,c]),ie=f.useMemo(()=>y.length===p.length-1,[p,y,c]),De=f.useMemo(()=>c&&!!p.length&&!ee,[ee,p,c]),ve=()=>b(""),Re=f.useMemo(()=>!!p.length,[p]),Wn=()=>{const ae=t.current;ae&&(ae.play(),l(!0),d(!0))},qr=()=>{const ae=t.current;ae&&(ae.pause(),l(!1))},Ao=ae=>{const Te=t.current;Te&&(Te.playbackRate=ae,E(ae)),g(!1)},me=()=>{m(M),ve()},nt=ae=>{const Te=t.current;Te&&(Te.currentTime=ae)},ct=f.useCallback(()=>{if(!p.length)return;const ae=t.current;if(!ae||ee||I.current==+ae.currentTime.toFixed(1))return;ie?U.current=+ae.duration.toFixed(1):U.current=+ae.currentTime.toFixed(1);const Te=p[C],Cu={start:I.current,text:Te,end:U.current};I.current=U.current,_([...y,Cu]),R(C+1)},[p,C]),En=()=>{if(C<=0)return;if(t.current){I.current=y[C-1].start,U.current=0;const Te=y.slice(0,C-1);_(Te),R(C-1)}},Zm=ae=>{const Te=[...i],Cu=$6(ae,Te);if(Cu==null){j({message:"No song found"}),k(!1);return}return o(Te),console.log("setActuallySongs"),Cu},il=async()=>{try{k(!0),qr(),await xn({collection:"lyrics",data:{real_time:y,base:h},id:n.id}),await xn({collection:"songs",data:{lyric_id:n.id},id:n.id}),q({message:"Add lyrics successful"}),V(!1)}catch(ae){console.log({message:ae})}finally{k(!1)}},ep=async()=>{try{k(!0),await xn({collection:"songs",data:{lyric_id:""},id:n.id}),await Fc({collection:"lyrics",id:n.lyric_id}),q({message:"Delete lyric successful"});const ae={...n,lyric_id:""};if(!Zm(ae))return;tp()}catch(ae){console.log(ae)}finally{k(!1)}},o1=()=>{qr(),ct()},a1=ae=>{const Te=t.current;ae==="next"?Te.currentTime+=2:Te.currentTime-=2},HN=()=>{O?b("confirm-navigate"):tp()},tp=()=>Q(r?"/dashboard":"/mysongs");f.useEffect(()=>{if(h){const ae=h.split(/\r?\n/).filter(Te=>Te);v(ae)}p.length&&$.current&&($.current=!1),console.log("check firstTimeRender",$.current)},[h]),f.useEffect(()=>{const ae=t.current;if(ae){if(y.length){const Te=y[y.length-1].end;ae&&(ae.currentTime=Te,I.current=Te)}return ae.addEventListener("ended",o1),()=>{ae.removeEventListener("ended",o1)}}},[]),f.useEffect(()=>{if(!O){if(!s){V(!0);return}(s.real_time!==y||s.base!=h)&&V(!0)}},[h,y]),f.useEffect(()=>{if(!O)return;const ae=Te=>{Te.preventDefault()};return window.addEventListener("beforeunload",ae),()=>{window.removeEventListener("beforeunload",ae)}},[O]);const WN=`${e.type==="light"?"text-[#333]":"text-white"}`,Oe={section:`bg-${e.alpha} p-[10px] rounded-[12px]`,row:"flex no-scrollbar",col:"flex-grow flex flex-col gap-[10px]",formGroup:"flex flex-col gap-[5px] flex-grow",label:"text-md font-[500]",button:`${e.content_bg} rounded-full font-[500] text-white text-[14px] px-[10px]`,disable:" opacity-60 pointer-events-none ",icon:"h-[20px] w-[20px]",lyricBox:"list-none h-full px-[10px] max-[549px]:w-[100%] pb-[20%] ",listItem:"h-[34px] w-[34px] text-[14px]",changeSpeedBtn:"inline-flex items-center hover:brightness-90 px-[20px] py-[5px] rounded-full text-white text-[14px]",ctaContainer:"flex justify-between space-x-[10px] mb-[20px]",getActiveClass:ae=>ae?e.content_bg:`bg-${e.alpha}`},qN=f.useMemo(()=>{switch(T){case"":return u.jsx(u.Fragment,{});case"tutorial":return u.jsxs(u.Fragment,{children:[u.jsx(ki,{title:"Tutorial",close:ve}),u.jsxs("div",{className:"h-[500px] max-h-[75vh] overflow-y-auto no-scrollbar",children:[u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Phím chắc năng:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:UX,alt:""}),u.jsx("br",{}),u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Cách thêm lời bài hát:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:VX,alt:""})]})]});case"add-base-lyric":return u.jsxs(u.Fragment,{children:[u.jsx("textarea",{ref:W,value:M,onChange:ae=>B(ae.target.value),className:"w-full rounded-[4px] mb-[10px] min-h-[50vh] bg-transparent border p-[10px]"}),u.jsx(Y,{variant:"primary",onClick:me,className:Oe.button,children:"Ok"})]});case"delete-lyric":return u.jsx(zr,{loading:S,label:"Delete playlist ?",theme:e,callback:ep,close:ve});case"confirm-navigate":return u.jsx(zr,{loading:S,label:"Your change not save",theme:e,buttonLabel:"Close and don't save",callback:tp,close:ve})}},[T,M]),GN=u.jsxs("div",{className:`${Oe.ctaContainer} ${WN}`,children:[u.jsxs("div",{className:"left flex flex-wrap gap-[10px]",children:[u.jsx("button",{onClick:()=>b("add-base-lyric"),className:Oe.button,children:h?"Change lyric":"Add lyric"}),u.jsxs(go,{isOpenFromParent:x,setIsOpenFromParent:g,placement:"bottom-start",children:[u.jsxs(yo,{className:`${Oe.button} ${Oe.changeSpeedBtn}`,children:[w,"x"]}),u.jsx(vo,{children:u.jsx(So,{variant:"thin",theme:e,children:u.jsxs("div",{className:"flex justify-center gap-[8px]",children:[u.jsx(Y,{variant:"circle",onClick:()=>Ao(1),className:`${Oe.getActiveClass(w===1)} ${Oe.listItem}`,children:"1x"}),u.jsx(Y,{variant:"circle",onClick:()=>Ao(1.2),className:`${Oe.getActiveClass(w===1.2)} ${Oe.listItem}`,children:"1.2x"}),u.jsx(Y,{variant:"circle",onClick:()=>Ao(1.5),className:`${Oe.getActiveClass(w===1.5)} ${Oe.listItem}`,children:"1.5x"})]})})})]}),a?u.jsx(Y,{variant:"primary",onClick:qr,className:Oe.button+(c?"":Oe.disable),children:"Pause"}):u.jsx(Y,{variant:"primary",onClick:Wn,className:Oe.button+(a||!Re?Oe.disable:""),children:"Play"}),u.jsx(Y,{variant:"primary",onClick:ct,className:Oe.button+(!De&&Oe.disable),children:u.jsx(Vs,{className:"w-[16px]"})}),u.jsx(Y,{variant:"primary",onClick:En,className:Oe.button+(!y.length||!p.length?Oe.disable:""),children:u.jsx(TI,{className:"w-[16px]"})}),u.jsxs(Y,{variant:"primary",onClick:()=>a1("prev"),className:Oe.button+(!c||!p.length?Oe.disable:""),children:[u.jsx(Yj,{className:"w-[16px] mr-[5px]"}),"2s"]}),u.jsxs(Y,{variant:"primary",onClick:()=>a1("next"),className:Oe.button+(!c||!p.length?Oe.disable:""),children:["2s",u.jsx(eD,{className:"w-[16px] ml-[5px]"})]})]}),u.jsx("button",{onClick:()=>b("tutorial"),children:u.jsx(tO,{className:"w-[20px]"})})]});return u.jsxs("div",{className:`${S?"opacity-[0.6] pointer-events-none":""}`,children:[u.jsxs("button",{onClick:HN,className:`inline-flex text-[20px] font-bold mb-[14px] ${e.content_hover_text}`,children:[u.jsx(oD,{className:"w-[25px]"}),u.jsx("span",{className:"ml-[12px]",children:n.name})]}),GN,u.jsxs("div",{className:`${Oe.row} bg-${e.alpha} rounded-[12px] pt-[10px] mb-[0] h-[55vh] min-h-[200px] overflow-auto`,children:[u.jsx("div",{className:Oe.lyricBox+"w-[50%]",children:p.length?u.jsx(u.Fragment,{children:p.map((ae,Te)=>u.jsx(UP,{inUpload:!0,scrollBehavior:z,className:"pb-[30px] leading-[1.2] mr-[24px]",active:Te===C,done:Te!=C,children:ae},Te))}):u.jsx("h1",{children:"Base lyric..."})}),u.jsx("div",{className:Oe.lyricBox+" border-none w-[50%]",children:!!(y!=null&&y.length)&&y.map((ae,Te)=>u.jsx(cK,{handleSetTime:nt,lyric:ae,theme:e,index:Te,realTimeLyrics:y,setRealTimeLyrics:_},Te))})]}),u.jsx(Y,{className:`${e.content_bg} ${O?"":"opacity-[.6] pointer-events-none"} text-[14px] rounded-full mt-[20px]`,variant:"primary",onClick:il,children:"Save"}),u.jsx(Y,{className:"bg-red-500 text-[#fff] text-[14px] font-bold ml-[12px] rounded-full mt-[20px]",variant:"primary",onClick:()=>b("delete-lyric"),children:"Delete"}),!!T&&u.jsx(Hn,{closeModal:ve,classNames:"w-[700px] max-w-[calc(100vw-40px)]",children:qN})]})}const DN=({audioEle:t,className:e,isOpenFullScreen:n,active:r})=>{const{playStatus:{lyricSize:s}}=X(cn),[i,o]=f.useState(0),a=f.useRef("instant"),l=f.useRef(null),{currentSong:c}=X(be),d=f.useRef(0),{loading:h,songLyric:m}=qG({audioEle:t,isOpenFullScreen:n}),p=f.useCallback(()=>{const x=t.currentTime;if(o(x),Math.abs(x-d.current)>5){a.current="instant",d.current=x;return}d.current=x},[]),v={small:"text-[20px] sm:text-[30px]",medium:"text-[25px] sm:text-[35px]",large:"text-[30px] sm:text-[40px]"},y=()=>m.real_time.map((x,g)=>{const E=i>=x.start-.5&&i<x.end-.5;return u.jsx(UP,{done:!E&&i>x.end-.5,active:E,scrollBehavior:a,className:`${v[s||"medium"]} ${E?"active":""} mb-[30px]`,children:x.text},g)});f.useEffect(()=>{if(t)return t.addEventListener("timeupdate",p),()=>{t&&t.removeEventListener("timeupdate",p)}},[]),f.useEffect(()=>{const x=document.querySelector(".active.lyric");x&&x.scrollIntoView({behavior:"instant",block:"center"})},[r]),f.useEffect(()=>{a.current!=="instant"&&(a.current="instant")},[c]);const _={container:"overflow-y-auto overflow-x-hidden no-scrollbar pt-[20px] mask-image",loadingContainer:"flex justify-center items-center h-full w-full",loadingIcon:"opacity-[.6] animate-spin w-[35px] duration-[2s]"};return u.jsxs("div",{ref:l,className:`${_.container} ${e||""}`,children:[h&&u.jsx("div",{className:_.loadingContainer,children:u.jsx("span",{children:u.jsx(ds,{className:_.loadingIcon})})}),!h&&u.jsx(u.Fragment,{children:m.real_time.length?y():u.jsx("div",{className:_.loadingContainer,children:u.jsx("h1",{className:"text-[30px] opacity-60",children:"..."})})})]})},HX=({audioEle:t,setIsOpenFullScreen:e,isOpenFullScreen:n})=>{const r=Le(),{currentSong:s}=X(be),{playStatus:{isPlaying:i,isError:o,isWaiting:a}}=X(cn),{userSongs:l}=lt(),{theme:c}=ne(),d=zn(),h=f.useMemo(()=>d.pathname.includes("edit"),[d]),m=()=>{t==null||t.play()},p=()=>{t==null||t.pause()},v=()=>{i?p():m()},y=()=>{let g=s.currentIndex+1,w;g<l.length?w=l[g]:(w=l[0],g=0),r(vn({...w,currentIndex:g,song_in:s.song_in}))},_=f.useMemo(()=>a?u.jsx(ds,{className:"w-[36px] animate-spin"}):o&&s.name?u.jsx(Uv,{className:"w-[36px] "}):i?u.jsx(jf,{className:"w-[36px] "}):u.jsx(Hv,{className:"w-[36px]"}),[a,o,i]),x={wrapper:`fixed bottom-0 transition-transform w-full h-[70px] border-t border-${c.alpha} z-40  px-[20px]`,container:`absolute inset-0 ${c.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1]`,songImageWrapper:"flex flex-row items-center flex-grow h-full",image:"w-[40px] h-[40px] flex-shrink-0",cta:"mobile-bottom-player flex items-center h-full pl-[15px] gap-[10px]"};return u.jsxs("div",{className:`${x.wrapper} ${h?"translate-y-full":""}`,children:[u.jsx("div",{className:`${x.container} ${n?"opacity-0 transition-opacity delay-[.3s]":""}`}),u.jsxs("div",{className:"flex flex-row  h-full",children:[u.jsx("div",{onClick:()=>e(!0),className:"mobile-current-song flex-grow",children:u.jsxs("div",{className:x.songImageWrapper,children:[u.jsx("div",{className:x.image,children:u.jsx(ws,{src:s.image_url||Zw,classNames:"rounded-full"})}),u.jsx("div",{className:"flex-grow  ml-[10px]",children:s.song_url&&u.jsxs(u.Fragment,{children:[u.jsx("h5",{className:"text-[18px] font-[500] line-clamp-1",children:s.name||"name"}),u.jsx("p",{className:"text-[14px] font-[400] opacity-60 line-clamp-1",children:s.singer||"singer"})]})})]})}),u.jsxs("div",{className:`${x.cta} ${!s.name&&"opacity-60 pointer-events-none"}`,children:[u.jsx("button",{className:" p-[4px]",onClick:()=>v(),children:_}),u.jsx("button",{onClick:y,className:" p-[4px]",children:u.jsx(EI,{className:"w-[35px]"})})]})]})]})};function WX({isOpenFullScreen:t}){const e=()=>{const n=document.querySelector("body");n&&(t?n.style.overflow="hidden":n.style.overflow="auto")};f.useEffect(()=>{e()},[t])}function qX(){const[t,e]=f.useState(!1);return f.useEffect(()=>{const n=()=>{window.innerWidth>549&&window.innerWidth<800?e(!0):e(!1)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),{isLandscape:t}}function GX({audioEle:t,isOpenFullScreen:e,setIsOpenFullScreen:n}){const r=Le(),{theme:s}=ne(),{currentSong:i}=X(be),{playStatus:{isPlaying:o}}=X(cn),{queueSongs:a}=X(Wr),[l,c]=f.useState("Playing"),[d,h]=f.useState(!1),[m,p]=f.useState(""),v=f.useRef(null),y=f.useRef(null),_=f.useRef(null);WX({isOpenFullScreen:e}),WP({bgRef:v,currentSong:i});const{isLandscape:x}=qX(),g=()=>p(""),w=C=>{let R=0,M=C.parentElement;for(;!M.classList.contains("item-container")&&R<5;)M=M.parentElement,R++;return M},E={opacity:"0"},S=C=>{let R=0,M=C.previousElementSibling;for(;M&&R<100;)Object.assign(M.style,E),R++,M=M.previousElementSibling},k=(C,R,M)=>{const B=C.target,O=w(B);S(O),Object.assign(O.style,E),setTimeout(()=>{r(vn({...R,currentIndex:M,song_in:i.song_in}))},250)},T=f.useMemo(()=>u.jsx(u.Fragment,{children:i&&u.jsx(u.Fragment,{children:i.currentIndex===a.length-1?u.jsx("p",{children:"..."}):u.jsx(u.Fragment,{children:a.map((C,R)=>{if(R>i.currentIndex)return u.jsx(I2,{theme:s,data:C,onClick:M=>k(M,C,R),active:!1},R)})})})}),[i,a]),b={headerWrapper:"h-[65px] p-[15px]",header:"relative w-full",main:"h-[calc(100%-65px)] relative px-[15px] overflow-hidden",songImage:"flex-shrink-0 transition-[height, width] origin-top-left",nameAndSinger:"flex flex-grow justify-between items-center",scrollText:"h-[30px] mask-image-horizontal",control:"absolute bottom-0 left-[15px] right-[15px]",lyricContainer:"absolute top-[65px] bottom-[120px] py-[16px] left-[15px] right-[15px]",bgImage:"absolute inset-0 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background-image] duration-[.3s ]",overlay:"absolute inset-0 bg-zinc-900 bg-opacity-60 bg-blend-multiply overflow-hidden",button:"inline-flex justify-center items-center rounded-full absolute top-0 h-full w-[35px]"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`fixed inset-0 z-50 bg-zinc-900 text-white overflow-hidden  ${e?"translate-y-0":"translate-y-full"} transition-[transform] duration-[.5s] ease-in-out delay-150  `,children:[u.jsx("div",{ref:v,className:b.bgImage}),u.jsx("div",{className:b.overlay}),u.jsxs("div",{className:"absolute inset-0 z-10",children:[u.jsx("div",{className:b.headerWrapper,children:u.jsxs("div",{className:b.header,children:[u.jsxs(go,{placement:"bottom-start",children:[u.jsx(yo,{className:`${b.button} p-[6px] left-0 bg-gray-500 bg-opacity-20`,children:u.jsx(_I,{className:"w-[20px]"})}),u.jsx(vo,{children:u.jsx(NN,{})})]}),u.jsx(n1,{inFullScreen:!0,className:"w-fit font-[500]",setActiveTab:c,activeTab:l,render:C=>C,tabs:["Songs","Playing","Lyric"]}),u.jsx("button",{className:`${b.button} p-[6px] right-0 bg-gray-500 bg-opacity-20`,onClick:()=>n(!1),children:u.jsx(rD,{className:"w-[20px]"})})]})}),u.jsxs("div",{ref:y,className:b.main,children:[u.jsxs("div",{className:`${l!="Playing"&&!d||x?"flex":""}`,children:[f.useMemo(()=>u.jsx(uQ,{active:l==="Playing"&&!x,data:i}),[i,o,l,x]),u.jsx("div",{className:`${b.nameAndSinger} ${l!="Playing"||x?"ml-[10px]":"mt-[15px] min-[549px]:mt-0"}`,children:u.jsxs("div",{className:"group flex-grow overflow-hidden",children:[u.jsx("div",{className:b.scrollText,children:f.useMemo(()=>u.jsx(ff,{autoScroll:!0,classNames:`${l==="Playing"||x?"text-[24px] leading-[30px]":"text-[20px]"} font-[500]`,label:i.name||"..."}),[i,l])}),u.jsx("div",{className:b.scrollText,children:f.useMemo(()=>u.jsx(ff,{autoScroll:!0,classNames:`${l==="Playing"||x?"text-[22px]":"text-[16px] opacity-60"} font-[400]`,label:i.singer||"..."}),[i,l])})]})})]}),u.jsx("div",{ref:_,className:`${b.lyricContainer} ${l==="Lyric"?"block":"hidden"}`,children:f.useMemo(()=>u.jsx(DN,{active:l==="Lyric",className:"h-[100%]",audioEle:t,isOpenFullScreen:e&&l==="Lyric"}),[e,l,x])}),u.jsx("div",{className:`absolute left-[15px] right-[15px] ${l==="Songs"?"block":"hidden"}`,children:u.jsxs("div",{className:"relative",children:[u.jsx("h3",{className:"text-white text-[16px] my-[10px]",children:"Playing next"}),u.jsx("div",{className:"h-[calc(100vh-170px)] pb-[30px] no-scrollbar overflow-auto",children:T})]})}),u.jsx("div",{className:`${b.control} ${l==="Songs"&&"opacity-0 pointer-events-none h-[0px] mb-[0px]"}`,children:u.jsx("div",{className:"h-[120px]",children:f.useMemo(()=>u.jsx(AN,{className:"flex flex-col-reverse justify-between pb-[24px]",audioEle:t,isOpenFullScreen:!0,idle:!1}),[e])})})]})]})]}),!!m&&u.jsx(Hn,{closeModal:g,children:u.jsx(s1,{close:g})})]})}const Hn=({children:t,closeModal:e,classNames:n})=>{const{theme:r}=ne();return u.jsx(u.Fragment,{children:qa.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[99]",children:[u.jsx("div",{onClick:s=>{s.preventDefault(),s.stopPropagation(),e()},className:"absolute bg-black opacity-60 inset-0 z-[90]"}),u.jsx("div",{className:"absolute z-[99] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:u.jsx(So,{className:n||"",theme:r,children:t})})]}),document.getElementById("portals"))})};function KX({isOpenSongQueue:t,setIsOpenSongQueue:e}){const n=Le(),{theme:r}=ne(),{user:s}=pt(),{queueSongs:i}=X(Wr),{playStatus:{isTimer:o}}=X(cn),{currentSong:a}=X(be),[l,c]=f.useState(""),[d,h]=f.useState("Queue"),[m,p]=f.useState([]),[v,y]=f.useState(!1),[_,x]=Gw("play_history",[]),[g,w]=f.useState(!1),E=()=>c(""),S=f.useCallback((O,V)=>{V!==a.currentIndex&&n(vn({...O,currentIndex:V}))},[a]),k=(O,V)=>{V!==a.currentIndex&&(n(Su({songs:[O]})),n(vn({...O,currentIndex:i.length-1+1})),h("Queue"))},T=()=>{if(o)return n(zt({isTimer:0}));c("timer")},b=f.useCallback(()=>{e(!1),n(NP()),n(pi()),bt("duration",0)},[]),C=async()=>{try{if(!s)return;w(!0),await xn({collection:"users",data:{play_history:[]},id:s.email}),p([]),x([])}catch(O){console.log(O)}finally{w(!1),h("Queue")}},R=async()=>{try{const V=Nr().play_history||[];if(await dx(500),!V.length){y(!1);return}const $=Si(rl(_s,"songs"),bi("id","in",V)),U=(await Ti($)).docs.map(I=>{const z=I.data();return{...z,song_in:z.by==="admin"?"admin":"user"}});p(U)}catch(O){console.log(O)}finally{y(!1)}};f.useEffect(()=>{if(s)return d==="Recent"&&R(),()=>{y(!0)}},[d]),f.useEffect(()=>{s&&(s.email||(e(!1),h("Queue")))},[s]),f.useEffect(()=>{setTimeout(()=>{t||h("Queue")},1e3)},[t]);const M=[...Array(4).keys()].map(O=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Je,{className:"h-[40px] w-[40px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Je,{className:"h-[20px] mb-[5px] w-[120px]"}),u.jsx(Je,{className:"h-[12px] mt-[5px] w-[60px]"})]})]},O)),B={textColor:`${r.type==="dark"?"text-white":"text-[#333]"} `,mainContainer:`fixed w-[300px] bottom-[0] right-[0] top-[0] z-20 px-[15px] ${r.container} border-l-[1px] border-${r.alpha} transition-[transform] duration-[.5s] linear delay-100`};return u.jsxs("div",{className:`${B.textColor} ${B.mainContainer} ${t?"translate-x-0---":"translate-x-full"}     `,children:[u.jsxs("div",{className:"flex items-center justify-between my-[10px]",children:[u.jsx(n1,{className:`text-[13px] ${s!=null&&s.email?"":"opacity-[.6] pointer-events-none"}`,activeTab:d,setActiveTab:s!=null&&s.email?h:()=>{},tabs:["Queue","Recent"],render:O=>O}),u.jsxs(Vc,{placement:"bottom",children:[u.jsx(Uc,{onClick:T,className:`p-[8px] rounded-[50%] ${r.content_hover_bg} ${o?r.content_bg:r.side_bar_bg}`,children:u.jsx(wI,{className:"w-[20px]"})}),u.jsx(Hc,{children:"Add timer"})]})]}),u.jsxs("div",{className:"h-[calc(100vh-146px)] pb-[30px] overflow-y-auto overflow-x-hidden no-scrollbar",children:[d==="Queue"&&u.jsxs(u.Fragment,{children:[u.jsx(vs,{variant:"queue",songs:i,handleSetSong:S}),u.jsx("div",{className:"text-center",children:!!i.length&&u.jsx(Y,{onClick:b,size:"small",className:`${r.content_bg} rounded-full mt-[24px]`,children:"Clear"})})]}),d==="Recent"&&u.jsx(u.Fragment,{children:v?M:u.jsxs(u.Fragment,{children:[u.jsx(vs,{variant:"queue",songs:m,handleSetSong:k}),!!m.length&&u.jsx("p",{className:"text-center",children:u.jsx(Y,{onClick:C,size:"small",className:`${r.content_bg} rounded-full mt-[24px]`,children:g?u.jsx(ds,{className:"w-[20px] animate-spin"}):"Clear"})})]})})]}),!!l&&u.jsx(Hn,{closeModal:E,children:u.jsx(s1,{close:E})})]})}const XX=f.memo(KX);function QX(t,e,n){const{currentSong:r}=X(be),[s,i]=f.useState(!1),[o,a]=f.useState(0),l=f.useRef(),c=f.useRef(),d=()=>{i(!1),a(Math.random())},h=()=>{clearTimeout(c.current),clearTimeout(l.current)},m=async()=>{if(!n)return;const p=document.querySelector(".song-thumb.active"),v=document.querySelector(".song-list-container");if(p&&v){const y=GP(p,v,!0);let _=$c.focusDelay;y||(_=0),l.current=setTimeout(()=>{i(!0)},_)}};return f.useEffect(()=>{if(n&&!(e||!r.id))return setTimeout(()=>{window.addEventListener("mousemove",d),window.dispatchEvent(new Event("mousemove"))},1e3),()=>{window.removeEventListener("mousemove",d),h()}},[n]),f.useEffect(()=>(c.current=setTimeout(()=>{m()},t),()=>{h()}),[o]),n?s:!1}const ON=({admin:t})=>{const{currentSong:e}=X(be),{isOnMobile:n}=ne(),[r,s]=f.useState(!1),[i,o]=f.useState(!1),[a,l]=f.useState(!1),c=f.useRef(null),d=QX($c.focusDelay,n,r),h=u.jsxs(u.Fragment,{children:[!t&&u.jsx(zX,{audioEle:c.current,idle:d,isOpenFullScreen:r,setIsOpenFullScreen:s}),u.jsx(XX,{isOpenSongQueue:i,setIsOpenSongQueue:o}),u.jsx(MX,{admin:t,audioEle:c.current,idle:d&&r,isOpenFullScreen:r,isOpenSongQueue:i,setIsOpenSongQueue:o,setIsOpenFullScreen:s})]}),m=u.jsxs(u.Fragment,{children:[u.jsx(GX,{audioEle:c.current,isOpenFullScreen:r,setIsOpenFullScreen:s}),u.jsx(HX,{audioEle:c.current,idle:d&&r,isOpenFullScreen:r,setIsOpenFullScreen:s})]});return f.useEffect(()=>{a||c.current&&l(!0)},[]),u.jsxs("div",{className:"absolute",children:[u.jsx("audio",{ref:c,src:e.song_url,className:"hd-mp3 hidden"}),a?n?m:h:""]})},e1="data:image/gif;base64,R0lGODlhJAAkAIABAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NmRjOGMyNC03YmYxLTQxZTMtYjQ2Zi1mY2ZhMDk4MDE1YWYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTBDRTc0QzlGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTBDRTc0QzhGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YzBhNGU4OWYtNjc4Yy00NmMyLTg4NmUtYzIxNGE0NTIwZDRjIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODRlMDBjYmEtZjhlNy03YzQ4LWE4MTgtNDc3NTI3MGQ1ZTAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQgAAQAsAAAAACQAJAAAAnKMj5nArQ9jc7HWyax+GOx/dCAojltpWmgqYazqvu0kz1StrHgYp6tO6gWAn59wZKSxkjcTM7MUEk/SY1BpmGqeHhs0W8Vywk3tkPw9iztcBLfNW7Pl9PLcXk/f8Xz9vguWB6h254Y2+Id4aLjH2Kc4UQAAIfkECQgAAQAsAAAAACQAJAAAAnSMj6nL7Q+jnAzYS+XFGW7beV/4fADpmGijrkvrJnA2z1Q9hvhG7lznA+lyBpuMGAieDiYlQulkIpvTKk9KFRatv2RW671uxeHskwv+ptHLsRnbhbLPZHW7vK6r6XF21J33Bngnp2fY98UXuNikSOg3B8dYAAAh+QQJCAABACwAAAAAJAAkAAACfIyPqcvtD6OctNqLKdg8N955C7iJI4mQAKam6NUeMTMHda3cr4EnOugCfnY2Yi8Y4hmXKqHSWYQ2mclodSqllmTY7fOqbSK9VnLXHB6Ludk2Vg1nv+Vo9zT+rc/zK3qf/wNmt8aHV0Z4aHj2l+inFqgXiQjJuKgYRnkJUgAAIfkECQgAAQAsAAAAACQAJAAAAnuMj6nL7Q+jnLTaC7K+T2/eeBkYiiQjAlyKsJh5uJYc0BRtTzgMpbsn8fFqQ4cQGCuWjqok0vA7toZR4fRJxDJHzg+Uur16s+Nt86sFM8VcdDncbZPlZvZ5fq/H82rp3m5XxZe29mfoZnWIF9hH1+gDqKiHOPhWSBlJWQAAIfkECQgAAQAsAAAAACQAJAAAAn6Mj6nL7Q8RmDTaQ+u1eW7efVg4ZqLRARIppqsZpW6pQTIbzPZd57jD6+keQQ/NuAu+esDiEkl0HlUxKerXKFKvsCTvuY0qp2Dw8IzTlslTdNf3VrO5Qiu8Hre78d/5HSpHB5imR5g3Jhi2d7OWaGbIN4j4pwjJ6Lco00gJVgAAIfkECQgAAQAsAAAAACQAJAAAAn2EH6nL7XnQmxRGULO7WHsbfRPHiQ95mRsqqQvbBqUGG29K13eYw3tMqXVAwJFOMcsIf7YeizmsLJE45ZHYtPqoPO2TWzxdZVXpOGneYqPBc7mtJnflsekaCkXry3Z61h/VtzcnyGcYN1jnRnj4dQf2V8g46QiIB0ly+bhWAAAh+QQJCAABACwAAAAAJAAkAAACfYyPqcvtD+MDtMobqt6Y7Q90C8iJCamZJ0qpCNu6Bhwen0S/JZTb+wTTpSK92c9RzBwbyRsx6BvyoEYpkCW0RLVVVDbWBSuxW7EzDPrW0OrzmPs2U+Nrevvnzs/11ib+T8ZWVufXB+g1qHZnyAhX6HhIopg4yAfZKEkpiFYAACH5BAkIAAEALAAAAAAkACQAAAJ7jI+py+0Po5y02ouB3tht3jGfFopjuYwqgK5npCLuJ8XHDEK2gZP3ywMGeqwfzZgb9mTCnRLHPAalz1k06SRefVPsEsmthrXgYnf8PZvFa7J6206z4fBs8w4t08t2at+qF6j2h+YnRxiX9ybIhrg3iOdlqDjH6Fa5qFYAACH5BAkIAAEALAAAAAAkACQAAAJ1jI+py+0Po5y02otzArxr1nmfEnIjWZ5bqh4l0Lqs8WK1HNpzcFs9/9o5fkFhg1gUQZBJWISZlECL0l3ThFMCc1lq10mzXhFT8Db6JYubam7Yffa+teVymz5O6+fyuLm+hgd39ReIxRd0d+inmLjH+GX3+FIAACH5BAUIAAEALAAAAAAkACQAAAJwjI+py+0Po5y0PoCzhVlv12EfGI5NCJgMqi5sm7zwIc9BPeOw3vKqb6oBLyUaqshB3o4diZDpSTaN0FTkWUVgo8sslbtlapXh43hqKJfP4Ko1TY574ehue24XffV0KJuf9xa4tifoZih351f4h9hRAAA7",Vy=({data:t,inDetail:e,theme:n,active:r,link:s})=>{const i={button:`rounded-full text-[#201f1f] p-[4px] hover:bg-${n==null?void 0:n.alpha}`,imageContainer:"absolute inset-0 overflow-hidden rounded-[6px]",absoluteContainer:"absolute inset-0 group-hover:block",overlay:"absolute inset-0 bg-[#000] opacity-[.5]",buttonContainer:"justify-center items-center h-full z-10 relative",buttonWrapper:"flex items-center justify-center z-10 h-full w-full relative"},o=u.jsxs("div",{className:i.imageContainer,children:[u.jsx(ws,{classNames:"group-hover:scale-[1.1] transition duration-[.3s]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsxs("div",{className:`${i.absoluteContainer} ${r?"block":"hidden"}`,children:[u.jsx("div",{className:i.overlay}),r&&u.jsx("div",{className:i.buttonWrapper,children:u.jsx("img",{src:e1,alt:"",className:"w-[30px]"})})]})]});return e?u.jsx("div",{className:"group relative pt-[100%] w-full block",children:o}):u.jsxs(u.Fragment,{children:[u.jsx(Zs,{to:`${s||"/playlist/"+t.id}`,className:"group relative pt-[100%] w-full block",children:o}),u.jsx("h5",{className:"text-[20px] font-[500] line-clamp-1 leading-[24px]  mt-[6px]",children:t.name})]})};function ff({label:t,classNames:e,autoScroll:n}){const r=f.useRef(null),s=f.useRef(null);return QG({textRef:s,textWrapperRef:r,autoScroll:n}),u.jsx("div",{ref:r,className:"overflow-hidden scroll-smooth relative h-full",children:u.jsx("div",{ref:s,className:`${e} absolute left-0 whitespace-nowrap line-clamp-1`,children:t||"..."})})}function MN({setIsOpenModal:t}){const{theme:e}=ne(),n=Le(),r=l=>{t(l)},[s,i]=Gw("isCrossFade",!1),o=()=>{i(!s),n(zt({isCrossFade:!s}))},a={menuItem:`${e.content_hover_text} hover:bg-${e.alpha} rounded-[4px] font-[500] w-full px-[10px] text-[14px] h-[40px] inline-flex items-center cursor-pointer`,icon:"w-[25px] mr-[8px]",divide:`h-[1px]  w-[calc(100%-20px)] my-[4px] mx-auto bg-${e.alpha}`,disable:"opacity-[.6] pointer-events-none"};return u.jsx(u.Fragment,{children:u.jsx(So,{variant:"thin",color:"sidebar",theme:e,children:u.jsxs("ul",{className:"flex flex-col w-[200px]",children:[u.jsxs("li",{className:`${a.menuItem} justify-between hover:bg-[unset]`,children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(Hv,{className:a.icon}),"Cross fade"]}),u.jsx(zd,{active:s,cb:o})]}),u.jsxs("li",{className:`${a.menuItem}`,onClick:()=>r("theme"),children:[u.jsx(kI,{className:a.icon}),"Themes"]}),u.jsx("div",{className:a.divide}),u.jsxs("li",{className:`${a.menuItem}`,onClick:()=>r("info"),children:[u.jsx(bI,{className:a.icon}),"Info"]})]})})})}function YX({className:t}){const[e,n]=f.useState(!1),{theme:r}=ne(),s=()=>{const o=document.querySelector(".main-container");if(!o)return;const a=o.scrollTop||0;n(a>100)},i=()=>{const o=document.querySelector(".main-container");o==null||o.scroll({behavior:"smooth",top:0})};return f.useEffect(()=>{const o=document.querySelector(".main-container");if(o)return o.addEventListener("scroll",s),()=>{o.removeEventListener("scroll",s)}},[]),u.jsx(Y,{onClick:i,variant:"circle",size:"clear",className:`absolute p-[8px] hover:scale-[1.05] transition-[opacity,transform] 
         ${t||""} 
         w-[36px] 
         ${r.content_hover_bg} h-[36px] bg-${r.alpha} 
      ${e?"opacity-[1]":"opacity-0 translate-y-[20px]"}`,children:u.jsx(gG,{className:"w-full"})})}function JX(){const t=Le(),{theme:e}=ne(),{user:n,loading:r}=pt(),{resetSongPlaylistStore:s}=lt(),i=zn(),o=wn(),a=()=>{t(pi()),t(qw()),s()},l=()=>{a(),o("/dashboard")},c=[...Array(2).keys()].map(h=>u.jsxs("div",{className:"pl-[14px] h-[44px] flex items-center",children:[u.jsx(Je,{className:"w-[25px] h-[25px] flex-shrink-0"}),u.jsx(Je,{className:"w-[80px] h-[19px] ml-[5px]"})]},h)),d={container:`w-[180px] relative  flex-shrink-0 border-r-[1px] h-screen ${e.side_bar_bg} border-${e.alpha}`,button:`w-full text-[14px] font-[600] ${e.content_hover_text}`,text:e.type==="light"?"text-[#333]":"text-white",icon:"w-[25px] mr-[5px]",menuItem:"w-full  border-l-[4px] h-[44px] inline-flex items-center",activeMenu:`${e.content_text} ${e.container} ${e.content_border}`};return u.jsxs("div",{className:`${d.container} ${d.text}`,children:[u.jsx("div",{className:"px-[10px] h-[60px] flex items-center",children:u.jsxs(Zs,{to:"/",className:"text-[24px] font-semibold",children:["HD",u.jsx("span",{className:`${e.content_text} ml-[4px]`,children:"MP3"})]})}),u.jsxs("div",{className:"flex flex-col items-start",children:[r&&c,!r&&u.jsxs(u.Fragment,{children:[u.jsx(Zs,{className:`${d.menuItem} ${i.pathname==="/"?d.activeMenu:"border-transparent"}`,to:Nt.Home,children:u.jsxs(Y,{className:d.button,children:[u.jsx(RD,{className:d.icon}),"Discover"]})}),n&&u.jsxs(u.Fragment,{children:[u.jsx(Zs,{className:`${d.menuItem}  ${i.pathname.includes("mysongs")?d.activeMenu:"border-transparent"}`,to:Nt.MySongs,children:u.jsxs(Y,{className:d.button,children:[u.jsx(ka,{className:d.icon}),"My Song"]})}),n.role==="ADMIN"&&u.jsxs(Y,{onClick:l,className:`${d.menuItem} ${d.button} border-transparent`,children:[u.jsx(vD,{className:d.icon}),"Dashboard"]})]})]})]}),u.jsx(YX,{className:"left-[50%] translate-x-[-50%] bottom-[80px] md:bottom-[100px]"})]})}function ZX({contentRef:t}){const{theme:e}=ne(),[n,r]=f.useState(0),[s,i]=Eu(hi),[o,a]=f.useState(""),{logOut:l,logIn:c}=Tu(),d=()=>a(""),h=async()=>{try{await l()}catch(x){console.log("signOut error",{messsage:x})}finally{d()}},m=async()=>{try{const x=document.querySelector(".login-trigger");await c(),x&&x.click()}catch(x){console.log(x)}},p=()=>{var g;const x=((g=t.current)==null?void 0:g.scrollTop)||0;r(x)},v=u.jsx(Je,{className:"w-[35px] h-[35px] rounded-full"}),y=f.useMemo(()=>{switch(o){case"":return u.jsx(u.Fragment,{});case"theme":return u.jsx(BN,{close:d});case"info":return u.jsx(r1,{close:d});case"confirm":return u.jsx(zr,{close:d,callback:h,loading:!1,label:"Sign out ?",desc:"",theme:e})}},[o]);f.useEffect(()=>{var x;return(x=t.current)==null||x.addEventListener("scroll",p),()=>{document.removeEventListener("scroll",p)}},[]);const _={userName:"text-[16px] font-[500] ml-[8px] line-clamp-1",button:"h-[35px] w-[35px] rounded-full",menuItem:`hover:bg-${e.alpha} ${e.content_hover_text} rounded-[4px] w-full px-[10px] h-[44px] inline-flex items-center font-[500]`,icon:"w-[25px] mr-[5px]",divide:`h-[1px]  w-[calc(100%-20px)] mb-[10px] mt-[20px] mx-auto bg-${e.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`${e.container} ${n?"shadow-lg":""} h-[60px] fixed right-0 ${n?"bg-transparent":""} left-[180px] z-[20]`,children:[u.jsx("div",{className:`${n?"":"hidden "} absolute  inset-0 ${e.container} bg-opacity-[0.9] backdrop-blur-[15px] z-[-1] `}),u.jsxs("div",{className:"px-[40px] flex items-center justify-between h-full",children:[u.jsx("div",{className:""}),u.jsxs("div",{className:"flex gap-[16px]",children:[u.jsxs(go,{placement:"bottom-end",children:[u.jsx(yo,{className:`flex px-[6px] items-center ${_.button} bg-${e.alpha} ${e.content_hover_bg}`,children:u.jsx(yI,{className:"w-full"})}),u.jsx(vo,{children:u.jsx(MN,{setIsOpenModal:a,loggedIn:!1})})]}),u.jsxs(go,{placement:"bottom-end",children:[u.jsx(yo,{className:`flex login-trigger items-center hover:brightness-75 ${_.button}`,children:i?v:u.jsx(Uy,{})}),u.jsx(vo,{children:u.jsx(So,{color:"sidebar",variant:"thin",theme:e,children:u.jsxs("div",{className:"w-[250px] max-h-[50vh]",children:[s&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center p-[10px] pb-0",children:[u.jsx(Uy,{className:"login-trigger w-[46px] h-[46px]"}),u.jsx("div",{className:"ml-[12px]",children:u.jsx("h5",{className:"font-semibold line-clamp-1",children:s==null?void 0:s.displayName})})]}),u.jsx("div",{className:_.divide}),u.jsxs("button",{className:`${_.menuItem}`,onClick:()=>a("confirm"),children:[u.jsx(vI,{className:_.icon}),"Log out"]})]}),!s&&u.jsxs("button",{className:`${_.menuItem}`,onClick:m,children:[u.jsx(Cj,{className:_.icon}),"Log in"]})]})})})]})]})]})]}),o&&u.jsx(Hn,{closeModal:d,children:y})]})}function eQ({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"}))}const tQ=f.forwardRef(eQ),nQ=tQ;function rQ({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z",clipRule:"evenodd"}))}const sQ=f.forwardRef(rQ),iQ=sQ;function pd({song:t,...e}){const n=Le(),{user:r}=pt(),{theme:s,isOnMobile:i}=ne(),{setSuccessToast:o}=_n(),{userPlaylists:a}=lt(),l=()=>{n(Su({songs:[t]})),o({message:"Song added to queue"})},c={before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]",level2Menu:"w-[100%] absolute right-[calc(100%+5px)] hidden group-hover/add-playlist:block hover:block",menuItem:`hover:bg-${s.alpha} font-[500] ${s.content_hover_text} max-[549px]:!bg-transparent pl-[8px] rounded-[4px]`,menuIcon:"w-[18px] mr-[10px]",overlay:"absolute flex items-center justify-center inset-0 bg-[#000] bg-opacity-[.5]"},d=f.useMemo(()=>{if(!r)return u.jsx(u.Fragment,{});switch(e.variant){case"home":case"my-songs":case"dashboard-songs":return i?u.jsxs(Y,{className:`group relative ${c.menuItem}  ${s.content_hover_text} ${c.before}`,variant:"list",onClick:()=>e.handleOpenModal("add-to-playlist"),children:[u.jsx(gh,{className:c.menuIcon}),"Add to playlist"]}):u.jsxs(Y,{className:`group/add-playlist hover:!brightness-100 relative ${c.menuItem}  ${s.content_hover_text} ${c.before}`,variant:"list",children:[u.jsx(gh,{className:c.menuIcon}),"Add to playlist",u.jsx(So,{variant:"thin",className:`${c.level2Menu} z-[99] 
                  
                     `,color:"sidebar",theme:s,children:u.jsx("ul",{className:"w-full",children:!!(a!=null&&a.length)&&u.jsx(u.Fragment,{children:a.map((p,v)=>{const y=p.song_ids.includes(t.id);return u.jsxs("li",{onClick:()=>!y&&e.handleAddSongToPlaylist(p),className:`list-none w-full flex rounded-[4px] p-[5px] ${y&&"opacity-60 pointer-events-none"} ${c.menuItem}`,children:[u.jsx("span",{children:u.jsx(ka,{className:c.menuIcon})}),u.jsxs("p",{className:"line-clamp-1 text-left",children:[p.name," ",y&&"(Added)"]})]},v)})})})})]})}},[a]),h=f.useMemo(()=>{switch(e.variant){case"home":return u.jsxs(u.Fragment,{children:[u.jsxs(Y,{onClick:l,className:` ${c.menuItem}`,variant:"list",children:[u.jsx(Vs,{className:c.menuIcon}),"Add to queue"]}),d]});case"playlist":case"dashboard-playlist":return u.jsx(u.Fragment,{children:u.jsxs(Y,{className:c.menuItem,variant:"list",onClick:e.handleRemoveSongFromPlaylist,children:[u.jsx(I_,{className:c.menuIcon}),"Remove"]})});case"my-songs":case"dashboard-songs":return u.jsxs(u.Fragment,{children:[e.variant!=="dashboard-songs"&&u.jsxs(Y,{onClick:l,className:` ${c.menuItem}`,variant:"list",children:[u.jsx(Vs,{className:c.menuIcon}),"Add to queue"]}),d,u.jsxs(Y,{onClick:()=>e.handleOpenModal("edit"),className:` ${c.menuItem} `,variant:"list",children:[u.jsx(yI,{className:c.menuIcon}),"Edit"]}),u.jsx(Zs,{to:`edit/${t.id}`,children:u.jsxs(Y,{className:` ${c.menuItem} `,variant:"list",children:[u.jsx(_D,{className:c.menuIcon}),t.lyric_id?"Edit lyric":"Add lyric"]})}),u.jsxs(Y,{onClick:()=>e.handleOpenModal("delete"),className:` ${c.menuItem} `,variant:"list",children:[u.jsx(yh,{className:c.menuIcon}),"Delete"]})]});case"queue":return u.jsxs(u.Fragment,{children:[u.jsxs(Y,{onClick:e.handleRemoveSongFromQueue,className:` ${c.menuItem}`,variant:"list",children:[u.jsx(I_,{className:c.menuIcon}),"Remove"]}),d]})}},[e]),m=f.useMemo(()=>{switch(e.variant){case"queue":return u.jsx(u.Fragment,{});default:return u.jsxs("div",{className:"pl-[10px] py-[6px]",children:[u.jsx("h5",{className:"line-clamp-1 font-[500]",children:t.name}),u.jsx("p",{className:"text-[14px] opacity-50 line-clamp-1",children:t.singer})]})}},[t]);return u.jsx(u.Fragment,{children:u.jsxs("div",{className:` ${e.variant==="queue"?"w-[140px]":"w-[200px]"} `,children:[m,h,u.jsxs("a",{target:"_blank",download:!0,href:t.song_url,className:` ${c.menuItem} w-full py-[5px] text-[14px] inline-flex items-center cursor-pointer`,children:[u.jsx(Tj,{className:"w-[18px] mr-[10px]"}),"Download"]}),e.variant!=="queue"&&!i&&u.jsxs("p",{className:"opacity-50 font-[500] text-center text-[13px] mt-[10px]",children:["Uploaded by ",t.by]})]})})}const LN={isChecked:!1,isSelectAll:!1,selectedSongs:[]},oQ=(t,e)=>{switch(e.type){case 0:{const{song:n}=e.payload,r=[...t.selectedSongs],s=r.findIndex(i=>i.id===n.id);return s===-1?r.push(n):r.splice(s,1),{...t,selectedSongs:r,isChecked:!!r.length}}case 2:return LN;case 3:return t;case 4:{const{songs:n}=e.payload;return{...t,selectedSongs:n,isChecked:!0,isSelectAll:!0}}}return t},aQ=()=>{const[t,e]=f.useReducer(oQ,LN),n=f.useCallback(()=>{e({type:3})},[]),r=f.useCallback(()=>{e({type:2})},[]),s=f.useCallback(o=>{e({type:0,payload:{song:o}})},[]),i=f.useCallback(o=>{e({type:4,payload:{songs:o}})},[]);return{state:t,setChecked:n,selectSong:s,selectAll:i,resetSelect:r}},lQ={state:{isChecked:!1,isSelectAll:!1,selectedSongs:[]},resetSelect:()=>{},selectAll:()=>{},selectSong:()=>{},setChecked:()=>{}},FN=f.createContext(lQ),t1=()=>{const t=f.useContext(FN),{state:{...e},...n}=t;return{...e,...n}};function Jm({children:t}){return u.jsx(FN.Provider,{value:aQ(),children:t})}function Ag({song:t,onClick:e,active:n=!0,index:r,className:s,...i}){const o=Le(),{theme:a,isOnMobile:l}=ne(),{user:c}=pt(),{isChecked:d,selectedSongs:h,selectSong:m}=t1(),{userPlaylists:p}=lt(),[v,y]=f.useState(!1),[_,x]=f.useState(!1),[g,w]=f.useState(""),{setErrorToast:E}=_n(),S=()=>w(""),{handleDeleteSong:k,handleAddSongToPlaylistMobile:T,handleAddSongToPlaylist:b,handleRemoveSongFromPlaylist:C,loading:R}=YG({song:t,closeModal:S,setIsOpenPopup:x}),M=Re=>{w(Re)},B=f.useMemo(()=>h?h.indexOf(t)!=-1:!1,[h]),O=f.useMemo(()=>c?c.like_song_ids.includes(t.id):!1,[c==null?void 0:c.like_song_ids,t]),V=()=>{r!==void 0&&o(Jq({index:r}))},$=async()=>{if(c)try{}catch(Re){console.log(Re),E({message:"Error when liked song"})}finally{y(!1)}},W=Re=>{d!==void 0&&m(Re)},U={button:`${a.content_hover_bg} p-[8px] rounded-full`,songListButton:"mr-[10px] text-[inherit]",itemContainer:`group/container flex flex-row rounded justify-between px-[10px] py-[10px] w-full border-b 
    border-${a.alpha} last:border-none p-[0px]`,imageFrame:` relative rounded-[4px] overflow-hidden flex-shrink-0 ${i.variant==="queue"?"w-[40px] h-[40px]":"h-[54px] w-[54px]"}`,overlay:"absolute flex items-center justify-center inset-0 bg-black/40",ctaWrapper:"flex items-center justify-end min-w-[86px] flex-shrink-0",menuBtnWrapper:"w-[50px] flex justify-center "},I=()=>{switch(i.variant){case"queue":return u.jsx(u.Fragment,{});case"uploading":return u.jsx("button",{className:`${U.songListButton}`,children:u.jsx(ka,{className:"w-[18px]"})});default:return l?u.jsx("button",{onClick:()=>W(t),className:`${U.songListButton} text-[inherit]`,children:B?u.jsx(Fy,{className:"w-[18px]"}):u.jsx(fc,{className:"w-[18px]"})}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>W(t),className:`${U.songListButton} ${!B&&"hidden"} group-hover/main:block`,children:B?u.jsx(Fy,{className:"w-[18px]"}):u.jsx(fc,{className:"w-[18px]"})}),u.jsx("button",{className:`${U.songListButton} ${B&&"hidden"} group-hover/main:hidden group-hover/main:mr-[0px]`,children:u.jsx(ka,{className:"w-[18px]"})})]})}},z=f.useMemo(()=>{switch(i.variant){case"uploading":return u.jsx(u.Fragment,{});default:return u.jsx("div",{className:`${U.overlay} 
               ${n?"":"hidden group-hover/main:flex"}`,children:n?u.jsx("img",{src:e1,alt:"",className:"h-[18px] w-[18px]"}):u.jsx("div",{onClick:e,className:"cursor-pointer w-full h-full flex items-center justify-center",children:u.jsx(iQ,{className:"w-[24px] text-white"})})})}},[n,e]),q=u.jsxs("div",{className:"flex flex-row flex-grow props",children:[I(),u.jsxs("div",{className:"flex flex-grow ",onClick:l&&i.variant!=="uploading"?e:()=>{},children:[u.jsxs("div",{className:`${U.imageFrame}`,children:[u.jsx(ws,{src:t.image_url,blurHashEncode:t.blurhash_encode}),z]}),u.jsxs("div",{className:`ml-[10px] ${i.variant==="queue"?"max-w-[96px]":""}`,children:[u.jsx("h5",{className:`font-[500] line-clamp-1 overflow-hidden ${i.variant==="queue"?"text-[13px]":""}`,children:t.name}),u.jsx("p",{className:"text-[14px] opacity-[.5] line-clamp-1",children:t.singer})]})]})]}),j=()=>{switch(i.variant){case"uploading":return u.jsx("div",{className:"opacity-[.6]",children:q});default:return q}},Q=f.useMemo(()=>{if(v)return u.jsx(ds,{className:"w-[20px] animate-spin"});switch(i.variant){case"dashboard-songs":case"dashboard-playlist":return u.jsx(u.Fragment,{});default:return c?u.jsxs("button",{onClick:$,className:`${U.button} max-[549px]:!bg-transparent group`,children:[u.jsx(nQ,{className:`w-[20px]  ${O?`${a.content_text} block group-hover:hidden`:"text-white hidden group-hover:block"}`}),u.jsx(SI,{className:`w-[20px] ${O?"hidden group-hover:block":"block group-hover:hidden"}`})]}):u.jsx(u.Fragment,{})}},[$,O]),ee=f.useMemo(()=>{switch(i.variant){case"home":case"dashboard-songs":return u.jsx(pd,{variant:i.variant,handleAddSongToPlaylist:b,handleOpenModal:M,song:t});case"my-songs":case"favorite":return u.jsx(pd,{variant:"my-songs",handleAddSongToPlaylist:b,handleOpenModal:M,song:t});case"my-playlist":case"admin-playlist":case"dashboard-playlist":return u.jsx(pd,{variant:"playlist",handleRemoveSongFromPlaylist:C,handleOpenModal:M,song:t});case"queue":return u.jsx(pd,{handleRemoveSongFromQueue:V,variant:"queue",handleOpenModal:M,song:t});default:return u.jsx(u.Fragment,{})}},[i.variant,t,_]),ie=f.useMemo(()=>{switch(g){case"":return u.jsx(u.Fragment,{});case"edit":return u.jsx(aK,{close:S,song:t});case"delete":return u.jsx(zr,{loading:R,label:`Delete '${t.name}' ?`,desc:"This action cannot be undone",theme:a,callback:k,close:S});case"add-to-playlist":return u.jsx(gQ,{loading:R,handleAddSongToPlaylist:T,close,song:t,userPlaylists:p})}},[g,R]),De=()=>{switch(i.variant){case"uploading":return u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{children:u.jsx(ds,{className:"w-[20px] mr-[10px] animate-spin"})}),u.jsx("p",{className:"text-[14px]",children:"In process..."})]});default:return u.jsxs("div",{className:U.ctaWrapper,children:[Q,u.jsxs("div",{className:U.menuBtnWrapper,children:[u.jsxs(go,{isOpenFromParent:_,setIsOpenFromParent:x,placement:i.variant==="queue"?"bottom-end":"left",children:[u.jsx(yo,{asChild:!0,children:u.jsx("button",{className:`block group-hover/main:block ${U.button} ${_||i.variant==="queue"?"md:block":"md:hidden max-[549px]:!bg-transparent"}`,children:u.jsx(xG,{className:"w-[20px]"})})}),u.jsx(vo,{children:u.jsxs(So,{className:`${R?"overflow-hidden relative":""}`,variant:"thin",color:"sidebar",theme:a,children:[ee,R&&u.jsx("div",{className:U.overlay,children:u.jsx("div",{className:"h-[25px] w-[25px] border-[2px] border-r-black rounded-[50%] animate-spin"})})]})})]}),u.jsx("span",{className:`text-[12px] font-[500] hidden  group-hover/main:hidden ${_||i.variant==="queue"?"hidden":"md:block"}`,children:Ra(t.duration)})]})]})}},ve=()=>{switch(i.variant){case"uploading":return u.jsxs("div",{className:`${U.itemContainer} ${s||""} `,children:[j(),De()]});case"queue":return u.jsxs("div",{className:`${U.itemContainer} group/main py-[6px] ${n?`${a.content_bg} text-white`:`hover:bg-${a.alpha}`}`,children:[j(),De()]});default:return u.jsxs("div",{className:`${U.itemContainer} ${s||""} 
               group/main ${n||B?`bg-${a.alpha}`:`hover:bg-${a.alpha}`}
               `,children:[j(),De()]})}};return u.jsxs(u.Fragment,{children:[ve(),g&&u.jsx(Hn,{closeModal:S,children:ie})]})}const cQ=({data:t,active:e,onClick:n,hasTitle:r,classNames:s,idleClass:i},o)=>{const{theme:a}=ne(),l={container:"flex flex-col",imageFrame:"group relative transition-[width] duration-[.3s] origin-center rounded-[6px] overflow-hidden",image:"select-none object-cover object-center rounded w-full",overlay:`absolute  ${e?"":"inset-0 hidden bg-opacity-60 bg-[#333] items-center justify-center"}   group-hover:flex`,playingGifFrame:"absolute h-[30px] w-[30px] bottom-[15px] left-[15px] -z-1",title:"text-[22px] text-white mt-[10px] font-bold text-ellipsis line-clamp-1"};if(t)return u.jsxs("div",{ref:o,className:`${l.container} ${i||""}`,children:[u.jsx("div",{className:`song-thumb ${s??""} flex items-end justify-center flex-shrink-0 w-[350px] h-[350px] min-[1536px]:w-[450px] min-[1536px]:h-[450px] `,children:u.jsxs("div",{className:`${l.imageFrame} ${e?"w-[350px] min-[1536px]:w-[450px]":"w-[280px] min-[1536px]:w-[330px]"}`,children:[u.jsx(ws,{classNames:"rounded-[6px]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsx("div",{className:`${l.overlay}`,children:!e&&u.jsx(Y,{onClick:n,variant:"circle",hover:"scale",size:"clear",className:`h-[50px] w-[50px] ${a.content_hover_text}`,children:u.jsx(jf,{className:"w-full"})})}),e&&u.jsx("div",{className:l.playingGifFrame,children:u.jsx("img",{src:e1,alt:""})})]})}),r&&u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:l.title,children:(t==null?void 0:t.name)||"Some song"}),u.jsx("p",{className:"text-md opacity-50 line-clamp-1",children:(t==null?void 0:t.singer)||"..."})]})]})},Rg=f.forwardRef(cQ);function uQ({data:t,active:e}){const n={container:"flex flex-col",imageFrame:"rounded-[4px] overflow-hidden",image:"select-none object-cover object-center w-full"};if(t)return u.jsx("div",{className:`${n.container} ${e?"w-full px-[20px]":"w-[60px] h-[60px] flex-shrink-0"}`,children:u.jsx("div",{className:`${n.imageFrame}`,children:u.jsx(ws,{src:t.image_url,classNames:"w-full"})})})}function vs({songs:t,...e}){const{theme:n}=ne(),{currentSong:r}=X(be),{queueSongs:s}=X(Wr),i=f.useMemo(()=>e.variant!=="uploading"?u.jsx(u.Fragment,{}):t.map((l,c)=>{const d={key:c,onClick:()=>{},song:l};return c==0?u.jsx(Ag,{variant:"uploading",className:"temp-song",...d}):u.jsx(Ag,{variant:"uploading",...d})}),[e]),o=u.jsx("p",{className:"text-center my-[60px]",children:"... ¯\\_(ツ)_/¯"}),a=f.useMemo(()=>{if(e.variant==="uploading")return u.jsx(u.Fragment,{});switch(e.variant){case"my-songs":if(!t.length&&!e.tempSongs.length)return o;break;default:if(!t.length)return o}const{handleSetSong:l,activeExtend:c=!0}=e;return t.map((d,h)=>{let m=c&&r.id===d.id;e.variant==="queue"&&(m=m&&r.currentIndex===h);const p=r.currentIndex===s.length-1;return u.jsxs("div",{children:[u.jsx(Ag,{active:m,onClick:()=>l(d,h),variant:e.variant,song:d,index:h}),e.variant==="queue"&&m&&!p&&u.jsx("div",{className:"mt-[12px] mb-[4px]",children:u.jsx("p",{className:`${n.content_text} text-[14px] font-[600]`,children:"Playing next"})})]},d.id+d.name.length+h)})},[r,e,s,n]);return u.jsxs(u.Fragment,{children:[a,i]})}function n1({tabs:t,activeTab:e,setActiveTab:n,className:r,render:s,inFullScreen:i}){const{theme:o}=ne();return u.jsx("ul",{className:`flex space-x-[4px] py-[4px] h-full px-[4px] items-center ${i?"mx-auto":""} rounded-full ${i?"bg-white/10":o.side_bar_bg} ${r&&r}`,children:t.map((a,l)=>u.jsx("li",{onClick:()=>n(a),className:`${i?"px-[30px]":"px-[20px]"}  cursor-pointer hover:bg-white/20 h-full rounded-full max-[549px]:px-[15px] ${i?"":o.content_hover_text} ${e===a?i?"bg-white/20":`${o.content_text} ${o.container}`:"opacity-60"}`,children:u.jsx("span",{className:"leading-[27px] font-semibold max-[549px]:font-normal",children:s(a)})},l))})}function $N({to:t}){const{theme:e}=ne(),n=wn(),r=zn(),s=o=>{typeof t=="string"&&V3(t),o==="back"&&n(-1)},i={button:`h-[36px] w-[36px] p-[4px] rounded-full ${e.content_hover_bg} bg-${e.alpha}`};return u.jsx("div",{className:"flex gap-[10px] mb-[30px]",children:u.jsx("button",{onClick:()=>s("back"),className:`${i.button} ${r.pathname==="/"?"opacity-60 pointer-events-none":""}`,children:u.jsx(VP,{})})})}const dQ=({time:t=6e3,autoClose:e})=>{const{setToasts:n,toasts:r}=_n(),{theme:s}=ne(),[i,o]=f.useState(""),a=c=>{n(d=>d.filter(h=>h.id!=c))};f.useEffect(()=>{i&&n(c=>c.filter(d=>d.id!=i))},[i]),f.useEffect(()=>{if(!e||!r.length)return;const c=r[r.length-1].id;setTimeout(()=>{o(c)},t)},[r]);const l={container:"toast-portal fixed z-[199] bottom-[100px] left-[20px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:qa.createPortal(u.jsx("div",{className:l.container,children:u.jsx("div",{className:"flex flex-col gap-[10px]",children:!!r.length&&r.map((c,d)=>u.jsx(lK,{onClick:a,theme:s,toast:c},d))})}),document.getElementById("portals"))})};function hQ({user:t},e){return e?u.jsx("p",{className:"text-xl mb-4 ml-2",ref:e,children:t.display_name}):u.jsx("p",{className:"text-xl mb-4 ml-2",children:t.display_name})}f.forwardRef(hQ);function fQ(){const{theme:t}=ne(),[e]=Eu(hi),[n,r]=f.useState(""),{logOut:s}=Tu(),i=()=>r(""),o=async()=>{try{await s()}catch(c){console.log("signOut error",{messsage:c})}finally{i()}},a=f.useMemo(()=>{switch(n){case"":return u.jsx(u.Fragment,{});case"logout":return u.jsx(zr,{callback:o,close:i,loading:!1,theme:t,label:"Log out ?"});case"info":return u.jsx(r1,{close:i});case"theme":return}},[n]),l={header:`${t.side_bar_bg} fixed top-0 z-10 left-0 right-0`,container:"container mx-auto px-[40px] flex justify-between items-center h-[50px]",avatarFrame:"w-[34px] h-[34px] rounded-full",settingBtn:` flex ml-[12px] justify-center items-center hover:brightness-75 bg-${t.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`${l.header}`,children:u.jsxs("div",{className:l.container,children:[u.jsxs(Zs,{to:"/dashboard",className:"text-[24px] font-semibold",children:["HD",u.jsx("span",{className:`${t.content_text} ml-[4px] uppercase`,children:"Dashboard"})]}),u.jsxs("div",{className:"flex items-center",children:[(e==null?void 0:e.displayName)&&u.jsx("p",{className:"text-[14px] mr-[8px]",children:e.displayName}),u.jsx("div",{className:`${l.avatarFrame} overflow-hidden `,children:(e==null?void 0:e.photoURL)&&u.jsx("img",{src:e.photoURL,className:"w-full",alt:""})}),u.jsxs(go,{placement:"bottom-end",children:[u.jsx(yo,{className:`${l.avatarFrame} ${l.settingBtn}`,children:u.jsx(_I,{className:"w-[24px]"})}),u.jsx(vo,{children:u.jsx(MN,{loggedIn:!1,setIsOpenModal:()=>{}})})]})]})]})}),!!n&&u.jsx(Hn,{closeModal:i,children:a})]})}const mQ="/HD-MP3/assets/user-default-971f59df.png";function Uy({className:t}){const[e]=Eu(hi),n={imageFrame:`${t||"w-[35px] h-[35px]"} flex-shrink-0 rounded-full overflow-hidden ${e!=null&&e.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`};return u.jsx("div",{className:n.imageFrame,children:u.jsx(ws,{src:(e==null?void 0:e.photoURL)||mQ,classNames:"w-full"})})}function pQ({cb:t,isPlaying:e,play:n,isOpenFullScreen:r}){const s=Le(),{theme:i}=ne(),{playStatus:{isTimer:o}}=X(cn),[a,l]=f.useState(()=>Nr().isTimer||0),[c,d]=f.useState(0),[h,m]=f.useState(!1),p=f.useRef(),v=f.useRef(0),y=f.useRef(0),_=f.useRef(!1),x=()=>{y.current=0,m(!1),n()},g=()=>m(!1),w=()=>{g(),y.current=0},E=()=>{s(zt({isTimer:0})),l(0),bt("isTimer",0)};return f.useEffect(()=>{if(c){if(a===1){console.log("pause"),t(),l(0),s(zt({isTimer:0})),bt("isTimer",0),m(!0);return}l(a-1)}},[c]),f.useEffect(()=>{if(o){if(console.log("check sec",a,y.current),!e&&a===y.current)_.current=!0,n();else if(!e)return;return a||(l(o),y.current=o),p.current=setInterval(()=>{d(Math.random())},1e3),()=>{clearInterval(p.current),d(0)}}},[o,e]),f.useEffect(()=>()=>{_.current=!1,a&&(y.current=0)},[o]),f.useEffect(()=>{a&&(v.current+=1,v.current===5&&(bt("isTimer",a),v.current=0))},[a]),u.jsxs(u.Fragment,{children:[!!a&&!r&&u.jsx("div",{className:"absolute bottom-[100%] w-[70%] left-[50%] translate-x-[-50%]",children:u.jsxs("div",{className:`${i.content_bg} flex justify-center gap-[10px] py-[2px] text-[13px] px-[20px] rounded-tl-[4px] rounded-tr-[4px]`,children:[u.jsxs("p",{className:" text-[13px]",children:["Song stop in ",Ra(a)]}),u.jsx("button",{onClick:E,children:u.jsx(Bi,{className:"w-[18px]"})})]})}),h&&u.jsx(Hn,{closeModal:g,children:u.jsxs("div",{className:"w-[500px] max-w-[calc(100vw-40px)]",children:[u.jsxs("h1",{className:"text-[22px]",children:["You have been listened music in ",Ra(y.current)]}),u.jsxs("div",{className:"flex gap-[10px] mt-[30px]",children:[u.jsx(Y,{onClick:()=>x(),size:"normal",className:`${i.content_bg} rounded-[99px]`,children:"Continue playing"}),u.jsx(Y,{onClick:w,size:"normal",className:`bg-${i.alpha} rounded-[99px]`,children:"Close"})]})]})})]})}function r1({close:t}){return u.jsxs("div",{className:"w-[400px] max-w-[calc(90vw-40px)]",children:[u.jsx(ki,{close:t,title:"HD MP3"}),u.jsxs("p",{children:[u.jsx("span",{className:"font-[500]",children:"Technologies: "})," React, Tailwind Css, Google firebase"]})]})}function Ub({onClick:t,theme:e,active:n}){return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"w-[25%] px-[10px] max-[549px]:w-[50%]",children:[u.jsx("div",{onClick:()=>t(e),className:`relative border-l-[20px] ${e.content_border} pt-[100%] rounded-xl ${e.side_bar_bg} ${n?e.content_border:""}`,children:n&&u.jsx("div",{className:"absolute bottom-[10px] right-[10px]",children:u.jsx(xI,{className:`${e.content_text} w-[25px]`})})}),u.jsx("p",{className:"text-[14px] mt-[6px]",children:e.name})]})})}function BN({close:t}){const{theme:e,setTheme:n}=ne(),r=a=>{bt("theme",a.id),n(a)},s={songItemContainer:`w-full border-b border-${e.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[900px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-y-auto overflow-x-hidden no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap",linkItem:`py-[10px] border-b border-${e.alpha} last:border-none`},i=vh.map(a=>{const l=a.id===e.id;if(a.type==="light")return u.jsx(Ub,{active:l,theme:a,onClick:r},a.id)}),o=vh.map(a=>{const l=a.id===e.id;if(a.type==="dark")return u.jsx(Ub,{active:l,theme:a,onClick:r},a.id)});return u.jsxs("div",{className:s.popupWrapper,children:[u.jsx(ki,{close:t,title:"Themes"}),u.jsxs("div",{className:s.themeContainer,children:[u.jsx("h2",{className:"text-md font-semibold mb-[10px]",children:"Dark"}),u.jsx("div",{className:s.themeList,children:o}),u.jsx("h2",{className:"text-md font-semibold mb-[10px] mt-[30px]",children:"Light"}),u.jsx("div",{className:s.themeList,children:i})]})]})}function zr({loading:t,theme:e,callback:n,label:r,close:s,buttonLabel:i,desc:o="This action cannot be undone",className:a}){return u.jsxs("div",{className:`${a||"w-[400px] max-w-[calc(90vw-40px)]"} ${t?"opacity-60 pointer-events-none":""}`,children:[u.jsx("h1",{className:"text-[20px] font-semibold",children:r||"Wait a minute"}),o&&u.jsx("p",{className:" text-[16px] font-semibold text-red-500",children:o}),u.jsxs("div",{className:"flex gap-[10px] mt-[20px]",children:[u.jsx(Y,{onClick:s,className:`${e.content_bg} rounded-full text-[14px]`,variant:"primary",children:"Close"}),u.jsx(Y,{isLoading:t,className:" text-[#fff] bg-red-500 rounded-full text-[14px] font-bold",variant:"primary",onClick:n,children:i||"Yes please"})]})]})}function Hb({close:t,addPlaylist:e,isFetching:n}){const{theme:r}=ne(),[s,i]=f.useState(""),o=f.useRef(null),a=async l=>{l.preventDefault(),s&&(await e(s),t())};return f.useEffect(()=>{var l;(l=o.current)==null||l.focus()},[]),u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]:",children:[u.jsx(ki,{close:t,title:"Add playlist"}),u.jsxs("form",{action:"",onSubmit:a,children:[u.jsx("input",{ref:o,className:`bg-${r.alpha} px-[20px] rounded-full outline-none mt-[10px] text-[16px]  h-[35px] w-full`,type:"text",placeholder:"name...",value:s,onChange:l=>i(l.target.value)}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(Y,{type:"submit",isLoading:n,variant:"primary",className:`${r.content_bg} rounded-full ${s?"":"opacity-[.6] pointer-events-none"}`,children:"Save"})})]})]})}function gQ({close:t,handleAddSongToPlaylist:e,userPlaylists:n,song:r,loading:s}){return u.jsxs("div",{className:`w-[400px] max-w-[calc(90vw-40px)] ${s?"opacity-60 pointer-events-none":""}`,children:[u.jsx(ki,{close:t,title:"Playlist"}),u.jsx("div",{className:"max-h-[60vh]",children:u.jsx("ul",{className:"",children:!!(n!=null&&n.length)&&u.jsx(u.Fragment,{children:n.map((i,o)=>{const a=i.song_ids.includes(r.id);return u.jsxs("li",{onClick:()=>!a&&e(i),className:`list-none flex rounded-[4px] p-[5px] ${a&&"opacity-60"}`,children:[u.jsx(ka,{className:"w-[20px] mr-[5px]"}),u.jsxs("p",{children:[i.name," ",a&&"(added)"]})]},o)})})})})]})}function s1({close:t}){const e=Le(),{theme:n}=ne(),[r,s]=f.useState(),[i,o]=f.useState(""),[a,l]=f.useState(""),{setSuccessToast:c}=_n(),d={button:"text-[14px] font-[500] px-[10px]  py-[4px] rounded-[99px]",input:`bg-${n.alpha} px-[10px] rounded-[4px] outline-none mt-[10px] text-[16px]  h-[35px] w-full`},h=(y,_)=>{console.log("handleSelect",y),_.stopPropagation(),_.preventDefault(),l(""),o(""),s(y)},m=(y,_)=>{s(""),y=="minute"?o(_):l(_)},p=()=>{let y;r?y=+r:y=+a*60+ +i,e(zt({isTimer:y})),bt("isTimer",y),c({message:"Timer added"}),t()},v=r||a||i;return u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]",children:[u.jsx(ki,{close:t,title:"Sleep timer"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex space-x-[10px] mb-[12px]",children:[u.jsx("button",{type:"button",onClick:y=>h("5",y),className:`${d.button} ${r==="5"?n.content_bg:`${n.content_border} border`}`,children:"5 min"}),u.jsx("button",{type:"button",onClick:y=>h("15",y),className:`${d.button} ${r==="15"?n.content_bg:`${n.content_border} border`}`,children:"15 min"}),u.jsx("button",{type:"button",onClick:y=>h("30",y),className:`${d.button} ${r==="30"?n.content_bg:`${n.content_border} border`}`,children:"30 min"})]}),u.jsxs("div",{className:"flex mx-[-10px]",children:[u.jsxs("div",{className:"flex flex-col w-[50%] px-[10px]",children:[u.jsx("label",{htmlFor:"hour_input",children:"Hour"}),u.jsxs("select",{value:a,onChange:y=>m("hour",y.target.value),id:"hour_input",className:d.input,children:[u.jsx("option",{value:"0",children:"---"}),u.jsx("option",{value:"1",children:"1"}),u.jsx("option",{value:"2",children:"2"}),u.jsx("option",{value:"3",children:"3"})]})]}),u.jsxs("div",{className:"flex flex-col w-[50%] px-[10px]",children:[u.jsx("label",{htmlFor:"minute_input",children:"Minute"}),u.jsxs("select",{value:i,onChange:y=>m("minute",y.target.value),className:d.input,id:"minute_input",children:[u.jsx("option",{className:d.input,value:"0",children:"---"}),u.jsx("option",{value:"15",children:"15"}),u.jsx("option",{value:"30",children:"30"}),u.jsx("option",{value:"45",children:"45"})]})]})]}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(Y,{onClick:p,variant:"primary",className:`${n.content_bg} rounded-full ${v?"":"opacity-60 pointer-events-none"}`,children:"Ok"})})]})]})}function zN({admin:t}){const e=f.useRef(null),n=f.useRef(null),r=f.useRef(null),{handleInputChange:s}=rK({audioRef:e,testImageRef:r,inputRef:n,admin:t}),i={container:"upload portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:qa.createPortal(u.jsxs("div",{className:i.container,children:[u.jsx("audio",{className:"hidden",ref:e}),u.jsx("input",{ref:n,onChange:s,type:"file",multiple:!0,accept:"audio",id:"song_upload",className:"hidden"}),u.jsx("img",{className:"hidden",ref:r})]}),document.getElementById("portals"))})}function Pg({children:t}){const{theme:e}=ne();return u.jsx(u.Fragment,{children:u.jsxs("div",{className:`${e.container} min-h-screen ${e.type==="dark"?"text-white":"text-[#333]"}`,children:[u.jsx(fQ,{}),u.jsxs("div",{className:"h-[calc(100vh-50px)] no-scrollbar overflow-auto",children:[u.jsx("div",{className:"h-[100px]"}),u.jsx("div",{className:"container mx-[auto] px-[40px]",children:t})]}),u.jsx(ON,{admin:!0}),u.jsx(zN,{admin:!0})]})})}function VN(){const t=Le(),{userPlaylists:e,setUserPlaylists:n}=lt(),{currentPlaylist:r}=X(Es),{currentSong:s}=X(be),[i,o]=f.useState(!1),a=wn(),{setErrorToast:l}=_n();return{isFetching:i,addAdminPlaylist:async h=>{try{if(!h)throw new Error("playlist name invalid");const m=lx(h)+"_admin",p=ux({id:m,by:"admin",name:h});o(!0);const v=[...e,p];await xn({collection:"playlist",data:p,id:m,msg:">>> api: set playlist doc"}),n(v)}catch(m){console.log({message:m}),l({})}finally{o(!1)}},deleteAdminPlaylist:async()=>{o(!0),await Fc({collection:"playlist",id:r.id,msg:">>> api: delete playlist doc"});const h=e.filter(m=>m.id!==r.id);n(h),t(qw()),s.song_in===`playlist_${r.id}`&&t(pi()),o(!1),a("/dashboard")}}}function i1({playlist:t,loading:e,activeCondition:n=!0,className:r,...s}){const{theme:i}=ne(),{currentSong:o}=X(be),[a,l]=f.useState(!1),{addPlaylist:c,isFetching:d}=Co(),{addAdminPlaylist:h,isFetching:m}=VN(),p=()=>l(!1),v={playlistItem:"w-1/4 p-[8px] max-[800px]:w-1/2"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`flex flex-row flex-wrap -mx-[8px] ${r}`,children:[e&&q6,!e&&u.jsxs(u.Fragment,{children:[t.length?t.map((y,_)=>{const x=n&&o.song_in.includes(y.id);switch(s.location){case"home":case"my-songs":return u.jsx("div",{className:v.playlistItem,children:u.jsx(Vy,{active:x,theme:i,data:y})},_);case"dashboard":return u.jsx("div",{className:v.playlistItem,children:u.jsx(Vy,{active:x,theme:i,data:y,link:`/dashboard/playlist/${y.id}`})},_)}}):s.location==="home"&&u.jsx("p",{className:"text-center w-full",children:"..."}),s.location!=="home"&&u.jsx("div",{className:`${v.playlistItem} mb-[25px]`,children:u.jsx(i$,{theme:i,className:"pt-[100%]",onClick:()=>l(!0)})})]})]}),s.location!=="home"&&a&&u.jsxs(Hn,{closeModal:p,children:[s.location==="my-songs"&&u.jsx(Hb,{addPlaylist:c,isFetching:d,close:p}),s.location==="dashboard"&&u.jsx(Hb,{addPlaylist:h,isFetching:m,close:p})]})]})}function yQ(){const{theme:t}=ne(),{loading:e,user:n}=pt(),{logIn:r}=Tu(),s=async()=>{try{await r()}catch(o){console.log(o)}finally{}},i={icon:"w-6 h-6 mr-2 inline",linkItem:`py-[10px] border-b border-${t.alpha} last:border-none`,button:`${t.content_bg} rounded-full`};return u.jsx("div",{className:"pb-[20px]",children:u.jsxs("div",{className:"flex flex-col gap-3 items-start ",children:[u.jsx("h1",{className:"text-[24px] font-bold",children:"Library"}),e?[...Array(3).keys()].map(()=>w2):u.jsx(u.Fragment,{children:n?u.jsxs(u.Fragment,{children:[u.jsx(la,{className:i.linkItem,to:Nt.MySongs,icon:u.jsx(ka,{className:i.icon+t.content_text}),label:"All songs",arrowIcon:u.jsx(Ap,{className:"w-5 h-5 text-gray-500"})}),u.jsx(la,{className:i.linkItem,to:Nt.MySongs,icon:u.jsx(SI,{className:i.icon+t.content_text}),label:"Favorite",arrowIcon:u.jsx(Ap,{className:"w-5 h-5 text-gray-500"})}),u.jsx(la,{className:i.linkItem,to:Nt.MySongs,icon:u.jsx(wI,{className:i.icon+t.content_text}),label:"Recent",arrowIcon:u.jsx(Ap,{className:"w-5 h-5 text-gray-500"})})]}):u.jsx(Y,{onClick:s,className:`${t.content_bg} rounded-[4px] px-[40px]`,variant:"primary",children:"Login"})})]})})}function vQ(){const{theme:t}=ne(),{loading:e,user:n}=pt(),{logOut:r}=Tu(),[s,i]=f.useState(""),o=()=>i(""),a=async()=>{try{await r()}catch(d){console.log("signOut error",{messsage:d})}finally{o()}},l=f.useMemo(()=>{switch(s){case"theme":return u.jsx(BN,{close:o});case"info":return u.jsx(r1,{close:o});case"logout":return u.jsx(zr,{close:o,callback:a,loading:!1,theme:t,label:"Log out ?"})}},[s]),c={linkItem:`py-[10px] border-b border-${t.alpha} last:border-none`,button:`${t.content_bg} rounded-full`,icon:"w-[24px] mr-2"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[10px]",children:"Setting"}),u.jsx(Uy,{className:"h-[65px] w-[65px]"}),e?u.jsx(Je,{className:"my-[8px] h-[27px]"}):u.jsx("p",{className:"text-[18px] font-[500] my-[8px]",children:n?n.display_name:"Guest"}),e?[...Array(3).keys()].map(()=>w2):u.jsxs(u.Fragment,{children:[u.jsx(la,{className:c.linkItem,icon:u.jsx(kI,{className:c.icon}),label:"Theme",onClick:()=>i("theme")}),u.jsx(la,{className:c.linkItem,icon:u.jsx(bI,{className:c.icon}),label:"Info",onClick:()=>i("info")}),n&&u.jsx(la,{className:c.linkItem,icon:u.jsx(vI,{className:c.icon}),label:"Logout",onClick:()=>i("logout")})]})]}),s&&u.jsx(Hn,{closeModal:o,children:l})]})}function xl({children:t,...e}){const{isSelectAll:n,resetSelect:r}=t1();switch(e.variant){case"home":case"dashboard-songs":return u.jsxs(u.Fragment,{children:[t,u.jsx(Y,{onClick:r,className:"px-[5px] flex-shrink-0",children:u.jsx(Bi,{className:"w-[20px]"})})]});case"my-playlist":case"my-songs":case"dashboard-playlist":case"admin-playlist":return u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:e.selectAll,className:"ml-[10px]",children:n?u.jsx(Fy,{className:"w-[20px]"}):u.jsx(fc,{className:"w-[20px]"})}),t,u.jsx(Y,{onClick:r,className:"px-[5px] flex-shrink-0",children:u.jsx(Bi,{className:"w-[20px]"})})]})}}function Wc({children:t,...e}){const n=Le(),{theme:r}=ne(),{user:s}=pt(),{isChecked:i,selectedSongs:o,selectAll:a,resetSelect:l}=t1(),{currentSong:c}=X(be),{queueSongs:d}=X(Wr),{playlistSongs:h}=X(Es),{userSongs:m,setUserSongs:p}=lt(),[v,y]=f.useState(!1),[_,x]=f.useState(""),{setErrorToast:g,setSuccessToast:w}=_n(),{deleteSongsFromPlaylist:E,isFetching:S}=Co(),k=()=>{x("")},T=()=>{o.length<m.length?a(m):l()},b=()=>{o.length<h.length?a(h):l()},C=()=>{n(Su({songs:o})),w({message:"songs added to queue"}),l()},R=async()=>{if(s)try{y(!0);const $=o.map(U=>U.id);for(let U of o)await BP(U);const W=m.filter(U=>!$.includes(U.id));if(c.song_in==="user"){const U=d.filter(I=>!$.includes(I.id));U.length!==d.length&&n(bu({songs:U}))}$.includes(c.id)&&n(pi()),p(W),w({message:`${o.length} songs deleted`})}catch($){console.log({message:$}),g({})}finally{l(),y(!1),k()}},M=async()=>{try{await E(o)}catch($){console.log($),g({message:"Error when delete song"})}finally{k(),l()}},B={outlineButton:`border-${r.alpha} ${r.side_bar_bg}`,icon:"w-[20px] mr-[6px]"},O=f.useMemo(()=>{if(_)switch(_){case"delete-selected-songs":return u.jsx(zr,{loading:v,label:`Delete ${o.length} songs ?`,theme:r,callback:R,close:k});case"remove-selects-songs":return u.jsx(zr,{loading:S,label:`Remove ${o.length} songs ?`,theme:r,callback:M,close:k})}},[_,S,v]),V=f.useMemo(()=>{switch(e.variant){case"home":return u.jsxs(u.Fragment,{children:[!i&&u.jsx("h3",{className:"text-2xl font-bold !mr-[14px]",children:"Songs"}),i&&u.jsxs(xl,{variant:e.variant,children:[u.jsx("p",{className:"font-[500] !mr-[14px]",children:o.length}),u.jsxs(Y,{onClick:C,variant:"outline",size:"small",className:B.outlineButton,children:[u.jsx(Vs,{className:B.icon}),"Add to songs queue"]})]})]});case"dashboard-songs":return u.jsxs(u.Fragment,{children:[!i&&t,i&&u.jsxs(xl,{variant:e.variant,children:[u.jsx("p",{className:"font-[500]",children:o.length}),u.jsxs(Y,{variant:"outline",size:"small",onClick:()=>console.log("confirm modal"),className:B.outlineButton,children:[u.jsx(yh,{className:B.icon}),"Delete"]})]})]});case"my-songs":return u.jsxs(u.Fragment,{children:[!i&&t,i&&u.jsxs(xl,{selectAll:T,variant:e.variant,children:[u.jsx("p",{className:"font-[500] !mr-[14px]",children:o.length}),u.jsxs(Y,{variant:"outline",size:"small",onClick:C,className:B.outlineButton,children:[u.jsx(Vs,{className:B.icon}),"Add to songs queue"]}),u.jsxs(Y,{variant:"outline",size:"small",onClick:()=>x("delete-selected-songs"),className:B.outlineButton,children:[u.jsx(yh,{className:B.icon}),"Delete"]})]})]});case"dashboard-playlist":case"my-playlist":return u.jsxs(u.Fragment,{children:[!i&&t,i&&u.jsxs(xl,{selectAll:b,variant:e.variant,children:[u.jsx("p",{className:"font-[500] !mr-[14px]",children:o.length}),e.variant!=="dashboard-playlist"&&u.jsxs(Y,{variant:"outline",size:"small",onClick:C,className:B.outlineButton,children:[u.jsx(Vs,{className:B.icon}),"Add to songs queue"]}),u.jsxs(Y,{variant:"outline",size:"small",onClick:()=>x("remove-selects-songs"),className:B.outlineButton,children:[u.jsx(TI,{className:B.icon}),"Remove"]})]})]});case"admin-playlist":return u.jsxs(u.Fragment,{children:[!i&&u.jsx("h3",{className:"font-[500] !mr-[14px]",children:"Songs"}),i&&u.jsxs(xl,{selectAll:b,variant:e.variant,children:[u.jsx("p",{className:"font-[500]",children:o.length}),u.jsxs(Y,{variant:"outline",size:"small",onClick:C,className:B.outlineButton,children:[u.jsx(Vs,{className:B.icon}),"Add to songs queue"]})]})]})}},[i,o,e]);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center space-x-[8px] py-[10px]",children:V}),_&&u.jsx(Hn,{closeModal:k,children:O})]})}function xQ({loading:t}){const e=Le(),{adminSongs:n}=lt(),{from:r}=X(Wr),{currentSong:s}=X(be),i=(o,a)=>{(s.id!==o.id||s.song_in!=="admin")&&(e(vn({...o,currentIndex:a})),(r.length>1||r[0]!=o.song_in)&&e(bu({songs:n})))};return u.jsxs(Jm,{children:[u.jsx(Wc,{variant:"home"}),t&&Hf,!t&&u.jsx(u.Fragment,{children:n.length?u.jsx(u.Fragment,{children:u.jsx(vs,{variant:"home",handleSetSong:i,activeExtend:s.song_in==="admin"||s.song_in==="favorite",songs:n})}):u.jsx("h1",{className:"text-[22px] text-center",children:"..."})})]})}function wQ(){const{loading:t}=pt(),{adminPlaylists:e}=lt(),{isOnMobile:n}=ne(),{loading:r}=Xm({});return u.jsxs(u.Fragment,{children:[n&&u.jsx(yQ,{}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[14px]",children:"Popular"}),u.jsx(i1,{loading:r||t,playlist:e,location:"home"})]}),u.jsx("div",{className:"pb-[30px]",children:u.jsx(xQ,{loading:r})}),n&&u.jsx(vQ,{})]})}function _Q(){const{theme:t}=ne(),{currentSong:e}=X(be),{userSongs:n}=lt(),[r,s]=f.useState(),[i,o]=f.useState({base:"",real_time:[],id:""}),a=f.useRef(null),[l,c]=f.useState(!1),d=f.useRef(!1),{errorMsg:h,loading:m,initial:p}=Xm({}),v=wn(),y=Nf(),_=f.useCallback(async g=>{try{if(g.lyric_id){c(!0);const w=await Va({collection:"lyrics",id:g.lyric_id,msg:">>> api: get lyric doc"});if(w.exists()){const E=w.data();o(E)}}}catch(w){console.log({message:w})}finally{c(!1)}},[]),x=f.useCallback(async()=>{if(console.log("get song"),e.name&&e.id===y.id)e.by==="admin"?v(Nt.Home):(s(e),await _(e));else{const g=n.find(w=>w.id===y.id);g?(s(g),await _(g)):v(Nt.Home)}},[e,n]);return f.useEffect(()=>{p&&(d.current||(d.current=!0,r||x()))},[p]),m||l?u.jsx("h1",{children:u.jsx(ds,{className:"w-[25px] animate-spin"})}):h?u.jsx("h1",{children:h}):u.jsxs("div",{className:"",children:[u.jsx("audio",{ref:a,src:r==null?void 0:r.song_url,className:"hidden"}),r&&u.jsx(u.Fragment,{children:u.jsx(jN,{lyric:i,audioRef:a,theme:t,song:r})})]})}function EQ({initialLoading:t}){const e=Le(),{userSongs:n}=lt(),{currentSong:r}=X(be),{tempSongs:s}=Km(),i=f.useMemo(()=>s.length+n.length,[s,n]),o=(a,l)=>{r.id!==a.id&&e(vn({...a,currentIndex:l}))};return u.jsxs(Jm,{children:[u.jsx(Wc,{variant:"dashboard-songs",children:t?u.jsx(u.Fragment,{children:u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(Je,{className:"h-[20px] w-[90px]"})})}):u.jsxs("p",{className:"font-semibold opacity-[.6]",children:[i," Songs"]})}),u.jsxs("div",{className:"min-h-[50vh]",children:[t&&Hf,!t&&u.jsx(u.Fragment,{children:i?u.jsxs(u.Fragment,{children:[u.jsx(vs,{variant:"dashboard-songs",tempSongs:s,activeExtend:!0,songs:n,handleSetSong:o}),u.jsx(vs,{variant:"uploading",songs:s})]}):u.jsx("p",{className:"text-center",children:"¯\\_(ツ)_/¯"})})]})]})}function SQ(){const{theme:t}=ne(),{user:e,loading:n}=pt(),{currentSong:r}=X(be),{userPlaylists:s}=lt(),[i,o]=f.useState(!0),[a,l]=f.useState([]),[c,d]=f.useState("userSongs"),{loading:h,errorMsg:m}=Xm({admin:!0}),p=async()=>{console.log(">>> api: get user");try{if(!e)return;o(!0);const _=Si(rl(_s,"users"),bi("email","!=",e.email)),x=await Ti(_);if(x.docs){const g=x.docs.map(w=>w.data());l(g)}}catch(_){console.log(_)}finally{o(!1)}},v=()=>a.map((_,x)=>u.jsxs("tr",{className:"",children:[u.jsx("td",{className:y.td,children:u.jsx("div",{className:"h-[44px] w-[44px] ml-[20px]",children:u.jsx(ws,{classNames:"rounded-[4px]",src:_.photoURL})})}),u.jsx("td",{className:y.td,children:_.display_name}),u.jsx("td",{className:y.td,children:_.email}),u.jsx("td",{className:y.td,children:M6(_==null?void 0:_.latest_seen)})]},x));f.useEffect(()=>{n||c==="users"&&!a.length&&p()},[c]);const y={button:`${t.content_bg} rounded-full`,inActiveBtn:`bg-${t.alpha}`,activeBtn:`${t.content_bg}`,td:`py-[10px] my-[10px] border-${t.alpha} border-b-[1px]`,th:"py-[5px]",tableContainer:`border border-${t.alpha} rounded-[4px]`,tableHeader:`border-b border-${t.alpha} ${t.side_bar_bg} flex items-center h-[50px] gap-[15px]`};return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsxs("div",{className:"mb-[20px]",children:[u.jsx(Y,{onClick:()=>d("userSongs"),className:`${c==="userSongs"?y.activeBtn:y.inActiveBtn}  rounded-full`,variant:"primary",children:"Songs"}),u.jsx(Y,{onClick:()=>d("users"),className:` ${c==="users"?y.activeBtn:y.inActiveBtn} rounded-full ml-[10px]`,variant:"primary",children:"Users"})]}),u.jsxs("div",{className:"mt-[30px]",children:[c==="userSongs"&&u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-2xl font-bold mb-[10px]",children:"Playlist"}),u.jsx(i1,{activeCondition:!!r.song_in,loading:h,playlist:s,location:"dashboard"}),u.jsxs("div",{className:"mt-[30px] flex justify-between mb-[10px]",children:[u.jsx("h3",{className:"text-2xl font-bold",children:"Songs"}),u.jsx("div",{className:"flex items-center",children:u.jsxs("label",{className:`${t.content_bg} ${status==="uploading"||h?"opacity-60 pointer-events-none":""} rounded-full flex px-[20px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(gh,{className:"w-[20px] mr-[5px]"}),"Upload"]})})]}),m&&u.jsx("p",{children:"Some thing went wrong"}),!m&&u.jsx(EQ,{initialLoading:h})]}),c==="users"&&u.jsx("div",{className:y.tableContainer,children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:`${t.bottom_player_bg} w-full text-[14px] py-[4px]`,children:u.jsxs("tr",{children:[u.jsx("th",{}),u.jsx("th",{className:"text-left py-[4px]",children:"Name"}),u.jsx("th",{className:"text-left py-[4px]",children:"Email"}),u.jsx("th",{className:"text-left py-[4px]",children:"Latest Seen"})]})}),u.jsx("tbody",{children:v()})]})})]})]})})}function bQ({playlist:t,close:e}){const{theme:n}=ne(),r=f.useRef(null),[s,i]=f.useState(""),[o,a]=f.useState(!1),{editPlaylist:l,isFetching:c}=Co(),d=async m=>{if(m.preventDefault(),!!o)try{await l(s,t)}catch(p){console.log(p)}finally{e()}},h={editContainer:"w-[400px] max-w-[calc(90vw-40px)]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full"};return f.useEffect(()=>{const m=r.current;m==null||m.focus(),i(t.name)},[]),f.useEffect(()=>{s.trim()&&s.trim()!==t.name?a(!0):a(!1)},[s]),u.jsxs(u.Fragment,{children:[u.jsx(ki,{close:e,title:"Edit playlist"}),u.jsxs("form",{action:"",onSubmit:d,className:`${h.editContainer} ${c?"opacity-60 pointer-events-none":""}`,children:[u.jsx("input",{ref:r,value:s,onChange:m=>i(m.target.value),type:"text",className:`${h.input} bg-${n.alpha} ${n.type==="light"?"text-[#333]":"text-white"}`}),u.jsx(Y,{type:"submit",variant:"primary",isLoading:c,className:`${n.content_bg} rounded-full self-end mt-[15px] ${o?"":"opacity-60 pointer-events-none"}`,children:"Save"})]})]})}function Ng({loading:t,type:e}){const n=Le(),{theme:r,isOnMobile:s}=ne(),{currentSong:i}=X(be),{currentPlaylist:o,playlistSongs:a}=X(Es),[l,c]=f.useState(""),d=Nf(),{deletePlaylist:h,isFetching:m}=Co(),{deleteAdminPlaylist:p,isFetching:v}=VN(),y=f.useMemo(()=>a.reduce((b,C)=>b+C.duration,0),[a]),_=()=>c(""),x=(b,C)=>{const R=`playlist_${o.id}`;(i.id!==b.id||i.song_in!==R)&&(n(vn({...b,currentIndex:C,song_in:R})),i.song_in!==R&&(n(bu({songs:a})),console.log("setActuallySongs when playlist list")))},g=()=>{const b=a[0];i.song_in.includes(d.name)||x(b,0)},w=u.jsxs(u.Fragment,{children:[u.jsx(Je,{className:"h-[30px]  w-[200px]"}),u.jsx(Je,{className:"hidden md:block h-[16px] w-[60px]"}),u.jsx(Je,{className:"hidden md:block h-[16px] w-[200px]"})]}),E=f.useMemo(()=>t?w:u.jsxs(u.Fragment,{children:[u.jsx("h1",{className:"text-[30px] font-semibold leading-[1]",children:o.name}),!s&&u.jsx("p",{className:"text-[16px] leading-[1] font-[500]",children:Ra(y)}),u.jsxs("p",{className:"hidden md:block opacity-60 leading-[1]",children:["created by ",o.by]})]}),[t,o]),S=f.useMemo(()=>{if(t)return u.jsx(u.Fragment,{});switch(e){case"my-playlist":case"dashboard-playlist":return u.jsxs(u.Fragment,{children:[u.jsxs(Y,{onClick:g,className:`rounded-full px-[20px] py-[6px] ${r.content_bg} ${!o.song_ids.length&&"opacity-60 pointer-events-none"}`,children:[u.jsx(C_,{className:"mr-[5px] w-[22px]"}),"Play"]}),u.jsx(Y,{onClick:()=>c("delete"),className:`p-[8px] rounded-full ${r.content_hover_bg} bg-${r.alpha}`,children:u.jsx(yh,{className:"w-[22px]"})}),u.jsx(Y,{onClick:()=>c("edit"),className:`p-[8px] rounded-full ${r.content_hover_bg} bg-${r.alpha}`,children:u.jsx(II,{className:"w-[22px]"})})]});case"admin-playlist":return u.jsxs(Y,{onClick:g,className:`rounded-full px-[20px] py-[6px] ${r.content_bg} ${!o.song_ids.length&&"opacity-60 pointer-events-none"}`,children:[u.jsx(C_,{className:"mr-[5px] w-[22px]"}),"Play"]})}},[t,a]),k=f.useMemo(()=>{switch(l){case"":return u.jsx(u.Fragment,{});case"edit":return u.jsx(bQ,{close:_,playlist:o});case"delete":if(e==="my-playlist")return u.jsx(zr,{loading:m,label:"Delete playlist ?",theme:r,callback:h,close:_});if(e==="dashboard-playlist")return u.jsx(zr,{loading:v,label:"Delete playlist ?",theme:r,callback:p,close:_})}},[l,m,v]),T={container:"w-full space-y-[12px] md:space-y-0 md:space-x-[12px] flex flex-col md:flex-row",playlistInfoContainer:"flex flex-col gap-[12px] md:justify-between",infoTop:"flex justify-center items-center gap-[8px] md:flex-col md:items-start",countSongText:"text-[14px]] font-semibold opacity-[.6] leading-[1]",ctaContainer:"flex justify-center space-x-[12px] md:justify-start"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:T.container,children:[u.jsx("div",{className:"w-full px-[20px] md:w-1/4 md:px-0",children:t?u.jsx(Je,{className:"pt-[100%] rounded-[8px]"}):u.jsx(Vy,{data:o,active:i.song_in===`playlist_${o.id}`,inDetail:!0,theme:r})}),u.jsxs("div",{className:T.playlistInfoContainer,children:[u.jsx("div",{className:T.infoTop,children:E}),u.jsx("div",{className:`${T.ctaContainer} `,children:S})]})]}),!!l&&u.jsx(Hn,{closeModal:_,children:k})]})}function jg({variant:t}){const e=Le(),{theme:n}=ne(),{currentSong:r}=X(be),{from:s}=X(Wr),{currentPlaylist:i,playlistSongs:o}=X(Es),[a,l]=f.useState(""),{setErrorToast:c}=_n(),{deleteSongFromPlaylist:d}=Co(),h=()=>l(""),m=(x,g)=>{const w=`playlist_${i.id}`;(r.id!==x.id||r.song_in!==w)&&(e(vn({...x,currentIndex:g,song_in:w})),(s.length>1||s[0]!=w)&&e(bu({songs:o})))},p=async x=>{try{await d(x)}catch(g){console.log(g),c({})}},v=f.useMemo(()=>{if(!o.length)return u.jsx(u.Fragment,{});switch(t){case"admin-playlist":return u.jsx(Wc,{variant:"admin-playlist",children:u.jsxs("p",{className:"font-[500] opacity-[.5]",children:[o.length," Songs"]})});case"my-playlist":case"dashboard-playlist":return u.jsx(Wc,{variant:"my-playlist",children:u.jsxs("p",{className:"font-[500] opacity-[.5]",children:[o.length," Songs"]})})}},[i,o]),y=f.useMemo(()=>{switch(t){case"admin-playlist":return u.jsx(vs,{variant:"admin-playlist",songs:o,handleSetSong:m,activeExtend:r.song_in.includes(i.id)});case"my-playlist":case"dashboard-playlist":return u.jsxs(u.Fragment,{children:[u.jsx(vs,{variant:t,songs:o,handleSetSong:m,activeExtend:r.song_in.includes(i.id),deleteFromPlaylist:p}),u.jsx("div",{className:"flex justify-center mt-[20px]",children:u.jsxs(Y,{onClick:()=>l("add-song"),className:`${n.content_bg} rounded-full`,variant:"primary",children:[u.jsx(Vs,{className:"w-[24px] mr-[5px]"}),"Add song"]})})]})}},[i,o,r]),_=f.useMemo(()=>{switch(a){case"":return u.jsx(u.Fragment,{});case"add-song":return u.jsx(VG,{close:h,playlistSongs:o})}},[a,o,i]);return u.jsxs(Jm,{children:[v,y,!!a&&u.jsx(Hn,{closeModal:h,children:_})]})}function UN(){const{currentPlaylist:t}=X(Es),{loading:e}=KG(),n=zn(),r=f.useMemo(()=>n.pathname.includes("/dashboard/playlist"),[n]),s=f.useMemo(()=>r?u.jsx(Ng,{loading:e,type:"dashboard-playlist"}):t.by==="admin"?u.jsx(Ng,{loading:e,type:"admin-playlist"}):u.jsx(Ng,{loading:e,type:"my-playlist"}),[e]),i=f.useMemo(()=>e?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(Je,{className:"h-[20px] w-[90px]"})}),Hf]}):r?u.jsx(jg,{variant:"dashboard-playlist"}):t.by==="admin"?u.jsx(jg,{variant:"admin-playlist"}):u.jsx(jg,{variant:"my-playlist"}),[e]);return u.jsxs("div",{className:"min-h-screen",children:[u.jsx($N,{}),s,u.jsx("div",{className:"pb-[50px] mt-[20px]",children:i})]})}const TQ=["mine","favorite"];function kQ({initialLoading:t}){const e=Le(),{theme:n}=ne(),{user:r}=pt(),{userSongs:s}=lt(),{currentSong:i}=X(be),{from:o}=X(Wr),[a,l]=f.useState("mine"),[c,d]=f.useState([]),[h,m]=f.useState(!1),{tempSongs:p}=Km(),v=f.useMemo(()=>t?0:p.length+s.length,[p,s,t]),y=async()=>{if(r){if(!r.like_song_ids.length)return d([]);try{const g=Si(rl(_s,"songs"),bi("id","in",r.like_song_ids)),w=await Ti(g);let E=!1,S=[];if(w.docs.length){const k=w.docs.map(T=>({...T.data(),song_in:"favorite"}));if(d(k),c.length<r.like_song_ids.length){const T=k.map(b=>b.id);E=!0,S=T}}else r.like_song_ids&&(E=!0,S=[]);E&&await xn({collection:"users",data:{like_song_ids:S},id:r.email,msg:">>> api: update user like song ids"})}catch{console.log("error")}finally{m(!1)}}},_=async g=>{l(g),m(!0),g==="favorite"?await y():(await dx(300),m(!1))},x=(g,w)=>{(o.length>1||o[0]!=g.song_in)&&e(bu({songs:s})),(i.id!==g.id||i.song_in!=="user")&&e(vn({...g,currentIndex:w}))};return u.jsxs(u.Fragment,{children:[u.jsx(Wc,{variant:"my-songs",children:t?u.jsx(u.Fragment,{children:u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(Je,{className:"h-[20px] w-[90px]"})})}):u.jsxs("p",{className:"font-[500] opacity-[.5]",children:[v," Songs"]})}),u.jsx("div",{className:"flex items-center space-x-[10px] py-[10px]",children:TQ.map((g,w)=>{const E=a===g;return u.jsx("button",{onClick:()=>_(g),className:`text-[14px] font-[500] px-[10px] 
                        ${n.content_border} border py-[4px] rounded-[99px] ${E?n.content_bg:""}
                    `,children:g==="mine"?"My songs":"Favorite"},w)})}),u.jsxs("div",{className:"min-h-[50vh]",children:[(t||h)&&Hf,!t&&!h&&u.jsx(u.Fragment,{children:a==="mine"&&!!v&&u.jsxs(u.Fragment,{children:[u.jsx(vs,{variant:"my-songs",handleSetSong:x,activeExtend:i.song_in==="user"||i.song_in==="favorite",songs:s,tempSongs:p}),u.jsx(vs,{songs:p,variant:"uploading"})]})})]})]})}function IQ(){const{theme:t}=ne(),{loading:e,user:n}=pt(),{currentSong:r}=X(be),{userPlaylists:s}=lt(),{status:i}=Km(),o=wn(),{loading:a,errorMsg:l,initial:c}=Xm({});return f.useEffect(()=>{e||n&&(n.email||(o(Nt.Home),console.log(">>> navigate to home")))},[e,c]),l?u.jsx("h1",{children:l}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px] ",children:[window.innerWidth<800&&u.jsx($N,{to:""}),u.jsx("h3",{className:"text-[24px] font-bold mb-[14px]",children:"Playlist"}),u.jsx(i1,{activeCondition:!!r.song_in,loading:a,playlist:s,location:"my-songs"})]}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-[24px] font-bold",children:"Songs"}),u.jsxs("label",{className:`${t.content_bg} ${i==="uploading"||a?"opacity-60 pointer-events-none":""} items-center hover:opacity-60 rounded-full flex px-[16px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(FG,{className:"w-[20px] mr-[5px]"}),"Upload"]})]}),u.jsxs(Jm,{children:[l&&u.jsx("p",{children:"Some thing went wrong"}),!l&&u.jsx(kQ,{initialLoading:a})]})]})]})}function CQ(){const{theme:t}=ne(),{user:e,loading:n}=pt(),[r,s]=f.useState(),[i,o]=f.useState({base:"",real_time:[],id:""}),a=f.useRef(null),l=f.useRef(!1),c=Nf(),d=wn(),h=async()=>{try{const m=await Va({collection:"songs",id:c==null?void 0:c.id,msg:">>> api: get song doc"});if(!m.exists()){d("/dashboard");return}const p=m.data();if(p.lyric_id){const v=await Va({collection:"lyrics",id:p.lyric_id});if(v.exists()){const y=v.data();o(y)}}s(p)}catch(m){console.log({message:m})}};return f.useEffect(()=>{if(!n){if(!e)return d(Nt.Home);l.current||(l.current=!0,h())}},[]),u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsx("audio",{ref:a,src:r&&r.song_url,className:"hidden"}),r&&u.jsx(u.Fragment,{children:u.jsx(jN,{admin:!0,lyric:i,audioRef:a,theme:t,song:r})})]})}function AQ(){const{theme:t}=ne();return u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.container} ${t.type==="dark"?"text-white":"text-black"}`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Page Not found"}),u.jsx(Zs,{to:"/",className:`${t.content_bg} font-bold  text-[#fff] mt-[20px] rounded-full flex px-[20px] py-[4px] cursor-pointer`,children:"Go home"})," "]})}function RQ(){const{theme:t}=ne(),e=wn(),n=async()=>{await aC(hi),e("/login")};return u.jsxs("div",{className:`${t.container} flex flex-col justify-center items-center min-h-screen`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Unauthorized"}),u.jsx(Y,{onClick:n,variant:"primary",size:"normal",className:`${t.content_bg} font-bold text-[20px]  text-[#fff] rounded-full mt-[20px]`,children:"Exit"})]})}function PQ(){var a,l;const[t]=Eu(hi),{logIn:e}=Tu(),{theme:n}=ne(),r=wn(),s=zn(),i=((l=(a=s==null?void 0:s.state)==null?void 0:a.from)==null?void 0:l.pathname)||"/dashboard",o=async()=>{try{await e()}catch(c){console.log(c)}};return f.useEffect(()=>{if(t!=null&&t.email){r(i,{replace:!0});return}console.log("run effect")},[t]),u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${n.container} ${n.type==="dark"?"text-white":"text-black"}`,children:[u.jsx(Y,{onClick:o,variant:"default",size:"normal",className:`${n.content_bg} font-bold text-[#fff] text-[30px] rounded-full`,children:"Login with google"})," "]})}const Nt={Home:"/",Dashboard:"/dashboard",DashboardPlaylist:"/dashboard/playlist/:id",DashboardEdit:"/dashboard/edit/:id",MySongs:"/mysongs",Favorite:"/favorite",Playlist:"/playlist/:id",Edit:"/mysongs/edit/:id"},NQ=[{path:Nt.Home,component:wQ,layout:""},{path:Nt.MySongs,component:IQ,layout:""},{path:Nt.Playlist,component:UN,layout:""},{path:Nt.Edit,component:_Q,layout:""}],jQ=[{path:Nt.Dashboard,component:SQ,layout:Pg},{path:Nt.DashboardPlaylist,component:UN,layout:Pg},{path:Nt.DashboardEdit,component:CQ,layout:Pg}];function DQ(){const t={container:"my-[30px] flex flex-col md:flex-row md:justify-between items-start",icon:"w-[26px] sm:w-[20px] scale-[1] hover:scale-[1.1] transition linear ",copyRightText:"text-[14px]"};return u.jsxs("div",{className:`${t.container}`,children:[u.jsxs("p",{className:t.copyRightText,children:["Make with Make with ❤️ by datnh ",u.jsx("br",{})," © All rights no reserved ¯\\_(ツ)_/¯"]}),u.jsxs("div",{className:"flex mt-[20px] md:mt-0 space-x-[10px]",children:[u.jsx("a",{href:"https://facebook.com/DAtdz06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"})})}),u.jsx("a",{href:"https://www.linkedin.com/in/dat-nguyen-9371a926a",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"})})}),u.jsx("a",{href:"https://github.com/d4t06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 496 512",fill:"currentColor",children:u.jsx("path",{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})})})]})]})}const Wb=({children:t})=>{const{theme:e}=ne(),n=zn(),r=f.useMemo(()=>n.pathname.includes("edit"),[n]),s=f.useRef(null),i={container:` main-container sm:overflow-auto no-scrollbar main-content w-full ${r?"":"min-h-[100vh] pb-[90px]"} max-[549px]:h-full `,content:"px-[40px] max-[549px]:px-[15px] mt-[60px]",page:`flex min-h-[100vh] sm:h-[100vh] sm:overflow-hidden ${e.type==="dark"?"text-white":"text-[#333]"} ${e.container}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:i.page,children:[window.innerWidth>=800&&u.jsx(JX,{}),u.jsxs("div",{ref:s,className:i.container,children:[window.innerWidth>=800&&u.jsx(ZX,{contentRef:s}),u.jsxs("div",{className:i.content,children:[t,u.jsx(DQ,{})]})]}),u.jsx(ON,{})]}),u.jsx(zN,{})]})},OQ="/HD-MP3/assets/loading-b1210647.gif";function MQ({allowedRole:t}){const{user:e,loading:n}=pt(),{theme:r}=ne();return n?u.jsx("div",{className:`min-h-screen flex flex-col items-center justify-center ${r.container}`,children:u.jsx("img",{className:"w-[150px]",src:OQ,alt:""})}):e&&(t!=null&&t.find(s=>e.role===s))||!t.length?u.jsx(mI,{}):u.jsx(lj,{replace:!0,to:"/login"})}function LQ(){const{setUser:t}=pt(),[e,n]=Eu(hi);return f.useEffect(()=>{if(n)return;(async()=>{try{if(!e||!e.email)return t({type:"set-user",user:null});const i=(await Va({collection:"users",id:e.email,msg:">>> api: get auth info"})).data();Object.assign(i,{email:e.email,display_name:e.displayName,photoURL:e.photoURL,like_song_ids:i.like_song_ids||[],playlist_ids:i.playlist_ids||[],play_history:i.play_history||[]}),t({type:"set-user",user:i})}catch(s){console.log({message:s})}})()},[n,e]),u.jsx(mI,{})}function FQ(){return u.jsxs(u.Fragment,{children:[u.jsx(gj,{children:u.jsxs(uj,{children:[u.jsx(Cs,{path:"/login",element:u.jsx(PQ,{})}),u.jsx(Cs,{path:"/unauthorized",element:u.jsx(RQ,{})}),u.jsx(Cs,{path:"*",element:u.jsx(AQ,{})}),u.jsxs(Cs,{element:u.jsx(LQ,{}),children:[NQ.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=Wb,u.jsx(Cs,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)}),u.jsx(Cs,{element:u.jsx(MQ,{allowedRole:["ADMIN"]}),children:jQ.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=Wb,u.jsx(Cs,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)})})]})]})}),u.jsx(dQ,{autoClose:!0})]})}const $Q=Oq({reducer:{currentSong:Kq,currentPlaylist:fG,playStatus:HG,songQueue:Zq}});Dg.createRoot(document.getElementById("root")).render(u.jsx(nT.StrictMode,{children:u.jsx(rG,{children:u.jsx(W6,{children:u.jsx(u$,{children:u.jsx(oG,{children:u.jsx(uG,{children:u.jsx(tq,{store:$Q,children:u.jsx(FQ,{})})})})})})})}));
