function z4(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Lb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fb={exports:{}},of={},$b={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fc=Symbol.for("react.element"),B4=Symbol.for("react.portal"),V4=Symbol.for("react.fragment"),U4=Symbol.for("react.strict_mode"),W4=Symbol.for("react.profiler"),H4=Symbol.for("react.provider"),q4=Symbol.for("react.context"),G4=Symbol.for("react.forward_ref"),K4=Symbol.for("react.suspense"),X4=Symbol.for("react.memo"),Q4=Symbol.for("react.lazy"),Z1=Symbol.iterator;function Y4(t){return t===null||typeof t!="object"?null:(t=Z1&&t[Z1]||t["@@iterator"],typeof t=="function"?t:null)}var zb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bb=Object.assign,Vb={};function Oa(t,e,n){this.props=t,this.context=e,this.refs=Vb,this.updater=n||zb}Oa.prototype.isReactComponent={};Oa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Oa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ub(){}Ub.prototype=Oa.prototype;function Dy(t,e,n){this.props=t,this.context=e,this.refs=Vb,this.updater=n||zb}var jy=Dy.prototype=new Ub;jy.constructor=Dy;Bb(jy,Oa.prototype);jy.isPureReactComponent=!0;var ew=Array.isArray,Wb=Object.prototype.hasOwnProperty,Oy={current:null},Hb={key:!0,ref:!0,__self:!0,__source:!0};function qb(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Wb.call(e,r)&&!Hb.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Fc,type:t,key:s,ref:o,props:i,_owner:Oy.current}}function J4(t,e){return{$$typeof:Fc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function My(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fc}function Z4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var tw=/\/+/g;function Hm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Z4(""+t.key):e.toString(36)}function ud(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Fc:case B4:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Hm(o,0):r,ew(i)?(n="",t!=null&&(n=t.replace(tw,"$&/")+"/"),ud(i,e,n,"",function(c){return c})):i!=null&&(My(i)&&(i=J4(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(tw,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",ew(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Hm(s,a);o+=ud(s,e,n,l,i)}else if(l=Y4(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Hm(s,a++),o+=ud(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Eu(t,e,n){if(t==null)return t;var r=[],i=0;return ud(t,r,"","",function(s){return e.call(n,s,i++)}),r}function eN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rn={current:null},dd={transition:null},tN={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:dd,ReactCurrentOwner:Oy};ye.Children={map:Eu,forEach:function(t,e,n){Eu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Eu(t,function(){e++}),e},toArray:function(t){return Eu(t,function(e){return e})||[]},only:function(t){if(!My(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=Oa;ye.Fragment=V4;ye.Profiler=W4;ye.PureComponent=Dy;ye.StrictMode=U4;ye.Suspense=K4;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tN;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Bb({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Oy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Wb.call(e,l)&&!Hb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Fc,type:t.type,key:i,ref:s,props:r,_owner:o}};ye.createContext=function(t){return t={$$typeof:q4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:H4,_context:t},t.Consumer=t};ye.createElement=qb;ye.createFactory=function(t){var e=qb.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:G4,render:t}};ye.isValidElement=My;ye.lazy=function(t){return{$$typeof:Q4,_payload:{_status:-1,_result:t},_init:eN}};ye.memo=function(t,e){return{$$typeof:X4,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=dd.transition;dd.transition={};try{t()}finally{dd.transition=e}};ye.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ye.useCallback=function(t,e){return rn.current.useCallback(t,e)};ye.useContext=function(t){return rn.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return rn.current.useDeferredValue(t)};ye.useEffect=function(t,e){return rn.current.useEffect(t,e)};ye.useId=function(){return rn.current.useId()};ye.useImperativeHandle=function(t,e,n){return rn.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return rn.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return rn.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return rn.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return rn.current.useReducer(t,e,n)};ye.useRef=function(t){return rn.current.useRef(t)};ye.useState=function(t){return rn.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return rn.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return rn.current.useTransition()};ye.version="18.2.0";$b.exports=ye;var f=$b.exports;const Gb=Lb(f),Ly=z4({__proto__:null,default:Gb},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nN=f,rN=Symbol.for("react.element"),iN=Symbol.for("react.fragment"),sN=Object.prototype.hasOwnProperty,oN=nN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aN={key:!0,ref:!0,__self:!0,__source:!0};function Kb(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)sN.call(e,r)&&!aN.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:rN,type:t,key:s,ref:o,props:i,_owner:oN.current}}of.Fragment=iN;of.jsx=Kb;of.jsxs=Kb;Fb.exports=of;var u=Fb.exports;var Eg={},Xb={exports:{}},Pn={},Qb={exports:{}},Yb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,$){var H=j.length;j.push($);e:for(;0<H;){var N=H-1>>>1,U=j[N];if(0<i(U,$))j[N]=$,j[H]=U,H=N;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var $=j[0],H=j.pop();if(H!==$){j[0]=H;e:for(var N=0,U=j.length,X=U>>>1;N<X;){var ie=2*(N+1)-1,oe=j[ie],de=ie+1,me=j[de];if(0>i(oe,H))de<U&&0>i(me,oe)?(j[N]=me,j[de]=H,N=de):(j[N]=oe,j[ie]=H,N=ie);else if(de<U&&0>i(me,H))j[N]=me,j[de]=H,N=de;else break e}}return $}function i(j,$){var H=j.sortIndex-$.sortIndex;return H!==0?H:j.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,m=3,p=!1,y=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(j){for(var $=n(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=j)r(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function E(j){if(x=!1,w(j),!y)if(n(l)!==null)y=!0,J(S);else{var $=n(c);$!==null&&ke(E,$.startTime-j)}}function S(j,$){y=!1,x&&(x=!1,v(b),b=-1),p=!0;var H=m;try{for(w($),h=n(l);h!==null&&(!(h.expirationTime>$)||j&&!L());){var N=h.callback;if(typeof N=="function"){h.callback=null,m=h.priorityLevel;var U=N(h.expirationTime<=$);$=t.unstable_now(),typeof U=="function"?h.callback=U:h===n(l)&&r(l),w($)}else r(l);h=n(l)}if(h!==null)var X=!0;else{var ie=n(c);ie!==null&&ke(E,ie.startTime-$),X=!1}return X}finally{h=null,m=H,p=!1}}var T=!1,k=null,b=-1,D=5,I=-1;function L(){return!(t.unstable_now()-I<D)}function W(){if(k!==null){var j=t.unstable_now();I=j;var $=!0;try{$=k(!0,j)}finally{$?F():(T=!1,k=null)}}else T=!1}var F;if(typeof g=="function")F=function(){g(W)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,ue=te.port2;te.port1.onmessage=W,F=function(){ue.postMessage(null)}}else F=function(){_(W,0)};function J(j){k=j,T||(T=!0,F())}function ke(j,$){b=_(function(){j(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,J(S))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var H=m;m=$;try{return j()}finally{m=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,$){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var H=m;m=j;try{return $()}finally{m=H}},t.unstable_scheduleCallback=function(j,$,H){var N=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?N+H:N):H=N,j){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=H+U,j={id:d++,callback:$,priorityLevel:j,startTime:H,expirationTime:U,sortIndex:-1},H>N?(j.sortIndex=H,e(c,j),n(l)===null&&j===n(c)&&(x?(v(b),b=-1):x=!0,ke(E,H-N))):(j.sortIndex=U,e(l,j),y||p||(y=!0,J(S))),j},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(j){var $=m;return function(){var H=m;m=$;try{return j.apply(this,arguments)}finally{m=H}}}})(Yb);Qb.exports=Yb;var lN=Qb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jb=f,In=lN;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zb=new Set,Ul={};function ho(t,e){da(t,e),da(t+"Capture",e)}function da(t,e){for(Ul[t]=e,t=0;t<e.length;t++)Zb.add(e[t])}var ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sg=Object.prototype.hasOwnProperty,cN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nw={},rw={};function uN(t){return Sg.call(rw,t)?!0:Sg.call(nw,t)?!1:cN.test(t)?rw[t]=!0:(nw[t]=!0,!1)}function dN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function hN(t,e,n,r){if(e===null||typeof e>"u"||dN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Nt[t]=new sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Nt[e]=new sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Nt[t]=new sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Nt[t]=new sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Nt[t]=new sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Nt[t]=new sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Nt[t]=new sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Nt[t]=new sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Nt[t]=new sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Fy=/[\-:]([a-z])/g;function $y(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Fy,$y);Nt[e]=new sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Fy,$y);Nt[e]=new sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Fy,$y);Nt[e]=new sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Nt[t]=new sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Nt.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Nt[t]=new sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function zy(t,e,n,r){var i=Nt.hasOwnProperty(e)?Nt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(hN(e,n,i,r)&&(n=null),r||i===null?uN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var mi=Jb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Su=Symbol.for("react.element"),Oo=Symbol.for("react.portal"),Mo=Symbol.for("react.fragment"),By=Symbol.for("react.strict_mode"),bg=Symbol.for("react.profiler"),ek=Symbol.for("react.provider"),tk=Symbol.for("react.context"),Vy=Symbol.for("react.forward_ref"),kg=Symbol.for("react.suspense"),Tg=Symbol.for("react.suspense_list"),Uy=Symbol.for("react.memo"),bi=Symbol.for("react.lazy"),nk=Symbol.for("react.offscreen"),iw=Symbol.iterator;function Za(t){return t===null||typeof t!="object"?null:(t=iw&&t[iw]||t["@@iterator"],typeof t=="function"?t:null)}var qe=Object.assign,qm;function fl(t){if(qm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);qm=e&&e[1]||""}return`
`+qm+t}var Gm=!1;function Km(t,e){if(!t||Gm)return"";Gm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Gm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?fl(t):""}function fN(t){switch(t.tag){case 5:return fl(t.type);case 16:return fl("Lazy");case 13:return fl("Suspense");case 19:return fl("SuspenseList");case 0:case 2:case 15:return t=Km(t.type,!1),t;case 11:return t=Km(t.type.render,!1),t;case 1:return t=Km(t.type,!0),t;default:return""}}function Ig(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mo:return"Fragment";case Oo:return"Portal";case bg:return"Profiler";case By:return"StrictMode";case kg:return"Suspense";case Tg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tk:return(t.displayName||"Context")+".Consumer";case ek:return(t._context.displayName||"Context")+".Provider";case Vy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Uy:return e=t.displayName||null,e!==null?e:Ig(t.type)||"Memo";case bi:e=t._payload,t=t._init;try{return Ig(t(e))}catch{}}return null}function mN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ig(e);case 8:return e===By?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pN(t){var e=rk(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bu(t){t._valueTracker||(t._valueTracker=pN(t))}function ik(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=rk(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Md(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Cg(t,e){var n=e.checked;return qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function sw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function sk(t,e){e=e.checked,e!=null&&zy(t,"checked",e,!1)}function Ag(t,e){sk(t,e);var n=Zi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Rg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Rg(t,e.type,Zi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ow(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Rg(t,e,n){(e!=="number"||Md(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ml=Array.isArray;function Qo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Pg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function aw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(O(92));if(ml(n)){if(1<n.length)throw Error(O(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zi(n)}}function ok(t,e){var n=Zi(e.value),r=Zi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function lw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ak(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ng(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ak(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ku,lk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ku=ku||document.createElement("div"),ku.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ku.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var bl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gN=["Webkit","ms","Moz","O"];Object.keys(bl).forEach(function(t){gN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bl[e]=bl[t]})});function ck(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||bl.hasOwnProperty(t)&&bl[t]?(""+e).trim():e+"px"}function uk(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=ck(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var yN=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dg(t,e){if(e){if(yN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function jg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Og=null;function Wy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mg=null,Yo=null,Jo=null;function cw(t){if(t=Bc(t)){if(typeof Mg!="function")throw Error(O(280));var e=t.stateNode;e&&(e=df(e),Mg(t.stateNode,t.type,e))}}function dk(t){Yo?Jo?Jo.push(t):Jo=[t]:Yo=t}function hk(){if(Yo){var t=Yo,e=Jo;if(Jo=Yo=null,cw(t),e)for(t=0;t<e.length;t++)cw(e[t])}}function fk(t,e){return t(e)}function mk(){}var Xm=!1;function pk(t,e,n){if(Xm)return t(e,n);Xm=!0;try{return fk(t,e,n)}finally{Xm=!1,(Yo!==null||Jo!==null)&&(mk(),hk())}}function Hl(t,e){var n=t.stateNode;if(n===null)return null;var r=df(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var Lg=!1;if(ii)try{var el={};Object.defineProperty(el,"passive",{get:function(){Lg=!0}}),window.addEventListener("test",el,el),window.removeEventListener("test",el,el)}catch{Lg=!1}function vN(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var kl=!1,Ld=null,Fd=!1,Fg=null,xN={onError:function(t){kl=!0,Ld=t}};function wN(t,e,n,r,i,s,o,a,l){kl=!1,Ld=null,vN.apply(xN,arguments)}function _N(t,e,n,r,i,s,o,a,l){if(wN.apply(this,arguments),kl){if(kl){var c=Ld;kl=!1,Ld=null}else throw Error(O(198));Fd||(Fd=!0,Fg=c)}}function fo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function gk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function uw(t){if(fo(t)!==t)throw Error(O(188))}function EN(t){var e=t.alternate;if(!e){if(e=fo(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return uw(i),t;if(s===r)return uw(i),e;s=s.sibling}throw Error(O(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function yk(t){return t=EN(t),t!==null?vk(t):null}function vk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=vk(t);if(e!==null)return e;t=t.sibling}return null}var xk=In.unstable_scheduleCallback,dw=In.unstable_cancelCallback,SN=In.unstable_shouldYield,bN=In.unstable_requestPaint,tt=In.unstable_now,kN=In.unstable_getCurrentPriorityLevel,Hy=In.unstable_ImmediatePriority,wk=In.unstable_UserBlockingPriority,$d=In.unstable_NormalPriority,TN=In.unstable_LowPriority,_k=In.unstable_IdlePriority,af=null,Ir=null;function IN(t){if(Ir&&typeof Ir.onCommitFiberRoot=="function")try{Ir.onCommitFiberRoot(af,t,void 0,(t.current.flags&128)===128)}catch{}}var or=Math.clz32?Math.clz32:RN,CN=Math.log,AN=Math.LN2;function RN(t){return t>>>=0,t===0?32:31-(CN(t)/AN|0)|0}var Tu=64,Iu=4194304;function pl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function zd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=pl(a):(s&=o,s!==0&&(r=pl(s)))}else o=n&~i,o!==0?r=pl(o):s!==0&&(r=pl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-or(e),i=1<<n,r|=t[n],e&=~i;return r}function PN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-or(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=PN(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function $g(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ek(){var t=Tu;return Tu<<=1,!(Tu&4194240)&&(Tu=64),t}function Qm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $c(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-or(e),t[e]=n}function DN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-or(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function qy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-or(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ie=0;function Sk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bk,Gy,kk,Tk,Ik,zg=!1,Cu=[],$i=null,zi=null,Bi=null,ql=new Map,Gl=new Map,Ti=[],jN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hw(t,e){switch(t){case"focusin":case"focusout":$i=null;break;case"dragenter":case"dragleave":zi=null;break;case"mouseover":case"mouseout":Bi=null;break;case"pointerover":case"pointerout":ql.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gl.delete(e.pointerId)}}function tl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Bc(e),e!==null&&Gy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function ON(t,e,n,r,i){switch(e){case"focusin":return $i=tl($i,t,e,n,r,i),!0;case"dragenter":return zi=tl(zi,t,e,n,r,i),!0;case"mouseover":return Bi=tl(Bi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ql.set(s,tl(ql.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Gl.set(s,tl(Gl.get(s)||null,t,e,n,r,i)),!0}return!1}function Ck(t){var e=As(t.target);if(e!==null){var n=fo(e);if(n!==null){if(e=n.tag,e===13){if(e=gk(n),e!==null){t.blockedOn=e,Ik(t.priority,function(){kk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Bg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Og=r,n.target.dispatchEvent(r),Og=null}else return e=Bc(n),e!==null&&Gy(e),t.blockedOn=n,!1;e.shift()}return!0}function fw(t,e,n){hd(t)&&n.delete(e)}function MN(){zg=!1,$i!==null&&hd($i)&&($i=null),zi!==null&&hd(zi)&&(zi=null),Bi!==null&&hd(Bi)&&(Bi=null),ql.forEach(fw),Gl.forEach(fw)}function nl(t,e){t.blockedOn===e&&(t.blockedOn=null,zg||(zg=!0,In.unstable_scheduleCallback(In.unstable_NormalPriority,MN)))}function Kl(t){function e(i){return nl(i,t)}if(0<Cu.length){nl(Cu[0],t);for(var n=1;n<Cu.length;n++){var r=Cu[n];r.blockedOn===t&&(r.blockedOn=null)}}for($i!==null&&nl($i,t),zi!==null&&nl(zi,t),Bi!==null&&nl(Bi,t),ql.forEach(e),Gl.forEach(e),n=0;n<Ti.length;n++)r=Ti[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ti.length&&(n=Ti[0],n.blockedOn===null);)Ck(n),n.blockedOn===null&&Ti.shift()}var Zo=mi.ReactCurrentBatchConfig,Bd=!0;function LN(t,e,n,r){var i=Ie,s=Zo.transition;Zo.transition=null;try{Ie=1,Ky(t,e,n,r)}finally{Ie=i,Zo.transition=s}}function FN(t,e,n,r){var i=Ie,s=Zo.transition;Zo.transition=null;try{Ie=4,Ky(t,e,n,r)}finally{Ie=i,Zo.transition=s}}function Ky(t,e,n,r){if(Bd){var i=Bg(t,e,n,r);if(i===null)op(t,e,r,Vd,n),hw(t,r);else if(ON(i,t,e,n,r))r.stopPropagation();else if(hw(t,r),e&4&&-1<jN.indexOf(t)){for(;i!==null;){var s=Bc(i);if(s!==null&&bk(s),s=Bg(t,e,n,r),s===null&&op(t,e,r,Vd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else op(t,e,r,null,n)}}var Vd=null;function Bg(t,e,n,r){if(Vd=null,t=Wy(r),t=As(t),t!==null)if(e=fo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=gk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vd=t,null}function Ak(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kN()){case Hy:return 1;case wk:return 4;case $d:case TN:return 16;case _k:return 536870912;default:return 16}default:return 16}}var ji=null,Xy=null,fd=null;function Rk(){if(fd)return fd;var t,e=Xy,n=e.length,r,i="value"in ji?ji.value:ji.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return fd=i.slice(t,1<r?1-r:void 0)}function md(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Au(){return!0}function mw(){return!1}function Nn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Au:mw,this.isPropagationStopped=mw,this}return qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Au)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Au)},persist:function(){},isPersistent:Au}),e}var Ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qy=Nn(Ma),zc=qe({},Ma,{view:0,detail:0}),$N=Nn(zc),Ym,Jm,rl,lf=qe({},zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==rl&&(rl&&t.type==="mousemove"?(Ym=t.screenX-rl.screenX,Jm=t.screenY-rl.screenY):Jm=Ym=0,rl=t),Ym)},movementY:function(t){return"movementY"in t?t.movementY:Jm}}),pw=Nn(lf),zN=qe({},lf,{dataTransfer:0}),BN=Nn(zN),VN=qe({},zc,{relatedTarget:0}),Zm=Nn(VN),UN=qe({},Ma,{animationName:0,elapsedTime:0,pseudoElement:0}),WN=Nn(UN),HN=qe({},Ma,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qN=Nn(HN),GN=qe({},Ma,{data:0}),gw=Nn(GN),KN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=QN[t])?!!e[t]:!1}function Yy(){return YN}var JN=qe({},zc,{key:function(t){if(t.key){var e=KN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=md(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?XN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yy,charCode:function(t){return t.type==="keypress"?md(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?md(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ZN=Nn(JN),e3=qe({},lf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yw=Nn(e3),t3=qe({},zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yy}),n3=Nn(t3),r3=qe({},Ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),i3=Nn(r3),s3=qe({},lf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),o3=Nn(s3),a3=[9,13,27,32],Jy=ii&&"CompositionEvent"in window,Tl=null;ii&&"documentMode"in document&&(Tl=document.documentMode);var l3=ii&&"TextEvent"in window&&!Tl,Pk=ii&&(!Jy||Tl&&8<Tl&&11>=Tl),vw=String.fromCharCode(32),xw=!1;function Nk(t,e){switch(t){case"keyup":return a3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lo=!1;function c3(t,e){switch(t){case"compositionend":return Dk(e);case"keypress":return e.which!==32?null:(xw=!0,vw);case"textInput":return t=e.data,t===vw&&xw?null:t;default:return null}}function u3(t,e){if(Lo)return t==="compositionend"||!Jy&&Nk(t,e)?(t=Rk(),fd=Xy=ji=null,Lo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Pk&&e.locale!=="ko"?null:e.data;default:return null}}var d3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ww(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!d3[t.type]:e==="textarea"}function jk(t,e,n,r){dk(r),e=Ud(e,"onChange"),0<e.length&&(n=new Qy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Il=null,Xl=null;function h3(t){Hk(t,0)}function cf(t){var e=zo(t);if(ik(e))return t}function f3(t,e){if(t==="change")return e}var Ok=!1;if(ii){var ep;if(ii){var tp="oninput"in document;if(!tp){var _w=document.createElement("div");_w.setAttribute("oninput","return;"),tp=typeof _w.oninput=="function"}ep=tp}else ep=!1;Ok=ep&&(!document.documentMode||9<document.documentMode)}function Ew(){Il&&(Il.detachEvent("onpropertychange",Mk),Xl=Il=null)}function Mk(t){if(t.propertyName==="value"&&cf(Xl)){var e=[];jk(e,Xl,t,Wy(t)),pk(h3,e)}}function m3(t,e,n){t==="focusin"?(Ew(),Il=e,Xl=n,Il.attachEvent("onpropertychange",Mk)):t==="focusout"&&Ew()}function p3(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cf(Xl)}function g3(t,e){if(t==="click")return cf(e)}function y3(t,e){if(t==="input"||t==="change")return cf(e)}function v3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var lr=typeof Object.is=="function"?Object.is:v3;function Ql(t,e){if(lr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Sg.call(e,i)||!lr(t[i],e[i]))return!1}return!0}function Sw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bw(t,e){var n=Sw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sw(n)}}function Lk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Lk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Fk(){for(var t=window,e=Md();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Md(t.document)}return e}function Zy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function x3(t){var e=Fk(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Lk(n.ownerDocument.documentElement,n)){if(r!==null&&Zy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=bw(n,s);var o=bw(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var w3=ii&&"documentMode"in document&&11>=document.documentMode,Fo=null,Vg=null,Cl=null,Ug=!1;function kw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ug||Fo==null||Fo!==Md(r)||(r=Fo,"selectionStart"in r&&Zy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Cl&&Ql(Cl,r)||(Cl=r,r=Ud(Vg,"onSelect"),0<r.length&&(e=new Qy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Fo)))}function Ru(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $o={animationend:Ru("Animation","AnimationEnd"),animationiteration:Ru("Animation","AnimationIteration"),animationstart:Ru("Animation","AnimationStart"),transitionend:Ru("Transition","TransitionEnd")},np={},$k={};ii&&($k=document.createElement("div").style,"AnimationEvent"in window||(delete $o.animationend.animation,delete $o.animationiteration.animation,delete $o.animationstart.animation),"TransitionEvent"in window||delete $o.transitionend.transition);function uf(t){if(np[t])return np[t];if(!$o[t])return t;var e=$o[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $k)return np[t]=e[n];return t}var zk=uf("animationend"),Bk=uf("animationiteration"),Vk=uf("animationstart"),Uk=uf("transitionend"),Wk=new Map,Tw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hs(t,e){Wk.set(t,e),ho(e,[t])}for(var rp=0;rp<Tw.length;rp++){var ip=Tw[rp],_3=ip.toLowerCase(),E3=ip[0].toUpperCase()+ip.slice(1);hs(_3,"on"+E3)}hs(zk,"onAnimationEnd");hs(Bk,"onAnimationIteration");hs(Vk,"onAnimationStart");hs("dblclick","onDoubleClick");hs("focusin","onFocus");hs("focusout","onBlur");hs(Uk,"onTransitionEnd");da("onMouseEnter",["mouseout","mouseover"]);da("onMouseLeave",["mouseout","mouseover"]);da("onPointerEnter",["pointerout","pointerover"]);da("onPointerLeave",["pointerout","pointerover"]);ho("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ho("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ho("onBeforeInput",["compositionend","keypress","textInput","paste"]);ho("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ho("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ho("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S3=new Set("cancel close invalid load scroll toggle".split(" ").concat(gl));function Iw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,_N(r,e,void 0,t),t.currentTarget=null}function Hk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Iw(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Iw(i,a,c),s=l}}}if(Fd)throw t=Fg,Fd=!1,Fg=null,t}function Oe(t,e){var n=e[Kg];n===void 0&&(n=e[Kg]=new Set);var r=t+"__bubble";n.has(r)||(qk(e,t,2,!1),n.add(r))}function sp(t,e,n){var r=0;e&&(r|=4),qk(n,t,r,e)}var Pu="_reactListening"+Math.random().toString(36).slice(2);function Yl(t){if(!t[Pu]){t[Pu]=!0,Zb.forEach(function(n){n!=="selectionchange"&&(S3.has(n)||sp(n,!1,t),sp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pu]||(e[Pu]=!0,sp("selectionchange",!1,e))}}function qk(t,e,n,r){switch(Ak(e)){case 1:var i=LN;break;case 4:i=FN;break;default:i=Ky}n=i.bind(null,e,n,t),i=void 0,!Lg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function op(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=As(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}pk(function(){var c=s,d=Wy(n),h=[];e:{var m=Wk.get(t);if(m!==void 0){var p=Qy,y=t;switch(t){case"keypress":if(md(n)===0)break e;case"keydown":case"keyup":p=ZN;break;case"focusin":y="focus",p=Zm;break;case"focusout":y="blur",p=Zm;break;case"beforeblur":case"afterblur":p=Zm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=pw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=BN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=n3;break;case zk:case Bk:case Vk:p=WN;break;case Uk:p=i3;break;case"scroll":p=$N;break;case"wheel":p=o3;break;case"copy":case"cut":case"paste":p=qN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=yw}var x=(e&4)!==0,_=!x&&t==="scroll",v=x?m!==null?m+"Capture":null:m;x=[];for(var g=c,w;g!==null;){w=g;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,v!==null&&(E=Hl(g,v),E!=null&&x.push(Jl(g,E,w)))),_)break;g=g.return}0<x.length&&(m=new p(m,y,null,n,d),h.push({event:m,listeners:x}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==Og&&(y=n.relatedTarget||n.fromElement)&&(As(y)||y[si]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=c,y=y?As(y):null,y!==null&&(_=fo(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=c),p!==y)){if(x=pw,E="onMouseLeave",v="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(x=yw,E="onPointerLeave",v="onPointerEnter",g="pointer"),_=p==null?m:zo(p),w=y==null?m:zo(y),m=new x(E,g+"leave",p,n,d),m.target=_,m.relatedTarget=w,E=null,As(d)===c&&(x=new x(v,g+"enter",y,n,d),x.target=w,x.relatedTarget=_,E=x),_=E,p&&y)t:{for(x=p,v=y,g=0,w=x;w;w=bo(w))g++;for(w=0,E=v;E;E=bo(E))w++;for(;0<g-w;)x=bo(x),g--;for(;0<w-g;)v=bo(v),w--;for(;g--;){if(x===v||v!==null&&x===v.alternate)break t;x=bo(x),v=bo(v)}x=null}else x=null;p!==null&&Cw(h,m,p,x,!1),y!==null&&_!==null&&Cw(h,_,y,x,!0)}}e:{if(m=c?zo(c):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var S=f3;else if(ww(m))if(Ok)S=y3;else{S=p3;var T=m3}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=g3);if(S&&(S=S(t,c))){jk(h,S,n,d);break e}T&&T(t,m,c),t==="focusout"&&(T=m._wrapperState)&&T.controlled&&m.type==="number"&&Rg(m,"number",m.value)}switch(T=c?zo(c):window,t){case"focusin":(ww(T)||T.contentEditable==="true")&&(Fo=T,Vg=c,Cl=null);break;case"focusout":Cl=Vg=Fo=null;break;case"mousedown":Ug=!0;break;case"contextmenu":case"mouseup":case"dragend":Ug=!1,kw(h,n,d);break;case"selectionchange":if(w3)break;case"keydown":case"keyup":kw(h,n,d)}var k;if(Jy)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Lo?Nk(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(Pk&&n.locale!=="ko"&&(Lo||b!=="onCompositionStart"?b==="onCompositionEnd"&&Lo&&(k=Rk()):(ji=d,Xy="value"in ji?ji.value:ji.textContent,Lo=!0)),T=Ud(c,b),0<T.length&&(b=new gw(b,t,null,n,d),h.push({event:b,listeners:T}),k?b.data=k:(k=Dk(n),k!==null&&(b.data=k)))),(k=l3?c3(t,n):u3(t,n))&&(c=Ud(c,"onBeforeInput"),0<c.length&&(d=new gw("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=k))}Hk(h,e)})}function Jl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ud(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Hl(t,n),s!=null&&r.unshift(Jl(t,s,i)),s=Hl(t,e),s!=null&&r.push(Jl(t,s,i))),t=t.return}return r}function bo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Cw(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Hl(n,s),l!=null&&o.unshift(Jl(n,l,a))):i||(l=Hl(n,s),l!=null&&o.push(Jl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var b3=/\r\n?/g,k3=/\u0000|\uFFFD/g;function Aw(t){return(typeof t=="string"?t:""+t).replace(b3,`
`).replace(k3,"")}function Nu(t,e,n){if(e=Aw(e),Aw(t)!==e&&n)throw Error(O(425))}function Wd(){}var Wg=null,Hg=null;function qg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gg=typeof setTimeout=="function"?setTimeout:void 0,T3=typeof clearTimeout=="function"?clearTimeout:void 0,Rw=typeof Promise=="function"?Promise:void 0,I3=typeof queueMicrotask=="function"?queueMicrotask:typeof Rw<"u"?function(t){return Rw.resolve(null).then(t).catch(C3)}:Gg;function C3(t){setTimeout(function(){throw t})}function ap(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Kl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Kl(e)}function Vi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Pw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var La=Math.random().toString(36).slice(2),vr="__reactFiber$"+La,Zl="__reactProps$"+La,si="__reactContainer$"+La,Kg="__reactEvents$"+La,A3="__reactListeners$"+La,R3="__reactHandles$"+La;function As(t){var e=t[vr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[si]||n[vr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Pw(t);t!==null;){if(n=t[vr])return n;t=Pw(t)}return e}t=n,n=t.parentNode}return null}function Bc(t){return t=t[vr]||t[si],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function df(t){return t[Zl]||null}var Xg=[],Bo=-1;function fs(t){return{current:t}}function Fe(t){0>Bo||(t.current=Xg[Bo],Xg[Bo]=null,Bo--)}function je(t,e){Bo++,Xg[Bo]=t.current,t.current=e}var es={},Wt=fs(es),cn=fs(!1),Hs=es;function ha(t,e){var n=t.type.contextTypes;if(!n)return es;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function un(t){return t=t.childContextTypes,t!=null}function Hd(){Fe(cn),Fe(Wt)}function Nw(t,e,n){if(Wt.current!==es)throw Error(O(168));je(Wt,e),je(cn,n)}function Gk(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(O(108,mN(t)||"Unknown",i));return qe({},n,r)}function qd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||es,Hs=Wt.current,je(Wt,t),je(cn,cn.current),!0}function Dw(t,e,n){var r=t.stateNode;if(!r)throw Error(O(169));n?(t=Gk(t,e,Hs),r.__reactInternalMemoizedMergedChildContext=t,Fe(cn),Fe(Wt),je(Wt,t)):Fe(cn),je(cn,n)}var Hr=null,hf=!1,lp=!1;function Kk(t){Hr===null?Hr=[t]:Hr.push(t)}function P3(t){hf=!0,Kk(t)}function ms(){if(!lp&&Hr!==null){lp=!0;var t=0,e=Ie;try{var n=Hr;for(Ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Hr=null,hf=!1}catch(i){throw Hr!==null&&(Hr=Hr.slice(t+1)),xk(Hy,ms),i}finally{Ie=e,lp=!1}}return null}var Vo=[],Uo=0,Gd=null,Kd=0,Ln=[],Fn=0,qs=null,qr=1,Gr="";function Ss(t,e){Vo[Uo++]=Kd,Vo[Uo++]=Gd,Gd=t,Kd=e}function Xk(t,e,n){Ln[Fn++]=qr,Ln[Fn++]=Gr,Ln[Fn++]=qs,qs=t;var r=qr;t=Gr;var i=32-or(r)-1;r&=~(1<<i),n+=1;var s=32-or(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,qr=1<<32-or(e)+i|n<<i|r,Gr=s+t}else qr=1<<s|n<<i|r,Gr=t}function ev(t){t.return!==null&&(Ss(t,1),Xk(t,1,0))}function tv(t){for(;t===Gd;)Gd=Vo[--Uo],Vo[Uo]=null,Kd=Vo[--Uo],Vo[Uo]=null;for(;t===qs;)qs=Ln[--Fn],Ln[Fn]=null,Gr=Ln[--Fn],Ln[Fn]=null,qr=Ln[--Fn],Ln[Fn]=null}var bn=null,_n=null,Ve=!1,er=null;function Qk(t,e){var n=Bn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function jw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bn=t,_n=Vi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bn=t,_n=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qs!==null?{id:qr,overflow:Gr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bn=t,_n=null,!0):!1;default:return!1}}function Qg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Yg(t){if(Ve){var e=_n;if(e){var n=e;if(!jw(t,e)){if(Qg(t))throw Error(O(418));e=Vi(n.nextSibling);var r=bn;e&&jw(t,e)?Qk(r,n):(t.flags=t.flags&-4097|2,Ve=!1,bn=t)}}else{if(Qg(t))throw Error(O(418));t.flags=t.flags&-4097|2,Ve=!1,bn=t}}}function Ow(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bn=t}function Du(t){if(t!==bn)return!1;if(!Ve)return Ow(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qg(t.type,t.memoizedProps)),e&&(e=_n)){if(Qg(t))throw Yk(),Error(O(418));for(;e;)Qk(t,e),e=Vi(e.nextSibling)}if(Ow(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_n=Vi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_n=null}}else _n=bn?Vi(t.stateNode.nextSibling):null;return!0}function Yk(){for(var t=_n;t;)t=Vi(t.nextSibling)}function fa(){_n=bn=null,Ve=!1}function nv(t){er===null?er=[t]:er.push(t)}var N3=mi.ReactCurrentBatchConfig;function Yn(t,e){if(t&&t.defaultProps){e=qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Xd=fs(null),Qd=null,Wo=null,rv=null;function iv(){rv=Wo=Qd=null}function sv(t){var e=Xd.current;Fe(Xd),t._currentValue=e}function Jg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ea(t,e){Qd=t,rv=Wo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ln=!0),t.firstContext=null)}function Hn(t){var e=t._currentValue;if(rv!==t)if(t={context:t,memoizedValue:e,next:null},Wo===null){if(Qd===null)throw Error(O(308));Wo=t,Qd.dependencies={lanes:0,firstContext:t}}else Wo=Wo.next=t;return e}var Rs=null;function ov(t){Rs===null?Rs=[t]:Rs.push(t)}function Jk(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ov(e)):(n.next=i.next,i.next=n),e.interleaved=n,oi(t,r)}function oi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ki=!1;function av(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ui(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,oi(t,n)}return i=r.interleaved,i===null?(e.next=e,ov(r)):(e.next=i.next,i.next=e),r.interleaved=e,oi(t,n)}function pd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qy(t,n)}}function Mw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Yd(t,e,n,r){var i=t.updateQueue;ki=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var m=a.lane,p=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,x=a;switch(m=e,p=n,x.tag){case 1:if(y=x.payload,typeof y=="function"){h=y.call(p,h,m);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,m=typeof y=="function"?y.call(p,h,m):y,m==null)break e;h=qe({},h,m);break e;case 2:ki=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else p={eventTime:p,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ks|=o,t.lanes=o,t.memoizedState=h}}function Lw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(O(191,i));i.call(r)}}}var e2=new Jb.Component().refs;function Zg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ff={isMounted:function(t){return(t=t._reactInternals)?fo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=en(),i=Hi(t),s=Zr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ui(t,s,i),e!==null&&(ar(e,t,i,r),pd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=en(),i=Hi(t),s=Zr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ui(t,s,i),e!==null&&(ar(e,t,i,r),pd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=en(),r=Hi(t),i=Zr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ui(t,i,r),e!==null&&(ar(e,t,r,n),pd(e,t,r))}};function Fw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ql(n,r)||!Ql(i,s):!0}function t2(t,e,n){var r=!1,i=es,s=e.contextType;return typeof s=="object"&&s!==null?s=Hn(s):(i=un(e)?Hs:Wt.current,r=e.contextTypes,s=(r=r!=null)?ha(t,i):es),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ff,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function $w(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ff.enqueueReplaceState(e,e.state,null)}function e0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=e2,av(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Hn(s):(s=un(e)?Hs:Wt.current,i.context=ha(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Zg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ff.enqueueReplaceState(i,i.state,null),Yd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function il(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===e2&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,t))}return t}function ju(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zw(t){var e=t._init;return e(t._payload)}function n2(t){function e(v,g){if(t){var w=v.deletions;w===null?(v.deletions=[g],v.flags|=16):w.push(g)}}function n(v,g){if(!t)return null;for(;g!==null;)e(v,g),g=g.sibling;return null}function r(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function i(v,g){return v=qi(v,g),v.index=0,v.sibling=null,v}function s(v,g,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<g?(v.flags|=2,g):w):(v.flags|=2,g)):(v.flags|=1048576,g)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,g,w,E){return g===null||g.tag!==6?(g=pp(w,v.mode,E),g.return=v,g):(g=i(g,w),g.return=v,g)}function l(v,g,w,E){var S=w.type;return S===Mo?d(v,g,w.props.children,E,w.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===bi&&zw(S)===g.type)?(E=i(g,w.props),E.ref=il(v,g,w),E.return=v,E):(E=_d(w.type,w.key,w.props,null,v.mode,E),E.ref=il(v,g,w),E.return=v,E)}function c(v,g,w,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=gp(w,v.mode,E),g.return=v,g):(g=i(g,w.children||[]),g.return=v,g)}function d(v,g,w,E,S){return g===null||g.tag!==7?(g=zs(w,v.mode,E,S),g.return=v,g):(g=i(g,w),g.return=v,g)}function h(v,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=pp(""+g,v.mode,w),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Su:return w=_d(g.type,g.key,g.props,null,v.mode,w),w.ref=il(v,null,g),w.return=v,w;case Oo:return g=gp(g,v.mode,w),g.return=v,g;case bi:var E=g._init;return h(v,E(g._payload),w)}if(ml(g)||Za(g))return g=zs(g,v.mode,w,null),g.return=v,g;ju(v,g)}return null}function m(v,g,w,E){var S=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(v,g,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Su:return w.key===S?l(v,g,w,E):null;case Oo:return w.key===S?c(v,g,w,E):null;case bi:return S=w._init,m(v,g,S(w._payload),E)}if(ml(w)||Za(w))return S!==null?null:d(v,g,w,E,null);ju(v,w)}return null}function p(v,g,w,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(w)||null,a(g,v,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Su:return v=v.get(E.key===null?w:E.key)||null,l(g,v,E,S);case Oo:return v=v.get(E.key===null?w:E.key)||null,c(g,v,E,S);case bi:var T=E._init;return p(v,g,w,T(E._payload),S)}if(ml(E)||Za(E))return v=v.get(w)||null,d(g,v,E,S,null);ju(g,E)}return null}function y(v,g,w,E){for(var S=null,T=null,k=g,b=g=0,D=null;k!==null&&b<w.length;b++){k.index>b?(D=k,k=null):D=k.sibling;var I=m(v,k,w[b],E);if(I===null){k===null&&(k=D);break}t&&k&&I.alternate===null&&e(v,k),g=s(I,g,b),T===null?S=I:T.sibling=I,T=I,k=D}if(b===w.length)return n(v,k),Ve&&Ss(v,b),S;if(k===null){for(;b<w.length;b++)k=h(v,w[b],E),k!==null&&(g=s(k,g,b),T===null?S=k:T.sibling=k,T=k);return Ve&&Ss(v,b),S}for(k=r(v,k);b<w.length;b++)D=p(k,v,b,w[b],E),D!==null&&(t&&D.alternate!==null&&k.delete(D.key===null?b:D.key),g=s(D,g,b),T===null?S=D:T.sibling=D,T=D);return t&&k.forEach(function(L){return e(v,L)}),Ve&&Ss(v,b),S}function x(v,g,w,E){var S=Za(w);if(typeof S!="function")throw Error(O(150));if(w=S.call(w),w==null)throw Error(O(151));for(var T=S=null,k=g,b=g=0,D=null,I=w.next();k!==null&&!I.done;b++,I=w.next()){k.index>b?(D=k,k=null):D=k.sibling;var L=m(v,k,I.value,E);if(L===null){k===null&&(k=D);break}t&&k&&L.alternate===null&&e(v,k),g=s(L,g,b),T===null?S=L:T.sibling=L,T=L,k=D}if(I.done)return n(v,k),Ve&&Ss(v,b),S;if(k===null){for(;!I.done;b++,I=w.next())I=h(v,I.value,E),I!==null&&(g=s(I,g,b),T===null?S=I:T.sibling=I,T=I);return Ve&&Ss(v,b),S}for(k=r(v,k);!I.done;b++,I=w.next())I=p(k,v,b,I.value,E),I!==null&&(t&&I.alternate!==null&&k.delete(I.key===null?b:I.key),g=s(I,g,b),T===null?S=I:T.sibling=I,T=I);return t&&k.forEach(function(W){return e(v,W)}),Ve&&Ss(v,b),S}function _(v,g,w,E){if(typeof w=="object"&&w!==null&&w.type===Mo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Su:e:{for(var S=w.key,T=g;T!==null;){if(T.key===S){if(S=w.type,S===Mo){if(T.tag===7){n(v,T.sibling),g=i(T,w.props.children),g.return=v,v=g;break e}}else if(T.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===bi&&zw(S)===T.type){n(v,T.sibling),g=i(T,w.props),g.ref=il(v,T,w),g.return=v,v=g;break e}n(v,T);break}else e(v,T);T=T.sibling}w.type===Mo?(g=zs(w.props.children,v.mode,E,w.key),g.return=v,v=g):(E=_d(w.type,w.key,w.props,null,v.mode,E),E.ref=il(v,g,w),E.return=v,v=E)}return o(v);case Oo:e:{for(T=w.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(v,g.sibling),g=i(g,w.children||[]),g.return=v,v=g;break e}else{n(v,g);break}else e(v,g);g=g.sibling}g=gp(w,v.mode,E),g.return=v,v=g}return o(v);case bi:return T=w._init,_(v,g,T(w._payload),E)}if(ml(w))return y(v,g,w,E);if(Za(w))return x(v,g,w,E);ju(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(v,g.sibling),g=i(g,w),g.return=v,v=g):(n(v,g),g=pp(w,v.mode,E),g.return=v,v=g),o(v)):n(v,g)}return _}var ma=n2(!0),r2=n2(!1),Vc={},Cr=fs(Vc),ec=fs(Vc),tc=fs(Vc);function Ps(t){if(t===Vc)throw Error(O(174));return t}function lv(t,e){switch(je(tc,e),je(ec,t),je(Cr,Vc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ng(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ng(e,t)}Fe(Cr),je(Cr,e)}function pa(){Fe(Cr),Fe(ec),Fe(tc)}function i2(t){Ps(tc.current);var e=Ps(Cr.current),n=Ng(e,t.type);e!==n&&(je(ec,t),je(Cr,n))}function cv(t){ec.current===t&&(Fe(Cr),Fe(ec))}var We=fs(0);function Jd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cp=[];function uv(){for(var t=0;t<cp.length;t++)cp[t]._workInProgressVersionPrimary=null;cp.length=0}var gd=mi.ReactCurrentDispatcher,up=mi.ReactCurrentBatchConfig,Gs=0,He=null,ft=null,xt=null,Zd=!1,Al=!1,nc=0,D3=0;function Dt(){throw Error(O(321))}function dv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!lr(t[n],e[n]))return!1;return!0}function hv(t,e,n,r,i,s){if(Gs=s,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,gd.current=t===null||t.memoizedState===null?L3:F3,t=n(r,i),Al){s=0;do{if(Al=!1,nc=0,25<=s)throw Error(O(301));s+=1,xt=ft=null,e.updateQueue=null,gd.current=$3,t=n(r,i)}while(Al)}if(gd.current=eh,e=ft!==null&&ft.next!==null,Gs=0,xt=ft=He=null,Zd=!1,e)throw Error(O(300));return t}function fv(){var t=nc!==0;return nc=0,t}function gr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?He.memoizedState=xt=t:xt=xt.next=t,xt}function qn(){if(ft===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var e=xt===null?He.memoizedState:xt.next;if(e!==null)xt=e,ft=t;else{if(t===null)throw Error(O(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},xt===null?He.memoizedState=xt=t:xt=xt.next=t}return xt}function rc(t,e){return typeof e=="function"?e(t):e}function dp(t){var e=qn(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=ft,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((Gs&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,He.lanes|=d,Ks|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,lr(r,e.memoizedState)||(ln=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,He.lanes|=s,Ks|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function hp(t){var e=qn(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);lr(s,e.memoizedState)||(ln=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function s2(){}function o2(t,e){var n=He,r=qn(),i=e(),s=!lr(r.memoizedState,i);if(s&&(r.memoizedState=i,ln=!0),r=r.queue,mv(c2.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||xt!==null&&xt.memoizedState.tag&1){if(n.flags|=2048,ic(9,l2.bind(null,n,r,i,e),void 0,null),Et===null)throw Error(O(349));Gs&30||a2(n,e,i)}return i}function a2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function l2(t,e,n,r){e.value=n,e.getSnapshot=r,u2(e)&&d2(t)}function c2(t,e,n){return n(function(){u2(e)&&d2(t)})}function u2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!lr(t,n)}catch{return!0}}function d2(t){var e=oi(t,1);e!==null&&ar(e,t,1,-1)}function Bw(t){var e=gr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rc,lastRenderedState:t},e.queue=t,t=t.dispatch=M3.bind(null,He,t),[e.memoizedState,t]}function ic(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function h2(){return qn().memoizedState}function yd(t,e,n,r){var i=gr();He.flags|=t,i.memoizedState=ic(1|e,n,void 0,r===void 0?null:r)}function mf(t,e,n,r){var i=qn();r=r===void 0?null:r;var s=void 0;if(ft!==null){var o=ft.memoizedState;if(s=o.destroy,r!==null&&dv(r,o.deps)){i.memoizedState=ic(e,n,s,r);return}}He.flags|=t,i.memoizedState=ic(1|e,n,s,r)}function Vw(t,e){return yd(8390656,8,t,e)}function mv(t,e){return mf(2048,8,t,e)}function f2(t,e){return mf(4,2,t,e)}function m2(t,e){return mf(4,4,t,e)}function p2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function g2(t,e,n){return n=n!=null?n.concat([t]):null,mf(4,4,p2.bind(null,e,t),n)}function pv(){}function y2(t,e){var n=qn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function v2(t,e){var n=qn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function x2(t,e,n){return Gs&21?(lr(n,e)||(n=Ek(),He.lanes|=n,Ks|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ln=!0),t.memoizedState=n)}function j3(t,e){var n=Ie;Ie=n!==0&&4>n?n:4,t(!0);var r=up.transition;up.transition={};try{t(!1),e()}finally{Ie=n,up.transition=r}}function w2(){return qn().memoizedState}function O3(t,e,n){var r=Hi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_2(t))E2(e,n);else if(n=Jk(t,e,n,r),n!==null){var i=en();ar(n,t,r,i),S2(n,e,r)}}function M3(t,e,n){var r=Hi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_2(t))E2(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,lr(a,o)){var l=e.interleaved;l===null?(i.next=i,ov(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Jk(t,e,i,r),n!==null&&(i=en(),ar(n,t,r,i),S2(n,e,r))}}function _2(t){var e=t.alternate;return t===He||e!==null&&e===He}function E2(t,e){Al=Zd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function S2(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qy(t,n)}}var eh={readContext:Hn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},L3={readContext:Hn,useCallback:function(t,e){return gr().memoizedState=[t,e===void 0?null:e],t},useContext:Hn,useEffect:Vw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,yd(4194308,4,p2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yd(4194308,4,t,e)},useInsertionEffect:function(t,e){return yd(4,2,t,e)},useMemo:function(t,e){var n=gr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=gr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=O3.bind(null,He,t),[r.memoizedState,t]},useRef:function(t){var e=gr();return t={current:t},e.memoizedState=t},useState:Bw,useDebugValue:pv,useDeferredValue:function(t){return gr().memoizedState=t},useTransition:function(){var t=Bw(!1),e=t[0];return t=j3.bind(null,t[1]),gr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=He,i=gr();if(Ve){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),Et===null)throw Error(O(349));Gs&30||a2(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Vw(c2.bind(null,r,s,t),[t]),r.flags|=2048,ic(9,l2.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=gr(),e=Et.identifierPrefix;if(Ve){var n=Gr,r=qr;n=(r&~(1<<32-or(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=nc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=D3++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},F3={readContext:Hn,useCallback:y2,useContext:Hn,useEffect:mv,useImperativeHandle:g2,useInsertionEffect:f2,useLayoutEffect:m2,useMemo:v2,useReducer:dp,useRef:h2,useState:function(){return dp(rc)},useDebugValue:pv,useDeferredValue:function(t){var e=qn();return x2(e,ft.memoizedState,t)},useTransition:function(){var t=dp(rc)[0],e=qn().memoizedState;return[t,e]},useMutableSource:s2,useSyncExternalStore:o2,useId:w2,unstable_isNewReconciler:!1},$3={readContext:Hn,useCallback:y2,useContext:Hn,useEffect:mv,useImperativeHandle:g2,useInsertionEffect:f2,useLayoutEffect:m2,useMemo:v2,useReducer:hp,useRef:h2,useState:function(){return hp(rc)},useDebugValue:pv,useDeferredValue:function(t){var e=qn();return ft===null?e.memoizedState=t:x2(e,ft.memoizedState,t)},useTransition:function(){var t=hp(rc)[0],e=qn().memoizedState;return[t,e]},useMutableSource:s2,useSyncExternalStore:o2,useId:w2,unstable_isNewReconciler:!1};function ga(t,e){try{var n="",r=e;do n+=fN(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function fp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function t0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var z3=typeof WeakMap=="function"?WeakMap:Map;function b2(t,e,n){n=Zr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){nh||(nh=!0,d0=r),t0(t,e)},n}function k2(t,e,n){n=Zr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){t0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){t0(t,e),typeof r!="function"&&(Wi===null?Wi=new Set([this]):Wi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Uw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new z3;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=e5.bind(null,t,e,n),e.then(t,t))}function Ww(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Hw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zr(-1,1),e.tag=2,Ui(n,e,1))),n.lanes|=1),t)}var B3=mi.ReactCurrentOwner,ln=!1;function Qt(t,e,n,r){e.child=t===null?r2(e,null,n,r):ma(e,t.child,n,r)}function qw(t,e,n,r,i){n=n.render;var s=e.ref;return ea(e,i),r=hv(t,e,n,r,s,i),n=fv(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ai(t,e,i)):(Ve&&n&&ev(e),e.flags|=1,Qt(t,e,r,i),e.child)}function Gw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Sv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,T2(t,e,s,r,i)):(t=_d(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ql,n(o,r)&&t.ref===e.ref)return ai(t,e,i)}return e.flags|=1,t=qi(s,r),t.ref=e.ref,t.return=e,e.child=t}function T2(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ql(s,r)&&t.ref===e.ref)if(ln=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ln=!0);else return e.lanes=t.lanes,ai(t,e,i)}return n0(t,e,n,r,i)}function I2(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(qo,xn),xn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(qo,xn),xn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,je(qo,xn),xn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,je(qo,xn),xn|=r;return Qt(t,e,i,n),e.child}function C2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function n0(t,e,n,r,i){var s=un(n)?Hs:Wt.current;return s=ha(e,s),ea(e,i),n=hv(t,e,n,r,s,i),r=fv(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ai(t,e,i)):(Ve&&r&&ev(e),e.flags|=1,Qt(t,e,n,i),e.child)}function Kw(t,e,n,r,i){if(un(n)){var s=!0;qd(e)}else s=!1;if(ea(e,i),e.stateNode===null)vd(t,e),t2(e,n,r),e0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Hn(c):(c=un(n)?Hs:Wt.current,c=ha(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&$w(e,o,r,c),ki=!1;var m=e.memoizedState;o.state=m,Yd(e,r,o,i),l=e.memoizedState,a!==r||m!==l||cn.current||ki?(typeof d=="function"&&(Zg(e,n,d,r),l=e.memoizedState),(a=ki||Fw(e,n,a,r,m,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Zk(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Yn(e.type,a),o.props=c,h=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Hn(l):(l=un(n)?Hs:Wt.current,l=ha(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==l)&&$w(e,o,r,l),ki=!1,m=e.memoizedState,o.state=m,Yd(e,r,o,i);var y=e.memoizedState;a!==h||m!==y||cn.current||ki?(typeof p=="function"&&(Zg(e,n,p,r),y=e.memoizedState),(c=ki||Fw(e,n,c,r,m,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return r0(t,e,n,r,s,i)}function r0(t,e,n,r,i,s){C2(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Dw(e,n,!1),ai(t,e,s);r=e.stateNode,B3.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ma(e,t.child,null,s),e.child=ma(e,null,a,s)):Qt(t,e,a,s),e.memoizedState=r.state,i&&Dw(e,n,!0),e.child}function A2(t){var e=t.stateNode;e.pendingContext?Nw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Nw(t,e.context,!1),lv(t,e.containerInfo)}function Xw(t,e,n,r,i){return fa(),nv(i),e.flags|=256,Qt(t,e,n,r),e.child}var i0={dehydrated:null,treeContext:null,retryLane:0};function s0(t){return{baseLanes:t,cachePool:null,transitions:null}}function R2(t,e,n){var r=e.pendingProps,i=We.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),je(We,i&1),t===null)return Yg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=yf(o,r,0,null),t=zs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=s0(n),e.memoizedState=i0,t):gv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return V3(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=qi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=qi(a,s):(s=zs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?s0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=i0,r}return s=t.child,t=s.sibling,r=qi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function gv(t,e){return e=yf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ou(t,e,n,r){return r!==null&&nv(r),ma(e,t.child,null,n),t=gv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function V3(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=fp(Error(O(422))),Ou(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=yf({mode:"visible",children:r.children},i,0,null),s=zs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ma(e,t.child,null,o),e.child.memoizedState=s0(o),e.memoizedState=i0,s);if(!(e.mode&1))return Ou(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(O(419)),r=fp(s,r,void 0),Ou(t,e,o,r)}if(a=(o&t.childLanes)!==0,ln||a){if(r=Et,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,oi(t,i),ar(r,t,i,-1))}return Ev(),r=fp(Error(O(421))),Ou(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=t5.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,_n=Vi(i.nextSibling),bn=e,Ve=!0,er=null,t!==null&&(Ln[Fn++]=qr,Ln[Fn++]=Gr,Ln[Fn++]=qs,qr=t.id,Gr=t.overflow,qs=e),e=gv(e,r.children),e.flags|=4096,e)}function Qw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Jg(t.return,e,n)}function mp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function P2(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Qt(t,e,r.children,n),r=We.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qw(t,n,e);else if(t.tag===19)Qw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(je(We,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Jd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),mp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Jd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}mp(e,!0,n,null,s);break;case"together":mp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function vd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ai(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ks|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=qi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=qi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function U3(t,e,n){switch(e.tag){case 3:A2(e),fa();break;case 5:i2(e);break;case 1:un(e.type)&&qd(e);break;case 4:lv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;je(Xd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(je(We,We.current&1),e.flags|=128,null):n&e.child.childLanes?R2(t,e,n):(je(We,We.current&1),t=ai(t,e,n),t!==null?t.sibling:null);je(We,We.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return P2(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),je(We,We.current),r)break;return null;case 22:case 23:return e.lanes=0,I2(t,e,n)}return ai(t,e,n)}var N2,o0,D2,j2;N2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};o0=function(){};D2=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ps(Cr.current);var s=null;switch(n){case"input":i=Cg(t,i),r=Cg(t,r),s=[];break;case"select":i=qe({},i,{value:void 0}),r=qe({},r,{value:void 0}),s=[];break;case"textarea":i=Pg(t,i),r=Pg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Wd)}Dg(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ul.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ul.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Oe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};j2=function(t,e,n,r){n!==r&&(e.flags|=4)};function sl(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function W3(t,e,n){var r=e.pendingProps;switch(tv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(e),null;case 1:return un(e.type)&&Hd(),jt(e),null;case 3:return r=e.stateNode,pa(),Fe(cn),Fe(Wt),uv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Du(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,er!==null&&(m0(er),er=null))),o0(t,e),jt(e),null;case 5:cv(e);var i=Ps(tc.current);if(n=e.type,t!==null&&e.stateNode!=null)D2(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(O(166));return jt(e),null}if(t=Ps(Cr.current),Du(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[vr]=e,r[Zl]=s,t=(e.mode&1)!==0,n){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(i=0;i<gl.length;i++)Oe(gl[i],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":sw(r,s),Oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Oe("invalid",r);break;case"textarea":aw(r,s),Oe("invalid",r)}Dg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Nu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Nu(r.textContent,a,t),i=["children",""+a]):Ul.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Oe("scroll",r)}switch(n){case"input":bu(r),ow(r,s,!0);break;case"textarea":bu(r),lw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Wd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ak(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[vr]=e,t[Zl]=r,N2(t,e,!1,!1),e.stateNode=t;e:{switch(o=jg(n,r),n){case"dialog":Oe("cancel",t),Oe("close",t),i=r;break;case"iframe":case"object":case"embed":Oe("load",t),i=r;break;case"video":case"audio":for(i=0;i<gl.length;i++)Oe(gl[i],t);i=r;break;case"source":Oe("error",t),i=r;break;case"img":case"image":case"link":Oe("error",t),Oe("load",t),i=r;break;case"details":Oe("toggle",t),i=r;break;case"input":sw(t,r),i=Cg(t,r),Oe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=qe({},r,{value:void 0}),Oe("invalid",t);break;case"textarea":aw(t,r),i=Pg(t,r),Oe("invalid",t);break;default:i=r}Dg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?uk(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&lk(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Wl(t,l):typeof l=="number"&&Wl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ul.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Oe("scroll",t):l!=null&&zy(t,s,l,o))}switch(n){case"input":bu(t),ow(t,r,!1);break;case"textarea":bu(t),lw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Qo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Qo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Wd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jt(e),null;case 6:if(t&&e.stateNode!=null)j2(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(O(166));if(n=Ps(tc.current),Ps(Cr.current),Du(e)){if(r=e.stateNode,n=e.memoizedProps,r[vr]=e,(s=r.nodeValue!==n)&&(t=bn,t!==null))switch(t.tag){case 3:Nu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vr]=e,e.stateNode=r}return jt(e),null;case 13:if(Fe(We),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&_n!==null&&e.mode&1&&!(e.flags&128))Yk(),fa(),e.flags|=98560,s=!1;else if(s=Du(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(O(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(O(317));s[vr]=e}else fa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;jt(e),s=!1}else er!==null&&(m0(er),er=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||We.current&1?pt===0&&(pt=3):Ev())),e.updateQueue!==null&&(e.flags|=4),jt(e),null);case 4:return pa(),o0(t,e),t===null&&Yl(e.stateNode.containerInfo),jt(e),null;case 10:return sv(e.type._context),jt(e),null;case 17:return un(e.type)&&Hd(),jt(e),null;case 19:if(Fe(We),s=e.memoizedState,s===null)return jt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)sl(s,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Jd(t),o!==null){for(e.flags|=128,sl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return je(We,We.current&1|2),e.child}t=t.sibling}s.tail!==null&&tt()>ya&&(e.flags|=128,r=!0,sl(s,!1),e.lanes=4194304)}else{if(!r)if(t=Jd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),sl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ve)return jt(e),null}else 2*tt()-s.renderingStartTime>ya&&n!==1073741824&&(e.flags|=128,r=!0,sl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=tt(),e.sibling=null,n=We.current,je(We,r?n&1|2:n&1),e):(jt(e),null);case 22:case 23:return _v(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xn&1073741824&&(jt(e),e.subtreeFlags&6&&(e.flags|=8192)):jt(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function H3(t,e){switch(tv(e),e.tag){case 1:return un(e.type)&&Hd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pa(),Fe(cn),Fe(Wt),uv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return cv(e),null;case 13:if(Fe(We),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));fa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(We),null;case 4:return pa(),null;case 10:return sv(e.type._context),null;case 22:case 23:return _v(),null;case 24:return null;default:return null}}var Mu=!1,Ft=!1,q3=typeof WeakSet=="function"?WeakSet:Set,B=null;function Ho(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xe(t,e,r)}else n.current=null}function a0(t,e,n){try{n()}catch(r){Xe(t,e,r)}}var Yw=!1;function G3(t,e){if(Wg=Bd,t=Fk(),Zy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,m=null;t:for(;;){for(var p;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===t)break t;if(m===n&&++c===i&&(a=o),m===s&&++d===r&&(l=o),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hg={focusedElem:t,selectionRange:n},Bd=!1,B=e;B!==null;)if(e=B,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,B=t;else for(;B!==null;){e=B;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,_=y.memoizedState,v=e.stateNode,g=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:Yn(e.type,x),_);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(E){Xe(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,B=t;break}B=e.return}return y=Yw,Yw=!1,y}function Rl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&a0(e,n,s)}i=i.next}while(i!==r)}}function pf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function l0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function O2(t){var e=t.alternate;e!==null&&(t.alternate=null,O2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vr],delete e[Zl],delete e[Kg],delete e[A3],delete e[R3])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function M2(t){return t.tag===5||t.tag===3||t.tag===4}function Jw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||M2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function c0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Wd));else if(r!==4&&(t=t.child,t!==null))for(c0(t,e,n),t=t.sibling;t!==null;)c0(t,e,n),t=t.sibling}function u0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(u0(t,e,n),t=t.sibling;t!==null;)u0(t,e,n),t=t.sibling}var Tt=null,Jn=!1;function xi(t,e,n){for(n=n.child;n!==null;)L2(t,e,n),n=n.sibling}function L2(t,e,n){if(Ir&&typeof Ir.onCommitFiberUnmount=="function")try{Ir.onCommitFiberUnmount(af,n)}catch{}switch(n.tag){case 5:Ft||Ho(n,e);case 6:var r=Tt,i=Jn;Tt=null,xi(t,e,n),Tt=r,Jn=i,Tt!==null&&(Jn?(t=Tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Tt.removeChild(n.stateNode));break;case 18:Tt!==null&&(Jn?(t=Tt,n=n.stateNode,t.nodeType===8?ap(t.parentNode,n):t.nodeType===1&&ap(t,n),Kl(t)):ap(Tt,n.stateNode));break;case 4:r=Tt,i=Jn,Tt=n.stateNode.containerInfo,Jn=!0,xi(t,e,n),Tt=r,Jn=i;break;case 0:case 11:case 14:case 15:if(!Ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&a0(n,e,o),i=i.next}while(i!==r)}xi(t,e,n);break;case 1:if(!Ft&&(Ho(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Xe(n,e,a)}xi(t,e,n);break;case 21:xi(t,e,n);break;case 22:n.mode&1?(Ft=(r=Ft)||n.memoizedState!==null,xi(t,e,n),Ft=r):xi(t,e,n);break;default:xi(t,e,n)}}function Zw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new q3),e.forEach(function(r){var i=n5.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Xn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Tt=a.stateNode,Jn=!1;break e;case 3:Tt=a.stateNode.containerInfo,Jn=!0;break e;case 4:Tt=a.stateNode.containerInfo,Jn=!0;break e}a=a.return}if(Tt===null)throw Error(O(160));L2(s,o,i),Tt=null,Jn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Xe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)F2(e,t),e=e.sibling}function F2(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xn(e,t),fr(t),r&4){try{Rl(3,t,t.return),pf(3,t)}catch(x){Xe(t,t.return,x)}try{Rl(5,t,t.return)}catch(x){Xe(t,t.return,x)}}break;case 1:Xn(e,t),fr(t),r&512&&n!==null&&Ho(n,n.return);break;case 5:if(Xn(e,t),fr(t),r&512&&n!==null&&Ho(n,n.return),t.flags&32){var i=t.stateNode;try{Wl(i,"")}catch(x){Xe(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&sk(i,s),jg(a,o);var c=jg(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?uk(i,h):d==="dangerouslySetInnerHTML"?lk(i,h):d==="children"?Wl(i,h):zy(i,d,h,c)}switch(a){case"input":Ag(i,s);break;case"textarea":ok(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Qo(i,!!s.multiple,p,!1):m!==!!s.multiple&&(s.defaultValue!=null?Qo(i,!!s.multiple,s.defaultValue,!0):Qo(i,!!s.multiple,s.multiple?[]:"",!1))}i[Zl]=s}catch(x){Xe(t,t.return,x)}}break;case 6:if(Xn(e,t),fr(t),r&4){if(t.stateNode===null)throw Error(O(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){Xe(t,t.return,x)}}break;case 3:if(Xn(e,t),fr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Kl(e.containerInfo)}catch(x){Xe(t,t.return,x)}break;case 4:Xn(e,t),fr(t);break;case 13:Xn(e,t),fr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(xv=tt())),r&4&&Zw(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ft=(c=Ft)||d,Xn(e,t),Ft=c):Xn(e,t),fr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(B=t,d=t.child;d!==null;){for(h=B=d;B!==null;){switch(m=B,p=m.child,m.tag){case 0:case 11:case 14:case 15:Rl(4,m,m.return);break;case 1:Ho(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(x){Xe(r,n,x)}}break;case 5:Ho(m,m.return);break;case 22:if(m.memoizedState!==null){t_(h);continue}}p!==null?(p.return=m,B=p):t_(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ck("display",o))}catch(x){Xe(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(x){Xe(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Xn(e,t),fr(t),r&4&&Zw(t);break;case 21:break;default:Xn(e,t),fr(t)}}function fr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(M2(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Wl(i,""),r.flags&=-33);var s=Jw(t);u0(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Jw(t);c0(t,a,o);break;default:throw Error(O(161))}}catch(l){Xe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function K3(t,e,n){B=t,$2(t)}function $2(t,e,n){for(var r=(t.mode&1)!==0;B!==null;){var i=B,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Mu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ft;a=Mu;var c=Ft;if(Mu=o,(Ft=l)&&!c)for(B=i;B!==null;)o=B,l=o.child,o.tag===22&&o.memoizedState!==null?n_(i):l!==null?(l.return=o,B=l):n_(i);for(;s!==null;)B=s,$2(s),s=s.sibling;B=i,Mu=a,Ft=c}e_(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,B=s):e_(t)}}function e_(t){for(;B!==null;){var e=B;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ft||pf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ft)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Yn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Lw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Lw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Kl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}Ft||e.flags&512&&l0(e)}catch(m){Xe(e,e.return,m)}}if(e===t){B=null;break}if(n=e.sibling,n!==null){n.return=e.return,B=n;break}B=e.return}}function t_(t){for(;B!==null;){var e=B;if(e===t){B=null;break}var n=e.sibling;if(n!==null){n.return=e.return,B=n;break}B=e.return}}function n_(t){for(;B!==null;){var e=B;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{pf(4,e)}catch(l){Xe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Xe(e,i,l)}}var s=e.return;try{l0(e)}catch(l){Xe(e,s,l)}break;case 5:var o=e.return;try{l0(e)}catch(l){Xe(e,o,l)}}}catch(l){Xe(e,e.return,l)}if(e===t){B=null;break}var a=e.sibling;if(a!==null){a.return=e.return,B=a;break}B=e.return}}var X3=Math.ceil,th=mi.ReactCurrentDispatcher,yv=mi.ReactCurrentOwner,Vn=mi.ReactCurrentBatchConfig,Ee=0,Et=null,at=null,Rt=0,xn=0,qo=fs(0),pt=0,sc=null,Ks=0,gf=0,vv=0,Pl=null,an=null,xv=0,ya=1/0,Ur=null,nh=!1,d0=null,Wi=null,Lu=!1,Oi=null,rh=0,Nl=0,h0=null,xd=-1,wd=0;function en(){return Ee&6?tt():xd!==-1?xd:xd=tt()}function Hi(t){return t.mode&1?Ee&2&&Rt!==0?Rt&-Rt:N3.transition!==null?(wd===0&&(wd=Ek()),wd):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:Ak(t.type)),t):1}function ar(t,e,n,r){if(50<Nl)throw Nl=0,h0=null,Error(O(185));$c(t,n,r),(!(Ee&2)||t!==Et)&&(t===Et&&(!(Ee&2)&&(gf|=n),pt===4&&Ii(t,Rt)),dn(t,r),n===1&&Ee===0&&!(e.mode&1)&&(ya=tt()+500,hf&&ms()))}function dn(t,e){var n=t.callbackNode;NN(t,e);var r=zd(t,t===Et?Rt:0);if(r===0)n!==null&&dw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&dw(n),e===1)t.tag===0?P3(r_.bind(null,t)):Kk(r_.bind(null,t)),I3(function(){!(Ee&6)&&ms()}),n=null;else{switch(Sk(r)){case 1:n=Hy;break;case 4:n=wk;break;case 16:n=$d;break;case 536870912:n=_k;break;default:n=$d}n=G2(n,z2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function z2(t,e){if(xd=-1,wd=0,Ee&6)throw Error(O(327));var n=t.callbackNode;if(ta()&&t.callbackNode!==n)return null;var r=zd(t,t===Et?Rt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ih(t,r);else{e=r;var i=Ee;Ee|=2;var s=V2();(Et!==t||Rt!==e)&&(Ur=null,ya=tt()+500,$s(t,e));do try{J3();break}catch(a){B2(t,a)}while(1);iv(),th.current=s,Ee=i,at!==null?e=0:(Et=null,Rt=0,e=pt)}if(e!==0){if(e===2&&(i=$g(t),i!==0&&(r=i,e=f0(t,i))),e===1)throw n=sc,$s(t,0),Ii(t,r),dn(t,tt()),n;if(e===6)Ii(t,r);else{if(i=t.current.alternate,!(r&30)&&!Q3(i)&&(e=ih(t,r),e===2&&(s=$g(t),s!==0&&(r=s,e=f0(t,s))),e===1))throw n=sc,$s(t,0),Ii(t,r),dn(t,tt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(O(345));case 2:bs(t,an,Ur);break;case 3:if(Ii(t,r),(r&130023424)===r&&(e=xv+500-tt(),10<e)){if(zd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){en(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Gg(bs.bind(null,t,an,Ur),e);break}bs(t,an,Ur);break;case 4:if(Ii(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-or(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*X3(r/1960))-r,10<r){t.timeoutHandle=Gg(bs.bind(null,t,an,Ur),r);break}bs(t,an,Ur);break;case 5:bs(t,an,Ur);break;default:throw Error(O(329))}}}return dn(t,tt()),t.callbackNode===n?z2.bind(null,t):null}function f0(t,e){var n=Pl;return t.current.memoizedState.isDehydrated&&($s(t,e).flags|=256),t=ih(t,e),t!==2&&(e=an,an=n,e!==null&&m0(e)),t}function m0(t){an===null?an=t:an.push.apply(an,t)}function Q3(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!lr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ii(t,e){for(e&=~vv,e&=~gf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-or(e),r=1<<n;t[n]=-1,e&=~r}}function r_(t){if(Ee&6)throw Error(O(327));ta();var e=zd(t,0);if(!(e&1))return dn(t,tt()),null;var n=ih(t,e);if(t.tag!==0&&n===2){var r=$g(t);r!==0&&(e=r,n=f0(t,r))}if(n===1)throw n=sc,$s(t,0),Ii(t,e),dn(t,tt()),n;if(n===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bs(t,an,Ur),dn(t,tt()),null}function wv(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(ya=tt()+500,hf&&ms())}}function Xs(t){Oi!==null&&Oi.tag===0&&!(Ee&6)&&ta();var e=Ee;Ee|=1;var n=Vn.transition,r=Ie;try{if(Vn.transition=null,Ie=1,t)return t()}finally{Ie=r,Vn.transition=n,Ee=e,!(Ee&6)&&ms()}}function _v(){xn=qo.current,Fe(qo)}function $s(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,T3(n)),at!==null)for(n=at.return;n!==null;){var r=n;switch(tv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hd();break;case 3:pa(),Fe(cn),Fe(Wt),uv();break;case 5:cv(r);break;case 4:pa();break;case 13:Fe(We);break;case 19:Fe(We);break;case 10:sv(r.type._context);break;case 22:case 23:_v()}n=n.return}if(Et=t,at=t=qi(t.current,null),Rt=xn=e,pt=0,sc=null,vv=gf=Ks=0,an=Pl=null,Rs!==null){for(e=0;e<Rs.length;e++)if(n=Rs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Rs=null}return t}function B2(t,e){do{var n=at;try{if(iv(),gd.current=eh,Zd){for(var r=He.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Zd=!1}if(Gs=0,xt=ft=He=null,Al=!1,nc=0,yv.current=null,n===null||n.return===null){pt=1,sc=e,at=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Rt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Ww(o);if(p!==null){p.flags&=-257,Hw(p,o,a,s,e),p.mode&1&&Uw(s,c,e),e=p,l=c;var y=e.updateQueue;if(y===null){var x=new Set;x.add(l),e.updateQueue=x}else y.add(l);break e}else{if(!(e&1)){Uw(s,c,e),Ev();break e}l=Error(O(426))}}else if(Ve&&a.mode&1){var _=Ww(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Hw(_,o,a,s,e),nv(ga(l,a));break e}}s=l=ga(l,a),pt!==4&&(pt=2),Pl===null?Pl=[s]:Pl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=b2(s,l,e);Mw(s,v);break e;case 1:a=l;var g=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Wi===null||!Wi.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=k2(s,a,e);Mw(s,E);break e}}s=s.return}while(s!==null)}W2(n)}catch(S){e=S,at===n&&n!==null&&(at=n=n.return);continue}break}while(1)}function V2(){var t=th.current;return th.current=eh,t===null?eh:t}function Ev(){(pt===0||pt===3||pt===2)&&(pt=4),Et===null||!(Ks&268435455)&&!(gf&268435455)||Ii(Et,Rt)}function ih(t,e){var n=Ee;Ee|=2;var r=V2();(Et!==t||Rt!==e)&&(Ur=null,$s(t,e));do try{Y3();break}catch(i){B2(t,i)}while(1);if(iv(),Ee=n,th.current=r,at!==null)throw Error(O(261));return Et=null,Rt=0,pt}function Y3(){for(;at!==null;)U2(at)}function J3(){for(;at!==null&&!SN();)U2(at)}function U2(t){var e=q2(t.alternate,t,xn);t.memoizedProps=t.pendingProps,e===null?W2(t):at=e,yv.current=null}function W2(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=H3(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,at=null;return}}else if(n=W3(n,e,xn),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);pt===0&&(pt=5)}function bs(t,e,n){var r=Ie,i=Vn.transition;try{Vn.transition=null,Ie=1,Z3(t,e,n,r)}finally{Vn.transition=i,Ie=r}return null}function Z3(t,e,n,r){do ta();while(Oi!==null);if(Ee&6)throw Error(O(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(DN(t,s),t===Et&&(at=Et=null,Rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Lu||(Lu=!0,G2($d,function(){return ta(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Vn.transition,Vn.transition=null;var o=Ie;Ie=1;var a=Ee;Ee|=4,yv.current=null,G3(t,n),F2(n,t),x3(Hg),Bd=!!Wg,Hg=Wg=null,t.current=n,K3(n),bN(),Ee=a,Ie=o,Vn.transition=s}else t.current=n;if(Lu&&(Lu=!1,Oi=t,rh=i),s=t.pendingLanes,s===0&&(Wi=null),IN(n.stateNode),dn(t,tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(nh)throw nh=!1,t=d0,d0=null,t;return rh&1&&t.tag!==0&&ta(),s=t.pendingLanes,s&1?t===h0?Nl++:(Nl=0,h0=t):Nl=0,ms(),null}function ta(){if(Oi!==null){var t=Sk(rh),e=Vn.transition,n=Ie;try{if(Vn.transition=null,Ie=16>t?16:t,Oi===null)var r=!1;else{if(t=Oi,Oi=null,rh=0,Ee&6)throw Error(O(331));var i=Ee;for(Ee|=4,B=t.current;B!==null;){var s=B,o=s.child;if(B.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(B=c;B!==null;){var d=B;switch(d.tag){case 0:case 11:case 15:Rl(8,d,s)}var h=d.child;if(h!==null)h.return=d,B=h;else for(;B!==null;){d=B;var m=d.sibling,p=d.return;if(O2(d),d===c){B=null;break}if(m!==null){m.return=p,B=m;break}B=p}}}var y=s.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}B=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,B=o;else e:for(;B!==null;){if(s=B,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Rl(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,B=v;break e}B=s.return}}var g=t.current;for(B=g;B!==null;){o=B;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,B=w;else e:for(o=g;B!==null;){if(a=B,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:pf(9,a)}}catch(S){Xe(a,a.return,S)}if(a===o){B=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,B=E;break e}B=a.return}}if(Ee=i,ms(),Ir&&typeof Ir.onPostCommitFiberRoot=="function")try{Ir.onPostCommitFiberRoot(af,t)}catch{}r=!0}return r}finally{Ie=n,Vn.transition=e}}return!1}function i_(t,e,n){e=ga(n,e),e=b2(t,e,1),t=Ui(t,e,1),e=en(),t!==null&&($c(t,1,e),dn(t,e))}function Xe(t,e,n){if(t.tag===3)i_(t,t,n);else for(;e!==null;){if(e.tag===3){i_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wi===null||!Wi.has(r))){t=ga(n,t),t=k2(e,t,1),e=Ui(e,t,1),t=en(),e!==null&&($c(e,1,t),dn(e,t));break}}e=e.return}}function e5(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=en(),t.pingedLanes|=t.suspendedLanes&n,Et===t&&(Rt&n)===n&&(pt===4||pt===3&&(Rt&130023424)===Rt&&500>tt()-xv?$s(t,0):vv|=n),dn(t,e)}function H2(t,e){e===0&&(t.mode&1?(e=Iu,Iu<<=1,!(Iu&130023424)&&(Iu=4194304)):e=1);var n=en();t=oi(t,e),t!==null&&($c(t,e,n),dn(t,n))}function t5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),H2(t,n)}function n5(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(e),H2(t,n)}var q2;q2=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||cn.current)ln=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ln=!1,U3(t,e,n);ln=!!(t.flags&131072)}else ln=!1,Ve&&e.flags&1048576&&Xk(e,Kd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;vd(t,e),t=e.pendingProps;var i=ha(e,Wt.current);ea(e,n),i=hv(null,e,r,t,i,n);var s=fv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,un(r)?(s=!0,qd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,av(e),i.updater=ff,e.stateNode=i,i._reactInternals=e,e0(e,r,t,n),e=r0(null,e,r,!0,s,n)):(e.tag=0,Ve&&s&&ev(e),Qt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(vd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=i5(r),t=Yn(r,t),i){case 0:e=n0(null,e,r,t,n);break e;case 1:e=Kw(null,e,r,t,n);break e;case 11:e=qw(null,e,r,t,n);break e;case 14:e=Gw(null,e,r,Yn(r.type,t),n);break e}throw Error(O(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),n0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),Kw(t,e,r,i,n);case 3:e:{if(A2(e),t===null)throw Error(O(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Zk(t,e),Yd(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ga(Error(O(423)),e),e=Xw(t,e,r,n,i);break e}else if(r!==i){i=ga(Error(O(424)),e),e=Xw(t,e,r,n,i);break e}else for(_n=Vi(e.stateNode.containerInfo.firstChild),bn=e,Ve=!0,er=null,n=r2(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fa(),r===i){e=ai(t,e,n);break e}Qt(t,e,r,n)}e=e.child}return e;case 5:return i2(e),t===null&&Yg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,qg(r,i)?o=null:s!==null&&qg(r,s)&&(e.flags|=32),C2(t,e),Qt(t,e,o,n),e.child;case 6:return t===null&&Yg(e),null;case 13:return R2(t,e,n);case 4:return lv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ma(e,null,r,n):Qt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),qw(t,e,r,i,n);case 7:return Qt(t,e,e.pendingProps,n),e.child;case 8:return Qt(t,e,e.pendingProps.children,n),e.child;case 12:return Qt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,je(Xd,r._currentValue),r._currentValue=o,s!==null)if(lr(s.value,o)){if(s.children===i.children&&!cn.current){e=ai(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Zr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Jg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(O(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Jg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Qt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ea(e,n),i=Hn(i),r=r(i),e.flags|=1,Qt(t,e,r,n),e.child;case 14:return r=e.type,i=Yn(r,e.pendingProps),i=Yn(r.type,i),Gw(t,e,r,i,n);case 15:return T2(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),vd(t,e),e.tag=1,un(r)?(t=!0,qd(e)):t=!1,ea(e,n),t2(e,r,i),e0(e,r,i,n),r0(null,e,r,!0,t,n);case 19:return P2(t,e,n);case 22:return I2(t,e,n)}throw Error(O(156,e.tag))};function G2(t,e){return xk(t,e)}function r5(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(t,e,n,r){return new r5(t,e,n,r)}function Sv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function i5(t){if(typeof t=="function")return Sv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Vy)return 11;if(t===Uy)return 14}return 2}function qi(t,e){var n=t.alternate;return n===null?(n=Bn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function _d(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Sv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Mo:return zs(n.children,i,s,e);case By:o=8,i|=8;break;case bg:return t=Bn(12,n,e,i|2),t.elementType=bg,t.lanes=s,t;case kg:return t=Bn(13,n,e,i),t.elementType=kg,t.lanes=s,t;case Tg:return t=Bn(19,n,e,i),t.elementType=Tg,t.lanes=s,t;case nk:return yf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ek:o=10;break e;case tk:o=9;break e;case Vy:o=11;break e;case Uy:o=14;break e;case bi:o=16,r=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=Bn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function zs(t,e,n,r){return t=Bn(7,t,r,e),t.lanes=n,t}function yf(t,e,n,r){return t=Bn(22,t,r,e),t.elementType=nk,t.lanes=n,t.stateNode={isHidden:!1},t}function pp(t,e,n){return t=Bn(6,t,null,e),t.lanes=n,t}function gp(t,e,n){return e=Bn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function s5(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qm(0),this.expirationTimes=Qm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function bv(t,e,n,r,i,s,o,a,l){return t=new s5(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Bn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},av(s),t}function o5(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function K2(t){if(!t)return es;t=t._reactInternals;e:{if(fo(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(un(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var n=t.type;if(un(n))return Gk(t,n,e)}return e}function X2(t,e,n,r,i,s,o,a,l){return t=bv(n,r,!0,t,i,s,o,a,l),t.context=K2(null),n=t.current,r=en(),i=Hi(n),s=Zr(r,i),s.callback=e??null,Ui(n,s,i),t.current.lanes=i,$c(t,i,r),dn(t,r),t}function vf(t,e,n,r){var i=e.current,s=en(),o=Hi(i);return n=K2(n),e.context===null?e.context=n:e.pendingContext=n,e=Zr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ui(i,e,o),t!==null&&(ar(t,i,o,s),pd(t,i,o)),o}function sh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function s_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function kv(t,e){s_(t,e),(t=t.alternate)&&s_(t,e)}function a5(){return null}var Q2=typeof reportError=="function"?reportError:function(t){console.error(t)};function Tv(t){this._internalRoot=t}xf.prototype.render=Tv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));vf(t,e,null,null)};xf.prototype.unmount=Tv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xs(function(){vf(null,t,null,null)}),e[si]=null}};function xf(t){this._internalRoot=t}xf.prototype.unstable_scheduleHydration=function(t){if(t){var e=Tk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ti.length&&e!==0&&e<Ti[n].priority;n++);Ti.splice(n,0,t),n===0&&Ck(t)}};function Iv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function o_(){}function l5(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=sh(o);s.call(c)}}var o=X2(e,r,t,0,null,!1,!1,"",o_);return t._reactRootContainer=o,t[si]=o.current,Yl(t.nodeType===8?t.parentNode:t),Xs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=sh(l);a.call(c)}}var l=bv(t,0,!1,null,null,!1,!1,"",o_);return t._reactRootContainer=l,t[si]=l.current,Yl(t.nodeType===8?t.parentNode:t),Xs(function(){vf(e,l,n,r)}),l}function _f(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=sh(o);a.call(l)}}vf(e,o,t,i)}else o=l5(n,e,t,i,r);return sh(o)}bk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=pl(e.pendingLanes);n!==0&&(qy(e,n|1),dn(e,tt()),!(Ee&6)&&(ya=tt()+500,ms()))}break;case 13:Xs(function(){var r=oi(t,1);if(r!==null){var i=en();ar(r,t,1,i)}}),kv(t,1)}};Gy=function(t){if(t.tag===13){var e=oi(t,134217728);if(e!==null){var n=en();ar(e,t,134217728,n)}kv(t,134217728)}};kk=function(t){if(t.tag===13){var e=Hi(t),n=oi(t,e);if(n!==null){var r=en();ar(n,t,e,r)}kv(t,e)}};Tk=function(){return Ie};Ik=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}};Mg=function(t,e,n){switch(e){case"input":if(Ag(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=df(r);if(!i)throw Error(O(90));ik(r),Ag(r,i)}}}break;case"textarea":ok(t,n);break;case"select":e=n.value,e!=null&&Qo(t,!!n.multiple,e,!1)}};fk=wv;mk=Xs;var c5={usingClientEntryPoint:!1,Events:[Bc,zo,df,dk,hk,wv]},ol={findFiberByHostInstance:As,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},u5={bundleType:ol.bundleType,version:ol.version,rendererPackageName:ol.rendererPackageName,rendererConfig:ol.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=yk(t),t===null?null:t.stateNode},findFiberByHostInstance:ol.findFiberByHostInstance||a5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fu.isDisabled&&Fu.supportsFiber)try{af=Fu.inject(u5),Ir=Fu}catch{}}Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c5;Pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Iv(e))throw Error(O(200));return o5(t,e,null,n)};Pn.createRoot=function(t,e){if(!Iv(t))throw Error(O(299));var n=!1,r="",i=Q2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=bv(t,1,!1,null,null,n,!1,r,i),t[si]=e.current,Yl(t.nodeType===8?t.parentNode:t),new Tv(e)};Pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=yk(e),t=t===null?null:t.stateNode,t};Pn.flushSync=function(t){return Xs(t)};Pn.hydrate=function(t,e,n){if(!wf(e))throw Error(O(200));return _f(null,t,e,!0,n)};Pn.hydrateRoot=function(t,e,n){if(!Iv(t))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Q2;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=X2(e,null,t,1,n??null,i,!1,s,o),t[si]=e.current,Yl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new xf(e)};Pn.render=function(t,e,n){if(!wf(e))throw Error(O(200));return _f(null,t,e,!1,n)};Pn.unmountComponentAtNode=function(t){if(!wf(t))throw Error(O(40));return t._reactRootContainer?(Xs(function(){_f(null,null,t,!1,function(){t._reactRootContainer=null,t[si]=null})}),!0):!1};Pn.unstable_batchedUpdates=wv;Pn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!wf(n))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return _f(t,e,n,!1,r)};Pn.version="18.2.0-next-9e3b772b8-20220608";function Y2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Y2)}catch(t){console.error(t)}}Y2(),Xb.exports=Pn;var mo=Xb.exports,a_=mo;Eg.createRoot=a_.createRoot,Eg.hydrateRoot=a_.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function va(){return va=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},va.apply(this,arguments)}var Mi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Mi||(Mi={}));const l_="popstate";function d5(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=po(i.location.hash.substr(1));return p0("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:oh(s))}function r(i,s){Ef(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return f5(e,n,r,t)}function rt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ef(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function h5(){return Math.random().toString(36).substr(2,8)}function c_(t,e){return{usr:t.state,key:t.key,idx:e}}function p0(t,e,n,r){return n===void 0&&(n=null),va({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?po(e):e,{state:n,key:e&&e.key||r||h5()})}function oh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function po(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function f5(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Mi.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(va({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Mi.Pop;let _=d(),v=_==null?null:_-c;c=_,l&&l({action:a,location:x.location,delta:v})}function m(_,v){a=Mi.Push;let g=p0(x.location,_,v);n&&n(g,_),c=d()+1;let w=c_(g,c),E=x.createHref(g);try{o.pushState(w,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(E)}s&&l&&l({action:a,location:x.location,delta:1})}function p(_,v){a=Mi.Replace;let g=p0(x.location,_,v);n&&n(g,_),c=d();let w=c_(g,c),E=x.createHref(g);o.replaceState(w,"",E),s&&l&&l({action:a,location:x.location,delta:0})}function y(_){let v=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof _=="string"?_:oh(_);return rt(v,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,v)}let x={get action(){return a},get location(){return t(i,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(l_,h),l=_,()=>{i.removeEventListener(l_,h),l=null}},createHref(_){return e(i,_)},createURL:y,encodeLocation(_){let v=y(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:p,go(_){return o.go(_)}};return x}var u_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(u_||(u_={}));function m5(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?po(e):e,i=Cv(r.pathname||"/",n);if(i==null)return null;let s=J2(t);p5(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=b5(s[a],I5(i));return o}function J2(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(rt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Gi([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(rt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),J2(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:E5(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of Z2(s.path))i(s,o,l)}),e}function Z2(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Z2(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function p5(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:S5(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const g5=/^:\w+$/,y5=3,v5=2,x5=1,w5=10,_5=-2,d_=t=>t==="*";function E5(t,e){let n=t.split("/"),r=n.length;return n.some(d_)&&(r+=_5),e&&(r+=v5),n.filter(i=>!d_(i)).reduce((i,s)=>i+(g5.test(s)?y5:s===""?x5:w5),r)}function S5(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function b5(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",d=k5({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!d)return null;Object.assign(r,d.params);let h=a.route;s.push({params:r,pathname:Gi([i,d.pathname]),pathnameBase:P5(Gi([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=Gi([i,d.pathnameBase]))}return s}function k5(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=T5(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,h)=>{if(d==="*"){let m=a[h]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}return c[d]=C5(a[h]||"",d),c},{}),pathname:s,pathnameBase:o,pattern:t}}function T5(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ef(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function I5(t){try{return decodeURI(t)}catch(e){return Ef(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function C5(t,e){try{return decodeURIComponent(t)}catch(n){return Ef(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Cv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function A5(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?po(t):t;return{pathname:n?n.startsWith("/")?n:R5(n,e):e,search:N5(r),hash:D5(i)}}function R5(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function yp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Av(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Rv(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=po(t):(i=va({},t),rt(!i.pathname||!i.pathname.includes("?"),yp("?","pathname","search",i)),rt(!i.pathname||!i.pathname.includes("#"),yp("#","pathname","hash",i)),rt(!i.search||!i.search.includes("#"),yp("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let h=e.length-1;if(o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;i.pathname=m.join("/")}a=h>=0?e[h]:"/"}let l=A5(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Gi=t=>t.join("/").replace(/\/\/+/g,"/"),P5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),N5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,D5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,j5=function(e,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let i=new Headers(r.headers);return i.set("Location",e),new Response(null,va({},r,{headers:i}))};function O5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const eT=["post","put","patch","delete"];new Set(eT);const M5=["get",...eT];new Set(M5);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ah(){return ah=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ah.apply(this,arguments)}const Pv=f.createContext(null),L5=f.createContext(null),Fa=f.createContext(null),Sf=f.createContext(null),Fr=f.createContext({outlet:null,matches:[],isDataRoute:!1}),tT=f.createContext(null);function F5(t,e){let{relative:n}=e===void 0?{}:e;$a()||rt(!1);let{basename:r,navigator:i}=f.useContext(Fa),{hash:s,pathname:o,search:a}=rT(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Gi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function $a(){return f.useContext(Sf)!=null}function Dn(){return $a()||rt(!1),f.useContext(Sf).location}function nT(t){f.useContext(Fa).static||f.useLayoutEffect(t)}function fn(){let{isDataRoute:t}=f.useContext(Fr);return t?Z5():$5()}function $5(){$a()||rt(!1);let t=f.useContext(Pv),{basename:e,navigator:n}=f.useContext(Fa),{matches:r}=f.useContext(Fr),{pathname:i}=Dn(),s=JSON.stringify(Av(r).map(l=>l.pathnameBase)),o=f.useRef(!1);return nT(()=>{o.current=!0}),f.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=Rv(l,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Gi([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,s,i,t])}const z5=f.createContext(null);function B5(t){let e=f.useContext(Fr).outlet;return e&&f.createElement(z5.Provider,{value:t},e)}function bf(){let{matches:t}=f.useContext(Fr),e=t[t.length-1];return e?e.params:{}}function rT(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=f.useContext(Fr),{pathname:i}=Dn(),s=JSON.stringify(Av(r).map(o=>o.pathnameBase));return f.useMemo(()=>Rv(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}function V5(t,e){return U5(t,e)}function U5(t,e,n){$a()||rt(!1);let{navigator:r}=f.useContext(Fa),{matches:i}=f.useContext(Fr),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=Dn(),c;if(e){var d;let x=typeof e=="string"?po(e):e;a==="/"||(d=x.pathname)!=null&&d.startsWith(a)||rt(!1),c=x}else c=l;let h=c.pathname||"/",m=a==="/"?h:h.slice(a.length)||"/",p=m5(t,{pathname:m}),y=K5(p&&p.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:Gi([a,r.encodeLocation?r.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?a:Gi([a,r.encodeLocation?r.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,n);return e&&y?f.createElement(Sf.Provider,{value:{location:ah({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Mi.Pop}},y):y}function W5(){let t=J5(),e=O5(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},e),n?f.createElement("pre",{style:i},n):null,s)}const H5=f.createElement(W5,null);class q5 extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?f.createElement(Fr.Provider,{value:this.props.routeContext},f.createElement(tT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function G5(t){let{routeContext:e,match:n,children:r}=t,i=f.useContext(Pv);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(Fr.Provider,{value:e},r)}function K5(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let s=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=s.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||rt(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,l,c)=>{let d=l.route.id?o==null?void 0:o[l.route.id]:null,h=null;n&&(h=l.route.errorElement||H5);let m=e.concat(s.slice(0,c+1)),p=()=>{let y;return d?y=h:l.route.Component?y=f.createElement(l.route.Component,null):l.route.element?y=l.route.element:y=a,f.createElement(G5,{match:l,routeContext:{outlet:a,matches:m,isDataRoute:n!=null},children:y})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?f.createElement(q5,{location:n.location,revalidation:n.revalidation,component:h,error:d,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}var g0;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(g0||(g0={}));var oc;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(oc||(oc={}));function X5(t){let e=f.useContext(Pv);return e||rt(!1),e}function Q5(t){let e=f.useContext(L5);return e||rt(!1),e}function Y5(t){let e=f.useContext(Fr);return e||rt(!1),e}function iT(t){let e=Y5(),n=e.matches[e.matches.length-1];return n.route.id||rt(!1),n.route.id}function J5(){var t;let e=f.useContext(tT),n=Q5(oc.UseRouteError),r=iT(oc.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function Z5(){let{router:t}=X5(g0.UseNavigateStable),e=iT(oc.UseNavigateStable),n=f.useRef(!1);return nT(()=>{n.current=!0}),f.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ah({fromRouteId:e},s)))},[t,e])}function eD(t){let{to:e,replace:n,state:r,relative:i}=t;$a()||rt(!1);let{matches:s}=f.useContext(Fr),{pathname:o}=Dn(),a=fn(),l=Rv(e,Av(s).map(d=>d.pathnameBase),o,i==="path"),c=JSON.stringify(l);return f.useEffect(()=>a(JSON.parse(c),{replace:n,state:r,relative:i}),[a,c,i,n,r]),null}function sT(t){return B5(t.context)}function Si(t){rt(!1)}function tD(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Mi.Pop,navigator:s,static:o=!1}=t;$a()&&rt(!1);let a=e.replace(/^\/*/,"/"),l=f.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=po(r));let{pathname:c="/",search:d="",hash:h="",state:m=null,key:p="default"}=r,y=f.useMemo(()=>{let x=Cv(c,a);return x==null?null:{location:{pathname:x,search:d,hash:h,state:m,key:p},navigationType:i}},[a,c,d,h,m,p,i]);return y==null?null:f.createElement(Fa.Provider,{value:l},f.createElement(Sf.Provider,{children:n,value:y}))}function nD(t){let{children:e,location:n}=t;return V5(y0(e),n)}var h_;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(h_||(h_={}));new Promise(()=>{});function y0(t,e){e===void 0&&(e=[]);let n=[];return f.Children.forEach(t,(r,i)=>{if(!f.isValidElement(r))return;let s=[...e,i];if(r.type===f.Fragment){n.push.apply(n,y0(r.props.children,s));return}r.type!==Si&&rt(!1),!r.props.index||!r.props.children||rt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=y0(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function v0(){return v0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v0.apply(this,arguments)}function rD(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function iD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function sD(t,e){return t.button===0&&(!e||e==="_self")&&!iD(t)}const oD=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],aD="startTransition",f_=Ly[aD];function lD(t){let{basename:e,children:n,future:r,window:i}=t,s=f.useRef();s.current==null&&(s.current=d5({window:i,v5Compat:!0}));let o=s.current,[a,l]=f.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=f.useCallback(h=>{c&&f_?f_(()=>l(h)):l(h)},[l,c]);return f.useLayoutEffect(()=>o.listen(d),[o,d]),f.createElement(tD,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const cD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kr=f.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d}=e,h=rD(e,oD),{basename:m}=f.useContext(Fa),p,y=!1;if(typeof c=="string"&&uD.test(c)&&(p=c,cD))try{let g=new URL(window.location.href),w=c.startsWith("//")?new URL(g.protocol+c):new URL(c),E=Cv(w.pathname,m);w.origin===g.origin&&E!=null?c=E+w.search+w.hash:y=!0}catch{}let x=F5(c,{relative:i}),_=dD(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i});function v(g){r&&r(g),g.defaultPrevented||_(g)}return f.createElement("a",v0({},h,{href:p||x,onClick:y||s?r:v,ref:n,target:l}))});var m_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(m_||(m_={}));var p_;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(p_||(p_={}));function dD(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=fn(),l=Dn(),c=rT(t,{relative:o});return f.useCallback(d=>{if(sD(d,n)){d.preventDefault();let h=r!==void 0?r:oh(l)===oh(c);a(t,{replace:h,state:i,preventScrollReset:s,relative:o})}},[l,a,c,r,i,n,t,s,o])}function oT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=oT(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function hD(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=oT(t))&&(r&&(r+=" "),r+=e);return r}const g_=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,y_=hD,aT=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return y_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const d=n==null?void 0:n[c],h=s==null?void 0:s[c];if(d===null)return null;const m=g_(d)||g_(h);return i[c][m]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,m]=d;return m===void 0||(c[h]=m),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:m,...p}=d;return Object.entries(p).every(y=>{let[x,_]=y;return Array.isArray(_)?_.includes({...s,...a}[x]):{...s,...a}[x]===_})?[...c,h,m]:c},[]);return y_(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function fD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75"}))}const mD=f.forwardRef(fD),lT=mD;function pD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const gD=f.forwardRef(pD),yD=gD;function vD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}))}const xD=f.forwardRef(vD),wD=xD;function _D({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3"}))}const ED=f.forwardRef(_D),SD=ED;function bD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const kD=f.forwardRef(bD),Qs=kD;function TD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"}))}const ID=f.forwardRef(TD),Nv=ID;function CD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"}))}const AD=f.forwardRef(CD),RD=AD;function PD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}))}const ND=f.forwardRef(PD),cT=ND;function DD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953l7.108-4.062A1.125 1.125 0 0121 8.688v8.123zM11.25 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953L9.567 7.71a1.125 1.125 0 011.683.977v8.123z"}))}const jD=f.forwardRef(DD),OD=jD;function MD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const LD=f.forwardRef(MD),uT=LD;function FD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))}const $D=f.forwardRef(FD),Ed=$D;function zD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"}))}const BD=f.forwardRef(zD),VD=BD;function UD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"}))}const WD=f.forwardRef(UD),HD=WD;function qD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const GD=f.forwardRef(qD),KD=GD;function XD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}const QD=f.forwardRef(XD),YD=QD;function JD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const ZD=f.forwardRef(JD),vp=ZD;function ej({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"}))}const tj=f.forwardRef(ej),nj=tj;function rj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const ij=f.forwardRef(rj),dT=ij;function sj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const oj=f.forwardRef(sj),hT=oj;function aj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25"}))}const lj=f.forwardRef(aj),cj=lj;function uj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const dj=f.forwardRef(uj),hj=dj;function fj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))}const mj=f.forwardRef(fj),Dv=mj;function pj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z"}))}const gj=f.forwardRef(pj),fT=gj;function yj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const vj=f.forwardRef(yj),mT=vj;function xj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const wj=f.forwardRef(xj),_j=wj;function Ej({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const Sj=f.forwardRef(Ej),pT=Sj;function bj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const kj=f.forwardRef(bj),v_=kj;function Tj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"}))}const Ij=f.forwardRef(Tj),gT=Ij;function Cj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"}))}const Aj=f.forwardRef(Cj),xa=Aj;function Rj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}))}const Pj=f.forwardRef(Rj),yT=Pj;function Nj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Dj=f.forwardRef(Nj),jv=Dj;function jj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))}const Oj=f.forwardRef(jj),vT=Oj;function Mj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"}))}const Lj=f.forwardRef(Mj),Ov=Lj;function Fj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"}))}const $j=f.forwardRef(Fj),x_=$j;function zj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Bj=f.forwardRef(zj),lh=Bj;function Vj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Uj=f.forwardRef(Vj),Li=Uj;function Wj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"}))}const Hj=f.forwardRef(Wj),qj=Hj;function Gj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"}))}const Kj=f.forwardRef(Gj),Xj=Kj;function Qj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"}))}const Yj=f.forwardRef(Qj),Jj=Yj;function Zj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75L19.5 12m0 0l2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6l4.72-4.72a.75.75 0 011.28.531V19.94a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.506-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.395C2.806 8.757 3.63 8.25 4.51 8.25H6.75z"}))}const eO=f.forwardRef(Zj),tO=eO;function nO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"}))}const rO=f.forwardRef(nO),ac=rO;function iO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const sO=f.forwardRef(iO),lc=sO;function oO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const aO=f.forwardRef(oO),lO=aO;function cO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const uO=f.forwardRef(cO),Ns=uO,dO=aT("inline-flex font-[500] items-center ",{variants:{variant:{default:"",circle:"rounded-[99px] justify-center",list:"flex items-center py-[5px] w-full",primary:"px-[16px] py-[4px]",outline:"border rounded-full"},size:{clear:"",half:"w-1/2",full:"w-full",small:"px-[10px] py-[3px]",normal:"px-[16px] py-[4px]",large:"h-[40px] w-[40px]"},hover:{default:"hover:brightness-90",scale:"transition-transform hover:scale-[1.05]",clear:""}},defaultVariants:{variant:"default",size:"normal",hover:"default"}}),G=({className:t,children:e,variant:n,size:r,disabled:i,isLoading:s,hover:o,onClick:a,...l})=>u.jsxs("button",{type:"button",onClick:c=>a?a(c):"",...l,className:dO({variant:n,size:r,hover:o,className:t}),disabled:s||i,children:[s?u.jsx(Qs,{className:"w-[22px] animate-spin"}):null,!s&&e]}),ch=[{name:"Red",id:"red",type:"dark",bottom_player_bg:"bg-[#3b1113]",side_bar_bg:"bg-[#391b1c]",content_text:"text-[#ca4954]",content_hover_text:"hover:text-[#ca4954]",content_border:"border-[#ca4954]",content_hover_border:"hover:border-[#ca4954]",content_bg:"!bg-[#ca4954]  text-[#fff]",content_code:"#ca4954",content_hover_bg:"hover:!bg-[#ca4954] hover:text-[#fff] ",container:"bg-[#2e0f10]"},{name:"Black",id:"black",type:"dark",bottom_player_bg:"bg-[#181818]",side_bar_bg:"bg-[#242424]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585]  text-[#fff]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff] ",container:"bg-[#1e1e1e]"},{name:"Deep blue",id:"deep_blue",type:"dark",bottom_player_bg:"bg-[#111f3b]",side_bar_bg:"bg-[#1b2639]",content_text:"text-[#0c9e85]",content_hover_text:"hover:text-[#0c9e85]",content_border:"border-[#0c9e85]",content_hover_border:"hover:border-[#0c9e85]",content_bg:"!bg-[#0c9e85]  text-[#fff]",content_code:"#0c9e85",content_hover_bg:"hover:!bg-[#0c9e85] hover:text-[#fff] ",container:"bg-[#0f1a2e]"},{name:"White",id:"white",type:"light",bottom_player_bg:"bg-[#fff]",side_bar_bg:"bg-[#f2f2f2]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585] text-[#fff]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff]",container:"bg-[#fff]"},{name:"Light green",id:"green_light",type:"light",bottom_player_bg:"bg-[#c0d8d8]",side_bar_bg:"bg-[#dde5e5]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585] text-[#fff]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff]",container:"bg-[#ced9d9]"},{name:"Brown",id:"gray",type:"light",bottom_player_bg:"bg-[#dedad1]",side_bar_bg:"bg-[#d9d7d4]",content_text:"text-[#644646]",content_hover_text:"hover:text-[#644646]",content_border:"border-[#644646]",content_hover_border:"hover:border-[#644646]",content_bg:"!bg-[#644646]  text-[#fff]",content_code:"#644646",content_hover_bg:"hover:!bg-[#644646] hover:text-[#fff]",container:"bg-[#e5e3df]"}],hO="End-Of-Stream";class nt extends Error{constructor(){super(hO)}}class fO{constructor(){this.maxStreamReadSize=1*1024*1024,this.endOfStream=!1,this.peekQueue=[]}async peek(e,n,r){const i=await this.read(e,n,r);return this.peekQueue.push(e.subarray(n,n+i)),i}async read(e,n,r){if(r===0)return 0;let i=this.readFromPeekBuffer(e,n,r);if(i+=await this.readRemainderFromStream(e,n+i,r-i),i===0)throw new nt;return i}readFromPeekBuffer(e,n,r){let i=r,s=0;for(;this.peekQueue.length>0&&i>0;){const o=this.peekQueue.pop();if(!o)throw new Error("peekData should be defined");const a=Math.min(o.length,i);e.set(o.subarray(0,a),n+s),s+=a,i-=a,a<o.length&&this.peekQueue.push(o.subarray(a))}return s}async readRemainderFromStream(e,n,r){let i=r,s=0;for(;i>0&&!this.endOfStream;){const o=Math.min(i,this.maxStreamReadSize),a=await this.readFromStream(e,n+s,o);if(a===0)break;s+=a,i-=a}return s}}class mO extends fO{constructor(e){super(),this.reader=e.getReader({mode:"byob"})}async readFromStream(e,n,r){if(this.endOfStream)throw new nt;const i=await this.reader.read(new Uint8Array(r));return i.done&&(this.endOfStream=i.done),i.value?(e.set(i.value,n),i.value.byteLength):0}}class xT{constructor(e){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=(e==null?void 0:e.fileInfo)??{},this.onClose=e==null?void 0:e.onClose}async readToken(e,n=this.position){const r=new Uint8Array(e.len);if(await this.readBuffer(r,{position:n})<e.len)throw new nt;return e.get(r,0)}async peekToken(e,n=this.position){const r=new Uint8Array(e.len);if(await this.peekBuffer(r,{position:n})<e.len)throw new nt;return e.get(r,0)}async readNumber(e){if(await this.readBuffer(this.numBuffer,{length:e.len})<e.len)throw new nt;return e.get(this.numBuffer,0)}async peekNumber(e){if(await this.peekBuffer(this.numBuffer,{length:e.len})<e.len)throw new nt;return e.get(this.numBuffer,0)}async ignore(e){if(this.fileInfo.size!==void 0){const n=this.fileInfo.size-this.position;if(e>n)return this.position+=n,n}return this.position+=e,e}async close(){var e;await((e=this.onClose)==null?void 0:e.call(this))}normalizeOptions(e,n){if(n&&n.position!==void 0&&n.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return n?{mayBeLess:n.mayBeLess===!0,offset:n.offset?n.offset:0,length:n.length?n.length:e.length-(n.offset?n.offset:0),position:n.position?n.position:this.position}:{mayBeLess:!1,offset:0,length:e.length,position:this.position}}}const pO=256e3;class gO extends xT{constructor(e,n){super(n),this.streamReader=e}async readBuffer(e,n){const r=this.normalizeOptions(e,n),i=r.position-this.position;if(i>0)return await this.ignore(i),this.readBuffer(e,n);if(i<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(r.length===0)return 0;const s=await this.streamReader.read(e,r.offset,r.length);if(this.position+=s,(!n||!n.mayBeLess)&&s<r.length)throw new nt;return s}async peekBuffer(e,n){const r=this.normalizeOptions(e,n);let i=0;if(r.position){const s=r.position-this.position;if(s>0){const o=new Uint8Array(r.length+s);return i=await this.peekBuffer(o,{mayBeLess:r.mayBeLess}),e.set(o.subarray(s),r.offset),i-s}if(s<0)throw new Error("Cannot peek from a negative offset in a stream")}if(r.length>0){try{i=await this.streamReader.peek(e,r.offset,r.length)}catch(s){if(n!=null&&n.mayBeLess&&s instanceof nt)return 0;throw s}if(!r.mayBeLess&&i<r.length)throw new nt}return i}async ignore(e){const n=Math.min(pO,e),r=new Uint8Array(n);let i=0;for(;i<e;){const s=e-i,o=await this.readBuffer(r,{length:Math.min(n,s)});if(o<0)return o;i+=o}return i}}class yO extends xT{constructor(e,n){super(n),this.uint8Array=e,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:e.length}async readBuffer(e,n){if(n!=null&&n.position){if(n.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=n.position}const r=await this.peekBuffer(e,n);return this.position+=r,r}async peekBuffer(e,n){const r=this.normalizeOptions(e,n),i=Math.min(this.uint8Array.length-r.position,r.length);if(!r.mayBeLess&&i<r.length)throw new nt;return e.set(this.uint8Array.subarray(r.position,r.position+i),r.offset),i}close(){return super.close()}}function wT(t,e){return new gO(new mO(t),e)}function wa(t,e){return new yO(t,e)}/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var kf=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,c=l>>1,d=-7,h=n?i-1:0,m=n?-1:1,p=t[e+h];for(h+=m,s=p&(1<<-d)-1,p>>=-d,d+=a;d>0;s=s*256+t[e+h],h+=m,d-=8);for(o=s&(1<<-d)-1,s>>=-d,d+=r;d>0;o=o*256+t[e+h],h+=m,d-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(p?-1:1)*o*Math.pow(2,s-r)},Tf=function(t,e,n,r,i,s){var o,a,l,c=s*8-i-1,d=(1<<c)-1,h=d>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:s-1,y=r?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=m/l:e+=m*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=d?(a=0,o=d):o+h>=1?(a=(e*l-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+p]=a&255,p+=y,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+p]=o&255,p+=y,o/=256,c-=8);t[n+p-y]|=x*128};function he(t){return new DataView(t.buffer,t.byteOffset)}const pe={len:1,get(t,e){return he(t).getUint8(e)},put(t,e,n){return he(t).setUint8(e,n),e+1}},Te={len:2,get(t,e){return he(t).getUint16(e,!0)},put(t,e,n){return he(t).setUint16(e,n,!0),e+2}},Re={len:2,get(t,e){return he(t).getUint16(e)},put(t,e,n){return he(t).setUint16(e,n),e+2}},uh={len:3,get(t,e){const n=he(t);return n.getUint8(e)+(n.getUint16(e+1,!0)<<8)},put(t,e,n){const r=he(t);return r.setUint8(e,n&255),r.setUint16(e+1,n>>8,!0),e+3}},tn={len:3,get(t,e){const n=he(t);return(n.getUint16(e)<<8)+n.getUint8(e+2)},put(t,e,n){const r=he(t);return r.setUint16(e,n>>8),r.setUint8(e+2,n&255),e+3}},Q={len:4,get(t,e){return he(t).getUint32(e,!0)},put(t,e,n){return he(t).setUint32(e,n,!0),e+4}},re={len:4,get(t,e){return he(t).getUint32(e)},put(t,e,n){return he(t).setUint32(e,n),e+4}},cc={len:1,get(t,e){return he(t).getInt8(e)},put(t,e,n){return he(t).setInt8(e,n),e+1}},Xr={len:2,get(t,e){return he(t).getInt16(e)},put(t,e,n){return he(t).setInt16(e,n),e+2}},vO={len:2,get(t,e){return he(t).getInt16(e,!0)},put(t,e,n){return he(t).setInt16(e,n,!0),e+2}},xO={len:3,get(t,e){const n=uh.get(t,e);return n>8388607?n-16777216:n},put(t,e,n){const r=he(t);return r.setUint8(e,n&255),r.setUint16(e+1,n>>8,!0),e+3}},Mv={len:3,get(t,e){const n=tn.get(t,e);return n>8388607?n-16777216:n},put(t,e,n){const r=he(t);return r.setUint16(e,n>>8),r.setUint8(e+2,n&255),e+3}},kn={len:4,get(t,e){return he(t).getInt32(e)},put(t,e,n){return he(t).setInt32(e,n),e+4}},et={len:4,get(t,e){return he(t).getInt32(e,!0)},put(t,e,n){return he(t).setInt32(e,n,!0),e+4}},Yt={len:8,get(t,e){return he(t).getBigUint64(e,!0)},put(t,e,n){return he(t).setBigUint64(e,n,!0),e+8}},dh={len:8,get(t,e){return he(t).getBigInt64(e,!0)},put(t,e,n){return he(t).setBigInt64(e,n,!0),e+8}},Lv={len:8,get(t,e){return he(t).getBigUint64(e)},put(t,e,n){return he(t).setBigUint64(e,n),e+8}},_T={len:8,get(t,e){return he(t).getBigInt64(e)},put(t,e,n){return he(t).setBigInt64(e,n),e+8}},wO={len:2,get(t,e){return kf(t,e,!1,10,this.len)},put(t,e,n){return Tf(t,n,e,!1,10,this.len),e+this.len}},_O={len:2,get(t,e){return kf(t,e,!0,10,this.len)},put(t,e,n){return Tf(t,n,e,!0,10,this.len),e+this.len}},ET={len:4,get(t,e){return he(t).getFloat32(e)},put(t,e,n){return he(t).setFloat32(e,n),e+4}},EO={len:4,get(t,e){return he(t).getFloat32(e,!0)},put(t,e,n){return he(t).setFloat32(e,n,!0),e+4}},x0={len:8,get(t,e){return he(t).getFloat64(e)},put(t,e,n){return he(t).setFloat64(e,n),e+8}},SO={len:8,get(t,e){return he(t).getFloat64(e,!0)},put(t,e,n){return he(t).setFloat64(e,n,!0),e+8}},bO={len:10,get(t,e){return kf(t,e,!1,63,this.len)},put(t,e,n){return Tf(t,n,e,!1,63,this.len),e+this.len}},kO={len:10,get(t,e){return kf(t,e,!0,63,this.len)},put(t,e,n){return Tf(t,n,e,!0,63,this.len),e+this.len}};class TO{constructor(e){this.len=e}get(e,n){}}class on{constructor(e){this.len=e}get(e,n){return e.subarray(n,n+this.len)}}class ee{constructor(e,n){this.len=e,this.encoding=n,this.textDecoder=new TextDecoder(n)}get(e,n){return this.textDecoder.decode(e.subarray(n,n+this.len))}}class IO{constructor(e){this.len=e,this.textDecoder=new TextDecoder("windows-1252")}get(e,n=0){return this.textDecoder.decode(e.subarray(n,n+this.len))}}const CO=Object.freeze(Object.defineProperty({__proto__:null,AnsiStringType:IO,Float16_BE:wO,Float16_LE:_O,Float32_BE:ET,Float32_LE:EO,Float64_BE:x0,Float64_LE:SO,Float80_BE:bO,Float80_LE:kO,INT16_BE:Xr,INT16_LE:vO,INT24_BE:Mv,INT24_LE:xO,INT32_BE:kn,INT32_LE:et,INT64_BE:_T,INT64_LE:dh,INT8:cc,IgnoreType:TO,StringType:ee,UINT16_BE:Re,UINT16_LE:Te,UINT24_BE:tn,UINT24_LE:uh,UINT32_BE:re,UINT32_LE:Q,UINT64_BE:Lv,UINT64_LE:Yt,UINT8:pe,Uint8ArrayType:on},Symbol.toStringTag,{value:"Module"})),AO=Object.prototype.toString,RO="[object Uint8Array]",PO="[object ArrayBuffer]";function ST(t,e,n){return t?t.constructor===e?!0:AO.call(t)===n:!1}function bT(t){return ST(t,Uint8Array,RO)}function NO(t){return ST(t,ArrayBuffer,PO)}function DO(t){return bT(t)||NO(t)}function jO(t){if(!bT(t))throw new TypeError(`Expected \`Uint8Array\`, got \`${typeof t}\``)}function OO(t){if(!DO(t))throw new TypeError(`Expected \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof t}\``)}const $u={utf8:new globalThis.TextDecoder("utf8")};function Fv(t,e="utf8"){return OO(t),$u[e]??($u[e]=new globalThis.TextDecoder(e)),$u[e].decode(t)}function kT(t){if(typeof t!="string")throw new TypeError(`Expected \`string\`, got \`${typeof t}\``)}const MO=new globalThis.TextEncoder;function LO(t){return kT(t),MO.encode(t)}const FO=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function $v(t){jO(t);let e="";for(let n=0;n<t.length;n++)e+=FO[t[n]];return e}const w_={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,A:10,B:11,C:12,D:13,E:14,F:15};function __(t){if(kT(t),t.length%2!==0)throw new Error("Invalid Hex string length.");const e=t.length/2,n=new Uint8Array(e);for(let r=0;r<e;r++){const i=w_[t[r*2]],s=w_[t[r*2+1]];if(i===void 0||s===void 0)throw new Error(`Invalid Hex character encountered at position ${r*2}`);n[r]=i<<4|s}return n}function E_(t){const{byteLength:e}=t;if(e===6)return t.getUint16(0)*2**32+t.getUint32(2);if(e===5)return t.getUint8(0)*2**32+t.getUint32(1);if(e===4)return t.getUint32(0);if(e===3)return t.getUint8(0)*2**16+t.getUint16(1);if(e===2)return t.getUint16(0);if(e===1)return t.getUint8(0)}function TT(t,e){const n=t.length,r=e.length;if(r===0||r>n)return-1;const i=n-r;for(let s=0;s<=i;s++){let o=!0;for(let a=0;a<r;a++)if(t[s+a]!==e[a]){o=!1;break}if(o)return s}return-1}function $O(t,e){return TT(t,e)!==-1}function zO(t){return[...t].map(e=>e.charCodeAt(0))}function BO(t,e=0){const n=Number.parseInt(new ee(6).get(t,148).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(n))return!1;let r=8*32;for(let i=e;i<e+148;i++)r+=t[i];for(let i=e+156;i<e+512;i++)r+=t[i];return n===r}const VO={get:(t,e)=>t[e+3]&127|t[e+2]<<7|t[e+1]<<14|t[e]<<21,len:4},UO=["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","elf","macho","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","j2c","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf","jls","pst","dwg","parquet","class","arj","cpio","ace","avro","icc","fbx","vsdx"],WO=["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/wav","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-elf","application/x-mach-binary","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/j2c","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd","image/jls","application/vnd.ms-outlook","image/vnd.dwg","application/x-parquet","application/java-vm","application/x-arj","application/x-cpio","application/x-ace-compressed","application/avro","application/vnd.iccprofile","application/x.autodesk.fbx","application/vnd.visio"],S_=4100;async function IT(t){return new HO().fromBuffer(t)}function mr(t,e,n){n={offset:0,...n};for(const[r,i]of e.entries())if(n.mask){if(i!==(n.mask[r]&t[r+n.offset]))return!1}else if(i!==t[r+n.offset])return!1;return!0}class HO{constructor(e){this.detectors=e==null?void 0:e.customDetectors,this.fromTokenizer=this.fromTokenizer.bind(this),this.fromBuffer=this.fromBuffer.bind(this),this.parse=this.parse.bind(this)}async fromTokenizer(e){const n=e.position;for(const r of this.detectors||[]){const i=await r(e);if(i)return i;if(n!==e.position)return}return this.parse(e)}async fromBuffer(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof e}\``);const n=e instanceof Uint8Array?e:new Uint8Array(e);if((n==null?void 0:n.length)>1)return this.fromTokenizer(wa(n))}async fromBlob(e){return this.fromStream(e.stream())}async fromStream(e){const n=await wT(e);try{return await this.fromTokenizer(n)}finally{await n.close()}}async toDetectionStream(e,n){const{sampleSize:r=S_}=n;let i,s;const o=e.getReader({mode:"byob"});try{const{value:c,done:d}=await o.read(new Uint8Array(r));if(s=c,!d&&c)try{i=await this.fromBuffer(c.slice(0,r))}catch(h){if(!(h instanceof nt))throw h;i=void 0}s=c}finally{o.releaseLock()}const a=new TransformStream({async start(c){c.enqueue(s)},transform(c,d){d.enqueue(c)}}),l=e.pipeThrough(a);return l.fileType=i,l}check(e,n){return mr(this.buffer,e,n)}checkString(e,n){return this.check(zO(e),n)}async parse(e){if(this.buffer=new Uint8Array(S_),e.fileInfo.size===void 0&&(e.fileInfo.size=Number.MAX_SAFE_INTEGER),this.tokenizer=e,await e.peekBuffer(this.buffer,{length:12,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33]))return await e.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.parse(e);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await e.ignore(6);const n=await e.readToken(VO);return e.position+n>e.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await e.ignore(n),this.fromTokenizer(e))}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((this.buffer[0]===67||this.buffer[0]===70)&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255]))return this.check([247],{offset:3})?{ext:"jls",mime:"image/jls"}:{ext:"jpg",mime:"image/jpeg"};if(this.check([79,98,106,1]))return{ext:"avro",mime:"application/avro"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){try{for(;e.position+30<e.fileInfo.size;){await e.readBuffer(this.buffer,{length:30});const n=new DataView(this.buffer.buffer),r={compressedSize:n.getUint32(18,!0),uncompressedSize:n.getUint32(22,!0),filenameLength:n.getUint16(26,!0),extraFieldLength:n.getUint16(28,!0)};if(r.filename=await e.readToken(new ee(r.filenameLength,"utf-8")),await e.ignore(r.extraFieldLength),r.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(r.filename.endsWith(".rels")||r.filename.endsWith(".xml"))switch(r.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};case"visio":return{ext:"vsdx",mime:"application/vnd.visio"};default:break}if(r.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(r.filename.startsWith("3D/")&&r.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(r.filename==="mimetype"&&r.compressedSize===r.uncompressedSize){let i=await e.readToken(new ee(r.compressedSize,"utf-8"));switch(i=i.trim(),i){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}}if(r.compressedSize===0){let i=-1;for(;i<0&&e.position<e.fileInfo.size;)await e.peekBuffer(this.buffer,{mayBeLess:!0}),i=TT(this.buffer,new Uint8Array([80,75,3,4])),await e.ignore(i>=0?i:this.buffer.length)}else await e.ignore(r.compressedSize)}}catch(n){if(!(n instanceof nt))throw n}return{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await e.ignore(28);const n=new Uint8Array(8);return await e.readBuffer(n),mr(n,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:mr(n,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:mr(n,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:mr(n,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:mr(n,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:mr(n,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(this.buffer[2]===3||this.buffer[2]===5||this.buffer[2]===7)&&(this.buffer[3]===4||this.buffer[3]===6||this.buffer[3]===8))return{ext:"zip",mime:"application/zip"};if(this.checkString("ftyp",{offset:4})&&this.buffer[8]&96){const n=new ee(4,"latin1").get(this.buffer,8).replace("\0"," ").trim();switch(n){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return n.startsWith("3g")?n.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF")){try{await e.ignore(1350);const n=10*1024*1024,r=new Uint8Array(Math.min(n,e.fileInfo.size));if(await e.readBuffer(r,{mayBeLess:!0}),$O(r,new TextEncoder().encode("AIPrivateData")))return{ext:"ai",mime:"application/postscript"}}catch(n){if(!(n instanceof nt))throw n}return{ext:"pdf",mime:"application/pdf"}}if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){const n=await this.readTiffHeader(!1);if(n)return n}if(this.check([77,77])){const n=await this.readTiffHeader(!0);if(n)return n}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function n(){const a=await e.peekNumber(pe);let l=128,c=0;for(;!(a&l)&&l!==0;)++c,l>>=1;const d=new Uint8Array(c+1);return await e.readBuffer(d),d}async function r(){const a=await n(),l=await n();l[0]^=128>>l.length-1;const c=Math.min(6,l.length),d=new DataView(a.buffer),h=new DataView(l.buffer,l.length-c,c);return{id:E_(d),len:E_(h)}}async function i(a){for(;a>0;){const l=await r();if(l.id===17026)return(await e.readToken(new ee(l.len))).replaceAll(/\00.*$/g,"");await e.ignore(l.len),--a}}const s=await r();switch(await i(s.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(this.check([82,73,70,70])){if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/wav"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1"))return{ext:"parquet",mime:"application/x-parquet"};if(this.check([207,250,237,254]))return{ext:"macho",mime:"application/x-mach-binary"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190]))return{ext:"class",mime:"application/java-vm"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(this.buffer[6]===0||this.buffer[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){const n=new ee(4,"latin1").get(this.buffer,2);if(n.match("^d*")&&n>=1e3&&n<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>"))return await e.ignore(8),await e.readToken(new ee(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(this.checkString("**ACE",{offset:7})&&(await e.peekBuffer(this.buffer,{length:14,mayBeLess:!0}),this.checkString("**",{offset:12})))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.check([137,80,78,71,13,10,26,10])){await e.ignore(8);async function n(){return{length:await e.readToken(kn),type:await e.readToken(new ee(4,"latin1"))}}do{const r=await n();if(r.length<0)return;switch(r.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await e.ignore(r.length+4)}}while(e.position+8<e.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function n(){const r=new Uint8Array(16);return await e.readBuffer(r),{id:r,size:Number(await e.readToken(Yt))}}for(await e.ignore(30);e.position+24<e.fileInfo.size;){const r=await n();let i=r.size-24;if(mr(r.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const s=new Uint8Array(16);if(i-=await e.readBuffer(s),mr(s,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(mr(s,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await e.ignore(i)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await e.ignore(20),await e.readToken(new ee(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255]))return this.check([0,60,0,63,0,120,0,109,0,108],{offset:2})?{ext:"xml",mime:"application/xml"}:void 0;if(this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await e.peekBuffer(this.buffer,{length:Math.min(256,e.fileInfo.size),mayBeLess:!0}),this.check([97,99,115,112],{offset:36}))return{ext:"icc",mime:"application/vnd.iccprofile"};if(this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){const n=new DataView(this.buffer.buffer).getUint32(12,!0);if(n>12&&this.buffer.length>=n+16)try{const r=new TextDecoder().decode(this.buffer.slice(16,n+16));if(JSON.parse(r).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.checkString("Kaydara FBX Binary  \0"))return{ext:"fbx",mime:"application/x.autodesk.fbx"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await e.peekBuffer(this.buffer,{length:Math.min(512,e.fileInfo.size),mayBeLess:!0}),BO(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254]))return this.check([60,0,63,0,120,0,109,0,108,0],{offset:2})?{ext:"xml",mime:"application/xml"}:this.check([255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0],{offset:2})?{ext:"skp",mime:"application/vnd.sketchup.skp"}:void 0;if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(this.buffer.length>=2&&this.check([255,224],{offset:0,mask:[255,224]})){if(this.check([16],{offset:1,mask:[22]}))return this.check([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(this.check([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}async readTiffTag(e){const n=await this.tokenizer.readToken(e?Re:Te);switch(this.tokenizer.ignore(10),n){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"}}}async readTiffIFD(e){const n=await this.tokenizer.readToken(e?Re:Te);for(let r=0;r<n;++r){const i=await this.readTiffTag(e);if(i)return i}}async readTiffHeader(e){const n=(e?Re:Te).get(this.buffer,2),r=(e?re:Q).get(this.buffer,4);if(n===42){if(r>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(r>=8&&(this.check([28,0,254,0],{offset:8})||this.check([31,0,11,0],{offset:8})))return{ext:"nef",mime:"image/x-nikon-nef"}}return await this.tokenizer.ignore(r),await this.readTiffIFD(e)??{ext:"tif",mime:"image/tiff"}}if(n===43)return{ext:"tif",mime:"image/tiff"}}}new Set(UO);new Set(WO);var zv={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var b_=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,qO=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,CT=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,GO=/\\([\u000b\u0020-\u00ff])/g,KO=/([\\"])/g,AT=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;zv.format=XO;zv.parse=QO;function XO(t){if(!t||typeof t!="object")throw new TypeError("argument obj is required");var e=t.parameters,n=t.type;if(!n||!AT.test(n))throw new TypeError("invalid type");var r=n;if(e&&typeof e=="object")for(var i,s=Object.keys(e).sort(),o=0;o<s.length;o++){if(i=s[o],!CT.test(i))throw new TypeError("invalid parameter name");r+="; "+i+"="+JO(e[i])}return r}function QO(t){if(!t)throw new TypeError("argument string is required");var e=typeof t=="object"?YO(t):t;if(typeof e!="string")throw new TypeError("argument string is required to be a string");var n=e.indexOf(";"),r=n!==-1?e.slice(0,n).trim():e.trim();if(!AT.test(r))throw new TypeError("invalid media type");var i=new ZO(r.toLowerCase());if(n!==-1){var s,o,a;for(b_.lastIndex=n;o=b_.exec(e);){if(o.index!==n)throw new TypeError("invalid parameter format");n+=o[0].length,s=o[1].toLowerCase(),a=o[2],a.charCodeAt(0)===34&&(a=a.slice(1,-1),a.indexOf("\\")!==-1&&(a=a.replace(GO,"$1"))),i.parameters[s]=a}if(n!==e.length)throw new TypeError("invalid parameter format")}return i}function YO(t){var e;if(typeof t.getHeader=="function"?e=t.getHeader("content-type"):typeof t.headers=="object"&&(e=t.headers&&t.headers["content-type"]),typeof e!="string")throw new TypeError("content-type header is missing from object");return e}function JO(t){var e=String(t);if(CT.test(e))return e;if(e.length>0&&!qO.test(e))throw new TypeError("invalid parameter value");return'"'+e.replace(KO,"\\$1")+'"'}function ZO(t){this.parameters=Object.create(null),this.type=t}/*!
 * media-typer
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */var eM=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/,tM=nM;function nM(t){if(!t)throw new TypeError("argument string is required");if(typeof t!="string")throw new TypeError("argument string is required to be a string");var e=eM.exec(t.toLowerCase());if(!e)throw new TypeError("invalid media type");var n=e[1],r=e[2],i,s=r.lastIndexOf("+");return s!==-1&&(i=r.substr(s+1),r=r.substr(0,s)),new rM(n,r,i)}function rM(t,e,n){this.type=t,this.subtype=e,this.suffix=n}var w0={exports:{}},xp,k_;function iM(){if(k_)return xp;k_=1;var t=1e3,e=t*60,n=e*60,r=n*24,i=r*7,s=r*365.25;xp=function(d,h){h=h||{};var m=typeof d;if(m==="string"&&d.length>0)return o(d);if(m==="number"&&isFinite(d))return h.long?l(d):a(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function o(d){if(d=String(d),!(d.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(h){var m=parseFloat(h[1]),p=(h[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return m*s;case"weeks":case"week":case"w":return m*i;case"days":case"day":case"d":return m*r;case"hours":case"hour":case"hrs":case"hr":case"h":return m*n;case"minutes":case"minute":case"mins":case"min":case"m":return m*e;case"seconds":case"second":case"secs":case"sec":case"s":return m*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function a(d){var h=Math.abs(d);return h>=r?Math.round(d/r)+"d":h>=n?Math.round(d/n)+"h":h>=e?Math.round(d/e)+"m":h>=t?Math.round(d/t)+"s":d+"ms"}function l(d){var h=Math.abs(d);return h>=r?c(d,h,r,"day"):h>=n?c(d,h,n,"hour"):h>=e?c(d,h,e,"minute"):h>=t?c(d,h,t,"second"):d+" ms"}function c(d,h,m,p){var y=h>=m*1.5;return Math.round(d/m)+" "+p+(y?"s":"")}return xp}function sM(t){n.debug=n,n.default=n,n.coerce=l,n.disable=s,n.enable=i,n.enabled=o,n.humanize=iM(),n.destroy=c,Object.keys(t).forEach(d=>{n[d]=t[d]}),n.names=[],n.skips=[],n.formatters={};function e(d){let h=0;for(let m=0;m<d.length;m++)h=(h<<5)-h+d.charCodeAt(m),h|=0;return n.colors[Math.abs(h)%n.colors.length]}n.selectColor=e;function n(d){let h,m=null,p,y;function x(..._){if(!x.enabled)return;const v=x,g=Number(new Date),w=g-(h||g);v.diff=w,v.prev=h,v.curr=g,h=g,_[0]=n.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let E=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(T,k)=>{if(T==="%%")return"%";E++;const b=n.formatters[k];if(typeof b=="function"){const D=_[E];T=b.call(v,D),_.splice(E,1),E--}return T}),n.formatArgs.call(v,_),(v.log||n.log).apply(v,_)}return x.namespace=d,x.useColors=n.useColors(),x.color=n.selectColor(d),x.extend=r,x.destroy=n.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(p!==n.namespaces&&(p=n.namespaces,y=n.enabled(d)),y),set:_=>{m=_}}),typeof n.init=="function"&&n.init(x),x}function r(d,h){const m=n(this.namespace+(typeof h>"u"?":":h)+d);return m.log=this.log,m}function i(d){n.save(d),n.namespaces=d,n.names=[],n.skips=[];let h;const m=(typeof d=="string"?d:"").split(/[\s,]+/),p=m.length;for(h=0;h<p;h++)m[h]&&(d=m[h].replace(/\*/g,".*?"),d[0]==="-"?n.skips.push(new RegExp("^"+d.slice(1)+"$")):n.names.push(new RegExp("^"+d+"$")))}function s(){const d=[...n.names.map(a),...n.skips.map(a).map(h=>"-"+h)].join(",");return n.enable(""),d}function o(d){if(d[d.length-1]==="*")return!0;let h,m;for(h=0,m=n.skips.length;h<m;h++)if(n.skips[h].test(d))return!1;for(h=0,m=n.names.length;h<m;h++)if(n.names[h].test(d))return!0;return!1}function a(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function l(d){return d instanceof Error?d.stack||d.message:d}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var oM=sM;(function(t,e){e.formatArgs=r,e.save=i,e.load=s,e.useColors=n,e.storage=o(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;l.splice(1,0,c,"color: inherit");let d=0,h=0;l[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(d++,m==="%c"&&(h=d))}),l.splice(h,0,c)}e.log=console.debug||console.log||(()=>{});function i(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function s(){let l;try{l=e.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l={}.DEBUG),l}function o(){try{return localStorage}catch{}}t.exports=oM(e);const{formatters:a}=t.exports;a.j=function(l){try{return JSON.stringify(l)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}})(w0,w0.exports);var aM=w0.exports;const De=Lb(aM);var _0;(function(t){t[t.shot=10]="shot",t[t.scene=20]="scene",t[t.track=30]="track",t[t.part=40]="part",t[t.album=50]="album",t[t.edition=60]="edition",t[t.collection=70]="collection"})(_0||(_0={}));var Ys;(function(t){t[t.video=1]="video",t[t.audio=2]="audio",t[t.complex=3]="complex",t[t.logo=4]="logo",t[t.subtitle=17]="subtitle",t[t.button=18]="button",t[t.control=32]="control"})(Ys||(Ys={}));function Qe(t,e,n){return(t[e]&1<<n)!==0}function pn(t,e,n,r){let i=e;if(r==="utf-16le"){for(;t[i]!==0||t[i+1]!==0;){if(i>=n)return n;i+=2}return i}for(;t[i]!==0;){if(i>=n)return n;i++}return i}function RT(t){const e=t.indexOf("\0");return e===-1?t:t.substr(0,e)}function lM(t){const e=t.length;if(e&1)throw new Error("Buffer length must be even");for(let n=0;n<e;n+=2){const r=t[n];t[n]=t[n+1],t[n+1]=r}return t}function ht(t,e){if(t[0]===255&&t[1]===254)return ht(t.subarray(2),e);if(e==="utf-16le"&&t[0]===254&&t[1]===255){if(t.length&1)throw new Error("Expected even number of octets for 16-bit unicode string");return ht(lM(t),e)}return new ee(t.length,e).get(t,0)}function Ci(t){return t=t.replace(/^\x00+/g,""),t=t.replace(/\x00+$/g,""),t}function ve(t,e,n,r){const i=e+~~(n/8),s=n%8;let o=t[i];o&=255>>s;const a=8-s,l=r-a;return l<0?o>>=8-s-r:l>0&&(o<<=l,o|=ve(t,e,n+a,l)),o}function wn(t,e,n){return ve(t,e,n,1)===1}function cM(t){const e=[];for(let n=0,r=t.length;n<r;n++){const i=Number(t.charCodeAt(n)).toString(16);e.push(i.length===1?`0${i}`:i)}return e.join(" ")}function uM(t){return 10*Math.log10(t)}function dM(t){return 10**(t/10)}function hM(t){const e=t.split(" ").map(n=>n.trim().toLowerCase());if(e.length>=1){const n=Number.parseFloat(e[0]);return e.length===2&&e[1]==="db"?{dB:n,ratio:dM(n)}:{dB:uM(n),ratio:n}}}var uc;(function(t){t[t.Other=0]="Other",t[t["32x32 pixels 'file icon' (PNG only)"]=1]="32x32 pixels 'file icon' (PNG only)",t[t["Other file icon"]=2]="Other file icon",t[t["Cover (front)"]=3]="Cover (front)",t[t["Cover (back)"]=4]="Cover (back)",t[t["Leaflet page"]=5]="Leaflet page",t[t["Media (e.g. label side of CD)"]=6]="Media (e.g. label side of CD)",t[t["Lead artist/lead performer/soloist"]=7]="Lead artist/lead performer/soloist",t[t["Artist/performer"]=8]="Artist/performer",t[t.Conductor=9]="Conductor",t[t["Band/Orchestra"]=10]="Band/Orchestra",t[t.Composer=11]="Composer",t[t["Lyricist/text writer"]=12]="Lyricist/text writer",t[t["Recording Location"]=13]="Recording Location",t[t["During recording"]=14]="During recording",t[t["During performance"]=15]="During performance",t[t["Movie/video screen capture"]=16]="Movie/video screen capture",t[t["A bright coloured fish"]=17]="A bright coloured fish",t[t.Illustration=18]="Illustration",t[t["Band/artist logotype"]=19]="Band/artist logotype",t[t["Publisher/Studio logotype"]=20]="Publisher/Studio logotype"})(uc||(uc={}));var T_;(function(t){t[t.other=0]="other",t[t.lyrics=1]="lyrics",t[t.text=2]="text",t[t.movement_part=3]="movement_part",t[t.events=4]="events",t[t.chord=5]="chord",t[t.trivia_pop=6]="trivia_pop"})(T_||(T_={}));var I_;(function(t){t[t.notSynchronized0=0]="notSynchronized0",t[t.mpegFrameNumber=1]="mpegFrameNumber",t[t.milliseconds=2]="milliseconds"})(I_||(I_={}));const PT={get:(t,e)=>t[e+3]&127|t[e+2]<<7|t[e+1]<<14|t[e]<<21,len:4},E0={len:10,get:(t,e)=>({fileIdentifier:new ee(3,"ascii").get(t,e),version:{major:cc.get(t,e+3),revision:cc.get(t,e+4)},flags:{unsynchronisation:Qe(t,e+5,7),isExtendedHeader:Qe(t,e+5,6),expIndicator:Qe(t,e+5,5),footer:Qe(t,e+5,4)},size:PT.get(t,e+6)})},C_={len:10,get:(t,e)=>({size:re.get(t,e),extendedFlags:Re.get(t,e+4),sizeOfPadding:re.get(t,e+6),crcDataPresent:Qe(t,e+4,31)})},NT={len:1,get:(t,e)=>{switch(t[e]){case 0:return{encoding:"latin1"};case 1:return{encoding:"utf-16le",bom:!0};case 2:return{encoding:"utf-16le",bom:!1};case 3:return{encoding:"utf8",bom:!1};default:return{encoding:"utf8",bom:!1}}}},S0={len:4,get:(t,e)=>({encoding:NT.get(t,e),language:new ee(3,"latin1").get(t,e+1)})},A_={len:6,get:(t,e)=>{const n=S0.get(t,e);return{encoding:n.encoding,language:n.language,timeStampFormat:pe.get(t,e+4),contentType:pe.get(t,e+5)}}},hh={year:{multiple:!1},track:{multiple:!1},disk:{multiple:!1},title:{multiple:!1},artist:{multiple:!1},artists:{multiple:!0,unique:!0},albumartist:{multiple:!1},album:{multiple:!1},date:{multiple:!1},originaldate:{multiple:!1},originalyear:{multiple:!1},releasedate:{multiple:!1},comment:{multiple:!0,unique:!1},genre:{multiple:!0,unique:!0},picture:{multiple:!0,unique:!0},composer:{multiple:!0,unique:!0},lyrics:{multiple:!0,unique:!1},albumsort:{multiple:!1,unique:!0},titlesort:{multiple:!1,unique:!0},work:{multiple:!1,unique:!0},artistsort:{multiple:!1,unique:!0},albumartistsort:{multiple:!1,unique:!0},composersort:{multiple:!1,unique:!0},lyricist:{multiple:!0,unique:!0},writer:{multiple:!0,unique:!0},conductor:{multiple:!0,unique:!0},remixer:{multiple:!0,unique:!0},arranger:{multiple:!0,unique:!0},engineer:{multiple:!0,unique:!0},producer:{multiple:!0,unique:!0},technician:{multiple:!0,unique:!0},djmixer:{multiple:!0,unique:!0},mixer:{multiple:!0,unique:!0},label:{multiple:!0,unique:!0},grouping:{multiple:!1},subtitle:{multiple:!0},discsubtitle:{multiple:!1},totaltracks:{multiple:!1},totaldiscs:{multiple:!1},compilation:{multiple:!1},rating:{multiple:!0},bpm:{multiple:!1},mood:{multiple:!1},media:{multiple:!1},catalognumber:{multiple:!0,unique:!0},tvShow:{multiple:!1},tvShowSort:{multiple:!1},tvSeason:{multiple:!1},tvEpisode:{multiple:!1},tvEpisodeId:{multiple:!1},tvNetwork:{multiple:!1},podcast:{multiple:!1},podcasturl:{multiple:!1},releasestatus:{multiple:!1},releasetype:{multiple:!0},releasecountry:{multiple:!1},script:{multiple:!1},language:{multiple:!1},copyright:{multiple:!1},license:{multiple:!1},encodedby:{multiple:!1},encodersettings:{multiple:!1},gapless:{multiple:!1},barcode:{multiple:!1},isrc:{multiple:!0},asin:{multiple:!1},musicbrainz_recordingid:{multiple:!1},musicbrainz_trackid:{multiple:!1},musicbrainz_albumid:{multiple:!1},musicbrainz_artistid:{multiple:!0},musicbrainz_albumartistid:{multiple:!0},musicbrainz_releasegroupid:{multiple:!1},musicbrainz_workid:{multiple:!1},musicbrainz_trmid:{multiple:!1},musicbrainz_discid:{multiple:!1},acoustid_id:{multiple:!1},acoustid_fingerprint:{multiple:!1},musicip_puid:{multiple:!1},musicip_fingerprint:{multiple:!1},website:{multiple:!1},"performer:instrument":{multiple:!0,unique:!0},averageLevel:{multiple:!1},peakLevel:{multiple:!1},notes:{multiple:!0,unique:!1},key:{multiple:!1},originalalbum:{multiple:!1},originalartist:{multiple:!1},discogs_artist_id:{multiple:!0,unique:!0},discogs_release_id:{multiple:!1},discogs_label_id:{multiple:!1},discogs_master_release_id:{multiple:!1},discogs_votes:{multiple:!1},discogs_rating:{multiple:!1},replaygain_track_peak:{multiple:!1},replaygain_track_gain:{multiple:!1},replaygain_album_peak:{multiple:!1},replaygain_album_gain:{multiple:!1},replaygain_track_minmax:{multiple:!1},replaygain_album_minmax:{multiple:!1},replaygain_undo:{multiple:!1},description:{multiple:!0},longDescription:{multiple:!1},category:{multiple:!0},hdVideo:{multiple:!1},keywords:{multiple:!0},movement:{multiple:!1},movementIndex:{multiple:!1},movementTotal:{multiple:!1},podcastId:{multiple:!1},showMovement:{multiple:!1},stik:{multiple:!1}};function fM(t){return hh[t]&&!hh[t].multiple}function mM(t){return!hh[t].multiple||hh[t].unique||!1}class En{static toIntOrNull(e){const n=Number.parseInt(e,10);return Number.isNaN(n)?null:n}static normalizeTrack(e){const n=e.toString().split("/");return{no:Number.parseInt(n[0],10)||null,of:Number.parseInt(n[1],10)||null}}constructor(e,n){this.tagTypes=e,this.tagMap=n}mapGenericTag(e,n){e={id:e.id,value:e.value},this.postMap(e,n);const r=this.getCommonName(e.id);return r?{id:r,value:e.value}:null}getCommonName(e){return this.tagMap[e]}postMap(e,n){}}En.maxRatingScore=1;const pM={title:"title",artist:"artist",album:"album",year:"year",comment:"comment",track:"track",genre:"genre"};class gM extends En{constructor(){super(["ID3v1"],pM)}}class Uc extends En{constructor(e,n){const r={};for(const i of Object.keys(n))r[i.toUpperCase()]=n[i];super(e,r)}getCommonName(e){return this.tagMap[e.toUpperCase()]}}const yM={TIT2:"title",TPE1:"artist","TXXX:Artists":"artists",TPE2:"albumartist",TALB:"album",TDRV:"date",TORY:"originalyear",TPOS:"disk",TCON:"genre",APIC:"picture",TCOM:"composer",USLT:"lyrics",TSOA:"albumsort",TSOT:"titlesort",TOAL:"originalalbum",TSOP:"artistsort",TSO2:"albumartistsort",TSOC:"composersort",TEXT:"lyricist","TXXX:Writer":"writer",TPE3:"conductor",TPE4:"remixer","IPLS:arranger":"arranger","IPLS:engineer":"engineer","IPLS:producer":"producer","IPLS:DJ-mix":"djmixer","IPLS:mix":"mixer",TPUB:"label",TIT1:"grouping",TIT3:"subtitle",TRCK:"track",TCMP:"compilation",POPM:"rating",TBPM:"bpm",TMED:"media","TXXX:CATALOGNUMBER":"catalognumber","TXXX:MusicBrainz Album Status":"releasestatus","TXXX:MusicBrainz Album Type":"releasetype","TXXX:MusicBrainz Album Release Country":"releasecountry","TXXX:RELEASECOUNTRY":"releasecountry","TXXX:SCRIPT":"script",TLAN:"language",TCOP:"copyright",WCOP:"license",TENC:"encodedby",TSSE:"encodersettings","TXXX:BARCODE":"barcode","TXXX:ISRC":"isrc",TSRC:"isrc","TXXX:ASIN":"asin","TXXX:originalyear":"originalyear","UFID:http://musicbrainz.org":"musicbrainz_recordingid","TXXX:MusicBrainz Release Track Id":"musicbrainz_trackid","TXXX:MusicBrainz Album Id":"musicbrainz_albumid","TXXX:MusicBrainz Artist Id":"musicbrainz_artistid","TXXX:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","TXXX:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","TXXX:MusicBrainz Work Id":"musicbrainz_workid","TXXX:MusicBrainz TRM Id":"musicbrainz_trmid","TXXX:MusicBrainz Disc Id":"musicbrainz_discid","TXXX:ACOUSTID_ID":"acoustid_id","TXXX:Acoustid Id":"acoustid_id","TXXX:Acoustid Fingerprint":"acoustid_fingerprint","TXXX:MusicIP PUID":"musicip_puid","TXXX:MusicMagic Fingerprint":"musicip_fingerprint",WOAR:"website",TDRC:"date",TYER:"year",TDOR:"originaldate","TIPL:arranger":"arranger","TIPL:engineer":"engineer","TIPL:producer":"producer","TIPL:DJ-mix":"djmixer","TIPL:mix":"mixer",TMOO:"mood",SYLT:"lyrics",TSST:"discsubtitle",TKEY:"key",COMM:"comment",TOPE:"originalartist","PRIV:AverageLevel":"averageLevel","PRIV:PeakLevel":"peakLevel","TXXX:DISCOGS_ARTIST_ID":"discogs_artist_id","TXXX:DISCOGS_ARTISTS":"artists","TXXX:DISCOGS_ARTIST_NAME":"artists","TXXX:DISCOGS_ALBUM_ARTISTS":"albumartist","TXXX:DISCOGS_CATALOG":"catalognumber","TXXX:DISCOGS_COUNTRY":"releasecountry","TXXX:DISCOGS_DATE":"originaldate","TXXX:DISCOGS_LABEL":"label","TXXX:DISCOGS_LABEL_ID":"discogs_label_id","TXXX:DISCOGS_MASTER_RELEASE_ID":"discogs_master_release_id","TXXX:DISCOGS_RATING":"discogs_rating","TXXX:DISCOGS_RELEASED":"date","TXXX:DISCOGS_RELEASE_ID":"discogs_release_id","TXXX:DISCOGS_VOTES":"discogs_votes","TXXX:CATALOGID":"catalognumber","TXXX:STYLE":"genre","TXXX:REPLAYGAIN_TRACK_PEAK":"replaygain_track_peak","TXXX:REPLAYGAIN_TRACK_GAIN":"replaygain_track_gain","TXXX:REPLAYGAIN_ALBUM_PEAK":"replaygain_album_peak","TXXX:REPLAYGAIN_ALBUM_GAIN":"replaygain_album_gain","TXXX:MP3GAIN_MINMAX":"replaygain_track_minmax","TXXX:MP3GAIN_ALBUM_MINMAX":"replaygain_album_minmax","TXXX:MP3GAIN_UNDO":"replaygain_undo",MVNM:"movement",MVIN:"movementIndex",PCST:"podcast",TCAT:"category",TDES:"description",TDRL:"releasedate",TGID:"podcastId",TKWD:"keywords",WFED:"podcasturl",GRP1:"grouping"};class Bv extends Uc{static toRating(e){return{source:e.email,rating:e.rating>0?(e.rating-1)/254*En.maxRatingScore:void 0}}constructor(){super(["ID3v2.3","ID3v2.4"],yM)}postMap(e,n){switch(e.id){case"UFID":{const r=e.value;r.owner_identifier==="http://musicbrainz.org"&&(e.id+=`:${r.owner_identifier}`,e.value=ht(r.identifier,"latin1"))}break;case"PRIV":{const r=e.value;switch(r.owner_identifier){case"AverageLevel":case"PeakValue":e.id+=`:${r.owner_identifier}`,e.value=r.data.length===4?Q.get(r.data,0):null,e.value===null&&n.addWarning("Failed to parse PRIV:PeakValue");break;default:n.addWarning(`Unknown PRIV owner-identifier: ${r.data}`)}}break;case"POPM":e.value=Bv.toRating(e.value);break}}}const vM={Title:"title",Author:"artist","WM/AlbumArtist":"albumartist","WM/AlbumTitle":"album","WM/Year":"date","WM/OriginalReleaseTime":"originaldate","WM/OriginalReleaseYear":"originalyear",Description:"comment","WM/TrackNumber":"track","WM/PartOfSet":"disk","WM/Genre":"genre","WM/Composer":"composer","WM/Lyrics":"lyrics","WM/AlbumSortOrder":"albumsort","WM/TitleSortOrder":"titlesort","WM/ArtistSortOrder":"artistsort","WM/AlbumArtistSortOrder":"albumartistsort","WM/ComposerSortOrder":"composersort","WM/Writer":"lyricist","WM/Conductor":"conductor","WM/ModifiedBy":"remixer","WM/Engineer":"engineer","WM/Producer":"producer","WM/DJMixer":"djmixer","WM/Mixer":"mixer","WM/Publisher":"label","WM/ContentGroupDescription":"grouping","WM/SubTitle":"subtitle","WM/SetSubTitle":"discsubtitle","WM/IsCompilation":"compilation","WM/SharedUserRating":"rating","WM/BeatsPerMinute":"bpm","WM/Mood":"mood","WM/Media":"media","WM/CatalogNo":"catalognumber","MusicBrainz/Album Status":"releasestatus","MusicBrainz/Album Type":"releasetype","MusicBrainz/Album Release Country":"releasecountry","WM/Script":"script","WM/Language":"language",Copyright:"copyright",LICENSE:"license","WM/EncodedBy":"encodedby","WM/EncodingSettings":"encodersettings","WM/Barcode":"barcode","WM/ISRC":"isrc","MusicBrainz/Track Id":"musicbrainz_recordingid","MusicBrainz/Release Track Id":"musicbrainz_trackid","MusicBrainz/Album Id":"musicbrainz_albumid","MusicBrainz/Artist Id":"musicbrainz_artistid","MusicBrainz/Album Artist Id":"musicbrainz_albumartistid","MusicBrainz/Release Group Id":"musicbrainz_releasegroupid","MusicBrainz/Work Id":"musicbrainz_workid","MusicBrainz/TRM Id":"musicbrainz_trmid","MusicBrainz/Disc Id":"musicbrainz_discid","Acoustid/Id":"acoustid_id","Acoustid/Fingerprint":"acoustid_fingerprint","MusicIP/PUID":"musicip_puid","WM/ARTISTS":"artists","WM/InitialKey":"key",ASIN:"asin","WM/Work":"work","WM/AuthorURL":"website","WM/Picture":"picture"};class Vv extends En{static toRating(e){return{rating:Number.parseFloat(e+1)/5}}constructor(){super(["asf"],vM)}postMap(e){switch(e.id){case"WM/SharedUserRating":{const n=e.id.split(":");e.value=Vv.toRating(e.value),e.id=n[0];break}}}}const xM={TT2:"title",TP1:"artist",TP2:"albumartist",TAL:"album",TYE:"year",COM:"comment",TRK:"track",TPA:"disk",TCO:"genre",PIC:"picture",TCM:"composer",TOR:"originaldate",TOT:"originalalbum",TXT:"lyricist",TP3:"conductor",TPB:"label",TT1:"grouping",TT3:"subtitle",TLA:"language",TCR:"copyright",WCP:"license",TEN:"encodedby",TSS:"encodersettings",WAR:"website",PCS:"podcast",TCP:"compilation",TDR:"date",TS2:"albumartistsort",TSA:"albumsort",TSC:"composersort",TSP:"artistsort",TST:"titlesort",WFD:"podcasturl",TBP:"bpm"};class wM extends Uc{constructor(){super(["ID3v2.2"],xM)}}const _M={Title:"title",Artist:"artist",Artists:"artists","Album Artist":"albumartist",Album:"album",Year:"date",Originalyear:"originalyear",Originaldate:"originaldate",Releasedate:"releasedate",Comment:"comment",Track:"track",Disc:"disk",DISCNUMBER:"disk",Genre:"genre","Cover Art (Front)":"picture","Cover Art (Back)":"picture",Composer:"composer",Lyrics:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",Lyricist:"lyricist",Writer:"writer",Conductor:"conductor",MixArtist:"remixer",Arranger:"arranger",Engineer:"engineer",Producer:"producer",DJMixer:"djmixer",Mixer:"mixer",Label:"label",Grouping:"grouping",Subtitle:"subtitle",DiscSubtitle:"discsubtitle",Compilation:"compilation",BPM:"bpm",Mood:"mood",Media:"media",CatalogNumber:"catalognumber",MUSICBRAINZ_ALBUMSTATUS:"releasestatus",MUSICBRAINZ_ALBUMTYPE:"releasetype",RELEASECOUNTRY:"releasecountry",Script:"script",Language:"language",Copyright:"copyright",LICENSE:"license",EncodedBy:"encodedby",EncoderSettings:"encodersettings",Barcode:"barcode",ISRC:"isrc",ASIN:"asin",musicbrainz_trackid:"musicbrainz_recordingid",musicbrainz_releasetrackid:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",Acoustid_Id:"acoustid_id",ACOUSTID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",Weblink:"website",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",MP3GAIN_MINMAX:"replaygain_track_minmax",MP3GAIN_UNDO:"replaygain_undo"};class EM extends Uc{constructor(){super(["APEv2"],_M)}}const SM={"©nam":"title","©ART":"artist",aART:"albumartist","----:com.apple.iTunes:Band":"albumartist","©alb":"album","©day":"date","©cmt":"comment","©com":"comment",trkn:"track",disk:"disk","©gen":"genre",covr:"picture","©wrt":"composer","©lyr":"lyrics",soal:"albumsort",sonm:"titlesort",soar:"artistsort",soaa:"albumartistsort",soco:"composersort","----:com.apple.iTunes:LYRICIST":"lyricist","----:com.apple.iTunes:CONDUCTOR":"conductor","----:com.apple.iTunes:REMIXER":"remixer","----:com.apple.iTunes:ENGINEER":"engineer","----:com.apple.iTunes:PRODUCER":"producer","----:com.apple.iTunes:DJMIXER":"djmixer","----:com.apple.iTunes:MIXER":"mixer","----:com.apple.iTunes:LABEL":"label","©grp":"grouping","----:com.apple.iTunes:SUBTITLE":"subtitle","----:com.apple.iTunes:DISCSUBTITLE":"discsubtitle",cpil:"compilation",tmpo:"bpm","----:com.apple.iTunes:MOOD":"mood","----:com.apple.iTunes:MEDIA":"media","----:com.apple.iTunes:CATALOGNUMBER":"catalognumber",tvsh:"tvShow",tvsn:"tvSeason",tves:"tvEpisode",sosn:"tvShowSort",tven:"tvEpisodeId",tvnn:"tvNetwork",pcst:"podcast",purl:"podcasturl","----:com.apple.iTunes:MusicBrainz Album Status":"releasestatus","----:com.apple.iTunes:MusicBrainz Album Type":"releasetype","----:com.apple.iTunes:MusicBrainz Album Release Country":"releasecountry","----:com.apple.iTunes:SCRIPT":"script","----:com.apple.iTunes:LANGUAGE":"language",cprt:"copyright","©cpy":"copyright","----:com.apple.iTunes:LICENSE":"license","©too":"encodedby",pgap:"gapless","----:com.apple.iTunes:BARCODE":"barcode","----:com.apple.iTunes:ISRC":"isrc","----:com.apple.iTunes:ASIN":"asin","----:com.apple.iTunes:NOTES":"comment","----:com.apple.iTunes:MusicBrainz Track Id":"musicbrainz_recordingid","----:com.apple.iTunes:MusicBrainz Release Track Id":"musicbrainz_trackid","----:com.apple.iTunes:MusicBrainz Album Id":"musicbrainz_albumid","----:com.apple.iTunes:MusicBrainz Artist Id":"musicbrainz_artistid","----:com.apple.iTunes:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","----:com.apple.iTunes:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","----:com.apple.iTunes:MusicBrainz Work Id":"musicbrainz_workid","----:com.apple.iTunes:MusicBrainz TRM Id":"musicbrainz_trmid","----:com.apple.iTunes:MusicBrainz Disc Id":"musicbrainz_discid","----:com.apple.iTunes:Acoustid Id":"acoustid_id","----:com.apple.iTunes:Acoustid Fingerprint":"acoustid_fingerprint","----:com.apple.iTunes:MusicIP PUID":"musicip_puid","----:com.apple.iTunes:fingerprint":"musicip_fingerprint","----:com.apple.iTunes:replaygain_track_gain":"replaygain_track_gain","----:com.apple.iTunes:replaygain_track_peak":"replaygain_track_peak","----:com.apple.iTunes:replaygain_album_gain":"replaygain_album_gain","----:com.apple.iTunes:replaygain_album_peak":"replaygain_album_peak","----:com.apple.iTunes:replaygain_track_minmax":"replaygain_track_minmax","----:com.apple.iTunes:replaygain_album_minmax":"replaygain_album_minmax","----:com.apple.iTunes:replaygain_undo":"replaygain_undo",gnre:"genre","----:com.apple.iTunes:ALBUMARTISTSORT":"albumartistsort","----:com.apple.iTunes:ARTISTS":"artists","----:com.apple.iTunes:ORIGINALDATE":"originaldate","----:com.apple.iTunes:ORIGINALYEAR":"originalyear","----:com.apple.iTunes:RELEASEDATE":"releasedate",desc:"description",ldes:"longDescription","©mvn":"movement","©mvi":"movementIndex","©mvc":"movementTotal","©wrk":"work",catg:"category",egid:"podcastId",hdvd:"hdVideo",keyw:"keywords",shwm:"showMovement",stik:"stik",rate:"rating"},bM="iTunes";class R_ extends Uc{constructor(){super([bM],SM)}postMap(e,n){switch(e.id){case"rate":e.value={source:void 0,rating:Number.parseFloat(e.value)/100};break}}}const kM={TITLE:"title",ARTIST:"artist",ARTISTS:"artists",ALBUMARTIST:"albumartist","ALBUM ARTIST":"albumartist",ALBUM:"album",DATE:"date",ORIGINALDATE:"originaldate",ORIGINALYEAR:"originalyear",RELEASEDATE:"releasedate",COMMENT:"comment",TRACKNUMBER:"track",DISCNUMBER:"disk",GENRE:"genre",METADATA_BLOCK_PICTURE:"picture",COMPOSER:"composer",LYRICS:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",LYRICIST:"lyricist",WRITER:"writer",CONDUCTOR:"conductor",REMIXER:"remixer",ARRANGER:"arranger",ENGINEER:"engineer",PRODUCER:"producer",DJMIXER:"djmixer",MIXER:"mixer",LABEL:"label",GROUPING:"grouping",SUBTITLE:"subtitle",DISCSUBTITLE:"discsubtitle",TRACKTOTAL:"totaltracks",DISCTOTAL:"totaldiscs",COMPILATION:"compilation",RATING:"rating",BPM:"bpm",KEY:"key",MOOD:"mood",MEDIA:"media",CATALOGNUMBER:"catalognumber",RELEASESTATUS:"releasestatus",RELEASETYPE:"releasetype",RELEASECOUNTRY:"releasecountry",SCRIPT:"script",LANGUAGE:"language",COPYRIGHT:"copyright",LICENSE:"license",ENCODEDBY:"encodedby",ENCODERSETTINGS:"encodersettings",BARCODE:"barcode",ISRC:"isrc",ASIN:"asin",MUSICBRAINZ_TRACKID:"musicbrainz_recordingid",MUSICBRAINZ_RELEASETRACKID:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",ACOUSTID_ID:"acoustid_id",ACOUSTID_ID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",WEBSITE:"website",NOTES:"notes",TOTALTRACKS:"totaltracks",TOTALDISCS:"totaldiscs",DISCOGS_ARTIST_ID:"discogs_artist_id",DISCOGS_ARTISTS:"artists",DISCOGS_ARTIST_NAME:"artists",DISCOGS_ALBUM_ARTISTS:"albumartist",DISCOGS_CATALOG:"catalognumber",DISCOGS_COUNTRY:"releasecountry",DISCOGS_DATE:"originaldate",DISCOGS_LABEL:"label",DISCOGS_LABEL_ID:"discogs_label_id",DISCOGS_MASTER_RELEASE_ID:"discogs_master_release_id",DISCOGS_RATING:"discogs_rating",DISCOGS_RELEASED:"date",DISCOGS_RELEASE_ID:"discogs_release_id",DISCOGS_VOTES:"discogs_votes",CATALOGID:"catalognumber",STYLE:"genre",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",REPLAYGAIN_ALBUM_GAIN:"replaygain_album_gain",REPLAYGAIN_ALBUM_PEAK:"replaygain_album_peak",REPLAYGAIN_MINMAX:"replaygain_track_minmax",REPLAYGAIN_ALBUM_MINMAX:"replaygain_album_minmax",REPLAYGAIN_UNDO:"replaygain_undo"};class fh extends En{static toRating(e,n,r){return{source:e?e.toLowerCase():void 0,rating:Number.parseFloat(n)/r*En.maxRatingScore}}constructor(){super(["vorbis"],kM)}postMap(e){if(e.id==="RATING")e.value=fh.toRating(void 0,e.value,100);else if(e.id.indexOf("RATING:")===0){const n=e.id.split(":");e.value=fh.toRating(n[1],e.value,1),e.id=n[0]}}}const TM={IART:"artist",ICRD:"date",INAM:"title",TITL:"title",IPRD:"album",ITRK:"track",IPRT:"track",COMM:"comment",ICMT:"comment",ICNT:"releasecountry",GNRE:"genre",IWRI:"writer",RATE:"rating",YEAR:"year",ISFT:"encodedby",CODE:"encodedby",TURL:"website",IGNR:"genre",IENG:"engineer",ITCH:"technician",IMED:"media",IRPD:"album"};class IM extends En{constructor(){super(["exif"],TM)}}const CM={"segment:title":"title","album:ARTIST":"albumartist","album:ARTISTSORT":"albumartistsort","album:TITLE":"album","album:DATE_RECORDED":"originaldate","album:DATE_RELEASED":"releasedate","album:PART_NUMBER":"disk","album:TOTAL_PARTS":"totaltracks","track:ARTIST":"artist","track:ARTISTSORT":"artistsort","track:TITLE":"title","track:PART_NUMBER":"track","track:MUSICBRAINZ_TRACKID":"musicbrainz_recordingid","track:MUSICBRAINZ_ALBUMID":"musicbrainz_albumid","track:MUSICBRAINZ_ARTISTID":"musicbrainz_artistid","track:PUBLISHER":"label","track:GENRE":"genre","track:ENCODER":"encodedby","track:ENCODER_OPTIONS":"encodersettings","edition:TOTAL_PARTS":"totaldiscs",picture:"picture"};class AM extends Uc{constructor(){super(["matroska"],CM)}}const RM={NAME:"title",AUTH:"artist","(c) ":"copyright",ANNO:"comment"};class PM extends En{constructor(){super(["AIFF"],RM)}}class NM{constructor(){this.tagMappers={},[new gM,new wM,new Bv,new R_,new R_,new fh,new EM,new Vv,new IM,new AM,new PM].forEach(e=>{this.registerTagMapper(e)})}mapTag(e,n,r){if(this.tagMappers[e])return this.tagMappers[e].mapGenericTag(n,r);throw new Error(`No generic tag mapper defined for tag-format: ${e}`)}registerTagMapper(e){for(const n of e.tagTypes)this.tagMappers[n]=e}}const xs=De("music-metadata:collector"),DM=["matroska","APEv2","vorbis","ID3v2.4","ID3v2.3","ID3v2.2","exif","asf","iTunes","AIFF","ID3v1"];class jM{constructor(e){this.opts=e,this.format={tagTypes:[],trackInfo:[]},this.native={},this.common={track:{no:null,of:null},disk:{no:null,of:null},movementIndex:{no:null,of:null}},this.quality={warnings:[]},this.commonOrigin={},this.originPriority={},this.tagMapper=new NM;let n=1;for(const r of DM)this.originPriority[r]=n++;this.originPriority.artificial=500,this.originPriority.id3v1=600}hasAny(){return Object.keys(this.native).length>0}addStreamInfo(e){xs(`streamInfo: type=${e.type?Ys[e.type]:"?"}, codec=${e.codecName}`),this.format.trackInfo.push(e)}setFormat(e,n){var r;xs(`format: ${e} = ${n}`),this.format[e]=n,(r=this.opts)!=null&&r.observer&&this.opts.observer({metadata:this,tag:{type:"format",id:e,value:n}})}async addTag(e,n,r){xs(`tag ${e}.${n} = ${r}`),this.native[e]||(this.format.tagTypes.push(e),this.native[e]=[]),this.native[e].push({id:n,value:r}),await this.toCommon(e,n,r)}addWarning(e){this.quality.warnings.push({message:e})}async postMap(e,n){switch(n.id){case"artist":if(this.commonOrigin.artist===this.originPriority[e])return this.postMap("artificial",{id:"artists",value:n.value});this.common.artists||this.setGenericTag("artificial",{id:"artists",value:n.value});break;case"artists":if((!this.common.artist||this.commonOrigin.artist===this.originPriority.artificial)&&(!this.common.artists||this.common.artists.indexOf(n.value)===-1)){const r=(this.common.artists||[]).concat([n.value]),s={id:"artist",value:OM(r)};this.setGenericTag("artificial",s)}break;case"picture":return this.postFixPicture(n.value).then(r=>{r!==null&&(n.value=r,this.setGenericTag(e,n))});case"totaltracks":this.common.track.of=En.toIntOrNull(n.value);return;case"totaldiscs":this.common.disk.of=En.toIntOrNull(n.value);return;case"movementTotal":this.common.movementIndex.of=En.toIntOrNull(n.value);return;case"track":case"disk":case"movementIndex":{const r=this.common[n.id].of;this.common[n.id]=En.normalizeTrack(n.value),this.common[n.id].of=r??this.common[n.id].of;return}case"bpm":case"year":case"originalyear":n.value=Number.parseInt(n.value,10);break;case"date":{const r=Number.parseInt(n.value.substr(0,4),10);Number.isNaN(r)||(this.common.year=r);break}case"discogs_label_id":case"discogs_release_id":case"discogs_master_release_id":case"discogs_artist_id":case"discogs_votes":n.value=typeof n.value=="string"?Number.parseInt(n.value,10):n.value;break;case"replaygain_track_gain":case"replaygain_track_peak":case"replaygain_album_gain":case"replaygain_album_peak":n.value=hM(n.value);break;case"replaygain_track_minmax":n.value=n.value.split(",").map(r=>Number.parseInt(r,10));break;case"replaygain_undo":{const r=n.value.split(",").map(i=>Number.parseInt(i,10));n.value={leftChannel:r[0],rightChannel:r[1]};break}case"gapless":case"compilation":case"podcast":case"showMovement":n.value=n.value==="1"||n.value===1;break;case"isrc":{const r=this.common[n.id];if(r&&r.indexOf(n.value)!==-1)return;break}case"comment":typeof n.value=="string"&&(n.value={text:n.value}),n.value.descriptor==="iTunPGAP"&&this.setGenericTag(e,{id:"gapless",value:n.value.text==="1"});break}n.value!==null&&this.setGenericTag(e,n)}toCommonMetadata(){return{format:this.format,native:this.native,quality:this.quality,common:this.common}}async postFixPicture(e){if(e.data&&e.data.length>0){if(!e.format){const n=await IT(Uint8Array.from(e.data));if(n)e.format=n.mime;else return null}switch(e.format=e.format.toLocaleLowerCase(),e.format){case"image/jpg":e.format="image/jpeg"}return e}return this.addWarning("Empty picture tag found"),null}async toCommon(e,n,r){const i={id:n,value:r},s=this.tagMapper.mapTag(e,i,this);s&&await this.postMap(e,s)}setGenericTag(e,n){var s;xs(`common.${n.id} = ${n.value}`);const r=this.commonOrigin[n.id]||1e3,i=this.originPriority[e];if(fM(n.id))if(i<=r)this.common[n.id]=n.value,this.commonOrigin[n.id]=i;else return xs(`Ignore native tag (singleton): ${e}.${n.id} = ${n.value}`);else if(i===r)!mM(n.id)||this.common[n.id].indexOf(n.value)===-1?this.common[n.id].push(n.value):xs(`Ignore duplicate value: ${e}.${n.id} = ${n.value}`);else if(i<r)this.common[n.id]=[n.value],this.commonOrigin[n.id]=i;else return xs(`Ignore native tag (list): ${e}.${n.id} = ${n.value}`);(s=this.opts)!=null&&s.observer&&this.opts.observer({metadata:this,tag:{type:"common",id:n.id,value:n.value}})}}function OM(t){return t.length>2?`${t.slice(0,t.length-1).join(", ")} & ${t[t.length-1]}`:t.join(" & ")}class jn{constructor(){this.metadata=void 0,this.tokenizer=void 0,this.options=void 0}init(e,n,r){return this.metadata=e,this.tokenizer=n,this.options=r,this}}const MM=/^[\x21-\x7e©][\x20-\x7e\x00()]{3}/,Be={len:4,get:(t,e)=>{const n=Fv(t.slice(e,e+Be.len),"latin1");if(!n.match(MM))throw new Error(`FourCC contains invalid characters: ${cM(n)} "${n}"`);return n},put:(t,e,n)=>{const r=LO(n);if(r.length!==4)throw new Error("Invalid length");return t.set(r,e),e+4}};var Go;(function(t){t[t.text_utf8=0]="text_utf8",t[t.binary=1]="binary",t[t.external_info=2]="external_info",t[t.reserved=3]="reserved"})(Go||(Go={}));const P_={len:52,get:(t,e)=>({ID:Be.get(t,e),version:Q.get(t,e+4)/1e3,descriptorBytes:Q.get(t,e+8),headerBytes:Q.get(t,e+12),seekTableBytes:Q.get(t,e+16),headerDataBytes:Q.get(t,e+20),apeFrameDataBytes:Q.get(t,e+24),apeFrameDataBytesHigh:Q.get(t,e+28),terminatingDataBytes:Q.get(t,e+32),fileMD5:new on(16).get(t,e+36)})},LM={len:24,get:(t,e)=>({compressionLevel:Te.get(t,e),formatFlags:Te.get(t,e+2),blocksPerFrame:Q.get(t,e+4),finalFrameBlocks:Q.get(t,e+8),totalFrames:Q.get(t,e+12),bitsPerSample:Te.get(t,e+16),channel:Te.get(t,e+18),sampleRate:Q.get(t,e+20)})},Mn={len:32,get:(t,e)=>({ID:new ee(8,"ascii").get(t,e),version:Q.get(t,e+8),size:Q.get(t,e+12),fields:Q.get(t,e+16),flags:DT(Q.get(t,e+20))})},wp={len:8,get:(t,e)=>({size:Q.get(t,e),flags:DT(Q.get(t,e+4))})};function DT(t){return{containsHeader:zu(t,31),containsFooter:zu(t,30),isHeader:zu(t,29),readOnly:zu(t,0),dataType:(t&6)>>1}}function zu(t,e){return(t&1<<e)!==0}const ws=De("music-metadata:parser:APEv2"),N_="APEv2",D_="APETAGEX";class Er extends jn{constructor(){super(...arguments),this.ape={}}static tryParseApeHeader(e,n,r){const i=new Er;return i.init(e,n,r),i.tryParseApeHeader()}static calculateDuration(e){let n=e.totalFrames>1?e.blocksPerFrame*(e.totalFrames-1):0;return n+=e.finalFrameBlocks,n/e.sampleRate}static async findApeFooterOffset(e,n){const r=new Uint8Array(Mn.len);await e.randomRead(r,0,Mn.len,n-Mn.len);const i=Mn.get(r,0);if(i.ID==="APETAGEX")return i.flags.isHeader?ws(`APE Header found at offset=${n-Mn.len}`):(ws(`APE Footer found at offset=${n-Mn.len}`),n-=i.size),{footer:i,offset:n}}static parseTagFooter(e,n,r){const i=Mn.get(n,n.length-Mn.len);if(i.ID!==D_)throw new Error("Unexpected APEv2 Footer ID preamble value.");wa(n);const s=new Er;return s.init(e,wa(n),r),s.parseTags(i)}async tryParseApeHeader(){if(this.tokenizer.fileInfo.size&&this.tokenizer.fileInfo.size-this.tokenizer.position<Mn.len){ws("No APEv2 header found, end-of-file reached");return}const e=await this.tokenizer.peekToken(Mn);if(e.ID===D_)return await this.tokenizer.ignore(Mn.len),this.parseTags(e);if(ws(`APEv2 header not found at offset=${this.tokenizer.position}`),this.tokenizer.fileInfo.size){const n=this.tokenizer.fileInfo.size-this.tokenizer.position,r=new Uint8Array(n);return await this.tokenizer.readBuffer(r),Er.parseTagFooter(this.metadata,r,this.options)}}async parse(){const e=await this.tokenizer.readToken(P_);if(e.ID!=="MAC ")throw new Error("Unexpected descriptor ID");this.ape.descriptor=e;const n=e.descriptorBytes-P_.len,r=await(n>0?this.parseDescriptorExpansion(n):this.parseHeader());return await this.tokenizer.ignore(r.forwardBytes),this.tryParseApeHeader()}async parseTags(e){const n=new Uint8Array(256);let r=e.size-Mn.len;ws(`Parse APE tags at offset=${this.tokenizer.position}, size=${r}`);for(let i=0;i<e.fields;i++){if(r<wp.len){this.metadata.addWarning(`APEv2 Tag-header: ${e.fields-i} items remaining, but no more tag data to read.`);break}const s=await this.tokenizer.readToken(wp);r-=wp.len+s.size,await this.tokenizer.peekBuffer(n,{length:Math.min(n.length,r)});let o=pn(n,0,n.length);const a=await this.tokenizer.readToken(new ee(o,"ascii"));switch(await this.tokenizer.ignore(1),r-=a.length+1,s.flags.dataType){case Go.text_utf8:{const c=(await this.tokenizer.readToken(new ee(s.size,"utf8"))).split(/\x00/g);await Promise.all(c.map(d=>this.metadata.addTag(N_,a,d)));break}case Go.binary:if(this.options.skipCovers)await this.tokenizer.ignore(s.size);else{const l=new Uint8Array(s.size);await this.tokenizer.readBuffer(l),o=pn(l,0,l.length);const c=Fv(l.slice(0,o)),d=l.slice(o+1);await this.metadata.addTag(N_,a,{description:c,data:d})}break;case Go.external_info:ws(`Ignore external info ${a}`),await this.tokenizer.ignore(s.size);break;case Go.reserved:ws(`Ignore external info ${a}`),this.metadata.addWarning(`APEv2 header declares a reserved datatype for "${a}"`),await this.tokenizer.ignore(s.size);break}}}async parseDescriptorExpansion(e){return await this.tokenizer.ignore(e),this.parseHeader()}async parseHeader(){const e=await this.tokenizer.readToken(LM);if(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("container","Monkey's Audio"),this.metadata.setFormat("bitsPerSample",e.bitsPerSample),this.metadata.setFormat("sampleRate",e.sampleRate),this.metadata.setFormat("numberOfChannels",e.channel),this.metadata.setFormat("duration",Er.calculateDuration(e)),!this.ape.descriptor)throw new Error("Missing APE descriptor");return{forwardBytes:this.ape.descriptor.seekTableBytes+this.ape.descriptor.headerDataBytes+this.ape.descriptor.apeFrameDataBytes+this.ape.descriptor.terminatingDataBytes}}}const Bu=De("music-metadata:parser:ID3v1"),mh=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","Alt. Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast-Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big Beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio Theatre","Neue Deutsche Welle","Podcast","Indie Rock","G-Funk","Dubstep","Garage Rock","Psybient"],Vu={len:128,get:(t,e)=>{const n=new ko(3).get(t,e);return n==="TAG"?{header:n,title:new ko(30).get(t,e+3),artist:new ko(30).get(t,e+33),album:new ko(30).get(t,e+63),year:new ko(4).get(t,e+93),comment:new ko(28).get(t,e+97),zeroByte:pe.get(t,e+127),track:pe.get(t,e+126),genre:pe.get(t,e+127)}:null}};class ko{constructor(e){this.len=e,this.stringType=new ee(e,"latin1")}get(e,n){let r=this.stringType.get(e,n);return r=RT(r),r=r.trim(),r.length>0?r:void 0}}class Uv extends jn{static getGenre(e){if(e<mh.length)return mh[e]}async parse(){if(!this.tokenizer.fileInfo.size){Bu("Skip checking for ID3v1 because the file-size is unknown");return}if(this.options.apeHeader){this.tokenizer.ignore(this.options.apeHeader.offset-this.tokenizer.position);const r=new Er;r.init(this.metadata,this.tokenizer,this.options),await r.parseTags(this.options.apeHeader.footer)}const e=this.tokenizer.fileInfo.size-Vu.len;if(this.tokenizer.position>e){Bu("Already consumed the last 128 bytes");return}const n=await this.tokenizer.readToken(Vu,e);if(n){Bu("ID3v1 header found at: pos=%s",this.tokenizer.fileInfo.size-Vu.len);const r=["title","artist","album","comment","track","year"];for(const s of r)n[s]&&n[s]!==""&&await this.addTag(s,n[s]);const i=Uv.getGenre(n.genre);i&&await this.addTag("genre",i)}else Bu("ID3v1 header not found at: pos=%s",this.tokenizer.fileInfo.size-Vu.len)}async addTag(e,n){await this.metadata.addTag("ID3v1",e,n)}}const j_=De("music-metadata:id3v2:frame-parser"),Qn="latin1";function FM(t){const e=[];let n,r="";for(const i of t)if(typeof n=="string")if(i==="("&&n==="")r+="(",n=void 0;else if(i===")"){r!==""&&(e.push(r),r="");const s=O_(n);s&&e.push(s),n=void 0}else n+=i;else i==="("?n="":r+=i;return r&&(e.length===0&&r.match(/^\d*$/)&&(r=O_(r)),r&&e.push(r)),e}function O_(t){if(t==="RX")return"Remix";if(t==="CR")return"Cover";if(t.match(/^\d*$/))return mh[Number.parseInt(t)]}class gn{constructor(e,n){this.major=e,this.warningCollector=n}readData(e,n,r){if(e.length===0){this.warningCollector.addWarning(`id3v2.${this.major} header has empty tag type=${n}`);return}const{encoding:i,bom:s}=NT.get(e,0),o=e.length;let a=0,l=[];const c=gn.getNullTerminatorLength(i);let d;switch(j_(`Parsing tag type=${n}, encoding=${i}, bom=${s}`),n!=="TXXX"&&n[0]==="T"?"T*":n){case"T*":case"GRP1":case"IPLS":case"MVIN":case"MVNM":case"PCS":case"PCST":{let h;try{h=ht(e.slice(1),i).replace(/\x00+$/,"")}catch(m){if(m instanceof Error){this.warningCollector.addWarning(`id3v2.${this.major} type=${n} header has invalid string value: ${m.message}`);break}throw m}switch(n){case"TMCL":case"TIPL":case"IPLS":l=gn.functionList(this.splitValue(n,h));break;case"TRK":case"TRCK":case"TPOS":l=h;break;case"TCOM":case"TEXT":case"TOLY":case"TOPE":case"TPE1":case"TSRC":l=this.splitValue(n,h);break;case"TCO":case"TCON":l=this.splitValue(n,h).map(m=>FM(m)).reduce((m,p)=>m.concat(p),[]);break;case"PCS":case"PCST":l=this.major>=4?this.splitValue(n,h):[h],l=Array.isArray(l)&&l[0]===""?1:0;break;default:l=this.major>=4?this.splitValue(n,h):[h]}break}case"TXXX":{const h=gn.readIdentifierAndData(e,a+1,o,i);l={description:h.id,text:this.splitValue(n,ht(h.data,i).replace(/\x00+$/,""))};break}case"PIC":case"APIC":if(r){const h={};switch(a+=1,this.major){case 2:h.format=ht(e.slice(a,a+3),"latin1"),a+=3;break;case 3:case 4:d=pn(e,a,o,Qn),h.format=ht(e.slice(a,d),Qn),a=d+1;break;default:throw new Error(`Warning: unexpected major versionIndex: ${this.major}`)}h.format=gn.fixPictureMimeType(h.format),h.type=uc[e[a]],a+=1,d=pn(e,a,o,i),h.description=ht(e.slice(a,d),i),a=d+c,h.data=e.slice(a,o),l=h}break;case"CNT":case"PCNT":l=re.get(e,0);break;case"SYLT":{const h=A_.get(e,0);a+=A_.len;const m={descriptor:"",language:h.language,contentType:h.contentType,timeStampFormat:h.timeStampFormat,syncText:[]};let p=!1;for(;a<o;){const y=gn.readNullTerminatedString(e.subarray(a),h.encoding);if(a+=y.len,p){const x=re.get(e,a);a+=re.len,m.syncText.push({text:y.text,timestamp:x})}else m.descriptor=y.text,p=!0}l=m;break}case"ULT":case"USLT":case"COM":case"COMM":{const h=S0.get(e,a);a+=S0.len;const m=gn.readNullTerminatedString(e.subarray(a),h.encoding);a+=m.len;const p=gn.readNullTerminatedString(e.subarray(a),h.encoding);l={language:h.language,descriptor:m.text,text:p.text};break}case"UFID":{const h=gn.readIdentifierAndData(e,a,o,Qn);l={owner_identifier:h.id,identifier:h.data};break}case"PRIV":{const h=gn.readIdentifierAndData(e,a,o,Qn);l={owner_identifier:h.id,data:h.data};break}case"POPM":{d=pn(e,a,o,Qn);const h=ht(e.slice(a,d),Qn);a=d+1;const m=o-a;l={email:h,rating:pe.get(e,a),counter:m>=5?re.get(e,a+1):void 0};break}case"GEOB":{d=pn(e,a+1,o,i);const h=ht(e.slice(a+1,d),Qn);a=d+1,d=pn(e,a,o-a,i);const m=ht(e.slice(a,d),Qn);a=d+1,d=pn(e,a,o-a,i);const p=ht(e.slice(a,d),Qn);l={type:h,filename:m,description:p,data:e.slice(a+1,o)};break}case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":d=pn(e,a+1,o,i),l=ht(e.slice(a,d),Qn);break;case"WXXX":{d=pn(e,a+1,o,i);const h=ht(e.slice(a+1,d),i);a=d+(i==="utf-16le"?2:1),l={description:h,url:ht(e.slice(a,o),Qn)};break}case"WFD":case"WFED":l=ht(e.slice(a+1,pn(e,a+1,o,i)),i);break;case"MCDI":{l=e.slice(0,o);break}default:j_(`Warning: unsupported id3v2-tag-type: ${n}`);break}return l}static readNullTerminatedString(e,n){let r=n.bom?2:0;const i=pn(e,r,e.length,n.encoding),s=e.slice(r,i);return n.encoding==="utf-16le"?r=i+2:r=i+1,{text:ht(s,n.encoding),len:r}}static fixPictureMimeType(e){switch(e=e.toLocaleLowerCase(),e){case"jpg":return"image/jpeg";case"png":return"image/png"}return e}static functionList(e){const n={};for(let r=0;r+1<e.length;r+=2){const i=e[r+1].split(",");n[e[r]]=n[e[r]]?n[e[r]].concat(i):i}return n}splitValue(e,n){let r;return this.major<4?(r=n.split(/\x00/g),r.length>1?this.warningCollector.addWarning(`ID3v2.${this.major} ${e} uses non standard null-separator.`):r=n.split(/\//g)):r=n.split(/\x00/g),gn.trimArray(r)}static trimArray(e){return e.map(n=>n.replace(/\x00+$/,"").trim())}static readIdentifierAndData(e,n,r,i){const s=pn(e,n,r,i),o=ht(e.slice(n,s),i);return n=s+gn.getNullTerminatorLength(i),{id:o,data:e.slice(n,r)}}static getNullTerminatorLength(e){return e==="utf-16le"?2:1}}const M_=new TextDecoder("ascii");class tr{constructor(){this.tokenizer=void 0,this.id3Header=void 0,this.metadata=void 0,this.headerType=void 0,this.options=void 0}static removeUnsyncBytes(e){let n=0,r=0;for(;n<e.length-1;)n!==r&&(e[r]=e[n]),n+=e[n]===255&&e[n+1]===0?2:1,r++;return n<e.length&&(e[r++]=e[n]),e.slice(0,r)}static getFrameHeaderLength(e){switch(e){case 2:return 6;case 3:case 4:return 10;default:throw new Error("header versionIndex is incorrect")}}static readFrameFlags(e){return{status:{tag_alter_preservation:Qe(e,0,6),file_alter_preservation:Qe(e,0,5),read_only:Qe(e,0,4)},format:{grouping_identity:Qe(e,1,7),compression:Qe(e,1,3),encryption:Qe(e,1,2),unsynchronisation:Qe(e,1,1),data_length_indicator:Qe(e,1,0)}}}static readFrameData(e,n,r,i,s){var a,l;const o=new gn(r,s);switch(r){case 2:return o.readData(e,n.id,i);case 3:case 4:return(a=n.flags)!=null&&a.format.unsynchronisation&&(e=tr.removeUnsyncBytes(e)),(l=n.flags)!=null&&l.format.data_length_indicator&&(e=e.slice(4,e.length)),o.readData(e,n.id,i);default:throw new Error(`Unexpected majorVer: ${r}`)}}static makeDescriptionTagName(e,n){return e+(n?`:${n}`:"")}async parse(e,n,r){this.tokenizer=n,this.metadata=e,this.options=r;const i=await this.tokenizer.readToken(E0);if(i.fileIdentifier!=="ID3")throw new Error("expected ID3-header file-identifier 'ID3' was not found");return this.id3Header=i,this.headerType=`ID3v2.${i.version.major}`,i.flags.isExtendedHeader?this.parseExtendedHeader():this.parseId3Data(i.size)}async parseExtendedHeader(){const e=await this.tokenizer.readToken(C_),n=e.size-C_.len;return n>0?this.parseExtendedHeaderData(n,e.size):this.parseId3Data(this.id3Header.size-e.size)}async parseExtendedHeaderData(e,n){return await this.tokenizer.ignore(e),this.parseId3Data(this.id3Header.size-n)}async parseId3Data(e){const n=await this.tokenizer.readToken(new on(e));for(const r of this.parseMetadata(n))switch(r.id){case"TXXX":r.value&&await this.handleTag(r,r.value.text,()=>r.value.description);break;default:await(Array.isArray(r.value)?Promise.all(r.value.map(i=>this.addTag(r.id,i))):this.addTag(r.id,r.value))}}async handleTag(e,n,r,i=s=>s){await Promise.all(n.map(s=>this.addTag(tr.makeDescriptionTagName(e.id,r(s)),i(s))))}async addTag(e,n){await this.metadata.addTag(this.headerType,e,n)}parseMetadata(e){let n=0;const r=[];for(;n!==e.length;){const i=tr.getFrameHeaderLength(this.id3Header.version.major);if(n+i>e.length){this.metadata.addWarning("Illegal ID3v2 tag length");break}const s=e.slice(n,n+i);n+=i;const o=this.readFrameHeader(s,this.id3Header.version.major),a=e.slice(n,n+o.length);n+=o.length;const l=tr.readFrameData(a,o,this.id3Header.version.major,!this.options.skipCovers,this.metadata);l&&r.push({id:o.id,value:l})}return r}readFrameHeader(e,n){let r;switch(n){case 2:r={id:M_.decode(e.slice(0,3)),length:tn.get(e,3)},r.id.match(/[A-Z0-9]{3}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${r.id}`);break;case 3:case 4:r={id:M_.decode(e.slice(0,4)),length:(n===4?PT:re).get(e,4),flags:tr.readFrameFlags(e.slice(8,10))},r.id.match(/[A-Z0-9]{4}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${r.id}`);break;default:throw new Error(`Unexpected majorVer: ${n}`)}return r}}const $M={NONE:"not compressed	PCM	Apple Computer",sowt:"PCM (byte swapped)",fl32:"32-bit floating point IEEE 32-bit float",fl64:"64-bit floating point IEEE 64-bit float	Apple Computer",alaw:"ALaw 2:1	8-bit ITU-T G.711 A-law",ulaw:"µLaw 2:1	8-bit ITU-T G.711 µ-law	Apple Computer",ULAW:"CCITT G.711 u-law 8-bit ITU-T G.711 µ-law",ALAW:"CCITT G.711 A-law 8-bit ITU-T G.711 A-law",FL32:"Float 32	IEEE 32-bit float "};class zM{constructor(e,n){this.isAifc=n;const r=n?22:18;if(e.chunkSize<r)throw new Error(`COMMON CHUNK size should always be at least ${r}`);this.len=e.chunkSize}get(e,n){const r=Re.get(e,n+8)-16398,i=Re.get(e,n+8+2),s={numChannels:Re.get(e,n),numSampleFrames:re.get(e,n+2),sampleSize:Re.get(e,n+6),sampleRate:r<0?i>>Math.abs(r):i<<r};if(this.isAifc){if(s.compressionType=Be.get(e,n+18),this.len>22){const o=pe.get(e,n+22);if(o>0){const a=(o+1)%2;if(23+o+a===this.len)s.compressionName=new ee(o,"latin1").get(e,n+23);else throw new Error("Illegal pstring length")}else s.compressionName=void 0}}else s.compressionName="PCM";return s}}const _p={len:8,get:(t,e)=>({chunkID:Be.get(t,e),chunkSize:Number(BigInt(re.get(t,e+4)))})},Ep=De("music-metadata:parser:aiff");class BM extends jn{constructor(){super(...arguments),this.isCompressed=null}async parse(){if((await this.tokenizer.readToken(_p)).chunkID!=="FORM")throw new Error("Invalid Chunk-ID, expected 'FORM'");const n=await this.tokenizer.readToken(Be);switch(n){case"AIFF":this.metadata.setFormat("container",n),this.isCompressed=!1;break;case"AIFC":this.metadata.setFormat("container","AIFF-C"),this.isCompressed=!0;break;default:throw new Error(`Unsupported AIFF type: ${n}`)}this.metadata.setFormat("lossless",!this.isCompressed);try{for(;!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=_p.len;){Ep(`Reading AIFF chunk at offset=${this.tokenizer.position}`);const r=await this.tokenizer.readToken(_p),i=2*Math.round(r.chunkSize/2),s=await this.readData(r);await this.tokenizer.ignore(i-s)}}catch(r){if(r instanceof nt)Ep("End-of-stream");else throw r}}async readData(e){switch(e.chunkID){case"COMM":{if(this.isCompressed===null)throw new Error("Failed to parse AIFF.COMM chunk when compression type is unknown");const n=await this.tokenizer.readToken(new zM(e,this.isCompressed));return this.metadata.setFormat("bitsPerSample",n.sampleSize),this.metadata.setFormat("sampleRate",n.sampleRate),this.metadata.setFormat("numberOfChannels",n.numChannels),this.metadata.setFormat("numberOfSamples",n.numSampleFrames),this.metadata.setFormat("duration",n.numSampleFrames/n.sampleRate),(n.compressionName||n.compressionType)&&this.metadata.setFormat("codec",n.compressionName??$M[n.compressionType]),e.chunkSize}case"ID3 ":{const n=await this.tokenizer.readToken(new on(e.chunkSize)),r=wa(n);return await new tr().parse(this.metadata,r,this.options),e.chunkSize}case"SSND":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*e.chunkSize/this.metadata.format.duration),0;case"NAME":case"AUTH":case"(c) ":case"ANNO":return this.readTextChunk(e);default:return Ep(`Ignore chunk id=${e.chunkID}, size=${e.chunkSize}`),0}}async readTextChunk(e){const r=(await this.tokenizer.readToken(new ee(e.chunkSize,"ascii"))).split("\0").map(i=>i.trim()).filter(i=>i==null?void 0:i.length);return await Promise.all(r.map(i=>this.metadata.addTag("AIFF",e.chunkID,i))),e.chunkSize}}class C{static fromBin(e,n=0){return new C(C.decode(e,n))}static decode(e,n=0){const r=new DataView(e.buffer,n);return`${r.getUint32(0,!0).toString(16)}-${r.getUint16(4,!0).toString(16)}-${r.getUint16(6,!0).toString(16)}-${r.getUint16(8).toString(16)}-${$v(e.slice(n+10,n+16))}`.toUpperCase()}static decodeMediaType(e){switch(e.str){case C.AudioMedia.str:return"audio";case C.VideoMedia.str:return"video";case C.CommandMedia.str:return"command";case C.Degradable_JPEG_Media.str:return"degradable-jpeg";case C.FileTransferMedia.str:return"file-transfer";case C.BinaryMedia.str:return"binary"}}static encode(e){const n=new Uint8Array(16),r=new DataView(n.buffer);return r.setUint32(0,Number.parseInt(e.slice(0,8),16),!0),r.setUint16(4,Number.parseInt(e.slice(9,13),16),!0),r.setUint16(6,Number.parseInt(e.slice(14,18),16),!0),n.set(__(e.slice(19,23)),8),n.set(__(e.slice(24)),10),n}constructor(e){this.str=e}equals(e){return this.str===e.str}toBin(){return C.encode(this.str)}}C.HeaderObject=new C("75B22630-668E-11CF-A6D9-00AA0062CE6C");C.DataObject=new C("75B22636-668E-11CF-A6D9-00AA0062CE6C");C.SimpleIndexObject=new C("33000890-E5B1-11CF-89F4-00A0C90349CB");C.IndexObject=new C("D6E229D3-35DA-11D1-9034-00A0C90349BE");C.MediaObjectIndexObject=new C("FEB103F8-12AD-4C64-840F-2A1D2F7AD48C");C.TimecodeIndexObject=new C("3CB73FD0-0C4A-4803-953D-EDF7B6228F0C");C.FilePropertiesObject=new C("8CABDCA1-A947-11CF-8EE4-00C00C205365");C.StreamPropertiesObject=new C("B7DC0791-A9B7-11CF-8EE6-00C00C205365");C.HeaderExtensionObject=new C("5FBF03B5-A92E-11CF-8EE3-00C00C205365");C.CodecListObject=new C("86D15240-311D-11D0-A3A4-00A0C90348F6");C.ScriptCommandObject=new C("1EFB1A30-0B62-11D0-A39B-00A0C90348F6");C.MarkerObject=new C("F487CD01-A951-11CF-8EE6-00C00C205365");C.BitrateMutualExclusionObject=new C("D6E229DC-35DA-11D1-9034-00A0C90349BE");C.ErrorCorrectionObject=new C("75B22635-668E-11CF-A6D9-00AA0062CE6C");C.ContentDescriptionObject=new C("75B22633-668E-11CF-A6D9-00AA0062CE6C");C.ExtendedContentDescriptionObject=new C("D2D0A440-E307-11D2-97F0-00A0C95EA850");C.ContentBrandingObject=new C("2211B3FA-BD23-11D2-B4B7-00A0C955FC6E");C.StreamBitratePropertiesObject=new C("7BF875CE-468D-11D1-8D82-006097C9A2B2");C.ContentEncryptionObject=new C("2211B3FB-BD23-11D2-B4B7-00A0C955FC6E");C.ExtendedContentEncryptionObject=new C("298AE614-2622-4C17-B935-DAE07EE9289C");C.DigitalSignatureObject=new C("2211B3FC-BD23-11D2-B4B7-00A0C955FC6E");C.PaddingObject=new C("1806D474-CADF-4509-A4BA-9AABCB96AAE8");C.ExtendedStreamPropertiesObject=new C("14E6A5CB-C672-4332-8399-A96952065B5A");C.AdvancedMutualExclusionObject=new C("A08649CF-4775-4670-8A16-6E35357566CD");C.GroupMutualExclusionObject=new C("D1465A40-5A79-4338-B71B-E36B8FD6C249");C.StreamPrioritizationObject=new C("D4FED15B-88D3-454F-81F0-ED5C45999E24");C.BandwidthSharingObject=new C("A69609E6-517B-11D2-B6AF-00C04FD908E9");C.LanguageListObject=new C("7C4346A9-EFE0-4BFC-B229-393EDE415C85");C.MetadataObject=new C("C5F8CBEA-5BAF-4877-8467-AA8C44FA4CCA");C.MetadataLibraryObject=new C("44231C94-9498-49D1-A141-1D134E457054");C.IndexParametersObject=new C("D6E229DF-35DA-11D1-9034-00A0C90349BE");C.MediaObjectIndexParametersObject=new C("6B203BAD-3F11-48E4-ACA8-D7613DE2CFA7");C.TimecodeIndexParametersObject=new C("F55E496D-9797-4B5D-8C8B-604DFE9BFB24");C.CompatibilityObject=new C("26F18B5D-4584-47EC-9F5F-0E651F0452C9");C.AdvancedContentEncryptionObject=new C("43058533-6981-49E6-9B74-AD12CB86D58C");C.AudioMedia=new C("F8699E40-5B4D-11CF-A8FD-00805F5C442B");C.VideoMedia=new C("BC19EFC0-5B4D-11CF-A8FD-00805F5C442B");C.CommandMedia=new C("59DACFC0-59E6-11D0-A3AC-00A0C90348F6");C.JFIF_Media=new C("B61BE100-5B4E-11CF-A8FD-00805F5C442B");C.Degradable_JPEG_Media=new C("35907DE0-E415-11CF-A917-00805F5C442B");C.FileTransferMedia=new C("91BD222C-F21C-497A-8B6D-5AA86BFC0185");C.BinaryMedia=new C("3AFB65E2-47EF-40F2-AC2C-70A90D71D343");C.ASF_Index_Placeholder_Object=new C("D9AADE20-7C17-4F9C-BC28-8555DD98E2A2");function VM(t){return UM[t]}function If(t){return Ci(ht(t,"utf-16le"))}const UM=[If,L_,WM,HM,qM,jT,L_];function L_(t){return new Uint8Array(t)}function WM(t,e=0){return jT(t,e)===1}function HM(t,e=0){return Q.get(t,e)}function qM(t,e=0){return Yt.get(t,e)}function jT(t,e=0){return Te.get(t,e)}var F_;(function(t){t[t.UnicodeString=0]="UnicodeString",t[t.ByteArray=1]="ByteArray",t[t.Bool=2]="Bool",t[t.DWord=3]="DWord",t[t.QWord=4]="QWord",t[t.Word=5]="Word"})(F_||(F_={}));const GM={len:30,get:(t,e)=>({objectId:C.fromBin(t,e),objectSize:Number(Yt.get(t,e+16)),numberOfHeaderObjects:Q.get(t,e+24)})},ks={len:24,get:(t,e)=>({objectId:C.fromBin(t,e),objectSize:Number(Yt.get(t,e+16))})};class go{constructor(e){this.len=Number(e.objectSize)-ks.len}postProcessTag(e,n,r,i){if(n==="WM/Picture")e.push({id:n,value:Wv.fromBuffer(i)});else{const s=VM(r);if(!s)throw new Error(`unexpected value headerType: ${r}`);e.push({id:n,value:s(i)})}}}class $_ extends go{get(e,n){return null}}class b0 extends go{get(e,n){return{fileId:C.fromBin(e,n),fileSize:Yt.get(e,n+16),creationDate:Yt.get(e,n+24),dataPacketsCount:Yt.get(e,n+32),playDuration:Yt.get(e,n+40),sendDuration:Yt.get(e,n+48),preroll:Yt.get(e,n+56),flags:{broadcast:Qe(e,n+64,24),seekable:Qe(e,n+64,25)},minimumDataPacketSize:Q.get(e,n+68),maximumDataPacketSize:Q.get(e,n+72),maximumBitrate:Q.get(e,n+76)}}}b0.guid=C.FilePropertiesObject;class k0 extends go{get(e,n){return{streamType:C.decodeMediaType(C.fromBin(e,n)),errorCorrectionType:C.fromBin(e,n+8)}}}k0.guid=C.StreamPropertiesObject;class T0{constructor(){this.len=22}get(e,n){const r=new DataView(e.buffer,n);return{reserved1:C.fromBin(e,n),reserved2:r.getUint16(16,!0),extensionDataSize:r.getUint16(18,!0)}}}T0.guid=C.HeaderExtensionObject;const KM={len:20,get:(t,e)=>({entryCount:new DataView(t.buffer,e).getUint16(16,!0)})};async function z_(t){const e=await t.readNumber(Te);return(await t.readToken(new ee(e*2,"utf-16le"))).replace("\0","")}async function XM(t){const e=await t.readToken(KM),n=[];for(let r=0;r<e.entryCount;++r)n.push(await YM(t));return n}async function QM(t){const e=await t.readNumber(Te),n=new Uint8Array(e);return await t.readBuffer(n),n}async function YM(t){const e=await t.readNumber(Te);return{type:{videoCodec:(e&1)===1,audioCodec:(e&2)===2},codecName:await z_(t),description:await z_(t),information:await QM(t)}}class Js extends go{get(e,n){const r=[],i=new DataView(e.buffer,n);let s=10;for(let o=0;o<Js.contentDescTags.length;++o){const a=i.getUint16(o*2,!0);if(a>0){const l=Js.contentDescTags[o],c=s+a;r.push({id:l,value:If(e.slice(n+s,n+c))}),s=c}}return r}}Js.guid=C.ContentDescriptionObject;Js.contentDescTags=["Title","Author","Copyright","Description","Rating"];class I0 extends go{get(e,n){const r=[],i=new DataView(e.buffer,n),s=i.getUint16(0,!0);let o=2;for(let a=0;a<s;a+=1){const l=i.getUint16(o,!0);o+=2;const c=If(e.slice(n+o,n+o+l));o+=l;const d=i.getUint16(o,!0);o+=2;const h=i.getUint16(o,!0);o+=2;const m=e.slice(n+o,n+o+h);o+=h,this.postProcessTag(r,c,d,m)}return r}}I0.guid=C.ExtendedContentDescriptionObject;class C0 extends go{get(e,n){const r=new DataView(e.buffer,n);return{startTime:Yt.get(e,n),endTime:Yt.get(e,n+8),dataBitrate:r.getInt32(12,!0),bufferSize:r.getInt32(16,!0),initialBufferFullness:r.getInt32(20,!0),alternateDataBitrate:r.getInt32(24,!0),alternateBufferSize:r.getInt32(28,!0),alternateInitialBufferFullness:r.getInt32(32,!0),maximumObjectSize:r.getInt32(36,!0),flags:{reliableFlag:Qe(e,n+40,0),seekableFlag:Qe(e,n+40,1),resendLiveCleanpointsFlag:Qe(e,n+40,2)},streamNumber:r.getInt16(42,!0),streamLanguageId:r.getInt16(44,!0),averageTimePerFrame:r.getInt32(52,!0),streamNameCount:r.getInt32(54,!0),payloadExtensionSystems:r.getInt32(56,!0),streamNames:[],streamPropertiesObject:null}}}C0.guid=C.ExtendedStreamPropertiesObject;class ph extends go{get(e,n){const r=[],i=new DataView(e.buffer,n),s=i.getUint16(0,!0);let o=2;for(let a=0;a<s;a+=1){o+=4;const l=i.getUint16(o,!0);o+=2;const c=i.getUint16(o,!0);o+=2;const d=i.getUint32(o,!0);o+=4;const h=If(e.slice(n+o,n+o+l));o+=l;const m=e.slice(n+o,n+o+d);o+=d,this.postProcessTag(r,h,c,m)}return r}}ph.guid=C.MetadataObject;class A0 extends ph{}A0.guid=C.MetadataLibraryObject;class Wv{static fromBuffer(e){return new Wv(e.length).get(e,0)}constructor(e){this.len=e}get(e,n){const r=new DataView(e.buffer,n),i=r.getUint8(0),s=r.getInt32(1,!0);let o=5;for(;r.getUint16(o)!==0;)o+=2;const a=new ee(o-5,"utf-16le").get(e,5);for(;r.getUint16(o)!==0;)o+=2;const l=new ee(o-5,"utf-16le").get(e,5);return{type:uc[i],format:a,description:l,size:s,data:e.slice(o+4)}}}const Uu=De("music-metadata:parser:ASF"),JM="asf";class ZM extends jn{async parse(){const e=await this.tokenizer.readToken(GM);if(!e.objectId.equals(C.HeaderObject))throw new Error(`expected asf header; but was not found; got: ${e.objectId.str}`);try{await this.parseObjectHeader(e.numberOfHeaderObjects)}catch(n){Uu("Error while parsing ASF: %s",n)}}async parseObjectHeader(e){let n;do{const r=await this.tokenizer.readToken(ks);switch(Uu("header GUID=%s",r.objectId.str),r.objectId.str){case b0.guid.str:{const i=await this.tokenizer.readToken(new b0(r));this.metadata.setFormat("duration",Number(i.playDuration/BigInt(1e3))/1e4-Number(i.preroll)/1e3),this.metadata.setFormat("bitrate",i.maximumBitrate);break}case k0.guid.str:{const i=await this.tokenizer.readToken(new k0(r));this.metadata.setFormat("container",`ASF/${i.streamType}`);break}case T0.guid.str:{const i=await this.tokenizer.readToken(new T0);await this.parseExtensionObject(i.extensionDataSize);break}case Js.guid.str:n=await this.tokenizer.readToken(new Js(r)),await this.addTags(n);break;case I0.guid.str:n=await this.tokenizer.readToken(new I0(r)),await this.addTags(n);break;case C.CodecListObject.str:{const i=await XM(this.tokenizer);i.forEach(o=>{this.metadata.addStreamInfo({type:o.type.videoCodec?Ys.video:Ys.audio,codecName:o.codecName})});const s=i.filter(o=>o.type.audioCodec).map(o=>o.codecName).join("/");this.metadata.setFormat("codec",s);break}case C.StreamBitratePropertiesObject.str:await this.tokenizer.ignore(r.objectSize-ks.len);break;case C.PaddingObject.str:Uu("Padding: %s bytes",r.objectSize-ks.len),await this.tokenizer.ignore(r.objectSize-ks.len);break;default:this.metadata.addWarning(`Ignore ASF-Object-GUID: ${r.objectId.str}`),Uu("Ignore ASF-Object-GUID: %s",r.objectId.str),await this.tokenizer.readToken(new $_(r))}}while(--e)}async addTags(e){await Promise.all(e.map(({id:n,value:r})=>this.metadata.addTag(JM,n,r)))}async parseExtensionObject(e){do{const n=await this.tokenizer.readToken(ks),r=n.objectSize-ks.len;switch(n.objectId.str){case C0.guid.str:await this.tokenizer.readToken(new C0(n));break;case ph.guid.str:{const i=await this.tokenizer.readToken(new ph(n));await this.addTags(i);break}case A0.guid.str:{const i=await this.tokenizer.readToken(new A0(n));await this.addTags(i);break}case C.PaddingObject.str:await this.tokenizer.ignore(r);break;case C.CompatibilityObject.str:this.tokenizer.ignore(r);break;case C.ASF_Index_Placeholder_Object.str:await this.tokenizer.ignore(r);break;default:this.metadata.addWarning(`Ignore ASF-Object-GUID: ${n.objectId.str}`),await this.tokenizer.readToken(new $_(n));break}e-=n.objectSize}while(e>0)}}class dc{static fromBase64(e){return dc.fromBuffer(Uint8Array.from(atob(e),n=>n.charCodeAt(0)))}static fromBuffer(e){return new dc(e.length).get(e,0)}constructor(e){this.len=e}get(e,n){const r=uc[re.get(e,n)];n+=4;const i=re.get(e,n);n+=4;const s=new ee(i,"utf-8").get(e,n);n+=i;const o=re.get(e,n);n+=4;const a=new ee(o,"utf-8").get(e,n);n+=o;const l=re.get(e,n);n+=4;const c=re.get(e,n);n+=4;const d=re.get(e,n);n+=4;const h=re.get(e,n);n+=4;const m=re.get(e,n);n+=4;const p=Uint8Array.from(e.slice(n,n+m));return{type:r,format:s,description:a,width:l,height:c,colour_depth:d,indexed_color:h,data:p}}}const Wu={len:7,get:(t,e)=>({packetType:pe.get(t,e),vorbis:new ee(6,"ascii").get(t,e+1)})},e6={len:23,get:(t,e)=>({version:Q.get(t,e+0),channelMode:pe.get(t,e+4),sampleRate:Q.get(t,e+5),bitrateMax:Q.get(t,e+9),bitrateNominal:Q.get(t,e+13),bitrateMin:Q.get(t,e+17)})},Sp=De("music-metadata:parser:ID3");class Cf extends jn{constructor(){super(...arguments),this.id3parser=new tr}static async startsWithID3v2Header(e){return(await e.peekToken(E0)).fileIdentifier==="ID3"}async parse(){try{await this.parseID3v2()}catch(e){if(e instanceof nt)Sp("End-of-stream");else throw e}}finalize(){}async parseID3v2(){await this.tryReadId3v2Headers(),Sp("End of ID3v2 header, go to MPEG-parser: pos=%s",this.tokenizer.position),await this.postId3v2Parse(),this.options.skipPostHeaders&&this.metadata.hasAny()?this.finalize():(await new Uv().init(this.metadata,this.tokenizer,this.options).parse(),this.finalize())}async tryReadId3v2Headers(){if((await this.tokenizer.peekToken(E0)).fileIdentifier==="ID3")return Sp("Found ID3v2 header, pos=%s",this.tokenizer.position),await this.id3parser.parse(this.metadata,this.tokenizer,this.options),this.tryReadId3v2Headers()}}class OT{constructor(e,n){this.data=e,this.offset=n}readInt32(){const e=Q.get(this.data,this.offset);return this.offset+=4,e}readStringUtf8(){const e=this.readInt32(),n=new TextDecoder("utf-8").decode(this.data.subarray(this.offset,this.offset+e));return this.offset+=e,n}parseUserComment(){const e=this.offset,n=this.readStringUtf8(),r=n.indexOf("=");return{key:n.slice(0,r).toUpperCase(),value:n.slice(r+1),len:this.offset-e}}}const To=De("music-metadata:parser:ogg:vorbis1");class Zs{constructor(e,n){this.metadata=e,this.options=n,this.pageSegments=[]}async parsePage(e,n){if(e.headerType.firstPage)this.parseFirstPage(e,n);else{if(e.headerType.continued){if(this.pageSegments.length===0)throw new Error("Cannot continue on previous page");this.pageSegments.push(n)}if(e.headerType.lastPage||!e.headerType.continued){if(this.pageSegments.length>0){const r=Zs.mergeUint8Arrays(this.pageSegments);await this.parseFullPage(r)}this.pageSegments=e.headerType.lastPage?[]:[n]}}e.headerType.lastPage&&this.calculateDuration(e)}static mergeUint8Arrays(e){const n=e.reduce((i,s)=>i+s.length,0),r=new Uint8Array(n);return e.forEach((i,s,o)=>{const a=o.slice(0,s).reduce((l,c)=>l+c.length,0);r.set(i,a)}),r}async flush(){await this.parseFullPage(Zs.mergeUint8Arrays(this.pageSegments))}async parseUserComment(e,n){const i=new OT(e,n).parseUserComment();return await this.addTag(i.key,i.value),i.len}async addTag(e,n){if(e==="METADATA_BLOCK_PICTURE"&&typeof n=="string"){if(this.options.skipCovers){To("Ignore picture");return}n=dc.fromBase64(n),To(`Push picture: id=${e}, format=${n.format}`)}else To(`Push tag: id=${e}, value=${n}`);await this.metadata.addTag("vorbis",e,n)}calculateDuration(e){this.metadata.format.sampleRate&&e.absoluteGranulePosition>=0&&(this.metadata.setFormat("numberOfSamples",e.absoluteGranulePosition),this.metadata.setFormat("duration",e.absoluteGranulePosition/this.metadata.format.sampleRate))}parseFirstPage(e,n){this.metadata.setFormat("codec","Vorbis I"),To("Parse first page");const r=Wu.get(n,0);if(r.vorbis!=="vorbis")throw new Error("Metadata does not look like Vorbis");if(r.packetType===1){const i=e6.get(n,Wu.len);this.metadata.setFormat("sampleRate",i.sampleRate),this.metadata.setFormat("bitrate",i.bitrateNominal),this.metadata.setFormat("numberOfChannels",i.channelMode),To("sample-rate=%s[hz], bitrate=%s[b/s], channel-mode=%s",i.sampleRate,i.bitrateNominal,i.channelMode)}else throw new Error("First Ogg page should be type 1: the identification header")}async parseFullPage(e){const n=Wu.get(e,0);switch(To("Parse full page: type=%s, byteLength=%s",n.packetType,e.byteLength),n.packetType){case 3:return this.parseUserCommentList(e,Wu.len)}}async parseUserCommentList(e,n){const r=Q.get(e,n);n+=4,n+=r;let i=Q.get(e,n);for(n+=4;i-- >0;)n+=await this.parseUserComment(e,n)}}const t6=De("music-metadata:parser:FLAC");var Wr;(function(t){t[t.STREAMINFO=0]="STREAMINFO",t[t.PADDING=1]="PADDING",t[t.APPLICATION=2]="APPLICATION",t[t.SEEKTABLE=3]="SEEKTABLE",t[t.VORBIS_COMMENT=4]="VORBIS_COMMENT",t[t.CUESHEET=5]="CUESHEET",t[t.PICTURE=6]="PICTURE"})(Wr||(Wr={}));class n6 extends Cf{constructor(){super(...arguments),this.padding=0}init(e,n,r){return super.init(e,n,r),this.vorbisParser=new Zs(e,r),this}async postId3v2Parse(){if((await this.tokenizer.readToken(Be)).toString()!=="fLaC")throw new Error("Invalid FLAC preamble");let n;do n=await this.tokenizer.readToken(r6),await this.parseDataBlock(n);while(!n.lastBlock);if(this.tokenizer.fileInfo.size&&this.metadata.format.duration){const r=this.tokenizer.fileInfo.size-this.tokenizer.position;this.metadata.setFormat("bitrate",8*r/this.metadata.format.duration)}}async parseDataBlock(e){switch(t6(`blockHeader type=${e.type}, length=${e.length}`),e.type){case Wr.STREAMINFO:return this.parseBlockStreamInfo(e.length);case Wr.PADDING:this.padding+=e.length;break;case Wr.APPLICATION:break;case Wr.SEEKTABLE:break;case Wr.VORBIS_COMMENT:return this.parseComment(e.length);case Wr.CUESHEET:break;case Wr.PICTURE:await this.parsePicture(e.length);return;default:this.metadata.addWarning(`Unknown block type: ${e.type}`)}return this.tokenizer.ignore(e.length).then()}async parseBlockStreamInfo(e){if(e!==B_.len)throw new Error("Unexpected block-stream-info length");const n=await this.tokenizer.readToken(B_);this.metadata.setFormat("container","FLAC"),this.metadata.setFormat("codec","FLAC"),this.metadata.setFormat("lossless",!0),this.metadata.setFormat("numberOfChannels",n.channels),this.metadata.setFormat("bitsPerSample",n.bitsPerSample),this.metadata.setFormat("sampleRate",n.sampleRate),n.totalSamples>0&&this.metadata.setFormat("duration",n.totalSamples/n.sampleRate)}async parseComment(e){const n=await this.tokenizer.readToken(new on(e)),r=new OT(n,0);r.readStringUtf8();const i=r.readInt32(),s=new Array(i);for(let o=0;o<i;o++)s[o]=r.parseUserComment();await Promise.all(s.map(o=>this.vorbisParser.addTag(o.key,o.value)))}async parsePicture(e){if(this.options.skipCovers)return this.tokenizer.ignore(e);const n=await this.tokenizer.readToken(new dc(e));this.vorbisParser.addTag("METADATA_BLOCK_PICTURE",n)}}const r6={len:4,get:(t,e)=>({lastBlock:Qe(t,e,7),type:ve(t,e,1,7),length:tn.get(t,e+1)})},B_={len:34,get:(t,e)=>({minimumBlockSize:Re.get(t,e),maximumBlockSize:Re.get(t,e+2)/1e3,minimumFrameSize:tn.get(t,e+4),maximumFrameSize:tn.get(t,e+7),sampleRate:tn.get(t,e+10)>>4,channels:ve(t,e+12,4,3)+1,bitsPerSample:ve(t,e+12,7,5)+1,totalSamples:ve(t,e+13,4,36),fileMD5:new on(16).get(t,e+18)})},MT=De("music-metadata:parser:MP4:atom"),gh={len:8,get:(t,e)=>{const n=re.get(t,e);if(n<0)throw new Error("Invalid atom header length");return{length:BigInt(n),name:new ee(4,"latin1").get(t,e+4)}},put:(t,e,n)=>(re.put(t,e,Number(n.length)),Be.put(t,e+4,n.name))},i6=Lv,V_={len:4,get:(t,e)=>({type:new ee(4,"ascii").get(t,e)})};class LT{constructor(e,n,r){if(this.len=e,e<n)throw new Error(`Atom ${r} expected to be ${n}, but specifies ${e} bytes long.`);e>n&&MT(`Warning: atom ${r} expected to be ${n}, but was actually ${e} bytes long.`)}}const _a={len:4,get:(t,e)=>{const n=re.get(t,e)-2082844800;return new Date(n*1e3)}};class s6 extends LT{constructor(e){super(e,24,"mdhd"),this.len=e}get(e,n){return{version:pe.get(e,n+0),flags:tn.get(e,n+1),creationTime:_a.get(e,n+4),modificationTime:_a.get(e,n+8),timeScale:re.get(e,n+12),duration:re.get(e,n+16),language:Re.get(e,n+20),quality:Re.get(e,n+22)}}}class o6 extends LT{constructor(e){super(e,100,"mvhd"),this.len=e}get(e,n){return{version:pe.get(e,n),flags:tn.get(e,n+1),creationTime:_a.get(e,n+4),modificationTime:_a.get(e,n+8),timeScale:re.get(e,n+12),duration:re.get(e,n+16),preferredRate:re.get(e,n+20),preferredVolume:Re.get(e,n+24),previewTime:re.get(e,n+72),previewDuration:re.get(e,n+76),posterTime:re.get(e,n+80),selectionTime:re.get(e,n+84),selectionDuration:re.get(e,n+88),currentTime:re.get(e,n+92),nextTrackID:re.get(e,n+96)}}}class a6{constructor(e){this.len=e}get(e,n){return{type:{set:pe.get(e,n+0),type:tn.get(e,n+1)},locale:tn.get(e,n+4),value:new on(this.len-8).get(e,n+8)}}}class l6{constructor(e){this.len=e}get(e,n){return{version:pe.get(e,n),flags:tn.get(e,n+1),name:new ee(this.len-4,"utf-8").get(e,n+4)}}}class c6{constructor(e){this.len=e}get(e,n){return{version:pe.get(e,n),flags:tn.get(e,n+1),creationTime:_a.get(e,n+4),modificationTime:_a.get(e,n+8),trackId:re.get(e,n+12),duration:re.get(e,n+20),layer:Re.get(e,n+24),alternateGroup:Re.get(e,n+26),volume:Re.get(e,n+28)}}}const U_={len:8,get:(t,e)=>({version:pe.get(t,e),flags:tn.get(t,e+1),numberOfEntries:re.get(t,e+4)})};class u6{constructor(e){this.len=e}get(e,n){return{dataFormat:Be.get(e,n),dataReferenceIndex:Re.get(e,n+10),description:new on(this.len-12).get(e,n+12)}}}class d6{constructor(e){this.len=e}get(e,n){const r=U_.get(e,n);n+=U_.len;const i=[];for(let s=0;s<r.numberOfEntries;++s){const o=re.get(e,n);n+=re.len,i.push(new u6(o).get(e,n)),n+=o}return{header:r,table:i}}}const W_={len:8,get(t,e){return{version:Xr.get(t,e),revision:Xr.get(t,e+2),vendor:kn.get(t,e+4)}}},h6={len:12,get(t,e){return{numAudioChannels:Xr.get(t,e+0),sampleSize:Xr.get(t,e+2),compressionId:Xr.get(t,e+4),packetSize:Xr.get(t,e+6),sampleRate:Re.get(t,e+8)+Re.get(t,e+10)/1e4}}};class Hv{constructor(e,n){this.len=e,this.token=n}get(e,n){const r=kn.get(e,n+4);return{version:cc.get(e,n+0),flags:Mv.get(e,n+1),numberOfEntries:r,entries:FT(e,this.token,n+8,this.len-8,r)}}}const f6={len:8,get(t,e){return{count:kn.get(t,e+0),duration:kn.get(t,e+4)}}};class m6 extends Hv{constructor(e){super(e,f6),this.len=e}}const p6={len:12,get(t,e){return{firstChunk:kn.get(t,e),samplesPerChunk:kn.get(t,e+4),sampleDescriptionId:kn.get(t,e+8)}}};class g6 extends Hv{constructor(e){super(e,p6),this.len=e}}class y6{constructor(e){this.len=e}get(e,n){const r=kn.get(e,n+8);return{version:cc.get(e,n),flags:Mv.get(e,n+1),sampleSize:kn.get(e,n+4),numberOfEntries:r,entries:FT(e,kn,n+12,this.len-12,r)}}}class v6 extends Hv{constructor(e){super(e,kn),this.len=e}}class x6{constructor(e){this.len=e}get(e,n){const r=Xr.get(e,n+0);return new ee(r,"utf-8").get(e,n+2)}}function FT(t,e,n,r,i){if(MT(`remainingLen=${r}, numberOfEntries=${i} * token-len=${e.len}`),r===0)return[];if(r!==i*e.len)throw new Error("mismatch number-of-entries with remaining atom-length");const s=[];for(let o=0;o<i;++o)s.push(e.get(t,n)),n+=e.len;return s}const w6=De("music-metadata:parser:MP4:Atom");class yh{static async readAtom(e,n,r,i){const s=e.position,o=await e.readToken(gh);o.length===BigInt(1)&&(o.length=await e.readToken(i6));const l=new yh(o,o.length===BigInt(1),r),c=l.getPayloadLength(i);return w6(`parse atom name=${l.atomPath}, extended=${l.extended}, offset=${s}, len=${l.header.length}`),await l.readData(e,n,c),l}constructor(e,n,r){this.header=e,this.extended=n,this.parent=r,this.children=[],this.atomPath=(this.parent?`${this.parent.atomPath}.`:"")+this.header.name}getHeaderLength(){return this.extended?16:8}getPayloadLength(e){return(this.header.length===BigInt(0)?e:Number(this.header.length))-this.getHeaderLength()}async readAtoms(e,n,r){for(;r>0;){const i=await yh.readAtom(e,n,this,r);this.children.push(i),r-=i.header.length===BigInt(0)?r:Number(i.header.length)}}async readData(e,n,r){switch(this.header.name){case"moov":case"udta":case"trak":case"mdia":case"minf":case"stbl":case"<id>":case"ilst":case"tref":return this.readAtoms(e,n,this.getPayloadLength(r));case"meta":{const s=(await e.peekToken(gh)).name==="hdlr"?0:4;return await e.ignore(s),this.readAtoms(e,n,this.getPayloadLength(r)-s)}default:return n(this,r)}}}const pr=De("music-metadata:parser:MP4"),_6="iTunes",H_={raw:{lossy:!1,format:"raw"},MAC3:{lossy:!0,format:"MACE 3:1"},MAC6:{lossy:!0,format:"MACE 6:1"},ima4:{lossy:!0,format:"IMA 4:1"},ulaw:{lossy:!0,format:"uLaw 2:1"},alaw:{lossy:!0,format:"uLaw 2:1"},Qclp:{lossy:!0,format:"QUALCOMM PureVoice"},".mp3":{lossy:!0,format:"MPEG-1 layer 3"},alac:{lossy:!1,format:"ALAC"},"ac-3":{lossy:!0,format:"AC-3"},mp4a:{lossy:!0,format:"MPEG-4/AAC"},mp4s:{lossy:!0,format:"MP4S"},c608:{lossy:!0,format:"CEA-608"},c708:{lossy:!0,format:"CEA-708"}};function q_(t,e,n){return n.indexOf(t)===e}class vh extends jn{constructor(){super(...arguments),this.tracks=[],this.atomParsers={mvhd:async e=>{const n=await this.tokenizer.readToken(new o6(e));this.metadata.setFormat("creationTime",n.creationTime),this.metadata.setFormat("modificationTime",n.modificationTime)},mdhd:async e=>{const n=await this.tokenizer.readToken(new s6(e)),r=this.getTrackDescription();r.creationTime=n.creationTime,r.modificationTime=n.modificationTime,r.timeScale=n.timeScale,r.duration=n.duration},chap:async e=>{const n=this.getTrackDescription(),r=[];for(;e>=re.len;)r.push(await this.tokenizer.readNumber(re)),e-=re.len;n.chapterList=r},tkhd:async e=>{const n=await this.tokenizer.readToken(new c6(e));this.tracks.push(n)},mdat:async e=>{if(this.audioLengthInBytes=e,this.calculateBitRate(),this.options.includeChapters){const n=this.tracks.filter(r=>r.chapterList);if(n.length===1){const r=n[0].chapterList,i=this.tracks.filter(s=>r.indexOf(s.trackId)!==-1);if(i.length===1)return this.parseChapterTrack(i[0],n[0],e)}}await this.tokenizer.ignore(e)},ftyp:async e=>{const n=[];for(;e>0;){const i=await this.tokenizer.readToken(V_);e-=V_.len;const s=i.type.replace(/\W/g,"");s.length>0&&n.push(s)}pr(`ftyp: ${n.join("/")}`);const r=n.filter(q_).join("/");this.metadata.setFormat("container",r)},stsd:async e=>{const n=await this.tokenizer.readToken(new d6(e)),r=this.getTrackDescription();r.soundSampleDescription=n.table.map(i=>this.parseSoundSampleDescription(i))},stsc:async e=>{const n=await this.tokenizer.readToken(new g6(e));this.getTrackDescription().sampleToChunkTable=n.entries},stts:async e=>{const n=await this.tokenizer.readToken(new m6(e));this.getTrackDescription().timeToSampleTable=n.entries},stsz:async e=>{const n=await this.tokenizer.readToken(new y6(e)),r=this.getTrackDescription();r.sampleSize=n.sampleSize,r.sampleSizeTable=n.entries},stco:async e=>{const n=await this.tokenizer.readToken(new v6(e));this.getTrackDescription().chunkOffsetTable=n.entries},date:async e=>{const n=await this.tokenizer.readToken(new ee(e,"utf-8"));await this.addTag("date",n)}}}static read_BE_Integer(e,n){const r=(n?"INT":"UINT")+e.length*8+(e.length>1?"_BE":""),i=CO[r];if(!i)throw new Error(`Token for integer type not found: "${r}"`);return Number(i.get(e,0))}async parse(){this.tracks=[];let e=this.tokenizer.fileInfo.size||0;for(;!this.tokenizer.fileInfo.size||e>0;){try{if((await this.tokenizer.peekToken(gh)).name==="\0\0\0\0"){const o=`Error at offset=${this.tokenizer.position}: box.id=0`;pr(o),this.addWarning(o);break}}catch(s){if(s instanceof Error){const o=`Error at offset=${this.tokenizer.position}: ${s.message}`;pr(o),this.addWarning(o)}else throw s;break}const i=await yh.readAtom(this.tokenizer,(s,o)=>this.handleAtom(s,o),null,e);e-=i.header.length===BigInt(0)?e:Number(i.header.length)}const n=[];this.tracks.forEach(i=>{const s=[];i.soundSampleDescription.forEach(o=>{const a={},l=H_[o.dataFormat];if(l?(s.push(l.format),a.codecName=l.format):a.codecName=`<${o.dataFormat}>`,o.description){const{description:c}=o;c.sampleRate>0&&(a.type=Ys.audio,a.audio={samplingFrequency:c.sampleRate,bitDepth:c.sampleSize,channels:c.numAudioChannels})}this.metadata.addStreamInfo(a)}),s.length>=1&&n.push(s.join("/"))}),n.length>0&&this.metadata.setFormat("codec",n.filter(q_).join("+"));const r=this.tracks.filter(i=>i.soundSampleDescription.length>=1&&i.soundSampleDescription[0].description&&i.soundSampleDescription[0].description.numAudioChannels>0);if(r.length>=1){const i=r[0];if(i.timeScale>0){const a=i.duration/i.timeScale;this.metadata.setFormat("duration",a)}const s=i.soundSampleDescription[0];if(s.description&&(this.metadata.setFormat("sampleRate",s.description.sampleRate),this.metadata.setFormat("bitsPerSample",s.description.sampleSize),this.metadata.setFormat("numberOfChannels",s.description.numAudioChannels),i.timeScale===0&&i.timeToSampleTable.length>0)){const l=i.timeToSampleTable.map(c=>c.count*c.duration).reduce((c,d)=>c+d)/s.description.sampleRate;this.metadata.setFormat("duration",l)}const o=H_[s.dataFormat];o&&this.metadata.setFormat("lossless",!o.lossy),this.calculateBitRate()}}async handleAtom(e,n){if(e.parent)switch(e.parent.header.name){case"ilst":case"<id>":return this.parseMetadataItemData(e)}if(this.atomParsers[e.header.name])return this.atomParsers[e.header.name](n);pr(`No parser for atom path=${e.atomPath}, payload-len=${n}, ignoring atom`),await this.tokenizer.ignore(n)}getTrackDescription(){return this.tracks[this.tracks.length-1]}calculateBitRate(){this.audioLengthInBytes&&this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*this.audioLengthInBytes/this.metadata.format.duration)}async addTag(e,n){await this.metadata.addTag(_6,e,n)}addWarning(e){pr(`Warning: ${e}`),this.metadata.addWarning(e)}parseMetadataItemData(e){let n=e.header.name;return e.readAtoms(this.tokenizer,async(r,i)=>{const s=r.getPayloadLength(i);switch(r.header.name){case"data":return this.parseValueAtom(n,r);case"name":case"mean":case"rate":{const o=await this.tokenizer.readToken(new l6(s));n+=`:${o.name}`;break}default:{const o=await this.tokenizer.readToken(new on(s));this.addWarning(`Unsupported meta-item: ${n}[${r.header.name}] => value=${$v(o)} ascii=${Fv(o,"ascii")}`)}}},e.getPayloadLength(0))}async parseValueAtom(e,n){const r=await this.tokenizer.readToken(new a6(Number(n.header.length)-gh.len));if(r.type.set!==0)throw new Error(`Unsupported type-set != 0: ${r.type.set}`);switch(r.type.type){case 0:switch(e){case"trkn":case"disk":{const i=pe.get(r.value,3),s=pe.get(r.value,5);await this.addTag(e,`${i}/${s}`);break}case"gnre":{const i=pe.get(r.value,1),s=mh[i-1];await this.addTag(e,s);break}case"rate":{const i=new TextDecoder("ascii").decode(r.value);await this.addTag(e,i);break}default:pr(`unknown proprietary value type for: ${n.atomPath}`)}break;case 1:case 18:await this.addTag(e,new TextDecoder("utf-8").decode(r.value));break;case 13:if(this.options.skipCovers)break;await this.addTag(e,{format:"image/jpeg",data:Uint8Array.from(r.value)});break;case 14:if(this.options.skipCovers)break;await this.addTag(e,{format:"image/png",data:Uint8Array.from(r.value)});break;case 21:await this.addTag(e,vh.read_BE_Integer(r.value,!0));break;case 22:await this.addTag(e,vh.read_BE_Integer(r.value,!1));break;case 65:await this.addTag(e,pe.get(r.value,0));break;case 66:await this.addTag(e,Re.get(r.value,0));break;case 67:await this.addTag(e,re.get(r.value,0));break;default:this.addWarning(`atom key=${e}, has unknown well-known-type (data-type): ${r.type.type}`)}}parseSoundSampleDescription(e){const n={dataFormat:e.dataFormat,dataReferenceIndex:e.dataReferenceIndex};let r=0;const i=W_.get(e.description,r);return r+=W_.len,i.version===0||i.version===1?n.description=h6.get(e.description,r):pr(`Warning: sound-sample-description ${i} not implemented`),n}async parseChapterTrack(e,n,r){if(!e.sampleSize&&e.chunkOffsetTable.length!==e.sampleSizeTable.length)throw new Error("Expected equal chunk-offset-table & sample-size-table length.");const i=[];for(let s=0;s<e.chunkOffsetTable.length&&r>0;++s){const a=e.chunkOffsetTable[s]-this.tokenizer.position,l=e.sampleSize>0?e.sampleSize:e.sampleSizeTable[s];if(r-=a+l,r<0)throw new Error("Chapter chunk exceeding token length");await this.tokenizer.ignore(a);const c=await this.tokenizer.readToken(new x6(l));pr(`Chapter ${s+1}: ${c}`);const d={title:c,sampleOffset:this.findSampleOffset(n,this.tokenizer.position)};pr(`Chapter title=${d.title}, offset=${d.sampleOffset}/${this.tracks[0].duration}`),i.push(d)}this.metadata.setFormat("chapters",i),await this.tokenizer.ignore(r)}findSampleOffset(e,n){let r=0;e.timeToSampleTable.forEach(s=>{r+=s.count*s.duration}),pr(`Total duration=${r}`);let i=0;for(;i<e.chunkOffsetTable.length&&e.chunkOffsetTable[i]<n;)++i;return this.getChunkDuration(i+1,e)}getChunkDuration(e,n){let r=0,i=n.timeToSampleTable[r].count,s=n.timeToSampleTable[r].duration,o=1,a=this.getSamplesPerChunk(o,n.sampleToChunkTable),l=0;for(;o<e;){const c=Math.min(i,a);l+=c*s,i-=c,a-=c,a===0?(++o,a=this.getSamplesPerChunk(o,n.sampleToChunkTable)):(++r,i=n.timeToSampleTable[r].count,s=n.timeToSampleTable[r].duration)}return l}getSamplesPerChunk(e,n){for(let r=0;r<n.length-1;++r)if(e>=n[r].firstChunk&&e<n[r+1].firstChunk)return n[r].samplesPerChunk;return n[n.length-1].samplesPerChunk}}var G_;(function(t){t[t.not_set=0]="not_set",t[t.radio=1]="radio",t[t.audiophile=2]="audiophile"})(G_||(G_={}));var K_;(function(t){t[t.unspecified=0]="unspecified",t[t.engineer=1]="engineer",t[t.user=2]="user",t[t.automatic=3]="automatic",t[t.rms_average=4]="rms_average"})(K_||(K_={}));const X_={len:2,get:(t,e)=>{const n=ve(t,e,0,3),r=ve(t,e,6,1),i=ve(t,e,7,9)/10;if(n>0)return{type:ve(t,e,0,3),origin:ve(t,e,3,3),adjustment:r?-i:i}}},E6={len:27,get:(t,e)=>{const n=re.get(t,e+2);return{revision:ve(t,e,0,4),vbr_method:ve(t,e,4,4),lowpass_filter:100*pe.get(t,e+1),track_peak:n===0?null:n/2**23,track_gain:X_.get(t,6),album_gain:X_.get(t,8),music_length:re.get(t,e+20),music_crc:pe.get(t,e+24),header_crc:Re.get(t,e+24)}}},Q_=new ee(4,"ascii"),bp=new ee(6,"ascii"),S6={len:4,get:(t,e)=>({frames:wn(t,e,31),bytes:wn(t,e,30),toc:wn(t,e,29),vbrScale:wn(t,e,28)})};async function b6(t){const e=await t.readToken(S6),n={numFrames:null,streamSize:null,vbrScale:null};if(e.frames&&(n.numFrames=await t.readToken(re)),e.bytes&&(n.streamSize=await t.readToken(re)),e.toc&&(n.toc=new Uint8Array(100),await t.readBuffer(n.toc)),e.vbrScale&&(n.vbrScale=await t.readToken(re)),await t.peekToken(new ee(4,"ascii"))==="LAME"){await t.ignore(4),n.lame={version:await t.readToken(new ee(5,"ascii"))};const i=n.lame.version.match(/\d+.\d+/g);if(i!==null){const o=i[0].split(".").map(a=>Number.parseInt(a,10));o[0]>=3&&o[1]>=90&&(n.lame.extended=await t.readToken(E6))}}return n}const vn=De("music-metadata:parser:mpeg"),Y_=1024,J_={AudioObjectTypes:["AAC Main","AAC LC","AAC SSR","AAC LTP"],SamplingFrequencies:[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,null,null,-1]},k6=[void 0,["front-center"],["front-left","front-right"],["front-center","front-left","front-right"],["front-center","front-left","front-right","back-center"],["front-center","front-left","front-right","back-left","back-right"],["front-center","front-left","front-right","back-left","back-right","LFE-channel"],["front-center","front-left","front-right","side-left","side-right","back-left","back-right","LFE-channel"]];class wt{constructor(e,n){this.bitrateIndex=null,this.sampRateFreqIndex=null,this.padding=null,this.privateBit=null,this.channelModeIndex=null,this.modeExtension=null,this.isOriginalMedia=null,this.version=null,this.bitrate=null,this.samplingRate=null,this.frameLength=0,this.versionIndex=ve(e,n+1,3,2),this.layer=wt.LayerDescription[ve(e,n+1,5,2)],this.versionIndex>1&&this.layer===0?this.parseAdtsHeader(e,n):this.parseMpegHeader(e,n),this.isProtectedByCRC=!wn(e,n+1,7)}calcDuration(e){return this.samplingRate==null?null:e*this.calcSamplesPerFrame()/this.samplingRate}calcSamplesPerFrame(){return wt.samplesInFrameTable[this.version===1?0:1][this.layer]}calculateSideInfoLength(){if(this.layer!==3)return 2;if(this.channelModeIndex===3){if(this.version===1)return 17;if(this.version===2||this.version===2.5)return 9}else{if(this.version===1)return 32;if(this.version===2||this.version===2.5)return 17}return null}calcSlotSize(){return[null,4,1,1][this.layer]}parseMpegHeader(e,n){this.container="MPEG",this.bitrateIndex=ve(e,n+2,0,4),this.sampRateFreqIndex=ve(e,n+2,4,2),this.padding=wn(e,n+2,6),this.privateBit=wn(e,n+2,7),this.channelModeIndex=ve(e,n+3,0,2),this.modeExtension=ve(e,n+3,2,2),this.isCopyrighted=wn(e,n+3,4),this.isOriginalMedia=wn(e,n+3,5),this.emphasis=ve(e,n+3,7,2),this.version=wt.VersionID[this.versionIndex],this.channelMode=wt.ChannelMode[this.channelModeIndex],this.codec=`MPEG ${this.version} Layer ${this.layer}`;const r=this.calcBitrate();if(!r)throw new Error("Cannot determine bit-rate");if(this.bitrate=r*1e3,this.samplingRate=this.calcSamplingRate(),this.samplingRate==null)throw new Error("Cannot determine sampling-rate")}parseAdtsHeader(e,n){vn("layer=0 => ADTS"),this.version=this.versionIndex===2?4:2,this.container=`ADTS/MPEG-${this.version}`;const r=ve(e,n+2,0,2);this.codec="AAC",this.codecProfile=J_.AudioObjectTypes[r],vn(`MPEG-4 audio-codec=${this.codec}`);const i=ve(e,n+2,2,4);this.samplingRate=J_.SamplingFrequencies[i],vn(`sampling-rate=${this.samplingRate}`);const s=ve(e,n+2,7,3);this.mp4ChannelConfig=k6[s],vn(`channel-config=${this.mp4ChannelConfig?this.mp4ChannelConfig.join("+"):"?"}`),this.frameLength=ve(e,n+3,6,2)<<11}calcBitrate(){if(this.bitrateIndex===0||this.bitrateIndex===15)return null;if(this.version&&this.bitrateIndex){const e=10*Math.floor(this.version)+this.layer;return wt.bitrate_index[this.bitrateIndex][e]}return null}calcSamplingRate(){return this.sampRateFreqIndex===3||this.version===null||this.sampRateFreqIndex==null?null:wt.sampling_rate_freq_index[this.version][this.sampRateFreqIndex]}}wt.SyncByte1=255;wt.SyncByte2=224;wt.VersionID=[2.5,null,2,1];wt.LayerDescription=[0,3,2,1];wt.ChannelMode=["stereo","joint_stereo","dual_channel","mono"];wt.bitrate_index={1:{11:32,12:32,13:32,21:32,22:8,23:8},2:{11:64,12:48,13:40,21:48,22:16,23:16},3:{11:96,12:56,13:48,21:56,22:24,23:24},4:{11:128,12:64,13:56,21:64,22:32,23:32},5:{11:160,12:80,13:64,21:80,22:40,23:40},6:{11:192,12:96,13:80,21:96,22:48,23:48},7:{11:224,12:112,13:96,21:112,22:56,23:56},8:{11:256,12:128,13:112,21:128,22:64,23:64},9:{11:288,12:160,13:128,21:144,22:80,23:80},10:{11:320,12:192,13:160,21:160,22:96,23:96},11:{11:352,12:224,13:192,21:176,22:112,23:112},12:{11:384,12:256,13:224,21:192,22:128,23:128},13:{11:416,12:320,13:256,21:224,22:144,23:144},14:{11:448,12:384,13:320,21:256,22:160,23:160}};wt.sampling_rate_freq_index={1:{0:44100,1:48e3,2:32e3},2:{0:22050,1:24e3,2:16e3},2.5:{0:11025,1:12e3,2:8e3}};wt.samplesInFrameTable=[[0,384,1152,1152],[0,384,1152,576]];const Z_={len:4,get:(t,e)=>new wt(t,e)};function T6(t){return`V${Math.floor((100-t)/10)}`}class I6 extends Cf{constructor(){super(...arguments),this.frameCount=0,this.syncFrameCount=-1,this.countSkipFrameData=0,this.totalDataLength=0,this.bitrates=[],this.offset=0,this.frame_size=0,this.crc=null,this.calculateEofDuration=!1,this.samplesPerFrame=null,this.buf_frame_header=new Uint8Array(4),this.mpegOffset=null,this.syncPeek={buf:new Uint8Array(Y_),len:0}}async postId3v2Parse(){this.metadata.setFormat("lossless",!1);try{let e=!1;for(;!e;)await this.sync(),e=await this.parseCommonMpegHeader()}catch(e){if(e instanceof nt){if(vn("End-of-stream"),this.calculateEofDuration&&this.samplesPerFrame!==null){const n=this.frameCount*this.samplesPerFrame;if(this.metadata.setFormat("numberOfSamples",n),this.metadata.format.sampleRate){const r=n/this.metadata.format.sampleRate;vn(`Calculate duration at EOF: ${r} sec.`,r),this.metadata.setFormat("duration",r)}}}else throw e}}finalize(){const e=this.metadata.format,n=!!this.metadata.native.ID3v1;if(this.mpegOffset!==null){if(e.duration&&this.tokenizer.fileInfo.size){const r=this.tokenizer.fileInfo.size-this.mpegOffset-(n?128:0);e.codecProfile&&e.codecProfile[0]==="V"&&this.metadata.setFormat("bitrate",r*8/e.duration)}else if(this.tokenizer.fileInfo.size&&e.codecProfile==="CBR"){const r=this.tokenizer.fileInfo.size-this.mpegOffset-(n?128:0);if(this.frame_size!==null&&this.samplesPerFrame!==null){const i=Math.round(r/this.frame_size)*this.samplesPerFrame;if(this.metadata.setFormat("numberOfSamples",i),e.sampleRate){const s=i/e.sampleRate;vn("Calculate CBR duration based on file size: %s",s),this.metadata.setFormat("duration",s)}}}}}async sync(){let e=!1;for(;;){let n=0;if(this.syncPeek.len=await this.tokenizer.peekBuffer(this.syncPeek.buf,{length:Y_,mayBeLess:!0}),this.syncPeek.len<=163)throw new nt;for(;;){if(e&&(this.syncPeek.buf[n]&224)===224){this.buf_frame_header[0]=wt.SyncByte1,this.buf_frame_header[1]=this.syncPeek.buf[n],await this.tokenizer.ignore(n),vn(`Sync at offset=${this.tokenizer.position-1}, frameCount=${this.frameCount}`),this.syncFrameCount===this.frameCount&&(vn(`Re-synced MPEG stream, frameCount=${this.frameCount}`),this.frameCount=0,this.frame_size=0),this.syncFrameCount=this.frameCount;return}if(e=!1,n=this.syncPeek.buf.indexOf(wt.SyncByte1,n),n===-1){if(this.syncPeek.len<this.syncPeek.buf.length)throw new nt;await this.tokenizer.ignore(this.syncPeek.len);break}++n,e=!0}}}async parseCommonMpegHeader(){this.frameCount===0&&(this.mpegOffset=this.tokenizer.position-1),await this.tokenizer.peekBuffer(this.buf_frame_header,{offset:1,length:3});let e;try{e=Z_.get(this.buf_frame_header,0)}catch(n){if(await this.tokenizer.ignore(1),n instanceof Error)return this.metadata.addWarning(`Parse error: ${n.message}`),!1;throw n}return await this.tokenizer.ignore(3),this.metadata.setFormat("container",e.container),this.metadata.setFormat("codec",e.codec),this.metadata.setFormat("lossless",!1),this.metadata.setFormat("sampleRate",e.samplingRate),this.frameCount++,e.version!==null&&e.version>=2&&e.layer===0?this.parseAdts(e):this.parseAudioFrameHeader(e)}async parseAudioFrameHeader(e){this.metadata.setFormat("numberOfChannels",e.channelMode==="mono"?1:2),this.metadata.setFormat("bitrate",e.bitrate),this.frameCount<20*1e4&&vn("offset=%s MP%s bitrate=%s sample-rate=%s",this.tokenizer.position-4,e.layer,e.bitrate,e.samplingRate);const n=e.calcSlotSize();if(n===null)throw new Error("invalid slot_size");const r=e.calcSamplesPerFrame();vn(`samples_per_frame=${r}`);const i=r/8;if(e.bitrate!==null&&e.samplingRate!=null){const s=i*e.bitrate/e.samplingRate+(e.padding?n:0);this.frame_size=Math.floor(s)}if(this.audioFrameHeader=e,e.bitrate!==null&&this.bitrates.push(e.bitrate),this.frameCount===1)return this.offset=Z_.len,await this.skipSideInformation(),!1;if(this.frameCount===3){if(this.areAllSame(this.bitrates)){if(this.samplesPerFrame=r,this.metadata.setFormat("codecProfile","CBR"),this.tokenizer.fileInfo.size)return!0}else if(this.metadata.format.duration)return!0;if(!this.options.duration)return!0}return this.options.duration&&this.frameCount===4&&(this.samplesPerFrame=r,this.calculateEofDuration=!0),this.offset=4,e.isProtectedByCRC?(await this.parseCrc(),!1):(await this.skipSideInformation(),!1)}async parseAdts(e){const n=new Uint8Array(3);if(await this.tokenizer.readBuffer(n),e.frameLength+=ve(n,0,0,11),this.totalDataLength+=e.frameLength,this.samplesPerFrame=1024,e.samplingRate!==null){const r=e.samplingRate/this.samplesPerFrame,s=8*(this.frameCount===0?0:this.totalDataLength/this.frameCount)*r+.5;this.metadata.setFormat("bitrate",s),vn(`frame-count=${this.frameCount}, size=${e.frameLength} bytes, bit-rate=${s}`)}if(await this.tokenizer.ignore(e.frameLength>7?e.frameLength-7:1),this.frameCount===3)if(this.metadata.setFormat("codecProfile",e.codecProfile),e.mp4ChannelConfig&&this.metadata.setFormat("numberOfChannels",e.mp4ChannelConfig.length),this.options.duration)this.calculateEofDuration=!0;else return!0;return!1}async parseCrc(){return this.crc=await this.tokenizer.readNumber(Xr),this.offset+=2,this.skipSideInformation()}async skipSideInformation(){if(this.audioFrameHeader){const e=this.audioFrameHeader.calculateSideInfoLength();if(e!==null){await this.tokenizer.readToken(new on(e)),this.offset+=e,await this.readXtraInfoHeader();return}}}async readXtraInfoHeader(){const e=await this.tokenizer.readToken(Q_);switch(this.offset+=Q_.len,e){case"Info":return this.metadata.setFormat("codecProfile","CBR"),this.readXingInfoHeader();case"Xing":{const r=await this.readXingInfoHeader();if(r.vbrScale!==null){const i=T6(r.vbrScale);this.metadata.setFormat("codecProfile",i)}return null}case"Xtra":break;case"LAME":{const r=await this.tokenizer.readToken(bp);if(this.frame_size!==null&&this.frame_size>=this.offset+bp.len)return this.offset+=bp.len,this.metadata.setFormat("tool",`LAME ${r}`),await this.skipFrameData(this.frame_size-this.offset),null;this.metadata.addWarning("Corrupt LAME header");break}}const n=this.frame_size-this.offset;return n<0?this.metadata.addWarning(`Frame ${this.frameCount}corrupt: negative frameDataLeft`):await this.skipFrameData(n),null}async readXingInfoHeader(){const e=this.tokenizer.position,n=await b6(this.tokenizer);if(this.offset+=this.tokenizer.position-e,n.lame&&(this.metadata.setFormat("tool",`LAME ${Ci(n.lame.version)}`),n.lame.extended&&(this.metadata.setFormat("trackPeakLevel",n.lame.extended.track_peak),n.lame.extended.track_gain&&this.metadata.setFormat("trackGain",n.lame.extended.track_gain.adjustment),n.lame.extended.album_gain&&this.metadata.setFormat("albumGain",n.lame.extended.album_gain.adjustment),this.metadata.setFormat("duration",n.lame.extended.music_length/1e3))),n.streamSize&&this.audioFrameHeader&&n.numFrames!==null){const i=this.audioFrameHeader.calcDuration(n.numFrames);return this.metadata.setFormat("duration",i),vn("Get duration from Xing header: %s",this.metadata.format.duration),n}const r=this.frame_size-this.offset;return await this.skipFrameData(r),n}async skipFrameData(e){if(e<0)throw new Error("frame-data-left cannot be negative");await this.tokenizer.ignore(e),this.countSkipFrameData+=e}areAllSame(e){const n=e[0];return e.every(r=>r===n)}}const eE=De("music-metadata:parser:musepack:sv8"),C6=new ee(2,"latin1"),tE={len:5,get:(t,e)=>({crc:Q.get(t,e),streamVersion:pe.get(t,e+4)})},nE={len:2,get:(t,e)=>({sampleFrequency:[44100,48e3,37800,32e3][ve(t,e,0,3)],maxUsedBands:ve(t,e,3,5),channelCount:ve(t,e+1,0,4)+1,msUsed:wn(t,e+1,4),audioBlockFrames:ve(t,e+1,5,3)})};class A6{constructor(e){this.tokenizer=e}async readPacketHeader(){const e=await this.tokenizer.readToken(C6),n=await this.readVariableSizeField();return{key:e,payloadLength:n.value-2-n.len}}async readStreamHeader(e){const n={};eE(`Reading SH at offset=${this.tokenizer.position}`);const r=await this.tokenizer.readToken(tE);e-=tE.len,Object.assign(n,r),eE(`SH.streamVersion = ${r.streamVersion}`);const i=await this.readVariableSizeField();e-=i.len,n.sampleCount=i.value;const s=await this.readVariableSizeField();e-=s.len,n.beginningOfSilence=s.value;const o=await this.tokenizer.readToken(nE);return e-=nE.len,Object.assign(n,o),await this.tokenizer.ignore(e),n}async readVariableSizeField(e=1,n=0){let r=await this.tokenizer.readNumber(pe);return r&128?(r&=127,r+=n,this.readVariableSizeField(e+1,r<<7)):{len:e,value:n+r}}}const R6=De("music-metadata:parser:musepack");class P6 extends jn{constructor(){super(...arguments),this.audioLength=0}async parse(){if(await this.tokenizer.readToken(Be)!=="MPCK")throw new Error("Invalid Magic number");return this.metadata.setFormat("container","Musepack, SV8"),this.parsePacket()}async parsePacket(){const e=new A6(this.tokenizer);do{const n=await e.readPacketHeader();switch(R6(`packet-header key=${n.key}, payloadLength=${n.payloadLength}`),n.key){case"SH":{const r=await e.readStreamHeader(n.payloadLength);this.metadata.setFormat("numberOfSamples",r.sampleCount),this.metadata.setFormat("sampleRate",r.sampleFrequency),this.metadata.setFormat("duration",r.sampleCount/r.sampleFrequency),this.metadata.setFormat("numberOfChannels",r.channelCount);break}case"AP":this.audioLength+=n.payloadLength,await this.tokenizer.ignore(n.payloadLength);break;case"RG":case"EI":case"SO":case"ST":case"CT":await this.tokenizer.ignore(n.payloadLength);break;case"SE":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",this.audioLength*8/this.metadata.format.duration),Er.tryParseApeHeader(this.metadata,this.tokenizer,this.options);default:throw new Error(`Unexpected header: ${n.key}`)}}while(!0)}}class N6{constructor(e){this.tokenizer=e,this.pos=0,this.dword=null}async read(e){for(;this.dword===null;)this.dword=await this.tokenizer.readToken(Q);let n=this.dword;return this.pos+=e,this.pos<32?(n>>>=32-this.pos,n&(1<<e)-1):(this.pos-=32,this.pos===0?(this.dword=null,n&(1<<e)-1):(this.dword=await this.tokenizer.readToken(Q),this.pos&&(n<<=this.pos,n|=this.dword>>>32-this.pos),n&(1<<e)-1))}async ignore(e){if(this.pos>0){const i=32-this.pos;this.dword=null,e-=i,this.pos=0}const n=e%32,r=(e-n)/32;return await this.tokenizer.ignore(r*4),this.read(n)}}const D6={len:6*4,get:(t,e)=>{const n={signature:new TextDecoder("latin1").decode(t.subarray(e,e+3)),streamMinorVersion:ve(t,e+3,0,4),streamMajorVersion:ve(t,e+3,4,4),frameCount:Q.get(t,e+4),maxLevel:Te.get(t,e+8),sampleFrequency:[44100,48e3,37800,32e3][ve(t,e+10,0,2)],link:ve(t,e+10,2,2),profile:ve(t,e+10,4,4),maxBand:ve(t,e+11,0,6),intensityStereo:wn(t,e+11,6),midSideStereo:wn(t,e+11,7),titlePeak:Te.get(t,e+12),titleGain:Te.get(t,e+14),albumPeak:Te.get(t,e+16),albumGain:Te.get(t,e+18),lastFrameLength:Q.get(t,e+20)>>>20&2047,trueGapless:wn(t,e+23,0)};return n.lastFrameLength=n.trueGapless?Q.get(t,20)>>>20&2047:0,n}},rE=De("music-metadata:parser:musepack");class j6 extends jn{constructor(){super(...arguments),this.bitreader=null,this.audioLength=0,this.duration=null}async parse(){const e=await this.tokenizer.readToken(D6);if(e.signature!=="MP+")throw new Error("Unexpected magic number");rE(`stream-version=${e.streamMajorVersion}.${e.streamMinorVersion}`),this.metadata.setFormat("container","Musepack, SV7"),this.metadata.setFormat("sampleRate",e.sampleFrequency);const n=1152*(e.frameCount-1)+e.lastFrameLength;this.metadata.setFormat("numberOfSamples",n),this.duration=n/e.sampleFrequency,this.metadata.setFormat("duration",this.duration),this.bitreader=new N6(this.tokenizer),this.metadata.setFormat("numberOfChannels",e.midSideStereo||e.intensityStereo?2:1);const r=await this.bitreader.read(8);return this.metadata.setFormat("codec",(r/100).toFixed(2)),await this.skipAudioData(e.frameCount),rE(`End of audio stream, switching to APEv2, offset=${this.tokenizer.position}`),Er.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async skipAudioData(e){for(;e-- >0;){const r=await this.bitreader.read(20);this.audioLength+=20+r,await this.bitreader.ignore(r)}const n=await this.bitreader.read(11);this.audioLength+=n,this.duration!==null&&this.metadata.setFormat("bitrate",this.audioLength/this.duration)}}const iE=De("music-metadata:parser:musepack");class O6 extends Cf{async postId3v2Parse(){const e=await this.tokenizer.peekToken(new ee(3,"latin1"));let n;switch(e){case"MP+":{iE("Musepack stream-version 7"),n=new j6;break}case"MPC":{iE("Musepack stream-version 8"),n=new P6;break}default:throw new Error("Invalid Musepack signature prefix")}return n.init(this.metadata,this.tokenizer,this.options),n.parse()}}class M6{constructor(e){if(this.len=e,e<19)throw new Error("ID-header-page 0 should be at least 19 bytes long")}get(e,n){return{magicSignature:new ee(8,"ascii").get(e,n+0),version:pe.get(e,n+8),channelCount:pe.get(e,n+9),preSkip:Te.get(e,n+10),inputSampleRate:Q.get(e,n+12),outputGain:Te.get(e,n+16),channelMapping:pe.get(e,n+18)}}}class L6 extends Zs{constructor(e,n,r){super(e,n),this.tokenizer=r,this.idHeader=null,this.lastPos=-1}parseFirstPage(e,n){if(this.metadata.setFormat("codec","Opus"),this.idHeader=new M6(n.length).get(n,0),this.idHeader.magicSignature!=="OpusHead")throw new Error("Illegal ogg/Opus magic-signature");this.metadata.setFormat("sampleRate",this.idHeader.inputSampleRate),this.metadata.setFormat("numberOfChannels",this.idHeader.channelCount)}async parseFullPage(e){switch(new ee(8,"ascii").get(e,0)){case"OpusTags":await this.parseUserCommentList(e,8),this.lastPos=this.tokenizer.position-e.length;break}}calculateDuration(e){if(this.metadata.format.sampleRate&&e.absoluteGranulePosition>=0){const n=e.absoluteGranulePosition-this.idHeader.preSkip;if(this.metadata.setFormat("numberOfSamples",n),this.metadata.setFormat("duration",n/48e3),this.lastPos!==-1&&this.tokenizer.fileInfo.size&&this.metadata.format.duration){const r=this.tokenizer.fileInfo.size-this.lastPos;this.metadata.setFormat("bitrate",8*r/this.metadata.format.duration)}}}}const F6={len:80,get:(t,e)=>({speex:new ee(8,"ascii").get(t,e+0),version:RT(new ee(20,"ascii").get(t,e+8)),version_id:et.get(t,e+28),header_size:et.get(t,e+32),rate:et.get(t,e+36),mode:et.get(t,e+40),mode_bitstream_version:et.get(t,e+44),nb_channels:et.get(t,e+48),bitrate:et.get(t,e+52),frame_size:et.get(t,e+56),vbr:et.get(t,e+60),frames_per_packet:et.get(t,e+64),extra_headers:et.get(t,e+68),reserved1:et.get(t,e+72),reserved2:et.get(t,e+76)})},$6=De("music-metadata:parser:ogg:speex");class z6 extends Zs{constructor(e,n,r){super(e,n),this.tokenizer=r}parseFirstPage(e,n){$6("First Ogg/Speex page");const r=F6.get(n,0);this.metadata.setFormat("codec",`Speex ${r.version}`),this.metadata.setFormat("numberOfChannels",r.nb_channels),this.metadata.setFormat("sampleRate",r.rate),r.bitrate!==-1&&this.metadata.setFormat("bitrate",r.bitrate)}}const B6={len:42,get:(t,e)=>({id:new ee(7,"ascii").get(t,e),vmaj:pe.get(t,e+7),vmin:pe.get(t,e+8),vrev:pe.get(t,e+9),vmbw:Re.get(t,e+10),vmbh:Re.get(t,e+17),nombr:tn.get(t,e+37),nqual:pe.get(t,e+40)})},kp=De("music-metadata:parser:ogg:theora");class V6{constructor(e,n,r){this.metadata=e,this.tokenizer=r}async parsePage(e,n){e.headerType.firstPage&&await this.parseFirstPage(e,n)}async flush(){kp("flush")}calculateDuration(e){kp("duration calculation not implemented")}async parseFirstPage(e,n){kp("First Ogg/Theora page"),this.metadata.setFormat("codec","Theora");const r=B6.get(n,0);this.metadata.setFormat("bitrate",r.nombr)}}const Vr=De("music-metadata:parser:ogg");class qv{static sum(e,n,r){const i=new DataView(e.buffer,0);let s=0;for(let o=n;o<n+r;++o)s+=i.getUint8(o);return s}constructor(e){this.len=e.page_segments}get(e,n){return{totalPageSize:qv.sum(e,n,this.len)}}}class Af extends jn{constructor(){super(...arguments),this.header=null,this.pageNumber=0,this.pageConsumer=null}async parse(){Vr("pos=%s, parsePage()",this.tokenizer.position);try{let e;do{if(e=await this.tokenizer.readToken(Af.Header),e.capturePattern!=="OggS")throw new Error("Invalid Ogg capture pattern");this.metadata.setFormat("container","Ogg"),this.header=e,this.pageNumber=e.pageSequenceNo,Vr("page#=%s, Ogg.id=%s",e.pageSequenceNo,e.capturePattern);const n=await this.tokenizer.readToken(new qv(e));Vr("totalPageSize=%s",n.totalPageSize);const r=await this.tokenizer.readToken(new on(n.totalPageSize));if(Vr("firstPage=%s, lastPage=%s, continued=%s",e.headerType.firstPage,e.headerType.lastPage,e.headerType.continued),e.headerType.firstPage){const i=new TextDecoder("ascii").decode(r.subarray(0,7));switch(i){case"vorbis":Vr("Set page consumer to Ogg/Vorbis"),this.pageConsumer=new Zs(this.metadata,this.options);break;case"OpusHea":Vr("Set page consumer to Ogg/Opus"),this.pageConsumer=new L6(this.metadata,this.options,this.tokenizer);break;case"Speex  ":Vr("Set page consumer to Ogg/Speex"),this.pageConsumer=new z6(this.metadata,this.options,this.tokenizer);break;case"fishead":case"\0theora":Vr("Set page consumer to Ogg/Theora"),this.pageConsumer=new V6(this.metadata,this.options,this.tokenizer);break;default:throw new Error(`gg audio-codec not recognized (id=${i})`)}}await this.pageConsumer.parsePage(e,r)}while(!e.headerType.lastPage)}catch(e){if(e instanceof Error)e instanceof nt?(this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),Vr("End-of-stream"),this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),this.header&&this.pageConsumer.calculateDuration(this.header)):e.message.startsWith("FourCC")&&this.pageNumber>0&&(this.metadata.addWarning("Invalid FourCC ID, maybe last OGG-page is not marked with last-page flag"),await this.pageConsumer.flush());else throw e}}}Af.Header={len:27,get:(t,e)=>({capturePattern:Be.get(t,e),version:pe.get(t,e+4),headerType:{continued:Qe(t,e+5,0),firstPage:Qe(t,e+5,1),lastPage:Qe(t,e+5,2)},absoluteGranulePosition:Number(Yt.get(t,e+6)),streamSerialNumber:Q.get(t,e+14),pageSequenceNo:Q.get(t,e+18),pageChecksum:Q.get(t,e+22),page_segments:pe.get(t,e+26)})};const al={len:8,get:(t,e)=>({chunkID:new ee(4,"latin1").get(t,e),chunkSize:Q.get(t,e+4)})};class U6{constructor(e){this.tagHeader=e,this.len=e.chunkSize,this.len+=this.len&1}get(e,n){return new ee(this.tagHeader.chunkSize,"ascii").get(e,n)}}var R0;(function(t){t[t.PCM=1]="PCM",t[t.ADPCM=2]="ADPCM",t[t.IEEE_FLOAT=3]="IEEE_FLOAT",t[t.MPEG_ADTS_AAC=5632]="MPEG_ADTS_AAC",t[t.MPEG_LOAS=5634]="MPEG_LOAS",t[t.RAW_AAC1=255]="RAW_AAC1",t[t.DOLBY_AC3_SPDIF=146]="DOLBY_AC3_SPDIF",t[t.DVM=8192]="DVM",t[t.RAW_SPORT=576]="RAW_SPORT",t[t.ESST_AC3=577]="ESST_AC3",t[t.DRM=9]="DRM",t[t.DTS2=8193]="DTS2",t[t.MPEG=80]="MPEG"})(R0||(R0={}));class W6{constructor(e){if(e.chunkSize<16)throw new Error("Invalid chunk size");this.len=e.chunkSize}get(e,n){return{wFormatTag:Te.get(e,n),nChannels:Te.get(e,n+2),nSamplesPerSec:Q.get(e,n+4),nAvgBytesPerSec:Q.get(e,n+8),nBlockAlign:Te.get(e,n+12),wBitsPerSample:Te.get(e,n+14)}}}class H6{constructor(e){if(e.chunkSize<4)throw new Error("Invalid fact chunk size.");this.len=e.chunkSize}get(e,n){return{dwSampleLength:Q.get(e,n)}}}const sE={len:420,get:(t,e)=>({description:Ci(new ee(256,"ascii").get(t,e)).trim(),originator:Ci(new ee(32,"ascii").get(t,e+256)).trim(),originatorReference:Ci(new ee(32,"ascii").get(t,e+288)).trim(),originationDate:Ci(new ee(10,"ascii").get(t,e+320)).trim(),originationTime:Ci(new ee(8,"ascii").get(t,e+330)).trim(),timeReferenceLow:Q.get(t,e+338),timeReferenceHigh:Q.get(t,e+342),version:Te.get(t,e+346),umid:new on(64).get(t,e+348),loudnessValue:Te.get(t,e+412),maxTruePeakLevel:Te.get(t,e+414),maxMomentaryLoudness:Te.get(t,e+416),maxShortTermLoudness:Te.get(t,e+418)})},wi=De("music-metadata:parser:RIFF");class q6 extends jn{constructor(){super(...arguments),this.blockAlign=0}async parse(){const e=await this.tokenizer.readToken(al);if(wi(`pos=${this.tokenizer.position}, parse: chunkID=${e.chunkID}`),e.chunkID==="RIFF")return this.parseRiffChunk(e.chunkSize).catch(n=>{if(!(n instanceof nt))throw n})}async parseRiffChunk(e){const n=await this.tokenizer.readToken(Be);switch(this.metadata.setFormat("container",n),n){case"WAVE":return this.readWaveChunk(e-Be.len);default:throw new Error(`Unsupported RIFF format: RIFF/${n}`)}}async readWaveChunk(e){for(;e>=al.len;){const n=await this.tokenizer.readToken(al);switch(e-=al.len+n.chunkSize,n.chunkSize>e&&this.metadata.addWarning("Data chunk size exceeds file size"),this.header=n,wi(`pos=${this.tokenizer.position}, readChunk: chunkID=RIFF/WAVE/${n.chunkID}`),n.chunkID){case"LIST":await this.parseListTag(n);break;case"fact":this.metadata.setFormat("lossless",!1),this.fact=await this.tokenizer.readToken(new H6(n));break;case"fmt ":{const r=await this.tokenizer.readToken(new W6(n));let i=R0[r.wFormatTag];i||(wi(`WAVE/non-PCM format=${r.wFormatTag}`),i=`non-PCM (${r.wFormatTag})`),this.metadata.setFormat("codec",i),this.metadata.setFormat("bitsPerSample",r.wBitsPerSample),this.metadata.setFormat("sampleRate",r.nSamplesPerSec),this.metadata.setFormat("numberOfChannels",r.nChannels),this.metadata.setFormat("bitrate",r.nBlockAlign*r.nSamplesPerSec*8),this.blockAlign=r.nBlockAlign;break}case"id3 ":case"ID3 ":{const r=await this.tokenizer.readToken(new on(n.chunkSize)),i=wa(r);await new tr().parse(this.metadata,i,this.options);break}case"data":{this.metadata.format.lossless!==!1&&this.metadata.setFormat("lossless",!0);let r=n.chunkSize;if(this.tokenizer.fileInfo.size){const s=this.tokenizer.fileInfo.size-this.tokenizer.position;s<r&&(this.metadata.addWarning("data chunk length exceeding file length"),r=s)}const i=this.fact?this.fact.dwSampleLength:r===4294967295?void 0:r/this.blockAlign;i&&(this.metadata.setFormat("numberOfSamples",i),this.metadata.format.sampleRate&&this.metadata.setFormat("duration",i/this.metadata.format.sampleRate)),this.metadata.format.codec==="ADPCM"?this.metadata.setFormat("bitrate",352e3):this.metadata.format.sampleRate&&this.metadata.setFormat("bitrate",this.blockAlign*this.metadata.format.sampleRate*8),await this.tokenizer.ignore(n.chunkSize);break}case"bext":{const r=await this.tokenizer.readToken(sE);Object.keys(r).forEach(s=>{this.metadata.addTag("exif",`bext.${s}`,r[s])});const i=n.chunkSize-sE.len;await this.tokenizer.ignore(i);break}case"\0\0\0\0":wi(`Ignore padding chunk: RIFF/${n.chunkID} of ${n.chunkSize} bytes`),this.metadata.addWarning(`Ignore chunk: RIFF/${n.chunkID}`),await this.tokenizer.ignore(n.chunkSize);break;default:wi(`Ignore chunk: RIFF/${n.chunkID} of ${n.chunkSize} bytes`),this.metadata.addWarning(`Ignore chunk: RIFF/${n.chunkID}`),await this.tokenizer.ignore(n.chunkSize)}this.header.chunkSize%2===1&&(wi("Read odd padding byte"),await this.tokenizer.ignore(1))}}async parseListTag(e){const n=await this.tokenizer.readToken(new ee(4,"latin1"));switch(wi("pos=%s, parseListTag: chunkID=RIFF/WAVE/LIST/%s",this.tokenizer.position,n),n){case"INFO":return this.parseRiffInfoTags(e.chunkSize-4);default:return this.metadata.addWarning(`Ignore chunk: RIFF/WAVE/LIST/${n}`),wi(`Ignoring chunkID=RIFF/WAVE/LIST/${n}`),this.tokenizer.ignore(e.chunkSize-4).then()}}async parseRiffInfoTags(e){for(;e>=8;){const n=await this.tokenizer.readToken(al),r=new U6(n),i=await this.tokenizer.readToken(r);this.addTag(n.chunkID,Ci(i)),e-=8+r.len}if(e!==0)throw new Error(`Illegal remaining size: ${e}`)}addTag(e,n){this.metadata.addTag("exif",e,n)}}const G6=[6e3,8e3,9600,11025,12e3,16e3,22050,24e3,32e3,44100,48e3,64e3,88200,96e3,192e3,-1],Hu={len:32,get:(t,e)=>{const n=Q.get(t,e+24),r={BlockID:Be.get(t,e),blockSize:Q.get(t,e+4),version:Te.get(t,e+8),totalSamples:Q.get(t,e+12),blockIndex:Q.get(t,e+16),blockSamples:Q.get(t,e+20),flags:{bitsPerSample:(1+xh(n,0,2))*8,isMono:yr(n,2),isHybrid:yr(n,3),isJointStereo:yr(n,4),crossChannel:yr(n,5),hybridNoiseShaping:yr(n,6),floatingPoint:yr(n,7),samplingRate:G6[xh(n,23,4)],isDSD:yr(n,31)},crc:new on(4).get(t,e+28)};return r.flags.isDSD&&(r.totalSamples*=8),r}},Tp={len:1,get:(t,e)=>({functionId:xh(t[e],0,6),isOptional:yr(t[e],5),isOddSize:yr(t[e],6),largeBlock:yr(t[e],7)})};function yr(t,e){return xh(t,e,1)===1}function xh(t,e,n){return t>>>e&4294967295>>>32-n}const _s=De("music-metadata:parser:WavPack");class K6 extends jn{constructor(){super(...arguments),this.audioDataSize=0}async parse(){return this.audioDataSize=0,await this.parseWavPackBlocks(),Er.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async parseWavPackBlocks(){do{if(await this.tokenizer.peekToken(Be)!=="wvpk")break;const n=await this.tokenizer.readToken(Hu);if(n.BlockID!=="wvpk")throw new Error("Invalid WavPack Block-ID");_s(`WavPack header blockIndex=${n.blockIndex}, len=${Hu.len}`),n.blockIndex===0&&!this.metadata.format.container&&(this.metadata.setFormat("container","WavPack"),this.metadata.setFormat("lossless",!n.flags.isHybrid),this.metadata.setFormat("bitsPerSample",n.flags.bitsPerSample),n.flags.isDSD||(this.metadata.setFormat("sampleRate",n.flags.samplingRate),this.metadata.setFormat("duration",n.totalSamples/n.flags.samplingRate)),this.metadata.setFormat("numberOfChannels",n.flags.isMono?1:2),this.metadata.setFormat("numberOfSamples",n.totalSamples),this.metadata.setFormat("codec",n.flags.isDSD?"DSD":"PCM"));const r=n.blockSize-(Hu.len-8);await(n.blockIndex===0?this.parseMetadataSubBlock(n,r):this.tokenizer.ignore(r)),n.blockSamples>0&&(this.audioDataSize+=n.blockSize)}while(!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=Hu.len);this.metadata.format.duration&&this.metadata.setFormat("bitrate",this.audioDataSize*8/this.metadata.format.duration)}async parseMetadataSubBlock(e,n){let r=n;for(;r>Tp.len;){const i=await this.tokenizer.readToken(Tp),s=await this.tokenizer.readNumber(i.largeBlock?uh:pe),o=new Uint8Array(s*2-(i.isOddSize?1:0));switch(await this.tokenizer.readBuffer(o),_s(`Metadata Sub-Blocks functionId=0x${i.functionId.toString(16)}, id.largeBlock=${i.largeBlock},data-size=${o.length}`),i.functionId){case 0:break;case 14:{_s("ID_DSD_BLOCK");const a=1<<pe.get(o,0),l=e.flags.samplingRate*a*8;if(!e.flags.isDSD)throw new Error("Only expect DSD block if DSD-flag is set");this.metadata.setFormat("sampleRate",l),this.metadata.setFormat("duration",e.totalSamples/l);break}case 36:_s("ID_ALT_TRAILER: trailer for non-wav files");break;case 38:this.metadata.setFormat("audioMD5",o);break;case 47:_s(`ID_BLOCK_CHECKSUM: checksum=${$v(o)}`);break;default:_s(`Ignore unsupported meta-sub-block-id functionId=0x${i.functionId.toString(16)}`);break}r-=Tp.len+(i.largeBlock?uh.len:pe.len)+s*2,_s(`remainingLength=${r}`),i.isOddSize&&this.tokenizer.ignore(1)}if(r!==0)throw new Error("metadata-sub-block should fit it remaining length")}}const qu={len:12,get:(t,e)=>({id:Be.get(t,e),size:Yt.get(t,e+4)})},X6={len:16,get:(t,e)=>({fileSize:dh.get(t,e),metadataPointer:dh.get(t,e+8)})};var oE;(function(t){t[t.mono=1]="mono",t[t.stereo=2]="stereo",t[t.channels=3]="channels",t[t.quad=4]="quad",t[t["4 channels"]=5]="4 channels",t[t["5 channels"]=6]="5 channels",t[t["5.1 channels"]=7]="5.1 channels"})(oE||(oE={}));const Q6={len:40,get:(t,e)=>({formatVersion:et.get(t,e),formatID:et.get(t,e+4),channelType:et.get(t,e+8),channelNum:et.get(t,e+12),samplingFrequency:et.get(t,e+16),bitsPerSample:et.get(t,e+20),sampleCount:dh.get(t,e+24),blockSizePerChannel:et.get(t,e+32)})},Ip=De("music-metadata:parser:DSF");class Y6 extends Cf{async postId3v2Parse(){const e=this.tokenizer.position,n=await this.tokenizer.readToken(qu);if(n.id!=="DSD ")throw new Error("Invalid chunk signature");this.metadata.setFormat("container","DSF"),this.metadata.setFormat("lossless",!0);const r=await this.tokenizer.readToken(X6);if(r.metadataPointer===BigInt(0))Ip("No ID3v2 tag present");else return Ip(`expect ID3v2 at offset=${r.metadataPointer}`),await this.parseChunks(r.fileSize-n.size),await this.tokenizer.ignore(Number(r.metadataPointer)-this.tokenizer.position-e),new tr().parse(this.metadata,this.tokenizer,this.options)}async parseChunks(e){for(;e>=qu.len;){const n=await this.tokenizer.readToken(qu);switch(Ip(`Parsing chunk name=${n.id} size=${n.size}`),n.id){case"fmt ":{const r=await this.tokenizer.readToken(Q6);this.metadata.setFormat("numberOfChannels",r.channelNum),this.metadata.setFormat("sampleRate",r.samplingFrequency),this.metadata.setFormat("bitsPerSample",r.bitsPerSample),this.metadata.setFormat("numberOfSamples",r.sampleCount),this.metadata.setFormat("duration",Number(r.sampleCount)/r.samplingFrequency);const i=r.bitsPerSample*r.samplingFrequency*r.channelNum;this.metadata.setFormat("bitrate",i);return}default:this.tokenizer.ignore(Number(n.size)-qu.len);break}e-=n.size}}}const Io={len:12,get:(t,e)=>({chunkID:Be.get(t,e),chunkSize:_T.get(t,e+4)})},Kt=De("music-metadata:parser:aiff");class J6 extends jn{async parse(){const e=await this.tokenizer.readToken(Io);if(e.chunkID!=="FRM8")throw new Error("Unexpected chunk-ID");const n=(await this.tokenizer.readToken(Be)).trim();switch(n){case"DSD":return this.metadata.setFormat("container",`DSDIFF/${n}`),this.metadata.setFormat("lossless",!0),this.readFmt8Chunks(e.chunkSize-BigInt(Be.len));default:throw new Error(`Unsupported DSDIFF type: ${n}`)}}async readFmt8Chunks(e){for(;e>=Io.len;){const n=await this.tokenizer.readToken(Io);Kt(`Chunk id=${n.chunkID}`),await this.readData(n),e-=BigInt(Io.len)+n.chunkSize}}async readData(e){Kt(`Reading data of chunk[ID=${e.chunkID}, size=${e.chunkSize}]`);const n=this.tokenizer.position;switch(e.chunkID.trim()){case"FVER":{const i=await this.tokenizer.readToken(Q);Kt(`DSDIFF version=${i}`);break}case"PROP":{if(await this.tokenizer.readToken(Be)!=="SND ")throw new Error("Unexpected PROP-chunk ID");await this.handleSoundPropertyChunks(e.chunkSize-BigInt(Be.len));break}case"ID3":{const i=await this.tokenizer.readToken(new on(Number(e.chunkSize))),s=wa(i);await new tr().parse(this.metadata,s,this.options);break}case"DSD":this.metadata.format.numberOfChannels&&this.metadata.setFormat("numberOfSamples",Number(e.chunkSize*BigInt(8)/BigInt(this.metadata.format.numberOfChannels))),this.metadata.format.numberOfSamples&&this.metadata.format.sampleRate&&this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate);break;default:Kt(`Ignore chunk[ID=${e.chunkID}, size=${e.chunkSize}]`);break}const r=e.chunkSize-BigInt(this.tokenizer.position-n);r>0&&(Kt(`After Parsing chunk, remaining ${r} bytes`),await this.tokenizer.ignore(Number(r)))}async handleSoundPropertyChunks(e){for(Kt(`Parsing sound-property-chunks, remainingSize=${e}`);e>0;){const n=await this.tokenizer.readToken(Io);Kt(`Sound-property-chunk[ID=${n.chunkID}, size=${n.chunkSize}]`);const r=this.tokenizer.position;switch(n.chunkID.trim()){case"FS":{const s=await this.tokenizer.readToken(re);this.metadata.setFormat("sampleRate",s);break}case"CHNL":{const s=await this.tokenizer.readToken(Re);this.metadata.setFormat("numberOfChannels",s),await this.handleChannelChunks(n.chunkSize-BigInt(Re.len));break}case"CMPR":{const s=(await this.tokenizer.readToken(Be)).trim(),o=await this.tokenizer.readToken(pe),a=await this.tokenizer.readToken(new ee(o,"ascii"));s==="DSD"&&(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("bitsPerSample",1)),this.metadata.setFormat("codec",`${s} (${a})`);break}case"ABSS":{const s=await this.tokenizer.readToken(Re),o=await this.tokenizer.readToken(pe),a=await this.tokenizer.readToken(pe),l=await this.tokenizer.readToken(re);Kt(`ABSS ${s}:${o}:${a}.${l}`);break}case"LSCO":{const s=await this.tokenizer.readToken(Re);Kt(`LSCO lsConfig=${s}`);break}default:Kt(`Unknown sound-property-chunk[ID=${n.chunkID}, size=${n.chunkSize}]`),await this.tokenizer.ignore(Number(n.chunkSize))}const i=n.chunkSize-BigInt(this.tokenizer.position-r);i>0&&(Kt(`After Parsing sound-property-chunk ${n.chunkSize}, remaining ${i} bytes`),await this.tokenizer.ignore(Number(i))),e-=BigInt(Io.len)+n.chunkSize,Kt(`Parsing sound-property-chunks, remainingSize=${e}`)}if(this.metadata.format.lossless&&this.metadata.format.sampleRate&&this.metadata.format.numberOfChannels&&this.metadata.format.bitsPerSample){const n=this.metadata.format.sampleRate*this.metadata.format.numberOfChannels*this.metadata.format.bitsPerSample;this.metadata.setFormat("bitrate",n)}}async handleChannelChunks(e){Kt(`Parsing channel-chunks, remainingSize=${e}`);const n=[];for(;e>=Be.len;){const r=await this.tokenizer.readToken(Be);Kt(`Channel[ID=${r}]`),n.push(r),e-=BigInt(Be.len)}return Kt(`Channels: ${n.join(", ")}`),n}}var A;(function(t){t[t.string=0]="string",t[t.uint=1]="uint",t[t.uid=2]="uid",t[t.bool=3]="bool",t[t.binary=4]="binary",t[t.float=5]="float"})(A||(A={}));const Z6={name:"dtd",container:{440786851:{name:"ebml",container:{17030:{name:"ebmlVersion",value:A.uint},17143:{name:"ebmlReadVersion",value:A.uint},17138:{name:"ebmlMaxIDWidth",value:A.uint},17139:{name:"ebmlMaxSizeWidth",value:A.uint},17026:{name:"docType",value:A.string},17031:{name:"docTypeVersion",value:A.uint},17029:{name:"docTypeReadVersion",value:A.uint}}},408125543:{name:"segment",container:{290298740:{name:"seekHead",container:{19899:{name:"seek",multiple:!0,container:{21419:{name:"id",value:A.binary},21420:{name:"position",value:A.uint}}}}},357149030:{name:"info",container:{29604:{name:"uid",value:A.uid},29572:{name:"filename",value:A.string},3979555:{name:"prevUID",value:A.uid},3965867:{name:"prevFilename",value:A.string},4110627:{name:"nextUID",value:A.uid},4096955:{name:"nextFilename",value:A.string},2807729:{name:"timecodeScale",value:A.uint},17545:{name:"duration",value:A.float},17505:{name:"dateUTC",value:A.uint},31657:{name:"title",value:A.string},19840:{name:"muxingApp",value:A.string},22337:{name:"writingApp",value:A.string}}},524531317:{name:"cluster",multiple:!0,container:{231:{name:"timecode",value:A.uid},22743:{name:"silentTracks ",multiple:!0},167:{name:"position",value:A.uid},171:{name:"prevSize",value:A.uid},160:{name:"blockGroup"},163:{name:"simpleBlock"}}},374648427:{name:"tracks",container:{174:{name:"entries",multiple:!0,container:{215:{name:"trackNumber",value:A.uint},29637:{name:"uid",value:A.uid},131:{name:"trackType",value:A.uint},185:{name:"flagEnabled",value:A.bool},136:{name:"flagDefault",value:A.bool},21930:{name:"flagForced",value:A.bool},156:{name:"flagLacing",value:A.bool},28135:{name:"minCache",value:A.uint},28136:{name:"maxCache",value:A.uint},2352003:{name:"defaultDuration",value:A.uint},2306383:{name:"timecodeScale",value:A.float},21358:{name:"name",value:A.string},2274716:{name:"language",value:A.string},134:{name:"codecID",value:A.string},25506:{name:"codecPrivate",value:A.binary},2459272:{name:"codecName",value:A.string},3839639:{name:"codecSettings",value:A.string},3883072:{name:"codecInfoUrl",value:A.string},2536e3:{name:"codecDownloadUrl",value:A.string},170:{name:"codecDecodeAll",value:A.bool},28587:{name:"trackOverlay",value:A.uint},224:{name:"video",container:{154:{name:"flagInterlaced",value:A.bool},21432:{name:"stereoMode",value:A.uint},176:{name:"pixelWidth",value:A.uint},186:{name:"pixelHeight",value:A.uint},21680:{name:"displayWidth",value:A.uint},21690:{name:"displayHeight",value:A.uint},21683:{name:"aspectRatioType",value:A.uint},3061028:{name:"colourSpace",value:A.uint},3126563:{name:"gammaValue",value:A.float}}},225:{name:"audio",container:{181:{name:"samplingFrequency",value:A.float},30901:{name:"outputSamplingFrequency",value:A.float},159:{name:"channels",value:A.uint},148:{name:"channels",value:A.uint},32123:{name:"channelPositions",value:A.binary},25188:{name:"bitDepth",value:A.uint}}},28032:{name:"contentEncodings",container:{25152:{name:"contentEncoding",container:{20529:{name:"order",value:A.uint},20530:{name:"scope",value:A.bool},20531:{name:"type",value:A.uint},20532:{name:"contentEncoding",container:{16980:{name:"contentCompAlgo",value:A.uint},16981:{name:"contentCompSettings",value:A.binary}}},20533:{name:"contentEncoding",container:{18401:{name:"contentEncAlgo",value:A.uint},18402:{name:"contentEncKeyID",value:A.binary},18403:{name:"contentSignature ",value:A.binary},18404:{name:"ContentSigKeyID  ",value:A.binary},18405:{name:"contentSigAlgo ",value:A.uint},18406:{name:"contentSigHashAlgo ",value:A.uint}}},25188:{name:"bitDepth",value:A.uint}}}}}}}}},475249515:{name:"cues",container:{187:{name:"cuePoint",container:{179:{name:"cueTime",value:A.uid},183:{name:"positions",container:{247:{name:"track",value:A.uint},241:{name:"clusterPosition",value:A.uint},21368:{name:"blockNumber",value:A.uint},234:{name:"codecState",value:A.uint},219:{name:"reference",container:{150:{name:"time",value:A.uint},151:{name:"cluster",value:A.uint},21343:{name:"number",value:A.uint},235:{name:"codecState",value:A.uint}}},240:{name:"relativePosition",value:A.uint}}}}}}},423732329:{name:"attachments",container:{24999:{name:"attachedFiles",multiple:!0,container:{18046:{name:"description",value:A.string},18030:{name:"name",value:A.string},18016:{name:"mimeType",value:A.string},18012:{name:"data",value:A.binary},18094:{name:"uid",value:A.uid}}}}},272869232:{name:"chapters",container:{17849:{name:"editionEntry",container:{182:{name:"chapterAtom",container:{29636:{name:"uid",value:A.uid},145:{name:"timeStart",value:A.uint},146:{name:"timeEnd",value:A.uid},152:{name:"hidden",value:A.bool},17816:{name:"enabled",value:A.uid},143:{name:"track",container:{137:{name:"trackNumber",value:A.uid},128:{name:"display",container:{133:{name:"string",value:A.string},17276:{name:"language ",value:A.string},17278:{name:"country ",value:A.string}}}}}}}}}}},307544935:{name:"tags",container:{29555:{name:"tag",multiple:!0,container:{25536:{name:"target",container:{25541:{name:"tagTrackUID",value:A.uid},25540:{name:"tagChapterUID",value:A.uint},25542:{name:"tagAttachmentUID",value:A.uid},25546:{name:"targetType",value:A.string},26826:{name:"targetTypeValue",value:A.uint},25545:{name:"tagEditionUID",value:A.uid}}},26568:{name:"simpleTags",multiple:!0,container:{17827:{name:"name",value:A.string},17543:{name:"string",value:A.string},17541:{name:"binary",value:A.binary},17530:{name:"language",value:A.string},17531:{name:"languageIETF",value:A.string},17540:{name:"default",value:A.bool}}}}}}}}}}},Co=De("music-metadata:parser:ebml");var nr;(function(t){t[t.ReadNext=0]="ReadNext",t[t.IgnoreElement=2]="IgnoreElement",t[t.SkipSiblings=3]="SkipSiblings",t[t.TerminateParsing=4]="TerminateParsing",t[t.SkipElement=5]="SkipElement"})(nr||(nr={}));class eL{constructor(e){this.tokenizer=e,this.padding=0,this.parserMap=new Map,this.ebmlMaxIDLength=4,this.ebmlMaxSizeLength=8,this.parserMap.set(A.uint,n=>this.readUint(n)),this.parserMap.set(A.string,n=>this.readString(n)),this.parserMap.set(A.binary,n=>this.readBuffer(n)),this.parserMap.set(A.uid,async n=>this.readBuffer(n)),this.parserMap.set(A.bool,n=>this.readFlag(n)),this.parserMap.set(A.float,n=>this.readFloat(n))}async iterate(e,n,r){return this.parseContainer($T(e),n,r)}async parseContainer(e,n,r){const i={};for(;this.tokenizer.position<n;){let s;const o=this.tokenizer.position;try{s=await this.readElement()}catch(l){if(l instanceof nt)break;throw l}const a=e.container[s.id];if(a)switch(r.startNext(a)){case nr.ReadNext:if(s.id,Co(`Read element: name=${Ts(a)}{id=0x${s.id.toString(16)}, container=${!!a.container}} at position=${o}`),a.container){const c=await this.parseContainer(a,s.len>=0?this.tokenizer.position+s.len:-1,r);a.multiple?(i[a.name]||(i[a.name]=[]),i[a.name].push(c)):i[a.name]=c,await r.elementValue(a,c,o)}else{const c=this.parserMap.get(a.value);if(typeof c=="function"){const d=await c(s);i[a.name]=d,await r.elementValue(a,d,o)}}break;case nr.SkipElement:Co(`Go to next element: name=${Ts(a)}, element.id=0x${s.id}, container=${!!a.container} at position=${o}`);break;case nr.IgnoreElement:Co(`Ignore element: name=${Ts(a)}, element.id=0x${s.id}, container=${!!a.container} at position=${o}`),await this.tokenizer.ignore(s.len);break;case nr.SkipSiblings:Co(`Ignore remaining container, at: name=${Ts(a)}, element.id=0x${s.id}, container=${!!a.container} at position=${o}`),await this.tokenizer.ignore(n-this.tokenizer.position);break;case nr.TerminateParsing:return Co(`Terminate parsing at element: name=${Ts(a)}, element.id=0x${s.id}, container=${!!a.container} at position=${o}`),i}else switch(s.id){case 236:this.padding+=s.len,await this.tokenizer.ignore(s.len);break;default:Co(`parseEbml: parent=${Ts(e)}, unknown child: id=${s.id.toString(16)} at position=${o}`),this.padding+=s.len,await this.tokenizer.ignore(s.len)}}return i}async readVintData(e){const n=await this.tokenizer.peekNumber(pe);let r=128,i=1;for(;!(n&r);){if(i>e)throw new Error("VINT value exceeding maximum size");++i,r>>=1}const s=new Uint8Array(i);return await this.tokenizer.readBuffer(s),s}async readElement(){const e=await this.readVintData(this.ebmlMaxIDLength),n=await this.readVintData(this.ebmlMaxSizeLength);return n[0]^=128>>n.length-1,{id:Cp(e,e.length),len:Cp(n,n.length)}}async readFloat(e){switch(e.len){case 0:return 0;case 4:return this.tokenizer.readNumber(ET);case 8:return this.tokenizer.readNumber(x0);case 10:return this.tokenizer.readNumber(x0);default:throw new Error(`Invalid IEEE-754 float length: ${e.len}`)}}async readFlag(e){return await this.readUint(e)===1}async readUint(e){const n=await this.readBuffer(e);return Cp(n,e.len)}async readString(e){return(await this.tokenizer.readToken(new ee(e.len,"utf-8"))).replace(/\x00.*$/g,"")}async readBuffer(e){const n=new Uint8Array(e.len);return await this.tokenizer.readBuffer(n),n}}function Cp(t,e){return Number(tL(t,e))}function tL(t,e){const n=new Uint8Array(8),r=t.subarray(0,e);try{return n.set(r,8-e),Lv.get(n,0)}catch{return BigInt(-1)}}function $T(t){return t.container&&Object.keys(t.container).map(e=>{const n=t.container[e];return n.id=Number.parseInt(e),n}).forEach(e=>{e.parent=t,$T(e)}),t}function Ts(t){let e="";return t.parent&&t.parent.name!=="dtd"&&(e+=`${Ts(t.parent)}/`),e+t.name}const Gu=De("music-metadata:parser:matroska");class nL extends jn{constructor(){super(...arguments),this.seekHeadOffset=0,this.flagUseIndexToSkipClusters=!1}init(e,n,r){return super.init(e,n,r),this.flagUseIndexToSkipClusters=r.mkvUseIndex??!1,this}async parse(){const e=this.tokenizer.fileInfo.size??Number.MAX_SAFE_INTEGER,n=new eL(this.tokenizer);Gu("Initializing DTD end MatroskaIterator"),await n.iterate(Z6,e,{startNext:r=>{switch(r.id){case 475249515:return Gu(`Skip element: name=${r.name}, id=0x${r.id.toString(16)}`),nr.IgnoreElement;case 524531317:if(this.flagUseIndexToSkipClusters&&this.seekHead){const i=this.seekHead.seek.find(s=>s.position+this.seekHeadOffset>this.tokenizer.position);if(i){const s=i.position+this.seekHeadOffset-this.tokenizer.position;return Gu(`Use index to go to next position, ignoring ${s} bytes`),this.tokenizer.ignore(s),nr.SkipElement}}return nr.IgnoreElement;default:return nr.ReadNext}},elementValue:async(r,i,s)=>{switch(Gu(`Received: name=${r.name}, value=${i}`),r.id){case 17026:this.metadata.setFormat("container",`EBML/${i}`);break;case 290298740:this.seekHead=i,this.seekHeadOffset=s;break;case 357149030:{const o=i,a=o.timecodeScale?o.timecodeScale:1e6;if(typeof o.duration=="number"){const l=o.duration*a/1e9;await this.addTag("segment:title",o.title),this.metadata.setFormat("duration",Number(l))}}break;case 374648427:{const o=i;if(o!=null&&o.entries){o.entries.forEach(l=>{const c={codecName:l.codecID.replace("A_","").replace("V_",""),codecSettings:l.codecSettings,flagDefault:l.flagDefault,flagLacing:l.flagLacing,flagEnabled:l.flagEnabled,language:l.language,name:l.name,type:l.trackType,audio:l.audio,video:l.video};this.metadata.addStreamInfo(c)});const a=o.entries.filter(l=>l.trackType===Ys.audio).reduce((l,c)=>!l||c.flagDefault&&!l.flagDefault||c.trackNumber<l.trackNumber?c:l,null);a&&(this.metadata.setFormat("codec",a.codecID.replace("A_","")),this.metadata.setFormat("sampleRate",a.audio.samplingFrequency),this.metadata.setFormat("numberOfChannels",a.audio.channels))}}break;case 307544935:{const o=i;await Promise.all(o.tag.map(async a=>{const l=a.target,c=l!=null&&l.targetTypeValue?_0[l.targetTypeValue]:l!=null&&l.targetType?l.targetType:"track";await Promise.all(a.simpleTags.map(async d=>{const h=d.string?d.string:d.binary;await this.addTag(`${c}:${d.name}`,h)}))}))}break;case 423732329:{const o=i;await Promise.all(o.attachedFiles.filter(a=>a.mimeType.startsWith("image/")).map(a=>this.addTag("picture",{data:a.data,format:a.mimeType,description:a.description,name:a.name})))}break}}})}async addTag(e,n){await this.metadata.addTag("matroska",e,n)}}const wh=De("music-metadata:parser:factory");function rL(t){const e=zv.parse(t),n=tM(e.type);return{type:n.type,subtype:n.subtype,suffix:n.suffix,parameters:e.parameters}}async function iL(t,e){const{mimeType:n,path:r,url:i}=t.fileInfo,s=zT(n)||P0(r)||P0(i);return s||wh(`No parser found for MIME-type / extension: ${n}`),sL(t,s,e)}async function sL(t,e,n){if(!e){wh("Guess parser on content...");const s=new Uint8Array(4100);if(await t.peekBuffer(s,{mayBeLess:!0}),t.fileInfo.path&&(e=P0(t.fileInfo.path)),!e){const o=await IT(s);if(!o)throw new Error("Failed to determine audio format");if(wh(`Guessed file type is mime=${o.mime}, extension=${o.ext}`),e=zT(o.mime),!e)throw new Error(`Guessed MIME-type not supported: ${o.mime}`)}}const r=await oL(e),i=new jM(n);return await r.init(i,t,n??{}).parse(),i.toCommonMetadata()}function P0(t){if(!t)return;switch(aL(t).toLocaleLowerCase()||t){case".mp2":case".mp3":case".m2a":case".aac":return"mpeg";case".ape":return"apev2";case".mp4":case".m4a":case".m4b":case".m4pa":case".m4v":case".m4r":case".3gp":return"mp4";case".wma":case".wmv":case".asf":return"asf";case".flac":return"flac";case".ogg":case".ogv":case".oga":case".ogm":case".ogx":case".opus":case".spx":return"ogg";case".aif":case".aiff":case".aifc":return"aiff";case".wav":case".bwf":return"riff";case".wv":case".wvp":return"wavpack";case".mpc":return"musepack";case".dsf":return"dsf";case".dff":return"dsdiff";case".mka":case".mkv":case".mk3d":case".mks":case".webm":return"matroska"}}async function oL(t){switch(t){case"aiff":return new BM;case"adts":case"mpeg":return new I6;case"apev2":return new Er;case"asf":return new ZM;case"dsf":return new Y6;case"dsdiff":return new J6;case"flac":return new n6;case"mp4":return new vh;case"musepack":return new O6;case"ogg":return new Af;case"riff":return new q6;case"wavpack":return new K6;case"matroska":return new nL;default:throw new Error(`Unknown parser type: ${t}`)}}function aL(t){const e=t.lastIndexOf(".");return e===-1?"":t.slice(e)}function zT(t){let e;if(!t)return;try{e=rL(t)}catch{wh(`Invalid HTTP Content-Type header value: ${t}`);return}const n=e.subtype.indexOf("x-")===0?e.subtype.substring(2):e.subtype;switch(e.type){case"audio":switch(n){case"mp3":case"mpeg":return"mpeg";case"aac":case"aacp":return"adts";case"flac":return"flac";case"ape":case"monkeys-audio":return"apev2";case"mp4":case"m4a":return"mp4";case"ogg":case"opus":case"speex":return"ogg";case"ms-wma":case"ms-wmv":case"ms-asf":return"asf";case"aiff":case"aif":case"aifc":return"aiff";case"vnd.wave":case"wav":case"wave":return"riff";case"wavpack":return"wavpack";case"musepack":return"musepack";case"matroska":case"webm":return"matroska";case"dsf":return"dsf"}break;case"video":switch(n){case"ms-asf":case"ms-wmv":return"asf";case"m4v":case"mp4":return"mp4";case"ogg":return"ogg";case"matroska":case"webm":return"matroska"}break;case"application":switch(n){case"vnd.ms-asf":return"asf";case"ogg":return"ogg"}break}}async function lL(t,e={}){const n={mimeType:t.type,size:t.size};return t instanceof File&&(n.path=t.name),cL(t.stream(),n,e)}function cL(t,e,n={}){return uL(wT(t,{fileInfo:typeof e=="string"?{mimeType:e}:e}),n)}function uL(t,e){return iL(t,e)}let _h=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");function BT(t,e){return function(){return t.apply(e,arguments)}}const{toString:dL}=Object.prototype,{getPrototypeOf:Gv}=Object,Rf=(t=>e=>{const n=dL.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),$r=t=>(t=t.toLowerCase(),e=>Rf(e)===t),Pf=t=>e=>typeof e===t,{isArray:za}=Array,hc=Pf("undefined");function hL(t){return t!==null&&!hc(t)&&t.constructor!==null&&!hc(t.constructor)&&Un(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const VT=$r("ArrayBuffer");function fL(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&VT(t.buffer),e}const mL=Pf("string"),Un=Pf("function"),UT=Pf("number"),Nf=t=>t!==null&&typeof t=="object",pL=t=>t===!0||t===!1,Sd=t=>{if(Rf(t)!=="object")return!1;const e=Gv(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},gL=$r("Date"),yL=$r("File"),vL=$r("Blob"),xL=$r("FileList"),wL=t=>Nf(t)&&Un(t.pipe),_L=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Un(t.append)&&((e=Rf(t))==="formdata"||e==="object"&&Un(t.toString)&&t.toString()==="[object FormData]"))},EL=$r("URLSearchParams"),SL=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Wc(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),za(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function WT(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const HT=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),qT=t=>!hc(t)&&t!==HT;function N0(){const{caseless:t}=qT(this)&&this||{},e={},n=(r,i)=>{const s=t&&WT(e,i)||i;Sd(e[s])&&Sd(r)?e[s]=N0(e[s],r):Sd(r)?e[s]=N0({},r):za(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Wc(arguments[r],n);return e}const bL=(t,e,n,{allOwnKeys:r}={})=>(Wc(e,(i,s)=>{n&&Un(i)?t[s]=BT(i,n):t[s]=i},{allOwnKeys:r}),t),kL=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),TL=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},IL=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Gv(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},CL=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},AL=t=>{if(!t)return null;if(za(t))return t;let e=t.length;if(!UT(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},RL=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Gv(Uint8Array)),PL=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},NL=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},DL=$r("HTMLFormElement"),jL=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),aE=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),OL=$r("RegExp"),GT=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Wc(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},ML=t=>{GT(t,(e,n)=>{if(Un(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Un(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},LL=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return za(t)?r(t):r(String(t).split(e)),n},FL=()=>{},$L=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Ap="abcdefghijklmnopqrstuvwxyz",lE="0123456789",KT={DIGIT:lE,ALPHA:Ap,ALPHA_DIGIT:Ap+Ap.toUpperCase()+lE},zL=(t=16,e=KT.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function BL(t){return!!(t&&Un(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const VL=t=>{const e=new Array(10),n=(r,i)=>{if(Nf(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=za(r)?[]:{};return Wc(r,(o,a)=>{const l=n(o,i+1);!hc(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},UL=$r("AsyncFunction"),WL=t=>t&&(Nf(t)||Un(t))&&Un(t.then)&&Un(t.catch),R={isArray:za,isArrayBuffer:VT,isBuffer:hL,isFormData:_L,isArrayBufferView:fL,isString:mL,isNumber:UT,isBoolean:pL,isObject:Nf,isPlainObject:Sd,isUndefined:hc,isDate:gL,isFile:yL,isBlob:vL,isRegExp:OL,isFunction:Un,isStream:wL,isURLSearchParams:EL,isTypedArray:RL,isFileList:xL,forEach:Wc,merge:N0,extend:bL,trim:SL,stripBOM:kL,inherits:TL,toFlatObject:IL,kindOf:Rf,kindOfTest:$r,endsWith:CL,toArray:AL,forEachEntry:PL,matchAll:NL,isHTMLForm:DL,hasOwnProperty:aE,hasOwnProp:aE,reduceDescriptors:GT,freezeMethods:ML,toObjectSet:LL,toCamelCase:jL,noop:FL,toFiniteNumber:$L,findKey:WT,global:HT,isContextDefined:qT,ALPHABET:KT,generateString:zL,isSpecCompliantForm:BL,toJSONObject:VL,isAsyncFn:UL,isThenable:WL};function we(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}R.inherits(we,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:R.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const XT=we.prototype,QT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{QT[t]={value:t}});Object.defineProperties(we,QT);Object.defineProperty(XT,"isAxiosError",{value:!0});we.from=(t,e,n,r,i,s)=>{const o=Object.create(XT);return R.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),we.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const HL=null;function D0(t){return R.isPlainObject(t)||R.isArray(t)}function YT(t){return R.endsWith(t,"[]")?t.slice(0,-2):t}function cE(t,e,n){return t?t.concat(e).map(function(i,s){return i=YT(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function qL(t){return R.isArray(t)&&!t.some(D0)}const GL=R.toFlatObject(R,{},null,function(e){return/^is[A-Z]/.test(e)});function Df(t,e,n){if(!R.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=R.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,_){return!R.isUndefined(_[x])});const r=n.metaTokens,i=n.visitor||d,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&R.isSpecCompliantForm(e);if(!R.isFunction(i))throw new TypeError("visitor must be a function");function c(y){if(y===null)return"";if(R.isDate(y))return y.toISOString();if(!l&&R.isBlob(y))throw new we("Blob is not supported. Use a Buffer instead.");return R.isArrayBuffer(y)||R.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,x,_){let v=y;if(y&&!_&&typeof y=="object"){if(R.endsWith(x,"{}"))x=r?x:x.slice(0,-2),y=JSON.stringify(y);else if(R.isArray(y)&&qL(y)||(R.isFileList(y)||R.endsWith(x,"[]"))&&(v=R.toArray(y)))return x=YT(x),v.forEach(function(w,E){!(R.isUndefined(w)||w===null)&&e.append(o===!0?cE([x],E,s):o===null?x:x+"[]",c(w))}),!1}return D0(y)?!0:(e.append(cE(_,x,s),c(y)),!1)}const h=[],m=Object.assign(GL,{defaultVisitor:d,convertValue:c,isVisitable:D0});function p(y,x){if(!R.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+x.join("."));h.push(y),R.forEach(y,function(v,g){(!(R.isUndefined(v)||v===null)&&i.call(e,v,R.isString(g)?g.trim():g,x,m))===!0&&p(v,x?x.concat(g):[g])}),h.pop()}}if(!R.isObject(t))throw new TypeError("data must be an object");return p(t),e}function uE(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Kv(t,e){this._pairs=[],t&&Df(t,this,e)}const JT=Kv.prototype;JT.append=function(e,n){this._pairs.push([e,n])};JT.toString=function(e){const n=e?function(r){return e.call(this,r,uE)}:uE;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function KL(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ZT(t,e,n){if(!e)return t;const r=n&&n.encode||KL,i=n&&n.serialize;let s;if(i?s=i(e,n):s=R.isURLSearchParams(e)?e.toString():new Kv(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class XL{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){R.forEach(this.handlers,function(r){r!==null&&e(r)})}}const dE=XL,eI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},QL=typeof URLSearchParams<"u"?URLSearchParams:Kv,YL=typeof FormData<"u"?FormData:null,JL=typeof Blob<"u"?Blob:null,ZL=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),eF=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Sr={isBrowser:!0,classes:{URLSearchParams:QL,FormData:YL,Blob:JL},isStandardBrowserEnv:ZL,isStandardBrowserWebWorkerEnv:eF,protocols:["http","https","file","blob","url","data"]};function tF(t,e){return Df(t,new Sr.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Sr.isNode&&R.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function nF(t){return R.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function rF(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function tI(t){function e(n,r,i,s){let o=n[s++];const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&R.isArray(i)?i.length:o,l?(R.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!R.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&R.isArray(i[o])&&(i[o]=rF(i[o])),!a)}if(R.isFormData(t)&&R.isFunction(t.entries)){const n={};return R.forEachEntry(t,(r,i)=>{e(nF(r),i,n,0)}),n}return null}function iF(t,e,n){if(R.isString(t))try{return(e||JSON.parse)(t),R.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Xv={transitional:eI,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=R.isObject(e);if(s&&R.isHTMLForm(e)&&(e=new FormData(e)),R.isFormData(e))return i&&i?JSON.stringify(tI(e)):e;if(R.isArrayBuffer(e)||R.isBuffer(e)||R.isStream(e)||R.isFile(e)||R.isBlob(e))return e;if(R.isArrayBufferView(e))return e.buffer;if(R.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return tF(e,this.formSerializer).toString();if((a=R.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Df(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),iF(e)):e}],transformResponse:[function(e){const n=this.transitional||Xv.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&R.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?we.from(a,we.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Sr.classes.FormData,Blob:Sr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};R.forEach(["delete","get","head","post","put","patch"],t=>{Xv.headers[t]={}});const Qv=Xv,sF=R.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),oF=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&sF[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},hE=Symbol("internals");function ll(t){return t&&String(t).trim().toLowerCase()}function bd(t){return t===!1||t==null?t:R.isArray(t)?t.map(bd):String(t)}function aF(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const lF=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Rp(t,e,n,r,i){if(R.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!R.isString(e)){if(R.isString(r))return e.indexOf(r)!==-1;if(R.isRegExp(r))return r.test(e)}}function cF(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function uF(t,e){const n=R.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class jf{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const d=ll(l);if(!d)throw new Error("header name must be a non-empty string");const h=R.findKey(i,d);(!h||i[h]===void 0||c===!0||c===void 0&&i[h]!==!1)&&(i[h||l]=bd(a))}const o=(a,l)=>R.forEach(a,(c,d)=>s(c,d,l));return R.isPlainObject(e)||e instanceof this.constructor?o(e,n):R.isString(e)&&(e=e.trim())&&!lF(e)?o(oF(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=ll(e),e){const r=R.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return aF(i);if(R.isFunction(n))return n.call(this,i,r);if(R.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ll(e),e){const r=R.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Rp(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=ll(o),o){const a=R.findKey(r,o);a&&(!n||Rp(r,r[a],a,n))&&(delete r[a],i=!0)}}return R.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||Rp(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return R.forEach(this,(i,s)=>{const o=R.findKey(r,s);if(o){n[o]=bd(i),delete n[s];return}const a=e?cF(s):String(s).trim();a!==s&&delete n[s],n[a]=bd(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return R.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&R.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[hE]=this[hE]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=ll(o);r[a]||(uF(i,o),r[a]=!0)}return R.isArray(e)?e.forEach(s):s(e),this}}jf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);R.reduceDescriptors(jf.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});R.freezeMethods(jf);const ei=jf;function Pp(t,e){const n=this||Qv,r=e||n,i=ei.from(r.headers);let s=r.data;return R.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function nI(t){return!!(t&&t.__CANCEL__)}function Hc(t,e,n){we.call(this,t??"canceled",we.ERR_CANCELED,e,n),this.name="CanceledError"}R.inherits(Hc,we,{__CANCEL__:!0});function dF(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new we("Request failed with status code "+n.status,[we.ERR_BAD_REQUEST,we.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const hF=Sr.isStandardBrowserEnv?function(){return{write:function(n,r,i,s,o,a){const l=[];l.push(n+"="+encodeURIComponent(r)),R.isNumber(i)&&l.push("expires="+new Date(i).toGMTString()),R.isString(s)&&l.push("path="+s),R.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function fF(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function mF(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function rI(t,e){return t&&!fF(e)?mF(t,e):e}const pF=Sr.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const a=R.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function gF(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function yF(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[s];o||(o=c),n[i]=l,r[i]=c;let h=s,m=0;for(;h!==i;)m+=n[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const p=d&&c-d;return p?Math.round(m*1e3/p):void 0}}function fE(t,e){let n=0;const r=yF(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,l=r(a),c=s<=o;n=s;const d={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-s)/l:void 0,event:i};d[e?"download":"upload"]=!0,t(d)}}const vF=typeof XMLHttpRequest<"u",xF=vF&&function(t){return new Promise(function(n,r){let i=t.data;const s=ei.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let c;R.isFormData(i)&&(Sr.isStandardBrowserEnv||Sr.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.getContentType(/^\s*multipart\/form-data/)?R.isString(c=s.getContentType())&&s.setContentType(c.replace(/^\s*(multipart\/form-data);+/,"$1")):s.setContentType("multipart/form-data"));let d=new XMLHttpRequest;if(t.auth){const y=t.auth.username||"",x=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(y+":"+x))}const h=rI(t.baseURL,t.url);d.open(t.method.toUpperCase(),ZT(h,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function m(){if(!d)return;const y=ei.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),_={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:y,config:t,request:d};dF(function(g){n(g),l()},function(g){r(g),l()},_),d=null}if("onloadend"in d?d.onloadend=m:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(m)},d.onabort=function(){d&&(r(new we("Request aborted",we.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new we("Network Error",we.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let x=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const _=t.transitional||eI;t.timeoutErrorMessage&&(x=t.timeoutErrorMessage),r(new we(x,_.clarifyTimeoutError?we.ETIMEDOUT:we.ECONNABORTED,t,d)),d=null},Sr.isStandardBrowserEnv){const y=pF(h)&&t.xsrfCookieName&&hF.read(t.xsrfCookieName);y&&s.set(t.xsrfHeaderName,y)}i===void 0&&s.setContentType(null),"setRequestHeader"in d&&R.forEach(s.toJSON(),function(x,_){d.setRequestHeader(_,x)}),R.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),o&&o!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",fE(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",fE(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=y=>{d&&(r(!y||y.type?new Hc(null,t,d):y),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const p=gF(h);if(p&&Sr.protocols.indexOf(p)===-1){r(new we("Unsupported protocol "+p+":",we.ERR_BAD_REQUEST,t));return}d.send(i||null)})},j0={http:HL,xhr:xF};R.forEach(j0,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const mE=t=>`- ${t}`,wF=t=>R.isFunction(t)||t===null||t===!1,iI={getAdapter:t=>{t=R.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!wF(n)&&(r=j0[(o=String(n)).toLowerCase()],r===void 0))throw new we(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(mE).join(`
`):" "+mE(s[0]):"as no adapter specified";throw new we("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:j0};function Np(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Hc(null,t)}function pE(t){return Np(t),t.headers=ei.from(t.headers),t.data=Pp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),iI.getAdapter(t.adapter||Qv.adapter)(t).then(function(r){return Np(t),r.data=Pp.call(t,t.transformResponse,r),r.headers=ei.from(r.headers),r},function(r){return nI(r)||(Np(t),r&&r.response&&(r.response.data=Pp.call(t,t.transformResponse,r.response),r.response.headers=ei.from(r.response.headers))),Promise.reject(r)})}const gE=t=>t instanceof ei?t.toJSON():t;function Ea(t,e){e=e||{};const n={};function r(c,d,h){return R.isPlainObject(c)&&R.isPlainObject(d)?R.merge.call({caseless:h},c,d):R.isPlainObject(d)?R.merge({},d):R.isArray(d)?d.slice():d}function i(c,d,h){if(R.isUndefined(d)){if(!R.isUndefined(c))return r(void 0,c,h)}else return r(c,d,h)}function s(c,d){if(!R.isUndefined(d))return r(void 0,d)}function o(c,d){if(R.isUndefined(d)){if(!R.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,h){if(h in e)return r(c,d);if(h in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d)=>i(gE(c),gE(d),!0)};return R.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=l[d]||i,m=h(t[d],e[d],d);R.isUndefined(m)&&h!==a||(n[d]=m)}),n}const sI="1.6.0",Yv={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Yv[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const yE={};Yv.transitional=function(e,n,r){function i(s,o){return"[Axios v"+sI+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new we(i(o," has been removed"+(n?" in "+n:"")),we.ERR_DEPRECATED);return n&&!yE[o]&&(yE[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function _F(t,e,n){if(typeof t!="object")throw new we("options must be an object",we.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new we("option "+s+" must be "+l,we.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new we("Unknown option "+s,we.ERR_BAD_OPTION)}}const O0={assertOptions:_F,validators:Yv},_i=O0.validators;class Eh{constructor(e){this.defaults=e,this.interceptors={request:new dE,response:new dE}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ea(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&O0.assertOptions(r,{silentJSONParsing:_i.transitional(_i.boolean),forcedJSONParsing:_i.transitional(_i.boolean),clarifyTimeoutError:_i.transitional(_i.boolean)},!1),i!=null&&(R.isFunction(i)?n.paramsSerializer={serialize:i}:O0.assertOptions(i,{encode:_i.function,serialize:_i.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&R.merge(s.common,s[n.method]);s&&R.forEach(["delete","get","head","post","put","patch","common"],y=>{delete s[y]}),n.headers=ei.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(n)===!1||(l=l&&x.synchronous,a.unshift(x.fulfilled,x.rejected))});const c=[];this.interceptors.response.forEach(function(x){c.push(x.fulfilled,x.rejected)});let d,h=0,m;if(!l){const y=[pE.bind(this),void 0];for(y.unshift.apply(y,a),y.push.apply(y,c),m=y.length,d=Promise.resolve(n);h<m;)d=d.then(y[h++],y[h++]);return d}m=a.length;let p=n;for(h=0;h<m;){const y=a[h++],x=a[h++];try{p=y(p)}catch(_){x.call(this,_);break}}try{d=pE.call(this,p)}catch(y){return Promise.reject(y)}for(h=0,m=c.length;h<m;)d=d.then(c[h++],c[h++]);return d}getUri(e){e=Ea(this.defaults,e);const n=rI(e.baseURL,e.url);return ZT(n,e.params,e.paramsSerializer)}}R.forEach(["delete","get","head","options"],function(e){Eh.prototype[e]=function(n,r){return this.request(Ea(r||{},{method:e,url:n,data:(r||{}).data}))}});R.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(Ea(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Eh.prototype[e]=n(),Eh.prototype[e+"Form"]=n(!0)});const kd=Eh;class Jv{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Hc(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Jv(function(i){e=i}),cancel:e}}}const EF=Jv;function SF(t){return function(n){return t.apply(null,n)}}function bF(t){return R.isObject(t)&&t.isAxiosError===!0}const M0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(M0).forEach(([t,e])=>{M0[e]=t});const kF=M0;function oI(t){const e=new kd(t),n=BT(kd.prototype.request,e);return R.extend(n,kd.prototype,e,{allOwnKeys:!0}),R.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return oI(Ea(t,i))},n}const ct=oI(Qv);ct.Axios=kd;ct.CanceledError=Hc;ct.CancelToken=EF;ct.isCancel=nI;ct.VERSION=sI;ct.toFormData=Df;ct.AxiosError=we;ct.Cancel=ct.CanceledError;ct.all=function(e){return Promise.all(e)};ct.spread=SF;ct.isAxiosError=bF;ct.mergeConfig=Ea;ct.AxiosHeaders=ei;ct.formToJSON=t=>tI(R.isHTMLForm(t)?new FormData(t):t);ct.getAdapter=iI.getAdapter;ct.HttpStatusCode=kF;ct.default=ct;const TF=ct,aI=TF.create({baseURL:{}.VITE_ENDPOINT||"https://express-zingmp3-awx6.vercel.app"}),IF=t=>new Date(t.toDate().getTime()).toLocaleString(),ti=()=>JSON.parse(localStorage.getItem("HD-MP3")||"{}"),Jt=(t,e)=>{const n=ti();return n[t]=e,localStorage.setItem("HD-MP3",JSON.stringify(n))},Zv=t=>(n=>n.toLocaleLowerCase().replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ/g,"a").replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e").replace(/ì|í|ị|ỉ|ĩ/g,"i").replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ/g,"o").replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u").replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y").replace(/đ/g,"d"))(t).toLocaleLowerCase().replaceAll(/[\W_]/g,"")+"_"+_h(4),CF=async t=>{if(!t)return;const e=await lL(t);if(!e)return;const{common:{title:n,artist:r},format:{duration:i}}=e,s={name:"",singer:"",image:null,duration:0};return s.name=n||t.name,s.singer=r||"...",s.duration=i||0,s},fc=t=>{const e=Math.floor(t/60),n=Math.floor(t%60);return`${e}:${n.toString().padStart(2,"0")}`},AF=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);if(n!=-1)return e[n]=t,n},ex=({...t})=>({...{name:"",singer:"",image_url:"",song_url:"",by:"",duration:0,lyric_id:"",image_file_path:"",song_file_path:"",id:"",song_in:"",blurhash_encode:"",size:0},...t}),tx=({...t})=>({...{id:"",name:"",song_ids:[],by:"",image_url:"",blurhash_encode:""},...t}),Sh=async t=>new Promise(e=>setTimeout(e,t));let L0=ch[0];const RF=ti(),vE=RF.theme;vE&&ch.forEach(t=>{t.id===vE&&(L0=t)});const lI={theme:{...L0,alpha:L0.type==="light"?"[#000]/[.1]":"[#fff]/[.1]"},isOnMobile:window.innerWidth<800,isDev:!1},PF=(t,e)=>{switch(e.type){case 0:{const n=e.payload.theme;return{...t,theme:{...n,alpha:n.type==="dark"?"[#fff]/[.1]":"[#000]/[.1]"}}}}},NF=()=>{const[t,e]=f.useReducer(PF,lI),n=f.useCallback(r=>{console.log("set theme"),e({type:0,payload:{theme:r}})},[]);return{state:t,setTheme:n}},DF={state:lI,setTheme:()=>{}},cI=f.createContext(DF),jF=({children:t})=>u.jsx(cI.Provider,{value:NF(),children:t}),Z=()=>{const{state:{...t},...e}=f.useContext(cI);return{...t,...e}};function _t({className:t}){const{theme:e}=Z();return u.jsx("div",{className:`animate-pulse rounded-[4px] bg-${e.alpha} ${t}`})}const Of=[...Array(4).keys()].map(t=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(_t,{className:"h-[18px] w-[18px]"}),u.jsx(_t,{className:"h-[54px] w-[54px] ml-[10px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(_t,{className:"h-[20px] mb-[5px] w-[150px]"}),u.jsx(_t,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},t)),uI=()=>u.jsx("div",{className:"py-3",children:u.jsx(_t,{className:"w-full h-[28px]"})}),OF=[...Array(2).keys()].map(t=>u.jsxs("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:[u.jsx(_t,{className:"pt-[100%] rounded-[8px]"}),u.jsx(_t,{className:"h-[22px] mt-[6px] w-[50%]"})]},t));var MF=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],yl=t=>{let e=0;for(let n=0;n<t.length;n++){let r=t[n],i=MF.indexOf(r);e=e*83+i}return e},Dp=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},jp=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},LF=t=>t<0?-1:1,Op=(t,e)=>LF(t)*Math.pow(Math.abs(t),e),xE=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},FF=t=>{if(!t||t.length<6)throw new xE("The blurhash string must be at least 6 characters");let e=yl(t[0]),n=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*n)throw new xE(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*n}`)},$F=t=>{let e=t>>16,n=t>>8&255,r=t&255;return[Dp(e),Dp(n),Dp(r)]},zF=(t,e)=>{let n=Math.floor(t/361),r=Math.floor(t/19)%19,i=t%19;return[Op((n-9)/9,2)*e,Op((r-9)/9,2)*e,Op((i-9)/9,2)*e]},BF=(t,e,n,r)=>{FF(t),r=r|1;let i=yl(t[0]),s=Math.floor(i/9)+1,o=i%9+1,a=(yl(t[1])+1)/166,l=new Array(o*s);for(let h=0;h<l.length;h++)if(h===0){let m=yl(t.substring(2,6));l[h]=$F(m)}else{let m=yl(t.substring(4+h*2,6+h*2));l[h]=zF(m,a*r)}let c=e*4,d=new Uint8ClampedArray(c*n);for(let h=0;h<n;h++)for(let m=0;m<e;m++){let p=0,y=0,x=0;for(let w=0;w<s;w++)for(let E=0;E<o;E++){let S=Math.cos(Math.PI*m*E/e)*Math.cos(Math.PI*h*w/n),T=l[E+w*o];p+=T[0]*S,y+=T[1]*S,x+=T[2]*S}let _=jp(p),v=jp(y),g=jp(x);d[4*m+0+h*c]=_,d[4*m+1+h*c]=v,d[4*m+2+h*c]=g,d[4*m+3+h*c]=255}return d},VF=BF,UF=Object.defineProperty,WF=Object.defineProperties,HF=Object.getOwnPropertyDescriptors,bh=Object.getOwnPropertySymbols,dI=Object.prototype.hasOwnProperty,hI=Object.prototype.propertyIsEnumerable,wE=(t,e,n)=>e in t?UF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F0=(t,e)=>{for(var n in e||(e={}))dI.call(e,n)&&wE(t,n,e[n]);if(bh)for(var n of bh(e))hI.call(e,n)&&wE(t,n,e[n]);return t},$0=(t,e)=>WF(t,HF(e)),fI=(t,e)=>{var n={};for(var r in t)dI.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&bh)for(var r of bh(t))e.indexOf(r)<0&&hI.call(t,r)&&(n[r]=t[r]);return n},mI=class extends f.PureComponent{constructor(){super(...arguments),this.canvas=null,this.handleRef=e=>{this.canvas=e,this.draw()},this.draw=()=>{let{hash:e,height:n,punch:r,width:i}=this.props;if(this.canvas){let s=VF(e,i,n,r),o=this.canvas.getContext("2d"),a=o.createImageData(i,n);a.data.set(s),o.putImageData(a,0,0)}}}componentDidUpdate(){this.draw()}render(){let e=this.props,{hash:n,height:r,width:i}=e,s=fI(e,["hash","height","width"]);return f.createElement("canvas",$0(F0({},s),{height:r,width:i,ref:this.handleRef}))}};mI.defaultProps={height:128,width:128};var qF={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},pI=class extends f.PureComponent{componentDidUpdate(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")}render(){let e=this.props,{hash:n,height:r,width:i,punch:s,resolutionX:o,resolutionY:a,style:l}=e,c=fI(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return f.createElement("div",$0(F0({},c),{style:$0(F0({display:"inline-block",height:r,width:i},l),{position:"relative"})}),f.createElement(mI,{hash:n,height:a,width:o,punch:s,style:qF}))}};pI.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32};const GF="/HD-MP3/assets/logo-17dffbdd.png";function pi({src:t,classNames:e,blurHashEncode:n,onError:r}){const[i,s]=f.useState(!1),o=f.useRef(null),a=()=>{s(!0),t&&t!=null&&t.includes("blob")&&URL.revokeObjectURL(t)},l=()=>{const d=o.current;d.src="https://placehold.co/100",s(!0)},c=()=>{r?(r(),l()):l()};return u.jsxs(u.Fragment,{children:[!i&&u.jsx(u.Fragment,{children:n?u.jsx(pI,{hash:n,height:"100%",width:"100%"}):u.jsx(_t,{className:"w-full h-0"})}),u.jsx("img",{onLoad:a,onError:c,className:`${e||""} w-full ${i?"":"hidden"}`,src:t||GF,ref:o})]})}const KF=({className:t,onClick:e,theme:n})=>u.jsx("div",{className:`w-full rounded-[8px] border ${n.type==="light"?"border-[#333]":"border-[#fff]"} relative`,children:u.jsx("div",{onClick:()=>e(),className:`${n==null?void 0:n.content_hover_text} ${t} cursor-pointer`,children:u.jsx(G,{className:`absolute top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ${n.type==="light"?"text-[#333]":"text-[#fff]"}`,children:u.jsx(lh,{className:"w-[40px] max-[549px]:w-[30px]"})})})}),XF=aT("",{variants:{p:{3:"p-3",2:"p-2",1:"p-1",clear:""},rounded:{xl:"rounded-xl",lg:"rounded-lg",md:"rounded-md",sm:"rounded-sm"}},defaultVariants:{p:3,rounded:"xl"}});function yo({children:t,theme:e,className:n,color:r="container",p:i,rounded:s}){const o={black:"bg-[#292929]",container:e.container,sidebar:e.side_bar_bg};return u.jsx("div",{className:`  ${e.type==="light"?"text-[#333]":"text-white"} ${o[r]} border-[1px] border-${e.alpha} ${XF({p:i,rounded:s,className:n})}`,children:t})}function Mp({className:t,icon:e,label:n,to:r,arrowIcon:i,children:s}){return r?u.jsxs(Kr,{className:`w-full flex  justify-between  ${t}`,to:r,children:[u.jsxs("div",{className:"inline-flex items-center ",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]}),s,i&&u.jsx("span",{children:i})]}):u.jsx("p",{children:"No onClick"})}const nx={userSongs:[],userPlaylists:[],adminSongs:[],adminPlaylists:[],initial:!1},QF=(t,e)=>{switch(e.type){case 8:{const n=e.payload;return{...t,...n,initial:!0}}case 2:{const{songs:n}=e.payload,r=[...t.userSongs,...n];return{...t,userSongs:r}}case 3:{const{song:n}=e.payload,r=[...t.userSongs],i=r.findIndex(s=>s.id===n.id);return i===-1?t:(r[i]=n,{...t,userSongs:r})}case 4:{const{playlist:n}=e.payload;return{...t,userPlaylists:[...t.userPlaylists,n]}}case 5:{const{playlist:n}=e.payload,r=[...t.userPlaylists],i=r.findIndex(s=>s.id===n.id);return i===-1?t:(r[i]=n,{...t,userPlaylists:r})}case 9:return nx;case 0:{const{songs:n}=e.payload;return{...t,userSongs:n}}case 6:{const{playlists:n}=e.payload;return{...t,userPlaylists:n}}default:return t}},YF=()=>{const[t,e]=f.useReducer(QF,nx),n=f.useCallback(d=>e({type:0,payload:{songs:d}}),[]),r=f.useCallback(d=>e({type:2,payload:{songs:d}}),[]),i=f.useCallback(d=>e({type:3,payload:{song:d}}),[]),s=f.useCallback(d=>e({type:4,payload:{playlist:d}}),[]),o=f.useCallback(d=>e({type:6,payload:{playlists:d}}),[]),a=f.useCallback(d=>e({type:5,payload:{playlist:d}}),[]),l=f.useCallback(()=>e({type:9}),[]),c=f.useCallback(d=>e({type:8,payload:d}),[]);return{state:t,resetSongPlaylistStore:l,setUserSongs:n,addUserSongs:r,addUserPlaylist:s,updateUserSong:i,updateUserPlaylist:a,initSongsContext:c,setUserPlaylists:o}},JF={state:nx,initSongsContext:()=>{},addUserPlaylist:()=>{},addUserSongs:()=>{},resetSongPlaylistStore:()=>{},setUserSongs:()=>{},updateUserPlaylist:()=>{},updateUserSong:()=>{},setUserPlaylists:()=>{}},gI=f.createContext(JF),ZF=({children:t})=>u.jsx(gI.Provider,{value:YF(),children:t}),ut=()=>{const{state:{...t},...e}=f.useContext(gI);return{...t,...e}},yI={isChecked:!1,isSelectAll:!1,selectedSongs:[]},e$=(t,e)=>{switch(e.type){case 0:{const{song:n}=e.payload,r=[...t.selectedSongs],i=r.findIndex(s=>s.id===n.id);return i===-1?r.push(n):r.splice(i,1),{...t,selectedSongs:r,isChecked:!!r.length}}case 2:return yI;case 3:return t;case 4:{const{songs:n}=e.payload;return{...t,selectedSongs:n,isChecked:!0,isSelectAll:!0}}}return t},t$=()=>{const[t,e]=f.useReducer(e$,yI),n=f.useCallback(()=>{e({type:3})},[]),r=f.useCallback(()=>{e({type:2})},[]),i=f.useCallback(o=>{e({type:0,payload:{song:o}})},[]),s=f.useCallback(o=>{e({type:4,payload:{songs:o}})},[]);return{state:t,setChecked:n,selectSong:i,selectAll:s,resetSelect:r}},n$={state:{isChecked:!1,isSelectAll:!1,selectedSongs:[]},resetSelect:()=>{},selectAll:()=>{},selectSong:()=>{},setChecked:()=>{}},vI=f.createContext(n$),qc=()=>{const t=f.useContext(vI),{state:{...e},...n}=t;return{...e,...n}};function mc({children:t}){return u.jsx(vI.Provider,{value:t$(),children:t})}function xI({song:t,theme:e,...n}){const{isChecked:r,selectedSongs:i,selectSong:s}=qc(),o=d=>{switch(n.variant){case"default":case"playing-next":return n.onClick(d);case"select":return s(t)}},a=f.useMemo(()=>n.variant!=="select"?!1:i.findIndex(d=>d.id===t.id)!=-1,[i]),l={itemContainer:`hover:bg-${e.alpha} items-center justify-between cursor-pointer  border-b 
    last:border-none border-${e.alpha} 
    flex rounded-md p-2 ${r&&"bg-"+e.alpha}`,button:`${e.content_bg} rounded-full`,songListButton:"mr-[10px] px-[5px]",imageFrame:"w-[54px] h-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]"},c=()=>{switch(n.variant){case"select":return r?u.jsx(ac,{className:"w-[18px] "}):u.jsx(u.Fragment,{children:a?u.jsx(Ed,{className:"w-[18px]"}):u.jsx(ac,{className:"w-[18px]"})});default:return u.jsx(u.Fragment,{})}};return u.jsx(u.Fragment,{children:u.jsx("div",{onClick:o,className:`target-class opacity-100 transition-[opacity,transform] duration-500 ${l.itemContainer} `,children:u.jsxs("div",{className:"flex flex-row w-[100%]",children:[c(),u.jsxs("div",{className:"flex-grow flex",children:[u.jsx("div",{className:`${l.imageFrame}  `,children:u.jsx(pi,{blurHashEncode:t.blurhash_encode,src:t.image_url})}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx("h5",{className:`text-mg line-clamp-1 ${a&&e.content_text}`,children:t.name}),u.jsx("p",{className:"text-xs opacity-60 bg-blend-lighten line-clamp-1",children:t.singer})]})]})]})})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},r$=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},_I={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(m=64)),r.push(n[d],n[h],n[m],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):r$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new i$;const m=s<<2|a>>4;if(r.push(m),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const y=c<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class i$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const s$=function(t){const e=wI(t);return _I.encodeByteArray(e,!0)},kh=function(t){return s$(t).replace(/\./g,"")},EI=function(t){try{return _I.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a$=()=>o$().__FIREBASE_DEFAULTS__,l$=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},c$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&EI(t[1]);return e&&JSON.parse(e)},Mf=()=>{try{return a$()||l$()||c$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},SI=t=>{var e,n;return(n=(e=Mf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},bI=t=>{const e=SI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},kI=()=>{var t;return(t=Mf())===null||t===void 0?void 0:t.config},TI=t=>{var e;return(e=Mf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u${constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[kh(JSON.stringify(n)),kh(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function d$(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function h$(){var t;const e=(t=Mf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function f$(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function m$(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function p$(){const t=Ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function g$(){try{return typeof indexedDB=="object"}catch{return!1}}function y$(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v$="FirebaseError";class zr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=v$,Object.setPrototypeOf(this,zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gc.prototype.create)}}class Gc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?x$(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new zr(i,a,r)}}function x$(t,e){return t.replace(w$,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const w$=/\{\$([^}]+)}/g;function _$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Th(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(_E(s)&&_E(o)){if(!Th(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function _E(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function E$(t,e){const n=new S$(t,e);return n.subscribe.bind(n)}class S${constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");b$(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Lp),i.error===void 0&&(i.error=Lp),i.complete===void 0&&(i.complete=Lp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function b$(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Lp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t){return t&&t._delegate?t._delegate:t}class ts{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k$=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new u$;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(I$(e))try{this.getOrInitializeService({instanceIdentifier:Is})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Is){return this.instances.has(e)}getOptions(e=Is){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:T$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Is){return this.component?this.component.multipleInstances?e:Is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function T$(t){return t===Is?void 0:t}function I$(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new k$(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const A$={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},R$=Se.INFO,P$={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},N$=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=P$[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rx{constructor(e){this.name=e,this._logLevel=R$,this._logHandler=N$,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?A$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const D$=(t,e)=>e.some(n=>t instanceof n);let EE,SE;function j$(){return EE||(EE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function O$(){return SE||(SE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CI=new WeakMap,z0=new WeakMap,AI=new WeakMap,Fp=new WeakMap,ix=new WeakMap;function M$(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ki(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&CI.set(n,t)}).catch(()=>{}),ix.set(e,t),e}function L$(t){if(z0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});z0.set(t,e)}let B0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return z0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||AI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ki(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function F$(t){B0=t(B0)}function $$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($p(this),e,...n);return AI.set(r,e.sort?e.sort():[e]),Ki(r)}:O$().includes(t)?function(...e){return t.apply($p(this),e),Ki(CI.get(this))}:function(...e){return Ki(t.apply($p(this),e))}}function z$(t){return typeof t=="function"?$$(t):(t instanceof IDBTransaction&&L$(t),D$(t,j$())?new Proxy(t,B0):t)}function Ki(t){if(t instanceof IDBRequest)return M$(t);if(Fp.has(t))return Fp.get(t);const e=z$(t);return e!==t&&(Fp.set(t,e),ix.set(e,t)),e}const $p=t=>ix.get(t);function B$(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ki(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ki(o.result),l.oldVersion,l.newVersion,Ki(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const V$=["get","getKey","getAll","getAllKeys","count"],U$=["put","add","delete","clear"],zp=new Map;function bE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zp.get(e))return zp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=U$.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||V$.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return zp.set(e,s),s}F$(t=>({...t,get:(e,n,r)=>bE(e,n)||t.get(e,n,r),has:(e,n)=>!!bE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W${constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(H$(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function H$(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const V0="@firebase/app",kE="0.9.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=new rx("@firebase/app"),q$="@firebase/app-compat",G$="@firebase/analytics-compat",K$="@firebase/analytics",X$="@firebase/app-check-compat",Q$="@firebase/app-check",Y$="@firebase/auth",J$="@firebase/auth-compat",Z$="@firebase/database",e9="@firebase/database-compat",t9="@firebase/functions",n9="@firebase/functions-compat",r9="@firebase/installations",i9="@firebase/installations-compat",s9="@firebase/messaging",o9="@firebase/messaging-compat",a9="@firebase/performance",l9="@firebase/performance-compat",c9="@firebase/remote-config",u9="@firebase/remote-config-compat",d9="@firebase/storage",h9="@firebase/storage-compat",f9="@firebase/firestore",m9="@firebase/firestore-compat",p9="firebase",g9="10.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="[DEFAULT]",y9={[V0]:"fire-core",[q$]:"fire-core-compat",[K$]:"fire-analytics",[G$]:"fire-analytics-compat",[Q$]:"fire-app-check",[X$]:"fire-app-check-compat",[Y$]:"fire-auth",[J$]:"fire-auth-compat",[Z$]:"fire-rtdb",[e9]:"fire-rtdb-compat",[t9]:"fire-fn",[n9]:"fire-fn-compat",[r9]:"fire-iid",[i9]:"fire-iid-compat",[s9]:"fire-fcm",[o9]:"fire-fcm-compat",[a9]:"fire-perf",[l9]:"fire-perf-compat",[c9]:"fire-rc",[u9]:"fire-rc-compat",[d9]:"fire-gcs",[h9]:"fire-gcs-compat",[f9]:"fire-fst",[m9]:"fire-fst-compat","fire-js":"fire-js",[p9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new Map,W0=new Map;function v9(t,e){try{t.container.addComponent(e)}catch(n){eo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function to(t){const e=t.name;if(W0.has(e))return eo.debug(`There were multiple attempts to register component ${e}.`),!1;W0.set(e,t);for(const n of Ih.values())v9(n,t);return!0}function Lf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Xi=new Gc("app","Firebase",x9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w9{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=g9;function RI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:U0,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Xi.create("bad-app-name",{appName:String(i)});if(n||(n=kI()),!n)throw Xi.create("no-options");const s=Ih.get(i);if(s){if(Th(n,s.options)&&Th(r,s.config))return s;throw Xi.create("duplicate-app",{appName:i})}const o=new C$(i);for(const l of W0.values())o.addComponent(l);const a=new w9(n,r,o);return Ih.set(i,a),a}function sx(t=U0){const e=Ih.get(t);if(!e&&t===U0&&kI())return RI();if(!e)throw Xi.create("no-app",{appName:t});return e}function Ar(t,e,n){var r;let i=(r=y9[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),eo.warn(a.join(" "));return}to(new ts(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9="firebase-heartbeat-database",E9=1,pc="firebase-heartbeat-store";let Bp=null;function PI(){return Bp||(Bp=B$(_9,E9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(pc)}}}).catch(t=>{throw Xi.create("idb-open",{originalErrorMessage:t.message})})),Bp}async function S9(t){try{return await(await PI()).transaction(pc).objectStore(pc).get(NI(t))}catch(e){if(e instanceof zr)eo.warn(e.message);else{const n=Xi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});eo.warn(n.message)}}}async function TE(t,e){try{const r=(await PI()).transaction(pc,"readwrite");await r.objectStore(pc).put(e,NI(t)),await r.done}catch(n){if(n instanceof zr)eo.warn(n.message);else{const r=Xi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});eo.warn(r.message)}}}function NI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9=1024,k9=30*24*60*60*1e3;class T9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new C9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=IE();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=k9}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=IE(),{heartbeatsToSend:n,unsentEntries:r}=I9(this._heartbeatsCache.heartbeats),i=kh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function IE(){return new Date().toISOString().substring(0,10)}function I9(t,e=b9){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),CE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),CE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class C9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return g$()?y$().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await S9(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return TE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return TE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function CE(t){return kh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A9(t){to(new ts("platform-logger",e=>new W$(e),"PRIVATE")),to(new ts("heartbeat",e=>new T9(e),"PRIVATE")),Ar(V0,kE,t),Ar(V0,kE,"esm2017"),Ar("fire-js","")}A9("");function ox(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function DI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const R9=DI,jI=new Gc("auth","Firebase",DI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch=new rx("@firebase/auth");function P9(t,...e){Ch.logLevel<=Se.WARN&&Ch.warn(`Auth (${vo}): ${t}`,...e)}function Td(t,...e){Ch.logLevel<=Se.ERROR&&Ch.error(`Auth (${vo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(t,...e){throw ax(t,...e)}function Rr(t,...e){return ax(t,...e)}function OI(t,e,n){const r=Object.assign(Object.assign({},R9()),{[e]:n});return new Gc("auth","Firebase",r).create(e,{appName:t.name})}function N9(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Or(t,"argument-error"),OI(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ax(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return jI.create(t,...e)}function ce(t,e,...n){if(!t)throw ax(e,...n)}function Qr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Td(e),new Error(e)}function li(t,e){t||Qr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function D9(){return AE()==="http:"||AE()==="https:"}function AE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(D9()||f$()||"connection"in navigator)?navigator.onLine:!0}function O9(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n){this.shortDelay=e,this.longDelay=n,li(n>e,"Short delay should be less than long delay!"),this.isMobile=d$()||m$()}get(){return j9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(t,e){li(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L9=new Xc(3e4,6e4);function LI(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Qc(t,e,n,r,i={}){return FI(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Kc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),MI.fetch()($I(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function FI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},M9),e);try{const i=new $9(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ku(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ku(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ku(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ku(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw OI(t,d,c);Or(t,d)}}catch(i){if(i instanceof zr)throw i;Or(t,"network-request-failed",{message:String(i)})}}async function F9(t,e,n,r,i={}){const s=await Qc(t,e,n,r,i);return"mfaPendingCredential"in s&&Or(t,"multi-factor-auth-required",{_serverResponse:s}),s}function $I(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?lx(t.config,i):`${t.config.apiScheme}://${i}`}class $9{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Rr(this.auth,"network-request-failed")),L9.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ku(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Rr(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z9(t,e){return Qc(t,"POST","/v1/accounts:delete",e)}async function B9(t,e){return Qc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function V9(t,e=!1){const n=yt(t),r=await n.getIdToken(e),i=cx(r);ce(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Dl(Vp(i.auth_time)),issuedAtTime:Dl(Vp(i.iat)),expirationTime:Dl(Vp(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Vp(t){return Number(t)*1e3}function cx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Td("JWT malformed, contained fewer than 3 sections"),null;try{const i=EI(n);return i?JSON.parse(i):(Td("Failed to decode base64 JWT payload"),null)}catch(i){return Td("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function U9(t){const e=cx(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof zr&&W9(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function W9({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dl(this.lastLoginAt),this.creationTime=Dl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ah(t){var e;const n=t.auth,r=await t.getIdToken(),i=await gc(t,B9(n,{idToken:r}));ce(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?K9(s.providerUserInfo):[],a=G9(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new zI(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function q9(t){const e=yt(t);await Ah(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function G9(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function K9(t){return t.map(e=>{var{providerId:n}=e,r=ox(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X9(t,e){const n=await FI(t,{},async()=>{const r=Kc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=$I(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",MI.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):U9(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ce(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await X9(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new yc;return r&&(ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ce(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ce(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yc,this.toJSON())}_performRefresh(){return Qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Bs{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=ox(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new H9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new zI(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await gc(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return V9(this,e)}reload(){return q9(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Bs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ah(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await gc(this,z9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:E,isAnonymous:S,providerData:T,stsTokenManager:k}=n;ce(w&&k,e,"internal-error");const b=yc.fromJSON(this.name,k);ce(typeof w=="string",e,"internal-error"),Ei(h,e.name),Ei(m,e.name),ce(typeof E=="boolean",e,"internal-error"),ce(typeof S=="boolean",e,"internal-error"),Ei(p,e.name),Ei(y,e.name),Ei(x,e.name),Ei(_,e.name),Ei(v,e.name),Ei(g,e.name);const D=new Bs({uid:w,auth:e,email:m,emailVerified:E,displayName:h,isAnonymous:S,photoURL:y,phoneNumber:p,tenantId:x,stsTokenManager:b,createdAt:v,lastLoginAt:g});return T&&Array.isArray(T)&&(D.providerData=T.map(I=>Object.assign({},I))),_&&(D._redirectEventId=_),D}static async _fromIdTokenResponse(e,n,r=!1){const i=new yc;i.updateFromServerResponse(n);const s=new Bs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ah(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=new Map;function Yr(t){li(t instanceof Function,"Expected a class definition");let e=RE.get(t);return e?(li(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,RE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}BI.type="NONE";const PE=BI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(t,e,n){return`firebase:${t}:${e}:${n}`}class na{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Id(this.userKey,i.apiKey,s),this.fullPersistenceKey=Id("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Bs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new na(Yr(PE),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Yr(PE);const o=Id(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=Bs._fromJSON(e,d);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new na(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new na(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(VI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qI(e))return"Blackberry";if(GI(e))return"Webos";if(ux(e))return"Safari";if((e.includes("chrome/")||UI(e))&&!e.includes("edge/"))return"Chrome";if(HI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function VI(t=Ht()){return/firefox\//i.test(t)}function ux(t=Ht()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function UI(t=Ht()){return/crios\//i.test(t)}function WI(t=Ht()){return/iemobile/i.test(t)}function HI(t=Ht()){return/android/i.test(t)}function qI(t=Ht()){return/blackberry/i.test(t)}function GI(t=Ht()){return/webos/i.test(t)}function Ff(t=Ht()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Q9(t=Ht()){var e;return Ff(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Y9(){return p$()&&document.documentMode===10}function KI(t=Ht()){return Ff(t)||HI(t)||GI(t)||qI(t)||/windows phone/i.test(t)||WI(t)}function J9(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(t,e=[]){let n;switch(t){case"Browser":n=NE(Ht());break;case"Worker":n=`${NE(Ht())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${vo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ez(t,e={}){return Qc(t,"GET","/v2/passwordPolicy",LI(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tz=6;class nz{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:tz,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new DE(this),this.idTokenSubscription=new DE(this),this.beforeStateQueue=new Z9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await na.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ah(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=O9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?yt(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Yr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ez(this),n=new nz(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Gc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Yr(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await na.create(this,[Yr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=XI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&P9(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function $f(t){return yt(t)}class DE{constructor(e){this.auth=e,this.observer=null,this.addObserver=E$(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iz(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function sz(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Rr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",iz().appendChild(r)})}function oz(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function az(t,e){const n=Lf(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Th(s,e??{}))return i;Or(i,"already-initialized")}return n.initialize({options:e})}function lz(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Yr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function cz(t,e,n){const r=$f(t);ce(r._canInitEmulator,r,"emulator-config-failed"),ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=QI(e),{host:o,port:a}=uz(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||dz()}function QI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function uz(t){const e=QI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:jE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:jE(o)}}}function jE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function dz(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qr("not implemented")}_getIdTokenResponse(e){return Qr("not implemented")}_linkToIdToken(e,n){return Qr("not implemented")}_getReauthenticationResolver(e){return Qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ra(t,e){return F9(t,"POST","/v1/accounts:signInWithIdp",LI(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hz="http://localhost";class no extends YI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new no(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Or("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=ox(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new no(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ra(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ra(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ra(e,n)}buildRequest(){const e={requestUri:hz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Kc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc extends dx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends Yc{constructor(){super("facebook.com")}static credential(e){return no._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ai.credential(e.oauthAccessToken)}catch{return null}}}Ai.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ai.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends Yc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return no._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return xr.credential(n,r)}catch{return null}}}xr.GOOGLE_SIGN_IN_METHOD="google.com";xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends Yc{constructor(){super("github.com")}static credential(e){return no._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ri.credential(e.oauthAccessToken)}catch{return null}}}Ri.GITHUB_SIGN_IN_METHOD="github.com";Ri.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends Yc{constructor(){super("twitter.com")}static credential(e,n){return no._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Pi.credential(n,r)}catch{return null}}}Pi.TWITTER_SIGN_IN_METHOD="twitter.com";Pi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Bs._fromIdTokenResponse(e,r,i),o=OE(r);return new Sa({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=OE(r);return new Sa({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function OE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh extends zr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Rh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Rh(e,n,r,i)}}function JI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Rh._fromErrorAndOperation(t,s,e,r):s})}async function fz(t,e,n=!1){const r=await gc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Sa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mz(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await gc(t,JI(r,i,e,t),n);ce(s.idToken,r,"internal-error");const o=cx(s.idToken);ce(o,r,"internal-error");const{sub:a}=o;return ce(t.uid===a,r,"user-mismatch"),Sa._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Or(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pz(t,e,n=!1){const r="signIn",i=await JI(t,r,e),s=await Sa._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function gz(t,e,n,r){return yt(t).onIdTokenChanged(e,n,r)}function yz(t,e,n){return yt(t).beforeAuthStateChanged(e,n)}function vz(t,e,n,r){return yt(t).onAuthStateChanged(e,n,r)}function ZI(t){return yt(t).signOut()}const Ph="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ph,"1"),this.storage.removeItem(Ph),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xz(){const t=Ht();return ux(t)||Ff(t)}const wz=1e3,_z=10;class tC extends eC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=xz()&&J9(),this.fallbackToPolling=KI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Y9()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,_z):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},wz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}tC.type="LOCAL";const Ez=tC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC extends eC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}nC.type="SESSION";const rC=nC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sz(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new zf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await Sz(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=hx("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const m=h;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(){return window}function kz(t){Pr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(){return typeof Pr().WorkerGlobalScope<"u"&&typeof Pr().importScripts=="function"}async function Tz(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Iz(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Cz(){return iC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="firebaseLocalStorageDb",Az=1,Nh="firebaseLocalStorage",oC="fbase_key";class Jc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bf(t,e){return t.transaction([Nh],e?"readwrite":"readonly").objectStore(Nh)}function Rz(){const t=indexedDB.deleteDatabase(sC);return new Jc(t).toPromise()}function q0(){const t=indexedDB.open(sC,Az);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nh,{keyPath:oC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nh)?e(r):(r.close(),await Rz(),e(await q0()))})})}async function ME(t,e,n){const r=Bf(t,!0).put({[oC]:e,value:n});return new Jc(r).toPromise()}async function Pz(t,e){const n=Bf(t,!1).get(e),r=await new Jc(n).toPromise();return r===void 0?null:r.value}function LE(t,e){const n=Bf(t,!0).delete(e);return new Jc(n).toPromise()}const Nz=800,Dz=3;class aC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await q0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Dz)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zf._getInstance(Cz()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Tz(),!this.activeServiceWorker)return;this.sender=new bz(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Iz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await q0();return await ME(e,Ph,"1"),await LE(e,Ph),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ME(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Pz(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>LE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Bf(i,!1).getAll();return new Jc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Nz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aC.type="LOCAL";const jz=aC;new Xc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(t,e){return e?Yr(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx extends YI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ra(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ra(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ra(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Oz(t){return pz(t.auth,new fx(t),t.bypassAuthState)}function Mz(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),mz(n,new fx(t),t.bypassAuthState)}async function Lz(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),fz(n,new fx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Oz;case"linkViaPopup":case"linkViaRedirect":return Lz;case"reauthViaPopup":case"reauthViaRedirect":return Mz;default:Or(this.auth,"internal-error")}}resolve(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fz=new Xc(2e3,1e4);async function $z(t,e,n){const r=$f(t);N9(t,e,dx);const i=lC(r,n);return new Ds(r,"signInViaPopup",e,i).executeNotNull()}class Ds extends cC{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ds.currentPopupAction&&Ds.currentPopupAction.cancel(),Ds.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){li(this.filter.length===1,"Popup operations only handle one event");const e=hx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ds.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Fz.get())};e()}}Ds.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zz="pendingRedirect",Cd=new Map;class Bz extends cC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Cd.get(this.auth._key());if(!e){try{const r=await Vz(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Cd.set(this.auth._key(),e)}return this.bypassAuthState||Cd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Vz(t,e){const n=Hz(e),r=Wz(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Uz(t,e){Cd.set(t._key(),e)}function Wz(t){return Yr(t._redirectPersistence)}function Hz(t){return Id(zz,t.config.apiKey,t.name)}async function qz(t,e,n=!1){const r=$f(t),i=lC(r,e),o=await new Bz(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gz=10*60*1e3;class Kz{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Xz(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!uC(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Rr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Gz&&this.cachedEventUids.clear(),this.cachedEventUids.has(FE(e))}saveEventToCache(e){this.cachedEventUids.add(FE(e)),this.lastProcessedEventTime=Date.now()}}function FE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function uC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Xz(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qz(t,e={}){return Qc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jz=/^https?/;async function Zz(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Qz(t);for(const n of e)try{if(e8(n))return}catch{}Or(t,"unauthorized-domain")}function e8(t){const e=H0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Jz.test(n))return!1;if(Yz.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8=new Xc(3e4,6e4);function $E(){const t=Pr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function n8(t){return new Promise((e,n)=>{var r,i,s;function o(){$E(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$E(),n(Rr(t,"network-request-failed"))},timeout:t8.get()})}if(!((i=(r=Pr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Pr().gapi)===null||s===void 0)&&s.load)o();else{const a=oz("iframefcb");return Pr()[a]=()=>{gapi.load?o():n(Rr(t,"network-request-failed"))},sz(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Ad=null,e})}let Ad=null;function r8(t){return Ad=Ad||n8(t),Ad}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i8=new Xc(5e3,15e3),s8="__/auth/iframe",o8="emulator/auth/iframe",a8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},l8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function c8(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?lx(e,o8):`https://${t.config.authDomain}/${s8}`,r={apiKey:e.apiKey,appName:t.name,v:vo},i=l8.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Kc(r).slice(1)}`}async function u8(t){const e=await r8(t),n=Pr().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:c8(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:a8,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Rr(t,"network-request-failed"),a=Pr().setTimeout(()=>{s(o)},i8.get());function l(){Pr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},h8=500,f8=600,m8="_blank",p8="http://localhost";class zE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function g8(t,e,n,r=h8,i=f8){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},d8),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Ht().toLowerCase();n&&(a=UI(c)?m8:n),VI(c)&&(e=e||p8,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[p,y])=>`${m}${p}=${y},`,"");if(Q9(c)&&a!=="_self")return y8(e||"",a),new zE(null);const h=window.open(e||"",a,d);ce(h,t,"popup-blocked");try{h.focus()}catch{}return new zE(h)}function y8(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v8="__/auth/handler",x8="emulator/auth/handler",w8=encodeURIComponent("fac");async function BE(t,e,n,r,i,s){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:vo,eventId:i};if(e instanceof dx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",_$(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))o[d]=h}if(e instanceof Yc){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${w8}=${encodeURIComponent(l)}`:"";return`${_8(t)}?${Kc(a).slice(1)}${c}`}function _8({config:t}){return t.emulator?lx(t,x8):`https://${t.authDomain}/${v8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="webStorageSupport";class E8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rC,this._completeRedirectFn=qz,this._overrideRedirectResult=Uz}async _openPopup(e,n,r,i){var s;li((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await BE(e,n,r,H0(),i);return g8(e,o,hx())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await BE(e,n,r,H0(),i);return kz(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(li(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await u8(e),r=new Kz(e);return n.register("authEvent",i=>(ce(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Up,{type:Up},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Up];o!==void 0&&n(!!o),Or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Zz(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return KI()||ux()||Ff()}}const S8=E8;var VE="@firebase/auth",UE="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k8(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function T8(t){to(new ts("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XI(t)},c=new rz(r,i,s,l);return lz(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),to(new ts("auth-internal",e=>{const n=$f(e.getProvider("auth").getImmediate());return(r=>new b8(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ar(VE,UE,k8(t)),Ar(VE,UE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I8=5*60,C8=TI("authIdTokenMaxAge")||I8;let WE=null;const A8=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>C8)return;const i=n==null?void 0:n.token;WE!==i&&(WE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function R8(t=sx()){const e=Lf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=az(t,{popupRedirectResolver:S8,persistence:[jz,Ez,rC]}),r=TI("authTokenSyncURL");if(r){const s=A8(r);yz(n,s,()=>s(n.currentUser)),gz(n,o=>s(o))}const i=SI("auth");return i&&cz(n,`http://${i}`),n}T8("Browser");var P8="firebase",N8="10.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ar(P8,N8,"app");var D8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},z,mx=mx||{},ae=D8||self;function Vf(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Zc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function j8(t){return Object.prototype.hasOwnProperty.call(t,Wp)&&t[Wp]||(t[Wp]=++O8)}var Wp="closure_uid_"+(1e9*Math.random()>>>0),O8=0;function M8(t,e,n){return t.call.apply(t.bind,arguments)}function L8(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Bt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Bt=M8:Bt=L8,Bt.apply(null,arguments)}function Xu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function bt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function ps(){this.s=this.s,this.o=this.o}var F8=0;ps.prototype.s=!1;ps.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),F8!=0)&&j8(this)};ps.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const dC=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function px(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function HE(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Vf(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Vt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Vt.prototype.h=function(){this.defaultPrevented=!0};var $8=function(){if(!ae.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ae.addEventListener("test",()=>{},e),ae.removeEventListener("test",()=>{},e)}catch{}return t}();function vc(t){return/^[\s\xa0]*$/.test(t)}function Uf(){var t=ae.navigator;return t&&(t=t.userAgent)?t:""}function wr(t){return Uf().indexOf(t)!=-1}function gx(t){return gx[" "](t),t}gx[" "]=function(){};function z8(t,e){var n=NB;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var B8=wr("Opera"),ba=wr("Trident")||wr("MSIE"),hC=wr("Edge"),G0=hC||ba,fC=wr("Gecko")&&!(Uf().toLowerCase().indexOf("webkit")!=-1&&!wr("Edge"))&&!(wr("Trident")||wr("MSIE"))&&!wr("Edge"),V8=Uf().toLowerCase().indexOf("webkit")!=-1&&!wr("Edge");function mC(){var t=ae.document;return t?t.documentMode:void 0}var K0;e:{var Hp="",qp=function(){var t=Uf();if(fC)return/rv:([^\);]+)(\)|;)/.exec(t);if(hC)return/Edge\/([\d\.]+)/.exec(t);if(ba)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(V8)return/WebKit\/(\S+)/.exec(t);if(B8)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(qp&&(Hp=qp?qp[1]:""),ba){var Gp=mC();if(Gp!=null&&Gp>parseFloat(Hp)){K0=String(Gp);break e}}K0=Hp}var X0;if(ae.document&&ba){var qE=mC();X0=qE||parseInt(K0,10)||void 0}else X0=void 0;var U8=X0;function xc(t,e){if(Vt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(fC){e:{try{gx(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:W8[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&xc.$.h.call(this)}}bt(xc,Vt);var W8={2:"touch",3:"pen",4:"mouse"};xc.prototype.h=function(){xc.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var eu="closure_listenable_"+(1e6*Math.random()|0),H8=0;function q8(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++H8,this.fa=this.ia=!1}function Wf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function yx(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function G8(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function pC(t){const e={};for(const n in t)e[n]=t[n];return e}const GE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gC(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<GE.length;s++)n=GE[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Hf(t){this.src=t,this.g={},this.h=0}Hf.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Y0(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new q8(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Q0(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=dC(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Wf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Y0(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var vx="closure_lm_"+(1e6*Math.random()|0),Kp={};function yC(t,e,n,r,i){if(r&&r.once)return xC(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)yC(t,e[s],n,r,i);return null}return n=_x(n),t&&t[eu]?t.O(e,n,Zc(r)?!!r.capture:!!r,i):vC(t,e,n,!1,r,i)}function vC(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Zc(i)?!!i.capture:!!i,a=wx(t);if(a||(t[vx]=a=new Hf(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=K8(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)$8||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(_C(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function K8(){function t(n){return e.call(t.src,t.listener,n)}const e=X8;return t}function xC(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)xC(t,e[s],n,r,i);return null}return n=_x(n),t&&t[eu]?t.P(e,n,Zc(r)?!!r.capture:!!r,i):vC(t,e,n,!0,r,i)}function wC(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)wC(t,e[s],n,r,i);else r=Zc(r)?!!r.capture:!!r,n=_x(n),t&&t[eu]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Y0(s,n,r,i),-1<n&&(Wf(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=wx(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Y0(e,n,r,i)),(n=-1<t?e[t]:null)&&xx(n))}function xx(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[eu])Q0(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(_C(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=wx(e))?(Q0(n,t),n.h==0&&(n.src=null,e[vx]=null)):Wf(t)}}}function _C(t){return t in Kp?Kp[t]:Kp[t]="on"+t}function X8(t,e){if(t.fa)t=!0;else{e=new xc(e,this);var n=t.listener,r=t.la||t.src;t.ia&&xx(t),t=n.call(r,e)}return t}function wx(t){return t=t[vx],t instanceof Hf?t:null}var Xp="__closure_events_fn_"+(1e9*Math.random()>>>0);function _x(t){return typeof t=="function"?t:(t[Xp]||(t[Xp]=function(e){return t.handleEvent(e)}),t[Xp])}function St(){ps.call(this),this.i=new Hf(this),this.S=this,this.J=null}bt(St,ps);St.prototype[eu]=!0;St.prototype.removeEventListener=function(t,e,n,r){wC(this,t,e,n,r)};function Pt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Vt(e,t);else if(e instanceof Vt)e.target=e.target||t;else{var i=e;e=new Vt(r,t),gC(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Qu(o,r,!0,e)&&i}if(o=e.g=t,i=Qu(o,r,!0,e)&&i,i=Qu(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Qu(o,r,!1,e)&&i}St.prototype.N=function(){if(St.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Wf(n[r]);delete t.g[e],t.h--}}this.J=null};St.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};St.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Qu(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Q0(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var Ex=ae.JSON.stringify;class Q8{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function Y8(){var t=Sx;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class J8{constructor(){this.h=this.g=null}add(e,n){const r=EC.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var EC=new Q8(()=>new Z8,t=>t.reset());class Z8{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function eB(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function tB(t){ae.setTimeout(()=>{throw t},0)}let wc,_c=!1,Sx=new J8,SC=()=>{const t=ae.Promise.resolve(void 0);wc=()=>{t.then(nB)}};var nB=()=>{for(var t;t=Y8();){try{t.h.call(t.g)}catch(n){tB(n)}var e=EC;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}_c=!1};function qf(t,e){St.call(this),this.h=t||1,this.g=e||ae,this.j=Bt(this.qb,this),this.l=Date.now()}bt(qf,St);z=qf.prototype;z.ga=!1;z.T=null;z.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Pt(this,"tick"),this.ga&&(bx(this),this.start()))}};z.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function bx(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}z.N=function(){qf.$.N.call(this),bx(this),delete this.g};function kx(t,e,n){if(typeof t=="function")n&&(t=Bt(t,n));else if(t&&typeof t.handleEvent=="function")t=Bt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ae.setTimeout(t,e||0)}function bC(t){t.g=kx(()=>{t.g=null,t.i&&(t.i=!1,bC(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class rB extends ps{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:bC(this)}N(){super.N(),this.g&&(ae.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ec(t){ps.call(this),this.h=t,this.g={}}bt(Ec,ps);var KE=[];function kC(t,e,n,r){Array.isArray(n)||(n&&(KE[0]=n.toString()),n=KE);for(var i=0;i<n.length;i++){var s=yC(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function TC(t){yx(t.g,function(e,n){this.g.hasOwnProperty(n)&&xx(e)},t),t.g={}}Ec.prototype.N=function(){Ec.$.N.call(this),TC(this)};Ec.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Gf(){this.g=!0}Gf.prototype.Ea=function(){this.g=!1};function iB(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var d=c[0];c=c[1];var h=d.split("_");o=2<=h.length&&h[1]=="type"?o+(d+"="+c+"&"):o+(d+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function sB(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Ko(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+aB(t,n)+(r?" "+r:"")})}function oB(t,e){t.info(function(){return"TIMEOUT: "+e})}Gf.prototype.info=function(){};function aB(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Ex(n)}catch{return e}}var xo={},XE=null;function Kf(){return XE=XE||new St}xo.Ta="serverreachability";function IC(t){Vt.call(this,xo.Ta,t)}bt(IC,Vt);function Sc(t){const e=Kf();Pt(e,new IC(e))}xo.STAT_EVENT="statevent";function CC(t,e){Vt.call(this,xo.STAT_EVENT,t),this.stat=e}bt(CC,Vt);function Zt(t){const e=Kf();Pt(e,new CC(e,t))}xo.Ua="timingevent";function AC(t,e){Vt.call(this,xo.Ua,t),this.size=e}bt(AC,Vt);function tu(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ae.setTimeout(function(){t()},e)}var Xf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},RC={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Tx(){}Tx.prototype.h=null;function QE(t){return t.h||(t.h=t.i())}function PC(){}var nu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ix(){Vt.call(this,"d")}bt(Ix,Vt);function Cx(){Vt.call(this,"c")}bt(Cx,Vt);var J0;function Qf(){}bt(Qf,Tx);Qf.prototype.g=function(){return new XMLHttpRequest};Qf.prototype.i=function(){return{}};J0=new Qf;function ru(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Ec(this),this.P=lB,t=G0?125:void 0,this.V=new qf(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new NC}function NC(){this.i=null,this.g="",this.h=!1}var lB=45e3,Z0={},Dh={};z=ru.prototype;z.setTimeout=function(t){this.P=t};function ey(t,e,n){t.L=1,t.v=Jf(ci(e)),t.s=n,t.S=!0,DC(t,null)}function DC(t,e){t.G=Date.now(),iu(t),t.A=ci(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),BC(n.i,"t",r),t.C=0,n=t.l.J,t.h=new NC,t.g=lA(t.l,n?e:null,!t.s),0<t.O&&(t.M=new rB(Bt(t.Pa,t,t.g),t.O)),kC(t.U,t.g,"readystatechange",t.nb),e=t.I?pC(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Sc(),iB(t.j,t.u,t.A,t.m,t.W,t.s)}z.nb=function(t){t=t.target;const e=this.M;e&&br(t)==3?e.l():this.Pa(t)};z.Pa=function(t){try{if(t==this.g)e:{const d=br(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>d)&&(d!=3||G0||this.g&&(this.h.h||this.g.ja()||eS(this.g)))){this.J||d!=4||e==7||(e==8||0>=h?Sc(3):Sc(2)),Yf(this);var n=this.g.da();this.ca=n;t:if(jC(this)){var r=eS(this.g);t="";var i=r.length,s=br(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){js(this),jl(this);var o="";break t}this.h.i=new ae.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,sB(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vc(a)){var c=a;break t}}c=null}if(n=c)Ko(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ty(this,n);else{this.i=!1,this.o=3,Zt(12),js(this),jl(this);break e}}this.S?(OC(this,d,o),G0&&this.i&&d==3&&(kC(this.U,this.V,"tick",this.mb),this.V.start())):(Ko(this.j,this.m,o,null),ty(this,o)),d==4&&js(this),this.i&&!this.J&&(d==4?iA(this.l,this):(this.i=!1,iu(this)))}else AB(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Zt(12)):(this.o=0,Zt(13)),js(this),jl(this)}}}catch{}finally{}};function jC(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function OC(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=cB(t,n),i==Dh){e==4&&(t.o=4,Zt(14),r=!1),Ko(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Z0){t.o=4,Zt(15),Ko(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ko(t.j,t.m,i,null),ty(t,i);jC(t)&&i!=Dh&&i!=Z0&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Zt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),jx(e),e.M=!0,Zt(11))):(Ko(t.j,t.m,n,"[Invalid Chunked Response]"),js(t),jl(t))}z.mb=function(){if(this.g){var t=br(this.g),e=this.g.ja();this.C<e.length&&(Yf(this),OC(this,t,e),this.i&&t!=4&&iu(this))}};function cB(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Dh:(n=Number(e.substring(n,r)),isNaN(n)?Z0:(r+=1,r+n>e.length?Dh:(e=e.slice(r,r+n),t.C=r+n,e)))}z.cancel=function(){this.J=!0,js(this)};function iu(t){t.Y=Date.now()+t.P,MC(t,t.P)}function MC(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=tu(Bt(t.lb,t),e)}function Yf(t){t.B&&(ae.clearTimeout(t.B),t.B=null)}z.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(oB(this.j,this.A),this.L!=2&&(Sc(),Zt(17)),js(this),this.o=2,jl(this)):MC(this,this.Y-t)};function jl(t){t.l.H==0||t.J||iA(t.l,t)}function js(t){Yf(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,bx(t.V),TC(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function ty(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||ny(n.i,t))){if(!t.K&&ny(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Mh(n),nm(n);else break e;Dx(n),Zt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=tu(Bt(n.ib,n),6e3));if(1>=WC(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Os(n,11)}else if((t.K||n.g==t)&&Mh(n),!vc(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const d=c[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const m=c[5];m!=null&&typeof m=="number"&&0<m&&(r=1.5*m,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const p=t.g;if(p){const y=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var s=r.i;s.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Ax(s,s.h),s.h=null))}if(r.F){const x=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;x&&(r.Da=x,Me(r.I,r.F,x))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=aA(r,r.J?r.pa:null,r.Y),o.K){HC(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Yf(a),iu(a)),r.g=o}else nA(r);0<n.j.length&&rm(n)}else c[0]!="stop"&&c[0]!="close"||Os(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Os(n,7):Nx(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Sc(4)}catch{}}function uB(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Vf(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function dB(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Vf(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function LC(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Vf(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=dB(t),r=uB(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var FC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hB(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Vs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Vs){this.h=t.h,jh(this,t.j),this.s=t.s,this.g=t.g,Oh(this,t.m),this.l=t.l;var e=t.i,n=new bc;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),YE(this,n),this.o=t.o}else t&&(e=String(t).match(FC))?(this.h=!1,jh(this,e[1]||"",!0),this.s=vl(e[2]||""),this.g=vl(e[3]||"",!0),Oh(this,e[4]),this.l=vl(e[5]||"",!0),YE(this,e[6]||"",!0),this.o=vl(e[7]||"")):(this.h=!1,this.i=new bc(null,this.h))}Vs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(xl(e,JE,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(xl(e,JE,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(xl(n,n.charAt(0)=="/"?pB:mB,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",xl(n,yB)),t.join("")};function ci(t){return new Vs(t)}function jh(t,e,n){t.j=n?vl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Oh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function YE(t,e,n){e instanceof bc?(t.i=e,vB(t.i,t.h)):(n||(e=xl(e,gB)),t.i=new bc(e,t.h))}function Me(t,e,n){t.i.set(e,n)}function Jf(t){return Me(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function vl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function xl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,fB),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function fB(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var JE=/[#\/\?@]/g,mB=/[#\?:]/g,pB=/[#\?]/g,gB=/[#\?@]/g,yB=/#/g;function bc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function gs(t){t.g||(t.g=new Map,t.h=0,t.i&&hB(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}z=bc.prototype;z.add=function(t,e){gs(this),this.i=null,t=Ba(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function $C(t,e){gs(t),e=Ba(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function zC(t,e){return gs(t),e=Ba(t,e),t.g.has(e)}z.forEach=function(t,e){gs(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};z.ta=function(){gs(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};z.Z=function(t){gs(this);let e=[];if(typeof t=="string")zC(this,t)&&(e=e.concat(this.g.get(Ba(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};z.set=function(t,e){return gs(this),this.i=null,t=Ba(this,t),zC(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};z.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function BC(t,e,n){$C(t,e),0<n.length&&(t.i=null,t.g.set(Ba(t,e),px(n)),t.h+=n.length)}z.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Ba(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function vB(t,e){e&&!t.j&&(gs(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&($C(this,r),BC(this,i,n))},t)),t.j=e}var xB=class{constructor(t,e){this.g=t,this.map=e}};function VC(t){this.l=t||wB,ae.PerformanceNavigationTiming?(t=ae.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ae.g&&ae.g.Ka&&ae.g.Ka()&&ae.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var wB=10;function UC(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function WC(t){return t.h?1:t.g?t.g.size:0}function ny(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Ax(t,e){t.g?t.g.add(e):t.h=e}function HC(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}VC.prototype.cancel=function(){if(this.i=qC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function qC(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return px(t.i)}var _B=class{stringify(t){return ae.JSON.stringify(t,void 0)}parse(t){return ae.JSON.parse(t,void 0)}};function EB(){this.g=new _B}function SB(t,e,n){const r=n||"";try{LC(t,function(i,s){let o=i;Zc(i)&&(o=Ex(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function bB(t,e){const n=new Gf;if(ae.Image){const r=new Image;r.onload=Xu(Yu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Xu(Yu,n,r,"TestLoadImage: error",!1,e),r.onabort=Xu(Yu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Xu(Yu,n,r,"TestLoadImage: timeout",!1,e),ae.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Yu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Zf(t){this.l=t.fc||null,this.j=t.ob||!1}bt(Zf,Tx);Zf.prototype.g=function(){return new em(this.l,this.j)};Zf.prototype.i=function(t){return function(){return t}}({});function em(t,e){St.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Rx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bt(em,St);var Rx=0;z=em.prototype;z.open=function(t,e){if(this.readyState!=Rx)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,kc(this)};z.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ae).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};z.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,su(this)),this.readyState=Rx};z.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,kc(this)),this.g&&(this.readyState=3,kc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ae.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;GC(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function GC(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}z.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?su(this):kc(this),this.readyState==3&&GC(this)}};z.Za=function(t){this.g&&(this.response=this.responseText=t,su(this))};z.Ya=function(t){this.g&&(this.response=t,su(this))};z.ka=function(){this.g&&su(this)};function su(t){t.readyState=4,t.l=null,t.j=null,t.A=null,kc(t)}z.setRequestHeader=function(t,e){this.v.append(t,e)};z.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};z.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function kc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(em.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var kB=ae.JSON.parse;function Ye(t){St.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=KC,this.L=this.M=!1}bt(Ye,St);var KC="",TB=/^https?$/i,IB=["POST","PUT"];z=Ye.prototype;z.Oa=function(t){this.M=t};z.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():J0.g(),this.C=this.u?QE(this.u):QE(J0),this.g.onreadystatechange=Bt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){ZE(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=ae.FormData&&t instanceof ae.FormData,!(0<=dC(IB,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{YC(this),0<this.B&&((this.L=CB(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Bt(this.ua,this)):this.A=kx(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){ZE(this,s)}};function CB(t){return ba&&typeof t.timeout=="number"&&t.ontimeout!==void 0}z.ua=function(){typeof mx<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pt(this,"timeout"),this.abort(8))};function ZE(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,XC(t),tm(t)}function XC(t){t.F||(t.F=!0,Pt(t,"complete"),Pt(t,"error"))}z.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Pt(this,"complete"),Pt(this,"abort"),tm(this))};z.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),tm(this,!0)),Ye.$.N.call(this)};z.La=function(){this.s||(this.G||this.v||this.l?QC(this):this.kb())};z.kb=function(){QC(this)};function QC(t){if(t.h&&typeof mx<"u"&&(!t.C[1]||br(t)!=4||t.da()!=2)){if(t.v&&br(t)==4)kx(t.La,0,t);else if(Pt(t,"readystatechange"),br(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(FC)[1]||null;!i&&ae.self&&ae.self.location&&(i=ae.self.location.protocol.slice(0,-1)),r=!TB.test(i?i.toLowerCase():"")}n=r}if(n)Pt(t,"complete"),Pt(t,"success");else{t.m=6;try{var s=2<br(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",XC(t)}}finally{tm(t)}}}}function tm(t,e){if(t.g){YC(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Pt(t,"ready");try{n.onreadystatechange=r}catch{}}}function YC(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ae.clearTimeout(t.A),t.A=null)}z.isActive=function(){return!!this.g};function br(t){return t.g?t.g.readyState:0}z.da=function(){try{return 2<br(this)?this.g.status:-1}catch{return-1}};z.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};z.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),kB(e)}};function eS(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case KC:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function AB(t){const e={};t=(t.g&&2<=br(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(vc(t[r]))continue;var n=eB(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}G8(e,function(r){return r.join(", ")})}z.Ia=function(){return this.m};z.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function JC(t){let e="";return yx(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Px(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=JC(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Me(t,e,n))}function cl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ZC(t){this.Ga=0,this.j=[],this.l=new Gf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=cl("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=cl("baseRetryDelayMs",5e3,t),this.hb=cl("retryDelaySeedMs",1e4,t),this.eb=cl("forwardChannelMaxRetries",2,t),this.xa=cl("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new VC(t&&t.concurrentRequestLimit),this.Ja=new EB,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}z=ZC.prototype;z.ra=8;z.H=1;function Nx(t){if(eA(t),t.H==3){var e=t.W++,n=ci(t.I);if(Me(n,"SID",t.K),Me(n,"RID",e),Me(n,"TYPE","terminate"),ou(t,n),e=new ru(t,t.l,e),e.L=2,e.v=Jf(ci(n)),n=!1,ae.navigator&&ae.navigator.sendBeacon)try{n=ae.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&ae.Image&&(new Image().src=e.v,n=!0),n||(e.g=lA(e.l,null),e.g.ha(e.v)),e.G=Date.now(),iu(e)}oA(t)}function nm(t){t.g&&(jx(t),t.g.cancel(),t.g=null)}function eA(t){nm(t),t.u&&(ae.clearTimeout(t.u),t.u=null),Mh(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ae.clearTimeout(t.m),t.m=null)}function rm(t){if(!UC(t.i)&&!t.m){t.m=!0;var e=t.Na;wc||SC(),_c||(wc(),_c=!0),Sx.add(e,t),t.C=0}}function RB(t,e){return WC(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=tu(Bt(t.Na,t,e),sA(t,t.C)),t.C++,!0)}z.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new ru(this,this.l,t);let s=this.s;if(this.U&&(s?(s=pC(s),gC(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=tA(this,i,e),n=ci(this.I),Me(n,"RID",t),Me(n,"CVER",22),this.F&&Me(n,"X-HTTP-Session-Id",this.F),ou(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(JC(s)))+"&"+e:this.o&&Px(n,this.o,s)),Ax(this.i,i),this.bb&&Me(n,"TYPE","init"),this.P?(Me(n,"$req",e),Me(n,"SID","null"),i.aa=!0,ey(i,n,null)):ey(i,n,e),this.H=2}}else this.H==3&&(t?tS(this,t):this.j.length==0||UC(this.i)||tS(this))};function tS(t,e){var n;e?n=e.m:n=t.W++;const r=ci(t.I);Me(r,"SID",t.K),Me(r,"RID",n),Me(r,"AID",t.V),ou(t,r),t.o&&t.s&&Px(r,t.o,t.s),n=new ru(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=tA(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Ax(t.i,n),ey(n,r,e)}function ou(t,e){t.na&&yx(t.na,function(n,r){Me(e,r,n)}),t.h&&LC({},function(n,r){Me(e,r,n)})}function tA(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Bt(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=i[l].g;const d=i[l].map;if(c-=s,0>c)s=Math.max(0,i[l].g-100),a=!1;else try{SB(d,o,"req"+c+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function nA(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;wc||SC(),_c||(wc(),_c=!0),Sx.add(e,t),t.A=0}}function Dx(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=tu(Bt(t.Ma,t),sA(t,t.A)),t.A++,!0)}z.Ma=function(){if(this.u=null,rA(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=tu(Bt(this.jb,this),t)}};z.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Zt(10),nm(this),rA(this))};function jx(t){t.B!=null&&(ae.clearTimeout(t.B),t.B=null)}function rA(t){t.g=new ru(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=ci(t.wa);Me(e,"RID","rpc"),Me(e,"SID",t.K),Me(e,"AID",t.V),Me(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Me(e,"TO",t.qa),Me(e,"TYPE","xmlhttp"),ou(t,e),t.o&&t.s&&Px(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Jf(ci(e)),n.s=null,n.S=!0,DC(n,t)}z.ib=function(){this.v!=null&&(this.v=null,nm(this),Dx(this),Zt(19))};function Mh(t){t.v!=null&&(ae.clearTimeout(t.v),t.v=null)}function iA(t,e){var n=null;if(t.g==e){Mh(t),jx(t),t.g=null;var r=2}else if(ny(t.i,e))n=e.F,HC(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=Kf(),Pt(r,new AC(r,n)),rm(t)}else nA(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&RB(t,e)||r==2&&Dx(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Os(t,5);break;case 4:Os(t,10);break;case 3:Os(t,6);break;default:Os(t,2)}}}function sA(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Os(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Bt(t.pb,t);n||(n=new Vs("//www.google.com/images/cleardot.gif"),ae.location&&ae.location.protocol=="http"||jh(n,"https"),Jf(n)),bB(n.toString(),r)}else Zt(2);t.H=0,t.h&&t.h.za(e),oA(t),eA(t)}z.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Zt(2)):(this.l.info("Failed to ping google.com"),Zt(1))};function oA(t){if(t.H=0,t.ma=[],t.h){const e=qC(t.i);(e.length!=0||t.j.length!=0)&&(HE(t.ma,e),HE(t.ma,t.j),t.i.i.length=0,px(t.j),t.j.length=0),t.h.ya()}}function aA(t,e,n){var r=n instanceof Vs?ci(n):new Vs(n);if(r.g!="")e&&(r.g=e+"."+r.g),Oh(r,r.m);else{var i=ae.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Vs(null);r&&jh(s,r),e&&(s.g=e),i&&Oh(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Me(r,n,e),Me(r,"VER",t.ra),ou(t,r),r}function lA(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Ye(new Zf({ob:!0})):new Ye(t.va),e.Oa(t.J),e}z.isActive=function(){return!!this.h&&this.h.isActive(this)};function cA(){}z=cA.prototype;z.Ba=function(){};z.Aa=function(){};z.za=function(){};z.ya=function(){};z.isActive=function(){return!0};z.Va=function(){};function Lh(){if(ba&&!(10<=Number(U8)))throw Error("Environmental error: no available transport.")}Lh.prototype.g=function(t,e){return new Cn(t,e)};function Cn(t,e){St.call(this),this.g=new ZC(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!vc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!vc(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Va(this)}bt(Cn,St);Cn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Zt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=aA(t,null,t.Y),rm(t)};Cn.prototype.close=function(){Nx(this.g)};Cn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Ex(t),t=n);e.j.push(new xB(e.fb++,t)),e.H==3&&rm(e)};Cn.prototype.N=function(){this.g.h=null,delete this.j,Nx(this.g),delete this.g,Cn.$.N.call(this)};function uA(t){Ix.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}bt(uA,Ix);function dA(){Cx.call(this),this.status=1}bt(dA,Cx);function Va(t){this.g=t}bt(Va,cA);Va.prototype.Ba=function(){Pt(this.g,"a")};Va.prototype.Aa=function(t){Pt(this.g,new uA(t))};Va.prototype.za=function(t){Pt(this.g,new dA)};Va.prototype.ya=function(){Pt(this.g,"b")};function PB(){this.blockSize=-1}function cr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}bt(cr,PB);cr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Qp(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}cr.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Qp(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Qp(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Qp(this,r),i=0;break}}this.h=i,this.i+=e};cr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ce(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var NB={};function Ox(t){return-128<=t&&128>t?z8(t,function(e){return new Ce([e|0],0>e?-1:0)}):new Ce([t|0],0>t?-1:0)}function kr(t){if(isNaN(t)||!isFinite(t))return ia;if(0>t)return Ct(kr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=ry;return new Ce(e,0)}function hA(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ct(hA(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=kr(Math.pow(e,8)),r=ia,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=kr(Math.pow(e,s)),r=r.R(s).add(kr(o))):(r=r.R(n),r=r.add(kr(o)))}return r}var ry=4294967296,ia=Ox(0),iy=Ox(1),nS=Ox(16777216);z=Ce.prototype;z.ea=function(){if($n(this))return-Ct(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:ry+r)*e,e*=ry}return t};z.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Jr(this))return"0";if($n(this))return"-"+Ct(this).toString(t);for(var e=kr(Math.pow(t,6)),n=this,r="";;){var i=$h(n,e).g;n=Fh(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Jr(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};z.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Jr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function $n(t){return t.h==-1}z.X=function(t){return t=Fh(this,t),$n(t)?-1:Jr(t)?0:1};function Ct(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ce(n,~t.h).add(iy)}z.abs=function(){return $n(this)?Ct(this):this};z.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Ce(n,n[n.length-1]&-2147483648?-1:0)};function Fh(t,e){return t.add(Ct(e))}z.R=function(t){if(Jr(this)||Jr(t))return ia;if($n(this))return $n(t)?Ct(this).R(Ct(t)):Ct(Ct(this).R(t));if($n(t))return Ct(this.R(Ct(t)));if(0>this.X(nS)&&0>t.X(nS))return kr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,Ju(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Ju(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Ju(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Ju(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ce(n,0)};function Ju(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ul(t,e){this.g=t,this.h=e}function $h(t,e){if(Jr(e))throw Error("division by zero");if(Jr(t))return new ul(ia,ia);if($n(t))return e=$h(Ct(t),e),new ul(Ct(e.g),Ct(e.h));if($n(e))return e=$h(t,Ct(e)),new ul(Ct(e.g),e.h);if(30<t.g.length){if($n(t)||$n(e))throw Error("slowDivide_ only works with positive integers.");for(var n=iy,r=e;0>=r.X(t);)n=rS(n),r=rS(r);var i=Ao(n,1),s=Ao(r,1);for(r=Ao(r,2),n=Ao(n,2);!Jr(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Ao(r,1),n=Ao(n,1)}return e=Fh(t,i.R(e)),new ul(i,e)}for(i=ia;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=kr(n),o=s.R(e);$n(o)||0<o.X(t);)n-=r,s=kr(n),o=s.R(e);Jr(s)&&(s=iy),i=i.add(s),t=Fh(t,o)}return new ul(i,t)}z.gb=function(t){return $h(this,t).h};z.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ce(n,this.h&t.h)};z.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ce(n,this.h|t.h)};z.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ce(n,this.h^t.h)};function rS(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ce(n,t.h)}function Ao(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Ce(i,t.h)}Lh.prototype.createWebChannel=Lh.prototype.g;Cn.prototype.send=Cn.prototype.u;Cn.prototype.open=Cn.prototype.m;Cn.prototype.close=Cn.prototype.close;Xf.NO_ERROR=0;Xf.TIMEOUT=8;Xf.HTTP_ERROR=6;RC.COMPLETE="complete";PC.EventType=nu;nu.OPEN="a";nu.CLOSE="b";nu.ERROR="c";nu.MESSAGE="d";St.prototype.listen=St.prototype.O;Ye.prototype.listenOnce=Ye.prototype.P;Ye.prototype.getLastError=Ye.prototype.Sa;Ye.prototype.getLastErrorCode=Ye.prototype.Ia;Ye.prototype.getStatus=Ye.prototype.da;Ye.prototype.getResponseJson=Ye.prototype.Wa;Ye.prototype.getResponseText=Ye.prototype.ja;Ye.prototype.send=Ye.prototype.ha;Ye.prototype.setWithCredentials=Ye.prototype.Oa;cr.prototype.digest=cr.prototype.l;cr.prototype.reset=cr.prototype.reset;cr.prototype.update=cr.prototype.j;Ce.prototype.add=Ce.prototype.add;Ce.prototype.multiply=Ce.prototype.R;Ce.prototype.modulo=Ce.prototype.gb;Ce.prototype.compare=Ce.prototype.X;Ce.prototype.toNumber=Ce.prototype.ea;Ce.prototype.toString=Ce.prototype.toString;Ce.prototype.getBits=Ce.prototype.D;Ce.fromNumber=kr;Ce.fromString=hA;var DB=function(){return new Lh},jB=function(){return Kf()},Yp=Xf,OB=RC,MB=xo,iS={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Zu=PC,LB=Ye,FB=cr,sa=Ce;const sS="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ua="10.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new rx("@firebase/firestore");function oS(){return ro.logLevel}function q(t,...e){if(ro.logLevel<=Se.DEBUG){const n=e.map(Mx);ro.debug(`Firestore (${Ua}): ${t}`,...n)}}function ui(t,...e){if(ro.logLevel<=Se.ERROR){const n=e.map(Mx);ro.error(`Firestore (${Ua}): ${t}`,...n)}}function ka(t,...e){if(ro.logLevel<=Se.WARN){const n=e.map(Mx);ro.warn(`Firestore (${Ua}): ${t}`,...n)}}function Mx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t="Unexpected state"){const e=`FIRESTORE (${Ua}) INTERNAL ASSERTION FAILED: `+t;throw ui(e),new Error(e)}function $e(t,e){t||se()}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class V extends zr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $B{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Lt.UNAUTHENTICATED))}shutdown(){}}class zB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class BB{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ni,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ni)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string"),new fA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string"),new Lt(e)}}class VB{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class UB{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new VB(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class WB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HB{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?($e(typeof n.token=="string"),this.R=n.token,new WB(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qB(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=qB(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function be(t,e){return t<e?-1:t>e?1:0}function Ta(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new V(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new gt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new le(e)}static min(){return new le(new gt(0,0))}static max(){return new le(new gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(),r===void 0?r=e.length-n:r>e.length-n&&se(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Tc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Tc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Le extends Tc{construct(e,n,r){return new Le(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new V(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Le(n)}static emptyPath(){return new Le([])}}const GB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends Tc{construct(e,n,r){return new zt(e,n,r)}static isValidIdentifier(e){return GB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new zt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new V(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new V(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new V(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new V(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(n)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Le.fromString(e))}static fromName(e){return new Y(Le.fromString(e).popFirst(5))}static empty(){return new Y(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Le(e.slice()))}}function KB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new gt(n+1,0):new gt(n,r));return new ns(i,Y.empty(),e)}function XB(t){return new ns(t.readTime,t.key,-1)}class ns{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ns(le.min(),Y.empty(),-1)}static max(){return new ns(le.max(),Y.empty(),-1)}}function QB(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function au(t){if(t.code!==P.FAILED_PRECONDITION||t.message!==YB)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new M((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function lu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Lx.ae=-1;function im(t){return t==null}function zh(t){return t===0&&1/t==-1/0}function ZB(t){return typeof t=="number"&&Number.isInteger(t)&&!zh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){this.comparator=e,this.root=n||It.EMPTY}insert(e,n){return new Ge(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,It.BLACK,null,null))}remove(e){return new Ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,It.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ed(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ed(this.root,e,this.comparator,!1)}getReverseIterator(){return new ed(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ed(this.root,e,this.comparator,!0)}}class ed{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class It{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??It.RED,this.left=i??It.EMPTY,this.right=s??It.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new It(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return It.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return It.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw se();const e=this.left.check();if(e!==this.right.check())throw se();return e+(this.isRed()?0:1)}}It.EMPTY=null,It.RED=!0,It.BLACK=!1;It.EMPTY=new class{constructor(){this.size=0}get key(){throw se()}get value(){throw se()}get color(){throw se()}get left(){throw se()}get right(){throw se()}copy(e,n,r,i,s){return this}insert(e,n,r){return new It(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new lS(this.data.getIterator())}getIteratorFrom(e){return new lS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ut(this.comparator);return n.data=e,n}}class lS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new ir([])}unionWith(e){let n=new Ut(zt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ir(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ta(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new gA("Invalid base64 string: "+s):s}}(e);return new qt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const eV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(t){if($e(!!t),typeof t=="string"){let e=0;const n=eV.exec(t);if($e(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ot(t.seconds),nanos:ot(t.nanos)}}function ot(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function io(t){return typeof t=="string"?qt.fromBase64String(t):qt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function $x(t){const e=t.mapValue.fields.__previous_value__;return Fx(e)?$x(e):e}function Ic(t){const e=rs(t.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Cc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Cc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Cc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function so(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fx(t)?4:nV(t)?9007199254740991:10:se()}function Mr(t,e){if(t===e)return!0;const n=so(t);if(n!==so(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ic(t).isEqual(Ic(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=rs(i.timestampValue),a=rs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return io(i.bytesValue).isEqual(io(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ot(i.geoPointValue.latitude)===ot(s.geoPointValue.latitude)&&ot(i.geoPointValue.longitude)===ot(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ot(i.integerValue)===ot(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ot(i.doubleValue),a=ot(s.doubleValue);return o===a?zh(o)===zh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ta(t.arrayValue.values||[],e.arrayValue.values||[],Mr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(aS(o)!==aS(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Mr(o[l],a[l])))return!1;return!0}(t,e);default:return se()}}function Ac(t,e){return(t.values||[]).find(n=>Mr(n,e))!==void 0}function Ia(t,e){if(t===e)return 0;const n=so(t),r=so(e);if(n!==r)return be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return be(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ot(s.integerValue||s.doubleValue),l=ot(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return cS(t.timestampValue,e.timestampValue);case 4:return cS(Ic(t),Ic(e));case 5:return be(t.stringValue,e.stringValue);case 6:return function(s,o){const a=io(s),l=io(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=be(a[c],l[c]);if(d!==0)return d}return be(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=be(ot(s.latitude),ot(o.latitude));return a!==0?a:be(ot(s.longitude),ot(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const d=Ia(a[c],l[c]);if(d)return d}return be(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===td.mapValue&&o===td.mapValue)return 0;if(s===td.mapValue)return 1;if(o===td.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const m=be(l[h],d[h]);if(m!==0)return m;const p=Ia(a[l[h]],c[d[h]]);if(p!==0)return p}return be(l.length,d.length)}(t.mapValue,e.mapValue);default:throw se()}}function cS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return be(t,e);const n=rs(t),r=rs(e),i=be(n.seconds,r.seconds);return i!==0?i:be(n.nanos,r.nanos)}function Ca(t){return sy(t)}function sy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=rs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return io(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=sy(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${sy(n.fields[o])}`;return i+"}"}(t.mapValue):se()}function uS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function oy(t){return!!t&&"integerValue"in t}function zx(t){return!!t&&"arrayValue"in t}function dS(t){return!!t&&"nullValue"in t}function hS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Rd(t){return!!t&&"mapValue"in t}function Ol(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Wa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ol(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ol(t.arrayValue.values[n]);return e}return Object.assign({},t)}function nV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Rd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ol(n)}setAll(e){let n=zt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ol(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Rd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Rd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Wa(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new zn(Ol(this.value))}}function yA(t){const e=[];return Wa(t.fields,(n,r)=>{const i=new zt([n]);if(Rd(r)){const s=yA(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ir(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new $t(e,0,le.min(),le.min(),le.min(),zn.empty(),0)}static newFoundDocument(e,n,r,i){return new $t(e,1,n,le.min(),r,i,0)}static newNoDocument(e,n){return new $t(e,2,n,le.min(),le.min(),zn.empty(),0)}static newUnknownDocument(e,n){return new $t(e,3,n,le.min(),le.min(),zn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n){this.position=e,this.inclusive=n}}function fS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=Ia(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function mS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n="asc"){this.field=e,this.dir=n}}function rV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{}class lt extends vA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new sV(e,n,r):n==="array-contains"?new lV(e,r):n==="in"?new cV(e,r):n==="not-in"?new uV(e,r):n==="array-contains-any"?new dV(e,r):new lt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new oV(e,r):new aV(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ia(n,this.value)):n!==null&&so(this.value)===so(n)&&this.matchesComparison(Ia(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ur extends vA{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new ur(e,n)}matches(e){return xA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function xA(t){return t.op==="and"}function wA(t){return iV(t)&&xA(t)}function iV(t){for(const e of t.filters)if(e instanceof ur)return!1;return!0}function ay(t){if(t instanceof lt)return t.field.canonicalString()+t.op.toString()+Ca(t.value);if(wA(t))return t.filters.map(e=>ay(e)).join(",");{const e=t.filters.map(n=>ay(n)).join(",");return`${t.op}(${e})`}}function _A(t,e){return t instanceof lt?function(r,i){return i instanceof lt&&r.op===i.op&&r.field.isEqual(i.field)&&Mr(r.value,i.value)}(t,e):t instanceof ur?function(r,i){return i instanceof ur&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&_A(o,i.filters[a]),!0):!1}(t,e):void se()}function EA(t){return t instanceof lt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ca(n.value)}`}(t):t instanceof ur?function(n){return n.op.toString()+" {"+n.getFilters().map(EA).join(" ,")+"}"}(t):"Filter"}class sV extends lt{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class oV extends lt{constructor(e,n){super(e,"in",n),this.keys=SA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class aV extends lt{constructor(e,n){super(e,"not-in",n),this.keys=SA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function SA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class lV extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return zx(n)&&Ac(n.arrayValue,this.value)}}class cV extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ac(this.value.arrayValue,n)}}class uV extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ac(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ac(this.value.arrayValue,n)}}class dV extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!zx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ac(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.he=null}}function pS(t,e=null,n=[],r=[],i=null,s=null,o=null){return new hV(t,e,n,r,i,s,o)}function Bx(t){const e=fe(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ay(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),im(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ca(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ca(r)).join(",")),e.he=n}return e.he}function Vx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!rV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_A(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!mS(t.startAt,e.startAt)&&mS(t.endAt,e.endAt)}function ly(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function fV(t,e,n,r,i,s,o,a){return new cu(t,e,n,r,i,s,o,a)}function Ux(t){return new cu(t)}function gS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bA(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Wx(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function kA(t){return t.collectionGroup!==null}function Ll(t){const e=fe(t);if(e.Pe===null){e.Pe=[];const n=Wx(e),r=bA(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new Ml(n)),e.Pe.push(new Ml(zt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Ml(zt.keyField(),s))}}}return e.Pe}function di(t){const e=fe(t);return e.Ie||(e.Ie=mV(e,Ll(t))),e.Ie}function mV(t,e){if(t.limitType==="F")return pS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ml(i.field,s)});const n=t.endAt?new Bh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bh(t.startAt.position,t.startAt.inclusive):null;return pS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function cy(t,e){e.getFirstInequalityField(),Wx(t);const n=t.filters.concat([e]);return new cu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function uy(t,e,n){return new cu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function sm(t,e){return Vx(di(t),di(e))&&t.limitType===e.limitType}function TA(t){return`${Bx(di(t))}|lt:${t.limitType}`}function dy(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>EA(i)).join(", ")}]`),im(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ca(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ca(i)).join(",")),`Target(${r})`}(di(t))}; limitType=${t.limitType})`}function om(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Y.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ll(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=fS(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ll(r),i)||r.endAt&&!function(o,a,l){const c=fS(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ll(r),i))}(t,e)}function pV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function IA(t){return(e,n)=>{let r=!1;for(const i of Ll(t)){const s=gV(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function gV(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Ia(l,c):se()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wa(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return pA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV=new Ge(Y.comparator);function hi(){return yV}const CA=new Ge(Y.comparator);function wl(...t){let e=CA;for(const n of t)e=e.insert(n.key,n);return e}function AA(t){let e=CA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ms(){return Fl()}function RA(){return Fl()}function Fl(){return new Ha(t=>t.toString(),(t,e)=>t.isEqual(e))}const vV=new Ge(Y.comparator),xV=new Ut(Y.comparator);function ge(...t){let e=xV;for(const n of t)e=e.add(n);return e}const wV=new Ut(be);function _V(){return wV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zh(e)?"-0":e}}function NA(t){return{integerValue:""+t}}function EV(t,e){return ZB(e)?NA(e):PA(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(){this._=void 0}}function SV(t,e,n){return t instanceof Vh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Fx(s)&&(s=$x(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Rc?jA(t,e):t instanceof Pc?OA(t,e):function(i,s){const o=DA(i,s),a=yS(o)+yS(i.Ee);return oy(o)&&oy(i.Ee)?NA(a):PA(i.serializer,a)}(t,e)}function bV(t,e,n){return t instanceof Rc?jA(t,e):t instanceof Pc?OA(t,e):n}function DA(t,e){return t instanceof Uh?function(r){return oy(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Vh extends am{}class Rc extends am{constructor(e){super(),this.elements=e}}function jA(t,e){const n=MA(e);for(const r of t.elements)n.some(i=>Mr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Pc extends am{constructor(e){super(),this.elements=e}}function OA(t,e){let n=MA(e);for(const r of t.elements)n=n.filter(i=>!Mr(i,r));return{arrayValue:{values:n}}}class Uh extends am{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function yS(t){return ot(t.integerValue||t.doubleValue)}function MA(t){return zx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function kV(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Rc&&i instanceof Rc||r instanceof Pc&&i instanceof Pc?Ta(r.elements,i.elements,Mr):r instanceof Uh&&i instanceof Uh?Mr(r.Ee,i.Ee):r instanceof Vh&&i instanceof Vh}(t.transform,e.transform)}class TV{constructor(e,n){this.version=e,this.transformResults=n}}class Nr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nr}static exists(e){return new Nr(void 0,e)}static updateTime(e){return new Nr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class lm{}function LA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Hx(t.key,Nr.none()):new uu(t.key,t.data,Nr.none());{const n=t.data,r=zn.empty();let i=new Ut(zt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new wo(t.key,r,new ir(i.toArray()),Nr.none())}}function IV(t,e,n){t instanceof uu?function(i,s,o){const a=i.value.clone(),l=xS(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof wo?function(i,s,o){if(!Pd(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=xS(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(FA(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function $l(t,e,n,r){return t instanceof uu?function(s,o,a,l){if(!Pd(s.precondition,o))return a;const c=s.value.clone(),d=wS(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof wo?function(s,o,a,l){if(!Pd(s.precondition,o))return a;const c=wS(s.fieldTransforms,l,o),d=o.data;return d.setAll(FA(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Pd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function CV(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=DA(r.transform,i||null);s!=null&&(n===null&&(n=zn.empty()),n.set(r.field,s))}return n||null}function vS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ta(r,i,(s,o)=>kV(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class uu extends lm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class wo extends lm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function FA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function xS(t,e,n){const r=new Map;$e(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,bV(o,a,n[i]))}return r}function wS(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,SV(s,o,e))}return r}class Hx extends lm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AV extends lm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&IV(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=$l(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=$l(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=RA();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=LA(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&Ta(this.mutations,e.mutations,(n,r)=>vS(n,r))&&Ta(this.baseMutations,e.baseMutations,(n,r)=>vS(n,r))}}class qx{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){$e(e.mutations.length===r.length);let i=function(){return vV}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new qx(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st,xe;function DV(t){switch(t){default:return se();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function $A(t){if(t===void 0)return ui("GRPC error has no .code"),P.UNKNOWN;switch(t){case st.OK:return P.OK;case st.CANCELLED:return P.CANCELLED;case st.UNKNOWN:return P.UNKNOWN;case st.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case st.INTERNAL:return P.INTERNAL;case st.UNAVAILABLE:return P.UNAVAILABLE;case st.UNAUTHENTICATED:return P.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case st.NOT_FOUND:return P.NOT_FOUND;case st.ALREADY_EXISTS:return P.ALREADY_EXISTS;case st.PERMISSION_DENIED:return P.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case st.ABORTED:return P.ABORTED;case st.OUT_OF_RANGE:return P.OUT_OF_RANGE;case st.UNIMPLEMENTED:return P.UNIMPLEMENTED;case st.DATA_LOSS:return P.DATA_LOSS;default:return se()}}(xe=st||(st={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=new sa([4294967295,4294967295],0);function _S(t){const e=jV().encode(t),n=new FB;return n.update(e),new Uint8Array(n.digest())}function ES(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new sa([n,r],0),new sa([i,s],0)]}class Gx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _l(`Invalid padding: ${n}`);if(r<0)throw new _l(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _l(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _l(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=sa.fromNumber(this.Ae)}Ve(e,n,r){let i=e.add(n.multiply(sa.fromNumber(r)));return i.compare(OV)===1&&(i=new sa([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=_S(e),[r,i]=ES(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);if(!this.me(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Gx(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=_S(e),[r,i]=ES(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class _l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,du.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new cm(le.min(),i,new Ge(be),hi(),ge())}}class du{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new du(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n,r,i){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=i}}class zA{constructor(e,n){this.targetId=e,this.ye=n}}class BA{constructor(e,n,r=qt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class SS{constructor(){this.we=0,this.Se=kS(),this.be=qt.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=ge(),n=ge(),r=ge();return this.Se.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:se()}}),new du(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=kS()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class MV{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=hi(),this.Ue=bS(),this.We=new Ge(be)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:se()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,i)=>{this.Ye(i)&&n(i)})}Xe(e){const n=e.targetId,r=e.ye.count,i=this.et(n);if(i){const s=i.target;if(ly(s))if(r===0){const o=new Y(s.path);this.je(n,o,$t.newNoDocument(o,le.min()))}else $e(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),l=a?this.rt(a,e,o):1;if(l!==0){this.Ze(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,c)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=io(r).toUint8Array()}catch(l){if(l instanceof gA)return ka("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Gx(o,i,s)}catch(l){return ka(l instanceof _l?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.je(n,s,null),i++)}),i}_t(e){const n=new Map;this.Ke.forEach((s,o)=>{const a=this.et(o);if(a){if(s.current&&ly(a.target)){const l=new Y(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,$t.newNoDocument(l,e))}s.Fe&&(n.set(o,s.xe()),s.Oe())}});let r=ge();this.Ue.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.et(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.$e.forEach((s,o)=>o.setReadTime(e));const i=new cm(e,n,this.We,this.$e,r);return this.$e=hi(),this.Ue=bS(),this.We=new Ge(be),i}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const i=this.Je(e);this.ut(e,n)?i.Ne(n,1):i.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new SS,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Ut(be),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new SS),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function bS(){return new Ge(Y.comparator)}function kS(){return new Ge(Y.comparator)}const LV=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),FV=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),$V=(()=>({and:"AND",or:"OR"}))();class zV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hy(t,e){return t.useProto3Json||im(e)?e:{value:e}}function Wh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function BV(t,e){return Wh(t,e.toTimestamp())}function Dr(t){return $e(!!t),le.fromTimestamp(function(n){const r=rs(n);return new gt(r.seconds,r.nanos)}(t))}function Kx(t,e){return function(r){return new Le(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function UA(t){const e=Le.fromString(t);return $e(GA(e)),e}function fy(t,e){return Kx(t.databaseId,e.path)}function Jp(t,e){const n=UA(e);if(n.get(1)!==t.databaseId.projectId)throw new V(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(WA(n))}function my(t,e){return Kx(t.databaseId,e)}function VV(t){const e=UA(t);return e.length===4?Le.emptyPath():WA(e)}function py(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function WA(t){return $e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function TS(t,e,n){return{name:fy(t,e),fields:n.value.mapValue.fields}}function UV(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:se()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?($e(d===void 0||typeof d=="string"),qt.fromBase64String(d||"")):($e(d===void 0||d instanceof Uint8Array),qt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?P.UNKNOWN:$A(c.code);return new V(d,c.message||"")}(o);n=new BA(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Jp(t,r.document.name),s=Dr(r.document.updateTime),o=r.document.createTime?Dr(r.document.createTime):le.min(),a=new zn({mapValue:{fields:r.document.fields}}),l=$t.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Nd(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Jp(t,r.document),s=r.readTime?Dr(r.readTime):le.min(),o=$t.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Nd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Jp(t,r.document),s=r.removedTargetIds||[];n=new Nd([],s,i,null)}else{if(!("filter"in e))return se();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new NV(i,s),a=r.targetId;n=new zA(a,o)}}return n}function WV(t,e){let n;if(e instanceof uu)n={update:TS(t,e.key,e.value)};else if(e instanceof Hx)n={delete:fy(t,e.key)};else if(e instanceof wo)n={update:TS(t,e.key,e.data),updateMask:ZV(e.fieldMask)};else{if(!(e instanceof AV))return se();n={verify:fy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Vh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Rc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Pc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Uh)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw se()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:BV(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:se()}(t,e.precondition)),n}function HV(t,e){return t&&t.length>0?($e(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Dr(i.updateTime):Dr(s);return o.isEqual(le.min())&&(o=Dr(s)),new TV(o,i.transformResults||[])}(n,e))):[]}function qV(t,e){return{documents:[my(t,e.path)]}}function GV(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=my(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=my(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return qA(ur.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:No(h.field),direction:QV(h.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=hy(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function KV(t){let e=VV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){$e(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const m=HA(h);return m instanceof ur&&wA(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(m=>function(y){return new Ml(Do(y.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(h){let m;return m=typeof h=="object"?h.value:h,im(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(h){const m=!!h.before,p=h.values||[];return new Bh(p,m)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const m=!h.before,p=h.values||[];return new Bh(p,m)}(n.endAt)),fV(e,i,o,s,a,"F",l,c)}function XV(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function HA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Do(n.unaryFilter.field);return lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Do(n.unaryFilter.field);return lt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Do(n.unaryFilter.field);return lt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Do(n.unaryFilter.field);return lt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return se()}}(t):t.fieldFilter!==void 0?function(n){return lt.create(Do(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return se()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ur.create(n.compositeFilter.filters.map(r=>HA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return se()}}(n.compositeFilter.op))}(t):se()}function QV(t){return LV[t]}function YV(t){return FV[t]}function JV(t){return $V[t]}function No(t){return{fieldPath:t.canonicalString()}}function Do(t){return zt.fromServerFormat(t.fieldPath)}function qA(t){return t instanceof lt?function(n){if(n.op==="=="){if(hS(n.value))return{unaryFilter:{field:No(n.field),op:"IS_NAN"}};if(dS(n.value))return{unaryFilter:{field:No(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hS(n.value))return{unaryFilter:{field:No(n.field),op:"IS_NOT_NAN"}};if(dS(n.value))return{unaryFilter:{field:No(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:No(n.field),op:YV(n.op),value:n.value}}}(t):t instanceof ur?function(n){const r=n.getFilters().map(i=>qA(i));return r.length===1?r[0]:{compositeFilter:{op:JV(n.op),filters:r}}}(t):se()}function ZV(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function GA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n,r,i,s=le.min(),o=le.min(),a=qt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e){this.ht=e}}function tU(t){const e=KV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?uy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(){this._n=new rU}addToCollectionParentIndex(e,n){return this._n.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(ns.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(ns.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class rU{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ut(Le.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ut(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Aa(0)}static Bn(){return new Aa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(){this.changes=new Ha(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&$l(r.mutation,i,ir.empty(),gt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const i=Ms();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=wl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ms();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=hi();const o=Fl(),a=function(){return Fl()}();return n.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof wo)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),$l(d.mutation,c,d.mutation.getFieldMask(),gt.now())):o.set(c.key,ir.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new sU(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Fl();let i=new Ge((o,a)=>o-a),s=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||ir.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(i.get(a.batchId)||ge()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=RA();d.forEach(m=>{if(!s.has(m)){const p=LA(n.get(m),r.get(m));p!==null&&h.set(m,p),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return Y.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):kA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(Ms());let a=-1,l=s;return o.next(c=>M.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ge())).next(d=>({batchId:a,changes:AA(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let i=wl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=wl();return this.indexManager.getCollectionParents(e,i).next(o=>M.forEach(o,a=>{const l=function(d,h){return new cu(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,l)=>{const c=l.getKey();s.get(c)===null&&(s=s.insert(c,$t.newInvalidDocument(c)))});let o=wl();return s.forEach((a,l)=>{const c=i.get(a);c!==void 0&&$l(c.mutation,l,ir.empty(),gt.now()),om(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return M.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Dr(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:tU(i.bundledQuery),readTime:Dr(i.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(){this.overlays=new Ge(Y.comparator),this.hr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ms();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.It(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=Ms(),s=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ge((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=Ms(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Ms(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return M.resolve(a)}It(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new PV(n,r));let s=this.hr.get(n);s===void 0&&(s=ge(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(){this.Pr=new Ut(vt.Ir),this.Tr=new Ut(vt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new vt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new vt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new Y(new Le([])),r=new vt(n,e),i=new vt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new Y(new Le([])),r=new vt(n,e),i=new vt(n,e+1);let s=ge();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new vt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class vt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Y.comparator(e.key,n.key)||be(e.pr,n.pr)}static Er(e,n){return be(e.pr,n.pr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ut(vt.Ir)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new RV(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new vt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new vt(n,0),i=new vt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ut(be);return n.forEach(i=>{const s=new vt(i,0),o=new vt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),M.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Y.isDocumentKey(s)||(s=s.child(""));const o=new vt(new Y(s),0);let a=new Ut(be);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),M.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){$e(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return M.forEach(n.mutations,i=>{const s=new vt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new vt(n,0),i=this.wr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}vr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e){this.Cr=e,this.docs=function(){return new Ge(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():$t.newInvalidDocument(n))}getEntries(e,n){let r=hi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():$t.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=hi();const o=n.path,a=new Y(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||QB(XB(d),r)<=0||(i.has(d.key)||om(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){se()}Fr(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new dU(this)}getSize(e){return M.resolve(this.size)}}class dU extends iU{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e){this.persistence=e,this.Mr=new Ha(n=>Bx(n),Vx),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Xx,this.targetCount=0,this.Br=Aa.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),M.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Aa(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.qn(n),M.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e,n){this.Lr={},this.overlays={},this.kr=new Lx(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new hU(this),this.indexManager=new nU,this.remoteDocumentCache=function(i){return new uU(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new eU(n),this.$r=new aU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new cU(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const i=new mU(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return M.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class mU extends JB{constructor(e){super(),this.currentSequenceNumber=e}}class Qx{constructor(e){this.persistence=e,this.zr=new Xx,this.jr=null}static Hr(e){return new Qx(e)}get Jr(){if(this.jr)return this.jr;throw se()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),M.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Jr,r=>{const i=Y.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,le.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return M.or([()=>M.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=ge(),i=ge();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Yx(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(){this.$i=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Wi(e,n).next(s=>s||this.Gi(e,n,i,r)).next(s=>s||this.zi(e,n))}Wi(e,n){if(gS(n))return M.resolve(null);let r=di(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=uy(n,null,"F"),r=di(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ge(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ji(n,a);return this.Hi(n,c,o,l.readTime)?this.Wi(e,uy(n,null,"F")):this.Ji(e,c,n,l)}))})))}Gi(e,n,r,i){return gS(n)||i.isEqual(le.min())?this.zi(e,n):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(n,s);return this.Hi(n,o,r,i)?this.zi(e,n):(oS()<=Se.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),dy(n)),this.Ji(e,o,n,KB(i,-1)))})}ji(e,n){let r=new Ut(IA(e));return n.forEach((i,s)=>{om(e,s)&&(r=r.add(s))}),r}Hi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}zi(e,n){return oS()<=Se.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",dy(n)),this.Ui.getDocumentsMatchingQuery(e,n,ns.min())}Ji(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(e,n,r,i){this.persistence=e,this.Yi=n,this.serializer=i,this.Zi=new Ge(be),this.Xi=new Ha(s=>Bx(s),Vx),this.es=new Map,this.ts=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this.ns(r)}ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oU(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Zi))}}function yU(t,e,n,r){return new gU(t,e,n,r)}async function KA(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ge();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function vU(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ts.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,m=h.keys();let p=M.resolve();return m.forEach(y=>{p=p.next(()=>d.getEntry(l,y)).next(x=>{const _=c.docVersions.get(y);$e(_!==null),x.version.compareTo(_)<0&&(h.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),d.addEntry(x)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ge();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function XA(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function xU(t,e){const n=fe(t),r=e.snapshotVersion;let i=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ts.newChangeBuffer({trackRemovals:!0});i=n.Zi;const a=[];e.targetChanges.forEach((d,h)=>{const m=i.get(h);if(!m)return;a.push(n.Qr.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,d.addedDocuments,h)));let p=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(qt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),i=i.insert(h,p),function(x,_,v){return x.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(m,p,d)&&a.push(n.Qr.updateTargetData(s,p))});let l=hi(),c=ge();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(wU(s,o,e.documentUpdates).next(d=>{l=d.ss,c=d.os})),!r.isEqual(le.min())){const d=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Zi=i,s))}function wU(t,e,n){let r=ge(),i=ge();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=hi();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ss:o,os:i}})}function _U(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function EU(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Fi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Zi.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(r.targetId,r),n.Xi.set(e,r.targetId)),r})}async function gy(t,e,n){const r=fe(t),i=r.Zi.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!lu(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Zi=r.Zi.remove(e),r.Xi.delete(i.target)}function IS(t,e,n){const r=fe(t);let i=le.min(),s=ge();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,c,d){const h=fe(l),m=h.Xi.get(d);return m!==void 0?M.resolve(h.Zi.get(m)):h.Qr.getTargetData(c,d)}(r,o,di(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Yi.getDocumentsMatchingQuery(o,e,n?i:le.min(),n?s:ge())).next(a=>(SU(r,pV(e),a),{documents:a,_s:s})))}function SU(t,e,n){let r=t.es.get(e)||le.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.es.set(e,r)}class CS{constructor(){this.activeTargetIds=_V()}Is(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ts(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ps(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bU{constructor(){this.Ys=new CS,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}updateQueryState(e,n,r){this.Zs[e]=n}removeLocalQueryTarget(e){this.Ys.Ts(e)}isLocalQueryTarget(e){return this.Ys.activeTargetIds.has(e)}clearQueryState(e){delete this.Zs[e]}getAllActiveQueryTargets(){return this.Ys.activeTargetIds}isActiveQueryTarget(e){return this.Ys.activeTargetIds.has(e)}start(){return this.Ys=new CS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{Xs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(){this.eo=()=>this.no(),this.ro=()=>this.io(),this.so=[],this.oo()}Xs(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}oo(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}no(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}io(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nd=null;function Zp(){return nd===null?nd=function(){return 268435456+Math.round(2147483648*Math.random())}():nd++,"0x"+nd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(e){this._o=e._o,this.ao=e.ao}uo(e){this.co=e}lo(e){this.ho=e}onMessage(e){this.Po=e}close(){this.ao()}send(e){this._o(e)}Io(){this.co()}To(e){this.ho(e)}Eo(e){this.Po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection";class CU extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ao=r+"://"+n.host,this.Ro=`projects/${i}/databases/${s}`,this.Vo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get mo(){return!1}fo(n,r,i,s,o){const a=Zp(),l=this.po(n,r);q("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(c,s,o),this.wo(n,l,c,i).then(d=>(q("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw ka("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}So(n,r,i,s,o,a){return this.fo(n,r,i,s,o)}yo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ua}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}po(n,r){const i=TU[n];return`${this.Ao}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}wo(e,n,r,i){const s=Zp();return new Promise((o,a)=>{const l=new LB;l.setWithCredentials(!0),l.listenOnce(OB.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Yp.NO_ERROR:const d=l.getResponseJson();q(Ot,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Yp.TIMEOUT:q(Ot,`RPC '${e}' ${s} timed out`),a(new V(P.DEADLINE_EXCEEDED,"Request time out"));break;case Yp.HTTP_ERROR:const h=l.getStatus();if(q(Ot,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const y=function(_){const v=_.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(v)>=0?v:P.UNKNOWN}(p.status);a(new V(y,p.message))}else a(new V(P.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new V(P.UNAVAILABLE,"Connection failed."));break;default:se()}}finally{q(Ot,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);q(Ot,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}bo(e,n,r){const i=Zp(),s=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=DB(),a=jB(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.yo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");q(Ot,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);let m=!1,p=!1;const y=new IU({_o:_=>{p?q(Ot,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(m||(q(Ot,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),q(Ot,`RPC '${e}' stream ${i} sending:`,_),h.send(_))},ao:()=>h.close()}),x=(_,v,g)=>{_.listen(v,w=>{try{g(w)}catch(E){setTimeout(()=>{throw E},0)}})};return x(h,Zu.EventType.OPEN,()=>{p||q(Ot,`RPC '${e}' stream ${i} transport opened.`)}),x(h,Zu.EventType.CLOSE,()=>{p||(p=!0,q(Ot,`RPC '${e}' stream ${i} transport closed`),y.To())}),x(h,Zu.EventType.ERROR,_=>{p||(p=!0,ka(Ot,`RPC '${e}' stream ${i} transport errored:`,_),y.To(new V(P.UNAVAILABLE,"The operation could not be completed")))}),x(h,Zu.EventType.MESSAGE,_=>{var v;if(!p){const g=_.data[0];$e(!!g);const w=g,E=w.error||((v=w[0])===null||v===void 0?void 0:v.error);if(E){q(Ot,`RPC '${e}' stream ${i} received error:`,E);const S=E.status;let T=function(D){const I=st[D];if(I!==void 0)return $A(I)}(S),k=E.message;T===void 0&&(T=P.INTERNAL,k="Unknown error status: "+S+" with message "+E.message),p=!0,y.To(new V(T,k)),h.close()}else q(Ot,`RPC '${e}' stream ${i} received:`,g),y.Eo(g)}}),x(a,MB.STAT_EVENT,_=>{_.stat===iS.PROXY?q(Ot,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===iS.NOPROXY&&q(Ot,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.Io()},0),y}}function eg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(t){return new zV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Do=r,this.vo=i,this.Co=s,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}reset(){this.Fo=0}Oo(){this.Fo=this.Co}No(e){this.cancel();const n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Fo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Mo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.xo=Date.now(),e())),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}Lo(){this.Mo!==null&&(this.Mo.skipDelay(),this.Mo=null)}cancel(){this.Mo!==null&&(this.Mo.cancel(),this.Mo=null)}Bo(){return(Math.random()-.5)*this.Fo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.ko=r,this.qo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new QA(e,n)}Wo(){return this.state===1||this.state===5||this.Go()}Go(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.zo()}async stop(){this.Wo()&&await this.close(0)}jo(){this.state=0,this.Uo.reset()}Ho(){this.Go()&&this.Ko===null&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,()=>this.Jo()))}Yo(e){this.Zo(),this.stream.send(e)}async Jo(){if(this.Go())return this.close(0)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}Xo(){this.$o&&(this.$o.cancel(),this.$o=null)}async close(e,n){this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,e!==4?this.Uo.reset():n&&n.code===P.RESOURCE_EXHAUSTED?(ui(n.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.e_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.lo(n)}e_(){}auth(){this.state=1;const e=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Qo===n&&this.n_(r,i)},r=>{e(()=>{const i=new V(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.r_(i)})})}n_(e,n){const r=this.t_(this.Qo);this.stream=this.i_(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.$o=this.oi.enqueueAfterDelay(this.qo,1e4,()=>(this.Go()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.lo(i=>{r(()=>this.r_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}zo(){this.state=5,this.Uo.No(async()=>{this.state=0,this.start()})}r_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}t_(e){return n=>{this.oi.enqueueAndForget(()=>this.Qo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class AU extends YA{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}i_(e,n){return this.connection.bo("Listen",e,n)}onMessage(e){this.Uo.reset();const n=UV(this.serializer,e),r=function(s){if(!("targetChange"in s))return le.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?Dr(o.readTime):le.min()}(e);return this.listener.s_(n,r)}o_(e){const n={};n.database=py(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=ly(l)?{documents:qV(s,l)}:{query:GV(s,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=VA(s,o.resumeToken);const c=hy(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=Wh(s,o.snapshotVersion.toTimestamp());const c=hy(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=XV(this.serializer,e);r&&(n.labels=r),this.Yo(n)}__(e){const n={};n.database=py(this.serializer),n.removeTarget=e,this.Yo(n)}}class RU extends YA{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.a_=!1}get u_(){return this.a_}start(){this.a_=!1,this.lastStreamToken=void 0,super.start()}e_(){this.a_&&this.c_([])}i_(e,n){return this.connection.bo("Write",e,n)}onMessage(e){if($e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();const n=HV(e.writeResults,e.commitTime),r=Dr(e.commitTime);return this.listener.l_(r,n)}return $e(!e.writeResults||e.writeResults.length===0),this.a_=!0,this.listener.h_()}P_(){const e={};e.database=py(this.serializer),this.Yo(e)}c_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>WV(this.serializer,r))};this.Yo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.I_=!1}T_(){if(this.I_)throw new V(P.FAILED_PRECONDITION,"The client has already been terminated.")}fo(e,n,r){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.fo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new V(P.UNKNOWN,i.toString())})}So(e,n,r,i){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(P.UNKNOWN,s.toString())})}terminate(){this.I_=!0}}class NU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}V_(){this.d_===0&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.A_=null,this.f_("Backend didn't respond within 10 seconds."),this.m_("Offline"),Promise.resolve())))}g_(e){this.state==="Online"?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.m_("Offline")))}set(e){this.p_(),this.d_=0,e==="Online"&&(this.R_=!1),this.m_(e)}m_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}f_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.R_?(ui(n),this.R_=!1):q("OnlineStateTracker",n)}p_(){this.A_!==null&&(this.A_.cancel(),this.A_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=s,this.D_.Xs(o=>{r.enqueueAndForget(async()=>{_o(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=fe(l);c.S_.add(4),await hu(c),c.v_.set("Unknown"),c.S_.delete(4),await dm(c)}(this))})}),this.v_=new NU(r,i)}}async function dm(t){if(_o(t))for(const e of t.b_)await e(!0)}async function hu(t){for(const e of t.b_)await e(!1)}function JA(t,e){const n=fe(t);n.w_.has(e.targetId)||(n.w_.set(e.targetId,e),e1(n)?Zx(n):qa(n).Go()&&Jx(n,e))}function ZA(t,e){const n=fe(t),r=qa(n);n.w_.delete(e),r.Go()&&eR(n,e),n.w_.size===0&&(r.Go()?r.Ho():_o(n)&&n.v_.set("Unknown"))}function Jx(t,e){if(t.C_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qa(t).o_(e)}function eR(t,e){t.C_.Le(e),qa(t).__(e)}function Zx(t){t.C_=new MV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.w_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),qa(t).start(),t.v_.V_()}function e1(t){return _o(t)&&!qa(t).Wo()&&t.w_.size>0}function _o(t){return fe(t).S_.size===0}function tR(t){t.C_=void 0}async function jU(t){t.w_.forEach((e,n)=>{Jx(t,e)})}async function OU(t,e){tR(t),e1(t)?(t.v_.g_(e),Zx(t)):t.v_.set("Unknown")}async function MU(t,e,n){if(t.v_.set("Online"),e instanceof BA&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.w_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.w_.delete(a),i.C_.removeTarget(a))}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Hh(t,r)}else if(e instanceof Nd?t.C_.Ge(e):e instanceof zA?t.C_.Xe(e):t.C_.He(e),!n.isEqual(le.min()))try{const r=await XA(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.C_._t(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.w_.get(c);d&&s.w_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.w_.get(l);if(!d)return;s.w_.set(l,d.withResumeToken(qt.EMPTY_BYTE_STRING,d.snapshotVersion)),eR(s,l);const h=new Fi(d.target,l,c,d.sequenceNumber);Jx(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){q("RemoteStore","Failed to raise snapshot:",r),await Hh(t,r)}}async function Hh(t,e,n){if(!lu(e))throw e;t.S_.add(1),await hu(t),t.v_.set("Offline"),n||(n=()=>XA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.S_.delete(1),await dm(t)})}function nR(t,e){return e().catch(n=>Hh(t,n,e))}async function hm(t){const e=fe(t),n=is(e);let r=e.y_.length>0?e.y_[e.y_.length-1].batchId:-1;for(;LU(e);)try{const i=await _U(e.localStore,r);if(i===null){e.y_.length===0&&n.Ho();break}r=i.batchId,FU(e,i)}catch(i){await Hh(e,i)}rR(e)&&iR(e)}function LU(t){return _o(t)&&t.y_.length<10}function FU(t,e){t.y_.push(e);const n=is(t);n.Go()&&n.u_&&n.c_(e.mutations)}function rR(t){return _o(t)&&!is(t).Wo()&&t.y_.length>0}function iR(t){is(t).start()}async function $U(t){is(t).P_()}async function zU(t){const e=is(t);for(const n of t.y_)e.c_(n.mutations)}async function BU(t,e,n){const r=t.y_.shift(),i=qx.from(r,e,n);await nR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await hm(t)}async function VU(t,e){e&&is(t).u_&&await async function(r,i){if(function(o){return DV(o)&&o!==P.ABORTED}(i.code)){const s=r.y_.shift();is(r).jo(),await nR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await hm(r)}}(t,e),rR(t)&&iR(t)}async function RS(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=_o(n);n.S_.add(3),await hu(n),r&&n.v_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.S_.delete(3),await dm(n)}async function UU(t,e){const n=fe(t);e?(n.S_.delete(2),await dm(n)):e||(n.S_.add(2),await hu(n),n.v_.set("Unknown"))}function qa(t){return t.F_||(t.F_=function(n,r,i){const s=fe(n);return s.T_(),new AU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{uo:jU.bind(null,t),lo:OU.bind(null,t),s_:MU.bind(null,t)}),t.b_.push(async e=>{e?(t.F_.jo(),e1(t)?Zx(t):t.v_.set("Unknown")):(await t.F_.stop(),tR(t))})),t.F_}function is(t){return t.M_||(t.M_=function(n,r,i){const s=fe(n);return s.T_(),new RU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{uo:$U.bind(null,t),lo:VU.bind(null,t),h_:zU.bind(null,t),l_:BU.bind(null,t)}),t.b_.push(async e=>{e?(t.M_.jo(),await hm(t)):(await t.M_.stop(),t.y_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.y_.length} pending writes`),t.y_=[]))})),t.M_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new t1(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function n1(t,e){if(ui("AsyncQueue",`${e}: ${t}`),lu(t))return new V(P.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=wl(),this.sortedSet=new Ge(this.comparator)}static emptySet(e){return new oa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof oa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new oa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(){this.x_=new Ge(Y.comparator)}track(e){const n=e.doc.key,r=this.x_.get(n);r?e.type!==0&&r.type===3?this.x_=this.x_.insert(n,e):e.type===3&&r.type!==1?this.x_=this.x_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.x_=this.x_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.x_=this.x_.remove(n):e.type===1&&r.type===2?this.x_=this.x_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):se():this.x_=this.x_.insert(n,e)}O_(){const e=[];return this.x_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ra{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ra(e,n,oa.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(){this.N_=void 0,this.listeners=[]}}class HU{constructor(){this.queries=new Ha(e=>TA(e),sm),this.onlineState="Unknown",this.B_=new Set}}async function sR(t,e){const n=fe(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new WU),i)try{s.N_=await n.onListen(r)}catch(o){const a=n1(o,`Initialization of query '${dy(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.L_(n.onlineState),s.N_&&e.k_(s.N_)&&r1(n)}async function oR(t,e){const n=fe(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function qU(t,e){const n=fe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.k_(i)&&(r=!0);o.N_=i}}r&&r1(n)}function GU(t,e,n){const r=fe(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function r1(t){t.B_.forEach(e=>{e.next()})}class aR{constructor(e,n,r){this.query=e,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}k_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ra(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),n=!0):this.W_(e,this.onlineState)&&(this.G_(e),n=!0),this.K_=e,n}onError(e){this.q_.error(e)}L_(e){this.onlineState=e;let n=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),n=!0),n}W_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}U_(e){if(e.docChanges.length>0)return!0;const n=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}G_(e){e=Ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.key=e}}class cR{constructor(e){this.key=e}}class KU{constructor(e,n){this.query=e,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=ge(),this.mutatedKeys=ge(),this.ia=IA(e),this.sa=new oa(this.ia)}get oa(){return this.ta}_a(e,n){const r=n?n.aa:new PS,i=n?n.sa:this.sa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const m=i.get(d),p=om(this.query,h)?h:null,y=!!m&&this.mutatedKeys.has(m.key),x=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let _=!1;m&&p?m.data.isEqual(p.data)?y!==x&&(r.track({type:3,doc:p}),_=!0):this.ua(m,p)||(r.track({type:2,doc:p}),_=!0,(l&&this.ia(p,l)>0||c&&this.ia(p,c)<0)&&(a=!0)):!m&&p?(r.track({type:0,doc:p}),_=!0):m&&!p&&(r.track({type:1,doc:m}),_=!0,(l||c)&&(a=!0)),_&&(p?(o=o.add(p),s=x?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{sa:o,aa:r,Hi:a,mutatedKeys:s}}ua(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;const s=e.aa.O_();s.sort((c,d)=>function(m,p){const y=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se()}};return y(m)-y(p)}(c.type,d.type)||this.ia(c.doc,d.doc)),this.ca(r);const o=n?this.la():[],a=this.ra.size===0&&this.current?1:0,l=a!==this.na;return this.na=a,s.length!==0||l?{snapshot:new Ra(this.query,e.sa,i,s,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ha:o}:{ha:o}}L_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({sa:this.sa,aa:new PS,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}Pa(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}ca(e){e&&(e.addedDocuments.forEach(n=>this.ta=this.ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ta=this.ta.delete(n)),this.current=e.current)}la(){if(!this.current)return[];const e=this.ra;this.ra=ge(),this.sa.forEach(r=>{this.Pa(r.key)&&(this.ra=this.ra.add(r.key))});const n=[];return e.forEach(r=>{this.ra.has(r)||n.push(new cR(r))}),this.ra.forEach(r=>{e.has(r)||n.push(new lR(r))}),n}Ia(e){this.ta=e._s,this.ra=ge();const n=this._a(e.documents);return this.applyChanges(n,!0)}Ta(){return Ra.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,this.na===0,this.hasCachedResults)}}class XU{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class QU{constructor(e){this.key=e,this.Ea=!1}}class YU{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.da={},this.Aa=new Ha(a=>TA(a),sm),this.Ra=new Map,this.Va=new Set,this.ma=new Ge(Y.comparator),this.fa=new Map,this.ga=new Xx,this.pa={},this.ya=new Map,this.wa=Aa.Bn(),this.onlineState="Unknown",this.Sa=void 0}get isPrimaryClient(){return this.Sa===!0}}async function JU(t,e){const n=l7(t);let r,i;const s=n.Aa.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ta();else{const o=await EU(n.localStore,di(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await ZU(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&JA(n.remoteStore,o)}return i}async function ZU(t,e,n,r,i){t.ba=(h,m,p)=>async function(x,_,v,g){let w=_.view._a(v);w.Hi&&(w=await IS(x.localStore,_.query,!1).then(({documents:T})=>_.view._a(T,w)));const E=g&&g.targetChanges.get(_.targetId),S=_.view.applyChanges(w,x.isPrimaryClient,E);return DS(x,_.targetId,S.ha),S.snapshot}(t,h,m,p);const s=await IS(t.localStore,e,!0),o=new KU(e,s._s),a=o._a(s.documents),l=du.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);DS(t,n,c.ha);const d=new XU(e,n,o);return t.Aa.set(e,d),t.Ra.has(n)?t.Ra.get(n).push(e):t.Ra.set(n,[e]),c.snapshot}async function e7(t,e){const n=fe(t),r=n.Aa.get(e),i=n.Ra.get(r.targetId);if(i.length>1)return n.Ra.set(r.targetId,i.filter(s=>!sm(s,e))),void n.Aa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await gy(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),ZA(n.remoteStore,r.targetId),yy(n,r.targetId)}).catch(au)):(yy(n,r.targetId),await gy(n.localStore,r.targetId,!0))}async function t7(t,e,n){const r=c7(t);try{const i=await function(o,a){const l=fe(o),c=gt.now(),d=a.reduce((p,y)=>p.add(y.key),ge());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=hi(),x=ge();return l.ts.getEntries(p,d).next(_=>{y=_,y.forEach((v,g)=>{g.isValidDocument()||(x=x.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,y)).next(_=>{h=_;const v=[];for(const g of a){const w=CV(g,h.get(g.key).overlayedDocument);w!=null&&v.push(new wo(g.key,w,yA(w.value.mapValue),Nr.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,v,a)}).next(_=>{m=_;const v=_.applyToLocalDocumentSet(h,x);return l.documentOverlayCache.saveOverlays(p,_.batchId,v)})}).then(()=>({batchId:m.batchId,changes:AA(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.pa[o.currentUser.toKey()];c||(c=new Ge(be)),c=c.insert(a,l),o.pa[o.currentUser.toKey()]=c}(r,i.batchId,n),await fu(r,i.changes),await hm(r.remoteStore)}catch(i){const s=n1(i,"Failed to persist write");n.reject(s)}}async function uR(t,e){const n=fe(t);try{const r=await xU(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.fa.get(s);o&&($e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ea=!0:i.modifiedDocuments.size>0?$e(o.Ea):i.removedDocuments.size>0&&($e(o.Ea),o.Ea=!1))}),await fu(n,r,e)}catch(r){await au(r)}}function NS(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Aa.forEach((s,o)=>{const a=o.view.L_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=fe(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const m of h.listeners)m.L_(a)&&(c=!0)}),c&&r1(l)}(r.eventManager,e),i.length&&r.da.s_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function n7(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.fa.get(e),s=i&&i.key;if(s){let o=new Ge(Y.comparator);o=o.insert(s,$t.newNoDocument(s,le.min()));const a=ge().add(s),l=new cm(le.min(),new Map,new Ge(be),o,a);await uR(r,l),r.ma=r.ma.remove(s),r.fa.delete(e),i1(r)}else await gy(r.localStore,e,!1).then(()=>yy(r,e,n)).catch(au)}async function r7(t,e){const n=fe(t),r=e.batch.batchId;try{const i=await vU(n.localStore,e);hR(n,r,null),dR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fu(n,i)}catch(i){await au(i)}}async function i7(t,e,n){const r=fe(t);try{const i=await function(o,a){const l=fe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>($e(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);hR(r,e,n),dR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await fu(r,i)}catch(i){await au(i)}}function dR(t,e){(t.ya.get(e)||[]).forEach(n=>{n.resolve()}),t.ya.delete(e)}function hR(t,e,n){const r=fe(t);let i=r.pa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.pa[r.currentUser.toKey()]=i}}function yy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ra.get(e))t.Aa.delete(r),n&&t.da.Da(r,n);t.Ra.delete(e),t.isPrimaryClient&&t.ga.Vr(e).forEach(r=>{t.ga.containsKey(r)||fR(t,r)})}function fR(t,e){t.Va.delete(e.path.canonicalString());const n=t.ma.get(e);n!==null&&(ZA(t.remoteStore,n),t.ma=t.ma.remove(e),t.fa.delete(n),i1(t))}function DS(t,e,n){for(const r of n)r instanceof lR?(t.ga.addReference(r.key,e),s7(t,r)):r instanceof cR?(q("SyncEngine","Document no longer in limbo: "+r.key),t.ga.removeReference(r.key,e),t.ga.containsKey(r.key)||fR(t,r.key)):se()}function s7(t,e){const n=e.key,r=n.path.canonicalString();t.ma.get(n)||t.Va.has(r)||(q("SyncEngine","New document in limbo: "+n),t.Va.add(r),i1(t))}function i1(t){for(;t.Va.size>0&&t.ma.size<t.maxConcurrentLimboResolutions;){const e=t.Va.values().next().value;t.Va.delete(e);const n=new Y(Le.fromString(e)),r=t.wa.next();t.fa.set(r,new QU(n)),t.ma=t.ma.insert(n,r),JA(t.remoteStore,new Fi(di(Ux(n.path)),r,"TargetPurposeLimboResolution",Lx.ae))}}async function fu(t,e,n){const r=fe(t),i=[],s=[],o=[];r.Aa.isEmpty()||(r.Aa.forEach((a,l)=>{o.push(r.ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const d=Yx.Ki(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.da.s_(i),await async function(l,c){const d=fe(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(c,m=>M.forEach(m.qi,p=>d.persistence.referenceDelegate.addReference(h,m.targetId,p)).next(()=>M.forEach(m.Qi,p=>d.persistence.referenceDelegate.removeReference(h,m.targetId,p)))))}catch(h){if(!lu(h))throw h;q("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const m=h.targetId;if(!h.fromCache){const p=d.Zi.get(m),y=p.snapshotVersion,x=p.withLastLimboFreeSnapshotVersion(y);d.Zi=d.Zi.insert(m,x)}}}(r.localStore,s))}async function o7(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await KA(n.localStore,e);n.currentUser=e,function(s,o){s.ya.forEach(a=>{a.forEach(l=>{l.reject(new V(P.CANCELLED,o))})}),s.ya.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fu(n,r.rs)}}function a7(t,e){const n=fe(t),r=n.fa.get(e);if(r&&r.Ea)return ge().add(r.key);{let i=ge();const s=n.Ra.get(e);if(!s)return i;for(const o of s){const a=n.Aa.get(o);i=i.unionWith(a.view.oa)}return i}}function l7(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=uR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=a7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=n7.bind(null,e),e.da.s_=qU.bind(null,e.eventManager),e.da.Da=GU.bind(null,e.eventManager),e}function c7(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=r7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=i7.bind(null,e),e}class jS{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=um(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return yU(this.persistence,new pU,e.initialUser,this.serializer)}createPersistence(e){return new fU(Qx.Hr,this.serializer)}createSharedClientState(e){return new bU}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class u7{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>NS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=o7.bind(null,this.syncEngine),await UU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HU}()}createDatastore(e){const n=um(e.databaseInfo.databaseId),r=function(s){return new CU(s)}(e.databaseInfo);return function(s,o,a,l){return new PU(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new DU(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>NS(this.syncEngine,n,0),function(){return AS.v()?new AS:new kU}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,d){const h=new YU(i,s,o,a,l,c);return d&&(h.Sa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=fe(n);q("RemoteStore","RemoteStore shutting down."),r.S_.add(5),await hu(r),r.D_.shutdown(),r.v_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Fa(this.observer.next,e)}error(e){this.observer.error?this.Fa(this.observer.error,e):ui("Uncaught Error in snapshot listener:",e.toString())}Ma(){this.muted=!0}Fa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Lt.UNAUTHENTICATED,this.clientId=mA.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{q("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(q("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new V(P.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=n1(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function tg(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await KA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function OS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await f7(t);q("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>RS(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>RS(e.remoteStore,s)),t._onlineComponents=e}function h7(t){return t.name==="FirebaseError"?t.code===P.FAILED_PRECONDITION||t.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function f7(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await tg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!h7(n))throw n;ka("Error using user provided cache. Falling back to memory cache: "+n),await tg(t,new jS)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await tg(t,new jS);return t._offlineComponents}async function pR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await OS(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await OS(t,new u7))),t._onlineComponents}function m7(t){return pR(t).then(e=>e.syncEngine)}async function gR(t){const e=await pR(t),n=e.eventManager;return n.onListen=JU.bind(null,e.syncEngine),n.onUnlisten=e7.bind(null,e.syncEngine),n}function p7(t,e,n={}){const r=new ni;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new mR({next:m=>{o.enqueueAndForget(()=>oR(s,h));const p=m.docs.has(a);!p&&m.fromCache?c.reject(new V(P.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&l&&l.source==="server"?c.reject(new V(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new aR(Ux(a.path),d,{includeMetadataChanges:!0,z_:!0});return sR(s,h)}(await gR(t),t.asyncQueue,e,n,r)),r.promise}function g7(t,e,n={}){const r=new ni;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new mR({next:m=>{o.enqueueAndForget(()=>oR(s,h)),m.fromCache&&l.source==="server"?c.reject(new V(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new aR(a,d,{includeMetadataChanges:!0,z_:!0});return sR(s,h)}(await gR(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(t,e,n){if(!n)throw new V(P.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function y7(t,e,n,r){if(e===!0&&r===!0)throw new V(P.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function LS(t){if(!Y.isDocumentKey(t))throw new V(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function FS(t){if(Y.isDocumentKey(t))throw new V(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se()}function ss(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fm(t);throw new V(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}y7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new V(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new V(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new V(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $S({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new V(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new V(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $S(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $B;switch(r.type){case"firstParty":return new UB(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=MS.get(n);r&&(q("ComponentProvider","Removing Datastore"),MS.delete(n),r.terminate())}(this),Promise.resolve()}}function v7(t,e,n,r={}){var i;const s=(t=ss(t,mm))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ka("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Lt.MOCK_USER;else{a=II(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new V(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Lt(c)}t._authCredentials=new zB(new fA(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ga(this.firestore,e,this._query)}}class hn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hn(this.firestore,e,this._key)}}class Qi extends Ga{constructor(e,n,r){super(e,n,Ux(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hn(this.firestore,null,new Y(e))}withConverter(e){return new Qi(this.firestore,e,this._path)}}function pm(t,e,...n){if(t=yt(t),vR("collection","path",e),t instanceof mm){const r=Le.fromString(e,...n);return FS(r),new Qi(t,null,r)}{if(!(t instanceof hn||t instanceof Qi))throw new V(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return FS(r),new Qi(t.firestore,null,r)}}function s1(t,e,...n){if(t=yt(t),arguments.length===1&&(e=mA.V()),vR("doc","path",e),t instanceof mm){const r=Le.fromString(e,...n);return LS(r),new hn(t,null,new Y(r))}{if(!(t instanceof hn||t instanceof Qi))throw new V(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return LS(r),new hn(t.firestore,t instanceof Qi?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{constructor(){this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new QA(this,"async_queue_retry"),this.tu=()=>{const n=eg();n&&q("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Uo.Lo()};const e=eg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.tu)}get isShuttingDown(){return this.Ha}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nu(),this.ru(e)}enterRestrictedMode(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;const n=eg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.tu)}}enqueue(e){if(this.nu(),this.Ha)return new Promise(()=>{});const n=new ni;return this.ru(()=>this.Ha&&this.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ja.push(e),this.iu()))}async iu(){if(this.ja.length!==0){try{await this.ja[0](),this.ja.shift(),this.Uo.reset()}catch(e){if(!lu(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.ja.length>0&&this.Uo.No(()=>this.iu())}}ru(e){const n=this.za.then(()=>(this.Za=!0,e().catch(r=>{this.Ya=r,this.Za=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ui("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Za=!1,r))));return this.za=n,n}enqueueAfterDelay(e,n,r){this.nu(),this.eu.indexOf(e)>-1&&(n=0);const i=t1.createAndSchedule(this,e,n,r,s=>this.su(s));return this.Ja.push(i),i}nu(){this.Ya&&se()}verifyOperationInProgress(){}async ou(){let e;do e=this.za,await e;while(e!==this.za)}_u(e){for(const n of this.Ja)if(n.timerId===e)return!0;return!1}au(e){return this.ou().then(()=>{this.Ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ou()})}uu(e){this.eu.push(e)}su(e){const n=this.Ja.indexOf(e);this.Ja.splice(n,1)}}class mu extends mm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new x7}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||xR(this),this._firestoreClient.terminate()}}function w7(t,e){const n=typeof t=="object"?t:sx(),r=typeof t=="string"?t:e||"(default)",i=Lf(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=bI("firestore");s&&v7(i,...s)}return i}function o1(t){return t._firestoreClient||xR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function xR(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,d){return new tV(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,yR(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new d7(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pa(qt.fromBase64String(e))}catch(n){throw new V(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pa(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _7=/^__.*__$/;class E7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new wo(e,this.data,this.fieldMask,n,this.fieldTransforms):new uu(e,this.data,n,this.fieldTransforms)}}function _R(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se()}}class c1{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.cu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get lu(){return this.settings.lu}hu(e){return new c1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.hu({path:r,Iu:!1});return i.Tu(e),i}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.hu({path:r,Iu:!1});return i.cu(),i}du(e){return this.hu({path:void 0,Iu:!0})}Au(e){return qh(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}cu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}Tu(e){if(e.length===0)throw this.Au("Document fields must not be empty");if(_R(this.lu)&&_7.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}class S7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||um(e)}mu(e,n,r,i=!1){return new c1({lu:e,methodName:n,Vu:r,path:zt.emptyPath(),Iu:!1,Ru:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ER(t){const e=t._freezeSettings(),n=um(t._databaseId);return new S7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function b7(t,e,n,r,i,s={}){const o=t.mu(s.merge||s.mergeFields?2:0,e,n,i);kR("Data must be an object, but it was:",o,r);const a=SR(r,o);let l,c;if(s.merge)l=new ir(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const m=T7(e,h,n);if(!o.contains(m))throw new V(P.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);C7(d,m)||d.push(m)}l=new ir(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new E7(new zn(a),l,c)}function k7(t,e,n,r=!1){return u1(n,t.mu(r?4:3,e))}function u1(t,e){if(bR(t=yt(t)))return kR("Unsupported field value:",e,t),SR(t,e);if(t instanceof wR)return function(r,i){if(!_R(i.lu))throw i.Au(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Au(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Iu&&e.lu!==4)throw e.Au("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=u1(a,i.du(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return EV(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=gt.fromDate(r);return{timestampValue:Wh(i.serializer,s)}}if(r instanceof gt){const s=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wh(i.serializer,s)}}if(r instanceof l1)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pa)return{bytesValue:VA(i.serializer,r._byteString)};if(r instanceof hn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Au(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Kx(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Au(`Unsupported field value: ${fm(r)}`)}(t,e)}function SR(t,e){const n={};return pA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wa(t,(r,i)=>{const s=u1(i,e.Pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function bR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof l1||t instanceof Pa||t instanceof hn||t instanceof wR)}function kR(t,e,n){if(!bR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=fm(n);throw r==="an object"?e.Au(t+" a custom object"):e.Au(t+" "+r)}}function T7(t,e,n){if((e=yt(e))instanceof a1)return e._internalPath;if(typeof e=="string")return TR(t,e);throw qh("Field path arguments must be of type string or ",t,!1,void 0,n)}const I7=new RegExp("[~\\*/\\[\\]]");function TR(t,e,n){if(e.search(I7)>=0)throw qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new a1(...e.split("."))._internalPath}catch{throw qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function qh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new V(P.INVALID_ARGUMENT,a+t+l)}function C7(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new A7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(d1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class A7 extends IR{data(){return super.data()}}function d1(t,e){return typeof e=="string"?TR(t,e):e instanceof a1?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new V(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class h1{}class P7 extends h1{}function Ka(t,e,...n){let r=[];e instanceof h1&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof f1).length,a=s.filter(l=>l instanceof gm).length;if(o>1||o>0&&a>0)throw new V(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class gm extends P7{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new gm(e,n,r)}_apply(e){const n=this._parse(e);return CR(e._query,n),new Ga(e.firestore,e.converter,cy(e._query,n))}_parse(e){const n=ER(e.firestore);return function(s,o,a,l,c,d,h){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new V(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){BS(h,d);const p=[];for(const y of h)p.push(zS(l,s,y));m={arrayValue:{values:p}}}else m=zS(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||BS(h,d),m=k7(a,o,h,d==="in"||d==="not-in");return lt.create(c,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Xa(t,e,n){const r=e,i=d1("where",t);return gm._create(i,r,n)}class f1 extends h1{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new f1(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ur.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)CR(o,l),o=cy(o,l)}(e._query,n),new Ga(e.firestore,e.converter,cy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function zS(t,e,n){if(typeof(n=yt(n))=="string"){if(n==="")throw new V(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kA(e)&&n.indexOf("/")!==-1)throw new V(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Le.fromString(n));if(!Y.isDocumentKey(r))throw new V(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return uS(t,new Y(r))}if(n instanceof hn)return uS(t,n._key);throw new V(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fm(n)}.`)}function BS(t,e){if(!Array.isArray(t)||t.length===0)throw new V(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CR(t,e){if(e.isInequality()){const r=Wx(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new V(P.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=bA(t);s!==null&&N7(t,i,s)}const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new V(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new V(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function N7(t,e,n){if(!n.isEqual(e))throw new V(P.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class D7{convertValue(e,n="none"){switch(so(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(io(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw se()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Wa(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new l1(ot(e.latitude),ot(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=$x(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ic(e));default:return null}}convertTimestamp(e){const n=rs(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Le.fromString(e);$e(GA(r));const i=new Cc(r.get(1),r.get(3)),s=new Y(r.popFirst(5));return i.isEqual(n)||ui(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j7(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class AR extends IR{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Dd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(d1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Dd extends AR{data(e={}){return super.data(e)}}class O7{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new El(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Dd(this._firestore,this._userDataWriter,r.key,r,new El(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new V(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Dd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new El(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Dd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new El(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:M7(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function M7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L7(t){t=ss(t,hn);const e=ss(t.firestore,mu);return p7(o1(e),t._key).then(n=>z7(e,t,n))}class RR extends D7{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new hn(this.firestore,null,n)}}function Qa(t){t=ss(t,Ga);const e=ss(t.firestore,mu),n=o1(e),r=new RR(e);return R7(t._query),g7(n,t._query).then(i=>new O7(e,r,t,i))}function F7(t,e,n){t=ss(t,hn);const r=ss(t.firestore,mu),i=j7(t.converter,e,n);return PR(r,[b7(ER(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Nr.none())])}function $7(t){return PR(ss(t.firestore,mu),[new Hx(t._key,Nr.none())])}function PR(t,e){return function(r,i){const s=new ni;return r.asyncQueue.enqueueAndForget(async()=>t7(await m7(r),i,s)),s.promise}(o1(t),e)}function z7(t,e,n){const r=n.docs.get(e._key),i=new RR(t);return new AR(t,i,e._key,r,new El(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ua=i})(vo),to(new ts("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new mu(new BB(r.getProvider("auth-internal")),new HB(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new V(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cc(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ar(sS,"4.1.2",e),Ar(sS,"4.1.2","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR="firebasestorage.googleapis.com",DR="storageBucket",B7=2*60*1e3,V7=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze extends zr{constructor(e,n,r=0){super(ng(e),`Firebase Storage: ${n} (${ng(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ze.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ng(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Je;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Je||(Je={}));function ng(t){return"storage/"+t}function m1(){const t="An unknown error occurred, please check the error payload for server response.";return new Ze(Je.UNKNOWN,t)}function U7(t){return new Ze(Je.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function W7(t){return new Ze(Je.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function H7(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ze(Je.UNAUTHENTICATED,t)}function q7(){return new Ze(Je.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function G7(t){return new Ze(Je.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function K7(){return new Ze(Je.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function X7(){return new Ze(Je.CANCELED,"User canceled the upload/download.")}function Q7(t){return new Ze(Je.INVALID_URL,"Invalid URL '"+t+"'.")}function Y7(t){return new Ze(Je.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function J7(){return new Ze(Je.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+DR+"' property when initializing the app?")}function Z7(){return new Ze(Je.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function eW(){return new Ze(Je.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function tW(t){return new Ze(Je.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function vy(t){return new Ze(Je.INVALID_ARGUMENT,t)}function jR(){return new Ze(Je.APP_DELETED,"The Firebase app was deleted.")}function nW(t){return new Ze(Je.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function zl(t,e){return new Ze(Je.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function dl(t){throw new Ze(Je.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Sn.makeFromUrl(e,n)}catch{return new Sn(e,"")}if(r.path==="")return r;throw Y7(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${d}/b/${i}/o${m}`,"i"),y={bucket:1,path:3},x=n===NR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",v=new RegExp(`^https?://${x}/${i}/${_}`,"i"),w=[{regex:a,indices:l,postModify:s},{regex:p,indices:y,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let E=0;E<w.length;E++){const S=w[E],T=S.regex.exec(e);if(T){const k=T[S.indices.bucket];let b=T[S.indices.path];b||(b=""),r=new Sn(k,b),S.postModify(r);break}}if(r==null)throw Q7(e);return r}}class rW{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iW(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(..._){c||(c=!0,e.apply(null,_))}function h(_){i=setTimeout(()=>{i=null,t(p,l())},_)}function m(){s&&clearTimeout(s)}function p(_,...v){if(c){m();return}if(_){m(),d.call(null,_,...v);return}if(l()||o){m(),d.call(null,_,...v);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,h(w)}let y=!1;function x(_){y||(y=!0,m(),!c&&(i!==null?(_||(a=2),clearTimeout(i),h(0)):_||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,x(!0)},n),x}function sW(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oW(t){return t!==void 0}function aW(t){return typeof t=="object"&&!Array.isArray(t)}function p1(t){return typeof t=="string"||t instanceof String}function VS(t){return g1()&&t instanceof Blob}function g1(){return typeof Blob<"u"&&!h$()}function US(t,e,n,r){if(r<e)throw vy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw vy(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function OR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Us;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Us||(Us={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lW(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cW{constructor(e,n,r,i,s,o,a,l,c,d,h,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,y)=>{this.resolve_=p,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new rd(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Us.NO_ERROR,l=s.getStatus();if(!a||lW(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Us.ABORT;r(!1,new rd(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new rd(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());oW(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=m1();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?jR():X7();o(l)}else{const l=K7();o(l)}};this.canceled_?n(!1,new rd(!1,null,!0)):this.backoffId_=iW(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&sW(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class rd{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function uW(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function dW(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function hW(t,e){e&&(t["X-Firebase-GMPID"]=e)}function fW(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function mW(t,e,n,r,i,s,o=!0){const a=OR(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return hW(c,e),uW(c,n),dW(c,s),fW(c,r),new cW(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pW(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function gW(...t){const e=pW();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(g1())return new Blob(t);throw new Ze(Je.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function yW(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vW(t){if(typeof atob>"u")throw tW("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class rg{constructor(e,n){this.data=e,this.contentType=n||null}}function xW(t,e){switch(t){case Tr.RAW:return new rg(MR(e));case Tr.BASE64:case Tr.BASE64URL:return new rg(LR(t,e));case Tr.DATA_URL:return new rg(_W(e),EW(e))}throw m1()}function MR(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function wW(t){let e;try{e=decodeURIComponent(t)}catch{throw zl(Tr.DATA_URL,"Malformed data URL.")}return MR(e)}function LR(t,e){switch(t){case Tr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw zl(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Tr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw zl(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=vW(e)}catch(i){throw i.message.includes("polyfill")?i:zl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class FR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw zl(Tr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=SW(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function _W(t){const e=new FR(t);return e.base64?LR(Tr.BASE64,e.rest):wW(e.rest)}function EW(t){return new FR(t).contentType}function SW(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n){let r=0,i="";VS(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(VS(this.data_)){const r=this.data_,i=yW(r,e,n);return i===null?null:new Ni(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ni(r,!0)}}static getBlob(...e){if(g1()){const n=e.map(r=>r instanceof Ni?r.data_:r);return new Ni(gW.apply(null,n))}else{const n=e.map(o=>p1(o)?xW(Tr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Ni(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(t){let e;try{e=JSON.parse(t)}catch{return null}return aW(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bW(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function kW(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function zR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TW(t,e){return e}class Xt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||TW}}let id=null;function IW(t){return!p1(t)||t.length<2?t:zR(t)}function BR(){if(id)return id;const t=[];t.push(new Xt("bucket")),t.push(new Xt("generation")),t.push(new Xt("metageneration")),t.push(new Xt("name","fullPath",!0));function e(s,o){return IW(o)}const n=new Xt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Xt("size");return i.xform=r,t.push(i),t.push(new Xt("timeCreated")),t.push(new Xt("updated")),t.push(new Xt("md5Hash",null,!0)),t.push(new Xt("cacheControl",null,!0)),t.push(new Xt("contentDisposition",null,!0)),t.push(new Xt("contentEncoding",null,!0)),t.push(new Xt("contentLanguage",null,!0)),t.push(new Xt("contentType",null,!0)),t.push(new Xt("metadata","customMetadata",!0)),id=t,id}function CW(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Sn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function AW(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return CW(r,t),r}function VR(t,e,n){const r=$R(e);return r===null?null:AW(t,r,n)}function RW(t,e,n,r){const i=$R(e);if(i===null||!p1(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const d=t.bucket,h=t.fullPath,m="/b/"+o(d)+"/o/"+o(h),p=ym(m,n,r),y=OR({alt:"media",token:c});return p+y})[0]}function PW(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class y1{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t){if(!t)throw m1()}function NW(t,e){function n(r,i){const s=VR(t,i,e);return UR(s!==null),s}return n}function DW(t,e){function n(r,i){const s=VR(t,i,e);return UR(s!==null),RW(s,i,t.host,t._protocol)}return n}function WR(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=q7():i=H7():n.getStatus()===402?i=W7(t.bucket):n.getStatus()===403?i=G7(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function HR(t){const e=WR(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=U7(t.path)),s.serverResponse=i.serverResponse,s}return n}function jW(t,e,n){const r=e.fullServerUrl(),i=ym(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new y1(i,s,DW(t,n),o);return a.errorHandler=HR(e),a}function OW(t,e){const n=e.fullServerUrl(),r=ym(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new y1(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=HR(e),a}function MW(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function LW(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=MW(null,e)),r}function FW(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=LW(e,r,i),d=PW(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,m=`\r
--`+l+"--",p=Ni.getBlob(h,r,m);if(p===null)throw Z7();const y={name:c.fullPath},x=ym(s,t.host,t._protocol),_="POST",v=t.maxUploadRetryTime,g=new y1(x,_,NW(t,n),v);return g.urlParams=y,g.headers=o,g.body=p.uploadData(),g.errorHandler=WR(e),g}class $W{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Us.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Us.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Us.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw dl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw dl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw dl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw dl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw dl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class zW extends $W{initXhr(){this.xhr_.responseType="text"}}function v1(){return new zW}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n){this._service=e,n instanceof Sn?this._location=n:this._location=Sn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new oo(e,n)}get root(){const e=new Sn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zR(this._location.path)}get storage(){return this._service}get parent(){const e=bW(this._location.path);if(e===null)return null;const n=new Sn(this._location.bucket,e);return new oo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw nW(e)}}function BW(t,e,n){t._throwIfRoot("uploadBytes");const r=FW(t.storage,t._location,BR(),new Ni(e,!0),n);return t.storage.makeRequestWithTokens(r,v1).then(i=>({metadata:i,ref:t}))}function VW(t){t._throwIfRoot("getDownloadURL");const e=jW(t.storage,t._location,BR());return t.storage.makeRequestWithTokens(e,v1).then(n=>{if(n===null)throw eW();return n})}function UW(t){t._throwIfRoot("deleteObject");const e=OW(t.storage,t._location);return t.storage.makeRequestWithTokens(e,v1)}function WW(t,e){const n=kW(t._location.path,e),r=new Sn(t._location.bucket,n);return new oo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HW(t){return/^[A-Za-z]+:\/\//.test(t)}function qW(t,e){return new oo(t,e)}function qR(t,e){if(t instanceof x1){const n=t;if(n._bucket==null)throw J7();const r=new oo(n,n._bucket);return e!=null?qR(r,e):r}else return e!==void 0?WW(t,e):t}function GW(t,e){if(e&&HW(e)){if(t instanceof x1)return qW(t,e);throw vy("To use ref(service, url), the first argument must be a Storage instance.")}else return qR(t,e)}function WS(t,e){const n=e==null?void 0:e[DR];return n==null?null:Sn.makeFromBucketSpec(n,t)}function KW(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:II(i,t.app.options.projectId))}class x1{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=NR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=B7,this._maxUploadRetryTime=V7,this._requests=new Set,i!=null?this._bucket=Sn.makeFromBucketSpec(i,this._host):this._bucket=WS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Sn.makeFromBucketSpec(this._url,e):this._bucket=WS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){US("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){US("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new oo(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new rW(jR());{const o=mW(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const HS="@firebase/storage",qS="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="storage";function KR(t,e,n){return t=yt(t),BW(t,e,n)}function XR(t){return t=yt(t),VW(t)}function XW(t){return t=yt(t),UW(t)}function w1(t,e){return t=yt(t),GW(t,e)}function QW(t=sx(),e){t=yt(t);const r=Lf(t,GR).getImmediate({identifier:e}),i=bI("storage");return i&&YW(r,...i),r}function YW(t,e,n,r={}){KW(t,e,n,r)}function JW(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new x1(n,r,i,e,vo)}function ZW(){to(new ts(GR,JW,"PUBLIC").setMultipleInstances(!0)),Ar(HS,qS,""),Ar(HS,qS,"esm2017")}ZW();const _1=RI({apiKey:"AIzaSyBPNpckpYiu009eSzHz_1YMlwHLtScgVjE",appId:"1:938280289868:web:1b426fc2dba5d03dde96e9",projectId:"zingmp3-clone-61799",storageBucket:"zingmp3-clone-61799.appspot.com",authDomain:"zingmp3-clone-61799.firebaseapp.com",messagingSenderId:"938280289868"}),Eo=w7(_1),os=R8(_1);new xr;const E1=QW(_1);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function QR(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function YR(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Xo=function(){return Xo=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Xo.apply(this,arguments)},JR=function(t){return{loading:t==null,value:t}},eH=function(){return function(t,e){switch(e.type){case"error":return Xo(Xo({},t),{error:e.error,loading:!1,value:void 0});case"reset":return JR(e.defaultValue);case"value":return Xo(Xo({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},tH=function(t){var e=t?t():void 0,n=f.useReducer(eH(),JR(e)),r=n[0],i=n[1],s=f.useCallback(function(){var l=t?t():void 0;i({type:"reset",defaultValue:l})},[t]),o=f.useCallback(function(l){i({type:"error",error:l})},[]),a=f.useCallback(function(l){i({type:"value",value:l})},[]);return f.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}},[r.error,r.loading,s,o,a,r.value])},pu=function(t,e){var n=tH(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,a=n.value;return f.useEffect(function(){var l=vz(t,function(c){return QR(void 0,void 0,void 0,function(){var d;return YR(this,function(h){switch(h.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return h.sent(),[3,4];case 3:return d=h.sent(),s(d),[3,4];case 4:return o(c),[2]}})})},s);return function(){l()}},[t]),[a,i,r]},nH=function(t){var e=f.useCallback(function(n,r){var i=new xr;return n&&n.forEach(function(s){return i.addScope(s)}),r&&i.setCustomParameters(r),i},[]);return rH(t,e)},rH=function(t,e){var n=f.useState(),r=n[0],i=n[1],s=f.useState(),o=s[0],a=s[1],l=f.useState(!1),c=l[0],d=l[1],h=f.useCallback(function(m,p){return QR(void 0,void 0,void 0,function(){var y,x,_;return YR(this,function(v){switch(v.label){case 0:d(!0),i(void 0),v.label=1;case 1:return v.trys.push([1,3,4,5]),y=e(m,p),[4,$z(t,y)];case 2:return x=v.sent(),a(x),[2,x];case 3:return _=v.sent(),i(_),[3,5];case 4:return d(!1),[7];case 5:return[2]}})})},[t,e]);return[h,o,c,r]},ZR={exports:{}},eP={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Na=f;function iH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sH=typeof Object.is=="function"?Object.is:iH,oH=Na.useState,aH=Na.useEffect,lH=Na.useLayoutEffect,cH=Na.useDebugValue;function uH(t,e){var n=e(),r=oH({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return lH(function(){i.value=n,i.getSnapshot=e,ig(i)&&s({inst:i})},[t,n,e]),aH(function(){return ig(i)&&s({inst:i}),t(function(){ig(i)&&s({inst:i})})},[t]),cH(n),n}function ig(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sH(t,n)}catch{return!0}}function dH(t,e){return e()}var hH=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?dH:uH;eP.useSyncExternalStore=Na.useSyncExternalStore!==void 0?Na.useSyncExternalStore:hH;ZR.exports=eP;var fH=ZR.exports,tP={exports:{}},nP={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vm=f,mH=fH;function pH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gH=typeof Object.is=="function"?Object.is:pH,yH=mH.useSyncExternalStore,vH=vm.useRef,xH=vm.useEffect,wH=vm.useMemo,_H=vm.useDebugValue;nP.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=vH(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=wH(function(){function l(p){if(!c){if(c=!0,d=p,p=r(p),i!==void 0&&o.hasValue){var y=o.value;if(i(y,p))return h=y}return h=p}if(y=h,gH(d,p))return y;var x=r(p);return i!==void 0&&i(y,x)?y:(d=p,h=x)}var c=!1,d,h,m=n===void 0?null:n;return[function(){return l(e())},m===null?void 0:function(){return l(m())}]},[e,n,r,i]);var a=yH(t,s[0],s[1]);return xH(function(){o.hasValue=!0,o.value=a},[a]),_H(a),a};tP.exports=nP;var EH=tP.exports;function SH(t){t()}let rP=SH;const bH=t=>rP=t,kH=()=>rP,GS=Symbol.for("react-redux-context"),KS=typeof globalThis<"u"?globalThis:{};function TH(){var t;if(!f.createContext)return{};const e=(t=KS[GS])!=null?t:KS[GS]=new Map;let n=e.get(f.createContext);return n||(n=f.createContext(null),e.set(f.createContext,n)),n}const as=TH();function S1(t=as){return function(){return f.useContext(t)}}const iP=S1(),IH=()=>{throw new Error("uSES not initialized!")};let sP=IH;const CH=t=>{sP=t},AH=(t,e)=>t===e;function RH(t=as){const e=t===as?iP:S1(t);return function(r,i={}){const{equalityFn:s=AH,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:l,subscription:c,getServerState:d,stabilityCheck:h,noopCheck:m}=e();f.useRef(!0);const p=f.useCallback({[r.name](x){return r(x)}}[r.name],[r,h,o]),y=sP(c.addNestedSub,l.getState,d||l.getState,p,s);return f.useDebugValue(y),y}}const K=RH();var oP={exports:{}},Ae={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kt=typeof Symbol=="function"&&Symbol.for,b1=kt?Symbol.for("react.element"):60103,k1=kt?Symbol.for("react.portal"):60106,xm=kt?Symbol.for("react.fragment"):60107,wm=kt?Symbol.for("react.strict_mode"):60108,_m=kt?Symbol.for("react.profiler"):60114,Em=kt?Symbol.for("react.provider"):60109,Sm=kt?Symbol.for("react.context"):60110,T1=kt?Symbol.for("react.async_mode"):60111,bm=kt?Symbol.for("react.concurrent_mode"):60111,km=kt?Symbol.for("react.forward_ref"):60112,Tm=kt?Symbol.for("react.suspense"):60113,PH=kt?Symbol.for("react.suspense_list"):60120,Im=kt?Symbol.for("react.memo"):60115,Cm=kt?Symbol.for("react.lazy"):60116,NH=kt?Symbol.for("react.block"):60121,DH=kt?Symbol.for("react.fundamental"):60117,jH=kt?Symbol.for("react.responder"):60118,OH=kt?Symbol.for("react.scope"):60119;function On(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case b1:switch(t=t.type,t){case T1:case bm:case xm:case _m:case wm:case Tm:return t;default:switch(t=t&&t.$$typeof,t){case Sm:case km:case Cm:case Im:case Em:return t;default:return e}}case k1:return e}}}function aP(t){return On(t)===bm}Ae.AsyncMode=T1;Ae.ConcurrentMode=bm;Ae.ContextConsumer=Sm;Ae.ContextProvider=Em;Ae.Element=b1;Ae.ForwardRef=km;Ae.Fragment=xm;Ae.Lazy=Cm;Ae.Memo=Im;Ae.Portal=k1;Ae.Profiler=_m;Ae.StrictMode=wm;Ae.Suspense=Tm;Ae.isAsyncMode=function(t){return aP(t)||On(t)===T1};Ae.isConcurrentMode=aP;Ae.isContextConsumer=function(t){return On(t)===Sm};Ae.isContextProvider=function(t){return On(t)===Em};Ae.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===b1};Ae.isForwardRef=function(t){return On(t)===km};Ae.isFragment=function(t){return On(t)===xm};Ae.isLazy=function(t){return On(t)===Cm};Ae.isMemo=function(t){return On(t)===Im};Ae.isPortal=function(t){return On(t)===k1};Ae.isProfiler=function(t){return On(t)===_m};Ae.isStrictMode=function(t){return On(t)===wm};Ae.isSuspense=function(t){return On(t)===Tm};Ae.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===xm||t===bm||t===_m||t===wm||t===Tm||t===PH||typeof t=="object"&&t!==null&&(t.$$typeof===Cm||t.$$typeof===Im||t.$$typeof===Em||t.$$typeof===Sm||t.$$typeof===km||t.$$typeof===DH||t.$$typeof===jH||t.$$typeof===OH||t.$$typeof===NH)};Ae.typeOf=On;oP.exports=Ae;var MH=oP.exports,lP=MH,LH={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},FH={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},cP={};cP[lP.ForwardRef]=LH;cP[lP.Memo]=FH;var Pe={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I1=Symbol.for("react.element"),C1=Symbol.for("react.portal"),Am=Symbol.for("react.fragment"),Rm=Symbol.for("react.strict_mode"),Pm=Symbol.for("react.profiler"),Nm=Symbol.for("react.provider"),Dm=Symbol.for("react.context"),$H=Symbol.for("react.server_context"),jm=Symbol.for("react.forward_ref"),Om=Symbol.for("react.suspense"),Mm=Symbol.for("react.suspense_list"),Lm=Symbol.for("react.memo"),Fm=Symbol.for("react.lazy"),zH=Symbol.for("react.offscreen"),uP;uP=Symbol.for("react.module.reference");function Kn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case I1:switch(t=t.type,t){case Am:case Pm:case Rm:case Om:case Mm:return t;default:switch(t=t&&t.$$typeof,t){case $H:case Dm:case jm:case Fm:case Lm:case Nm:return t;default:return e}}case C1:return e}}}Pe.ContextConsumer=Dm;Pe.ContextProvider=Nm;Pe.Element=I1;Pe.ForwardRef=jm;Pe.Fragment=Am;Pe.Lazy=Fm;Pe.Memo=Lm;Pe.Portal=C1;Pe.Profiler=Pm;Pe.StrictMode=Rm;Pe.Suspense=Om;Pe.SuspenseList=Mm;Pe.isAsyncMode=function(){return!1};Pe.isConcurrentMode=function(){return!1};Pe.isContextConsumer=function(t){return Kn(t)===Dm};Pe.isContextProvider=function(t){return Kn(t)===Nm};Pe.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===I1};Pe.isForwardRef=function(t){return Kn(t)===jm};Pe.isFragment=function(t){return Kn(t)===Am};Pe.isLazy=function(t){return Kn(t)===Fm};Pe.isMemo=function(t){return Kn(t)===Lm};Pe.isPortal=function(t){return Kn(t)===C1};Pe.isProfiler=function(t){return Kn(t)===Pm};Pe.isStrictMode=function(t){return Kn(t)===Rm};Pe.isSuspense=function(t){return Kn(t)===Om};Pe.isSuspenseList=function(t){return Kn(t)===Mm};Pe.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Am||t===Pm||t===Rm||t===Om||t===Mm||t===zH||typeof t=="object"&&t!==null&&(t.$$typeof===Fm||t.$$typeof===Lm||t.$$typeof===Nm||t.$$typeof===Dm||t.$$typeof===jm||t.$$typeof===uP||t.getModuleId!==void 0)};Pe.typeOf=Kn;function BH(){const t=kH();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=e;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:e=s,function(){!i||e===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}const XS={notify(){},get:()=>[]};function VH(t,e){let n,r=XS;function i(h){return l(),r.subscribe(h)}function s(){r.notify()}function o(){d.onStateChange&&d.onStateChange()}function a(){return!!n}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=BH())}function c(){n&&(n(),n=void 0,r.clear(),r=XS)}const d={addNestedSub:i,notifyNestedSubs:s,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:c,getListeners:()=>r};return d}const UH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",WH=UH?f.useLayoutEffect:f.useEffect;function HH({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",noopCheck:s="once"}){const o=f.useMemo(()=>{const c=VH(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:s}},[t,r,i,s]),a=f.useMemo(()=>t.getState(),[t]);WH(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||as;return f.createElement(l.Provider,{value:o},n)}function dP(t=as){const e=t===as?iP:S1(t);return function(){const{store:r}=e();return r}}const qH=dP();function GH(t=as){const e=t===as?qH:dP(t);return function(){return e().dispatch}}const Ke=GH();CH(EH.useSyncExternalStoreWithSelector);bH(mo.unstable_batchedUpdates);function rr(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ls(t){return!!t&&!!t[ze]}function fi(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===tq}(t)||Array.isArray(t)||!!t[nb]||!!(!((e=t.constructor)===null||e===void 0)&&e[nb])||A1(t)||R1(t))}function ao(t,e,n){n===void 0&&(n=!1),Ya(t)===0?(n?Object.keys:la)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,i){return e(i,r,t)})}function Ya(t){var e=t[ze];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:A1(t)?2:R1(t)?3:0}function aa(t,e){return Ya(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function KH(t,e){return Ya(t)===2?t.get(e):t[e]}function hP(t,e,n){var r=Ya(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function fP(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function A1(t){return ZH&&t instanceof Map}function R1(t){return eq&&t instanceof Set}function Cs(t){return t.o||t.t}function P1(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=pP(t);delete e[ze];for(var n=la(e),r=0;r<n.length;r++){var i=n[r],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function N1(t,e){return e===void 0&&(e=!1),D1(t)||ls(t)||!fi(t)||(Ya(t)>1&&(t.set=t.add=t.clear=t.delete=XH),Object.freeze(t),e&&ao(t,function(n,r){return N1(r,!0)},!0)),t}function XH(){rr(2)}function D1(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function jr(t){var e=Sy[t];return e||rr(18,t),e}function QH(t,e){Sy[t]||(Sy[t]=e)}function xy(){return Nc}function sg(t,e){e&&(jr("Patches"),t.u=[],t.s=[],t.v=e)}function Gh(t){wy(t),t.p.forEach(YH),t.p=null}function wy(t){t===Nc&&(Nc=t.l)}function QS(t){return Nc={p:[],l:Nc,h:t,m:!0,_:0}}function YH(t){var e=t[ze];e.i===0||e.i===1?e.j():e.g=!0}function og(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||jr("ES5").S(e,t,r),r?(n[ze].P&&(Gh(e),rr(4)),fi(t)&&(t=Kh(e,t),e.l||Xh(e,t)),e.u&&jr("Patches").M(n[ze].t,t,e.u,e.s)):t=Kh(e,n,[]),Gh(e),e.u&&e.v(e.u,e.s),t!==mP?t:void 0}function Kh(t,e,n){if(D1(e))return e;var r=e[ze];if(!r)return ao(e,function(a,l){return YS(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return Xh(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=P1(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),ao(s,function(a,l){return YS(t,r,i,a,l,n,o)}),Xh(t,i,!1),n&&t.u&&jr("Patches").N(r,n,t.u,t.s)}return r.o}function YS(t,e,n,r,i,s,o){if(ls(i)){var a=Kh(t,i,s&&e&&e.i!==3&&!aa(e.R,r)?s.concat(r):void 0);if(hP(n,r,a),!ls(a))return;t.m=!1}else o&&n.add(i);if(fi(i)&&!D1(i)){if(!t.h.D&&t._<1)return;Kh(t,i),e&&e.A.l||Xh(t,i)}}function Xh(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&N1(e,n)}function ag(t,e){var n=t[ze];return(n?Cs(n):t)[e]}function JS(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Di(t){t.P||(t.P=!0,t.l&&Di(t.l))}function lg(t){t.o||(t.o=P1(t.t))}function _y(t,e,n){var r=A1(e)?jr("MapSet").F(e,n):R1(e)?jr("MapSet").T(e,n):t.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:xy(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,c=Dc;o&&(l=[a],c=Sl);var d=Proxy.revocable(l,c),h=d.revoke,m=d.proxy;return a.k=m,a.j=h,m}(e,n):jr("ES5").J(e,n);return(n?n.A:xy()).p.push(r),r}function Ey(t){return ls(t)||rr(22,t),function e(n){if(!fi(n))return n;var r,i=n[ze],s=Ya(n);if(i){if(!i.P&&(i.i<4||!jr("ES5").K(i)))return i.t;i.I=!0,r=ZS(n,s),i.I=!1}else r=ZS(n,s);return ao(r,function(o,a){i&&KH(i.t,o)===a||hP(r,o,e(a))}),s===3?new Set(r):r}(t)}function ZS(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return P1(t)}function JH(){function t(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var l=this[ze];return Dc.get(l,s)},set:function(l){var c=this[ze];Dc.set(c,s,l)}},a}function e(s){for(var o=s.length-1;o>=0;o--){var a=s[o][ze];if(!a.P)switch(a.i){case 5:r(a)&&Di(a);break;case 4:n(a)&&Di(a)}}}function n(s){for(var o=s.t,a=s.k,l=la(a),c=l.length-1;c>=0;c--){var d=l[c];if(d!==ze){var h=o[d];if(h===void 0&&!aa(o,d))return!0;var m=a[d],p=m&&m[ze];if(p?p.t!==h:!fP(m,h))return!0}}var y=!!o[ze];return l.length!==la(o).length+(y?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var i={};QH("ES5",{J:function(s,o){var a=Array.isArray(s),l=function(d,h){if(d){for(var m=Array(h.length),p=0;p<h.length;p++)Object.defineProperty(m,""+p,t(p,!0));return m}var y=pP(h);delete y[ze];for(var x=la(y),_=0;_<x.length;_++){var v=x[_];y[v]=t(v,d||!!y[v].enumerable)}return Object.create(Object.getPrototypeOf(h),y)}(a,s),c={i:a?5:4,A:o?o.A:xy(),P:!1,I:!1,R:{},l:o,t:s,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,ze,{value:c,writable:!0}),l},S:function(s,o,a){a?ls(o)&&o[ze].A===s&&e(s.p):(s.u&&function l(c){if(c&&typeof c=="object"){var d=c[ze];if(d){var h=d.t,m=d.k,p=d.R,y=d.i;if(y===4)ao(m,function(w){w!==ze&&(h[w]!==void 0||aa(h,w)?p[w]||l(m[w]):(p[w]=!0,Di(d)))}),ao(h,function(w){m[w]!==void 0||aa(m,w)||(p[w]=!1,Di(d))});else if(y===5){if(r(d)&&(Di(d),p.length=!0),m.length<h.length)for(var x=m.length;x<h.length;x++)p[x]=!1;else for(var _=h.length;_<m.length;_++)p[_]=!0;for(var v=Math.min(m.length,h.length),g=0;g<v;g++)m.hasOwnProperty(g)||(p[g]=!0),p[g]===void 0&&l(m[g])}}}}(s.p[0]),e(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var eb,Nc,j1=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",ZH=typeof Map<"u",eq=typeof Set<"u",tb=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",mP=j1?Symbol.for("immer-nothing"):((eb={})["immer-nothing"]=!0,eb),nb=j1?Symbol.for("immer-draftable"):"__$immer_draftable",ze=j1?Symbol.for("immer-state"):"__$immer_state",tq=""+Object.prototype.constructor,la=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,pP=Object.getOwnPropertyDescriptors||function(t){var e={};return la(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},Sy={},Dc={get:function(t,e){if(e===ze)return t;var n=Cs(t);if(!aa(n,e))return function(i,s,o){var a,l=JS(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(t,n,e);var r=n[e];return t.I||!fi(r)?r:r===ag(t.t,e)?(lg(t),t.o[e]=_y(t.A.h,r,t)):r},has:function(t,e){return e in Cs(t)},ownKeys:function(t){return Reflect.ownKeys(Cs(t))},set:function(t,e,n){var r=JS(Cs(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=ag(Cs(t),e),s=i==null?void 0:i[ze];if(s&&s.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(fP(n,i)&&(n!==void 0||aa(t.t,e)))return!0;lg(t),Di(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return ag(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,lg(t),Di(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Cs(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){rr(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){rr(12)}},Sl={};ao(Dc,function(t,e){Sl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Sl.deleteProperty=function(t,e){return Sl.set.call(this,t,e,void 0)},Sl.set=function(t,e,n){return Dc.set.call(this,t[0],e,n,t[0])};var nq=function(){function t(n){var r=this;this.O=tb,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=r;return function(x){var _=this;x===void 0&&(x=a);for(var v=arguments.length,g=Array(v>1?v-1:0),w=1;w<v;w++)g[w-1]=arguments[w];return l.produce(x,function(E){var S;return(S=s).call.apply(S,[_,E].concat(g))})}}var c;if(typeof s!="function"&&rr(6),o!==void 0&&typeof o!="function"&&rr(7),fi(i)){var d=QS(r),h=_y(r,i,void 0),m=!0;try{c=s(h),m=!1}finally{m?Gh(d):wy(d)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(x){return sg(d,o),og(x,d)},function(x){throw Gh(d),x}):(sg(d,o),og(c,d))}if(!i||typeof i!="object"){if((c=s(i))===void 0&&(c=i),c===mP&&(c=void 0),r.D&&N1(c,!0),o){var p=[],y=[];jr("Patches").M(i,c,p,y),o(p,y)}return c}rr(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(c){for(var d=arguments.length,h=Array(d>1?d-1:0),m=1;m<d;m++)h[m-1]=arguments[m];return r.produceWithPatches(c,function(p){return i.apply(void 0,[p].concat(h))})};var o,a,l=r.produce(i,s,function(c,d){o=c,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){fi(n)||rr(8),ls(n)&&(n=Ey(n));var r=QS(this),i=_y(this,n,void 0);return i[ze].C=!0,wy(r),i},e.finishDraft=function(n,r){var i=n&&n[ze],s=i.A;return sg(s,r),og(void 0,s)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!tb&&rr(20),this.O=n},e.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=jr("Patches").$;return ls(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),An=new nq,gP=An.produce;An.produceWithPatches.bind(An);An.setAutoFreeze.bind(An);An.setUseProxies.bind(An);An.applyPatches.bind(An);An.createDraft.bind(An);An.finishDraft.bind(An);function jc(t){"@babel/helpers - typeof";return jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jc(t)}function rq(t,e){if(jc(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(jc(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iq(t){var e=rq(t,"string");return jc(e)==="symbol"?e:String(e)}function sq(t,e,n){return e=iq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ib(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rb(Object(n),!0).forEach(function(r){sq(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var sb=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),cg=function(){return Math.random().toString(36).substring(7).split("").join(".")},Qh={INIT:"@@redux/INIT"+cg(),REPLACE:"@@redux/REPLACE"+cg(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+cg()}};function oq(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function yP(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Mt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Mt(1));return n(yP)(t,e)}if(typeof t!="function")throw new Error(Mt(2));var i=t,s=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function d(){if(l)throw new Error(Mt(3));return s}function h(x){if(typeof x!="function")throw new Error(Mt(4));if(l)throw new Error(Mt(5));var _=!0;return c(),a.push(x),function(){if(_){if(l)throw new Error(Mt(6));_=!1,c();var g=a.indexOf(x);a.splice(g,1),o=null}}}function m(x){if(!oq(x))throw new Error(Mt(7));if(typeof x.type>"u")throw new Error(Mt(8));if(l)throw new Error(Mt(9));try{l=!0,s=i(s,x)}finally{l=!1}for(var _=o=a,v=0;v<_.length;v++){var g=_[v];g()}return x}function p(x){if(typeof x!="function")throw new Error(Mt(10));i=x,m({type:Qh.REPLACE})}function y(){var x,_=h;return x={subscribe:function(g){if(typeof g!="object"||g===null)throw new Error(Mt(11));function w(){g.next&&g.next(d())}w();var E=_(w);return{unsubscribe:E}}},x[sb]=function(){return this},x}return m({type:Qh.INIT}),r={dispatch:m,subscribe:h,getState:d,replaceReducer:p},r[sb]=y,r}function aq(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:Qh.INIT});if(typeof r>"u")throw new Error(Mt(12));if(typeof n(void 0,{type:Qh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Mt(13))})}function lq(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];typeof t[i]=="function"&&(n[i]=t[i])}var s=Object.keys(n),o;try{aq(n)}catch(a){o=a}return function(l,c){if(l===void 0&&(l={}),o)throw o;for(var d=!1,h={},m=0;m<s.length;m++){var p=s[m],y=n[p],x=l[p],_=y(x,c);if(typeof _>"u")throw c&&c.type,new Error(Mt(14));h[p]=_,d=d||_!==x}return d=d||s.length!==Object.keys(l).length,d?h:l}}function Yh(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function cq(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Mt(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return s=Yh.apply(void 0,a)(i.dispatch),ib(ib({},i),{},{dispatch:s})}}}function vP(t){var e=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,t):o(a)}}};return e}var xP=vP();xP.withExtraArgument=vP;const ob=xP;var wP=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),uq=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Da=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},dq=Object.defineProperty,hq=Object.defineProperties,fq=Object.getOwnPropertyDescriptors,ab=Object.getOwnPropertySymbols,mq=Object.prototype.hasOwnProperty,pq=Object.prototype.propertyIsEnumerable,lb=function(t,e,n){return e in t?dq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},Yi=function(t,e){for(var n in e||(e={}))mq.call(e,n)&&lb(t,n,e[n]);if(ab)for(var r=0,i=ab(e);r<i.length;r++){var n=i[r];pq.call(e,n)&&lb(t,n,e[n])}return t},ug=function(t,e){return hq(t,fq(e))},gq=function(t,e,n){return new Promise(function(r,i){var s=function(l){try{a(n.next(l))}catch(c){i(c)}},o=function(l){try{a(n.throw(l))}catch(c){i(c)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(s,o)};a((n=n.apply(t,e)).next())})},yq=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Yh:Yh.apply(null,arguments)};function vq(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var xq=function(t){wP(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Da([void 0],n[0].concat(this)))):new(e.bind.apply(e,Da([void 0],n.concat(this))))},e}(Array),wq=function(t){wP(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Da([void 0],n[0].concat(this)))):new(e.bind.apply(e,Da([void 0],n.concat(this))))},e}(Array);function by(t){return fi(t)?gP(t,function(){}):t}function _q(t){return typeof t=="boolean"}function Eq(){return function(e){return Sq(e)}}function Sq(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new xq;return n&&(_q(n)?r.push(ob):r.push(ob.withExtraArgument(n.extraArgument))),r}var bq=!0;function kq(t){var e=Eq(),n=t||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?e():s,a=n.devTools,l=a===void 0?!0:a,c=n.preloadedState,d=c===void 0?void 0:c,h=n.enhancers,m=h===void 0?void 0:h,p;if(typeof i=="function")p=i;else if(vq(i))p=lq(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var y=o;typeof y=="function"&&(y=y(e));var x=cq.apply(void 0,y),_=Yh;l&&(_=yq(Yi({trace:!bq},typeof l=="object"&&l)));var v=new wq(x),g=v;Array.isArray(m)?g=Da([x],m):typeof m=="function"&&(g=m(v));var w=_.apply(void 0,g);return yP(p,d,w)}function Ji(t,e){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e){var s=e.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return Yi(Yi({type:t,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function _P(t){var e={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return t(i),[e,n,r]}function Tq(t){return typeof t=="function"}function Iq(t,e,n,r){n===void 0&&(n=[]);var i=typeof e=="function"?_P(e):[e,n,r],s=i[0],o=i[1],a=i[2],l;if(Tq(t))l=function(){return by(t())};else{var c=by(t);l=function(){return c}}function d(h,m){h===void 0&&(h=l());var p=Da([s[m.type]],o.filter(function(y){var x=y.matcher;return x(m)}).map(function(y){var x=y.reducer;return x}));return p.filter(function(y){return!!y}).length===0&&(p=[a]),p.reduce(function(y,x){if(x)if(ls(y)){var _=y,v=x(_,m);return v===void 0?y:v}else{if(fi(y))return gP(y,function(g){return x(g,m)});var v=x(y,m);if(v===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return y},h)}return d.getInitialState=l,d}function Cq(t,e){return t+"/"+e}function $m(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:by(t.initialState),r=t.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(d){var h=r[d],m=Cq(e,d),p,y;"reducer"in h?(p=h.reducer,y=h.prepare):p=h,s[d]=p,o[m]=p,a[d]=y?Ji(m,y):Ji(m)});function l(){var d=typeof t.extraReducers=="function"?_P(t.extraReducers):[t.extraReducers],h=d[0],m=h===void 0?{}:h,p=d[1],y=p===void 0?[]:p,x=d[2],_=x===void 0?void 0:x,v=Yi(Yi({},m),o);return Iq(n,function(g){for(var w in v)g.addCase(w,v[w]);for(var E=0,S=y;E<S.length;E++){var T=S[E];g.addMatcher(T.matcher,T.reducer)}_&&g.addDefaultCase(_)})}var c;return{name:e,reducer:function(d,h){return c||(c=l()),c(d,h)},actions:a,caseReducers:s,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var Aq="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Rq=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=Aq[Math.random()*64|0];return e},Pq=["name","message","stack","code"],dg=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),cb=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),Nq=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=Pq;n<r.length;n++){var i=r[n];typeof t[i]=="string"&&(e[i]=t[i])}return e}return{message:String(t)}};(function(){function t(e,n,r){var i=Ji(e+"/fulfilled",function(c,d,h,m){return{payload:c,meta:ug(Yi({},m||{}),{arg:h,requestId:d,requestStatus:"fulfilled"})}}),s=Ji(e+"/pending",function(c,d,h){return{payload:void 0,meta:ug(Yi({},h||{}),{arg:d,requestId:c,requestStatus:"pending"})}}),o=Ji(e+"/rejected",function(c,d,h,m,p){return{payload:m,error:(r&&r.serializeError||Nq)(c||"Rejected"),meta:ug(Yi({},p||{}),{arg:h,requestId:d,rejectedWithValue:!!m,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(d,h,m){var p=r!=null&&r.idGenerator?r.idGenerator(c):Rq(),y=new a,x;function _(g){x=g,y.abort()}var v=function(){return gq(this,null,function(){var g,w,E,S,T,k,b;return uq(this,function(D){switch(D.label){case 0:return D.trys.push([0,4,,5]),S=(g=r==null?void 0:r.condition)==null?void 0:g.call(r,c,{getState:h,extra:m}),jq(S)?[4,S]:[3,2];case 1:S=D.sent(),D.label=2;case 2:if(S===!1||y.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(I,L){return y.signal.addEventListener("abort",function(){return L({name:"AbortError",message:x||"Aborted"})})}),d(s(p,c,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:p,arg:c},{getState:h,extra:m}))),[4,Promise.race([T,Promise.resolve(n(c,{dispatch:d,getState:h,extra:m,requestId:p,signal:y.signal,abort:_,rejectWithValue:function(I,L){return new dg(I,L)},fulfillWithValue:function(I,L){return new cb(I,L)}})).then(function(I){if(I instanceof dg)throw I;return I instanceof cb?i(I.payload,p,c,I.meta):i(I,p,c)})])];case 3:return E=D.sent(),[3,5];case 4:return k=D.sent(),E=k instanceof dg?o(null,p,c,k.payload,k.meta):o(k,p,c),[3,5];case 5:return b=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,b||d(E),[2,E]}})})}();return Object.assign(v,{abort:_,requestId:p,arg:c,unwrap:function(){return v.then(Dq)}})}}return Object.assign(l,{pending:s,rejected:o,fulfilled:i,typePrefix:e})}return t.withTypes=function(){return t},t})();function Dq(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function jq(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var O1="listenerMiddleware";Ji(O1+"/add");Ji(O1+"/removeAll");Ji(O1+"/remove");var ub;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);JH();const Oq=ti();let Mq=Oq.current||{...ex({}),currentIndex:0,song_in:""};const Lq={currentSong:Mq},EP=$m({name:"currentSong",initialState:Lq,reducers:{setSong(t,e){t.currentSong=e.payload},updateSong:(t,e)=>{const n=e.payload;Object.assign(t.currentSong,n)},resetCurrentSong:t=>{t.currentSong={...ex({}),currentIndex:0,song_in:""}}}}),Ne=t=>t.currentSong,{setSong:Gn,resetCurrentSong:lo,updateSong:HQ}=EP.actions,Fq=EP.reducer,$q=ti(),zq={queueSongs:$q.queue||[],from:[]},SP=$m({name:"songQueue",initialState:zq,reducers:{setQueue:(t,e)=>{const{songs:n}=e.payload;t.queueSongs=n,t.from=[n[0].song_in],Jt("queue",t.queueSongs)},removeSongFromQueue:(t,e)=>{const{index:n}=e.payload;t.queueSongs.splice(n,1),Jt("queue",t.queueSongs);const r=[];t.queueSongs.forEach(i=>{r.includes(i.song_in)||r.push(i.song_in)}),t.from=r},addSongToQueue:(t,e)=>{const{songs:n}=e.payload;t.from.includes(n[0].song_in)||t.from.push(n[0].song_in),t.queueSongs.push(...n),Jt("queue",t.queueSongs)},updateSongInQueue:(t,e)=>{const{song:n}=e.payload,r=t.queueSongs.findIndex(i=>i.id===n.id);Object.assign(t.queueSongs[r],n)},resetSongQueue:t=>{t.queueSongs=[],Jt("queue",[])}}}),gi=t=>t.songQueue,{addSongToQueue:M1,updateSongInQueue:qQ,removeSongFromQueue:Bq,setQueue:zm,resetSongQueue:bP}=SP.actions,Vq=SP.reducer,kP={user:null,loading:!0},Uq=(t,e)=>{switch(e.type){case 0:return{user:e.payload.user,loading:!1};case 1:return{user:null,loading:!0};default:return{user:t.user,loading:t.loading}}},Wq={state:{user:kP.user,loading:!0},setUser:()=>{}},TP=f.createContext(Wq),Hq=()=>{const[t,e]=f.useReducer(Uq,kP),n=f.useCallback(r=>{switch(r.type){case"set-user":return console.log("set user"),e({type:0,payload:{user:r.user}});case"reset":return console.log("reset user"),e({type:1,payload:{user:null}})}},[]);return{state:{loading:t.loading,user:t.user},setUser:n}},qq=({children:t})=>{const{state:{loading:e,user:n},setUser:r}=Hq();return u.jsx(TP.Provider,{value:{state:{loading:e,user:n},setUser:r},children:t})},dt=()=>{const{state:{loading:t,user:e},setUser:n}=f.useContext(TP);return{loading:t,user:e,setUser:n}},gu=()=>{const t=fn(),e=Ke(),{setUser:n}=dt(),{resetSongPlaylistStore:r}=ut(),[i]=nH(os),s=()=>{document.querySelector(".hd-mp3").pause(),e(lo())};return{logOut:async()=>{await ZI(os),n({type:"reset"}),e(bP()),r(),s(),t(At.Home)},logIn:async()=>{await i()&&(e(lo()),r(),n({type:"reset"}))}}},Gq={toasts:[]},Kq={state:Gq,setToasts:()=>{},setErrorToast:()=>{},setSuccessToast:()=>{}},IP=f.createContext(Kq),Xq=({children:t})=>{const[e,n]=f.useState([]),r=({message:s="Somethings went wrong"})=>n(o=>[...o,{title:"error",id:_h(4),desc:s}]),i=({message:s="Success"})=>n(o=>[...o,{title:"success",id:_h(4),desc:`${s}`}]);return u.jsx(IP.Provider,{value:{state:{toasts:e},setToasts:n,setErrorToast:r,setSuccessToast:i},children:t})},mn=()=>{const{state:{toasts:t},setToasts:e,setErrorToast:n,setSuccessToast:r}=f.useContext(IP);return{toasts:t,setToasts:e,setErrorToast:n,setSuccessToast:r}},CP={tempSongs:[],status:""},Qq=(t,e)=>{switch(e.type){case 0:{const{songs:n}=e.payload;return{...t,tempSongs:n,status:"uploading"}}case 1:{const n=[...t.tempSongs];return n.shift(),{...t,tempSongs:n}}case 2:{const{status:n}=e.payload;return{...t,tempSongs:[],status:n}}}},Yq=()=>{const[t,e]=f.useReducer(Qq,CP),n=f.useCallback(s=>{e({type:0,payload:{songs:s}})},[]),r=f.useCallback(()=>{e({type:1})},[]),i=f.useCallback(s=>{e({type:2,payload:{status:s}})},[]);return{state:t,setTempSongs:n,shiftSong:r,clearTempSongs:i}},Jq={state:CP,setTempSongs:()=>{},shiftSong:()=>{},clearTempSongs:()=>{}},AP=f.createContext(Jq),Zq=({children:t})=>u.jsx(AP.Provider,{value:Yq(),children:t}),Bm=()=>{const{state:{...t},...e}=f.useContext(AP);return{...e,...t}},Oc=async({collection:t,id:e,msg:n})=>{await $7(s1(Eo,t,e))},ja=async({collection:t,id:e,msg:n})=>L7(s1(Eo,t,e)),Wn=async({collection:t,id:e,data:n,msg:r})=>await F7(s1(Eo,t,e),{...n},{merge:!0}),RP=async({file:t,folder:e,email:n,msg:r})=>{const i=n.replace("@gmail.com","")+"_"+t.name.replaceAll(" ","").toLowerCase(),s=w1(E1,`${e+i}`),o=await KR(s,t);return{fileURL:await XR(o.ref),filePath:o.metadata.fullPath}},eG=async({blob:t,folder:e,songId:n,msg:r})=>{const i=n+"_stock",s=w1(E1,`${e+i}`),o=await KR(s,t);return{fileURL:await XR(o.ref),filePath:o.metadata.fullPath}},ky=async({filePath:t,msg:e})=>{const n=w1(E1,t);await XW(n)},PP=async t=>{await Oc({collection:"songs",id:t.id,msg:">>> api: delete song doc"}),await ky({filePath:t.song_file_path,msg:">>> api: delete song file"}),t.lyric_id&&await Oc({collection:"lyrics",id:t.lyric_id,msg:">>> api: delete song lyric doc"}),t.image_file_path&&await ky({filePath:t.image_file_path,msg:">>> api: delete song's image file"})},db=async(t,e)=>{const n=t.map(r=>r.id);await Wn({collection:"users",data:{playlist_ids:n},id:e.email,msg:">>> api: set user playlist_ids"})},hg={currentPlaylist:tx({}),playlistSongs:[]},NP=$m({name:"currentPlaylist",initialState:hg,reducers:{setCurrentPlaylist(t,e){const{playlist:n,songs:r}=e.payload;t.currentPlaylist=n,t.playlistSongs=r},updateCurrentPlaylist:(t,e)=>{const n=e.payload;Object.assign(t.currentPlaylist,n)},addSongsAndUpdateCurrent(t,e){const{songs:n}=e.payload,r=n.map(i=>({...i,song_in:`playlist_${t.currentPlaylist.id}`}));console.log("current",Ey(t.playlistSongs).map(i=>i.id)),console.log("add playlist songs",n.map(i=>i.id)),t.playlistSongs.push(...r),t.currentPlaylist.song_ids.push(...n.map(i=>i.id))},setPlaylistSongs(t,e){const{songs:n}=e.payload;t.playlistSongs=n},removeSong(t,e){const{index:n}=e.payload;t.playlistSongs.splice(n,1)},setPlaylistSongsAndUpdateCurrent(t,e){const{songs:n}=e.payload;console.log("current",Ey(t.playlistSongs).map(r=>r.id)),console.log("set playlist songs",n.map(r=>r.id)),t.playlistSongs=n,t.currentPlaylist.song_ids=n.map(r=>r.id)},resetCurrentPlaylist:t=>{t.currentPlaylist=hg.currentPlaylist,t.playlistSongs=hg.playlistSongs}}}),yi=t=>t.currentPlaylist,{addSongsAndUpdateCurrent:tG,removeSong:GQ,setCurrentPlaylist:nG,updateCurrentPlaylist:Bl,resetCurrentPlaylist:L1,setPlaylistSongs:hb,setPlaylistSongsAndUpdateCurrent:fb}=NP.actions,rG=NP.reducer;function So(){const t=Ke(),{user:e}=dt(),{currentPlaylist:n,playlistSongs:r}=K(yi),{currentSong:i}=K(Ne),{userPlaylists:s,updateUserPlaylist:o,setUserPlaylists:a}=ut(),[l,c]=f.useState(!1),{setErrorToast:d,setSuccessToast:h}=mn(),m=fn(),p=async S=>{await Wn({collection:"playlist",data:S,id:S.id,msg:">>> api: set playlist doc"}),o(S)},y=async S=>{if(!e)throw new Error("user not found");if(!S)throw new Error("playlist name invalid");const T=Zv(S),k=tx({id:T,by:e.email,name:S});c(!0);const b=[...s,k];await Wn({collection:"playlist",data:k,id:T,msg:">>> api: set playlist doc"}),await db(b,e),a(b),c(!1)},x=async()=>{if(!e)return;c(!0);const S=s.filter(T=>T.id!==n.id);await Oc({collection:"playlist",id:n.id,msg:">>> api: delete playlist doc"}),await db(S,e),a(S),t(L1()),i.song_in===`playlist_${n.id}`&&t(lo()),c(!1),m("/mysongs")},_=async S=>{c(!0);const T={...n};if(T.song_ids=[...n.song_ids,...S.map(k=>k.id)],await p(T),console.log(">>> playlist songs",r.length),t(tG({songs:S})),i.song_in===`playlist_${n.id}`){const k=S.map(b=>({...b,song_in:`playlist_${n.id}`}));t(M1({songs:k}))}c(!1),h({message:`${S.length} songs added`})},v=async(S,T)=>{try{c(!0);const k={...T,name:S};await p(k),t(Bl(k)),h({message:"Playlist edited"})}catch(k){throw console.log(k),new Error("Error when edit playlist")}finally{c(!1)}},g=async(S,T)=>{try{c(!0);const k=[...T.song_ids,S.id],b={...T};b.song_ids=k,T.id===n.id&&t(Bl({song_ids:k})),await p(b)}catch(k){throw console.log({message:k}),new Error("Error when edit playlist")}finally{c(!1)}},w=async S=>{c(!0);const T=r.filter(b=>b.id!==S.id);console.log("delete songs",r.map(b=>b.id),T.map(b=>b.id));const k={...n};k.song_ids=T.map(b=>b.id),await p(k),t(fb({songs:T})),c(!1),h({message:`'${S.name}' removed`})};return{isFetching:l,addPlaylist:y,editPlaylist:v,deletePlaylist:x,addSongsToPlaylist:_,deleteSongsFromPlaylist:async S=>{if(console.log("playlist action deleteManyFromPlaylist"),!n.song_ids)throw console.log("Wrong playlist data"),d({}),new Error("Wrong playlist data");if(S.length===1)return w(S[0]);const T=S.map(D=>D.id),k=r.filter(D=>!T.includes(D.id)),b={...n};return b.song_ids=k.map(D=>D.id),c(!0),await p(b),t(fb({songs:k})),c(!1),h({message:`${S.length} songs removed`}),k},deleteSongFromPlaylist:w,addSongToPlaylistSongItem:g,setPlaylistDocAndUpdateUserPlaylist:p}}function iG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M10 17a.75.75 0 01-.75-.75V5.612L5.29 9.77a.75.75 0 01-1.08-1.04l5.25-5.5a.75.75 0 011.08 0l5.25 5.5a.75.75 0 11-1.08 1.04l-3.96-4.158V16.25A.75.75 0 0110 17z",clipRule:"evenodd"}))}const sG=f.forwardRef(iG),oG=sG;function aG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10zm0 5.25a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75z",clipRule:"evenodd"}))}const lG=f.forwardRef(aG),cG=lG;function uG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z",clipRule:"evenodd"}))}const dG=f.forwardRef(uG),Ty=dG;function hG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"}))}const fG=f.forwardRef(hG),mG=fG;function pG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"}))}const gG=f.forwardRef(pG),DP=gG;function yG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"}))}const vG=f.forwardRef(yG),xG=vG;function wG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M7.84 1.804A1 1 0 018.82 1h2.36a1 1 0 01.98.804l.331 1.652a6.993 6.993 0 011.929 1.115l1.598-.54a1 1 0 011.186.447l1.18 2.044a1 1 0 01-.205 1.251l-1.267 1.113a7.047 7.047 0 010 2.228l1.267 1.113a1 1 0 01.206 1.25l-1.18 2.045a1 1 0 01-1.187.447l-1.598-.54a6.993 6.993 0 01-1.929 1.115l-.33 1.652a1 1 0 01-.98.804H8.82a1 1 0 01-.98-.804l-.331-1.652a6.993 6.993 0 01-1.929-1.115l-1.598.54a1 1 0 01-1.186-.447l-1.18-2.044a1 1 0 01.205-1.251l1.267-1.114a7.05 7.05 0 010-2.227L1.821 7.773a1 1 0 01-.206-1.25l1.18-2.045a1 1 0 011.187-.447l1.598.54A6.993 6.993 0 017.51 3.456l.33-1.652zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"}))}const _G=f.forwardRef(wG),EG=_G;function SG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M4.5 2A1.5 1.5 0 003 3.5v13A1.5 1.5 0 004.5 18h11a1.5 1.5 0 001.5-1.5V7.621a1.5 1.5 0 00-.44-1.06l-4.12-4.122A1.5 1.5 0 0011.378 2H4.5zm2.25 8.5a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5zm0 3a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5z",clipRule:"evenodd"}))}const bG=f.forwardRef(SG),kG=bG;function TG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"}))}const IG=f.forwardRef(TG),CG=IG;function ys({close:t,title:e}){return u.jsxs("div",{className:"flex justify-between mb-3",children:[u.jsx("div",{className:"text-xl leading-[2.2] font-playwriteCU",children:e}),u.jsx("button",{onClick:t,children:u.jsx(CG,{className:"w-7"})})]})}function AG({closeModal:t,playlistSongs:e}){const{theme:n}=Z(),{selectedSongs:r}=qc(),{userSongs:i}=ut(),{addSongsToPlaylist:s,isFetching:o}=So(),a={addSongContainer:"pb-[40px] relative",addSongContent:"max-h-[calc(60vh)] w-[700px] max-w-[80vw] overflow-auto"},l=f.useMemo(()=>!!r.length,[r]),c=async()=>{try{if(!r.length)return;await s(r)}catch(d){console.log({message:d})}finally{close()}};return u.jsxs("div",{className:a.addSongContainer,children:[u.jsx(ys,{close:t,title:"Add song to playlist"}),u.jsxs("div",{className:a.addSongContent,children:[u.jsxs(G,{onClick:c,variant:"primary",isLoading:o,className:`rounded-full ${n.content_bg} absolute bottom-0 right-[15px] min-w-[34px] h-[32px] ${!l&&"disable"}`,children:["Add",`${r.length?` (${r.length})`:""}`]}),i.length?i.map((d,h)=>{if(e.findIndex(p=>p.id===d.id)===-1)return u.jsx(xI,{song:d,variant:"select",theme:n},h)}):u.jsx("p",{children:"No song jet..."})]})]})}function jP({children:t,active:e,done:n,inUpload:r,className:i,scrollBehavior:s}){const o=f.useRef(null),a=()=>{const l=o.current;l&&(l.scrollIntoView({behavior:s.current,block:"center"}),s.current==="instant"&&(s.current="smooth"))};return f.useEffect(()=>{e&&a()},[e]),u.jsxs("p",{ref:o,className:`lyric ${i&&i} ${r?"text-[16px]":""}  select-none  max-[549px]:text-center font-bold ${n&&"opacity-40"} ${r?"flex":""} ${e&&!r?"text-[#ffed00]":""}`,children:[t,r&&e&&u.jsx("span",{className:"ml-[10px] text-[16px]"})]})}const RG=()=>{const t=ti();return{playStatus:{isError:!1,isPlaying:!1,isWaiting:!1,lyricSize:t.lyricSize||"medium",isLoaded:!0,isRepeat:t.isRepeat||"no",isShuffle:t.isShuffle||!1,isCrossFade:t.isCrossFade||!1,songBackground:t.songBackground||!1,songImage:t.songImage||!1}}},OP=$m({name:"playStatus",initialState:()=>RG(),reducers:{setPlayStatus(t,e){t.playStatus={...t.playStatus,...e.payload}},togglePlayControl(t,e){const{variant:n}=e.payload;switch(n){default:if(typeof t.playStatus[n]=="boolean"){const r=!t.playStatus[n];t.playStatus[n]=r,Jt(n,r)}}}}}),dr=t=>t.playStatus,{setPlayStatus:Zn,togglePlayControl:mb}=OP.actions,PG=OP.reducer;function NG({handlePlayPause:t}){const{playStatus:{isError:e,isPlaying:n,isWaiting:r}}=K(dr),{currentSong:i}=K(Ne),s={icon:"w-[50px] sm:w-10"},o=f.useMemo(()=>r?u.jsx(Qs,{className:`${s.icon} animate-spin`}):e&&i.name?u.jsx(Dv,{className:`${s.icon}`}):n?u.jsx(jv,{className:`${s.icon}`}):u.jsx(Ov,{className:`${s.icon}`}),[r,e,n,i]);return u.jsx(u.Fragment,{children:u.jsx("button",{className:`p-1 ${r&&"pointer-events-none"} inline-flex items-center justify-center`,onClick:()=>t(),children:o})})}const pb=f.memo(NG);function MP({bgRef:t,currentSong:e}){const{playStatus:{songBackground:n}}=K(dr);f.useEffect(()=>{if(n&&e.image_url){const r=t.current;r&&(r.style.backgroundImage=`url(${e.image_url})`)}},[e,n]),f.useEffect(()=>{if(!n){const r=t.current;r&&(r.style.backgroundImage="none")}},[n])}function DG({audioEle:t,isOpenFullScreen:e}){const{currentSong:n}=K(Ne),{playStatus:{isError:r}}=K(dr),[i,s]=f.useState({id:"",base:"",real_time:[]}),[o,a]=f.useState(!1),[l,c]=f.useState(!1),d=f.useRef(),h=async()=>{a(!0);try{const p=await ja({collection:"lyrics",id:n.lyric_id,msg:">>> api: get lyric doc"});if(p.exists()){const y=p.data();s(y)}}catch{console.log("[error] get lyric error")}finally{a(!1)}},m=()=>{clearTimeout(d.current),c(!1),a(!0),s({base:"",real_time:[],id:""})};return f.useEffect(()=>{const p=async()=>{console.log("song loaded"),c(!0)};return t&&t.addEventListener("loadeddata",p),()=>{t&&t.removeEventListener("loadeddata",p)}},[]),f.useEffect(()=>{if(!n.lyric_id&&l){a(!1);return}i.real_time.length||l&&e&&(d.current=setTimeout(()=>{h()},500))},[l,e]),f.useEffect(()=>{if(r){a(!1);return}return()=>{m()}},[n,r]),{songLyric:i,loading:o}}const LP=(t,e)=>{const[n,r]=f.useState(()=>JSON.parse(localStorage.getItem("HD-MP3")||"{}")[t]||e);return f.useEffect(()=>{const i=JSON.parse(localStorage.getItem("HD-MP3")||"{}");i[t]=n,localStorage.setItem("HD-MP3",JSON.stringify(i))},[n]),[n,r]};function jG(){const t=Ke(),{currentPlaylist:e,playlistSongs:n}=K(yi),r=bf(),{setErrorToast:i}=mn(),s=f.useRef(!1),[o,a]=f.useState(!0),l=async()=>{if(!r.id)throw new Error("invalid playlist id");const h=await ja({collection:"playlist",id:r.id,msg:">>> api get playlist"});if(h.exists())return h.data()},c=async h=>{if(!h.song_ids.length)return[];console.log(">>> api: get playlist songs",h.song_ids);const m=pm(Eo,"songs"),p=Ka(m,Xa("id","in",h.song_ids)),y=await Qa(p);return y.docs.length?y.docs.map(_=>({..._.data(),song_in:`playlist_${h.id}`})):(h.song_ids.length&&i({}),[])},d=async()=>{try{if(!r.id)throw new Error("invalid playlist id");let h;const m=e.id===r.id;if(a(!0),m?h=e:h=await l(),!h)throw new Error("playlist not found");const p=await c(h);m||t(nG({playlist:h,songs:p})),t(hb({songs:p}))}catch(h){console.log({message:h}),i({})}finally{a(!1)}};return f.useEffect(()=>{s.current||(s.current=!0,console.log("run init"),d())},[]),{isFetching:o,setPlaylistSongs:hb,playlistSongs:n,currentPlaylist:e}}function OG(){const t=Ke(),{currentPlaylist:e}=K(yi),{isFetching:n,playlistSongs:r}=jG(),i=async()=>{const o=r.find(l=>l.image_url);if(!o||e.image_url&&e.image_url===o.image_url)return;const a={...e,image_url:o.image_url,blurhash_encode:o.blurhash_encode||""};await Wn({collection:"playlist",id:e.id,data:a,msg:">>> api: update playlist doc"}),t(Bl({image_url:o.image_url}))},s=async()=>{if(console.log(e.song_ids.length,r.length),!e.song_ids.length){if(e.image_url){const l={...e,image_url:"",blurhash_encode:""};await Wn({collection:"playlist",id:e.id,data:l,msg:">>> api: update playlist doc"})}t(Bl({image_url:"",blurhash_encode:""}));return}if(e.song_ids.length===r.length)return;const o=r.map(l=>l.id),a={...e,song_ids:o};await Wn({collection:"playlist",id:e.id,data:a,msg:">>> api: update playlist doc"}),t(Bl({song_ids:o}))};return f.useEffect(()=>{n||!r.length||!e||i()},[r,n]),f.useEffect(()=>{n||e&&s()},[n]),{playlistSongs:r,loading:n}}const FP=()=>{window.dispatchEvent(new Event("mousemove"))},$P=(t,e,n=!1)=>{const r=window.innerWidth;if(!t||!e){console.log("ele not found");return}const s=t.getBoundingClientRect().left,o=r-(s+t.offsetWidth),a=Math.abs(Math.ceil(s-o))/2;if(a<5)return!1;n&&(e.onscroll=()=>{},setTimeout(()=>{e.onscroll=FP},900)),n||Math.abs(s)>r||Math.abs(o)>r?e.style.scrollBehavior="auto":e.style.scrollBehavior="smooth";let l=e.scrollLeft;return o>s?setTimeout(()=>{e.scrollLeft=l-a},300):o<s&&setTimeout(()=>{e.scrollLeft=l+a},300),!0};function MG({containerRef:t,songItemRef:e,isOpenFullScreen:n,idle:r}){const{currentSong:i}=K(Ne),s=()=>{const o=e==null?void 0:e.current,a=t==null?void 0:t.current;$P(o,a,r)};f.useEffect(()=>{if(n){if(!scroll||!(t!=null&&t.current)||!(e!=null&&e.current)){console.log("lack props");return}i.name&&n&&s()}},[i,n]),f.useEffect(()=>{const o=t==null?void 0:t.current;if(o)return o.onscroll=FP,()=>{o.onscroll=()=>{}}},[])}function LG({textRef:t,textWrapperRef:e,content:n}){const r=f.useRef(),i=f.useRef(),s=f.useRef(!1),o=f.useRef(0),a=f.useRef(0),l=f.useRef(0),c=()=>{t.current&&(t.current.style.transition="none",t.current.style.transform="translateX(0)")},d=()=>{t.current&&(t.current.style.transition=`transform linear ${a.current}s`,t.current.style.transform=`translateX(-${l.current}px)`,i.current=setTimeout(c,a.current*1e3))},h=()=>{!t.current||!e.current||(l.current=t.current.offsetWidth-o.current,a.current=Math.ceil(l.current/35))},m=()=>{!s.current||!t.current||!e.current||(a.current=0,l.current=0,s.current=!1,clearInterval(r.current),clearTimeout(i.current),e.current.classList.remove("mask-image-horizontal"),c())},p=()=>{!t.current||!e.current||!n||!(t.current.offsetWidth>e.current.offsetWidth)||(s.current=!0,e.current.classList.add("mask-image-horizontal"),o.current=t.current.clientWidth,t.current.innerHTML=t.current.innerText+"&nbsp; &nbsp; &nbsp;"+t.current.innerText,h(),setTimeout(d,1e3),r.current=setInterval(d,a.current*1e3+3e3))};f.useEffect(()=>(p(),m),[n])}const FG=({song:t,closeModal:e,setIsOpenPopup:n})=>{const r=Ke(),{setErrorToast:i,setSuccessToast:s}=mn(),{currentSong:o}=K(Ne),{userSongs:a,setUserSongs:l}=ut(),[c,d]=f.useState(!1),{addSongToPlaylistSongItem:h,deleteSongFromPlaylist:m}=So();return{updateAndSetUserSongs:f.useCallback(async({song:g})=>{let w=[...a];const E=w.indexOf(g);w.splice(E,1);const S=w.map(T=>T.id);if(w.length!==a.length)return l(w),S},[a]),handleDeleteSong:async()=>{try{d(!0);let g=[...a];const w=g.indexOf(t);g.splice(w,1),await PP(t),l(g),o.id===t.id&&r(lo()),s({message:`'${t.name}' deleted`})}catch(g){throw console.log({message:g}),new Error("Error when delete song")}finally{d(!1),e()}},handleAddSongToPlaylistMobile:async g=>{try{d(!0),await h(t,g),s({message:`'${t.name}' added to '${g.name}'`})}catch(w){throw console.log(w),new Error("Error when add song to playlist")}finally{d(!1),e()}},handleRemoveSongFromPlaylist:async()=>{try{d(!0),await m(t)}catch(g){throw console.log({message:g}),new Error("Error when remove song from playlist")}finally{d(!1),n(!1)}},handleAddSongToPlaylist:async g=>{if(!t||!g){i({message:"Lack of props"});return}try{d(!0),await h(t,g),s({message:`'${t.name}' added to '${g.name}'`})}catch(w){throw console.log(w),new Error("Error when add song to playlist")}finally{d(!1),n(!1)}},loading:c}},Ls={isDev:!1,focusDelay:3e3,scrollSongDelay:4e3,loadingDuration:200},zP=pm(Eo,"songs"),BP=pm(Eo,"playlist"),$G=async()=>{const t=Ka(zP,Xa("by","==","admin")),e=await Qa(t);if(e.docs)return e.docs.map(r=>({...r.data(),song_in:"admin"}))},zG=async()=>{const t=Ka(BP,Xa("by","==","admin")),e=await Qa(t);if(e.docs)return e.docs.map(r=>r.data())},BG=async t=>{const e=Ka(BP,Xa("by","==",t.email)),n=await Qa(e);if(n.docs.length)return n.docs.map(i=>i.data())},VG=async t=>{const e=Ka(zP,Xa("by","==",t.email)),n=await Qa(e);if(n.docs.length)return n.docs.map(i=>({...i.data(),song_in:"user"}))},UG=async t=>{const e={userSongs:[],userPlaylists:[]},n=await VG(t);n!=null&&n.length&&(e.userSongs=n);const r=await BG(t);return r!=null&&r.length&&(e.userPlaylists=r),e},WG=[{song_file_path:"songs/huudat01234560_cloud9-itrotobu-3522118.mpga",size:4300,song_in:"admin",lyric_id:"",singer:"Itro, Tobu",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fcloud9_5smE_admin_stock?alt=media&token=cd1f3afe-0c29-462f-ad17-b28b95b6e903",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_cloud9-itrotobu-3522118.mpga?alt=media&token=2184079b-1183-4d89-ab40-792ce60f9db5",image_file_path:"images/cloud9_5smE_admin_stock",id:"cloud9_5smE_admin",duration:276,blurhash_encode:"U9L;1{%200t600xaXNxt0JR*?ExZ01R*~AoL",name:"Cloud 9",by:"admin"},{song_in:"admin",blurhash_encode:"UF9QO,sSImR$N+kDjroMDzkEt9oh=}WARka#",duration:172,image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fcreepextended_5T-X_admin_stock?alt=media&token=1aa0e0e5-0371-400e-a3c9-3d091c3e138c",singer:"GAMPER & DADONI",song_file_path:"songs/huudat01234560_creepextended-gamperdadoni-8177347(mp3cut.net).mp3",name:"Creep",id:"creepextended_5T-X_admin",lyric_id:"creepextended_5T-X_admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_creepextended-gamperdadoni-8177347(mp3cut.net).mp3?alt=media&token=afbbff42-29de-4509-84c4-f8c1d8b55c0a",by:"admin",image_file_path:"images/creepextended_5T-X_admin_stock",size:2910},{by:"admin",size:3230,duration:207,image_file_path:"",id:"diviners_exqv_admin",lyric_id:"",name:"Diviners",song_in:"admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_diviners-savannahphillyk-4271809.mpga?alt=media&token=0a2bab43-8fe1-42fe-9991-3d798f4bd46e",song_file_path:"songs/huudat01234560_diviners-savannahphillyk-4271809.mpga",singer:"Savannah, Philly K",image_url:"",blurhash_encode:""},{image_file_path:"",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_gizmo-syncole-6046197.mpga?alt=media&token=eed274e0-5716-47fc-a020-872a14c2fa6d",singer:"Syn Cole",blurhash_encode:"",name:"Gizmo",by:"admin",image_url:"",size:3007,song_file_path:"songs/huudat01234560_gizmo-syncole-6046197.mpga",lyric_id:"",id:"gizmo_VMF2_admin",duration:191,song_in:"admin"},{id:"goodtimeowlcitycarlyraejepsen49b6mpga_vxSV_admin",blurhash_encode:"UID9|+tR%MM{?^-pt7RjyDV@e.WB00IoWBof",song_file_path:"songs/huudat01234560_goodtime-owlcity-carlyraejepsen_49b6.mpga",singer:"OwlCity, CarlyRaeJepsen",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_goodtime-owlcity-carlyraejepsen_49b6.mpga?alt=media&token=0fd9fd15-5f09-4e95-a101-32c648827723",by:"admin",duration:208,image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fgoodtimeowlcitycarlyraejepsen49b6mpga_vxSV_admin_stock?alt=media&token=55478c10-9a5e-4b02-a0e3-d9cf53136f51",song_in:"admin",lyric_id:"goodtimeowlcitycarlyraejepsen49b6mpga_vxSV_admin",image_file_path:"images/goodtimeowlcitycarlyraejepsen49b6mpga_vxSV_admin_stock",size:3235,name:"GoodTime"},{image_file_path:"images/heybrother_-8jG_admin_stock",by:"admin",size:3987,singer:"Avicii",duration:256,lyric_id:"heybrother_-8jG_admin",name:"Hey Brother",song_file_path:"songs/huudat01234560_heybrother-avicii-3044424.mpga",song_in:"admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_heybrother-avicii-3044424.mpga?alt=media&token=dba0759f-6762-47f4-9899-d6494a6fab15",blurhash_encode:"U98#7;X7Ntbb00oyt7oz~qWBoLbG00oLjZof",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fheybrother_-8jG_admin_stock?alt=media&token=bbbc1aa3-7f52-4d60-9773-2f3f7818cd01",id:"heybrother_-8jG_admin"},{song_in:"admin",lyric_id:"",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fhope_AI6Q_admin_stock?alt=media&token=9f282ea4-69c7-42f2-bba3-a232c9e7e194",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_hope-tobu-3117457.mpga?alt=media&token=e1bfc470-a344-4505-b177-4ef96991b3fc",image_file_path:"images/hope_AI6Q_admin_stock",singer:"Tobu",duration:289,name:"Hope",by:"admin",size:4506,song_file_path:"songs/huudat01234560_hope-tobu-3117457.mpga",id:"hope_AI6Q_admin",blurhash_encode:"UEBiHzyG00sVt:VWaioy00Mz^~WVIXtQnhRj"},{duration:220,image_file_path:"images/itaintme_8IYS_admin_stock",lyric_id:"itaintme_8IYS_admin",name:"It Ain't Me",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fitaintme_8IYS_admin_stock?alt=media&token=023ee525-6d9e-44ce-90b7-60b88c08a505",singer:"Kygo,Selena Gomez",size:3664,song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_itaintme-kygoselenagomez-5817724.mpga?alt=media&token=4328f6fc-3b04-490b-a37e-00c9ce8718d8",id:"itaintme_8IYS_admin",by:"admin",song_file_path:"songs/huudat01234560_itaintme-kygoselenagomez-5817724.mpga",blurhash_encode:"U26Qe$KN5i}Y0|IpxH^j0x^P-W0zn7S_OTE2",song_in:"admin"},{id:"lethergo_QrJg_admin",image_file_path:"images/lethergo_QrJg_admin_stock",by:"admin",song_in:"admin",song_file_path:"songs/huudat01234560_lethergo-passenger-3719556.mpga",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Flethergo_QrJg_admin_stock?alt=media&token=11c785b1-534f-4314-882e-9599b0dec8e4",size:3892,duration:250,blurhash_encode:"URBND:-;xZRSt:bxS4ja07E7NItPqtn4nQbb",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_lethergo-passenger-3719556.mpga?alt=media&token=7cbaf060-cc4f-4970-9967-5876943a7ced",lyric_id:"lethergo_QrJg_admin",singer:"Passenger",name:"Let Her Go"},{singer:"Alec Benjamin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_letmedownslowly-alecbenjamin-6360069.mpga?alt=media&token=966e502f-6f95-4615-a961-08a95f5bab43",by:"admin",song_in:"admin",duration:170,image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fletmedownslowly_KFip_admin_stock?alt=media&token=f6c875c3-335b-4195-abea-e8d065c0d50b",blurhash_encode:"UhK,EXv|-VNG}@V@RPbcNZo#I;WqxCWBN{jY",lyric_id:"letmedownslowly_KFip_admin",size:2883,name:"Let Me Down Slowly",id:"letmedownslowly_KFip_admin",song_file_path:"songs/huudat01234560_letmedownslowly-alecbenjamin-6360069.mpga",image_file_path:"images/letmedownslowly_KFip_admin_stock"},{singer:"Lost Sky, ft. Sara Skinner",name:"Dreams ",song_in:"admin",image_file_path:"images/lostskydreamsptiifeatsaraskinner_RXI2_admin_stock",by:"admin",size:3600,blurhash_encode:"UHD%%%JoF^Jm|wNcE#a#J--BNtxF1ubF,Wwd",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Flostskydreamsptiifeatsaraskinner_RXI2_admin_stock?alt=media&token=0dc0a53a-e457-4bda-b4cd-ac71e1852145",song_file_path:"songs/huudat01234560_p4fh9nm1y1.mpga",lyric_id:"",id:"lostskydreamsptiifeatsaraskinner_RXI2_admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_p4fh9nm1y1.mpga?alt=media&token=f7a7ad35-e4d2-4387-8319-2688fabd9282",duration:216},{name:"Perfect",song_in:"admin",blurhash_encode:"UY9,tJRQyZRQn-V[oJWBpKaeROkBbIWBfikB",song_file_path:"songs/huudat01234560_perfect-edsheeran-5208784.mpga",id:"perfectedsheeran5208784mpga_wOSF_admin",duration:264,image_file_path:"images/perfectedsheeran5208784mpga_wOSF_admin_stock",size:4117,song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_perfect-edsheeran-5208784.mpga?alt=media&token=3c953332-727a-4846-aace-93a18882de2b",lyric_id:"perfectedsheeran5208784mpga_wOSF_admin",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fperfectedsheeran5208784mpga_wOSF_admin_stock?alt=media&token=11e8ee8b-5c3e-426c-8301-3ac87451654a",by:"admin",singer:"EdSheeran"},{image_file_path:"images/stealmygirl_nhcW_admin_stock",lyric_id:"stealmygirl_nhcW_admin",song_in:"admin",name:"Steal My Girl",blurhash_encode:"UOHw}rNaVYae_Nt7R+M|^*RjWBoLofofs:WB",singer:"One Direction",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fstealmygirl_nhcW_admin_stock?alt=media&token=c4a6cc9b-c92c-497b-a76f-a557d1647bc7",song_file_path:"songs/huudat01234560_stealmygirl-onedirection-5434790.mpga",size:3772,by:"admin",duration:227,id:"stealmygirl_nhcW_admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_stealmygirl-onedirection-5434790.mpga?alt=media&token=41b6f6b9-5961-42bd-a7e3-d5764ba4dcae"},{song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_sugar--3330663.mpga?alt=media&token=c7fe9b02-a189-4721-9ed9-ebd96618f291",by:"admin",blurhash_encode:"UkE{P7jFNwf6T#WVsTbHxcjZoLjZO=bIWWbH",image_file_path:"images/sugar_H5zA_admin_stock",song_file_path:"songs/huudat01234560_sugar--3330663.mpga",id:"sugar_H5zA_admin",singer:"Maroon 5",lyric_id:"sugar_H5zA_admin",size:3681,name:"Sugar",duration:236,image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fsugar_H5zA_admin_stock?alt=media&token=833833b1-d54d-4c50-8f24-e290de179191",song_in:"admin"},{singer:"Consoul Trainin",image_file_path:"images/takemetoinfinityconsoultrainin_Nkiw_admin_stock",song_in:"admin",song_file_path:"songs/huudat01234560_takemetoinfinity-consoultrainin-4723303.mpga",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Ftakemetoinfinityconsoultrainin_Nkiw_admin_stock?alt=media&token=04ecc734-f3fc-4b0d-b08b-456b29fd4c55",lyric_id:"takemetoinfinityconsoultrainin_Nkiw_admin",duration:208,by:"admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_takemetoinfinity-consoultrainin-4723303.mpga?alt=media&token=045f8984-8de7-4baa-9414-23386de5e0f9",name:"Take Me To Infinity",blurhash_encode:"UBDy@My5yqsE8|OlO9og.ivVm-kpKZWYizaK",size:3248,id:"takemetoinfinityconsoultrainin_Nkiw_admin"},{image_file_path:"images/thecalling_eRwo_admin_stock",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_thecalling-thefatratlaurabrehm-4391253.mpga?alt=media&token=779e3253-e60d-46d3-9a3f-f924752178f4",lyric_id:"",song_file_path:"songs/huudat01234560_thecalling-thefatratlaurabrehm-4391253.mpga",id:"thecalling_eRwo_admin",blurhash_encode:"UKE3b*WrDiMx00n#t7t7~WWCbbo#OHjFRPRj",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fthecalling_eRwo_admin_stock?alt=media&token=97909f54-8b4a-422a-84e9-4a1724ba0bd8",singer:"TheFatRat, Laura Brehm",duration:234,name:"The Calling",song_in:"admin",size:3651,by:"admin"},{image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Ftimber_NNe3_admin_stock?alt=media&token=dd80433d-dd6c-4cab-999b-7a66ac64d907",lyric_id:"timber_NNe3_admin",blurhash_encode:"ULNTg+XT00D*~WE2xat8D*WBIAM|~XxuIUax",id:"timber_NNe3_admin",duration:204,song_in:"admin",image_file_path:"images/timber_NNe3_admin_stock",name:"Timber",size:3265,singer:"Pitbull feat. Ke",by:"admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_timber-pitbullfeatkeha-6629607.mpga?alt=media&token=09e07118-f611-41d1-8ad1-d97a353dd2a8",song_file_path:"songs/huudat01234560_timber-pitbullfeatkeha-6629607.mpga"},{image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fyoui_DhYr_admin_stock?alt=media&token=ae005e9b-21d4-4c40-839d-a75fe81f6504",size:3954,singer:"One Direction",duration:238,song_file_path:"songs/huudat01234560_youi-onedirection-8438574.mpga",song_in:"admin",by:"admin",name:"You & I",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_youi-onedirection-8438574.mpga?alt=media&token=707a3005-6630-4f62-a8ed-96cc0895159f",id:"youi_DhYr_admin",image_file_path:"images/youi_DhYr_admin_stock",lyric_id:"youi_DhYr_admin",blurhash_encode:"UeI;|=M{JPs-?wn%a1WB%hsTs:bHMyt7R*ni"}],HG=[{image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fcloud9_5smE_admin_stock?alt=media&token=cd1f3afe-0c29-462f-ad17-b28b95b6e903",name:"NCS",by:"admin",id:"test_RVt4_admin",blurhash_encode:"U9L;1{%200t600xaXNxt0JR*?ExZ01R*~AoL",song_ids:["hope_AI6Q_admin","thecalling_eRwo_admin","lostskydreamsptiifeatsaraskinner_RXI2_admin","cloud9_5smE_admin","diviners_exqv_admin"]}];function Vm({admin:t}){const{setErrorToast:e}=mn(),{user:n,loading:r}=dt(),{initial:i,initSongsContext:s}=ut(),[o,a]=f.useState(""),[l,c]=f.useState(!0),d=m=>{c(!1),a(m),e({message:"Use song error"})},h=async()=>{try{if(Ls.isDev){await Sh(Ls.loadingDuration),s({adminSongs:WG,adminPlaylists:HG});return}const m=await $G(),p=await zG();if(console.log("check admin songs",m),console.log("check admin playlists",p),t){s({userSongs:m,userPlaylists:p}),console.log("admin",p,m),c(!1);return}if(!n)await Sh(Ls.loadingDuration),s({adminSongs:m,adminPlaylists:p});else{const y=await UG(n);s({...y,adminSongs:m,adminPlaylists:p})}}catch(m){console.log({message:m}),d("init song error")}finally{c(!1)}};return f.useEffect(()=>{if(r)return c(!0);if(i){console.log("Already init"),setTimeout(()=>c(!1),Ls.loadingDuration);return}else{h();return}},[r]),{initial:i,loading:l,errorMsg:o,initSongsAndPlaylists:h}}function qG({admin:t,inputRef:e}){const{user:n}=dt(),{isDev:r}=Z(),{userSongs:i,addUserSongs:s}=ut(),{currentSong:o}=K(Ne),{setTempSongs:a,tempSongs:l,clearTempSongs:c,shiftSong:d,status:h}=Bm(),m=f.useRef([]),p=f.useRef([]),y=f.useRef(!1),{setErrorToast:x,setSuccessToast:_,setToasts:v}=mn(),g=E=>{if(!e.current)return;const S=e.current;S&&(S.value="",p.current=[]),c(E)},w=f.useCallback(async E=>{if(!n)return x({message:"Missing user data"});c("uploading");const T=E.target.files;if(!T.length){c("finish");return}let k=ex({by:t?"admin":n.email,song_in:t?"admin":"user"}),b=[];const D=Date.now(),I=L=>i.some(W=>W.singer===L.singer&&W.name===L.name&&W.size===L.size)||b.some(W=>W.singer===L.singer&&W.name===L.name&&W.size===L.size);try{let L;for(L=0;L<=T.length-1;L++){const F=T[L],te=await CF(F);if(!te){x({message:"Error when parser song"}),g("finish-error");return}let ue={...k,name:te.name,singer:te.singer,duration:Math.floor(te.duration),size:Math.floor(F.size/1024)};if(I(ue)){console.log(">>>duplicate"),y.current=!0,m.current.push(ue);continue}b.push(ue),p.current=[...p.current,L]}if(i.length+p.current.length>5&&n.role!=="ADMIN"){g("finish-error"),x({message:"You have reach the upload limit"});return}if(!b.length){y.current=!1,g("finish-error"),x({message:"Duplicate song"});return}a(b);for(let F=0;F<p.current.length;F++){const te=p.current[F];let ue=Zv(b[F].name);t&&(ue+="_admin");const J={...b[F]},{filePath:ke,fileURL:j}=await RP({file:T[te],folder:"/songs/",email:n.email,msg:">>> api: upload song file"});Object.assign(J,{id:ue,song_file_path:ke,song_url:j}),await Wn({collection:"songs",data:J,id:J.id,msg:">>> api: set song doc"}),s([J]),d(),r&&console.log(J.name,"uploaded")}p.current=[],y.current?(g("finish-error"),v(F=>[...F,{id:_h(4),title:"warning",desc:"Song duplicate"}])):(g("finish"),_({message:`${b.length} songs uploaded`}));const W=Date.now();r&&console.log(">>> upload songs finished after",(W-D)/1e3);return}catch(L){console.log({message:L}),g("finish-error"),x({});return}},[n,i,o.song_in]);return f.useEffect(()=>{const E=document.querySelector(".temp-song");E&&E.scrollIntoView({behavior:"smooth",block:"center"})},[l]),{handleInputChange:w}}function GG(t,e){const{theme:n}=Z(),[r,i]=f.useState(!1),[s,o]=LP("volume",1),a=d=>{const m=d.target.getBoundingClientRect(),p=t.current;if(p){let y=+((d.clientX-m.x)/p.clientWidth).toFixed(2);y>.9?y=1:y<.05?(y=0,i(!0)):i(!1),o(y)}},l=d=>{d.preventDefault();const h=.1;let m=s;d.deltaY>0?m-h>0?m-=h:m=0:m+h<1?m+=h:m=1,o(+m.toFixed(2))},c=()=>i(!r);return f.useEffect(()=>{if(t.current&&e){const d=s*100;t.current.style.background=`linear-gradient(to right, ${n.content_code} ${d}%, #e1e1e1 ${d}%, #e1e1e1 100%)`,e.volume=s,i(s===0)}},[s,n]),f.useEffect(()=>{e&&(e.muted=r)},[r]),{volume:s,handleSetVolume:a,isMute:r,handleMute:c,handleWheel:l}}const KG=/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;function XG({data:t,inputFields:e,imageURLFromLocal:n}){const[r,i]=f.useState(!!t.name),[s,o]=f.useState(!!t.singer),[a,l]=f.useState(!1),[c,d]=f.useState(!1),[h,m]=f.useState(!1);return f.useEffect(()=>{e.name?i(!0):i(!1)},[e.name]),f.useEffect(()=>{e.singer?o(!0):o(!1)},[e.singer]),f.useEffect(()=>{if(!e.image_url){l(!0);return}const p=KG.test(e.image_url);l(p)},[e.image_url]),f.useEffect(()=>{(e.name!==t.name||e.singer!==t.singer||e.image_url)&&m(!0)},[e,n]),f.useEffect(()=>{d(r&&s&&a&&h)},[r,s,a,h]),{validName:r,validSinger:s,validURL:a,isAbleToSubmit:c,isChangeInEdit:h,setValidURL:l}}const QG=async t=>{const e=Date.now(),n=await aI.post("/api/image/encode",t);let r;n&&(r=n.data.encode);const i=(Date.now()-e)/1e3;return console.log(">>> api: get blurHash encode finished after",i),{encode:r}},YG=async t=>{const e=new FormData;e.append("file",t);const n=Date.now(),r=await aI.post("/api/image/optimize",e,{responseType:"blob"});let i;r&&(i=r.data);const s=(Date.now()-n)/1e3;return console.log(">>> api: optimize finished after",s),i};function JG({song:t,close:e}){const n=Ke(),{theme:r}=Z(),{user:i}=dt(),{setErrorToast:s,setSuccessToast:o}=mn(),{currentSong:a}=K(Ne),{updateUserSong:l}=ut(),[c,d]=f.useState(!1),[h,m]=f.useState(!1),[p,y]=f.useState(t.image_url),[x,_]=f.useState(""),[v,g]=f.useState(),[w,E]=f.useState({name:t.name,singer:t.singer,image_url:""}),S=f.useRef(null),{isAbleToSubmit:T,validName:k,validSinger:b,validURL:D,isChangeInEdit:I,setValidURL:L}=XG({data:t,inputFields:w,imageURLFromLocal:x}),W=f.useMemo(()=>{if(x)return x;if(p)return p;if(D)return w.image_url},[w,x,p,t,D]),F=f.useMemo(()=>!!x||!!p,[x,p]),te=(N,U)=>{E({...w,[N]:U})},ue=f.useCallback(()=>{t.image_file_path&&!x?y(""):x?(_(""),g(void 0)):y(""),m(!0);const N=S.current;N&&(N.value="")},[x,t.image_file_path]),J=f.useCallback(N=>{const X=N.target.files[0];_(URL.createObjectURL(X)),m(!0),g(X)},[]),ke=()=>{d(!1),e()},j=N=>{N.stopPropagation(),ke()},$=async()=>{if(i){if(!t.id){s({message:"Edit song wrong data id"});return}try{let N={...t};if(I){if(console.log("is change in edit"),!w.name||!w.singer){console.log("input invalid"),s({});return}const U=w.image_url&&D?w.image_url:N.image_url;if(d(!0),N={...N,name:w.name,singer:w.singer,image_url:U},N.name!==w.name||N.singer!==w.singer){console.log("input invalid"),s({});return}if(v&&h){const{filePath:X,fileURL:ie}=await RP({file:v,folder:"/images/",email:i.email});N.image_file_path=X,N.image_url=ie}else h&&(N.image_file_path="")}if(h&&(d(!0),console.log("isImpactOnImage"),t.image_file_path&&(N.image_file_path="",N.image_url="",await ky({filePath:t.image_file_path,msg:">>> api: delete song's image file"})),!p&&!v&&(console.log("remove current image url"),N.image_file_path="",N.image_url=""),v)){console.log("upload new file");const U=await YG(v);if(U==null)return;const X=eG({blob:U,folder:"/images/",songId:N.id}),{encode:ie}=await QG(U);ie&&(N.blurhash_encode=ie,console.log("check encode",ie));const{filePath:oe,fileURL:de}=await X;N.image_file_path=oe,N.image_url=de}await Wn({collection:"songs",data:N,id:N.id,msg:">>> api: update song doc"}),l(N),a.id===N.id&&n(Gn({...N,currentIndex:a.currentIndex,song_in:a.song_in})),o({message:"Song edited"}),ke()}catch(N){console.log({message:N}),s({})}finally{d(!1)}}},H={textColor:r.type==="light"?"text-[#333]":"text-[#fff]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${r.alpha} text-[14px] font-[500]`};return u.jsxs("div",{className:`w-[500px] max-w-[calc(90vw-40px)] h-[auto] ${c?"disable":""}`,children:[u.jsx("input",{ref:S,id:"editImageInput",type:"file",accept:"image/*",onChange:J,className:"hidden"}),u.jsx("h1",{className:"text-[20px] font-semibold",children:"Edit"}),u.jsxs("div",{className:"flex gap-[20px] mt-[10px] max-[800px]:flex-col",children:[u.jsxs("div",{className:"w-[30%] max-[800px]:flex max-[800px]:w-full max-[800px]:gap-[12px]",children:[u.jsx("div",{className:"w-full rounded-[5px] overflow-hidden",children:u.jsx(pi,{classNames:"object-cover object-center w-full h-full",onError:()=>L(!1),src:W,blurHashEncode:t.blurhash_encode})}),u.jsxs("div",{className:"md:mt-[10px]",children:[u.jsxs("div",{className:"flex gap-[10px]",children:[u.jsx("label",{htmlFor:"editImageInput",className:`inline-block cursor-pointer hover:brightness-90 px-[20px] py-[5px] bg-${r.alpha} rounded-full text-[14px]`,children:u.jsx(cT,{className:"w-[15px]"})}),F&&u.jsx(G,{onClick:()=>ue(),className:`inline-block hover:brightness-90 px-[20px] py-[5px] ${r.content_bg} rounded-full text-[14px]`,children:u.jsx(Ns,{className:"w-[15px]"})})]}),u.jsx("p",{className:`text-[12px] ${H.textColor} mt-[10px]`,children:"* Image from URL will not be apply until you remove current image"})]})]}),u.jsxs("div",{className:"flex flex-col flex-grow gap-[10px]",children:[u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"text-[14px] inline-flex",children:["Name:",k?u.jsx(Ed,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Ns,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:`${H.input} ${H.textColor}`,value:w.name,type:"text",onChange:N=>te("name",N.target.value),placeholder:t.name})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Singer:",b?u.jsx(Ed,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Ns,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:H.input,value:w.singer,onChange:N=>te("singer",N.target.value),type:"text",placeholder:t.singer})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Image URL:",w.image_url&&u.jsx(u.Fragment,{children:D?u.jsx(Ed,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Ns,{className:"w-[20px] text-red-500 ml-[10px]"})})]}),u.jsx("input",{className:H.input,value:w.image_url,onChange:N=>te("image_url",N.target.value),type:"text"})]}),u.jsxs("div",{className:"flex gap-[10px] mt-[10px]",children:[u.jsx(G,{isLoading:c,onClick:$,className:`${r.content_bg} rounded-full text-[14px] ${T?"":!h&&"disable"}`,variant:"primary",children:"Save"}),u.jsx(G,{onClick:j,className:`bg-${r.alpha} rounded-full hover:bg-red-500 hover:text-[#fff] text-[14px]`,variant:"primary",children:"Close"})]})]})]})]})}function ZG({toast:t,theme:e,onClick:n}){const r={icon:"w-[30px] max-[549px]:w-[25px]",container:`text-white px-[12px] py-[6px] rounded-[4px] flex items-center  ${e.side_bar_bg} border border-${e.alpha}`,text:`font-[500] text-[14px] max-[549px]:text-[14px] ${e.type==="light"?"text-[#333]":""}`};return u.jsxs("div",{onClick:()=>n?n(t.id):void 0,className:`${r.container} animate-[fadeIn_0.3s_linear]`,children:[t.title&&u.jsxs("span",{className:"mr-[10px]",children:[t.title==="success"&&u.jsx(uT,{className:`${r.icon} text-emerald-500 `}),t.title==="error"&&u.jsx(lO,{className:`${r.icon} text-red-500`}),t.title==="warning"&&u.jsx(Dv,{className:`${r.icon} text-yellow-500`})]}),u.jsx("p",{className:r.text,children:t.desc})]})}function eK({lyric:t,handleSetTime:e,theme:n,realTimeLyrics:r,index:i,setRealTimeLyrics:s}){const[o,a]=f.useState(!1),[l,c]=f.useState(t.text),d=f.useRef(null),h=p=>{p.preventDefault();const y=[...r],x={...y[i],text:l};y[i]=x,console.log("check new lyric ",x),s(y),a(!1)},m={input:`bg-${n.alpha} rounded-[4px] outline-none w-full px-[8px] text-[16px]`};return f.useEffect(()=>{var p;o&&((p=d.current)==null||p.focus())},[o]),u.jsxs("div",{className:"pb-[10px]",children:[!o&&u.jsxs("p",{className:"text-[16px] leading-[1.2] font-bold select-none flex items-center",children:[t.text,u.jsx("button",{onClick:()=>a(!0),className:"ml-[8px]",children:u.jsx(vT,{className:"w-[16px]"})})]}),o&&u.jsx("form",{action:"",onSubmit:h,children:u.jsx("input",{onBlur:()=>a(!1),value:l,onChange:p=>c(p.target.value),ref:d,type:"text",className:m.input})}),u.jsxs("div",{className:"flex gap-[10px] h-[20px]",children:[u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.start),children:[t.start,"s"]}),u.jsx("span",{children:" - "}),u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.end),children:[t.end,"s"]})]})]})}function Iy({cb:t,active:e,className:n,size:r="default"}){const{theme:i}=Z(),s={circle:`${r==="default"?"w-[20px] h-[20px]":"w-[16px] h-[16px]"}  absolute bg-white left-[3px] rounded-[50%] transition-transform top-[50%] translate-y-[-50%]`,active:`${r==="default"?"translate-x-[14px]":"translate-x-[18px]"} `,inActive:"translate-x-[0]"};return u.jsx("div",{onClick:t,className:`relative  cursor-pointer ${r==="default"?"h-[24px]":"h-[20px]"} rounded-[99px] w-[40px] ${n||""} 
         ${e?i.content_bg:"bg-"+i.alpha} `,children:u.jsx("div",{className:`${s.circle} ${e?s.active:s.inActive}`})})}function tK({audioEle:t}){const e=f.useRef(!1),{playStatus:{isPlaying:n}}=K(dr),[r,i]=f.useState(0),[s,o]=f.useState(0),a=f.useRef(),l=c=>{i(0),Jt("timer",0),clearInterval(a.current),c&&o(0)};return f.useEffect(()=>{if(e.current&&(console.log("check cd",s,r,n),!!r)){if(!s)o(r),n||t.play();else if(!n)return;return a.current=setInterval(()=>o(c=>c===1?(t.pause(),l(),0):((c===r||c%5===0)&&Jt("timer",c-1),c-1)),1e3),()=>{clearInterval(a.current)}}},[n,r]),f.useEffect(()=>{if(!e.current){e.current=!0;const c=ti().timer||0;o(c),i(c)}},[]),{countDown:s,isActive:r,handleEndTimer:l,setIsActive:i}}const nK=({appendOnPortal:t})=>{const[e,n]=f.useState(!1),[r,i]=f.useState(!1),s=f.useRef(null),o=f.useRef(null);return{refs:{triggerRef:s,contentRef:o},setTriggerRef:h=>{s.current=h},setContentRef:h=>{o.current=h},state:{isMounted:r,isOpen:e},setIsMounted:i,setIsOpen:n,appendOnPortal:t,close:()=>{i(!1)},toggle:()=>{r&&i(!1),e||n(!0)}}},VP=f.createContext(null),F1=()=>{const t=f.useContext(VP);return t||{}};function yu({children:t,relativeWrap:e=!0,appendOnPortal:n,...r}){return u.jsx(VP.Provider,{value:nK({...r,appendOnPortal:n}),children:n?t:u.jsx("div",{className:"relative",children:t})})}const vu=f.forwardRef(function({children:t},e){const{refs:n,setIsMounted:r,setIsOpen:i,close:s,toggle:o,state:{isMounted:a,isOpen:l}}=F1();return f.useImperativeHandle(e,()=>({close:s})),f.useEffect(()=>{a||setTimeout(()=>{i(!1)},400)},[a]),f.useEffect(()=>(l&&setTimeout(()=>{r(!0)},100),()=>{l||r(!1)}),[l]),f.useEffect(()=>{if(!l)return;const c=d=>{var h,m;!n.contentRef||!n.triggerRef||(h=n.triggerRef.current)!=null&&h.contains(d.target)||(m=n.contentRef.current)!=null&&m.contains(d.target)||r(!1)};return document.addEventListener("mousedown",c),document.addEventListener("touchstart",c),()=>{document.removeEventListener("mousedown",c),document.removeEventListener("touchstart",c)}},[l]),f.isValidElement(t)?f.cloneElement(t,{onClick:o,ref:n.triggerRef}):u.jsx(u.Fragment,{})});function xu({children:t,className:e,animationClassName:n,...r}){const{state:{isMounted:i,isOpen:s},refs:o,close:a,appendOnPortal:l,setContentRef:c}=F1(),d=f.useRef(null),h=()=>{const x=o.triggerRef.current,_=o.contentRef.current,v=d.current;if(!x||!_)return;const g=x.getBoundingClientRect(),w={top:g.top+x.clientHeight,left:g.left-_.clientWidth};if(r.appendTo==="portal"){const{origin:E="top right",position:S,spacer:T=8}=r;switch(S){case"right-bottom":{w.top=g.top+x.clientHeight+T,w.left=g.left;break}}const k=w.top+_.clientHeight>window.innerHeight-90;if(k){let b=w.top-_.clientHeight-x.clientHeight;b-60<0&&(b=60),w.top=b}if(v){let b=E;k&&(b="bottom right"),v.style.transformOrigin=b}}_.style.left=`${w.left}px`,_.style.top=`${w.top}px`},m=a,p={unMountedContent:"opacity-0 scale-[.95]",mountedContent:"opacity-100 scale-[1]"},y=u.jsx("div",{ref:c,className:`${l?"fixed z-[99]":"absolute"} ${e||""}`,children:u.jsx("div",{ref:d,className:` transition-[transform,opacity] duration-[.25s] ease-linear ${n||""} ${i?p.mountedContent:p.unMountedContent}`,children:t})});return f.useEffect(()=>{if(!l)return;if(s)h();else return;const x=document.querySelector(".main-container");if(x)return x.addEventListener("wheel",m),()=>{x&&x.removeEventListener("wheel",m)}},[s]),s?u.jsx(u.Fragment,{children:l?mo.createPortal(y,document.getElementById("portals")):y}):u.jsx(u.Fragment,{})}function rK({children:t,className:e="px-2 py-1 text-sm font-[600]",position:n="bottom-[calc(100%+8px)]",content:r,isWrapped:i,...s},o){const[a,l]=f.useState(!1),{theme:c}=Z(),{setTriggerRef:d,state:h}=F1(),{onClick:m}=s,p=f.useRef(null),y=()=>{l(!0)},x=()=>{l(!1)};f.useEffect(()=>{const g=p.current;if(g)return d&&d(g),g.addEventListener("mouseenter",y),g.addEventListener("mouseleave",x),()=>{g.removeEventListener("mouseenter",y),g.removeEventListener("mouseleave",x)}},[]);const _={container:`${c.type==="dark"?"bg-white text-[#333]":"bg-slate-700 text-white"}`},v=u.jsx(u.Fragment,{children:f.isValidElement(t)&&u.jsxs(u.Fragment,{children:[Object.keys(s).length?f.cloneElement(t,{ref:p,onClick:m}):f.cloneElement(t,{ref:p}),!(h!=null&&h.isOpen)&&a&&u.jsx("div",{className:`${_.container} absolute whitespace-nowrap -translate-x-1/2 left-1/2 rounded-md ${n} ${e}`,children:r})]})});if(f.isValidElement(t))return u.jsx(u.Fragment,{children:i?v:u.jsx("div",{className:"relative",children:v})})}const ri=f.forwardRef(rK);function UP({audioEle:t}){const{theme:e}=Z(),n=f.useRef(null),{countDown:r,isActive:i,handleEndTimer:s,setIsActive:o}=tK({audioEle:t}),a=d=>o(d),l=()=>{var d;i?s(!0):(d=n.current)==null||d.toggle()},c={container:"w-[54px] sm:w-[50px] flex justify-center",button:`rounded-[99px]  hover:bg-${e.alpha} p-[5px]`,itemContainer:"flex justify-between items-center min-h-[30px]",text:"text-base text-[#ccc]"};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:c.container,children:i?u.jsx(ri,{content:"Clear timer",children:u.jsxs("button",{className:"group flex items-center",onClick:l,children:[u.jsx("span",{className:"text-base opacity-70 sm:text-sm group-hover:hidden",children:fc(r)}),u.jsx("span",{className:`hidden group-hover:block ${c.button}`,children:u.jsx(Ns,{className:"w-6"})})]})}):u.jsx(ri,{content:"Sleep timer",children:u.jsx("button",{onClick:l,className:c.button,children:u.jsx(dT,{className:"w-6"})})})}),u.jsx(Br,{ref:n,variant:"animation",children:u.jsx(yQ,{active:a,close:()=>{var d;return(d=n.current)==null?void 0:d.toggle()}})})]})}const $1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABnCAMAAADBqBfIAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAu5QTFRF+9t4AAAA////+tp4+9t6iWRS/fDGkm1W//35imVT///+imRT/Oah9NN25sRx/eej+91+//78i2ZT+9x7kGtV/vbeiWRS9tZ2+Nd3/fHL+96C/OWd//zz//32/vPS2rlu/vLOjWhU/e/D+9+F//rslXBX/euy/vTXl3NX/vTV+dl3/ems7s10/OGN/vfhlnBQ/Oem/OSa/OKQt5Ri8dB1/N+I/vXaoHta/eu1/vjk/fHJ/vnp/OCK/e26o39b6chyj2lR/e/BimVSiWRS7Mtz/eiqjGdR/eqv//vv/OSYjWdR4b9vzqxp/OOWk21Qi2ZRnXlZ/vnnpoJcv5xl3bxumnNP/OKUimRSimVSkGlRm3ZZimRSq4del3BP1LJrmnJPzKppnXVO2LZtroZMt45Mj2hRqH9MrIJKmXJPqIRdrIhelG1Qn3dPxaNms49hqoJLlG1Qm3NPupFJoXlOnXZPnHVPlG5QlW5QkWtRjmhRjGZSi2ZSn3dOmHFPjWdSnXVOtZJhoXhO/e6948FwvZpk/OGPmXJQqoJJu5djrodFvpVIj2hRl3BPj2lRjGdRsohLkWpRm3NP////jWdRw5lGqIFNpHxPlm9QlG1Qn3dPl3BPsYhNx6Rn0K5qsY5gmHBP//vxkWtR////////zqNJ////////s4pIkGpRl3BQ///+pn1M////ropfmHFQpn5PjmhRmnNPonpOm3VOl3BQxp9JxZlLkmxRwp9lk2xRs4lK////lnBQwplJnXZPkmtQzLqvkmtQ////lW9Q9/Tx+vj2sJN74s+lkmxQ6+Xjo4Rx2c3EspmN2rt4////5sqFwa6k////xZtD5dfDoXhKlnRl////uaCQ+/jy////zKBH////totJ////////4MeV////////1Kc++vfznHdYu5RFn3hOr4dLnXZP8ezp////////vpVD////////mnNP////l3BQkWtRmXJPpH1Np39Q////rINMmnROoHhQyC8s0wAAAPp0Uk5T/wD////3///////9//////////////r///////////////////////////////9o/////////////////////7//4u7//9X////K////iN///////0P/8uyf/+j/Q/8Y/x3/AwKuBg1O//9xDP//C4Q1BRMuK3hWirnn2idLzxf/Cf////86A/8CA7RSqNAIm0v5xQEVFmJqEl0E////WP+kBVcBf7wCkT0VEeP/XgujPCBVfwEClf+OD8pLBTqrwkqTJsneoApf///h6P8d///rAv8E66f//4sCKxNpw/+i1wHWXwIxCyf/sTQKDOoh9G7EZC4NkhEsBY8dBX0AAAe/SURBVHic7ZpnWBNJGMd3E0IIoYQQktACoUZ6C6GDdFEBkd6kSrFixY7KoWfvXRTLnd07z16v9957P73e77z7drshOxOyk82mPPfcPY//j+/svr+Zd2benbIY/i8Iuwf5P0Pe/3Duw0v2REf/dqCh59z3tofcmRO9fkOVUCzhBwergoP5SoE0e2tvZ/Msm0Gubh4qkSo1fU3luQnOMrlc5pwQ4dJyuVslzFk67/bnNoDM6GznSbqaMsMwupzL+1WCkt7FbdZB7uzKF2r2R3ARhGHJXeL5VWt7LlgO2T1lIX8w0yhAp7BxGYKs45Mtg7RGZ0smJphCkOKOrZdmLbYA0jaQJelzZoPQyi9D2rvbXMjymdIyk4EaGTT+ogbzIE8USZqM9zZaCfWC81PNgJypLss1E0E2plG5dQdbyOR54j7UtDAtl9KSAXaQN28JG80NFSXnripUx9AgJx/it1iIICSP550xDZm8QOJiOYPomNXSR7aZgMyo4a+0hkFQJvLWMUO2bVJa1Q5S3D7ebSbI3l3KRmsZRL+czv6aAXKdZ/YURElWu2GjUciyutM2QBDK5F9ZZQTyd3sp+4zILD/pASOQKWKrOx1osHo3ErKjOt5mDCxCdWwVAtJaY7NgkfLjVSAgAzw/GzIwbkbRGhqkrSjDlgwiIyuv0yA94nLbQrjTi84aQCZnddtiGuorVzDfANLDG2tjBoZ1FelBrn37+NFH3/GujFQH2tkSMlYwF0I4Orn5pMbZEiIvvQIhP3OAxqAeTk8qyItxih0fF+kObHZs2jyubjsK4o16FpS6qYGtYJTC398zxV6ngNFarUgPCXcdo6YqkCDsBJAfIcQJBXEDxZHAZs9hkENiuncaSdK0A8gpWJyHgjiA4vuALYUJQspXUeCFXV54g4J8BotC2EI8TUEIudm/IlhMQT6G9nQUxAcB8WcB4XDeffVLCvI2tNqjIIWguBIBCXClFBOeHqBI9nXUxzz5sg5yFNoSUZAJoHg8sCmAzWCs2MUVJLrpUa79MAw5DE2pKIgHKIbTCELoo17kHaXXmj8PaSEfbAEWBxQkFOFwFKJ1ehi9cbHlOy3kxGvQFIh4BQ5XGBoIjkS8gYmSocv3tJBnnoIWVL3SQSmcRhCCqhaGOcGAPaCFdLwAIeG6h9xFXuq0yMpYp5jwEBgaOI0Sgc0dCVE7GEBmvwghCqe8kPQAT0ViVGqhr/4o0SqdDkH24gjIp1rIpLdg2xwdOQyC0wiMuEI0JBb6OTwMyfmGybOeFHRIMhoCh/ipEzrIGywhHnRIKJJRCSP90fBknFT9CWOQoFLBpyqKMiETUVoqeOWLQ8OQ2XUv+SB9Et3qE+ShsAfjtVBEg6DydhxMRM89rctdHdn76UnVN3lUQFJMbBrp1psy+nhRfsBko2cV9xBY5YPPF+sgN/L3jdGrfGpoSlJMZZoX/IoHgjK1IcTNYMLbqQs8YOw94vi/UOuuBfF2ED5BhBnKzldX5gg+KFRAYNsIicaH+x+E1XWzF8kEnRTkUhk3ALYEsSwCPeBtCHHwTElJ8STkrwiNCvLl6CGivN2xXOkcChKtkkXCGRpAh4AqFFCWVA6zHJPzyIiUVy+jIAPKCDuYjA7Sl1SutAqYgES5DodxX/5GCnJX6IfpdX0sDaKm4gCmXpBxgM+oJGo0cOuHwIL7Qkk/Zge/5AoaxJ2qeDIzxDHIPyRWDfOyLDgaruqHNBgWDkaeQxqNMpqqJWVI9FB4BqxIKggnFrDD8h4TpzZM+y5wSYTjZ8QyTAQrt4IGiaWqSrnxErFZDE+rngUhzTl+er3L8aVNFRGZ8ApDV+ShP1HGpFmvtwlqyxokAg+bEk57PNkjKTbQPAKGOQsO6O+05ksSiKaA/FzoZfi8Rbujpuzd+pCTvHFEU8BHwjHJEp+Gkms2XRyxZ1xfS+xL49yM94oFGrGdI3VcSp6rwIyPXN6bqe78r0ZC9i7oDiMGJuh7H/RyyhzlCg232HiFmDx7BMPYgz4hzVV8/lRDyJqtGeRpgXYh55CC3KCaJxflEtwQgjdIyeOCNCIV+o+3xXa+K7+VDmmrqSWPomI8K02+z0booyi8uWoixnKDblrOtTWtKAg+T2zWjQmj+nK240jI8rUa2x10zsfREGK9Omib86hc/jFjR7Y4vo5MYdZLXpo/8kpoBOTIFKUV1xqAMZ3xGB3fO2TdxYZW8bybOBMEX97Ot5ISNo23B2eG4B2/WknpFx540BQEv7qWb8W5qryfF23oEXVxNvWW5ZcosnredVo70FeAxcJ+y64AMzXZFXR/6MvM1meruiy4zOQ2SoqaUQwj17K/L5K0mNsY50Fp73KkN2MXzDtmCrsizGKMU5U8dj/amfH7+Iqlyn7W+ZK7soy36a4xVwyX/n/sWhg8UcaKMbZbnNXTatQT4+8LHb11ktW5phKz3K9MuKECMXDZQXB8WfFCZZcfQ3O4EdNqhUWbZzB6MflLyawl7VXisn2ZiO4JSyhfrRIuKj53xIQPFj/HvN68c0GOOLj+cotLglxXf1nuyv2rNXxhyaWGsyYdsP3NZ81fO2s21PEEAkmwSkX+5SOsKskq7txOu6+2BkJq1uyfbq6Lnjdz5vkpOzfPae64yPrN/9yvV/cgOP4PsP50Fs+e30kAAAAASUVORK5CYII=";function iK({vinylRef:t}){const{playStatus:{isPlaying:e}}=K(dr);f.useEffect(()=>{const n=t.current;n&&(e?n.style.animationPlayState="running":n.style.animationPlayState="paused")},[e])}function sK({isOpenFullScreen:t,admin:e}){const n=f.useRef(null),{currentSong:r}=K(Ne);iK({vinylRef:n});const i={songInfoWrapper:`${e?"w-1/4":"w-1/4 "}`,songInfoChild:"flex flex-row"};return u.jsx("div",{className:`${i.songInfoWrapper}  ${t?"hidden":""}`,children:u.jsxs("div",{className:`${i.songInfoChild} ${t?"hidden":""}`,children:[u.jsx("div",{className:e?"w-[46px]":"w-[56px]",children:u.jsx("img",{ref:n,src:r.image_url||$1,className:"rounded-full w-full animate-[spin_8s_linear_infinite]"})}),u.jsxs("div",{className:"ml-2 flex-grow",children:[u.jsx("div",{className:"h-[32px]",children:u.jsx(Jh,{className:"leading-[1.5] font-playwriteCU",content:r.name||"Name"})}),u.jsx("div",{className:"h-[20px]",children:u.jsx(Jh,{autoScroll:!0,className:"opacity-70 leading-[1.2]",content:r.singer||"..."})})]})]})})}function oK({idle:t,audioEle:e,admin:n,isOpenFullScreen:r,setIsOpenFullScreen:i,isOpenSongQueue:s,setIsOpenSongQueue:o}){const{theme:a}=Z(),{currentSong:l}=K(Ne),c=f.useRef(null),d=Dn(),{handleSetVolume:h,isMute:m,handleMute:p,handleWheel:y}=GG(c,e),x=f.useMemo(()=>d.pathname.includes("edit"),[d]),_=()=>{s&&o(!1),i(!0)},v={before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]",wrapper:`border-${a.alpha} fixed bottom-0 w-full border-t transition-transform z-50 px-6 ${n?"h-[60px]":"h-[90px]"}`,container:"flex flex-row gap-[10px] h-full items-center",controlWrapper:"flex max-w-[420px] flex-grow",controlWrapperChild_1:`${r?"max-w-[600px] flex-col-reverse pb-[10px]":"flex-col justify-center"}`,controlWrapperChild_2:`${!l.song_url&&"disable"}`,right:`${n?"w-1/4":"w-1/4 "} flex items-center justify-end`,volumeLineBase:"ml-1 w-full relative h-[4px] cursor-pointer rounded-full",volumeLineCurrent:"absolute left-0 top-0 h-full w-full ",blurBg:`bg-opacity-[0.8] backdrop-blur-[15px] z-[-1] absolute inset-0 ${a.bottom_player_bg}`};return u.jsxs("div",{className:`${v.wrapper} ${r&&"border-transparent"} ${x&&"translate-y-[100%] "} bg-transparent`,children:[u.jsx("div",{className:`${v.blurBg} ${r?"opacity-0 transition-opacity delay-[.2s]":""}`}),u.jsxs("div",{className:`${v.container} ${r?"justify-center text-white":"justify-between"} ${t&&"transition-opacity duration-[.3s] opacity-0"}`,children:[u.jsx(sK,{isOpenFullScreen:r,admin:n}),u.jsx("div",{className:` ${v.controlWrapper} ${n?"":v.controlWrapperChild_1}  ${v.controlWrapperChild_2}`,children:f.useMemo(()=>u.jsx(WP,{admin:n,audioEle:e,isOpenFullScreen:r}),[r])}),u.jsxs("div",{className:`${v.right}  ${r?"hidden":""}`,children:[u.jsxs("div",{className:"flex flex-grow items-center max-w-[120px] mr-2",children:[u.jsx("button",{onWheel:y,onClick:()=>p(),children:m?u.jsx(tO,{className:"w-6"}):u.jsx(Jj,{className:"w-6"})}),u.jsx("div",{onClick:g=>h(g),ref:c,className:`${v.volumeLineBase} ${v.before}`,style:{background:"#e1e1e1"}})]}),!n&&u.jsxs("div",{className:`flex items-center ${l.name?"":"disable"}`,children:[u.jsx(ri,{content:"Fullscreen mode",children:u.jsx("button",{onClick:_,className:`rounded-[99px]  hover:bg-${a.alpha}  p-[5px]`,children:u.jsx(nj,{className:"w-6"})})}),u.jsx(ri,{content:"Queue",children:u.jsx("button",{onClick:()=>o(!s),className:`ml-1 hover:bg-${a.alpha} rounded-md p-[5px]`,children:u.jsx(Xj,{className:"w-6"})})}),u.jsx("div",{className:`w-[2px] h-[26px] ml-2 bg-${a.alpha}`}),u.jsx(UP,{audioEle:e})]})]})]})]})}const aK=f.memo(oK);function z1({audioEle:t}){const e=Ke(),{queueSongs:n}=K(gi),{currentSong:r}=K(Ne),{playStatus:i}=K(dr),s=f.useRef(0),{isRepeat:o,isShuffle:a,isPlaying:l}=f.useMemo(()=>i,[i]),c=()=>{try{t==null||t.play()}catch{}},d=()=>{t==null||t.pause()},h=f.useCallback(()=>{l?d():c()},[l]),m=f.useCallback(()=>{let _=s.current+1,v;_<n.length?v=n[_]:(_=0,v=n[0]),e(Gn({...v,currentIndex:_,song_in:r.song_in}))},[r,n]),p=f.useCallback(()=>{let _=s.current-1,v;_>=0?v=n[_]:(v=n[n.length-1],_=n.length-1),e(Gn({...v,currentIndex:_,song_in:r.song_in}))},[r,n]),y=()=>{const _=!a;e(Zn({isShuffle:_})),Jt("isShuffle",_)},x=()=>{let _;switch(o){case"no":_="one";break;case"one":_="all";break;case"all":_="no";break;default:_="no"}Jt("isRepeat",_),e(Zn({isRepeat:_}))};return f.useEffect(()=>{r.name&&(s.current=r.currentIndex)},[r]),{handleNext:m,handlePrevious:p,play:c,pause:d,handleRepeatSong:x,handleShuffle:y,handlePlayPause:h,playStatus:i,currentSong:r,queueSongs:n}}function lK({audioEle:t,timelineRef:e,currentTimeRef:n,remainingTimeRef:r}){const i=Ke(),{theme:s}=Z(),{user:o}=dt(),{queueSongs:a}=K(gi),{playStatus:{isPlaying:l,isRepeat:c,isShuffle:d,isCrossFade:h}}=K(dr),{currentSong:m}=K(Ne),{currentPlaylist:p}=K(yi),[y,x]=f.useState(0),_=f.useRef(!0),v=f.useRef(0),g=f.useRef(0),w=f.useRef(0),E=f.useRef(s.content_code),S=f.useRef(!1),T=f.useRef(!0),k=f.useRef(),{handleNext:b}=z1({audioEle:t}),D=Dn(),{setErrorToast:I}=mn(),L=f.useMemo(()=>D.pathname.includes("edit"),[D]),W=()=>{try{if(t.play(),!o)return;T.current&&(h&&(t.volume=0),T.current=!1)}catch{}},F=()=>{t.pause()},te=oe=>a[oe],ue=f.useCallback(()=>{l?F():W()},[l]),J=()=>{i(Zn({isPlaying:!1})),k.current&&clearInterval(k.current)},ke=()=>{_.current=!1,i(Zn({isPlaying:!0,isWaiting:!1,isError:!1}))},j=()=>{_.current||Jt("duration",0),e.current&&n.current&&r.current&&(n.current.innerText="0:00",r.current.innerText="0:00",e.current.style.background="#e1e1e1")},$=f.useCallback(oe=>{const de=oe.target;if(e.current){const me=de.getBoundingClientRect(),Gt=(oe.clientX-me.left)/e.current.offsetWidth,hr=Math.ceil(Gt*t.duration),Ja=t.currentTime;if(g.current&&Math.abs(Ja-g.current)<1&&Math.abs(hr-g.current)<1){console.log("no seek");return}t.currentTime=hr,g.current=hr}},[]),H=oe=>{const me=ti().volume||1;if(oe<=2){const Ue=oe/2*me;t.volume=Ue}else if(oe<w.current){t.volume!=me&&(t.volume=me);return}if(oe>=w.current){const Ue=(t.duration-oe)/2*me;t.volume=Ue}},N=()=>{const oe=t.currentTime,de=e.current;if(t.duration&&oe&&de){const me=oe/(t.duration/100);de.style.background=`linear-gradient(to right, ${E.current} ${me}%, #e1e1e1 ${me}%, #e1e1e1 100%)`}n.current&&(n.current.innerText=fc(oe)||"00:00"),h&&H(oe)},U=()=>{const de=ti().volume||1;if(t.volume=de,c==="one")return W();if(d){let me=v.current;for(;me===v.current;)me=Math.floor(Math.random()*a.length);const Ue=te(me);return i(Gn({...Ue,currentIndex:me,song_in:m.song_in}))}v.current===a.length-1&&(c==="all"?S.current=!1:S.current=!0)},X=()=>{const oe=r.current,de=t.duration,me=ti(),Ue=me.current;if(oe.innerText=fc(de),w.current=de-3,(!_.current||!Ue)&&Jt("current",m),S.current){S.current=!1,i(Zn({isWaiting:!1,isPlaying:!1}));return}if((L||_.current)&&(i(Zn({isWaiting:!1,isPlaying:!1})),_.current)){if(_.current=!1,Ue&&Ue.id===m.id){t.currentTime=me.duration||0,N();return}console.log("play"),W()}W()},ie=()=>{x(Math.random())};return f.useEffect(()=>(t.addEventListener("error",ie),t.addEventListener("pause",J),t.addEventListener("playing",ke),()=>{t.removeEventListener("error",ie),t.removeEventListener("pause",J),t.removeEventListener("playing",ke)}),[]),f.useEffect(()=>{y&&(_.current||m.name&&(a.length>1?(b(),I({message:"Có lỗi do đường truyền mạng"})):i(Zn({isWaiting:!1,isError:!0}))))},[y]),f.useEffect(()=>{if(!m.name){i(Zn({isWaiting:!1,isPlaying:!1}));return}return F(),i(Zn({isWaiting:!0,isError:!1,isPlaying:!1})),t.src=m.song_url,v.current=m.currentIndex,m.name&&(document.title=`${m.name} - ${m.singer}`),()=>{j(),clearInterval(k.current),T.current=!0}},[m.id+m.song_in+m.currentIndex]),f.useEffect(()=>{if(!m.name)return;let oe=`${m.name} - ${m.singer}`;!l&&p.name&&m.song_in.includes(p.id)&&(oe=`${p.name}`),document.title=oe},[l]),f.useEffect(()=>(t.addEventListener("ended",U),()=>t.removeEventListener("ended",U)),[c,d,m.song_in,a]),f.useEffect(()=>(t.addEventListener("timeupdate",N),()=>t.removeEventListener("timeupdate",N)),[h]),f.useEffect(()=>{E.current=s.content_code,l||N()},[s]),f.useEffect(()=>(L&&l&&F(),t.addEventListener("loadedmetadata",X),()=>{t.removeEventListener("loadedmetadata",X)}),[L,m.id,h]),f.useEffect(()=>(l&&(k.current=setInterval(()=>{Jt("duration",t.currentTime.toFixed(1))},3e3)),()=>clearInterval(k.current)),[l]),{handleSeek:$,play:W,pause:F,handlePlayPause:ue}}function WP({audioEle:t,admin:e,isOpenFullScreen:n}){const{theme:r}=Z(),i=f.useRef(null),s=f.useRef(null),o=f.useRef(null),{handleNext:a,handlePrevious:l,handleRepeatSong:c,handleShuffle:d,playStatus:{isRepeat:h,isShuffle:m,isError:p,isWaiting:y},currentSong:x,queueSongs:_}=z1({audioEle:t}),{handleSeek:v,handlePlayPause:g}=lK({audioEle:t,timelineRef:i,currentTimeRef:s,remainingTimeRef:o}),w={button:"p-1",buttonsContainer:"w-full flex justify-center items-center space-x-3",progressContainer:`flex w-full flex-row items-center ${n?"mb-0":"mb-5 sm:mb-2"}  ${e?"h-full":""}`,processLineBase:"h-[6px] sm:h-1 flex-grow relative cursor-pointer rounded-[99px] ",processLineCurrent:`absolute left-0 rounded-l-[99px] top-0 h-full ${r.content_bg}`,currentTime:"opacity-60 text-[14px] font-semibold",icon:"w-[44px] sm:w-7",before:"before:content-[''] before:w-[100%] before:h-[24px] before:absolute before:top-[50%] before:translate-y-[-50%]"};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`${w.buttonsContainer}`,children:!e&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{disabled:_.length<=1,className:`relative ${w.button} ${h!=="no"&&r.content_text}`,onClick:c,children:[u.jsx(SD,{className:w.icon}),u.jsx("span",{className:"absolute font-bold text-[12px] font-playwriteCU top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ",children:x.name&&(h==="one"?"1":h==="all"?"--":"")})]}),u.jsx("button",{disabled:_.length<=1,className:w.button,onClick:()=>l(),children:u.jsx(OD,{className:w.icon})}),u.jsx(pb,{handlePlayPause:g}),u.jsx("button",{disabled:_.length<=1,className:`${w.button}`,onClick:()=>a(),children:u.jsx(fT,{className:w.icon})}),u.jsx("button",{disabled:_.length<=1,className:`${w.button} ${m&&r.content_text}`,onClick:d,children:u.jsx(RD,{className:w.icon})})]})}),u.jsxs("div",{className:`${w.progressContainer} ${p?"disable":""}`,children:[u.jsx("div",{className:"w-[44px] sm:w-[36px]",children:t&&u.jsx("span",{ref:s,className:"text-lg sm:text-sm",children:"0:00"})}),u.jsx("div",{ref:i,style:{background:"#e1e1e1"},onClick:E=>v(E),className:`${w.processLineBase} ${y?"disable":""}  ${w.before}`}),u.jsx("div",{className:"w-[44px] sm:w-[36px] text-right",children:t&&u.jsx("span",{ref:o,className:"text-lg sm:text-sm",children:"0:00"})}),e&&u.jsx("div",{className:"flex items-center",children:u.jsx(pb,{handlePlayPause:g})})]})]})}function gb(t,e){const n=f.useRef(),[r,i]=f.useState(0),[s,o]=f.useState(0);return f.useEffect(()=>{r&&(n.current=setTimeout(()=>n.current=void 0,e))},[s,Ls]),f.useEffect(()=>{n.current||(t(),o(Math.random()*10))},[r]),()=>i(Math.random()*10)}function HP(){const{theme:t,isOnMobile:e}=Z(),n=Ke(),{playStatus:{lyricSize:r,songBackground:i,songImage:s}}=K(dr),o=l=>{n(Zn({lyricSize:l})),Jt("lyricSize",l)},a={disableBtn:"bg-white/10 bg-opacity-20",lyricSizeBtn:`group/text !hover:brightness-100 font-[600] h-[30px] w-[30px] sm:h-[26px] sm:w-[26px] relative ${t.content_hover_bg}`,itemContainer:`flex justify-between  px-3 py-2 items-center min-h-[30px] hover:bg-${t.alpha}`,text:"text-base text-[#ccc]"};return u.jsx(u.Fragment,{children:u.jsx("div",{className:"w-[240px] sm:w-[220px]",children:u.jsxs(yo,{p:"clear",color:"black",className:"space-y-[6px] text-white py-3",theme:t,children:[u.jsxs("div",{className:`${a.itemContainer}`,children:[u.jsx("p",{className:a.text,children:"Lyric size"}),u.jsxs("div",{className:"flex space-x-[8px]",children:[u.jsx(G,{onClick:()=>o("small"),variant:"circle",size:"clear",className:`${r==="small"?t.content_bg:a.disableBtn} ${a.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[11px]",children:"A"})}),u.jsx(G,{onClick:()=>o("medium"),variant:"circle",size:"clear",className:`${r==="medium"?t.content_bg:a.disableBtn} ${a.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[13px]",children:"A"})}),u.jsx(G,{onClick:()=>o("large"),variant:"circle",size:"clear",className:`${r==="large"?t.content_bg:a.disableBtn} ${a.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[15px]",children:"A"})})]})]}),u.jsxs("div",{className:`${a.itemContainer}`,children:[u.jsx("p",{className:a.text,children:"Song background"}),u.jsx(Iy,{size:"thin",className:"bg-white/10",active:i,cb:()=>n(mb({variant:"songBackground"}))})]}),!e&&u.jsxs("div",{className:`${a.itemContainer}`,children:[u.jsx("p",{className:a.text,children:"Song image"}),u.jsx(Iy,{size:"thin",className:"bg-white/10",active:s,cb:()=>n(mb({variant:"songImage"}))})]})]})})})}function cK({isOpenFullScreen:t,setIsOpenFullScreen:e,idle:n,audioEle:r}){const i=Ke(),{theme:s}=Z(),{currentSong:o}=K(Ne),{queueSongs:a}=K(gi),{playStatus:{songImage:l}}=K(dr),[c,d]=f.useState("Lyric"),h=f.useRef(null),m=f.useRef(null),p=f.useRef(null),y=fn();MP({bgRef:h,currentSong:o}),MG({containerRef:m,songItemRef:p,isOpenFullScreen:t,idle:n});const x=gb(()=>g("next"),200),_=gb(()=>g("previous"),200),v=(k,b)=>{o.id!==k.id&&i(Gn({...k,currentIndex:b,song_in:o.song_in}))},g=(k="next")=>{const b=m.current;b.style.scrollBehavior="smooth",k==="next"?b.scrollLeft+=500:k==="previous"&&(b.scrollLeft-=500)},w=()=>{e(!1),setTimeout(()=>{y(`/mysongs/edit/${o.id}`)},300)},E={button:`w-[44px] h-[44px] bg-white/10 rounded-[99px] hover:scale-[1.05] transition-transform ${s.content_hover_bg}`,wrapper:`fixed inset-0 z-50 overflow-hidden text-white bg-zinc-900
    } transition-transform duration-[.7s] linear delay-100`,bg:"-z-10 bg-no-repeat bg-cover bg-center blur-[50px]",overplay:"bg-zinc-900 bg-opacity-60 bg-blend-multiply",container:"absolute w-full top-0 bottom-[90px] flex flex-col",headerWrapper:"relative flex py-[25px] px-[40px] w-full items-center",content:"flex-grow relative overflow-hidden",songsListTab:" relative h-full no-scrollbar flex items-center flex-row overflow-auto scroll-smooth px-[calc(50%-350px/2)]",absoluteButton:`absolute top-[50%] -translate-y-[50%] p-[8px] bg-white/30 rounded-full ${s.content_hover_bg}`,lyricTabContainer:"px-[40px] min-[1536px]:container min-[1536px]:mx-auto min-[1536px]:px-[200px] h-full flex items-center justify-center flex-row",fadeTransition:"opacity-0 transition-opacity duration-[.3s]",before:"before:content-[''] before:w-[50px] before:h-[10px] before:absolute before:bottom-[-7px] ",logo:"animate-[spin_8s_linear_infinite] w-[46px] mr-1"},S=f.useMemo(()=>{if(o.id&&a.length)return a.map((k,b)=>{const D=b===o.currentIndex;return D?u.jsx(vg,{ref:p,classNames:"active",hasTitle:!0,onClick:()=>v(k,b),active:D,data:k},b):u.jsx(vg,{idleClass:`${!D&&n?E.fadeTransition:""}`,hasTitle:!0,active:D,data:k,onClick:()=>v(k,b)},b)})},[o,a,n]),T=u.jsxs("div",{className:E.lyricTabContainer,children:[l&&u.jsx(vg,{active:!0,data:o}),u.jsx(GP,{className:`w-full ml-[40px] h-full ${!l&&"text-center"}`,audioEle:r,isOpenFullScreen:t&&c==="Lyric",active:c==="Lyric"})]});return u.jsxs("div",{className:`${E.wrapper}  ${t?"translate-y-0":"translate-y-full"}`,children:[u.jsx("div",{ref:h,className:`absolute inset-0 ${E.bg}`}),u.jsx("div",{className:`absolute inset-0 ${E.overplay}`}),u.jsxs("div",{className:E.container,children:[u.jsxs("div",{className:E.headerWrapper,children:[n&&u.jsxs("div",{className:"absolute flex items-center left-4",children:[u.jsx("img",{className:`${E.logo}`,src:$1,alt:""}),c==="Lyric"&&u.jsxs(u.Fragment,{children:[u.jsxs("p",{className:"font-playwriteCU text-sm",children:[o.name," "]}),u.jsxs("p",{className:"opacity-70",children:[" - ",o.singer]})]})]}),u.jsx(k4,{inFullScreen:!0,activeTab:c,setActiveTab:d,className:`${n&&E.fadeTransition}`,tabs:["Songs","Karaoke","Lyric"],render:k=>k}),u.jsxs("div",{className:`absolute flex right-4 space-x-3 ${n&&E.fadeTransition}`,children:[o.by!=="admin"&&c==="Lyric"&&u.jsx(ri,{position:"top-[calc(100%+8px)]",content:"Edit lyrics",children:u.jsx("button",{onClick:()=>w(),className:`p-3 ${E.button}`,children:u.jsx(kG,{})})}),u.jsxs(yu,{children:[u.jsx(vu,{children:u.jsx(ri,{position:"top-[calc(100%+8px)]",content:"Settings",children:u.jsx("button",{className:`${E.button} p-3`,children:u.jsx(EG,{})})})}),u.jsx(xu,{appendTo:"parent",className:"top-[calc(100%+8px)] right-0 z-[99]",animationClassName:"origin-top-right",children:u.jsx(HP,{})})]}),u.jsx(ri,{position:"top-[calc(100%+8px)]",content:"Close",children:u.jsx("button",{onClick:()=>e(!1),className:`p-2 ${E.button}`,children:u.jsx(mG,{})})})]})]}),u.jsxs("div",{className:E.content,children:[u.jsx("div",{ref:m,className:`song-list-container ${E.songsListTab} ${c!=="Songs"?"opacity-0":"opacity-100"}`,children:S}),c==="Songs"&&!n&&u.jsxs(u.Fragment,{children:[u.jsx(G,{hover:"scale",size:"clear",onClick:()=>_(),className:`${E.absoluteButton} left-[20px]`,children:u.jsx(DP,{className:"w-[30px]"})}),u.jsx(G,{hover:"scale",size:"clear",onClick:()=>x(),className:`${E.absoluteButton} right-[20px]`,children:u.jsx(xG,{className:"w-[30px]"})})]}),u.jsx("div",{className:`absolute inset-0 z-20 ${c==="Lyric"?"":"hidden"}`,children:T}),u.jsx("div",{className:`absolute inset-0 z-20 ${c==="Karaoke"?"":"hidden"}`,children:u.jsx("h1",{className:"text-center font-semibold opacity-60 relative top-[50%]",children:"Coming soon..."})})]}),c!=="Songs"&&u.jsxs("p",{className:`text-center ${n&&E.fadeTransition}`,children:[o.name,u.jsxs("span",{className:"opacity-70",children:[" - ",o.singer]})]})]})]})}const uK=f.memo(cK),dK="/HD-MP3/assets/tutorial1-1bb11af6.png",hK="/HD-MP3/assets/tutorial2-2363d450.png";function qP({audioRef:t,theme:e,song:n,admin:r,lyric:i}){const{userSongs:s,setUserSongs:o}=ut(),[a,l]=f.useState(!1),[c,d]=f.useState(!1),[h,m]=f.useState(i?i.base:""),[p,y]=f.useState([]),[x,_]=f.useState(i?i.real_time:[]),[v,g]=f.useState(1),[w,E]=f.useState(!1),[S,T]=f.useState(""),[k,b]=f.useState(x?x.length:0),[D,I]=f.useState(h||""),[L,W]=f.useState(!1),F=f.useRef(!0),te=f.useRef(null),ue=f.useRef(0),J=f.useRef(0),ke=f.useRef("smooth"),j=f.useRef(null),$=f.useRef(null),{setSuccessToast:H,setErrorToast:N}=mn(),U=fn(),X=f.useMemo(()=>x.length>=p.length,[p,x,c]),ie=f.useMemo(()=>x.length===p.length-1,[p,x,c]),oe=f.useMemo(()=>c&&!!p.length&&!X,[X,p,c]),de=()=>{var ne;return(ne=j.current)==null?void 0:ne.toggle()},me=ne=>{var _e;T(ne),(_e=j.current)==null||_e.toggle()},Ue=f.useMemo(()=>!!p.length,[p]),Gt=()=>{const ne=t.current;ne&&(ne.play(),l(!0),d(!0))},hr=()=>{const ne=t.current;ne&&(ne.pause(),l(!1))},Ja=ne=>{var vs;const _e=t.current;_e&&(_e.playbackRate=ne,g(ne)),(vs=$.current)==null||vs.close()},R4=()=>{m(D),de()},P4=ne=>{const _e=t.current;_e&&(_e.currentTime=ne)},Q1=f.useCallback(()=>{if(!p.length)return;const ne=t.current;if(!ne||X||J.current==+ne.currentTime.toFixed(1))return;ie?ue.current=+ne.duration.toFixed(1):ue.current=+ne.currentTime.toFixed(1);const _e=p[k],vs={start:J.current,text:_e,end:ue.current};J.current=ue.current,_([...x,vs]),b(k+1)},[p,k]),N4=()=>{if(k<=0)return;if(t.current){J.current=x[k-1].start,ue.current=0;const _e=x.slice(0,k-1);_(_e),b(k-1)}},D4=ne=>{const _e=[...s],vs=AF(ne,_e);if(vs==null){N({message:"No song found"}),E(!1);return}return o(_e),console.log("setActuallySongs"),vs},j4=async()=>{try{E(!0),hr(),await Wn({collection:"lyrics",data:{real_time:x,base:h},id:n.id}),await Wn({collection:"songs",data:{lyric_id:n.id},id:n.id}),H({message:"Add lyrics successful"}),W(!1)}catch(ne){console.log({message:ne})}finally{E(!1)}},O4=async()=>{try{E(!0),await Wn({collection:"songs",data:{lyric_id:""},id:n.id}),await Oc({collection:"lyrics",id:n.lyric_id}),H({message:"Delete lyric successful"});const ne={...n,lyric_id:""};if(!D4(ne))return;Wm()}catch(ne){console.log(ne)}finally{E(!1)}},Y1=()=>{hr(),Q1()},J1=ne=>{const _e=t.current;ne==="next"?_e.currentTime+=2:_e.currentTime-=2},M4=()=>{L?me("confirm-navigate"):Wm()},Wm=()=>U(r?"/dashboard":"/mysongs");f.useEffect(()=>{if(h){const ne=h.split(/\r?\n/).filter(_e=>_e);y(ne)}p.length&&F.current&&(F.current=!1),console.log("check firstTimeRender",F.current)},[h]),f.useEffect(()=>{const ne=t.current;if(ne){if(x.length){const _e=x[x.length-1].end;ne&&(ne.currentTime=_e,J.current=_e)}return ne.addEventListener("ended",Y1),()=>{ne.removeEventListener("ended",Y1)}}},[]),f.useEffect(()=>{if(!L){if(!i){W(!0);return}(i.real_time!==x||i.base!=h)&&W(!0)}},[h,x]),f.useEffect(()=>{if(!L)return;const ne=_e=>{_e.preventDefault()};return window.addEventListener("beforeunload",ne),()=>{window.removeEventListener("beforeunload",ne)}},[L]);const L4=`${e.type==="light"?"text-[#333]":"text-white"}`,it={section:`bg-${e.alpha} p-[10px] rounded-[12px]`,row:"flex no-scrollbar",col:"flex-grow flex flex-col gap-[10px]",formGroup:"flex flex-col gap-[5px] flex-grow",label:"text-md font-[500]",button:`${e.content_bg} rounded-full font-[500] text-white text-[14px] px-[10px]`,icon:"h-[20px] w-[20px]",lyricBox:"list-none h-full px-[10px] max-[549px]:w-[100%] pb-[20%] ",listItem:"h-[34px] w-[34px] text-[14px]",changeSpeedBtn:"inline-flex items-center hover:brightness-90 px-[20px] py-[5px] rounded-full text-white text-[14px]",ctaContainer:"flex justify-between space-x-[10px] mb-[20px]",getActiveClass:ne=>ne?e.content_bg:`bg-${e.alpha}`},F4=f.useMemo(()=>{switch(S){case"":return u.jsx(u.Fragment,{});case"tutorial":return u.jsxs(u.Fragment,{children:[u.jsx(ys,{title:"Tutorial",close:de}),u.jsxs("div",{className:"h-[500px] max-h-[75vh] overflow-y-auto no-scrollbar",children:[u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Phím chắc năng:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:hK,alt:""}),u.jsx("br",{}),u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Cách thêm lời bài hát:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:dK,alt:""})]})]});case"add-base-lyric":return u.jsxs(u.Fragment,{children:[u.jsx("textarea",{ref:te,value:D,onChange:ne=>I(ne.target.value),className:"w-full rounded-[4px] mb-[10px] min-h-[50vh] bg-transparent border p-[10px]"}),u.jsx(G,{variant:"primary",onClick:R4,className:it.button,children:"Ok"})]});case"delete-lyric":return u.jsx(Lr,{loading:w,label:"Delete playlist ?",theme:e,callback:O4,close:de});case"confirm-navigate":return u.jsx(Lr,{loading:w,label:"Your change not save",theme:e,buttonLabel:"Close and don't save",callback:Wm,close:de})}},[S,D]),$4=u.jsxs("div",{className:`${it.ctaContainer} ${L4}`,children:[u.jsxs("div",{className:"left flex flex-wrap gap-[10px]",children:[u.jsx("button",{onClick:()=>me("add-base-lyric"),className:it.button,children:h?"Change lyric":"Add lyric"}),u.jsxs(yu,{children:[u.jsx(vu,{ref:$,children:u.jsxs("button",{className:`${it.button} ${it.changeSpeedBtn}`,children:[v,"x"]})}),u.jsx(xu,{appendTo:"parent",children:u.jsx(yo,{theme:e,children:u.jsxs("div",{className:"flex justify-center gap-[8px]",children:[u.jsx(G,{variant:"circle",onClick:()=>Ja(1),className:`${it.getActiveClass(v===1)} ${it.listItem}`,children:"1x"}),u.jsx(G,{variant:"circle",onClick:()=>Ja(1.2),className:`${it.getActiveClass(v===1.2)} ${it.listItem}`,children:"1.2x"}),u.jsx(G,{variant:"circle",onClick:()=>Ja(1.5),className:`${it.getActiveClass(v===1.5)} ${it.listItem}`,children:"1.5x"})]})})})]}),a?u.jsx(G,{variant:"primary",onClick:hr,className:it.button+(c?"":"disable"),children:"Pause"}):u.jsx(G,{variant:"primary",onClick:Gt,className:it.button+(a||!Ue?"disable":""),children:"Play"}),u.jsx(G,{variant:"primary",onClick:Q1,className:it.button+(!oe&&"disable"),children:u.jsx(Li,{className:"w-[16px]"})}),u.jsx(G,{variant:"primary",onClick:N4,className:it.button+(!x.length||!p.length?"disable":""),children:u.jsx(gT,{className:"w-[16px]"})}),u.jsxs(G,{variant:"primary",onClick:()=>J1("prev"),className:it.button+(!c||!p.length?"disabele":""),children:[u.jsx(VD,{className:"w-[16px] mr-[5px]"}),"2s"]}),u.jsxs(G,{variant:"primary",onClick:()=>J1("next"),className:it.button+(!c||!p.length?"disabele":""),children:["2s",u.jsx(HD,{className:"w-[16px] ml-[5px]"})]})]}),u.jsx("button",{onClick:()=>me("tutorial"),children:u.jsx(qj,{className:"w-[20px]"})})]});return u.jsxs("div",{className:`${w?"disable":""}`,children:[u.jsxs("button",{onClick:M4,className:`inline-flex text-[20px] font-bold mb-[14px] ${e.content_hover_text}`,children:[u.jsx(YD,{className:"w-[25px]"}),u.jsx("span",{className:"ml-[12px]",children:n.name})]}),$4,u.jsxs("div",{className:`${it.row} bg-${e.alpha} rounded-[12px] pt-[10px] mb-[0] h-[55vh] min-h-[200px] overflow-auto`,children:[u.jsx("div",{className:it.lyricBox+"w-[50%]",children:p.length?u.jsx(u.Fragment,{children:p.map((ne,_e)=>u.jsx(jP,{inUpload:!0,scrollBehavior:ke,className:"pb-[30px] leading-[1.2] mr-[24px]",active:_e===k,done:_e!=k,children:ne},_e))}):u.jsx("h1",{children:"Base lyric..."})}),u.jsx("div",{className:it.lyricBox+" border-none w-[50%]",children:!!(x!=null&&x.length)&&x.map((ne,_e)=>u.jsx(eK,{handleSetTime:P4,lyric:ne,theme:e,index:_e,realTimeLyrics:x,setRealTimeLyrics:_},_e))})]}),u.jsx(G,{className:`${e.content_bg} ${L?"":"disable"} text-[14px] rounded-full mt-[20px]`,variant:"primary",onClick:j4,children:"Save"}),u.jsx(G,{className:"bg-red-500 text-[#fff] text-[14px] font-bold ml-[12px] rounded-full mt-[20px]",variant:"primary",onClick:()=>T("delete-lyric"),children:"Delete"}),u.jsx(Br,{ref:j,variant:"animation",className:"w-[700px] max-w-[calc(100vw-40px)]",children:F4})]})}const GP=({audioEle:t,className:e,isOpenFullScreen:n,active:r})=>{const{playStatus:{lyricSize:i}}=K(dr),[s,o]=f.useState(0),a=f.useRef("instant"),l=f.useRef(null),{currentSong:c}=K(Ne),d=f.useRef(0),{loading:h,songLyric:m}=DG({audioEle:t,isOpenFullScreen:n}),p=f.useCallback(()=>{const v=t.currentTime;if(o(v),Math.abs(v-d.current)>5){a.current="instant",d.current=v;return}d.current=v},[]),y={small:"text-[20px] sm:text-[30px]",medium:"text-[25px] sm:text-[35px]",large:"text-[30px] sm:text-[40px]"},x=()=>m.real_time.map((v,g)=>{const E=s>=v.start-.5&&s<v.end-.5;return u.jsx(jP,{done:!E&&s>v.end-.5,active:E,scrollBehavior:a,className:`${y[i||"medium"]} ${E?"active":""} mb-[30px]`,children:v.text},g)});f.useEffect(()=>{if(t)return t.addEventListener("timeupdate",p),()=>{t&&t.removeEventListener("timeupdate",p)}},[]),f.useEffect(()=>{const v=document.querySelector(".active.lyric");v&&v.scrollIntoView({behavior:"instant",block:"center"})},[r]),f.useEffect(()=>{a.current!=="instant"&&(a.current="instant")},[c]);const _={container:"no-scrollbar pt-[20px] mask-image overflow-y-auto overflow-x-hidden",loadingContainer:"flex justify-center items-center h-full w-full",loadingIcon:"opacity-[.6] animate-spin w-[35px] duration-[2s]"};return u.jsxs("div",{ref:l,className:`${_.container} ${e}`,children:[h&&u.jsx("div",{className:_.loadingContainer,children:u.jsx("span",{children:u.jsx(Qs,{className:_.loadingIcon})})}),!h&&u.jsx(u.Fragment,{children:m.real_time.length?x():u.jsx("div",{className:_.loadingContainer,children:u.jsx("h1",{className:"text-[30px] opacity-60",children:"..."})})})]})},fK=({audioEle:t,setIsOpenFullScreen:e,isOpenFullScreen:n})=>{const{theme:r}=Z(),{handleNext:i,currentSong:s,handlePlayPause:o,playStatus:{isPlaying:a,isWaiting:l,isError:c}}=z1({audioEle:t}),d=Dn(),h=f.useMemo(()=>d.pathname.includes("edit"),[d]),m=f.useMemo(()=>l?u.jsx(Qs,{className:"w-10 animate-spin"}):c&&s.name?u.jsx(Dv,{className:"w-10 "}):a?u.jsx(jv,{className:"w-10 "}):u.jsx(Ov,{className:"w-10"}),[l,c,a]),p={wrapper:`fixed bottom-0 transition-transform w-full h-[80px] border-t border-${r.alpha} z-40  px-4`,container:`absolute inset-0 ${r.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1]`,songImageWrapper:"flex flex-row items-center flex-grow h-full",image:"w-[54px] h-[54px] flex-shrink-0",cta:"pl-2 flex-shrink-0"};return u.jsxs("div",{className:`${p.wrapper} ${h?"translate-y-full":""}`,children:[u.jsx("div",{className:`${p.container} ${n?"opacity-0 transition-opacity delay-[.3s]":""}`}),u.jsxs("div",{className:"flex items-center  h-full",children:[u.jsx("div",{onClick:()=>e(!0),className:"mobile-current-song flex-grow",children:u.jsxs("div",{className:p.songImageWrapper,children:[u.jsx("div",{className:p.image,children:u.jsx(pi,{src:s.image_url||$1,classNames:"rounded-full"})}),u.jsx("div",{className:"flex-grow  ml-[10px]",children:s.song_url&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"h-[30px] relative overflow-hidden",children:u.jsx("div",{className:"absolute left-0 whitespace-nowrap font-playwriteCU leading-[1.5]",children:s.name||"name"})}),u.jsx("p",{className:"opacity-70 line-clamp-1",children:s.singer||"singer"})]})})]})}),u.jsxs("div",{className:`${p.cta} ${!s.name&&"disable"}`,children:[u.jsx("button",{className:"p-[4px]",onClick:()=>o(),children:m}),u.jsx("button",{onClick:i,className:"p-[4px]",children:u.jsx(fT,{className:"w-10"})})]})]})]})};function mK({isOpenFullScreen:t}){const e=()=>{const n=document.querySelector("body");n&&(t?n.style.overflow="hidden":n.style.overflow="auto")};f.useEffect(()=>{e()},[t])}function pK(){const[t,e]=f.useState(!1);return f.useEffect(()=>{const n=()=>{window.innerWidth>549&&window.innerWidth<800?e(!0):e(!1)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),{isLandscape:t}}function gK({audioEle:t,isOpenFullScreen:e,setIsOpenFullScreen:n}){const r=Ke(),{theme:i}=Z(),{currentSong:s}=K(Ne),{playStatus:{isPlaying:o}}=K(dr),{queueSongs:a}=K(gi),[l,c]=f.useState("Playing"),[d,h]=f.useState(!1),m=f.useRef(null),p=f.useRef(null),y=f.useRef(null),x=f.useRef(null);mK({isOpenFullScreen:e}),MP({bgRef:p,currentSong:s});const{isLandscape:_}=pK(),v=l!="Playing"&&!d||_,g=b=>{let D=0,I=b;for(;!I.classList.contains("target-class")&&D<5;)I=I.parentElement,D++;return I},w={opacity:"0",transform:"translate(-100%, 0)"},E=b=>{let D=0,I=b.previousElementSibling;for(;I&&D<100;)Object.assign(I.style,w),D++,I=I.previousElementSibling},S=(b,D,I)=>{const L=b.target,W=g(L);E(W),Object.assign(W.style,w),x.current&&(x.current.style.opacity="0"),setTimeout(()=>{r(Gn({...D,currentIndex:I,song_in:s.song_in}))},500)},T=f.useMemo(()=>u.jsx(u.Fragment,{children:s&&u.jsx(u.Fragment,{children:s.currentIndex===a.length-1?u.jsx("p",{children:"..."}):a.map((b,D)=>{if(D>s.currentIndex)return u.jsx(xI,{variant:"playing-next",theme:i,song:b,onClick:I=>S(I,b,D)},D)})})}),[s,a]);f.useEffect(()=>{x.current&&(x.current.style.opacity="1")},[s]),f.useEffect(()=>{const b=m.current;b&&(e?(b.style.transform="translate(0)",b.style.zIndex="99"):(b.style.transform="translate(0, 100%)",setTimeout(()=>{b.style.zIndex="-10"},500)))},[e]);const k={headerWrapper:"flex mb-4",container:"flex-grow flex flex-col relative overflow-hidden",songImage:"flex-shrink-0 transition-[height, width] origin-top-left",control:"flex flex-col-reverse justify-center",bgImage:"absolute inset-0 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background-image] duration-[.3s ]",overlay:"absolute inset-0 bg-zinc-900 bg-opacity-60 bg-blend-multiply overflow-hidden",button:"flex justify-center items-center rounded-full w-[35px]"};return u.jsx(u.Fragment,{children:u.jsxs("div",{ref:m,style:{transform:"translate(0, 100%)",zIndex:"-10"},className:"fixed inset-0 bg-zinc-900 text-white overflow-hidden transition-[transform] duration-[.3s] ease-linear",children:[u.jsx("div",{ref:p,className:k.bgImage}),u.jsx("div",{className:k.overlay}),u.jsxs("div",{className:"absolute inset-0 z-10 p-4 flex flex-col",children:[u.jsxs("div",{className:k.headerWrapper,children:[u.jsxs(yu,{appendOnPortal:!0,children:[u.jsx(vu,{children:u.jsx("button",{className:`${k.button} p-[6px] left-0 bg-gray-500 bg-opacity-20`,children:u.jsx(hT,{className:"w-full"})})}),u.jsx(xu,{appendTo:"portal",position:"right-bottom",origin:"top left",children:u.jsx(HP,{})})]}),u.jsx(k4,{inFullScreen:!0,className:"w-fit font-[500]",setActiveTab:c,activeTab:l,render:b=>b,tabs:["Songs","Playing","Lyric"]}),u.jsx("button",{className:`${k.button} p-[6px] bg-gray-500 bg-opacity-20`,onClick:()=>n(!1),children:u.jsx(KD,{className:"w-full"})})]}),u.jsxs("div",{ref:y,className:k.container,children:[u.jsxs("div",{ref:x,className:`transition-opacity duration-300 ${v?"flex ":""}`,children:[f.useMemo(()=>u.jsx(uQ,{expand:l==="Playing"&&!_,data:s}),[s,o,l,_]),u.jsxs("div",{className:`ml-2 ${v?"block":"hidden"}`,children:[u.jsx("div",{className:"font-playwriteCU",children:s.name}),u.jsx("div",{className:"opacity-70",children:s.singer})]})]}),u.jsxs("div",{className:`mt-3 justify-between items-center ${l!="Playing"?"hidden":"flex"}`,children:[u.jsxs("div",{className:"flex-grow",children:[u.jsx("div",{className:"h-[34px]",children:u.jsx(Jh,{autoScroll:!0,className:`${l==="Playing"||_?"text-lg":""} leading-[1.5] font-playwriteCU`,content:s.name||"..."})}),u.jsx("div",{className:"h-[33px]",children:u.jsx(Jh,{autoScroll:!0,className:`opacity-60 ${l==="Playing"||_?"text-lg":"text-base"}`,content:s.singer||"..."})})]}),u.jsx(UP,{audioEle:t})]}),f.useMemo(()=>u.jsx(GP,{active:l==="Lyric",className:`${l==="Lyric"?"flex-1 transition-all block":"hidden"}`,audioEle:t,isOpenFullScreen:e&&l==="Lyric"}),[e,l,_]),u.jsx("div",{className:`leading-[2.2] font-playwriteCU my-2 ${l==="Songs"?"":"hidden"}`,children:"Playing next"}),u.jsx("div",{className:`flex-grow no-scrollbar overflow-auto ${l==="Songs"?"":"hidden"}`,children:T}),u.jsx("div",{className:`${k.control} ${l==="Songs"?"opacity-0 pointer-events-none h-[0px]":""} ${l==="Playing"?"flex-grow":""}`,children:f.useMemo(()=>u.jsx(WP,{audioEle:t,isOpenFullScreen:!1}),[e])})]})]})]})})}function yK(){const{theme:t}=Z(),{loading:e,user:n}=dt(),{logIn:r}=gu(),i=async()=>{try{await r()}catch(o){console.log(o)}finally{}},s={icon:"w-7 mr-2 inline",linkItem:`py-3 border-b text-lg border-${t.alpha} last:border-none`,button:`${t.content_bg} rounded-full`};return u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("div",{className:"text-xl font-playwriteCU leading-[2.2] mb-3",children:"Library"}),e?[...Array(3).keys()].map(o=>u.jsx(uI,{},o)):u.jsx(u.Fragment,{children:n?u.jsxs(u.Fragment,{children:[u.jsx(Mp,{className:s.linkItem,to:At.MySongs,icon:u.jsx(xa,{className:s.icon+t.content_text}),label:"All songs",arrowIcon:u.jsx(vp,{className:"w-6"})}),u.jsx(Mp,{className:s.linkItem,to:At.MySongs,icon:u.jsx(mT,{className:s.icon+t.content_text}),label:"Favorite",arrowIcon:u.jsx(vp,{className:"w-6"})}),u.jsx(Mp,{className:s.linkItem,to:At.MySongs,icon:u.jsx(dT,{className:s.icon+t.content_text}),label:"Recent",arrowIcon:u.jsx(vp,{className:"w-6"})})]}):u.jsxs(G,{onClick:i,className:`${t.content_bg} rounded-md space-x-1 py-1`,children:[u.jsx(Nv,{className:"w-7"}),u.jsx("span",{className:"font-playwriteCU leading-[2.2]",children:"Login"})]})})]})}function vK(){const{theme:t}=Z(),{loading:e,user:n}=dt(),r=f.useRef(null),{logOut:i}=gu(),[s,o]=f.useState(""),a=()=>{var m;return(m=r.current)==null?void 0:m.toggle()},l=m=>{var p;o(m),(p=r.current)==null||p.toggle()},c=async()=>{try{await i()}catch(m){console.log("signOut error",{messsage:m})}finally{a()}},d=f.useMemo(()=>{switch(s){case"theme":return u.jsx(I4,{close:a});case"info":return u.jsx(X1,{close:a});case"logout":return u.jsx(Lr,{close:a,callback:c,loading:!1,theme:t,label:"Log out ?"})}},[s]),h={linkItem:`py-3 text-lg w-full border-b border-${t.alpha} space-x-2 last:border-none flex items-center`,icon:"w-7"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("div",{className:"text-xl font-playwriteCU leading-[2.2] mb-3",children:"Setting"}),n&&u.jsxs("div",{className:`bg-${t.alpha} p-3 rounded-md flex mb-2`,children:[u.jsx(Ny,{className:"h-[65px] w-[65px]"}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-lg font-[500]",children:n.display_name}),u.jsx("p",{className:"opacity-70 font-[500]",children:"Vip member ❤️"})]})]}),e?[...Array(3).keys()].map(m=>u.jsx(uI,{},m)):u.jsxs("div",{className:"",children:[u.jsxs("button",{className:h.linkItem,onClick:()=>l("theme"),children:[u.jsx(yT,{className:h.icon}),u.jsx("span",{children:"Theme"})]}),u.jsxs("button",{className:h.linkItem,onClick:()=>l("info"),children:[u.jsx(pT,{className:h.icon}),u.jsx("span",{children:"Info"})]}),n&&u.jsxs("button",{className:h.linkItem,onClick:()=>l("logout"),children:[u.jsx(Nv,{className:h.icon}),u.jsx("span",{children:"Logout"})]})]})]}),u.jsx(Br,{ref:r,variant:"animation",children:d})]})}function xK({children:t,className:e,...n},r){const i=n.variant||"default",{theme:s}=Z(),[o,a]=f.useState(i==="default"),[l,c]=f.useState(i==="default"),d=()=>{l&&c(!1),o||a(!0)},h=p=>{p.preventDefault(),p.stopPropagation(),i==="default"&&n.closeModal&&n.closeModal(),i==="animation"&&d()};f.useImperativeHandle(r,()=>({toggle:d})),f.useEffect(()=>{i!=="default"&&(l||setTimeout(()=>{a(!1)},400))},[l]),f.useEffect(()=>{i!=="default"&&o&&setTimeout(()=>{c(!0)},100)},[o]);const m={unMountedContent:"opacity-0 scale-[.95]",mountedContent:"opacity-100 scale-[1]",unMountedLayer:"opacity-0",mountedLayer:"opacity-60"};return u.jsx(u.Fragment,{children:o&&mo.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[99]",children:[u.jsx("div",{onClick:h,className:`transition-opacity duration-300 absolute bg-black inset-0 z-[90]
                             ${l?m.mountedLayer:m.unMountedLayer}
                        `}),u.jsx("div",{className:`absolute duration-300 transition-[transform,opacity] z-[99] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2
                            ${l?m.mountedContent:m.unMountedContent}
                        `,children:u.jsx(yo,{className:e||"",theme:s,children:t})})]}),document.getElementById("portals"))})}const Br=f.forwardRef(xK);function wK({isOpenSongQueue:t,setIsOpenSongQueue:e}){const n=Ke(),{theme:r}=Z(),{user:i}=dt(),{queueSongs:s}=K(gi),{currentSong:o}=K(Ne),[a,l]=f.useState("Queue"),c=f.useCallback((m,p)=>{p!==o.currentIndex&&n(Gn({...m,currentIndex:p}))},[o]),d=f.useCallback(()=>{e(!1),n(bP()),n(lo()),Jt("duration",0)},[]);f.useEffect(()=>{i&&(i.email||(e(!1),l("Queue")))},[i]),f.useEffect(()=>{setTimeout(()=>{t||l("Queue")},1e3)},[t]);const h={textColor:`${r.type==="dark"?"text-white":"text-[#333]"} `,mainContainer:`fixed w-[300px] flex flex-col bottom-[80px] right-[0] top-[0] z-20 px-3 pt-4 ${r.container} border-l-[1px] border-${r.alpha} transition-[transform] duration-[.5s] linear delay-100`,songListContainer:"flex-grow overflow-y-auto pb-[10px] overflow-x-hidden no-scrollbar"};return u.jsxs("div",{className:`${h.textColor} ${h.mainContainer} ${t?"translate-x-0---":"translate-x-full"}     `,children:[u.jsx("div",{className:"leading-[2.2] font-playwriteCU mb-2",children:"Song queue"}),u.jsx("div",{className:h.songListContainer,children:a==="Queue"&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"",children:u.jsx(ds,{variant:"queue",songs:s,handleSetSong:c})}),u.jsx("div",{className:"text-center",children:!!s.length&&u.jsxs(G,{onClick:d,size:"small",className:`${r.content_bg} rounded-full my-5 py-1 space-x-1`,children:[u.jsx(lc,{className:"w-6"}),u.jsx("span",{className:"font-playwriteCU leading-[2.2]",children:"Clear"})]})})]})})]})}const _K=f.memo(wK);function EK(t,e,n){const{currentSong:r}=K(Ne),[i,s]=f.useState(!1),[o,a]=f.useState(0),l=f.useRef(),c=f.useRef(),d=()=>{s(!1),a(Math.random())},h=()=>{clearTimeout(c.current),clearTimeout(l.current)},m=async()=>{if(!n)return;const p=document.querySelector(".song-thumb.active"),y=document.querySelector(".song-list-container");if(p&&y){const x=$P(p,y,!0);let _=Ls.focusDelay;x||(_=0),l.current=setTimeout(()=>{s(!0)},_)}};return f.useEffect(()=>{if(n&&!(e||!r.id))return setTimeout(()=>{window.addEventListener("mousemove",d),window.dispatchEvent(new Event("mousemove"))},1e3),()=>{window.removeEventListener("mousemove",d),h()}},[n]),f.useEffect(()=>(c.current=setTimeout(()=>{m()},t),()=>{h()}),[o]),n?i:!1}const KP=({admin:t})=>{const{currentSong:e}=K(Ne),{isOnMobile:n}=Z(),[r,i]=f.useState(!1),[s,o]=f.useState(!1),[a,l]=f.useState(!1),c=f.useRef(null),d=EK(Ls.focusDelay,n,r),h=u.jsxs(u.Fragment,{children:[!t&&u.jsx(uK,{audioEle:c.current,idle:d,isOpenFullScreen:r,setIsOpenFullScreen:i}),u.jsx(_K,{isOpenSongQueue:s,setIsOpenSongQueue:o}),u.jsx(aK,{admin:t,audioEle:c.current,idle:d&&r,isOpenFullScreen:r,isOpenSongQueue:s,setIsOpenSongQueue:o,setIsOpenFullScreen:i})]}),m=u.jsxs(u.Fragment,{children:[u.jsx(gK,{audioEle:c.current,isOpenFullScreen:r,setIsOpenFullScreen:i}),u.jsx(fK,{audioEle:c.current,isOpenFullScreen:r,setIsOpenFullScreen:i})]});return f.useEffect(()=>{a||c.current&&l(!0)},[]),u.jsxs("div",{className:"absolute",children:[u.jsx("audio",{ref:c,src:e.song_url,className:"hd-mp3 hidden"}),a?n?m:h:""]})},B1="data:image/gif;base64,R0lGODlhJAAkAIABAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NmRjOGMyNC03YmYxLTQxZTMtYjQ2Zi1mY2ZhMDk4MDE1YWYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTBDRTc0QzlGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTBDRTc0QzhGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YzBhNGU4OWYtNjc4Yy00NmMyLTg4NmUtYzIxNGE0NTIwZDRjIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODRlMDBjYmEtZjhlNy03YzQ4LWE4MTgtNDc3NTI3MGQ1ZTAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQgAAQAsAAAAACQAJAAAAnKMj5nArQ9jc7HWyax+GOx/dCAojltpWmgqYazqvu0kz1StrHgYp6tO6gWAn59wZKSxkjcTM7MUEk/SY1BpmGqeHhs0W8Vywk3tkPw9iztcBLfNW7Pl9PLcXk/f8Xz9vguWB6h254Y2+Id4aLjH2Kc4UQAAIfkECQgAAQAsAAAAACQAJAAAAnSMj6nL7Q+jnAzYS+XFGW7beV/4fADpmGijrkvrJnA2z1Q9hvhG7lznA+lyBpuMGAieDiYlQulkIpvTKk9KFRatv2RW671uxeHskwv+ptHLsRnbhbLPZHW7vK6r6XF21J33Bngnp2fY98UXuNikSOg3B8dYAAAh+QQJCAABACwAAAAAJAAkAAACfIyPqcvtD6OctNqLKdg8N955C7iJI4mQAKam6NUeMTMHda3cr4EnOugCfnY2Yi8Y4hmXKqHSWYQ2mclodSqllmTY7fOqbSK9VnLXHB6Ludk2Vg1nv+Vo9zT+rc/zK3qf/wNmt8aHV0Z4aHj2l+inFqgXiQjJuKgYRnkJUgAAIfkECQgAAQAsAAAAACQAJAAAAnuMj6nL7Q+jnLTaC7K+T2/eeBkYiiQjAlyKsJh5uJYc0BRtTzgMpbsn8fFqQ4cQGCuWjqok0vA7toZR4fRJxDJHzg+Uur16s+Nt86sFM8VcdDncbZPlZvZ5fq/H82rp3m5XxZe29mfoZnWIF9hH1+gDqKiHOPhWSBlJWQAAIfkECQgAAQAsAAAAACQAJAAAAn6Mj6nL7Q8RmDTaQ+u1eW7efVg4ZqLRARIppqsZpW6pQTIbzPZd57jD6+keQQ/NuAu+esDiEkl0HlUxKerXKFKvsCTvuY0qp2Dw8IzTlslTdNf3VrO5Qiu8Hre78d/5HSpHB5imR5g3Jhi2d7OWaGbIN4j4pwjJ6Lco00gJVgAAIfkECQgAAQAsAAAAACQAJAAAAn2EH6nL7XnQmxRGULO7WHsbfRPHiQ95mRsqqQvbBqUGG29K13eYw3tMqXVAwJFOMcsIf7YeizmsLJE45ZHYtPqoPO2TWzxdZVXpOGneYqPBc7mtJnflsekaCkXry3Z61h/VtzcnyGcYN1jnRnj4dQf2V8g46QiIB0ly+bhWAAAh+QQJCAABACwAAAAAJAAkAAACfYyPqcvtD+MDtMobqt6Y7Q90C8iJCamZJ0qpCNu6Bhwen0S/JZTb+wTTpSK92c9RzBwbyRsx6BvyoEYpkCW0RLVVVDbWBSuxW7EzDPrW0OrzmPs2U+Nrevvnzs/11ib+T8ZWVufXB+g1qHZnyAhX6HhIopg4yAfZKEkpiFYAACH5BAkIAAEALAAAAAAkACQAAAJ7jI+py+0Po5y02ouB3tht3jGfFopjuYwqgK5npCLuJ8XHDEK2gZP3ywMGeqwfzZgb9mTCnRLHPAalz1k06SRefVPsEsmthrXgYnf8PZvFa7J6206z4fBs8w4t08t2at+qF6j2h+YnRxiX9ybIhrg3iOdlqDjH6Fa5qFYAACH5BAkIAAEALAAAAAAkACQAAAJ1jI+py+0Po5y02otzArxr1nmfEnIjWZ5bqh4l0Lqs8WK1HNpzcFs9/9o5fkFhg1gUQZBJWISZlECL0l3ThFMCc1lq10mzXhFT8Db6JYubam7Yffa+teVymz5O6+fyuLm+hgd39ReIxRd0d+inmLjH+GX3+FIAACH5BAUIAAEALAAAAAAkACQAAAJwjI+py+0Po5y0PoCzhVlv12EfGI5NCJgMqi5sm7zwIc9BPeOw3vKqb6oBLyUaqshB3o4diZDpSTaN0FTkWUVgo8sslbtlapXh43hqKJfP4Ko1TY574ehue24XffV0KJuf9xa4tifoZih351f4h9hRAAA7",Cy=({data:t,inDetail:e,theme:n,active:r,link:i})=>{const s={button:`rounded-full text-[#201f1f] p-[4px] hover:bg-${n==null?void 0:n.alpha}`,imageContainer:"absolute inset-0 overflow-hidden rounded-[6px]",absoluteContainer:"absolute inset-0 opacity-0 group-hover:opacity-100",overlay:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-60 transition-opacity",buttonContainer:"justify-center items-center h-full z-10 relative",buttonWrapper:"flex items-center justify-center z-10 h-full w-full relative"},o=u.jsxs("div",{className:s.imageContainer,children:[u.jsx(pi,{classNames:"group-hover:scale-[1.05] transition-[transform] duration-[.25s]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsxs("div",{className:`${s.absoluteContainer} ${r?"opacity-100":"opacity-0"}`,children:[u.jsx("div",{className:s.overlay}),r&&u.jsx("div",{className:s.buttonWrapper,children:u.jsx("img",{src:B1,alt:"",className:"w-[30px]"})})]})]});return e?u.jsx("div",{className:"group relative pt-[100%] w-full block",children:o}):u.jsxs(u.Fragment,{children:[u.jsx(Kr,{to:`${i||"/playlist/"+t.id}`,className:"group relative pt-[100%] w-full block",children:o}),u.jsx("div",{className:"text-xl font-[500] line-clamp-1 leading-[24px]  mt-[6px]",children:t.name})]})};function SK({content:t,className:e}){const n=f.useRef(null),r=f.useRef(null);return LG({textRef:r,textWrapperRef:n,content:t}),u.jsx("div",{ref:n,className:"overflow-hidden relative h-full ",children:u.jsx("div",{ref:r,className:`absolute left-0 whitespace-nowrap ${e}`,children:t||"..."})})}const Jh=f.memo(SK);function XP({openModal:t}){const{theme:e}=Z(),n=Ke(),r=l=>{t(l)},[i,s]=LP("isCrossFade",!1),o=()=>{s(!i),n(Zn({isCrossFade:!i}))},a={menuItem:`${e.content_hover_text} hover:bg-${e.alpha} rounded-md font-[500] px-2 py-2 inline-flex items-center cursor-pointer`,icon:"w-[25px] mr-[8px]",divide:`h-[1px]  w-[calc(100%-20px)] my-[4px] mx-auto bg-${e.alpha}`};return u.jsx(u.Fragment,{children:u.jsx(yo,{color:"sidebar",theme:e,children:u.jsxs("ul",{className:"flex flex-col w-[200px]",children:[u.jsxs("li",{className:`${a.menuItem} justify-between cursor-default`,children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(Ov,{className:a.icon}),"Cross fade"]}),u.jsx(Iy,{active:i,cb:o})]}),u.jsxs("li",{className:`${a.menuItem}`,onClick:()=>r("theme"),children:[u.jsx(yT,{className:a.icon}),"Themes"]}),u.jsx("div",{className:a.divide}),u.jsxs("li",{className:`${a.menuItem}`,onClick:()=>r("info"),children:[u.jsx(pT,{className:a.icon}),"Info"]})]})})})}function bK({className:t}){const[e,n]=f.useState(!1),{theme:r}=Z(),i=()=>{const o=document.querySelector(".main-container");if(!o)return;const a=o.scrollTop||0;n(a>100)},s=()=>{const o=document.querySelector(".main-container");o==null||o.scroll({behavior:"smooth",top:0})};return f.useEffect(()=>{const o=document.querySelector(".main-container");if(o)return o.addEventListener("scroll",i),()=>{o.removeEventListener("scroll",i)}},[]),u.jsx(G,{onClick:s,variant:"circle",size:"clear",className:`absolute p-[8px] hover:scale-[1.05] transition-[opacity,transform] 
         ${t||""} 
         w-[36px] 
         ${r.content_hover_bg} h-[36px] bg-${r.alpha} 
      ${e?"opacity-[1]":"opacity-0 translate-y-[20px]"}`,children:u.jsx(oG,{className:"w-full"})})}function kK(){const t=Ke(),{theme:e}=Z(),{user:n,loading:r}=dt(),{resetSongPlaylistStore:i}=ut(),s=Dn(),o=fn(),a=()=>{t(lo()),t(L1()),i()},l=()=>{a(),o("/dashboard")},c=[...Array(2).keys()].map(h=>u.jsxs("div",{className:"px-3 w-full h-[51px] flex items-center",children:[u.jsx(_t,{className:"w-[28px] h-[28px] mr-1 flex-shrink-0"}),u.jsx(_t,{className:"w-[100px] h-[30px]"})]},h)),d={container:`w-[180px] relative  flex-shrink-0 border-r-[1px] h-screen ${e.side_bar_bg} border-${e.alpha}`,navItem:`  px-3 py-2 leading-[2.2] font-playwriteCU flex items-center ${e.content_hover_text}`,text:e.type==="light"?"text-[#333]":"text-white",icon:"w-7 mr-2",link:"w-full border-l-[4px]",activeLink:`${e.content_text} ${e.container} ${e.content_border}  `};return u.jsxs("div",{className:`${d.container} ${d.text}`,children:[u.jsx("div",{className:"px-[10px] h-[60px] flex items-center justify-center",children:u.jsxs(Kr,{to:"/",className:"text-[24px] font-bold",children:["HD",u.jsx("span",{className:`${e.content_text} ml-[4px]`,children:"MP3"})]})}),u.jsxs("div",{className:"flex flex-col items-start",children:[r&&c,!r&&u.jsxs(u.Fragment,{children:[u.jsx(Kr,{className:`${d.link} ${s.pathname==="/"?d.activeLink:"border-transparent"}`,to:At.Home,children:u.jsxs("div",{className:d.navItem,children:[u.jsx(_j,{className:d.icon}),u.jsx("span",{children:"Discover"})]})}),n&&u.jsxs(u.Fragment,{children:[u.jsx(Kr,{className:`${d.link}  ${s.pathname.includes("mysongs")?d.activeLink:"border-transparent"}`,to:At.MySongs,children:u.jsxs("div",{className:d.navItem,children:[u.jsx(xa,{className:d.icon}),u.jsx("span",{children:"My Song"})]})}),n.role==="ADMIN"&&u.jsx(Kr,{to:"/dashboard",className:`${d.link} border-transparent`,children:u.jsxs("div",{onClick:l,className:` ${d.navItem}`,children:[u.jsx(cj,{className:d.icon}),u.jsx("span",{className:"",children:"Dashboard"})]})})]})]})]}),u.jsx(bK,{className:"left-[50%] translate-x-[-50%] bottom-[80px] md:bottom-[100px]"})]})}const Ay=Math.min,ca=Math.max,Zh=Math.round,sd=Math.floor,cs=t=>({x:t,y:t});function TK(t,e){return typeof t=="function"?t(e):t}function V1(t){return t.split("-")[0]}function QP(t){return t.split("-")[1]}function IK(t){return t==="x"?"y":"x"}function CK(t){return t==="y"?"height":"width"}function U1(t){return["top","bottom"].includes(V1(t))?"y":"x"}function AK(t){return IK(U1(t))}function YP(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function yb(t,e,n){let{reference:r,floating:i}=t;const s=U1(e),o=AK(e),a=CK(o),l=V1(e),c=s==="y",d=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,m=r[a]/2-i[a]/2;let p;switch(l){case"top":p={x:d,y:r.y-i.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-i.width,y:h};break;default:p={x:r.x,y:r.y}}switch(QP(e)){case"start":p[o]-=m*(n&&c?-1:1);break;case"end":p[o]+=m*(n&&c?-1:1);break}return p}const RK=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:h}=yb(c,r,l),m=r,p={},y=0;for(let x=0;x<a.length;x++){const{name:_,fn:v}=a[x],{x:g,y:w,data:E,reset:S}=await v({x:d,y:h,initialPlacement:r,placement:m,strategy:i,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});if(d=g??d,h=w??h,p={...p,[_]:{...p[_],...E}},S&&y<=50){y++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):S.rects),{x:d,y:h}=yb(c,m,l)),x=-1;continue}}return{x:d,y:h,placement:m,strategy:i,middlewareData:p}};async function PK(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=V1(n),a=QP(n),l=U1(n)==="y",c=["left","top"].includes(o)?-1:1,d=s&&l?-1:1,h=TK(e,t);let{mainAxis:m,crossAxis:p,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof y=="number"&&(p=a==="end"?y*-1:y),l?{x:p*d,y:m*c}:{x:m*c,y:p*d}}const NK=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,i=await PK(e,t);return{x:n+i.x,y:r+i.y,data:i}}}};function us(t){return JP(t)?(t.nodeName||"").toLowerCase():"#document"}function Tn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function vi(t){var e;return(e=(JP(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function JP(t){return t instanceof Node||t instanceof Tn(t).Node}function mt(t){return t instanceof Element||t instanceof Tn(t).Element}function nn(t){return t instanceof HTMLElement||t instanceof Tn(t).HTMLElement}function Ry(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Tn(t).ShadowRoot}function wu(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Rn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function DK(t){return["table","td","th"].includes(us(t))}function W1(t){const e=H1(),n=Rn(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function jK(t){let e=co(t);for(;nn(e)&&!_u(e);){if(W1(e))return e;e=co(e)}return null}function H1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function _u(t){return["html","body","#document"].includes(us(t))}function Rn(t){return Tn(t).getComputedStyle(t)}function Um(t){return mt(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function co(t){if(us(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Ry(t)&&t.host||vi(t);return Ry(e)?e.host:e}function ZP(t){const e=co(t);return _u(e)?t.ownerDocument?t.ownerDocument.body:t.body:nn(e)&&wu(e)?e:ZP(e)}function Ws(t,e){var n;e===void 0&&(e=[]);const r=ZP(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=Tn(r);return i?e.concat(s,s.visualViewport||[],wu(r)?r:[]):e.concat(r,Ws(r))}function e4(t){const e=Rn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=nn(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Zh(n)!==s||Zh(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function q1(t){return mt(t)?t:t.contextElement}function ua(t){const e=q1(t);if(!nn(e))return cs(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=e4(e);let o=(s?Zh(n.width):n.width)/r,a=(s?Zh(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const OK=cs(0);function t4(t){const e=Tn(t);return!H1()||!e.visualViewport?OK:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function MK(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Tn(t)?!1:e}function uo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=q1(t);let o=cs(1);e&&(r?mt(r)&&(o=ua(r)):o=ua(t));const a=MK(s,n,r)?t4(s):cs(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,d=i.width/o.x,h=i.height/o.y;if(s){const m=Tn(s),p=r&&mt(r)?Tn(r):r;let y=m.frameElement;for(;y&&r&&p!==m;){const x=ua(y),_=y.getBoundingClientRect(),v=Rn(y),g=_.left+(y.clientLeft+parseFloat(v.paddingLeft))*x.x,w=_.top+(y.clientTop+parseFloat(v.paddingTop))*x.y;l*=x.x,c*=x.y,d*=x.x,h*=x.y,l+=g,c+=w,y=Tn(y).frameElement}}return YP({width:d,height:h,x:l,y:c})}function LK(t){let{rect:e,offsetParent:n,strategy:r}=t;const i=nn(n),s=vi(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0},a=cs(1);const l=cs(0);if((i||!i&&r!=="fixed")&&((us(n)!=="body"||wu(s))&&(o=Um(n)),nn(n))){const c=uo(n);a=ua(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function FK(t){return Array.from(t.getClientRects())}function n4(t){return uo(vi(t)).left+Um(t).scrollLeft}function $K(t){const e=vi(t),n=Um(t),r=t.ownerDocument.body,i=ca(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=ca(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+n4(t);const a=-n.scrollTop;return Rn(r).direction==="rtl"&&(o+=ca(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function zK(t,e){const n=Tn(t),r=vi(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=H1();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function BK(t,e){const n=uo(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=nn(t)?ua(t):cs(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function vb(t,e,n){let r;if(e==="viewport")r=zK(t,n);else if(e==="document")r=$K(vi(t));else if(mt(e))r=BK(e,n);else{const i=t4(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return YP(r)}function r4(t,e){const n=co(t);return n===e||!mt(n)||_u(n)?!1:Rn(n).position==="fixed"||r4(n,e)}function VK(t,e){const n=e.get(t);if(n)return n;let r=Ws(t).filter(a=>mt(a)&&us(a)!=="body"),i=null;const s=Rn(t).position==="fixed";let o=s?co(t):t;for(;mt(o)&&!_u(o);){const a=Rn(o),l=W1(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||wu(o)&&!l&&r4(t,o))?r=r.filter(d=>d!==o):i=a,o=co(o)}return e.set(t,r),r}function UK(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?VK(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=vb(e,d,i);return c.top=ca(h.top,c.top),c.right=Ay(h.right,c.right),c.bottom=Ay(h.bottom,c.bottom),c.left=ca(h.left,c.left),c},vb(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function WK(t){return e4(t)}function HK(t,e,n){const r=nn(e),i=vi(e),s=n==="fixed",o=uo(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=cs(0);if(r||!r&&!s)if((us(e)!=="body"||wu(i))&&(a=Um(e)),r){const c=uo(e,!0,s,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else i&&(l.x=n4(i));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function xb(t,e){return!nn(t)||Rn(t).position==="fixed"?null:e?e(t):t.offsetParent}function i4(t,e){const n=Tn(t);if(!nn(t))return n;let r=xb(t,e);for(;r&&DK(r)&&Rn(r).position==="static";)r=xb(r,e);return r&&(us(r)==="html"||us(r)==="body"&&Rn(r).position==="static"&&!W1(r))?n:r||jK(t)||n}const qK=async function(t){let{reference:e,floating:n,strategy:r}=t;const i=this.getOffsetParent||i4,s=this.getDimensions;return{reference:HK(e,await i(n),r),floating:{x:0,y:0,...await s(n)}}};function GK(t){return Rn(t).direction==="rtl"}const KK={convertOffsetParentRelativeRectToViewportRelativeRect:LK,getDocumentElement:vi,getClippingRect:UK,getOffsetParent:i4,getElementRects:qK,getClientRects:FK,getDimensions:WK,getScale:ua,isElement:mt,isRTL:GK};function XK(t,e){let n=null,r;const i=vi(t);function s(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:d,width:h,height:m}=t.getBoundingClientRect();if(a||e(),!h||!m)return;const p=sd(d),y=sd(i.clientWidth-(c+h)),x=sd(i.clientHeight-(d+m)),_=sd(c),g={rootMargin:-p+"px "+-y+"px "+-x+"px "+-_+"px",threshold:ca(0,Ay(1,l))||1};let w=!0;function E(S){const T=S[0].intersectionRatio;if(T!==l){if(!w)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},100)}w=!1}try{n=new IntersectionObserver(E,{...g,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,g)}n.observe(t)}return o(!0),s}function QK(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=q1(t),d=i||s?[...c?Ws(c):[],...Ws(e)]:[];d.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const h=c&&a?XK(c,n):null;let m=-1,p=null;o&&(p=new ResizeObserver(v=>{let[g]=v;g&&g.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{p&&p.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let y,x=l?uo(t):null;l&&_();function _(){const v=uo(t);x&&(v.x!==x.x||v.y!==x.y||v.width!==x.width||v.height!==x.height)&&n(),x=v,y=requestAnimationFrame(_)}return n(),()=>{d.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),h&&h(),p&&p.disconnect(),p=null,l&&cancelAnimationFrame(y)}}const YK=(t,e,n)=>{const r=new Map,i={platform:KK,...n},s={...i.platform,_c:r};return RK(t,e,{...i,platform:s})};var jd=typeof document<"u"?f.useLayoutEffect:f.useEffect;function ef(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!ef(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!ef(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function s4(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function wb(t,e){const n=s4(t);return Math.round(e*n)/n}function _b(t){const e=f.useRef(t);return jd(()=>{e.current=t}),e}function JK(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=f.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,p]=f.useState(r);ef(m,r)||p(r);const[y,x]=f.useState(null),[_,v]=f.useState(null),g=f.useCallback(J=>{J!=T.current&&(T.current=J,x(J))},[x]),w=f.useCallback(J=>{J!==k.current&&(k.current=J,v(J))},[v]),E=s||y,S=o||_,T=f.useRef(null),k=f.useRef(null),b=f.useRef(d),D=_b(l),I=_b(i),L=f.useCallback(()=>{if(!T.current||!k.current)return;const J={placement:e,strategy:n,middleware:m};I.current&&(J.platform=I.current),YK(T.current,k.current,J).then(ke=>{const j={...ke,isPositioned:!0};W.current&&!ef(b.current,j)&&(b.current=j,mo.flushSync(()=>{h(j)}))})},[m,e,n,I]);jd(()=>{c===!1&&b.current.isPositioned&&(b.current.isPositioned=!1,h(J=>({...J,isPositioned:!1})))},[c]);const W=f.useRef(!1);jd(()=>(W.current=!0,()=>{W.current=!1}),[]),jd(()=>{if(E&&(T.current=E),S&&(k.current=S),E&&S){if(D.current)return D.current(E,S,L);L()}},[E,S,L,D]);const F=f.useMemo(()=>({reference:T,floating:k,setReference:g,setFloating:w}),[g,w]),te=f.useMemo(()=>({reference:E,floating:S}),[E,S]),ue=f.useMemo(()=>{const J={position:n,left:0,top:0};if(!te.floating)return J;const ke=wb(te.floating,d.x),j=wb(te.floating,d.y);return a?{...J,transform:"translate("+ke+"px, "+j+"px)",...s4(te.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ke,top:j}},[n,a,te.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:L,refs:F,elements:te,floatingStyles:ue}),[d,L,F,te,ue])}function jo(t){let e=t.activeElement;for(;((n=e)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;e=e.shadowRoot.activeElement}return e}function yn(t,e){if(!t||!e)return!1;const n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Ry(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function ZK(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function eX(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function tX(t){if(t.mozInputSource===0&&t.isTrusted)return!0;const e=/Android/i;return(e.test(ZK())||e.test(eX()))&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function nX(t){return t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType!=="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0}function rX(){return/apple/i.test(navigator.vendor)}function Eb(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function iX(t){return"nativeEvent"in t}function sX(t){return t.matches("html,body")}function _r(t){return(t==null?void 0:t.ownerDocument)||document}function fg(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function o4(t){return"composedPath"in t?t.composedPath()[0]:t.target}const oX="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function a4(t){return nn(t)&&t.matches(oX)}function mg(t){t.preventDefault(),t.stopPropagation()}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var aX=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Py=aX.join(","),l4=typeof Element>"u",Mc=l4?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,tf=!l4&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},nf=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",o=s||n&&e&&t(e.parentNode);return o},lX=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},cX=function(e,n,r){if(nf(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(Py));return n&&Mc.call(e,Py)&&i.unshift(e),i=i.filter(r),i},uX=function t(e,n,r){for(var i=[],s=Array.from(e);s.length;){var o=s.shift();if(!nf(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?i.push.apply(i,c):i.push({scopeParent:o,candidates:c})}else{var d=Mc.call(o,Py);d&&r.filter(o)&&(n||!e.includes(o))&&i.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),m=!nf(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&m){var p=t(h===!0?o.children:h.children,!0,r);r.flatten?i.push.apply(i,p):i.push({scopeParent:o,candidates:p})}else s.unshift.apply(s,o.children)}}return i},c4=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},u4=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||lX(e))&&!c4(e)?0:e.tabIndex},dX=function(e,n){var r=u4(e);return r<0&&n&&!c4(e)?0:r},hX=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},d4=function(e){return e.tagName==="INPUT"},fX=function(e){return d4(e)&&e.type==="hidden"},mX=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},pX=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},gX=function(e){if(!e.name)return!0;var n=e.form||tf(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=pX(i,e.form);return!s||s===e},yX=function(e){return d4(e)&&e.type==="radio"},vX=function(e){return yX(e)&&!gX(e)},xX=function(e){var n,r=e&&tf(e),i=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var o,a,l;for(s=!!((o=i)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(i)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&i;){var c,d,h;r=tf(i),i=(c=r)===null||c===void 0?void 0:c.host,s=!!((d=i)!==null&&d!==void 0&&(h=d.ownerDocument)!==null&&h!==void 0&&h.contains(i))}}return s},Sb=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},wX=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Mc.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(Mc.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=e;e;){var l=e.parentElement,c=tf(e);if(l&&!l.shadowRoot&&i(l)===!0)return Sb(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(xX(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Sb(e);return!1},_X=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return Mc.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},EX=function(e,n){return!(n.disabled||nf(n)||fX(n)||wX(n,e)||mX(n)||_X(n))},bb=function(e,n){return!(vX(n)||u4(n)<0||!EX(e,n))},SX=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},bX=function t(e){var n=[],r=[];return e.forEach(function(i,s){var o=!!i.scopeParent,a=o?i.scopeParent:i,l=dX(a,o),c=o?t(i.candidates):a;l===0?o?n.push.apply(n,c):n.push(a):r.push({documentOrder:s,tabIndex:l,item:i,isScope:o,content:c})}),r.sort(hX).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(n)},h4=function(e,n){n=n||{};var r;return n.getShadowRoot?r=uX([e],n.includeContainer,{filter:bb.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:SX}):r=cX(e,n.includeContainer,bb.bind(null,n)),bX(r)};function rf(){return rf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rf.apply(this,arguments)}var sr=typeof document<"u"?f.useLayoutEffect:f.useEffect;let pg=!1,kX=0;const kb=()=>"floating-ui-"+kX++;function TX(){const[t,e]=f.useState(()=>pg?kb():void 0);return sr(()=>{t==null&&e(kb())},[]),f.useEffect(()=>{pg||(pg=!0)},[]),t}const IX=Ly["useId".toString()],f4=IX||TX;function CX(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(i=>i!==n))||[])}}}const AX=f.createContext(null),RX=f.createContext(null),PX=()=>{var t;return((t=f.useContext(AX))==null?void 0:t.id)||null},G1=()=>f.useContext(RX);function sf(t){return"data-floating-ui-"+t}function Fs(t){const e=f.useRef(t);return sr(()=>{e.current=t}),e}let Tb=0;function Es(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=e;r&&cancelAnimationFrame(Tb);const s=()=>t==null?void 0:t.focus({preventScroll:n});i?s():Tb=requestAnimationFrame(s)}function NX(t,e){var n;let r=[],i=(n=t.find(s=>s.id===e))==null?void 0:n.parentId;for(;i;){const s=t.find(o=>o.id===i);i=s==null?void 0:s.parentId,s&&(r=r.concat(s))}return r}function Vl(t,e){let n=t.filter(i=>{var s;return i.parentId===e&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=t.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}let Ro=new WeakMap,od=new WeakSet,ad={},gg=0;const DX=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,m4=t=>t&&(t.host||m4(t.parentNode)),jX=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=m4(n);return t.contains(r)?r:null}).filter(n=>n!=null);function OX(t,e,n,r){const i="data-floating-ui-inert",s=r?"inert":n?"aria-hidden":null,o=jX(e,t),a=new Set,l=new Set(o),c=[];ad[i]||(ad[i]=new WeakMap);const d=ad[i];o.forEach(h),m(e),a.clear();function h(p){!p||a.has(p)||(a.add(p),p.parentNode&&h(p.parentNode))}function m(p){!p||l.has(p)||Array.prototype.forEach.call(p.children,y=>{if(a.has(y))m(y);else{const x=s?y.getAttribute(s):null,_=x!==null&&x!=="false",v=(Ro.get(y)||0)+1,g=(d.get(y)||0)+1;Ro.set(y,v),d.set(y,g),c.push(y),v===1&&_&&od.add(y),g===1&&y.setAttribute(i,""),!_&&s&&y.setAttribute(s,"true")}})}return gg++,()=>{c.forEach(p=>{const y=(Ro.get(p)||0)-1,x=(d.get(p)||0)-1;Ro.set(p,y),d.set(p,x),y||(!od.has(p)&&s&&p.removeAttribute(s),od.delete(p)),x||p.removeAttribute(i)}),gg--,gg||(Ro=new WeakMap,Ro=new WeakMap,od=new WeakSet,ad={})}}function Ib(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=_r(t[0]).body;return OX(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const p4=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function g4(t,e){const n=h4(t,p4());e==="prev"&&n.reverse();const r=n.indexOf(jo(_r(t)));return n.slice(r+1)[0]}function MX(){return g4(document.body,"next")}function LX(){return g4(document.body,"prev")}function Cb(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!yn(n,r)}const y4={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let FX;function Ab(t){t.key==="Tab"&&(t.target,clearTimeout(FX))}const Rb=f.forwardRef(function(e,n){const[r,i]=f.useState();sr(()=>(rX()&&i("button"),document.addEventListener("keydown",Ab),()=>{document.removeEventListener("keydown",Ab)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[sf("focus-guard")]:"",style:y4};return f.createElement("span",rf({},e,s))}),$X=f.createContext(null),zX=()=>f.useContext($X),BX=f.forwardRef(function(e,n){return f.createElement("button",rf({},e,{type:"button",ref:n,tabIndex:-1,style:y4}))});function VX(t){const{context:e,children:n,disabled:r=!1,order:i=["content"],guards:s=!0,initialFocus:o=0,returnFocus:a=!0,modal:l=!0,visuallyHiddenDismiss:c=!1,closeOnFocusOut:d=!0}=t,{open:h,refs:m,nodeId:p,onOpenChange:y,events:x,dataRef:_,elements:{domReference:v,floating:g}}=e,w=DX()?s:!0,E=Fs(i),S=Fs(o),T=Fs(a),k=G1(),b=zX(),D=typeof o=="number"&&o<0,I=f.useRef(null),L=f.useRef(null),W=f.useRef(!1),F=f.useRef(null),te=f.useRef(!1),ue=b!=null,J=v&&v.getAttribute("role")==="combobox"&&a4(v),ke=f.useCallback(function(N){return N===void 0&&(N=g),N?h4(N,p4()):[]},[g]),j=f.useCallback(N=>{const U=ke(N);return E.current.map(X=>v&&X==="reference"?v:g&&X==="floating"?g:U).filter(Boolean).flat()},[v,g,E,ke]);f.useEffect(()=>{if(r||!l)return;function N(X){if(X.key==="Tab"){yn(g,jo(_r(g)))&&ke().length===0&&!J&&mg(X);const ie=j(),oe=o4(X);E.current[0]==="reference"&&oe===v&&(mg(X),X.shiftKey?Es(ie[ie.length-1]):Es(ie[1])),E.current[1]==="floating"&&oe===g&&X.shiftKey&&(mg(X),Es(ie[0]))}}const U=_r(g);return U.addEventListener("keydown",N),()=>{U.removeEventListener("keydown",N)}},[r,v,g,l,E,m,J,ke,j]),f.useEffect(()=>{if(r||!d)return;function N(){te.current=!0,setTimeout(()=>{te.current=!1})}function U(X){const ie=X.relatedTarget;queueMicrotask(()=>{const oe=!(yn(v,ie)||yn(g,ie)||yn(ie,g)||yn(b==null?void 0:b.portalNode,ie)||ie!=null&&ie.hasAttribute(sf("focus-guard"))||k&&(Vl(k.nodesRef.current,p).find(de=>{var me,Ue;return yn((me=de.context)==null?void 0:me.elements.floating,ie)||yn((Ue=de.context)==null?void 0:Ue.elements.domReference,ie)})||NX(k.nodesRef.current,p).find(de=>{var me,Ue;return((me=de.context)==null?void 0:me.elements.floating)===ie||((Ue=de.context)==null?void 0:Ue.elements.domReference)===ie})));ie&&oe&&!te.current&&ie!==F.current&&(W.current=!0,y(!1,X))})}if(g&&nn(v))return v.addEventListener("focusout",U),v.addEventListener("pointerdown",N),!l&&g.addEventListener("focusout",U),()=>{v.removeEventListener("focusout",U),v.removeEventListener("pointerdown",N),!l&&g.removeEventListener("focusout",U)}},[r,v,g,l,p,k,b,y,d]),f.useEffect(()=>{var N;if(r)return;const U=Array.from((b==null||(N=b.portalNode)==null?void 0:N.querySelectorAll("["+sf("portal")+"]"))||[]);if(g){const X=[g,...U,I.current,L.current,E.current.includes("reference")||J?v:null].filter(oe=>oe!=null),ie=l?Ib(X,w,!w):Ib(X);return()=>{ie()}}},[r,v,g,l,E,b,J,w]),sr(()=>{if(r||!g)return;const N=_r(g),U=jo(N);queueMicrotask(()=>{const X=j(g),ie=S.current,oe=(typeof ie=="number"?X[ie]:ie.current)||g,de=yn(g,U);!D&&!de&&h&&Es(oe,{preventScroll:oe===g})})},[r,h,g,D,j,S]),sr(()=>{if(r||!g)return;let N=!1;const U=_r(g),X=jo(U),ie=_.current;F.current=X;function oe(de){if(de.type==="escapeKey"&&m.domReference.current&&(F.current=m.domReference.current),["referencePress","escapeKey"].includes(de.type))return;const me=de.data.returnFocus;typeof me=="object"?(W.current=!1,N=me.preventScroll):W.current=!me}return x.on("dismiss",oe),()=>{x.off("dismiss",oe);const de=jo(U);(yn(g,de)||k&&Vl(k.nodesRef.current,p).some(Ue=>{var Gt;return yn((Gt=Ue.context)==null?void 0:Gt.elements.floating,de)})||ie.openEvent&&["click","mousedown"].includes(ie.openEvent.type))&&m.domReference.current&&(F.current=m.domReference.current),T.current&&nn(F.current)&&!W.current&&Es(F.current,{cancelPrevious:!1,preventScroll:N})}},[r,g,T,_,m,x,k,p]),sr(()=>{if(!(r||!b))return b.setFocusManagerState({modal:l,closeOnFocusOut:d,open:h,onOpenChange:y,refs:m}),()=>{b.setFocusManagerState(null)}},[r,b,l,h,y,m,d]),sr(()=>{if(!r&&g&&typeof MutationObserver=="function"){const N=()=>{const X=g.getAttribute("tabindex");E.current.includes("floating")||jo(_r(g))!==m.domReference.current&&ke().length===0?X!=="0"&&g.setAttribute("tabindex","0"):X!=="-1"&&g.setAttribute("tabindex","-1")};N();const U=new MutationObserver(N);return U.observe(g,{childList:!0,subtree:!0,attributes:!0}),()=>{U.disconnect()}}},[r,g,m,E,ke]);function $(N){return r||!c||!l?null:f.createElement(BX,{ref:N==="start"?I:L,onClick:U=>y(!1,U.nativeEvent)},typeof c=="string"?c:"Dismiss")}const H=!r&&w&&!J&&(ue||l);return f.createElement(f.Fragment,null,H&&f.createElement(Rb,{"data-type":"inside",ref:b==null?void 0:b.beforeInsideRef,onFocus:N=>{if(l){const X=j();Es(i[0]==="reference"?X[0]:X[X.length-1])}else if(b!=null&&b.preserveTabOrder&&b.portalNode)if(W.current=!1,Cb(N,b.portalNode)){const X=MX()||v;X==null||X.focus()}else{var U;(U=b.beforeOutsideRef.current)==null||U.focus()}}}),!J&&$("start"),n,$("end"),H&&f.createElement(Rb,{"data-type":"inside",ref:b==null?void 0:b.afterInsideRef,onFocus:N=>{if(l)Es(j()[0]);else if(b!=null&&b.preserveTabOrder&&b.portalNode)if(d&&(W.current=!0),Cb(N,b.portalNode)){const X=LX()||v;X==null||X.focus()}else{var U;(U=b.afterOutsideRef.current)==null||U.focus()}}}))}function Pb(t){return nn(t.target)&&t.target.tagName==="BUTTON"}function Nb(t){return a4(t)}function UX(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:s}}=t,{enabled:o=!0,event:a="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:d=!0}=e,h=f.useRef(),m=f.useRef(!1);return f.useMemo(()=>o?{reference:{onPointerDown(p){h.current=p.pointerType},onMouseDown(p){p.button===0&&(Eb(h.current,!0)&&c||a!=="click"&&(n&&l&&(!i.current.openEvent||i.current.openEvent.type==="mousedown")?r(!1,p.nativeEvent):(p.preventDefault(),r(!0,p.nativeEvent))))},onClick(p){if(a==="mousedown"&&h.current){h.current=void 0;return}Eb(h.current,!0)&&c||(n&&l&&(!i.current.openEvent||i.current.openEvent.type==="click")?r(!1,p.nativeEvent):r(!0,p.nativeEvent))},onKeyDown(p){h.current=void 0,!(p.defaultPrevented||!d||Pb(p))&&(p.key===" "&&!Nb(s)&&(p.preventDefault(),m.current=!0),p.key==="Enter"&&r(!(n&&l),p.nativeEvent))},onKeyUp(p){p.defaultPrevented||!d||Pb(p)||Nb(s)||p.key===" "&&m.current&&(m.current=!1,r(!(n&&l),p.nativeEvent))}}}:{},[o,i,a,c,d,s,l,n,r])}const WX=Ly["useInsertionEffect".toString()],HX=WX||(t=>t());function Od(t){const e=f.useRef(()=>{});return HX(()=>{e.current=t}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}const qX={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},GX={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},KX=t=>{var e,n;return{escapeKeyBubbles:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePressBubbles:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function XX(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:i,nodeId:s,elements:{reference:o,domReference:a,floating:l},dataRef:c}=t,{enabled:d=!0,escapeKey:h=!0,outsidePress:m=!0,outsidePressEvent:p="pointerdown",referencePress:y=!1,referencePressEvent:x="pointerdown",ancestorScroll:_=!1,bubbles:v}=e,g=G1(),w=PX()!=null,E=Od(typeof m=="function"?m:()=>!1),S=typeof m=="function"?E:m,T=f.useRef(!1),{escapeKeyBubbles:k,outsidePressBubbles:b}=KX(v),D=Od(L=>{if(!n||!d||!h||L.key!=="Escape")return;const W=g?Vl(g.nodesRef.current,s):[];if(!k&&(L.stopPropagation(),W.length>0)){let F=!0;if(W.forEach(te=>{var ue;if((ue=te.context)!=null&&ue.open&&!te.context.dataRef.current.__escapeKeyBubbles){F=!1;return}}),!F)return}i.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1,iX(L)?L.nativeEvent:L)}),I=Od(L=>{const W=T.current;if(T.current=!1,W||typeof S=="function"&&!S(L))return;const F=o4(L),te="["+sf("inert")+"]",ue=_r(l).querySelectorAll(te);let J=mt(F)?F:null;for(;J&&!_u(J);){const $=co(J);if($===_r(l).body||!mt($))break;J=$}if(ue.length&&mt(F)&&!sX(F)&&!yn(F,l)&&Array.from(ue).every($=>!yn(J,$)))return;if(nn(F)&&l){const $=F.clientWidth>0&&F.scrollWidth>F.clientWidth,H=F.clientHeight>0&&F.scrollHeight>F.clientHeight;let N=H&&L.offsetX>F.clientWidth;if(H&&Rn(F).direction==="rtl"&&(N=L.offsetX<=F.offsetWidth-F.clientWidth),N||$&&L.offsetY>F.clientHeight)return}const ke=g&&Vl(g.nodesRef.current,s).some($=>{var H;return fg(L,(H=$.context)==null?void 0:H.elements.floating)});if(fg(L,l)||fg(L,a)||ke)return;const j=g?Vl(g.nodesRef.current,s):[];if(j.length>0){let $=!0;if(j.forEach(H=>{var N;if((N=H.context)!=null&&N.open&&!H.context.dataRef.current.__outsidePressBubbles){$=!1;return}}),!$)return}i.emit("dismiss",{type:"outsidePress",data:{returnFocus:w?{preventScroll:!0}:tX(L)||nX(L)}}),r(!1,L)});return f.useEffect(()=>{if(!n||!d)return;c.current.__escapeKeyBubbles=k,c.current.__outsidePressBubbles=b;function L(te){r(!1,te)}const W=_r(l);h&&W.addEventListener("keydown",D),S&&W.addEventListener(p,I);let F=[];return _&&(mt(a)&&(F=Ws(a)),mt(l)&&(F=F.concat(Ws(l))),!mt(o)&&o&&o.contextElement&&(F=F.concat(Ws(o.contextElement)))),F=F.filter(te=>{var ue;return te!==((ue=W.defaultView)==null?void 0:ue.visualViewport)}),F.forEach(te=>{te.addEventListener("scroll",L,{passive:!0})}),()=>{h&&W.removeEventListener("keydown",D),S&&W.removeEventListener(p,I),F.forEach(te=>{te.removeEventListener("scroll",L)})}},[c,l,a,o,h,S,p,n,r,_,d,k,b,D,I]),f.useEffect(()=>{T.current=!1},[S,p]),f.useMemo(()=>d?{reference:{onKeyDown:D,[qX[x]]:L=>{y&&(i.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1,L.nativeEvent))}},floating:{onKeyDown:D,[GX[p]]:()=>{T.current=!0}}}:{},[d,i,y,p,x,r,D])}function QX(t){var e;t===void 0&&(t={});const{open:n=!1,onOpenChange:r,nodeId:i}=t,[s,o]=f.useState(null),a=((e=t.elements)==null?void 0:e.reference)||s,l=JK(t),c=G1(),d=Od((E,S)=>{E&&(m.current.openEvent=S),r==null||r(E,S)}),h=f.useRef(null),m=f.useRef({}),p=f.useState(()=>CX())[0],y=f4(),x=f.useCallback(E=>{const S=mt(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;l.refs.setReference(S)},[l.refs]),_=f.useCallback(E=>{(mt(E)||E===null)&&(h.current=E,o(E)),(mt(l.refs.reference.current)||l.refs.reference.current===null||E!==null&&!mt(E))&&l.refs.setReference(E)},[l.refs]),v=f.useMemo(()=>({...l.refs,setReference:_,setPositionReference:x,domReference:h}),[l.refs,_,x]),g=f.useMemo(()=>({...l.elements,domReference:a}),[l.elements,a]),w=f.useMemo(()=>({...l,refs:v,elements:g,dataRef:m,nodeId:i,floatingId:y,events:p,open:n,onOpenChange:d}),[l,i,y,p,n,d,v,g]);return sr(()=>{const E=c==null?void 0:c.nodesRef.current.find(S=>S.id===i);E&&(E.context=w)}),f.useMemo(()=>({...l,context:w,refs:v,elements:g}),[l,v,g,w])}function yg(t,e,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...t,...e.map(i=>i?i[n]:null).concat(t).reduce((i,s)=>(s&&Object.entries(s).forEach(o=>{let[a,l]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof l=="function"){var c;(c=r.get(a))==null||c.push(l),i[a]=function(){for(var d,h=arguments.length,m=new Array(h),p=0;p<h;p++)m[p]=arguments[p];return(d=r.get(a))==null?void 0:d.map(y=>y(...m)).find(y=>y!==void 0)}}}else i[a]=l}),i),{})}}function YX(t){t===void 0&&(t=[]);const e=t,n=f.useCallback(s=>yg(s,t,"reference"),e),r=f.useCallback(s=>yg(s,t,"floating"),e),i=f.useCallback(s=>yg(s,t,"item"),t.map(s=>s==null?void 0:s.item));return f.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}function JX(t,e){e===void 0&&(e={});const{open:n,floatingId:r}=t,{enabled:i=!0,role:s="dialog"}=e,o=f4();return f.useMemo(()=>{const a={id:r,role:s};return i?s==="tooltip"?{reference:{"aria-describedby":n?r:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":s==="alertdialog"?"dialog":s,"aria-controls":n?r:void 0,...s==="listbox"&&{role:"combobox"},...s==="menu"&&{id:o}},floating:{...a,...s==="menu"&&{"aria-labelledby":o}}}:{}},[i,s,n,r,o])}const Db=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function Po(t,e){return typeof t=="function"?t(e):t}function ZX(t,e){const[n,r]=f.useState(t);return t&&!n&&r(!0),f.useEffect(()=>{if(!t){const i=setTimeout(()=>r(!1),e);return()=>clearTimeout(i)}},[t,e]),n}function v4(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:i=250}=e,o=(typeof i=="number"?i:i.close)||0,[a,l]=f.useState(!1),[c,d]=f.useState("unmounted"),h=ZX(n,o);return sr(()=>{a&&!h&&d("unmounted")},[a,h]),sr(()=>{if(r)if(n){d("initial");const m=requestAnimationFrame(()=>{d("open")});return()=>{cancelAnimationFrame(m)}}else l(!0),d("close")},[n,r]),{isMounted:h,status:c}}function eQ(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:i,common:s,duration:o=250}=e,a=t.placement,l=a.split("-")[0],c=f.useMemo(()=>({side:l,placement:a}),[l,a]),d=typeof o=="number",h=(d?o:o.open)||0,m=(d?o:o.close)||0,[p,y]=f.useState(()=>({...Po(s,c),...Po(n,c)})),{isMounted:x,status:_}=v4(t,{duration:o}),v=Fs(n),g=Fs(r),w=Fs(i),E=Fs(s);return sr(()=>{const S=Po(v.current,c),T=Po(w.current,c),k=Po(E.current,c),b=Po(g.current,c)||Object.keys(S).reduce((D,I)=>(D[I]="",D),{});if(_==="initial"&&y(D=>({transitionProperty:D.transitionProperty,...k,...S})),_==="open"&&y({transitionProperty:Object.keys(b).map(Db).join(","),transitionDuration:h+"ms",...k,...b}),_==="close"){const D=T||S;y({transitionProperty:Object.keys(D).map(Db).join(","),transitionDuration:m+"ms",...k,...D})}},[m,w,v,g,E,h,_,c]),{isMounted:x,styles:p}}function tQ({placement:t="bottom",isOpenFromParent:e,setIsOpenFromParent:n}={}){const[r,i]=f.useState(!1),{context:s,floatingStyles:o,refs:a}=QX({placement:t,open:e||r,onOpenChange:n||i,whileElementsMounted:QK,middleware:[NK(6)]}),l=UX(s),c=XX(s,{escapeKey:!1}),d=JX(s),{isMounted:h,styles:m}=eQ(s,{duration:150,initial:{opacity:0,transform:"scale(0.8)"},close:{opacity:0,transform:"scale(0.8)"},open:{opacity:1,transform:"scale(1)"},common:({side:x})=>({transformOrigin:{top:"bottom",bottom:"top",left:"right",right:"left"}[x]})}),{getFloatingProps:p,getReferenceProps:y}=YX([l,c,d]);return{isOpen:e||r,setIsOpen:n||i,getFloatingProps:p,getReferenceProps:y,floatingStyles:o,refs:a,context:s,styles:m,isMounted:h}}const x4=f.createContext(null),w4=()=>{const t=f.useContext(x4);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function _4({children:t,...e}){const n=tQ({...e});return u.jsx(x4.Provider,{value:n,children:t})}function E4({children:t,className:e,asChild:n=!1,...r}){const{getReferenceProps:i,refs:s,isOpen:o}=w4();return n&&f.isValidElement(t)?f.cloneElement(t,i({ref:s.setReference,...r,...t.props,"data-state":o?"open":"closed"})):u.jsx("button",{type:"button",ref:s.setReference,"data-state":o?"open":"closed",className:`${e??""}`,...i(r),children:t})}function S4({children:t,className:e,...n}){const{context:r,refs:i,getFloatingProps:s,floatingStyles:o,styles:a}=w4(),{isMounted:l,status:c}=v4(r);return u.jsx(u.Fragment,{children:l&&u.jsx(VX,{context:r,modal:!1,children:u.jsx("div",{ref:i.setFloating,className:`${e||"z-[20]"}`,style:{...o},...s(n),"data-status":c,children:u.jsx("div",{style:{...a},children:t})})})})}function nQ({contentRef:t}){const{theme:e}=Z(),[n,r]=f.useState(0),[i,s]=pu(os),[o,a]=f.useState(""),l=f.useRef(null),c=f.useRef(null),{logOut:d,logIn:h}=gu(),m=w=>{var E,S;a(w),(E=c.current)==null||E.toggle(),(S=l.current)==null||S.close()},p=async()=>{var w;try{await d()}catch(E){console.log("signOut error",{messsage:E})}finally{(w=c.current)==null||w.toggle()}},y=async()=>{try{const w=document.querySelector(".login-trigger");await h(),w&&w.click()}catch(w){console.log(w)}},x=()=>{var E;const w=((E=t.current)==null?void 0:E.scrollTop)||0;r(w)},_=u.jsx(_t,{className:"w-[35px] h-[35px] rounded-full"}),v=f.useMemo(()=>{switch(o){case"":return u.jsx(u.Fragment,{});case"theme":return u.jsx(I4,{close:()=>{var w;return(w=c.current)==null?void 0:w.toggle()}});case"info":return u.jsx(X1,{close:()=>{var w;return(w=c.current)==null?void 0:w.toggle()}});case"confirm":return u.jsx(Lr,{close:()=>{var w;return(w=c.current)==null?void 0:w.toggle()},callback:p,loading:!1,label:"Sign out ?",desc:"",theme:e})}},[o]);f.useEffect(()=>{var w;return(w=t.current)==null||w.addEventListener("scroll",x),()=>{document.removeEventListener("scroll",x)}},[]);const g={userName:"text-[16px] font-[500] ml-[8px] line-clamp-1",button:"h-[35px] w-[35px] rounded-full",menuItem:`hover:bg-${e.alpha} ${e.content_hover_text} rounded-[4px] w-full px-[10px] h-[44px] inline-flex items-center font-[500]`,icon:"w-[25px] mr-[5px]",divide:`h-[1px]  w-[calc(100%-20px)] mb-[10px] mt-[20px] mx-auto bg-${e.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`${e.container} ${n?"shadow-lg":""} h-[60px] fixed right-0 ${n?"bg-transparent":""} left-[180px] z-[20]`,children:[u.jsx("div",{className:`${n?"":"hidden "} absolute  inset-0 ${e.container} bg-opacity-[0.9] backdrop-blur-[15px] z-[-1] `}),u.jsxs("div",{className:"px-[40px] flex items-center justify-between h-full",children:[u.jsx("div",{className:""}),u.jsxs("div",{className:"flex gap-[16px]",children:[u.jsxs(yu,{children:[u.jsx(vu,{ref:l,children:u.jsx(ri,{position:"top-[calc(100%+8px)]",content:"Settings",children:u.jsx("button",{className:`flex px-[6px] items-center ${g.button} bg-${e.alpha} ${e.content_hover_bg}`,children:u.jsx(lT,{className:"w-full"})})})}),u.jsx(xu,{appendTo:"parent",className:"top-[calc(100%+8px)] right-0",animationClassName:"origin-top-right",children:u.jsx(XP,{openModal:m,loggedIn:!1})})]}),u.jsxs(_4,{placement:"bottom-end",children:[u.jsx(E4,{className:`flex login-trigger items-center hover:brightness-75 ${g.button}`,children:s?_:u.jsx(Ny,{})}),u.jsx(S4,{children:u.jsx(yo,{color:"sidebar",theme:e,children:u.jsxs("div",{className:"w-[250px] max-h-[50vh]",children:[i&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center p-[10px] pb-0",children:[u.jsx(Ny,{className:"login-trigger w-[46px] h-[46px]"}),u.jsx("div",{className:"ml-[12px]",children:u.jsx("h5",{className:"font-semibold line-clamp-1",children:i==null?void 0:i.displayName})})]}),u.jsx("div",{className:g.divide}),u.jsxs("button",{className:`${g.menuItem}`,onClick:()=>a("confirm"),children:[u.jsx(Nv,{className:g.icon}),"Log out"]})]}),!i&&u.jsxs("button",{className:`${g.menuItem}`,onClick:y,children:[u.jsx(wD,{className:g.icon}),"Log in"]})]})})})]})]})]})]}),u.jsx(Br,{variant:"animation",ref:c,children:v})]})}function rQ({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"}))}const iQ=f.forwardRef(rQ),sQ=iQ;function oQ({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z",clipRule:"evenodd"}))}const aQ=f.forwardRef(oQ),lQ=aQ;function ld({song:t,closeMenu:e,...n}){const r=Ke(),{user:i}=dt(),{theme:s,isOnMobile:o}=Z(),{setSuccessToast:a}=mn(),{userPlaylists:l}=ut(),c=()=>{r(M1({songs:[t]})),e(),a({message:"Song added to queue"})},d={before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]",level2Menu:"w-[100%] absolute right-[calc(100%+5px)] hidden group-hover/add-playlist:block hover:block",menuItem:`hover:bg-${s.alpha} font-[500] ${s.content_hover_text} max-[549px]:!bg-transparent py-1 pl-2 rounded-md`,menuIcon:"w-5 mr-2",overlay:"absolute flex items-center justify-center inset-0 bg-[#000] bg-opacity-[.5]"},h=f.useMemo(()=>{if(!i)return u.jsx(u.Fragment,{});switch(n.variant){case"home":case"my-songs":case"dashboard-songs":return o?u.jsxs(G,{className:`group relative ${d.menuItem}  ${s.content_hover_text} ${d.before}`,variant:"list",onClick:()=>n.handleOpenModal("add-to-playlist"),children:[u.jsx(lh,{className:d.menuIcon}),"Add to playlist"]}):u.jsxs(G,{className:`group/add-playlist hover:!brightness-100 relative ${d.menuItem}  ${s.content_hover_text} ${d.before}`,variant:"list",size:"clear",children:[u.jsx(lh,{className:d.menuIcon}),"Add to playlist",u.jsx(yo,{className:`${d.level2Menu} z-[99]                  `,color:"sidebar",theme:s,children:u.jsx("ul",{className:"w-full",children:l!=null&&l.length?u.jsx(u.Fragment,{children:l.map((y,x)=>{const _=y.song_ids.includes(t.id);return u.jsxs("li",{onClick:()=>!_&&n.handleAddSongToPlaylist(y),className:`list-none w-full flex rounded-[4px] p-[5px] ${_&&"disable"} ${d.menuItem}`,children:[u.jsx("span",{children:u.jsx(xa,{className:d.menuIcon})}),u.jsxs("p",{className:"line-clamp-1 text-left",children:[y.name," ",_&&"(Added)"]})]},x)})}):u.jsx("p",{children:"No playlist jet..."})})})]})}},[l]),m=f.useMemo(()=>{switch(n.variant){case"home":return u.jsxs(u.Fragment,{children:[u.jsxs(G,{onClick:c,className:` ${d.menuItem}`,variant:"list",size:"clear",children:[u.jsx(Li,{className:d.menuIcon}),"Add to queue"]}),h]});case"playlist":case"dashboard-playlist":return u.jsx(u.Fragment,{children:u.jsxs(G,{className:d.menuItem,variant:"list",size:"clear",onClick:n.handleRemoveSongFromPlaylist,children:[u.jsx(v_,{className:d.menuIcon}),"Remove"]})});case"my-songs":case"dashboard-songs":return u.jsxs(u.Fragment,{children:[n.variant!=="dashboard-songs"&&u.jsxs(G,{onClick:c,className:` ${d.menuItem}`,variant:"list",size:"clear",children:[u.jsx(Li,{className:d.menuIcon}),"Add to queue"]}),h,u.jsxs(G,{onClick:()=>n.handleOpenModal("edit"),className:` ${d.menuItem} `,variant:"list",size:"clear",children:[u.jsx(lT,{className:d.menuIcon}),"Edit"]}),u.jsx(Kr,{to:`edit/${t.id}`,children:u.jsxs(G,{className:` ${d.menuItem} `,variant:"list",children:[u.jsx(hj,{className:d.menuIcon}),t.lyric_id?"Edit lyric":"Add lyric"]})}),u.jsxs(G,{onClick:()=>n.handleOpenModal("delete"),className:` ${d.menuItem} `,variant:"list",size:"clear",children:[u.jsx(lc,{className:d.menuIcon}),"Delete"]})]});case"queue":return u.jsxs(u.Fragment,{children:[u.jsxs(G,{onClick:n.handleRemoveSongFromQueue,className:` ${d.menuItem}`,variant:"list",size:"clear",children:[u.jsx(v_,{className:d.menuIcon}),"Remove"]}),h]})}},[n]),p=f.useMemo(()=>{switch(n.variant){case"queue":return u.jsx(u.Fragment,{});default:return u.jsxs("div",{className:`pl-[10px] py-[6px] bg-${s.alpha} rounded-md mb-3`,children:[u.jsx("h5",{className:"line-clamp-1 font-[500] text-lg",children:t.name}),u.jsx("p",{className:"text-base opacity-70 line-clamp-1",children:t.singer})]})}},[t]);return u.jsx(u.Fragment,{children:u.jsxs("div",{className:` ${n.variant==="queue"?"w-[140px]":"w-[200px]"} `,children:[p,m,u.jsxs("a",{target:"_blank",download:!0,href:t.song_url,className:` ${d.menuItem} w-full inline-flex items-center cursor-pointer`,children:[u.jsx(yD,{className:d.menuIcon}),"Download"]}),n.variant!=="queue"&&!o&&u.jsxs("p",{className:"opacity-50 font-[500] text-center text-[13px] mt-[10px]",children:["Uploaded by ",t.by]})]})})}function cd({song:t,onClick:e,active:n=!0,index:r,className:i,...s}){const o=Ke(),{theme:a,isOnMobile:l}=Z(),{user:c}=dt(),{isChecked:d,selectedSongs:h,selectSong:m}=qc(),{userPlaylists:p}=ut(),[y,x]=f.useState(!1),[_,v]=f.useState(!1),[g,w]=f.useState(""),E=f.useRef(null),{setErrorToast:S}=mn(),T=()=>{var Gt;return(Gt=E.current)==null?void 0:Gt.toggle()},k=()=>v(!1),{handleDeleteSong:b,handleAddSongToPlaylistMobile:D,handleAddSongToPlaylist:I,handleRemoveSongFromPlaylist:L,loading:W}=FG({song:t,closeModal:T,setIsOpenPopup:v}),F=Gt=>{var hr;w(Gt),k(),(hr=E.current)==null||hr.toggle()},te=f.useMemo(()=>h?h.indexOf(t)!=-1:!1,[h]),ue=f.useMemo(()=>c?c.like_song_ids.includes(t.id):!1,[c==null?void 0:c.like_song_ids,t]),J=()=>{r!==void 0&&o(Bq({index:r}))},ke=async()=>{if(c)try{}catch(Gt){console.log(Gt),S({message:"Error when liked song"})}finally{x(!1)}},j=Gt=>{d!==void 0&&m(Gt)},$={button:`${a.content_hover_bg} p-[8px] rounded-full`,songListButton:"p-1 mr-1 text-[inherit]",itemContainer:`group/container flex flex-row rounded justify-between px-[10px] py-[10px] w-full border-b border-${a.alpha} last:border-none p-[0px]`,imageFrame:` relative rounded-[4px] overflow-hidden flex-shrink-0 ${s.variant==="queue"?"w-[40px] h-[40px]":"h-[54px] w-[54px]"}`,overlay:"absolute flex items-center justify-center inset-0 bg-black/40",ctaWrapper:"flex items-center justify-end flex-shrink-0",menuBtnWrapper:"w-[50px] flex justify-center relative"},H=()=>{switch(s.variant){case"queue":return u.jsx(u.Fragment,{});case"uploading":return u.jsx("button",{className:`${$.songListButton}`,children:u.jsx(xa,{className:"w-[18px]"})});default:return l?u.jsx("button",{onClick:()=>j(t),className:`${$.songListButton} text-[inherit]`,children:te?u.jsx(Ty,{className:"w-[18px]"}):u.jsx(ac,{className:"w-[18px]"})}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>j(t),className:`${$.songListButton} ${!te&&"hidden"} group-hover/main:block`,children:te?u.jsx(Ty,{className:"w-[18px]"}):u.jsx(ac,{className:"w-[18px]"})}),u.jsx("button",{className:`${$.songListButton} ${te&&"hidden"} group-hover/main:hidden group-hover/main:mr-[0px]`,children:u.jsx(xa,{className:"w-[18px]"})})]})}},N=f.useMemo(()=>{switch(s.variant){case"uploading":return u.jsx(u.Fragment,{});default:return u.jsx("div",{className:` ${$.overlay} 
               ${n?"":"hidden sm:group-hover/main:flex"}`,children:n?u.jsx("img",{src:B1,alt:"",className:"h-[18px] w-[18px]"}):u.jsx("div",{onClick:e,className:"cursor-pointer w-full h-full flex items-center justify-center",children:u.jsx(lQ,{className:"w-[24px] text-white"})})})}},[n,e]),U=u.jsxs(u.Fragment,{children:[H(),u.jsxs("div",{className:"flex-grow flex",onClick:l&&s.variant!=="uploading"?e:()=>{},children:[u.jsxs("div",{className:`${$.imageFrame}`,children:[u.jsx(pi,{src:t.image_url,blurHashEncode:t.blurhash_encode}),N]}),u.jsxs("div",{className:`ml-[10px]  ${s.variant==="queue",""}`,children:[u.jsx("h5",{className:`line-clamp-1  leading-[1.2] font-medium overflow-hidden ${s.variant==="queue"?"text-sm":"text-lg"}`,children:t.name}),u.jsx("p",{className:`opacity-[.7] line-clamp-1 
               ${s.variant==="queue"?"text-sm":""}
                       `,children:t.singer})]})]})]}),X=()=>{switch(s.variant){case"uploading":return u.jsx("div",{className:"opacity-[.7]",children:U});case"queue":return U;default:return u.jsx("div",{className:"flex flex-grow",children:U})}},ie=f.useMemo(()=>{if(y)return u.jsx(Qs,{className:"w-[20px] animate-spin"});switch(s.variant){case"dashboard-songs":case"dashboard-playlist":return u.jsx(u.Fragment,{});default:return c?u.jsxs("button",{onClick:ke,className:`${$.button} max-[549px]:!bg-transparent group`,children:[u.jsx(sQ,{className:`w-[20px]  ${ue?`${a.content_text} block group-hover:hidden`:"text-white hidden group-hover:block"}`}),u.jsx(mT,{className:`w-[20px] ${ue?"hidden group-hover:block":"block group-hover:hidden"}`})]}):u.jsx(u.Fragment,{})}},[ke,ue]),oe=f.useMemo(()=>{switch(s.variant){case"home":case"dashboard-songs":return u.jsx(ld,{closeMenu:k,variant:s.variant,handleAddSongToPlaylist:I,handleOpenModal:F,song:t});case"my-songs":case"favorite":return u.jsx(ld,{closeMenu:k,variant:"my-songs",handleAddSongToPlaylist:I,handleOpenModal:F,song:t});case"my-playlist":case"admin-playlist":case"dashboard-playlist":return u.jsx(ld,{closeMenu:k,variant:"playlist",handleRemoveSongFromPlaylist:L,handleOpenModal:F,song:t});case"queue":return u.jsx(ld,{closeMenu:k,handleRemoveSongFromQueue:J,variant:"queue",handleOpenModal:F,song:t});default:return u.jsx(u.Fragment,{})}},[s.variant,t,_]),de=f.useMemo(()=>{switch(g){case"":return u.jsx(u.Fragment,{});case"edit":return u.jsx(JG,{close:T,song:t});case"delete":return u.jsx(Lr,{loading:W,label:`Delete '${t.name}' ?`,desc:"This action cannot be undone",theme:a,callback:b,close:T});case"add-to-playlist":return u.jsx(gQ,{loading:W,handleAddSongToPlaylist:D,closeModal:T,song:t,userPlaylists:p})}},[g,W]),me=()=>{switch(s.variant){case"uploading":return u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{children:u.jsx(Qs,{className:"w-[20px] mr-[10px] animate-spin"})}),u.jsx("p",{className:"text-[14px]",children:"In process..."})]});default:return u.jsxs("div",{className:$.ctaWrapper,children:[ie,u.jsxs("div",{className:$.menuBtnWrapper,children:[u.jsxs(yu,{appendOnPortal:!0,children:[u.jsx(vu,{children:u.jsx(ri,{isWrapped:!0,content:"Menu",children:u.jsx("button",{className:`block group-hover/main:block ${$.button} ${_||s.variant==="queue"?"md:block":"md:hidden max-[549px]:!bg-transparent"}`,children:u.jsx(cG,{className:"w-[20px]"})})})}),u.jsx(xu,{appendTo:"portal",children:u.jsxs(yo,{className:`${W?"overflow-hidden relative":""}`,p:2,color:"sidebar",theme:a,children:[oe,W&&u.jsx("div",{className:$.overlay,children:u.jsx("div",{className:"h-[25px] w-[25px] border-[2px] border-r-black rounded-[50%] animate-spin"})})]})})]}),u.jsx("span",{className:`text-sm font-[500] hidden  group-hover/main:hidden ${_||s.variant==="queue"?"hidden":"md:block"}`,children:fc(t.duration)})]})]})}},Ue=()=>{switch(s.variant){case"uploading":return u.jsxs("div",{className:`${$.itemContainer} ${i||""} `,children:[X(),me()]});case"queue":return u.jsxs("div",{className:`${$.itemContainer} group/main py-[6px] ${n?`${a.content_bg} text-white`:`hover:bg-${a.alpha}`}`,children:[X(),me()]});default:return u.jsxs("div",{className:`${$.itemContainer} ${i||""} group/main ${n||te?`bg-${a.alpha}`:`hover:bg-${a.alpha}`}`,children:[X(),me()]})}};return u.jsxs(u.Fragment,{children:[Ue(),u.jsx(Br,{ref:E,variant:"animation",children:de})]})}const cQ=({data:t,active:e,onClick:n,hasTitle:r,classNames:i,idleClass:s},o)=>{const{theme:a}=Z(),l={container:"flex flex-col",imageFrame:"group relative transition-[width] duration-[.3s] origin-center rounded-[6px] overflow-hidden",image:"select-none object-cover object-center rounded w-full",overlay:`absolute  ${e?"":"inset-0 hidden bg-opacity-60 bg-[#333] items-center justify-center"}   group-hover:flex`,playingGifFrame:"absolute h-[30px] w-[30px] bottom-[15px] left-[15px] -z-1",title:"text-2xl text-white mt-3 font-bold text-ellipsis line-clamp-1"};if(t)return u.jsxs("div",{ref:o,className:`${l.container} ${s||""}`,children:[u.jsx("div",{className:`song-thumb ${i??""} flex items-end justify-center flex-shrink-0 w-[350px] h-[350px] min-[1536px]:w-[450px] min-[1536px]:h-[450px] `,children:u.jsxs("div",{className:`${l.imageFrame} ${e?"w-[350px] min-[1536px]:w-[450px]":"w-[280px] min-[1536px]:w-[330px]"}`,children:[u.jsx(pi,{classNames:"rounded-[6px]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsx("div",{className:`${l.overlay}`,children:!e&&u.jsx(G,{onClick:n,variant:"circle",hover:"scale",size:"clear",className:`h-[50px] w-[50px] ${a.content_hover_text}`,children:u.jsx(jv,{className:"w-full"})})}),e&&u.jsx("div",{className:l.playingGifFrame,children:u.jsx("img",{src:B1,alt:""})})]})}),r&&u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:l.title,children:(t==null?void 0:t.name)||"Some song"}),u.jsx("p",{className:"text-md opacity-50 line-clamp-1",children:(t==null?void 0:t.singer)||"..."})]})]})},vg=f.forwardRef(cQ);function uQ({data:t,expand:e}){if(t)return u.jsx("div",{className:` ${e?"w-full h-auto px-[20px]":"w-[60px] h-[60px] p-0 flex-shrink-0"}`,children:u.jsx(pi,{src:t.image_url,classNames:"w-full rounded-md"})})}function ds({songs:t,...e}){const{theme:n}=Z(),{currentSong:r}=K(Ne),{queueSongs:i}=K(gi),s=f.useMemo(()=>e.variant!=="uploading"?u.jsx(u.Fragment,{}):t.map((l,c)=>{const d={key:c,onClick:()=>{},song:l};return c==0?u.jsx(cd,{variant:"uploading",className:"temp-song",...d}):u.jsx(cd,{variant:"uploading",...d})}),[e]),o=u.jsx("p",{className:"text-center my-[60px]",children:"... ¯\\_(ツ)_/¯"}),a=f.useMemo(()=>{if(e.variant==="uploading")return u.jsx(u.Fragment,{});switch(e.variant){case"my-songs":if(!t.length&&!e.tempSongs.length)return o;break;default:if(!t.length)return o}const{handleSetSong:l,activeExtend:c=!0}=e;return t.map((d,h)=>{let m=c&&r.id===d.id;e.variant==="queue"&&(m=m&&r.currentIndex===h);const p=r.currentIndex===i.length-1;return e.variant==="queue"&&m&&!p?u.jsxs("div",{children:[u.jsx(cd,{active:m,onClick:()=>l(d,h),variant:e.variant,song:d,index:h}),u.jsx("div",{className:"mt-[12px] mb-[4px]",children:u.jsx("p",{className:`${n.content_text} text-[14px] font-[600]`,children:"Playing next"})})]},d.id+d.name.length+h):u.jsx(cd,{active:m,onClick:()=>l(d,h),variant:e.variant,song:d,index:h},d.id+d.name.length+h)})},[r,e,i,n]);return u.jsxs(u.Fragment,{children:[a,s]})}function hl({children:t,...e}){const{isSelectAll:n,resetSelect:r}=qc();switch(e.variant){case"home":case"dashboard-songs":return u.jsxs(u.Fragment,{children:[t,u.jsx(G,{onClick:r,className:"px-[5px] flex-shrink-0",children:u.jsx(Ns,{className:"w-[20px]"})})]});case"my-playlist":case"my-songs":case"dashboard-playlist":case"admin-playlist":return u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:e.selectAll,className:"ml-[10px]",children:n?u.jsx(Ty,{className:"w-[20px]"}):u.jsx(ac,{className:"w-[20px]"})}),t,u.jsx(G,{onClick:r,className:"px-[5px] flex-shrink-0",children:u.jsx(Ns,{className:"w-[20px]"})})]})}}function Lc({children:t,...e}){const n=Ke(),{theme:r}=Z(),{user:i}=dt(),{isChecked:s,selectedSongs:o,selectAll:a,resetSelect:l}=qc(),{playlistSongs:c}=K(yi),{userSongs:d,setUserSongs:h}=ut(),[m,p]=f.useState(!1),[y,x]=f.useState(""),{setErrorToast:_,setSuccessToast:v}=mn(),{deleteSongsFromPlaylist:g,isFetching:w}=So(),E=()=>{x("")},S=()=>{o.length<d.length?a(d):l()},T=()=>{o.length<c.length?a(c):l()},k=()=>{n(M1({songs:o})),v({message:"songs added to queue"}),l()},b=async()=>{if(i)try{p(!0);const F=o.map(ue=>ue.id);for(let ue of o)await PP(ue);const te=d.filter(ue=>!F.includes(ue.id));h(te),v({message:`${o.length} songs deleted`})}catch(F){console.log({message:F}),_({})}finally{l(),p(!1),E()}},D=async()=>{try{await g(o)}catch(F){console.log(F),_({message:"Error when delete song"})}finally{E(),l()}},I={title:"text-xl leading-[2.2] font-playwriteCU",outlineButton:`border-${r.alpha} ${r.side_bar_bg} space-x-1`,icon:"w-[20px]"},L=f.useMemo(()=>{if(y)switch(y){case"delete-selected-songs":return u.jsx(Lr,{loading:m,label:`Delete ${o.length} songs ?`,theme:r,callback:b,close:E});case"remove-selects-songs":return u.jsx(Lr,{loading:w,label:`Remove ${o.length} songs ?`,theme:r,callback:D,close:E})}},[y,w,m]),W=f.useMemo(()=>{switch(e.variant){case"home":return u.jsxs(u.Fragment,{children:[!s&&u.jsx("h3",{className:`${I.title} !mr-[14px]`,children:"Songs"}),s&&u.jsxs(hl,{variant:e.variant,children:[u.jsx("p",{className:"font-playwriteCU mr-1",children:o.length}),u.jsxs(G,{onClick:k,variant:"outline",size:"small",className:I.outlineButton,children:[u.jsx(Li,{className:I.icon}),u.jsx("span",{className:"",children:"Add to queue"})]})]})]});case"dashboard-songs":return u.jsxs(u.Fragment,{children:[!s&&t,s&&u.jsxs(hl,{variant:e.variant,children:[u.jsx("div",{className:"font-playwriteCU",children:o.length}),u.jsxs(G,{variant:"outline",size:"small",onClick:()=>console.log("confirm modal"),className:I.outlineButton,children:[u.jsx(lc,{className:I.icon}),u.jsx("span",{className:"hidden sm:block",children:"Delete"})]})]})]});case"my-songs":return u.jsxs(u.Fragment,{children:[!s&&t,s&&u.jsxs(hl,{selectAll:S,variant:e.variant,children:[u.jsx("div",{className:"font-playwriteCU !mr-[14px]",children:o.length}),u.jsxs(G,{variant:"outline",size:"small",onClick:k,className:I.outlineButton,children:[u.jsx(Li,{className:I.icon}),u.jsx("span",{className:"hidden sm:block",children:"Add to queue"})]}),u.jsxs(G,{variant:"outline",size:"small",onClick:()=>x("delete-selected-songs"),className:I.outlineButton,children:[u.jsx(lc,{className:I.icon}),u.jsx("span",{className:"hidden sm:block",children:"Delete"})]})]})]});case"dashboard-playlist":case"my-playlist":return u.jsxs(u.Fragment,{children:[!s&&t,s&&u.jsxs(hl,{selectAll:T,variant:e.variant,children:[u.jsx("p",{className:"font-playwriteCU !mr-[14px]",children:o.length}),e.variant!=="dashboard-playlist"&&u.jsxs(G,{variant:"outline",size:"small",onClick:k,className:I.outlineButton,children:[u.jsx(Li,{className:I.icon}),"Add to songs queue"]}),u.jsxs(G,{variant:"outline",size:"small",onClick:()=>x("remove-selects-songs"),className:I.outlineButton,children:[u.jsx(gT,{className:I.icon}),"Remove"]})]})]});case"admin-playlist":return u.jsxs(u.Fragment,{children:[!s&&u.jsx("div",{className:`${I.title} !mr-[14px]`,children:"Songs"}),s&&u.jsxs(hl,{selectAll:T,variant:e.variant,children:[u.jsx("p",{className:"font-[500]",children:o.length}),u.jsxs(G,{variant:"outline",size:"small",onClick:k,className:I.outlineButton,children:[u.jsx(Li,{className:I.icon}),"Add to songs queue"]})]})]})}},[s,o,e]);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center space-x-2 h-[44px] mb-3",children:W}),u.jsx(Br,{variant:"animation",children:L})]})}function dQ({loading:t}){const e=Ke(),{adminSongs:n}=ut(),{from:r}=K(gi),{currentSong:i}=K(Ne),s=(o,a)=>{(i.id!==o.id||i.song_in!=="admin")&&(e(Gn({...o,currentIndex:a})),(r.length>1||r[0]!=o.song_in)&&e(zm({songs:n})))};return u.jsxs(mc,{children:[u.jsx(Lc,{variant:"home"}),t&&Of,!t&&u.jsx(u.Fragment,{children:n.length?u.jsx(u.Fragment,{children:u.jsx(ds,{variant:"home",handleSetSong:s,activeExtend:i.song_in==="admin"||i.song_in==="favorite",songs:n})}):u.jsx("h1",{className:"text-[22px] text-center",children:"..."})})]})}function b4(){const t=Ke(),{userPlaylists:e,setUserPlaylists:n}=ut(),{currentPlaylist:r}=K(yi),{currentSong:i}=K(Ne),[s,o]=f.useState(!1),a=fn(),{setErrorToast:l}=mn();return{isFetching:s,addAdminPlaylist:async h=>{try{if(!h)throw new Error("playlist name invalid");const m=Zv(h)+"_admin",p=tx({id:m,by:"admin",name:h});o(!0);const y=[...e,p];await Wn({collection:"playlist",data:p,id:m,msg:">>> api: set playlist doc"}),n(y)}catch(m){console.log({message:m}),l({})}finally{o(!1)}},deleteAdminPlaylist:async()=>{o(!0),await Oc({collection:"playlist",id:r.id,msg:">>> api: delete playlist doc"});const h=e.filter(m=>m.id!==r.id);n(h),t(L1()),i.song_in===`playlist_${r.id}`&&t(lo()),o(!1),a("/dashboard")}}}function K1({playlist:t,loading:e,activeCondition:n=!0,className:r,...i}){const{theme:s}=Z(),{currentSong:o}=K(Ne),a=f.useRef(null),{addPlaylist:l,isFetching:c}=So(),{addAdminPlaylist:d,isFetching:h}=b4(),m=()=>{var y;return(y=a.current)==null?void 0:y.toggle()},p={playlistItem:"w-1/4 p-[8px] max-[800px]:w-1/2"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`flex flex-row flex-wrap -mx-[8px] ${r}`,children:[e&&OF,!e&&u.jsxs(u.Fragment,{children:[t.length?t.map((y,x)=>{const _=n&&o.song_in.includes(y.id);switch(i.location){case"home":case"my-songs":return u.jsx("div",{className:p.playlistItem,children:u.jsx(Cy,{active:_,theme:s,data:y})},x);case"dashboard":return u.jsx("div",{className:p.playlistItem,children:u.jsx(Cy,{active:_,theme:s,data:y,link:`/dashboard/playlist/${y.id}`})},x)}}):i.location==="home"&&u.jsx("p",{className:"text-center w-full",children:"..."}),i.location!=="home"&&u.jsx("div",{className:`${p.playlistItem} mb-[25px]`,children:u.jsx(KF,{theme:s,className:"pt-[100%]",onClick:()=>{var y;return(y=a.current)==null?void 0:y.toggle()}})})]})]}),i.location!=="home"&&u.jsxs(Br,{variant:"animation",ref:a,children:[i.location==="my-songs"&&u.jsx(Ob,{addPlaylist:l,isFetching:c,close:m}),i.location==="dashboard"&&u.jsx(Ob,{addPlaylist:d,isFetching:h,close:m})]})]})}function k4({tabs:t,activeTab:e,setActiveTab:n,className:r,render:i,inFullScreen:s}){const{theme:o}=Z();return u.jsx("ul",{className:`flex space-x-[4px] py-[4px] h-full px-[4px] items-center ${s?"mx-auto":""} rounded-full ${s?"bg-white/10":o.side_bar_bg} ${r&&r}`,children:t.map((a,l)=>u.jsx("li",{onClick:()=>n(a),className:`${s?"px-[30px]":"px-[20px]"}  cursor-pointer hover:bg-white/20 h-full rounded-full max-[549px]:px-4 ${s?"":o.content_hover_text} ${e===a?s?"bg-white/20":`${o.content_text} ${o.container}`:"opacity-60"}`,children:u.jsx("span",{className:"leading-[30px] font-normal sm:font-bold",children:i(a)})},l))})}function T4({to:t}){const{theme:e}=Z(),n=fn(),r=Dn(),i=o=>{typeof t=="string"&&j5(t),o==="back"&&n(-1)},s={button:`h-[36px] w-[36px] p-[4px] rounded-full ${e.content_hover_bg} bg-${e.alpha}`};return u.jsx("div",{className:"flex gap-[10px] mb-[30px]",children:u.jsx("button",{onClick:()=>i("back"),className:`${s.button} ${r.pathname==="/"?"disable":""}`,children:u.jsx(DP,{})})})}const hQ=({time:t=6e3,autoClose:e})=>{const{setToasts:n,toasts:r}=mn(),{theme:i}=Z(),[s,o]=f.useState(""),a=c=>{n(d=>d.filter(h=>h.id!=c))};f.useEffect(()=>{s&&n(c=>c.filter(d=>d.id!=s))},[s]),f.useEffect(()=>{if(!e||!r.length)return;const c=r[r.length-1].id;setTimeout(()=>{o(c)},t)},[r]);const l={container:"toast-portal fixed z-[199] bottom-[100px] left-[20px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:mo.createPortal(u.jsx("div",{className:l.container,children:u.jsx("div",{className:"flex flex-col gap-[10px]",children:!!r.length&&r.map((c,d)=>u.jsx(ZG,{onClick:a,theme:i,toast:c},d))})}),document.getElementById("portals"))})};function fQ({user:t},e){return e?u.jsx("p",{className:"text-xl mb-4 ml-2",ref:e,children:t.display_name}):u.jsx("p",{className:"text-xl mb-4 ml-2",children:t.display_name})}f.forwardRef(fQ);function mQ(){const{theme:t}=Z(),[e]=pu(os),[n,r]=f.useState(""),i=f.useRef(null),{logOut:s}=gu(),o=()=>{var h;return(h=i.current)==null?void 0:h.toggle()},a=h=>r(h),l=async()=>{try{await s()}catch(h){console.log("signOut error",{messsage:h})}finally{o()}},c=f.useMemo(()=>{switch(n){case"":return u.jsx(u.Fragment,{});case"logout":return u.jsx(Lr,{callback:l,close:o,loading:!1,theme:t,label:"Log out ?"});case"info":return u.jsx(X1,{close:o});case"theme":return}},[n]),d={header:`${t.side_bar_bg} fixed top-0 z-10 left-0 right-0`,container:"container mx-auto px-[40px] flex justify-between items-center h-[50px]",avatarFrame:"w-[34px] h-[34px] rounded-full",settingBtn:` flex ml-[12px] justify-center items-center hover:brightness-75 bg-${t.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`${d.header}`,children:u.jsxs("div",{className:d.container,children:[u.jsxs(Kr,{to:"/dashboard",className:"text-[24px] font-semibold",children:["HD",u.jsx("span",{className:`${t.content_text} ml-[4px] uppercase`,children:"Dashboard"})]}),u.jsxs("div",{className:"flex items-center",children:[(e==null?void 0:e.displayName)&&u.jsx("p",{className:"text-[14px] mr-[8px]",children:e.displayName}),u.jsx("div",{className:`${d.avatarFrame} overflow-hidden `,children:(e==null?void 0:e.photoURL)&&u.jsx("img",{src:e.photoURL,className:"w-full",alt:""})}),u.jsxs(_4,{placement:"bottom-end",children:[u.jsx(E4,{className:`${d.avatarFrame} ${d.settingBtn}`,children:u.jsx(hT,{className:"w-[24px]"})}),u.jsx(S4,{children:u.jsx(XP,{loggedIn:!1,openModal:a})})]})]})]})}),u.jsx(Br,{variant:"animation",ref:i,children:c})]})}const pQ="/HD-MP3/assets/user-default-971f59df.png";function Ny({className:t}){const[e]=pu(os),n={imageFrame:`${t||"w-[35px] h-[35px]"} flex-shrink-0 rounded-full overflow-hidden ${e!=null&&e.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`};return u.jsx("div",{className:n.imageFrame,children:u.jsx(pi,{src:(e==null?void 0:e.photoURL)||pQ,classNames:"w-full"})})}function X1({close:t}){return u.jsxs("div",{className:"w-[400px] max-w-[calc(90vw-40px)]",children:[u.jsx(ys,{close:t,title:"HD MP3"}),u.jsxs("p",{children:[u.jsx("span",{className:"font-[500]",children:"Technologies: "})," React, Tailwind Css, Google firebase"]})]})}function jb({onClick:t,theme:e,active:n}){return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"w-[25%] px-2 mt-3 max-[549px]:w-[50%]",children:[u.jsx("div",{onClick:()=>t(e),className:`relative border-l-[20px] ${e.content_border} pt-[100%] rounded-xl ${e.side_bar_bg} ${n?e.content_border:""}`,children:n&&u.jsx("div",{className:"absolute bottom-[10px] right-[10px]",children:u.jsx(uT,{className:`${e.content_text} w-[25px]`})})}),u.jsx("p",{className:"text-base font-[500] mt-1",children:e.name})]})})}function I4({close:t}){const{theme:e,setTheme:n}=Z(),r=a=>{Jt("theme",a.id),n(a)},i={songItemContainer:`w-full border-b border-${e.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[900px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-y-auto overflow-x-hidden no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-2 -mt-3 flex-wrap",linkItem:`py-[10px] border-b border-${e.alpha} last:border-none`},s=ch.map(a=>{const l=a.id===e.id;if(a.type==="light")return u.jsx(jb,{active:l,theme:a,onClick:r},a.id)}),o=ch.map(a=>{const l=a.id===e.id;if(a.type==="dark")return u.jsx(jb,{active:l,theme:a,onClick:r},a.id)});return u.jsxs("div",{className:i.popupWrapper,children:[u.jsx(ys,{close:t,title:"Themes"}),u.jsxs("div",{className:i.themeContainer,children:[u.jsx("h2",{className:"text-lg font-semibold mb-[10px]",children:"Dark"}),u.jsx("div",{className:i.themeList,children:o}),u.jsx("h2",{className:"text-lg font-semibold mb-[10px] mt-[30px]",children:"Light"}),u.jsx("div",{className:i.themeList,children:s})]})]})}function Lr({loading:t,theme:e,callback:n,label:r,close:i,buttonLabel:s,desc:o="This action cannot be undone",className:a}){return u.jsxs("div",{className:`${a||"w-[400px] max-w-[calc(90vw-40px)]"} ${t?"disable":""}`,children:[u.jsx("div",{className:"text-xl font-playwriteCU leading-[2.2] mb-3",children:r||"Wait a minute"}),o&&u.jsx("p",{className:"font-semibold text-lg text-red-500",children:o}),u.jsxs("div",{className:"flex space-x-3 mt-5",children:[u.jsx(G,{onClick:i,className:`${e.content_bg} rounded-full text-lg`,variant:"primary",children:"Close"}),u.jsx(G,{isLoading:t,className:" text-[#fff] bg-red-500 rounded-full text-lg",variant:"primary",onClick:n,children:s||"Yes please"})]})]})}function Ob({close:t,addPlaylist:e,isFetching:n}){const{theme:r}=Z(),[i,s]=f.useState(""),o=f.useRef(null),a=async l=>{l.preventDefault(),i&&(await e(i),t())};return f.useEffect(()=>{var l;(l=o.current)==null||l.focus()},[]),u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]:",children:[u.jsx(ys,{close:t,title:"Add playlist"}),u.jsxs("form",{action:"",onSubmit:a,children:[u.jsx("input",{ref:o,className:`bg-${r.alpha} px-[20px] rounded-full outline-none mt-[10px] text-[16px]  h-[35px] w-full`,type:"text",placeholder:"name...",value:i,onChange:l=>s(l.target.value)}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(G,{type:"submit",isLoading:n,variant:"primary",className:`${r.content_bg} rounded-full ${i?"":"disable"}`,children:"Save"})})]})]})}function gQ({closeModal:t,handleAddSongToPlaylist:e,userPlaylists:n,song:r,loading:i}){return u.jsxs("div",{className:`w-[400px] max-w-[calc(90vw-40px)] ${i?"disable":""}`,children:[u.jsx(ys,{close:t,title:"Playlist"}),u.jsx("div",{className:"max-h-[60vh]",children:u.jsx("ul",{className:"",children:n!=null&&n.length?u.jsx(u.Fragment,{children:n.map((s,o)=>{const a=s.song_ids.includes(r.id);return u.jsxs("li",{onClick:()=>!a&&e(s),className:`list-none flex rounded-[4px] p-[5px] ${a&&"opacity-60"}`,children:[u.jsx(xa,{className:"w-[20px] mr-[5px]"}),u.jsxs("p",{children:[s.name," ",a&&"(added)"]})]},o)})}):"No playlist jet..."})})]})}function yQ({close:t,active:e}){const{theme:n}=Z(),r={button:`bg-${n.alpha} ${n.content_hover_bg} text-[14px] font-[500] px-[10px]  py-[4px] rounded-[99px]`,input:`bg-${n.alpha} px-[10px] rounded-[4px] outline-none mt-[10px] text-[16px]  h-[35px] w-full`},i=s=>{e(s),t()};return u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]",children:[u.jsx(ys,{close:t,title:"Sleep timer"}),u.jsx("div",{children:u.jsxs("div",{className:"flex space-x-[10px] mb-[12px]",children:[u.jsx("button",{type:"button",onClick:()=>i(15),className:`${r.button} `,children:"15 min"}),u.jsx("button",{type:"button",onClick:()=>i(20),className:`${r.button} `,children:"20 min"}),u.jsx("button",{type:"button",onClick:()=>i(30),className:`${r.button} `,children:"30 min"})]})})]})}function C4({admin:t}){const e=f.useRef(null),n=f.useRef(null),r=f.useRef(null),{handleInputChange:i}=qG({audioRef:e,testImageRef:r,inputRef:n,admin:t}),s={container:"upload portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:mo.createPortal(u.jsxs("div",{className:s.container,children:[u.jsx("audio",{className:"hidden",ref:e}),u.jsx("input",{ref:n,onChange:i,type:"file",multiple:!0,accept:"audio",id:"song_upload",className:"hidden"}),u.jsx("img",{className:"hidden",ref:r})]}),document.getElementById("portals"))})}function xg({children:t}){const{theme:e}=Z();return u.jsx(u.Fragment,{children:u.jsxs("div",{className:`${e.container} min-h-screen ${e.type==="dark"?"text-white":"text-[#333]"}`,children:[u.jsx(mQ,{}),u.jsxs("div",{className:"h-[calc(100vh-50px)] no-scrollbar overflow-auto",children:[u.jsx("div",{className:"h-[100px]"}),u.jsx("div",{className:"container mx-[auto] px-[40px]",children:t})]}),u.jsx(KP,{admin:!0}),u.jsx(C4,{admin:!0})]})})}function vQ(){const{loading:t}=dt(),{adminPlaylists:e}=ut(),{isOnMobile:n}=Z(),{loading:r}=Vm({});return u.jsxs(u.Fragment,{children:[n&&u.jsx(yK,{}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-xl leading-[2.2] font-playwriteCU mb-3",children:"Popular"}),u.jsx(K1,{loading:r||t,playlist:e,location:"home"})]}),u.jsx("div",{className:"pb-[30px]",children:u.jsx(dQ,{loading:r})}),n&&u.jsx(vK,{})]})}function xQ(){const{theme:t}=Z(),{currentSong:e}=K(Ne),{userSongs:n}=ut(),[r,i]=f.useState(),[s,o]=f.useState({base:"",real_time:[],id:""}),a=f.useRef(null),[l,c]=f.useState(!1),d=f.useRef(!1),{errorMsg:h,loading:m,initial:p}=Vm({}),y=fn(),x=bf(),_=f.useCallback(async g=>{try{if(g.lyric_id){c(!0);const w=await ja({collection:"lyrics",id:g.lyric_id,msg:">>> api: get lyric doc"});if(w.exists()){const E=w.data();o(E)}}}catch(w){console.log({message:w})}finally{c(!1)}},[]),v=f.useCallback(async()=>{if(console.log("get song"),e.name&&e.id===x.id)e.by==="admin"?y(At.Home):(i(e),await _(e));else{const g=n.find(w=>w.id===x.id);g?(i(g),await _(g)):y(At.Home)}},[e,n]);return f.useEffect(()=>{p&&(d.current||(d.current=!0,r||v()))},[p]),m||l?u.jsx("h1",{children:u.jsx(Qs,{className:"w-[25px] animate-spin"})}):h?u.jsx("h1",{children:h}):u.jsxs("div",{className:"",children:[u.jsx("audio",{ref:a,src:r==null?void 0:r.song_url,className:"hidden"}),r&&u.jsx(u.Fragment,{children:u.jsx(qP,{lyric:s,audioRef:a,theme:t,song:r})})]})}function wQ({initialLoading:t}){const e=Ke(),{userSongs:n}=ut(),{currentSong:r}=K(Ne),{tempSongs:i}=Bm(),s=f.useMemo(()=>i.length+n.length,[i,n]),o=(a,l)=>{r.id!==a.id&&e(Gn({...a,currentIndex:l}))};return u.jsxs(mc,{children:[u.jsx(Lc,{variant:"dashboard-songs",children:t?u.jsx(u.Fragment,{children:u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(_t,{className:"h-[20px] w-[90px]"})})}):u.jsxs("p",{className:"font-semibold opacity-[.6]",children:[s," Songs"]})}),u.jsxs("div",{className:"min-h-[50vh]",children:[t&&Of,!t&&u.jsx(u.Fragment,{children:s?u.jsxs(u.Fragment,{children:[u.jsx(ds,{variant:"dashboard-songs",tempSongs:i,activeExtend:!0,songs:n,handleSetSong:o}),u.jsx(ds,{variant:"uploading",songs:i})]}):u.jsx("p",{className:"text-center",children:"¯\\_(ツ)_/¯"})})]})]})}function _Q(){const{theme:t}=Z(),{user:e,loading:n}=dt(),{currentSong:r}=K(Ne),{userPlaylists:i}=ut(),[s,o]=f.useState(!0),[a,l]=f.useState([]),[c,d]=f.useState("userSongs"),{loading:h,errorMsg:m}=Vm({admin:!0}),p=async()=>{console.log(">>> api: get user");try{if(!e)return;o(!0);const _=Ka(pm(Eo,"users"),Xa("email","!=",e.email)),v=await Qa(_);if(v.docs){const g=v.docs.map(w=>w.data());l(g)}}catch(_){console.log(_)}finally{o(!1)}},y=()=>a.map((_,v)=>u.jsxs("tr",{className:"",children:[u.jsx("td",{className:x.td,children:u.jsx("div",{className:"h-[44px] w-[44px] ml-[20px]",children:u.jsx(pi,{classNames:"rounded-[4px]",src:_.photoURL})})}),u.jsx("td",{className:x.td,children:_.display_name}),u.jsx("td",{className:x.td,children:_.email}),u.jsx("td",{className:x.td,children:IF(_==null?void 0:_.latest_seen)})]},v));f.useEffect(()=>{n||c==="users"&&!a.length&&p()},[c]);const x={button:`${t.content_bg} rounded-full`,inActiveBtn:`bg-${t.alpha}`,activeBtn:`${t.content_bg}`,td:`py-[10px] my-[10px] border-${t.alpha} border-b-[1px]`,th:"py-[5px]",tableContainer:`border border-${t.alpha} rounded-[4px]`,tableHeader:`border-b border-${t.alpha} ${t.side_bar_bg} flex items-center h-[50px] gap-[15px]`};return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsxs("div",{className:"mb-[20px]",children:[u.jsx(G,{onClick:()=>d("userSongs"),className:`${c==="userSongs"?x.activeBtn:x.inActiveBtn}  rounded-full`,variant:"primary",children:"Songs"}),u.jsx(G,{onClick:()=>d("users"),className:` ${c==="users"?x.activeBtn:x.inActiveBtn} rounded-full ml-[10px]`,variant:"primary",children:"Users"})]}),u.jsxs("div",{className:"mt-[30px]",children:[c==="userSongs"&&u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-2xl font-bold mb-[10px]",children:"Playlist"}),u.jsx(K1,{activeCondition:!!r.song_in,loading:h,playlist:i,location:"dashboard"}),u.jsxs("div",{className:"mt-[30px] flex justify-between mb-[10px]",children:[u.jsx("h3",{className:"text-2xl font-bold",children:"Songs"}),u.jsx("div",{className:"flex items-center",children:u.jsxs("label",{className:`${t.content_bg} ${status==="uploading"||h?"disable":""} rounded-full flex px-[20px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(lh,{className:"w-[20px] mr-[5px]"}),"Upload"]})})]}),m&&u.jsx("p",{children:"Some thing went wrong"}),!m&&u.jsx(wQ,{initialLoading:h})]}),c==="users"&&u.jsx("div",{className:x.tableContainer,children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:`${t.bottom_player_bg} w-full text-[14px] py-[4px]`,children:u.jsxs("tr",{children:[u.jsx("th",{}),u.jsx("th",{className:"text-left py-[4px]",children:"Name"}),u.jsx("th",{className:"text-left py-[4px]",children:"Email"}),u.jsx("th",{className:"text-left py-[4px]",children:"Latest Seen"})]})}),u.jsx("tbody",{children:y()})]})})]})]})})}function EQ({playlist:t,close:e}){const{theme:n}=Z(),r=f.useRef(null),[i,s]=f.useState(""),[o,a]=f.useState(!1),{editPlaylist:l,isFetching:c}=So(),d=async m=>{if(m.preventDefault(),!!o)try{await l(i,t)}catch(p){console.log(p)}finally{e()}},h={editContainer:"w-[400px] max-w-[calc(90vw-40px)]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full"};return f.useEffect(()=>{const m=r.current;m==null||m.focus(),s(t.name)},[]),f.useEffect(()=>{i.trim()&&i.trim()!==t.name?a(!0):a(!1)},[i]),u.jsxs(u.Fragment,{children:[u.jsx(ys,{close:e,title:"Edit playlist"}),u.jsxs("form",{action:"",onSubmit:d,className:`${h.editContainer} ${c?"disable":""}`,children:[u.jsx("input",{ref:r,value:i,onChange:m=>s(m.target.value),type:"text",className:`${h.input} bg-${n.alpha} ${n.type==="light"?"text-[#333]":"text-white"}`}),u.jsx(G,{type:"submit",variant:"primary",isLoading:c,className:`${n.content_bg} rounded-full self-end mt-[15px] ${o?"":"disable"}`,children:"Save"})]})]})}function wg({loading:t,type:e}){const n=Ke(),{theme:r,isOnMobile:i}=Z(),{currentSong:s}=K(Ne),{currentPlaylist:o,playlistSongs:a}=K(yi),[l,c]=f.useState(""),d=f.useRef(null),h=bf(),{deletePlaylist:m,isFetching:p}=So(),{deleteAdminPlaylist:y,isFetching:x}=b4(),_=f.useMemo(()=>a.reduce((I,L)=>I+L.duration,0),[a]),v=I=>{var L;c(I),(L=d.current)==null||L.toggle()},g=()=>{var I;return(I=d.current)==null?void 0:I.toggle()},w=(I,L)=>{const W=`playlist_${o.id}`;(s.id!==I.id||s.song_in!==W)&&(n(Gn({...I,currentIndex:L,song_in:W})),s.song_in!==W&&(n(zm({songs:a})),console.log("setActuallySongs when playlist list")))},E=()=>{const I=a[0];s.song_in.includes(h.name)||w(I,0)},S=u.jsxs(u.Fragment,{children:[u.jsx(_t,{className:"h-[38px] mb-[6px] w-[200px]"}),u.jsx(_t,{className:"hidden md:block h-[16px] w-[60px]"}),u.jsx(_t,{className:"hidden md:block h-[16px] w-[200px]"})]}),T=f.useMemo(()=>t?S:u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-xl leading-[2.2] font-playwriteCU",children:o.name}),!i&&u.jsx("p",{className:"text-lg leading-[1] font-[500]",children:fc(_)}),u.jsxs("p",{className:"hidden md:block opacity-60 leading-[1]",children:["created by ",o.by]})]}),[t,o]),k=f.useMemo(()=>{if(t)return u.jsx(u.Fragment,{});switch(e){case"my-playlist":case"dashboard-playlist":return u.jsxs(u.Fragment,{children:[u.jsxs(G,{onClick:E,size:"clear",className:`rounded-full px-[20px] py-1 ${r.content_bg} ${!o.song_ids.length&&"disable"}`,children:[u.jsx(x_,{className:"w-[22px]"}),u.jsx("span",{className:"font-playwriteCU leading-[2.2]",children:"Play"})]}),u.jsx(G,{onClick:()=>v("delete"),className:`p-[8px] rounded-full ${r.content_hover_bg} bg-${r.alpha}`,children:u.jsx(lc,{className:"w-[22px]"})}),u.jsx(G,{onClick:()=>v("edit"),className:`p-[8px] rounded-full ${r.content_hover_bg} bg-${r.alpha}`,children:u.jsx(vT,{className:"w-[22px]"})})]});case"admin-playlist":return u.jsxs(G,{onClick:E,size:"clear",className:`rounded-full px-[20px] space-x-1 py-1 ${r.content_bg} ${!o.song_ids.length&&"disable"}`,children:[u.jsx(x_,{className:"w-7"}),u.jsx("span",{className:"font-playwriteCU leading-[2.2]",children:"Play"})]})}},[t,a]),b=f.useMemo(()=>{switch(l){case"":return u.jsx(u.Fragment,{});case"edit":return u.jsx(EQ,{close:g,playlist:o});case"delete":if(e==="my-playlist")return u.jsx(Lr,{loading:p,label:"Delete playlist ?",theme:r,callback:m,close:g});if(e==="dashboard-playlist")return u.jsx(Lr,{loading:x,label:"Delete playlist ?",theme:r,callback:y,close:g})}},[l,p,x]),D={container:"w-full space-y-[12px] md:space-y-0 md:space-x-[12px] flex flex-col md:flex-row",playlistInfoContainer:"flex flex-col gap-[12px] md:justify-between",infoTop:"flex justify-center items-center gap-[8px] md:flex-col md:items-start",countSongText:"text-[14px]] font-semibold opacity-[.6] leading-[1]",ctaContainer:"flex justify-center space-x-[12px] md:justify-start"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:D.container,children:[u.jsx("div",{className:"w-full px-[20px] md:w-1/4 md:px-0",children:t?u.jsx(_t,{className:"pt-[100%] rounded-[8px]"}):u.jsx(Cy,{data:o,active:s.song_in===`playlist_${o.id}`,inDetail:!0,theme:r})}),u.jsxs("div",{className:D.playlistInfoContainer,children:[u.jsx("div",{className:D.infoTop,children:T}),u.jsx("div",{className:`${D.ctaContainer} `,children:k})]})]}),u.jsx(Br,{variant:"animation",ref:d,children:b})]})}function _g({variant:t}){const e=Ke(),{theme:n}=Z(),{currentSong:r}=K(Ne),{from:i,queueSongs:s}=K(gi),{currentPlaylist:o,playlistSongs:a}=K(yi),l=f.useRef(null),c=()=>{var _;return(_=l.current)==null?void 0:_.toggle()},{setErrorToast:d}=mn(),{deleteSongFromPlaylist:h}=So(),m=(_,v)=>{const g=`playlist_${o.id}`;(r.id!==_.id||r.song_in!==g)&&(e(Gn({..._,currentIndex:v,song_in:g})),(i.length>1||i[0]!=g||a.length!==s.length)&&e(zm({songs:a})))},p=async _=>{try{await h(_)}catch(v){console.log(v),d({})}},y=f.useMemo(()=>{if(!a.length)return u.jsx(u.Fragment,{});switch(t){case"admin-playlist":return u.jsx(Lc,{variant:"admin-playlist",children:u.jsxs("p",{className:"font-[500] opacity-[.5]",children:[a.length," Songs"]})});case"my-playlist":case"dashboard-playlist":return u.jsx(Lc,{variant:"my-playlist",children:u.jsxs("p",{className:"font-[500] opacity-[.5]",children:[a.length," Songs"]})})}},[o,a]),x=f.useMemo(()=>{switch(t){case"admin-playlist":return u.jsx(ds,{variant:"admin-playlist",songs:a,handleSetSong:m,activeExtend:r.song_in.includes(o.id)});case"my-playlist":case"dashboard-playlist":return u.jsxs(u.Fragment,{children:[u.jsx(ds,{variant:t,songs:a,handleSetSong:m,activeExtend:r.song_in.includes(o.id),deleteFromPlaylist:p}),u.jsx("div",{className:"flex justify-center mt-[20px]",children:u.jsxs(G,{onClick:()=>{var _;return(_=l.current)==null?void 0:_.toggle()},className:`${n.content_bg} rounded-full`,variant:"primary",size:"clear",children:[u.jsx(Li,{className:"w-6 mr-[5px]"}),u.jsx("span",{className:"font-playwriteCU leading-[2.2] text-sm",children:"Add song"})]})})]})}},[o,a,r]);return u.jsxs(u.Fragment,{children:[u.jsxs(mc,{children:[y,x]}),u.jsx(Br,{ref:l,variant:"animation",children:u.jsx(mc,{children:u.jsx(AG,{closeModal:c,playlistSongs:a})})})]})}function A4(){const{currentPlaylist:t}=K(yi),{loading:e}=OG(),n=Dn(),r=f.useMemo(()=>n.pathname.includes("/dashboard/playlist"),[n]),i=f.useMemo(()=>r?u.jsx(wg,{loading:e,type:"dashboard-playlist"}):t.by==="admin"?u.jsx(wg,{loading:e,type:"admin-playlist"}):u.jsx(wg,{loading:e,type:"my-playlist"}),[e]),s=f.useMemo(()=>e?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(_t,{className:"h-[20px] w-[90px]"})}),Of]}):r?u.jsx(_g,{variant:"dashboard-playlist"}):t.by==="admin"?u.jsx(_g,{variant:"admin-playlist"}):u.jsx(_g,{variant:"my-playlist"}),[e]);return u.jsxs("div",{className:"min-h-screen",children:[u.jsx(T4,{}),i,u.jsx("div",{className:"pb-[50px] mt-[20px]",children:s})]})}const SQ=["mine","favorite"];function bQ({initialLoading:t}){const e=Ke(),{theme:n}=Z(),{user:r}=dt(),{userSongs:i}=ut(),{currentSong:s}=K(Ne),{from:o,queueSongs:a}=K(gi),[l,c]=f.useState("mine"),[d,h]=f.useState(!1),{tempSongs:m}=Bm(),p=f.useMemo(()=>t?0:m.length+i.length,[m,i,t]),y=async()=>{if(r)return await Sh(300),h(!1)},x=async v=>{c(v),h(!0),v==="favorite"?await y():(await Sh(300),h(!1))},_=(v,g)=>{(o.length>1||i.length!==a.length||o[0]!="user")&&e(zm({songs:i})),(s.id!==v.id||s.song_in!=="user")&&e(Gn({...v,currentIndex:g}))};return u.jsxs(u.Fragment,{children:[u.jsx(Lc,{variant:"my-songs",children:t?u.jsx(u.Fragment,{children:u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(_t,{className:"h-[20px] w-[90px]"})})}):u.jsxs("p",{className:"font-[500] opacity-[.5]",children:[p," Songs"]})}),u.jsx("div",{className:"flex items-center space-x-[10px] py-[10px]",children:SQ.map((v,g)=>{const w=l===v;return u.jsx("button",{onClick:()=>x(v),className:`text-[14px] font-[500] px-[10px] 
                        ${n.content_border} border py-[4px] rounded-[99px] ${w?n.content_bg:""}
                    `,children:v==="mine"?"My songs":"Favorite"},g)})}),u.jsxs("div",{className:"min-h-[50vh]",children:[(t||d)&&Of,!t&&!d&&u.jsxs(u.Fragment,{children:[l==="mine"&&!!p&&u.jsxs(u.Fragment,{children:[u.jsx(ds,{variant:"my-songs",handleSetSong:_,activeExtend:s.song_in==="user"||s.song_in==="favorite",songs:i,tempSongs:m}),u.jsx(ds,{songs:m,variant:"uploading"})]}),l==="favorite"&&u.jsx("img",{className:"mx-auto my-5",src:"https://d4t06.github.io/Vue-Mobile/assets/search-empty-ChRLxitn.png",alt:""})]})]})]})}function kQ(){const{theme:t}=Z(),{loading:e,user:n}=dt(),{currentSong:r}=K(Ne),{userPlaylists:i}=ut(),{status:s}=Bm(),o=fn(),{loading:a,errorMsg:l,initial:c}=Vm({});return f.useEffect(()=>{e||n&&(n.email||(o(At.Home),console.log(">>> navigate to home")))},[e,c]),l?u.jsx("h1",{children:l}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px] ",children:[window.innerWidth<800&&u.jsx(T4,{to:""}),u.jsx("h3",{className:"font-playwriteCU leading-[2.2] mb-3 text-xl",children:"Playlist"}),u.jsx(K1,{activeCondition:!!r.song_in,loading:a,playlist:i,location:"my-songs"})]}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"font-playwriteCU leading-[2.2] mb-3 text-xl",children:"Songs"}),u.jsxs("label",{className:`${t.content_bg} ${s==="uploading"||a?"disable":""} items-center hover:opacity-60 py-1 rounded-full flex px-4 cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(cT,{className:"w-7 mr-1"}),u.jsx("span",{className:" font-playwriteCU leading-[2.2]",children:"Upload"})]})]}),u.jsxs(mc,{children:[l&&u.jsx("p",{children:"Some thing went wrong"}),!l&&u.jsx(bQ,{initialLoading:a})]})]})]})}function TQ(){const{theme:t}=Z(),{user:e,loading:n}=dt(),[r,i]=f.useState(),[s,o]=f.useState({base:"",real_time:[],id:""}),a=f.useRef(null),l=f.useRef(!1),c=bf(),d=fn(),h=async()=>{try{const m=await ja({collection:"songs",id:c==null?void 0:c.id,msg:">>> api: get song doc"});if(!m.exists()){d("/dashboard");return}const p=m.data();if(p.lyric_id){const y=await ja({collection:"lyrics",id:p.lyric_id});if(y.exists()){const x=y.data();o(x)}}i(p)}catch(m){console.log({message:m})}};return f.useEffect(()=>{if(!n){if(!e)return d(At.Home);l.current||(l.current=!0,h())}},[]),u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsx("audio",{ref:a,src:r&&r.song_url,className:"hidden"}),r&&u.jsx(u.Fragment,{children:u.jsx(qP,{admin:!0,lyric:s,audioRef:a,theme:t,song:r})})]})}function IQ(){const{theme:t}=Z();return u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.container} ${t.type==="dark"?"text-white":"text-black"}`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Page Not found"}),u.jsx(Kr,{to:"/",className:`${t.content_bg} font-bold  text-[#fff] mt-[20px] rounded-full flex px-[20px] py-[4px] cursor-pointer`,children:"Go home"})," "]})}function CQ(){const{theme:t}=Z(),e=fn(),n=async()=>{await ZI(os),e("/login")};return u.jsxs("div",{className:`${t.container} flex flex-col justify-center items-center min-h-screen`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Unauthorized"}),u.jsx(G,{onClick:n,variant:"primary",size:"normal",className:`${t.content_bg} font-bold text-[20px]  text-[#fff] rounded-full mt-[20px]`,children:"Exit"})]})}function AQ(){var a,l;const[t]=pu(os),{logIn:e}=gu(),{theme:n}=Z(),r=fn(),i=Dn(),s=((l=(a=i==null?void 0:i.state)==null?void 0:a.from)==null?void 0:l.pathname)||"/dashboard",o=async()=>{try{await e()}catch(c){console.log(c)}};return f.useEffect(()=>{if(t!=null&&t.email){r(s,{replace:!0});return}console.log("run effect")},[t]),u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${n.container} ${n.type==="dark"?"text-white":"text-black"}`,children:[u.jsx(G,{onClick:o,variant:"default",size:"normal",className:`${n.content_bg} font-bold text-[#fff] text-[30px] rounded-full`,children:"Login with google"})," "]})}const At={Home:"/",Dashboard:"/dashboard",DashboardPlaylist:"/dashboard/playlist/:id",DashboardEdit:"/dashboard/edit/:id",MySongs:"/mysongs",Favorite:"/favorite",Playlist:"/playlist/:id",Edit:"/mysongs/edit/:id"},RQ=[{path:At.Home,component:vQ,layout:""},{path:At.MySongs,component:kQ,layout:""},{path:At.Playlist,component:A4,layout:""},{path:At.Edit,component:xQ,layout:""}],PQ=[{path:At.Dashboard,component:_Q,layout:xg},{path:At.DashboardPlaylist,component:A4,layout:xg},{path:At.DashboardEdit,component:TQ,layout:xg}];function NQ(){const t={container:"my-[30px] flex flex-col md:flex-row md:justify-between items-start",icon:"w-[26px] sm:w-[20px] scale-[1] hover:scale-[1.1] transition linear ",copyRightText:"text-[14px]"};return u.jsxs("div",{className:`${t.container}`,children:[u.jsxs("p",{className:t.copyRightText,children:["Make with ❤️ by d4t06 ",u.jsx("br",{})," © All rights no reserved ¯\\_(ツ)_/¯"]}),u.jsxs("div",{className:"flex mt-[20px] md:mt-0 space-x-[10px]",children:[u.jsx("a",{href:"https://facebook.com/DAtdz06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"})})}),u.jsx("a",{href:"https://www.linkedin.com/in/dat-nguyen-9371a926a",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"})})}),u.jsx("a",{href:"https://github.com/d4t06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 496 512",fill:"currentColor",children:u.jsx("path",{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})})})]})]})}const Mb=({children:t})=>{const{theme:e}=Z(),n=Dn(),r=f.useMemo(()=>n.pathname.includes("edit"),[n]),i=f.useRef(null),s={container:` main-container sm:overflow-auto no-scrollbar w-full ${r?"":"min-h-[100vh] pb-[90px]"} max-[549px]:h-full `,content:"px-[40px] max-[549px]:px-4 mt-[60px]",page:`flex min-h-[100vh] sm:h-[100vh] sm:overflow-hidden ${e.type==="dark"?"text-white":"text-[#333]"} ${e.container}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:s.page,children:[window.innerWidth>=800&&u.jsx(kK,{}),u.jsxs("div",{ref:i,className:s.container,children:[window.innerWidth>=800&&u.jsx(nQ,{contentRef:i}),u.jsxs("div",{className:s.content,children:[t,u.jsx(NQ,{})]})]}),u.jsx(KP,{})]}),u.jsx(C4,{})]})},DQ="/HD-MP3/assets/loading-b1210647.gif";function jQ({allowedRole:t}){const{user:e,loading:n}=dt(),{theme:r}=Z();return n?u.jsx("div",{className:`min-h-screen flex flex-col items-center justify-center ${r.container}`,children:u.jsx("img",{className:"w-[150px]",src:DQ,alt:""})}):e&&(t!=null&&t.find(i=>e.role===i))||!t.length?u.jsx(sT,{}):u.jsx(eD,{replace:!0,to:"/login"})}function OQ(){const{setUser:t}=dt(),[e,n]=pu(os);return f.useEffect(()=>{if(n)return;(async()=>{try{if(!e||!e.email)return t({type:"set-user",user:null});const s=(await ja({collection:"users",id:e.email,msg:">>> api: get auth info"})).data();Object.assign(s,{email:e.email,display_name:e.displayName,photoURL:e.photoURL,like_song_ids:s.like_song_ids||[],playlist_ids:s.playlist_ids||[],play_history:s.play_history||[]}),t({type:"set-user",user:s})}catch(i){console.log({message:i})}})()},[n,e]),u.jsx(sT,{})}function MQ(){return u.jsxs(u.Fragment,{children:[u.jsx(lD,{children:u.jsxs(nD,{children:[u.jsx(Si,{path:"/login",element:u.jsx(AQ,{})}),u.jsx(Si,{path:"/unauthorized",element:u.jsx(CQ,{})}),u.jsx(Si,{path:"*",element:u.jsx(IQ,{})}),u.jsxs(Si,{element:u.jsx(OQ,{}),children:[RQ.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=Mb,u.jsx(Si,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)}),u.jsx(Si,{element:u.jsx(jQ,{allowedRole:["ADMIN"]}),children:PQ.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=Mb,u.jsx(Si,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)})})]})]})}),u.jsx(hQ,{autoClose:!0})]})}const LQ=kq({reducer:{currentSong:Fq,currentPlaylist:rG,playStatus:PG,songQueue:Vq}});Eg.createRoot(document.getElementById("root")).render(u.jsx(Gb.StrictMode,{children:u.jsx(qq,{children:u.jsx(jF,{children:u.jsx(ZF,{children:u.jsx(Xq,{children:u.jsx(Zq,{children:u.jsx(HH,{store:LQ,children:u.jsx(MQ,{})})})})})})})}));
