function PC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function NC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var G_={exports:{}},Wd={},X_={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zl=Symbol.for("react.element"),jC=Symbol.for("react.portal"),OC=Symbol.for("react.fragment"),LC=Symbol.for("react.strict_mode"),DC=Symbol.for("react.profiler"),MC=Symbol.for("react.provider"),$C=Symbol.for("react.context"),FC=Symbol.for("react.forward_ref"),VC=Symbol.for("react.suspense"),UC=Symbol.for("react.memo"),BC=Symbol.for("react.lazy"),Zv=Symbol.iterator;function zC(t){return t===null||typeof t!="object"?null:(t=Zv&&t[Zv]||t["@@iterator"],typeof t=="function"?t:null)}var Y_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J_=Object.assign,Z_={};function Bo(t,e,n){this.props=t,this.context=e,this.refs=Z_,this.updater=n||Y_}Bo.prototype.isReactComponent={};Bo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function eE(){}eE.prototype=Bo.prototype;function Wg(t,e,n){this.props=t,this.context=e,this.refs=Z_,this.updater=n||Y_}var Hg=Wg.prototype=new eE;Hg.constructor=Wg;J_(Hg,Bo.prototype);Hg.isPureReactComponent=!0;var ex=Array.isArray,tE=Object.prototype.hasOwnProperty,qg={current:null},nE={key:!0,ref:!0,__self:!0,__source:!0};function rE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)tE.call(e,r)&&!nE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:zl,type:t,key:i,ref:o,props:s,_owner:qg.current}}function WC(t,e){return{$$typeof:zl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Kg(t){return typeof t=="object"&&t!==null&&t.$$typeof===zl}function HC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var tx=/\/+/g;function Tf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?HC(""+t.key):e.toString(36)}function iu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case zl:case jC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Tf(o,0):r,ex(s)?(n="",t!=null&&(n=t.replace(tx,"$&/")+"/"),iu(s,e,n,"",function(c){return c})):s!=null&&(Kg(s)&&(s=WC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(tx,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",ex(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Tf(i,a);o+=iu(i,e,n,l,s)}else if(l=zC(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Tf(i,a++),o+=iu(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Rc(t,e,n){if(t==null)return t;var r=[],s=0;return iu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function qC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Bt={current:null},ou={transition:null},KC={ReactCurrentDispatcher:Bt,ReactCurrentBatchConfig:ou,ReactCurrentOwner:qg};ue.Children={map:Rc,forEach:function(t,e,n){Rc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Rc(t,function(){e++}),e},toArray:function(t){return Rc(t,function(e){return e})||[]},only:function(t){if(!Kg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=Bo;ue.Fragment=OC;ue.Profiler=DC;ue.PureComponent=Wg;ue.StrictMode=LC;ue.Suspense=VC;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KC;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=J_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=qg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)tE.call(e,l)&&!nE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:zl,type:t.type,key:s,ref:i,props:r,_owner:o}};ue.createContext=function(t){return t={$$typeof:$C,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:MC,_context:t},t.Consumer=t};ue.createElement=rE;ue.createFactory=function(t){var e=rE.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:FC,render:t}};ue.isValidElement=Kg;ue.lazy=function(t){return{$$typeof:BC,_payload:{_status:-1,_result:t},_init:qC}};ue.memo=function(t,e){return{$$typeof:UC,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=ou.transition;ou.transition={};try{t()}finally{ou.transition=e}};ue.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ue.useCallback=function(t,e){return Bt.current.useCallback(t,e)};ue.useContext=function(t){return Bt.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return Bt.current.useDeferredValue(t)};ue.useEffect=function(t,e){return Bt.current.useEffect(t,e)};ue.useId=function(){return Bt.current.useId()};ue.useImperativeHandle=function(t,e,n){return Bt.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Bt.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Bt.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Bt.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return Bt.current.useReducer(t,e,n)};ue.useRef=function(t){return Bt.current.useRef(t)};ue.useState=function(t){return Bt.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Bt.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Bt.current.useTransition()};ue.version="18.2.0";X_.exports=ue;var h=X_.exports;const sE=NC(h),Qg=PC({__proto__:null,default:sE},[h]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QC=h,GC=Symbol.for("react.element"),XC=Symbol.for("react.fragment"),YC=Object.prototype.hasOwnProperty,JC=QC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZC={key:!0,ref:!0,__self:!0,__source:!0};function iE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)YC.call(e,r)&&!ZC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:GC,type:t,key:i,ref:o,props:s,_owner:JC.current}}Wd.Fragment=XC;Wd.jsx=iE;Wd.jsxs=iE;G_.exports=Wd;var u=G_.exports;var Wp={},oE={exports:{}},fn={},aE={exports:{}},lE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,$){var z=R.length;R.push($);e:for(;0<z;){var P=z-1>>>1,W=R[P];if(0<s(W,$))R[P]=$,R[z]=W,z=P;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var $=R[0],z=R.pop();if(z!==$){R[0]=z;e:for(var P=0,W=R.length,Y=W>>>1;P<Y;){var Z=2*(P+1)-1,ke=R[Z],le=Z+1,Ve=R[le];if(0>s(ke,z))le<W&&0>s(Ve,ke)?(R[P]=Ve,R[le]=z,P=le):(R[P]=ke,R[Z]=z,P=Z);else if(le<W&&0>s(Ve,z))R[P]=Ve,R[le]=z,P=le;else break e}}return $}function s(R,$){var z=R.sortIndex-$.sortIndex;return z!==0?z:R.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,p=3,m=!1,g=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(R){for(var $=n(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=R)r(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function E(R){if(y=!1,w(R),!g)if(n(l)!==null)g=!0,V(S);else{var $=n(c);$!==null&&X(E,$.startTime-R)}}function S(R,$){g=!1,y&&(y=!1,x(I),I=-1),m=!0;var z=p;try{for(w($),f=n(l);f!==null&&(!(f.expirationTime>$)||R&&!j());){var P=f.callback;if(typeof P=="function"){f.callback=null,p=f.priorityLevel;var W=P(f.expirationTime<=$);$=t.unstable_now(),typeof W=="function"?f.callback=W:f===n(l)&&r(l),w($)}else r(l);f=n(l)}if(f!==null)var Y=!0;else{var Z=n(c);Z!==null&&X(E,Z.startTime-$),Y=!1}return Y}finally{f=null,p=z,m=!1}}var b=!1,T=null,I=-1,A=5,C=-1;function j(){return!(t.unstable_now()-C<A)}function B(){if(T!==null){var R=t.unstable_now();C=R;var $=!0;try{$=T(!0,R)}finally{$?O():(b=!1,T=null)}}else b=!1}var O;if(typeof v=="function")O=function(){v(B)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,F=L.port2;L.port1.onmessage=B,O=function(){F.postMessage(null)}}else O=function(){_(B,0)};function V(R){T=R,b||(b=!0,O())}function X(R,$){I=_(function(){R(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,V(S))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(R){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var z=p;p=$;try{return R()}finally{p=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,$){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var z=p;p=R;try{return $()}finally{p=z}},t.unstable_scheduleCallback=function(R,$,z){var P=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?P+z:P):z=P,R){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=z+W,R={id:d++,callback:$,priorityLevel:R,startTime:z,expirationTime:W,sortIndex:-1},z>P?(R.sortIndex=z,e(c,R),n(l)===null&&R===n(c)&&(y?(x(I),I=-1):y=!0,X(E,z-P))):(R.sortIndex=W,e(l,R),g||m||(g=!0,V(S))),R},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(R){var $=p;return function(){var z=p;p=$;try{return R.apply(this,arguments)}finally{p=z}}}})(lE);aE.exports=lE;var ek=aE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cE=h,cn=ek;function D(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uE=new Set,Ja={};function bi(t,e){xo(t,e),xo(t+"Capture",e)}function xo(t,e){for(Ja[t]=e,t=0;t<e.length;t++)uE.add(e[t])}var _r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hp=Object.prototype.hasOwnProperty,tk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nx={},rx={};function nk(t){return Hp.call(rx,t)?!0:Hp.call(nx,t)?!1:tk.test(t)?rx[t]=!0:(nx[t]=!0,!1)}function rk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sk(t,e,n,r){if(e===null||typeof e>"u"||rk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xt[t]=new zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xt[e]=new zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xt[t]=new zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xt[t]=new zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xt[t]=new zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xt[t]=new zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xt[t]=new zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xt[t]=new zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xt[t]=new zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Gg=/[\-:]([a-z])/g;function Xg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Gg,Xg);xt[e]=new zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Gg,Xg);xt[e]=new zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Gg,Xg);xt[e]=new zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xt[t]=new zt(t,1,!1,t.toLowerCase(),null,!1,!1)});xt.xlinkHref=new zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xt[t]=new zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yg(t,e,n,r){var s=xt.hasOwnProperty(e)?xt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sk(e,n,s,r)&&(n=null),r||s===null?nk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var jr=cE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ac=Symbol.for("react.element"),Ui=Symbol.for("react.portal"),Bi=Symbol.for("react.fragment"),Jg=Symbol.for("react.strict_mode"),qp=Symbol.for("react.profiler"),dE=Symbol.for("react.provider"),hE=Symbol.for("react.context"),Zg=Symbol.for("react.forward_ref"),Kp=Symbol.for("react.suspense"),Qp=Symbol.for("react.suspense_list"),ey=Symbol.for("react.memo"),zr=Symbol.for("react.lazy"),fE=Symbol.for("react.offscreen"),sx=Symbol.iterator;function ua(t){return t===null||typeof t!="object"?null:(t=sx&&t[sx]||t["@@iterator"],typeof t=="function"?t:null)}var $e=Object.assign,bf;function Sa(t){if(bf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bf=e&&e[1]||""}return`
`+bf+t}var If=!1;function Rf(t,e){if(!t||If)return"";If=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{If=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Sa(t):""}function ik(t){switch(t.tag){case 5:return Sa(t.type);case 16:return Sa("Lazy");case 13:return Sa("Suspense");case 19:return Sa("SuspenseList");case 0:case 2:case 15:return t=Rf(t.type,!1),t;case 11:return t=Rf(t.type.render,!1),t;case 1:return t=Rf(t.type,!0),t;default:return""}}function Gp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bi:return"Fragment";case Ui:return"Portal";case qp:return"Profiler";case Jg:return"StrictMode";case Kp:return"Suspense";case Qp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hE:return(t.displayName||"Context")+".Consumer";case dE:return(t._context.displayName||"Context")+".Provider";case Zg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ey:return e=t.displayName||null,e!==null?e:Gp(t.type)||"Memo";case zr:e=t._payload,t=t._init;try{return Gp(t(e))}catch{}}return null}function ok(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gp(e);case 8:return e===Jg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ys(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ak(t){var e=pE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cc(t){t._valueTracker||(t._valueTracker=ak(t))}function mE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=pE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Nu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Xp(t,e){var n=e.checked;return $e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ix(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ys(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gE(t,e){e=e.checked,e!=null&&Yg(t,"checked",e,!1)}function Yp(t,e){gE(t,e);var n=ys(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Jp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Jp(t,e.type,ys(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ox(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Jp(t,e,n){(e!=="number"||Nu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ta=Array.isArray;function to(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ys(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Zp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(D(91));return $e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ax(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(D(92));if(Ta(n)){if(1<n.length)throw Error(D(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ys(n)}}function yE(t,e){var n=ys(e.value),r=ys(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function lx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function em(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kc,xE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(kc=kc||document.createElement("div"),kc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Za(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Oa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lk=["Webkit","ms","Moz","O"];Object.keys(Oa).forEach(function(t){lk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Oa[e]=Oa[t]})});function wE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Oa.hasOwnProperty(t)&&Oa[t]?(""+e).trim():e+"px"}function _E(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=wE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var ck=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tm(t,e){if(e){if(ck[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(D(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(D(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(D(61))}if(e.style!=null&&typeof e.style!="object")throw Error(D(62))}}function nm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rm=null;function ty(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sm=null,no=null,ro=null;function cx(t){if(t=ql(t)){if(typeof sm!="function")throw Error(D(280));var e=t.stateNode;e&&(e=Gd(e),sm(t.stateNode,t.type,e))}}function EE(t){no?ro?ro.push(t):ro=[t]:no=t}function SE(){if(no){var t=no,e=ro;if(ro=no=null,cx(t),e)for(t=0;t<e.length;t++)cx(e[t])}}function TE(t,e){return t(e)}function bE(){}var Af=!1;function IE(t,e,n){if(Af)return t(e,n);Af=!0;try{return TE(t,e,n)}finally{Af=!1,(no!==null||ro!==null)&&(bE(),SE())}}function el(t,e){var n=t.stateNode;if(n===null)return null;var r=Gd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(D(231,e,typeof n));return n}var im=!1;if(_r)try{var da={};Object.defineProperty(da,"passive",{get:function(){im=!0}}),window.addEventListener("test",da,da),window.removeEventListener("test",da,da)}catch{im=!1}function uk(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var La=!1,ju=null,Ou=!1,om=null,dk={onError:function(t){La=!0,ju=t}};function hk(t,e,n,r,s,i,o,a,l){La=!1,ju=null,uk.apply(dk,arguments)}function fk(t,e,n,r,s,i,o,a,l){if(hk.apply(this,arguments),La){if(La){var c=ju;La=!1,ju=null}else throw Error(D(198));Ou||(Ou=!0,om=c)}}function Ii(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function RE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ux(t){if(Ii(t)!==t)throw Error(D(188))}function pk(t){var e=t.alternate;if(!e){if(e=Ii(t),e===null)throw Error(D(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ux(s),t;if(i===r)return ux(s),e;i=i.sibling}throw Error(D(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?t:e}function AE(t){return t=pk(t),t!==null?CE(t):null}function CE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=CE(t);if(e!==null)return e;t=t.sibling}return null}var kE=cn.unstable_scheduleCallback,dx=cn.unstable_cancelCallback,mk=cn.unstable_shouldYield,gk=cn.unstable_requestPaint,qe=cn.unstable_now,yk=cn.unstable_getCurrentPriorityLevel,ny=cn.unstable_ImmediatePriority,PE=cn.unstable_UserBlockingPriority,Lu=cn.unstable_NormalPriority,vk=cn.unstable_LowPriority,NE=cn.unstable_IdlePriority,Hd=null,Gn=null;function xk(t){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(Hd,t,void 0,(t.current.flags&128)===128)}catch{}}var Ln=Math.clz32?Math.clz32:Ek,wk=Math.log,_k=Math.LN2;function Ek(t){return t>>>=0,t===0?32:31-(wk(t)/_k|0)|0}var Pc=64,Nc=4194304;function ba(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Du(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ba(a):(i&=o,i!==0&&(r=ba(i)))}else o=n&~s,o!==0?r=ba(o):i!==0&&(r=ba(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ln(e),s=1<<n,r|=t[n],e&=~s;return r}function Sk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ln(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=Sk(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function am(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jE(){var t=Pc;return Pc<<=1,!(Pc&4194240)&&(Pc=64),t}function Cf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Wl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ln(e),t[e]=n}function bk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ln(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ry(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ln(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ve=0;function OE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var LE,sy,DE,ME,$E,lm=!1,jc=[],ns=null,rs=null,ss=null,tl=new Map,nl=new Map,Hr=[],Ik="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hx(t,e){switch(t){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":ss=null;break;case"pointerover":case"pointerout":tl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":nl.delete(e.pointerId)}}function ha(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ql(e),e!==null&&sy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Rk(t,e,n,r,s){switch(e){case"focusin":return ns=ha(ns,t,e,n,r,s),!0;case"dragenter":return rs=ha(rs,t,e,n,r,s),!0;case"mouseover":return ss=ha(ss,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return tl.set(i,ha(tl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,nl.set(i,ha(nl.get(i)||null,t,e,n,r,s)),!0}return!1}function FE(t){var e=Ks(t.target);if(e!==null){var n=Ii(e);if(n!==null){if(e=n.tag,e===13){if(e=RE(n),e!==null){t.blockedOn=e,$E(t.priority,function(){DE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function au(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=cm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);rm=r,n.target.dispatchEvent(r),rm=null}else return e=ql(n),e!==null&&sy(e),t.blockedOn=n,!1;e.shift()}return!0}function fx(t,e,n){au(t)&&n.delete(e)}function Ak(){lm=!1,ns!==null&&au(ns)&&(ns=null),rs!==null&&au(rs)&&(rs=null),ss!==null&&au(ss)&&(ss=null),tl.forEach(fx),nl.forEach(fx)}function fa(t,e){t.blockedOn===e&&(t.blockedOn=null,lm||(lm=!0,cn.unstable_scheduleCallback(cn.unstable_NormalPriority,Ak)))}function rl(t){function e(s){return fa(s,t)}if(0<jc.length){fa(jc[0],t);for(var n=1;n<jc.length;n++){var r=jc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ns!==null&&fa(ns,t),rs!==null&&fa(rs,t),ss!==null&&fa(ss,t),tl.forEach(e),nl.forEach(e),n=0;n<Hr.length;n++)r=Hr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Hr.length&&(n=Hr[0],n.blockedOn===null);)FE(n),n.blockedOn===null&&Hr.shift()}var so=jr.ReactCurrentBatchConfig,Mu=!0;function Ck(t,e,n,r){var s=ve,i=so.transition;so.transition=null;try{ve=1,iy(t,e,n,r)}finally{ve=s,so.transition=i}}function kk(t,e,n,r){var s=ve,i=so.transition;so.transition=null;try{ve=4,iy(t,e,n,r)}finally{ve=s,so.transition=i}}function iy(t,e,n,r){if(Mu){var s=cm(t,e,n,r);if(s===null)Ff(t,e,r,$u,n),hx(t,r);else if(Rk(s,t,e,n,r))r.stopPropagation();else if(hx(t,r),e&4&&-1<Ik.indexOf(t)){for(;s!==null;){var i=ql(s);if(i!==null&&LE(i),i=cm(t,e,n,r),i===null&&Ff(t,e,r,$u,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ff(t,e,r,null,n)}}var $u=null;function cm(t,e,n,r){if($u=null,t=ty(r),t=Ks(t),t!==null)if(e=Ii(t),e===null)t=null;else if(n=e.tag,n===13){if(t=RE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $u=t,null}function VE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yk()){case ny:return 1;case PE:return 4;case Lu:case vk:return 16;case NE:return 536870912;default:return 16}default:return 16}}var Jr=null,oy=null,lu=null;function UE(){if(lu)return lu;var t,e=oy,n=e.length,r,s="value"in Jr?Jr.value:Jr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return lu=s.slice(t,1<r?1-r:void 0)}function cu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Oc(){return!0}function px(){return!1}function pn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Oc:px,this.isPropagationStopped=px,this}return $e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Oc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Oc)},persist:function(){},isPersistent:Oc}),e}var zo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ay=pn(zo),Hl=$e({},zo,{view:0,detail:0}),Pk=pn(Hl),kf,Pf,pa,qd=$e({},Hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ly,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pa&&(pa&&t.type==="mousemove"?(kf=t.screenX-pa.screenX,Pf=t.screenY-pa.screenY):Pf=kf=0,pa=t),kf)},movementY:function(t){return"movementY"in t?t.movementY:Pf}}),mx=pn(qd),Nk=$e({},qd,{dataTransfer:0}),jk=pn(Nk),Ok=$e({},Hl,{relatedTarget:0}),Nf=pn(Ok),Lk=$e({},zo,{animationName:0,elapsedTime:0,pseudoElement:0}),Dk=pn(Lk),Mk=$e({},zo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$k=pn(Mk),Fk=$e({},zo,{data:0}),gx=pn(Fk),Vk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Bk[t])?!!e[t]:!1}function ly(){return zk}var Wk=$e({},Hl,{key:function(t){if(t.key){var e=Vk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=cu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Uk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ly,charCode:function(t){return t.type==="keypress"?cu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Hk=pn(Wk),qk=$e({},qd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yx=pn(qk),Kk=$e({},Hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ly}),Qk=pn(Kk),Gk=$e({},zo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xk=pn(Gk),Yk=$e({},qd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Jk=pn(Yk),Zk=[9,13,27,32],cy=_r&&"CompositionEvent"in window,Da=null;_r&&"documentMode"in document&&(Da=document.documentMode);var eP=_r&&"TextEvent"in window&&!Da,BE=_r&&(!cy||Da&&8<Da&&11>=Da),vx=String.fromCharCode(32),xx=!1;function zE(t,e){switch(t){case"keyup":return Zk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function WE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zi=!1;function tP(t,e){switch(t){case"compositionend":return WE(e);case"keypress":return e.which!==32?null:(xx=!0,vx);case"textInput":return t=e.data,t===vx&&xx?null:t;default:return null}}function nP(t,e){if(zi)return t==="compositionend"||!cy&&zE(t,e)?(t=UE(),lu=oy=Jr=null,zi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return BE&&e.locale!=="ko"?null:e.data;default:return null}}var rP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rP[t.type]:e==="textarea"}function HE(t,e,n,r){EE(r),e=Fu(e,"onChange"),0<e.length&&(n=new ay("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ma=null,sl=null;function sP(t){nS(t,0)}function Kd(t){var e=qi(t);if(mE(e))return t}function iP(t,e){if(t==="change")return e}var qE=!1;if(_r){var jf;if(_r){var Of="oninput"in document;if(!Of){var _x=document.createElement("div");_x.setAttribute("oninput","return;"),Of=typeof _x.oninput=="function"}jf=Of}else jf=!1;qE=jf&&(!document.documentMode||9<document.documentMode)}function Ex(){Ma&&(Ma.detachEvent("onpropertychange",KE),sl=Ma=null)}function KE(t){if(t.propertyName==="value"&&Kd(sl)){var e=[];HE(e,sl,t,ty(t)),IE(sP,e)}}function oP(t,e,n){t==="focusin"?(Ex(),Ma=e,sl=n,Ma.attachEvent("onpropertychange",KE)):t==="focusout"&&Ex()}function aP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Kd(sl)}function lP(t,e){if(t==="click")return Kd(e)}function cP(t,e){if(t==="input"||t==="change")return Kd(e)}function uP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mn=typeof Object.is=="function"?Object.is:uP;function il(t,e){if(Mn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Hp.call(e,s)||!Mn(t[s],e[s]))return!1}return!0}function Sx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tx(t,e){var n=Sx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sx(n)}}function QE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?QE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function GE(){for(var t=window,e=Nu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nu(t.document)}return e}function uy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function dP(t){var e=GE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&QE(n.ownerDocument.documentElement,n)){if(r!==null&&uy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Tx(n,i);var o=Tx(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hP=_r&&"documentMode"in document&&11>=document.documentMode,Wi=null,um=null,$a=null,dm=!1;function bx(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;dm||Wi==null||Wi!==Nu(r)||(r=Wi,"selectionStart"in r&&uy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$a&&il($a,r)||($a=r,r=Fu(um,"onSelect"),0<r.length&&(e=new ay("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wi)))}function Lc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Hi={animationend:Lc("Animation","AnimationEnd"),animationiteration:Lc("Animation","AnimationIteration"),animationstart:Lc("Animation","AnimationStart"),transitionend:Lc("Transition","TransitionEnd")},Lf={},XE={};_r&&(XE=document.createElement("div").style,"AnimationEvent"in window||(delete Hi.animationend.animation,delete Hi.animationiteration.animation,delete Hi.animationstart.animation),"TransitionEvent"in window||delete Hi.transitionend.transition);function Qd(t){if(Lf[t])return Lf[t];if(!Hi[t])return t;var e=Hi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in XE)return Lf[t]=e[n];return t}var YE=Qd("animationend"),JE=Qd("animationiteration"),ZE=Qd("animationstart"),eS=Qd("transitionend"),tS=new Map,Ix="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ks(t,e){tS.set(t,e),bi(e,[t])}for(var Df=0;Df<Ix.length;Df++){var Mf=Ix[Df],fP=Mf.toLowerCase(),pP=Mf[0].toUpperCase()+Mf.slice(1);ks(fP,"on"+pP)}ks(YE,"onAnimationEnd");ks(JE,"onAnimationIteration");ks(ZE,"onAnimationStart");ks("dblclick","onDoubleClick");ks("focusin","onFocus");ks("focusout","onBlur");ks(eS,"onTransitionEnd");xo("onMouseEnter",["mouseout","mouseover"]);xo("onMouseLeave",["mouseout","mouseover"]);xo("onPointerEnter",["pointerout","pointerover"]);xo("onPointerLeave",["pointerout","pointerover"]);bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bi("onBeforeInput",["compositionend","keypress","textInput","paste"]);bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ia));function Rx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,fk(r,e,void 0,t),t.currentTarget=null}function nS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Rx(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Rx(s,a,c),i=l}}}if(Ou)throw t=om,Ou=!1,om=null,t}function be(t,e){var n=e[gm];n===void 0&&(n=e[gm]=new Set);var r=t+"__bubble";n.has(r)||(rS(e,t,2,!1),n.add(r))}function $f(t,e,n){var r=0;e&&(r|=4),rS(n,t,r,e)}var Dc="_reactListening"+Math.random().toString(36).slice(2);function ol(t){if(!t[Dc]){t[Dc]=!0,uE.forEach(function(n){n!=="selectionchange"&&(mP.has(n)||$f(n,!1,t),$f(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dc]||(e[Dc]=!0,$f("selectionchange",!1,e))}}function rS(t,e,n,r){switch(VE(e)){case 1:var s=Ck;break;case 4:s=kk;break;default:s=iy}n=s.bind(null,e,n,t),s=void 0,!im||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ff(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ks(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}IE(function(){var c=i,d=ty(n),f=[];e:{var p=tS.get(t);if(p!==void 0){var m=ay,g=t;switch(t){case"keypress":if(cu(n)===0)break e;case"keydown":case"keyup":m=Hk;break;case"focusin":g="focus",m=Nf;break;case"focusout":g="blur",m=Nf;break;case"beforeblur":case"afterblur":m=Nf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=mx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=jk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Qk;break;case YE:case JE:case ZE:m=Dk;break;case eS:m=Xk;break;case"scroll":m=Pk;break;case"wheel":m=Jk;break;case"copy":case"cut":case"paste":m=$k;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=yx}var y=(e&4)!==0,_=!y&&t==="scroll",x=y?p!==null?p+"Capture":null:p;y=[];for(var v=c,w;v!==null;){w=v;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,x!==null&&(E=el(v,x),E!=null&&y.push(al(v,E,w)))),_)break;v=v.return}0<y.length&&(p=new m(p,g,null,n,d),f.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==rm&&(g=n.relatedTarget||n.fromElement)&&(Ks(g)||g[Er]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=c,g=g?Ks(g):null,g!==null&&(_=Ii(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(y=mx,E="onMouseLeave",x="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(y=yx,E="onPointerLeave",x="onPointerEnter",v="pointer"),_=m==null?p:qi(m),w=g==null?p:qi(g),p=new y(E,v+"leave",m,n,d),p.target=_,p.relatedTarget=w,E=null,Ks(d)===c&&(y=new y(x,v+"enter",g,n,d),y.target=w,y.relatedTarget=_,E=y),_=E,m&&g)t:{for(y=m,x=g,v=0,w=y;w;w=ji(w))v++;for(w=0,E=x;E;E=ji(E))w++;for(;0<v-w;)y=ji(y),v--;for(;0<w-v;)x=ji(x),w--;for(;v--;){if(y===x||x!==null&&y===x.alternate)break t;y=ji(y),x=ji(x)}y=null}else y=null;m!==null&&Ax(f,p,m,y,!1),g!==null&&_!==null&&Ax(f,_,g,y,!0)}}e:{if(p=c?qi(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var S=iP;else if(wx(p))if(qE)S=cP;else{S=aP;var b=oP}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=lP);if(S&&(S=S(t,c))){HE(f,S,n,d);break e}b&&b(t,p,c),t==="focusout"&&(b=p._wrapperState)&&b.controlled&&p.type==="number"&&Jp(p,"number",p.value)}switch(b=c?qi(c):window,t){case"focusin":(wx(b)||b.contentEditable==="true")&&(Wi=b,um=c,$a=null);break;case"focusout":$a=um=Wi=null;break;case"mousedown":dm=!0;break;case"contextmenu":case"mouseup":case"dragend":dm=!1,bx(f,n,d);break;case"selectionchange":if(hP)break;case"keydown":case"keyup":bx(f,n,d)}var T;if(cy)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else zi?zE(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(BE&&n.locale!=="ko"&&(zi||I!=="onCompositionStart"?I==="onCompositionEnd"&&zi&&(T=UE()):(Jr=d,oy="value"in Jr?Jr.value:Jr.textContent,zi=!0)),b=Fu(c,I),0<b.length&&(I=new gx(I,t,null,n,d),f.push({event:I,listeners:b}),T?I.data=T:(T=WE(n),T!==null&&(I.data=T)))),(T=eP?tP(t,n):nP(t,n))&&(c=Fu(c,"onBeforeInput"),0<c.length&&(d=new gx("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=T))}nS(f,e)})}function al(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=el(t,n),i!=null&&r.unshift(al(t,i,s)),i=el(t,e),i!=null&&r.push(al(t,i,s))),t=t.return}return r}function ji(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ax(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=el(n,i),l!=null&&o.unshift(al(n,l,a))):s||(l=el(n,i),l!=null&&o.push(al(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var gP=/\r\n?/g,yP=/\u0000|\uFFFD/g;function Cx(t){return(typeof t=="string"?t:""+t).replace(gP,`
`).replace(yP,"")}function Mc(t,e,n){if(e=Cx(e),Cx(t)!==e&&n)throw Error(D(425))}function Vu(){}var hm=null,fm=null;function pm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mm=typeof setTimeout=="function"?setTimeout:void 0,vP=typeof clearTimeout=="function"?clearTimeout:void 0,kx=typeof Promise=="function"?Promise:void 0,xP=typeof queueMicrotask=="function"?queueMicrotask:typeof kx<"u"?function(t){return kx.resolve(null).then(t).catch(wP)}:mm;function wP(t){setTimeout(function(){throw t})}function Vf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),rl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);rl(e)}function is(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Px(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Wo=Math.random().toString(36).slice(2),Bn="__reactFiber$"+Wo,ll="__reactProps$"+Wo,Er="__reactContainer$"+Wo,gm="__reactEvents$"+Wo,_P="__reactListeners$"+Wo,EP="__reactHandles$"+Wo;function Ks(t){var e=t[Bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Er]||n[Bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Px(t);t!==null;){if(n=t[Bn])return n;t=Px(t)}return e}t=n,n=t.parentNode}return null}function ql(t){return t=t[Bn]||t[Er],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(D(33))}function Gd(t){return t[ll]||null}var ym=[],Ki=-1;function Ps(t){return{current:t}}function Ae(t){0>Ki||(t.current=ym[Ki],ym[Ki]=null,Ki--)}function Te(t,e){Ki++,ym[Ki]=t.current,t.current=e}var vs={},jt=Ps(vs),Qt=Ps(!1),ai=vs;function wo(t,e){var n=t.type.contextTypes;if(!n)return vs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Gt(t){return t=t.childContextTypes,t!=null}function Uu(){Ae(Qt),Ae(jt)}function Nx(t,e,n){if(jt.current!==vs)throw Error(D(168));Te(jt,e),Te(Qt,n)}function sS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(D(108,ok(t)||"Unknown",s));return $e({},n,r)}function Bu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vs,ai=jt.current,Te(jt,t),Te(Qt,Qt.current),!0}function jx(t,e,n){var r=t.stateNode;if(!r)throw Error(D(169));n?(t=sS(t,e,ai),r.__reactInternalMemoizedMergedChildContext=t,Ae(Qt),Ae(jt),Te(jt,t)):Ae(Qt),Te(Qt,n)}var ur=null,Xd=!1,Uf=!1;function iS(t){ur===null?ur=[t]:ur.push(t)}function SP(t){Xd=!0,iS(t)}function Ns(){if(!Uf&&ur!==null){Uf=!0;var t=0,e=ve;try{var n=ur;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ur=null,Xd=!1}catch(s){throw ur!==null&&(ur=ur.slice(t+1)),kE(ny,Ns),s}finally{ve=e,Uf=!1}}return null}var Qi=[],Gi=0,zu=null,Wu=0,vn=[],xn=0,li=null,dr=1,hr="";function zs(t,e){Qi[Gi++]=Wu,Qi[Gi++]=zu,zu=t,Wu=e}function oS(t,e,n){vn[xn++]=dr,vn[xn++]=hr,vn[xn++]=li,li=t;var r=dr;t=hr;var s=32-Ln(r)-1;r&=~(1<<s),n+=1;var i=32-Ln(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,dr=1<<32-Ln(e)+s|n<<s|r,hr=i+t}else dr=1<<i|n<<s|r,hr=t}function dy(t){t.return!==null&&(zs(t,1),oS(t,1,0))}function hy(t){for(;t===zu;)zu=Qi[--Gi],Qi[Gi]=null,Wu=Qi[--Gi],Qi[Gi]=null;for(;t===li;)li=vn[--xn],vn[xn]=null,hr=vn[--xn],vn[xn]=null,dr=vn[--xn],vn[xn]=null}var on=null,nn=null,Ne=!1,Nn=null;function aS(t,e){var n=En(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ox(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,on=t,nn=is(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,on=t,nn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=li!==null?{id:dr,overflow:hr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=En(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,on=t,nn=null,!0):!1;default:return!1}}function vm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function xm(t){if(Ne){var e=nn;if(e){var n=e;if(!Ox(t,e)){if(vm(t))throw Error(D(418));e=is(n.nextSibling);var r=on;e&&Ox(t,e)?aS(r,n):(t.flags=t.flags&-4097|2,Ne=!1,on=t)}}else{if(vm(t))throw Error(D(418));t.flags=t.flags&-4097|2,Ne=!1,on=t}}}function Lx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;on=t}function $c(t){if(t!==on)return!1;if(!Ne)return Lx(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!pm(t.type,t.memoizedProps)),e&&(e=nn)){if(vm(t))throw lS(),Error(D(418));for(;e;)aS(t,e),e=is(e.nextSibling)}if(Lx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(D(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){nn=is(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}nn=null}}else nn=on?is(t.stateNode.nextSibling):null;return!0}function lS(){for(var t=nn;t;)t=is(t.nextSibling)}function _o(){nn=on=null,Ne=!1}function fy(t){Nn===null?Nn=[t]:Nn.push(t)}var TP=jr.ReactCurrentBatchConfig;function kn(t,e){if(t&&t.defaultProps){e=$e({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Hu=Ps(null),qu=null,Xi=null,py=null;function my(){py=Xi=qu=null}function gy(t){var e=Hu.current;Ae(Hu),t._currentValue=e}function wm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function io(t,e){qu=t,py=Xi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Kt=!0),t.firstContext=null)}function In(t){var e=t._currentValue;if(py!==t)if(t={context:t,memoizedValue:e,next:null},Xi===null){if(qu===null)throw Error(D(308));Xi=t,qu.dependencies={lanes:0,firstContext:t}}else Xi=Xi.next=t;return e}var Qs=null;function yy(t){Qs===null?Qs=[t]:Qs.push(t)}function cS(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,yy(e)):(n.next=s.next,s.next=n),e.interleaved=n,Sr(t,r)}function Sr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wr=!1;function vy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function os(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Sr(t,n)}return s=r.interleaved,s===null?(e.next=e,yy(r)):(e.next=s.next,s.next=e),r.interleaved=e,Sr(t,n)}function uu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ry(t,n)}}function Dx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ku(t,e,n,r){var s=t.updateQueue;Wr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,d=c=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,y=a;switch(p=e,m=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){f=g.call(m,f,p);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,p=typeof g=="function"?g.call(m,f,p):g,p==null)break e;f=$e({},f,p);break e;case 2:Wr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=f):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(1);if(d===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ui|=o,t.lanes=o,t.memoizedState=f}}function Mx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(D(191,s));s.call(r)}}}var dS=new cE.Component().refs;function _m(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:$e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Yd={isMounted:function(t){return(t=t._reactInternals)?Ii(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Vt(),s=ls(t),i=yr(r,s);i.payload=e,n!=null&&(i.callback=n),e=os(t,i,s),e!==null&&(Dn(e,t,s,r),uu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Vt(),s=ls(t),i=yr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=os(t,i,s),e!==null&&(Dn(e,t,s,r),uu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Vt(),r=ls(t),s=yr(n,r);s.tag=2,e!=null&&(s.callback=e),e=os(t,s,r),e!==null&&(Dn(e,t,r,n),uu(e,t,r))}};function $x(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!il(n,r)||!il(s,i):!0}function hS(t,e,n){var r=!1,s=vs,i=e.contextType;return typeof i=="object"&&i!==null?i=In(i):(s=Gt(e)?ai:jt.current,r=e.contextTypes,i=(r=r!=null)?wo(t,s):vs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Fx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Yd.enqueueReplaceState(e,e.state,null)}function Em(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=dS,vy(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=In(i):(i=Gt(e)?ai:jt.current,s.context=wo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(_m(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Yd.enqueueReplaceState(s,s.state,null),Ku(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ma(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===dS&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,t))}return t}function Fc(t,e){throw t=Object.prototype.toString.call(e),Error(D(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Vx(t){var e=t._init;return e(t._payload)}function fS(t){function e(x,v){if(t){var w=x.deletions;w===null?(x.deletions=[v],x.flags|=16):w.push(v)}}function n(x,v){if(!t)return null;for(;v!==null;)e(x,v),v=v.sibling;return null}function r(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function s(x,v){return x=cs(x,v),x.index=0,x.sibling=null,x}function i(x,v,w){return x.index=w,t?(w=x.alternate,w!==null?(w=w.index,w<v?(x.flags|=2,v):w):(x.flags|=2,v)):(x.flags|=1048576,v)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,v,w,E){return v===null||v.tag!==6?(v=Qf(w,x.mode,E),v.return=x,v):(v=s(v,w),v.return=x,v)}function l(x,v,w,E){var S=w.type;return S===Bi?d(x,v,w.props.children,E,w.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===zr&&Vx(S)===v.type)?(E=s(v,w.props),E.ref=ma(x,v,w),E.return=x,E):(E=gu(w.type,w.key,w.props,null,x.mode,E),E.ref=ma(x,v,w),E.return=x,E)}function c(x,v,w,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Gf(w,x.mode,E),v.return=x,v):(v=s(v,w.children||[]),v.return=x,v)}function d(x,v,w,E,S){return v===null||v.tag!==7?(v=ni(w,x.mode,E,S),v.return=x,v):(v=s(v,w),v.return=x,v)}function f(x,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Qf(""+v,x.mode,w),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ac:return w=gu(v.type,v.key,v.props,null,x.mode,w),w.ref=ma(x,null,v),w.return=x,w;case Ui:return v=Gf(v,x.mode,w),v.return=x,v;case zr:var E=v._init;return f(x,E(v._payload),w)}if(Ta(v)||ua(v))return v=ni(v,x.mode,w,null),v.return=x,v;Fc(x,v)}return null}function p(x,v,w,E){var S=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(x,v,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ac:return w.key===S?l(x,v,w,E):null;case Ui:return w.key===S?c(x,v,w,E):null;case zr:return S=w._init,p(x,v,S(w._payload),E)}if(Ta(w)||ua(w))return S!==null?null:d(x,v,w,E,null);Fc(x,w)}return null}function m(x,v,w,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return x=x.get(w)||null,a(v,x,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ac:return x=x.get(E.key===null?w:E.key)||null,l(v,x,E,S);case Ui:return x=x.get(E.key===null?w:E.key)||null,c(v,x,E,S);case zr:var b=E._init;return m(x,v,w,b(E._payload),S)}if(Ta(E)||ua(E))return x=x.get(w)||null,d(v,x,E,S,null);Fc(v,E)}return null}function g(x,v,w,E){for(var S=null,b=null,T=v,I=v=0,A=null;T!==null&&I<w.length;I++){T.index>I?(A=T,T=null):A=T.sibling;var C=p(x,T,w[I],E);if(C===null){T===null&&(T=A);break}t&&T&&C.alternate===null&&e(x,T),v=i(C,v,I),b===null?S=C:b.sibling=C,b=C,T=A}if(I===w.length)return n(x,T),Ne&&zs(x,I),S;if(T===null){for(;I<w.length;I++)T=f(x,w[I],E),T!==null&&(v=i(T,v,I),b===null?S=T:b.sibling=T,b=T);return Ne&&zs(x,I),S}for(T=r(x,T);I<w.length;I++)A=m(T,x,I,w[I],E),A!==null&&(t&&A.alternate!==null&&T.delete(A.key===null?I:A.key),v=i(A,v,I),b===null?S=A:b.sibling=A,b=A);return t&&T.forEach(function(j){return e(x,j)}),Ne&&zs(x,I),S}function y(x,v,w,E){var S=ua(w);if(typeof S!="function")throw Error(D(150));if(w=S.call(w),w==null)throw Error(D(151));for(var b=S=null,T=v,I=v=0,A=null,C=w.next();T!==null&&!C.done;I++,C=w.next()){T.index>I?(A=T,T=null):A=T.sibling;var j=p(x,T,C.value,E);if(j===null){T===null&&(T=A);break}t&&T&&j.alternate===null&&e(x,T),v=i(j,v,I),b===null?S=j:b.sibling=j,b=j,T=A}if(C.done)return n(x,T),Ne&&zs(x,I),S;if(T===null){for(;!C.done;I++,C=w.next())C=f(x,C.value,E),C!==null&&(v=i(C,v,I),b===null?S=C:b.sibling=C,b=C);return Ne&&zs(x,I),S}for(T=r(x,T);!C.done;I++,C=w.next())C=m(T,x,I,C.value,E),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?I:C.key),v=i(C,v,I),b===null?S=C:b.sibling=C,b=C);return t&&T.forEach(function(B){return e(x,B)}),Ne&&zs(x,I),S}function _(x,v,w,E){if(typeof w=="object"&&w!==null&&w.type===Bi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ac:e:{for(var S=w.key,b=v;b!==null;){if(b.key===S){if(S=w.type,S===Bi){if(b.tag===7){n(x,b.sibling),v=s(b,w.props.children),v.return=x,x=v;break e}}else if(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===zr&&Vx(S)===b.type){n(x,b.sibling),v=s(b,w.props),v.ref=ma(x,b,w),v.return=x,x=v;break e}n(x,b);break}else e(x,b);b=b.sibling}w.type===Bi?(v=ni(w.props.children,x.mode,E,w.key),v.return=x,x=v):(E=gu(w.type,w.key,w.props,null,x.mode,E),E.ref=ma(x,v,w),E.return=x,x=E)}return o(x);case Ui:e:{for(b=w.key;v!==null;){if(v.key===b)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(x,v.sibling),v=s(v,w.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else e(x,v);v=v.sibling}v=Gf(w,x.mode,E),v.return=x,x=v}return o(x);case zr:return b=w._init,_(x,v,b(w._payload),E)}if(Ta(w))return g(x,v,w,E);if(ua(w))return y(x,v,w,E);Fc(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(x,v.sibling),v=s(v,w),v.return=x,x=v):(n(x,v),v=Qf(w,x.mode,E),v.return=x,x=v),o(x)):n(x,v)}return _}var Eo=fS(!0),pS=fS(!1),Kl={},Xn=Ps(Kl),cl=Ps(Kl),ul=Ps(Kl);function Gs(t){if(t===Kl)throw Error(D(174));return t}function xy(t,e){switch(Te(ul,e),Te(cl,t),Te(Xn,Kl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:em(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=em(e,t)}Ae(Xn),Te(Xn,e)}function So(){Ae(Xn),Ae(cl),Ae(ul)}function mS(t){Gs(ul.current);var e=Gs(Xn.current),n=em(e,t.type);e!==n&&(Te(cl,t),Te(Xn,n))}function wy(t){cl.current===t&&(Ae(Xn),Ae(cl))}var Le=Ps(0);function Qu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bf=[];function _y(){for(var t=0;t<Bf.length;t++)Bf[t]._workInProgressVersionPrimary=null;Bf.length=0}var du=jr.ReactCurrentDispatcher,zf=jr.ReactCurrentBatchConfig,ci=0,Me=null,nt=null,at=null,Gu=!1,Fa=!1,dl=0,bP=0;function wt(){throw Error(D(321))}function Ey(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Mn(t[n],e[n]))return!1;return!0}function Sy(t,e,n,r,s,i){if(ci=i,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,du.current=t===null||t.memoizedState===null?CP:kP,t=n(r,s),Fa){i=0;do{if(Fa=!1,dl=0,25<=i)throw Error(D(301));i+=1,at=nt=null,e.updateQueue=null,du.current=PP,t=n(r,s)}while(Fa)}if(du.current=Xu,e=nt!==null&&nt.next!==null,ci=0,at=nt=Me=null,Gu=!1,e)throw Error(D(300));return t}function Ty(){var t=dl!==0;return dl=0,t}function Un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?Me.memoizedState=at=t:at=at.next=t,at}function Rn(){if(nt===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var e=at===null?Me.memoizedState:at.next;if(e!==null)at=e,nt=t;else{if(t===null)throw Error(D(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},at===null?Me.memoizedState=at=t:at=at.next=t}return at}function hl(t,e){return typeof e=="function"?e(t):e}function Wf(t){var e=Rn(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=nt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((ci&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Me.lanes|=d,ui|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Mn(r,e.memoizedState)||(Kt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Me.lanes|=i,ui|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Hf(t){var e=Rn(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Mn(i,e.memoizedState)||(Kt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function gS(){}function yS(t,e){var n=Me,r=Rn(),s=e(),i=!Mn(r.memoizedState,s);if(i&&(r.memoizedState=s,Kt=!0),r=r.queue,by(wS.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||at!==null&&at.memoizedState.tag&1){if(n.flags|=2048,fl(9,xS.bind(null,n,r,s,e),void 0,null),lt===null)throw Error(D(349));ci&30||vS(n,e,s)}return s}function vS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xS(t,e,n,r){e.value=n,e.getSnapshot=r,_S(e)&&ES(t)}function wS(t,e,n){return n(function(){_S(e)&&ES(t)})}function _S(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Mn(t,n)}catch{return!0}}function ES(t){var e=Sr(t,1);e!==null&&Dn(e,t,1,-1)}function Ux(t){var e=Un();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hl,lastRenderedState:t},e.queue=t,t=t.dispatch=AP.bind(null,Me,t),[e.memoizedState,t]}function fl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function SS(){return Rn().memoizedState}function hu(t,e,n,r){var s=Un();Me.flags|=t,s.memoizedState=fl(1|e,n,void 0,r===void 0?null:r)}function Jd(t,e,n,r){var s=Rn();r=r===void 0?null:r;var i=void 0;if(nt!==null){var o=nt.memoizedState;if(i=o.destroy,r!==null&&Ey(r,o.deps)){s.memoizedState=fl(e,n,i,r);return}}Me.flags|=t,s.memoizedState=fl(1|e,n,i,r)}function Bx(t,e){return hu(8390656,8,t,e)}function by(t,e){return Jd(2048,8,t,e)}function TS(t,e){return Jd(4,2,t,e)}function bS(t,e){return Jd(4,4,t,e)}function IS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function RS(t,e,n){return n=n!=null?n.concat([t]):null,Jd(4,4,IS.bind(null,e,t),n)}function Iy(){}function AS(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ey(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function CS(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ey(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function kS(t,e,n){return ci&21?(Mn(n,e)||(n=jE(),Me.lanes|=n,ui|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Kt=!0),t.memoizedState=n)}function IP(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=zf.transition;zf.transition={};try{t(!1),e()}finally{ve=n,zf.transition=r}}function PS(){return Rn().memoizedState}function RP(t,e,n){var r=ls(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},NS(t))jS(e,n);else if(n=cS(t,e,n,r),n!==null){var s=Vt();Dn(n,t,r,s),OS(n,e,r)}}function AP(t,e,n){var r=ls(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(NS(t))jS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Mn(a,o)){var l=e.interleaved;l===null?(s.next=s,yy(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=cS(t,e,s,r),n!==null&&(s=Vt(),Dn(n,t,r,s),OS(n,e,r))}}function NS(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function jS(t,e){Fa=Gu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function OS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ry(t,n)}}var Xu={readContext:In,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},CP={readContext:In,useCallback:function(t,e){return Un().memoizedState=[t,e===void 0?null:e],t},useContext:In,useEffect:Bx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hu(4194308,4,IS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hu(4194308,4,t,e)},useInsertionEffect:function(t,e){return hu(4,2,t,e)},useMemo:function(t,e){var n=Un();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Un();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=RP.bind(null,Me,t),[r.memoizedState,t]},useRef:function(t){var e=Un();return t={current:t},e.memoizedState=t},useState:Ux,useDebugValue:Iy,useDeferredValue:function(t){return Un().memoizedState=t},useTransition:function(){var t=Ux(!1),e=t[0];return t=IP.bind(null,t[1]),Un().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Me,s=Un();if(Ne){if(n===void 0)throw Error(D(407));n=n()}else{if(n=e(),lt===null)throw Error(D(349));ci&30||vS(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Bx(wS.bind(null,r,i,t),[t]),r.flags|=2048,fl(9,xS.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Un(),e=lt.identifierPrefix;if(Ne){var n=hr,r=dr;n=(r&~(1<<32-Ln(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=dl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=bP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kP={readContext:In,useCallback:AS,useContext:In,useEffect:by,useImperativeHandle:RS,useInsertionEffect:TS,useLayoutEffect:bS,useMemo:CS,useReducer:Wf,useRef:SS,useState:function(){return Wf(hl)},useDebugValue:Iy,useDeferredValue:function(t){var e=Rn();return kS(e,nt.memoizedState,t)},useTransition:function(){var t=Wf(hl)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:gS,useSyncExternalStore:yS,useId:PS,unstable_isNewReconciler:!1},PP={readContext:In,useCallback:AS,useContext:In,useEffect:by,useImperativeHandle:RS,useInsertionEffect:TS,useLayoutEffect:bS,useMemo:CS,useReducer:Hf,useRef:SS,useState:function(){return Hf(hl)},useDebugValue:Iy,useDeferredValue:function(t){var e=Rn();return nt===null?e.memoizedState=t:kS(e,nt.memoizedState,t)},useTransition:function(){var t=Hf(hl)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:gS,useSyncExternalStore:yS,useId:PS,unstable_isNewReconciler:!1};function To(t,e){try{var n="",r=e;do n+=ik(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function qf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Sm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var NP=typeof WeakMap=="function"?WeakMap:Map;function LS(t,e,n){n=yr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ju||(Ju=!0,jm=r),Sm(t,e)},n}function DS(t,e,n){n=yr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Sm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Sm(t,e),typeof r!="function"&&(as===null?as=new Set([this]):as.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function zx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new NP;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=qP.bind(null,t,e,n),e.then(t,t))}function Wx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Hx(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=yr(-1,1),e.tag=2,os(n,e,1))),n.lanes|=1),t)}var jP=jr.ReactCurrentOwner,Kt=!1;function $t(t,e,n,r){e.child=t===null?pS(e,null,n,r):Eo(e,t.child,n,r)}function qx(t,e,n,r,s){n=n.render;var i=e.ref;return io(e,s),r=Sy(t,e,n,r,i,s),n=Ty(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Tr(t,e,s)):(Ne&&n&&dy(e),e.flags|=1,$t(t,e,r,s),e.child)}function Kx(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Oy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,MS(t,e,i,r,s)):(t=gu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:il,n(o,r)&&t.ref===e.ref)return Tr(t,e,s)}return e.flags|=1,t=cs(i,r),t.ref=e.ref,t.return=e,e.child=t}function MS(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(il(i,r)&&t.ref===e.ref)if(Kt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Kt=!0);else return e.lanes=t.lanes,Tr(t,e,s)}return Tm(t,e,n,r,s)}function $S(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Ji,tn),tn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(Ji,tn),tn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(Ji,tn),tn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(Ji,tn),tn|=r;return $t(t,e,s,n),e.child}function FS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Tm(t,e,n,r,s){var i=Gt(n)?ai:jt.current;return i=wo(e,i),io(e,s),n=Sy(t,e,n,r,i,s),r=Ty(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Tr(t,e,s)):(Ne&&r&&dy(e),e.flags|=1,$t(t,e,n,s),e.child)}function Qx(t,e,n,r,s){if(Gt(n)){var i=!0;Bu(e)}else i=!1;if(io(e,s),e.stateNode===null)fu(t,e),hS(e,n,r),Em(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=In(c):(c=Gt(n)?ai:jt.current,c=wo(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Fx(e,o,r,c),Wr=!1;var p=e.memoizedState;o.state=p,Ku(e,r,o,s),l=e.memoizedState,a!==r||p!==l||Qt.current||Wr?(typeof d=="function"&&(_m(e,n,d,r),l=e.memoizedState),(a=Wr||$x(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,uS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:kn(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=In(l):(l=Gt(n)?ai:jt.current,l=wo(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&Fx(e,o,r,l),Wr=!1,p=e.memoizedState,o.state=p,Ku(e,r,o,s);var g=e.memoizedState;a!==f||p!==g||Qt.current||Wr?(typeof m=="function"&&(_m(e,n,m,r),g=e.memoizedState),(c=Wr||$x(e,n,c,r,p,g,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return bm(t,e,n,r,i,s)}function bm(t,e,n,r,s,i){FS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&jx(e,n,!1),Tr(t,e,i);r=e.stateNode,jP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Eo(e,t.child,null,i),e.child=Eo(e,null,a,i)):$t(t,e,a,i),e.memoizedState=r.state,s&&jx(e,n,!0),e.child}function VS(t){var e=t.stateNode;e.pendingContext?Nx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Nx(t,e.context,!1),xy(t,e.containerInfo)}function Gx(t,e,n,r,s){return _o(),fy(s),e.flags|=256,$t(t,e,n,r),e.child}var Im={dehydrated:null,treeContext:null,retryLane:0};function Rm(t){return{baseLanes:t,cachePool:null,transitions:null}}function US(t,e,n){var r=e.pendingProps,s=Le.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Te(Le,s&1),t===null)return xm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=th(o,r,0,null),t=ni(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Rm(n),e.memoizedState=Im,t):Ry(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return OP(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=cs(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=cs(a,i):(i=ni(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Rm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Im,r}return i=t.child,t=i.sibling,r=cs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ry(t,e){return e=th({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vc(t,e,n,r){return r!==null&&fy(r),Eo(e,t.child,null,n),t=Ry(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function OP(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=qf(Error(D(422))),Vc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=th({mode:"visible",children:r.children},s,0,null),i=ni(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Eo(e,t.child,null,o),e.child.memoizedState=Rm(o),e.memoizedState=Im,i);if(!(e.mode&1))return Vc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(D(419)),r=qf(i,r,void 0),Vc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Kt||a){if(r=lt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Sr(t,s),Dn(r,t,s,-1))}return jy(),r=qf(Error(D(421))),Vc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=KP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,nn=is(s.nextSibling),on=e,Ne=!0,Nn=null,t!==null&&(vn[xn++]=dr,vn[xn++]=hr,vn[xn++]=li,dr=t.id,hr=t.overflow,li=e),e=Ry(e,r.children),e.flags|=4096,e)}function Xx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),wm(t.return,e,n)}function Kf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function BS(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if($t(t,e,r.children,n),r=Le.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xx(t,n,e);else if(t.tag===19)Xx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Le,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Qu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Kf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Qu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Kf(e,!0,n,null,i);break;case"together":Kf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Tr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ui|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(D(153));if(e.child!==null){for(t=e.child,n=cs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=cs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function LP(t,e,n){switch(e.tag){case 3:VS(e),_o();break;case 5:mS(e);break;case 1:Gt(e.type)&&Bu(e);break;case 4:xy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Te(Hu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Le,Le.current&1),e.flags|=128,null):n&e.child.childLanes?US(t,e,n):(Te(Le,Le.current&1),t=Tr(t,e,n),t!==null?t.sibling:null);Te(Le,Le.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return BS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(Le,Le.current),r)break;return null;case 22:case 23:return e.lanes=0,$S(t,e,n)}return Tr(t,e,n)}var zS,Am,WS,HS;zS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Am=function(){};WS=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Gs(Xn.current);var i=null;switch(n){case"input":s=Xp(t,s),r=Xp(t,r),i=[];break;case"select":s=$e({},s,{value:void 0}),r=$e({},r,{value:void 0}),i=[];break;case"textarea":s=Zp(t,s),r=Zp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Vu)}tm(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ja.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ja.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&be("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};HS=function(t,e,n,r){n!==r&&(e.flags|=4)};function ga(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function DP(t,e,n){var r=e.pendingProps;switch(hy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(e),null;case 1:return Gt(e.type)&&Uu(),_t(e),null;case 3:return r=e.stateNode,So(),Ae(Qt),Ae(jt),_y(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&($c(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nn!==null&&(Dm(Nn),Nn=null))),Am(t,e),_t(e),null;case 5:wy(e);var s=Gs(ul.current);if(n=e.type,t!==null&&e.stateNode!=null)WS(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(D(166));return _t(e),null}if(t=Gs(Xn.current),$c(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Bn]=e,r[ll]=i,t=(e.mode&1)!==0,n){case"dialog":be("cancel",r),be("close",r);break;case"iframe":case"object":case"embed":be("load",r);break;case"video":case"audio":for(s=0;s<Ia.length;s++)be(Ia[s],r);break;case"source":be("error",r);break;case"img":case"image":case"link":be("error",r),be("load",r);break;case"details":be("toggle",r);break;case"input":ix(r,i),be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},be("invalid",r);break;case"textarea":ax(r,i),be("invalid",r)}tm(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Mc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Mc(r.textContent,a,t),s=["children",""+a]):Ja.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&be("scroll",r)}switch(n){case"input":Cc(r),ox(r,i,!0);break;case"textarea":Cc(r),lx(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Vu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Bn]=e,t[ll]=r,zS(t,e,!1,!1),e.stateNode=t;e:{switch(o=nm(n,r),n){case"dialog":be("cancel",t),be("close",t),s=r;break;case"iframe":case"object":case"embed":be("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ia.length;s++)be(Ia[s],t);s=r;break;case"source":be("error",t),s=r;break;case"img":case"image":case"link":be("error",t),be("load",t),s=r;break;case"details":be("toggle",t),s=r;break;case"input":ix(t,r),s=Xp(t,r),be("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=$e({},r,{value:void 0}),be("invalid",t);break;case"textarea":ax(t,r),s=Zp(t,r),be("invalid",t);break;default:s=r}tm(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?_E(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&xE(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Za(t,l):typeof l=="number"&&Za(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ja.hasOwnProperty(i)?l!=null&&i==="onScroll"&&be("scroll",t):l!=null&&Yg(t,i,l,o))}switch(n){case"input":Cc(t),ox(t,r,!1);break;case"textarea":Cc(t),lx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ys(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?to(t,!!r.multiple,i,!1):r.defaultValue!=null&&to(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Vu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _t(e),null;case 6:if(t&&e.stateNode!=null)HS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(D(166));if(n=Gs(ul.current),Gs(Xn.current),$c(e)){if(r=e.stateNode,n=e.memoizedProps,r[Bn]=e,(i=r.nodeValue!==n)&&(t=on,t!==null))switch(t.tag){case 3:Mc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Mc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bn]=e,e.stateNode=r}return _t(e),null;case 13:if(Ae(Le),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&nn!==null&&e.mode&1&&!(e.flags&128))lS(),_o(),e.flags|=98560,i=!1;else if(i=$c(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(D(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[Bn]=e}else _o(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_t(e),i=!1}else Nn!==null&&(Dm(Nn),Nn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Le.current&1?rt===0&&(rt=3):jy())),e.updateQueue!==null&&(e.flags|=4),_t(e),null);case 4:return So(),Am(t,e),t===null&&ol(e.stateNode.containerInfo),_t(e),null;case 10:return gy(e.type._context),_t(e),null;case 17:return Gt(e.type)&&Uu(),_t(e),null;case 19:if(Ae(Le),i=e.memoizedState,i===null)return _t(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ga(i,!1);else{if(rt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Qu(t),o!==null){for(e.flags|=128,ga(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Le,Le.current&1|2),e.child}t=t.sibling}i.tail!==null&&qe()>bo&&(e.flags|=128,r=!0,ga(i,!1),e.lanes=4194304)}else{if(!r)if(t=Qu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ga(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ne)return _t(e),null}else 2*qe()-i.renderingStartTime>bo&&n!==1073741824&&(e.flags|=128,r=!0,ga(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=qe(),e.sibling=null,n=Le.current,Te(Le,r?n&1|2:n&1),e):(_t(e),null);case 22:case 23:return Ny(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?tn&1073741824&&(_t(e),e.subtreeFlags&6&&(e.flags|=8192)):_t(e),null;case 24:return null;case 25:return null}throw Error(D(156,e.tag))}function MP(t,e){switch(hy(e),e.tag){case 1:return Gt(e.type)&&Uu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return So(),Ae(Qt),Ae(jt),_y(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wy(e),null;case 13:if(Ae(Le),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(D(340));_o()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Le),null;case 4:return So(),null;case 10:return gy(e.type._context),null;case 22:case 23:return Ny(),null;case 24:return null;default:return null}}var Uc=!1,It=!1,$P=typeof WeakSet=="function"?WeakSet:Set,H=null;function Yi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ue(t,e,r)}else n.current=null}function Cm(t,e,n){try{n()}catch(r){Ue(t,e,r)}}var Yx=!1;function FP(t,e){if(hm=Mu,t=GE(),uy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,f=t,p=null;t:for(;;){for(var m;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++d===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(fm={focusedElem:t,selectionRange:n},Mu=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,_=g.memoizedState,x=e.stateNode,v=x.getSnapshotBeforeUpdate(e.elementType===e.type?y:kn(e.type,y),_);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(E){Ue(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return g=Yx,Yx=!1,g}function Va(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Cm(e,n,i)}s=s.next}while(s!==r)}}function Zd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function km(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function qS(t){var e=t.alternate;e!==null&&(t.alternate=null,qS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bn],delete e[ll],delete e[gm],delete e[_P],delete e[EP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function KS(t){return t.tag===5||t.tag===3||t.tag===4}function Jx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||KS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vu));else if(r!==4&&(t=t.child,t!==null))for(Pm(t,e,n),t=t.sibling;t!==null;)Pm(t,e,n),t=t.sibling}function Nm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Nm(t,e,n),t=t.sibling;t!==null;)Nm(t,e,n),t=t.sibling}var ft=null,Pn=!1;function Fr(t,e,n){for(n=n.child;n!==null;)QS(t,e,n),n=n.sibling}function QS(t,e,n){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(Hd,n)}catch{}switch(n.tag){case 5:It||Yi(n,e);case 6:var r=ft,s=Pn;ft=null,Fr(t,e,n),ft=r,Pn=s,ft!==null&&(Pn?(t=ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ft.removeChild(n.stateNode));break;case 18:ft!==null&&(Pn?(t=ft,n=n.stateNode,t.nodeType===8?Vf(t.parentNode,n):t.nodeType===1&&Vf(t,n),rl(t)):Vf(ft,n.stateNode));break;case 4:r=ft,s=Pn,ft=n.stateNode.containerInfo,Pn=!0,Fr(t,e,n),ft=r,Pn=s;break;case 0:case 11:case 14:case 15:if(!It&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Cm(n,e,o),s=s.next}while(s!==r)}Fr(t,e,n);break;case 1:if(!It&&(Yi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ue(n,e,a)}Fr(t,e,n);break;case 21:Fr(t,e,n);break;case 22:n.mode&1?(It=(r=It)||n.memoizedState!==null,Fr(t,e,n),It=r):Fr(t,e,n);break;default:Fr(t,e,n)}}function Zx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $P),e.forEach(function(r){var s=QP.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Cn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ft=a.stateNode,Pn=!1;break e;case 3:ft=a.stateNode.containerInfo,Pn=!0;break e;case 4:ft=a.stateNode.containerInfo,Pn=!0;break e}a=a.return}if(ft===null)throw Error(D(160));QS(i,o,s),ft=null,Pn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Ue(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GS(e,t),e=e.sibling}function GS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cn(e,t),Vn(t),r&4){try{Va(3,t,t.return),Zd(3,t)}catch(y){Ue(t,t.return,y)}try{Va(5,t,t.return)}catch(y){Ue(t,t.return,y)}}break;case 1:Cn(e,t),Vn(t),r&512&&n!==null&&Yi(n,n.return);break;case 5:if(Cn(e,t),Vn(t),r&512&&n!==null&&Yi(n,n.return),t.flags&32){var s=t.stateNode;try{Za(s,"")}catch(y){Ue(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&gE(s,i),nm(a,o);var c=nm(a,i);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?_E(s,f):d==="dangerouslySetInnerHTML"?xE(s,f):d==="children"?Za(s,f):Yg(s,d,f,c)}switch(a){case"input":Yp(s,i);break;case"textarea":yE(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?to(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?to(s,!!i.multiple,i.defaultValue,!0):to(s,!!i.multiple,i.multiple?[]:"",!1))}s[ll]=i}catch(y){Ue(t,t.return,y)}}break;case 6:if(Cn(e,t),Vn(t),r&4){if(t.stateNode===null)throw Error(D(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){Ue(t,t.return,y)}}break;case 3:if(Cn(e,t),Vn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{rl(e.containerInfo)}catch(y){Ue(t,t.return,y)}break;case 4:Cn(e,t),Vn(t);break;case 13:Cn(e,t),Vn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ky=qe())),r&4&&Zx(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(It=(c=It)||d,Cn(e,t),It=c):Cn(e,t),Vn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(H=t,d=t.child;d!==null;){for(f=H=d;H!==null;){switch(p=H,m=p.child,p.tag){case 0:case 11:case 14:case 15:Va(4,p,p.return);break;case 1:Yi(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){Ue(r,n,y)}}break;case 5:Yi(p,p.return);break;case 22:if(p.memoizedState!==null){t1(f);continue}}m!==null?(m.return=p,H=m):t1(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=wE("display",o))}catch(y){Ue(t,t.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(y){Ue(t,t.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Cn(e,t),Vn(t),r&4&&Zx(t);break;case 21:break;default:Cn(e,t),Vn(t)}}function Vn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(KS(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Za(s,""),r.flags&=-33);var i=Jx(t);Nm(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Jx(t);Pm(t,a,o);break;default:throw Error(D(161))}}catch(l){Ue(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function VP(t,e,n){H=t,XS(t)}function XS(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Uc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||It;a=Uc;var c=It;if(Uc=o,(It=l)&&!c)for(H=s;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?n1(s):l!==null?(l.return=o,H=l):n1(s);for(;i!==null;)H=i,XS(i),i=i.sibling;H=s,Uc=a,It=c}e1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):e1(t)}}function e1(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:It||Zd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!It)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:kn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Mx(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Mx(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&rl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}It||e.flags&512&&km(e)}catch(p){Ue(e,e.return,p)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function t1(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function n1(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Zd(4,e)}catch(l){Ue(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Ue(e,s,l)}}var i=e.return;try{km(e)}catch(l){Ue(e,i,l)}break;case 5:var o=e.return;try{km(e)}catch(l){Ue(e,o,l)}}}catch(l){Ue(e,e.return,l)}if(e===t){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var UP=Math.ceil,Yu=jr.ReactCurrentDispatcher,Ay=jr.ReactCurrentOwner,Sn=jr.ReactCurrentBatchConfig,fe=0,lt=null,Je=null,yt=0,tn=0,Ji=Ps(0),rt=0,pl=null,ui=0,eh=0,Cy=0,Ua=null,Ht=null,ky=0,bo=1/0,cr=null,Ju=!1,jm=null,as=null,Bc=!1,Zr=null,Zu=0,Ba=0,Om=null,pu=-1,mu=0;function Vt(){return fe&6?qe():pu!==-1?pu:pu=qe()}function ls(t){return t.mode&1?fe&2&&yt!==0?yt&-yt:TP.transition!==null?(mu===0&&(mu=jE()),mu):(t=ve,t!==0||(t=window.event,t=t===void 0?16:VE(t.type)),t):1}function Dn(t,e,n,r){if(50<Ba)throw Ba=0,Om=null,Error(D(185));Wl(t,n,r),(!(fe&2)||t!==lt)&&(t===lt&&(!(fe&2)&&(eh|=n),rt===4&&qr(t,yt)),Xt(t,r),n===1&&fe===0&&!(e.mode&1)&&(bo=qe()+500,Xd&&Ns()))}function Xt(t,e){var n=t.callbackNode;Tk(t,e);var r=Du(t,t===lt?yt:0);if(r===0)n!==null&&dx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&dx(n),e===1)t.tag===0?SP(r1.bind(null,t)):iS(r1.bind(null,t)),xP(function(){!(fe&6)&&Ns()}),n=null;else{switch(OE(r)){case 1:n=ny;break;case 4:n=PE;break;case 16:n=Lu;break;case 536870912:n=NE;break;default:n=Lu}n=sT(n,YS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function YS(t,e){if(pu=-1,mu=0,fe&6)throw Error(D(327));var n=t.callbackNode;if(oo()&&t.callbackNode!==n)return null;var r=Du(t,t===lt?yt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ed(t,r);else{e=r;var s=fe;fe|=2;var i=ZS();(lt!==t||yt!==e)&&(cr=null,bo=qe()+500,ti(t,e));do try{WP();break}catch(a){JS(t,a)}while(1);my(),Yu.current=i,fe=s,Je!==null?e=0:(lt=null,yt=0,e=rt)}if(e!==0){if(e===2&&(s=am(t),s!==0&&(r=s,e=Lm(t,s))),e===1)throw n=pl,ti(t,0),qr(t,r),Xt(t,qe()),n;if(e===6)qr(t,r);else{if(s=t.current.alternate,!(r&30)&&!BP(s)&&(e=ed(t,r),e===2&&(i=am(t),i!==0&&(r=i,e=Lm(t,i))),e===1))throw n=pl,ti(t,0),qr(t,r),Xt(t,qe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(D(345));case 2:Ws(t,Ht,cr);break;case 3:if(qr(t,r),(r&130023424)===r&&(e=ky+500-qe(),10<e)){if(Du(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Vt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=mm(Ws.bind(null,t,Ht,cr),e);break}Ws(t,Ht,cr);break;case 4:if(qr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ln(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*UP(r/1960))-r,10<r){t.timeoutHandle=mm(Ws.bind(null,t,Ht,cr),r);break}Ws(t,Ht,cr);break;case 5:Ws(t,Ht,cr);break;default:throw Error(D(329))}}}return Xt(t,qe()),t.callbackNode===n?YS.bind(null,t):null}function Lm(t,e){var n=Ua;return t.current.memoizedState.isDehydrated&&(ti(t,e).flags|=256),t=ed(t,e),t!==2&&(e=Ht,Ht=n,e!==null&&Dm(e)),t}function Dm(t){Ht===null?Ht=t:Ht.push.apply(Ht,t)}function BP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Mn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qr(t,e){for(e&=~Cy,e&=~eh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ln(e),r=1<<n;t[n]=-1,e&=~r}}function r1(t){if(fe&6)throw Error(D(327));oo();var e=Du(t,0);if(!(e&1))return Xt(t,qe()),null;var n=ed(t,e);if(t.tag!==0&&n===2){var r=am(t);r!==0&&(e=r,n=Lm(t,r))}if(n===1)throw n=pl,ti(t,0),qr(t,e),Xt(t,qe()),n;if(n===6)throw Error(D(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ws(t,Ht,cr),Xt(t,qe()),null}function Py(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(bo=qe()+500,Xd&&Ns())}}function di(t){Zr!==null&&Zr.tag===0&&!(fe&6)&&oo();var e=fe;fe|=1;var n=Sn.transition,r=ve;try{if(Sn.transition=null,ve=1,t)return t()}finally{ve=r,Sn.transition=n,fe=e,!(fe&6)&&Ns()}}function Ny(){tn=Ji.current,Ae(Ji)}function ti(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,vP(n)),Je!==null)for(n=Je.return;n!==null;){var r=n;switch(hy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Uu();break;case 3:So(),Ae(Qt),Ae(jt),_y();break;case 5:wy(r);break;case 4:So();break;case 13:Ae(Le);break;case 19:Ae(Le);break;case 10:gy(r.type._context);break;case 22:case 23:Ny()}n=n.return}if(lt=t,Je=t=cs(t.current,null),yt=tn=e,rt=0,pl=null,Cy=eh=ui=0,Ht=Ua=null,Qs!==null){for(e=0;e<Qs.length;e++)if(n=Qs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Qs=null}return t}function JS(t,e){do{var n=Je;try{if(my(),du.current=Xu,Gu){for(var r=Me.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Gu=!1}if(ci=0,at=nt=Me=null,Fa=!1,dl=0,Ay.current=null,n===null||n.return===null){rt=1,pl=e,Je=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=yt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Wx(o);if(m!==null){m.flags&=-257,Hx(m,o,a,i,e),m.mode&1&&zx(i,c,e),e=m,l=c;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if(!(e&1)){zx(i,c,e),jy();break e}l=Error(D(426))}}else if(Ne&&a.mode&1){var _=Wx(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Hx(_,o,a,i,e),fy(To(l,a));break e}}i=l=To(l,a),rt!==4&&(rt=2),Ua===null?Ua=[i]:Ua.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=LS(i,l,e);Dx(i,x);break e;case 1:a=l;var v=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(as===null||!as.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=DS(i,a,e);Dx(i,E);break e}}i=i.return}while(i!==null)}tT(n)}catch(S){e=S,Je===n&&n!==null&&(Je=n=n.return);continue}break}while(1)}function ZS(){var t=Yu.current;return Yu.current=Xu,t===null?Xu:t}function jy(){(rt===0||rt===3||rt===2)&&(rt=4),lt===null||!(ui&268435455)&&!(eh&268435455)||qr(lt,yt)}function ed(t,e){var n=fe;fe|=2;var r=ZS();(lt!==t||yt!==e)&&(cr=null,ti(t,e));do try{zP();break}catch(s){JS(t,s)}while(1);if(my(),fe=n,Yu.current=r,Je!==null)throw Error(D(261));return lt=null,yt=0,rt}function zP(){for(;Je!==null;)eT(Je)}function WP(){for(;Je!==null&&!mk();)eT(Je)}function eT(t){var e=rT(t.alternate,t,tn);t.memoizedProps=t.pendingProps,e===null?tT(t):Je=e,Ay.current=null}function tT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=MP(n,e),n!==null){n.flags&=32767,Je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{rt=6,Je=null;return}}else if(n=DP(n,e,tn),n!==null){Je=n;return}if(e=e.sibling,e!==null){Je=e;return}Je=e=t}while(e!==null);rt===0&&(rt=5)}function Ws(t,e,n){var r=ve,s=Sn.transition;try{Sn.transition=null,ve=1,HP(t,e,n,r)}finally{Sn.transition=s,ve=r}return null}function HP(t,e,n,r){do oo();while(Zr!==null);if(fe&6)throw Error(D(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(D(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(bk(t,i),t===lt&&(Je=lt=null,yt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bc||(Bc=!0,sT(Lu,function(){return oo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Sn.transition,Sn.transition=null;var o=ve;ve=1;var a=fe;fe|=4,Ay.current=null,FP(t,n),GS(n,t),dP(fm),Mu=!!hm,fm=hm=null,t.current=n,VP(n),gk(),fe=a,ve=o,Sn.transition=i}else t.current=n;if(Bc&&(Bc=!1,Zr=t,Zu=s),i=t.pendingLanes,i===0&&(as=null),xk(n.stateNode),Xt(t,qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ju)throw Ju=!1,t=jm,jm=null,t;return Zu&1&&t.tag!==0&&oo(),i=t.pendingLanes,i&1?t===Om?Ba++:(Ba=0,Om=t):Ba=0,Ns(),null}function oo(){if(Zr!==null){var t=OE(Zu),e=Sn.transition,n=ve;try{if(Sn.transition=null,ve=16>t?16:t,Zr===null)var r=!1;else{if(t=Zr,Zr=null,Zu=0,fe&6)throw Error(D(331));var s=fe;for(fe|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(H=c;H!==null;){var d=H;switch(d.tag){case 0:case 11:case 15:Va(8,d,i)}var f=d.child;if(f!==null)f.return=d,H=f;else for(;H!==null;){d=H;var p=d.sibling,m=d.return;if(qS(d),d===c){H=null;break}if(p!==null){p.return=m,H=p;break}H=m}}}var g=i.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Va(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,H=x;break e}H=i.return}}var v=t.current;for(H=v;H!==null;){o=H;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,H=w;else e:for(o=v;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Zd(9,a)}}catch(S){Ue(a,a.return,S)}if(a===o){H=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,H=E;break e}H=a.return}}if(fe=s,Ns(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(Hd,t)}catch{}r=!0}return r}finally{ve=n,Sn.transition=e}}return!1}function s1(t,e,n){e=To(n,e),e=LS(t,e,1),t=os(t,e,1),e=Vt(),t!==null&&(Wl(t,1,e),Xt(t,e))}function Ue(t,e,n){if(t.tag===3)s1(t,t,n);else for(;e!==null;){if(e.tag===3){s1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(as===null||!as.has(r))){t=To(n,t),t=DS(e,t,1),e=os(e,t,1),t=Vt(),e!==null&&(Wl(e,1,t),Xt(e,t));break}}e=e.return}}function qP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Vt(),t.pingedLanes|=t.suspendedLanes&n,lt===t&&(yt&n)===n&&(rt===4||rt===3&&(yt&130023424)===yt&&500>qe()-ky?ti(t,0):Cy|=n),Xt(t,e)}function nT(t,e){e===0&&(t.mode&1?(e=Nc,Nc<<=1,!(Nc&130023424)&&(Nc=4194304)):e=1);var n=Vt();t=Sr(t,e),t!==null&&(Wl(t,e,n),Xt(t,n))}function KP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),nT(t,n)}function QP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(e),nT(t,n)}var rT;rT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qt.current)Kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Kt=!1,LP(t,e,n);Kt=!!(t.flags&131072)}else Kt=!1,Ne&&e.flags&1048576&&oS(e,Wu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fu(t,e),t=e.pendingProps;var s=wo(e,jt.current);io(e,n),s=Sy(null,e,r,t,s,n);var i=Ty();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gt(r)?(i=!0,Bu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,vy(e),s.updater=Yd,e.stateNode=s,s._reactInternals=e,Em(e,r,t,n),e=bm(null,e,r,!0,i,n)):(e.tag=0,Ne&&i&&dy(e),$t(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(fu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=XP(r),t=kn(r,t),s){case 0:e=Tm(null,e,r,t,n);break e;case 1:e=Qx(null,e,r,t,n);break e;case 11:e=qx(null,e,r,t,n);break e;case 14:e=Kx(null,e,r,kn(r.type,t),n);break e}throw Error(D(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kn(r,s),Tm(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kn(r,s),Qx(t,e,r,s,n);case 3:e:{if(VS(e),t===null)throw Error(D(387));r=e.pendingProps,i=e.memoizedState,s=i.element,uS(t,e),Ku(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=To(Error(D(423)),e),e=Gx(t,e,r,n,s);break e}else if(r!==s){s=To(Error(D(424)),e),e=Gx(t,e,r,n,s);break e}else for(nn=is(e.stateNode.containerInfo.firstChild),on=e,Ne=!0,Nn=null,n=pS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_o(),r===s){e=Tr(t,e,n);break e}$t(t,e,r,n)}e=e.child}return e;case 5:return mS(e),t===null&&xm(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,pm(r,s)?o=null:i!==null&&pm(r,i)&&(e.flags|=32),FS(t,e),$t(t,e,o,n),e.child;case 6:return t===null&&xm(e),null;case 13:return US(t,e,n);case 4:return xy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Eo(e,null,r,n):$t(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kn(r,s),qx(t,e,r,s,n);case 7:return $t(t,e,e.pendingProps,n),e.child;case 8:return $t(t,e,e.pendingProps.children,n),e.child;case 12:return $t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Te(Hu,r._currentValue),r._currentValue=o,i!==null)if(Mn(i.value,o)){if(i.children===s.children&&!Qt.current){e=Tr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=yr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),wm(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(D(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),wm(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}$t(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,io(e,n),s=In(s),r=r(s),e.flags|=1,$t(t,e,r,n),e.child;case 14:return r=e.type,s=kn(r,e.pendingProps),s=kn(r.type,s),Kx(t,e,r,s,n);case 15:return MS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kn(r,s),fu(t,e),e.tag=1,Gt(r)?(t=!0,Bu(e)):t=!1,io(e,n),hS(e,r,s),Em(e,r,s,n),bm(null,e,r,!0,t,n);case 19:return BS(t,e,n);case 22:return $S(t,e,n)}throw Error(D(156,e.tag))};function sT(t,e){return kE(t,e)}function GP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(t,e,n,r){return new GP(t,e,n,r)}function Oy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function XP(t){if(typeof t=="function")return Oy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zg)return 11;if(t===ey)return 14}return 2}function cs(t,e){var n=t.alternate;return n===null?(n=En(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Oy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bi:return ni(n.children,s,i,e);case Jg:o=8,s|=8;break;case qp:return t=En(12,n,e,s|2),t.elementType=qp,t.lanes=i,t;case Kp:return t=En(13,n,e,s),t.elementType=Kp,t.lanes=i,t;case Qp:return t=En(19,n,e,s),t.elementType=Qp,t.lanes=i,t;case fE:return th(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dE:o=10;break e;case hE:o=9;break e;case Zg:o=11;break e;case ey:o=14;break e;case zr:o=16,r=null;break e}throw Error(D(130,t==null?t:typeof t,""))}return e=En(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ni(t,e,n,r){return t=En(7,t,r,e),t.lanes=n,t}function th(t,e,n,r){return t=En(22,t,r,e),t.elementType=fE,t.lanes=n,t.stateNode={isHidden:!1},t}function Qf(t,e,n){return t=En(6,t,null,e),t.lanes=n,t}function Gf(t,e,n){return e=En(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function YP(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cf(0),this.expirationTimes=Cf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ly(t,e,n,r,s,i,o,a,l){return t=new YP(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=En(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vy(i),t}function JP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ui,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function iT(t){if(!t)return vs;t=t._reactInternals;e:{if(Ii(t)!==t||t.tag!==1)throw Error(D(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(D(171))}if(t.tag===1){var n=t.type;if(Gt(n))return sS(t,n,e)}return e}function oT(t,e,n,r,s,i,o,a,l){return t=Ly(n,r,!0,t,s,i,o,a,l),t.context=iT(null),n=t.current,r=Vt(),s=ls(n),i=yr(r,s),i.callback=e??null,os(n,i,s),t.current.lanes=s,Wl(t,s,r),Xt(t,r),t}function nh(t,e,n,r){var s=e.current,i=Vt(),o=ls(s);return n=iT(n),e.context===null?e.context=n:e.pendingContext=n,e=yr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=os(s,e,o),t!==null&&(Dn(t,s,o,i),uu(t,s,o)),o}function td(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function i1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Dy(t,e){i1(t,e),(t=t.alternate)&&i1(t,e)}function ZP(){return null}var aT=typeof reportError=="function"?reportError:function(t){console.error(t)};function My(t){this._internalRoot=t}rh.prototype.render=My.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(D(409));nh(t,e,null,null)};rh.prototype.unmount=My.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;di(function(){nh(null,t,null,null)}),e[Er]=null}};function rh(t){this._internalRoot=t}rh.prototype.unstable_scheduleHydration=function(t){if(t){var e=ME();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hr.length&&e!==0&&e<Hr[n].priority;n++);Hr.splice(n,0,t),n===0&&FE(t)}};function $y(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function o1(){}function eN(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=td(o);i.call(c)}}var o=oT(e,r,t,0,null,!1,!1,"",o1);return t._reactRootContainer=o,t[Er]=o.current,ol(t.nodeType===8?t.parentNode:t),di(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=td(l);a.call(c)}}var l=Ly(t,0,!1,null,null,!1,!1,"",o1);return t._reactRootContainer=l,t[Er]=l.current,ol(t.nodeType===8?t.parentNode:t),di(function(){nh(e,l,n,r)}),l}function ih(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=td(o);a.call(l)}}nh(e,o,t,s)}else o=eN(n,e,t,s,r);return td(o)}LE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ba(e.pendingLanes);n!==0&&(ry(e,n|1),Xt(e,qe()),!(fe&6)&&(bo=qe()+500,Ns()))}break;case 13:di(function(){var r=Sr(t,1);if(r!==null){var s=Vt();Dn(r,t,1,s)}}),Dy(t,1)}};sy=function(t){if(t.tag===13){var e=Sr(t,134217728);if(e!==null){var n=Vt();Dn(e,t,134217728,n)}Dy(t,134217728)}};DE=function(t){if(t.tag===13){var e=ls(t),n=Sr(t,e);if(n!==null){var r=Vt();Dn(n,t,e,r)}Dy(t,e)}};ME=function(){return ve};$E=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};sm=function(t,e,n){switch(e){case"input":if(Yp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Gd(r);if(!s)throw Error(D(90));mE(r),Yp(r,s)}}}break;case"textarea":yE(t,n);break;case"select":e=n.value,e!=null&&to(t,!!n.multiple,e,!1)}};TE=Py;bE=di;var tN={usingClientEntryPoint:!1,Events:[ql,qi,Gd,EE,SE,Py]},ya={findFiberByHostInstance:Ks,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nN={bundleType:ya.bundleType,version:ya.version,rendererPackageName:ya.rendererPackageName,rendererConfig:ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=AE(t),t===null?null:t.stateNode},findFiberByHostInstance:ya.findFiberByHostInstance||ZP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zc.isDisabled&&zc.supportsFiber)try{Hd=zc.inject(nN),Gn=zc}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tN;fn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$y(e))throw Error(D(200));return JP(t,e,null,n)};fn.createRoot=function(t,e){if(!$y(t))throw Error(D(299));var n=!1,r="",s=aT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ly(t,1,!1,null,null,n,!1,r,s),t[Er]=e.current,ol(t.nodeType===8?t.parentNode:t),new My(e)};fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(D(188)):(t=Object.keys(t).join(","),Error(D(268,t)));return t=AE(e),t=t===null?null:t.stateNode,t};fn.flushSync=function(t){return di(t)};fn.hydrate=function(t,e,n){if(!sh(e))throw Error(D(200));return ih(null,t,e,!0,n)};fn.hydrateRoot=function(t,e,n){if(!$y(t))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=aT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=oT(e,null,t,1,n??null,s,!1,i,o),t[Er]=e.current,ol(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new rh(e)};fn.render=function(t,e,n){if(!sh(e))throw Error(D(200));return ih(null,t,e,!1,n)};fn.unmountComponentAtNode=function(t){if(!sh(t))throw Error(D(40));return t._reactRootContainer?(di(function(){ih(null,null,t,!1,function(){t._reactRootContainer=null,t[Er]=null})}),!0):!1};fn.unstable_batchedUpdates=Py;fn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!sh(n))throw Error(D(200));if(t==null||t._reactInternals===void 0)throw Error(D(38));return ih(t,e,n,!1,r)};fn.version="18.2.0-next-9e3b772b8-20220608";function lT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lT)}catch(t){console.error(t)}}lT(),oE.exports=fn;var Ho=oE.exports,a1=Ho;Wp.createRoot=a1.createRoot,Wp.hydrateRoot=a1.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Io(){return Io=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Io.apply(this,arguments)}var es;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(es||(es={}));const l1="popstate";function rN(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Mm("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:nd(s)}return iN(e,n,null,t)}function Qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Fy(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sN(){return Math.random().toString(36).substr(2,8)}function c1(t,e){return{usr:t.state,key:t.key,idx:e}}function Mm(t,e,n,r){return n===void 0&&(n=null),Io({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?qo(e):e,{state:n,key:e&&e.key||r||sN()})}function nd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function qo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function iN(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=es.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Io({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function f(){a=es.Pop;let _=d(),x=_==null?null:_-c;c=_,l&&l({action:a,location:y.location,delta:x})}function p(_,x){a=es.Push;let v=Mm(y.location,_,x);n&&n(v,_),c=d()+1;let w=c1(v,c),E=y.createHref(v);try{o.pushState(w,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(E)}i&&l&&l({action:a,location:y.location,delta:1})}function m(_,x){a=es.Replace;let v=Mm(y.location,_,x);n&&n(v,_),c=d();let w=c1(v,c),E=y.createHref(v);o.replaceState(w,"",E),i&&l&&l({action:a,location:y.location,delta:0})}function g(_){let x=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof _=="string"?_:nd(_);return Qe(x,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,x)}let y={get action(){return a},get location(){return t(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(l1,f),l=_,()=>{s.removeEventListener(l1,f),l=null}},createHref(_){return e(s,_)},createURL:g,encodeLocation(_){let x=g(_);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:p,replace:m,go(_){return o.go(_)}};return y}var u1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(u1||(u1={}));function oN(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?qo(e):e,s=Vy(r.pathname||"/",n);if(s==null)return null;let i=cT(t);aN(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=gN(i[a],xN(s));return o}function cT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Qe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=us([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Qe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),cT(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:pN(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of uT(i.path))s(i,o,l)}),e}function uT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=uT(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function aN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const lN=/^:\w+$/,cN=3,uN=2,dN=1,hN=10,fN=-2,d1=t=>t==="*";function pN(t,e){let n=t.split("/"),r=n.length;return n.some(d1)&&(r+=fN),e&&(r+=uN),n.filter(s=>!d1(s)).reduce((s,i)=>s+(lN.test(i)?cN:i===""?dN:hN),r)}function mN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function gN(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=yN({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!d)return null;Object.assign(r,d.params);let f=a.route;i.push({params:r,pathname:us([s,d.pathname]),pathnameBase:SN(us([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=us([s,d.pathnameBase]))}return i}function yN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=vN(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,f)=>{if(d==="*"){let p=a[f]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}return c[d]=wN(a[f]||"",d),c},{}),pathname:i,pathnameBase:o,pattern:t}}function vN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Fy(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function xN(t){try{return decodeURI(t)}catch(e){return Fy(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function wN(t,e){try{return decodeURIComponent(t)}catch(n){return Fy(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Vy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function _N(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?qo(t):t;return{pathname:n?n.startsWith("/")?n:EN(n,e):e,search:TN(r),hash:bN(s)}}function EN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Xf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Uy(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function By(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=qo(t):(s=Io({},t),Qe(!s.pathname||!s.pathname.includes("?"),Xf("?","pathname","search",s)),Qe(!s.pathname||!s.pathname.includes("#"),Xf("#","pathname","hash",s)),Qe(!s.search||!s.search.includes("#"),Xf("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(r||o==null)a=n;else{let f=e.length-1;if(o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=_N(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const us=t=>t.join("/").replace(/\/\/+/g,"/"),SN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),TN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,bN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,IN=function(e,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let s=new Headers(r.headers);return s.set("Location",e),new Response(null,Io({},r,{headers:s}))};function RN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const dT=["post","put","patch","delete"];new Set(dT);const AN=["get",...dT];new Set(AN);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rd(){return rd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rd.apply(this,arguments)}const zy=h.createContext(null),CN=h.createContext(null),Ko=h.createContext(null),oh=h.createContext(null),or=h.createContext({outlet:null,matches:[],isDataRoute:!1}),hT=h.createContext(null);function kN(t,e){let{relative:n}=e===void 0?{}:e;Qo()||Qe(!1);let{basename:r,navigator:s}=h.useContext(Ko),{hash:i,pathname:o,search:a}=pT(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:us([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Qo(){return h.useContext(oh)!=null}function mn(){return Qo()||Qe(!1),h.useContext(oh).location}function fT(t){h.useContext(Ko).static||h.useLayoutEffect(t)}function Jt(){let{isDataRoute:t}=h.useContext(or);return t?HN():PN()}function PN(){Qo()||Qe(!1);let t=h.useContext(zy),{basename:e,navigator:n}=h.useContext(Ko),{matches:r}=h.useContext(or),{pathname:s}=mn(),i=JSON.stringify(Uy(r).map(l=>l.pathnameBase)),o=h.useRef(!1);return fT(()=>{o.current=!0}),h.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=By(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:us([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,i,s,t])}const NN=h.createContext(null);function jN(t){let e=h.useContext(or).outlet;return e&&h.createElement(NN.Provider,{value:t},e)}function ah(){let{matches:t}=h.useContext(or),e=t[t.length-1];return e?e.params:{}}function pT(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=h.useContext(or),{pathname:s}=mn(),i=JSON.stringify(Uy(r).map(o=>o.pathnameBase));return h.useMemo(()=>By(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function ON(t,e){return LN(t,e)}function LN(t,e,n){Qo()||Qe(!1);let{navigator:r}=h.useContext(Ko),{matches:s}=h.useContext(or),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let l=mn(),c;if(e){var d;let y=typeof e=="string"?qo(e):e;a==="/"||(d=y.pathname)!=null&&d.startsWith(a)||Qe(!1),c=y}else c=l;let f=c.pathname||"/",p=a==="/"?f:f.slice(a.length)||"/",m=oN(t,{pathname:p}),g=VN(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:us([a,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?a:us([a,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,n);return e&&g?h.createElement(oh.Provider,{value:{location:rd({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:es.Pop}},g):g}function DN(){let t=WN(),e=RN(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},e),n?h.createElement("pre",{style:s},n):null,i)}const MN=h.createElement(DN,null);class $N extends h.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?h.createElement(or.Provider,{value:this.props.routeContext},h.createElement(hT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function FN(t){let{routeContext:e,match:n,children:r}=t,s=h.useContext(zy);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),h.createElement(or.Provider,{value:e},r)}function VN(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let i=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=i.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||Qe(!1),i=i.slice(0,Math.min(i.length,a+1))}return i.reduceRight((a,l,c)=>{let d=l.route.id?o==null?void 0:o[l.route.id]:null,f=null;n&&(f=l.route.errorElement||MN);let p=e.concat(i.slice(0,c+1)),m=()=>{let g;return d?g=f:l.route.Component?g=h.createElement(l.route.Component,null):l.route.element?g=l.route.element:g=a,h.createElement(FN,{match:l,routeContext:{outlet:a,matches:p,isDataRoute:n!=null},children:g})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?h.createElement($N,{location:n.location,revalidation:n.revalidation,component:f,error:d,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var $m;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})($m||($m={}));var ml;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(ml||(ml={}));function UN(t){let e=h.useContext(zy);return e||Qe(!1),e}function BN(t){let e=h.useContext(CN);return e||Qe(!1),e}function zN(t){let e=h.useContext(or);return e||Qe(!1),e}function mT(t){let e=zN(),n=e.matches[e.matches.length-1];return n.route.id||Qe(!1),n.route.id}function WN(){var t;let e=h.useContext(hT),n=BN(ml.UseRouteError),r=mT(ml.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function HN(){let{router:t}=UN($m.UseNavigateStable),e=mT(ml.UseNavigateStable),n=h.useRef(!1);return fT(()=>{n.current=!0}),h.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,rd({fromRouteId:e},i)))},[t,e])}function qN(t){let{to:e,replace:n,state:r,relative:s}=t;Qo()||Qe(!1);let{matches:i}=h.useContext(or),{pathname:o}=mn(),a=Jt(),l=By(e,Uy(i).map(d=>d.pathnameBase),o,s==="path"),c=JSON.stringify(l);return h.useEffect(()=>a(JSON.parse(c),{replace:n,state:r,relative:s}),[a,c,s,n,r]),null}function gT(t){return jN(t.context)}function Br(t){Qe(!1)}function KN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=es.Pop,navigator:i,static:o=!1}=t;Qo()&&Qe(!1);let a=e.replace(/^\/*/,"/"),l=h.useMemo(()=>({basename:a,navigator:i,static:o}),[a,i,o]);typeof r=="string"&&(r=qo(r));let{pathname:c="/",search:d="",hash:f="",state:p=null,key:m="default"}=r,g=h.useMemo(()=>{let y=Vy(c,a);return y==null?null:{location:{pathname:y,search:d,hash:f,state:p,key:m},navigationType:s}},[a,c,d,f,p,m,s]);return g==null?null:h.createElement(Ko.Provider,{value:l},h.createElement(oh.Provider,{children:n,value:g}))}function QN(t){let{children:e,location:n}=t;return ON(Fm(e),n)}var h1;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(h1||(h1={}));new Promise(()=>{});function Fm(t,e){e===void 0&&(e=[]);let n=[];return h.Children.forEach(t,(r,s)=>{if(!h.isValidElement(r))return;let i=[...e,s];if(r.type===h.Fragment){n.push.apply(n,Fm(r.props.children,i));return}r.type!==Br&&Qe(!1),!r.props.index||!r.props.children||Qe(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Fm(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vm(){return Vm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vm.apply(this,arguments)}function GN(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function XN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function YN(t,e){return t.button===0&&(!e||e==="_self")&&!XN(t)}const JN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],ZN="startTransition",f1=Qg[ZN];function ej(t){let{basename:e,children:n,future:r,window:s}=t,i=h.useRef();i.current==null&&(i.current=rN({window:s,v5Compat:!0}));let o=i.current,[a,l]=h.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=h.useCallback(f=>{c&&f1?f1(()=>l(f)):l(f)},[l,c]);return h.useLayoutEffect(()=>o.listen(d),[o,d]),h.createElement(KN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const tj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ds=h.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d}=e,f=GN(e,JN),{basename:p}=h.useContext(Ko),m,g=!1;if(typeof c=="string"&&nj.test(c)&&(m=c,tj))try{let v=new URL(window.location.href),w=c.startsWith("//")?new URL(v.protocol+c):new URL(c),E=Vy(w.pathname,p);w.origin===v.origin&&E!=null?c=E+w.search+w.hash:g=!0}catch{}let y=kN(c,{relative:s}),_=rj(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s});function x(v){r&&r(v),v.defaultPrevented||_(v)}return h.createElement("a",Vm({},f,{href:m||y,onClick:g||i?r:x,ref:n,target:l}))});var p1;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(p1||(p1={}));var m1;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(m1||(m1={}));function rj(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o}=e===void 0?{}:e,a=Jt(),l=mn(),c=pT(t,{relative:o});return h.useCallback(d=>{if(YN(d,n)){d.preventDefault();let f=r!==void 0?r:nd(l)===nd(c);a(t,{replace:f,state:s,preventScrollReset:i,relative:o})}},[l,a,c,r,s,n,t,i,o])}function yT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=yT(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function sj(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=yT(t))&&(r&&(r+=" "),r+=e);return r}const g1=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,y1=sj,vT=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return y1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],f=i==null?void 0:i[c];if(d===null)return null;const p=g1(d)||g1(f);return s[c][p]}),a=n&&Object.entries(n).reduce((c,d)=>{let[f,p]=d;return p===void 0||(c[f]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:f,className:p,...m}=d;return Object.entries(m).every(g=>{let[y,_]=g;return Array.isArray(_)?_.includes({...i,...a}[y]):{...i,...a}[y]===_})?[...c,f,p]:c},[]);return y1(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function ij({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const oj=h.forwardRef(ij),aj=oj;function lj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}))}const cj=h.forwardRef(lj),uj=cj;function dj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3"}))}const hj=h.forwardRef(dj),fj=hj;function pj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const mj=h.forwardRef(pj),br=mj;function gj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"}))}const yj=h.forwardRef(gj),xT=yj;function vj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19.5v-15m0 0l-6.75 6.75M12 4.5l6.75 6.75"}))}const xj=h.forwardRef(vj),wj=xj;function _j({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"}))}const Ej=h.forwardRef(_j),Sj=Ej;function Tj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}))}const bj=h.forwardRef(Tj),Ij=bj;function Rj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953l7.108-4.062A1.125 1.125 0 0121 8.688v8.123zM11.25 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953L9.567 7.71a1.125 1.125 0 011.683.977v8.123z"}))}const Aj=h.forwardRef(Rj),Cj=Aj;function kj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Pj=h.forwardRef(kj),Nj=Pj;function jj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Oj=h.forwardRef(jj),wT=Oj;function Lj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))}const Dj=h.forwardRef(Lj),ao=Dj;function Mj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"}))}const $j=h.forwardRef(Mj),Fj=$j;function Vj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"}))}const Uj=h.forwardRef(Vj),Bj=Uj;function zj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const Wj=h.forwardRef(zj),_T=Wj;function Hj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}const qj=h.forwardRef(Hj),Wy=qj;function Kj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const Qj=h.forwardRef(Kj),yu=Qj;function Gj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"}))}const Xj=h.forwardRef(Gj),Yj=Xj;function Jj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Zj=h.forwardRef(Jj),ET=Zj;function e5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const t5=h.forwardRef(e5),lh=t5;function n5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25"}))}const r5=h.forwardRef(n5),s5=r5;function i5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const o5=h.forwardRef(i5),a5=o5;function l5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))}const c5=h.forwardRef(l5),Hy=c5;function u5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z"}))}const d5=h.forwardRef(u5),ST=d5;function h5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const f5=h.forwardRef(h5),TT=f5;function p5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const m5=h.forwardRef(p5),g5=m5;function y5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const v5=h.forwardRef(y5),bT=v5;function x5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const w5=h.forwardRef(x5),v1=w5;function _5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"}))}const E5=h.forwardRef(_5),S5=E5;function T5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"}))}const b5=h.forwardRef(T5),Ro=b5;function I5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}))}const R5=h.forwardRef(I5),IT=R5;function A5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const C5=h.forwardRef(A5),ch=C5;function k5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))}const P5=h.forwardRef(k5),qy=P5;function N5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"}))}const j5=h.forwardRef(N5),O5=j5;function L5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"}))}const D5=h.forwardRef(L5),Ky=D5;function M5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"}))}const $5=h.forwardRef(M5),x1=$5;function F5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const V5=h.forwardRef(F5),sd=V5;function U5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const B5=h.forwardRef(U5),id=B5;function z5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"}))}const W5=h.forwardRef(z5),H5=W5;function q5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"}))}const K5=h.forwardRef(q5),RT=K5;function Q5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"}))}const G5=h.forwardRef(Q5),X5=G5;function Y5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75L19.5 12m0 0l2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6l4.72-4.72a.75.75 0 011.28.531V19.94a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.506-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.395C2.806 8.757 3.63 8.25 4.51 8.25H6.75z"}))}const J5=h.forwardRef(Y5),Z5=J5;function e4({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"}))}const t4=h.forwardRef(e4),gl=t4;function n4({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const r4=h.forwardRef(n4),AT=r4;function s4({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const i4=h.forwardRef(s4),o4=i4;function a4({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const l4=h.forwardRef(a4),Xs=l4,c4=vT("inline-flex items-center hover:brightness-90",{variants:{variant:{default:"",circle:"rounded-[99px] p-[4px] justify-center",list:"flex items-center py-[5px] w-full text-[14px]",primary:"px-[16px] py-[4px] text-[14px]",outline:"border rounded-full"},size:{half:"w-1/2",full:"w-full",small:"text-[13px] px-[10px] py-[3px]",normal:"text-[14px] px-[16px] py-[4px]",large:"h-[40px] w-[40px]"}},defaultVariants:{variant:"default"}}),G=({className:t,children:e,variant:n,size:r,isLoading:s,onClick:i,...o})=>u.jsxs("button",{type:"button",onClick:a=>i?i(a):"",...o,className:c4({variant:n,size:r,className:t}),disabled:s,children:[s?u.jsx(br,{className:"w-[22px] animate-spin"}):null,!s&&e]}),od=[{name:"Red",id:"red",type:"dark",bottom_player_bg:"bg-[#3b1113]",side_bar_bg:"bg-[#391b1c]",content_text:"text-[#ca4954]",content_hover_text:"hover:text-[#ca4954]",content_border:"border-[#ca4954]",content_hover_border:"hover:border-[#ca4954]",content_bg:"bg-[#ca4954]  text-[#fff]",content_hover_bg:"hover:bg-[#ca4954] hover:text-[#fff] ",container:"bg-[#2e0f10]"},{name:"Black",id:"black",type:"dark",bottom_player_bg:"bg-[#181818]",side_bar_bg:"bg-[#242424]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"bg-[#198585]  text-[#fff]",content_hover_bg:"hover:bg-[#198585] hover:text-[#fff] ",container:"bg-[#1e1e1e]"},{name:"Deep blue",id:"deep_blue",type:"dark",bottom_player_bg:"bg-[#111f3b]",side_bar_bg:"bg-[#1b2639]",content_text:"text-[#0c9e85]",content_hover_text:"hover:text-[#0c9e85]",content_border:"border-[#0c9e85]",content_hover_border:"hover:border-[#0c9e85]",content_bg:"bg-[#0c9e85]  text-[#fff]",content_hover_bg:"hover:bg-[#0c9e85] hover:text-[#fff] ",container:"bg-[#0f1a2e]"},{name:"White",id:"white",type:"light",bottom_player_bg:"bg-[#fff]",side_bar_bg:"bg-[#f2f2f2]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"bg-[#198585] text-[#fff]",content_hover_bg:"hover:bg-[#198585] hover:text-[#fff]",container:"bg-[#fff]"},{name:"Light green",id:"green_light",type:"light",bottom_player_bg:"bg-[#c0d8d8]",side_bar_bg:"bg-[#dde5e5]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"bg-[#198585] text-[#fff]",content_hover_bg:"hover:bg-[#198585] hover:text-[#fff]",container:"bg-[#ced9d9]"},{name:"Brown",id:"gray",type:"light",bottom_player_bg:"bg-[#dedad1]",side_bar_bg:"bg-[#d9d7d4]",content_text:"text-[#644646]",content_hover_text:"hover:text-[#644646]",content_border:"border-[#644646]",content_hover_border:"hover:border-[#644646]",content_bg:"bg-[#644646]  text-[#fff]",content_hover_bg:"hover:bg-[#644646] hover:text-[#fff]",container:"bg-[#e5e3df]"}],Qy=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop / Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast  Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Rock/Pop"];function De(t,e,n=0,r){let s=e||t.byteLength-n;const i=typeof Buffer<"u";s<0&&(s+=t.byteLength);const o=[],a=n+s;for(let c=n;c<a;c++){const d=t.getUint8(c);if(d===0)break;o.push(d)}if(i)return Buffer.from(o).toString();const l=o.map(c=>String.fromCharCode(c)).join("");return r?l:decodeURIComponent(escape(l))}function Oi(t,e,n=0,r){let s=!1,i=e||t.byteLength-n;const o=[],a=typeof Buffer<"u";if(i<0&&(i+=t.byteLength),n+1>t.byteLength)return"";r&&(t.getUint16(n)===65534&&(s=!0),n+=2,i-=2);const l=n+i;for(let c=n;c<l;c+=2){let d=t.getUint16(c,s);if(c<l-1&&d===0&&t.getUint16(c+1,s)===0)break;d>=0&&d<=55295||d>=57344&&d<=65535?o.push(d):d>=65536&&d<=1114111&&(d-=65536,o.push(((1047552&d)>>10)+55296),o.push((1023&d)+56320))}if(a){const c=Buffer.alloc(o.length*2);for(let d=0;d<o.length;d++){const f=o[d];s?c.writeUInt16LE(f,d*2):c.writeUInt16BE(f,d*2)}return c.toString()}return String.fromCharCode.apply(null,new Uint16Array(o))}function u4(t){let e=0,n=2130706432;for(;n;)e>>=1,e|=t&n,n>>=8;return e}function vu(t,e=0){return u4(t.getUint32(e))}function CT(t,e=0,n){return n?t.getUint8(e)+(t.getUint8(e+1)<<8)+(t.getUint8(e+2)<<16):t.getUint8(e+2)+(t.getUint8(e+1)<<8)+(t.getUint8(e)<<16)}const kT=new Map([["TALB","album"],["TBPM","bpm"],["TCOM","composer"],["TCON","genre"],["TCOP","copyright"],["TDEN","encoding-time"],["TDLY","playlist-delay"],["TDOR","original-release-time"],["TDRC","recording-time"],["TDRL","release-time"],["TDTG","tagging-time"],["TENC","encoder"],["TEXT","writer"],["TFLT","file-type"],["TIPL","involved-people"],["TIT1","content-group"],["TIT2","title"],["TIT3","subtitle"],["TKEY","initial-key"],["TLAN","language"],["TLEN","length"],["TMCL","credits"],["TMED","media-type"],["TMOO","mood"],["TOAL","original-album"],["TOFN","original-filename"],["TOLY","original-writer"],["TOPE","original-artist"],["TOWN","owner"],["TPE1","artist"],["TPE2","band"],["TPE3","conductor"],["TPE4","remixer"],["TPOS","set-part"],["TPRO","produced-notice"],["TPUB","publisher"],["TRCK","track"],["TRSN","radio-name"],["TRSO","radio-owner"],["TSOA","album-sort"],["TSOP","performer-sort"],["TSOT","title-sort"],["TSRC","isrc"],["TSSE","encoder-settings"],["TSST","set-subtitle"],["TAL","album"],["TBP","bpm"],["TCM","composer"],["TCO","genre"],["TCR","copyright"],["TDY","playlist-delay"],["TEN","encoder"],["TFT","file-type"],["TKE","initial-key"],["TLA","language"],["TLE","length"],["TMT","media-type"],["TOA","original-artist"],["TOF","original-filename"],["TOL","original-writer"],["TOT","original-album"],["TP1","artist"],["TP2","band"],["TP3","conductor"],["TP4","remixer"],["TPA","set-part"],["TPB","publisher"],["TRC","isrc"],["TRK","track"],["TSS","encoder-settings"],["TT1","content-group"],["TT2","title"],["TT3","subtitle"],["TXT","writer"],["WCOM","url-commercial"],["WCOP","url-legal"],["WOAF","url-file"],["WOAR","url-artist"],["WOAS","url-source"],["WORS","url-radio"],["WPAY","url-payment"],["WPUB","url-publisher"],["WAF","url-file"],["WAR","url-artist"],["WAS","url-source"],["WCM","url-commercial"],["WCP","url-copyright"],["WPB","url-publisher"],["COMM","comments"],["APIC","image"],["PIC","image"],["PRIV","private"]]),PT=["other","file-icon","icon","cover-front","cover-back","leaflet","media","artist-lead","artist","conductor","band","composer","writer","location","during-recording","during-performance","screen","fish","illustration","logo-band","logo-publisher"];function d4(t){const e={id:null,tag:null,value:null},n=new DataView(t),r={id:De(n,3),type:De(n,1),size:CT(n,3)},s=kT.get(r.id);if(!s)return null;if(e.id=r.id,e.tag=s,r.type==="T"){let i=De(n,-7,7);r.id==="TCO"&&parseInt(i)&&(i=Qy[parseInt(i)]),e.value=i}else if(r.type==="W")e.value=De(n,-7,7);else if(r.id==="COM"){let i=De(n,-10,10);i.indexOf("\0")!==-1&&(i=i.substr(i.indexOf("\0")+1)),e.value=i}else if(r.id==="PIC"){const i={type:null,mime:"image/"+De(n,3,7).toLowerCase(),description:null,data:null};i.type=PT[n.getUint8(11)]||"other";const o=11;let a=0;for(let l=o;;l++)if(n.getUint8(l)===0){a=l-o;break}i.description=a===0?null:De(n,a,o),i.data=t.slice(o+1),e.value=i}return e.tag?e:null}function h4(t,e,n){e=e||4;const r={id:null,tag:null,value:null},s=new DataView(t);if(e<3)return d4(t);const i={id:De(s,4),type:De(s,1),size:vu(s,4),flags:[s.getUint8(8),s.getUint8(9)]};if(i.flags[1]!==0)return null;const o=kT.get(i.id);if(!o)return null;if(r.tag=o,r.id=i.id,i.type==="T"){const a=s.getUint8(10);let l=null;a===0||a===3?l=De(s,-11,11):a===1?l=Oi(s,-11,11,!0):a===2&&(l=Oi(s,-11,11)),i.id==="TCON"&&l!==null&&parseInt(l)&&(l=Qy[parseInt(l)]),r.value=l}else if(i.type==="W")r.value=De(s,-10,10);else if(i.id==="PRIV"){let l=0;for(let c=0;;c++)if(s.getUint8(c)===0){l=c-10;break}r.value={identifier:l===0?null:De(s,l,10),data:t.slice(l+10+1)}}else if(i.id==="COMM"){const a=s.getUint8(10);let l=14;for(let c=l;;c++)if(a===1||a===2){if(s.getUint16(c)===0){l=c+2;break}c++}else if(s.getUint8(c)===0){l=c+1;break}a===0||a===3?r.value=De(s,-1*l,l):a===1?r.value=Oi(s,-1*l,l,!0):a===2&&(r.value=Oi(s,-1*l,l))}else if(i.id==="APIC"){const a=s.getUint8(10),l={type:null,mime:null,description:null,data:null};let c=11,d=0;for(let f=c;;f++)if(s.getUint8(f)===0){d=f-c;break}l.mime=De(s,d,c),l.type=PT[s.getUint8(c+d+1)]||"other",c+=d+2,d=0;for(let f=c;;f++)if(s.getUint8(f)===0){d=f-c;break}d!==0&&(a===0||a===3?l.description=De(s,d,c):a===1?l.description=Oi(s,d,c,!0):a===2&&(l.description=Oi(s,d,c))),l.data=t.slice(c+1),r.value=l}return r.tag?r:null}async function f4(t){let e=null;const n=await t.read(128,t.size-128),r=new DataView(n);n.byteLength===128&&De(r,3,void 0,!0)==="TAG"&&(e={kind:"v1",title:De(r,30,3).trim()||null,album:De(r,30,63).trim()||null,artist:De(r,30,33).trim()||null,year:De(r,4,93).trim()||null,genre:null,comment:null,track:null},r.getUint8(125)===0?(e.comment=De(r,28,97),e.version=1.1,e.track=r.getUint8(126)):e.comment=De(r,30,97),e.genre=Qy[r.getUint8(127)]||null);const s=await t.read(14,0),i=new DataView(s);if(s.byteLength===14&&De(i,3,void 0,!0)==="ID3"&&i.getUint8(3)<=4){let o=10,a=0;const l=[i.getUint8(3),i.getUint8(4)],c=i.getUint8(5);if(!(c&128)){e={kind:"v2",title:e?e.title:null,album:e?e.album:null,artist:e?e.artist:null,year:e?e.year:null,version:l,frames:[],images:[]},c&64&&(o+=vu(i,11)),a+=vu(i,6);const d=await t.read(a,o),f=new DataView(d);let p=0;for(;p<d.byteLength;){let m,g=!0;for(let _=0;_<3;_++){const x=f.getUint8(p+_);(x<65||x>90)&&(x<48||x>57)&&(g=!1)}if(!g)break;l[0]<3?m=d.slice(p,p+6+CT(f,p+3)):l[0]===3?m=d.slice(p,p+10+f.getUint32(p+4)):m=d.slice(p,p+10+vu(f,p+4));const y=await h4(m,l[0],l[1]);if(y&&y.tag){const _=e;_.frames.push(y),y.tag==="image"?_.images.push(y.value):e[y.tag]=y.value}p+=m.byteLength}}}return e}class p4{constructor(){this.size=0}async close(){}async readBlob(e,n=0,r="application/octet-stream"){const s=await this.read(e,n);return new Blob([s],{type:r})}}class m4 extends p4{constructor(e){super(),this._file=e}async open(){this.size=this._file.size}async read(e,n){const r=this._file.slice(n,n+e);return new Promise((s,i)=>{const o=new FileReader;o.onload=()=>{s(o.result)},o.onerror=()=>{i(new Error("File read failed"))},o.readAsArrayBuffer(r)})}}const g4=typeof window<"u"&&"File"in window&&"FileReader"in window&&typeof ArrayBuffer<"u";async function y4(t){await t.open();const e=await f4(t);return await t.close(),e}function v4(t){if(!g4)throw new Error("Browser does not have support for the File API and/or ArrayBuffers");return y4(new m4(t))}let ad=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");function NT(t,e){return function(){return t.apply(e,arguments)}}const{toString:x4}=Object.prototype,{getPrototypeOf:Gy}=Object,uh=(t=>e=>{const n=x4.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ar=t=>(t=t.toLowerCase(),e=>uh(e)===t),dh=t=>e=>typeof e===t,{isArray:Go}=Array,yl=dh("undefined");function w4(t){return t!==null&&!yl(t)&&t.constructor!==null&&!yl(t.constructor)&&Tn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const jT=ar("ArrayBuffer");function _4(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&jT(t.buffer),e}const E4=dh("string"),Tn=dh("function"),OT=dh("number"),hh=t=>t!==null&&typeof t=="object",S4=t=>t===!0||t===!1,xu=t=>{if(uh(t)!=="object")return!1;const e=Gy(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},T4=ar("Date"),b4=ar("File"),I4=ar("Blob"),R4=ar("FileList"),A4=t=>hh(t)&&Tn(t.pipe),C4=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Tn(t.append)&&((e=uh(t))==="formdata"||e==="object"&&Tn(t.toString)&&t.toString()==="[object FormData]"))},k4=ar("URLSearchParams"),P4=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ql(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Go(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function LT(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const DT=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),MT=t=>!yl(t)&&t!==DT;function Um(){const{caseless:t}=MT(this)&&this||{},e={},n=(r,s)=>{const i=t&&LT(e,s)||s;xu(e[i])&&xu(r)?e[i]=Um(e[i],r):xu(r)?e[i]=Um({},r):Go(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Ql(arguments[r],n);return e}const N4=(t,e,n,{allOwnKeys:r}={})=>(Ql(e,(s,i)=>{n&&Tn(s)?t[i]=NT(s,n):t[i]=s},{allOwnKeys:r}),t),j4=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),O4=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},L4=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Gy(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},D4=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},M4=t=>{if(!t)return null;if(Go(t))return t;let e=t.length;if(!OT(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},$4=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Gy(Uint8Array)),F4=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},V4=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},U4=ar("HTMLFormElement"),B4=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),w1=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),z4=ar("RegExp"),$T=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Ql(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},W4=t=>{$T(t,(e,n)=>{if(Tn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Tn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},H4=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Go(t)?r(t):r(String(t).split(e)),n},q4=()=>{},K4=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Yf="abcdefghijklmnopqrstuvwxyz",_1="0123456789",FT={DIGIT:_1,ALPHA:Yf,ALPHA_DIGIT:Yf+Yf.toUpperCase()+_1},Q4=(t=16,e=FT.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function G4(t){return!!(t&&Tn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const X4=t=>{const e=new Array(10),n=(r,s)=>{if(hh(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Go(r)?[]:{};return Ql(r,(o,a)=>{const l=n(o,s+1);!yl(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},Y4=ar("AsyncFunction"),J4=t=>t&&(hh(t)||Tn(t))&&Tn(t.then)&&Tn(t.catch),k={isArray:Go,isArrayBuffer:jT,isBuffer:w4,isFormData:C4,isArrayBufferView:_4,isString:E4,isNumber:OT,isBoolean:S4,isObject:hh,isPlainObject:xu,isUndefined:yl,isDate:T4,isFile:b4,isBlob:I4,isRegExp:z4,isFunction:Tn,isStream:A4,isURLSearchParams:k4,isTypedArray:$4,isFileList:R4,forEach:Ql,merge:Um,extend:N4,trim:P4,stripBOM:j4,inherits:O4,toFlatObject:L4,kindOf:uh,kindOfTest:ar,endsWith:D4,toArray:M4,forEachEntry:F4,matchAll:V4,isHTMLForm:U4,hasOwnProperty:w1,hasOwnProp:w1,reduceDescriptors:$T,freezeMethods:W4,toObjectSet:H4,toCamelCase:B4,noop:q4,toFiniteNumber:K4,findKey:LT,global:DT,isContextDefined:MT,ALPHABET:FT,generateString:Q4,isSpecCompliantForm:G4,toJSONObject:X4,isAsyncFn:Y4,isThenable:J4};function he(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}k.inherits(he,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:k.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const VT=he.prototype,UT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{UT[t]={value:t}});Object.defineProperties(he,UT);Object.defineProperty(VT,"isAxiosError",{value:!0});he.from=(t,e,n,r,s,i)=>{const o=Object.create(VT);return k.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),he.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const Z4=null;function Bm(t){return k.isPlainObject(t)||k.isArray(t)}function BT(t){return k.endsWith(t,"[]")?t.slice(0,-2):t}function E1(t,e,n){return t?t.concat(e).map(function(s,i){return s=BT(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function eO(t){return k.isArray(t)&&!t.some(Bm)}const tO=k.toFlatObject(k,{},null,function(e){return/^is[A-Z]/.test(e)});function fh(t,e,n){if(!k.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=k.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,_){return!k.isUndefined(_[y])});const r=n.metaTokens,s=n.visitor||d,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&k.isSpecCompliantForm(e);if(!k.isFunction(s))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(k.isDate(g))return g.toISOString();if(!l&&k.isBlob(g))throw new he("Blob is not supported. Use a Buffer instead.");return k.isArrayBuffer(g)||k.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function d(g,y,_){let x=g;if(g&&!_&&typeof g=="object"){if(k.endsWith(y,"{}"))y=r?y:y.slice(0,-2),g=JSON.stringify(g);else if(k.isArray(g)&&eO(g)||(k.isFileList(g)||k.endsWith(y,"[]"))&&(x=k.toArray(g)))return y=BT(y),x.forEach(function(w,E){!(k.isUndefined(w)||w===null)&&e.append(o===!0?E1([y],E,i):o===null?y:y+"[]",c(w))}),!1}return Bm(g)?!0:(e.append(E1(_,y,i),c(g)),!1)}const f=[],p=Object.assign(tO,{defaultVisitor:d,convertValue:c,isVisitable:Bm});function m(g,y){if(!k.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(g),k.forEach(g,function(x,v){(!(k.isUndefined(x)||x===null)&&s.call(e,x,k.isString(v)?v.trim():v,y,p))===!0&&m(x,y?y.concat(v):[v])}),f.pop()}}if(!k.isObject(t))throw new TypeError("data must be an object");return m(t),e}function S1(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Xy(t,e){this._pairs=[],t&&fh(t,this,e)}const zT=Xy.prototype;zT.append=function(e,n){this._pairs.push([e,n])};zT.toString=function(e){const n=e?function(r){return e.call(this,r,S1)}:S1;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function nO(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function WT(t,e,n){if(!e)return t;const r=n&&n.encode||nO,s=n&&n.serialize;let i;if(s?i=s(e,n):i=k.isURLSearchParams(e)?e.toString():new Xy(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class rO{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){k.forEach(this.handlers,function(r){r!==null&&e(r)})}}const T1=rO,HT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},sO=typeof URLSearchParams<"u"?URLSearchParams:Xy,iO=typeof FormData<"u"?FormData:null,oO=typeof Blob<"u"?Blob:null,aO=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),lO=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Hn={isBrowser:!0,classes:{URLSearchParams:sO,FormData:iO,Blob:oO},isStandardBrowserEnv:aO,isStandardBrowserWebWorkerEnv:lO,protocols:["http","https","file","blob","url","data"]};function cO(t,e){return fh(t,new Hn.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return Hn.isNode&&k.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function uO(t){return k.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function dO(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function qT(t){function e(n,r,s,i){let o=n[i++];const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&k.isArray(s)?s.length:o,l?(k.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!k.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&k.isArray(s[o])&&(s[o]=dO(s[o])),!a)}if(k.isFormData(t)&&k.isFunction(t.entries)){const n={};return k.forEachEntry(t,(r,s)=>{e(uO(r),s,n,0)}),n}return null}function hO(t,e,n){if(k.isString(t))try{return(e||JSON.parse)(t),k.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Yy={transitional:HT,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=k.isObject(e);if(i&&k.isHTMLForm(e)&&(e=new FormData(e)),k.isFormData(e))return s&&s?JSON.stringify(qT(e)):e;if(k.isArrayBuffer(e)||k.isBuffer(e)||k.isStream(e)||k.isFile(e)||k.isBlob(e))return e;if(k.isArrayBufferView(e))return e.buffer;if(k.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return cO(e,this.formSerializer).toString();if((a=k.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return fh(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),hO(e)):e}],transformResponse:[function(e){const n=this.transitional||Yy.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&k.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?he.from(a,he.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Hn.classes.FormData,Blob:Hn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};k.forEach(["delete","get","head","post","put","patch"],t=>{Yy.headers[t]={}});const Jy=Yy,fO=k.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),pO=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&fO[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},b1=Symbol("internals");function va(t){return t&&String(t).trim().toLowerCase()}function wu(t){return t===!1||t==null?t:k.isArray(t)?t.map(wu):String(t)}function mO(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const gO=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Jf(t,e,n,r,s){if(k.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!k.isString(e)){if(k.isString(r))return e.indexOf(r)!==-1;if(k.isRegExp(r))return r.test(e)}}function yO(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function vO(t,e){const n=k.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class ph{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,c){const d=va(l);if(!d)throw new Error("header name must be a non-empty string");const f=k.findKey(s,d);(!f||s[f]===void 0||c===!0||c===void 0&&s[f]!==!1)&&(s[f||l]=wu(a))}const o=(a,l)=>k.forEach(a,(c,d)=>i(c,d,l));return k.isPlainObject(e)||e instanceof this.constructor?o(e,n):k.isString(e)&&(e=e.trim())&&!gO(e)?o(pO(e),n):e!=null&&i(n,e,r),this}get(e,n){if(e=va(e),e){const r=k.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return mO(s);if(k.isFunction(n))return n.call(this,s,r);if(k.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=va(e),e){const r=k.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Jf(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=va(o),o){const a=k.findKey(r,o);a&&(!n||Jf(r,r[a],a,n))&&(delete r[a],s=!0)}}return k.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||Jf(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return k.forEach(this,(s,i)=>{const o=k.findKey(r,i);if(o){n[o]=wu(s),delete n[i];return}const a=e?yO(i):String(i).trim();a!==i&&delete n[i],n[a]=wu(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return k.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&k.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[b1]=this[b1]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=va(o);r[a]||(vO(s,o),r[a]=!0)}return k.isArray(e)?e.forEach(i):i(e),this}}ph.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);k.reduceDescriptors(ph.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});k.freezeMethods(ph);const vr=ph;function Zf(t,e){const n=this||Jy,r=e||n,s=vr.from(r.headers);let i=r.data;return k.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function KT(t){return!!(t&&t.__CANCEL__)}function Gl(t,e,n){he.call(this,t??"canceled",he.ERR_CANCELED,e,n),this.name="CanceledError"}k.inherits(Gl,he,{__CANCEL__:!0});function xO(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new he("Request failed with status code "+n.status,[he.ERR_BAD_REQUEST,he.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const wO=Hn.isStandardBrowserEnv?function(){return{write:function(n,r,s,i,o,a){const l=[];l.push(n+"="+encodeURIComponent(r)),k.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),k.isString(i)&&l.push("path="+i),k.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function _O(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function EO(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function QT(t,e){return t&&!_O(e)?EO(t,e):e}const SO=Hn.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let o=i;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){const a=k.isString(o)?s(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function TO(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function bO(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[i];o||(o=c),n[s]=l,r[s]=c;let f=i,p=0;for(;f!==s;)p+=n[f++],f=f%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const m=d&&c-d;return m?Math.round(p*1e3/m):void 0}}function I1(t,e){let n=0;const r=bO(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-n,l=r(a),c=i<=o;n=i;const d={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-i)/l:void 0,event:s};d[e?"download":"upload"]=!0,t(d)}}const IO=typeof XMLHttpRequest<"u",RO=IO&&function(t){return new Promise(function(n,r){let s=t.data;const i=vr.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let c;k.isFormData(s)&&(Hn.isStandardBrowserEnv||Hn.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?k.isString(c=i.getContentType())&&i.setContentType(c.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let d=new XMLHttpRequest;if(t.auth){const g=t.auth.username||"",y=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(g+":"+y))}const f=QT(t.baseURL,t.url);d.open(t.method.toUpperCase(),WT(f,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function p(){if(!d)return;const g=vr.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),_={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:g,config:t,request:d};xO(function(v){n(v),l()},function(v){r(v),l()},_),d=null}if("onloadend"in d?d.onloadend=p:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(p)},d.onabort=function(){d&&(r(new he("Request aborted",he.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new he("Network Error",he.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let y=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const _=t.transitional||HT;t.timeoutErrorMessage&&(y=t.timeoutErrorMessage),r(new he(y,_.clarifyTimeoutError?he.ETIMEDOUT:he.ECONNABORTED,t,d)),d=null},Hn.isStandardBrowserEnv){const g=SO(f)&&t.xsrfCookieName&&wO.read(t.xsrfCookieName);g&&i.set(t.xsrfHeaderName,g)}s===void 0&&i.setContentType(null),"setRequestHeader"in d&&k.forEach(i.toJSON(),function(y,_){d.setRequestHeader(_,y)}),k.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),o&&o!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",I1(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",I1(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=g=>{d&&(r(!g||g.type?new Gl(null,t,d):g),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const m=TO(f);if(m&&Hn.protocols.indexOf(m)===-1){r(new he("Unsupported protocol "+m+":",he.ERR_BAD_REQUEST,t));return}d.send(s||null)})},zm={http:Z4,xhr:RO};k.forEach(zm,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const R1=t=>`- ${t}`,AO=t=>k.isFunction(t)||t===null||t===!1,GT={getAdapter:t=>{t=k.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!AO(n)&&(r=zm[(o=String(n)).toLowerCase()],r===void 0))throw new he(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(R1).join(`
`):" "+R1(i[0]):"as no adapter specified";throw new he("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:zm};function ep(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Gl(null,t)}function A1(t){return ep(t),t.headers=vr.from(t.headers),t.data=Zf.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),GT.getAdapter(t.adapter||Jy.adapter)(t).then(function(r){return ep(t),r.data=Zf.call(t,t.transformResponse,r),r.headers=vr.from(r.headers),r},function(r){return KT(r)||(ep(t),r&&r.response&&(r.response.data=Zf.call(t,t.transformResponse,r.response),r.response.headers=vr.from(r.response.headers))),Promise.reject(r)})}const C1=t=>t instanceof vr?t.toJSON():t;function Ao(t,e){e=e||{};const n={};function r(c,d,f){return k.isPlainObject(c)&&k.isPlainObject(d)?k.merge.call({caseless:f},c,d):k.isPlainObject(d)?k.merge({},d):k.isArray(d)?d.slice():d}function s(c,d,f){if(k.isUndefined(d)){if(!k.isUndefined(c))return r(void 0,c,f)}else return r(c,d,f)}function i(c,d){if(!k.isUndefined(d))return r(void 0,d)}function o(c,d){if(k.isUndefined(d)){if(!k.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,f){if(f in e)return r(c,d);if(f in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d)=>s(C1(c),C1(d),!0)};return k.forEach(Object.keys(Object.assign({},t,e)),function(d){const f=l[d]||s,p=f(t[d],e[d],d);k.isUndefined(p)&&f!==a||(n[d]=p)}),n}const XT="1.6.0",Zy={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Zy[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const k1={};Zy.transitional=function(e,n,r){function s(i,o){return"[Axios v"+XT+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new he(s(o," has been removed"+(n?" in "+n:"")),he.ERR_DEPRECATED);return n&&!k1[o]&&(k1[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};function CO(t,e,n){if(typeof t!="object")throw new he("options must be an object",he.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new he("option "+i+" must be "+l,he.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new he("Unknown option "+i,he.ERR_BAD_OPTION)}}const Wm={assertOptions:CO,validators:Zy},Vr=Wm.validators;class ld{constructor(e){this.defaults=e,this.interceptors={request:new T1,response:new T1}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ao(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Wm.assertOptions(r,{silentJSONParsing:Vr.transitional(Vr.boolean),forcedJSONParsing:Vr.transitional(Vr.boolean),clarifyTimeoutError:Vr.transitional(Vr.boolean)},!1),s!=null&&(k.isFunction(s)?n.paramsSerializer={serialize:s}:Wm.assertOptions(s,{encode:Vr.function,serialize:Vr.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&k.merge(i.common,i[n.method]);i&&k.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),n.headers=vr.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const c=[];this.interceptors.response.forEach(function(y){c.push(y.fulfilled,y.rejected)});let d,f=0,p;if(!l){const g=[A1.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),p=g.length,d=Promise.resolve(n);f<p;)d=d.then(g[f++],g[f++]);return d}p=a.length;let m=n;for(f=0;f<p;){const g=a[f++],y=a[f++];try{m=g(m)}catch(_){y.call(this,_);break}}try{d=A1.call(this,m)}catch(g){return Promise.reject(g)}for(f=0,p=c.length;f<p;)d=d.then(c[f++],c[f++]);return d}getUri(e){e=Ao(this.defaults,e);const n=QT(e.baseURL,e.url);return WT(n,e.params,e.paramsSerializer)}}k.forEach(["delete","get","head","options"],function(e){ld.prototype[e]=function(n,r){return this.request(Ao(r||{},{method:e,url:n,data:(r||{}).data}))}});k.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(Ao(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ld.prototype[e]=n(),ld.prototype[e+"Form"]=n(!0)});const _u=ld;class e0{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new Gl(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new e0(function(s){e=s}),cancel:e}}}const kO=e0;function PO(t){return function(n){return t.apply(null,n)}}function NO(t){return k.isObject(t)&&t.isAxiosError===!0}const Hm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Hm).forEach(([t,e])=>{Hm[e]=t});const jO=Hm;function YT(t){const e=new _u(t),n=NT(_u.prototype.request,e);return k.extend(n,_u.prototype,e,{allOwnKeys:!0}),k.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return YT(Ao(t,s))},n}const et=YT(Jy);et.Axios=_u;et.CanceledError=Gl;et.CancelToken=kO;et.isCancel=KT;et.VERSION=XT;et.toFormData=fh;et.AxiosError=he;et.Cancel=et.CanceledError;et.all=function(e){return Promise.all(e)};et.spread=PO;et.isAxiosError=NO;et.mergeConfig=Ao;et.AxiosHeaders=vr;et.formToJSON=t=>qT(k.isHTMLForm(t)?new FormData(t):t);et.getAdapter=GT.getAdapter;et.HttpStatusCode=jO;et.default=et;const OO=et,JT=OO.create({baseURL:{}.VITE_ENDPOINT||"https://express-zingmp3-awx6.vercel.app"}),LO=t=>new Date(t.toDate().getTime()).toLocaleString(),xr=()=>JSON.parse(localStorage.getItem("HD-MP3")||"{}"),Ct=(t,e)=>{const n=xr();return n[t]=e,localStorage.setItem("HD-MP3",JSON.stringify(n))},t0=t=>(n=>n.toLocaleLowerCase().replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ/g,"a").replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e").replace(/ì|í|ị|ỉ|ĩ/g,"i").replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ/g,"o").replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u").replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y").replace(/đ/g,"d"))(t).toLocaleLowerCase().replaceAll(/[\W_]/g,"")+"_"+ad(4),DO=async t=>{if(!t)return;const e=await v4(t);if(!e)return;const{title:n,artist:r,images:s}=e,i={name:"",singer:"",image:null};return i.name=n||t.name,i.singer=r||"...",s.length&&(i.image=s[0].data),i},ZT=async t=>{const e=Date.now(),n=await JT.post("/api/image/encode",t);let r;n&&(r=n.data.encode);const s=(Date.now()-e)/1e3;return console.log(">>> api: get blurHash encode finished after",s),{encode:r}},MO=async t=>{const e=new FormData;e.append("file",t);const n=Date.now(),r=await JT.post("/api/image/optimize",e,{responseType:"blob"});let s;r&&(s=r.data);const i=(Date.now()-n)/1e3;return console.log(">>> api: optimize finished after",i),s},Co=t=>{if(!t)return"";let e=0,n=+t.toFixed(0);for(;n>=60;)n-=60,e++;return e<10?n>=10?`0${e}:${n}`:`0${e}:0${n}`:n>=10?`${e}:${n}`:`${e}:0${n}`},$O=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);if(n!=-1)return e[n]=t,n},n0=({...t})=>({...{name:"",singer:"",image_url:"",song_url:"",by:"",duration:0,lyric_id:"",image_file_path:"",song_file_path:"",id:"",song_in:"",blurhash_encode:"",size:0},...t}),r0=({...t})=>({...{id:"",name:"",song_ids:[],by:"",image_url:"",blurhash_encode:""},...t}),s0=async t=>{await new Promise(e=>setTimeout(e,t))},eb=(t,e,n,r,s)=>{if(!s||!r){console.log("song list item lack of props");return}e||n&&n(!0);let i=[...r];const o=i.indexOf(t);o===-1?i.push(t):i.splice(o,1),s(i),i.length||n&&n(!1)};let qm=od[0];const FO=xr(),P1=FO.theme;P1&&od.forEach(t=>{t.id===P1&&(qm=t)});const tb={theme:{...qm,alpha:qm.type==="light"?"[#000]/[.1]":"[#fff]/[.1]"}},VO=(t,e)=>{const n=e.payload.theme;return{theme:{...n,alpha:n.type==="dark"?"[#fff]/[.1]":"[#000]/[.1]"}}},UO=()=>{const[t,e]=h.useReducer(VO,tb),n=h.useCallback(r=>{console.log("set theme"),e({type:0,payload:{theme:r}})},[]);return{state:t,setTheme:n}},BO={state:tb,setTheme:()=>{}},nb=h.createContext(BO),zO=({children:t})=>u.jsx(nb.Provider,{value:UO(),children:t}),te=()=>{const{state:{theme:t},setTheme:e}=h.useContext(nb);return{theme:t,setTheme:e}};function Be({className:t}){const{theme:e}=te();return u.jsx("div",{className:`animate-pulse rounded-[4px] bg-${e.alpha} ${t}`})}const mh=[...Array(4).keys()].map(t=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Be,{className:"h-[18px] w-[18px]"}),u.jsx(Be,{className:"h-[54px] w-[54px] ml-[10px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Be,{className:"h-[20px] mb-[5px] w-[150px]"}),u.jsx(Be,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},t)),rb=[...Array(1).keys()].map(t=>u.jsx(Be,{className:"w-full h-[40px] mb-[10px]"},t)),WO=[...Array(2).keys()].map(t=>u.jsxs("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:[u.jsx(Be,{className:"pt-[100%] rounded-[8px]"}),u.jsx(Be,{className:"h-[22px] mt-[6px] w-[50%]"})]},t));var HO=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],Ra=t=>{let e=0;for(let n=0;n<t.length;n++){let r=t[n],s=HO.indexOf(r);e=e*83+s}return e},tp=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},np=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},qO=t=>t<0?-1:1,rp=(t,e)=>qO(t)*Math.pow(Math.abs(t),e),N1=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},KO=t=>{if(!t||t.length<6)throw new N1("The blurhash string must be at least 6 characters");let e=Ra(t[0]),n=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*n)throw new N1(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*n}`)},QO=t=>{let e=t>>16,n=t>>8&255,r=t&255;return[tp(e),tp(n),tp(r)]},GO=(t,e)=>{let n=Math.floor(t/361),r=Math.floor(t/19)%19,s=t%19;return[rp((n-9)/9,2)*e,rp((r-9)/9,2)*e,rp((s-9)/9,2)*e]},XO=(t,e,n,r)=>{KO(t),r=r|1;let s=Ra(t[0]),i=Math.floor(s/9)+1,o=s%9+1,a=(Ra(t[1])+1)/166,l=new Array(o*i);for(let f=0;f<l.length;f++)if(f===0){let p=Ra(t.substring(2,6));l[f]=QO(p)}else{let p=Ra(t.substring(4+f*2,6+f*2));l[f]=GO(p,a*r)}let c=e*4,d=new Uint8ClampedArray(c*n);for(let f=0;f<n;f++)for(let p=0;p<e;p++){let m=0,g=0,y=0;for(let w=0;w<i;w++)for(let E=0;E<o;E++){let S=Math.cos(Math.PI*p*E/e)*Math.cos(Math.PI*f*w/n),b=l[E+w*o];m+=b[0]*S,g+=b[1]*S,y+=b[2]*S}let _=np(m),x=np(g),v=np(y);d[4*p+0+f*c]=_,d[4*p+1+f*c]=x,d[4*p+2+f*c]=v,d[4*p+3+f*c]=255}return d},YO=XO,JO=Object.defineProperty,ZO=Object.defineProperties,eL=Object.getOwnPropertyDescriptors,cd=Object.getOwnPropertySymbols,sb=Object.prototype.hasOwnProperty,ib=Object.prototype.propertyIsEnumerable,j1=(t,e,n)=>e in t?JO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Km=(t,e)=>{for(var n in e||(e={}))sb.call(e,n)&&j1(t,n,e[n]);if(cd)for(var n of cd(e))ib.call(e,n)&&j1(t,n,e[n]);return t},Qm=(t,e)=>ZO(t,eL(e)),ob=(t,e)=>{var n={};for(var r in t)sb.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&cd)for(var r of cd(t))e.indexOf(r)<0&&ib.call(t,r)&&(n[r]=t[r]);return n},ab=class extends h.PureComponent{constructor(){super(...arguments),this.canvas=null,this.handleRef=e=>{this.canvas=e,this.draw()},this.draw=()=>{let{hash:e,height:n,punch:r,width:s}=this.props;if(this.canvas){let i=YO(e,s,n,r),o=this.canvas.getContext("2d"),a=o.createImageData(s,n);a.data.set(i),o.putImageData(a,0,0)}}}componentDidUpdate(){this.draw()}render(){let e=this.props,{hash:n,height:r,width:s}=e,i=ob(e,["hash","height","width"]);return h.createElement("canvas",Qm(Km({},i),{height:r,width:s,ref:this.handleRef}))}};ab.defaultProps={height:128,width:128};var tL={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},lb=class extends h.PureComponent{componentDidUpdate(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")}render(){let e=this.props,{hash:n,height:r,width:s,punch:i,resolutionX:o,resolutionY:a,style:l}=e,c=ob(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return h.createElement("div",Qm(Km({},c),{style:Qm(Km({display:"inline-block",height:r,width:s},l),{position:"relative"})}),h.createElement(ab,{hash:n,height:a,width:o,punch:i,style:tL}))}};lb.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32};const nL="/HD-MP3/assets/logo-17dffbdd.png";function Or({src:t,classNames:e,blurHashEncode:n,onError:r}){const[s,i]=h.useState(!1),o=h.useRef(null),a=()=>{i(!0),t&&t!=null&&t.includes("blob")&&URL.revokeObjectURL(t)},l=()=>{const d=o.current;d.src="https://placehold.co/100",i(!0)},c=()=>{r?(r(),l()):l()};return u.jsxs(u.Fragment,{children:[!s&&u.jsx(u.Fragment,{children:n?u.jsx(lb,{hash:n,height:"100%",width:"100%"}):u.jsx(Be,{className:"w-full h-0"})}),u.jsx("img",{onLoad:a,onError:c,className:`${e||""} w-full ${s?"":"hidden"}`,src:t||nL,ref:o})]})}const rL=({className:t,onClick:e,theme:n})=>u.jsx("div",{className:`w-full rounded-[8px] border ${n.type==="light"?"border-[#333]":"border-[#fff]"} relative`,children:u.jsx("div",{onClick:()=>e(),className:`${n==null?void 0:n.content_hover_text} ${t} cursor-pointer`,children:u.jsx(G,{className:`absolute top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ${n.type==="light"?"text-[#333]":"text-[#fff]"}`,children:u.jsx(sd,{className:"w-[40px] max-[549px]:w-[30px]"})})})}),sL=vT("",{variants:{variant:{default:"py-[20px] px-[14px]",thin:"p-[6px]"}},defaultVariants:{variant:"default"}});function Ri({children:t,theme:e,className:n,color:r="container",variant:s}){const i={black:"bg-[#292929]",container:e.container,sidebar:e.side_bar_bg};return u.jsx("div",{className:`wrapper rounded-[6px]  ${e.type==="light"?"text-[#333]":"text-white"} ${i[r]} border-[1px] border-${e.alpha} ${sL({variant:s,className:n})}`,children:t})}function lo({className:t,icon:e,label:n,to:r,arrowIcon:s,children:i,onClick:o}){return r?u.jsxs(ds,{className:"w-full flex flex-row justify-between items-center "+t,to:r,children:[u.jsxs("div",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]}),i,s&&u.jsx("span",{children:s})]}):o?u.jsx("button",{onClick:o,className:"w-full flex flex-row justify-between items-center "+t,children:u.jsxs("p",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]})}):u.jsx("p",{children:"No onClick"})}const i0={userSongs:[],userPlaylists:[],adminSongs:[],adminPlaylists:[],initial:!1},iL=(t,e)=>{switch(e.type){case 8:{const n=e.payload;return{...t,...n,initial:!0}}case 2:{const{songs:n}=e.payload,r=[...t.userSongs,...n];return console.log("add user songs check",n),{...t,userSongs:r}}case 3:{const{song:n}=e.payload,r=[...t.userSongs],s=r.findIndex(i=>i.id===n.id);return s===-1?t:(r[s]=n,{...t,userSongs:r})}case 4:{const{playlist:n}=e.payload;return{...t,userPlaylists:[...t.userPlaylists,n]}}case 5:{const{playlist:n}=e.payload,r=[...t.userPlaylists],s=r.findIndex(i=>i.id===n.id);return s===-1?t:(r[s]=n,{...t,userPlaylists:r})}case 9:return i0;case 0:{const{songs:n}=e.payload;return{...t,userSongs:n}}case 6:{const{playlists:n}=e.payload;return{...t,userPlaylists:n}}default:return t}},oL=()=>{const[t,e]=h.useReducer(iL,i0),n=h.useCallback(d=>e({type:0,payload:{songs:d}}),[]),r=h.useCallback(d=>e({type:2,payload:{songs:d}}),[]),s=h.useCallback(d=>e({type:3,payload:{song:d}}),[]),i=h.useCallback(d=>e({type:4,payload:{playlist:d}}),[]),o=h.useCallback(d=>e({type:6,payload:{playlists:d}}),[]),a=h.useCallback(d=>e({type:5,payload:{playlist:d}}),[]),l=h.useCallback(()=>e({type:9}),[]),c=h.useCallback(d=>e({type:8,payload:d}),[]);return{state:t,resetSongPlaylistStore:l,setUserSongs:n,addUserSongs:r,addUserPlaylist:i,updateUserSong:s,updateUserPlaylist:a,initSongsContext:c,setUserPlaylists:o}},aL={state:i0,initSongsContext:()=>{},addUserPlaylist:()=>{},addUserSongs:()=>{},resetSongPlaylistStore:()=>{},setUserSongs:()=>{},updateUserPlaylist:()=>{},updateUserSong:()=>{},setUserPlaylists:()=>{}},cb=h.createContext(aL),lL=({children:t})=>u.jsx(cb.Provider,{value:oL(),children:t}),Ge=()=>{const{state:{...t},...e}=h.useContext(cb);return{...t,...e}};function cL({data:t,theme:e,selectedSongs:n,active:r,onClick:s,isChecked:i,setSelectedSongs:o,setIsChecked:a,inProcess:l},c){const d=h.useCallback(()=>n?(n==null?void 0:n.indexOf(t))!=-1:!1,[n]),f=m=>{!o||!n||!a||i!==void 0&&eb(m,i,a,n,o)},p={button:`${e.content_bg} rounded-full`,songListButton:"mr-[10px] px-[5px]",itemContainer:`hover:bg-${e.alpha} item-container cursor-pointer transition-opacity duration-[.3s] border-b last:border-none border-${e.alpha} flex rounded-[4px] justify-between w-[100%] p-[10px] ${d()&&"bg-"+e.alpha}`,imageFrame:"w-[54px] h-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]"};return u.jsx(u.Fragment,{children:u.jsx("div",{ref:c,className:`${p.itemContainer} ${l?"pointer-events-none":""}`,children:u.jsxs("div",{className:"flex flex-row w-[100%]",children:[!l&&u.jsx(u.Fragment,{children:i?u.jsx("button",{onClick:()=>f(t),className:`${p.songListButton} text-[inherit]`,children:d()?u.jsx(ao,{className:"w-[18px]"}):u.jsx(gl,{className:"w-[18px]"})}):u.jsx("button",{onClick:()=>f(t),className:`${p.songListButton} block`,children:u.jsx(gl,{className:"w-[18px] "})})}),u.jsxs("div",{className:"flex-grow flex",onClick:m=>i?f(t):s(m),children:[u.jsxs("div",{className:`${p.imageFrame} ${l?"ml-[28px]":""} `,children:[u.jsx(Or,{blurHashEncode:t.blurhash_encode,src:t.image_url}),r&&u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex songContainers-center items-center justify-center",children:u.jsx(ch,{className:"w-[28px] text-[#fff]"})})]}),u.jsxs("div",{className:`ml-[10px] ${l?"opacity-60":""}`,children:[u.jsx("h5",{className:`text-mg line-clamp-1 ${r&&e.content_text}`,children:t.name}),u.jsx("p",{className:"text-xs opacity-60 bg-blend-lighten line-clamp-1",children:t.singer})]}),l&&u.jsxs("p",{className:"ml-auto self-center flex",children:[u.jsx(br,{className:"w-[20px] animate-spin mr-[4px]"}),"in process..."]})]})]})})})}const ub=h.forwardRef(cL);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},uL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},hb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[d],n[f],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(db(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):uL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new dL;const p=i<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),f!==64){const g=c<<6&192|f;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class dL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hL=function(t){const e=db(t);return hb.encodeByteArray(e,!0)},ud=function(t){return hL(t).replace(/\./g,"")},fb=function(t){try{return hb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=()=>fL().__FIREBASE_DEFAULTS__,mL=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},gL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&fb(t[1]);return e&&JSON.parse(e)},gh=()=>{try{return pL()||mL()||gL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},pb=t=>{var e,n;return(n=(e=gh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},mb=t=>{const e=pb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},gb=()=>{var t;return(t=gh())===null||t===void 0?void 0:t.config},yb=t=>{var e;return(e=gh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[ud(JSON.stringify(n)),ud(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function xL(){var t;const e=(t=gh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _L(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function EL(){const t=Ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function SL(){try{return typeof indexedDB=="object"}catch{return!1}}function TL(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL="FirebaseError";class lr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=bL,Object.setPrototypeOf(this,lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xl.prototype.create)}}class Xl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?IL(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new lr(s,a,r)}}function IL(t,e){return t.replace(RL,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const RL=/\{\$([^}]+)}/g;function AL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function dd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(O1(i)&&O1(o)){if(!dd(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function O1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function CL(t,e){const n=new kL(t,e);return n.subscribe.bind(n)}class kL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");PL(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=sp),s.error===void 0&&(s.error=sp),s.complete===void 0&&(s.complete=sp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function sp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){return t&&t._delegate?t._delegate:t}class xs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NL=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new yL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OL(e))try{this.getOrInitializeService({instanceIdentifier:Hs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hs){return this.instances.has(e)}getOptions(e=Hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hs){return this.component?this.component.multipleInstances?e:Hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function jL(t){return t===Hs?void 0:t}function OL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new NL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const DL={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},ML=pe.INFO,$L={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},FL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=$L[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class o0{constructor(e){this.name=e,this._logLevel=ML,this._logHandler=FL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const VL=(t,e)=>e.some(n=>t instanceof n);let L1,D1;function UL(){return L1||(L1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BL(){return D1||(D1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xb=new WeakMap,Gm=new WeakMap,wb=new WeakMap,ip=new WeakMap,a0=new WeakMap;function zL(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(hs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&xb.set(n,t)}).catch(()=>{}),a0.set(e,t),e}function WL(t){if(Gm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Gm.set(t,e)}let Xm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function HL(t){Xm=t(Xm)}function qL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(op(this),e,...n);return wb.set(r,e.sort?e.sort():[e]),hs(r)}:BL().includes(t)?function(...e){return t.apply(op(this),e),hs(xb.get(this))}:function(...e){return hs(t.apply(op(this),e))}}function KL(t){return typeof t=="function"?qL(t):(t instanceof IDBTransaction&&WL(t),VL(t,UL())?new Proxy(t,Xm):t)}function hs(t){if(t instanceof IDBRequest)return zL(t);if(ip.has(t))return ip.get(t);const e=KL(t);return e!==t&&(ip.set(t,e),a0.set(e,t)),e}const op=t=>a0.get(t);function QL(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=hs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(hs(o.result),l.oldVersion,l.newVersion,hs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const GL=["get","getKey","getAll","getAllKeys","count"],XL=["put","add","delete","clear"],ap=new Map;function M1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ap.get(e))return ap.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=XL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||GL.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return ap.set(e,i),i}HL(t=>({...t,get:(e,n,r)=>M1(e,n)||t.get(e,n,r),has:(e,n)=>!!M1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(JL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function JL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ym="@firebase/app",$1="0.9.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=new o0("@firebase/app"),ZL="@firebase/app-compat",e3="@firebase/analytics-compat",t3="@firebase/analytics",n3="@firebase/app-check-compat",r3="@firebase/app-check",s3="@firebase/auth",i3="@firebase/auth-compat",o3="@firebase/database",a3="@firebase/database-compat",l3="@firebase/functions",c3="@firebase/functions-compat",u3="@firebase/installations",d3="@firebase/installations-compat",h3="@firebase/messaging",f3="@firebase/messaging-compat",p3="@firebase/performance",m3="@firebase/performance-compat",g3="@firebase/remote-config",y3="@firebase/remote-config-compat",v3="@firebase/storage",x3="@firebase/storage-compat",w3="@firebase/firestore",_3="@firebase/firestore-compat",E3="firebase",S3="10.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="[DEFAULT]",T3={[Ym]:"fire-core",[ZL]:"fire-core-compat",[t3]:"fire-analytics",[e3]:"fire-analytics-compat",[r3]:"fire-app-check",[n3]:"fire-app-check-compat",[s3]:"fire-auth",[i3]:"fire-auth-compat",[o3]:"fire-rtdb",[a3]:"fire-rtdb-compat",[l3]:"fire-fn",[c3]:"fire-fn-compat",[u3]:"fire-iid",[d3]:"fire-iid-compat",[h3]:"fire-fcm",[f3]:"fire-fcm-compat",[p3]:"fire-perf",[m3]:"fire-perf-compat",[g3]:"fire-rc",[y3]:"fire-rc-compat",[v3]:"fire-gcs",[x3]:"fire-gcs-compat",[w3]:"fire-fst",[_3]:"fire-fst-compat","fire-js":"fire-js",[E3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd=new Map,Zm=new Map;function b3(t,e){try{t.container.addComponent(e)}catch(n){hi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fi(t){const e=t.name;if(Zm.has(e))return hi.debug(`There were multiple attempts to register component ${e}.`),!1;Zm.set(e,t);for(const n of hd.values())b3(n,t);return!0}function yh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},fs=new Xl("app","Firebase",I3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=S3;function _b(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Jm,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw fs.create("bad-app-name",{appName:String(s)});if(n||(n=gb()),!n)throw fs.create("no-options");const i=hd.get(s);if(i){if(dd(n,i.options)&&dd(r,i.config))return i;throw fs.create("duplicate-app",{appName:s})}const o=new LL(s);for(const l of Zm.values())o.addComponent(l);const a=new R3(n,r,o);return hd.set(s,a),a}function l0(t=Jm){const e=hd.get(t);if(!e&&t===Jm&&gb())return _b();if(!e)throw fs.create("no-app",{appName:t});return e}function Yn(t,e,n){var r;let s=(r=T3[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hi.warn(a.join(" "));return}fi(new xs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3="firebase-heartbeat-database",C3=1,vl="firebase-heartbeat-store";let lp=null;function Eb(){return lp||(lp=QL(A3,C3,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(vl)}}}).catch(t=>{throw fs.create("idb-open",{originalErrorMessage:t.message})})),lp}async function k3(t){try{return await(await Eb()).transaction(vl).objectStore(vl).get(Sb(t))}catch(e){if(e instanceof lr)hi.warn(e.message);else{const n=fs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hi.warn(n.message)}}}async function F1(t,e){try{const r=(await Eb()).transaction(vl,"readwrite");await r.objectStore(vl).put(e,Sb(t)),await r.done}catch(n){if(n instanceof lr)hi.warn(n.message);else{const r=fs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});hi.warn(r.message)}}}function Sb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3=1024,N3=30*24*60*60*1e3;class j3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new L3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=V1();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=N3}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=V1(),{heartbeatsToSend:n,unsentEntries:r}=O3(this._heartbeatsCache.heartbeats),s=ud(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function V1(){return new Date().toISOString().substring(0,10)}function O3(t,e=P3){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),U1(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),U1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class L3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SL()?TL().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await k3(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return F1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return F1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function U1(t){return ud(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D3(t){fi(new xs("platform-logger",e=>new YL(e),"PRIVATE")),fi(new xs("heartbeat",e=>new j3(e),"PRIVATE")),Yn(Ym,$1,t),Yn(Ym,$1,"esm2017"),Yn("fire-js","")}D3("");function c0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Tb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const M3=Tb,bb=new Xl("auth","Firebase",Tb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=new o0("@firebase/auth");function $3(t,...e){fd.logLevel<=pe.WARN&&fd.warn(`Auth (${Ai}): ${t}`,...e)}function Eu(t,...e){fd.logLevel<=pe.ERROR&&fd.error(`Auth (${Ai}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(t,...e){throw u0(t,...e)}function Jn(t,...e){return u0(t,...e)}function Ib(t,e,n){const r=Object.assign(Object.assign({},M3()),{[e]:n});return new Xl("auth","Firebase",r).create(e,{appName:t.name})}function F3(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&rr(t,"argument-error"),Ib(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function u0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return bb.create(t,...e)}function ie(t,e,...n){if(!t)throw u0(e,...n)}function fr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Eu(e),new Error(e)}function Ir(t,e){t||fr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function V3(){return B1()==="http:"||B1()==="https:"}function B1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(V3()||wL()||"connection"in navigator)?navigator.onLine:!0}function B3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ir(n>e,"Short delay should be less than long delay!"),this.isMobile=vL()||_L()}get(){return U3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(t,e){Ir(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3=new Jl(3e4,6e4);function Ab(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Zl(t,e,n,r,s={}){return Cb(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Yl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),Rb.fetch()(kb(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function Cb(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},z3),e);try{const s=new q3(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Wc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Wc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Wc(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Ib(t,d,c);rr(t,d)}}catch(s){if(s instanceof lr)throw s;rr(t,"network-request-failed",{message:String(s)})}}async function H3(t,e,n,r,s={}){const i=await Zl(t,e,n,r,s);return"mfaPendingCredential"in i&&rr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function kb(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?d0(t.config,s):`${t.config.apiScheme}://${s}`}class q3{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Jn(this.auth,"network-request-failed")),W3.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Jn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K3(t,e){return Zl(t,"POST","/v1/accounts:delete",e)}async function Q3(t,e){return Zl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function G3(t,e=!1){const n=it(t),r=await n.getIdToken(e),s=h0(r);ie(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:za(cp(s.auth_time)),issuedAtTime:za(cp(s.iat)),expirationTime:za(cp(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function cp(t){return Number(t)*1e3}function h0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Eu("JWT malformed, contained fewer than 3 sections"),null;try{const s=fb(n);return s?JSON.parse(s):(Eu("Failed to decode base64 JWT payload"),null)}catch(s){return Eu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function X3(t){const e=h0(t);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof lr&&Y3(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Y3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=za(this.lastLoginAt),this.creationTime=za(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pd(t){var e;const n=t.auth,r=await t.getIdToken(),s=await xl(t,Q3(n,{idToken:r}));ie(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?tD(i.providerUserInfo):[],a=eD(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Pb(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function Z3(t){const e=it(t);await pd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eD(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function tD(t){return t.map(e=>{var{providerId:n}=e,r=c0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nD(t,e){const n=await Cb(t,{},async()=>{const r=Yl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=kb(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Rb.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):X3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ie(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await nD(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new wl;return r&&(ie(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ie(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ie(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wl,this.toJSON())}_performRefresh(){return fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(t,e){ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ri{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=c0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new J3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Pb(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await xl(this,this.stsTokenManager.getToken(this.auth,e));return ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return G3(this,e)}reload(){return Z3(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ri(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await pd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await xl(this,K3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:E,isAnonymous:S,providerData:b,stsTokenManager:T}=n;ie(w&&T,e,"internal-error");const I=wl.fromJSON(this.name,T);ie(typeof w=="string",e,"internal-error"),Ur(f,e.name),Ur(p,e.name),ie(typeof E=="boolean",e,"internal-error"),ie(typeof S=="boolean",e,"internal-error"),Ur(m,e.name),Ur(g,e.name),Ur(y,e.name),Ur(_,e.name),Ur(x,e.name),Ur(v,e.name);const A=new ri({uid:w,auth:e,email:p,emailVerified:E,displayName:f,isAnonymous:S,photoURL:g,phoneNumber:m,tenantId:y,stsTokenManager:I,createdAt:x,lastLoginAt:v});return b&&Array.isArray(b)&&(A.providerData=b.map(C=>Object.assign({},C))),_&&(A._redirectEventId=_),A}static async _fromIdTokenResponse(e,n,r=!1){const s=new wl;s.updateFromServerResponse(n);const i=new ri({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await pd(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=new Map;function pr(t){Ir(t instanceof Function,"Expected a class definition");let e=z1.get(t);return e?(Ir(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,z1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Nb.type="NONE";const W1=Nb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(t,e,n){return`firebase:${t}:${e}:${n}`}class co{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Su(this.userKey,s.apiKey,i),this.fullPersistenceKey=Su("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ri._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new co(pr(W1),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||pr(W1);const o=Su(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const f=ri._fromJSON(e,d);c!==i&&(a=f),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new co(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new co(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Lb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Mb(e))return"Blackberry";if($b(e))return"Webos";if(f0(e))return"Safari";if((e.includes("chrome/")||Ob(e))&&!e.includes("edge/"))return"Chrome";if(Db(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function jb(t=Ot()){return/firefox\//i.test(t)}function f0(t=Ot()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ob(t=Ot()){return/crios\//i.test(t)}function Lb(t=Ot()){return/iemobile/i.test(t)}function Db(t=Ot()){return/android/i.test(t)}function Mb(t=Ot()){return/blackberry/i.test(t)}function $b(t=Ot()){return/webos/i.test(t)}function vh(t=Ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rD(t=Ot()){var e;return vh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function sD(){return EL()&&document.documentMode===10}function Fb(t=Ot()){return vh(t)||Db(t)||$b(t)||Mb(t)||/windows phone/i.test(t)||Lb(t)}function iD(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t,e=[]){let n;switch(t){case"Browser":n=H1(Ot());break;case"Worker":n=`${H1(Ot())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ai}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aD(t,e={}){return Zl(t,"GET","/v2/passwordPolicy",Ab(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=6;class cD{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:lD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new q1(this),this.idTokenSubscription=new q1(this),this.beforeStateQueue=new oD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=pr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await co.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await pd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=B3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?it(e):null;return n&&ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aD(this),n=new cD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&pr(e)||this._popupRedirectResolver;ie(n,this,"argument-error"),this.redirectPersistenceManager=await co.create(this,[pr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Vb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&$3(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function xh(t){return it(t)}class q1{constructor(e){this.auth=e,this.observer=null,this.addObserver=CL(n=>this.observer=n)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function hD(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Jn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",dD().appendChild(r)})}function fD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(t,e){const n=yh(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(dd(i,e??{}))return s;rr(s,"already-initialized")}return n.initialize({options:e})}function mD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(pr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function gD(t,e,n){const r=xh(t);ie(r._canInitEmulator,r,"emulator-config-failed"),ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=Ub(e),{host:o,port:a}=yD(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||vD()}function Ub(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yD(t){const e=Ub(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:K1(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:K1(o)}}}function K1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function vD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return fr("not implemented")}_getIdTokenResponse(e){return fr("not implemented")}_linkToIdToken(e,n){return fr("not implemented")}_getReauthenticationResolver(e){return fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(t,e){return H3(t,"POST","/v1/accounts:signInWithIdp",Ab(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD="http://localhost";class pi extends Bb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new pi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):rr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=c0(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new pi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return uo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,uo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,uo(e,n)}buildRequest(){const e={requestUri:xD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec extends p0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends ec{constructor(){super("facebook.com")}static credential(e){return pi._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kr.credential(e.oauthAccessToken)}catch{return null}}}Kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Kr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn extends ec{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return pi._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return zn.credential(n,r)}catch{return null}}}zn.GOOGLE_SIGN_IN_METHOD="google.com";zn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends ec{constructor(){super("github.com")}static credential(e){return pi._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qr.credential(e.oauthAccessToken)}catch{return null}}}Qr.GITHUB_SIGN_IN_METHOD="github.com";Qr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends ec{constructor(){super("twitter.com")}static credential(e,n){return pi._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Gr.credential(n,r)}catch{return null}}}Gr.TWITTER_SIGN_IN_METHOD="twitter.com";Gr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ri._fromIdTokenResponse(e,r,s),o=Q1(r);return new ko({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Q1(r);return new ko({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Q1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md extends lr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,md.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new md(e,n,r,s)}}function zb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?md._fromErrorAndOperation(t,i,e,r):i})}async function wD(t,e,n=!1){const r=await xl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ko._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _D(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await xl(t,zb(r,s,e,t),n);ie(i.idToken,r,"internal-error");const o=h0(i.idToken);ie(o,r,"internal-error");const{sub:a}=o;return ie(t.uid===a,r,"user-mismatch"),ko._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&rr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ED(t,e,n=!1){const r="signIn",s=await zb(t,r,e),i=await ko._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function SD(t,e,n,r){return it(t).onIdTokenChanged(e,n,r)}function TD(t,e,n){return it(t).beforeAuthStateChanged(e,n)}function bD(t,e,n,r){return it(t).onAuthStateChanged(e,n,r)}function Wb(t){return it(t).signOut()}const gd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(gd,"1"),this.storage.removeItem(gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(){const t=Ot();return f0(t)||vh(t)}const RD=1e3,AD=10;class qb extends Hb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=ID()&&iD(),this.fallbackToPolling=Fb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);sD()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,AD):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},RD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}qb.type="LOCAL";const CD=qb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb extends Hb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Kb.type="SESSION";const Qb=Kb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new wh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await kD(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=m0("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(){return window}function ND(t){Zn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(){return typeof Zn().WorkerGlobalScope<"u"&&typeof Zn().importScripts=="function"}async function jD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function LD(){return Gb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="firebaseLocalStorageDb",DD=1,yd="firebaseLocalStorage",Yb="fbase_key";class tc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _h(t,e){return t.transaction([yd],e?"readwrite":"readonly").objectStore(yd)}function MD(){const t=indexedDB.deleteDatabase(Xb);return new tc(t).toPromise()}function tg(){const t=indexedDB.open(Xb,DD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(yd,{keyPath:Yb})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(yd)?e(r):(r.close(),await MD(),e(await tg()))})})}async function G1(t,e,n){const r=_h(t,!0).put({[Yb]:e,value:n});return new tc(r).toPromise()}async function $D(t,e){const n=_h(t,!1).get(e),r=await new tc(n).toPromise();return r===void 0?null:r.value}function X1(t,e){const n=_h(t,!0).delete(e);return new tc(n).toPromise()}const FD=800,VD=3;class Jb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>VD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Gb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wh._getInstance(LD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await jD(),!this.activeServiceWorker)return;this.sender=new PD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tg();return await G1(e,gd,"1"),await X1(e,gd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>G1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$D(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>X1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=_h(s,!1).getAll();return new tc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Jb.type="LOCAL";const UD=Jb;new Jl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(t,e){return e?pr(e):(ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0 extends Bb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return uo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return uo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BD(t){return ED(t.auth,new g0(t),t.bypassAuthState)}function zD(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),_D(n,new g0(t),t.bypassAuthState)}async function WD(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),wD(n,new g0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BD;case"linkViaPopup":case"linkViaRedirect":return WD;case"reauthViaPopup":case"reauthViaRedirect":return zD;default:rr(this.auth,"internal-error")}}resolve(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=new Jl(2e3,1e4);async function qD(t,e,n){const r=xh(t);F3(t,e,p0);const s=Zb(r,n);return new Ys(r,"signInViaPopup",e,s).executeNotNull()}class Ys extends eI{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ys.currentPopupAction&&Ys.currentPopupAction.cancel(),Ys.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ie(e,this.auth,"internal-error"),e}async onExecution(){Ir(this.filter.length===1,"Popup operations only handle one event");const e=m0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ys.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HD.get())};e()}}Ys.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD="pendingRedirect",Tu=new Map;class QD extends eI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Tu.get(this.auth._key());if(!e){try{const r=await GD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Tu.set(this.auth._key(),e)}return this.bypassAuthState||Tu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GD(t,e){const n=JD(e),r=YD(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function XD(t,e){Tu.set(t._key(),e)}function YD(t){return pr(t._redirectPersistence)}function JD(t){return Su(KD,t.config.apiKey,t.name)}async function ZD(t,e,n=!1){const r=xh(t),s=Zb(r,e),o=await new QD(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=10*60*1e3;class tM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!tI(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Jn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Y1(e))}saveEventToCache(e){this.cachedEventUids.add(Y1(e)),this.lastProcessedEventTime=Date.now()}}function Y1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function nM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(t,e={}){return Zl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iM=/^https?/;async function oM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await rM(t);for(const n of e)try{if(aM(n))return}catch{}rr(t,"unauthorized-domain")}function aM(t){const e=eg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!iM.test(n))return!1;if(sM.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=new Jl(3e4,6e4);function J1(){const t=Zn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cM(t){return new Promise((e,n)=>{var r,s,i;function o(){J1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{J1(),n(Jn(t,"network-request-failed"))},timeout:lM.get()})}if(!((s=(r=Zn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Zn().gapi)===null||i===void 0)&&i.load)o();else{const a=fD("iframefcb");return Zn()[a]=()=>{gapi.load?o():n(Jn(t,"network-request-failed"))},hD(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw bu=null,e})}let bu=null;function uM(t){return bu=bu||cM(t),bu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=new Jl(5e3,15e3),hM="__/auth/iframe",fM="emulator/auth/iframe",pM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gM(t){const e=t.config;ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?d0(e,fM):`https://${t.config.authDomain}/${hM}`,r={apiKey:e.apiKey,appName:t.name,v:Ai},s=mM.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Yl(r).slice(1)}`}async function yM(t){const e=await uM(t),n=Zn().gapi;return ie(n,t,"internal-error"),e.open({where:document.body,url:gM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pM,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Jn(t,"network-request-failed"),a=Zn().setTimeout(()=>{i(o)},dM.get());function l(){Zn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xM=500,wM=600,_M="_blank",EM="http://localhost";class Z1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SM(t,e,n,r=xM,s=wM){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},vM),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Ot().toLowerCase();n&&(a=Ob(c)?_M:n),jb(c)&&(e=e||EM,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[m,g])=>`${p}${m}=${g},`,"");if(rD(c)&&a!=="_self")return TM(e||"",a),new Z1(null);const f=window.open(e||"",a,d);ie(f,t,"popup-blocked");try{f.focus()}catch{}return new Z1(f)}function TM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM="__/auth/handler",IM="emulator/auth/handler",RM=encodeURIComponent("fac");async function ew(t,e,n,r,s,i){ie(t.config.authDomain,t,"auth-domain-config-required"),ie(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ai,eventId:s};if(e instanceof p0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",AL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries(i||{}))o[d]=f}if(e instanceof ec){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${RM}=${encodeURIComponent(l)}`:"";return`${AM(t)}?${Yl(a).slice(1)}${c}`}function AM({config:t}){return t.emulator?d0(t,IM):`https://${t.authDomain}/${bM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="webStorageSupport";class CM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qb,this._completeRedirectFn=ZD,this._overrideRedirectResult=XD}async _openPopup(e,n,r,s){var i;Ir((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await ew(e,n,r,eg(),s);return SM(e,o,m0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await ew(e,n,r,eg(),s);return ND(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ir(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await yM(e),r=new tM(e);return n.register("authEvent",s=>(ie(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(up,{type:up},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[up];o!==void 0&&n(!!o),rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Fb()||f0()||vh()}}const kM=CM;var tw="@firebase/auth",nw="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function jM(t){fi(new xs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ie(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vb(t)},c=new uD(r,s,i,l);return mD(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),fi(new xs("auth-internal",e=>{const n=xh(e.getProvider("auth").getImmediate());return(r=>new PM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yn(tw,nw,NM(t)),Yn(tw,nw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM=5*60,LM=yb("authIdTokenMaxAge")||OM;let rw=null;const DM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>LM)return;const s=n==null?void 0:n.token;rw!==s&&(rw=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function MM(t=l0()){const e=yh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=pD(t,{popupRedirectResolver:kM,persistence:[UD,CD,Qb]}),r=yb("authTokenSyncURL");if(r){const i=DM(r);TD(n,i,()=>i(n.currentUser)),SD(n,o=>i(o))}const s=pb("auth");return s&&gD(n,`http://${s}`),n}jM("Browser");var $M="firebase",FM="10.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn($M,FM,"app");var VM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},U,y0=y0||{},re=VM||self;function Eh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function nc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function UM(t){return Object.prototype.hasOwnProperty.call(t,dp)&&t[dp]||(t[dp]=++BM)}var dp="closure_uid_"+(1e9*Math.random()>>>0),BM=0;function zM(t,e,n){return t.call.apply(t.bind,arguments)}function WM(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function kt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?kt=zM:kt=WM,kt.apply(null,arguments)}function Hc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function ut(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function js(){this.s=this.s,this.o=this.o}var HM=0;js.prototype.s=!1;js.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),HM!=0)&&UM(this)};js.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const nI=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function v0(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function sw(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Eh(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function Pt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Pt.prototype.h=function(){this.defaultPrevented=!0};var qM=function(){if(!re.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{re.addEventListener("test",()=>{},e),re.removeEventListener("test",()=>{},e)}catch{}return t}();function _l(t){return/^[\s\xa0]*$/.test(t)}function Sh(){var t=re.navigator;return t&&(t=t.userAgent)?t:""}function Wn(t){return Sh().indexOf(t)!=-1}function x0(t){return x0[" "](t),t}x0[" "]=function(){};function KM(t,e){var n=F$;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var QM=Wn("Opera"),Po=Wn("Trident")||Wn("MSIE"),rI=Wn("Edge"),ng=rI||Po,sI=Wn("Gecko")&&!(Sh().toLowerCase().indexOf("webkit")!=-1&&!Wn("Edge"))&&!(Wn("Trident")||Wn("MSIE"))&&!Wn("Edge"),GM=Sh().toLowerCase().indexOf("webkit")!=-1&&!Wn("Edge");function iI(){var t=re.document;return t?t.documentMode:void 0}var rg;e:{var hp="",fp=function(){var t=Sh();if(sI)return/rv:([^\);]+)(\)|;)/.exec(t);if(rI)return/Edge\/([\d\.]+)/.exec(t);if(Po)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(GM)return/WebKit\/(\S+)/.exec(t);if(QM)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(fp&&(hp=fp?fp[1]:""),Po){var pp=iI();if(pp!=null&&pp>parseFloat(hp)){rg=String(pp);break e}}rg=hp}var sg;if(re.document&&Po){var iw=iI();sg=iw||parseInt(rg,10)||void 0}else sg=void 0;var XM=sg;function El(t,e){if(Pt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(sI){e:{try{x0(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:YM[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&El.$.h.call(this)}}ut(El,Pt);var YM={2:"touch",3:"pen",4:"mouse"};El.prototype.h=function(){El.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var rc="closure_listenable_"+(1e6*Math.random()|0),JM=0;function ZM(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++JM,this.fa=this.ia=!1}function Th(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function w0(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function e$(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function oI(t){const e={};for(const n in t)e[n]=t[n];return e}const ow="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function aI(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<ow.length;i++)n=ow[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bh(t){this.src=t,this.g={},this.h=0}bh.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=og(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new ZM(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function ig(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=nI(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Th(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function og(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var _0="closure_lm_"+(1e6*Math.random()|0),mp={};function lI(t,e,n,r,s){if(r&&r.once)return uI(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)lI(t,e[i],n,r,s);return null}return n=T0(n),t&&t[rc]?t.O(e,n,nc(r)?!!r.capture:!!r,s):cI(t,e,n,!1,r,s)}function cI(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=nc(s)?!!s.capture:!!s,a=S0(t);if(a||(t[_0]=a=new bh(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=t$(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)qM||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(hI(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function t$(){function t(n){return e.call(t.src,t.listener,n)}const e=n$;return t}function uI(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)uI(t,e[i],n,r,s);return null}return n=T0(n),t&&t[rc]?t.P(e,n,nc(r)?!!r.capture:!!r,s):cI(t,e,n,!0,r,s)}function dI(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)dI(t,e[i],n,r,s);else r=nc(r)?!!r.capture:!!r,n=T0(n),t&&t[rc]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=og(i,n,r,s),-1<n&&(Th(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=S0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=og(e,n,r,s)),(n=-1<t?e[t]:null)&&E0(n))}function E0(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[rc])ig(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(hI(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=S0(e))?(ig(n,t),n.h==0&&(n.src=null,e[_0]=null)):Th(t)}}}function hI(t){return t in mp?mp[t]:mp[t]="on"+t}function n$(t,e){if(t.fa)t=!0;else{e=new El(e,this);var n=t.listener,r=t.la||t.src;t.ia&&E0(t),t=n.call(r,e)}return t}function S0(t){return t=t[_0],t instanceof bh?t:null}var gp="__closure_events_fn_"+(1e9*Math.random()>>>0);function T0(t){return typeof t=="function"?t:(t[gp]||(t[gp]=function(e){return t.handleEvent(e)}),t[gp])}function ct(){js.call(this),this.i=new bh(this),this.S=this,this.J=null}ut(ct,js);ct.prototype[rc]=!0;ct.prototype.removeEventListener=function(t,e,n,r){dI(this,t,e,n,r)};function vt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Pt(e,t);else if(e instanceof Pt)e.target=e.target||t;else{var s=e;e=new Pt(r,t),aI(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=qc(o,r,!0,e)&&s}if(o=e.g=t,s=qc(o,r,!0,e)&&s,s=qc(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=qc(o,r,!1,e)&&s}ct.prototype.N=function(){if(ct.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Th(n[r]);delete t.g[e],t.h--}}this.J=null};ct.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ct.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function qc(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&ig(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var b0=re.JSON.stringify;class r${constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function s$(){var t=I0;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class i${constructor(){this.h=this.g=null}add(e,n){const r=fI.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var fI=new r$(()=>new o$,t=>t.reset());class o${constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function a$(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function l$(t){re.setTimeout(()=>{throw t},0)}let Sl,Tl=!1,I0=new i$,pI=()=>{const t=re.Promise.resolve(void 0);Sl=()=>{t.then(c$)}};var c$=()=>{for(var t;t=s$();){try{t.h.call(t.g)}catch(n){l$(n)}var e=fI;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Tl=!1};function Ih(t,e){ct.call(this),this.h=t||1,this.g=e||re,this.j=kt(this.qb,this),this.l=Date.now()}ut(Ih,ct);U=Ih.prototype;U.ga=!1;U.T=null;U.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),vt(this,"tick"),this.ga&&(R0(this),this.start()))}};U.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function R0(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}U.N=function(){Ih.$.N.call(this),R0(this),delete this.g};function A0(t,e,n){if(typeof t=="function")n&&(t=kt(t,n));else if(t&&typeof t.handleEvent=="function")t=kt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:re.setTimeout(t,e||0)}function mI(t){t.g=A0(()=>{t.g=null,t.i&&(t.i=!1,mI(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class u$ extends js{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:mI(this)}N(){super.N(),this.g&&(re.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bl(t){js.call(this),this.h=t,this.g={}}ut(bl,js);var aw=[];function gI(t,e,n,r){Array.isArray(n)||(n&&(aw[0]=n.toString()),n=aw);for(var s=0;s<n.length;s++){var i=lI(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function yI(t){w0(t.g,function(e,n){this.g.hasOwnProperty(n)&&E0(e)},t),t.g={}}bl.prototype.N=function(){bl.$.N.call(this),yI(this)};bl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Rh(){this.g=!0}Rh.prototype.Ea=function(){this.g=!1};function d$(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var d=c[0];c=c[1];var f=d.split("_");o=2<=f.length&&f[1]=="type"?o+(d+"="+c+"&"):o+(d+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function h$(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function Zi(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+p$(t,n)+(r?" "+r:"")})}function f$(t,e){t.info(function(){return"TIMEOUT: "+e})}Rh.prototype.info=function(){};function p$(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return b0(n)}catch{return e}}var Ci={},lw=null;function Ah(){return lw=lw||new ct}Ci.Ta="serverreachability";function vI(t){Pt.call(this,Ci.Ta,t)}ut(vI,Pt);function Il(t){const e=Ah();vt(e,new vI(e))}Ci.STAT_EVENT="statevent";function xI(t,e){Pt.call(this,Ci.STAT_EVENT,t),this.stat=e}ut(xI,Pt);function Ft(t){const e=Ah();vt(e,new xI(e,t))}Ci.Ua="timingevent";function wI(t,e){Pt.call(this,Ci.Ua,t),this.size=e}ut(wI,Pt);function sc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return re.setTimeout(function(){t()},e)}var Ch={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},_I={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function C0(){}C0.prototype.h=null;function cw(t){return t.h||(t.h=t.i())}function EI(){}var ic={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function k0(){Pt.call(this,"d")}ut(k0,Pt);function P0(){Pt.call(this,"c")}ut(P0,Pt);var ag;function kh(){}ut(kh,C0);kh.prototype.g=function(){return new XMLHttpRequest};kh.prototype.i=function(){return{}};ag=new kh;function oc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new bl(this),this.P=m$,t=ng?125:void 0,this.V=new Ih(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new SI}function SI(){this.i=null,this.g="",this.h=!1}var m$=45e3,lg={},vd={};U=oc.prototype;U.setTimeout=function(t){this.P=t};function cg(t,e,n){t.L=1,t.v=Nh(Rr(e)),t.s=n,t.S=!0,TI(t,null)}function TI(t,e){t.G=Date.now(),ac(t),t.A=Rr(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),NI(n.i,"t",r),t.C=0,n=t.l.J,t.h=new SI,t.g=ZI(t.l,n?e:null,!t.s),0<t.O&&(t.M=new u$(kt(t.Pa,t,t.g),t.O)),gI(t.U,t.g,"readystatechange",t.nb),e=t.I?oI(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Il(),d$(t.j,t.u,t.A,t.m,t.W,t.s)}U.nb=function(t){t=t.target;const e=this.M;e&&qn(t)==3?e.l():this.Pa(t)};U.Pa=function(t){try{if(t==this.g)e:{const d=qn(this.g);var e=this.g.Ia();const f=this.g.da();if(!(3>d)&&(d!=3||ng||this.g&&(this.h.h||this.g.ja()||fw(this.g)))){this.J||d!=4||e==7||(e==8||0>=f?Il(3):Il(2)),Ph(this);var n=this.g.da();this.ca=n;t:if(bI(this)){var r=fw(this.g);t="";var s=r.length,i=qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Js(this),Wa(this);var o="";break t}this.h.i=new re.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,h$(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_l(a)){var c=a;break t}}c=null}if(n=c)Zi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ug(this,n);else{this.i=!1,this.o=3,Ft(12),Js(this),Wa(this);break e}}this.S?(II(this,d,o),ng&&this.i&&d==3&&(gI(this.U,this.V,"tick",this.mb),this.V.start())):(Zi(this.j,this.m,o,null),ug(this,o)),d==4&&Js(this),this.i&&!this.J&&(d==4?GI(this.l,this):(this.i=!1,ac(this)))}else D$(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Ft(12)):(this.o=0,Ft(13)),Js(this),Wa(this)}}}catch{}finally{}};function bI(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function II(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=g$(t,n),s==vd){e==4&&(t.o=4,Ft(14),r=!1),Zi(t.j,t.m,null,"[Incomplete Response]");break}else if(s==lg){t.o=4,Ft(15),Zi(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Zi(t.j,t.m,s,null),ug(t,s);bI(t)&&s!=vd&&s!=lg&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Ft(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),M0(e),e.M=!0,Ft(11))):(Zi(t.j,t.m,n,"[Invalid Chunked Response]"),Js(t),Wa(t))}U.mb=function(){if(this.g){var t=qn(this.g),e=this.g.ja();this.C<e.length&&(Ph(this),II(this,t,e),this.i&&t!=4&&ac(this))}};function g$(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?vd:(n=Number(e.substring(n,r)),isNaN(n)?lg:(r+=1,r+n>e.length?vd:(e=e.slice(r,r+n),t.C=r+n,e)))}U.cancel=function(){this.J=!0,Js(this)};function ac(t){t.Y=Date.now()+t.P,RI(t,t.P)}function RI(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=sc(kt(t.lb,t),e)}function Ph(t){t.B&&(re.clearTimeout(t.B),t.B=null)}U.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(f$(this.j,this.A),this.L!=2&&(Il(),Ft(17)),Js(this),this.o=2,Wa(this)):RI(this,this.Y-t)};function Wa(t){t.l.H==0||t.J||GI(t.l,t)}function Js(t){Ph(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,R0(t.V),yI(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function ug(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||dg(n.i,t))){if(!t.K&&dg(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)_d(n),Dh(n);else break e;D0(n),Ft(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=sc(kt(n.ib,n),6e3));if(1>=LI(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Zs(n,11)}else if((t.K||n.g==t)&&_d(n),!_l(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const d=c[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const f=c[4];f!=null&&(n.Ga=f,n.l.info("SVER="+n.Ga));const p=c[5];p!=null&&typeof p=="number"&&0<p&&(r=1.5*p,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const g=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var i=r.i;i.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(N0(i,i.h),i.h=null))}if(r.F){const y=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.Da=y,Ie(r.I,r.F,y))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=JI(r,r.J?r.pa:null,r.Y),o.K){DI(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Ph(a),ac(a)),r.g=o}else KI(r);0<n.j.length&&Mh(n)}else c[0]!="stop"&&c[0]!="close"||Zs(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Zs(n,7):L0(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Il(4)}catch{}}function y$(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Eh(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function v$(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Eh(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function AI(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Eh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=v$(t),r=y$(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var CI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function x$(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function si(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof si){this.h=t.h,xd(this,t.j),this.s=t.s,this.g=t.g,wd(this,t.m),this.l=t.l;var e=t.i,n=new Rl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),uw(this,n),this.o=t.o}else t&&(e=String(t).match(CI))?(this.h=!1,xd(this,e[1]||"",!0),this.s=Aa(e[2]||""),this.g=Aa(e[3]||"",!0),wd(this,e[4]),this.l=Aa(e[5]||"",!0),uw(this,e[6]||"",!0),this.o=Aa(e[7]||"")):(this.h=!1,this.i=new Rl(null,this.h))}si.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ca(e,dw,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ca(e,dw,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ca(n,n.charAt(0)=="/"?E$:_$,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ca(n,T$)),t.join("")};function Rr(t){return new si(t)}function xd(t,e,n){t.j=n?Aa(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function wd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function uw(t,e,n){e instanceof Rl?(t.i=e,b$(t.i,t.h)):(n||(e=Ca(e,S$)),t.i=new Rl(e,t.h))}function Ie(t,e,n){t.i.set(e,n)}function Nh(t){return Ie(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Aa(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ca(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,w$),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function w$(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var dw=/[#\/\?@]/g,_$=/[#\?:]/g,E$=/[#\?]/g,S$=/[#\?@]/g,T$=/#/g;function Rl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Os(t){t.g||(t.g=new Map,t.h=0,t.i&&x$(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}U=Rl.prototype;U.add=function(t,e){Os(this),this.i=null,t=Xo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function kI(t,e){Os(t),e=Xo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function PI(t,e){return Os(t),e=Xo(t,e),t.g.has(e)}U.forEach=function(t,e){Os(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};U.ta=function(){Os(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};U.Z=function(t){Os(this);let e=[];if(typeof t=="string")PI(this,t)&&(e=e.concat(this.g.get(Xo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};U.set=function(t,e){return Os(this),this.i=null,t=Xo(this,t),PI(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};U.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function NI(t,e,n){kI(t,e),0<n.length&&(t.i=null,t.g.set(Xo(t,e),v0(n)),t.h+=n.length)}U.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function Xo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function b$(t,e){e&&!t.j&&(Os(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(kI(this,r),NI(this,s,n))},t)),t.j=e}var I$=class{constructor(t,e){this.g=t,this.map=e}};function jI(t){this.l=t||R$,re.PerformanceNavigationTiming?(t=re.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(re.g&&re.g.Ka&&re.g.Ka()&&re.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var R$=10;function OI(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function LI(t){return t.h?1:t.g?t.g.size:0}function dg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function N0(t,e){t.g?t.g.add(e):t.h=e}function DI(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}jI.prototype.cancel=function(){if(this.i=MI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function MI(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return v0(t.i)}var A$=class{stringify(t){return re.JSON.stringify(t,void 0)}parse(t){return re.JSON.parse(t,void 0)}};function C$(){this.g=new A$}function k$(t,e,n){const r=n||"";try{AI(t,function(s,i){let o=s;nc(s)&&(o=b0(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function P$(t,e){const n=new Rh;if(re.Image){const r=new Image;r.onload=Hc(Kc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Hc(Kc,n,r,"TestLoadImage: error",!1,e),r.onabort=Hc(Kc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Hc(Kc,n,r,"TestLoadImage: timeout",!1,e),re.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Kc(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function jh(t){this.l=t.fc||null,this.j=t.ob||!1}ut(jh,C0);jh.prototype.g=function(){return new Oh(this.l,this.j)};jh.prototype.i=function(t){return function(){return t}}({});function Oh(t,e){ct.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=j0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ut(Oh,ct);var j0=0;U=Oh.prototype;U.open=function(t,e){if(this.readyState!=j0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Al(this)};U.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||re).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};U.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,lc(this)),this.readyState=j0};U.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Al(this)),this.g&&(this.readyState=3,Al(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof re.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$I(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function $I(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}U.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?lc(this):Al(this),this.readyState==3&&$I(this)}};U.Za=function(t){this.g&&(this.response=this.responseText=t,lc(this))};U.Ya=function(t){this.g&&(this.response=t,lc(this))};U.ka=function(){this.g&&lc(this)};function lc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Al(t)}U.setRequestHeader=function(t,e){this.v.append(t,e)};U.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};U.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Al(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Oh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var N$=re.JSON.parse;function ze(t){ct.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=FI,this.L=this.M=!1}ut(ze,ct);var FI="",j$=/^https?$/i,O$=["POST","PUT"];U=ze.prototype;U.Oa=function(t){this.M=t};U.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ag.g(),this.C=this.u?cw(this.u):cw(ag),this.g.onreadystatechange=kt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){hw(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=re.FormData&&t instanceof re.FormData,!(0<=nI(O$,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{BI(this),0<this.B&&((this.L=L$(this.g))?(this.g.timeout=this.B,this.g.ontimeout=kt(this.ua,this)):this.A=A0(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){hw(this,i)}};function L$(t){return Po&&typeof t.timeout=="number"&&t.ontimeout!==void 0}U.ua=function(){typeof y0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vt(this,"timeout"),this.abort(8))};function hw(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,VI(t),Lh(t)}function VI(t){t.F||(t.F=!0,vt(t,"complete"),vt(t,"error"))}U.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,vt(this,"complete"),vt(this,"abort"),Lh(this))};U.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Lh(this,!0)),ze.$.N.call(this)};U.La=function(){this.s||(this.G||this.v||this.l?UI(this):this.kb())};U.kb=function(){UI(this)};function UI(t){if(t.h&&typeof y0<"u"&&(!t.C[1]||qn(t)!=4||t.da()!=2)){if(t.v&&qn(t)==4)A0(t.La,0,t);else if(vt(t,"readystatechange"),qn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(CI)[1]||null;!s&&re.self&&re.self.location&&(s=re.self.location.protocol.slice(0,-1)),r=!j$.test(s?s.toLowerCase():"")}n=r}if(n)vt(t,"complete"),vt(t,"success");else{t.m=6;try{var i=2<qn(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",VI(t)}}finally{Lh(t)}}}}function Lh(t,e){if(t.g){BI(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||vt(t,"ready");try{n.onreadystatechange=r}catch{}}}function BI(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(re.clearTimeout(t.A),t.A=null)}U.isActive=function(){return!!this.g};function qn(t){return t.g?t.g.readyState:0}U.da=function(){try{return 2<qn(this)?this.g.status:-1}catch{return-1}};U.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};U.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),N$(e)}};function fw(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case FI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function D$(t){const e={};t=(t.g&&2<=qn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(_l(t[r]))continue;var n=a$(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}e$(e,function(r){return r.join(", ")})}U.Ia=function(){return this.m};U.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function zI(t){let e="";return w0(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function O0(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=zI(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ie(t,e,n))}function xa(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function WI(t){this.Ga=0,this.j=[],this.l=new Rh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=xa("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=xa("baseRetryDelayMs",5e3,t),this.hb=xa("retryDelaySeedMs",1e4,t),this.eb=xa("forwardChannelMaxRetries",2,t),this.xa=xa("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new jI(t&&t.concurrentRequestLimit),this.Ja=new C$,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}U=WI.prototype;U.ra=8;U.H=1;function L0(t){if(HI(t),t.H==3){var e=t.W++,n=Rr(t.I);if(Ie(n,"SID",t.K),Ie(n,"RID",e),Ie(n,"TYPE","terminate"),cc(t,n),e=new oc(t,t.l,e),e.L=2,e.v=Nh(Rr(n)),n=!1,re.navigator&&re.navigator.sendBeacon)try{n=re.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&re.Image&&(new Image().src=e.v,n=!0),n||(e.g=ZI(e.l,null),e.g.ha(e.v)),e.G=Date.now(),ac(e)}YI(t)}function Dh(t){t.g&&(M0(t),t.g.cancel(),t.g=null)}function HI(t){Dh(t),t.u&&(re.clearTimeout(t.u),t.u=null),_d(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&re.clearTimeout(t.m),t.m=null)}function Mh(t){if(!OI(t.i)&&!t.m){t.m=!0;var e=t.Na;Sl||pI(),Tl||(Sl(),Tl=!0),I0.add(e,t),t.C=0}}function M$(t,e){return LI(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=sc(kt(t.Na,t,e),XI(t,t.C)),t.C++,!0)}U.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new oc(this,this.l,t);let i=this.s;if(this.U&&(i?(i=oI(i),aI(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=qI(this,s,e),n=Rr(this.I),Ie(n,"RID",t),Ie(n,"CVER",22),this.F&&Ie(n,"X-HTTP-Session-Id",this.F),cc(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(zI(i)))+"&"+e:this.o&&O0(n,this.o,i)),N0(this.i,s),this.bb&&Ie(n,"TYPE","init"),this.P?(Ie(n,"$req",e),Ie(n,"SID","null"),s.aa=!0,cg(s,n,null)):cg(s,n,e),this.H=2}}else this.H==3&&(t?pw(this,t):this.j.length==0||OI(this.i)||pw(this))};function pw(t,e){var n;e?n=e.m:n=t.W++;const r=Rr(t.I);Ie(r,"SID",t.K),Ie(r,"RID",n),Ie(r,"AID",t.V),cc(t,r),t.o&&t.s&&O0(r,t.o,t.s),n=new oc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=qI(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),N0(t.i,n),cg(n,r,e)}function cc(t,e){t.na&&w0(t.na,function(n,r){Ie(e,r,n)}),t.h&&AI({},function(n,r){Ie(e,r,n)})}function qI(t,e,n){n=Math.min(t.j.length,n);var r=t.h?kt(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const d=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{k$(d,o,"req"+c+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function KI(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Sl||pI(),Tl||(Sl(),Tl=!0),I0.add(e,t),t.A=0}}function D0(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=sc(kt(t.Ma,t),XI(t,t.A)),t.A++,!0)}U.Ma=function(){if(this.u=null,QI(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=sc(kt(this.jb,this),t)}};U.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ft(10),Dh(this),QI(this))};function M0(t){t.B!=null&&(re.clearTimeout(t.B),t.B=null)}function QI(t){t.g=new oc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Rr(t.wa);Ie(e,"RID","rpc"),Ie(e,"SID",t.K),Ie(e,"AID",t.V),Ie(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ie(e,"TO",t.qa),Ie(e,"TYPE","xmlhttp"),cc(t,e),t.o&&t.s&&O0(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Nh(Rr(e)),n.s=null,n.S=!0,TI(n,t)}U.ib=function(){this.v!=null&&(this.v=null,Dh(this),D0(this),Ft(19))};function _d(t){t.v!=null&&(re.clearTimeout(t.v),t.v=null)}function GI(t,e){var n=null;if(t.g==e){_d(t),M0(t),t.g=null;var r=2}else if(dg(t.i,e))n=e.F,DI(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=Ah(),vt(r,new wI(r,n)),Mh(t)}else KI(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&M$(t,e)||r==2&&D0(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Zs(t,5);break;case 4:Zs(t,10);break;case 3:Zs(t,6);break;default:Zs(t,2)}}}function XI(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Zs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=kt(t.pb,t);n||(n=new si("//www.google.com/images/cleardot.gif"),re.location&&re.location.protocol=="http"||xd(n,"https"),Nh(n)),P$(n.toString(),r)}else Ft(2);t.H=0,t.h&&t.h.za(e),YI(t),HI(t)}U.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Ft(2)):(this.l.info("Failed to ping google.com"),Ft(1))};function YI(t){if(t.H=0,t.ma=[],t.h){const e=MI(t.i);(e.length!=0||t.j.length!=0)&&(sw(t.ma,e),sw(t.ma,t.j),t.i.i.length=0,v0(t.j),t.j.length=0),t.h.ya()}}function JI(t,e,n){var r=n instanceof si?Rr(n):new si(n);if(r.g!="")e&&(r.g=e+"."+r.g),wd(r,r.m);else{var s=re.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new si(null);r&&xd(i,r),e&&(i.g=e),s&&wd(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&Ie(r,n,e),Ie(r,"VER",t.ra),cc(t,r),r}function ZI(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new ze(new jh({ob:!0})):new ze(t.va),e.Oa(t.J),e}U.isActive=function(){return!!this.h&&this.h.isActive(this)};function e2(){}U=e2.prototype;U.Ba=function(){};U.Aa=function(){};U.za=function(){};U.ya=function(){};U.isActive=function(){return!0};U.Va=function(){};function Ed(){if(Po&&!(10<=Number(XM)))throw Error("Environmental error: no available transport.")}Ed.prototype.g=function(t,e){return new un(t,e)};function un(t,e){ct.call(this),this.g=new WI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!_l(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!_l(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Yo(this)}ut(un,ct);un.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Ft(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=JI(t,null,t.Y),Mh(t)};un.prototype.close=function(){L0(this.g)};un.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=b0(t),t=n);e.j.push(new I$(e.fb++,t)),e.H==3&&Mh(e)};un.prototype.N=function(){this.g.h=null,delete this.j,L0(this.g),delete this.g,un.$.N.call(this)};function t2(t){k0.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ut(t2,k0);function n2(){P0.call(this),this.status=1}ut(n2,P0);function Yo(t){this.g=t}ut(Yo,e2);Yo.prototype.Ba=function(){vt(this.g,"a")};Yo.prototype.Aa=function(t){vt(this.g,new t2(t))};Yo.prototype.za=function(t){vt(this.g,new n2)};Yo.prototype.ya=function(){vt(this.g,"b")};function $$(){this.blockSize=-1}function $n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ut($n,$$);$n.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function yp(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}$n.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)yp(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){yp(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){yp(this,r),s=0;break}}this.h=s,this.i+=e};$n.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function xe(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var F$={};function $0(t){return-128<=t&&128>t?KM(t,function(e){return new xe([e|0],0>e?-1:0)}):new xe([t|0],0>t?-1:0)}function Kn(t){if(isNaN(t)||!isFinite(t))return ho;if(0>t)return mt(Kn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=hg;return new xe(e,0)}function r2(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return mt(r2(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Kn(Math.pow(e,8)),r=ho,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=Kn(Math.pow(e,i)),r=r.R(i).add(Kn(o))):(r=r.R(n),r=r.add(Kn(o)))}return r}var hg=4294967296,ho=$0(0),fg=$0(1),mw=$0(16777216);U=xe.prototype;U.ea=function(){if(wn(this))return-mt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:hg+r)*e,e*=hg}return t};U.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(mr(this))return"0";if(wn(this))return"-"+mt(this).toString(t);for(var e=Kn(Math.pow(t,6)),n=this,r="";;){var s=Td(n,e).g;n=Sd(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,mr(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};U.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function mr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function wn(t){return t.h==-1}U.X=function(t){return t=Sd(this,t),wn(t)?-1:mr(t)?0:1};function mt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new xe(n,~t.h).add(fg)}U.abs=function(){return wn(this)?mt(this):this};U.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new xe(n,n[n.length-1]&-2147483648?-1:0)};function Sd(t,e){return t.add(mt(e))}U.R=function(t){if(mr(this)||mr(t))return ho;if(wn(this))return wn(t)?mt(this).R(mt(t)):mt(mt(this).R(t));if(wn(t))return mt(this.R(mt(t)));if(0>this.X(mw)&&0>t.X(mw))return Kn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,Qc(n,2*r+2*s),n[2*r+2*s+1]+=i*l,Qc(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Qc(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Qc(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new xe(n,0)};function Qc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function wa(t,e){this.g=t,this.h=e}function Td(t,e){if(mr(e))throw Error("division by zero");if(mr(t))return new wa(ho,ho);if(wn(t))return e=Td(mt(t),e),new wa(mt(e.g),mt(e.h));if(wn(e))return e=Td(t,mt(e)),new wa(mt(e.g),e.h);if(30<t.g.length){if(wn(t)||wn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=fg,r=e;0>=r.X(t);)n=gw(n),r=gw(r);var s=Li(n,1),i=Li(r,1);for(r=Li(r,2),n=Li(n,2);!mr(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=Li(r,1),n=Li(n,1)}return e=Sd(t,s.R(e)),new wa(s,e)}for(s=ho;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Kn(n),o=i.R(e);wn(o)||0<o.X(t);)n-=r,i=Kn(n),o=i.R(e);mr(i)&&(i=fg),s=s.add(i),t=Sd(t,o)}return new wa(s,t)}U.gb=function(t){return Td(this,t).h};U.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new xe(n,this.h&t.h)};U.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new xe(n,this.h|t.h)};U.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new xe(n,this.h^t.h)};function gw(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new xe(n,t.h)}function Li(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new xe(s,t.h)}Ed.prototype.createWebChannel=Ed.prototype.g;un.prototype.send=un.prototype.u;un.prototype.open=un.prototype.m;un.prototype.close=un.prototype.close;Ch.NO_ERROR=0;Ch.TIMEOUT=8;Ch.HTTP_ERROR=6;_I.COMPLETE="complete";EI.EventType=ic;ic.OPEN="a";ic.CLOSE="b";ic.ERROR="c";ic.MESSAGE="d";ct.prototype.listen=ct.prototype.O;ze.prototype.listenOnce=ze.prototype.P;ze.prototype.getLastError=ze.prototype.Sa;ze.prototype.getLastErrorCode=ze.prototype.Ia;ze.prototype.getStatus=ze.prototype.da;ze.prototype.getResponseJson=ze.prototype.Wa;ze.prototype.getResponseText=ze.prototype.ja;ze.prototype.send=ze.prototype.ha;ze.prototype.setWithCredentials=ze.prototype.Oa;$n.prototype.digest=$n.prototype.l;$n.prototype.reset=$n.prototype.reset;$n.prototype.update=$n.prototype.j;xe.prototype.add=xe.prototype.add;xe.prototype.multiply=xe.prototype.R;xe.prototype.modulo=xe.prototype.gb;xe.prototype.compare=xe.prototype.X;xe.prototype.toNumber=xe.prototype.ea;xe.prototype.toString=xe.prototype.toString;xe.prototype.getBits=xe.prototype.D;xe.fromNumber=Kn;xe.fromString=r2;var V$=function(){return new Ed},U$=function(){return Ah()},vp=Ch,B$=_I,z$=Ci,yw={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Gc=EI,W$=ze,H$=$n,fo=xe;const vw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jo="10.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=new o0("@firebase/firestore");function xw(){return mi.logLevel}function Q(t,...e){if(mi.logLevel<=pe.DEBUG){const n=e.map(F0);mi.debug(`Firestore (${Jo}): ${t}`,...n)}}function Ar(t,...e){if(mi.logLevel<=pe.ERROR){const n=e.map(F0);mi.error(`Firestore (${Jo}): ${t}`,...n)}}function No(t,...e){if(mi.logLevel<=pe.WARN){const n=e.map(F0);mi.warn(`Firestore (${Jo}): ${t}`,...n)}}function F0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t="Unexpected state"){const e=`FIRESTORE (${Jo}) INTERNAL ASSERTION FAILED: `+t;throw Ar(e),new Error(e)}function Ce(t,e){t||ee()}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends lr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class q${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tt.UNAUTHENTICATED))}shutdown(){}}class K${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Q${constructor(e){this.t=e,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new wr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new wr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new wr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string"),new s2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string"),new Tt(e)}}class G${constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class X${constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new G$(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Y${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class J${constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string"),this.R=n.token,new Y$(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Z$(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function jo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new st(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new se(e)}static min(){return new se(new st(0,0))}static max(){return new se(new st(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(),r===void 0?r=e.length-n:r>e.length-n&&ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Cl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Cl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Re extends Cl{construct(e,n,r){return new Re(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Re(n)}static emptyPath(){return new Re([])}}const e6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends Cl{construct(e,n,r){return new At(e,n,r)}static isValidIdentifier(e){return e6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new At(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new q(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new q(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new q(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Re.fromString(e))}static fromName(e){return new J(Re.fromString(e).popFirst(5))}static empty(){return new J(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Re(e.slice()))}}function t6(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=se.fromTimestamp(r===1e9?new st(n+1,0):new st(n,r));return new ws(s,J.empty(),e)}function n6(t){return new ws(t.readTime,t.key,-1)}class ws{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ws(se.min(),J.empty(),-1)}static max(){return new ws(se.max(),J.empty(),-1)}}function r6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class i6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uc(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==s6)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(s=>s?M.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new M((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new M((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function dc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}V0.ae=-1;function $h(t){return t==null}function bd(t){return t===0&&1/t==-1/0}function o6(t){return typeof t=="number"&&Number.isInteger(t)&&!bd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function o2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||pt.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pt.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xc(this.root,e,this.comparator,!0)}}class Xc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??pt.RED,this.left=s??pt.EMPTY,this.right=i??pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new pt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return pt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();const e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}}pt.EMPTY=null,pt.RED=!0,pt.BLACK=!1;pt.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,n,r,s,i){return this}insert(e,n,r){return new pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _w(this.data.getIterator())}getIteratorFrom(e){return new _w(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Nt(this.comparator);return n.data=e,n}}class _w{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new On([])}unionWith(e){let n=new Nt(At.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new On(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new a2("Invalid base64 string: "+i):i}}(e);return new Lt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const a6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _s(t){if(Ce(!!t),typeof t=="string"){let e=0;const n=a6.exec(t);if(Ce(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gi(t){return typeof t=="string"?Lt.fromBase64String(t):Lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function B0(t){const e=t.mapValue.fields.__previous_value__;return U0(e)?B0(e):e}function kl(t){const e=_s(t.mapValue.fields.__local_write_time__.timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Pl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Pl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Pl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function yi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?U0(t)?4:c6(t)?9007199254740991:10:ee()}function sr(t,e){if(t===e)return!0;const n=yi(t);if(n!==yi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return kl(t).isEqual(kl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=_s(s.timestampValue),a=_s(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return gi(s.bytesValue).isEqual(gi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ye(s.geoPointValue.latitude)===Ye(i.geoPointValue.latitude)&&Ye(s.geoPointValue.longitude)===Ye(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ye(s.integerValue)===Ye(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ye(s.doubleValue),a=Ye(i.doubleValue);return o===a?bd(o)===bd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return jo(t.arrayValue.values||[],e.arrayValue.values||[],sr);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(ww(o)!==ww(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!sr(o[l],a[l])))return!1;return!0}(t,e);default:return ee()}}function Nl(t,e){return(t.values||[]).find(n=>sr(n,e))!==void 0}function Oo(t,e){if(t===e)return 0;const n=yi(t),r=yi(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ye(i.integerValue||i.doubleValue),l=Ye(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Ew(t.timestampValue,e.timestampValue);case 4:return Ew(kl(t),kl(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(i,o){const a=gi(i),l=gi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=me(a[c],l[c]);if(d!==0)return d}return me(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=me(Ye(i.latitude),Ye(o.latitude));return a!==0?a:me(Ye(i.longitude),Ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const d=Oo(a[c],l[c]);if(d)return d}return me(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Yc.mapValue&&o===Yc.mapValue)return 0;if(i===Yc.mapValue)return 1;if(o===Yc.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const p=me(l[f],d[f]);if(p!==0)return p;const m=Oo(a[l[f]],c[d[f]]);if(m!==0)return m}return me(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ee()}}function Ew(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=_s(t),r=_s(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function Lo(t){return pg(t)}function pg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=_s(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return gi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=pg(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${pg(n.fields[o])}`;return s+"}"}(t.mapValue):ee()}function Sw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function mg(t){return!!t&&"integerValue"in t}function z0(t){return!!t&&"arrayValue"in t}function Tw(t){return!!t&&"nullValue"in t}function bw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Iu(t){return!!t&&"mapValue"in t}function Ha(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Zo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ha(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ha(t.arrayValue.values[n]);return e}return Object.assign({},t)}function c6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Iu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ha(n)}setAll(e){let n=At.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Ha(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Iu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return sr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Iu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Zo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new _n(Ha(this.value))}}function l2(t){const e=[];return Zo(t.fields,(n,r)=>{const s=new At([n]);if(Iu(r)){const i=l2(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new On(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Rt(e,0,se.min(),se.min(),se.min(),_n.empty(),0)}static newFoundDocument(e,n,r,s){return new Rt(e,1,n,se.min(),r,s,0)}static newNoDocument(e,n){return new Rt(e,2,n,se.min(),se.min(),_n.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,se.min(),se.min(),_n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,n){this.position=e,this.inclusive=n}}function Iw(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Oo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Rw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!sr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,n="asc"){this.field=e,this.dir=n}}function u6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{}class Ze extends c2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new h6(e,n,r):n==="array-contains"?new m6(e,r):n==="in"?new g6(e,r):n==="not-in"?new y6(e,r):n==="array-contains-any"?new v6(e,r):new Ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new f6(e,r):new p6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Oo(n,this.value)):n!==null&&yi(this.value)===yi(n)&&this.matchesComparison(Oo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Fn extends c2{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Fn(e,n)}matches(e){return u2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function u2(t){return t.op==="and"}function d2(t){return d6(t)&&u2(t)}function d6(t){for(const e of t.filters)if(e instanceof Fn)return!1;return!0}function gg(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+Lo(t.value);if(d2(t))return t.filters.map(e=>gg(e)).join(",");{const e=t.filters.map(n=>gg(n)).join(",");return`${t.op}(${e})`}}function h2(t,e){return t instanceof Ze?function(r,s){return s instanceof Ze&&r.op===s.op&&r.field.isEqual(s.field)&&sr(r.value,s.value)}(t,e):t instanceof Fn?function(r,s){return s instanceof Fn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&h2(o,s.filters[a]),!0):!1}(t,e):void ee()}function f2(t){return t instanceof Ze?function(n){return`${n.field.canonicalString()} ${n.op} ${Lo(n.value)}`}(t):t instanceof Fn?function(n){return n.op.toString()+" {"+n.getFilters().map(f2).join(" ,")+"}"}(t):"Filter"}class h6 extends Ze{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class f6 extends Ze{constructor(e,n){super(e,"in",n),this.keys=p2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class p6 extends Ze{constructor(e,n){super(e,"not-in",n),this.keys=p2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function p2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class m6 extends Ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return z0(n)&&Nl(n.arrayValue,this.value)}}class g6 extends Ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Nl(this.value.arrayValue,n)}}class y6 extends Ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Nl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Nl(this.value.arrayValue,n)}}class v6 extends Ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!z0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Nl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.he=null}}function Aw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new x6(t,e,n,r,s,i,o)}function W0(t){const e=oe(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>gg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),$h(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Lo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Lo(r)).join(",")),e.he=n}return e.he}function H0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!u6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!h2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Rw(t.startAt,e.startAt)&&Rw(t.endAt,e.endAt)}function yg(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function w6(t,e,n,r,s,i,o,a){return new hc(t,e,n,r,s,i,o,a)}function q0(t){return new hc(t)}function Cw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function m2(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function K0(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function g2(t){return t.collectionGroup!==null}function Ka(t){const e=oe(t);if(e.Pe===null){e.Pe=[];const n=K0(e),r=m2(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new qa(n)),e.Pe.push(new qa(At.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.Pe.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new qa(At.keyField(),i))}}}return e.Pe}function Cr(t){const e=oe(t);return e.Ie||(e.Ie=_6(e,Ka(t))),e.Ie}function _6(t,e){if(t.limitType==="F")return Aw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new qa(s.field,i)});const n=t.endAt?new Id(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Id(t.startAt.position,t.startAt.inclusive):null;return Aw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function vg(t,e){e.getFirstInequalityField(),K0(t);const n=t.filters.concat([e]);return new hc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function xg(t,e,n){return new hc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Fh(t,e){return H0(Cr(t),Cr(e))&&t.limitType===e.limitType}function y2(t){return`${W0(Cr(t))}|lt:${t.limitType}`}function wg(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>f2(s)).join(", ")}]`),$h(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Lo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Lo(s)).join(",")),`Target(${r})`}(Cr(t))}; limitType=${t.limitType})`}function Vh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ka(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=Iw(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ka(r),s)||r.endAt&&!function(o,a,l){const c=Iw(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ka(r),s))}(t,e)}function E6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function v2(t){return(e,n)=>{let r=!1;for(const s of Ka(t)){const i=S6(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function S6(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Oo(l,c):ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Zo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return o2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6=new Fe(J.comparator);function kr(){return T6}const x2=new Fe(J.comparator);function ka(...t){let e=x2;for(const n of t)e=e.insert(n.key,n);return e}function w2(t){let e=x2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ei(){return Qa()}function _2(){return Qa()}function Qa(){return new ea(t=>t.toString(),(t,e)=>t.isEqual(e))}const b6=new Fe(J.comparator),I6=new Nt(J.comparator);function ce(...t){let e=I6;for(const n of t)e=e.add(n);return e}const R6=new Nt(me);function A6(){return R6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bd(e)?"-0":e}}function S2(t){return{integerValue:""+t}}function C6(t,e){return o6(e)?S2(e):E2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(){this._=void 0}}function k6(t,e,n){return t instanceof Rd?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&U0(i)&&(i=B0(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof jl?b2(t,e):t instanceof Ol?I2(t,e):function(s,i){const o=T2(s,i),a=kw(o)+kw(s.Ee);return mg(o)&&mg(s.Ee)?S2(a):E2(s.serializer,a)}(t,e)}function P6(t,e,n){return t instanceof jl?b2(t,e):t instanceof Ol?I2(t,e):n}function T2(t,e){return t instanceof Ad?function(r){return mg(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Rd extends Uh{}class jl extends Uh{constructor(e){super(),this.elements=e}}function b2(t,e){const n=R2(e);for(const r of t.elements)n.some(s=>sr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ol extends Uh{constructor(e){super(),this.elements=e}}function I2(t,e){let n=R2(e);for(const r of t.elements)n=n.filter(s=>!sr(s,r));return{arrayValue:{values:n}}}class Ad extends Uh{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function kw(t){return Ye(t.integerValue||t.doubleValue)}function R2(t){return z0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function N6(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof jl&&s instanceof jl||r instanceof Ol&&s instanceof Ol?jo(r.elements,s.elements,sr):r instanceof Ad&&s instanceof Ad?sr(r.Ee,s.Ee):r instanceof Rd&&s instanceof Rd}(t.transform,e.transform)}class j6{constructor(e,n){this.version=e,this.transformResults=n}}class er{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new er}static exists(e){return new er(void 0,e)}static updateTime(e){return new er(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ru(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Bh{}function A2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Q0(t.key,er.none()):new fc(t.key,t.data,er.none());{const n=t.data,r=_n.empty();let s=new Nt(At.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ki(t.key,r,new On(s.toArray()),er.none())}}function O6(t,e,n){t instanceof fc?function(s,i,o){const a=s.value.clone(),l=Nw(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ki?function(s,i,o){if(!Ru(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Nw(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(C2(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ga(t,e,n,r){return t instanceof fc?function(i,o,a,l){if(!Ru(i.precondition,o))return a;const c=i.value.clone(),d=jw(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ki?function(i,o,a,l){if(!Ru(i.precondition,o))return a;const c=jw(i.fieldTransforms,l,o),d=o.data;return d.setAll(C2(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return Ru(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function L6(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=T2(r.transform,s||null);i!=null&&(n===null&&(n=_n.empty()),n.set(r.field,i))}return n||null}function Pw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&jo(r,s,(i,o)=>N6(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fc extends Bh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ki extends Bh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function C2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Nw(t,e,n){const r=new Map;Ce(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,P6(o,a,n[s]))}return r}function jw(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,k6(i,o,e))}return r}class Q0 extends Bh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class D6 extends Bh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&O6(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ga(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ga(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=_2();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=A2(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,(n,r)=>Pw(n,r))&&jo(this.baseMutations,e.baseMutations,(n,r)=>Pw(n,r))}}class G0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ce(e.mutations.length===r.length);let s=function(){return b6}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new G0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe,de;function V6(t){switch(t){default:return ee();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function k2(t){if(t===void 0)return Ar("GRPC error has no .code"),N.UNKNOWN;switch(t){case Xe.OK:return N.OK;case Xe.CANCELLED:return N.CANCELLED;case Xe.UNKNOWN:return N.UNKNOWN;case Xe.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Xe.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Xe.INTERNAL:return N.INTERNAL;case Xe.UNAVAILABLE:return N.UNAVAILABLE;case Xe.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Xe.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Xe.NOT_FOUND:return N.NOT_FOUND;case Xe.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Xe.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Xe.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Xe.ABORTED:return N.ABORTED;case Xe.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Xe.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Xe.DATA_LOSS:return N.DATA_LOSS;default:return ee()}}(de=Xe||(Xe={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6=new fo([4294967295,4294967295],0);function Ow(t){const e=U6().encode(t),n=new H$;return n.update(e),new Uint8Array(n.digest())}function Lw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new fo([n,r],0),new fo([s,i],0)]}class X0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Pa(`Invalid padding: ${n}`);if(r<0)throw new Pa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Pa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Pa(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=fo.fromNumber(this.Ae)}Ve(e,n,r){let s=e.add(n.multiply(fo.fromNumber(r)));return s.compare(B6)===1&&(s=new fo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=Ow(e),[r,s]=Lw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);if(!this.me(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new X0(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=Ow(e),[r,s]=Lw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Pa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,pc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new zh(se.min(),s,new Fe(me),kr(),ce())}}class pc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new pc(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,n,r,s){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=s}}class P2{constructor(e,n){this.targetId=e,this.ye=n}}class N2{constructor(e,n,r=Lt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Dw{constructor(){this.we=0,this.Se=$w(),this.be=Lt.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=ce(),n=ce(),r=ce();return this.Se.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ee()}}),new pc(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=$w()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class z6{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=kr(),this.Ue=Mw(),this.We=new Fe(me)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,s)=>{this.Ye(s)&&n(s)})}Xe(e){const n=e.targetId,r=e.ye.count,s=this.et(n);if(s){const i=s.target;if(yg(i))if(r===0){const o=new J(i.path);this.je(n,o,Rt.newNoDocument(o,se.min()))}else Ce(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),l=a?this.rt(a,e,o):1;if(l!==0){this.Ze(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,c)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=gi(r).toUint8Array()}catch(l){if(l instanceof a2)return No("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new X0(o,s,i)}catch(l){return No(l instanceof Pa?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.je(n,i,null),s++)}),s}_t(e){const n=new Map;this.Ke.forEach((i,o)=>{const a=this.et(o);if(a){if(i.current&&yg(a.target)){const l=new J(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,Rt.newNoDocument(l,e))}i.Fe&&(n.set(o,i.xe()),i.Oe())}});let r=ce();this.Ue.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.et(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.$e.forEach((i,o)=>o.setReadTime(e));const s=new zh(e,n,this.We,this.$e,r);return this.$e=kr(),this.Ue=Mw(),this.We=new Fe(me),s}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const s=this.Je(e);this.ut(e,n)?s.Ne(n,1):s.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new Dw,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Nt(me),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new Dw),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function Mw(){return new Fe(J.comparator)}function $w(){return new Fe(J.comparator)}const W6=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),H6=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),q6=(()=>({and:"AND",or:"OR"}))();class K6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function _g(t,e){return t.useProto3Json||$h(e)?e:{value:e}}function Cd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function j2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Q6(t,e){return Cd(t,e.toTimestamp())}function tr(t){return Ce(!!t),se.fromTimestamp(function(n){const r=_s(n);return new st(r.seconds,r.nanos)}(t))}function Y0(t,e){return function(r){return new Re(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function O2(t){const e=Re.fromString(t);return Ce($2(e)),e}function Eg(t,e){return Y0(t.databaseId,e.path)}function xp(t,e){const n=O2(e);if(n.get(1)!==t.databaseId.projectId)throw new q(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(L2(n))}function Sg(t,e){return Y0(t.databaseId,e)}function G6(t){const e=O2(t);return e.length===4?Re.emptyPath():L2(e)}function Tg(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function L2(t){return Ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Fw(t,e,n){return{name:Eg(t,e),fields:n.value.mapValue.fields}}function X6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Ce(d===void 0||typeof d=="string"),Lt.fromBase64String(d||"")):(Ce(d===void 0||d instanceof Uint8Array),Lt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?N.UNKNOWN:k2(c.code);return new q(d,c.message||"")}(o);n=new N2(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=xp(t,r.document.name),i=tr(r.document.updateTime),o=r.document.createTime?tr(r.document.createTime):se.min(),a=new _n({mapValue:{fields:r.document.fields}}),l=Rt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Au(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=xp(t,r.document),i=r.readTime?tr(r.readTime):se.min(),o=Rt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Au([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=xp(t,r.document),i=r.removedTargetIds||[];n=new Au([],i,s,null)}else{if(!("filter"in e))return ee();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new F6(s,i),a=r.targetId;n=new P2(a,o)}}return n}function Y6(t,e){let n;if(e instanceof fc)n={update:Fw(t,e.key,e.value)};else if(e instanceof Q0)n={delete:Eg(t,e.key)};else if(e instanceof ki)n={update:Fw(t,e.key,e.data),updateMask:oF(e.fieldMask)};else{if(!(e instanceof D6))return ee();n={verify:Eg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Rd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof jl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ol)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ad)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Q6(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ee()}(t,e.precondition)),n}function J6(t,e){return t&&t.length>0?(Ce(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?tr(s.updateTime):tr(i);return o.isEqual(se.min())&&(o=tr(i)),new j6(o,s.transformResults||[])}(n,e))):[]}function Z6(t,e){return{documents:[Sg(t,e.path)]}}function eF(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Sg(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Sg(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return M2(Fn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(c=>function(f){return{field:$i(f.field),direction:rF(f.dir)}}(c))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=_g(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function tF(t){let e=G6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ce(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(f){const p=D2(f);return p instanceof Fn&&d2(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(g){return new qa(Fi(g.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,$h(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new Id(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,m=f.values||[];return new Id(m,p)}(n.endAt)),w6(e,s,o,i,a,"F",l,c)}function nF(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function D2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Fi(n.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Fi(n.unaryFilter.field);return Ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Fi(n.unaryFilter.field);return Ze.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Fi(n.unaryFilter.field);return Ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(t):t.fieldFilter!==void 0?function(n){return Ze.create(Fi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Fn.create(n.compositeFilter.filters.map(r=>D2(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ee()}}(n.compositeFilter.op))}(t):ee()}function rF(t){return W6[t]}function sF(t){return H6[t]}function iF(t){return q6[t]}function $i(t){return{fieldPath:t.canonicalString()}}function Fi(t){return At.fromServerFormat(t.fieldPath)}function M2(t){return t instanceof Ze?function(n){if(n.op==="=="){if(bw(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NAN"}};if(Tw(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bw(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NOT_NAN"}};if(Tw(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$i(n.field),op:sF(n.op),value:n.value}}}(t):t instanceof Fn?function(n){const r=n.getFilters().map(s=>M2(s));return r.length===1?r[0]:{compositeFilter:{op:iF(n.op),filters:r}}}(t):ee()}function oF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n,r,s,i=se.min(),o=se.min(),a=Lt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(e){this.ht=e}}function lF(t){const e=tF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(){this._n=new uF}addToCollectionParentIndex(e,n){return this._n.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(ws.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class uF{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Nt(Re.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Nt(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Do(0)}static Bn(){return new Do(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(){this.changes=new ea(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ga(r.mutation,s,On.empty(),st.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const s=ei();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ka();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ei();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=kr();const o=Qa(),a=function(){return Qa()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof ki)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Ga(d.mutation,c,d.mutation.getFieldMask(),st.now())):o.set(c.key,On.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var f;return a.set(c,new hF(d,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Qa();let s=new Fe((o,a)=>o-a),i=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||On.empty();d=a.applyToLocalView(c,d),r.set(l,d);const f=(s.get(a.batchId)||ce()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,f=_2();d.forEach(p=>{if(!i.has(p)){const m=A2(n.get(p),r.get(p));m!==null&&f.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return J.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):g2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):M.resolve(ei());let a=-1,l=i;return o.next(c=>M.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,ce())).next(d=>({batchId:a,changes:w2(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=ka();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=ka();return this.indexManager.getCollectionParents(e,s).next(o=>M.forEach(o,a=>{const l=function(d,f){return new hc(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((d,f)=>{i=i.insert(d,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((a,l)=>{const c=l.getKey();i.get(c)===null&&(i=i.insert(c,Rt.newInvalidDocument(c)))});let o=ka();return i.forEach((a,l)=>{const c=s.get(a);c!==void 0&&Ga(c.mutation,l,On.empty(),st.now()),Vh(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return M.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:tr(s.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:lF(s.bundledQuery),readTime:tr(s.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(){this.overlays=new Fe(J.comparator),this.hr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ei();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.It(e,n,i)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=ei(),i=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Fe((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=ei(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=ei(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return M.resolve(a)}It(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new $6(n,r));let i=this.hr.get(n);i===void 0&&(i=ce(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(){this.Pr=new Nt(ot.Ir),this.Tr=new Nt(ot.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new ot(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new ot(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new J(new Re([])),r=new ot(n,e),s=new ot(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new J(new Re([])),r=new ot(n,e),s=new ot(n,e+1);let i=ce();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ot(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ot{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return J.comparator(e.key,n.key)||me(e.pr,n.pr)}static Er(e,n){return me(e.pr,n.pr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Nt(ot.Ir)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new M6(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new ot(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ot(n,0),s=new ot(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Nt(me);return n.forEach(s=>{const i=new ot(s,0),o=new ot(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),M.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new ot(new J(i),0);let a=new Nt(me);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),M.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ce(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return M.forEach(n.mutations,s=>{const i=new ot(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new ot(n,0),s=this.wr.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}vr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(e){this.Cr=e,this.docs=function(){return new Fe(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let r=kr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Rt.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=kr();const o=n.path,a=new J(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||r6(n6(d),r)<=0||(s.has(d.key)||Vh(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ee()}Fr(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new vF(this)}getSize(e){return M.resolve(this.size)}}class vF extends dF{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e){this.persistence=e,this.Mr=new ea(n=>W0(n),H0),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Or=0,this.Nr=new J0,this.targetCount=0,this.Br=Do.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),M.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Do(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.qn(n),M.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),M.waitFor(i).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(e,n){this.Lr={},this.overlays={},this.kr=new V0(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new xF(this),this.indexManager=new cF,this.remoteDocumentCache=function(s){return new yF(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new aF(n),this.$r=new pF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new mF,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new gF(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const s=new _F(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return M.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class _F extends i6{constructor(e){super(),this.currentSequenceNumber=e}}class Z0{constructor(e){this.persistence=e,this.zr=new J0,this.jr=null}static Hr(e){return new Z0(e)}get Jr(){if(this.jr)return this.jr;throw ee()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),M.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Jr,r=>{const s=J.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,se.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return M.or([()=>M.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=ce(),s=ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ev(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(){this.$i=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Wi(e,n).next(i=>i||this.Gi(e,n,s,r)).next(i=>i||this.zi(e,n))}Wi(e,n){if(Cw(n))return M.resolve(null);let r=Cr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=xg(n,null,"F"),r=Cr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ce(...i);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ji(n,a);return this.Hi(n,c,o,l.readTime)?this.Wi(e,xg(n,null,"F")):this.Ji(e,c,n,l)}))})))}Gi(e,n,r,s){return Cw(n)||s.isEqual(se.min())?this.zi(e,n):this.Ui.getDocuments(e,r).next(i=>{const o=this.ji(n,i);return this.Hi(n,o,r,s)?this.zi(e,n):(xw()<=pe.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),wg(n)),this.Ji(e,o,n,t6(s,-1)))})}ji(e,n){let r=new Nt(v2(e));return n.forEach((s,i)=>{Vh(e,i)&&(r=r.add(i))}),r}Hi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}zi(e,n){return xw()<=pe.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",wg(n)),this.Ui.getDocumentsMatchingQuery(e,n,ws.min())}Ji(e,n,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SF{constructor(e,n,r,s){this.persistence=e,this.Yi=n,this.serializer=s,this.Zi=new Fe(me),this.Xi=new ea(i=>W0(i),H0),this.es=new Map,this.ts=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this.ns(r)}ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fF(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Zi))}}function TF(t,e,n,r){return new SF(t,e,n,r)}async function F2(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ce();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function bF(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.ts.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const f=c.batch,p=f.keys();let m=M.resolve();return p.forEach(g=>{m=m.next(()=>d.getEntry(l,g)).next(y=>{const _=c.docVersions.get(g);Ce(_!==null),y.version.compareTo(_)<0&&(f.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),d.addEntry(y)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ce();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function V2(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function IF(t,e){const n=oe(t),r=e.snapshotVersion;let s=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ts.newChangeBuffer({trackRemovals:!0});s=n.Zi;const a=[];e.targetChanges.forEach((d,f)=>{const p=s.get(f);if(!p)return;a.push(n.Qr.removeMatchingKeys(i,d.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(i,d.addedDocuments,f)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Lt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(f,m),function(y,_,x){return y.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(p,m,d)&&a.push(n.Qr.updateTargetData(i,m))});let l=kr(),c=ce();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(RF(i,o,e.documentUpdates).next(d=>{l=d.ss,c=d.os})),!r.isEqual(se.min())){const d=n.Qr.getLastRemoteSnapshotVersion(i).next(f=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Zi=s,i))}function RF(t,e,n){let r=ce(),s=ce();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=kr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(se.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ss:o,os:s}})}function AF(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function CF(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,M.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new ts(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Zi.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(r.targetId,r),n.Xi.set(e,r.targetId)),r})}async function bg(t,e,n){const r=oe(t),s=r.Zi.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!dc(o))throw o;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Zi=r.Zi.remove(e),r.Xi.delete(s.target)}function Vw(t,e,n){const r=oe(t);let s=se.min(),i=ce();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,c,d){const f=oe(l),p=f.Xi.get(d);return p!==void 0?M.resolve(f.Zi.get(p)):f.Qr.getTargetData(c,d)}(r,o,Cr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Yi.getDocumentsMatchingQuery(o,e,n?s:se.min(),n?i:ce())).next(a=>(kF(r,E6(e),a),{documents:a,_s:i})))}function kF(t,e,n){let r=t.es.get(e)||se.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.es.set(e,r)}class Uw{constructor(){this.activeTargetIds=A6()}Is(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ts(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ps(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PF{constructor(){this.Ys=new Uw,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}updateQueryState(e,n,r){this.Zs[e]=n}removeLocalQueryTarget(e){this.Ys.Ts(e)}isLocalQueryTarget(e){return this.Ys.activeTargetIds.has(e)}clearQueryState(e){delete this.Zs[e]}getAllActiveQueryTargets(){return this.Ys.activeTargetIds}isActiveQueryTarget(e){return this.Ys.activeTargetIds.has(e)}start(){return this.Ys=new Uw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{Xs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(){this.eo=()=>this.no(),this.ro=()=>this.io(),this.so=[],this.oo()}Xs(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}oo(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}no(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}io(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jc=null;function wp(){return Jc===null?Jc=function(){return 268435456+Math.round(2147483648*Math.random())}():Jc++,"0x"+Jc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(e){this._o=e._o,this.ao=e.ao}uo(e){this.co=e}lo(e){this.ho=e}onMessage(e){this.Po=e}close(){this.ao()}send(e){this._o(e)}Io(){this.co()}To(e){this.ho(e)}Eo(e){this.Po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et="WebChannelConnection";class LF extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ao=r+"://"+n.host,this.Ro=`projects/${s}/databases/${i}`,this.Vo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get mo(){return!1}fo(n,r,s,i,o){const a=wp(),l=this.po(n,r);Q("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(c,i,o),this.wo(n,l,c,s).then(d=>(Q("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw No("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}So(n,r,s,i,o,a){return this.fo(n,r,s,i,o)}yo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Jo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}po(n,r){const s=jF[n];return`${this.Ao}/v1/${r}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}wo(e,n,r,s){const i=wp();return new Promise((o,a)=>{const l=new W$;l.setWithCredentials(!0),l.listenOnce(B$.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case vp.NO_ERROR:const d=l.getResponseJson();Q(Et,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case vp.TIMEOUT:Q(Et,`RPC '${e}' ${i} timed out`),a(new q(N.DEADLINE_EXCEEDED,"Request time out"));break;case vp.HTTP_ERROR:const f=l.getStatus();if(Q(Et,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const g=function(_){const x=_.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(x)>=0?x:N.UNKNOWN}(m.status);a(new q(g,m.message))}else a(new q(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new q(N.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{Q(Et,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);Q(Et,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}bo(e,n,r){const s=wp(),i=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=V$(),a=U$(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.yo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");Q(Et,`Creating RPC '${e}' stream ${s}: ${d}`,l);const f=o.createWebChannel(d,l);let p=!1,m=!1;const g=new OF({_o:_=>{m?Q(Et,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(p||(Q(Et,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),Q(Et,`RPC '${e}' stream ${s} sending:`,_),f.send(_))},ao:()=>f.close()}),y=(_,x,v)=>{_.listen(x,w=>{try{v(w)}catch(E){setTimeout(()=>{throw E},0)}})};return y(f,Gc.EventType.OPEN,()=>{m||Q(Et,`RPC '${e}' stream ${s} transport opened.`)}),y(f,Gc.EventType.CLOSE,()=>{m||(m=!0,Q(Et,`RPC '${e}' stream ${s} transport closed`),g.To())}),y(f,Gc.EventType.ERROR,_=>{m||(m=!0,No(Et,`RPC '${e}' stream ${s} transport errored:`,_),g.To(new q(N.UNAVAILABLE,"The operation could not be completed")))}),y(f,Gc.EventType.MESSAGE,_=>{var x;if(!m){const v=_.data[0];Ce(!!v);const w=v,E=w.error||((x=w[0])===null||x===void 0?void 0:x.error);if(E){Q(Et,`RPC '${e}' stream ${s} received error:`,E);const S=E.status;let b=function(A){const C=Xe[A];if(C!==void 0)return k2(C)}(S),T=E.message;b===void 0&&(b=N.INTERNAL,T="Unknown error status: "+S+" with message "+E.message),m=!0,g.To(new q(b,T)),f.close()}else Q(Et,`RPC '${e}' stream ${s} received:`,v),g.Eo(v)}}),y(a,z$.STAT_EVENT,_=>{_.stat===yw.PROXY?Q(Et,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===yw.NOPROXY&&Q(Et,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{g.Io()},0),g}}function _p(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t){return new K6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Do=r,this.vo=s,this.Co=i,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}reset(){this.Fo=0}Oo(){this.Fo=this.Co}No(e){this.cancel();const n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Fo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Mo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.xo=Date.now(),e())),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}Lo(){this.Mo!==null&&(this.Mo.skipDelay(),this.Mo=null)}cancel(){this.Mo!==null&&(this.Mo.cancel(),this.Mo=null)}Bo(){return(Math.random()-.5)*this.Fo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.ko=r,this.qo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new U2(e,n)}Wo(){return this.state===1||this.state===5||this.Go()}Go(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.zo()}async stop(){this.Wo()&&await this.close(0)}jo(){this.state=0,this.Uo.reset()}Ho(){this.Go()&&this.Ko===null&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,()=>this.Jo()))}Yo(e){this.Zo(),this.stream.send(e)}async Jo(){if(this.Go())return this.close(0)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}Xo(){this.$o&&(this.$o.cancel(),this.$o=null)}async close(e,n){this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,e!==4?this.Uo.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(Ar(n.toString()),Ar("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.e_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.lo(n)}e_(){}auth(){this.state=1;const e=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Qo===n&&this.n_(r,s)},r=>{e(()=>{const s=new q(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.r_(s)})})}n_(e,n){const r=this.t_(this.Qo);this.stream=this.i_(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.$o=this.oi.enqueueAfterDelay(this.qo,1e4,()=>(this.Go()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.lo(s=>{r(()=>this.r_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}zo(){this.state=5,this.Uo.No(async()=>{this.state=0,this.start()})}r_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}t_(e){return n=>{this.oi.enqueueAndForget(()=>this.Qo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DF extends B2{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}i_(e,n){return this.connection.bo("Listen",e,n)}onMessage(e){this.Uo.reset();const n=X6(this.serializer,e),r=function(i){if(!("targetChange"in i))return se.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?se.min():o.readTime?tr(o.readTime):se.min()}(e);return this.listener.s_(n,r)}o_(e){const n={};n.database=Tg(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=yg(l)?{documents:Z6(i,l)}:{query:eF(i,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=j2(i,o.resumeToken);const c=_g(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(se.min())>0){a.readTime=Cd(i,o.snapshotVersion.toTimestamp());const c=_g(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=nF(this.serializer,e);r&&(n.labels=r),this.Yo(n)}__(e){const n={};n.database=Tg(this.serializer),n.removeTarget=e,this.Yo(n)}}class MF extends B2{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.a_=!1}get u_(){return this.a_}start(){this.a_=!1,this.lastStreamToken=void 0,super.start()}e_(){this.a_&&this.c_([])}i_(e,n){return this.connection.bo("Write",e,n)}onMessage(e){if(Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();const n=J6(e.writeResults,e.commitTime),r=tr(e.commitTime);return this.listener.l_(r,n)}return Ce(!e.writeResults||e.writeResults.length===0),this.a_=!0,this.listener.h_()}P_(){const e={};e.database=Tg(this.serializer),this.Yo(e)}c_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Y6(this.serializer,r))};this.Yo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.I_=!1}T_(){if(this.I_)throw new q(N.FAILED_PRECONDITION,"The client has already been terminated.")}fo(e,n,r){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.fo(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(N.UNKNOWN,s.toString())})}So(e,n,r,s){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(N.UNKNOWN,i.toString())})}terminate(){this.I_=!0}}class FF{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}V_(){this.d_===0&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.A_=null,this.f_("Backend didn't respond within 10 seconds."),this.m_("Offline"),Promise.resolve())))}g_(e){this.state==="Online"?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.m_("Offline")))}set(e){this.p_(),this.d_=0,e==="Online"&&(this.R_=!1),this.m_(e)}m_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}f_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.R_?(Ar(n),this.R_=!1):Q("OnlineStateTracker",n)}p_(){this.A_!==null&&(this.A_.cancel(),this.A_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=i,this.D_.Xs(o=>{r.enqueueAndForget(async()=>{Pi(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=oe(l);c.S_.add(4),await mc(c),c.v_.set("Unknown"),c.S_.delete(4),await Hh(c)}(this))})}),this.v_=new FF(r,s)}}async function Hh(t){if(Pi(t))for(const e of t.b_)await e(!0)}async function mc(t){for(const e of t.b_)await e(!1)}function z2(t,e){const n=oe(t);n.w_.has(e.targetId)||(n.w_.set(e.targetId,e),rv(n)?nv(n):ta(n).Go()&&tv(n,e))}function W2(t,e){const n=oe(t),r=ta(n);n.w_.delete(e),r.Go()&&H2(n,e),n.w_.size===0&&(r.Go()?r.Ho():Pi(n)&&n.v_.set("Unknown"))}function tv(t,e){if(t.C_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ta(t).o_(e)}function H2(t,e){t.C_.Le(e),ta(t).__(e)}function nv(t){t.C_=new z6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.w_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),ta(t).start(),t.v_.V_()}function rv(t){return Pi(t)&&!ta(t).Wo()&&t.w_.size>0}function Pi(t){return oe(t).S_.size===0}function q2(t){t.C_=void 0}async function UF(t){t.w_.forEach((e,n)=>{tv(t,e)})}async function BF(t,e){q2(t),rv(t)?(t.v_.g_(e),nv(t)):t.v_.set("Unknown")}async function zF(t,e,n){if(t.v_.set("Online"),e instanceof N2&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.w_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.w_.delete(a),s.C_.removeTarget(a))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await kd(t,r)}else if(e instanceof Au?t.C_.Ge(e):e instanceof P2?t.C_.Xe(e):t.C_.He(e),!n.isEqual(se.min()))try{const r=await V2(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.C_._t(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.w_.get(c);d&&i.w_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.w_.get(l);if(!d)return;i.w_.set(l,d.withResumeToken(Lt.EMPTY_BYTE_STRING,d.snapshotVersion)),H2(i,l);const f=new ts(d.target,l,c,d.sequenceNumber);tv(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await kd(t,r)}}async function kd(t,e,n){if(!dc(e))throw e;t.S_.add(1),await mc(t),t.v_.set("Offline"),n||(n=()=>V2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.S_.delete(1),await Hh(t)})}function K2(t,e){return e().catch(n=>kd(t,n,e))}async function qh(t){const e=oe(t),n=Es(e);let r=e.y_.length>0?e.y_[e.y_.length-1].batchId:-1;for(;WF(e);)try{const s=await AF(e.localStore,r);if(s===null){e.y_.length===0&&n.Ho();break}r=s.batchId,HF(e,s)}catch(s){await kd(e,s)}Q2(e)&&G2(e)}function WF(t){return Pi(t)&&t.y_.length<10}function HF(t,e){t.y_.push(e);const n=Es(t);n.Go()&&n.u_&&n.c_(e.mutations)}function Q2(t){return Pi(t)&&!Es(t).Wo()&&t.y_.length>0}function G2(t){Es(t).start()}async function qF(t){Es(t).P_()}async function KF(t){const e=Es(t);for(const n of t.y_)e.c_(n.mutations)}async function QF(t,e,n){const r=t.y_.shift(),s=G0.from(r,e,n);await K2(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await qh(t)}async function GF(t,e){e&&Es(t).u_&&await async function(r,s){if(function(o){return V6(o)&&o!==N.ABORTED}(s.code)){const i=r.y_.shift();Es(r).jo(),await K2(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await qh(r)}}(t,e),Q2(t)&&G2(t)}async function zw(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=Pi(n);n.S_.add(3),await mc(n),r&&n.v_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.S_.delete(3),await Hh(n)}async function XF(t,e){const n=oe(t);e?(n.S_.delete(2),await Hh(n)):e||(n.S_.add(2),await mc(n),n.v_.set("Unknown"))}function ta(t){return t.F_||(t.F_=function(n,r,s){const i=oe(n);return i.T_(),new DF(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:UF.bind(null,t),lo:BF.bind(null,t),s_:zF.bind(null,t)}),t.b_.push(async e=>{e?(t.F_.jo(),rv(t)?nv(t):t.v_.set("Unknown")):(await t.F_.stop(),q2(t))})),t.F_}function Es(t){return t.M_||(t.M_=function(n,r,s){const i=oe(n);return i.T_(),new MF(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:qF.bind(null,t),lo:GF.bind(null,t),h_:KF.bind(null,t),l_:QF.bind(null,t)}),t.b_.push(async e=>{e?(t.M_.jo(),await qh(t)):(await t.M_.stop(),t.y_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.y_.length} pending writes`),t.y_=[]))})),t.M_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new sv(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function iv(t,e){if(Ar("AsyncQueue",`${e}: ${t}`),dc(t))return new q(N.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=ka(),this.sortedSet=new Fe(this.comparator)}static emptySet(e){return new po(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof po)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new po;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(){this.x_=new Fe(J.comparator)}track(e){const n=e.doc.key,r=this.x_.get(n);r?e.type!==0&&r.type===3?this.x_=this.x_.insert(n,e):e.type===3&&r.type!==1?this.x_=this.x_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.x_=this.x_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.x_=this.x_.remove(n):e.type===1&&r.type===2?this.x_=this.x_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):ee():this.x_=this.x_.insert(n,e)}O_(){const e=[];return this.x_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Mo{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Mo(e,n,po.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(){this.N_=void 0,this.listeners=[]}}class JF{constructor(){this.queries=new ea(e=>y2(e),Fh),this.onlineState="Unknown",this.B_=new Set}}async function X2(t,e){const n=oe(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new YF),s)try{i.N_=await n.onListen(r)}catch(o){const a=iv(o,`Initialization of query '${wg(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.L_(n.onlineState),i.N_&&e.k_(i.N_)&&ov(n)}async function Y2(t,e){const n=oe(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function ZF(t,e){const n=oe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.k_(s)&&(r=!0);o.N_=s}}r&&ov(n)}function eV(t,e,n){const r=oe(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function ov(t){t.B_.forEach(e=>{e.next()})}class J2{constructor(e,n,r){this.query=e,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}k_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Mo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),n=!0):this.W_(e,this.onlineState)&&(this.G_(e),n=!0),this.K_=e,n}onError(e){this.q_.error(e)}L_(e){this.onlineState=e;let n=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),n=!0),n}W_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}U_(e){if(e.docChanges.length>0)return!0;const n=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}G_(e){e=Mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e){this.key=e}}class eR{constructor(e){this.key=e}}class tV{constructor(e,n){this.query=e,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=ce(),this.mutatedKeys=ce(),this.ia=v2(e),this.sa=new po(this.ia)}get oa(){return this.ta}_a(e,n){const r=n?n.aa:new Ww,s=n?n.sa:this.sa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,f)=>{const p=s.get(d),m=Vh(this.query,f)?f:null,g=!!p&&this.mutatedKeys.has(p.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let _=!1;p&&m?p.data.isEqual(m.data)?g!==y&&(r.track({type:3,doc:m}),_=!0):this.ua(p,m)||(r.track({type:2,doc:m}),_=!0,(l&&this.ia(m,l)>0||c&&this.ia(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),_=!0):p&&!m&&(r.track({type:1,doc:p}),_=!0,(l||c)&&(a=!0)),_&&(m?(o=o.add(m),i=y?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{sa:o,aa:r,Hi:a,mutatedKeys:i}}ua(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;const i=e.aa.O_();i.sort((c,d)=>function(p,m){const g=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return g(p)-g(m)}(c.type,d.type)||this.ia(c.doc,d.doc)),this.ca(r);const o=n?this.la():[],a=this.ra.size===0&&this.current?1:0,l=a!==this.na;return this.na=a,i.length!==0||l?{snapshot:new Mo(this.query,e.sa,s,i,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ha:o}:{ha:o}}L_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({sa:this.sa,aa:new Ww,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}Pa(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}ca(e){e&&(e.addedDocuments.forEach(n=>this.ta=this.ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ta=this.ta.delete(n)),this.current=e.current)}la(){if(!this.current)return[];const e=this.ra;this.ra=ce(),this.sa.forEach(r=>{this.Pa(r.key)&&(this.ra=this.ra.add(r.key))});const n=[];return e.forEach(r=>{this.ra.has(r)||n.push(new eR(r))}),this.ra.forEach(r=>{e.has(r)||n.push(new Z2(r))}),n}Ia(e){this.ta=e._s,this.ra=ce();const n=this._a(e.documents);return this.applyChanges(n,!0)}Ta(){return Mo.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,this.na===0,this.hasCachedResults)}}class nV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class rV{constructor(e){this.key=e,this.Ea=!1}}class sV{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.da={},this.Aa=new ea(a=>y2(a),Fh),this.Ra=new Map,this.Va=new Set,this.ma=new Fe(J.comparator),this.fa=new Map,this.ga=new J0,this.pa={},this.ya=new Map,this.wa=Do.Bn(),this.onlineState="Unknown",this.Sa=void 0}get isPrimaryClient(){return this.Sa===!0}}async function iV(t,e){const n=mV(t);let r,s;const i=n.Aa.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Ta();else{const o=await CF(n.localStore,Cr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await oV(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&z2(n.remoteStore,o)}return s}async function oV(t,e,n,r,s){t.ba=(f,p,m)=>async function(y,_,x,v){let w=_.view._a(x);w.Hi&&(w=await Vw(y.localStore,_.query,!1).then(({documents:b})=>_.view._a(b,w)));const E=v&&v.targetChanges.get(_.targetId),S=_.view.applyChanges(w,y.isPrimaryClient,E);return qw(y,_.targetId,S.ha),S.snapshot}(t,f,p,m);const i=await Vw(t.localStore,e,!0),o=new tV(e,i._s),a=o._a(i.documents),l=pc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);qw(t,n,c.ha);const d=new nV(e,n,o);return t.Aa.set(e,d),t.Ra.has(n)?t.Ra.get(n).push(e):t.Ra.set(n,[e]),c.snapshot}async function aV(t,e){const n=oe(t),r=n.Aa.get(e),s=n.Ra.get(r.targetId);if(s.length>1)return n.Ra.set(r.targetId,s.filter(i=>!Fh(i,e))),void n.Aa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await bg(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),W2(n.remoteStore,r.targetId),Ig(n,r.targetId)}).catch(uc)):(Ig(n,r.targetId),await bg(n.localStore,r.targetId,!0))}async function lV(t,e,n){const r=gV(t);try{const s=await function(o,a){const l=oe(o),c=st.now(),d=a.reduce((m,g)=>m.add(g.key),ce());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=kr(),y=ce();return l.ts.getEntries(m,d).next(_=>{g=_,g.forEach((x,v)=>{v.isValidDocument()||(y=y.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,g)).next(_=>{f=_;const x=[];for(const v of a){const w=L6(v,f.get(v.key).overlayedDocument);w!=null&&x.push(new ki(v.key,w,l2(w.value.mapValue),er.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,x,a)}).next(_=>{p=_;const x=_.applyToLocalDocumentSet(f,y);return l.documentOverlayCache.saveOverlays(m,_.batchId,x)})}).then(()=>({batchId:p.batchId,changes:w2(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.pa[o.currentUser.toKey()];c||(c=new Fe(me)),c=c.insert(a,l),o.pa[o.currentUser.toKey()]=c}(r,s.batchId,n),await gc(r,s.changes),await qh(r.remoteStore)}catch(s){const i=iv(s,"Failed to persist write");n.reject(i)}}async function tR(t,e){const n=oe(t);try{const r=await IF(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.fa.get(i);o&&(Ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ea=!0:s.modifiedDocuments.size>0?Ce(o.Ea):s.removedDocuments.size>0&&(Ce(o.Ea),o.Ea=!1))}),await gc(n,r,e)}catch(r){await uc(r)}}function Hw(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Aa.forEach((i,o)=>{const a=o.view.L_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=oe(o);l.onlineState=a;let c=!1;l.queries.forEach((d,f)=>{for(const p of f.listeners)p.L_(a)&&(c=!0)}),c&&ov(l)}(r.eventManager,e),s.length&&r.da.s_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cV(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.fa.get(e),i=s&&s.key;if(i){let o=new Fe(J.comparator);o=o.insert(i,Rt.newNoDocument(i,se.min()));const a=ce().add(i),l=new zh(se.min(),new Map,new Fe(me),o,a);await tR(r,l),r.ma=r.ma.remove(i),r.fa.delete(e),av(r)}else await bg(r.localStore,e,!1).then(()=>Ig(r,e,n)).catch(uc)}async function uV(t,e){const n=oe(t),r=e.batch.batchId;try{const s=await bF(n.localStore,e);rR(n,r,null),nR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await gc(n,s)}catch(s){await uc(s)}}async function dV(t,e,n){const r=oe(t);try{const s=await function(o,a){const l=oe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Ce(f!==null),d=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);rR(r,e,n),nR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await gc(r,s)}catch(s){await uc(s)}}function nR(t,e){(t.ya.get(e)||[]).forEach(n=>{n.resolve()}),t.ya.delete(e)}function rR(t,e,n){const r=oe(t);let s=r.pa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.pa[r.currentUser.toKey()]=s}}function Ig(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ra.get(e))t.Aa.delete(r),n&&t.da.Da(r,n);t.Ra.delete(e),t.isPrimaryClient&&t.ga.Vr(e).forEach(r=>{t.ga.containsKey(r)||sR(t,r)})}function sR(t,e){t.Va.delete(e.path.canonicalString());const n=t.ma.get(e);n!==null&&(W2(t.remoteStore,n),t.ma=t.ma.remove(e),t.fa.delete(n),av(t))}function qw(t,e,n){for(const r of n)r instanceof Z2?(t.ga.addReference(r.key,e),hV(t,r)):r instanceof eR?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.ga.removeReference(r.key,e),t.ga.containsKey(r.key)||sR(t,r.key)):ee()}function hV(t,e){const n=e.key,r=n.path.canonicalString();t.ma.get(n)||t.Va.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.Va.add(r),av(t))}function av(t){for(;t.Va.size>0&&t.ma.size<t.maxConcurrentLimboResolutions;){const e=t.Va.values().next().value;t.Va.delete(e);const n=new J(Re.fromString(e)),r=t.wa.next();t.fa.set(r,new rV(n)),t.ma=t.ma.insert(n,r),z2(t.remoteStore,new ts(Cr(q0(n.path)),r,"TargetPurposeLimboResolution",V0.ae))}}async function gc(t,e,n){const r=oe(t),s=[],i=[],o=[];r.Aa.isEmpty()||(r.Aa.forEach((a,l)=>{o.push(r.ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const d=ev.Ki(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.da.s_(s),await async function(l,c){const d=oe(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>M.forEach(c,p=>M.forEach(p.qi,m=>d.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>M.forEach(p.Qi,m=>d.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!dc(f))throw f;Q("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=d.Zi.get(p),g=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(g);d.Zi=d.Zi.insert(p,y)}}}(r.localStore,i))}async function fV(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await F2(n.localStore,e);n.currentUser=e,function(i,o){i.ya.forEach(a=>{a.forEach(l=>{l.reject(new q(N.CANCELLED,o))})}),i.ya.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gc(n,r.rs)}}function pV(t,e){const n=oe(t),r=n.fa.get(e);if(r&&r.Ea)return ce().add(r.key);{let s=ce();const i=n.Ra.get(e);if(!i)return s;for(const o of i){const a=n.Aa.get(o);s=s.unionWith(a.view.oa)}return s}}function mV(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cV.bind(null,e),e.da.s_=ZF.bind(null,e.eventManager),e.da.Da=eV.bind(null,e.eventManager),e}function gV(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dV.bind(null,e),e}class Kw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Wh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return TF(this.persistence,new EF,e.initialUser,this.serializer)}createPersistence(e){return new wF(Z0.Hr,this.serializer)}createSharedClientState(e){return new PF}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class yV{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Hw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fV.bind(null,this.syncEngine),await XF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new JF}()}createDatastore(e){const n=Wh(e.databaseInfo.databaseId),r=function(i){return new LF(i)}(e.databaseInfo);return function(i,o,a,l){return new $F(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new VF(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Hw(this.syncEngine,n,0),function(){return Bw.v()?new Bw:new NF}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const f=new sV(s,i,o,a,l,c);return d&&(f.Sa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=oe(n);Q("RemoteStore","RemoteStore shutting down."),r.S_.add(5),await mc(r),r.D_.shutdown(),r.v_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Fa(this.observer.next,e)}error(e){this.observer.error?this.Fa(this.observer.error,e):Ar("Uncaught Error in snapshot listener:",e.toString())}Ma(){this.muted=!0}Fa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Tt.UNAUTHENTICATED,this.clientId=i2.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{Q("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(Q("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new q(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=iv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ep(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await F2(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Qw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await wV(t);Q("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>zw(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>zw(e.remoteStore,i)),t._onlineComponents=e}function xV(t){return t.name==="FirebaseError"?t.code===N.FAILED_PRECONDITION||t.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function wV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ep(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!xV(n))throw n;No("Error using user provided cache. Falling back to memory cache: "+n),await Ep(t,new Kw)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await Ep(t,new Kw);return t._offlineComponents}async function oR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await Qw(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await Qw(t,new yV))),t._onlineComponents}function _V(t){return oR(t).then(e=>e.syncEngine)}async function aR(t){const e=await oR(t),n=e.eventManager;return n.onListen=iV.bind(null,e.syncEngine),n.onUnlisten=aV.bind(null,e.syncEngine),n}function EV(t,e,n={}){const r=new wr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new iR({next:p=>{o.enqueueAndForget(()=>Y2(i,f));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new q(N.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new q(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new J2(q0(a.path),d,{includeMetadataChanges:!0,z_:!0});return X2(i,f)}(await aR(t),t.asyncQueue,e,n,r)),r.promise}function SV(t,e,n={}){const r=new wr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new iR({next:p=>{o.enqueueAndForget(()=>Y2(i,f)),p.fromCache&&l.source==="server"?c.reject(new q(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new J2(a,d,{includeMetadataChanges:!0,z_:!0});return X2(i,f)}(await aR(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(t,e,n){if(!n)throw new q(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function TV(t,e,n,r){if(e===!0&&r===!0)throw new q(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Xw(t){if(!J.isDocumentKey(t))throw new q(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Yw(t){if(J.isDocumentKey(t))throw new q(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Kh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee()}function Ss(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kh(t);throw new q(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new q(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new q(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new q(N.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new q(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new q(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new q$;switch(r.type){case"firstParty":return new X$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Gw.get(n);r&&(Q("ComponentProvider","Removing Datastore"),Gw.delete(n),r.terminate())}(this),Promise.resolve()}}function bV(t,e,n,r={}){var s;const i=(t=Ss(t,Qh))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&No("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Tt.MOCK_USER;else{a=vb(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new q(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Tt(c)}t._authCredentials=new K$(new s2(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new na(this.firestore,e,this._query)}}class Yt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yt(this.firestore,e,this._key)}}class ps extends na{constructor(e,n,r){super(e,n,q0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yt(this.firestore,null,new J(e))}withConverter(e){return new ps(this.firestore,e,this._path)}}function ra(t,e,...n){if(t=it(t),cR("collection","path",e),t instanceof Qh){const r=Re.fromString(e,...n);return Yw(r),new ps(t,null,r)}{if(!(t instanceof Yt||t instanceof ps))throw new q(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return Yw(r),new ps(t.firestore,null,r)}}function lv(t,e,...n){if(t=it(t),arguments.length===1&&(e=i2.V()),cR("doc","path",e),t instanceof Qh){const r=Re.fromString(e,...n);return Xw(r),new Yt(t,null,new J(r))}{if(!(t instanceof Yt||t instanceof ps))throw new q(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return Xw(r),new Yt(t.firestore,t instanceof ps?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(){this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new U2(this,"async_queue_retry"),this.tu=()=>{const n=_p();n&&Q("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Uo.Lo()};const e=_p();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.tu)}get isShuttingDown(){return this.Ha}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nu(),this.ru(e)}enterRestrictedMode(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;const n=_p();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.tu)}}enqueue(e){if(this.nu(),this.Ha)return new Promise(()=>{});const n=new wr;return this.ru(()=>this.Ha&&this.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ja.push(e),this.iu()))}async iu(){if(this.ja.length!==0){try{await this.ja[0](),this.ja.shift(),this.Uo.reset()}catch(e){if(!dc(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.ja.length>0&&this.Uo.No(()=>this.iu())}}ru(e){const n=this.za.then(()=>(this.Za=!0,e().catch(r=>{this.Ya=r,this.Za=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ar("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Za=!1,r))));return this.za=n,n}enqueueAfterDelay(e,n,r){this.nu(),this.eu.indexOf(e)>-1&&(n=0);const s=sv.createAndSchedule(this,e,n,r,i=>this.su(i));return this.Ja.push(s),s}nu(){this.Ya&&ee()}verifyOperationInProgress(){}async ou(){let e;do e=this.za,await e;while(e!==this.za)}_u(e){for(const n of this.Ja)if(n.timerId===e)return!0;return!1}au(e){return this.ou().then(()=>{this.Ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ou()})}uu(e){this.eu.push(e)}su(e){const n=this.Ja.indexOf(e);this.Ja.splice(n,1)}}class yc extends Qh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new IV}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||uR(this),this._firestoreClient.terminate()}}function RV(t,e){const n=typeof t=="object"?t:l0(),r=typeof t=="string"?t:e||"(default)",s=yh(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=mb("firestore");i&&bV(s,...i)}return s}function cv(t){return t._firestoreClient||uR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function uR(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new l6(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,lR(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new vV(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $o(Lt.fromBase64String(e))}catch(n){throw new q(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $o(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV=/^__.*__$/;class CV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ki(e,this.data,this.fieldMask,n,this.fieldTransforms):new fc(e,this.data,n,this.fieldTransforms)}}function hR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}class hv{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.cu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get lu(){return this.settings.lu}hu(e){return new hv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.Tu(e),s}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.cu(),s}du(e){return this.hu({path:void 0,Iu:!0})}Au(e){return Pd(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}cu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}Tu(e){if(e.length===0)throw this.Au("Document fields must not be empty");if(hR(this.lu)&&AV.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}class kV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Wh(e)}mu(e,n,r,s=!1){return new hv({lu:e,methodName:n,Vu:r,path:At.emptyPath(),Iu:!1,Ru:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fR(t){const e=t._freezeSettings(),n=Wh(t._databaseId);return new kV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function PV(t,e,n,r,s,i={}){const o=t.mu(i.merge||i.mergeFields?2:0,e,n,s);gR("Data must be an object, but it was:",o,r);const a=pR(r,o);let l,c;if(i.merge)l=new On(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const p=jV(e,f,n);if(!o.contains(p))throw new q(N.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);LV(d,p)||d.push(p)}l=new On(d),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new CV(new _n(a),l,c)}function NV(t,e,n,r=!1){return fv(n,t.mu(r?4:3,e))}function fv(t,e){if(mR(t=it(t)))return gR("Unsupported field value:",e,t),pR(t,e);if(t instanceof dR)return function(r,s){if(!hR(s.lu))throw s.Au(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Au(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Iu&&e.lu!==4)throw e.Au("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=fv(a,s.du(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=it(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return C6(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=st.fromDate(r);return{timestampValue:Cd(s.serializer,i)}}if(r instanceof st){const i=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cd(s.serializer,i)}}if(r instanceof dv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $o)return{bytesValue:j2(s.serializer,r._byteString)};if(r instanceof Yt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Au(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Y0(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Au(`Unsupported field value: ${Kh(r)}`)}(t,e)}function pR(t,e){const n={};return o2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zo(t,(r,s)=>{const i=fv(s,e.Pu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function mR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof st||t instanceof dv||t instanceof $o||t instanceof Yt||t instanceof dR)}function gR(t,e,n){if(!mR(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Kh(n);throw r==="an object"?e.Au(t+" a custom object"):e.Au(t+" "+r)}}function jV(t,e,n){if((e=it(e))instanceof uv)return e._internalPath;if(typeof e=="string")return yR(t,e);throw Pd("Field path arguments must be of type string or ",t,!1,void 0,n)}const OV=new RegExp("[~\\*/\\[\\]]");function yR(t,e,n){if(e.search(OV)>=0)throw Pd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new uv(...e.split("."))._internalPath}catch{throw Pd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Pd(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new q(N.INVALID_ARGUMENT,a+t+l)}function LV(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(pv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class DV extends vR{data(){return super.data()}}function pv(t,e){return typeof e=="string"?yR(t,e):e instanceof uv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mv{}class $V extends mv{}function Ls(t,e,...n){let r=[];e instanceof mv&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof gv).length,a=i.filter(l=>l instanceof Gh).length;if(o>1||o>0&&a>0)throw new q(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Gh extends $V{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Gh(e,n,r)}_apply(e){const n=this._parse(e);return xR(e._query,n),new na(e.firestore,e.converter,vg(e._query,n))}_parse(e){const n=fR(e.firestore);return function(i,o,a,l,c,d,f){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new q(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){e_(f,d);const m=[];for(const g of f)m.push(Zw(l,i,g));p={arrayValue:{values:m}}}else p=Zw(l,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||e_(f,d),p=NV(a,o,f,d==="in"||d==="not-in");return Ze.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ds(t,e,n){const r=e,s=pv("where",t);return Gh._create(s,r,n)}class gv extends mv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new gv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Fn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)xR(o,l),o=vg(o,l)}(e._query,n),new na(e.firestore,e.converter,vg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Zw(t,e,n){if(typeof(n=it(n))=="string"){if(n==="")throw new q(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!g2(e)&&n.indexOf("/")!==-1)throw new q(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Re.fromString(n));if(!J.isDocumentKey(r))throw new q(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sw(t,new J(r))}if(n instanceof Yt)return Sw(t,n._key);throw new q(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kh(n)}.`)}function e_(t,e){if(!Array.isArray(t)||t.length===0)throw new q(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xR(t,e){if(e.isInequality()){const r=K0(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new q(N.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const i=m2(t);i!==null&&FV(t,s,i)}const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function FV(t,e,n){if(!n.isEqual(e))throw new q(N.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class VV{convertValue(e,n="none"){switch(yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Zo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new dv(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=B0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(kl(e));default:return null}}convertTimestamp(e){const n=_s(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Re.fromString(e);Ce($2(r));const s=new Pl(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||Ar(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wR extends vR{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Cu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(pv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Cu extends wR{data(e={}){return super.data(e)}}class BV{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Na(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Cu(this._firestore,this._userDataWriter,r.key,r,new Na(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Cu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Na(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Cu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Na(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:zV(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function zV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(t){t=Ss(t,Yt);const e=Ss(t.firestore,yc);return EV(cv(e),t._key).then(n=>KV(e,t,n))}class _R extends VV{constructor(e){super(),this.firestore=e}convertBytes(e){return new $o(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,n)}}function Ms(t){t=Ss(t,na);const e=Ss(t.firestore,yc),n=cv(e),r=new _R(e);return MV(t._query),SV(n,t._query).then(s=>new BV(e,r,t,s))}function HV(t,e,n){t=Ss(t,Yt);const r=Ss(t.firestore,yc),s=UV(t.converter,e,n);return ER(r,[PV(fR(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,er.none())])}function qV(t){return ER(Ss(t.firestore,yc),[new Q0(t._key,er.none())])}function ER(t,e){return function(r,s){const i=new wr;return r.asyncQueue.enqueueAndForget(async()=>lV(await _V(r),s,i)),i.promise}(cv(t),e)}function KV(t,e,n){const r=n.docs.get(e._key),s=new _R(t);return new wR(t,s,e._key,r,new Na(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Jo=s})(Ai),fi(new xs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new yc(new Q$(r.getProvider("auth-internal")),new J$(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new q(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pl(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Yn(vw,"4.1.2",e),Yn(vw,"4.1.2","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR="firebasestorage.googleapis.com",TR="storageBucket",QV=2*60*1e3,GV=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He extends lr{constructor(e,n,r=0){super(Sp(e),`Firebase Storage: ${n} (${Sp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,He.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Sp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var We;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(We||(We={}));function Sp(t){return"storage/"+t}function yv(){const t="An unknown error occurred, please check the error payload for server response.";return new He(We.UNKNOWN,t)}function XV(t){return new He(We.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function YV(t){return new He(We.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function JV(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new He(We.UNAUTHENTICATED,t)}function ZV(){return new He(We.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function e9(t){return new He(We.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function t9(){return new He(We.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function n9(){return new He(We.CANCELED,"User canceled the upload/download.")}function r9(t){return new He(We.INVALID_URL,"Invalid URL '"+t+"'.")}function s9(t){return new He(We.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function i9(){return new He(We.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+TR+"' property when initializing the app?")}function o9(){return new He(We.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function a9(){return new He(We.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function l9(t){return new He(We.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Rg(t){return new He(We.INVALID_ARGUMENT,t)}function bR(){return new He(We.APP_DELETED,"The Firebase app was deleted.")}function c9(t){return new He(We.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xa(t,e){return new He(We.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function _a(t){throw new He(We.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=rn.makeFromUrl(e,n)}catch{return new rn(e,"")}if(r.path==="")return r;throw s9(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${d}/b/${s}/o${p}`,"i"),g={bucket:1,path:3},y=n===SR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",x=new RegExp(`^https?://${y}/${s}/${_}`,"i"),w=[{regex:a,indices:l,postModify:i},{regex:m,indices:g,postModify:c},{regex:x,indices:{bucket:1,path:2},postModify:c}];for(let E=0;E<w.length;E++){const S=w[E],b=S.regex.exec(e);if(b){const T=b[S.indices.bucket];let I=b[S.indices.path];I||(I=""),r=new rn(T,I),S.postModify(r);break}}if(r==null)throw r9(e);return r}}class u9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d9(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(..._){c||(c=!0,e.apply(null,_))}function f(_){s=setTimeout(()=>{s=null,t(m,l())},_)}function p(){i&&clearTimeout(i)}function m(_,...x){if(c){p();return}if(_){p(),d.call(null,_,...x);return}if(l()||o){p(),d.call(null,_,...x);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,f(w)}let g=!1;function y(_){g||(g=!0,p(),!c&&(s!==null?(_||(a=2),clearTimeout(s),f(0)):_||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,y(!0)},n),y}function h9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f9(t){return t!==void 0}function p9(t){return typeof t=="object"&&!Array.isArray(t)}function vv(t){return typeof t=="string"||t instanceof String}function t_(t){return xv()&&t instanceof Blob}function xv(){return typeof Blob<"u"&&!xL()}function n_(t,e,n,r){if(r<e)throw Rg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Rg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function IR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ii;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ii||(ii={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m9(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(e,n,r,s,i,o,a,l,c,d,f,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,g)=>{this.resolve_=m,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Zc(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===ii.NO_ERROR,l=i.getStatus();if(!a||m9(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===ii.ABORT;r(!1,new Zc(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Zc(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());f9(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=yv();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?bR():n9();o(l)}else{const l=t9();o(l)}};this.canceled_?n(!1,new Zc(!1,null,!0)):this.backoffId_=d9(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&h9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Zc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function y9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function v9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function x9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function w9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function _9(t,e,n,r,s,i,o=!0){const a=IR(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return x9(c,e),y9(c,n),v9(c,i),w9(c,r),new g9(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function S9(...t){const e=E9();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(xv())return new Blob(t);throw new He(We.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function T9(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b9(t){if(typeof atob>"u")throw l9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Tp{constructor(e,n){this.data=e,this.contentType=n||null}}function I9(t,e){switch(t){case Qn.RAW:return new Tp(RR(e));case Qn.BASE64:case Qn.BASE64URL:return new Tp(AR(t,e));case Qn.DATA_URL:return new Tp(A9(e),C9(e))}throw yv()}function RR(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function R9(t){let e;try{e=decodeURIComponent(t)}catch{throw Xa(Qn.DATA_URL,"Malformed data URL.")}return RR(e)}function AR(t,e){switch(t){case Qn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Xa(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Qn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Xa(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=b9(e)}catch(s){throw s.message.includes("polyfill")?s:Xa(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class CR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Xa(Qn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=k9(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function A9(t){const e=new CR(t);return e.base64?AR(Qn.BASE64,e.rest):R9(e.rest)}function C9(t){return new CR(t).contentType}function k9(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n){let r=0,s="";t_(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(t_(this.data_)){const r=this.data_,s=T9(r,e,n);return s===null?null:new Xr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Xr(r,!0)}}static getBlob(...e){if(xv()){const n=e.map(r=>r instanceof Xr?r.data_:r);return new Xr(S9.apply(null,n))}else{const n=e.map(o=>vv(o)?I9(Qn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Xr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(t){let e;try{e=JSON.parse(t)}catch{return null}return p9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P9(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function N9(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function PR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j9(t,e){return e}class Mt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||j9}}let eu=null;function O9(t){return!vv(t)||t.length<2?t:PR(t)}function NR(){if(eu)return eu;const t=[];t.push(new Mt("bucket")),t.push(new Mt("generation")),t.push(new Mt("metageneration")),t.push(new Mt("name","fullPath",!0));function e(i,o){return O9(o)}const n=new Mt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Mt("size");return s.xform=r,t.push(s),t.push(new Mt("timeCreated")),t.push(new Mt("updated")),t.push(new Mt("md5Hash",null,!0)),t.push(new Mt("cacheControl",null,!0)),t.push(new Mt("contentDisposition",null,!0)),t.push(new Mt("contentEncoding",null,!0)),t.push(new Mt("contentLanguage",null,!0)),t.push(new Mt("contentType",null,!0)),t.push(new Mt("metadata","customMetadata",!0)),eu=t,eu}function L9(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new rn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function D9(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return L9(r,t),r}function jR(t,e,n){const r=kR(e);return r===null?null:D9(t,r,n)}function M9(t,e,n,r){const s=kR(e);if(s===null||!vv(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,f=t.fullPath,p="/b/"+o(d)+"/o/"+o(f),m=Xh(p,n,r),g=IR({alt:"media",token:c});return m+g})[0]}function $9(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class wv{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(t){if(!t)throw yv()}function F9(t,e){function n(r,s){const i=jR(t,s,e);return OR(i!==null),i}return n}function V9(t,e){function n(r,s){const i=jR(t,s,e);return OR(i!==null),M9(i,s,t.host,t._protocol)}return n}function LR(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=ZV():s=JV():n.getStatus()===402?s=YV(t.bucket):n.getStatus()===403?s=e9(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function DR(t){const e=LR(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=XV(t.path)),i.serverResponse=s.serverResponse,i}return n}function U9(t,e,n){const r=e.fullServerUrl(),s=Xh(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new wv(s,i,V9(t,n),o);return a.errorHandler=DR(e),a}function B9(t,e){const n=e.fullServerUrl(),r=Xh(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new wv(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=DR(e),a}function z9(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function W9(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=z9(null,e)),r}function H9(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=W9(e,r,s),d=$9(c,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=Xr.getBlob(f,r,p);if(m===null)throw o9();const g={name:c.fullPath},y=Xh(i,t.host,t._protocol),_="POST",x=t.maxUploadRetryTime,v=new wv(y,_,F9(t,n),x);return v.urlParams=g,v.headers=o,v.body=m.uploadData(),v.errorHandler=LR(e),v}class q9{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ii.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ii.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ii.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw _a("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw _a("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw _a("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw _a("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw _a("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class K9 extends q9{initXhr(){this.xhr_.responseType="text"}}function _v(){return new K9}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n){this._service=e,n instanceof rn?this._location=n:this._location=rn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new vi(e,n)}get root(){const e=new rn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return PR(this._location.path)}get storage(){return this._service}get parent(){const e=P9(this._location.path);if(e===null)return null;const n=new rn(this._location.bucket,e);return new vi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw c9(e)}}function Q9(t,e,n){t._throwIfRoot("uploadBytes");const r=H9(t.storage,t._location,NR(),new Xr(e,!0),n);return t.storage.makeRequestWithTokens(r,_v).then(s=>({metadata:s,ref:t}))}function G9(t){t._throwIfRoot("getDownloadURL");const e=U9(t.storage,t._location,NR());return t.storage.makeRequestWithTokens(e,_v).then(n=>{if(n===null)throw a9();return n})}function X9(t){t._throwIfRoot("deleteObject");const e=B9(t.storage,t._location);return t.storage.makeRequestWithTokens(e,_v)}function Y9(t,e){const n=N9(t._location.path,e),r=new rn(t._location.bucket,n);return new vi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J9(t){return/^[A-Za-z]+:\/\//.test(t)}function Z9(t,e){return new vi(t,e)}function MR(t,e){if(t instanceof Ev){const n=t;if(n._bucket==null)throw i9();const r=new vi(n,n._bucket);return e!=null?MR(r,e):r}else return e!==void 0?Y9(t,e):t}function eU(t,e){if(e&&J9(e)){if(t instanceof Ev)return Z9(t,e);throw Rg("To use ref(service, url), the first argument must be a Storage instance.")}else return MR(t,e)}function r_(t,e){const n=e==null?void 0:e[TR];return n==null?null:rn.makeFromBucketSpec(n,t)}function tU(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:vb(s,t.app.options.projectId))}class Ev{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=SR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=QV,this._maxUploadRetryTime=GV,this._requests=new Set,s!=null?this._bucket=rn.makeFromBucketSpec(s,this._host):this._bucket=r_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=rn.makeFromBucketSpec(this._url,e):this._bucket=r_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){n_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){n_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new u9(bR());{const o=_9(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const s_="@firebase/storage",i_="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="storage";function FR(t,e,n){return t=it(t),Q9(t,e,n)}function VR(t){return t=it(t),G9(t)}function nU(t){return t=it(t),X9(t)}function Sv(t,e){return t=it(t),eU(t,e)}function rU(t=l0(),e){t=it(t);const r=yh(t,$R).getImmediate({identifier:e}),s=mb("storage");return s&&sU(r,...s),r}function sU(t,e,n,r={}){tU(t,e,n,r)}function iU(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Ev(n,r,s,e,Ai)}function oU(){fi(new xs($R,iU,"PUBLIC").setMultipleInstances(!0)),Yn(s_,i_,""),Yn(s_,i_,"esm2017")}oU();const aU={apiKey:"AIzaSyBPNpckpYiu009eSzHz_1YMlwHLtScgVjE",authDomain:"zingmp3-clone-61799.firebaseapp.com",projectId:"zingmp3-clone-61799",storageBucket:"zingmp3-clone-61799.appspot.com",messagingSenderId:"938280289868",appId:"1:938280289868:web:1b426fc2dba5d03dde96e9"},Tv=_b(aU),Lr=RV(Tv),Ts=MM(Tv);new zn;const bv=rU(Tv);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function UR(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function BR(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var eo=function(){return eo=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},eo.apply(this,arguments)},zR=function(t){return{loading:t==null,value:t}},lU=function(){return function(t,e){switch(e.type){case"error":return eo(eo({},t),{error:e.error,loading:!1,value:void 0});case"reset":return zR(e.defaultValue);case"value":return eo(eo({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},cU=function(t){var e=t?t():void 0,n=h.useReducer(lU(),zR(e)),r=n[0],s=n[1],i=h.useCallback(function(){var l=t?t():void 0;s({type:"reset",defaultValue:l})},[t]),o=h.useCallback(function(l){s({type:"error",error:l})},[]),a=h.useCallback(function(l){s({type:"value",value:l})},[]);return h.useMemo(function(){return{error:r.error,loading:r.loading,reset:i,setError:o,setValue:a,value:r.value}},[r.error,r.loading,i,o,a,r.value])},vc=function(t,e){var n=cU(function(){return t.currentUser}),r=n.error,s=n.loading,i=n.setError,o=n.setValue,a=n.value;return h.useEffect(function(){var l=bD(t,function(c){return UR(void 0,void 0,void 0,function(){var d;return BR(this,function(f){switch(f.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return f.sent(),[3,4];case 3:return d=f.sent(),i(d),[3,4];case 4:return o(c),[2]}})})},i);return function(){l()}},[t]),[a,s,r]},uU=function(t){var e=h.useCallback(function(n,r){var s=new zn;return n&&n.forEach(function(i){return s.addScope(i)}),r&&s.setCustomParameters(r),s},[]);return dU(t,e)},dU=function(t,e){var n=h.useState(),r=n[0],s=n[1],i=h.useState(),o=i[0],a=i[1],l=h.useState(!1),c=l[0],d=l[1],f=h.useCallback(function(p,m){return UR(void 0,void 0,void 0,function(){var g,y,_;return BR(this,function(x){switch(x.label){case 0:d(!0),s(void 0),x.label=1;case 1:return x.trys.push([1,3,4,5]),g=e(p,m),[4,qD(t,g)];case 2:return y=x.sent(),a(y),[2,y];case 3:return _=x.sent(),s(_),[3,5];case 4:return d(!1),[7];case 5:return[2]}})})},[t,e]);return[f,o,c,r]},WR={exports:{}},HR={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fo=h;function hU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fU=typeof Object.is=="function"?Object.is:hU,pU=Fo.useState,mU=Fo.useEffect,gU=Fo.useLayoutEffect,yU=Fo.useDebugValue;function vU(t,e){var n=e(),r=pU({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return gU(function(){s.value=n,s.getSnapshot=e,bp(s)&&i({inst:s})},[t,n,e]),mU(function(){return bp(s)&&i({inst:s}),t(function(){bp(s)&&i({inst:s})})},[t]),yU(n),n}function bp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fU(t,n)}catch{return!0}}function xU(t,e){return e()}var wU=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?xU:vU;HR.useSyncExternalStore=Fo.useSyncExternalStore!==void 0?Fo.useSyncExternalStore:wU;WR.exports=HR;var _U=WR.exports,qR={exports:{}},KR={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yh=h,EU=_U;function SU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var TU=typeof Object.is=="function"?Object.is:SU,bU=EU.useSyncExternalStore,IU=Yh.useRef,RU=Yh.useEffect,AU=Yh.useMemo,CU=Yh.useDebugValue;KR.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=IU(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=AU(function(){function l(m){if(!c){if(c=!0,d=m,m=r(m),s!==void 0&&o.hasValue){var g=o.value;if(s(g,m))return f=g}return f=m}if(g=f,TU(d,m))return g;var y=r(m);return s!==void 0&&s(g,y)?g:(d=m,f=y)}var c=!1,d,f,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,s]);var a=bU(t,i[0],i[1]);return RU(function(){o.hasValue=!0,o.value=a},[a]),CU(a),a};qR.exports=KR;var kU=qR.exports;function PU(t){t()}let QR=PU;const NU=t=>QR=t,jU=()=>QR,o_=Symbol.for("react-redux-context"),a_=typeof globalThis<"u"?globalThis:{};function OU(){var t;if(!h.createContext)return{};const e=(t=a_[o_])!=null?t:a_[o_]=new Map;let n=e.get(h.createContext);return n||(n=h.createContext(null),e.set(h.createContext,n)),n}const bs=OU();function Iv(t=bs){return function(){return h.useContext(t)}}const GR=Iv(),LU=()=>{throw new Error("uSES not initialized!")};let XR=LU;const DU=t=>{XR=t},MU=(t,e)=>t===e;function $U(t=bs){const e=t===bs?GR:Iv(t);return function(r,s={}){const{equalityFn:i=MU,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof s=="function"?{equalityFn:s}:s,{store:l,subscription:c,getServerState:d,stabilityCheck:f,noopCheck:p}=e();h.useRef(!0);const m=h.useCallback({[r.name](y){return r(y)}}[r.name],[r,f,o]),g=XR(c.addNestedSub,l.getState,d||l.getState,m,i);return h.useDebugValue(g),g}}const K=$U();var YR={exports:{}},we={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dt=typeof Symbol=="function"&&Symbol.for,Rv=dt?Symbol.for("react.element"):60103,Av=dt?Symbol.for("react.portal"):60106,Jh=dt?Symbol.for("react.fragment"):60107,Zh=dt?Symbol.for("react.strict_mode"):60108,ef=dt?Symbol.for("react.profiler"):60114,tf=dt?Symbol.for("react.provider"):60109,nf=dt?Symbol.for("react.context"):60110,Cv=dt?Symbol.for("react.async_mode"):60111,rf=dt?Symbol.for("react.concurrent_mode"):60111,sf=dt?Symbol.for("react.forward_ref"):60112,of=dt?Symbol.for("react.suspense"):60113,FU=dt?Symbol.for("react.suspense_list"):60120,af=dt?Symbol.for("react.memo"):60115,lf=dt?Symbol.for("react.lazy"):60116,VU=dt?Symbol.for("react.block"):60121,UU=dt?Symbol.for("react.fundamental"):60117,BU=dt?Symbol.for("react.responder"):60118,zU=dt?Symbol.for("react.scope"):60119;function gn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Rv:switch(t=t.type,t){case Cv:case rf:case Jh:case ef:case Zh:case of:return t;default:switch(t=t&&t.$$typeof,t){case nf:case sf:case lf:case af:case tf:return t;default:return e}}case Av:return e}}}function JR(t){return gn(t)===rf}we.AsyncMode=Cv;we.ConcurrentMode=rf;we.ContextConsumer=nf;we.ContextProvider=tf;we.Element=Rv;we.ForwardRef=sf;we.Fragment=Jh;we.Lazy=lf;we.Memo=af;we.Portal=Av;we.Profiler=ef;we.StrictMode=Zh;we.Suspense=of;we.isAsyncMode=function(t){return JR(t)||gn(t)===Cv};we.isConcurrentMode=JR;we.isContextConsumer=function(t){return gn(t)===nf};we.isContextProvider=function(t){return gn(t)===tf};we.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Rv};we.isForwardRef=function(t){return gn(t)===sf};we.isFragment=function(t){return gn(t)===Jh};we.isLazy=function(t){return gn(t)===lf};we.isMemo=function(t){return gn(t)===af};we.isPortal=function(t){return gn(t)===Av};we.isProfiler=function(t){return gn(t)===ef};we.isStrictMode=function(t){return gn(t)===Zh};we.isSuspense=function(t){return gn(t)===of};we.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Jh||t===rf||t===ef||t===Zh||t===of||t===FU||typeof t=="object"&&t!==null&&(t.$$typeof===lf||t.$$typeof===af||t.$$typeof===tf||t.$$typeof===nf||t.$$typeof===sf||t.$$typeof===UU||t.$$typeof===BU||t.$$typeof===zU||t.$$typeof===VU)};we.typeOf=gn;YR.exports=we;var WU=YR.exports,ZR=WU,HU={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},qU={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},eA={};eA[ZR.ForwardRef]=HU;eA[ZR.Memo]=qU;var _e={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv=Symbol.for("react.element"),Pv=Symbol.for("react.portal"),cf=Symbol.for("react.fragment"),uf=Symbol.for("react.strict_mode"),df=Symbol.for("react.profiler"),hf=Symbol.for("react.provider"),ff=Symbol.for("react.context"),KU=Symbol.for("react.server_context"),pf=Symbol.for("react.forward_ref"),mf=Symbol.for("react.suspense"),gf=Symbol.for("react.suspense_list"),yf=Symbol.for("react.memo"),vf=Symbol.for("react.lazy"),QU=Symbol.for("react.offscreen"),tA;tA=Symbol.for("react.module.reference");function An(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case kv:switch(t=t.type,t){case cf:case df:case uf:case mf:case gf:return t;default:switch(t=t&&t.$$typeof,t){case KU:case ff:case pf:case vf:case yf:case hf:return t;default:return e}}case Pv:return e}}}_e.ContextConsumer=ff;_e.ContextProvider=hf;_e.Element=kv;_e.ForwardRef=pf;_e.Fragment=cf;_e.Lazy=vf;_e.Memo=yf;_e.Portal=Pv;_e.Profiler=df;_e.StrictMode=uf;_e.Suspense=mf;_e.SuspenseList=gf;_e.isAsyncMode=function(){return!1};_e.isConcurrentMode=function(){return!1};_e.isContextConsumer=function(t){return An(t)===ff};_e.isContextProvider=function(t){return An(t)===hf};_e.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===kv};_e.isForwardRef=function(t){return An(t)===pf};_e.isFragment=function(t){return An(t)===cf};_e.isLazy=function(t){return An(t)===vf};_e.isMemo=function(t){return An(t)===yf};_e.isPortal=function(t){return An(t)===Pv};_e.isProfiler=function(t){return An(t)===df};_e.isStrictMode=function(t){return An(t)===uf};_e.isSuspense=function(t){return An(t)===mf};_e.isSuspenseList=function(t){return An(t)===gf};_e.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===cf||t===df||t===uf||t===mf||t===gf||t===QU||typeof t=="object"&&t!==null&&(t.$$typeof===vf||t.$$typeof===yf||t.$$typeof===hf||t.$$typeof===ff||t.$$typeof===pf||t.$$typeof===tA||t.getModuleId!==void 0)};_e.typeOf=An;function GU(){const t=jU();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0,i=n={callback:r,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){!s||e===null||(s=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}const l_={notify(){},get:()=>[]};function XU(t,e){let n,r=l_;function s(f){return l(),r.subscribe(f)}function i(){r.notify()}function o(){d.onStateChange&&d.onStateChange()}function a(){return!!n}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=GU())}function c(){n&&(n(),n=void 0,r.clear(),r=l_)}const d={addNestedSub:s,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:c,getListeners:()=>r};return d}const YU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",JU=YU?h.useLayoutEffect:h.useEffect;function ZU({store:t,context:e,children:n,serverState:r,stabilityCheck:s="once",noopCheck:i="once"}){const o=h.useMemo(()=>{const c=XU(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:s,noopCheck:i}},[t,r,s,i]),a=h.useMemo(()=>t.getState(),[t]);JU(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||bs;return h.createElement(l.Provider,{value:o},n)}function nA(t=bs){const e=t===bs?GR:Iv(t);return function(){const{store:r}=e();return r}}const e8=nA();function t8(t=bs){const e=t===bs?e8:nA(t);return function(){return e().dispatch}}const je=t8();DU(kU.useSyncExternalStoreWithSelector);NU(Ho.unstable_batchedUpdates);function jn(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Is(t){return!!t&&!!t[Pe]}function Pr(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var s=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return s===Object||typeof s=="function"&&Function.toString.call(s)===c8}(t)||Array.isArray(t)||!!t[m_]||!!(!((e=t.constructor)===null||e===void 0)&&e[m_])||Nv(t)||jv(t))}function xi(t,e,n){n===void 0&&(n=!1),sa(t)===0?(n?Object.keys:go)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,s){return e(s,r,t)})}function sa(t){var e=t[Pe];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Nv(t)?2:jv(t)?3:0}function mo(t,e){return sa(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function n8(t,e){return sa(t)===2?t.get(e):t[e]}function rA(t,e,n){var r=sa(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function sA(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function Nv(t){return a8&&t instanceof Map}function jv(t){return l8&&t instanceof Set}function qs(t){return t.o||t.t}function Ov(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=oA(t);delete e[Pe];for(var n=go(e),r=0;r<n.length;r++){var s=n[r],i=e[s];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[s]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[s]})}return Object.create(Object.getPrototypeOf(t),e)}function Lv(t,e){return e===void 0&&(e=!1),Dv(t)||Is(t)||!Pr(t)||(sa(t)>1&&(t.set=t.add=t.clear=t.delete=r8),Object.freeze(t),e&&xi(t,function(n,r){return Lv(r,!0)},!0)),t}function r8(){jn(2)}function Dv(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function nr(t){var e=Ng[t];return e||jn(18,t),e}function s8(t,e){Ng[t]||(Ng[t]=e)}function Ag(){return Ll}function Ip(t,e){e&&(nr("Patches"),t.u=[],t.s=[],t.v=e)}function Nd(t){Cg(t),t.p.forEach(i8),t.p=null}function Cg(t){t===Ll&&(Ll=t.l)}function c_(t){return Ll={p:[],l:Ll,h:t,m:!0,_:0}}function i8(t){var e=t[Pe];e.i===0||e.i===1?e.j():e.g=!0}function Rp(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||nr("ES5").S(e,t,r),r?(n[Pe].P&&(Nd(e),jn(4)),Pr(t)&&(t=jd(e,t),e.l||Od(e,t)),e.u&&nr("Patches").M(n[Pe].t,t,e.u,e.s)):t=jd(e,n,[]),Nd(e),e.u&&e.v(e.u,e.s),t!==iA?t:void 0}function jd(t,e,n){if(Dv(e))return e;var r=e[Pe];if(!r)return xi(e,function(a,l){return u_(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return Od(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var s=r.i===4||r.i===5?r.o=Ov(r.k):r.o,i=s,o=!1;r.i===3&&(i=new Set(s),s.clear(),o=!0),xi(i,function(a,l){return u_(t,r,s,a,l,n,o)}),Od(t,s,!1),n&&t.u&&nr("Patches").N(r,n,t.u,t.s)}return r.o}function u_(t,e,n,r,s,i,o){if(Is(s)){var a=jd(t,s,i&&e&&e.i!==3&&!mo(e.R,r)?i.concat(r):void 0);if(rA(n,r,a),!Is(a))return;t.m=!1}else o&&n.add(s);if(Pr(s)&&!Dv(s)){if(!t.h.D&&t._<1)return;jd(t,s),e&&e.A.l||Od(t,s)}}function Od(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&Lv(e,n)}function Ap(t,e){var n=t[Pe];return(n?qs(n):t)[e]}function d_(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Yr(t){t.P||(t.P=!0,t.l&&Yr(t.l))}function Cp(t){t.o||(t.o=Ov(t.t))}function kg(t,e,n){var r=Nv(e)?nr("MapSet").F(e,n):jv(e)?nr("MapSet").T(e,n):t.O?function(s,i){var o=Array.isArray(s),a={i:o?1:0,A:i?i.A:Ag(),P:!1,I:!1,R:{},l:i,t:s,k:null,o:null,j:null,C:!1},l=a,c=Dl;o&&(l=[a],c=ja);var d=Proxy.revocable(l,c),f=d.revoke,p=d.proxy;return a.k=p,a.j=f,p}(e,n):nr("ES5").J(e,n);return(n?n.A:Ag()).p.push(r),r}function Pg(t){return Is(t)||jn(22,t),function e(n){if(!Pr(n))return n;var r,s=n[Pe],i=sa(n);if(s){if(!s.P&&(s.i<4||!nr("ES5").K(s)))return s.t;s.I=!0,r=h_(n,i),s.I=!1}else r=h_(n,i);return xi(r,function(o,a){s&&n8(s.t,o)===a||rA(r,o,e(a))}),i===3?new Set(r):r}(t)}function h_(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Ov(t)}function o8(){function t(i,o){var a=s[i];return a?a.enumerable=o:s[i]=a={configurable:!0,enumerable:o,get:function(){var l=this[Pe];return Dl.get(l,i)},set:function(l){var c=this[Pe];Dl.set(c,i,l)}},a}function e(i){for(var o=i.length-1;o>=0;o--){var a=i[o][Pe];if(!a.P)switch(a.i){case 5:r(a)&&Yr(a);break;case 4:n(a)&&Yr(a)}}}function n(i){for(var o=i.t,a=i.k,l=go(a),c=l.length-1;c>=0;c--){var d=l[c];if(d!==Pe){var f=o[d];if(f===void 0&&!mo(o,d))return!0;var p=a[d],m=p&&p[Pe];if(m?m.t!==f:!sA(p,f))return!0}}var g=!!o[Pe];return l.length!==go(o).length+(g?0:1)}function r(i){var o=i.k;if(o.length!==i.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var s={};s8("ES5",{J:function(i,o){var a=Array.isArray(i),l=function(d,f){if(d){for(var p=Array(f.length),m=0;m<f.length;m++)Object.defineProperty(p,""+m,t(m,!0));return p}var g=oA(f);delete g[Pe];for(var y=go(g),_=0;_<y.length;_++){var x=y[_];g[x]=t(x,d||!!g[x].enumerable)}return Object.create(Object.getPrototypeOf(f),g)}(a,i),c={i:a?5:4,A:o?o.A:Ag(),P:!1,I:!1,R:{},l:o,t:i,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,Pe,{value:c,writable:!0}),l},S:function(i,o,a){a?Is(o)&&o[Pe].A===i&&e(i.p):(i.u&&function l(c){if(c&&typeof c=="object"){var d=c[Pe];if(d){var f=d.t,p=d.k,m=d.R,g=d.i;if(g===4)xi(p,function(w){w!==Pe&&(f[w]!==void 0||mo(f,w)?m[w]||l(p[w]):(m[w]=!0,Yr(d)))}),xi(f,function(w){p[w]!==void 0||mo(p,w)||(m[w]=!1,Yr(d))});else if(g===5){if(r(d)&&(Yr(d),m.length=!0),p.length<f.length)for(var y=p.length;y<f.length;y++)m[y]=!1;else for(var _=f.length;_<p.length;_++)m[_]=!0;for(var x=Math.min(p.length,f.length),v=0;v<x;v++)p.hasOwnProperty(v)||(m[v]=!0),m[v]===void 0&&l(p[v])}}}}(i.p[0]),e(i.p))},K:function(i){return i.i===4?n(i):r(i)}})}var f_,Ll,Mv=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",a8=typeof Map<"u",l8=typeof Set<"u",p_=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",iA=Mv?Symbol.for("immer-nothing"):((f_={})["immer-nothing"]=!0,f_),m_=Mv?Symbol.for("immer-draftable"):"__$immer_draftable",Pe=Mv?Symbol.for("immer-state"):"__$immer_state",c8=""+Object.prototype.constructor,go=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,oA=Object.getOwnPropertyDescriptors||function(t){var e={};return go(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},Ng={},Dl={get:function(t,e){if(e===Pe)return t;var n=qs(t);if(!mo(n,e))return function(s,i,o){var a,l=d_(i,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(s.k):void 0}(t,n,e);var r=n[e];return t.I||!Pr(r)?r:r===Ap(t.t,e)?(Cp(t),t.o[e]=kg(t.A.h,r,t)):r},has:function(t,e){return e in qs(t)},ownKeys:function(t){return Reflect.ownKeys(qs(t))},set:function(t,e,n){var r=d_(qs(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var s=Ap(qs(t),e),i=s==null?void 0:s[Pe];if(i&&i.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(sA(n,s)&&(n!==void 0||mo(t.t,e)))return!0;Cp(t),Yr(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return Ap(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,Cp(t),Yr(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=qs(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){jn(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){jn(12)}},ja={};xi(Dl,function(t,e){ja[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),ja.deleteProperty=function(t,e){return ja.set.call(this,t,e,void 0)},ja.set=function(t,e,n){return Dl.set.call(this,t[0],e,n,t[0])};var u8=function(){function t(n){var r=this;this.O=p_,this.D=!0,this.produce=function(s,i,o){if(typeof s=="function"&&typeof i!="function"){var a=i;i=s;var l=r;return function(y){var _=this;y===void 0&&(y=a);for(var x=arguments.length,v=Array(x>1?x-1:0),w=1;w<x;w++)v[w-1]=arguments[w];return l.produce(y,function(E){var S;return(S=i).call.apply(S,[_,E].concat(v))})}}var c;if(typeof i!="function"&&jn(6),o!==void 0&&typeof o!="function"&&jn(7),Pr(s)){var d=c_(r),f=kg(r,s,void 0),p=!0;try{c=i(f),p=!1}finally{p?Nd(d):Cg(d)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(y){return Ip(d,o),Rp(y,d)},function(y){throw Nd(d),y}):(Ip(d,o),Rp(c,d))}if(!s||typeof s!="object"){if((c=i(s))===void 0&&(c=s),c===iA&&(c=void 0),r.D&&Lv(c,!0),o){var m=[],g=[];nr("Patches").M(s,c,m,g),o(m,g)}return c}jn(21,s)},this.produceWithPatches=function(s,i){if(typeof s=="function")return function(c){for(var d=arguments.length,f=Array(d>1?d-1:0),p=1;p<d;p++)f[p-1]=arguments[p];return r.produceWithPatches(c,function(m){return s.apply(void 0,[m].concat(f))})};var o,a,l=r.produce(s,i,function(c,d){o=c,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){Pr(n)||jn(8),Is(n)&&(n=Pg(n));var r=c_(this),s=kg(this,n,void 0);return s[Pe].C=!0,Cg(r),s},e.finishDraft=function(n,r){var s=n&&n[Pe],i=s.A;return Ip(i,r),Rp(void 0,i)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!p_&&jn(20),this.O=n},e.applyPatches=function(n,r){var s;for(s=r.length-1;s>=0;s--){var i=r[s];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}s>-1&&(r=r.slice(s+1));var o=nr("Patches").$;return Is(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),dn=new u8,aA=dn.produce;dn.produceWithPatches.bind(dn);dn.setAutoFreeze.bind(dn);dn.setUseProxies.bind(dn);dn.applyPatches.bind(dn);dn.createDraft.bind(dn);dn.finishDraft.bind(dn);function Ml(t){"@babel/helpers - typeof";return Ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ml(t)}function d8(t,e){if(Ml(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ml(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function h8(t){var e=d8(t,"string");return Ml(e)==="symbol"?e:String(e)}function f8(t,e,n){return e=h8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function y_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g_(Object(n),!0).forEach(function(r){f8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function St(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var v_=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),kp=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ld={INIT:"@@redux/INIT"+kp(),REPLACE:"@@redux/REPLACE"+kp(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+kp()}};function p8(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function lA(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(St(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(St(1));return n(lA)(t,e)}if(typeof t!="function")throw new Error(St(2));var s=t,i=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function d(){if(l)throw new Error(St(3));return i}function f(y){if(typeof y!="function")throw new Error(St(4));if(l)throw new Error(St(5));var _=!0;return c(),a.push(y),function(){if(_){if(l)throw new Error(St(6));_=!1,c();var v=a.indexOf(y);a.splice(v,1),o=null}}}function p(y){if(!p8(y))throw new Error(St(7));if(typeof y.type>"u")throw new Error(St(8));if(l)throw new Error(St(9));try{l=!0,i=s(i,y)}finally{l=!1}for(var _=o=a,x=0;x<_.length;x++){var v=_[x];v()}return y}function m(y){if(typeof y!="function")throw new Error(St(10));s=y,p({type:Ld.REPLACE})}function g(){var y,_=f;return y={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(St(11));function w(){v.next&&v.next(d())}w();var E=_(w);return{unsubscribe:E}}},y[v_]=function(){return this},y}return p({type:Ld.INIT}),r={dispatch:p,subscribe:f,getState:d,replaceReducer:m},r[v_]=g,r}function m8(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:Ld.INIT});if(typeof r>"u")throw new Error(St(12));if(typeof n(void 0,{type:Ld.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(St(13))})}function g8(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var s=e[r];typeof t[s]=="function"&&(n[s]=t[s])}var i=Object.keys(n),o;try{m8(n)}catch(a){o=a}return function(l,c){if(l===void 0&&(l={}),o)throw o;for(var d=!1,f={},p=0;p<i.length;p++){var m=i[p],g=n[m],y=l[m],_=g(y,c);if(typeof _>"u")throw c&&c.type,new Error(St(14));f[m]=_,d=d||_!==y}return d=d||i.length!==Object.keys(l).length,d?f:l}}function Dd(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,s){return function(){return r(s.apply(void 0,arguments))}})}function y8(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var s=r.apply(void 0,arguments),i=function(){throw new Error(St(15))},o={getState:s.getState,dispatch:function(){return i.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return i=Dd.apply(void 0,a)(s.dispatch),y_(y_({},s),{},{dispatch:i})}}}function cA(t){var e=function(r){var s=r.dispatch,i=r.getState;return function(o){return function(a){return typeof a=="function"?a(s,i,t):o(a)}}};return e}var uA=cA();uA.withExtraArgument=cA;const x_=uA;var dA=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),v8=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Vo=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,s=t.length;n<r;n++,s++)t[s]=e[n];return t},x8=Object.defineProperty,w8=Object.defineProperties,_8=Object.getOwnPropertyDescriptors,w_=Object.getOwnPropertySymbols,E8=Object.prototype.hasOwnProperty,S8=Object.prototype.propertyIsEnumerable,__=function(t,e,n){return e in t?x8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},ms=function(t,e){for(var n in e||(e={}))E8.call(e,n)&&__(t,n,e[n]);if(w_)for(var r=0,s=w_(e);r<s.length;r++){var n=s[r];S8.call(e,n)&&__(t,n,e[n])}return t},Pp=function(t,e){return w8(t,_8(e))},T8=function(t,e,n){return new Promise(function(r,s){var i=function(l){try{a(n.next(l))}catch(c){s(c)}},o=function(l){try{a(n.throw(l))}catch(c){s(c)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(i,o)};a((n=n.apply(t,e)).next())})},b8=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Dd:Dd.apply(null,arguments)};function I8(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var R8=function(t){dA(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Vo([void 0],n[0].concat(this)))):new(e.bind.apply(e,Vo([void 0],n.concat(this))))},e}(Array),A8=function(t){dA(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Vo([void 0],n[0].concat(this)))):new(e.bind.apply(e,Vo([void 0],n.concat(this))))},e}(Array);function jg(t){return Pr(t)?aA(t,function(){}):t}function C8(t){return typeof t=="boolean"}function k8(){return function(e){return P8(e)}}function P8(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new R8;return n&&(C8(n)?r.push(x_):r.push(x_.withExtraArgument(n.extraArgument))),r}var N8=!0;function j8(t){var e=k8(),n=t||{},r=n.reducer,s=r===void 0?void 0:r,i=n.middleware,o=i===void 0?e():i,a=n.devTools,l=a===void 0?!0:a,c=n.preloadedState,d=c===void 0?void 0:c,f=n.enhancers,p=f===void 0?void 0:f,m;if(typeof s=="function")m=s;else if(I8(s))m=g8(s);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var g=o;typeof g=="function"&&(g=g(e));var y=y8.apply(void 0,g),_=Dd;l&&(_=b8(ms({trace:!N8},typeof l=="object"&&l)));var x=new A8(y),v=x;Array.isArray(p)?v=Vo([y],p):typeof p=="function"&&(v=p(x));var w=_.apply(void 0,v);return lA(m,d,w)}function gs(t,e){function n(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(e){var i=e.apply(void 0,r);if(!i)throw new Error("prepareAction did not return an object");return ms(ms({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function hA(t){var e={},n=[],r,s={addCase:function(i,o){var a=typeof i=="string"?i:i.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,s},addMatcher:function(i,o){return n.push({matcher:i,reducer:o}),s},addDefaultCase:function(i){return r=i,s}};return t(s),[e,n,r]}function O8(t){return typeof t=="function"}function L8(t,e,n,r){n===void 0&&(n=[]);var s=typeof e=="function"?hA(e):[e,n,r],i=s[0],o=s[1],a=s[2],l;if(O8(t))l=function(){return jg(t())};else{var c=jg(t);l=function(){return c}}function d(f,p){f===void 0&&(f=l());var m=Vo([i[p.type]],o.filter(function(g){var y=g.matcher;return y(p)}).map(function(g){var y=g.reducer;return y}));return m.filter(function(g){return!!g}).length===0&&(m=[a]),m.reduce(function(g,y){if(y)if(Is(g)){var _=g,x=y(_,p);return x===void 0?g:x}else{if(Pr(g))return aA(g,function(v){return y(v,p)});var x=y(g,p);if(x===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}return g},f)}return d.getInitialState=l,d}function D8(t,e){return t+"/"+e}function xf(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:jg(t.initialState),r=t.reducers||{},s=Object.keys(r),i={},o={},a={};s.forEach(function(d){var f=r[d],p=D8(e,d),m,g;"reducer"in f?(m=f.reducer,g=f.prepare):m=f,i[d]=m,o[p]=m,a[d]=g?gs(p,g):gs(p)});function l(){var d=typeof t.extraReducers=="function"?hA(t.extraReducers):[t.extraReducers],f=d[0],p=f===void 0?{}:f,m=d[1],g=m===void 0?[]:m,y=d[2],_=y===void 0?void 0:y,x=ms(ms({},p),o);return L8(n,function(v){for(var w in x)v.addCase(w,x[w]);for(var E=0,S=g;E<S.length;E++){var b=S[E];v.addMatcher(b.matcher,b.reducer)}_&&v.addDefaultCase(_)})}var c;return{name:e,reducer:function(d,f){return c||(c=l()),c(d,f)},actions:a,caseReducers:i,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var M8="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",$8=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=M8[Math.random()*64|0];return e},F8=["name","message","stack","code"],Np=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),E_=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),V8=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=F8;n<r.length;n++){var s=r[n];typeof t[s]=="string"&&(e[s]=t[s])}return e}return{message:String(t)}};(function(){function t(e,n,r){var s=gs(e+"/fulfilled",function(c,d,f,p){return{payload:c,meta:Pp(ms({},p||{}),{arg:f,requestId:d,requestStatus:"fulfilled"})}}),i=gs(e+"/pending",function(c,d,f){return{payload:void 0,meta:Pp(ms({},f||{}),{arg:d,requestId:c,requestStatus:"pending"})}}),o=gs(e+"/rejected",function(c,d,f,p,m){return{payload:p,error:(r&&r.serializeError||V8)(c||"Rejected"),meta:Pp(ms({},m||{}),{arg:f,requestId:d,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(d,f,p){var m=r!=null&&r.idGenerator?r.idGenerator(c):$8(),g=new a,y;function _(v){y=v,g.abort()}var x=function(){return T8(this,null,function(){var v,w,E,S,b,T,I;return v8(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),S=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,c,{getState:f,extra:p}),B8(S)?[4,S]:[3,2];case 1:S=A.sent(),A.label=2;case 2:if(S===!1||g.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return b=new Promise(function(C,j){return g.signal.addEventListener("abort",function(){return j({name:"AbortError",message:y||"Aborted"})})}),d(i(m,c,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:m,arg:c},{getState:f,extra:p}))),[4,Promise.race([b,Promise.resolve(n(c,{dispatch:d,getState:f,extra:p,requestId:m,signal:g.signal,abort:_,rejectWithValue:function(C,j){return new Np(C,j)},fulfillWithValue:function(C,j){return new E_(C,j)}})).then(function(C){if(C instanceof Np)throw C;return C instanceof E_?s(C.payload,m,c,C.meta):s(C,m,c)})])];case 3:return E=A.sent(),[3,5];case 4:return T=A.sent(),E=T instanceof Np?o(null,m,c,T.payload,T.meta):o(T,m,c),[3,5];case 5:return I=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,I||d(E),[2,E]}})})}();return Object.assign(x,{abort:_,requestId:m,arg:c,unwrap:function(){return x.then(U8)}})}}return Object.assign(l,{pending:i,rejected:o,fulfilled:s,typePrefix:e})}return t.withTypes=function(){return t},t})();function U8(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function B8(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var $v="listenerMiddleware";gs($v+"/add");gs($v+"/removeAll");gs($v+"/remove");var S_;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);o8();const z8=xr();let W8=z8.current||{...n0({}),currentIndex:0,song_in:""};const H8={currentSong:W8},fA=xf({name:"currentSong",initialState:H8,reducers:{setSong(t,e){t.currentSong=e.payload},updateSong:(t,e)=>{const n=e.payload;Object.assign(t.currentSong,n)},resetCurrentSong:t=>{t.currentSong={...n0({}),currentIndex:0,song_in:""}}}}),ge=t=>t.currentSong,{setSong:an,resetCurrentSong:Rs,updateSong:vW}=fA.actions,q8=fA.reducer,K8={queueSongs:[],from:[]},pA=xf({name:"songQueue",initialState:K8,reducers:{setQueue:(t,e)=>{const{songs:n}=e.payload;t.queueSongs=n,t.from=[n[0].song_in],Ct("queue",t.queueSongs)},removeSongFromQueue:(t,e)=>{const{index:n}=e.payload,[r]=t.queueSongs.splice(n,1);Ct("queue",t.queueSongs),t.from.findIndex(i=>i===r.song_in)!==-1&&t.from.slice(n,1)},addSongToQueue:(t,e)=>{const{songs:n}=e.payload;t.from.includes(n[0].song_in)||t.from.push(n[0].song_in),t.queueSongs.push(...n),Ct("queue",t.queueSongs)},updateSongInQueue:(t,e)=>{const{song:n}=e.payload,r=t.queueSongs.findIndex(s=>s.id===n.id);Object.assign(t.queueSongs[r],n)},resetSongQueue:t=>{t.queueSongs=[],Ct("queue",[])}}}),Dr=t=>t.songQueue,{addSongToQueue:xc,updateSongInQueue:Q8,removeSongFromQueue:G8,setQueue:wc,resetSongQueue:mA}=pA.actions,X8=pA.reducer,gA={user:null,loading:!0},Y8=(t,e)=>{switch(e.type){case 0:return{user:e.payload.user,loading:!1};case 1:return{user:null,loading:!0};default:return{user:t.user,loading:t.loading}}},J8={state:{user:gA.user,loading:!0},setUser:()=>{}},yA=h.createContext(J8),Z8=()=>{const[t,e]=h.useReducer(Y8,gA),n=h.useCallback(r=>{switch(r.type){case"set-user":return console.log("set user"),e({type:0,payload:{user:r.user}});case"reset":return console.log("reset user"),e({type:1,payload:{user:null}})}},[]);return{state:{loading:t.loading,user:t.user},setUser:n}},eB=({children:t})=>{const{state:{loading:e,user:n},setUser:r}=Z8();return u.jsx(yA.Provider,{value:{state:{loading:e,user:n},setUser:r},children:t})},tt=()=>{const{state:{loading:t,user:e},setUser:n}=h.useContext(yA);return{loading:t,user:e,setUser:n}},_c=()=>{const t=Jt(),e=je(),{setUser:n}=tt(),{resetSongPlaylistStore:r}=Ge(),[s]=uU(Ts),i=()=>{document.querySelector(".hd-mp3").pause(),e(Rs())};return{logOut:async()=>{await Wb(Ts),n({type:"reset"}),e(mA()),r(),i(),t(gt.Home)},logIn:async()=>{await s()&&(e(Rs()),r(),n({type:"reset"}))}}},tB={toasts:[]},nB={state:tB,setToasts:()=>{},setErrorToast:()=>{},setSuccessToast:()=>{}},vA=h.createContext(nB),rB=({children:t})=>{const[e,n]=h.useState([]),r=({message:i="Somethings went wrong"})=>n(o=>[...o,{title:"error",id:ad(4),desc:i}]),s=({message:i="Success"})=>n(o=>[...o,{title:"success",id:ad(4),desc:`${i}`}]);return u.jsx(vA.Provider,{value:{state:{toasts:e},setToasts:n,setErrorToast:r,setSuccessToast:s},children:t})},Zt=()=>{const{state:{toasts:t},setToasts:e,setErrorToast:n,setSuccessToast:r}=h.useContext(vA);return{toasts:t,setToasts:e,setErrorToast:n,setSuccessToast:r}},xA={tempSongs:[],status:""},sB=(t,e)=>{switch(e.type){case 0:{const{songs:n}=e.payload;return{...t,tempSongs:n,status:"uploading"}}case 1:{const n=[...t.tempSongs];return n.shift(),{...t,tempSongs:n}}case 2:{const{status:n}=e.payload;return{...t,tempSongs:[],status:n}}}},iB=()=>{const[t,e]=h.useReducer(sB,xA),n=h.useCallback(i=>{e({type:0,payload:{songs:i}})},[]),r=h.useCallback(()=>{e({type:1})},[]),s=h.useCallback(i=>{e({type:2,payload:{status:i}})},[]);return{state:t,setTempSongs:n,shiftSong:r,clearTempSongs:s}},oB={state:xA,setTempSongs:()=>{},shiftSong:()=>{},clearTempSongs:()=>{}},wA=h.createContext(oB),aB=({children:t})=>u.jsx(wA.Provider,{value:iB(),children:t}),wf=()=>{const{state:{...t},...e}=h.useContext(wA);return{...e,...t}},$l=async({collection:t,id:e,msg:n})=>{await qV(lv(Lr,t,e))},Uo=async({collection:t,id:e,msg:n})=>WV(lv(Lr,t,e)),bn=async({collection:t,id:e,data:n,msg:r})=>await HV(lv(Lr,t,e),{...n},{merge:!0}),_A=async({file:t,folder:e,email:n,msg:r})=>{const s=n.replace("@gmail.com","")+"_"+t.name.replaceAll(" ","").toLowerCase(),i=Sv(bv,`${e+s}`),o=await FR(i,t);return{fileURL:await VR(o.ref),filePath:o.metadata.fullPath}},EA=async({blob:t,folder:e,songId:n,msg:r})=>{const s=n+"_stock",i=Sv(bv,`${e+s}`),o=await FR(i,t);return{fileURL:await VR(o.ref),filePath:o.metadata.fullPath}},Og=async({filePath:t,msg:e})=>{const n=Sv(bv,t);await nU(n)},SA=async t=>{await $l({collection:"songs",id:t.id,msg:">>> api: delete song doc"}),await Og({filePath:t.song_file_path,msg:">>> api: delete song file"}),t.lyric_id&&await $l({collection:"lyrics",id:t.lyric_id,msg:">>> api: delete song lyric doc"}),t.image_file_path&&await Og({filePath:t.image_file_path,msg:">>> api: delete song's image file"})},T_=async(t,e)=>{const n=t.map(r=>r.id);await bn({collection:"users",data:{playlist_ids:n},id:e.email,msg:">>> api: set user playlist_ids"})},jp={currentPlaylist:r0({}),playlistSongs:[]},TA=xf({name:"currentPlaylist",initialState:jp,reducers:{setCurrentPlaylist(t,e){const{playlist:n,songs:r}=e.payload;t.currentPlaylist=n,t.playlistSongs=r},updateCurrentPlaylist:(t,e)=>{const n=e.payload;Object.assign(t.currentPlaylist,n)},addSongsAndUpdateCurrent(t,e){const{songs:n}=e.payload,r=n.map(s=>({...s,song_in:`playlist_${t.currentPlaylist.id}`}));console.log("current",Pg(t.playlistSongs).map(s=>s.id)),console.log("add playlist songs",n.map(s=>s.id)),t.playlistSongs.push(...r),t.currentPlaylist.song_ids.push(...n.map(s=>s.id))},setPlaylistSongs(t,e){const{songs:n}=e.payload;t.playlistSongs=n},removeSong(t,e){const{index:n}=e.payload;t.playlistSongs.splice(n,1)},setPlaylistSongsAndUpdateCurrent(t,e){const{songs:n}=e.payload;console.log("current",Pg(t.playlistSongs).map(r=>r.id)),console.log("set playlist songs",n.map(r=>r.id)),t.playlistSongs=n,t.currentPlaylist.song_ids=n.map(r=>r.id)},resetCurrentPlaylist:t=>{t.currentPlaylist=jp.currentPlaylist,t.playlistSongs=jp.playlistSongs}}}),$s=t=>t.currentPlaylist,{addSongsAndUpdateCurrent:lB,removeSong:xW,setCurrentPlaylist:cB,updateCurrentPlaylist:uB,resetCurrentPlaylist:Fv,setPlaylistSongs:b_,setPlaylistSongsAndUpdateCurrent:I_}=TA.actions,dB=TA.reducer;function Ni(){const t=je(),{user:e}=tt(),{currentPlaylist:n,playlistSongs:r}=K($s),{currentSong:s}=K(ge),{userPlaylists:i,updateUserPlaylist:o,setUserPlaylists:a}=Ge(),[l,c]=h.useState(!1),{setErrorToast:d,setSuccessToast:f}=Zt(),p=Jt(),m=async S=>{await bn({collection:"playlist",data:S,id:S.id,msg:">>> api: set playlist doc"}),o(S)},g=async S=>{if(!e)throw new Error("user not found");if(!S)throw new Error("playlist name invalid");const b=t0(S),T=r0({id:b,by:e.email,name:S});c(!0);const I=[...i,T];await bn({collection:"playlist",data:T,id:b,msg:">>> api: set playlist doc"}),await T_(I,e),a(I),c(!1)},y=async()=>{if(!e)return;c(!0);const S=i.filter(b=>b.id!==n.id);await $l({collection:"playlist",id:n.id,msg:">>> api: delete playlist doc"}),await T_(S,e),a(S),t(Fv()),s.song_in===`playlist_${n.id}`&&t(Rs()),c(!1),p("/mysongs")},_=async S=>{c(!0);const b={...n};if(b.song_ids=[...n.song_ids,...S.map(T=>T.id)],await m(b),console.log(">>> playlist songs",r.length),t(lB({songs:S})),s.song_in===`playlist_${n.id}`){const T=S.map(I=>({...I,song_in:`playlist_${n.id}`}));t(xc({songs:T}))}c(!1),f({message:`${S.length} songs added`})},x=async(S,b)=>{try{c(!0);const T={...b,name:S};await m(T),t(uB(T)),f({message:"Playlist edited"})}catch(T){throw console.log(T),new Error("Error when edit playlist")}finally{c(!1)}},v=async(S,b)=>{try{c(!0);const T={...b};T.song_ids.push(S.id),await m(T)}catch(T){throw console.log({message:T}),new Error("Error when edit playlist")}finally{c(!1)}},w=async S=>{c(!0);const b=r.filter(I=>I.id!==S.id);console.log("delete songs",r.map(I=>I.id),b.map(I=>I.id));const T={...n};T.song_ids=b.map(I=>I.id),await m(T),t(I_({songs:b})),c(!1),f({message:`'${S.name}' removed`})};return{isFetching:l,addPlaylist:g,editPlaylist:x,deletePlaylist:y,addSongsToPlaylist:_,deleteSongsFromPlaylist:async S=>{if(console.log("playlist action deleteManyFromPlaylist"),!n.song_ids)throw console.log("Wrong playlist data"),d({}),new Error("Wrong playlist data");if(S.length===1)return w(S[0]);const b=S.map(A=>A.id),T=r.filter(A=>!b.includes(A.id)),I={...n};return I.song_ids=T.map(A=>A.id),c(!0),await m(I),t(I_({songs:T})),c(!1),f({message:`${S.length} songs removed`}),T},deleteSongFromPlaylist:w,addSongToPlaylistSongItem:v,setPlaylistDocAndUpdateUserPlaylist:m}}function hB({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"}))}const fB=h.forwardRef(hB),pB=fB;function mB({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"}))}const gB=h.forwardRef(mB),yB=gB;function Fs({close:t,title:e}){return u.jsxs("div",{className:"flex justify-between mb-[15px]",children:[u.jsx("h1",{className:"text-[26px] font-semibold",children:e}),u.jsx("button",{onClick:t,children:u.jsx(yB,{className:"w-[30px]"})})]})}function vB({close:t,playlistSongs:e}){const{theme:n}=te(),[r,s]=h.useState([]),{userSongs:i}=Ge(),{addSongsToPlaylist:o,isFetching:a}=Ni(),l={addSongContainer:"pb-[40px] relative",addSongContent:"max-h-[calc(60vh)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full max-[549px]:w-full"},c=h.useMemo(()=>!!r.length,[r]),d=async()=>{try{if(!r.length)return;await o(r)}catch(f){console.log({message:f})}finally{t()}};return u.jsxs("div",{className:l.addSongContainer,children:[u.jsx(Fs,{close:t,title:"Add song to playlist"}),u.jsxs("div",{className:l.addSongContent,children:[u.jsxs(G,{onClick:d,variant:"primary",isLoading:a,className:`rounded-full ${n.content_bg} absolute bottom-0 right-[15px] min-w-[34px] h-[32px] ${!c&&"opacity-60 pointer-events-none"}`,children:["Add",`${r.length?` (${r.length})`:""}`]}),i.map((f,p)=>{if(e.findIndex(g=>g.id===f.id)===-1)return u.jsx("div",{className:l.songItem,children:u.jsx(ub,{isChecked:!0,selectedSongs:r,setSelectedSongs:s,theme:n,data:f,active:!1,onClick:()=>{},setIsChecked:()=>{}})},p)})]})]})}function bA({children:t,active:e,done:n,inUpload:r,className:s,scrollBehavior:i}){const o=h.useRef(null),a=()=>{const l=o.current;l&&(l.scrollIntoView({behavior:i.current,block:"center"}),i.current==="instant"&&(i.current="smooth"))};return h.useEffect(()=>{e&&a()},[e]),u.jsxs("p",{ref:o,className:`lyric ${s&&s} ${r?"text-[16px]":""}  select-none  max-[549px]:text-center font-bold ${n&&"opacity-40"} ${r?"flex":""} ${e&&!r?"text-[#ffed00]":""}`,children:[t,r&&e&&u.jsx("span",{className:"ml-[10px] text-[16px]"})]})}const xB=()=>{const t=xr();return{playStatus:{isError:!1,isPlaying:!1,isWaiting:!1,lyricSize:t.lyricSize||"medium",isLoaded:!0,isRepeat:t.isRepeat||"no",isShuffle:t.isShuffle||!1,isTimer:t.isTimer||0,isCrossFade:t.isCrossFade||!1,songBackground:!1}}},IA=xf({name:"playStatus",initialState:()=>xB(),reducers:{setPlayStatus(t,e){t.playStatus={...t.playStatus,...e.payload}},toggleSongBackground(t,e){console.log("toogle"),t.playStatus.songBackground=!t.playStatus.songBackground}}}),en=t=>t.playStatus,{setPlayStatus:bt,toggleSongBackground:wB}=IA.actions,_B=IA.reducer;function EB({handlePlayPause:t}){const{playStatus:{isError:e,isPlaying:n,isWaiting:r}}=K(en),{currentSong:s}=K(ge),i=h.useMemo(()=>r?u.jsx(br,{className:"w-[36px] max-[549px]:w-[46px] animate-spin"}):e&&s.name?u.jsx(Hy,{className:"w-[30px] max-[549px]:w-[40px]"}):n?u.jsx(ch,{className:"w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]"}):u.jsx(Ky,{className:"w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]"}),[r,e,n,s]);return u.jsx(u.Fragment,{children:u.jsx("button",{className:`p-[5px] ${r&&"pointer-events-none"} inline-flex items-center justify-center w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]`,onClick:()=>t(),children:i})})}const R_=h.memo(EB);function RA({bgRef:t,currentSong:e}){const{playStatus:{songBackground:n}}=K(en);h.useEffect(()=>{if(n&&e.image_url){const r=t.current;r&&(r.style.backgroundImage=`url(${e.image_url})`)}},[e,n]),h.useEffect(()=>{if(!n){const r=t.current;r&&(r.style.backgroundImage="none")}},[n])}function SB({audioEle:t,isOpenFullScreen:e}){const{currentSong:n}=K(ge),{playStatus:{isError:r}}=K(en),[s,i]=h.useState({id:"",base:"",real_time:[]}),[o,a]=h.useState(!1),[l,c]=h.useState(!1),d=h.useRef(),f=async()=>{a(!0);try{const m=await Uo({collection:"lyrics",id:n.lyric_id,msg:">>> api: get lyric doc"});if(m.exists()){const g=m.data();i(g)}}catch{console.log("[error] get lyric error")}finally{a(!1)}},p=()=>{clearTimeout(d.current),c(!1),a(!0),i({base:"",real_time:[],id:""})};return h.useEffect(()=>{const m=async()=>{console.log("song loaded"),c(!0)};return t&&t.addEventListener("loadeddata",m),()=>{t&&t.removeEventListener("loadeddata",m)}},[]),h.useEffect(()=>{if(!n.lyric_id&&l){a(!1);return}s.real_time.length||l&&e&&(d.current=setTimeout(()=>{f()},500))},[l,e]),h.useEffect(()=>{if(r){a(!1);return}return()=>{p()}},[n,r]),{songLyric:s,loading:o}}const Vv=(t,e)=>{const[n,r]=h.useState(()=>JSON.parse(localStorage.getItem("HD-MP3")||"{}")[t]||e);return h.useEffect(()=>{const s=JSON.parse(localStorage.getItem("HD-MP3")||"{}");s[t]=n,localStorage.setItem("HD-MP3",JSON.stringify(s))},[n]),[n,r]};function TB(){const t=je(),{currentPlaylist:e,playlistSongs:n}=K($s),r=ah(),{setErrorToast:s}=Zt(),i=h.useRef(!1),[o,a]=h.useState(!0),l=async()=>{if(!r.id)throw new Error("invalid playlist id");const f=await Uo({collection:"playlist",id:r.id,msg:">>> api get playlist"});if(f.exists())return f.data()},c=async f=>{if(!f.song_ids.length)return[];console.log(">>> api: get playlist songs");const p=ra(Lr,"songs"),m=Ls(p,Ds("id","in",f.song_ids)),g=await Ms(m);return g.docs.length?g.docs.map(_=>({..._.data(),song_in:`playlist_${f.id}`})):(f.song_ids.length&&s({}),[])},d=async()=>{try{if(!r.id)throw new Error("invalid playlist id");let f;const p=e.id===r.id;if(a(!0),p?f=e:f=await l(),!f)throw new Error("playlist not found");const m=await c(f);p||t(cB({playlist:f,songs:m})),t(b_({songs:m}))}catch(f){console.log({message:f}),s({})}finally{a(!1)}};return h.useEffect(()=>{i.current||(i.current=!0,console.log("run init"),d())},[]),{isFetching:o,setPlaylistSongs:b_,playlistSongs:n}}function bB(){const[t,e]=h.useState([]),{isFetching:n}=TB();return{playlistSongs:t,loading:n,setPlaylistSongs:e}}const AA=()=>{window.dispatchEvent(new Event("mousemove"))},CA=(t,e,n=!1)=>{const r=window.innerWidth;if(!t||!e){console.log("ele not found");return}const i=t.getBoundingClientRect().left,o=r-(i+t.offsetWidth),a=Math.abs(Math.ceil(i-o))/2;if(a<5)return!1;n&&(e.onscroll=()=>{},setTimeout(()=>{e.onscroll=AA},900)),n||Math.abs(i)>r||Math.abs(o)>r?e.style.scrollBehavior="auto":e.style.scrollBehavior="smooth";let l=e.scrollLeft;return o>i?setTimeout(()=>{e.scrollLeft=l-a},300):o<i&&setTimeout(()=>{e.scrollLeft=l+a},300),!0};function IB({containerRef:t,songItemRef:e,isOpenFullScreen:n,idle:r}){const{currentSong:s}=K(ge),i=()=>{const o=e==null?void 0:e.current,a=t==null?void 0:t.current;CA(o,a,r)};h.useEffect(()=>{if(n){if(!scroll||!(t!=null&&t.current)||!(e!=null&&e.current)){console.log("lack props");return}s.name&&n&&i()}},[s,n]),h.useEffect(()=>{const o=t==null?void 0:t.current;if(o)return o.onscroll=AA,()=>{o.onscroll=()=>{}}},[])}function RB({textRef:t,textWrapperRef:e,autoScroll:n}){const{currentSong:r}=K(ge),{playStatus:{isPlaying:s}}=K(en),i=h.useRef(),o=h.useRef(),a=h.useRef(0),l=h.useRef(""),c=h.useRef(0),d=h.useRef(!1),f=h.useCallback(()=>{const y=t==null?void 0:t.current;y&&(y.style.transition="none",y.style.transform="translateX(0)",d.current=!1)},[t]),p=()=>{if(!t){console.log("lack of prop");return}if(!a.current&&!c.current)return;const y=t.current;y&&(console.log("scroll"),y.innerHTML=l.current+"&nbsp; &nbsp; &nbsp;"+l.current,d.current=!0,y.style.transition=`transform linear ${a.current}s`,y.style.transform=`translateX(-${c.current}px)`,o.current=setTimeout(()=>{f(),console.log("call unscroll")},a.current*1e3))},m=()=>{if(!n||!t||!e)return;if(d.current){console.log("reScroll cancel cause is scroll");return}const y=t.current,_=e.current;y.offsetWidth-_.offsetWidth>0&&(l.current=y.innerText,c.current=y.offsetWidth+20,a.current=Math.ceil(c.current/35))},g=()=>{f(),a.current=0,c.current=0};h.useEffect(()=>{if(!(!r.name||!s)&&(m(),!!c.current))return n&&a.current&&!d.current&&(setTimeout(()=>{p()},1e3),i.current=setInterval(()=>{p()},a.current*1e3+3e3+1e3)),()=>{clearInterval(i.current),clearTimeout(o.current),g()}},[r,s])}const AB=({song:t,closeModal:e,setIsOpenPopup:n})=>{const r=je(),{setErrorToast:s,setSuccessToast:i}=Zt(),{currentSong:o}=K(ge),{userSongs:a,setUserSongs:l}=Ge(),[c,d]=h.useState(!1),{addSongToPlaylistSongItem:f,deleteSongFromPlaylist:p}=Ni();return{updateAndSetUserSongs:h.useCallback(async({song:v})=>{let w=[...a];const E=w.indexOf(v);w.splice(E,1);const S=w.map(b=>b.id);if(w.length!==a.length)return l(w),S},[a]),handleDeleteSong:async()=>{try{d(!0);let v=[...a];const w=v.indexOf(t);v.splice(w,1),await SA(t),l(v),o.id===t.id&&r(Rs()),i({message:`'${t.name}' deleted`})}catch(v){throw console.log({message:v}),new Error("Error when delete song")}finally{d(!1),e()}},handleAddSongToPlaylistMobile:async v=>{try{d(!0),await f(t,v),i({message:`'${t.name}' added to '${v.name}'`})}catch(w){throw console.log(w),new Error("Error when add song to playlist")}finally{d(!1),e()}},handleRemoveSongFromPlaylist:async()=>{try{d(!0),await p(t)}catch(v){throw console.log({message:v}),new Error("Error when remove song from playlist")}finally{d(!1),n(!1)}},handleAddSongToPlaylist:async v=>{if(!t||!v){s({message:"Lack of props"});return}try{d(!0),await f(t,v),i({message:`'${t.name}' added to '${v.name}'`})}catch(w){throw console.log(w),new Error("Error when add song to playlist")}finally{d(!1),n(!1)}},loading:c}},Fl={isDebug:!1,focusDelay:3e3,scrollSongDelay:4e3,loadingDuration:200},kA=ra(Lr,"songs"),PA=ra(Lr,"playlist"),CB=async()=>{const t=Ls(kA,Ds("by","==","admin")),e=await Ms(t);if(e.docs)return e.docs.map(r=>({...r.data(),song_in:"admin"}))},kB=async()=>{const t=Ls(PA,Ds("by","==","admin")),e=await Ms(t);if(e.docs)return e.docs.map(r=>r.data())},PB=async t=>{const e=Ls(PA,Ds("by","==",t.email)),n=await Ms(e);if(n.docs.length)return n.docs.map(s=>s.data())},NB=async t=>{const e=Ls(kA,Ds("by","==",t.email)),n=await Ms(e);if(n.docs.length)return n.docs.map(s=>({...s.data(),song_in:"user"}))},jB=async t=>{const e={userSongs:[],userPlaylists:[]},n=await NB(t);n!=null&&n.length&&(e.userSongs=n);const r=await PB(t);return r!=null&&r.length&&(e.userPlaylists=r),e};function _f({admin:t}){const{setErrorToast:e}=Zt(),{user:n,loading:r}=tt(),{initial:s,initSongsContext:i}=Ge(),[o,a]=h.useState(""),[l,c]=h.useState(!0),d=p=>{c(!1),a(p),e({message:"Use song error"})},f=async()=>{try{const p=await CB(),m=await kB();if(t){i({userSongs:p,userPlaylists:m}),console.log("admin",m,p),c(!1);return}if(!n)await s0(Fl.loadingDuration),i({adminSongs:p,adminPlaylists:m});else{const g=await jB(n);i({...g,adminSongs:p,adminPlaylists:m})}}catch(p){console.log({message:p}),d("init song error")}finally{c(!1)}};return h.useEffect(()=>{if(r)return c(!0);if(s){console.log("Already init"),setTimeout(()=>c(!1),Fl.loadingDuration);return}else{f();return}},[r]),{initial:s,loading:l,errorMsg:o,initSongsAndPlaylists:f}}function OB({audioRef:t,admin:e,inputRef:n,testImageRef:r}){const{user:s}=tt(),{userSongs:i,addUserSongs:o}=Ge(),{currentSong:a}=K(ge),{setTempSongs:l,tempSongs:c,clearTempSongs:d,shiftSong:f,status:p}=wf(),m=h.useRef([]),g=h.useRef([]),y=h.useRef(!1),{setErrorToast:_,setSuccessToast:x,setToasts:v}=Zt(),w=T=>{if(!n.current)return;const I=n.current;I&&(I.value="",g.current=[]),d(T)},E=h.useCallback(async T=>{if(!s)return _({message:"Missing user data"});d("uploading");const A=T.target.files;if(!A.length){d("finish");return}let C=n0({by:e?"admin":s.email,song_in:e?"admin":"user"}),j=[];const B=Date.now(),O=L=>i.some(F=>F.singer===L.singer&&F.name===L.name&&F.size===L.size)||j.some(F=>F.singer===L.singer&&F.name===L.name&&F.size===L.size);try{let L;for(L=0;L<=A.length-1;L++){const F=A[L],V=await DO(F);if(!V){_({message:"Error when parser song"}),w("finish-error");return}let X={...C,name:V.name,singer:V.singer,size:Math.floor(F.size/1024)},R;if(V.image){R=new Blob([V.image],{type:"application/octet-stream"});const z=URL.createObjectURL(R);X.image_url=z}if(O(X)){console.log(">>>duplicate"),y.current=!0,m.current.push(X);continue}j.push(X),g.current=[...g.current,L],Object.assign(F,{for_song_id:j.length-1,imageBlob:R})}if(i.length+g.current.length>5&&s.role!=="ADMIN"){w("finish-error"),_({message:"You have reach the upload limit"});return}if(!j.length){y.current=!1,w("finish-error"),_({message:"Duplicate song"});return}l(j);for(let F of g.current){let V=A[F],X=t0(j[V.for_song_id].name);e&&(X+="_admin");const R=V.for_song_id,$={...j[R]};$.image_url&&await S(V.imageBlob,X,$);const{filePath:z,fileURL:P}=await _A({file:V,folder:"/songs/",email:s.email,msg:">>> api: upload song file"});Object.assign($,{id:X,song_file_path:z,song_url:P});const W=t.current;W.src=URL.createObjectURL(V),await b($)}}catch(L){console.log({message:L}),w("finish-error"),_({});return}try{g.current=[],y.current?(w("finish-error"),v(F=>[...F,{id:ad(4),title:"warning",desc:"Song duplicate"}])):(w("finish"),x({message:`${j.length} songs uploaded`}));const L=Date.now()}catch(L){console.log({message:L}),_({}),w("finish-error");return}},[s,i,a.song_in]),S=async(T,I,A)=>new Promise((C,j)=>{const B=r.current,O=URL.createObjectURL(T);B.src=O;const L=async()=>{try{URL.revokeObjectURL(O);const{encode:V}=await ZT(T),{fileURL:X,filePath:R}=await EA({blob:T,folder:"/images/",songId:I,msg:">>> api: upload song's image blob"});V&&(A.blurhash_encode=V),A.image_url=X,A.image_file_path=R,C(),B.removeEventListener("error",F),j()}finally{B.removeEventListener("load",L)}},F=()=>{URL.revokeObjectURL(O),A.image_url="",B.removeEventListener("error",F),C()};B.addEventListener("load",L),B.addEventListener("error",F)}),b=async T=>new Promise((I,A)=>{const C=t.current,j=async()=>{try{const B=Math.ceil(C.duration);Object.assign(T,{duration:B}),await bn({collection:"songs",data:T,id:T.id,msg:">>> api: set song doc"}),o([T]),f(),(e||a.song_in==="user")&&xc({songs:[{...T}]}),URL.revokeObjectURL(C.src),I()}catch{A()}finally{C.removeEventListener("loadedmetadata",j)}};C.addEventListener("loadedmetadata",j)});return h.useEffect(()=>{const T=document.querySelector(".temp-song");T&&T.scrollIntoView({behavior:"smooth",block:"center"})},[c]),{handleInputChange:E}}function LB(t,e,n){const[r,s]=h.useState(!1),[i,o]=Vv("volume",1),a=c=>{const f=c.target.getBoundingClientRect();if(t.current){let p=+((c.clientX-f.x)/t.current).toFixed(2);p>.9?p=1:p<.05?(p=0,s(!0)):s(!1),o(p)}},l=()=>{s(!r)};return h.useEffect(()=>{e.current&&n&&(e.current.style.width=i*100+"%",n.volume=i)},[i]),h.useEffect(()=>{n&&(r?n.muted=!0:n.muted=!1)},[r]),{volume:i,handleSetVolume:a,isMute:r,handleMute:l}}const DB=/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;function MB({data:t,inputFields:e,imageURLFromLocal:n}){const[r,s]=h.useState(!!t.name),[i,o]=h.useState(!!t.singer),[a,l]=h.useState(!1),[c,d]=h.useState(!1),[f,p]=h.useState(!1);return h.useEffect(()=>{e.name?s(!0):s(!1)},[e.name]),h.useEffect(()=>{e.singer?o(!0):o(!1)},[e.singer]),h.useEffect(()=>{if(!e.image_url){l(!0);return}const m=DB.test(e.image_url);l(m)},[e.image_url]),h.useEffect(()=>{(e.name!==t.name||e.singer!==t.singer||e.image_url)&&p(!0)},[e,n]),h.useEffect(()=>{d(r&&i&&a&&f)},[r,i,a,f]),{validName:r,validSinger:i,validURL:a,isAbleToSubmit:c,isChangeInEdit:f,setValidURL:l}}function $B({song:t,close:e}){const n=je(),{theme:r}=te(),{user:s}=tt(),{setErrorToast:i,setSuccessToast:o}=Zt(),{currentSong:a}=K(ge),{updateUserSong:l}=Ge(),[c,d]=h.useState(!1),[f,p]=h.useState(!1),[m,g]=h.useState(t.image_url),[y,_]=h.useState(""),[x,v]=h.useState(),[w,E]=h.useState({name:t.name,singer:t.singer,image_url:""}),S=h.useRef(null),{isAbleToSubmit:b,validName:T,validSinger:I,validURL:A,isChangeInEdit:C,setValidURL:j}=MB({data:t,inputFields:w,imageURLFromLocal:y}),B=h.useMemo(()=>{if(y)return y;if(m)return m;if(A)return w.image_url},[w,y,m,t,A]),O=h.useMemo(()=>!!y||!!m,[y,m]),L=(P,W)=>{E({...w,[P]:W})},F=h.useCallback(()=>{t.image_file_path&&!y?g(""):y?(_(""),v(void 0)):g(""),p(!0);const P=S.current;P&&(P.value="")},[y,t.image_file_path]),V=h.useCallback(P=>{const Y=P.target.files[0];_(URL.createObjectURL(Y)),p(!0),v(Y)},[]),X=()=>{d(!1),e()},R=P=>{P.stopPropagation(),X()},$=async()=>{if(s){if(!t.id){i({message:"Edit song wrong data id"});return}try{let P={...t};if(C){if(console.log("is change in edit"),!w.name||!w.singer){console.log("input invalid"),i({});return}const W=w.image_url&&A?w.image_url:P.image_url;if(d(!0),P={...P,name:w.name,singer:w.singer,image_url:W},P.name!==w.name||P.singer!==w.singer){console.log("input invalid"),i({});return}if(x&&f){const{filePath:Y,fileURL:Z}=await _A({file:x,folder:"/images/",email:s.email});P.image_file_path=Y,P.image_url=Z}else f&&(P.image_file_path="");f||l(P)}if(f&&(d(!0),console.log("isImpactOnImage"),t.image_file_path&&(P.image_file_path="",P.image_url="",await Og({filePath:t.image_file_path,msg:">>> api: delete song's image file"})),!m&&!x&&(console.log("remove current image url"),P.image_file_path="",P.image_url=""),x)){console.log("upload new file");const W=await MO(x);if(W==null)return;const Y=EA({blob:W,folder:"/images/",songId:P.id}),{encode:Z}=await ZT(W);Z&&(P.blurhash_encode=Z,console.log("check encode",Z));const{filePath:ke,fileURL:le}=await Y;P.image_file_path=ke,P.image_url=le}await bn({collection:"songs",data:P,id:P.id,msg:">>> api: update song doc"}),l(P),n(Q8({song:P})),a.id===P.id&&n(an({...P,currentIndex:a.currentIndex,song_in:a.song_in})),o({message:"Song edited"}),X()}catch(P){console.log({message:P}),i({})}finally{d(!1)}}},z={textColor:r.type==="light"?"text-[#333]":"text-[#fff]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${r.alpha} text-[14px] font-[500]`};return u.jsxs("div",{className:`w-[500px] max-w-[calc(90vw-40px)] h-[auto] ${c?"opacity-60 pointer-events-none":""}`,children:[u.jsx("input",{ref:S,id:"editImageInput",type:"file",accept:"image/*",onChange:V,className:"hidden"}),u.jsx("h1",{className:"text-[20px] font-semibold",children:"Edit"}),u.jsxs("div",{className:"flex gap-[20px] mt-[10px] max-[800px]:flex-col",children:[u.jsxs("div",{className:"w-[30%] max-[800px]:flex max-[800px]:w-full max-[800px]:gap-[12px]",children:[u.jsx("div",{className:"w-full rounded-[5px] overflow-hidden",children:u.jsx(Or,{classNames:"object-cover object-center w-full h-full",onError:()=>j(!1),src:B,blurHashEncode:t.blurhash_encode})}),u.jsxs("div",{className:"md:mt-[10px]",children:[u.jsxs("div",{className:"flex gap-[10px]",children:[u.jsx("label",{htmlFor:"editImageInput",className:`inline-block cursor-pointer hover:brightness-90 px-[20px] py-[5px] bg-${r.alpha} rounded-full text-[14px]`,children:u.jsx(Ij,{className:"w-[15px]"})}),O&&u.jsx(G,{onClick:()=>F(),className:`inline-block hover:brightness-90 px-[20px] py-[5px] ${r.content_bg} rounded-full text-[14px]`,children:u.jsx(Xs,{className:"w-[15px]"})})]}),u.jsx("p",{className:`text-[12px] ${z.textColor} mt-[10px]`,children:"* Image from URL will not be apply until you remove current image"})]})]}),u.jsxs("div",{className:"flex flex-col flex-grow gap-[10px]",children:[u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"text-[14px] inline-flex",children:["Name:",T?u.jsx(ao,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Xs,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:`${z.input} ${z.textColor}`,value:w.name,type:"text",onChange:P=>L("name",P.target.value),placeholder:t.name})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Singer:",I?u.jsx(ao,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Xs,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:z.input,value:w.singer,onChange:P=>L("singer",P.target.value),type:"text",placeholder:t.singer})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Image URL:",w.image_url&&u.jsx(u.Fragment,{children:A?u.jsx(ao,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Xs,{className:"w-[20px] text-red-500 ml-[10px]"})})]}),u.jsx("input",{className:z.input,value:w.image_url,onChange:P=>L("image_url",P.target.value),type:"text"})]}),u.jsxs("div",{className:"flex gap-[10px] mt-[10px]",children:[u.jsx(G,{isLoading:c,onClick:$,className:`${r.content_bg} rounded-full text-[14px] ${b?"":!f&&"pointer-events-none opacity-60"}`,variant:"primary",children:"Save"}),u.jsx(G,{onClick:R,className:`bg-${r.alpha} rounded-full hover:bg-red-500 hover:text-[#fff] text-[14px]`,variant:"primary",children:"Close"})]})]})]})]})}function FB({toast:t,theme:e,onClick:n}){const r={icon:"w-[30px] max-[549px]:w-[25px]",container:`text-white px-[12px] py-[6px] rounded-[4px] flex items-center  ${e.side_bar_bg} border border-${e.alpha}`,text:`font-[500] text-[14px] max-[549px]:text-[14px] ${e.type==="light"?"text-[#333]":""}`};return u.jsxs("div",{onClick:()=>n?n(t.id):void 0,className:`${r.container} animate-[fadeIn_0.3s_linear]`,children:[t.title&&u.jsxs("span",{className:"mr-[10px]",children:[t.title==="success"&&u.jsx(wT,{className:`${r.icon} text-emerald-500 `}),t.title==="error"&&u.jsx(o4,{className:`${r.icon} text-red-500`}),t.title==="warning"&&u.jsx(Hy,{className:`${r.icon} text-yellow-500`})]}),u.jsx("p",{className:r.text,children:t.desc})]})}function VB({lyric:t,handleSetTime:e,theme:n,realTimeLyrics:r,index:s,setRealTimeLyrics:i}){const[o,a]=h.useState(!1),[l,c]=h.useState(t.text),d=h.useRef(null),f=m=>{m.preventDefault();const g=[...r],y={...g[s],text:l};g[s]=y,console.log("check new lyric ",y),i(g),a(!1)},p={input:`bg-${n.alpha} rounded-[4px] outline-none w-full px-[8px] text-[16px]`};return h.useEffect(()=>{var m;o&&((m=d.current)==null||m.focus())},[o]),u.jsxs("div",{className:"pb-[10px]",children:[!o&&u.jsxs("p",{className:"text-[16px] leading-[1.2] font-bold select-none flex items-center",children:[t.text,u.jsx("button",{onClick:()=>a(!0),className:"ml-[8px]",children:u.jsx(qy,{className:"w-[16px]"})})]}),o&&u.jsx("form",{action:"",onSubmit:f,children:u.jsx("input",{onBlur:()=>a(!1),value:l,onChange:m=>c(m.target.value),ref:d,type:"text",className:p.input})}),u.jsxs("div",{className:"flex gap-[10px] h-[20px]",children:[u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.start),children:[t.start,"s"]}),u.jsx("span",{children:" - "}),u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.end),children:[t.end,"s"]})]})]})}function Lg({cb:t,active:e,size:n="default"}){const{theme:r}=te(),s={circle:`${n==="default"?"w-[20px] h-[20px]":"w-[16px] h-[16px]"}  absolute bg-white left-[3px] rounded-[50%] transition-transform top-[50%] translate-y-[-50%]`,active:`${n==="default"?"translate-x-[14px]":"translate-x-[18px]"} `,inActive:"translate-x-[0]"};return u.jsx("div",{onClick:t,className:`relative  cursor-pointer ${n==="default"?"h-[24px]":"h-[20px]"} rounded-[99px] w-[40px]  ${e?r.content_bg:"bg-"+r.alpha}`,children:u.jsx("div",{className:`${s.circle} ${e?s.active:s.inActive}`})})}const Dg=Math.min,yo=Math.max,Md=Math.round,tu=Math.floor,As=t=>({x:t,y:t});function UB(t,e){return typeof t=="function"?t(e):t}function Uv(t){return t.split("-")[0]}function NA(t){return t.split("-")[1]}function BB(t){return t==="x"?"y":"x"}function zB(t){return t==="y"?"height":"width"}function Bv(t){return["top","bottom"].includes(Uv(t))?"y":"x"}function WB(t){return BB(Bv(t))}function jA(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function A_(t,e,n){let{reference:r,floating:s}=t;const i=Bv(e),o=WB(e),a=zB(o),l=Uv(e),c=i==="y",d=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-s.width,y:f};break;default:m={x:r.x,y:r.y}}switch(NA(e)){case"start":m[o]-=p*(n&&c?-1:1);break;case"end":m[o]+=p*(n&&c?-1:1);break}return m}const HB=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:f}=A_(c,r,l),p=r,m={},g=0;for(let y=0;y<a.length;y++){const{name:_,fn:x}=a[y],{x:v,y:w,data:E,reset:S}=await x({x:d,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});if(d=v??d,f=w??f,m={...m,[_]:{...m[_],...E}},S&&g<=50){g++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):S.rects),{x:d,y:f}=A_(c,p,l)),y=-1;continue}}return{x:d,y:f,placement:p,strategy:s,middlewareData:m}};async function qB(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Uv(n),a=NA(n),l=Bv(n)==="y",c=["left","top"].includes(o)?-1:1,d=i&&l?-1:1,f=UB(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof g=="number"&&(m=a==="end"?g*-1:g),l?{x:m*d,y:p*c}:{x:p*c,y:m*d}}const OA=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,s=await qB(e,t);return{x:n+s.x,y:r+s.y,data:s}}}};function Cs(t){return LA(t)?(t.nodeName||"").toLowerCase():"#document"}function ln(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Mr(t){var e;return(e=(LA(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function LA(t){return t instanceof Node||t instanceof ln(t).Node}function Ke(t){return t instanceof Element||t instanceof ln(t).Element}function Ut(t){return t instanceof HTMLElement||t instanceof ln(t).HTMLElement}function Mg(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ln(t).ShadowRoot}function Ec(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=hn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function KB(t){return["table","td","th"].includes(Cs(t))}function zv(t){const e=Wv(),n=hn(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function QB(t){let e=wi(t);for(;Ut(e)&&!Sc(e);){if(zv(e))return e;e=wi(e)}return null}function Wv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Sc(t){return["html","body","#document"].includes(Cs(t))}function hn(t){return ln(t).getComputedStyle(t)}function Ef(t){return Ke(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function wi(t){if(Cs(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Mg(t)&&t.host||Mr(t);return Mg(e)?e.host:e}function DA(t){const e=wi(t);return Sc(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ut(e)&&Ec(e)?e:DA(e)}function oi(t,e){var n;e===void 0&&(e=[]);const r=DA(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=ln(r);return s?e.concat(i,i.visualViewport||[],Ec(r)?r:[]):e.concat(r,oi(r))}function MA(t){const e=hn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ut(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Md(n)!==i||Md(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Hv(t){return Ke(t)?t:t.contextElement}function vo(t){const e=Hv(t);if(!Ut(e))return As(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=MA(e);let o=(i?Md(n.width):n.width)/r,a=(i?Md(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const GB=As(0);function $A(t){const e=ln(t);return!Wv()||!e.visualViewport?GB:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function XB(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ln(t)?!1:e}function _i(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Hv(t);let o=As(1);e&&(r?Ke(r)&&(o=vo(r)):o=vo(t));const a=XB(i,n,r)?$A(i):As(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,f=s.height/o.y;if(i){const p=ln(i),m=r&&Ke(r)?ln(r):r;let g=p.frameElement;for(;g&&r&&m!==p;){const y=vo(g),_=g.getBoundingClientRect(),x=hn(g),v=_.left+(g.clientLeft+parseFloat(x.paddingLeft))*y.x,w=_.top+(g.clientTop+parseFloat(x.paddingTop))*y.y;l*=y.x,c*=y.y,d*=y.x,f*=y.y,l+=v,c+=w,g=ln(g).frameElement}}return jA({width:d,height:f,x:l,y:c})}function YB(t){let{rect:e,offsetParent:n,strategy:r}=t;const s=Ut(n),i=Mr(n);if(n===i)return e;let o={scrollLeft:0,scrollTop:0},a=As(1);const l=As(0);if((s||!s&&r!=="fixed")&&((Cs(n)!=="body"||Ec(i))&&(o=Ef(n)),Ut(n))){const c=_i(n);a=vo(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function JB(t){return Array.from(t.getClientRects())}function FA(t){return _i(Mr(t)).left+Ef(t).scrollLeft}function ZB(t){const e=Mr(t),n=Ef(t),r=t.ownerDocument.body,s=yo(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=yo(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+FA(t);const a=-n.scrollTop;return hn(r).direction==="rtl"&&(o+=yo(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function e7(t,e){const n=ln(t),r=Mr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Wv();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function t7(t,e){const n=_i(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Ut(t)?vo(t):As(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function C_(t,e,n){let r;if(e==="viewport")r=e7(t,n);else if(e==="document")r=ZB(Mr(t));else if(Ke(e))r=t7(e,n);else{const s=$A(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return jA(r)}function VA(t,e){const n=wi(t);return n===e||!Ke(n)||Sc(n)?!1:hn(n).position==="fixed"||VA(n,e)}function n7(t,e){const n=e.get(t);if(n)return n;let r=oi(t).filter(a=>Ke(a)&&Cs(a)!=="body"),s=null;const i=hn(t).position==="fixed";let o=i?wi(t):t;for(;Ke(o)&&!Sc(o);){const a=hn(o),l=zv(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Ec(o)&&!l&&VA(t,o))?r=r.filter(d=>d!==o):s=a,o=wi(o)}return e.set(t,r),r}function r7(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?n7(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const f=C_(e,d,s);return c.top=yo(f.top,c.top),c.right=Dg(f.right,c.right),c.bottom=Dg(f.bottom,c.bottom),c.left=yo(f.left,c.left),c},C_(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function s7(t){return MA(t)}function i7(t,e,n){const r=Ut(e),s=Mr(e),i=n==="fixed",o=_i(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=As(0);if(r||!r&&!i)if((Cs(e)!=="body"||Ec(s))&&(a=Ef(e)),r){const c=_i(e,!0,i,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else s&&(l.x=FA(s));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function k_(t,e){return!Ut(t)||hn(t).position==="fixed"?null:e?e(t):t.offsetParent}function UA(t,e){const n=ln(t);if(!Ut(t))return n;let r=k_(t,e);for(;r&&KB(r)&&hn(r).position==="static";)r=k_(r,e);return r&&(Cs(r)==="html"||Cs(r)==="body"&&hn(r).position==="static"&&!zv(r))?n:r||QB(t)||n}const o7=async function(t){let{reference:e,floating:n,strategy:r}=t;const s=this.getOffsetParent||UA,i=this.getDimensions;return{reference:i7(e,await s(n),r),floating:{x:0,y:0,...await i(n)}}};function a7(t){return hn(t).direction==="rtl"}const l7={convertOffsetParentRelativeRectToViewportRelativeRect:YB,getDocumentElement:Mr,getClippingRect:r7,getOffsetParent:UA,getElementRects:o7,getClientRects:JB,getDimensions:s7,getScale:vo,isElement:Ke,isRTL:a7};function c7(t,e){let n=null,r;const s=Mr(t);function i(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:d,width:f,height:p}=t.getBoundingClientRect();if(a||e(),!f||!p)return;const m=tu(d),g=tu(s.clientWidth-(c+f)),y=tu(s.clientHeight-(d+p)),_=tu(c),v={rootMargin:-m+"px "+-g+"px "+-y+"px "+-_+"px",threshold:yo(0,Dg(1,l))||1};let w=!0;function E(S){const b=S[0].intersectionRatio;if(b!==l){if(!w)return o();b?o(!1,b):r=setTimeout(()=>{o(!1,1e-7)},100)}w=!1}try{n=new IntersectionObserver(E,{...v,root:s.ownerDocument})}catch{n=new IntersectionObserver(E,v)}n.observe(t)}return o(!0),i}function BA(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Hv(t),d=s||i?[...c?oi(c):[],...oi(e)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const f=c&&a?c7(c,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(x=>{let[v]=x;v&&v.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{m&&m.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let g,y=l?_i(t):null;l&&_();function _(){const x=_i(t);y&&(x.x!==y.x||x.y!==y.y||x.width!==y.width||x.height!==y.height)&&n(),y=x,g=requestAnimationFrame(_)}return n(),()=>{d.forEach(x=>{s&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),f&&f(),m&&m.disconnect(),m=null,l&&cancelAnimationFrame(g)}}const u7=(t,e,n)=>{const r=new Map,s={platform:l7,...n},i={...s.platform,_c:r};return HB(t,e,{...s,platform:i})};var ku=typeof document<"u"?h.useLayoutEffect:h.useEffect;function $d(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!$d(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!$d(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function zA(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function P_(t,e){const n=zA(t);return Math.round(e*n)/n}function N_(t){const e=h.useRef(t);return ku(()=>{e.current=t}),e}function d7(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,f]=h.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=h.useState(r);$d(p,r)||m(r);const[g,y]=h.useState(null),[_,x]=h.useState(null),v=h.useCallback(V=>{V!=b.current&&(b.current=V,y(V))},[y]),w=h.useCallback(V=>{V!==T.current&&(T.current=V,x(V))},[x]),E=i||g,S=o||_,b=h.useRef(null),T=h.useRef(null),I=h.useRef(d),A=N_(l),C=N_(s),j=h.useCallback(()=>{if(!b.current||!T.current)return;const V={placement:e,strategy:n,middleware:p};C.current&&(V.platform=C.current),u7(b.current,T.current,V).then(X=>{const R={...X,isPositioned:!0};B.current&&!$d(I.current,R)&&(I.current=R,Ho.flushSync(()=>{f(R)}))})},[p,e,n,C]);ku(()=>{c===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,f(V=>({...V,isPositioned:!1})))},[c]);const B=h.useRef(!1);ku(()=>(B.current=!0,()=>{B.current=!1}),[]),ku(()=>{if(E&&(b.current=E),S&&(T.current=S),E&&S){if(A.current)return A.current(E,S,j);j()}},[E,S,j,A]);const O=h.useMemo(()=>({reference:b,floating:T,setReference:v,setFloating:w}),[v,w]),L=h.useMemo(()=>({reference:E,floating:S}),[E,S]),F=h.useMemo(()=>{const V={position:n,left:0,top:0};if(!L.floating)return V;const X=P_(L.floating,d.x),R=P_(L.floating,d.y);return a?{...V,transform:"translate("+X+"px, "+R+"px)",...zA(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:X,top:R}},[n,a,L.floating,d.x,d.y]);return h.useMemo(()=>({...d,update:j,refs:O,elements:L,floatingStyles:F}),[d,j,O,L,F])}function Vi(t){let e=t.activeElement;for(;((n=e)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;e=e.shadowRoot.activeElement}return e}function Wt(t,e){if(!t||!e)return!1;const n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Mg(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function h7(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function f7(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function p7(t){if(t.mozInputSource===0&&t.isTrusted)return!0;const e=/Android/i;return(e.test(h7())||e.test(f7()))&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function m7(t){return t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType!=="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0}function g7(){return/apple/i.test(navigator.vendor)}function Fd(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function y7(t){return"nativeEvent"in t}function v7(t){return t.matches("html,body")}function qt(t){return(t==null?void 0:t.ownerDocument)||document}function Op(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function WA(t){return"composedPath"in t?t.composedPath()[0]:t.target}const x7="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function HA(t){return Ut(t)&&t.matches(x7)}function Lp(t){t.preventDefault(),t.stopPropagation()}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var w7=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],$g=w7.join(","),qA=typeof Element>"u",Vl=qA?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Vd=!qA&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Ud=function t(e,n){var r;n===void 0&&(n=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=s===""||s==="true",o=i||n&&e&&t(e.parentNode);return o},_7=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},E7=function(e,n,r){if(Ud(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll($g));return n&&Vl.call(e,$g)&&s.unshift(e),s=s.filter(r),s},S7=function t(e,n,r){for(var s=[],i=Array.from(e);i.length;){var o=i.shift();if(!Ud(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?s.push.apply(s,c):s.push({scopeParent:o,candidates:c})}else{var d=Vl.call(o,$g);d&&r.filter(o)&&(n||!e.includes(o))&&s.push(o);var f=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),p=!Ud(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(f&&p){var m=t(f===!0?o.children:f.children,!0,r);r.flatten?s.push.apply(s,m):s.push({scopeParent:o,candidates:m})}else i.unshift.apply(i,o.children)}}return s},KA=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},QA=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||_7(e))&&!KA(e)?0:e.tabIndex},T7=function(e,n){var r=QA(e);return r<0&&n&&!KA(e)?0:r},b7=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},GA=function(e){return e.tagName==="INPUT"},I7=function(e){return GA(e)&&e.type==="hidden"},R7=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},A7=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},C7=function(e){if(!e.name)return!0;var n=e.form||Vd(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var i=A7(s,e.form);return!i||i===e},k7=function(e){return GA(e)&&e.type==="radio"},P7=function(e){return k7(e)&&!C7(e)},N7=function(e){var n,r=e&&Vd(e),s=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==e){var o,a,l;for(i=!!((o=s)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(s)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!i&&s;){var c,d,f;r=Vd(s),s=(c=r)===null||c===void 0?void 0:c.host,i=!!((d=s)!==null&&d!==void 0&&(f=d.ownerDocument)!==null&&f!==void 0&&f.contains(s))}}return i},j_=function(e){var n=e.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},j7=function(e,n){var r=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=Vl.call(e,"details>summary:first-of-type"),o=i?e.parentElement:e;if(Vl.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var a=e;e;){var l=e.parentElement,c=Vd(e);if(l&&!l.shadowRoot&&s(l)===!0)return j_(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(N7(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return j_(e);return!1},O7=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return Vl.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},L7=function(e,n){return!(n.disabled||Ud(n)||I7(n)||j7(n,e)||R7(n)||O7(n))},O_=function(e,n){return!(P7(n)||QA(n)<0||!L7(e,n))},D7=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},M7=function t(e){var n=[],r=[];return e.forEach(function(s,i){var o=!!s.scopeParent,a=o?s.scopeParent:s,l=T7(a,o),c=o?t(s.candidates):a;l===0?o?n.push.apply(n,c):n.push(a):r.push({documentOrder:i,tabIndex:l,item:s,isScope:o,content:c})}),r.sort(b7).reduce(function(s,i){return i.isScope?s.push.apply(s,i.content):s.push(i.content),s},[]).concat(n)},XA=function(e,n){n=n||{};var r;return n.getShadowRoot?r=S7([e],n.includeContainer,{filter:O_.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:D7}):r=E7(e,n.includeContainer,O_.bind(null,n)),M7(r)};function Bd(){return Bd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bd.apply(this,arguments)}var sn=typeof document<"u"?h.useLayoutEffect:h.useEffect;let Dp=!1,$7=0;const L_=()=>"floating-ui-"+$7++;function F7(){const[t,e]=h.useState(()=>Dp?L_():void 0);return sn(()=>{t==null&&e(L_())},[]),h.useEffect(()=>{Dp||(Dp=!0)},[]),t}const V7=Qg["useId".toString()],YA=V7||F7;function U7(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(s=>s(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(s=>s!==n))||[])}}}const B7=h.createContext(null),z7=h.createContext(null),JA=()=>{var t;return((t=h.useContext(B7))==null?void 0:t.id)||null},Sf=()=>h.useContext(z7);function Ul(t){return"data-floating-ui-"+t}function gr(t){const e=h.useRef(t);return sn(()=>{e.current=t}),e}const D_=Ul("safe-polygon");function Mp(t,e,n){return n&&!Fd(n)?0:typeof t=="number"?t:t==null?void 0:t[e]}function W7(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,events:i,elements:{domReference:o,floating:a},refs:l}=t,{enabled:c=!0,delay:d=0,handleClose:f=null,mouseOnly:p=!1,restMs:m=0,move:g=!0}=e,y=Sf(),_=JA(),x=gr(f),v=gr(d),w=h.useRef(),E=h.useRef(),S=h.useRef(),b=h.useRef(),T=h.useRef(!0),I=h.useRef(!1),A=h.useRef(()=>{}),C=h.useCallback(()=>{var L;const F=(L=s.current.openEvent)==null?void 0:L.type;return(F==null?void 0:F.includes("mouse"))&&F!=="mousedown"},[s]);h.useEffect(()=>{if(!c)return;function L(){clearTimeout(E.current),clearTimeout(b.current),T.current=!0}return i.on("dismiss",L),()=>{i.off("dismiss",L)}},[c,i]),h.useEffect(()=>{if(!c||!x.current||!n)return;function L(V){C()&&r(!1,V)}const F=qt(a).documentElement;return F.addEventListener("mouseleave",L),()=>{F.removeEventListener("mouseleave",L)}},[a,n,r,c,x,s,C]);const j=h.useCallback(function(L,F){F===void 0&&(F=!0);const V=Mp(v.current,"close",w.current);V&&!S.current?(clearTimeout(E.current),E.current=setTimeout(()=>r(!1,L),V)):F&&(clearTimeout(E.current),r(!1,L))},[v,r]),B=h.useCallback(()=>{A.current(),S.current=void 0},[]),O=h.useCallback(()=>{if(I.current){const L=qt(l.floating.current).body;L.style.pointerEvents="",L.removeAttribute(D_),I.current=!1}},[l]);return h.useEffect(()=>{if(!c)return;function L(){return s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1}function F(R){if(clearTimeout(E.current),T.current=!1,p&&!Fd(w.current)||m>0&&Mp(v.current,"open")===0)return;const $=Mp(v.current,"open",w.current);$?E.current=setTimeout(()=>{r(!0,R)},$):r(!0,R)}function V(R){if(L())return;A.current();const $=qt(a);if(clearTimeout(b.current),x.current){n||clearTimeout(E.current),S.current=x.current({...t,tree:y,x:R.clientX,y:R.clientY,onClose(){O(),B(),j(R)}});const P=S.current;$.addEventListener("mousemove",P),A.current=()=>{$.removeEventListener("mousemove",P)};return}(w.current==="touch"?!Wt(a,R.relatedTarget):!0)&&j(R)}function X(R){L()||x.current==null||x.current({...t,tree:y,x:R.clientX,y:R.clientY,onClose(){O(),B(),j(R)}})(R)}if(Ke(o)){const R=o;return n&&R.addEventListener("mouseleave",X),a==null||a.addEventListener("mouseleave",X),g&&R.addEventListener("mousemove",F,{once:!0}),R.addEventListener("mouseenter",F),R.addEventListener("mouseleave",V),()=>{n&&R.removeEventListener("mouseleave",X),a==null||a.removeEventListener("mouseleave",X),g&&R.removeEventListener("mousemove",F),R.removeEventListener("mouseenter",F),R.removeEventListener("mouseleave",V)}}},[o,a,c,t,p,m,g,j,B,O,r,n,y,v,x,s]),sn(()=>{var L;if(c&&n&&(L=x.current)!=null&&L.__options.blockPointerEvents&&C()){const X=qt(a).body;if(X.setAttribute(D_,""),X.style.pointerEvents="none",I.current=!0,Ke(o)&&a){var F,V;const R=o,$=y==null||(F=y.nodesRef.current.find(z=>z.id===_))==null||(V=F.context)==null?void 0:V.elements.floating;return $&&($.style.pointerEvents=""),R.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{R.style.pointerEvents="",a.style.pointerEvents=""}}}},[c,n,_,a,o,y,x,s,C]),sn(()=>{n||(w.current=void 0,B(),O())},[n,B,O]),h.useEffect(()=>()=>{B(),clearTimeout(E.current),clearTimeout(b.current),O()},[c,o,B,O]),h.useMemo(()=>{if(!c)return{};function L(F){w.current=F.pointerType}return{reference:{onPointerDown:L,onPointerEnter:L,onMouseMove(F){n||m===0||(clearTimeout(b.current),b.current=setTimeout(()=>{T.current||r(!0,F.nativeEvent)},m))}},floating:{onMouseEnter(){clearTimeout(E.current)},onMouseLeave(F){i.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),j(F.nativeEvent,!1)}}}},[i,c,m,n,r,j])}let M_=0;function Us(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:s=!1}=e;r&&cancelAnimationFrame(M_);const i=()=>t==null?void 0:t.focus({preventScroll:n});s?i():M_=requestAnimationFrame(i)}function H7(t,e){var n;let r=[],s=(n=t.find(i=>i.id===e))==null?void 0:n.parentId;for(;s;){const i=t.find(o=>o.id===s);s=i==null?void 0:i.parentId,i&&(r=r.concat(i))}return r}function Ya(t,e){let n=t.filter(s=>{var i;return s.parentId===e&&((i=s.context)==null?void 0:i.open)}),r=n;for(;r.length;)r=t.filter(s=>{var i;return(i=r)==null?void 0:i.some(o=>{var a;return s.parentId===o.id&&((a=s.context)==null?void 0:a.open)})}),n=n.concat(r);return n}let Di=new WeakMap,nu=new WeakSet,ru={},$p=0;const q7=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,ZA=t=>t&&(t.host||ZA(t.parentNode)),K7=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=ZA(n);return t.contains(r)?r:null}).filter(n=>n!=null);function Q7(t,e,n,r){const s="data-floating-ui-inert",i=r?"inert":n?"aria-hidden":null,o=K7(e,t),a=new Set,l=new Set(o),c=[];ru[s]||(ru[s]=new WeakMap);const d=ru[s];o.forEach(f),p(e),a.clear();function f(m){!m||a.has(m)||(a.add(m),m.parentNode&&f(m.parentNode))}function p(m){!m||l.has(m)||Array.prototype.forEach.call(m.children,g=>{if(a.has(g))p(g);else{const y=i?g.getAttribute(i):null,_=y!==null&&y!=="false",x=(Di.get(g)||0)+1,v=(d.get(g)||0)+1;Di.set(g,x),d.set(g,v),c.push(g),x===1&&_&&nu.add(g),v===1&&g.setAttribute(s,""),!_&&i&&g.setAttribute(i,"true")}})}return $p++,()=>{c.forEach(m=>{const g=(Di.get(m)||0)-1,y=(d.get(m)||0)-1;Di.set(m,g),d.set(m,y),g||(!nu.has(m)&&i&&m.removeAttribute(i),nu.delete(m)),y||m.removeAttribute(s)}),$p--,$p||(Di=new WeakMap,Di=new WeakMap,nu=new WeakSet,ru={})}}function $_(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=qt(t[0]).body;return Q7(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const eC=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function tC(t,e){const n=XA(t,eC());e==="prev"&&n.reverse();const r=n.indexOf(Vi(qt(t)));return n.slice(r+1)[0]}function G7(){return tC(document.body,"next")}function X7(){return tC(document.body,"prev")}function F_(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!Wt(n,r)}const nC={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let Y7;function V_(t){t.key==="Tab"&&(t.target,clearTimeout(Y7))}const U_=h.forwardRef(function(e,n){const[r,s]=h.useState();sn(()=>(g7()&&s("button"),document.addEventListener("keydown",V_),()=>{document.removeEventListener("keydown",V_)}),[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Ul("focus-guard")]:"",style:nC};return h.createElement("span",Bd({},e,i))}),J7=h.createContext(null),Z7=()=>h.useContext(J7),ez=h.forwardRef(function(e,n){return h.createElement("button",Bd({},e,{type:"button",ref:n,tabIndex:-1,style:nC}))});function rC(t){const{context:e,children:n,disabled:r=!1,order:s=["content"],guards:i=!0,initialFocus:o=0,returnFocus:a=!0,modal:l=!0,visuallyHiddenDismiss:c=!1,closeOnFocusOut:d=!0}=t,{open:f,refs:p,nodeId:m,onOpenChange:g,events:y,dataRef:_,elements:{domReference:x,floating:v}}=e,w=q7()?i:!0,E=gr(s),S=gr(o),b=gr(a),T=Sf(),I=Z7(),A=typeof o=="number"&&o<0,C=h.useRef(null),j=h.useRef(null),B=h.useRef(!1),O=h.useRef(null),L=h.useRef(!1),F=I!=null,V=x&&x.getAttribute("role")==="combobox"&&HA(x),X=h.useCallback(function(P){return P===void 0&&(P=v),P?XA(P,eC()):[]},[v]),R=h.useCallback(P=>{const W=X(P);return E.current.map(Y=>x&&Y==="reference"?x:v&&Y==="floating"?v:W).filter(Boolean).flat()},[x,v,E,X]);h.useEffect(()=>{if(r||!l)return;function P(Y){if(Y.key==="Tab"){Wt(v,Vi(qt(v)))&&X().length===0&&!V&&Lp(Y);const Z=R(),ke=WA(Y);E.current[0]==="reference"&&ke===x&&(Lp(Y),Y.shiftKey?Us(Z[Z.length-1]):Us(Z[1])),E.current[1]==="floating"&&ke===v&&Y.shiftKey&&(Lp(Y),Us(Z[0]))}}const W=qt(v);return W.addEventListener("keydown",P),()=>{W.removeEventListener("keydown",P)}},[r,x,v,l,E,p,V,X,R]),h.useEffect(()=>{if(r||!d)return;function P(){L.current=!0,setTimeout(()=>{L.current=!1})}function W(Y){const Z=Y.relatedTarget;queueMicrotask(()=>{const ke=!(Wt(x,Z)||Wt(v,Z)||Wt(Z,v)||Wt(I==null?void 0:I.portalNode,Z)||Z!=null&&Z.hasAttribute(Ul("focus-guard"))||T&&(Ya(T.nodesRef.current,m).find(le=>{var Ve,ht;return Wt((Ve=le.context)==null?void 0:Ve.elements.floating,Z)||Wt((ht=le.context)==null?void 0:ht.elements.domReference,Z)})||H7(T.nodesRef.current,m).find(le=>{var Ve,ht;return((Ve=le.context)==null?void 0:Ve.elements.floating)===Z||((ht=le.context)==null?void 0:ht.elements.domReference)===Z})));Z&&ke&&!L.current&&Z!==O.current&&(B.current=!0,g(!1,Y))})}if(v&&Ut(x))return x.addEventListener("focusout",W),x.addEventListener("pointerdown",P),!l&&v.addEventListener("focusout",W),()=>{x.removeEventListener("focusout",W),x.removeEventListener("pointerdown",P),!l&&v.removeEventListener("focusout",W)}},[r,x,v,l,m,T,I,g,d]),h.useEffect(()=>{var P;if(r)return;const W=Array.from((I==null||(P=I.portalNode)==null?void 0:P.querySelectorAll("["+Ul("portal")+"]"))||[]);if(v){const Y=[v,...W,C.current,j.current,E.current.includes("reference")||V?x:null].filter(ke=>ke!=null),Z=l?$_(Y,w,!w):$_(Y);return()=>{Z()}}},[r,x,v,l,E,I,V,w]),sn(()=>{if(r||!v)return;const P=qt(v),W=Vi(P);queueMicrotask(()=>{const Y=R(v),Z=S.current,ke=(typeof Z=="number"?Y[Z]:Z.current)||v,le=Wt(v,W);!A&&!le&&f&&Us(ke,{preventScroll:ke===v})})},[r,f,v,A,R,S]),sn(()=>{if(r||!v)return;let P=!1;const W=qt(v),Y=Vi(W),Z=_.current;O.current=Y;function ke(le){if(le.type==="escapeKey"&&p.domReference.current&&(O.current=p.domReference.current),["referencePress","escapeKey"].includes(le.type))return;const Ve=le.data.returnFocus;typeof Ve=="object"?(B.current=!1,P=Ve.preventScroll):B.current=!Ve}return y.on("dismiss",ke),()=>{y.off("dismiss",ke);const le=Vi(W);(Wt(v,le)||T&&Ya(T.nodesRef.current,m).some(ht=>{var $r;return Wt(($r=ht.context)==null?void 0:$r.elements.floating,le)})||Z.openEvent&&["click","mousedown"].includes(Z.openEvent.type))&&p.domReference.current&&(O.current=p.domReference.current),b.current&&Ut(O.current)&&!B.current&&Us(O.current,{cancelPrevious:!1,preventScroll:P})}},[r,v,b,_,p,y,T,m]),sn(()=>{if(!(r||!I))return I.setFocusManagerState({modal:l,closeOnFocusOut:d,open:f,onOpenChange:g,refs:p}),()=>{I.setFocusManagerState(null)}},[r,I,l,f,g,p,d]),sn(()=>{if(!r&&v&&typeof MutationObserver=="function"){const P=()=>{const Y=v.getAttribute("tabindex");E.current.includes("floating")||Vi(qt(v))!==p.domReference.current&&X().length===0?Y!=="0"&&v.setAttribute("tabindex","0"):Y!=="-1"&&v.setAttribute("tabindex","-1")};P();const W=new MutationObserver(P);return W.observe(v,{childList:!0,subtree:!0,attributes:!0}),()=>{W.disconnect()}}},[r,v,p,E,X]);function $(P){return r||!c||!l?null:h.createElement(ez,{ref:P==="start"?C:j,onClick:W=>g(!1,W.nativeEvent)},typeof c=="string"?c:"Dismiss")}const z=!r&&w&&!V&&(F||l);return h.createElement(h.Fragment,null,z&&h.createElement(U_,{"data-type":"inside",ref:I==null?void 0:I.beforeInsideRef,onFocus:P=>{if(l){const Y=R();Us(s[0]==="reference"?Y[0]:Y[Y.length-1])}else if(I!=null&&I.preserveTabOrder&&I.portalNode)if(B.current=!1,F_(P,I.portalNode)){const Y=G7()||x;Y==null||Y.focus()}else{var W;(W=I.beforeOutsideRef.current)==null||W.focus()}}}),!V&&$("start"),n,$("end"),z&&h.createElement(U_,{"data-type":"inside",ref:I==null?void 0:I.afterInsideRef,onFocus:P=>{if(l)Us(R()[0]);else if(I!=null&&I.preserveTabOrder&&I.portalNode)if(d&&(B.current=!0),F_(P,I.portalNode)){const Y=X7()||x;Y==null||Y.focus()}else{var W;(W=I.afterOutsideRef.current)==null||W.focus()}}}))}function B_(t){return Ut(t.target)&&t.target.tagName==="BUTTON"}function z_(t){return HA(t)}function tz(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,elements:{domReference:i}}=t,{enabled:o=!0,event:a="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:d=!0}=e,f=h.useRef(),p=h.useRef(!1);return h.useMemo(()=>o?{reference:{onPointerDown(m){f.current=m.pointerType},onMouseDown(m){m.button===0&&(Fd(f.current,!0)&&c||a!=="click"&&(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="mousedown")?r(!1,m.nativeEvent):(m.preventDefault(),r(!0,m.nativeEvent))))},onClick(m){if(a==="mousedown"&&f.current){f.current=void 0;return}Fd(f.current,!0)&&c||(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="click")?r(!1,m.nativeEvent):r(!0,m.nativeEvent))},onKeyDown(m){f.current=void 0,!(m.defaultPrevented||!d||B_(m))&&(m.key===" "&&!z_(i)&&(m.preventDefault(),p.current=!0),m.key==="Enter"&&r(!(n&&l),m.nativeEvent))},onKeyUp(m){m.defaultPrevented||!d||B_(m)||z_(i)||m.key===" "&&p.current&&(p.current=!1,r(!(n&&l),m.nativeEvent))}}}:{},[o,s,a,c,d,i,l,n,r])}const nz=Qg["useInsertionEffect".toString()],rz=nz||(t=>t());function Pu(t){const e=h.useRef(()=>{});return rz(()=>{e.current=t}),h.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}const sz={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},iz={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},oz=t=>{var e,n;return{escapeKeyBubbles:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePressBubbles:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function sC(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:s,nodeId:i,elements:{reference:o,domReference:a,floating:l},dataRef:c}=t,{enabled:d=!0,escapeKey:f=!0,outsidePress:p=!0,outsidePressEvent:m="pointerdown",referencePress:g=!1,referencePressEvent:y="pointerdown",ancestorScroll:_=!1,bubbles:x}=e,v=Sf(),w=JA()!=null,E=Pu(typeof p=="function"?p:()=>!1),S=typeof p=="function"?E:p,b=h.useRef(!1),{escapeKeyBubbles:T,outsidePressBubbles:I}=oz(x),A=Pu(j=>{if(!n||!d||!f||j.key!=="Escape")return;const B=v?Ya(v.nodesRef.current,i):[];if(!T&&(j.stopPropagation(),B.length>0)){let O=!0;if(B.forEach(L=>{var F;if((F=L.context)!=null&&F.open&&!L.context.dataRef.current.__escapeKeyBubbles){O=!1;return}}),!O)return}s.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1,y7(j)?j.nativeEvent:j)}),C=Pu(j=>{const B=b.current;if(b.current=!1,B||typeof S=="function"&&!S(j))return;const O=WA(j),L="["+Ul("inert")+"]",F=qt(l).querySelectorAll(L);let V=Ke(O)?O:null;for(;V&&!Sc(V);){const $=wi(V);if($===qt(l).body||!Ke($))break;V=$}if(F.length&&Ke(O)&&!v7(O)&&!Wt(O,l)&&Array.from(F).every($=>!Wt(V,$)))return;if(Ut(O)&&l){const $=O.clientWidth>0&&O.scrollWidth>O.clientWidth,z=O.clientHeight>0&&O.scrollHeight>O.clientHeight;let P=z&&j.offsetX>O.clientWidth;if(z&&hn(O).direction==="rtl"&&(P=j.offsetX<=O.offsetWidth-O.clientWidth),P||$&&j.offsetY>O.clientHeight)return}const X=v&&Ya(v.nodesRef.current,i).some($=>{var z;return Op(j,(z=$.context)==null?void 0:z.elements.floating)});if(Op(j,l)||Op(j,a)||X)return;const R=v?Ya(v.nodesRef.current,i):[];if(R.length>0){let $=!0;if(R.forEach(z=>{var P;if((P=z.context)!=null&&P.open&&!z.context.dataRef.current.__outsidePressBubbles){$=!1;return}}),!$)return}s.emit("dismiss",{type:"outsidePress",data:{returnFocus:w?{preventScroll:!0}:p7(j)||m7(j)}}),r(!1,j)});return h.useEffect(()=>{if(!n||!d)return;c.current.__escapeKeyBubbles=T,c.current.__outsidePressBubbles=I;function j(L){r(!1,L)}const B=qt(l);f&&B.addEventListener("keydown",A),S&&B.addEventListener(m,C);let O=[];return _&&(Ke(a)&&(O=oi(a)),Ke(l)&&(O=O.concat(oi(l))),!Ke(o)&&o&&o.contextElement&&(O=O.concat(oi(o.contextElement)))),O=O.filter(L=>{var F;return L!==((F=B.defaultView)==null?void 0:F.visualViewport)}),O.forEach(L=>{L.addEventListener("scroll",j,{passive:!0})}),()=>{f&&B.removeEventListener("keydown",A),S&&B.removeEventListener(m,C),O.forEach(L=>{L.removeEventListener("scroll",j)})}},[c,l,a,o,f,S,m,n,r,_,d,T,I,A,C]),h.useEffect(()=>{b.current=!1},[S,m]),h.useMemo(()=>d?{reference:{onKeyDown:A,[sz[y]]:j=>{g&&(s.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1,j.nativeEvent))}},floating:{onKeyDown:A,[iz[m]]:()=>{b.current=!0}}}:{},[d,s,g,m,y,r,A])}function iC(t){var e;t===void 0&&(t={});const{open:n=!1,onOpenChange:r,nodeId:s}=t,[i,o]=h.useState(null),a=((e=t.elements)==null?void 0:e.reference)||i,l=d7(t),c=Sf(),d=Pu((E,S)=>{E&&(p.current.openEvent=S),r==null||r(E,S)}),f=h.useRef(null),p=h.useRef({}),m=h.useState(()=>U7())[0],g=YA(),y=h.useCallback(E=>{const S=Ke(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;l.refs.setReference(S)},[l.refs]),_=h.useCallback(E=>{(Ke(E)||E===null)&&(f.current=E,o(E)),(Ke(l.refs.reference.current)||l.refs.reference.current===null||E!==null&&!Ke(E))&&l.refs.setReference(E)},[l.refs]),x=h.useMemo(()=>({...l.refs,setReference:_,setPositionReference:y,domReference:f}),[l.refs,_,y]),v=h.useMemo(()=>({...l.elements,domReference:a}),[l.elements,a]),w=h.useMemo(()=>({...l,refs:x,elements:v,dataRef:p,nodeId:s,floatingId:g,events:m,open:n,onOpenChange:d}),[l,s,g,m,n,d,x,v]);return sn(()=>{const E=c==null?void 0:c.nodesRef.current.find(S=>S.id===s);E&&(E.context=w)}),h.useMemo(()=>({...l,context:w,refs:x,elements:v}),[l,x,v,w])}function Fp(t,e,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...t,...e.map(s=>s?s[n]:null).concat(t).reduce((s,i)=>(i&&Object.entries(i).forEach(o=>{let[a,l]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof l=="function"){var c;(c=r.get(a))==null||c.push(l),s[a]=function(){for(var d,f=arguments.length,p=new Array(f),m=0;m<f;m++)p[m]=arguments[m];return(d=r.get(a))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else s[a]=l}),s),{})}}function oC(t){t===void 0&&(t=[]);const e=t,n=h.useCallback(i=>Fp(i,t,"reference"),e),r=h.useCallback(i=>Fp(i,t,"floating"),e),s=h.useCallback(i=>Fp(i,t,"item"),t.map(i=>i==null?void 0:i.item));return h.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:s}),[n,r,s])}function aC(t,e){e===void 0&&(e={});const{open:n,floatingId:r}=t,{enabled:s=!0,role:i="dialog"}=e,o=YA();return h.useMemo(()=>{const a={id:r,role:i};return s?i==="tooltip"?{reference:{"aria-describedby":n?r:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?r:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:o}},floating:{...a,...i==="menu"&&{"aria-labelledby":o}}}:{}},[s,i,n,r,o])}const W_=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function Mi(t,e){return typeof t=="function"?t(e):t}function az(t,e){const[n,r]=h.useState(t);return t&&!n&&r(!0),h.useEffect(()=>{if(!t){const s=setTimeout(()=>r(!1),e);return()=>clearTimeout(s)}},[t,e]),n}function lC(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:s=250}=e,o=(typeof s=="number"?s:s.close)||0,[a,l]=h.useState(!1),[c,d]=h.useState("unmounted"),f=az(n,o);return sn(()=>{a&&!f&&d("unmounted")},[a,f]),sn(()=>{if(r)if(n){d("initial");const p=requestAnimationFrame(()=>{d("open")});return()=>{cancelAnimationFrame(p)}}else l(!0),d("close")},[n,r]),{isMounted:f,status:c}}function lz(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:s,common:i,duration:o=250}=e,a=t.placement,l=a.split("-")[0],c=h.useMemo(()=>({side:l,placement:a}),[l,a]),d=typeof o=="number",f=(d?o:o.open)||0,p=(d?o:o.close)||0,[m,g]=h.useState(()=>({...Mi(i,c),...Mi(n,c)})),{isMounted:y,status:_}=lC(t,{duration:o}),x=gr(n),v=gr(r),w=gr(s),E=gr(i);return sn(()=>{const S=Mi(x.current,c),b=Mi(w.current,c),T=Mi(E.current,c),I=Mi(v.current,c)||Object.keys(S).reduce((A,C)=>(A[C]="",A),{});if(_==="initial"&&g(A=>({transitionProperty:A.transitionProperty,...T,...S})),_==="open"&&g({transitionProperty:Object.keys(I).map(W_).join(","),transitionDuration:f+"ms",...T,...I}),_==="close"){const A=b||S;g({transitionProperty:Object.keys(A).map(W_).join(","),transitionDuration:p+"ms",...T,...A})}},[p,w,x,v,E,f,_,c]),{isMounted:y,styles:m}}function cz({placement:t="bottom"}={}){const[e,n]=h.useState(!1),{context:r,floatingStyles:s,refs:i}=iC({placement:t,open:e,onOpenChange:n,whileElementsMounted:BA,middleware:[OA(10)]}),o=W7(r,{move:!1}),a=sC(r),l=aC(r,{role:"tooltip"}),{getFloatingProps:c,getReferenceProps:d}=oC([o,a,l]);return{isOpen:e,setIsOpen:n,getFloatingProps:c,getReferenceProps:d,floatingStyles:s,refs:i,context:r}}const cC=h.createContext(null),uC=()=>{const t=h.useContext(cC);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function Fg({children:t,...e}){const n=cz({...e});return u.jsx(cC.Provider,{value:n,children:t})}function Vg({children:t,...e}){const{getReferenceProps:n,refs:r,isOpen:s}=uC();return u.jsx("button",{ref:r.setReference,"data-state":s?"open":"closed",...n(e),children:t})}function Ug({children:t,className:e,...n}){const{theme:r}=te(),{context:s,refs:i,getFloatingProps:o,floatingStyles:a,isOpen:l}=uC(),c={container:`${r.type==="dark"?"bg-[#666]":"bg-[#333]"}`};if(l)return u.jsx(rC,{context:s,modal:!1,children:u.jsx("div",{className:`${c.container} text-[12px] font-[600] px-[6px] py-[3px] rounded-[4px]`,ref:i.setFloating,style:{...a},...o(n),children:t})})}function dC(t,e){h.useEffect(()=>{if(t)return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[...e])}const qv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABnCAMAAADBqBfIAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAu5QTFRF+9t4AAAA////+tp4+9t6iWRS/fDGkm1W//35imVT///+imRT/Oah9NN25sRx/eej+91+//78i2ZT+9x7kGtV/vbeiWRS9tZ2+Nd3/fHL+96C/OWd//zz//32/vPS2rlu/vLOjWhU/e/D+9+F//rslXBX/euy/vTXl3NX/vTV+dl3/ems7s10/OGN/vfhlnBQ/Oem/OSa/OKQt5Ri8dB1/N+I/vXaoHta/eu1/vjk/fHJ/vnp/OCK/e26o39b6chyj2lR/e/BimVSiWRS7Mtz/eiqjGdR/eqv//vv/OSYjWdR4b9vzqxp/OOWk21Qi2ZRnXlZ/vnnpoJcv5xl3bxumnNP/OKUimRSimVSkGlRm3ZZimRSq4del3BP1LJrmnJPzKppnXVO2LZtroZMt45Mj2hRqH9MrIJKmXJPqIRdrIhelG1Qn3dPxaNms49hqoJLlG1Qm3NPupFJoXlOnXZPnHVPlG5QlW5QkWtRjmhRjGZSi2ZSn3dOmHFPjWdSnXVOtZJhoXhO/e6948FwvZpk/OGPmXJQqoJJu5djrodFvpVIj2hRl3BPj2lRjGdRsohLkWpRm3NP////jWdRw5lGqIFNpHxPlm9QlG1Qn3dPl3BPsYhNx6Rn0K5qsY5gmHBP//vxkWtR////////zqNJ////////s4pIkGpRl3BQ///+pn1M////ropfmHFQpn5PjmhRmnNPonpOm3VOl3BQxp9JxZlLkmxRwp9lk2xRs4lK////lnBQwplJnXZPkmtQzLqvkmtQ////lW9Q9/Tx+vj2sJN74s+lkmxQ6+Xjo4Rx2c3EspmN2rt4////5sqFwa6k////xZtD5dfDoXhKlnRl////uaCQ+/jy////zKBH////totJ////////4MeV////////1Kc++vfznHdYu5RFn3hOr4dLnXZP8ezp////////vpVD////////mnNP////l3BQkWtRmXJPpH1Np39Q////rINMmnROoHhQyC8s0wAAAPp0Uk5T/wD////3///////9//////////////r///////////////////////////////9o/////////////////////7//4u7//9X////K////iN///////0P/8uyf/+j/Q/8Y/x3/AwKuBg1O//9xDP//C4Q1BRMuK3hWirnn2idLzxf/Cf////86A/8CA7RSqNAIm0v5xQEVFmJqEl0E////WP+kBVcBf7wCkT0VEeP/XgujPCBVfwEClf+OD8pLBTqrwkqTJsneoApf///h6P8d///rAv8E66f//4sCKxNpw/+i1wHWXwIxCyf/sTQKDOoh9G7EZC4NkhEsBY8dBX0AAAe/SURBVHic7ZpnWBNJGMd3E0IIoYQQktACoUZ6C6GDdFEBkd6kSrFixY7KoWfvXRTLnd07z16v9957P73e77z7drshOxOyk82mPPfcPY//j+/svr+Zd2benbIY/i8Iuwf5P0Pe/3Duw0v2REf/dqCh59z3tofcmRO9fkOVUCzhBwergoP5SoE0e2tvZ/Msm0Gubh4qkSo1fU3luQnOMrlc5pwQ4dJyuVslzFk67/bnNoDM6GznSbqaMsMwupzL+1WCkt7FbdZB7uzKF2r2R3ARhGHJXeL5VWt7LlgO2T1lIX8w0yhAp7BxGYKs45Mtg7RGZ0smJphCkOKOrZdmLbYA0jaQJelzZoPQyi9D2rvbXMjymdIyk4EaGTT+ogbzIE8USZqM9zZaCfWC81PNgJypLss1E0E2plG5dQdbyOR54j7UtDAtl9KSAXaQN28JG80NFSXnripUx9AgJx/it1iIICSP550xDZm8QOJiOYPomNXSR7aZgMyo4a+0hkFQJvLWMUO2bVJa1Q5S3D7ebSbI3l3KRmsZRL+czv6aAXKdZ/YURElWu2GjUciyutM2QBDK5F9ZZQTyd3sp+4zILD/pASOQKWKrOx1osHo3ErKjOt5mDCxCdWwVAtJaY7NgkfLjVSAgAzw/GzIwbkbRGhqkrSjDlgwiIyuv0yA94nLbQrjTi84aQCZnddtiGuorVzDfANLDG2tjBoZ1FelBrn37+NFH3/GujFQH2tkSMlYwF0I4Orn5pMbZEiIvvQIhP3OAxqAeTk8qyItxih0fF+kObHZs2jyubjsK4o16FpS6qYGtYJTC398zxV6ngNFarUgPCXcdo6YqkCDsBJAfIcQJBXEDxZHAZs9hkENiuncaSdK0A8gpWJyHgjiA4vuALYUJQspXUeCFXV54g4J8BotC2EI8TUEIudm/IlhMQT6G9nQUxAcB8WcB4XDeffVLCvI2tNqjIIWguBIBCXClFBOeHqBI9nXUxzz5sg5yFNoSUZAJoHg8sCmAzWCs2MUVJLrpUa79MAw5DE2pKIgHKIbTCELoo17kHaXXmj8PaSEfbAEWBxQkFOFwFKJ1ehi9cbHlOy3kxGvQFIh4BQ5XGBoIjkS8gYmSocv3tJBnnoIWVL3SQSmcRhCCqhaGOcGAPaCFdLwAIeG6h9xFXuq0yMpYp5jwEBgaOI0Sgc0dCVE7GEBmvwghCqe8kPQAT0ViVGqhr/4o0SqdDkH24gjIp1rIpLdg2xwdOQyC0wiMuEI0JBb6OTwMyfmGybOeFHRIMhoCh/ipEzrIGywhHnRIKJJRCSP90fBknFT9CWOQoFLBpyqKMiETUVoqeOWLQ8OQ2XUv+SB9Et3qE+ShsAfjtVBEg6DydhxMRM89rctdHdn76UnVN3lUQFJMbBrp1psy+nhRfsBko2cV9xBY5YPPF+sgN/L3jdGrfGpoSlJMZZoX/IoHgjK1IcTNYMLbqQs8YOw94vi/UOuuBfF2ED5BhBnKzldX5gg+KFRAYNsIicaH+x+E1XWzF8kEnRTkUhk3ALYEsSwCPeBtCHHwTElJ8STkrwiNCvLl6CGivN2xXOkcChKtkkXCGRpAh4AqFFCWVA6zHJPzyIiUVy+jIAPKCDuYjA7Sl1SutAqYgES5DodxX/5GCnJX6IfpdX0sDaKm4gCmXpBxgM+oJGo0cOuHwIL7Qkk/Zge/5AoaxJ2qeDIzxDHIPyRWDfOyLDgaruqHNBgWDkaeQxqNMpqqJWVI9FB4BqxIKggnFrDD8h4TpzZM+y5wSYTjZ8QyTAQrt4IGiaWqSrnxErFZDE+rngUhzTl+er3L8aVNFRGZ8ApDV+ShP1HGpFmvtwlqyxokAg+bEk57PNkjKTbQPAKGOQsO6O+05ksSiKaA/FzoZfi8Rbujpuzd+pCTvHFEU8BHwjHJEp+Gkms2XRyxZ1xfS+xL49yM94oFGrGdI3VcSp6rwIyPXN6bqe78r0ZC9i7oDiMGJuh7H/RyyhzlCg232HiFmDx7BMPYgz4hzVV8/lRDyJqtGeRpgXYh55CC3KCaJxflEtwQgjdIyeOCNCIV+o+3xXa+K7+VDmmrqSWPomI8K02+z0booyi8uWoixnKDblrOtTWtKAg+T2zWjQmj+nK240jI8rUa2x10zsfREGK9Omib86hc/jFjR7Y4vo5MYdZLXpo/8kpoBOTIFKUV1xqAMZ3xGB3fO2TdxYZW8bybOBMEX97Ot5ISNo23B2eG4B2/WknpFx540BQEv7qWb8W5qryfF23oEXVxNvWW5ZcosnredVo70FeAxcJ+y64AMzXZFXR/6MvM1meruiy4zOQ2SoqaUQwj17K/L5K0mNsY50Fp73KkN2MXzDtmCrsizGKMU5U8dj/amfH7+Iqlyn7W+ZK7soy36a4xVwyX/n/sWhg8UcaKMbZbnNXTatQT4+8LHb11ktW5phKz3K9MuKECMXDZQXB8WfFCZZcfQ3O4EdNqhUWbZzB6MflLyawl7VXisn2ZiO4JSyhfrRIuKj53xIQPFj/HvN68c0GOOLj+cotLglxXf1nuyv2rNXxhyaWGsyYdsP3NZ81fO2s21PEEAkmwSkX+5SOsKskq7txOu6+2BkJq1uyfbq6Lnjdz5vkpOzfPae64yPrN/9yvV/cgOP4PsP50Fs+e30kAAAAASUVORK5CYII=";function uz({vinylRef:t}){const{playStatus:{isPlaying:e}}=K(en);h.useEffect(()=>{const n=t.current;n&&(e?n.style.animationPlayState="running":n.style.animationPlayState="paused")},[e])}function dz({isOpenFullScreen:t,admin:e}){const n=h.useRef(null),{currentSong:r}=K(ge);uz({vinylRef:n});const s={songInfoWrapper:`${e?"w-1/4":"w-1/4 "}`,songInfoChild:"flex flex-row items-center h-full origin-center"};return u.jsx("div",{className:`${s.songInfoWrapper}  ${t?"hidden":""}`,children:u.jsxs("div",{className:`${s.songInfoChild} ${t?"hidden":""}`,children:[u.jsx("div",{className:e?"w-[36px]":"w-[46px]",children:u.jsx("img",{ref:n,src:r.image_url||qv,className:"rounded-full w-full animate-[spin_8s_linear_infinite]"})}),u.jsxs("div",{className:"ml-[10px] flex-grow",children:[u.jsx("div",{className:"h-[24px] w-full mask-image-horizontal",children:u.jsx(zd,{autoScroll:!0,classNames:"text-[18px] font-[500]",label:r.name||"name"})}),u.jsx("div",{className:"h-[20px] w-full mask-image-horizontal",children:u.jsx(zd,{autoScroll:!0,classNames:"text-[14px] opacity-60",label:r.singer||"singer"})})]})]})})}function hz({idle:t,audioEle:e,admin:n,isOpenFullScreen:r,setIsOpenFullScreen:s,isOpenSongQueue:i,setIsOpenSongQueue:o}){const{theme:a}=te(),{currentSong:l}=K(ge),{playStatus:{isPlaying:c,isWaiting:d}}=K(en),f=h.useRef(),p=h.useRef(null),m=h.useRef(null),g=mn(),{handleSetVolume:y,isMute:_,handleMute:x}=LB(f,m,e);dC(()=>{var b;f.current=(b=p.current)==null?void 0:b.offsetWidth},[]);const w=h.useMemo(()=>g.pathname.includes("edit"),[g]),E=()=>{i&&o(!1),s(!0)};h.useEffect(()=>{var b;f.current=(b=p.current)==null?void 0:b.offsetWidth},[r]);const S={before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]",wrapper:`border-${a.alpha} fixed bottom-0 w-full border-t transition-transform z-50 px-10 ${n?"h-[60px]":"h-[90px]"}`,container:"flex flex-row gap-[10px] h-full items-stretch",controlWrapper:"flex max-w-[450px] flex-grow",controlWrapperChild_1:`${r?"max-w-[600px] flex-col-reverse pb-[10px]":"flex-col justify-center"}`,controlWrapperChild_2:`${!l.song_url&&"pointer-events-none opacity-60"}`,volumeWrapper:`volume-control ${n?"w-1/4":"w-1/4 "} flex items-center justify-end gap-[8px]`,volumeLineBase:"ml-3 w-full relative h-[4px] cursor-pointer rounded-3xl bg-gray-200",volumeLineCurrent:"absolute left-0 top-0 h-full w-full rounded-l-full",blurBg:`bg-opacity-[0.8] backdrop-blur-[15px] z-[-1] absolute inset-0 ${a.bottom_player_bg}`};return u.jsxs("div",{className:`${S.wrapper} ${r&&"border-transparent"} ${w&&"translate-y-[100%] "} bg-transparent`,children:[u.jsx("div",{className:`${S.blurBg} ${r?"opacity-0 transition-opacity delay-[.2s]":""}`}),u.jsxs("div",{className:`${S.container} ${r?"justify-center text-white":"justify-between"} ${t&&"transition-opacity duration-[.3s] opacity-0"}`,children:[u.jsx(dz,{isOpenFullScreen:r,admin:n}),u.jsx("div",{className:` ${S.controlWrapper} ${n?"":S.controlWrapperChild_1}  ${S.controlWrapperChild_2}`,children:h.useMemo(()=>u.jsx(hC,{admin:n,audioEle:e,idle:!1,isOpenFullScreen:r}),[c,r,d])}),u.jsxs("div",{className:`${S.volumeWrapper}  ${r?"hidden":""}`,children:[u.jsxs("div",{className:"flex flex-grow items-center max-w-[150px]",children:[u.jsx("button",{onClick:()=>x(),children:_?u.jsx(Z5,{className:"w-6 h-6"}):u.jsx(X5,{className:"w-6 h-6"})}),u.jsx("div",{onClick:b=>y(b),ref:p,className:`${S.volumeLineBase} ${S.before}`,children:u.jsx("div",{ref:m,className:`${S.volumeLineCurrent} ${a.content_bg}`})})]}),!n&&u.jsxs(u.Fragment,{children:[u.jsxs(Fg,{placement:"top",children:[u.jsx(Vg,{onClick:E,className:`h-[35px] w-[35px] rounded-[99px] ${a.side_bar_bg}  ${a.content_hover_bg} p-[8px] ${l.name?"":"opacity-20 pointer-events-none"}`,children:u.jsx(Yj,{})}),u.jsx(Ug,{children:"Fullscreen mode"})]}),u.jsxs(Fg,{placement:"top",children:[u.jsx(Vg,{onClick:()=>o(!i),className:`${a.content_hover_bg} h-[35px] w-[35px] p-[8px] rounded-[4px] ${l.name?"":"opacity-20 pointer-events-none"} ${i?a.content_bg:a.side_bar_bg}`,children:u.jsx(RT,{})}),u.jsx(Ug,{children:"Queue"})]})]})]})]})]})}function fz({audioEle:t,admin:e,isOpenFullScreen:n,durationLineRef:r,timeProcessLine:s,currentTimeRef:i,remainingTimeRef:o}){const a=je(),{user:l}=tt(),{queueSongs:c}=K(Dr),{playStatus:{isPlaying:d,isRepeat:f,isShuffle:p,isCrossFade:m}}=K(en),{currentSong:g}=K(ge),{currentPlaylist:y}=K($s),[_,x]=h.useState(!1),[v,w]=h.useState(0),[E,S]=h.useState(0),b=h.useRef(!0),T=h.useRef(0),I=h.useRef(0),A=h.useRef(),C=h.useRef(0),j=h.useRef(0),B=h.useRef(0),O=h.useRef(!1),L=h.useRef(!0),F=h.useRef(),V=mn(),X=h.useMemo(()=>V.pathname.includes("edit"),[V]);dC(()=>{var ae;A.current=(ae=r.current)==null?void 0:ae.offsetWidth},[n]);const $=async()=>{if(e||!l||!g.id)return;const Oe=xr().play_history||[];let Ee=[];Oe.length&&(Ee=[...Oe],Ee.find(oa=>oa===g.id))||(Ee.push(g.id),Ee.length>5&&(Ee=Ee.slice(1)),Ct("play_history",Ee),await bn({collection:"users",data:{play_history:Ee},id:l.email,msg:">>> api: set play history"}))},z=()=>{try{if(t==null||t.play(),!l)return;L.current&&(m&&(t.volume=0),L.current=!1,S(Math.floor(Math.random()*10)))}catch{}},P=()=>{t==null||t.pause()},W=ae=>c[ae],Y=()=>{a(bt({isPlaying:!1})),F.current&&clearInterval(F.current)},Z=()=>{b.current=!1,a(bt({isPlaying:!0,isWaiting:!1,isError:!1}))},ke=()=>{const ae=s.current;x(!1),ae&&i.current&&o.current&&(i.current.innerText="00:00",o.current.innerText="00:00",ae.style.width="0%")},le=h.useCallback(ae=>{const Oe=ae.target;if(A.current&&I.current){const Ee=Oe.getBoundingClientRect(),Dt=s.current,aa=(ae.clientX-Ee.left)/A.current,la=Math.ceil(aa*I.current);if(t&&Dt){const ca=t.currentTime;if(C.current&&Math.abs(ca-C.current)<1&&Math.abs(la-C.current)<1){console.log("no seek");return}t.currentTime=la,C.current=la,Dt.style.width=(aa*100).toFixed(1)+"%",d||z()}}},[n,g,d]),Ve=h.useCallback(()=>{let ae=T.current+1,Oe;ae<c.length?Oe=c[ae]:(ae=0,Oe=c[0]),a(an({...Oe,currentIndex:ae,song_in:g.song_in}))},[g,c]),ht=h.useCallback(()=>{let ae=T.current-1,Oe;ae>=0?Oe=c[ae]:(Oe=c[c.length-1],ae=c.length-1),a(an({...Oe,currentIndex:ae,song_in:g.song_in}))},[g,c]),$r=ae=>{const Ee=xr().volume||1;if(ae<=2){const Dt=ae/2*Ee;t.volume=Dt}else if(ae<j.current){t.volume!=Ee&&(t.volume=Ee);return}if(ae>=j.current){const Dt=(I.current-ae)/2*Ee;t.volume=Dt}},Vs=()=>{if(!t){console.log("auto ele is undefined when update time");return}const ae=t==null?void 0:t.currentTime,Oe=s.current;if(I.current&&ae){const Ee=ae/(I.current/100);Oe.style.width=Ee.toFixed(1)+"%"}i.current&&(i.current.innerText=Co(ae)||"00:00"),m&&$r(ae)},Tc=()=>{const Oe=xr().volume||1;if(t.volume=Oe,f==="one")return z();if(p){let Ee=T.current;for(;Ee===T.current;)Ee=Math.floor(Math.random()*c.length);const Dt=W(Ee);return a(an({...Dt,currentIndex:Ee,song_in:g.song_in}))}return T.current===c.length-1&&(f==="all"?O.current=!1:O.current=!0),Ve()},bc=()=>{var Ee;if(!t)return;const ae=o.current,Oe=t.duration;if(x(!0),I.current=Oe,ae.innerText=Co(Oe),A.current=(Ee=r.current)==null?void 0:Ee.offsetWidth,j.current=Oe-3,b.current||Ct("current",g),O.current){O.current=!1,a(bt({isWaiting:!1,isPlaying:!1}));return}if(X||b.current){a(bt({isWaiting:!1,isPlaying:!1}));const Dt=0;b.current&&Dt&&(t.currentTime=Dt,Vs()),b.current=!1;return}z()},ia=()=>{w(Math.random())};return h.useEffect(()=>{if(!t){console.log("Audio element is undefined in use control");return}return t.addEventListener("error",ia),t.addEventListener("pause",Y),t.addEventListener("playing",Z),()=>{t.removeEventListener("error",ia),t.removeEventListener("pause",Y),t.removeEventListener("playing",Z)}},[]),h.useEffect(()=>{v&&g.name&&a(bt({isWaiting:!1,isError:!0}))},[v]),h.useEffect(()=>{if(!t||!g.name){a(bt({isWaiting:!1,isPlaying:!1}));return}return P(),a(bt({isWaiting:!0,isError:!1,isPlaying:!1})),t.src=g.song_url,T.current=g.currentIndex,g.name&&(document.title=`${g.name} - ${g.singer}`),()=>{ke(),clearInterval(F.current),L.current=!0}},[g]),h.useEffect(()=>{if(!g.name)return;let ae=`${g.name} - ${g.singer}`;!d&&y.name&&g.song_in.includes(y.id)&&(ae=`${y.name}`),document.title=ae},[d]),h.useEffect(()=>{if(t)return t==null||t.addEventListener("ended",Tc),()=>t==null?void 0:t.removeEventListener("ended",Tc)},[f,p,g.song_in,c]),h.useEffect(()=>(t.addEventListener("timeupdate",Vs),()=>t.removeEventListener("timeupdate",Vs)),[m]),h.useEffect(()=>{if(t)return X&&d&&P(),t.addEventListener("loadedmetadata",bc),()=>{t.removeEventListener("loadedmetadata",bc)}},[X,g.id,m]),h.useEffect(()=>{v&&$()},[E]),h.useEffect(()=>(B.current=t.volume,d&&(F.current=setInterval(()=>{Ct("duration",t.currentTime.toFixed(1))},3e3)),()=>clearInterval(F.current)),[d]),{handleNext:Ve,handlePrevious:ht,handleSeek:le,play:z,pause:P,isLoaded:_}}function hC({audioEle:t,admin:e,isOpenFullScreen:n,className:r}){const s=je(),{theme:i}=te(),{queueSongs:o}=K(Dr),{playStatus:{isPlaying:a,isRepeat:l,isShuffle:c,isError:d}}=K(en),{currentSong:f}=K(ge),p=h.useRef(null),m=h.useRef(null),g=h.useRef(null),y=h.useRef(null),{handleNext:_,handlePrevious:x,handleSeek:v,play:w,pause:E,isLoaded:S}=fz({audioEle:t,isOpenFullScreen:n,admin:e,durationLineRef:p,timeProcessLine:m,currentTimeRef:g,remainingTimeRef:y}),b=h.useCallback(()=>{a?E():w()},[a]),T=()=>{let C;switch(l){case"no":C="one";break;case"one":C="all";break;case"all":C="no";break;default:C="no"}Ct("isRepeat",C),s(bt({isRepeat:C}))},I=()=>{const C=!c;s(bt({isShuffle:C})),Ct("isShuffle",C)},A={button:`p-[5px] ${o.length<=1&&"opacity-20 pointer-events-none"}`,buttonsContainer:`w-full flex justify-between sm:justify-center items-center gap-x-[20px] ${e?"":"h-[50px]"}`,processContainer:`flex w-full flex-row items-center h-[30px] ${e?"h-full":""}`,processLineBase:"h-[4px] flex-grow relative cursor-pointer rounded-[99px] bg-gray-200 ",processLineCurrent:`absolute left-0 rounded-l-[99px] top-0 h-full ${i.content_bg}`,currentTime:"opacity-60 text-[14px] font-semibold",duration:"text-[14px] font-semibold",icon:"w-[35px] max-[350px]:w-[25px]",before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]"};return u.jsxs("div",{className:`relative h-full w-full ${r||""}`,children:[u.jsx("div",{className:`${A.buttonsContainer}`,children:!e&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{className:`relative ${A.button} ${l!=="no"&&i.content_text}`,onClick:T,children:[u.jsx(fj,{className:A.icon}),u.jsx("span",{className:"absolute font-bold text-[12px] top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ",children:f.name&&(l==="one"?"1":l==="all"?"--":"")})]}),u.jsx("button",{className:A.button,onClick:()=>x(),children:u.jsx(Cj,{className:A.icon})}),u.jsx(R_,{handlePlayPause:b}),u.jsx("button",{className:`${A.button}`,onClick:()=>_(),children:u.jsx(ST,{className:A.icon})}),u.jsx("button",{className:`${A.button} ${c&&i.content_text}`,onClick:I,children:u.jsx(Sj,{className:A.icon})})]})}),u.jsxs("div",{className:`${A.processContainer} ${d?"opacity-[.6] pointer-events-none":""}`,children:[u.jsx("div",{className:"w-[45px]",children:t&&u.jsx("span",{ref:g,className:`${A.currentTime}`,children:"00:00"})}),u.jsx("div",{ref:p,onClick:C=>v(C),className:`${A.processLineBase} ${!S&&"pointer-events-none"}  ${A.before}`,children:u.jsx("div",{ref:m,className:`${A.processLineCurrent}`})}),u.jsx("div",{className:"w-[46px] pl-[5px]",children:t&&u.jsx("span",{ref:y,className:A.duration,children:"00:00"})}),e&&u.jsx("div",{className:"flex items-center",children:u.jsx(R_,{handlePlayPause:b})})]}),!e&&u.jsx(Vz,{isOpenFullScreen:n,cb:E,play:w,isPlaying:a})]})}function H_(t,e){const n=h.useRef(),[r,s]=h.useState(0),[i,o]=h.useState(0);return h.useEffect(()=>{r&&(n.current=setTimeout(()=>n.current=void 0,e))},[i,Fl]),h.useEffect(()=>{n.current||(t(),o(Math.random()*10))},[r]),()=>s(Math.random()*10)}function pz({placement:t="bottom",isOpenFromParent:e,setIsOpenFromParent:n}={}){const[r,s]=h.useState(!1),{context:i,floatingStyles:o,refs:a}=iC({placement:t,open:e||r,onOpenChange:n||s,whileElementsMounted:BA,middleware:[OA(6)]}),l=tz(i),c=sC(i,{escapeKey:!1}),d=aC(i),{isMounted:f,styles:p}=lz(i,{duration:150,initial:{opacity:0,transform:"scale(0.8)"},close:{opacity:0,transform:"scale(0.8)"},open:{opacity:1,transform:"scale(1)"},common:({side:y})=>({transformOrigin:{top:"bottom",bottom:"top",left:"right",right:"left"}[y]})}),{getFloatingProps:m,getReferenceProps:g}=oC([l,c,d]);return{isOpen:e||r,setIsOpen:n||s,getFloatingProps:m,getReferenceProps:g,floatingStyles:o,refs:a,context:i,styles:p,isMounted:f}}const fC=h.createContext(null),pC=()=>{const t=h.useContext(fC);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function Ei({children:t,...e}){const n=pz({...e});return u.jsx(fC.Provider,{value:n,children:t})}function Si({children:t,className:e,asChild:n=!1,...r}){const{getReferenceProps:s,refs:i,isOpen:o}=pC();return n&&h.isValidElement(t)?h.cloneElement(t,s({ref:i.setReference,...r,...t.props,"data-state":o?"open":"closed"})):u.jsx("button",{type:"button",ref:i.setReference,"data-state":o?"open":"closed",className:`${e??""}`,...s(r),children:t})}function Ti({children:t,className:e,...n}){const{context:r,refs:s,getFloatingProps:i,floatingStyles:o,styles:a}=pC(),{isMounted:l,status:c}=lC(r);return u.jsx(u.Fragment,{children:l&&u.jsx(rC,{context:r,modal:!1,children:u.jsx("div",{ref:s.setFloating,className:`z-[20] ${e}`,style:{...o},...i(n),"data-status":c,children:u.jsx("div",{style:{...a},children:t})})})})}function mC(){const{theme:t}=te(),e=je(),{playStatus:{isTimer:n,lyricSize:r,songBackground:s}}=K(en),[i,o]=h.useState(),a=()=>{o("")},l=f=>{e(bt({lyricSize:f})),Ct("lyricSize",f)},c=()=>{if(n)return e(bt({isTimer:0}));o("")},d={disableBtn:"bg-gray-500 bg-opacity-20",lyricSizeBtn:`group/text !hover:brightness-100 h-[30px] w-[30px] sm:h-[26px] sm:w-[26px] relative ${t.content_hover_bg}`,itemContainer:"flex justify-between items-center min-h-[30px]",text:"text-[16px] sm:text-[14px] text-[#ccc]"};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-[240px] sm:w-[220px]",children:u.jsxs(Ri,{variant:"default",color:"black",className:"space-y-[10px]",theme:t,children:[u.jsxs("div",{className:d.itemContainer,children:[u.jsx("p",{className:d.text,children:"Lyric size"}),u.jsxs("div",{className:"flex space-x-[8px]",children:[u.jsx(G,{onClick:()=>l("small"),variant:"circle",className:`${r==="small"?t.content_bg:d.disableBtn} ${d.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[11px]",children:"A"})}),u.jsx(G,{onClick:()=>l("medium"),variant:"circle",className:`${r==="medium"?t.content_bg:d.disableBtn} ${d.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[13px]",children:"A"})}),u.jsx(G,{onClick:()=>l("large"),variant:"circle",className:`${r==="large"?t.content_bg:d.disableBtn} ${d.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[15px]",children:"A"})})]})]}),u.jsxs("div",{className:`${d.itemContainer}`,children:[u.jsx("p",{className:d.text,children:"Song background"}),u.jsx(Lg,{size:"thin",active:s,cb:()=>e(wB())})]}),u.jsxs("div",{className:`${d.itemContainer}`,children:[u.jsx("p",{className:d.text,children:"Sleep timer"}),u.jsx(Lg,{size:"thin",active:!!n,cb:c})]})]})}),i&&u.jsx(yn,{classNames:"z-[999]",closeModal:a,children:u.jsx(Yv,{close:a})})]})}function mz({isOpenFullScreen:t,setIsOpenFullScreen:e,idle:n,audioEle:r}){const{theme:s}=te(),{currentSong:i}=K(ge),[o,a]=h.useState("Lyric"),l=h.useRef(null),c=h.useRef(null),d=h.useRef(null),f=Jt();RA({bgRef:l,currentSong:i}),IB({containerRef:c,songItemRef:d,isOpenFullScreen:t,idle:n});const p=H_(()=>g("next"),200),m=H_(()=>g("previous"),200),g=(v="next")=>{const w=c.current;w.style.scrollBehavior="smooth",v==="next"?w.scrollLeft+=500:v==="previous"&&(w.scrollLeft-=500)},y=()=>{e(!1),setTimeout(()=>{f(`/mysongs/edit/${i.id}`)},300)},_={button:`p-[8px] bg-gray-500 bg-opacity-20 text-xl ${s.content_hover_text}`,mainContainer:`fixed inset-0 z-50 overflow-hidden text-white bg-zinc-900
    } transition-[transform] duration-[.7s] linear delay-100`,bg:"-z-10 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background] duration-100",overplay:"bg-zinc-900 bg-opacity-60 bg-blend-multiply",absoluteFull:"absolute h-[100vh] w-[100vw] inset-0",headerWrapper:"py-[20px] px-[40px] w-full h-[75px]",header:"relative flex",headerCta:"absolute h-full flex items-center",contentContainer:"h-[calc(100%-100px)] song-thumbnail-container relative overflow-hidden",songsListTab:" relative h-full no-scrollbar flex items-center flex-row overflow-auto scroll-smooth px-[calc(50%-350px/2)]",absoluteButton:`absolute top-[50%] -translate-y-[50%] p-[8px] bg-[#fff] bg-opacity-[.2] hover:opacity-100 rounded-full ${s.content_hover_text}`,songNameSinger:"relative text-center text-white text-[14px] opacity-80",lyricTabContainer:"px-[40px] min-[1536px]:container min-[1536px]:mx-auto min-[1536px]:px-[200px] h-full flex items-center justify-center flex-row",fadeTransition:"opacity-0 transition-opacity duration-[.3s]",before:"before:content-[''] before:w-[50px] before:h-[10px] before:absolute before:bottom-[-7px] ",logo:"animate-[spin_8s_linear_infinite] w-[46px] mr-[10px]"},x=u.jsxs("div",{className:_.lyricTabContainer,children:[u.jsx(Oz,{theme:s,active:!0,data:i}),u.jsx(yC,{className:"w-full ml-[40px] h-full",audioEle:r,isOpenFullScreen:t&&o==="Lyric",active:o==="Lyric"})]});return u.jsxs("div",{className:`${_.mainContainer}  ${t?"translate-y-0":"translate-y-full"}`,children:[u.jsx("div",{ref:l,className:`${_.absoluteFull} ${_.bg}`}),u.jsx("div",{className:`${_.absoluteFull} ${_.overplay}`}),u.jsxs("div",{className:"h-[calc(100vh-90px)]",children:[u.jsx("div",{className:_.headerWrapper,children:u.jsxs("div",{className:_.header,children:[n&&u.jsxs("div",{className:`${_.headerCta} left-0`,children:[u.jsx("img",{className:`${_.logo}`,src:qv,alt:""}),o==="Lyric"&&u.jsxs("p",{className:`${_.songNameSinger}`,children:[i.name," -"," ",u.jsx("span",{className:"opacity-30",children:i.singer})]})]}),u.jsx(Gv,{inFullScreen:!0,activeTab:o,setActiveTab:a,className:`${n&&_.fadeTransition}`,tabs:["Songs","Karaoke","Lyric"],render:v=>v}),u.jsxs("div",{className:`${_.headerCta} right-0 gap-[10px] ${n&&_.fadeTransition}`,children:[i.by!="admin"&&o==="Lyric"&&u.jsx(G,{onClick:()=>y(),variant:"circle",className:`p-[4px] ${_.button}`,children:u.jsx(a5,{className:"w-[20px]"})}),u.jsxs(Ei,{placement:"bottom-end",children:[u.jsx(Si,{className:`h-[36px] rounded-full w-[36px] ${_.button}`,children:u.jsx(lh,{className:"w-[20px]"})}),u.jsx(Ti,{className:"z-[99]",children:u.jsx(mC,{})})]}),u.jsx(G,{onClick:()=>e(!1),variant:"circle",className:`p-[4px] ${_.button}`,children:u.jsx(_T,{className:"w-[20px]"})})]})]})}),u.jsxs("div",{className:_.contentContainer,children:[u.jsx("div",{ref:c,className:`song-list-container ${_.songsListTab} ${o!=="Songs"?"opacity-0":"opacity-100"}`}),o==="Songs"&&!n&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>m(),className:`${_.absoluteButton} left-[20px]`,children:u.jsx(Wy,{className:"w-[25px]"})}),u.jsx("button",{onClick:()=>p(),className:`${_.absoluteButton} right-[20px]`,children:u.jsx(yu,{className:"w-[25px]"})})]}),u.jsx("div",{className:`absolute inset-0 z-20 ${o==="Lyric"?"":"hidden"}`,children:x}),u.jsx("div",{className:`absolute inset-0 z-20 ${o==="Karaoke"?"":"hidden"}`,children:u.jsx("h1",{className:"text-center font-semibold opacity-60 relative top-[50%]",children:"Coming soon..."})})]}),t&&o==="Lyric"&&!n&&u.jsxs("p",{className:`${_.songNameSinger} ${n&&_.fadeTransition}`,children:[i.name," -"," ",u.jsx("span",{className:"opacity-30",children:i.singer})]})]})]})}const gz="/HD-MP3/assets/tutorial1-1bb11af6.png",yz="/HD-MP3/assets/tutorial2-2363d450.png";function gC({audioRef:t,theme:e,song:n,admin:r,lyric:s}){const{userSongs:i,setUserSongs:o}=Ge(),[a,l]=h.useState(!1),[c,d]=h.useState(!1),[f,p]=h.useState(s?s.base:""),[m,g]=h.useState([]),[y,_]=h.useState(s?s.real_time:[]),[x,v]=h.useState(!1),[w,E]=h.useState(1),[S,b]=h.useState(!1),[T,I]=h.useState(""),[A,C]=h.useState(y?y.length:0),[j,B]=h.useState(f||""),[O,L]=h.useState(!1),F=h.useRef(!0),V=h.useRef(null),X=h.useRef(0),R=h.useRef(0),$=h.useRef("smooth"),{setSuccessToast:z,setErrorToast:P}=Zt(),W=Jt(),Y=h.useMemo(()=>y.length>=m.length,[m,y,c]),Z=h.useMemo(()=>y.length===m.length-1,[m,y,c]),ke=h.useMemo(()=>c&&!!m.length&&!Y,[Y,m,c]),le=()=>I(""),Ve=h.useMemo(()=>!!m.length,[m]),ht=()=>{const ne=t.current;ne&&(ne.play(),l(!0),d(!0))},$r=()=>{const ne=t.current;ne&&(ne.pause(),l(!1))},Vs=ne=>{const ye=t.current;ye&&(ye.playbackRate=ne,E(ne)),v(!1)},Tc=()=>{p(j),le()},bc=ne=>{const ye=t.current;ye&&(ye.currentTime=ne)},ia=h.useCallback(()=>{if(!m.length)return;const ne=t.current;if(!ne||Y||R.current==+ne.currentTime.toFixed(1))return;Z?X.current=+ne.duration.toFixed(1):X.current=+ne.currentTime.toFixed(1);const ye=m[A],Ic={start:R.current,text:ye,end:X.current};R.current=X.current,_([...y,Ic]),C(A+1)},[m,A]),ae=()=>{if(A<=0)return;if(t.current){R.current=y[A-1].start,X.current=0;const ye=y.slice(0,A-1);_(ye),C(A-1)}},Oe=ne=>{const ye=[...i],Ic=$O(ne,ye);if(Ic==null){P({message:"No song found"}),b(!1);return}return o(ye),console.log("setActuallySongs"),Ic},Ee=async()=>{try{b(!0),$r(),await bn({collection:"lyrics",data:{real_time:y,base:f},id:n.id}),await bn({collection:"songs",data:{lyric_id:n.id},id:n.id}),z({message:"Add lyrics successful"}),L(!1)}catch(ne){console.log({message:ne})}finally{b(!1)}},Dt=async()=>{try{b(!0),await bn({collection:"songs",data:{lyric_id:""},id:n.id}),await $l({collection:"lyrics",id:n.lyric_id}),z({message:"Delete lyric successful"});const ne={...n,lyric_id:""};if(!Oe(ne))return;ca()}catch(ne){console.log(ne)}finally{b(!1)}},oa=()=>{$r(),ia()},aa=ne=>{const ye=t.current;ne==="next"?ye.currentTime+=2:ye.currentTime-=2},la=()=>{O?I("confirm-navigate"):ca()},ca=()=>W(r?"/dashboard":"/mysongs");h.useEffect(()=>{if(f){const ne=f.split(/\r?\n/).filter(ye=>ye);g(ne)}m.length&&F.current&&(F.current=!1),console.log("check firstTimeRender",F.current)},[f]),h.useEffect(()=>{const ne=t.current;if(ne){if(y.length){const ye=y[y.length-1].end;ne&&(ne.currentTime=ye,R.current=ye)}return ne.addEventListener("ended",oa),()=>{ne.removeEventListener("ended",oa)}}},[]),h.useEffect(()=>{if(!O){if(!s){L(!0);return}(s.real_time!==y||s.base!=f)&&L(!0)}},[f,y]),h.useEffect(()=>{if(!O)return;const ne=ye=>{ye.preventDefault()};return window.addEventListener("beforeunload",ne),()=>{window.removeEventListener("beforeunload",ne)}},[O]);const AC=`${e.type==="light"?"text-[#333]":"text-white"}`,Se={section:`bg-${e.alpha} p-[10px] rounded-[12px]`,row:"flex no-scrollbar",col:"flex-grow flex flex-col gap-[10px]",formGroup:"flex flex-col gap-[5px] flex-grow",label:"text-md font-[500]",button:`${e.content_bg} rounded-full text-white text-[14px] px-[10px]`,disable:" opacity-60 pointer-events-none ",icon:"h-[20px] w-[20px]",lyricBox:"list-none h-full px-[10px] max-[549px]:w-[100%] pb-[20%] ",listItem:"h-[34px] w-[34px] text-[14px]",changeSpeedBtn:"inline-flex items-center hover:brightness-90 px-[20px] py-[5px] rounded-full text-white text-[14px]",ctaContainer:"flex justify-between space-x-[10px] mb-[20px]",getActiveClass:ne=>ne?e.content_bg:`bg-${e.alpha}`},CC=h.useMemo(()=>{switch(T){case"":return u.jsx(u.Fragment,{});case"tutorial":return u.jsxs(u.Fragment,{children:[u.jsx(Fs,{title:"Tutorial",close:le}),u.jsxs("div",{className:"h-[500px] max-h-[75vh] overflow-y-auto no-scrollbar",children:[u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Phím chắc năng:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:yz,alt:""}),u.jsx("br",{}),u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Cách thêm lời bài hát:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:gz,alt:""})]})]});case"add-base-lyric":return u.jsxs(u.Fragment,{children:[u.jsx("textarea",{ref:V,value:j,onChange:ne=>B(ne.target.value),className:"w-full rounded-[4px] mb-[10px] min-h-[50vh] bg-transparent border p-[10px]"}),u.jsx(G,{variant:"primary",onClick:Tc,className:Se.button,children:"Ok"})]});case"delete-lyric":return u.jsx(ir,{loading:S,label:"Delete playlist ?",theme:e,callback:Dt,close:le});case"confirm-navigate":return u.jsx(ir,{loading:S,label:"Your change not save",theme:e,buttonLabel:"Close and don't save",callback:ca,close:le})}},[T,j]),kC=u.jsxs("div",{className:`${Se.ctaContainer} ${AC}`,children:[u.jsxs("div",{className:"left flex flex-wrap gap-[10px]",children:[u.jsx("button",{onClick:()=>I("add-base-lyric"),className:Se.button,children:f?"Change lyric":"Add lyric"}),u.jsxs(Ei,{isOpenFromParent:x,setIsOpenFromParent:v,placement:"bottom-start",children:[u.jsxs(Si,{className:`${Se.button} ${Se.changeSpeedBtn}`,children:[w,"x"]}),u.jsx(Ti,{children:u.jsx(Ri,{variant:"thin",theme:e,children:u.jsxs("div",{className:"flex justify-center gap-[8px]",children:[u.jsx(G,{variant:"circle",onClick:()=>Vs(1),className:`${Se.getActiveClass(w===1)} ${Se.listItem}`,children:"1x"}),u.jsx(G,{variant:"circle",onClick:()=>Vs(1.2),className:`${Se.getActiveClass(w===1.2)} ${Se.listItem}`,children:"1.2x"}),u.jsx(G,{variant:"circle",onClick:()=>Vs(1.5),className:`${Se.getActiveClass(w===1.5)} ${Se.listItem}`,children:"1.5x"})]})})})]}),a?u.jsx(G,{variant:"primary",onClick:$r,className:Se.button+(c?"":Se.disable),children:"Pause"}):u.jsx(G,{variant:"primary",onClick:ht,className:Se.button+(a||!Ve?Se.disable:""),children:"Play"}),u.jsx(G,{variant:"primary",onClick:ia,className:Se.button+(!ke&&Se.disable),children:u.jsx(id,{className:"w-[16px]"})}),u.jsx(G,{variant:"primary",onClick:ae,className:Se.button+(!y.length||!m.length?Se.disable:""),children:u.jsx(S5,{className:"w-[16px]"})}),u.jsxs(G,{variant:"primary",onClick:()=>aa("prev"),className:Se.button+(!c||!m.length?Se.disable:""),children:[u.jsx(Fj,{className:"w-[16px] mr-[5px]"}),"2s"]}),u.jsxs(G,{variant:"primary",onClick:()=>aa("next"),className:Se.button+(!c||!m.length?Se.disable:""),children:["2s",u.jsx(Bj,{className:"w-[16px] ml-[5px]"})]})]}),u.jsx("button",{onClick:()=>I("tutorial"),children:u.jsx(H5,{className:"w-[20px]"})})]});return u.jsxs("div",{className:`${S?"opacity-[0.6] pointer-events-none":""}`,children:[u.jsxs("button",{onClick:la,className:`inline-flex text-[20px] font-bold mb-[14px] ${e.content_hover_text}`,children:[u.jsx(Wy,{className:"w-[25px]"}),u.jsx("span",{className:"ml-[12px]",children:n.name})]}),kC,u.jsxs("div",{className:`${Se.row} bg-${e.alpha} rounded-[12px] pt-[10px] mb-[0] h-[55vh] min-h-[200px] overflow-auto`,children:[u.jsx("div",{className:Se.lyricBox+"w-[50%]",children:m.length?u.jsx(u.Fragment,{children:m.map((ne,ye)=>u.jsx(bA,{inUpload:!0,scrollBehavior:$,className:"pb-[30px] leading-[1.2] mr-[24px]",active:ye===A,done:ye!=A,children:ne},ye))}):u.jsx("h1",{children:"Base lyric..."})}),u.jsx("div",{className:Se.lyricBox+" border-none w-[50%]",children:!!(y!=null&&y.length)&&y.map((ne,ye)=>u.jsx(VB,{handleSetTime:bc,lyric:ne,theme:e,index:ye,realTimeLyrics:y,setRealTimeLyrics:_},ye))})]}),u.jsx(G,{className:`${e.content_bg} ${O?"":"opacity-[.6] pointer-events-none"} text-[14px] rounded-full mt-[20px]`,variant:"primary",onClick:Ee,children:"Save"}),u.jsx(G,{className:"bg-red-500 text-[#fff] text-[14px] font-bold ml-[12px] rounded-full mt-[20px]",variant:"primary",onClick:()=>I("delete-lyric"),children:"Delete"}),!!T&&u.jsx(yn,{closeModal:le,classNames:"w-[700px] max-w-[calc(100vw-40px)]",children:CC})]})}const yC=({audioEle:t,className:e,isOpenFullScreen:n,active:r})=>{const{playStatus:{lyricSize:s}}=K(en),[i,o]=h.useState(0),a=h.useRef("instant"),l=h.useRef(null),{currentSong:c}=K(ge),d=h.useRef(0),{loading:f,songLyric:p}=SB({audioEle:t,isOpenFullScreen:n}),m=h.useCallback(()=>{const x=t.currentTime;if(o(x),Math.abs(x-d.current)>5){a.current="instant",d.current=x;return}d.current=x},[]),g={small:"text-[20px] sm:text-[30px]",medium:"text-[25px] sm:text-[35px]",large:"text-[30px] sm:text-[40px]"},y=()=>p.real_time.map((x,v)=>{const E=i>=x.start-.3&&i<x.end-.3;return u.jsx(bA,{done:!E&&i>x.end-.3,active:E,scrollBehavior:a,className:`${g[s||"medium"]} ${E?"active":""} mb-[30px]`,children:x.text},v)});h.useEffect(()=>{if(t)return t.addEventListener("timeupdate",m),()=>{t&&t.removeEventListener("timeupdate",m)}},[]),h.useEffect(()=>{const x=document.querySelector(".active.lyric");x&&x.scrollIntoView({behavior:"instant",block:"center"})},[r]),h.useEffect(()=>{a.current!=="instant"&&(a.current="instant")},[c]);const _={container:"overflow-y-auto overflow-x-hidden no-scrollbar pt-[30px] mask-image",loadingContainer:"flex justify-center items-center h-full w-full",loadingIcon:"opacity-[.6] animate-spin w-[35px] duration-[2s]"};return u.jsxs("div",{ref:l,className:`${e&&e} ${_.container}`,children:[f&&u.jsx("div",{className:_.loadingContainer,children:u.jsx("span",{children:u.jsx(br,{className:_.loadingIcon})})}),!f&&u.jsx(u.Fragment,{children:p.real_time.length?y():u.jsx("div",{className:_.loadingContainer,children:u.jsx("h1",{className:"text-[30px] opacity-60",children:"..."})})})]})},vz=({audioEle:t,setIsOpenFullScreen:e,isOpenFullScreen:n})=>{const r=je(),{currentSong:s}=K(ge),{playStatus:{isPlaying:i,isError:o,isWaiting:a}}=K(en),{userSongs:l}=Ge(),{theme:c}=te(),d=mn(),f=h.useMemo(()=>d.pathname.includes("edit"),[d]),p=()=>{t==null||t.play()},m=()=>{t==null||t.pause()},g=()=>{i?m():p()},y=()=>{let v=s.currentIndex+1,w;v<l.length?w=l[v]:(w=l[0],v=0),r(an({...w,currentIndex:v,song_in:s.song_in}))},_=h.useMemo(()=>a?u.jsx(br,{className:"w-[36px] animate-spin"}):o&&s.name?u.jsx(Hy,{className:"w-[36px] "}):i?u.jsx(ch,{className:"w-[36px] "}):u.jsx(Ky,{className:"w-[36px]"}),[a,o,i]),x={wrapper:`fixed bottom-0 transition-transform w-full h-[70px] border-t border-${c.alpha} z-40  px-[20px]`,container:`absolute inset-0 ${c.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1]`,songImageWrapper:"flex flex-row items-center flex-grow h-full",image:"w-[40px] h-[40px] flex-shrink-0",cta:"mobile-bottom-player flex items-center h-full pl-[15px] gap-[10px]"};return u.jsxs("div",{className:`${x.wrapper} ${f?"translate-y-full":""}`,children:[u.jsx("div",{className:`${x.container} ${n?"opacity-0 transition-opacity delay-[.3s]":""}`}),u.jsxs("div",{className:"flex flex-row  h-full",children:[u.jsx("div",{onClick:()=>e(!0),className:"mobile-current-song flex-grow",children:u.jsxs("div",{className:x.songImageWrapper,children:[u.jsx("div",{className:x.image,children:u.jsx(Or,{src:s.image_url||qv,classNames:"rounded-full"})}),u.jsx("div",{className:"flex-grow  ml-[10px]",children:s.song_url&&u.jsxs(u.Fragment,{children:[u.jsx("h5",{className:"text-[18px] font-[500] line-clamp-1",children:s.name||"name"}),u.jsx("p",{className:"text-[14px] font-[400] opacity-60 line-clamp-1",children:s.singer||"singer"})]})})]})}),u.jsxs("div",{className:`${x.cta} ${!s.name&&"opacity-60 pointer-events-none"}`,children:[u.jsx("button",{className:" p-[4px]",onClick:()=>g(),children:_}),u.jsx("button",{onClick:y,className:" p-[4px]",children:u.jsx(ST,{className:"w-[35px]"})})]})]})]})};function xz({audioEle:t,isOpenFullScreen:e,setIsOpenFullScreen:n}){const r=je(),{theme:s}=te(),{currentSong:i}=K(ge),{playStatus:{isPlaying:o}}=K(en),{queueSongs:a}=K(Dr),[l,c]=h.useState("Playing"),[d,f]=h.useState(!1),[p,m]=h.useState(""),[g,y]=h.useState(!1),_=h.useRef(null),x=h.useRef(null),v=h.useRef(null);RA({bgRef:_,currentSong:i});const w=()=>m(""),E=C=>{let j=0,B=C.parentElement;for(;!B.classList.contains("item-container")&&j<5;)B=B.parentElement,j++;return B},S={opacity:"0"},b=C=>{let j=0,B=C.previousElementSibling;for(;B&&j<100;)Object.assign(B.style,S),j++,B=B.previousElementSibling},T=(C,j,B)=>{const O=C.target,L=E(O);b(L),Object.assign(L.style,S),setTimeout(()=>{r(an({...j,currentIndex:B,song_in:i.song_in}))},250)},I=h.useMemo(()=>u.jsx(u.Fragment,{children:i&&u.jsx(u.Fragment,{children:i.currentIndex===a.length-1?u.jsx("p",{children:"..."}):u.jsx(u.Fragment,{children:a.map((C,j)=>{if(j>i.currentIndex)return u.jsx(ub,{theme:s,data:C,onClick:B=>T(B,C,j),active:!1},j)})})})}),[i,a]);h.useEffect(()=>{const C=()=>{window.innerWidth>549&&window.innerWidth<800?y(!0):y(!1)};return C(),window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[]);const A={headerWrapper:"h-[65px] p-[15px]",header:"relative w-full",main:"h-[calc(100%-65px)] relative px-[15px] overflow-hidden",songImage:"flex-shrink-0 transition-[height, width] origin-top-left",nameAndSinger:"flex flex-grow justify-between items-center",scrollText:"h-[30px] mask-image-horizontal",control:"absolute bottom-0 left-[15px] right-[15px]",lyricContainer:"absolute top-[65px] bottom-[100px] left-[15px] right-[15px]",bgImage:"absolute inset-0 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background-image] duration-[.3s ]",overlay:"absolute inset-0 bg-zinc-900 bg-opacity-60 bg-blend-multiply overflow-hidden",button:"inline-flex justify-center items-center rounded-full absolute top-0 h-full w-[35px]"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`fixed inset-0 z-50 bg-zinc-900 text-white overflow-hidden  ${e?"translate-y-0":"translate-y-full"} transition-[transform] duration-[.5s] ease-in-out delay-150  `,children:[u.jsx("div",{ref:_,className:A.bgImage}),u.jsx("div",{className:A.overlay}),u.jsxs("div",{className:"absolute inset-0 z-10",children:[u.jsx("div",{className:A.headerWrapper,children:u.jsxs("div",{className:A.header,children:[u.jsxs(Ei,{placement:"bottom-start",children:[u.jsx(Si,{className:`${A.button} p-[6px] left-0 bg-gray-500 bg-opacity-20`,children:u.jsx(lh,{className:"w-[20px]"})}),u.jsx(Ti,{children:u.jsx(mC,{})})]}),u.jsx(Gv,{inFullScreen:!0,className:"w-fit",setActiveTab:c,activeTab:l,render:C=>C,tabs:["Songs","Playing","Lyric"]}),u.jsx("button",{className:`${A.button} p-[6px] right-0 bg-gray-500 bg-opacity-20`,onClick:()=>n(!1),children:u.jsx(_T,{className:"w-[20px]"})})]})}),u.jsxs("div",{ref:x,className:A.main,children:[u.jsxs("div",{className:`${l!="Playing"&&!d||g?"flex":""}`,children:[h.useMemo(()=>u.jsx(Lz,{active:l==="Playing"&&!g,data:i}),[i,o,l,g]),u.jsx("div",{className:`${A.nameAndSinger} ${l!="Playing"||g?"ml-[10px]":"mt-[15px] min-[549px]:mt-0"}`,children:u.jsxs("div",{className:"group flex-grow overflow-hidden",children:[u.jsx("div",{className:A.scrollText,children:h.useMemo(()=>u.jsx(zd,{autoScroll:!0,classNames:`${l==="Playing"||g?"text-[24px] leading-[30px]":"text-[20px]"} font-[500]`,label:i.name||"..."}),[i,l])}),u.jsx("div",{className:A.scrollText,children:h.useMemo(()=>u.jsx(zd,{autoScroll:!0,classNames:`${l==="Playing"||g?"text-[22px]":"text-[16px] opacity-60"} font-[400]`,label:i.singer||"..."}),[i,l])})]})})]}),u.jsx("div",{ref:v,className:`${A.lyricContainer} ${l==="Lyric"?"block":"hidden"}`,children:h.useMemo(()=>u.jsx(yC,{active:l==="Lyric",className:"h-full",audioEle:t,isOpenFullScreen:e&&l==="Lyric"}),[e,l,g])}),u.jsx("div",{className:`absolute left-[15px] right-[15px] ${l==="Songs"?"block":"hidden"}`,children:u.jsxs("div",{className:"relative",children:[u.jsx("h3",{className:"text-white text-[16px] my-[10px]",children:"Playing next"}),u.jsx("div",{className:"h-[calc(100vh-170px)] pb-[30px] no-scrollbar overflow-auto",children:I})]})}),u.jsx("div",{className:`${A.control} ${l==="Songs"&&"opacity-0 pointer-events-none h-[0px] mb-[0px]"}`,children:u.jsx("div",{className:"h-[120px]",children:h.useMemo(()=>u.jsx(hC,{className:"flex flex-col-reverse justify-between pb-[24px]",audioEle:t,isOpenFullScreen:!0,idle:!1}),[e])})})]})]})]}),!!p&&u.jsx(yn,{closeModal:w,children:u.jsx(Yv,{close:w})})]})}const yn=({children:t,closeModal:e,classNames:n})=>{const{theme:r}=te();return u.jsx(u.Fragment,{children:Ho.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[99]",children:[u.jsx("div",{onClick:s=>{s.preventDefault(),s.stopPropagation(),e()},className:"absolute bg-black opacity-60 inset-0 z-[90]"}),u.jsx("div",{className:"absolute z-[99] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:u.jsx(Ri,{className:n||"",theme:r,children:t})})]}),document.getElementById("portals"))})};function wz({isOpenSongQueue:t,setIsOpenSongQueue:e}){const n=je(),{theme:r}=te(),{user:s}=tt(),{queueSongs:i}=K(Dr),{playStatus:{isTimer:o}}=K(en),{currentSong:a}=K(ge),[l,c]=h.useState(""),[d,f]=h.useState("Queue"),[p,m]=h.useState([]),[g,y]=h.useState(!1),[_,x]=Vv("play_history",[]),[v,w]=h.useState(!1),E=()=>c(""),S=h.useCallback((O,L)=>{L!==a.currentIndex&&n(an({...O,currentIndex:L}))},[a]),b=(O,L)=>{L!==a.currentIndex&&(n(xc({songs:[O]})),n(an({...O,currentIndex:i.length-1+1})),f("Queue"))},T=()=>{if(o)return n(bt({isTimer:0}));c("timer")},I=h.useCallback(()=>{e(!1),n(mA()),n(Rs()),Ct("duration",0)},[]),A=async()=>{try{if(!s)return;w(!0),await bn({collection:"users",data:{play_history:[]},id:s.email}),m([]),x([])}catch(O){console.log(O)}finally{w(!1),f("Queue")}},C=async()=>{try{const L=xr().play_history||[];if(await s0(500),!L.length){y(!1);return}const F=Ls(ra(Lr,"songs"),Ds("id","in",L)),X=(await Ms(F)).docs.map(R=>{const $=R.data();return{...$,song_in:$.by==="admin"?"admin":"user"}});m(X)}catch(O){console.log(O)}finally{y(!1)}};h.useEffect(()=>{if(s)return d==="Recent"&&C(),()=>{y(!0)}},[d]),h.useEffect(()=>{s&&(s.email||(e(!1),f("Queue")))},[s]),h.useEffect(()=>{setTimeout(()=>{t||f("Queue")},1e3)},[t]);const j=[...Array(4).keys()].map(O=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Be,{className:"h-[40px] w-[40px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Be,{className:"h-[20px] mb-[5px] w-[120px]"}),u.jsx(Be,{className:"h-[12px] mt-[5px] w-[60px]"})]})]},O)),B={textColor:`${r.type==="dark"?"text-white":"text-[#333]"} `,mainContainer:`fixed w-[300px] bottom-[0] right-[0] top-[0] z-20 px-[15px] ${r.container} border-l-[1px] border-${r.alpha} transition-[transform] duration-[.5s] linear delay-100`};return u.jsxs("div",{className:`${B.textColor} ${B.mainContainer} ${t?"translate-x-0---":"translate-x-full"}     `,children:[u.jsxs("div",{className:"flex items-center justify-between my-[10px]",children:[u.jsx(Gv,{className:`text-[13px] ${s!=null&&s.email?"":"opacity-[.6] pointer-events-none"}`,activeTab:d,setActiveTab:s!=null&&s.email?f:()=>{},tabs:["Queue","Recent"],render:O=>O}),u.jsxs(Fg,{placement:"bottom",children:[u.jsx(Vg,{onClick:T,className:`p-[8px] rounded-[50%] ${r.content_hover_bg} ${o?r.content_bg:r.side_bar_bg}`,children:u.jsx(ET,{className:"w-[20px]"})}),u.jsx(Ug,{children:"Add timer"})]})]}),u.jsxs("div",{className:"h-[calc(100vh-146px)] pb-[30px] overflow-y-auto overflow-x-hidden no-scrollbar",children:[d==="Queue"&&u.jsxs(u.Fragment,{children:[u.jsx(Nr,{variant:"queue",songs:i,handleSetSong:S}),u.jsx("div",{className:"text-center",children:!!i.length&&u.jsx(G,{onClick:I,size:"small",className:`${r.content_bg} rounded-full mt-[24px]`,children:"Clear"})})]}),d==="Recent"&&u.jsx(u.Fragment,{children:g?j:u.jsxs(u.Fragment,{children:[u.jsx(Nr,{variant:"queue",songs:p,handleSetSong:b}),!!p.length&&u.jsx("p",{className:"text-center",children:u.jsx(G,{onClick:A,size:"small",className:`${r.content_bg} rounded-full mt-[24px]`,children:v?u.jsx(br,{className:"w-[20px] animate-spin"}):"Clear"})})]})})]}),!!l&&u.jsx(yn,{closeModal:E,children:u.jsx(Yv,{close:E})})]})}function _z(t,e,n){const{currentSong:r}=K(ge),[s,i]=h.useState(!1),[o,a]=h.useState(0),l=h.useRef(),c=h.useRef(),d=()=>{i(!1),a(Math.random())},f=()=>{clearTimeout(c.current),clearTimeout(l.current)},p=async()=>{if(!n)return;const m=document.querySelector(".song-thumb.active"),g=document.querySelector(".song-list-container");if(m&&g){const y=CA(m,g,!0);console.log("check isScroll",y);let _=Fl.focusDelay;y||(_=0),l.current=setTimeout(()=>{i(!0)},_)}};return h.useEffect(()=>{if(n&&!(e||!r.id))return setTimeout(()=>{window.addEventListener("mousemove",d),window.dispatchEvent(new Event("mousemove"))},1e3),()=>{window.removeEventListener("mousemove",d),f()}},[n]),h.useEffect(()=>(c.current=setTimeout(()=>{p()},t),()=>{f()}),[o]),n?s:!1}const vC=({admin:t})=>{const{currentSong:e}=K(ge),[n,r]=h.useState(!1),[s,i]=h.useState(!1),[o,a]=h.useState(!1),l=h.useRef(null),c=h.useMemo(()=>window.innerWidth<800,[]),d=_z(Fl.scrollSongDelay,c,n),f=u.jsxs(u.Fragment,{children:[!t&&u.jsx(mz,{audioEle:l.current,idle:d,isOpenFullScreen:n,setIsOpenFullScreen:r}),u.jsx(wz,{isOpenSongQueue:s,setIsOpenSongQueue:i}),u.jsx(hz,{admin:t,audioEle:l.current,idle:d&&n,isOpenFullScreen:n,isOpenSongQueue:s,setIsOpenSongQueue:i,setIsOpenFullScreen:r})]}),p=u.jsxs(u.Fragment,{children:[u.jsx(xz,{audioEle:l.current,isOpenFullScreen:n,setIsOpenFullScreen:r}),u.jsx(vz,{audioEle:l.current,idle:d&&n,isOpenFullScreen:n,setIsOpenFullScreen:r})]});return h.useEffect(()=>{o||l.current&&a(!0)},[]),u.jsxs("div",{className:"absolute",children:[u.jsx("audio",{ref:l,src:e.song_url,className:"hd-mp3 hidden"}),o?c?p:f:""]})},xC="data:image/gif;base64,R0lGODlhJAAkAIABAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NmRjOGMyNC03YmYxLTQxZTMtYjQ2Zi1mY2ZhMDk4MDE1YWYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTBDRTc0QzlGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTBDRTc0QzhGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YzBhNGU4OWYtNjc4Yy00NmMyLTg4NmUtYzIxNGE0NTIwZDRjIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODRlMDBjYmEtZjhlNy03YzQ4LWE4MTgtNDc3NTI3MGQ1ZTAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQgAAQAsAAAAACQAJAAAAnKMj5nArQ9jc7HWyax+GOx/dCAojltpWmgqYazqvu0kz1StrHgYp6tO6gWAn59wZKSxkjcTM7MUEk/SY1BpmGqeHhs0W8Vywk3tkPw9iztcBLfNW7Pl9PLcXk/f8Xz9vguWB6h254Y2+Id4aLjH2Kc4UQAAIfkECQgAAQAsAAAAACQAJAAAAnSMj6nL7Q+jnAzYS+XFGW7beV/4fADpmGijrkvrJnA2z1Q9hvhG7lznA+lyBpuMGAieDiYlQulkIpvTKk9KFRatv2RW671uxeHskwv+ptHLsRnbhbLPZHW7vK6r6XF21J33Bngnp2fY98UXuNikSOg3B8dYAAAh+QQJCAABACwAAAAAJAAkAAACfIyPqcvtD6OctNqLKdg8N955C7iJI4mQAKam6NUeMTMHda3cr4EnOugCfnY2Yi8Y4hmXKqHSWYQ2mclodSqllmTY7fOqbSK9VnLXHB6Ludk2Vg1nv+Vo9zT+rc/zK3qf/wNmt8aHV0Z4aHj2l+inFqgXiQjJuKgYRnkJUgAAIfkECQgAAQAsAAAAACQAJAAAAnuMj6nL7Q+jnLTaC7K+T2/eeBkYiiQjAlyKsJh5uJYc0BRtTzgMpbsn8fFqQ4cQGCuWjqok0vA7toZR4fRJxDJHzg+Uur16s+Nt86sFM8VcdDncbZPlZvZ5fq/H82rp3m5XxZe29mfoZnWIF9hH1+gDqKiHOPhWSBlJWQAAIfkECQgAAQAsAAAAACQAJAAAAn6Mj6nL7Q8RmDTaQ+u1eW7efVg4ZqLRARIppqsZpW6pQTIbzPZd57jD6+keQQ/NuAu+esDiEkl0HlUxKerXKFKvsCTvuY0qp2Dw8IzTlslTdNf3VrO5Qiu8Hre78d/5HSpHB5imR5g3Jhi2d7OWaGbIN4j4pwjJ6Lco00gJVgAAIfkECQgAAQAsAAAAACQAJAAAAn2EH6nL7XnQmxRGULO7WHsbfRPHiQ95mRsqqQvbBqUGG29K13eYw3tMqXVAwJFOMcsIf7YeizmsLJE45ZHYtPqoPO2TWzxdZVXpOGneYqPBc7mtJnflsekaCkXry3Z61h/VtzcnyGcYN1jnRnj4dQf2V8g46QiIB0ly+bhWAAAh+QQJCAABACwAAAAAJAAkAAACfYyPqcvtD+MDtMobqt6Y7Q90C8iJCamZJ0qpCNu6Bhwen0S/JZTb+wTTpSK92c9RzBwbyRsx6BvyoEYpkCW0RLVVVDbWBSuxW7EzDPrW0OrzmPs2U+Nrevvnzs/11ib+T8ZWVufXB+g1qHZnyAhX6HhIopg4yAfZKEkpiFYAACH5BAkIAAEALAAAAAAkACQAAAJ7jI+py+0Po5y02ouB3tht3jGfFopjuYwqgK5npCLuJ8XHDEK2gZP3ywMGeqwfzZgb9mTCnRLHPAalz1k06SRefVPsEsmthrXgYnf8PZvFa7J6206z4fBs8w4t08t2at+qF6j2h+YnRxiX9ybIhrg3iOdlqDjH6Fa5qFYAACH5BAkIAAEALAAAAAAkACQAAAJ1jI+py+0Po5y02otzArxr1nmfEnIjWZ5bqh4l0Lqs8WK1HNpzcFs9/9o5fkFhg1gUQZBJWISZlECL0l3ThFMCc1lq10mzXhFT8Db6JYubam7Yffa+teVymz5O6+fyuLm+hgd39ReIxRd0d+inmLjH+GX3+FIAACH5BAUIAAEALAAAAAAkACQAAAJwjI+py+0Po5y0PoCzhVlv12EfGI5NCJgMqi5sm7zwIc9BPeOw3vKqb6oBLyUaqshB3o4diZDpSTaN0FTkWUVgo8sslbtlapXh43hqKJfP4Ko1TY574ehue24XffV0KJuf9xa4tifoZih351f4h9hRAAA7",Bg=({data:t,inDetail:e,theme:n,active:r,link:s})=>{const i={button:`rounded-full text-[#201f1f] p-[4px] hover:bg-${n==null?void 0:n.alpha}`,imageContainer:"absolute inset-0 overflow-hidden rounded-[6px]",absoluteContainer:"absolute inset-0 group-hover:block",overlay:"absolute inset-0 bg-[#000] opacity-[.5]",buttonContainer:"justify-center items-center h-full z-10 relative",buttonWrapper:"flex items-center justify-center z-10 h-full w-full relative"},o=u.jsxs("div",{className:i.imageContainer,children:[u.jsx(Or,{classNames:"group-hover:scale-[1.1] transition duration-[.3s]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsxs("div",{className:`${i.absoluteContainer} ${r?"block":"hidden"}`,children:[u.jsx("div",{className:i.overlay}),r&&u.jsx("div",{className:i.buttonWrapper,children:u.jsx("img",{src:xC,alt:"",className:"w-[30px]"})})]})]});return e?u.jsx("div",{className:"group relative pt-[100%] w-full block",children:o}):u.jsxs(u.Fragment,{children:[u.jsx(ds,{to:`${s||"/playlist/"+t.id}`,className:"group relative pt-[100%] w-full block",children:o}),u.jsx("h5",{className:"text-[18px] line-clamp-1 leading-[22px] font-[500] mt-[6px]",children:t.name})]})};function zd({label:t,classNames:e,autoScroll:n}){const r=h.useRef(null),s=h.useRef(null);return RB({textRef:s,textWrapperRef:r,autoScroll:n}),u.jsx("div",{ref:r,className:"overflow-hidden scroll-smooth relative h-full",children:u.jsx("div",{ref:s,className:`${e} absolute left-0 whitespace-nowrap line-clamp-1`,children:t||"..."})})}function wC({setIsOpenModal:t}){const{theme:e}=te(),n=je(),r=l=>{t(l)},[s,i]=Vv("isCrossFade",!1),o=()=>{i(!s),n(bt({isCrossFade:!s}))},a={menuItem:`${e.content_hover_text} hover:bg-${e.alpha} rounded-[4px] w-full px-[10px] text-[14px] h-[40px] inline-flex items-center cursor-pointer`,icon:"w-[25px] mr-[8px]",divide:`h-[1px]  w-[calc(100%-20px)] my-[4px] mx-auto bg-${e.alpha}`,disable:"opacity-[.6] pointer-events-none"};return u.jsx(u.Fragment,{children:u.jsx(Ri,{variant:"thin",color:"sidebar",theme:e,children:u.jsxs("ul",{className:"flex flex-col w-[200px]",children:[u.jsxs("li",{className:`${a.menuItem} justify-between hover:bg-[unset]`,children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(Ky,{className:a.icon}),"Cross fade"]}),u.jsx(Lg,{active:s,cb:o})]}),u.jsxs("li",{className:`${a.menuItem}`,onClick:()=>r("theme"),children:[u.jsx(IT,{className:a.icon}),"Themes"]}),u.jsx("div",{className:a.divide}),u.jsxs("li",{className:`${a.menuItem}`,onClick:()=>r("info"),children:[u.jsx(bT,{className:a.icon}),"Info"]})]})})})}function Ez({className:t}){const[e,n]=h.useState(!1),{theme:r}=te(),s=()=>{const o=document.querySelector(".main-container");if(!o)return;const a=o.scrollTop||0;n(a>100)},i=()=>{const o=document.querySelector(".main-container");o==null||o.scroll({behavior:"smooth",top:0})};return h.useEffect(()=>{const o=document.querySelector(".main-container");if(o)return o.addEventListener("scroll",s),()=>{o.removeEventListener("scroll",s)}},[]),u.jsx(G,{onClick:i,variant:"circle",className:`absolute transition-[opacity,transform] ${t||""} w-[30px] ${r.content_hover_bg} h-[30px] bg-${r.alpha} 
      ${e?"opacity-[1]":"opacity-0 translate-y-[20px]"}`,children:u.jsx(wj,{className:"w-[20px]"})})}function Sz(){const t=je(),{theme:e}=te(),{user:n,loading:r}=tt(),{resetSongPlaylistStore:s}=Ge(),i=mn(),o=Jt(),a=()=>{t(Rs()),t(Fv()),s()},l=()=>{a(),o("/dashboard")},c=[...Array(2).keys()].map(f=>u.jsxs("div",{className:"pl-[14px] h-[44px] flex items-center",children:[u.jsx(Be,{className:"w-[25px] h-[25px] flex-shrink-0"}),u.jsx(Be,{className:"w-[80px] h-[19px] ml-[5px]"})]},f)),d={container:`w-[180px] relative  flex-shrink-0 border-r-[1px] h-screen ${e.side_bar_bg} border-${e.alpha}`,button:`w-full text-[14px] font-[500] ${e.content_hover_text}`,text:e.type==="light"?"text-[#333]":"text-white",icon:"w-[25px] mr-[5px]",menuItem:"w-full border-l-[4px] pl-[10px] h-[44px] inline-flex items-center",activeMenu:`${e.content_text} ${e.container} ${e.content_border}`};return u.jsxs("div",{className:`${d.container} ${d.text}`,children:[u.jsx("div",{className:"px-[10px] h-[60px] flex items-center",children:u.jsxs(ds,{to:"/",className:"text-[24px] font-semibold",children:["HD",u.jsx("span",{className:`${e.content_text} ml-[4px]`,children:"MP3"})]})}),u.jsxs("div",{className:"flex flex-col items-start",children:[r&&c,!r&&u.jsxs(u.Fragment,{children:[u.jsx(ds,{className:`${d.menuItem} ${i.pathname==="/"?d.activeMenu:"border-transparent"}`,to:gt.Home,children:u.jsxs(G,{className:d.button,children:[u.jsx(g5,{className:d.icon}),"Discover"]})}),n&&u.jsxs(u.Fragment,{children:[u.jsx(ds,{className:`${d.menuItem}  ${i.pathname.includes("mysongs")?d.activeMenu:"border-transparent"}`,to:gt.MySongs,children:u.jsxs(G,{className:d.button,children:[u.jsx(Ro,{className:d.icon}),"My Song"]})}),n.role==="ADMIN"&&u.jsxs(G,{onClick:l,className:`${d.menuItem} ${d.button} border-transparent`,children:[u.jsx(s5,{className:d.icon}),"Dashboard"]})]})]})]}),u.jsx(Ez,{className:"left-[50%] translate-x-[-50%] bottom-[80px] md:bottom-[100px]"})]})}function Tz({contentRef:t}){const{theme:e}=te(),[n,r]=h.useState(0),[s,i]=vc(Ts),[o,a]=h.useState(""),{logOut:l,logIn:c}=_c(),d=()=>a(""),f=async()=>{try{await l()}catch(x){console.log("signOut error",{messsage:x})}finally{d()}},p=async()=>{try{const x=document.querySelector(".login-trigger");await c(),x&&x.click()}catch(x){console.log(x)}},m=()=>{var v;const x=((v=t.current)==null?void 0:v.scrollTop)||0;r(x)},g=u.jsx(Be,{className:"w-[35px] h-[35px] rounded-full"}),y=h.useMemo(()=>{switch(o){case"":return u.jsx(u.Fragment,{});case"theme":return u.jsx(SC,{close:d});case"info":return u.jsx(Xv,{close:d});case"confirm":return u.jsx(ir,{close:d,callback:f,loading:!1,label:"Sign out ?",desc:"",theme:e})}},[o]);h.useEffect(()=>{var x;return(x=t.current)==null||x.addEventListener("scroll",m),()=>{document.removeEventListener("scroll",m)}},[]);const _={userName:"text-[16px] font-[500] ml-[8px] line-clamp-1",button:`h-[35px] w-[35px] inline-flex items-center justify-center rounded-full bg-${e.alpha} ${e.content_hover_text}`,menuItem:`hover:bg-${e.alpha} ${e.content_hover_text} rounded-[4px] w-full px-[10px] h-[44px] inline-flex items-center`,icon:"w-[25px] mr-[5px]",divide:`h-[1px]  w-[calc(100%-20px)] mb-[10px] mt-[20px] mx-auto bg-${e.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`${e.container} ${n?"shadow-lg":""} h-[60px] fixed right-0 ${n?"bg-transparent":""} left-[180px] z-[20]`,children:[u.jsx("div",{className:`${n?"":"hidden "} absolute  inset-0 ${e.container} bg-opacity-[0.9] backdrop-blur-[15px] z-[-1] `}),u.jsxs("div",{className:"px-[40px] flex items-center justify-between h-full",children:[u.jsx("div",{className:""}),u.jsxs("div",{className:"flex gap-[16px]",children:[u.jsxs(Ei,{placement:"bottom-end",children:[u.jsx(Si,{className:`flex items-center hover:brightness-75 ${_.button}`,children:u.jsx(lh,{className:"w-[20px]"})}),u.jsx(Ti,{children:u.jsx(wC,{setIsOpenModal:a,loggedIn:!1})})]}),u.jsxs(Ei,{placement:"bottom-end",children:[u.jsx(Si,{className:`flex login-trigger items-center hover:brightness-75 ${_.button}`,children:i?g:u.jsx(zg,{})}),u.jsx(Ti,{children:u.jsx(Ri,{color:"sidebar",variant:"thin",theme:e,children:u.jsxs("div",{className:"w-[250px] max-h-[50vh]",children:[s&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center p-[10px] pb-0",children:[u.jsx(zg,{className:"login-trigger w-[46px] h-[46px]"}),u.jsx("div",{className:"ml-[12px]",children:u.jsx("h5",{className:"font-semibold line-clamp-1",children:s==null?void 0:s.displayName})})]}),u.jsx("div",{className:_.divide}),u.jsxs("button",{className:`${_.menuItem}`,onClick:()=>a("confirm"),children:[u.jsx(xT,{className:_.icon}),"Log out"]})]}),!s&&u.jsxs("button",{className:`${_.menuItem}`,onClick:p,children:[u.jsx(uj,{className:_.icon}),"Log in"]})]})})})]})]})]})]}),o&&u.jsx(yn,{closeModal:d,children:y})]})}function bz({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"}))}const Iz=h.forwardRef(bz),Rz=Iz;function Az({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z",clipRule:"evenodd"}))}const Cz=h.forwardRef(Az),kz=Cz;function Pz({song:t,...e}){const n=je(),{theme:r}=te(),{user:s}=tt(),{setSuccessToast:i}=Zt(),{userPlaylists:o}=Ge(),a=h.useMemo(()=>window.innerWidth<800,[]),l=()=>{n(xc({songs:[t]})),i({message:"Song added to queue"})},c={before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]",level2Menu:"w-[100%] absolute right-[calc(100%+5px)] hidden group-hover/add-playlist:block hover:block",menuItem:`hover:bg-${r.alpha} ${r.content_hover_text} max-[549px]:!bg-transparent pl-[8px] rounded-[4px]`,menuIcon:"w-[18px] mr-[8px]",overlay:"absolute flex items-center justify-center inset-0 bg-[#000] bg-opacity-[.5]"},d=h.useMemo(()=>{switch(e.variant){case"home":case"my-songs":case"dashboard-songs":return a?u.jsxs(G,{className:`group relative ${c.menuItem}  ${r.content_hover_text} ${c.before}`,variant:"list",onClick:()=>e.handleOpenModal("add-to-playlist"),children:[u.jsx(sd,{className:c.menuIcon}),"Add to playlist"]}):u.jsxs(G,{className:`group/add-playlist hover:!brightness-100 relative ${c.menuItem}  ${r.content_hover_text} ${c.before}`,variant:"list",children:[u.jsx(sd,{className:c.menuIcon}),"Add to playlist",u.jsx(Ri,{variant:"thin",className:`${c.level2Menu} z-[99] 
                  
                     `,color:"sidebar",theme:r,children:u.jsx("ul",{className:"w-full",children:!!(o!=null&&o.length)&&u.jsx(u.Fragment,{children:o.map((p,m)=>{const g=p.song_ids.includes(t.id);return u.jsxs("li",{onClick:()=>!g&&e.handleAddSongToPlaylist(p),className:`list-none w-full flex rounded-[4px] p-[5px] ${g&&"opacity-60 pointer-events-none"} ${c.menuItem}`,children:[u.jsx("span",{children:u.jsx(Ro,{className:c.menuIcon})}),u.jsxs("p",{className:"line-clamp-1 text-left",children:[p.name," ",g&&"(Added)"]})]},m)})})})})]})}},[o]),f=h.useMemo(()=>{switch(e.variant){case"home":return u.jsxs(u.Fragment,{children:[u.jsxs(G,{onClick:l,className:` ${c.menuItem}`,variant:"list",children:[u.jsx(id,{className:c.menuIcon}),"Add to queue"]}),d]});case"playlist":case"dashboard-playlist":return u.jsx(u.Fragment,{children:u.jsxs(G,{className:c.menuItem,variant:"list",onClick:e.handleRemoveSongFromPlaylist,children:[u.jsx(v1,{className:c.menuIcon}),"Remove"]})});case"my-songs":case"dashboard-songs":return u.jsxs(u.Fragment,{children:[e.variant!=="dashboard-songs"&&u.jsxs(G,{onClick:l,className:` ${c.menuItem}`,variant:"list",children:[u.jsx(id,{className:c.menuIcon}),"Add to queue"]}),d,u.jsxs(G,{onClick:()=>e.handleOpenModal("edit"),className:` ${c.menuItem} `,variant:"list",children:[u.jsx(O5,{className:c.menuIcon}),"Edit"]}),u.jsx(ds,{to:`edit/${t.id}`,children:u.jsxs(G,{className:` ${c.menuItem} `,variant:"list",children:[u.jsx(qy,{className:c.menuIcon}),t.lyric_id?"Edit lyric":"Add lyric"]})}),u.jsxs(G,{onClick:()=>e.handleOpenModal("delete"),className:` ${c.menuItem} `,variant:"list",children:[u.jsx(AT,{className:c.menuIcon}),"Delete"]})]});case"queue":return u.jsxs(u.Fragment,{children:[u.jsxs(G,{onClick:e.handleRemoveSongFromQueue,className:` ${c.menuItem}`,variant:"list",children:[u.jsx(v1,{className:c.menuIcon}),"Remove"]}),d]})}},[e]);return s?u.jsx(u.Fragment,{children:u.jsxs("div",{className:` ${e.variant==="queue"?"w-[160px]":"w-[200px]"} `,children:[u.jsx("h5",{className:"text-[14px] line-clamp-1",children:t.name}),u.jsx("p",{className:"text-[12px] text-gray-500 line-clamp-1",children:t.singer}),u.jsxs("div",{className:"mt-[14px]",children:[f,u.jsxs("a",{target:"_blank",download:!0,href:t.song_url,className:` ${c.menuItem} w-full py-[5px] text-[14px] inline-flex items-center cursor-pointer`,children:[u.jsx(aj,{className:"w-[18px] mr-[5px]"}),"Download"]})]}),e.variant!=="queue"&&!a&&u.jsxs("p",{className:"opacity-60 text-center text-[12px] mt-[10px]",children:["uploaded by ",t.by]})]})}):u.jsx(u.Fragment,{})}const su=h.memo(Pz),Nz=(t,e,n,r)=>h.useMemo(()=>({isChecked:t,setIsChecked:n,selectedSongs:e,setSelectedSongs:r}),[t,e]),_C=h.createContext(void 0),Kv=()=>{const t=h.useContext(_C);if(t===void 0)return{isChecked:!1,setIsChecked:()=>{},selectedSongs:[],setSelectedSongs:()=>{},reset:()=>{}};const{setSelectedSongs:e,setIsChecked:n,...r}=t;return{...r,setSelectedSongs:e,setIsChecked:n,reset:()=>{e([]),n(!1)}}},Qv=({children:t,isChecked:e,selectedSongs:n,setIsChecked:r,setSelectedSongs:s})=>{const i=Nz(e,n,r,s);return u.jsx(_C.Provider,{value:i,children:t})};function Vp({song:t,onClick:e,active:n=!0,index:r,className:s,...i}){const o=je(),{theme:a}=te(),{user:l}=tt(),{isChecked:c,selectedSongs:d,setIsChecked:f,setSelectedSongs:p}=Kv(),{userPlaylists:m}=Ge(),[g,y]=h.useState(!1),[_,x]=h.useState(!1),[v,w]=h.useState(""),{setErrorToast:E}=Zt(),S=()=>w(""),{handleDeleteSong:b,handleAddSongToPlaylistMobile:T,handleAddSongToPlaylist:I,handleRemoveSongFromPlaylist:A,loading:C}=AB({song:t,closeModal:S,setIsOpenPopup:x}),j=ht=>{w(ht)},B=h.useMemo(()=>window.innerWidth<800,[]),O=h.useMemo(()=>d?d.indexOf(t)!=-1:!1,[d]),L=h.useMemo(()=>l?l.like_song_ids.includes(t.id):!1,[l==null?void 0:l.like_song_ids,t]),F=()=>{r!==void 0&&o(G8({index:r}))},V=async()=>{if(l)try{}catch(ht){console.log(ht),E({message:"Error when liked song"})}finally{y(!1)}},X=ht=>{if(!p||!d||!f){E({message:"Selected lack of props"});return}c!==void 0&&eb(ht,c,f,d,p)},R={button:`${a.content_hover_bg} p-[8px] rounded-full`,songListButton:"mr-[10px] text-[inherit]",itemContainer:`group/container flex flex-row rounded justify-between px-[10px] py-[10px] w-full border-b 
    border-${a.alpha} last:border-none p-[0px]`,imageFrame:` relative rounded-[4px] overflow-hidden flex-shrink-0 ${i.variant==="queue"?"w-[40px] h-[40px]":"h-[54px] w-[54px]"}`,overlay:"absolute flex items-center justify-center inset-0 bg-[#000] bg-opacity-[.5]",ctaWrapper:"flex items-center justify-end min-w-[86px] flex-shrink-0",menuBtnWrapper:"w-[50px] flex justify-center "},$=()=>{switch(i.variant){case"queue":return u.jsx(u.Fragment,{});case"uploading":return u.jsx("button",{className:`${R.songListButton}`,children:u.jsx(Ro,{className:"w-[18px]"})});default:return B?u.jsx("button",{onClick:()=>X(t),className:`${R.songListButton} text-[inherit]`,children:O?u.jsx(ao,{className:"w-[18px]"}):u.jsx(gl,{className:"w-[18px]"})}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>X(t),className:`${R.songListButton} ${!O&&"hidden"} ${f&&p?"group-hover/main:block":""}`,children:O?u.jsx(ao,{className:"w-[18px]"}):u.jsx(gl,{className:"w-[18px]"})}),u.jsx("button",{className:`${R.songListButton} ${f&&p?"group-hover/main:hidden group-hover/main:mr-[0px]":""} ${O&&"hidden"}`,children:u.jsx(Ro,{className:"w-[18px]"})})]})}},z=h.useMemo(()=>{switch(i.variant){case"uploading":return u.jsx(u.Fragment,{});default:return u.jsx("div",{className:`${R.overlay} 
               ${n?"":"hidden group-hover/main:flex"}`,children:n?u.jsx("img",{src:xC,alt:"",className:"h-[18px] w-[18px]"}):u.jsx("div",{onClick:e,className:"cursor-pointer w-full h-full flex items-center justify-center",children:u.jsx(kz,{className:"w-[24px]"})})})}},[n,e]),P=u.jsxs("div",{className:"flex flex-row flex-grow props",children:[$(),u.jsxs("div",{className:"flex flex-grow ",onClick:B&&i.variant!=="uploading"?e:()=>{},children:[u.jsxs("div",{className:`${R.imageFrame}`,children:[u.jsx(Or,{src:t.image_url,blurHashEncode:t.blurhash_encode}),z]}),u.jsxs("div",{className:`ml-[10px] ${i.variant==="queue"?"max-w-[96px]":""}`,children:[u.jsx("h5",{className:`font-[500] line-clamp-1 overflow-hidden ${i.variant==="queue"?"text-[13px]":""}`,children:t.name}),u.jsx("p",{className:"text-[13px] opacity-[.6] line-clamp-1",children:t.singer})]})]})]}),W=()=>{switch(i.variant){case"uploading":return u.jsx("div",{className:"opacity-[.6]",children:P});default:return P}},Y=h.useMemo(()=>{if(g)return u.jsx(br,{className:"w-[20px] animate-spin"});switch(i.variant){case"dashboard-songs":case"dashboard-playlist":return u.jsx(u.Fragment,{});default:return u.jsxs("button",{onClick:V,className:`${R.button} max-[549px]:!bg-transparent group`,children:[u.jsx(Rz,{className:`w-[20px]  ${L?`${a.content_text} block group-hover:hidden`:"text-white hidden group-hover:block"}`}),u.jsx(TT,{className:`w-[20px] ${L?"hidden group-hover:block":"block group-hover:hidden"}`})]})}},[V,L]),Z=h.useMemo(()=>{switch(i.variant){case"home":case"dashboard-songs":return u.jsx(su,{variant:i.variant,handleAddSongToPlaylist:I,handleOpenModal:j,song:t});case"my-songs":case"favorite":return u.jsx(su,{variant:"my-songs",handleAddSongToPlaylist:I,handleOpenModal:j,song:t});case"my-playlist":case"admin-playlist":case"dashboard-playlist":return u.jsx(su,{variant:"playlist",handleRemoveSongFromPlaylist:A,handleOpenModal:j,song:t});case"queue":return u.jsx(su,{handleRemoveSongFromQueue:F,variant:"queue",handleOpenModal:j,song:t});default:return u.jsx(u.Fragment,{})}},[i.variant,t]),ke=h.useMemo(()=>{switch(v){case"":return u.jsx(u.Fragment,{});case"edit":return u.jsx($B,{close:S,song:t});case"delete":return u.jsx(ir,{loading:C,label:`Delete '${t.name}' ?`,desc:"This action cannot be undone",theme:a,callback:b,close:S});case"add-to-playlist":return u.jsx(Uz,{loading:C,handleAddSongToPlaylist:T,close,song:t,userPlaylists:m})}},[v,C]),le=()=>{switch(i.variant){case"uploading":return u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{children:u.jsx(br,{className:"w-[20px] mr-[10px] animate-spin"})}),u.jsx("p",{className:"text-[14px]",children:"In process..."})]});default:return u.jsxs("div",{className:R.ctaWrapper,children:[Y,u.jsxs("div",{className:R.menuBtnWrapper,children:[u.jsxs(Ei,{isOpenFromParent:_,setIsOpenFromParent:x,placement:i.variant==="queue"?"bottom-end":"left",children:[u.jsx(Si,{asChild:!0,children:u.jsx("button",{className:`block group-hover/main:block ${R.button} ${_||i.variant==="queue"?"md:block":"md:hidden max-[549px]:!bg-transparent"}`,children:u.jsx(Nj,{className:"w-[20px]"})})}),u.jsx(Ti,{children:u.jsxs(Ri,{className:`${C?"overflow-hidden relative":""}`,variant:"thin",color:"sidebar",theme:a,children:[Z,C&&u.jsx("div",{className:R.overlay,children:u.jsx("div",{className:"h-[25px] w-[25px] border-[2px] border-r-black rounded-[50%] animate-spin"})})]})})]}),u.jsx("span",{className:`text-[12px] hidden  group-hover/main:hidden ${_||i.variant==="queue"?"hidden":"md:block"}`,children:Co(t.duration)})]})]})}},Ve=()=>{switch(i.variant){case"uploading":return u.jsxs("div",{className:`${R.itemContainer} ${s||""} `,children:[W(),le()]});case"queue":return u.jsxs("div",{className:`${R.itemContainer} group/main py-[6px] ${n?`${a.content_bg} text-white`:`hover:bg-${a.alpha}`}`,children:[W(),le()]});default:return u.jsxs("div",{className:`${R.itemContainer} ${s||""} 
               group/main ${n||O?`bg-${a.alpha}`:`hover:bg-${a.alpha}`}
               `,children:[W(),le()]})}};return u.jsxs(u.Fragment,{children:[Ve(),v&&u.jsx(yn,{closeModal:S,children:ke})]})}const jz=({data:t,active:e,onClick:n,hasTitle:r,classNames:s,theme:i,idleClass:o},a)=>{const l={container:"flex flex-col",imageFrame:"group relative transition-[width] duration-[.3s] origin-center rounded-[6px] overflow-hidden",image:"select-none object-cover object-center rounded w-full",overlay:`absolute  ${e?"":"inset-0 hidden bg-opacity-60 bg-[#333] items-center justify-center"}   group-hover:flex`,playingGifFrame:"absolute h-[30px] w-[30px] bottom-[15px] left-[15px] -z-1",title:"text-[22px] text-white mt-[10px] font-bold text-ellipsis line-clamp-1"};if(t)return u.jsxs("div",{ref:a,className:`${l.container} ${o||""}`,children:[u.jsx("div",{className:`song-thumb ${s??""} flex items-end justify-center flex-shrink-0 w-[350px] h-[350px] min-[1536px]:w-[450px] min-[1536px]:h-[450px] `,children:u.jsxs("div",{className:`${l.imageFrame} ${e?"w-[320px] min-[1536px]:w-[400px]":"w-[280px] min-[1536px]:w-[330px]"}`,children:[u.jsx(Or,{classNames:"rounded-[6px]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsx("div",{className:`${l.overlay}`,children:!e&&u.jsx(G,{onClick:n,variant:"circle",className:`h-[50px] w-[50px] text-white ${i.content_hover_text}`,children:u.jsx(ch,{className:"w-full"})})})]})}),r&&u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:l.title,children:(t==null?void 0:t.name)||"Some song"}),u.jsx("p",{className:"text-md opacity-50 line-clamp-1",children:(t==null?void 0:t.singer)||"..."})]})]})},Oz=h.forwardRef(jz);function Lz({data:t,active:e}){const n={container:"flex flex-col",imageFrame:"rounded-[4px] overflow-hidden",image:"select-none object-cover object-center w-full"};if(t)return u.jsx("div",{className:`${n.container} ${e?"w-full px-[20px]":"w-[60px] h-[60px] flex-shrink-0"}`,children:u.jsx("div",{className:`${n.imageFrame}`,children:u.jsx(Or,{src:t.image_url,classNames:"w-full"})})})}function Nr({songs:t,...e}){const{theme:n}=te(),{currentSong:r}=K(ge),{queueSongs:s}=K(Dr),i=h.useMemo(()=>e.variant!=="uploading"?u.jsx(u.Fragment,{}):t.map((l,c)=>{const d={key:c,onClick:()=>{},song:l};return c==0?u.jsx(Vp,{variant:"uploading",className:"temp-song",...d}):u.jsx(Vp,{variant:"uploading",...d})}),[e]),o=u.jsx("p",{className:"text-center my-[60px]",children:"... ¯\\_(ツ)_/¯"}),a=h.useMemo(()=>{if(e.variant==="uploading")return u.jsx(u.Fragment,{});switch(e.variant){case"my-songs":if(!t.length&&!e.tempSongs.length)return o;break;default:if(!t.length)return o}const{handleSetSong:l,activeExtend:c=!0}=e;return t.map((d,f)=>{let p=c&&r.id===d.id;e.variant==="queue"&&(p=p&&r.currentIndex===f);const m=r.currentIndex===s.length-1;return u.jsxs("div",{children:[u.jsx(Vp,{active:p,onClick:()=>l(d,f),variant:e.variant,song:d,index:f}),e.variant==="queue"&&p&&!m&&u.jsx("div",{className:"mt-[12px] mb-[4px]",children:u.jsx("p",{className:`${n.content_text} text-[14px] font-[600]`,children:"Playing next"})})]},d.id+d.name.length+f)})},[r,e,s,n]);return u.jsxs(u.Fragment,{children:[a,i]})}function Gv({tabs:t,activeTab:e,setActiveTab:n,className:r,render:s,inFullScreen:i}){const{theme:o}=te();return u.jsx("ul",{className:`flex py-[4px] h-full px-[4px] items-center ${i?"mx-auto":""} rounded-full ${i?"bg-gray-500 bg-opacity-[.2]":o.side_bar_bg} ${r&&r}`,children:t.map((a,l)=>u.jsx("li",{onClick:()=>n(a),className:`${i?"px-[30px]":"px-[20px]"}  cursor-pointer h-full rounded-full max-[549px]:px-[15px] ${i?"":o.content_hover_text} ${e===a?i?"bg-gray-400 bg-opacity-[.2]":`${o.content_text} ${o.container}`:"opacity-60"}`,children:u.jsx("span",{className:"leading-[27px] font-semibold max-[549px]:font-normal",children:s(a)})},l))})}function EC({to:t}){const{theme:e}=te(),n=Jt(),r=mn(),s=o=>{typeof t=="string"&&IN(t),o==="back"&&n(-1)},i={button:`h-[36px] w-[36px] p-[6px] rounded-full ${e.content_hover_bg} bg-${e.alpha}`};return u.jsx("div",{className:"flex gap-[10px] mb-[30px]",children:u.jsx("button",{onClick:()=>s("back"),className:`${i.button} ${r.pathname==="/"?"opacity-60 pointer-events-none":""}`,children:u.jsx(Wy,{className:""})})})}const Dz=({time:t=6e3,autoClose:e})=>{const{setToasts:n,toasts:r}=Zt(),{theme:s}=te(),[i,o]=h.useState(""),a=c=>{n(d=>d.filter(f=>f.id!=c))};h.useEffect(()=>{i&&n(c=>c.filter(d=>d.id!=i))},[i]),h.useEffect(()=>{if(!e||!r.length)return;const c=r[r.length-1].id;setTimeout(()=>{o(c)},t)},[r]);const l={container:"toast-portal fixed z-[199] bottom-[100px] left-[20px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:Ho.createPortal(u.jsx("div",{className:l.container,children:u.jsx("div",{className:"flex flex-col gap-[10px]",children:!!r.length&&r.map((c,d)=>u.jsx(FB,{onClick:a,theme:s,toast:c},d))})}),document.getElementById("portals"))})};function Mz({user:t},e){return e?u.jsx("p",{className:"text-xl mb-4 ml-2",ref:e,children:t.display_name}):u.jsx("p",{className:"text-xl mb-4 ml-2",children:t.display_name})}h.forwardRef(Mz);function $z(){const{theme:t}=te(),[e]=vc(Ts),[n,r]=h.useState(""),{logOut:s}=_c(),i=()=>r(""),o=async()=>{try{await s()}catch(c){console.log("signOut error",{messsage:c})}finally{i()}},a=h.useMemo(()=>{switch(n){case"":return u.jsx(u.Fragment,{});case"logout":return u.jsx(ir,{callback:o,close:i,loading:!1,theme:t,label:"Log out ?"});case"info":return u.jsx(Xv,{close:i});case"theme":return}},[n]),l={header:`${t.side_bar_bg} fixed top-0 z-10 left-0 right-0`,container:"container mx-auto px-[40px] flex justify-between items-center h-[50px]",avatarFrame:"w-[34px] h-[34px] rounded-full",settingBtn:` flex ml-[12px] justify-center items-center hover:brightness-75 bg-${t.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`${l.header}`,children:u.jsxs("div",{className:l.container,children:[u.jsxs(ds,{to:"/dashboard",className:"text-[24px] font-semibold",children:["HD",u.jsx("span",{className:`${t.content_text} ml-[4px] uppercase`,children:"Dashboard"})]}),u.jsxs("div",{className:"flex items-center",children:[(e==null?void 0:e.displayName)&&u.jsx("p",{className:"text-[14px] mr-[8px]",children:e.displayName}),u.jsx("div",{className:`${l.avatarFrame} overflow-hidden `,children:(e==null?void 0:e.photoURL)&&u.jsx("img",{src:e.photoURL,className:"w-full",alt:""})}),u.jsxs(Ei,{placement:"bottom-end",children:[u.jsx(Si,{className:`${l.avatarFrame} ${l.settingBtn}`,children:u.jsx(lh,{className:"w-[24px]"})}),u.jsx(Ti,{children:u.jsx(wC,{loggedIn:!1,setIsOpenModal:()=>{}})})]})]})]})}),!!n&&u.jsx(yn,{closeModal:i,children:a})]})}const Fz="/HD-MP3/assets/user-default-971f59df.png";function zg({className:t}){const[e]=vc(Ts),n={imageFrame:`${t||"w-[35px] h-[35px]"} flex-shrink-0 rounded-full overflow-hidden ${e!=null&&e.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`};return u.jsx("div",{className:n.imageFrame,children:u.jsx(Or,{src:(e==null?void 0:e.photoURL)||Fz,classNames:"w-full"})})}function Vz({cb:t,isPlaying:e,play:n,isOpenFullScreen:r}){const s=je(),{theme:i}=te(),{playStatus:{isTimer:o}}=K(en),[a,l]=h.useState(()=>xr().isTimer||0),[c,d]=h.useState(0),[f,p]=h.useState(!1),m=h.useRef(),g=h.useRef(0),y=h.useRef(0),_=h.useRef(!1),x=()=>{y.current=0,p(!1),n()},v=()=>p(!1),w=()=>{v(),y.current=0},E=()=>{s(bt({isTimer:0})),l(0),Ct("isTimer",0)};return h.useEffect(()=>{if(c){if(a===1){console.log("pause"),t(),l(0),s(bt({isTimer:0})),Ct("isTimer",0),p(!0);return}l(a-1)}},[c]),h.useEffect(()=>{if(o){if(console.log("check sec",a,y.current),!e&&a===y.current)_.current=!0,n();else if(!e)return;return a||(l(o),y.current=o),m.current=setInterval(()=>{d(Math.random())},1e3),()=>{clearInterval(m.current),d(0)}}},[o,e]),h.useEffect(()=>()=>{_.current=!1,a&&(y.current=0)},[o]),h.useEffect(()=>{a&&(g.current+=1,g.current===5&&(Ct("isTimer",a),g.current=0))},[a]),u.jsxs(u.Fragment,{children:[!!a&&!r&&u.jsx("div",{className:"absolute bottom-[100%] w-[70%] left-[50%] translate-x-[-50%]",children:u.jsxs("div",{className:`${i.content_bg} flex justify-center gap-[10px] py-[2px] text-[13px] px-[20px] rounded-tl-[4px] rounded-tr-[4px]`,children:[u.jsxs("p",{className:" text-[13px]",children:["Song stop in ",Co(a)]}),u.jsx("button",{onClick:E,children:u.jsx(Xs,{className:"w-[18px]"})})]})}),f&&u.jsx(yn,{closeModal:v,children:u.jsxs("div",{className:"w-[500px] max-w-[calc(100vw-40px)]",children:[u.jsxs("h1",{className:"text-[22px]",children:["You have been listened music in ",Co(y.current)]}),u.jsxs("div",{className:"flex gap-[10px] mt-[30px]",children:[u.jsx(G,{onClick:()=>x(),size:"normal",className:`${i.content_bg} rounded-[99px]`,children:"Continue playing"}),u.jsx(G,{onClick:w,size:"normal",className:`bg-${i.alpha} rounded-[99px]`,children:"Close"})]})]})})]})}function Xv({close:t}){return u.jsxs("div",{className:"w-[400px] max-w-[calc(90vw-40px)]",children:[u.jsx(Fs,{close:t,title:"HD Player"}),u.jsxs("div",{className:"",children:[u.jsx("h5",{className:"text-lg font-bold",children:"Các công nghệ sử dụng:"}),u.jsxs("ul",{children:[u.jsx("li",{className:"text-lg my-[10px]  ml-[20px]",children:"React - TS"}),u.jsx("li",{className:"text-lg my-[10px]  ml-[20px]",children:"Google firebase"})]}),u.jsx("a",{href:"asldj",target:"_blank",className:"text-lg font-bold",children:"#Github"})]})]})}function q_({onClick:t,theme:e,active:n}){return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"w-[25%] px-[10px] max-[549px]:w-[50%]",children:[u.jsx("div",{onClick:()=>t(e),className:`relative border-l-[20px] ${e.content_border} pt-[100%] rounded-xl ${e.side_bar_bg} ${n?e.content_border:""}`,children:n&&u.jsx("div",{className:"absolute bottom-[10px] right-[10px]",children:u.jsx(wT,{className:`${e.content_text} w-[25px]`})})}),u.jsx("p",{className:"text-[14px] mt-[6px]",children:e.name})]})})}function SC({close:t}){const{theme:e,setTheme:n}=te(),r=a=>{Ct("theme",a.id),n(a)},s={songItemContainer:`w-full border-b border-${e.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[900px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-y-auto overflow-x-hidden no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap",linkItem:`py-[10px] border-b border-${e.alpha} last:border-none`},i=od.map(a=>{const l=a.id===e.id;if(a.type==="light")return u.jsx(q_,{active:l,theme:a,onClick:r},a.id)}),o=od.map(a=>{const l=a.id===e.id;if(a.type==="dark")return u.jsx(q_,{active:l,theme:a,onClick:r},a.id)});return u.jsxs("div",{className:s.popupWrapper,children:[u.jsx(Fs,{close:t,title:"Themes"}),u.jsxs("div",{className:s.themeContainer,children:[u.jsx("h2",{className:"text-md font-semibold mb-[10px]",children:"Dark"}),u.jsx("div",{className:s.themeList,children:o}),u.jsx("h2",{className:"text-md font-semibold mb-[10px] mt-[30px]",children:"Light"}),u.jsx("div",{className:s.themeList,children:i})]})]})}function ir({loading:t,theme:e,callback:n,label:r,close:s,buttonLabel:i,desc:o="This action cannot be undone",className:a}){return u.jsxs("div",{className:`${a||"w-[400px] max-w-[calc(90vw-40px)]"} ${t?"opacity-60 pointer-events-none":""}`,children:[u.jsx("h1",{className:"text-[20px] font-semibold",children:r||"Wait a minute"}),o&&u.jsx("p",{className:" text-[16px] font-semibold text-red-500",children:o}),u.jsxs("div",{className:"flex gap-[10px] mt-[20px]",children:[u.jsx(G,{onClick:s,className:`${e.content_bg} rounded-full text-[14px]`,variant:"primary",children:"Close"}),u.jsx(G,{isLoading:t,className:" text-[#fff] bg-red-500 rounded-full text-[14px] font-bold",variant:"primary",onClick:n,children:i||"Yes please"})]})]})}function K_({close:t,addPlaylist:e,isFetching:n}){const{theme:r}=te(),[s,i]=h.useState(""),o=h.useRef(null),a=async l=>{l.preventDefault(),s&&(await e(s),t())};return h.useEffect(()=>{var l;(l=o.current)==null||l.focus()},[]),u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]:",children:[u.jsx(Fs,{close:t,title:"Add playlist"}),u.jsxs("form",{action:"",onSubmit:a,children:[u.jsx("input",{ref:o,className:`bg-${r.alpha} px-[20px] rounded-full outline-none mt-[10px] text-[16px]  h-[35px] w-full`,type:"text",placeholder:"name...",value:s,onChange:l=>i(l.target.value)}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(G,{type:"submit",isLoading:n,variant:"primary",className:`${r.content_bg} rounded-full ${s?"":"opacity-[.6] pointer-events-none"}`,children:"Save"})})]})]})}function Uz({close:t,handleAddSongToPlaylist:e,userPlaylists:n,song:r,loading:s}){return u.jsxs("div",{className:`w-[400px] max-w-[calc(90vw-40px)] ${s?"opacity-60 pointer-events-none":""}`,children:[u.jsx(Fs,{close:t,title:"Playlist"}),u.jsx("div",{className:"max-h-[60vh]",children:u.jsx("ul",{className:"",children:!!(n!=null&&n.length)&&u.jsx(u.Fragment,{children:n.map((i,o)=>{const a=i.song_ids.includes(r.id);return u.jsxs("li",{onClick:()=>!a&&e(i),className:`list-none flex rounded-[4px] p-[5px] ${a&&"opacity-60"}`,children:[u.jsx(Ro,{className:"w-[20px] mr-[5px]"}),u.jsxs("p",{children:[i.name," ",a&&"(added)"]})]},o)})})})})]})}function Yv({close:t}){const e=je(),{theme:n}=te(),[r,s]=h.useState(),[i,o]=h.useState(""),[a,l]=h.useState(""),{setSuccessToast:c}=Zt(),d={button:"text-[14px] font-[500] px-[10px]  py-[4px] rounded-[99px]",input:`bg-${n.alpha} px-[10px] rounded-[4px] outline-none mt-[10px] text-[16px]  h-[35px] w-full`},f=(y,_)=>{console.log("handleSelect",y),_.stopPropagation(),_.preventDefault(),l(""),o(""),s(y)},p=(y,_)=>{s(""),y=="minute"?o(_):l(_)},m=()=>{let y;r?y=+r:y=+a*60+ +i,e(bt({isTimer:y})),Ct("isTimer",y),c({message:"Timer added"}),t()},g=r||a||i;return u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]",children:[u.jsx(Fs,{close:t,title:"Sleep timer"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex space-x-[10px] mb-[12px]",children:[u.jsx("button",{type:"button",onClick:y=>f("5",y),className:`${d.button} ${r==="5"?n.content_bg:`${n.content_border} border`}`,children:"5 min"}),u.jsx("button",{type:"button",onClick:y=>f("15",y),className:`${d.button} ${r==="15"?n.content_bg:`${n.content_border} border`}`,children:"15 min"}),u.jsx("button",{type:"button",onClick:y=>f("30",y),className:`${d.button} ${r==="30"?n.content_bg:`${n.content_border} border`}`,children:"30 min"})]}),u.jsxs("div",{className:"flex mx-[-10px]",children:[u.jsxs("div",{className:"flex flex-col w-[50%] px-[10px]",children:[u.jsx("label",{htmlFor:"hour_input",children:"Hour"}),u.jsxs("select",{value:a,onChange:y=>p("hour",y.target.value),id:"hour_input",className:d.input,children:[u.jsx("option",{value:"0",children:"---"}),u.jsx("option",{value:"1",children:"1"}),u.jsx("option",{value:"2",children:"2"}),u.jsx("option",{value:"3",children:"3"})]})]}),u.jsxs("div",{className:"flex flex-col w-[50%] px-[10px]",children:[u.jsx("label",{htmlFor:"minute_input",children:"Minute"}),u.jsxs("select",{value:i,onChange:y=>p("minute",y.target.value),className:d.input,id:"minute_input",children:[u.jsx("option",{className:d.input,value:"0",children:"---"}),u.jsx("option",{value:"15",children:"15"}),u.jsx("option",{value:"30",children:"30"}),u.jsx("option",{value:"45",children:"45"})]})]})]}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(G,{onClick:m,variant:"primary",className:`${n.content_bg} rounded-full ${g?"":"opacity-60 pointer-events-none"}`,children:"Ok"})})]})]})}function TC({admin:t}){const e=h.useRef(null),n=h.useRef(null),r=h.useRef(null),{handleInputChange:s}=OB({audioRef:e,testImageRef:r,inputRef:n,admin:t}),i={container:"upload portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:Ho.createPortal(u.jsxs("div",{className:i.container,children:[u.jsx("audio",{className:"hidden",ref:e}),u.jsx("input",{ref:n,onChange:s,type:"file",multiple:!0,accept:"audio",id:"song_upload",className:"hidden"}),u.jsx("img",{className:"hidden",ref:r})]}),document.getElementById("portals"))})}function Up({children:t}){const{theme:e}=te();return u.jsx(u.Fragment,{children:u.jsxs("div",{className:`${e.container} min-h-screen ${e.type==="dark"?"text-white":"text-[#333]"}`,children:[u.jsx($z,{}),u.jsxs("div",{className:"h-[calc(100vh-50px)] no-scrollbar overflow-auto",children:[u.jsx("div",{className:"h-[100px]"}),u.jsx("div",{className:"container mx-[auto] px-[40px]",children:t})]}),u.jsx(vC,{admin:!0}),u.jsx(TC,{admin:!0})]})})}function bC(){const t=je(),{userPlaylists:e,setUserPlaylists:n}=Ge(),{currentPlaylist:r}=K($s),{currentSong:s}=K(ge),[i,o]=h.useState(!1),a=Jt(),{setErrorToast:l}=Zt();return{isFetching:i,addAdminPlaylist:async f=>{try{if(!f)throw new Error("playlist name invalid");const p=t0(f)+"_admin",m=r0({id:p,by:"admin",name:f});o(!0);const g=[...e,m];await bn({collection:"playlist",data:m,id:p,msg:">>> api: set playlist doc"}),n(g)}catch(p){console.log({message:p}),l({})}finally{o(!1)}},deleteAdminPlaylist:async()=>{o(!0),await $l({collection:"playlist",id:r.id,msg:">>> api: delete playlist doc"});const f=e.filter(p=>p.id!==r.id);n(f),t(Fv()),s.song_in===`playlist_${r.id}`&&t(Rs()),o(!1),a("/dashboard")}}}function Jv({playlist:t,loading:e,activeCondition:n=!0,className:r,...s}){const{theme:i}=te(),{currentSong:o}=K(ge),[a,l]=h.useState(!1),{addPlaylist:c,isFetching:d}=Ni(),{addAdminPlaylist:f,isFetching:p}=bC(),m=()=>l(!1),g={playlistItem:"w-1/4 p-[8px] max-[800px]:w-1/2"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`flex flex-row flex-wrap -mx-[8px] ${r}`,children:[e&&WO,!e&&u.jsxs(u.Fragment,{children:[t.length?t.map((y,_)=>{const x=n&&o.song_in.includes(y.id);switch(s.location){case"home":case"my-songs":return u.jsx("div",{className:g.playlistItem,children:u.jsx(Bg,{active:x,theme:i,data:y})},_);case"dashboard":return u.jsx("div",{className:g.playlistItem,children:u.jsx(Bg,{active:x,theme:i,data:y,link:`/dashboard/playlist/${y.id}`})},_)}}):s.location==="home"&&u.jsx("p",{className:"text-center w-full",children:"..."}),s.location!=="home"&&u.jsx("div",{className:`${g.playlistItem} mb-[25px]`,children:u.jsx(rL,{theme:i,className:"pt-[100%]",onClick:()=>l(!0)})})]})]}),s.location!=="home"&&a&&u.jsxs(yn,{closeModal:m,children:[s.location==="my-songs"&&u.jsx(K_,{addPlaylist:c,isFetching:d,close:m}),s.location==="dashboard"&&u.jsx(K_,{addPlaylist:f,isFetching:p,close:m})]})]})}function Bz(){const{theme:t}=te(),{loading:e,user:n}=tt(),{logIn:r}=_c(),s=async()=>{try{await r()}catch(o){console.log(o)}finally{}},i={icon:"w-6 h-6 mr-2 inline",linkItem:`py-[10px] border-b border-${t.alpha} last:border-none`,button:`${t.content_bg} rounded-full`};return u.jsx("div",{className:"pb-[20px]",children:u.jsxs("div",{className:"flex flex-col gap-3 items-start ",children:[u.jsx("h1",{className:"text-[24px] font-bold",children:"Library"}),e?[...Array(3).keys()].map(()=>rb):u.jsx(u.Fragment,{children:n?u.jsxs(u.Fragment,{children:[u.jsx(lo,{className:i.linkItem,to:gt.MySongs,icon:u.jsx(Ro,{className:i.icon+t.content_text}),label:"All songs",arrowIcon:u.jsx(yu,{className:"w-5 h-5 text-gray-500"})}),u.jsx(lo,{className:i.linkItem,to:gt.MySongs,icon:u.jsx(TT,{className:i.icon+t.content_text}),label:"Favorite",arrowIcon:u.jsx(yu,{className:"w-5 h-5 text-gray-500"})}),u.jsx(lo,{className:i.linkItem,to:gt.MySongs,icon:u.jsx(ET,{className:i.icon+t.content_text}),label:"Recent",arrowIcon:u.jsx(yu,{className:"w-5 h-5 text-gray-500"})})]}):u.jsx(G,{onClick:s,className:`${t.content_bg} rounded-[4px] px-[40px]`,variant:"primary",children:"Login"})})]})})}function zz(){const{theme:t}=te(),{loading:e,user:n}=tt(),{logOut:r}=_c(),[s,i]=h.useState(""),o=()=>i(""),a=async()=>{try{await r()}catch(d){console.log("signOut error",{messsage:d})}finally{o()}},l=h.useMemo(()=>{switch(s){case"theme":return u.jsx(SC,{close:o});case"info":return u.jsx(Xv,{close:o});case"logout":return u.jsx(ir,{close:o,callback:a,loading:!1,theme:t,label:"Log out ?"})}},[s]),c={linkItem:`py-[10px] border-b border-${t.alpha} last:border-none`,button:`${t.content_bg} rounded-full`,icon:"w-[24px] mr-2"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[10px]",children:"Setting"}),u.jsx(zg,{className:"h-[65px] w-[65px]"}),e?u.jsx(Be,{className:"my-[8px] h-[27px]"}):u.jsx("p",{className:"text-[18px] font-[500] my-[8px]",children:n?n.display_name:"Guest"}),e?[...Array(3).keys()].map(()=>rb):u.jsxs(u.Fragment,{children:[u.jsx(lo,{className:c.linkItem,icon:u.jsx(IT,{className:c.icon}),label:"Theme",onClick:()=>i("theme")}),u.jsx(lo,{className:c.linkItem,icon:u.jsx(bT,{className:c.icon}),label:"Info",onClick:()=>i("info")}),n&&u.jsx(lo,{className:c.linkItem,icon:u.jsx(xT,{className:c.icon}),label:"Logout",onClick:()=>i("logout")})]})]}),s&&u.jsx(yn,{closeModal:o,children:l})]})}function Ea({children:t,reset:e,...n}){switch(n.location){case"home":case"dashboard-songs":return u.jsxs(u.Fragment,{children:[t,u.jsx(G,{onClick:e,className:"px-[5px] flex-shrink-0",children:u.jsx(Xs,{className:"w-[20px]"})})]});case"my-playlist":case"my-songs":case"dashboard-playlist":case"admin-playlist":return u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:n.selectAll,className:"ml-[10px]",children:u.jsx(gl,{className:"w-[18px]"})}),t,u.jsx(G,{onClick:e,className:"px-[5px] flex-shrink-0",children:u.jsx(Xs,{className:"w-[20px]"})})]})}}const Bs=({children:t,onClick:e,className:n})=>u.jsx(G,{onClick:e,variant:"outline",size:"small",className:n,children:t});function Bl({children:t,...e}){const n=je(),{theme:r}=te(),{user:s}=tt(),{isChecked:i,selectedSongs:o,setIsChecked:a,setSelectedSongs:l,reset:c}=Kv(),{currentSong:d}=K(ge),{queueSongs:f}=K(Dr),{playlistSongs:p}=K($s),{userSongs:m,setUserSongs:g}=Ge(),[y,_]=h.useState(!1),[x,v]=h.useState(""),{setErrorToast:w,setSuccessToast:E}=Zt(),{deleteSongsFromPlaylist:S,isFetching:b}=Ni(),T=()=>{v("")},I=()=>{o.length<m.length?l(m):c()},A=()=>{o.length<p.length?l(p):c()},C=()=>{n(xc({songs:o})),E({message:"songs added to queue"}),c()},j=async()=>{if(s)try{_(!0);const V=o.map(R=>R.id);for(let R of o)await SA(R);const X=m.filter(R=>!V.includes(R.id));if(d.song_in==="user"){const R=f.filter($=>!V.includes($.id));R.length!==f.length&&n(wc({songs:R}))}V.includes(d.id)&&n(Rs()),g(X),E({message:`${o.length} songs deleted`})}catch(V){console.log({message:V}),w({})}finally{c(),_(!1),T()}},B=async()=>{try{await S(o)}catch(V){console.log(V),w({message:"Error when delete song"})}finally{T(),a(!1),l([])}},O={outlineButton:`border-${r.alpha} ${r.side_bar_bg}`},L=h.useMemo(()=>{if(x)switch(x){case"delete-selected-songs":return u.jsx(ir,{loading:y,label:`Delete ${o.length} songs ?`,theme:r,callback:j,close:T});case"remove-selects-songs":return u.jsx(ir,{loading:b,label:`Remove ${o.length} songs ?`,theme:r,callback:B,close:T})}},[x,b,y]),F=h.useMemo(()=>{switch(e.location){case"home":return u.jsxs(u.Fragment,{children:[!i&&u.jsx("h3",{className:"text-2xl font-bold mr-[14px]",children:"Songs"}),i&&u.jsxs(Ea,{location:e.location,reset:()=>{},children:[u.jsx("p",{className:"font-semibold opacity-[.6]",children:o.length}),u.jsxs(Bs,{onClick:C,className:O.outlineButton,children:[u.jsx(RT,{className:"w-[20px] mr-[4px]"}),"Add to songs queue"]})]})]});case"dashboard-songs":return u.jsxs(u.Fragment,{children:[!i&&t,i&&u.jsxs(Ea,{location:e.location,reset:c,children:[u.jsx("p",{className:"font-semibold opacity-[.6]",children:o.length}),u.jsx(Bs,{onClick:()=>console.log("confirm modal"),className:O.outlineButton,children:"Delete"})]})]});case"my-songs":return u.jsxs(u.Fragment,{children:[!i&&t,i&&u.jsxs(Ea,{selectAll:I,location:e.location,reset:c,children:[u.jsx("p",{className:"font-semibold opacity-[.6]",children:o.length}),u.jsx(Bs,{onClick:C,className:O.outlineButton,children:"Add to songs queue"}),u.jsx(Bs,{onClick:()=>v("delete-selected-songs"),className:O.outlineButton,children:"Delete"})]})]});case"dashboard-playlist":case"my-playlist":return u.jsxs(u.Fragment,{children:[!i&&t,i&&u.jsxs(Ea,{selectAll:A,location:e.location,reset:c,children:[u.jsx("p",{className:"font-semibold opacity-[.6]",children:o.length}),e.location!=="dashboard-playlist"&&u.jsx(Bs,{onClick:C,className:O.outlineButton,children:"Add to songs queue"}),u.jsx(Bs,{onClick:()=>v("remove-selects-songs"),className:O.outlineButton,children:"Remove"})]})]});case"admin-playlist":return u.jsxs(u.Fragment,{children:[!i&&u.jsx("h3",{className:"text-2xl font-bold mr-[14px]",children:"Songs"}),i&&u.jsxs(Ea,{selectAll:A,location:e.location,reset:c,children:[u.jsx("p",{className:"font-semibold opacity-[.6]",children:o.length}),u.jsx(Bs,{onClick:C,className:O.outlineButton,children:"Add to songs queue"})]})]})}},[i,o,e]);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center space-x-[8px]",children:F}),x&&u.jsx(yn,{closeModal:T,children:L})]})}function Wz({loading:t}){const e=je(),{adminSongs:n}=Ge(),{from:r}=K(Dr),{currentSong:s}=K(ge),[i,o]=h.useState(!1),[a,l]=h.useState([]),c=(d,f)=>{(s.id!==d.id||s.song_in!=="admin")&&(e(an({...d,currentIndex:f})),(r.length>1||r[0]!=d.song_in)&&e(wc({songs:n})))};return u.jsxs(Qv,{isChecked:i,setIsChecked:o,selectedSongs:a,setSelectedSongs:l,children:[u.jsx(Bl,{location:"home"}),t&&mh,!t&&u.jsx(u.Fragment,{children:n.length?u.jsx(u.Fragment,{children:u.jsx(Nr,{variant:"home",handleSetSong:c,activeExtend:s.song_in==="admin"||s.song_in==="favorite",songs:n})}):u.jsx("h1",{className:"text-[22px] text-center",children:"..."})})]})}function Hz(){const{loading:t}=tt(),{adminPlaylists:e}=Ge(),{loading:n}=_f({}),r=h.useMemo(()=>window.innerWidth<800,[]);return u.jsxs(u.Fragment,{children:[r&&u.jsx(Bz,{}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[14px]",children:"Popular"}),u.jsx(Jv,{loading:n||t,playlist:e,location:"home"})]}),u.jsx("div",{className:"pb-[30px]",children:u.jsx(Wz,{loading:n})}),r&&u.jsx(zz,{})]})}function qz(){const{theme:t}=te(),{currentSong:e}=K(ge),{userSongs:n}=Ge(),[r,s]=h.useState(),[i,o]=h.useState({base:"",real_time:[],id:""}),a=h.useRef(null),[l,c]=h.useState(!1),d=h.useRef(!1),{errorMsg:f,loading:p,initial:m}=_f({}),g=Jt(),y=ah(),_=h.useCallback(async v=>{try{if(v.lyric_id){c(!0);const w=await Uo({collection:"lyrics",id:v.lyric_id,msg:">>> api: get lyric doc"});if(w.exists()){const E=w.data();o(E)}}}catch(w){console.log({message:w})}finally{c(!1)}},[]),x=h.useCallback(async()=>{if(console.log("get song"),e.name&&e.id===y.id)e.by==="admin"?g(gt.Home):(s(e),await _(e));else{const v=n.find(w=>w.id===y.id);v?(s(v),await _(v)):g(gt.Home)}},[e,n]);return h.useEffect(()=>{m&&(d.current||(d.current=!0,r||x()))},[m]),p||l?u.jsx("h1",{children:u.jsx(br,{className:"w-[25px] animate-spin"})}):f?u.jsx("h1",{children:f}):u.jsxs("div",{className:"",children:[u.jsx("audio",{ref:a,src:r==null?void 0:r.song_url,className:"hidden"}),r&&u.jsx(u.Fragment,{children:u.jsx(gC,{lyric:i,audioRef:a,theme:t,song:r})})]})}function Kz({initialLoading:t}){const e=je(),{userSongs:n}=Ge(),{currentSong:r}=K(ge),[s,i]=h.useState(!1),[o,a]=h.useState([]),{tempSongs:l}=wf(),c=h.useMemo(()=>l.length+n.length,[l,n]),d=(f,p)=>{r.id!==f.id&&e(an({...f,currentIndex:p}))};return u.jsxs(Qv,{isChecked:s,setIsChecked:i,selectedSongs:o,setSelectedSongs:a,children:[u.jsx(Bl,{location:"dashboard-songs",children:t?u.jsx(u.Fragment,{children:u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(Be,{className:"h-[20px] w-[90px]"})})}):u.jsxs("p",{className:"font-semibold opacity-[.6]",children:[c," Songs"]})}),u.jsxs("div",{className:"min-h-[50vh]",children:[t&&mh,!t&&u.jsx(u.Fragment,{children:c?u.jsxs(u.Fragment,{children:[u.jsx(Nr,{variant:"dashboard-songs",tempSongs:l,activeExtend:!0,songs:n,handleSetSong:d}),u.jsx(Nr,{variant:"uploading",songs:l})]}):u.jsx("p",{className:"text-center",children:"¯\\_(ツ)_/¯"})})]})]})}function Qz(){const{theme:t}=te(),{user:e,loading:n}=tt(),{currentSong:r}=K(ge),{userPlaylists:s}=Ge(),[i,o]=h.useState(!0),[a,l]=h.useState([]),[c,d]=h.useState("userSongs"),{loading:f,errorMsg:p}=_f({admin:!0}),m=async()=>{console.log(">>> api: get user");try{if(!e)return;o(!0);const _=Ls(ra(Lr,"users"),Ds("email","!=",e.email)),x=await Ms(_);if(x.docs){const v=x.docs.map(w=>w.data());l(v)}}catch(_){console.log(_)}finally{o(!1)}},g=()=>a.map((_,x)=>u.jsxs("tr",{className:"",children:[u.jsx("td",{className:y.td,children:u.jsx("div",{className:"h-[44px] w-[44px] ml-[20px]",children:u.jsx(Or,{classNames:"rounded-[4px]",src:_.photoURL})})}),u.jsx("td",{className:y.td,children:_.display_name}),u.jsx("td",{className:y.td,children:_.email}),u.jsx("td",{className:y.td,children:LO(_==null?void 0:_.latest_seen)})]},x));h.useEffect(()=>{n||c==="users"&&!a.length&&m()},[c]);const y={button:`${t.content_bg} rounded-full`,inActiveBtn:`bg-${t.alpha}`,activeBtn:`${t.content_bg}`,td:`py-[10px] my-[10px] border-${t.alpha} border-b-[1px]`,th:"py-[5px]",tableContainer:`border border-${t.alpha} rounded-[4px]`,tableHeader:`border-b border-${t.alpha} ${t.side_bar_bg} flex items-center h-[50px] gap-[15px]`};return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsxs("div",{className:"mb-[20px]",children:[u.jsx(G,{onClick:()=>d("userSongs"),className:`${c==="userSongs"?y.activeBtn:y.inActiveBtn}  rounded-full`,variant:"primary",children:"Songs"}),u.jsx(G,{onClick:()=>d("users"),className:` ${c==="users"?y.activeBtn:y.inActiveBtn} rounded-full ml-[10px]`,variant:"primary",children:"Users"})]}),u.jsxs("div",{className:"mt-[30px]",children:[c==="userSongs"&&u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-2xl font-bold mb-[10px]",children:"Playlist"}),u.jsx(Jv,{activeCondition:!!r.song_in,loading:f,playlist:s,location:"dashboard"}),u.jsxs("div",{className:"mt-[30px] flex justify-between mb-[10px]",children:[u.jsx("h3",{className:"text-2xl font-bold",children:"Songs"}),u.jsx("div",{className:"flex items-center",children:u.jsxs("label",{className:`${t.content_bg} ${status==="uploading"||f?"opacity-60 pointer-events-none":""} rounded-full flex px-[20px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(sd,{className:"w-[20px] mr-[5px]"}),"Upload"]})})]}),p&&u.jsx("p",{children:"Some thing went wrong"}),!p&&u.jsx(Kz,{initialLoading:f})]}),c==="users"&&u.jsx("div",{className:y.tableContainer,children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:`${t.bottom_player_bg} w-full text-[14px] py-[4px]`,children:u.jsxs("tr",{children:[u.jsx("th",{}),u.jsx("th",{className:"text-left py-[4px]",children:"Name"}),u.jsx("th",{className:"text-left py-[4px]",children:"Email"}),u.jsx("th",{className:"text-left py-[4px]",children:"Latest Seen"})]})}),u.jsx("tbody",{children:g()})]})})]})]})})}function Gz({playlist:t,close:e}){const{theme:n}=te(),r=h.useRef(null),[s,i]=h.useState(""),[o,a]=h.useState(!1),{editPlaylist:l,isFetching:c}=Ni(),d=async p=>{if(p.preventDefault(),!!o)try{await l(s,t)}catch(m){console.log(m)}finally{e()}},f={editContainer:"w-[400px] max-w-[calc(90vw-40px)]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full"};return h.useEffect(()=>{const p=r.current;p==null||p.focus(),i(t.name)},[]),h.useEffect(()=>{s.trim()&&s.trim()!==t.name?a(!0):a(!1)},[s]),u.jsxs(u.Fragment,{children:[u.jsx(Fs,{close:e,title:"Edit playlist"}),u.jsxs("form",{action:"",onSubmit:d,className:`${f.editContainer} ${c?"opacity-60 pointer-events-none":""}`,children:[u.jsx("input",{ref:r,value:s,onChange:p=>i(p.target.value),type:"text",className:`${f.input} bg-${n.alpha} ${n.type==="light"?"text-[#333]":"text-white"}`}),u.jsx(G,{type:"submit",variant:"primary",isLoading:c,className:`${n.content_bg} rounded-full self-end mt-[15px] ${o?"":"opacity-60 pointer-events-none"}`,children:"Save"})]})]})}function Bp({loading:t,type:e}){const n=je(),{theme:r}=te(),{currentSong:s}=K(ge),{currentPlaylist:i,playlistSongs:o}=K($s),[a,l]=h.useState(""),c=ah(),{deletePlaylist:d,isFetching:f}=Ni(),{deleteAdminPlaylist:p,isFetching:m}=bC(),g=h.useMemo(()=>window.innerWidth<800,[]),y=h.useMemo(()=>o.reduce((I,A)=>I+A.duration,0),[o]),_=()=>l(""),x=(I,A)=>{const C=`playlist_${i.id}`;(s.id!==I.id||s.song_in!==C)&&(n(an({...I,currentIndex:A,song_in:C})),s.song_in!==C&&(n(wc({songs:o})),console.log("setActuallySongs when playlist list")))},v=()=>{const I=o[0];s.song_in.includes(c.name)||x(I,0)},w=u.jsxs(u.Fragment,{children:[u.jsx(Be,{className:"h-[30px]  w-[200px]"}),u.jsx(Be,{className:"hidden md:block h-[16px] w-[60px]"}),u.jsx(Be,{className:"hidden md:block h-[16px] w-[200px]"})]}),E=h.useMemo(()=>t?w:u.jsxs(u.Fragment,{children:[u.jsx("h1",{className:"text-[30px] font-semibold leading-[1]",children:i.name}),!g&&u.jsx("p",{className:"text-[16px] leading-[1] font-[500]",children:Co(y)}),u.jsxs("p",{className:"hidden md:block opacity-60 leading-[1]",children:["created by ",i.by]})]}),[t,i]),S=h.useMemo(()=>{if(t)return u.jsx(u.Fragment,{});switch(e){case"my-playlist":case"dashboard-playlist":return u.jsxs(u.Fragment,{children:[u.jsxs(G,{onClick:v,className:`rounded-full px-[20px] py-[6px] ${r.content_bg} ${!i.song_ids.length&&"opacity-60 pointer-events-none"}`,children:[u.jsx(x1,{className:"mr-[5px] w-[22px]"}),"Play"]}),u.jsx(G,{onClick:()=>l("delete"),className:`p-[8px] rounded-full ${r.content_hover_bg} bg-${r.alpha}`,children:u.jsx(AT,{className:"w-[22px]"})}),u.jsx(G,{onClick:()=>l("edit"),className:`p-[8px] rounded-full ${r.content_hover_bg} bg-${r.alpha}`,children:u.jsx(qy,{className:"w-[22px]"})})]});case"admin-playlist":return u.jsxs(G,{onClick:v,className:`rounded-full px-[20px] py-[6px] ${r.content_bg} ${!i.song_ids.length&&"opacity-60 pointer-events-none"}`,children:[u.jsx(x1,{className:"mr-[5px] w-[22px]"}),"Play"]})}},[t,o]),b=h.useMemo(()=>{switch(a){case"":return u.jsx(u.Fragment,{});case"edit":return u.jsx(Gz,{close:_,playlist:i});case"delete":if(e==="my-playlist")return u.jsx(ir,{loading:f,label:"Delete playlist ?",theme:r,callback:d,close:_});if(e==="dashboard-playlist")return u.jsx(ir,{loading:m,label:"Delete playlist ?",theme:r,callback:p,close:_})}},[a,f,m]),T={container:"w-full space-y-[12px] md:space-y-0 md:space-x-[12px] flex flex-col md:flex-row",playlistInfoContainer:"flex flex-col gap-[12px] md:justify-between",infoTop:"flex justify-center items-center gap-[8px] md:flex-col md:items-start",countSongText:"text-[14px]] font-semibold opacity-[.6] leading-[1]",ctaContainer:"flex justify-center space-x-[12px] md:justify-start"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:T.container,children:[u.jsx("div",{className:"w-full px-[20px] md:w-1/4 md:px-0",children:t?u.jsx(Be,{className:"pt-[100%] rounded-[8px]"}):u.jsx(Bg,{data:i,active:s.song_in===`playlist_${i.id}`,inDetail:!0,theme:r})}),u.jsxs("div",{className:T.playlistInfoContainer,children:[u.jsx("div",{className:T.infoTop,children:E}),u.jsx("div",{className:`${T.ctaContainer} `,children:S})]})]}),!!a&&u.jsx(yn,{closeModal:_,children:b})]})}function zp({location:t}){const e=je(),{theme:n}=te(),{currentSong:r}=K(ge),{from:s}=K(Dr),{currentPlaylist:i,playlistSongs:o}=K($s),[a,l]=h.useState(""),{setErrorToast:c}=Zt(),{deleteSongFromPlaylist:d}=Ni(),f=()=>l(""),p=(x,v)=>{const w=`playlist_${i.id}`;(r.id!==x.id||r.song_in!==w)&&(e(an({...x,currentIndex:v,song_in:w})),(s.length>1||s[0]!=w)&&e(wc({songs:o})))},m=async x=>{try{await d(x)}catch(v){console.log(v),c({})}},g=h.useMemo(()=>{if(!o.length)return u.jsx(u.Fragment,{});switch(t){case"admin-playlist":return u.jsx(Bl,{location:"admin-playlist",children:u.jsxs("p",{className:"font-semibold opacity-[.6]",children:[o.length," Songs"]})});case"my-playlist":case"dashboard-playlist":return u.jsx(Bl,{location:"my-playlist",children:u.jsxs("p",{className:"font-semibold opacity-[.6]",children:[o.length," Songs"]})})}},[i,o]),y=h.useMemo(()=>{switch(t){case"admin-playlist":return u.jsx(Nr,{variant:"admin-playlist",songs:o,handleSetSong:p,activeExtend:r.song_in.includes(i.id)});case"my-playlist":case"dashboard-playlist":return u.jsxs(u.Fragment,{children:[u.jsx(Nr,{variant:t,songs:o,handleSetSong:p,activeExtend:r.song_in.includes(i.id),deleteFromPlaylist:m}),u.jsx("div",{className:"flex justify-center mt-[20px]",children:u.jsxs(G,{onClick:()=>l("add-song"),className:`${n.content_bg} rounded-full`,variant:"primary",children:[u.jsx(id,{className:"w-[24px] mr-[5px]"}),"Add song"]})})]})}},[i,o,r]),_=h.useMemo(()=>{switch(a){case"":return u.jsx(u.Fragment,{});case"add-song":return u.jsx(vB,{close:f,playlistSongs:o})}},[a,o,i]);return u.jsxs(u.Fragment,{children:[g,y,!!a&&u.jsx(yn,{closeModal:f,children:_})]})}function IC({children:t}){const[e,n]=h.useState(!1),[r,s]=h.useState([]);return u.jsx(u.Fragment,{children:u.jsx(Qv,{isChecked:e,setIsChecked:n,selectedSongs:r,setSelectedSongs:s,children:t})})}function RC(){const{currentPlaylist:t}=K($s),{loading:e}=bB(),n=mn(),r=h.useMemo(()=>n.pathname.includes("/dashboard/playlist"),[n]),s=h.useMemo(()=>r?u.jsx(Bp,{loading:e,type:"dashboard-playlist"}):t.by==="admin"?u.jsx(Bp,{loading:e,type:"admin-playlist"}):u.jsx(Bp,{loading:e,type:"my-playlist"}),[e]),i=h.useMemo(()=>e?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(Be,{className:"h-[20px] w-[90px]"})}),mh]}):r?u.jsx(zp,{location:"dashboard-playlist"}):t.by==="admin"?u.jsx(zp,{location:"admin-playlist"}):u.jsx(zp,{location:"my-playlist"}),[e]);return u.jsxs("div",{className:"min-h-screen",children:[u.jsx(EC,{}),s,u.jsx("div",{className:"pb-[50px] mt-[30px]",children:u.jsx(IC,{children:i})})]})}const Xz=["mine","favorite"];function Yz({initialLoading:t}){const e=je(),{theme:n}=te(),{user:r}=tt(),{userSongs:s}=Ge(),{currentSong:i}=K(ge),{from:o}=K(Dr),{setSelectedSongs:a,setIsChecked:l}=Kv(),[c,d]=h.useState("mine"),[f,p]=h.useState([]),[m,g]=h.useState(!1),{tempSongs:y}=wf(),_=h.useMemo(()=>t?0:y.length+s.length,[y,s,t]),x=()=>{a([]),l(!1)},v=async()=>{if(r){if(!r.like_song_ids.length)return p([]);try{const S=Ls(ra(Lr,"songs"),Ds("id","in",r.like_song_ids)),b=await Ms(S);let T=!1,I=[];if(b.docs.length){const A=b.docs.map(C=>({...C.data(),song_in:"favorite"}));if(p(A),f.length<r.like_song_ids.length){const C=A.map(j=>j.id);T=!0,I=C}}else r.like_song_ids&&(T=!0,I=[]);T&&await bn({collection:"users",data:{like_song_ids:I},id:r.email,msg:">>> api: update user like song ids"})}catch{console.log("error")}finally{g(!1)}}},w=async S=>{d(S),g(!0),x(),S==="favorite"?await v():(await s0(300),g(!1))},E=(S,b)=>{(o.length>1||o[0]!=S.song_in)&&e(wc({songs:s})),(i.id!==S.id||i.song_in!=="user")&&e(an({...S,currentIndex:b}))};return u.jsxs(u.Fragment,{children:[u.jsx(Bl,{location:"my-songs",children:t?u.jsx(u.Fragment,{children:u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(Be,{className:"h-[20px] w-[90px]"})})}):u.jsxs("p",{className:"font-semibold opacity-[.6]",children:[_," Songs"]})}),u.jsx("div",{className:"flex items-center space-x-[10px] my-[10px]",children:Xz.map((S,b)=>{const T=c===S;return u.jsx("button",{onClick:()=>w(S),className:`text-[14px] font-[500] px-[10px] 
                        ${n.content_border} border py-[4px] rounded-[99px] ${T?n.content_bg:""}
                    `,children:S==="mine"?"My songs":"Favorite"},b)})}),u.jsxs("div",{className:"min-h-[50vh]",children:[(t||m)&&mh,!t&&!m&&u.jsx(u.Fragment,{children:c==="mine"&&!!_&&u.jsxs(u.Fragment,{children:[u.jsx(Nr,{variant:"my-songs",handleSetSong:E,activeExtend:i.song_in==="user"||i.song_in==="favorite",songs:s,tempSongs:y}),u.jsx(Nr,{songs:y,variant:"uploading"})]})})]})]})}function Jz(){const{theme:t}=te(),{loading:e,user:n}=tt(),{currentSong:r}=K(ge),{userPlaylists:s}=Ge(),{status:i}=wf(),o=Jt(),{loading:a,errorMsg:l,initial:c}=_f({});return h.useEffect(()=>{e||n&&(n.email||(o(gt.Home),console.log(">>> navigate to home")))},[e,c]),l?u.jsx("h1",{children:l}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px] ",children:[window.innerWidth<800&&u.jsx(EC,{to:""}),u.jsx("h3",{className:"text-[24px] font-bold mb-[14px]",children:"Playlist"}),u.jsx(Jv,{activeCondition:!!r.song_in,loading:a,playlist:s,location:"my-songs"})]}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-[24px] font-bold",children:"Songs"}),u.jsxs("label",{className:`${t.content_bg} ${i==="uploading"||a?"opacity-60 pointer-events-none":""} items-center hover:opacity-60 rounded-full flex px-[16px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(pB,{className:"w-[20px] mr-[5px]"}),"Upload"]})]}),u.jsxs(IC,{children:[l&&u.jsx("p",{children:"Some thing went wrong"}),!l&&u.jsx(Yz,{initialLoading:a})]})]})]})}function Zz(){const{theme:t}=te(),{user:e,loading:n}=tt(),[r,s]=h.useState(),[i,o]=h.useState({base:"",real_time:[],id:""}),a=h.useRef(null),l=h.useRef(!1),c=ah(),d=Jt(),f=async()=>{try{const p=await Uo({collection:"songs",id:c==null?void 0:c.id,msg:">>> api: get song doc"});if(!p.exists()){d("/dashboard");return}const m=p.data();if(m.lyric_id){const g=await Uo({collection:"lyrics",id:m.lyric_id});if(g.exists()){const y=g.data();o(y)}}s(m)}catch(p){console.log({message:p})}};return h.useEffect(()=>{if(!n){if(!e)return d(gt.Home);l.current||(l.current=!0,f())}},[]),u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsx("audio",{ref:a,src:r&&r.song_url,className:"hidden"}),r&&u.jsx(u.Fragment,{children:u.jsx(gC,{admin:!0,lyric:i,audioRef:a,theme:t,song:r})})]})}function eW(){const{theme:t}=te();return u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.container} ${t.type==="dark"?"text-white":"text-black"}`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Page Not found"}),u.jsx(ds,{to:"/",className:`${t.content_bg} font-bold  text-[#fff] mt-[20px] rounded-full flex px-[20px] py-[4px] cursor-pointer`,children:"Go home"})," "]})}function tW(){const{theme:t}=te(),e=Jt(),n=async()=>{await Wb(Ts),e("/login")};return u.jsxs("div",{className:`${t.container} flex flex-col justify-center items-center min-h-screen`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Unauthorized"}),u.jsx(G,{onClick:n,variant:"primary",size:"normal",className:`${t.content_bg} font-bold text-[20px]  text-[#fff] rounded-full mt-[20px]`,children:"Exit"})]})}function nW(){var a,l;const[t]=vc(Ts),{logIn:e}=_c(),{theme:n}=te(),r=Jt(),s=mn(),i=((l=(a=s==null?void 0:s.state)==null?void 0:a.from)==null?void 0:l.pathname)||"/dashboard",o=async()=>{try{await e()}catch(c){console.log(c)}};return h.useEffect(()=>{if(t!=null&&t.email){r(i,{replace:!0});return}console.log("run effect")},[t]),u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${n.container} ${n.type==="dark"?"text-white":"text-black"}`,children:[u.jsx(G,{onClick:o,variant:"default",size:"normal",className:`${n.content_bg} font-bold text-[#fff] text-[30px] rounded-full`,children:"Login with google"})," "]})}const gt={Home:"/",Dashboard:"/dashboard",DashboardPlaylist:"/dashboard/playlist/:id",DashboardEdit:"/dashboard/edit/:id",MySongs:"/mysongs",Favorite:"/favorite",Playlist:"/playlist/:id",Edit:"/mysongs/edit/:id"},rW=[{path:gt.Home,component:Hz,layout:""},{path:gt.MySongs,component:Jz,layout:""},{path:gt.Playlist,component:RC,layout:""},{path:gt.Edit,component:qz,layout:""}],sW=[{path:gt.Dashboard,component:Qz,layout:Up},{path:gt.DashboardPlaylist,component:RC,layout:Up},{path:gt.DashboardEdit,component:Zz,layout:Up}];function iW(){const t={container:"my-[30px] flex flex-col md:flex-row md:justify-between items-start",icon:"w-[26px] sm:w-[20px] scale-[1] hover:scale-[1.1] transition linear ",copyRightText:"text-[14px]"};return u.jsxs("div",{className:`${t.container}`,children:[u.jsxs("p",{className:t.copyRightText,children:["Make with Make with ❤️ by datnh ",u.jsx("br",{})," © All rights no reserved ¯\\_(ツ)_/¯"]}),u.jsxs("div",{className:"flex mt-[20px] md:mt-0 space-x-[10px]",children:[u.jsx("a",{href:"https://facebook.com/DAtdz06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"})})}),u.jsx("a",{href:"https://www.linkedin.com/in/dat-nguyen-9371a926a",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"})})}),u.jsx("a",{href:"https://github.com/d4t06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 496 512",fill:"currentColor",children:u.jsx("path",{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})})})]})]})}const Q_=({children:t})=>{const{theme:e}=te(),n=mn(),r=h.useMemo(()=>n.pathname.includes("edit"),[n]),s=h.useRef(null),i={container:` main-container sm:overflow-auto no-scrollbar main-content w-full ${r?"":"min-h-[100vh] pb-[90px]"} max-[549px]:h-full `,content:"px-[40px] max-[549px]:px-[15px] mt-[60px]",page:`flex min-h-[100vh] sm:h-[100vh] sm:overflow-hidden ${e.type==="dark"?"text-white":"text-[#333]"} ${e.container}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:i.page,children:[window.innerWidth>=800&&u.jsx(Sz,{}),u.jsxs("div",{ref:s,className:i.container,children:[window.innerWidth>=800&&u.jsx(Tz,{contentRef:s}),u.jsxs("div",{className:i.content,children:[t,u.jsx(iW,{})]})]}),u.jsx(vC,{})]}),u.jsx(TC,{})]})},oW="/HD-MP3/assets/loading-b1210647.gif";function aW({allowedRole:t}){const{user:e,loading:n}=tt(),{theme:r}=te();return n?u.jsx("div",{className:`min-h-screen flex flex-col items-center justify-center ${r.container}`,children:u.jsx("img",{className:"w-[150px]",src:oW,alt:""})}):e&&(t!=null&&t.find(s=>e.role===s))||!t.length?u.jsx(gT,{}):u.jsx(qN,{replace:!0,to:"/login"})}function lW(){const{setUser:t}=tt(),[e,n]=vc(Ts);return h.useEffect(()=>{if(n)return;(async()=>{try{if(!e||!e.email)return t({type:"set-user",user:null});const i=(await Uo({collection:"users",id:e.email,msg:">>> api: get auth info"})).data();Object.assign(i,{email:e.email,display_name:e.displayName,photoURL:e.photoURL,like_song_ids:i.like_song_ids||[],playlist_ids:i.playlist_ids||[],play_history:i.play_history||[]}),t({type:"set-user",user:i})}catch(s){console.log({message:s})}})()},[n,e]),u.jsx(gT,{})}function cW(){return u.jsxs(u.Fragment,{children:[u.jsx(ej,{basename:"HD-MP3",children:u.jsxs(QN,{children:[u.jsx(Br,{path:"/login",element:u.jsx(nW,{})}),u.jsx(Br,{path:"/unauthorized",element:u.jsx(tW,{})}),u.jsx(Br,{path:"*",element:u.jsx(eW,{})}),u.jsxs(Br,{element:u.jsx(lW,{}),children:[rW.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=Q_,u.jsx(Br,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)}),u.jsx(Br,{element:u.jsx(aW,{allowedRole:["ADMIN"]}),children:sW.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=Q_,u.jsx(Br,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)})})]})]})}),u.jsx(Dz,{autoClose:!0})]})}const uW=j8({reducer:{currentSong:q8,currentPlaylist:dB,playStatus:_B,songQueue:X8}});Wp.createRoot(document.getElementById("root")).render(u.jsx(sE.StrictMode,{children:u.jsx(eB,{children:u.jsx(zO,{children:u.jsx(lL,{children:u.jsx(rB,{children:u.jsx(aB,{children:u.jsx(ZU,{store:uW,children:u.jsx(cW,{})})})})})})})}));
