function IC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function AC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var J_={exports:{}},Wd={},X_={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wl=Symbol.for("react.element"),RC=Symbol.for("react.portal"),CC=Symbol.for("react.fragment"),kC=Symbol.for("react.strict_mode"),PC=Symbol.for("react.profiler"),NC=Symbol.for("react.provider"),jC=Symbol.for("react.context"),OC=Symbol.for("react.forward_ref"),LC=Symbol.for("react.suspense"),DC=Symbol.for("react.memo"),MC=Symbol.for("react.lazy"),tx=Symbol.iterator;function $C(t){return t===null||typeof t!="object"?null:(t=tx&&t[tx]||t["@@iterator"],typeof t=="function"?t:null)}var Y_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z_=Object.assign,eE={};function qo(t,e,n){this.props=t,this.context=e,this.refs=eE,this.updater=n||Y_}qo.prototype.isReactComponent={};qo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tE(){}tE.prototype=qo.prototype;function Hg(t,e,n){this.props=t,this.context=e,this.refs=eE,this.updater=n||Y_}var qg=Hg.prototype=new tE;qg.constructor=Hg;Z_(qg,qo.prototype);qg.isPureReactComponent=!0;var nx=Array.isArray,nE=Object.prototype.hasOwnProperty,Kg={current:null},rE={key:!0,ref:!0,__self:!0,__source:!0};function sE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)nE.call(e,r)&&!rE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Wl,type:t,key:i,ref:o,props:s,_owner:Kg.current}}function VC(t,e){return{$$typeof:Wl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Gg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wl}function FC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var rx=/\/+/g;function Ih(t,e){return typeof t=="object"&&t!==null&&t.key!=null?FC(""+t.key):e.toString(36)}function ou(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Wl:case RC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ih(o,0):r,nx(s)?(n="",t!=null&&(n=t.replace(rx,"$&/")+"/"),ou(s,e,n,"",function(c){return c})):s!=null&&(Gg(s)&&(s=VC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(rx,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",nx(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Ih(i,a);o+=ou(i,e,n,l,s)}else if(l=$C(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Ih(i,a++),o+=ou(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Cc(t,e,n){if(t==null)return t;var r=[],s=0;return ou(t,r,"","",function(i){return e.call(n,i,s++)}),r}function UC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xt={current:null},au={transition:null},BC={ReactCurrentDispatcher:Xt,ReactCurrentBatchConfig:au,ReactCurrentOwner:Kg};ge.Children={map:Cc,forEach:function(t,e,n){Cc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Cc(t,function(){e++}),e},toArray:function(t){return Cc(t,function(e){return e})||[]},only:function(t){if(!Gg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=qo;ge.Fragment=CC;ge.Profiler=PC;ge.PureComponent=Hg;ge.StrictMode=kC;ge.Suspense=LC;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BC;ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Z_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Kg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)nE.call(e,l)&&!rE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Wl,type:t.type,key:s,ref:i,props:r,_owner:o}};ge.createContext=function(t){return t={$$typeof:jC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:NC,_context:t},t.Consumer=t};ge.createElement=sE;ge.createFactory=function(t){var e=sE.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:OC,render:t}};ge.isValidElement=Gg;ge.lazy=function(t){return{$$typeof:MC,_payload:{_status:-1,_result:t},_init:UC}};ge.memo=function(t,e){return{$$typeof:DC,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=au.transition;au.transition={};try{t()}finally{au.transition=e}};ge.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ge.useCallback=function(t,e){return Xt.current.useCallback(t,e)};ge.useContext=function(t){return Xt.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return Xt.current.useDeferredValue(t)};ge.useEffect=function(t,e){return Xt.current.useEffect(t,e)};ge.useId=function(){return Xt.current.useId()};ge.useImperativeHandle=function(t,e,n){return Xt.current.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return Xt.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return Xt.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return Xt.current.useMemo(t,e)};ge.useReducer=function(t,e,n){return Xt.current.useReducer(t,e,n)};ge.useRef=function(t){return Xt.current.useRef(t)};ge.useState=function(t){return Xt.current.useState(t)};ge.useSyncExternalStore=function(t,e,n){return Xt.current.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return Xt.current.useTransition()};ge.version="18.2.0";X_.exports=ge;var f=X_.exports;const iE=AC(f),Qg=IC({__proto__:null,default:iE},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zC=f,WC=Symbol.for("react.element"),HC=Symbol.for("react.fragment"),qC=Object.prototype.hasOwnProperty,KC=zC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GC={key:!0,ref:!0,__self:!0,__source:!0};function oE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)qC.call(e,r)&&!GC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:WC,type:t,key:i,ref:o,props:s,_owner:KC.current}}Wd.Fragment=HC;Wd.jsx=oE;Wd.jsxs=oE;J_.exports=Wd;var u=J_.exports;var Hp={},aE={exports:{}},wn={},lE={exports:{}},cE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(C,W){var F=C.length;C.push(W);e:for(;0<F;){var $=F-1>>>1,H=C[$];if(0<s(H,W))C[$]=W,C[F]=H,F=$;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var W=C[0],F=C.pop();if(F!==W){C[0]=F;e:for(var $=0,H=C.length,j=H>>>1;$<j;){var O=2*($+1)-1,Q=C[O],Y=O+1,ne=C[Y];if(0>s(Q,F))Y<H&&0>s(ne,Q)?(C[$]=ne,C[Y]=F,$=Y):(C[$]=Q,C[O]=F,$=O);else if(Y<H&&0>s(ne,F))C[$]=ne,C[Y]=F,$=Y;else break e}}return W}function s(C,W){var F=C.sortIndex-W.sortIndex;return F!==0?F:C.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,m=!1,y=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(C){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=C)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function E(C){if(v=!1,w(C),!y)if(n(l)!==null)y=!0,M(T);else{var W=n(c);W!==null&&G(E,W.startTime-C)}}function T(C,W){y=!1,v&&(v=!1,x(b),b=-1),m=!0;var F=p;try{for(w(W),h=n(l);h!==null&&(!(h.expirationTime>W)||C&&!k());){var $=h.callback;if(typeof $=="function"){h.callback=null,p=h.priorityLevel;var H=$(h.expirationTime<=W);W=t.unstable_now(),typeof H=="function"?h.callback=H:h===n(l)&&r(l),w(W)}else r(l);h=n(l)}if(h!==null)var j=!0;else{var O=n(c);O!==null&&G(E,O.startTime-W),j=!1}return j}finally{h=null,p=F,m=!1}}var S=!1,I=null,b=-1,A=5,R=-1;function k(){return!(t.unstable_now()-R<A)}function V(){if(I!==null){var C=t.unstable_now();R=C;var W=!0;try{W=I(!0,C)}finally{W?P():(S=!1,I=null)}}else S=!1}var P;if(typeof g=="function")P=function(){g(V)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,z=D.port2;D.port1.onmessage=V,P=function(){z.postMessage(null)}}else P=function(){_(V,0)};function M(C){I=C,S||(S=!0,P())}function G(C,W){b=_(function(){C(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,M(T))},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(C){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var F=p;p=W;try{return C()}finally{p=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(C,W){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var F=p;p=C;try{return W()}finally{p=F}},t.unstable_scheduleCallback=function(C,W,F){var $=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?$+F:$):F=$,C){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=F+H,C={id:d++,callback:W,priorityLevel:C,startTime:F,expirationTime:H,sortIndex:-1},F>$?(C.sortIndex=F,e(c,C),n(l)===null&&C===n(c)&&(v?(x(b),b=-1):v=!0,G(E,F-$))):(C.sortIndex=H,e(l,C),y||m||(y=!0,M(T))),C},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(C){var W=p;return function(){var F=p;p=W;try{return C.apply(this,arguments)}finally{p=F}}}})(cE);lE.exports=cE;var QC=lE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uE=f,gn=QC;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dE=new Set,el={};function ki(t,e){To(t,e),To(t+"Capture",e)}function To(t,e){for(el[t]=e,t=0;t<e.length;t++)dE.add(e[t])}var jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qp=Object.prototype.hasOwnProperty,JC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sx={},ix={};function XC(t){return qp.call(ix,t)?!0:qp.call(sx,t)?!1:JC.test(t)?ix[t]=!0:(sx[t]=!0,!1)}function YC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ZC(t,e,n,r){if(e===null||typeof e>"u"||YC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ct[t]=new Yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ct[e]=new Yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ct[t]=new Yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ct[t]=new Yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ct[t]=new Yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ct[t]=new Yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ct[t]=new Yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ct[t]=new Yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ct[t]=new Yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Jg=/[\-:]([a-z])/g;function Xg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Jg,Xg);Ct[e]=new Yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Jg,Xg);Ct[e]=new Yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Jg,Xg);Ct[e]=new Yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ct[t]=new Yt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ct.xlinkHref=new Yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ct[t]=new Yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yg(t,e,n,r){var s=Ct.hasOwnProperty(e)?Ct[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ZC(e,n,s,r)&&(n=null),r||s===null?XC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Wr=uE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kc=Symbol.for("react.element"),Gi=Symbol.for("react.portal"),Qi=Symbol.for("react.fragment"),Zg=Symbol.for("react.strict_mode"),Kp=Symbol.for("react.profiler"),fE=Symbol.for("react.provider"),hE=Symbol.for("react.context"),ey=Symbol.for("react.forward_ref"),Gp=Symbol.for("react.suspense"),Qp=Symbol.for("react.suspense_list"),ty=Symbol.for("react.memo"),Jr=Symbol.for("react.lazy"),pE=Symbol.for("react.offscreen"),ox=Symbol.iterator;function ua(t){return t===null||typeof t!="object"?null:(t=ox&&t[ox]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,Ah;function Ea(t){if(Ah===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ah=e&&e[1]||""}return`
`+Ah+t}var Rh=!1;function Ch(t,e){if(!t||Rh)return"";Rh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Rh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ea(t):""}function ek(t){switch(t.tag){case 5:return Ea(t.type);case 16:return Ea("Lazy");case 13:return Ea("Suspense");case 19:return Ea("SuspenseList");case 0:case 2:case 15:return t=Ch(t.type,!1),t;case 11:return t=Ch(t.type.render,!1),t;case 1:return t=Ch(t.type,!0),t;default:return""}}function Jp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qi:return"Fragment";case Gi:return"Portal";case Kp:return"Profiler";case Zg:return"StrictMode";case Gp:return"Suspense";case Qp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hE:return(t.displayName||"Context")+".Consumer";case fE:return(t._context.displayName||"Context")+".Provider";case ey:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ty:return e=t.displayName||null,e!==null?e:Jp(t.type)||"Memo";case Jr:e=t._payload,t=t._init;try{return Jp(t(e))}catch{}}return null}function tk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jp(e);case 8:return e===Zg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ts(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nk(t){var e=mE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Pc(t){t._valueTracker||(t._valueTracker=nk(t))}function gE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=mE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ju(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Xp(t,e){var n=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ax(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ts(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function yE(t,e){e=e.checked,e!=null&&Yg(t,"checked",e,!1)}function Yp(t,e){yE(t,e);var n=Ts(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Zp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Zp(t,e.type,Ts(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function lx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Zp(t,e,n){(e!=="number"||ju(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Sa=Array.isArray;function lo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ts(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function em(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Sa(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ts(n)}}function vE(t,e){var n=Ts(e.value),r=Ts(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ux(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function xE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?xE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Nc,wE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Nc=Nc||document.createElement("div"),Nc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Nc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function tl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ja={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rk=["Webkit","ms","Moz","O"];Object.keys(ja).forEach(function(t){rk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ja[e]=ja[t]})});function _E(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ja.hasOwnProperty(t)&&ja[t]?(""+e).trim():e+"px"}function EE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=_E(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var sk=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nm(t,e){if(e){if(sk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function rm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sm=null;function ny(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var im=null,co=null,uo=null;function dx(t){if(t=Kl(t)){if(typeof im!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Qd(e),im(t.stateNode,t.type,e))}}function SE(t){co?uo?uo.push(t):uo=[t]:co=t}function TE(){if(co){var t=co,e=uo;if(uo=co=null,dx(t),e)for(t=0;t<e.length;t++)dx(e[t])}}function bE(t,e){return t(e)}function IE(){}var kh=!1;function AE(t,e,n){if(kh)return t(e,n);kh=!0;try{return bE(t,e,n)}finally{kh=!1,(co!==null||uo!==null)&&(IE(),TE())}}function nl(t,e){var n=t.stateNode;if(n===null)return null;var r=Qd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var om=!1;if(jr)try{var da={};Object.defineProperty(da,"passive",{get:function(){om=!0}}),window.addEventListener("test",da,da),window.removeEventListener("test",da,da)}catch{om=!1}function ik(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Oa=!1,Ou=null,Lu=!1,am=null,ok={onError:function(t){Oa=!0,Ou=t}};function ak(t,e,n,r,s,i,o,a,l){Oa=!1,Ou=null,ik.apply(ok,arguments)}function lk(t,e,n,r,s,i,o,a,l){if(ak.apply(this,arguments),Oa){if(Oa){var c=Ou;Oa=!1,Ou=null}else throw Error(U(198));Lu||(Lu=!0,am=c)}}function Pi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function RE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fx(t){if(Pi(t)!==t)throw Error(U(188))}function ck(t){var e=t.alternate;if(!e){if(e=Pi(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return fx(s),t;if(i===r)return fx(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function CE(t){return t=ck(t),t!==null?kE(t):null}function kE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=kE(t);if(e!==null)return e;t=t.sibling}return null}var PE=gn.unstable_scheduleCallback,hx=gn.unstable_cancelCallback,uk=gn.unstable_shouldYield,dk=gn.unstable_requestPaint,Xe=gn.unstable_now,fk=gn.unstable_getCurrentPriorityLevel,ry=gn.unstable_ImmediatePriority,NE=gn.unstable_UserBlockingPriority,Du=gn.unstable_NormalPriority,hk=gn.unstable_LowPriority,jE=gn.unstable_IdlePriority,Hd=null,or=null;function pk(t){if(or&&typeof or.onCommitFiberRoot=="function")try{or.onCommitFiberRoot(Hd,t,void 0,(t.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:yk,mk=Math.log,gk=Math.LN2;function yk(t){return t>>>=0,t===0?32:31-(mk(t)/gk|0)|0}var jc=64,Oc=4194304;function Ta(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Mu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ta(a):(i&=o,i!==0&&(r=Ta(i)))}else o=n&~s,o!==0?r=Ta(o):i!==0&&(r=Ta(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zn(e),s=1<<n,r|=t[n],e&=~s;return r}function vk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-zn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=vk(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function lm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function OE(){var t=jc;return jc<<=1,!(jc&4194240)&&(jc=64),t}function Ph(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Hl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zn(e),t[e]=n}function wk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-zn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function sy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Te=0;function LE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var DE,iy,ME,$E,VE,cm=!1,Lc=[],cs=null,us=null,ds=null,rl=new Map,sl=new Map,Yr=[],_k="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function px(t,e){switch(t){case"focusin":case"focusout":cs=null;break;case"dragenter":case"dragleave":us=null;break;case"mouseover":case"mouseout":ds=null;break;case"pointerover":case"pointerout":rl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":sl.delete(e.pointerId)}}function fa(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Kl(e),e!==null&&iy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Ek(t,e,n,r,s){switch(e){case"focusin":return cs=fa(cs,t,e,n,r,s),!0;case"dragenter":return us=fa(us,t,e,n,r,s),!0;case"mouseover":return ds=fa(ds,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return rl.set(i,fa(rl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,sl.set(i,fa(sl.get(i)||null,t,e,n,r,s)),!0}return!1}function FE(t){var e=Xs(t.target);if(e!==null){var n=Pi(e);if(n!==null){if(e=n.tag,e===13){if(e=RE(n),e!==null){t.blockedOn=e,VE(t.priority,function(){ME(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=um(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);sm=r,n.target.dispatchEvent(r),sm=null}else return e=Kl(n),e!==null&&iy(e),t.blockedOn=n,!1;e.shift()}return!0}function mx(t,e,n){lu(t)&&n.delete(e)}function Sk(){cm=!1,cs!==null&&lu(cs)&&(cs=null),us!==null&&lu(us)&&(us=null),ds!==null&&lu(ds)&&(ds=null),rl.forEach(mx),sl.forEach(mx)}function ha(t,e){t.blockedOn===e&&(t.blockedOn=null,cm||(cm=!0,gn.unstable_scheduleCallback(gn.unstable_NormalPriority,Sk)))}function il(t){function e(s){return ha(s,t)}if(0<Lc.length){ha(Lc[0],t);for(var n=1;n<Lc.length;n++){var r=Lc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(cs!==null&&ha(cs,t),us!==null&&ha(us,t),ds!==null&&ha(ds,t),rl.forEach(e),sl.forEach(e),n=0;n<Yr.length;n++)r=Yr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Yr.length&&(n=Yr[0],n.blockedOn===null);)FE(n),n.blockedOn===null&&Yr.shift()}var fo=Wr.ReactCurrentBatchConfig,$u=!0;function Tk(t,e,n,r){var s=Te,i=fo.transition;fo.transition=null;try{Te=1,oy(t,e,n,r)}finally{Te=s,fo.transition=i}}function bk(t,e,n,r){var s=Te,i=fo.transition;fo.transition=null;try{Te=4,oy(t,e,n,r)}finally{Te=s,fo.transition=i}}function oy(t,e,n,r){if($u){var s=um(t,e,n,r);if(s===null)Uh(t,e,r,Vu,n),px(t,r);else if(Ek(s,t,e,n,r))r.stopPropagation();else if(px(t,r),e&4&&-1<_k.indexOf(t)){for(;s!==null;){var i=Kl(s);if(i!==null&&DE(i),i=um(t,e,n,r),i===null&&Uh(t,e,r,Vu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Uh(t,e,r,null,n)}}var Vu=null;function um(t,e,n,r){if(Vu=null,t=ny(r),t=Xs(t),t!==null)if(e=Pi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=RE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vu=t,null}function UE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fk()){case ry:return 1;case NE:return 4;case Du:case hk:return 16;case jE:return 536870912;default:return 16}default:return 16}}var is=null,ay=null,cu=null;function BE(){if(cu)return cu;var t,e=ay,n=e.length,r,s="value"in is?is.value:is.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return cu=s.slice(t,1<r?1-r:void 0)}function uu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Dc(){return!0}function gx(){return!1}function _n(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Dc:gx,this.isPropagationStopped=gx,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Dc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Dc)},persist:function(){},isPersistent:Dc}),e}var Ko={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ly=_n(Ko),ql=Be({},Ko,{view:0,detail:0}),Ik=_n(ql),Nh,jh,pa,qd=Be({},ql,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pa&&(pa&&t.type==="mousemove"?(Nh=t.screenX-pa.screenX,jh=t.screenY-pa.screenY):jh=Nh=0,pa=t),Nh)},movementY:function(t){return"movementY"in t?t.movementY:jh}}),yx=_n(qd),Ak=Be({},qd,{dataTransfer:0}),Rk=_n(Ak),Ck=Be({},ql,{relatedTarget:0}),Oh=_n(Ck),kk=Be({},Ko,{animationName:0,elapsedTime:0,pseudoElement:0}),Pk=_n(kk),Nk=Be({},Ko,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jk=_n(Nk),Ok=Be({},Ko,{data:0}),vx=_n(Ok),Lk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $k(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Mk[t])?!!e[t]:!1}function cy(){return $k}var Vk=Be({},ql,{key:function(t){if(t.key){var e=Lk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=uu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Dk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cy,charCode:function(t){return t.type==="keypress"?uu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?uu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Fk=_n(Vk),Uk=Be({},qd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xx=_n(Uk),Bk=Be({},ql,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cy}),zk=_n(Bk),Wk=Be({},Ko,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hk=_n(Wk),qk=Be({},qd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Kk=_n(qk),Gk=[9,13,27,32],uy=jr&&"CompositionEvent"in window,La=null;jr&&"documentMode"in document&&(La=document.documentMode);var Qk=jr&&"TextEvent"in window&&!La,zE=jr&&(!uy||La&&8<La&&11>=La),wx=String.fromCharCode(32),_x=!1;function WE(t,e){switch(t){case"keyup":return Gk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ji=!1;function Jk(t,e){switch(t){case"compositionend":return HE(e);case"keypress":return e.which!==32?null:(_x=!0,wx);case"textInput":return t=e.data,t===wx&&_x?null:t;default:return null}}function Xk(t,e){if(Ji)return t==="compositionend"||!uy&&WE(t,e)?(t=BE(),cu=ay=is=null,Ji=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zE&&e.locale!=="ko"?null:e.data;default:return null}}var Yk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ex(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Yk[t.type]:e==="textarea"}function qE(t,e,n,r){SE(r),e=Fu(e,"onChange"),0<e.length&&(n=new ly("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Da=null,ol=null;function Zk(t){rS(t,0)}function Kd(t){var e=Zi(t);if(gE(e))return t}function eP(t,e){if(t==="change")return e}var KE=!1;if(jr){var Lh;if(jr){var Dh="oninput"in document;if(!Dh){var Sx=document.createElement("div");Sx.setAttribute("oninput","return;"),Dh=typeof Sx.oninput=="function"}Lh=Dh}else Lh=!1;KE=Lh&&(!document.documentMode||9<document.documentMode)}function Tx(){Da&&(Da.detachEvent("onpropertychange",GE),ol=Da=null)}function GE(t){if(t.propertyName==="value"&&Kd(ol)){var e=[];qE(e,ol,t,ny(t)),AE(Zk,e)}}function tP(t,e,n){t==="focusin"?(Tx(),Da=e,ol=n,Da.attachEvent("onpropertychange",GE)):t==="focusout"&&Tx()}function nP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Kd(ol)}function rP(t,e){if(t==="click")return Kd(e)}function sP(t,e){if(t==="input"||t==="change")return Kd(e)}function iP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hn=typeof Object.is=="function"?Object.is:iP;function al(t,e){if(Hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!qp.call(e,s)||!Hn(t[s],e[s]))return!1}return!0}function bx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ix(t,e){var n=bx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bx(n)}}function QE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?QE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function JE(){for(var t=window,e=ju();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ju(t.document)}return e}function dy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function oP(t){var e=JE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&QE(n.ownerDocument.documentElement,n)){if(r!==null&&dy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ix(n,i);var o=Ix(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var aP=jr&&"documentMode"in document&&11>=document.documentMode,Xi=null,dm=null,Ma=null,fm=!1;function Ax(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fm||Xi==null||Xi!==ju(r)||(r=Xi,"selectionStart"in r&&dy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ma&&al(Ma,r)||(Ma=r,r=Fu(dm,"onSelect"),0<r.length&&(e=new ly("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xi)))}function Mc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yi={animationend:Mc("Animation","AnimationEnd"),animationiteration:Mc("Animation","AnimationIteration"),animationstart:Mc("Animation","AnimationStart"),transitionend:Mc("Transition","TransitionEnd")},Mh={},XE={};jr&&(XE=document.createElement("div").style,"AnimationEvent"in window||(delete Yi.animationend.animation,delete Yi.animationiteration.animation,delete Yi.animationstart.animation),"TransitionEvent"in window||delete Yi.transitionend.transition);function Gd(t){if(Mh[t])return Mh[t];if(!Yi[t])return t;var e=Yi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in XE)return Mh[t]=e[n];return t}var YE=Gd("animationend"),ZE=Gd("animationiteration"),eS=Gd("animationstart"),tS=Gd("transitionend"),nS=new Map,Rx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ls(t,e){nS.set(t,e),ki(e,[t])}for(var $h=0;$h<Rx.length;$h++){var Vh=Rx[$h],lP=Vh.toLowerCase(),cP=Vh[0].toUpperCase()+Vh.slice(1);Ls(lP,"on"+cP)}Ls(YE,"onAnimationEnd");Ls(ZE,"onAnimationIteration");Ls(eS,"onAnimationStart");Ls("dblclick","onDoubleClick");Ls("focusin","onFocus");Ls("focusout","onBlur");Ls(tS,"onTransitionEnd");To("onMouseEnter",["mouseout","mouseover"]);To("onMouseLeave",["mouseout","mouseover"]);To("onPointerEnter",["pointerout","pointerover"]);To("onPointerLeave",["pointerout","pointerover"]);ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ki("onBeforeInput",["compositionend","keypress","textInput","paste"]);ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uP=new Set("cancel close invalid load scroll toggle".split(" ").concat(ba));function Cx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,lk(r,e,void 0,t),t.currentTarget=null}function rS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Cx(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Cx(s,a,c),i=l}}}if(Lu)throw t=am,Lu=!1,am=null,t}function Ne(t,e){var n=e[ym];n===void 0&&(n=e[ym]=new Set);var r=t+"__bubble";n.has(r)||(sS(e,t,2,!1),n.add(r))}function Fh(t,e,n){var r=0;e&&(r|=4),sS(n,t,r,e)}var $c="_reactListening"+Math.random().toString(36).slice(2);function ll(t){if(!t[$c]){t[$c]=!0,dE.forEach(function(n){n!=="selectionchange"&&(uP.has(n)||Fh(n,!1,t),Fh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$c]||(e[$c]=!0,Fh("selectionchange",!1,e))}}function sS(t,e,n,r){switch(UE(e)){case 1:var s=Tk;break;case 4:s=bk;break;default:s=oy}n=s.bind(null,e,n,t),s=void 0,!om||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Uh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Xs(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}AE(function(){var c=i,d=ny(n),h=[];e:{var p=nS.get(t);if(p!==void 0){var m=ly,y=t;switch(t){case"keypress":if(uu(n)===0)break e;case"keydown":case"keyup":m=Fk;break;case"focusin":y="focus",m=Oh;break;case"focusout":y="blur",m=Oh;break;case"beforeblur":case"afterblur":m=Oh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=yx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Rk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=zk;break;case YE:case ZE:case eS:m=Pk;break;case tS:m=Hk;break;case"scroll":m=Ik;break;case"wheel":m=Kk;break;case"copy":case"cut":case"paste":m=jk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=xx}var v=(e&4)!==0,_=!v&&t==="scroll",x=v?p!==null?p+"Capture":null:p;v=[];for(var g=c,w;g!==null;){w=g;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,x!==null&&(E=nl(g,x),E!=null&&v.push(cl(g,E,w)))),_)break;g=g.return}0<v.length&&(p=new m(p,y,null,n,d),h.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==sm&&(y=n.relatedTarget||n.fromElement)&&(Xs(y)||y[Or]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=c,y=y?Xs(y):null,y!==null&&(_=Pi(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(v=yx,E="onMouseLeave",x="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=xx,E="onPointerLeave",x="onPointerEnter",g="pointer"),_=m==null?p:Zi(m),w=y==null?p:Zi(y),p=new v(E,g+"leave",m,n,d),p.target=_,p.relatedTarget=w,E=null,Xs(d)===c&&(v=new v(x,g+"enter",y,n,d),v.target=w,v.relatedTarget=_,E=v),_=E,m&&y)t:{for(v=m,x=y,g=0,w=v;w;w=Fi(w))g++;for(w=0,E=x;E;E=Fi(E))w++;for(;0<g-w;)v=Fi(v),g--;for(;0<w-g;)x=Fi(x),w--;for(;g--;){if(v===x||x!==null&&v===x.alternate)break t;v=Fi(v),x=Fi(x)}v=null}else v=null;m!==null&&kx(h,p,m,v,!1),y!==null&&_!==null&&kx(h,_,y,v,!0)}}e:{if(p=c?Zi(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var T=eP;else if(Ex(p))if(KE)T=sP;else{T=nP;var S=tP}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(T=rP);if(T&&(T=T(t,c))){qE(h,T,n,d);break e}S&&S(t,p,c),t==="focusout"&&(S=p._wrapperState)&&S.controlled&&p.type==="number"&&Zp(p,"number",p.value)}switch(S=c?Zi(c):window,t){case"focusin":(Ex(S)||S.contentEditable==="true")&&(Xi=S,dm=c,Ma=null);break;case"focusout":Ma=dm=Xi=null;break;case"mousedown":fm=!0;break;case"contextmenu":case"mouseup":case"dragend":fm=!1,Ax(h,n,d);break;case"selectionchange":if(aP)break;case"keydown":case"keyup":Ax(h,n,d)}var I;if(uy)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ji?WE(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(zE&&n.locale!=="ko"&&(Ji||b!=="onCompositionStart"?b==="onCompositionEnd"&&Ji&&(I=BE()):(is=d,ay="value"in is?is.value:is.textContent,Ji=!0)),S=Fu(c,b),0<S.length&&(b=new vx(b,t,null,n,d),h.push({event:b,listeners:S}),I?b.data=I:(I=HE(n),I!==null&&(b.data=I)))),(I=Qk?Jk(t,n):Xk(t,n))&&(c=Fu(c,"onBeforeInput"),0<c.length&&(d=new vx("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=I))}rS(h,e)})}function cl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=nl(t,n),i!=null&&r.unshift(cl(t,i,s)),i=nl(t,e),i!=null&&r.push(cl(t,i,s))),t=t.return}return r}function Fi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kx(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=nl(n,i),l!=null&&o.unshift(cl(n,l,a))):s||(l=nl(n,i),l!=null&&o.push(cl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var dP=/\r\n?/g,fP=/\u0000|\uFFFD/g;function Px(t){return(typeof t=="string"?t:""+t).replace(dP,`
`).replace(fP,"")}function Vc(t,e,n){if(e=Px(e),Px(t)!==e&&n)throw Error(U(425))}function Uu(){}var hm=null,pm=null;function mm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gm=typeof setTimeout=="function"?setTimeout:void 0,hP=typeof clearTimeout=="function"?clearTimeout:void 0,Nx=typeof Promise=="function"?Promise:void 0,pP=typeof queueMicrotask=="function"?queueMicrotask:typeof Nx<"u"?function(t){return Nx.resolve(null).then(t).catch(mP)}:gm;function mP(t){setTimeout(function(){throw t})}function Bh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),il(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);il(e)}function fs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Go=Math.random().toString(36).slice(2),Jn="__reactFiber$"+Go,ul="__reactProps$"+Go,Or="__reactContainer$"+Go,ym="__reactEvents$"+Go,gP="__reactListeners$"+Go,yP="__reactHandles$"+Go;function Xs(t){var e=t[Jn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Or]||n[Jn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=jx(t);t!==null;){if(n=t[Jn])return n;t=jx(t)}return e}t=n,n=t.parentNode}return null}function Kl(t){return t=t[Jn]||t[Or],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Zi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Qd(t){return t[ul]||null}var vm=[],eo=-1;function Ds(t){return{current:t}}function Le(t){0>eo||(t.current=vm[eo],vm[eo]=null,eo--)}function Pe(t,e){eo++,vm[eo]=t.current,t.current=e}var bs={},Bt=Ds(bs),on=Ds(!1),ui=bs;function bo(t,e){var n=t.type.contextTypes;if(!n)return bs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function an(t){return t=t.childContextTypes,t!=null}function Bu(){Le(on),Le(Bt)}function Ox(t,e,n){if(Bt.current!==bs)throw Error(U(168));Pe(Bt,e),Pe(on,n)}function iS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,tk(t)||"Unknown",s));return Be({},n,r)}function zu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bs,ui=Bt.current,Pe(Bt,t),Pe(on,on.current),!0}function Lx(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=iS(t,e,ui),r.__reactInternalMemoizedMergedChildContext=t,Le(on),Le(Bt),Pe(Bt,t)):Le(on),Pe(on,n)}var Tr=null,Jd=!1,zh=!1;function oS(t){Tr===null?Tr=[t]:Tr.push(t)}function vP(t){Jd=!0,oS(t)}function Ms(){if(!zh&&Tr!==null){zh=!0;var t=0,e=Te;try{var n=Tr;for(Te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Tr=null,Jd=!1}catch(s){throw Tr!==null&&(Tr=Tr.slice(t+1)),PE(ry,Ms),s}finally{Te=e,zh=!1}}return null}var to=[],no=0,Wu=null,Hu=0,In=[],An=0,di=null,br=1,Ir="";function Hs(t,e){to[no++]=Hu,to[no++]=Wu,Wu=t,Hu=e}function aS(t,e,n){In[An++]=br,In[An++]=Ir,In[An++]=di,di=t;var r=br;t=Ir;var s=32-zn(r)-1;r&=~(1<<s),n+=1;var i=32-zn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,br=1<<32-zn(e)+s|n<<s|r,Ir=i+t}else br=1<<i|n<<s|r,Ir=t}function fy(t){t.return!==null&&(Hs(t,1),aS(t,1,0))}function hy(t){for(;t===Wu;)Wu=to[--no],to[no]=null,Hu=to[--no],to[no]=null;for(;t===di;)di=In[--An],In[An]=null,Ir=In[--An],In[An]=null,br=In[--An],In[An]=null}var pn=null,fn=null,$e=!1,Fn=null;function lS(t,e){var n=kn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Dx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,pn=t,fn=fs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,pn=t,fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=di!==null?{id:br,overflow:Ir}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=kn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,pn=t,fn=null,!0):!1;default:return!1}}function xm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wm(t){if($e){var e=fn;if(e){var n=e;if(!Dx(t,e)){if(xm(t))throw Error(U(418));e=fs(n.nextSibling);var r=pn;e&&Dx(t,e)?lS(r,n):(t.flags=t.flags&-4097|2,$e=!1,pn=t)}}else{if(xm(t))throw Error(U(418));t.flags=t.flags&-4097|2,$e=!1,pn=t}}}function Mx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pn=t}function Fc(t){if(t!==pn)return!1;if(!$e)return Mx(t),$e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!mm(t.type,t.memoizedProps)),e&&(e=fn)){if(xm(t))throw cS(),Error(U(418));for(;e;)lS(t,e),e=fs(e.nextSibling)}if(Mx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){fn=fs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}fn=null}}else fn=pn?fs(t.stateNode.nextSibling):null;return!0}function cS(){for(var t=fn;t;)t=fs(t.nextSibling)}function Io(){fn=pn=null,$e=!1}function py(t){Fn===null?Fn=[t]:Fn.push(t)}var xP=Wr.ReactCurrentBatchConfig;function $n(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var qu=Ds(null),Ku=null,ro=null,my=null;function gy(){my=ro=Ku=null}function yy(t){var e=qu.current;Le(qu),t._currentValue=e}function _m(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ho(t,e){Ku=t,my=ro=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(sn=!0),t.firstContext=null)}function jn(t){var e=t._currentValue;if(my!==t)if(t={context:t,memoizedValue:e,next:null},ro===null){if(Ku===null)throw Error(U(308));ro=t,Ku.dependencies={lanes:0,firstContext:t}}else ro=ro.next=t;return e}var Ys=null;function vy(t){Ys===null?Ys=[t]:Ys.push(t)}function uS(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,vy(e)):(n.next=s.next,s.next=n),e.interleaved=n,Lr(t,r)}function Lr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xr=!1;function xy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function kr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Lr(t,n)}return s=r.interleaved,s===null?(e.next=e,vy(r)):(e.next=s.next,s.next=e),r.interleaved=e,Lr(t,n)}function du(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sy(t,n)}}function $x(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Gu(t,e,n,r){var s=t.updateQueue;Xr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,v=a;switch(p=e,m=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){h=y.call(m,h,p);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,p=typeof y=="function"?y.call(m,h,p):y,p==null)break e;h=Be({},h,p);break e;case 2:Xr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(1);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);hi|=o,t.lanes=o,t.memoizedState=h}}function Vx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var fS=new uE.Component().refs;function Em(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Xd={isMounted:function(t){return(t=t._reactInternals)?Pi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Qt(),s=ms(t),i=kr(r,s);i.payload=e,n!=null&&(i.callback=n),e=hs(t,i,s),e!==null&&(Wn(e,t,s,r),du(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Qt(),s=ms(t),i=kr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=hs(t,i,s),e!==null&&(Wn(e,t,s,r),du(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Qt(),r=ms(t),s=kr(n,r);s.tag=2,e!=null&&(s.callback=e),e=hs(t,s,r),e!==null&&(Wn(e,t,r,n),du(e,t,r))}};function Fx(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!al(n,r)||!al(s,i):!0}function hS(t,e,n){var r=!1,s=bs,i=e.contextType;return typeof i=="object"&&i!==null?i=jn(i):(s=an(e)?ui:Bt.current,r=e.contextTypes,i=(r=r!=null)?bo(t,s):bs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ux(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Xd.enqueueReplaceState(e,e.state,null)}function Sm(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=fS,xy(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=jn(i):(i=an(e)?ui:Bt.current,s.context=bo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Em(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Xd.enqueueReplaceState(s,s.state,null),Gu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ma(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===fS&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Uc(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bx(t){var e=t._init;return e(t._payload)}function pS(t){function e(x,g){if(t){var w=x.deletions;w===null?(x.deletions=[g],x.flags|=16):w.push(g)}}function n(x,g){if(!t)return null;for(;g!==null;)e(x,g),g=g.sibling;return null}function r(x,g){for(x=new Map;g!==null;)g.key!==null?x.set(g.key,g):x.set(g.index,g),g=g.sibling;return x}function s(x,g){return x=gs(x,g),x.index=0,x.sibling=null,x}function i(x,g,w){return x.index=w,t?(w=x.alternate,w!==null?(w=w.index,w<g?(x.flags|=2,g):w):(x.flags|=2,g)):(x.flags|=1048576,g)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,g,w,E){return g===null||g.tag!==6?(g=Jh(w,x.mode,E),g.return=x,g):(g=s(g,w),g.return=x,g)}function l(x,g,w,E){var T=w.type;return T===Qi?d(x,g,w.props.children,E,w.key):g!==null&&(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Jr&&Bx(T)===g.type)?(E=s(g,w.props),E.ref=ma(x,g,w),E.return=x,E):(E=yu(w.type,w.key,w.props,null,x.mode,E),E.ref=ma(x,g,w),E.return=x,E)}function c(x,g,w,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=Xh(w,x.mode,E),g.return=x,g):(g=s(g,w.children||[]),g.return=x,g)}function d(x,g,w,E,T){return g===null||g.tag!==7?(g=ii(w,x.mode,E,T),g.return=x,g):(g=s(g,w),g.return=x,g)}function h(x,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Jh(""+g,x.mode,w),g.return=x,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case kc:return w=yu(g.type,g.key,g.props,null,x.mode,w),w.ref=ma(x,null,g),w.return=x,w;case Gi:return g=Xh(g,x.mode,w),g.return=x,g;case Jr:var E=g._init;return h(x,E(g._payload),w)}if(Sa(g)||ua(g))return g=ii(g,x.mode,w,null),g.return=x,g;Uc(x,g)}return null}function p(x,g,w,E){var T=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return T!==null?null:a(x,g,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case kc:return w.key===T?l(x,g,w,E):null;case Gi:return w.key===T?c(x,g,w,E):null;case Jr:return T=w._init,p(x,g,T(w._payload),E)}if(Sa(w)||ua(w))return T!==null?null:d(x,g,w,E,null);Uc(x,w)}return null}function m(x,g,w,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return x=x.get(w)||null,a(g,x,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case kc:return x=x.get(E.key===null?w:E.key)||null,l(g,x,E,T);case Gi:return x=x.get(E.key===null?w:E.key)||null,c(g,x,E,T);case Jr:var S=E._init;return m(x,g,w,S(E._payload),T)}if(Sa(E)||ua(E))return x=x.get(w)||null,d(g,x,E,T,null);Uc(g,E)}return null}function y(x,g,w,E){for(var T=null,S=null,I=g,b=g=0,A=null;I!==null&&b<w.length;b++){I.index>b?(A=I,I=null):A=I.sibling;var R=p(x,I,w[b],E);if(R===null){I===null&&(I=A);break}t&&I&&R.alternate===null&&e(x,I),g=i(R,g,b),S===null?T=R:S.sibling=R,S=R,I=A}if(b===w.length)return n(x,I),$e&&Hs(x,b),T;if(I===null){for(;b<w.length;b++)I=h(x,w[b],E),I!==null&&(g=i(I,g,b),S===null?T=I:S.sibling=I,S=I);return $e&&Hs(x,b),T}for(I=r(x,I);b<w.length;b++)A=m(I,x,b,w[b],E),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?b:A.key),g=i(A,g,b),S===null?T=A:S.sibling=A,S=A);return t&&I.forEach(function(k){return e(x,k)}),$e&&Hs(x,b),T}function v(x,g,w,E){var T=ua(w);if(typeof T!="function")throw Error(U(150));if(w=T.call(w),w==null)throw Error(U(151));for(var S=T=null,I=g,b=g=0,A=null,R=w.next();I!==null&&!R.done;b++,R=w.next()){I.index>b?(A=I,I=null):A=I.sibling;var k=p(x,I,R.value,E);if(k===null){I===null&&(I=A);break}t&&I&&k.alternate===null&&e(x,I),g=i(k,g,b),S===null?T=k:S.sibling=k,S=k,I=A}if(R.done)return n(x,I),$e&&Hs(x,b),T;if(I===null){for(;!R.done;b++,R=w.next())R=h(x,R.value,E),R!==null&&(g=i(R,g,b),S===null?T=R:S.sibling=R,S=R);return $e&&Hs(x,b),T}for(I=r(x,I);!R.done;b++,R=w.next())R=m(I,x,b,R.value,E),R!==null&&(t&&R.alternate!==null&&I.delete(R.key===null?b:R.key),g=i(R,g,b),S===null?T=R:S.sibling=R,S=R);return t&&I.forEach(function(V){return e(x,V)}),$e&&Hs(x,b),T}function _(x,g,w,E){if(typeof w=="object"&&w!==null&&w.type===Qi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case kc:e:{for(var T=w.key,S=g;S!==null;){if(S.key===T){if(T=w.type,T===Qi){if(S.tag===7){n(x,S.sibling),g=s(S,w.props.children),g.return=x,x=g;break e}}else if(S.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Jr&&Bx(T)===S.type){n(x,S.sibling),g=s(S,w.props),g.ref=ma(x,S,w),g.return=x,x=g;break e}n(x,S);break}else e(x,S);S=S.sibling}w.type===Qi?(g=ii(w.props.children,x.mode,E,w.key),g.return=x,x=g):(E=yu(w.type,w.key,w.props,null,x.mode,E),E.ref=ma(x,g,w),E.return=x,x=E)}return o(x);case Gi:e:{for(S=w.key;g!==null;){if(g.key===S)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(x,g.sibling),g=s(g,w.children||[]),g.return=x,x=g;break e}else{n(x,g);break}else e(x,g);g=g.sibling}g=Xh(w,x.mode,E),g.return=x,x=g}return o(x);case Jr:return S=w._init,_(x,g,S(w._payload),E)}if(Sa(w))return y(x,g,w,E);if(ua(w))return v(x,g,w,E);Uc(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(x,g.sibling),g=s(g,w),g.return=x,x=g):(n(x,g),g=Jh(w,x.mode,E),g.return=x,x=g),o(x)):n(x,g)}return _}var Ao=pS(!0),mS=pS(!1),Gl={},ar=Ds(Gl),dl=Ds(Gl),fl=Ds(Gl);function Zs(t){if(t===Gl)throw Error(U(174));return t}function wy(t,e){switch(Pe(fl,e),Pe(dl,t),Pe(ar,Gl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=tm(e,t)}Le(ar),Pe(ar,e)}function Ro(){Le(ar),Le(dl),Le(fl)}function gS(t){Zs(fl.current);var e=Zs(ar.current),n=tm(e,t.type);e!==n&&(Pe(dl,t),Pe(ar,n))}function _y(t){dl.current===t&&(Le(ar),Le(dl))}var Ve=Ds(0);function Qu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wh=[];function Ey(){for(var t=0;t<Wh.length;t++)Wh[t]._workInProgressVersionPrimary=null;Wh.length=0}var fu=Wr.ReactCurrentDispatcher,Hh=Wr.ReactCurrentBatchConfig,fi=0,Ue=null,ct=null,yt=null,Ju=!1,$a=!1,hl=0,wP=0;function kt(){throw Error(U(321))}function Sy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hn(t[n],e[n]))return!1;return!0}function Ty(t,e,n,r,s,i){if(fi=i,Ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fu.current=t===null||t.memoizedState===null?TP:bP,t=n(r,s),$a){i=0;do{if($a=!1,hl=0,25<=i)throw Error(U(301));i+=1,yt=ct=null,e.updateQueue=null,fu.current=IP,t=n(r,s)}while($a)}if(fu.current=Xu,e=ct!==null&&ct.next!==null,fi=0,yt=ct=Ue=null,Ju=!1,e)throw Error(U(300));return t}function by(){var t=hl!==0;return hl=0,t}function Qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Ue.memoizedState=yt=t:yt=yt.next=t,yt}function On(){if(ct===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var e=yt===null?Ue.memoizedState:yt.next;if(e!==null)yt=e,ct=t;else{if(t===null)throw Error(U(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},yt===null?Ue.memoizedState=yt=t:yt=yt.next=t}return yt}function pl(t,e){return typeof e=="function"?e(t):e}function qh(t){var e=On(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=ct,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((fi&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Ue.lanes|=d,hi|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Hn(r,e.memoizedState)||(sn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ue.lanes|=i,hi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Kh(t){var e=On(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Hn(i,e.memoizedState)||(sn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function yS(){}function vS(t,e){var n=Ue,r=On(),s=e(),i=!Hn(r.memoizedState,s);if(i&&(r.memoizedState=s,sn=!0),r=r.queue,Iy(_S.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,ml(9,wS.bind(null,n,r,s,e),void 0,null),vt===null)throw Error(U(349));fi&30||xS(n,e,s)}return s}function xS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function wS(t,e,n,r){e.value=n,e.getSnapshot=r,ES(e)&&SS(t)}function _S(t,e,n){return n(function(){ES(e)&&SS(t)})}function ES(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hn(t,n)}catch{return!0}}function SS(t){var e=Lr(t,1);e!==null&&Wn(e,t,1,-1)}function zx(t){var e=Qn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:t},e.queue=t,t=t.dispatch=SP.bind(null,Ue,t),[e.memoizedState,t]}function ml(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function TS(){return On().memoizedState}function hu(t,e,n,r){var s=Qn();Ue.flags|=t,s.memoizedState=ml(1|e,n,void 0,r===void 0?null:r)}function Yd(t,e,n,r){var s=On();r=r===void 0?null:r;var i=void 0;if(ct!==null){var o=ct.memoizedState;if(i=o.destroy,r!==null&&Sy(r,o.deps)){s.memoizedState=ml(e,n,i,r);return}}Ue.flags|=t,s.memoizedState=ml(1|e,n,i,r)}function Wx(t,e){return hu(8390656,8,t,e)}function Iy(t,e){return Yd(2048,8,t,e)}function bS(t,e){return Yd(4,2,t,e)}function IS(t,e){return Yd(4,4,t,e)}function AS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function RS(t,e,n){return n=n!=null?n.concat([t]):null,Yd(4,4,AS.bind(null,e,t),n)}function Ay(){}function CS(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Sy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function kS(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Sy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function PS(t,e,n){return fi&21?(Hn(n,e)||(n=OE(),Ue.lanes|=n,hi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,sn=!0),t.memoizedState=n)}function _P(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var r=Hh.transition;Hh.transition={};try{t(!1),e()}finally{Te=n,Hh.transition=r}}function NS(){return On().memoizedState}function EP(t,e,n){var r=ms(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jS(t))OS(e,n);else if(n=uS(t,e,n,r),n!==null){var s=Qt();Wn(n,t,r,s),LS(n,e,r)}}function SP(t,e,n){var r=ms(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jS(t))OS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Hn(a,o)){var l=e.interleaved;l===null?(s.next=s,vy(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=uS(t,e,s,r),n!==null&&(s=Qt(),Wn(n,t,r,s),LS(n,e,r))}}function jS(t){var e=t.alternate;return t===Ue||e!==null&&e===Ue}function OS(t,e){$a=Ju=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function LS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sy(t,n)}}var Xu={readContext:jn,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},TP={readContext:jn,useCallback:function(t,e){return Qn().memoizedState=[t,e===void 0?null:e],t},useContext:jn,useEffect:Wx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hu(4194308,4,AS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hu(4194308,4,t,e)},useInsertionEffect:function(t,e){return hu(4,2,t,e)},useMemo:function(t,e){var n=Qn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=EP.bind(null,Ue,t),[r.memoizedState,t]},useRef:function(t){var e=Qn();return t={current:t},e.memoizedState=t},useState:zx,useDebugValue:Ay,useDeferredValue:function(t){return Qn().memoizedState=t},useTransition:function(){var t=zx(!1),e=t[0];return t=_P.bind(null,t[1]),Qn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ue,s=Qn();if($e){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),vt===null)throw Error(U(349));fi&30||xS(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Wx(_S.bind(null,r,i,t),[t]),r.flags|=2048,ml(9,wS.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Qn(),e=vt.identifierPrefix;if($e){var n=Ir,r=br;n=(r&~(1<<32-zn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=hl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=wP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bP={readContext:jn,useCallback:CS,useContext:jn,useEffect:Iy,useImperativeHandle:RS,useInsertionEffect:bS,useLayoutEffect:IS,useMemo:kS,useReducer:qh,useRef:TS,useState:function(){return qh(pl)},useDebugValue:Ay,useDeferredValue:function(t){var e=On();return PS(e,ct.memoizedState,t)},useTransition:function(){var t=qh(pl)[0],e=On().memoizedState;return[t,e]},useMutableSource:yS,useSyncExternalStore:vS,useId:NS,unstable_isNewReconciler:!1},IP={readContext:jn,useCallback:CS,useContext:jn,useEffect:Iy,useImperativeHandle:RS,useInsertionEffect:bS,useLayoutEffect:IS,useMemo:kS,useReducer:Kh,useRef:TS,useState:function(){return Kh(pl)},useDebugValue:Ay,useDeferredValue:function(t){var e=On();return ct===null?e.memoizedState=t:PS(e,ct.memoizedState,t)},useTransition:function(){var t=Kh(pl)[0],e=On().memoizedState;return[t,e]},useMutableSource:yS,useSyncExternalStore:vS,useId:NS,unstable_isNewReconciler:!1};function Co(t,e){try{var n="",r=e;do n+=ek(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Gh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Tm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var AP=typeof WeakMap=="function"?WeakMap:Map;function DS(t,e,n){n=kr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Zu||(Zu=!0,Om=r),Tm(t,e)},n}function MS(t,e,n){n=kr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Tm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Tm(t,e),typeof r!="function"&&(ps===null?ps=new Set([this]):ps.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Hx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new AP;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=UP.bind(null,t,e,n),e.then(t,t))}function qx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Kx(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=kr(-1,1),e.tag=2,hs(n,e,1))),n.lanes|=1),t)}var RP=Wr.ReactCurrentOwner,sn=!1;function Kt(t,e,n,r){e.child=t===null?mS(e,null,n,r):Ao(e,t.child,n,r)}function Gx(t,e,n,r,s){n=n.render;var i=e.ref;return ho(e,s),r=Ty(t,e,n,r,i,s),n=by(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Dr(t,e,s)):($e&&n&&fy(e),e.flags|=1,Kt(t,e,r,s),e.child)}function Qx(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ly(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,$S(t,e,i,r,s)):(t=yu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:al,n(o,r)&&t.ref===e.ref)return Dr(t,e,s)}return e.flags|=1,t=gs(i,r),t.ref=e.ref,t.return=e,e.child=t}function $S(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(al(i,r)&&t.ref===e.ref)if(sn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(sn=!0);else return e.lanes=t.lanes,Dr(t,e,s)}return bm(t,e,n,r,s)}function VS(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(io,dn),dn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pe(io,dn),dn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Pe(io,dn),dn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Pe(io,dn),dn|=r;return Kt(t,e,s,n),e.child}function FS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function bm(t,e,n,r,s){var i=an(n)?ui:Bt.current;return i=bo(e,i),ho(e,s),n=Ty(t,e,n,r,i,s),r=by(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Dr(t,e,s)):($e&&r&&fy(e),e.flags|=1,Kt(t,e,n,s),e.child)}function Jx(t,e,n,r,s){if(an(n)){var i=!0;zu(e)}else i=!1;if(ho(e,s),e.stateNode===null)pu(t,e),hS(e,n,r),Sm(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=jn(c):(c=an(n)?ui:Bt.current,c=bo(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Ux(e,o,r,c),Xr=!1;var p=e.memoizedState;o.state=p,Gu(e,r,o,s),l=e.memoizedState,a!==r||p!==l||on.current||Xr?(typeof d=="function"&&(Em(e,n,d,r),l=e.memoizedState),(a=Xr||Fx(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,dS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:$n(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=jn(l):(l=an(n)?ui:Bt.current,l=bo(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&Ux(e,o,r,l),Xr=!1,p=e.memoizedState,o.state=p,Gu(e,r,o,s);var y=e.memoizedState;a!==h||p!==y||on.current||Xr?(typeof m=="function"&&(Em(e,n,m,r),y=e.memoizedState),(c=Xr||Fx(e,n,c,r,p,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Im(t,e,n,r,i,s)}function Im(t,e,n,r,s,i){FS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Lx(e,n,!1),Dr(t,e,i);r=e.stateNode,RP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ao(e,t.child,null,i),e.child=Ao(e,null,a,i)):Kt(t,e,a,i),e.memoizedState=r.state,s&&Lx(e,n,!0),e.child}function US(t){var e=t.stateNode;e.pendingContext?Ox(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ox(t,e.context,!1),wy(t,e.containerInfo)}function Xx(t,e,n,r,s){return Io(),py(s),e.flags|=256,Kt(t,e,n,r),e.child}var Am={dehydrated:null,treeContext:null,retryLane:0};function Rm(t){return{baseLanes:t,cachePool:null,transitions:null}}function BS(t,e,n){var r=e.pendingProps,s=Ve.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Pe(Ve,s&1),t===null)return wm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=tf(o,r,0,null),t=ii(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Rm(n),e.memoizedState=Am,t):Ry(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return CP(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=gs(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=gs(a,i):(i=ii(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Rm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Am,r}return i=t.child,t=i.sibling,r=gs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ry(t,e){return e=tf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Bc(t,e,n,r){return r!==null&&py(r),Ao(e,t.child,null,n),t=Ry(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function CP(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Gh(Error(U(422))),Bc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=tf({mode:"visible",children:r.children},s,0,null),i=ii(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ao(e,t.child,null,o),e.child.memoizedState=Rm(o),e.memoizedState=Am,i);if(!(e.mode&1))return Bc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(U(419)),r=Gh(i,r,void 0),Bc(t,e,o,r)}if(a=(o&t.childLanes)!==0,sn||a){if(r=vt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Lr(t,s),Wn(r,t,s,-1))}return Oy(),r=Gh(Error(U(421))),Bc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=BP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,fn=fs(s.nextSibling),pn=e,$e=!0,Fn=null,t!==null&&(In[An++]=br,In[An++]=Ir,In[An++]=di,br=t.id,Ir=t.overflow,di=e),e=Ry(e,r.children),e.flags|=4096,e)}function Yx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),_m(t.return,e,n)}function Qh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function zS(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Kt(t,e,r.children,n),r=Ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Yx(t,n,e);else if(t.tag===19)Yx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Pe(Ve,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Qu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Qh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Qu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Qh(e,!0,n,null,i);break;case"together":Qh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=gs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function kP(t,e,n){switch(e.tag){case 3:US(e),Io();break;case 5:gS(e);break;case 1:an(e.type)&&zu(e);break;case 4:wy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Pe(qu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pe(Ve,Ve.current&1),e.flags|=128,null):n&e.child.childLanes?BS(t,e,n):(Pe(Ve,Ve.current&1),t=Dr(t,e,n),t!==null?t.sibling:null);Pe(Ve,Ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return zS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Pe(Ve,Ve.current),r)break;return null;case 22:case 23:return e.lanes=0,VS(t,e,n)}return Dr(t,e,n)}var WS,Cm,HS,qS;WS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Cm=function(){};HS=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Zs(ar.current);var i=null;switch(n){case"input":s=Xp(t,s),r=Xp(t,r),i=[];break;case"select":s=Be({},s,{value:void 0}),r=Be({},r,{value:void 0}),i=[];break;case"textarea":s=em(t,s),r=em(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Uu)}nm(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(el.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(el.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ne("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};qS=function(t,e,n,r){n!==r&&(e.flags|=4)};function ga(t,e){if(!$e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function PP(t,e,n){var r=e.pendingProps;switch(hy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(e),null;case 1:return an(e.type)&&Bu(),Pt(e),null;case 3:return r=e.stateNode,Ro(),Le(on),Le(Bt),Ey(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Fc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fn!==null&&(Mm(Fn),Fn=null))),Cm(t,e),Pt(e),null;case 5:_y(e);var s=Zs(fl.current);if(n=e.type,t!==null&&e.stateNode!=null)HS(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return Pt(e),null}if(t=Zs(ar.current),Fc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Jn]=e,r[ul]=i,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(s=0;s<ba.length;s++)Ne(ba[s],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":ax(r,i),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ne("invalid",r);break;case"textarea":cx(r,i),Ne("invalid",r)}nm(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Vc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Vc(r.textContent,a,t),s=["children",""+a]):el.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":Pc(r),lx(r,i,!0);break;case"textarea":Pc(r),ux(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Uu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=xE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Jn]=e,t[ul]=r,WS(t,e,!1,!1),e.stateNode=t;e:{switch(o=rm(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),s=r;break;case"iframe":case"object":case"embed":Ne("load",t),s=r;break;case"video":case"audio":for(s=0;s<ba.length;s++)Ne(ba[s],t);s=r;break;case"source":Ne("error",t),s=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),s=r;break;case"details":Ne("toggle",t),s=r;break;case"input":ax(t,r),s=Xp(t,r),Ne("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Be({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":cx(t,r),s=em(t,r),Ne("invalid",t);break;default:s=r}nm(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?EE(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&wE(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&tl(t,l):typeof l=="number"&&tl(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(el.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ne("scroll",t):l!=null&&Yg(t,i,l,o))}switch(n){case"input":Pc(t),lx(t,r,!1);break;case"textarea":Pc(t),ux(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ts(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?lo(t,!!r.multiple,i,!1):r.defaultValue!=null&&lo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Uu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pt(e),null;case 6:if(t&&e.stateNode!=null)qS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Zs(fl.current),Zs(ar.current),Fc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Jn]=e,(i=r.nodeValue!==n)&&(t=pn,t!==null))switch(t.tag){case 3:Vc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Jn]=e,e.stateNode=r}return Pt(e),null;case 13:if(Le(Ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($e&&fn!==null&&e.mode&1&&!(e.flags&128))cS(),Io(),e.flags|=98560,i=!1;else if(i=Fc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[Jn]=e}else Io(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pt(e),i=!1}else Fn!==null&&(Mm(Fn),Fn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ve.current&1?ut===0&&(ut=3):Oy())),e.updateQueue!==null&&(e.flags|=4),Pt(e),null);case 4:return Ro(),Cm(t,e),t===null&&ll(e.stateNode.containerInfo),Pt(e),null;case 10:return yy(e.type._context),Pt(e),null;case 17:return an(e.type)&&Bu(),Pt(e),null;case 19:if(Le(Ve),i=e.memoizedState,i===null)return Pt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ga(i,!1);else{if(ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Qu(t),o!==null){for(e.flags|=128,ga(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pe(Ve,Ve.current&1|2),e.child}t=t.sibling}i.tail!==null&&Xe()>ko&&(e.flags|=128,r=!0,ga(i,!1),e.lanes=4194304)}else{if(!r)if(t=Qu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ga(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!$e)return Pt(e),null}else 2*Xe()-i.renderingStartTime>ko&&n!==1073741824&&(e.flags|=128,r=!0,ga(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Xe(),e.sibling=null,n=Ve.current,Pe(Ve,r?n&1|2:n&1),e):(Pt(e),null);case 22:case 23:return jy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?dn&1073741824&&(Pt(e),e.subtreeFlags&6&&(e.flags|=8192)):Pt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function NP(t,e){switch(hy(e),e.tag){case 1:return an(e.type)&&Bu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ro(),Le(on),Le(Bt),Ey(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _y(e),null;case 13:if(Le(Ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Io()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Le(Ve),null;case 4:return Ro(),null;case 10:return yy(e.type._context),null;case 22:case 23:return jy(),null;case 24:return null;default:return null}}var zc=!1,Lt=!1,jP=typeof WeakSet=="function"?WeakSet:Set,J=null;function so(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){We(t,e,r)}else n.current=null}function km(t,e,n){try{n()}catch(r){We(t,e,r)}}var Zx=!1;function OP(t,e){if(hm=$u,t=JE(),dy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(pm={focusedElem:t,selectionRange:n},$u=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,_=y.memoizedState,x=e.stateNode,g=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:$n(e.type,v),_);x.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(E){We(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return y=Zx,Zx=!1,y}function Va(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&km(e,n,i)}s=s.next}while(s!==r)}}function Zd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Pm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function KS(t){var e=t.alternate;e!==null&&(t.alternate=null,KS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Jn],delete e[ul],delete e[ym],delete e[gP],delete e[yP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function GS(t){return t.tag===5||t.tag===3||t.tag===4}function e1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||GS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Uu));else if(r!==4&&(t=t.child,t!==null))for(Nm(t,e,n),t=t.sibling;t!==null;)Nm(t,e,n),t=t.sibling}function jm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(jm(t,e,n),t=t.sibling;t!==null;)jm(t,e,n),t=t.sibling}var St=null,Vn=!1;function Kr(t,e,n){for(n=n.child;n!==null;)QS(t,e,n),n=n.sibling}function QS(t,e,n){if(or&&typeof or.onCommitFiberUnmount=="function")try{or.onCommitFiberUnmount(Hd,n)}catch{}switch(n.tag){case 5:Lt||so(n,e);case 6:var r=St,s=Vn;St=null,Kr(t,e,n),St=r,Vn=s,St!==null&&(Vn?(t=St,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):St.removeChild(n.stateNode));break;case 18:St!==null&&(Vn?(t=St,n=n.stateNode,t.nodeType===8?Bh(t.parentNode,n):t.nodeType===1&&Bh(t,n),il(t)):Bh(St,n.stateNode));break;case 4:r=St,s=Vn,St=n.stateNode.containerInfo,Vn=!0,Kr(t,e,n),St=r,Vn=s;break;case 0:case 11:case 14:case 15:if(!Lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&km(n,e,o),s=s.next}while(s!==r)}Kr(t,e,n);break;case 1:if(!Lt&&(so(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){We(n,e,a)}Kr(t,e,n);break;case 21:Kr(t,e,n);break;case 22:n.mode&1?(Lt=(r=Lt)||n.memoizedState!==null,Kr(t,e,n),Lt=r):Kr(t,e,n);break;default:Kr(t,e,n)}}function t1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jP),e.forEach(function(r){var s=zP.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Mn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:St=a.stateNode,Vn=!1;break e;case 3:St=a.stateNode.containerInfo,Vn=!0;break e;case 4:St=a.stateNode.containerInfo,Vn=!0;break e}a=a.return}if(St===null)throw Error(U(160));QS(i,o,s),St=null,Vn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){We(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)JS(e,t),e=e.sibling}function JS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mn(e,t),Gn(t),r&4){try{Va(3,t,t.return),Zd(3,t)}catch(v){We(t,t.return,v)}try{Va(5,t,t.return)}catch(v){We(t,t.return,v)}}break;case 1:Mn(e,t),Gn(t),r&512&&n!==null&&so(n,n.return);break;case 5:if(Mn(e,t),Gn(t),r&512&&n!==null&&so(n,n.return),t.flags&32){var s=t.stateNode;try{tl(s,"")}catch(v){We(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&yE(s,i),rm(a,o);var c=rm(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?EE(s,h):d==="dangerouslySetInnerHTML"?wE(s,h):d==="children"?tl(s,h):Yg(s,d,h,c)}switch(a){case"input":Yp(s,i);break;case"textarea":vE(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?lo(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?lo(s,!!i.multiple,i.defaultValue,!0):lo(s,!!i.multiple,i.multiple?[]:"",!1))}s[ul]=i}catch(v){We(t,t.return,v)}}break;case 6:if(Mn(e,t),Gn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){We(t,t.return,v)}}break;case 3:if(Mn(e,t),Gn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{il(e.containerInfo)}catch(v){We(t,t.return,v)}break;case 4:Mn(e,t),Gn(t);break;case 13:Mn(e,t),Gn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Py=Xe())),r&4&&t1(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Lt=(c=Lt)||d,Mn(e,t),Lt=c):Mn(e,t),Gn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(J=t,d=t.child;d!==null;){for(h=J=d;J!==null;){switch(p=J,m=p.child,p.tag){case 0:case 11:case 14:case 15:Va(4,p,p.return);break;case 1:so(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){We(r,n,v)}}break;case 5:so(p,p.return);break;case 22:if(p.memoizedState!==null){r1(h);continue}}m!==null?(m.return=p,J=m):r1(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=_E("display",o))}catch(v){We(t,t.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){We(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Mn(e,t),Gn(t),r&4&&t1(t);break;case 21:break;default:Mn(e,t),Gn(t)}}function Gn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(GS(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(tl(s,""),r.flags&=-33);var i=e1(t);jm(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=e1(t);Nm(t,a,o);break;default:throw Error(U(161))}}catch(l){We(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function LP(t,e,n){J=t,XS(t)}function XS(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var s=J,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||zc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Lt;a=zc;var c=Lt;if(zc=o,(Lt=l)&&!c)for(J=s;J!==null;)o=J,l=o.child,o.tag===22&&o.memoizedState!==null?s1(s):l!==null?(l.return=o,J=l):s1(s);for(;i!==null;)J=i,XS(i),i=i.sibling;J=s,zc=a,Lt=c}n1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,J=i):n1(t)}}function n1(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Lt||Zd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Lt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:$n(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Vx(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Vx(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&il(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Lt||e.flags&512&&Pm(e)}catch(p){We(e,e.return,p)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function r1(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function s1(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Zd(4,e)}catch(l){We(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){We(e,s,l)}}var i=e.return;try{Pm(e)}catch(l){We(e,i,l)}break;case 5:var o=e.return;try{Pm(e)}catch(l){We(e,o,l)}}}catch(l){We(e,e.return,l)}if(e===t){J=null;break}var a=e.sibling;if(a!==null){a.return=e.return,J=a;break}J=e.return}}var DP=Math.ceil,Yu=Wr.ReactCurrentDispatcher,Cy=Wr.ReactCurrentOwner,Pn=Wr.ReactCurrentBatchConfig,we=0,vt=null,rt=null,At=0,dn=0,io=Ds(0),ut=0,gl=null,hi=0,ef=0,ky=0,Fa=null,nn=null,Py=0,ko=1/0,Sr=null,Zu=!1,Om=null,ps=null,Wc=!1,os=null,ed=0,Ua=0,Lm=null,mu=-1,gu=0;function Qt(){return we&6?Xe():mu!==-1?mu:mu=Xe()}function ms(t){return t.mode&1?we&2&&At!==0?At&-At:xP.transition!==null?(gu===0&&(gu=OE()),gu):(t=Te,t!==0||(t=window.event,t=t===void 0?16:UE(t.type)),t):1}function Wn(t,e,n,r){if(50<Ua)throw Ua=0,Lm=null,Error(U(185));Hl(t,n,r),(!(we&2)||t!==vt)&&(t===vt&&(!(we&2)&&(ef|=n),ut===4&&Zr(t,At)),ln(t,r),n===1&&we===0&&!(e.mode&1)&&(ko=Xe()+500,Jd&&Ms()))}function ln(t,e){var n=t.callbackNode;xk(t,e);var r=Mu(t,t===vt?At:0);if(r===0)n!==null&&hx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&hx(n),e===1)t.tag===0?vP(i1.bind(null,t)):oS(i1.bind(null,t)),pP(function(){!(we&6)&&Ms()}),n=null;else{switch(LE(r)){case 1:n=ry;break;case 4:n=NE;break;case 16:n=Du;break;case 536870912:n=jE;break;default:n=Du}n=iT(n,YS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function YS(t,e){if(mu=-1,gu=0,we&6)throw Error(U(327));var n=t.callbackNode;if(po()&&t.callbackNode!==n)return null;var r=Mu(t,t===vt?At:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=td(t,r);else{e=r;var s=we;we|=2;var i=eT();(vt!==t||At!==e)&&(Sr=null,ko=Xe()+500,si(t,e));do try{VP();break}catch(a){ZS(t,a)}while(1);gy(),Yu.current=i,we=s,rt!==null?e=0:(vt=null,At=0,e=ut)}if(e!==0){if(e===2&&(s=lm(t),s!==0&&(r=s,e=Dm(t,s))),e===1)throw n=gl,si(t,0),Zr(t,r),ln(t,Xe()),n;if(e===6)Zr(t,r);else{if(s=t.current.alternate,!(r&30)&&!MP(s)&&(e=td(t,r),e===2&&(i=lm(t),i!==0&&(r=i,e=Dm(t,i))),e===1))throw n=gl,si(t,0),Zr(t,r),ln(t,Xe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:qs(t,nn,Sr);break;case 3:if(Zr(t,r),(r&130023424)===r&&(e=Py+500-Xe(),10<e)){if(Mu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Qt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=gm(qs.bind(null,t,nn,Sr),e);break}qs(t,nn,Sr);break;case 4:if(Zr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-zn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*DP(r/1960))-r,10<r){t.timeoutHandle=gm(qs.bind(null,t,nn,Sr),r);break}qs(t,nn,Sr);break;case 5:qs(t,nn,Sr);break;default:throw Error(U(329))}}}return ln(t,Xe()),t.callbackNode===n?YS.bind(null,t):null}function Dm(t,e){var n=Fa;return t.current.memoizedState.isDehydrated&&(si(t,e).flags|=256),t=td(t,e),t!==2&&(e=nn,nn=n,e!==null&&Mm(e)),t}function Mm(t){nn===null?nn=t:nn.push.apply(nn,t)}function MP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Hn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zr(t,e){for(e&=~ky,e&=~ef,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zn(e),r=1<<n;t[n]=-1,e&=~r}}function i1(t){if(we&6)throw Error(U(327));po();var e=Mu(t,0);if(!(e&1))return ln(t,Xe()),null;var n=td(t,e);if(t.tag!==0&&n===2){var r=lm(t);r!==0&&(e=r,n=Dm(t,r))}if(n===1)throw n=gl,si(t,0),Zr(t,e),ln(t,Xe()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,qs(t,nn,Sr),ln(t,Xe()),null}function Ny(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(ko=Xe()+500,Jd&&Ms())}}function pi(t){os!==null&&os.tag===0&&!(we&6)&&po();var e=we;we|=1;var n=Pn.transition,r=Te;try{if(Pn.transition=null,Te=1,t)return t()}finally{Te=r,Pn.transition=n,we=e,!(we&6)&&Ms()}}function jy(){dn=io.current,Le(io)}function si(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,hP(n)),rt!==null)for(n=rt.return;n!==null;){var r=n;switch(hy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Bu();break;case 3:Ro(),Le(on),Le(Bt),Ey();break;case 5:_y(r);break;case 4:Ro();break;case 13:Le(Ve);break;case 19:Le(Ve);break;case 10:yy(r.type._context);break;case 22:case 23:jy()}n=n.return}if(vt=t,rt=t=gs(t.current,null),At=dn=e,ut=0,gl=null,ky=ef=hi=0,nn=Fa=null,Ys!==null){for(e=0;e<Ys.length;e++)if(n=Ys[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ys=null}return t}function ZS(t,e){do{var n=rt;try{if(gy(),fu.current=Xu,Ju){for(var r=Ue.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ju=!1}if(fi=0,yt=ct=Ue=null,$a=!1,hl=0,Cy.current=null,n===null||n.return===null){ut=1,gl=e,rt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=At,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=qx(o);if(m!==null){m.flags&=-257,Kx(m,o,a,i,e),m.mode&1&&Hx(i,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){Hx(i,c,e),Oy();break e}l=Error(U(426))}}else if($e&&a.mode&1){var _=qx(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Kx(_,o,a,i,e),py(Co(l,a));break e}}i=l=Co(l,a),ut!==4&&(ut=2),Fa===null?Fa=[i]:Fa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=DS(i,l,e);$x(i,x);break e;case 1:a=l;var g=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ps===null||!ps.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=MS(i,a,e);$x(i,E);break e}}i=i.return}while(i!==null)}nT(n)}catch(T){e=T,rt===n&&n!==null&&(rt=n=n.return);continue}break}while(1)}function eT(){var t=Yu.current;return Yu.current=Xu,t===null?Xu:t}function Oy(){(ut===0||ut===3||ut===2)&&(ut=4),vt===null||!(hi&268435455)&&!(ef&268435455)||Zr(vt,At)}function td(t,e){var n=we;we|=2;var r=eT();(vt!==t||At!==e)&&(Sr=null,si(t,e));do try{$P();break}catch(s){ZS(t,s)}while(1);if(gy(),we=n,Yu.current=r,rt!==null)throw Error(U(261));return vt=null,At=0,ut}function $P(){for(;rt!==null;)tT(rt)}function VP(){for(;rt!==null&&!uk();)tT(rt)}function tT(t){var e=sT(t.alternate,t,dn);t.memoizedProps=t.pendingProps,e===null?nT(t):rt=e,Cy.current=null}function nT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=NP(n,e),n!==null){n.flags&=32767,rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ut=6,rt=null;return}}else if(n=PP(n,e,dn),n!==null){rt=n;return}if(e=e.sibling,e!==null){rt=e;return}rt=e=t}while(e!==null);ut===0&&(ut=5)}function qs(t,e,n){var r=Te,s=Pn.transition;try{Pn.transition=null,Te=1,FP(t,e,n,r)}finally{Pn.transition=s,Te=r}return null}function FP(t,e,n,r){do po();while(os!==null);if(we&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(wk(t,i),t===vt&&(rt=vt=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wc||(Wc=!0,iT(Du,function(){return po(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Pn.transition,Pn.transition=null;var o=Te;Te=1;var a=we;we|=4,Cy.current=null,OP(t,n),JS(n,t),oP(pm),$u=!!hm,pm=hm=null,t.current=n,LP(n),dk(),we=a,Te=o,Pn.transition=i}else t.current=n;if(Wc&&(Wc=!1,os=t,ed=s),i=t.pendingLanes,i===0&&(ps=null),pk(n.stateNode),ln(t,Xe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Zu)throw Zu=!1,t=Om,Om=null,t;return ed&1&&t.tag!==0&&po(),i=t.pendingLanes,i&1?t===Lm?Ua++:(Ua=0,Lm=t):Ua=0,Ms(),null}function po(){if(os!==null){var t=LE(ed),e=Pn.transition,n=Te;try{if(Pn.transition=null,Te=16>t?16:t,os===null)var r=!1;else{if(t=os,os=null,ed=0,we&6)throw Error(U(331));var s=we;for(we|=4,J=t.current;J!==null;){var i=J,o=i.child;if(J.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(J=c;J!==null;){var d=J;switch(d.tag){case 0:case 11:case 15:Va(8,d,i)}var h=d.child;if(h!==null)h.return=d,J=h;else for(;J!==null;){d=J;var p=d.sibling,m=d.return;if(KS(d),d===c){J=null;break}if(p!==null){p.return=m,J=p;break}J=m}}}var y=i.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}J=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,J=o;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Va(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,J=x;break e}J=i.return}}var g=t.current;for(J=g;J!==null;){o=J;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,J=w;else e:for(o=g;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Zd(9,a)}}catch(T){We(a,a.return,T)}if(a===o){J=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,J=E;break e}J=a.return}}if(we=s,Ms(),or&&typeof or.onPostCommitFiberRoot=="function")try{or.onPostCommitFiberRoot(Hd,t)}catch{}r=!0}return r}finally{Te=n,Pn.transition=e}}return!1}function o1(t,e,n){e=Co(n,e),e=DS(t,e,1),t=hs(t,e,1),e=Qt(),t!==null&&(Hl(t,1,e),ln(t,e))}function We(t,e,n){if(t.tag===3)o1(t,t,n);else for(;e!==null;){if(e.tag===3){o1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ps===null||!ps.has(r))){t=Co(n,t),t=MS(e,t,1),e=hs(e,t,1),t=Qt(),e!==null&&(Hl(e,1,t),ln(e,t));break}}e=e.return}}function UP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Qt(),t.pingedLanes|=t.suspendedLanes&n,vt===t&&(At&n)===n&&(ut===4||ut===3&&(At&130023424)===At&&500>Xe()-Py?si(t,0):ky|=n),ln(t,e)}function rT(t,e){e===0&&(t.mode&1?(e=Oc,Oc<<=1,!(Oc&130023424)&&(Oc=4194304)):e=1);var n=Qt();t=Lr(t,e),t!==null&&(Hl(t,e,n),ln(t,n))}function BP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),rT(t,n)}function zP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),rT(t,n)}var sT;sT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||on.current)sn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return sn=!1,kP(t,e,n);sn=!!(t.flags&131072)}else sn=!1,$e&&e.flags&1048576&&aS(e,Hu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pu(t,e),t=e.pendingProps;var s=bo(e,Bt.current);ho(e,n),s=Ty(null,e,r,t,s,n);var i=by();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,an(r)?(i=!0,zu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,xy(e),s.updater=Xd,e.stateNode=s,s._reactInternals=e,Sm(e,r,t,n),e=Im(null,e,r,!0,i,n)):(e.tag=0,$e&&i&&fy(e),Kt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(pu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=HP(r),t=$n(r,t),s){case 0:e=bm(null,e,r,t,n);break e;case 1:e=Jx(null,e,r,t,n);break e;case 11:e=Gx(null,e,r,t,n);break e;case 14:e=Qx(null,e,r,$n(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$n(r,s),bm(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$n(r,s),Jx(t,e,r,s,n);case 3:e:{if(US(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,dS(t,e),Gu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Co(Error(U(423)),e),e=Xx(t,e,r,n,s);break e}else if(r!==s){s=Co(Error(U(424)),e),e=Xx(t,e,r,n,s);break e}else for(fn=fs(e.stateNode.containerInfo.firstChild),pn=e,$e=!0,Fn=null,n=mS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Io(),r===s){e=Dr(t,e,n);break e}Kt(t,e,r,n)}e=e.child}return e;case 5:return gS(e),t===null&&wm(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,mm(r,s)?o=null:i!==null&&mm(r,i)&&(e.flags|=32),FS(t,e),Kt(t,e,o,n),e.child;case 6:return t===null&&wm(e),null;case 13:return BS(t,e,n);case 4:return wy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ao(e,null,r,n):Kt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$n(r,s),Gx(t,e,r,s,n);case 7:return Kt(t,e,e.pendingProps,n),e.child;case 8:return Kt(t,e,e.pendingProps.children,n),e.child;case 12:return Kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Pe(qu,r._currentValue),r._currentValue=o,i!==null)if(Hn(i.value,o)){if(i.children===s.children&&!on.current){e=Dr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=kr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),_m(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),_m(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Kt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ho(e,n),s=jn(s),r=r(s),e.flags|=1,Kt(t,e,r,n),e.child;case 14:return r=e.type,s=$n(r,e.pendingProps),s=$n(r.type,s),Qx(t,e,r,s,n);case 15:return $S(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$n(r,s),pu(t,e),e.tag=1,an(r)?(t=!0,zu(e)):t=!1,ho(e,n),hS(e,r,s),Sm(e,r,s,n),Im(null,e,r,!0,t,n);case 19:return zS(t,e,n);case 22:return VS(t,e,n)}throw Error(U(156,e.tag))};function iT(t,e){return PE(t,e)}function WP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(t,e,n,r){return new WP(t,e,n,r)}function Ly(t){return t=t.prototype,!(!t||!t.isReactComponent)}function HP(t){if(typeof t=="function")return Ly(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ey)return 11;if(t===ty)return 14}return 2}function gs(t,e){var n=t.alternate;return n===null?(n=kn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function yu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Ly(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Qi:return ii(n.children,s,i,e);case Zg:o=8,s|=8;break;case Kp:return t=kn(12,n,e,s|2),t.elementType=Kp,t.lanes=i,t;case Gp:return t=kn(13,n,e,s),t.elementType=Gp,t.lanes=i,t;case Qp:return t=kn(19,n,e,s),t.elementType=Qp,t.lanes=i,t;case pE:return tf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fE:o=10;break e;case hE:o=9;break e;case ey:o=11;break e;case ty:o=14;break e;case Jr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=kn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ii(t,e,n,r){return t=kn(7,t,r,e),t.lanes=n,t}function tf(t,e,n,r){return t=kn(22,t,r,e),t.elementType=pE,t.lanes=n,t.stateNode={isHidden:!1},t}function Jh(t,e,n){return t=kn(6,t,null,e),t.lanes=n,t}function Xh(t,e,n){return e=kn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qP(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ph(0),this.expirationTimes=Ph(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ph(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Dy(t,e,n,r,s,i,o,a,l){return t=new qP(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=kn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xy(i),t}function KP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function oT(t){if(!t)return bs;t=t._reactInternals;e:{if(Pi(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(an(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(an(n))return iS(t,n,e)}return e}function aT(t,e,n,r,s,i,o,a,l){return t=Dy(n,r,!0,t,s,i,o,a,l),t.context=oT(null),n=t.current,r=Qt(),s=ms(n),i=kr(r,s),i.callback=e??null,hs(n,i,s),t.current.lanes=s,Hl(t,s,r),ln(t,r),t}function nf(t,e,n,r){var s=e.current,i=Qt(),o=ms(s);return n=oT(n),e.context===null?e.context=n:e.pendingContext=n,e=kr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hs(s,e,o),t!==null&&(Wn(t,s,o,i),du(t,s,o)),o}function nd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function a1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function My(t,e){a1(t,e),(t=t.alternate)&&a1(t,e)}function GP(){return null}var lT=typeof reportError=="function"?reportError:function(t){console.error(t)};function $y(t){this._internalRoot=t}rf.prototype.render=$y.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));nf(t,e,null,null)};rf.prototype.unmount=$y.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;pi(function(){nf(null,t,null,null)}),e[Or]=null}};function rf(t){this._internalRoot=t}rf.prototype.unstable_scheduleHydration=function(t){if(t){var e=$E();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yr.length&&e!==0&&e<Yr[n].priority;n++);Yr.splice(n,0,t),n===0&&FE(t)}};function Vy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function l1(){}function QP(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=nd(o);i.call(c)}}var o=aT(e,r,t,0,null,!1,!1,"",l1);return t._reactRootContainer=o,t[Or]=o.current,ll(t.nodeType===8?t.parentNode:t),pi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=nd(l);a.call(c)}}var l=Dy(t,0,!1,null,null,!1,!1,"",l1);return t._reactRootContainer=l,t[Or]=l.current,ll(t.nodeType===8?t.parentNode:t),pi(function(){nf(e,l,n,r)}),l}function of(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=nd(o);a.call(l)}}nf(e,o,t,s)}else o=QP(n,e,t,s,r);return nd(o)}DE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ta(e.pendingLanes);n!==0&&(sy(e,n|1),ln(e,Xe()),!(we&6)&&(ko=Xe()+500,Ms()))}break;case 13:pi(function(){var r=Lr(t,1);if(r!==null){var s=Qt();Wn(r,t,1,s)}}),My(t,1)}};iy=function(t){if(t.tag===13){var e=Lr(t,134217728);if(e!==null){var n=Qt();Wn(e,t,134217728,n)}My(t,134217728)}};ME=function(t){if(t.tag===13){var e=ms(t),n=Lr(t,e);if(n!==null){var r=Qt();Wn(n,t,e,r)}My(t,e)}};$E=function(){return Te};VE=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};im=function(t,e,n){switch(e){case"input":if(Yp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Qd(r);if(!s)throw Error(U(90));gE(r),Yp(r,s)}}}break;case"textarea":vE(t,n);break;case"select":e=n.value,e!=null&&lo(t,!!n.multiple,e,!1)}};bE=Ny;IE=pi;var JP={usingClientEntryPoint:!1,Events:[Kl,Zi,Qd,SE,TE,Ny]},ya={findFiberByHostInstance:Xs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},XP={bundleType:ya.bundleType,version:ya.version,rendererPackageName:ya.rendererPackageName,rendererConfig:ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=CE(t),t===null?null:t.stateNode},findFiberByHostInstance:ya.findFiberByHostInstance||GP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{Hd=Hc.inject(XP),or=Hc}catch{}}wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JP;wn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vy(e))throw Error(U(200));return KP(t,e,null,n)};wn.createRoot=function(t,e){if(!Vy(t))throw Error(U(299));var n=!1,r="",s=lT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Dy(t,1,!1,null,null,n,!1,r,s),t[Or]=e.current,ll(t.nodeType===8?t.parentNode:t),new $y(e)};wn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=CE(e),t=t===null?null:t.stateNode,t};wn.flushSync=function(t){return pi(t)};wn.hydrate=function(t,e,n){if(!sf(e))throw Error(U(200));return of(null,t,e,!0,n)};wn.hydrateRoot=function(t,e,n){if(!Vy(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=lT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=aT(e,null,t,1,n??null,s,!1,i,o),t[Or]=e.current,ll(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new rf(e)};wn.render=function(t,e,n){if(!sf(e))throw Error(U(200));return of(null,t,e,!1,n)};wn.unmountComponentAtNode=function(t){if(!sf(t))throw Error(U(40));return t._reactRootContainer?(pi(function(){of(null,null,t,!1,function(){t._reactRootContainer=null,t[Or]=null})}),!0):!1};wn.unstable_batchedUpdates=Ny;wn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!sf(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return of(t,e,n,!1,r)};wn.version="18.2.0-next-9e3b772b8-20220608";function cT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cT)}catch(t){console.error(t)}}cT(),aE.exports=wn;var Qo=aE.exports,c1=Qo;Hp.createRoot=c1.createRoot,Hp.hydrateRoot=c1.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yl(){return yl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yl.apply(this,arguments)}var as;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(as||(as={}));const u1="popstate";function YP(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return $m("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:rd(s)}return eN(e,n,null,t)}function Ze(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Fy(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZP(){return Math.random().toString(36).substr(2,8)}function d1(t,e){return{usr:t.state,key:t.key,idx:e}}function $m(t,e,n,r){return n===void 0&&(n=null),yl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Jo(e):e,{state:n,key:e&&e.key||r||ZP()})}function rd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Jo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function eN(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=as.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(yl({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=as.Pop;let _=d(),x=_==null?null:_-c;c=_,l&&l({action:a,location:v.location,delta:x})}function p(_,x){a=as.Push;let g=$m(v.location,_,x);n&&n(g,_),c=d()+1;let w=d1(g,c),E=v.createHref(g);try{o.pushState(w,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(E)}i&&l&&l({action:a,location:v.location,delta:1})}function m(_,x){a=as.Replace;let g=$m(v.location,_,x);n&&n(g,_),c=d();let w=d1(g,c),E=v.createHref(g);o.replaceState(w,"",E),i&&l&&l({action:a,location:v.location,delta:0})}function y(_){let x=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof _=="string"?_:rd(_);return Ze(x,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,x)}let v={get action(){return a},get location(){return t(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(u1,h),l=_,()=>{s.removeEventListener(u1,h),l=null}},createHref(_){return e(s,_)},createURL:y,encodeLocation(_){let x=y(_);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:p,replace:m,go(_){return o.go(_)}};return v}var f1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(f1||(f1={}));function tN(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Jo(e):e,s=Uy(r.pathname||"/",n);if(s==null)return null;let i=uT(t);nN(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=dN(i[a],pN(s));return o}function uT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Ze(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ys([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Ze(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),uT(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:cN(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of dT(i.path))s(i,o,l)}),e}function dT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=dT(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function nN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:uN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const rN=/^:\w+$/,sN=3,iN=2,oN=1,aN=10,lN=-2,h1=t=>t==="*";function cN(t,e){let n=t.split("/"),r=n.length;return n.some(h1)&&(r+=lN),e&&(r+=iN),n.filter(s=>!h1(s)).reduce((s,i)=>s+(rN.test(i)?sN:i===""?oN:aN),r)}function uN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function dN(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=fN({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!d)return null;Object.assign(r,d.params);let h=a.route;i.push({params:r,pathname:ys([s,d.pathname]),pathnameBase:vN(ys([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=ys([s,d.pathnameBase]))}return i}function fN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=hN(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{if(d==="*"){let p=a[h]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}return c[d]=mN(a[h]||"",d),c},{}),pathname:i,pathnameBase:o,pattern:t}}function hN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Fy(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function pN(t){try{return decodeURI(t)}catch(e){return Fy(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function mN(t,e){try{return decodeURIComponent(t)}catch(n){return Fy(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Uy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function gN(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Jo(t):t;return{pathname:n?n.startsWith("/")?n:yN(n,e):e,search:xN(r),hash:wN(s)}}function yN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Yh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function By(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zy(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Jo(t):(s=yl({},t),Ze(!s.pathname||!s.pathname.includes("?"),Yh("?","pathname","search",s)),Ze(!s.pathname||!s.pathname.includes("#"),Yh("#","pathname","hash",s)),Ze(!s.search||!s.search.includes("#"),Yh("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(r||o==null)a=n;else{let h=e.length-1;if(o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=gN(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const ys=t=>t.join("/").replace(/\/\/+/g,"/"),vN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),xN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,wN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function _N(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const fT=["post","put","patch","delete"];new Set(fT);const EN=["get",...fT];new Set(EN);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sd(){return sd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sd.apply(this,arguments)}const Wy=f.createContext(null),SN=f.createContext(null),Xo=f.createContext(null),af=f.createContext(null),vr=f.createContext({outlet:null,matches:[],isDataRoute:!1}),hT=f.createContext(null);function TN(t,e){let{relative:n}=e===void 0?{}:e;Yo()||Ze(!1);let{basename:r,navigator:s}=f.useContext(Xo),{hash:i,pathname:o,search:a}=mT(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ys([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Yo(){return f.useContext(af)!=null}function En(){return Yo()||Ze(!1),f.useContext(af).location}function pT(t){f.useContext(Xo).static||f.useLayoutEffect(t)}function Zt(){let{isDataRoute:t}=f.useContext(vr);return t?VN():bN()}function bN(){Yo()||Ze(!1);let t=f.useContext(Wy),{basename:e,navigator:n}=f.useContext(Xo),{matches:r}=f.useContext(vr),{pathname:s}=En(),i=JSON.stringify(By(r).map(l=>l.pathnameBase)),o=f.useRef(!1);return pT(()=>{o.current=!0}),f.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=zy(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ys([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,i,s,t])}const IN=f.createContext(null);function AN(t){let e=f.useContext(vr).outlet;return e&&f.createElement(IN.Provider,{value:t},e)}function lf(){let{matches:t}=f.useContext(vr),e=t[t.length-1];return e?e.params:{}}function mT(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=f.useContext(vr),{pathname:s}=En(),i=JSON.stringify(By(r).map(o=>o.pathnameBase));return f.useMemo(()=>zy(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function RN(t,e){return CN(t,e)}function CN(t,e,n){Yo()||Ze(!1);let{navigator:r}=f.useContext(Xo),{matches:s}=f.useContext(vr),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let l=En(),c;if(e){var d;let v=typeof e=="string"?Jo(e):e;a==="/"||(d=v.pathname)!=null&&d.startsWith(a)||Ze(!1),c=v}else c=l;let h=c.pathname||"/",p=a==="/"?h:h.slice(a.length)||"/",m=tN(t,{pathname:p}),y=ON(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:ys([a,r.encodeLocation?r.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?a:ys([a,r.encodeLocation?r.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n);return e&&y?f.createElement(af.Provider,{value:{location:sd({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:as.Pop}},y):y}function kN(){let t=$N(),e=_N(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},e),n?f.createElement("pre",{style:s},n):null,i)}const PN=f.createElement(kN,null);class NN extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?f.createElement(vr.Provider,{value:this.props.routeContext},f.createElement(hT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jN(t){let{routeContext:e,match:n,children:r}=t,s=f.useContext(Wy);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(vr.Provider,{value:e},r)}function ON(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let i=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=i.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||Ze(!1),i=i.slice(0,Math.min(i.length,a+1))}return i.reduceRight((a,l,c)=>{let d=l.route.id?o==null?void 0:o[l.route.id]:null,h=null;n&&(h=l.route.errorElement||PN);let p=e.concat(i.slice(0,c+1)),m=()=>{let y;return d?y=h:l.route.Component?y=f.createElement(l.route.Component,null):l.route.element?y=l.route.element:y=a,f.createElement(jN,{match:l,routeContext:{outlet:a,matches:p,isDataRoute:n!=null},children:y})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?f.createElement(NN,{location:n.location,revalidation:n.revalidation,component:h,error:d,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var Vm;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(Vm||(Vm={}));var vl;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(vl||(vl={}));function LN(t){let e=f.useContext(Wy);return e||Ze(!1),e}function DN(t){let e=f.useContext(SN);return e||Ze(!1),e}function MN(t){let e=f.useContext(vr);return e||Ze(!1),e}function gT(t){let e=MN(),n=e.matches[e.matches.length-1];return n.route.id||Ze(!1),n.route.id}function $N(){var t;let e=f.useContext(hT),n=DN(vl.UseRouteError),r=gT(vl.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function VN(){let{router:t}=LN(Vm.UseNavigateStable),e=gT(vl.UseNavigateStable),n=f.useRef(!1);return pT(()=>{n.current=!0}),f.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,sd({fromRouteId:e},i)))},[t,e])}function FN(t){let{to:e,replace:n,state:r,relative:s}=t;Yo()||Ze(!1);let{matches:i}=f.useContext(vr),{pathname:o}=En(),a=Zt(),l=zy(e,By(i).map(d=>d.pathnameBase),o,s==="path"),c=JSON.stringify(l);return f.useEffect(()=>a(JSON.parse(c),{replace:n,state:r,relative:s}),[a,c,s,n,r]),null}function UN(t){return AN(t.context)}function Ks(t){Ze(!1)}function BN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=as.Pop,navigator:i,static:o=!1}=t;Yo()&&Ze(!1);let a=e.replace(/^\/*/,"/"),l=f.useMemo(()=>({basename:a,navigator:i,static:o}),[a,i,o]);typeof r=="string"&&(r=Jo(r));let{pathname:c="/",search:d="",hash:h="",state:p=null,key:m="default"}=r,y=f.useMemo(()=>{let v=Uy(c,a);return v==null?null:{location:{pathname:v,search:d,hash:h,state:p,key:m},navigationType:s}},[a,c,d,h,p,m,s]);return y==null?null:f.createElement(Xo.Provider,{value:l},f.createElement(af.Provider,{children:n,value:y}))}function zN(t){let{children:e,location:n}=t;return RN(Fm(e),n)}var p1;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(p1||(p1={}));new Promise(()=>{});function Fm(t,e){e===void 0&&(e=[]);let n=[];return f.Children.forEach(t,(r,s)=>{if(!f.isValidElement(r))return;let i=[...e,s];if(r.type===f.Fragment){n.push.apply(n,Fm(r.props.children,i));return}r.type!==Ks&&Ze(!1),!r.props.index||!r.props.children||Ze(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Fm(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Um(){return Um=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Um.apply(this,arguments)}function WN(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function HN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function qN(t,e){return t.button===0&&(!e||e==="_self")&&!HN(t)}const KN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],GN="startTransition",m1=Qg[GN];function QN(t){let{basename:e,children:n,future:r,window:s}=t,i=f.useRef();i.current==null&&(i.current=YP({window:s,v5Compat:!0}));let o=i.current,[a,l]=f.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=f.useCallback(h=>{c&&m1?m1(()=>l(h)):l(h)},[l,c]);return f.useLayoutEffect(()=>o.listen(d),[o,d]),f.createElement(BN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const JN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",XN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vs=f.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d}=e,h=WN(e,KN),{basename:p}=f.useContext(Xo),m,y=!1;if(typeof c=="string"&&XN.test(c)&&(m=c,JN))try{let g=new URL(window.location.href),w=c.startsWith("//")?new URL(g.protocol+c):new URL(c),E=Uy(w.pathname,p);w.origin===g.origin&&E!=null?c=E+w.search+w.hash:y=!0}catch{}let v=TN(c,{relative:s}),_=YN(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s});function x(g){r&&r(g),g.defaultPrevented||_(g)}return f.createElement("a",Um({},h,{href:m||v,onClick:y||i?r:x,ref:n,target:l}))});var g1;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(g1||(g1={}));var y1;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(y1||(y1={}));function YN(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o}=e===void 0?{}:e,a=Zt(),l=En(),c=mT(t,{relative:o});return f.useCallback(d=>{if(qN(d,n)){d.preventDefault();let h=r!==void 0?r:rd(l)===rd(c);a(t,{replace:h,state:s,preventScrollReset:i,relative:o})}},[l,a,c,r,s,n,t,i,o])}function yT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=yT(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function ZN(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=yT(t))&&(r&&(r+=" "),r+=e);return r}const v1=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,x1=ZN,vT=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return x1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const p=v1(d)||v1(h);return s[c][p]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,p]=d;return p===void 0||(c[h]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:p,...m}=d;return Object.entries(m).every(y=>{let[v,_]=y;return Array.isArray(_)?_.includes({...i,...a}[v]):{...i,...a}[v]===_})?[...c,h,p]:c},[]);return x1(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function ej({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const tj=f.forwardRef(ej),nj=tj;function rj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}))}const sj=f.forwardRef(rj),ij=sj;function oj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3"}))}const aj=f.forwardRef(oj),lj=aj;function cj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const uj=f.forwardRef(cj),Ln=uj;function dj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"}))}const fj=f.forwardRef(dj),xT=fj;function hj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19.5v-15m0 0l-6.75 6.75M12 4.5l6.75 6.75"}))}const pj=f.forwardRef(hj),mj=pj;function gj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"}))}const yj=f.forwardRef(gj),vj=yj;function xj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}))}const wj=f.forwardRef(xj),_j=wj;function Ej({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9.75L14.25 12m0 0l2.25 2.25M14.25 12l2.25-2.25M14.25 12L12 14.25m-2.58 4.92l-6.375-6.375a1.125 1.125 0 010-1.59L9.42 4.83c.211-.211.498-.33.796-.33H19.5a2.25 2.25 0 012.25 2.25v10.5a2.25 2.25 0 01-2.25 2.25h-9.284c-.298 0-.585-.119-.796-.33z"}))}const Sj=f.forwardRef(Ej),Tj=Sj;function bj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953l7.108-4.062A1.125 1.125 0 0121 8.688v8.123zM11.25 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953L9.567 7.71a1.125 1.125 0 011.683.977v8.123z"}))}const Ij=f.forwardRef(bj),Aj=Ij;function Rj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Cj=f.forwardRef(Rj),kj=Cj;function Pj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Nj=f.forwardRef(Pj),wT=Nj;function jj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))}const Oj=f.forwardRef(jj),Ba=Oj;function Lj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"}))}const Dj=f.forwardRef(Lj),Mj=Dj;function $j({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"}))}const Vj=f.forwardRef($j),Fj=Vj;function Uj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const Bj=f.forwardRef(Uj),_T=Bj;function zj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}const Wj=f.forwardRef(zj),Hy=Wj;function Hj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const qj=f.forwardRef(Hj),vu=qj;function Kj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"}))}const Gj=f.forwardRef(Kj),Qj=Gj;function Jj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Xj=f.forwardRef(Jj),ET=Xj;function Yj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const Zj=f.forwardRef(Yj),cf=Zj;function e5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25"}))}const t5=f.forwardRef(e5),n5=t5;function r5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const s5=f.forwardRef(r5),i5=s5;function o5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const a5=f.forwardRef(o5),l5=a5;function c5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))}const u5=f.forwardRef(c5),qy=u5;function d5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z"}))}const f5=f.forwardRef(d5),Bm=f5;function h5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const p5=f.forwardRef(h5),ST=p5;function m5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const g5=f.forwardRef(m5),y5=g5;function v5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const x5=f.forwardRef(v5),TT=x5;function w5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const _5=f.forwardRef(w5),E5=_5;function S5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"}))}const T5=f.forwardRef(S5),b5=T5;function I5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"}))}const A5=f.forwardRef(I5),Po=A5;function R5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}))}const C5=f.forwardRef(R5),bT=C5;function k5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const P5=f.forwardRef(k5),Ql=P5;function N5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))}const j5=f.forwardRef(N5),xl=j5;function O5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"}))}const L5=f.forwardRef(O5),Ky=L5;function D5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"}))}const M5=f.forwardRef(D5),$5=M5;function V5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const F5=f.forwardRef(V5),mi=F5;function U5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const B5=f.forwardRef(U5),z5=B5;function W5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"}))}const H5=f.forwardRef(W5),q5=H5;function K5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"}))}const G5=f.forwardRef(K5),uf=G5;function Q5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"}))}const J5=f.forwardRef(Q5),X5=J5;function Y5({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75L19.5 12m0 0l2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6l4.72-4.72a.75.75 0 011.28.531V19.94a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.506-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.395C2.806 8.757 3.63 8.25 4.51 8.25H6.75z"}))}const Z5=f.forwardRef(Y5),e4=Z5;function t4({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"}))}const n4=f.forwardRef(t4),No=n4;function r4({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const s4=f.forwardRef(r4),df=s4;function i4({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const o4=f.forwardRef(i4),a4=o4;function l4({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const c4=f.forwardRef(l4),er=c4,u4=vT("inline-flex items-center hover:brightness-90",{variants:{variant:{default:"",circle:"rounded-[99px] p-[4px] justify-center",list:"flex items-center py-[5px] w-full text-[14px]",primary:"px-[16px] py-[4px] text-[14px]",outline:"border rounded-full"},size:{half:"w-1/2",full:"w-full",small:"text-[13px] px-[10px] py-[3px]",normal:"text-[14px] px-[16px] py-[4px]",large:"h-[40px] w-[40px]"}},defaultVariants:{variant:"default"}}),K=({className:t,children:e,variant:n,size:r,isLoading:s,onClick:i,...o})=>u.jsxs("button",{type:"button",onClick:a=>i?i(a):"",...o,className:u4({variant:n,size:r,className:t}),disabled:s,children:[s?u.jsx(Ln,{className:"h-5 w-5 animate-spin"}):null,!s&&e]}),id=[{name:"Red",id:"red",type:"dark",bottom_player_bg:"bg-[#3b1113]",side_bar_bg:"bg-[#391b1c]",content_text:"text-[#ca4954]",content_hover_text:"hover:text-[#ca4954]",content_border:"border-[#ca4954]",content_hover_border:"hover:border-[#ca4954]",content_bg:"bg-[#ca4954]  text-[#fff]",content_hover_bg:"hover:bg-[#ca4954] hover:text-[#fff] ",container:"bg-[#2e0f10]"},{name:"Black",id:"black",type:"dark",bottom_player_bg:"bg-[#181818]",side_bar_bg:"bg-[#242424]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"bg-[#198585]  text-[#fff]",content_hover_bg:"hover:bg-[#198585] hover:text-[#fff] ",container:"bg-[#1e1e1e]"},{name:"Deep blue",id:"deep_blue",type:"dark",bottom_player_bg:"bg-[#111f3b]",side_bar_bg:"bg-[#1b2639]",content_text:"text-[#0c9e85]",content_hover_text:"hover:text-[#0c9e85]",content_border:"border-[#0c9e85]",content_hover_border:"hover:border-[#0c9e85]",content_bg:"bg-[#0c9e85]  text-[#fff]",content_hover_bg:"hover:bg-[#0c9e85] hover:text-[#fff] ",container:"bg-[#0f1a2e]"},{name:"White",id:"white",type:"light",bottom_player_bg:"bg-[#fff]",side_bar_bg:"bg-[#f2f2f2]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"bg-[#198585] text-[#fff]",content_hover_bg:"hover:bg-[#198585] hover:text-[#fff]",container:"bg-[#fff]"},{name:"Light green",id:"green_light",type:"light",bottom_player_bg:"bg-[#c0d8d8]",side_bar_bg:"bg-[#dde5e5]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"bg-[#198585] text-[#fff]",content_hover_bg:"hover:bg-[#198585] hover:text-[#fff]",container:"bg-[#ced9d9]"},{name:"Brown",id:"gray",type:"light",bottom_player_bg:"bg-[#dedad1]",side_bar_bg:"bg-[#d9d7d4]",content_text:"text-[#644646]",content_hover_text:"hover:text-[#644646]",content_border:"border-[#644646]",content_hover_border:"hover:border-[#644646]",content_bg:"bg-[#644646]  text-[#fff]",content_hover_bg:"hover:bg-[#644646] hover:text-[#fff]",container:"bg-[#e5e3df]"}];let zm=id[0];const w1=localStorage.getItem("theme");w1&&id.forEach(t=>{t.id===w1&&(zm=t)});const IT={theme:{...zm,alpha:zm.type==="light"?"[#000]/[.1]":"[#fff]/[.1]"}},d4=(t,e)=>{const n=e.payload.theme;return{theme:{...n,alpha:n.type==="dark"?"[#fff]/[.1]":"[#000]/[.1]"}}},f4=t=>{const[e,n]=f.useReducer(d4,t),r=f.useCallback(s=>{console.log("set theme"),n({type:0,payload:{theme:s}})},[]);return{state:e,setTheme:r}},h4={state:IT,setTheme:()=>{}},AT=f.createContext(h4),p4=({children:t,theme:e})=>u.jsx(AT.Provider,{value:f4(e),children:t}),ye=()=>{const{state:{theme:t},setTheme:e}=f.useContext(AT);return{theme:t,setTheme:e}};function Se({className:t}){const{theme:e}=ye();return u.jsx("div",{className:`animate-pulse rounded-[4px] bg-${e.alpha} ${t}`})}const ff=[...Array(4).keys()].map(t=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Se,{className:"h-[18px] w-[18px]"}),u.jsx(Se,{className:"h-[54px] w-[54px] ml-[10px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Se,{className:"h-[20px] mb-[5px] w-[150px]"}),u.jsx(Se,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},t)),m4=[...Array(1).keys()].map(t=>u.jsx(Se,{className:"w-full h-[40px] mb-[10px]"},t)),Gy=[...Array(2).keys()].map(t=>u.jsxs("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:[u.jsx(Se,{className:"pt-[100%] rounded-[8px]"}),u.jsx(Se,{className:"h-[22px] mt-[6px] w-[50%]"})]},t));var g4=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],Ia=t=>{let e=0;for(let n=0;n<t.length;n++){let r=t[n],s=g4.indexOf(r);e=e*83+s}return e},Zh=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},ep=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},y4=t=>t<0?-1:1,tp=(t,e)=>y4(t)*Math.pow(Math.abs(t),e),_1=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},v4=t=>{if(!t||t.length<6)throw new _1("The blurhash string must be at least 6 characters");let e=Ia(t[0]),n=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*n)throw new _1(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*n}`)},x4=t=>{let e=t>>16,n=t>>8&255,r=t&255;return[Zh(e),Zh(n),Zh(r)]},w4=(t,e)=>{let n=Math.floor(t/361),r=Math.floor(t/19)%19,s=t%19;return[tp((n-9)/9,2)*e,tp((r-9)/9,2)*e,tp((s-9)/9,2)*e]},_4=(t,e,n,r)=>{v4(t),r=r|1;let s=Ia(t[0]),i=Math.floor(s/9)+1,o=s%9+1,a=(Ia(t[1])+1)/166,l=new Array(o*i);for(let h=0;h<l.length;h++)if(h===0){let p=Ia(t.substring(2,6));l[h]=x4(p)}else{let p=Ia(t.substring(4+h*2,6+h*2));l[h]=w4(p,a*r)}let c=e*4,d=new Uint8ClampedArray(c*n);for(let h=0;h<n;h++)for(let p=0;p<e;p++){let m=0,y=0,v=0;for(let w=0;w<i;w++)for(let E=0;E<o;E++){let T=Math.cos(Math.PI*p*E/e)*Math.cos(Math.PI*h*w/n),S=l[E+w*o];m+=S[0]*T,y+=S[1]*T,v+=S[2]*T}let _=ep(m),x=ep(y),g=ep(v);d[4*p+0+h*c]=_,d[4*p+1+h*c]=x,d[4*p+2+h*c]=g,d[4*p+3+h*c]=255}return d},E4=_4,S4=Object.defineProperty,T4=Object.defineProperties,b4=Object.getOwnPropertyDescriptors,od=Object.getOwnPropertySymbols,RT=Object.prototype.hasOwnProperty,CT=Object.prototype.propertyIsEnumerable,E1=(t,e,n)=>e in t?S4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wm=(t,e)=>{for(var n in e||(e={}))RT.call(e,n)&&E1(t,n,e[n]);if(od)for(var n of od(e))CT.call(e,n)&&E1(t,n,e[n]);return t},Hm=(t,e)=>T4(t,b4(e)),kT=(t,e)=>{var n={};for(var r in t)RT.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&od)for(var r of od(t))e.indexOf(r)<0&&CT.call(t,r)&&(n[r]=t[r]);return n},PT=class extends f.PureComponent{constructor(){super(...arguments),this.canvas=null,this.handleRef=e=>{this.canvas=e,this.draw()},this.draw=()=>{let{hash:e,height:n,punch:r,width:s}=this.props;if(this.canvas){let i=E4(e,s,n,r),o=this.canvas.getContext("2d"),a=o.createImageData(s,n);a.data.set(i),o.putImageData(a,0,0)}}}componentDidUpdate(){this.draw()}render(){let e=this.props,{hash:n,height:r,width:s}=e,i=kT(e,["hash","height","width"]);return f.createElement("canvas",Hm(Wm({},i),{height:r,width:s,ref:this.handleRef}))}};PT.defaultProps={height:128,width:128};var I4={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},NT=class extends f.PureComponent{componentDidUpdate(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")}render(){let e=this.props,{hash:n,height:r,width:s,punch:i,resolutionX:o,resolutionY:a,style:l}=e,c=kT(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return f.createElement("div",Hm(Wm({},c),{style:Hm(Wm({display:"inline-block",height:r,width:s},l),{position:"relative"})}),f.createElement(PT,{hash:n,height:a,width:o,punch:i,style:I4}))}};NT.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32};const A4="/HD-MP3/assets/logo-893ae638.png";function Hr({src:t,classNames:e,blurHashEncode:n,onError:r}){const[s,i]=f.useState(!1),o=f.useRef(null),a=()=>{i(!0),t&&t!=null&&t.includes("blob")&&URL.revokeObjectURL(t)},l=()=>{const d=o.current;d.src="https://placehold.co/100",i(!0)},c=()=>{r?(r(),l()):l()};return u.jsxs(u.Fragment,{children:[!s&&u.jsx(u.Fragment,{children:n?u.jsx(NT,{hash:n,height:"100%",width:"100%"}):u.jsx(Se,{className:"w-full h-0"})}),u.jsx("img",{onLoad:a,onError:c,className:`${e||""} w-full ${s?"":"hidden"}`,src:t||A4,ref:o})]})}const jT=({className:t,onClick:e,theme:n})=>u.jsx("div",{className:`w-full rounded-[8px] border ${n.type==="light"?"border-[#333]":"border-[#fff]"} relative`,children:u.jsx("div",{onClick:()=>e(),className:`${n==null?void 0:n.content_hover_text} ${t} cursor-pointer`,children:u.jsx(K,{className:`absolute top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ${n.type==="light"?"text-[#333]":"text-[#fff]"}`,children:u.jsx(mi,{className:"w-[40px] max-[549px]:w-[30px]"})})})}),R4=vT("",{variants:{variant:{default:"py-[20px] px-[14px]",thin:"p-[6px]"}},defaultVariants:{variant:"default"}});function Ni({children:t,theme:e,className:n,color:r="container",variant:s}){return u.jsx("div",{className:`wrapper rounded-[6px]  ${e.type==="light"?"text-[#333]":"text-white"} ${r=="container"?e.container:e.side_bar_bg} border-[1px] border-${e.alpha} ${R4({variant:s,className:n})}`,children:t})}function Ui({className:t,icon:e,label:n,to:r,arrowIcon:s,children:i,onClick:o}){return r?u.jsxs(vs,{className:"w-full flex flex-row justify-between items-center "+t,to:r,children:[u.jsxs("div",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]}),i,s&&u.jsx("span",{children:s})]}):o?u.jsx("button",{onClick:o,className:"w-full flex flex-row justify-between items-center "+t,children:u.jsxs("p",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]})}):u.jsx("p",{children:"No onClick"})}const Qy={userSongs:[],userPlaylists:[],adminSongs:[],adminPlaylists:[],initial:!1},C4=(t,e)=>{var r,s;const n=e.payload;switch(console.log("dispatch song context"),e.type){case 4:return{userSongs:n.userSongs||[],userPlaylists:n.userPlaylists||[],adminSongs:n.adminSongs||t.adminSongs,adminPlaylists:n.adminPlaylists||t.adminPlaylists,initial:!!((r=n.adminSongs)!=null&&r.length||(s=n.userSongs)!=null&&s.length)};case 0:return{initial:t.initial,adminSongs:t.adminSongs,userPlaylists:t.userPlaylists,adminPlaylists:t.adminPlaylists,userSongs:n.userSongs||[]};case 2:return{initial:t.initial,userSongs:t.userSongs,adminSongs:t.adminSongs,adminPlaylists:t.adminPlaylists,userPlaylists:n.userPlaylists||[]};case 1:return{userSongs:[],userPlaylists:[],initial:t.initial,adminPlaylists:t.adminPlaylists,adminSongs:n.adminSongs||[]};case 3:return{userSongs:[],userPlaylists:[],initial:t.initial,adminSongs:t.adminSongs,adminPlaylists:n.adminPlaylists||[]};default:return{initial:t.initial,userSongs:t.userSongs,adminSongs:t.adminSongs,userPlaylists:t.userPlaylists,adminPlaylists:t.adminPlaylists}}},k4=t=>{const[e,n]=f.useReducer(C4,t),r=f.useCallback(l=>{n({type:0,payload:{userSongs:l}})},[]),s=f.useCallback(l=>{n({type:1,payload:{adminSongs:l}})},[]),i=f.useCallback(({userSongs:l,adminSongs:c,userPlaylists:d,adminPlaylists:h})=>{n({type:4,payload:{userSongs:l,adminSongs:c,userPlaylists:d,adminPlaylists:h}})},[]),o=f.useCallback(l=>{n({type:2,payload:{userPlaylists:l}})},[]),a=f.useCallback(l=>{n({type:3,payload:{adminPlaylists:l}})},[]);return{state:e,setUserSongs:r,initSongsContext:i,setUserPlaylists:o,setAdminSongs:s,setAdminPlaylists:a}},P4={state:Qy,setUserSongs:()=>{},setAdminSongs:()=>{},initSongsContext:()=>{},setUserPlaylists:()=>{},setAdminPlaylists:()=>{}},OT=f.createContext(P4),N4=({children:t,songsStore:e})=>u.jsx(OT.Provider,{value:k4(e),children:t}),ft=()=>{const{state:{adminPlaylists:t,adminSongs:e,initial:n,userPlaylists:r,userSongs:s},initSongsContext:i,setUserSongs:o,setUserPlaylists:a,setAdminPlaylists:l,setAdminSongs:c}=f.useContext(OT);return{adminPlaylists:t,adminSongs:e,initial:n,userPlaylists:r,userSongs:s,initSongsContext:i,setUserSongs:o,setAdminSongs:c,setUserPlaylists:a,setAdminPlaylists:l}},Jy=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop / Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast  Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Rock/Pop"];function Fe(t,e,n=0,r){let s=e||t.byteLength-n;const i=typeof Buffer<"u";s<0&&(s+=t.byteLength);const o=[],a=n+s;for(let c=n;c<a;c++){const d=t.getUint8(c);if(d===0)break;o.push(d)}if(i)return Buffer.from(o).toString();const l=o.map(c=>String.fromCharCode(c)).join("");return r?l:decodeURIComponent(escape(l))}function Bi(t,e,n=0,r){let s=!1,i=e||t.byteLength-n;const o=[],a=typeof Buffer<"u";if(i<0&&(i+=t.byteLength),n+1>t.byteLength)return"";r&&(t.getUint16(n)===65534&&(s=!0),n+=2,i-=2);const l=n+i;for(let c=n;c<l;c+=2){let d=t.getUint16(c,s);if(c<l-1&&d===0&&t.getUint16(c+1,s)===0)break;d>=0&&d<=55295||d>=57344&&d<=65535?o.push(d):d>=65536&&d<=1114111&&(d-=65536,o.push(((1047552&d)>>10)+55296),o.push((1023&d)+56320))}if(a){const c=Buffer.alloc(o.length*2);for(let d=0;d<o.length;d++){const h=o[d];s?c.writeUInt16LE(h,d*2):c.writeUInt16BE(h,d*2)}return c.toString()}return String.fromCharCode.apply(null,new Uint16Array(o))}function j4(t){let e=0,n=2130706432;for(;n;)e>>=1,e|=t&n,n>>=8;return e}function xu(t,e=0){return j4(t.getUint32(e))}function LT(t,e=0,n){return n?t.getUint8(e)+(t.getUint8(e+1)<<8)+(t.getUint8(e+2)<<16):t.getUint8(e+2)+(t.getUint8(e+1)<<8)+(t.getUint8(e)<<16)}const DT=new Map([["TALB","album"],["TBPM","bpm"],["TCOM","composer"],["TCON","genre"],["TCOP","copyright"],["TDEN","encoding-time"],["TDLY","playlist-delay"],["TDOR","original-release-time"],["TDRC","recording-time"],["TDRL","release-time"],["TDTG","tagging-time"],["TENC","encoder"],["TEXT","writer"],["TFLT","file-type"],["TIPL","involved-people"],["TIT1","content-group"],["TIT2","title"],["TIT3","subtitle"],["TKEY","initial-key"],["TLAN","language"],["TLEN","length"],["TMCL","credits"],["TMED","media-type"],["TMOO","mood"],["TOAL","original-album"],["TOFN","original-filename"],["TOLY","original-writer"],["TOPE","original-artist"],["TOWN","owner"],["TPE1","artist"],["TPE2","band"],["TPE3","conductor"],["TPE4","remixer"],["TPOS","set-part"],["TPRO","produced-notice"],["TPUB","publisher"],["TRCK","track"],["TRSN","radio-name"],["TRSO","radio-owner"],["TSOA","album-sort"],["TSOP","performer-sort"],["TSOT","title-sort"],["TSRC","isrc"],["TSSE","encoder-settings"],["TSST","set-subtitle"],["TAL","album"],["TBP","bpm"],["TCM","composer"],["TCO","genre"],["TCR","copyright"],["TDY","playlist-delay"],["TEN","encoder"],["TFT","file-type"],["TKE","initial-key"],["TLA","language"],["TLE","length"],["TMT","media-type"],["TOA","original-artist"],["TOF","original-filename"],["TOL","original-writer"],["TOT","original-album"],["TP1","artist"],["TP2","band"],["TP3","conductor"],["TP4","remixer"],["TPA","set-part"],["TPB","publisher"],["TRC","isrc"],["TRK","track"],["TSS","encoder-settings"],["TT1","content-group"],["TT2","title"],["TT3","subtitle"],["TXT","writer"],["WCOM","url-commercial"],["WCOP","url-legal"],["WOAF","url-file"],["WOAR","url-artist"],["WOAS","url-source"],["WORS","url-radio"],["WPAY","url-payment"],["WPUB","url-publisher"],["WAF","url-file"],["WAR","url-artist"],["WAS","url-source"],["WCM","url-commercial"],["WCP","url-copyright"],["WPB","url-publisher"],["COMM","comments"],["APIC","image"],["PIC","image"],["PRIV","private"]]),MT=["other","file-icon","icon","cover-front","cover-back","leaflet","media","artist-lead","artist","conductor","band","composer","writer","location","during-recording","during-performance","screen","fish","illustration","logo-band","logo-publisher"];function O4(t){const e={id:null,tag:null,value:null},n=new DataView(t),r={id:Fe(n,3),type:Fe(n,1),size:LT(n,3)},s=DT.get(r.id);if(!s)return null;if(e.id=r.id,e.tag=s,r.type==="T"){let i=Fe(n,-7,7);r.id==="TCO"&&parseInt(i)&&(i=Jy[parseInt(i)]),e.value=i}else if(r.type==="W")e.value=Fe(n,-7,7);else if(r.id==="COM"){let i=Fe(n,-10,10);i.indexOf("\0")!==-1&&(i=i.substr(i.indexOf("\0")+1)),e.value=i}else if(r.id==="PIC"){const i={type:null,mime:"image/"+Fe(n,3,7).toLowerCase(),description:null,data:null};i.type=MT[n.getUint8(11)]||"other";const o=11;let a=0;for(let l=o;;l++)if(n.getUint8(l)===0){a=l-o;break}i.description=a===0?null:Fe(n,a,o),i.data=t.slice(o+1),e.value=i}return e.tag?e:null}function L4(t,e,n){e=e||4;const r={id:null,tag:null,value:null},s=new DataView(t);if(e<3)return O4(t);const i={id:Fe(s,4),type:Fe(s,1),size:xu(s,4),flags:[s.getUint8(8),s.getUint8(9)]};if(i.flags[1]!==0)return null;const o=DT.get(i.id);if(!o)return null;if(r.tag=o,r.id=i.id,i.type==="T"){const a=s.getUint8(10);let l=null;a===0||a===3?l=Fe(s,-11,11):a===1?l=Bi(s,-11,11,!0):a===2&&(l=Bi(s,-11,11)),i.id==="TCON"&&l!==null&&parseInt(l)&&(l=Jy[parseInt(l)]),r.value=l}else if(i.type==="W")r.value=Fe(s,-10,10);else if(i.id==="PRIV"){let l=0;for(let c=0;;c++)if(s.getUint8(c)===0){l=c-10;break}r.value={identifier:l===0?null:Fe(s,l,10),data:t.slice(l+10+1)}}else if(i.id==="COMM"){const a=s.getUint8(10);let l=14;for(let c=l;;c++)if(a===1||a===2){if(s.getUint16(c)===0){l=c+2;break}c++}else if(s.getUint8(c)===0){l=c+1;break}a===0||a===3?r.value=Fe(s,-1*l,l):a===1?r.value=Bi(s,-1*l,l,!0):a===2&&(r.value=Bi(s,-1*l,l))}else if(i.id==="APIC"){const a=s.getUint8(10),l={type:null,mime:null,description:null,data:null};let c=11,d=0;for(let h=c;;h++)if(s.getUint8(h)===0){d=h-c;break}l.mime=Fe(s,d,c),l.type=MT[s.getUint8(c+d+1)]||"other",c+=d+2,d=0;for(let h=c;;h++)if(s.getUint8(h)===0){d=h-c;break}d!==0&&(a===0||a===3?l.description=Fe(s,d,c):a===1?l.description=Bi(s,d,c,!0):a===2&&(l.description=Bi(s,d,c))),l.data=t.slice(c+1),r.value=l}return r.tag?r:null}async function D4(t){let e=null;const n=await t.read(128,t.size-128),r=new DataView(n);n.byteLength===128&&Fe(r,3,void 0,!0)==="TAG"&&(e={kind:"v1",title:Fe(r,30,3).trim()||null,album:Fe(r,30,63).trim()||null,artist:Fe(r,30,33).trim()||null,year:Fe(r,4,93).trim()||null,genre:null,comment:null,track:null},r.getUint8(125)===0?(e.comment=Fe(r,28,97),e.version=1.1,e.track=r.getUint8(126)):e.comment=Fe(r,30,97),e.genre=Jy[r.getUint8(127)]||null);const s=await t.read(14,0),i=new DataView(s);if(s.byteLength===14&&Fe(i,3,void 0,!0)==="ID3"&&i.getUint8(3)<=4){let o=10,a=0;const l=[i.getUint8(3),i.getUint8(4)],c=i.getUint8(5);if(!(c&128)){e={kind:"v2",title:e?e.title:null,album:e?e.album:null,artist:e?e.artist:null,year:e?e.year:null,version:l,frames:[],images:[]},c&64&&(o+=xu(i,11)),a+=xu(i,6);const d=await t.read(a,o),h=new DataView(d);let p=0;for(;p<d.byteLength;){let m,y=!0;for(let _=0;_<3;_++){const x=h.getUint8(p+_);(x<65||x>90)&&(x<48||x>57)&&(y=!1)}if(!y)break;l[0]<3?m=d.slice(p,p+6+LT(h,p+3)):l[0]===3?m=d.slice(p,p+10+h.getUint32(p+4)):m=d.slice(p,p+10+xu(h,p+4));const v=await L4(m,l[0],l[1]);if(v&&v.tag){const _=e;_.frames.push(v),v.tag==="image"?_.images.push(v.value):e[v.tag]=v.value}p+=m.byteLength}}}return e}class M4{constructor(){this.size=0}async close(){}async readBlob(e,n=0,r="application/octet-stream"){const s=await this.read(e,n);return new Blob([s],{type:r})}}class $4 extends M4{constructor(e){super(),this._file=e}async open(){this.size=this._file.size}async read(e,n){const r=this._file.slice(n,n+e);return new Promise((s,i)=>{const o=new FileReader;o.onload=()=>{s(o.result)},o.onerror=()=>{i(new Error("File read failed"))},o.readAsArrayBuffer(r)})}}const V4=typeof window<"u"&&"File"in window&&"FileReader"in window&&typeof ArrayBuffer<"u";async function F4(t){await t.open();const e=await D4(t);return await t.close(),e}function U4(t){if(!V4)throw new Error("Browser does not have support for the File API and/or ArrayBuffers");return F4(new $4(t))}let ad=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");function $T(t,e){return function(){return t.apply(e,arguments)}}const{toString:B4}=Object.prototype,{getPrototypeOf:Xy}=Object,hf=(t=>e=>{const n=B4.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),xr=t=>(t=t.toLowerCase(),e=>hf(e)===t),pf=t=>e=>typeof e===t,{isArray:Zo}=Array,wl=pf("undefined");function z4(t){return t!==null&&!wl(t)&&t.constructor!==null&&!wl(t.constructor)&&Nn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const VT=xr("ArrayBuffer");function W4(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&VT(t.buffer),e}const H4=pf("string"),Nn=pf("function"),FT=pf("number"),mf=t=>t!==null&&typeof t=="object",q4=t=>t===!0||t===!1,wu=t=>{if(hf(t)!=="object")return!1;const e=Xy(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},K4=xr("Date"),G4=xr("File"),Q4=xr("Blob"),J4=xr("FileList"),X4=t=>mf(t)&&Nn(t.pipe),Y4=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Nn(t.append)&&((e=hf(t))==="formdata"||e==="object"&&Nn(t.toString)&&t.toString()==="[object FormData]"))},Z4=xr("URLSearchParams"),eO=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Jl(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Zo(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function UT(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const BT=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),zT=t=>!wl(t)&&t!==BT;function qm(){const{caseless:t}=zT(this)&&this||{},e={},n=(r,s)=>{const i=t&&UT(e,s)||s;wu(e[i])&&wu(r)?e[i]=qm(e[i],r):wu(r)?e[i]=qm({},r):Zo(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Jl(arguments[r],n);return e}const tO=(t,e,n,{allOwnKeys:r}={})=>(Jl(e,(s,i)=>{n&&Nn(s)?t[i]=$T(s,n):t[i]=s},{allOwnKeys:r}),t),nO=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),rO=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},sO=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Xy(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},iO=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},oO=t=>{if(!t)return null;if(Zo(t))return t;let e=t.length;if(!FT(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},aO=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Xy(Uint8Array)),lO=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},cO=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},uO=xr("HTMLFormElement"),dO=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),S1=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),fO=xr("RegExp"),WT=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Jl(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},hO=t=>{WT(t,(e,n)=>{if(Nn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Nn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},pO=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Zo(t)?r(t):r(String(t).split(e)),n},mO=()=>{},gO=(t,e)=>(t=+t,Number.isFinite(t)?t:e),np="abcdefghijklmnopqrstuvwxyz",T1="0123456789",HT={DIGIT:T1,ALPHA:np,ALPHA_DIGIT:np+np.toUpperCase()+T1},yO=(t=16,e=HT.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function vO(t){return!!(t&&Nn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const xO=t=>{const e=new Array(10),n=(r,s)=>{if(mf(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Zo(r)?[]:{};return Jl(r,(o,a)=>{const l=n(o,s+1);!wl(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},wO=xr("AsyncFunction"),_O=t=>t&&(mf(t)||Nn(t))&&Nn(t.then)&&Nn(t.catch),N={isArray:Zo,isArrayBuffer:VT,isBuffer:z4,isFormData:Y4,isArrayBufferView:W4,isString:H4,isNumber:FT,isBoolean:q4,isObject:mf,isPlainObject:wu,isUndefined:wl,isDate:K4,isFile:G4,isBlob:Q4,isRegExp:fO,isFunction:Nn,isStream:X4,isURLSearchParams:Z4,isTypedArray:aO,isFileList:J4,forEach:Jl,merge:qm,extend:tO,trim:eO,stripBOM:nO,inherits:rO,toFlatObject:sO,kindOf:hf,kindOfTest:xr,endsWith:iO,toArray:oO,forEachEntry:lO,matchAll:cO,isHTMLForm:uO,hasOwnProperty:S1,hasOwnProp:S1,reduceDescriptors:WT,freezeMethods:hO,toObjectSet:pO,toCamelCase:dO,noop:mO,toFiniteNumber:gO,findKey:UT,global:BT,isContextDefined:zT,ALPHABET:HT,generateString:yO,isSpecCompliantForm:vO,toJSONObject:xO,isAsyncFn:wO,isThenable:_O};function xe(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}N.inherits(xe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:N.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const qT=xe.prototype,KT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{KT[t]={value:t}});Object.defineProperties(xe,KT);Object.defineProperty(qT,"isAxiosError",{value:!0});xe.from=(t,e,n,r,s,i)=>{const o=Object.create(qT);return N.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),xe.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const EO=null;function Km(t){return N.isPlainObject(t)||N.isArray(t)}function GT(t){return N.endsWith(t,"[]")?t.slice(0,-2):t}function b1(t,e,n){return t?t.concat(e).map(function(s,i){return s=GT(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function SO(t){return N.isArray(t)&&!t.some(Km)}const TO=N.toFlatObject(N,{},null,function(e){return/^is[A-Z]/.test(e)});function gf(t,e,n){if(!N.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=N.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,_){return!N.isUndefined(_[v])});const r=n.metaTokens,s=n.visitor||d,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&N.isSpecCompliantForm(e);if(!N.isFunction(s))throw new TypeError("visitor must be a function");function c(y){if(y===null)return"";if(N.isDate(y))return y.toISOString();if(!l&&N.isBlob(y))throw new xe("Blob is not supported. Use a Buffer instead.");return N.isArrayBuffer(y)||N.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,v,_){let x=y;if(y&&!_&&typeof y=="object"){if(N.endsWith(v,"{}"))v=r?v:v.slice(0,-2),y=JSON.stringify(y);else if(N.isArray(y)&&SO(y)||(N.isFileList(y)||N.endsWith(v,"[]"))&&(x=N.toArray(y)))return v=GT(v),x.forEach(function(w,E){!(N.isUndefined(w)||w===null)&&e.append(o===!0?b1([v],E,i):o===null?v:v+"[]",c(w))}),!1}return Km(y)?!0:(e.append(b1(_,v,i),c(y)),!1)}const h=[],p=Object.assign(TO,{defaultVisitor:d,convertValue:c,isVisitable:Km});function m(y,v){if(!N.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+v.join("."));h.push(y),N.forEach(y,function(x,g){(!(N.isUndefined(x)||x===null)&&s.call(e,x,N.isString(g)?g.trim():g,v,p))===!0&&m(x,v?v.concat(g):[g])}),h.pop()}}if(!N.isObject(t))throw new TypeError("data must be an object");return m(t),e}function I1(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Yy(t,e){this._pairs=[],t&&gf(t,this,e)}const QT=Yy.prototype;QT.append=function(e,n){this._pairs.push([e,n])};QT.toString=function(e){const n=e?function(r){return e.call(this,r,I1)}:I1;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function bO(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function JT(t,e,n){if(!e)return t;const r=n&&n.encode||bO,s=n&&n.serialize;let i;if(s?i=s(e,n):i=N.isURLSearchParams(e)?e.toString():new Yy(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class IO{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){N.forEach(this.handlers,function(r){r!==null&&e(r)})}}const A1=IO,XT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},AO=typeof URLSearchParams<"u"?URLSearchParams:Yy,RO=typeof FormData<"u"?FormData:null,CO=typeof Blob<"u"?Blob:null,kO=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),PO=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),tr={isBrowser:!0,classes:{URLSearchParams:AO,FormData:RO,Blob:CO},isStandardBrowserEnv:kO,isStandardBrowserWebWorkerEnv:PO,protocols:["http","https","file","blob","url","data"]};function NO(t,e){return gf(t,new tr.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return tr.isNode&&N.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function jO(t){return N.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function OO(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function YT(t){function e(n,r,s,i){let o=n[i++];const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&N.isArray(s)?s.length:o,l?(N.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!N.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&N.isArray(s[o])&&(s[o]=OO(s[o])),!a)}if(N.isFormData(t)&&N.isFunction(t.entries)){const n={};return N.forEachEntry(t,(r,s)=>{e(jO(r),s,n,0)}),n}return null}function LO(t,e,n){if(N.isString(t))try{return(e||JSON.parse)(t),N.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Zy={transitional:XT,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=N.isObject(e);if(i&&N.isHTMLForm(e)&&(e=new FormData(e)),N.isFormData(e))return s&&s?JSON.stringify(YT(e)):e;if(N.isArrayBuffer(e)||N.isBuffer(e)||N.isStream(e)||N.isFile(e)||N.isBlob(e))return e;if(N.isArrayBufferView(e))return e.buffer;if(N.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return NO(e,this.formSerializer).toString();if((a=N.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return gf(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),LO(e)):e}],transformResponse:[function(e){const n=this.transitional||Zy.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&N.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?xe.from(a,xe.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:tr.classes.FormData,Blob:tr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};N.forEach(["delete","get","head","post","put","patch"],t=>{Zy.headers[t]={}});const e0=Zy,DO=N.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),MO=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&DO[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},R1=Symbol("internals");function va(t){return t&&String(t).trim().toLowerCase()}function _u(t){return t===!1||t==null?t:N.isArray(t)?t.map(_u):String(t)}function $O(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const VO=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function rp(t,e,n,r,s){if(N.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!N.isString(e)){if(N.isString(r))return e.indexOf(r)!==-1;if(N.isRegExp(r))return r.test(e)}}function FO(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function UO(t,e){const n=N.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class yf{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,c){const d=va(l);if(!d)throw new Error("header name must be a non-empty string");const h=N.findKey(s,d);(!h||s[h]===void 0||c===!0||c===void 0&&s[h]!==!1)&&(s[h||l]=_u(a))}const o=(a,l)=>N.forEach(a,(c,d)=>i(c,d,l));return N.isPlainObject(e)||e instanceof this.constructor?o(e,n):N.isString(e)&&(e=e.trim())&&!VO(e)?o(MO(e),n):e!=null&&i(n,e,r),this}get(e,n){if(e=va(e),e){const r=N.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return $O(s);if(N.isFunction(n))return n.call(this,s,r);if(N.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=va(e),e){const r=N.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||rp(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=va(o),o){const a=N.findKey(r,o);a&&(!n||rp(r,r[a],a,n))&&(delete r[a],s=!0)}}return N.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||rp(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return N.forEach(this,(s,i)=>{const o=N.findKey(r,i);if(o){n[o]=_u(s),delete n[i];return}const a=e?FO(i):String(i).trim();a!==i&&delete n[i],n[a]=_u(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return N.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&N.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[R1]=this[R1]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=va(o);r[a]||(UO(s,o),r[a]=!0)}return N.isArray(e)?e.forEach(i):i(e),this}}yf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);N.reduceDescriptors(yf.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});N.freezeMethods(yf);const Pr=yf;function sp(t,e){const n=this||e0,r=e||n,s=Pr.from(r.headers);let i=r.data;return N.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function ZT(t){return!!(t&&t.__CANCEL__)}function Xl(t,e,n){xe.call(this,t??"canceled",xe.ERR_CANCELED,e,n),this.name="CanceledError"}N.inherits(Xl,xe,{__CANCEL__:!0});function BO(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new xe("Request failed with status code "+n.status,[xe.ERR_BAD_REQUEST,xe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const zO=tr.isStandardBrowserEnv?function(){return{write:function(n,r,s,i,o,a){const l=[];l.push(n+"="+encodeURIComponent(r)),N.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),N.isString(i)&&l.push("path="+i),N.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function WO(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function HO(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function eb(t,e){return t&&!WO(e)?HO(t,e):e}const qO=tr.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let o=i;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){const a=N.isString(o)?s(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function KO(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function GO(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[i];o||(o=c),n[s]=l,r[s]=c;let h=i,p=0;for(;h!==s;)p+=n[h++],h=h%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const m=d&&c-d;return m?Math.round(p*1e3/m):void 0}}function C1(t,e){let n=0;const r=GO(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-n,l=r(a),c=i<=o;n=i;const d={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-i)/l:void 0,event:s};d[e?"download":"upload"]=!0,t(d)}}const QO=typeof XMLHttpRequest<"u",JO=QO&&function(t){return new Promise(function(n,r){let s=t.data;const i=Pr.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let c;N.isFormData(s)&&(tr.isStandardBrowserEnv||tr.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?N.isString(c=i.getContentType())&&i.setContentType(c.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let d=new XMLHttpRequest;if(t.auth){const y=t.auth.username||"",v=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(y+":"+v))}const h=eb(t.baseURL,t.url);d.open(t.method.toUpperCase(),JT(h,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function p(){if(!d)return;const y=Pr.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),_={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:y,config:t,request:d};BO(function(g){n(g),l()},function(g){r(g),l()},_),d=null}if("onloadend"in d?d.onloadend=p:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(p)},d.onabort=function(){d&&(r(new xe("Request aborted",xe.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new xe("Network Error",xe.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let v=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const _=t.transitional||XT;t.timeoutErrorMessage&&(v=t.timeoutErrorMessage),r(new xe(v,_.clarifyTimeoutError?xe.ETIMEDOUT:xe.ECONNABORTED,t,d)),d=null},tr.isStandardBrowserEnv){const y=qO(h)&&t.xsrfCookieName&&zO.read(t.xsrfCookieName);y&&i.set(t.xsrfHeaderName,y)}s===void 0&&i.setContentType(null),"setRequestHeader"in d&&N.forEach(i.toJSON(),function(v,_){d.setRequestHeader(_,v)}),N.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),o&&o!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",C1(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",C1(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=y=>{d&&(r(!y||y.type?new Xl(null,t,d):y),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const m=KO(h);if(m&&tr.protocols.indexOf(m)===-1){r(new xe("Unsupported protocol "+m+":",xe.ERR_BAD_REQUEST,t));return}d.send(s||null)})},Gm={http:EO,xhr:JO};N.forEach(Gm,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const k1=t=>`- ${t}`,XO=t=>N.isFunction(t)||t===null||t===!1,tb={getAdapter:t=>{t=N.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!XO(n)&&(r=Gm[(o=String(n)).toLowerCase()],r===void 0))throw new xe(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(k1).join(`
`):" "+k1(i[0]):"as no adapter specified";throw new xe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Gm};function ip(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Xl(null,t)}function P1(t){return ip(t),t.headers=Pr.from(t.headers),t.data=sp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),tb.getAdapter(t.adapter||e0.adapter)(t).then(function(r){return ip(t),r.data=sp.call(t,t.transformResponse,r),r.headers=Pr.from(r.headers),r},function(r){return ZT(r)||(ip(t),r&&r.response&&(r.response.data=sp.call(t,t.transformResponse,r.response),r.response.headers=Pr.from(r.response.headers))),Promise.reject(r)})}const N1=t=>t instanceof Pr?t.toJSON():t;function jo(t,e){e=e||{};const n={};function r(c,d,h){return N.isPlainObject(c)&&N.isPlainObject(d)?N.merge.call({caseless:h},c,d):N.isPlainObject(d)?N.merge({},d):N.isArray(d)?d.slice():d}function s(c,d,h){if(N.isUndefined(d)){if(!N.isUndefined(c))return r(void 0,c,h)}else return r(c,d,h)}function i(c,d){if(!N.isUndefined(d))return r(void 0,d)}function o(c,d){if(N.isUndefined(d)){if(!N.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,h){if(h in e)return r(c,d);if(h in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d)=>s(N1(c),N1(d),!0)};return N.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=l[d]||s,p=h(t[d],e[d],d);N.isUndefined(p)&&h!==a||(n[d]=p)}),n}const nb="1.6.0",t0={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{t0[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const j1={};t0.transitional=function(e,n,r){function s(i,o){return"[Axios v"+nb+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new xe(s(o," has been removed"+(n?" in "+n:"")),xe.ERR_DEPRECATED);return n&&!j1[o]&&(j1[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};function YO(t,e,n){if(typeof t!="object")throw new xe("options must be an object",xe.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new xe("option "+i+" must be "+l,xe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new xe("Unknown option "+i,xe.ERR_BAD_OPTION)}}const Qm={assertOptions:YO,validators:t0},Gr=Qm.validators;class ld{constructor(e){this.defaults=e,this.interceptors={request:new A1,response:new A1}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=jo(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Qm.assertOptions(r,{silentJSONParsing:Gr.transitional(Gr.boolean),forcedJSONParsing:Gr.transitional(Gr.boolean),clarifyTimeoutError:Gr.transitional(Gr.boolean)},!1),s!=null&&(N.isFunction(s)?n.paramsSerializer={serialize:s}:Qm.assertOptions(s,{encode:Gr.function,serialize:Gr.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&N.merge(i.common,i[n.method]);i&&N.forEach(["delete","get","head","post","put","patch","common"],y=>{delete i[y]}),n.headers=Pr.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(l=l&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let d,h=0,p;if(!l){const y=[P1.bind(this),void 0];for(y.unshift.apply(y,a),y.push.apply(y,c),p=y.length,d=Promise.resolve(n);h<p;)d=d.then(y[h++],y[h++]);return d}p=a.length;let m=n;for(h=0;h<p;){const y=a[h++],v=a[h++];try{m=y(m)}catch(_){v.call(this,_);break}}try{d=P1.call(this,m)}catch(y){return Promise.reject(y)}for(h=0,p=c.length;h<p;)d=d.then(c[h++],c[h++]);return d}getUri(e){e=jo(this.defaults,e);const n=eb(e.baseURL,e.url);return JT(n,e.params,e.paramsSerializer)}}N.forEach(["delete","get","head","options"],function(e){ld.prototype[e]=function(n,r){return this.request(jo(r||{},{method:e,url:n,data:(r||{}).data}))}});N.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(jo(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ld.prototype[e]=n(),ld.prototype[e+"Form"]=n(!0)});const Eu=ld;class n0{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new Xl(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new n0(function(s){e=s}),cancel:e}}}const ZO=n0;function eL(t){return function(n){return t.apply(null,n)}}function tL(t){return N.isObject(t)&&t.isAxiosError===!0}const Jm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Jm).forEach(([t,e])=>{Jm[e]=t});const nL=Jm;function rb(t){const e=new Eu(t),n=$T(Eu.prototype.request,e);return N.extend(n,Eu.prototype,e,{allOwnKeys:!0}),N.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return rb(jo(t,s))},n}const ot=rb(e0);ot.Axios=Eu;ot.CanceledError=Xl;ot.CancelToken=ZO;ot.isCancel=ZT;ot.VERSION=nb;ot.toFormData=gf;ot.AxiosError=xe;ot.Cancel=ot.CanceledError;ot.all=function(e){return Promise.all(e)};ot.spread=eL;ot.isAxiosError=tL;ot.mergeConfig=jo;ot.AxiosHeaders=Pr;ot.formToJSON=t=>YT(N.isHTMLForm(t)?new FormData(t):t);ot.getAdapter=tb.getAdapter;ot.HttpStatusCode=nL;ot.default=ot;const rL=ot,r0=rL.create({baseURL:"https://express-zingmp3-awx6.vercel.app"}),sL=t=>new Date(t.toDate().getTime()).toLocaleString(),sb=t=>(n=>n.toLocaleLowerCase().replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ/g,"a").replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e").replace(/ì|í|ị|ỉ|ĩ/g,"i").replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ/g,"o").replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u").replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y").replace(/đ/g,"d"))(t).toLocaleLowerCase().replaceAll(/[\W_]/g,"")+"_"+ad(4),iL=async t=>{if(!t)return;const e=await U4(t);if(!e)return;const{title:n,artist:r,images:s}=e,i={name:"",singer:"",image:null};return i.name=n||t.name,i.singer=r||"...",s.length&&(i.image=s[0].data),i},ib=async t=>{const e=Date.now(),n=await r0.post("/api/image/encode",t);let r;n&&(r=n.data.encode);const s=(Date.now()-e)/1e3;return console.log(">>> api: get blurHash encode finished after",s),{encode:r}},oL=async t=>{const e=new FormData;e.append("file",t);const n=Date.now(),r=await r0.post("/api/image/optimize",e,{responseType:"blob"});let s;r&&(s=r.data);const i=(Date.now()-n)/1e3;return console.log(">>> api: optimize finished after",i),s},gi=t=>{if(!t)return"";let e=0,n=+t.toFixed(0);for(;n>=60;)n-=60,e++;return e<10?n>=10?`0${e}:${n}`:`0${e}:0${n}`:n>=10?`${e}:${n}`:`${e}:0${n}`},za=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);if(n!=-1)return e[n]=t,n},aL=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);n!=-1&&(e[n]=t)},ob=t=>{let e=0,n=[];return t.forEach(r=>{e+=r.duration,n.push(r.id)}),{time:e,ids:n}},Xm=({songs:t,existingPlaylist:e})=>{const{ids:n,time:r}=ob(t);return{...e,time:r,song_ids:n,count:n.length}},lL=({song:t,playlist:e})=>({...e,time:e.time+t.duration,song_ids:[...e.song_ids,t.id],count:e.count+1}),ji=({...t})=>({...{name:"",singer:"",image_url:"",song_url:"",by:"",duration:0,lyric_id:"",image_file_path:"",song_file_path:"",id:"",blurhash_encode:"",size:0},...t}),O1=({...t})=>({...{id:"",name:"",song_ids:[],time:0,count:0,by:"",image_url:"",blurhash_encode:""},...t}),_l=async t=>{await new Promise(e=>setTimeout(e,t))},ab=(t,e,n,r,s)=>{if(!s||!r){console.log("song list item lack of props");return}e||n&&n(!0);let i=[...r];const o=i.indexOf(t);o===-1?i.push(t):i.splice(o,1),s(i),i.length||n&&n(!1)};function cL({data:t,theme:e,selectedSongs:n,active:r,onClick:s,isChecked:i,setSelectedSongs:o,setIsChecked:a,inProcess:l},c){const d=f.useCallback(()=>n?(n==null?void 0:n.indexOf(t))!=-1:!1,[n]),h=m=>{!o||!n||!a||i!==void 0&&ab(m,i,a,n,o)},p={button:`${e.content_bg} rounded-full`,songListButton:"mr-[10px] px-[5px]",itemContainer:`hover:bg-${e.alpha} item-container cursor-pointer transition-opacity duration-[.3s] border-b last:border-none border-${e.alpha} flex rounded-[4px] justify-between w-[100%] p-[10px] ${d()&&"bg-"+e.alpha}`,imageFrame:"w-[54px] h-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]"};return u.jsx(u.Fragment,{children:u.jsx("div",{ref:c,className:`${p.itemContainer} ${l?"pointer-events-none":""}`,children:u.jsxs("div",{className:"flex flex-row w-[100%]",children:[!l&&u.jsx(u.Fragment,{children:i?u.jsx("button",{onClick:()=>h(t),className:`${p.songListButton} text-[inherit]`,children:d()?u.jsx(Ba,{className:"w-[18px]"}):u.jsx(No,{className:"w-[18px]"})}):u.jsx("button",{onClick:()=>h(t),className:`${p.songListButton} block`,children:u.jsx(No,{className:"w-[18px] "})})}),u.jsxs("div",{className:"flex-grow flex",onClick:m=>i?h(t):s(m),children:[u.jsxs("div",{className:`${p.imageFrame} ${l?"ml-[28px]":""} `,children:[u.jsx(Hr,{blurHashEncode:t.blurhash_encode,src:t.image_url}),r&&u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex songContainers-center items-center justify-center",children:u.jsx(Ql,{className:"w-[28px] text-[#fff]"})})]}),u.jsxs("div",{className:`ml-[10px] ${l?"opacity-60":""}`,children:[u.jsx("h5",{className:`text-mg line-clamp-1 ${r&&e.content_text}`,children:t.name}),u.jsx("p",{className:"text-xs opacity-60 bg-blend-lighten line-clamp-1",children:t.singer})]}),l&&u.jsxs("p",{className:"ml-auto self-center flex",children:[u.jsx(Ln,{className:"w-[20px] animate-spin mr-[4px]"}),"in process..."]})]})]})})})}const lb=f.forwardRef(cL);function Un(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Is(t){return!!t&&!!t[Me]}function Mr(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var s=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return s===Object||typeof s=="function"&&Function.toString.call(s)===vL}(t)||Array.isArray(t)||!!t[U1]||!!(!((e=t.constructor)===null||e===void 0)&&e[U1])||s0(t)||i0(t))}function yi(t,e,n){n===void 0&&(n=!1),ea(t)===0?(n?Object.keys:go)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,s){return e(s,r,t)})}function ea(t){var e=t[Me];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:s0(t)?2:i0(t)?3:0}function mo(t,e){return ea(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function uL(t,e){return ea(t)===2?t.get(e):t[e]}function cb(t,e,n){var r=ea(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function ub(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function s0(t){return gL&&t instanceof Map}function i0(t){return yL&&t instanceof Set}function Gs(t){return t.o||t.t}function o0(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=fb(t);delete e[Me];for(var n=go(e),r=0;r<n.length;r++){var s=n[r],i=e[s];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[s]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[s]})}return Object.create(Object.getPrototypeOf(t),e)}function a0(t,e){return e===void 0&&(e=!1),l0(t)||Is(t)||!Mr(t)||(ea(t)>1&&(t.set=t.add=t.clear=t.delete=dL),Object.freeze(t),e&&yi(t,function(n,r){return a0(r,!0)},!0)),t}function dL(){Un(2)}function l0(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function lr(t){var e=tg[t];return e||Un(18,t),e}function fL(t,e){tg[t]||(tg[t]=e)}function Ym(){return El}function op(t,e){e&&(lr("Patches"),t.u=[],t.s=[],t.v=e)}function cd(t){Zm(t),t.p.forEach(hL),t.p=null}function Zm(t){t===El&&(El=t.l)}function L1(t){return El={p:[],l:El,h:t,m:!0,_:0}}function hL(t){var e=t[Me];e.i===0||e.i===1?e.j():e.g=!0}function ap(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||lr("ES5").S(e,t,r),r?(n[Me].P&&(cd(e),Un(4)),Mr(t)&&(t=ud(e,t),e.l||dd(e,t)),e.u&&lr("Patches").M(n[Me].t,t,e.u,e.s)):t=ud(e,n,[]),cd(e),e.u&&e.v(e.u,e.s),t!==db?t:void 0}function ud(t,e,n){if(l0(e))return e;var r=e[Me];if(!r)return yi(e,function(a,l){return D1(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return dd(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var s=r.i===4||r.i===5?r.o=o0(r.k):r.o,i=s,o=!1;r.i===3&&(i=new Set(s),s.clear(),o=!0),yi(i,function(a,l){return D1(t,r,s,a,l,n,o)}),dd(t,s,!1),n&&t.u&&lr("Patches").N(r,n,t.u,t.s)}return r.o}function D1(t,e,n,r,s,i,o){if(Is(s)){var a=ud(t,s,i&&e&&e.i!==3&&!mo(e.R,r)?i.concat(r):void 0);if(cb(n,r,a),!Is(a))return;t.m=!1}else o&&n.add(s);if(Mr(s)&&!l0(s)){if(!t.h.D&&t._<1)return;ud(t,s),e&&e.A.l||dd(t,s)}}function dd(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&a0(e,n)}function lp(t,e){var n=t[Me];return(n?Gs(n):t)[e]}function M1(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function es(t){t.P||(t.P=!0,t.l&&es(t.l))}function cp(t){t.o||(t.o=o0(t.t))}function eg(t,e,n){var r=s0(e)?lr("MapSet").F(e,n):i0(e)?lr("MapSet").T(e,n):t.O?function(s,i){var o=Array.isArray(s),a={i:o?1:0,A:i?i.A:Ym(),P:!1,I:!1,R:{},l:i,t:s,k:null,o:null,j:null,C:!1},l=a,c=Sl;o&&(l=[a],c=Aa);var d=Proxy.revocable(l,c),h=d.revoke,p=d.proxy;return a.k=p,a.j=h,p}(e,n):lr("ES5").J(e,n);return(n?n.A:Ym()).p.push(r),r}function pL(t){return Is(t)||Un(22,t),function e(n){if(!Mr(n))return n;var r,s=n[Me],i=ea(n);if(s){if(!s.P&&(s.i<4||!lr("ES5").K(s)))return s.t;s.I=!0,r=$1(n,i),s.I=!1}else r=$1(n,i);return yi(r,function(o,a){s&&uL(s.t,o)===a||cb(r,o,e(a))}),i===3?new Set(r):r}(t)}function $1(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return o0(t)}function mL(){function t(i,o){var a=s[i];return a?a.enumerable=o:s[i]=a={configurable:!0,enumerable:o,get:function(){var l=this[Me];return Sl.get(l,i)},set:function(l){var c=this[Me];Sl.set(c,i,l)}},a}function e(i){for(var o=i.length-1;o>=0;o--){var a=i[o][Me];if(!a.P)switch(a.i){case 5:r(a)&&es(a);break;case 4:n(a)&&es(a)}}}function n(i){for(var o=i.t,a=i.k,l=go(a),c=l.length-1;c>=0;c--){var d=l[c];if(d!==Me){var h=o[d];if(h===void 0&&!mo(o,d))return!0;var p=a[d],m=p&&p[Me];if(m?m.t!==h:!ub(p,h))return!0}}var y=!!o[Me];return l.length!==go(o).length+(y?0:1)}function r(i){var o=i.k;if(o.length!==i.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var s={};fL("ES5",{J:function(i,o){var a=Array.isArray(i),l=function(d,h){if(d){for(var p=Array(h.length),m=0;m<h.length;m++)Object.defineProperty(p,""+m,t(m,!0));return p}var y=fb(h);delete y[Me];for(var v=go(y),_=0;_<v.length;_++){var x=v[_];y[x]=t(x,d||!!y[x].enumerable)}return Object.create(Object.getPrototypeOf(h),y)}(a,i),c={i:a?5:4,A:o?o.A:Ym(),P:!1,I:!1,R:{},l:o,t:i,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,Me,{value:c,writable:!0}),l},S:function(i,o,a){a?Is(o)&&o[Me].A===i&&e(i.p):(i.u&&function l(c){if(c&&typeof c=="object"){var d=c[Me];if(d){var h=d.t,p=d.k,m=d.R,y=d.i;if(y===4)yi(p,function(w){w!==Me&&(h[w]!==void 0||mo(h,w)?m[w]||l(p[w]):(m[w]=!0,es(d)))}),yi(h,function(w){p[w]!==void 0||mo(p,w)||(m[w]=!1,es(d))});else if(y===5){if(r(d)&&(es(d),m.length=!0),p.length<h.length)for(var v=p.length;v<h.length;v++)m[v]=!1;else for(var _=h.length;_<p.length;_++)m[_]=!0;for(var x=Math.min(p.length,h.length),g=0;g<x;g++)p.hasOwnProperty(g)||(m[g]=!0),m[g]===void 0&&l(p[g])}}}}(i.p[0]),e(i.p))},K:function(i){return i.i===4?n(i):r(i)}})}var V1,El,c0=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",gL=typeof Map<"u",yL=typeof Set<"u",F1=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",db=c0?Symbol.for("immer-nothing"):((V1={})["immer-nothing"]=!0,V1),U1=c0?Symbol.for("immer-draftable"):"__$immer_draftable",Me=c0?Symbol.for("immer-state"):"__$immer_state",vL=""+Object.prototype.constructor,go=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,fb=Object.getOwnPropertyDescriptors||function(t){var e={};return go(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},tg={},Sl={get:function(t,e){if(e===Me)return t;var n=Gs(t);if(!mo(n,e))return function(s,i,o){var a,l=M1(i,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(s.k):void 0}(t,n,e);var r=n[e];return t.I||!Mr(r)?r:r===lp(t.t,e)?(cp(t),t.o[e]=eg(t.A.h,r,t)):r},has:function(t,e){return e in Gs(t)},ownKeys:function(t){return Reflect.ownKeys(Gs(t))},set:function(t,e,n){var r=M1(Gs(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var s=lp(Gs(t),e),i=s==null?void 0:s[Me];if(i&&i.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(ub(n,s)&&(n!==void 0||mo(t.t,e)))return!0;cp(t),es(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return lp(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,cp(t),es(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Gs(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){Un(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Un(12)}},Aa={};yi(Sl,function(t,e){Aa[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Aa.deleteProperty=function(t,e){return Aa.set.call(this,t,e,void 0)},Aa.set=function(t,e,n){return Sl.set.call(this,t[0],e,n,t[0])};var xL=function(){function t(n){var r=this;this.O=F1,this.D=!0,this.produce=function(s,i,o){if(typeof s=="function"&&typeof i!="function"){var a=i;i=s;var l=r;return function(v){var _=this;v===void 0&&(v=a);for(var x=arguments.length,g=Array(x>1?x-1:0),w=1;w<x;w++)g[w-1]=arguments[w];return l.produce(v,function(E){var T;return(T=i).call.apply(T,[_,E].concat(g))})}}var c;if(typeof i!="function"&&Un(6),o!==void 0&&typeof o!="function"&&Un(7),Mr(s)){var d=L1(r),h=eg(r,s,void 0),p=!0;try{c=i(h),p=!1}finally{p?cd(d):Zm(d)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(v){return op(d,o),ap(v,d)},function(v){throw cd(d),v}):(op(d,o),ap(c,d))}if(!s||typeof s!="object"){if((c=i(s))===void 0&&(c=s),c===db&&(c=void 0),r.D&&a0(c,!0),o){var m=[],y=[];lr("Patches").M(s,c,m,y),o(m,y)}return c}Un(21,s)},this.produceWithPatches=function(s,i){if(typeof s=="function")return function(c){for(var d=arguments.length,h=Array(d>1?d-1:0),p=1;p<d;p++)h[p-1]=arguments[p];return r.produceWithPatches(c,function(m){return s.apply(void 0,[m].concat(h))})};var o,a,l=r.produce(s,i,function(c,d){o=c,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){Mr(n)||Un(8),Is(n)&&(n=pL(n));var r=L1(this),s=eg(this,n,void 0);return s[Me].C=!0,Zm(r),s},e.finishDraft=function(n,r){var s=n&&n[Me],i=s.A;return op(i,r),ap(void 0,i)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!F1&&Un(20),this.O=n},e.applyPatches=function(n,r){var s;for(s=r.length-1;s>=0;s--){var i=r[s];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}s>-1&&(r=r.slice(s+1));var o=lr("Patches").$;return Is(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),yn=new xL,hb=yn.produce;yn.produceWithPatches.bind(yn);yn.setAutoFreeze.bind(yn);yn.setUseProxies.bind(yn);yn.applyPatches.bind(yn);yn.createDraft.bind(yn);yn.finishDraft.bind(yn);function Tl(t){"@babel/helpers - typeof";return Tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tl(t)}function wL(t,e){if(Tl(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Tl(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _L(t){var e=wL(t,"string");return Tl(e)==="symbol"?e:String(e)}function EL(t,e,n){return e=_L(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function z1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B1(Object(n),!0).forEach(function(r){EL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var W1=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),up=function(){return Math.random().toString(36).substring(7).split("").join(".")},fd={INIT:"@@redux/INIT"+up(),REPLACE:"@@redux/REPLACE"+up(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+up()}};function SL(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function pb(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(jt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(jt(1));return n(pb)(t,e)}if(typeof t!="function")throw new Error(jt(2));var s=t,i=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function d(){if(l)throw new Error(jt(3));return i}function h(v){if(typeof v!="function")throw new Error(jt(4));if(l)throw new Error(jt(5));var _=!0;return c(),a.push(v),function(){if(_){if(l)throw new Error(jt(6));_=!1,c();var g=a.indexOf(v);a.splice(g,1),o=null}}}function p(v){if(!SL(v))throw new Error(jt(7));if(typeof v.type>"u")throw new Error(jt(8));if(l)throw new Error(jt(9));try{l=!0,i=s(i,v)}finally{l=!1}for(var _=o=a,x=0;x<_.length;x++){var g=_[x];g()}return v}function m(v){if(typeof v!="function")throw new Error(jt(10));s=v,p({type:fd.REPLACE})}function y(){var v,_=h;return v={subscribe:function(g){if(typeof g!="object"||g===null)throw new Error(jt(11));function w(){g.next&&g.next(d())}w();var E=_(w);return{unsubscribe:E}}},v[W1]=function(){return this},v}return p({type:fd.INIT}),r={dispatch:p,subscribe:h,getState:d,replaceReducer:m},r[W1]=y,r}function TL(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:fd.INIT});if(typeof r>"u")throw new Error(jt(12));if(typeof n(void 0,{type:fd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(jt(13))})}function bL(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var s=e[r];typeof t[s]=="function"&&(n[s]=t[s])}var i=Object.keys(n),o;try{TL(n)}catch(a){o=a}return function(l,c){if(l===void 0&&(l={}),o)throw o;for(var d=!1,h={},p=0;p<i.length;p++){var m=i[p],y=n[m],v=l[m],_=y(v,c);if(typeof _>"u")throw c&&c.type,new Error(jt(14));h[m]=_,d=d||_!==v}return d=d||i.length!==Object.keys(l).length,d?h:l}}function hd(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,s){return function(){return r(s.apply(void 0,arguments))}})}function IL(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var s=r.apply(void 0,arguments),i=function(){throw new Error(jt(15))},o={getState:s.getState,dispatch:function(){return i.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return i=hd.apply(void 0,a)(s.dispatch),z1(z1({},s),{},{dispatch:i})}}}function mb(t){var e=function(r){var s=r.dispatch,i=r.getState;return function(o){return function(a){return typeof a=="function"?a(s,i,t):o(a)}}};return e}var gb=mb();gb.withExtraArgument=mb;const H1=gb;var yb=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),AL=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Oo=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,s=t.length;n<r;n++,s++)t[s]=e[n];return t},RL=Object.defineProperty,CL=Object.defineProperties,kL=Object.getOwnPropertyDescriptors,q1=Object.getOwnPropertySymbols,PL=Object.prototype.hasOwnProperty,NL=Object.prototype.propertyIsEnumerable,K1=function(t,e,n){return e in t?RL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},xs=function(t,e){for(var n in e||(e={}))PL.call(e,n)&&K1(t,n,e[n]);if(q1)for(var r=0,s=q1(e);r<s.length;r++){var n=s[r];NL.call(e,n)&&K1(t,n,e[n])}return t},dp=function(t,e){return CL(t,kL(e))},jL=function(t,e,n){return new Promise(function(r,s){var i=function(l){try{a(n.next(l))}catch(c){s(c)}},o=function(l){try{a(n.throw(l))}catch(c){s(c)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(i,o)};a((n=n.apply(t,e)).next())})},OL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?hd:hd.apply(null,arguments)};function LL(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var DL=function(t){yb(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Oo([void 0],n[0].concat(this)))):new(e.bind.apply(e,Oo([void 0],n.concat(this))))},e}(Array),ML=function(t){yb(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Oo([void 0],n[0].concat(this)))):new(e.bind.apply(e,Oo([void 0],n.concat(this))))},e}(Array);function ng(t){return Mr(t)?hb(t,function(){}):t}function $L(t){return typeof t=="boolean"}function VL(){return function(e){return FL(e)}}function FL(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new DL;return n&&($L(n)?r.push(H1):r.push(H1.withExtraArgument(n.extraArgument))),r}var UL=!0;function BL(t){var e=VL(),n=t||{},r=n.reducer,s=r===void 0?void 0:r,i=n.middleware,o=i===void 0?e():i,a=n.devTools,l=a===void 0?!0:a,c=n.preloadedState,d=c===void 0?void 0:c,h=n.enhancers,p=h===void 0?void 0:h,m;if(typeof s=="function")m=s;else if(LL(s))m=bL(s);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var y=o;typeof y=="function"&&(y=y(e));var v=IL.apply(void 0,y),_=hd;l&&(_=OL(xs({trace:!UL},typeof l=="object"&&l)));var x=new ML(v),g=x;Array.isArray(p)?g=Oo([v],p):typeof p=="function"&&(g=p(x));var w=_.apply(void 0,g);return pb(m,d,w)}function ws(t,e){function n(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(e){var i=e.apply(void 0,r);if(!i)throw new Error("prepareAction did not return an object");return xs(xs({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function vb(t){var e={},n=[],r,s={addCase:function(i,o){var a=typeof i=="string"?i:i.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,s},addMatcher:function(i,o){return n.push({matcher:i,reducer:o}),s},addDefaultCase:function(i){return r=i,s}};return t(s),[e,n,r]}function zL(t){return typeof t=="function"}function WL(t,e,n,r){n===void 0&&(n=[]);var s=typeof e=="function"?vb(e):[e,n,r],i=s[0],o=s[1],a=s[2],l;if(zL(t))l=function(){return ng(t())};else{var c=ng(t);l=function(){return c}}function d(h,p){h===void 0&&(h=l());var m=Oo([i[p.type]],o.filter(function(y){var v=y.matcher;return v(p)}).map(function(y){var v=y.reducer;return v}));return m.filter(function(y){return!!y}).length===0&&(m=[a]),m.reduce(function(y,v){if(v)if(Is(y)){var _=y,x=v(_,p);return x===void 0?y:x}else{if(Mr(y))return hb(y,function(g){return v(g,p)});var x=v(y,p);if(x===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}return y},h)}return d.getInitialState=l,d}function HL(t,e){return t+"/"+e}function xb(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:ng(t.initialState),r=t.reducers||{},s=Object.keys(r),i={},o={},a={};s.forEach(function(d){var h=r[d],p=HL(e,d),m,y;"reducer"in h?(m=h.reducer,y=h.prepare):m=h,i[d]=m,o[p]=m,a[d]=y?ws(p,y):ws(p)});function l(){var d=typeof t.extraReducers=="function"?vb(t.extraReducers):[t.extraReducers],h=d[0],p=h===void 0?{}:h,m=d[1],y=m===void 0?[]:m,v=d[2],_=v===void 0?void 0:v,x=xs(xs({},p),o);return WL(n,function(g){for(var w in x)g.addCase(w,x[w]);for(var E=0,T=y;E<T.length;E++){var S=T[E];g.addMatcher(S.matcher,S.reducer)}_&&g.addDefaultCase(_)})}var c;return{name:e,reducer:function(d,h){return c||(c=l()),c(d,h)},actions:a,caseReducers:i,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var qL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",KL=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=qL[Math.random()*64|0];return e},GL=["name","message","stack","code"],fp=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),G1=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),QL=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=GL;n<r.length;n++){var s=r[n];typeof t[s]=="string"&&(e[s]=t[s])}return e}return{message:String(t)}};(function(){function t(e,n,r){var s=ws(e+"/fulfilled",function(c,d,h,p){return{payload:c,meta:dp(xs({},p||{}),{arg:h,requestId:d,requestStatus:"fulfilled"})}}),i=ws(e+"/pending",function(c,d,h){return{payload:void 0,meta:dp(xs({},h||{}),{arg:d,requestId:c,requestStatus:"pending"})}}),o=ws(e+"/rejected",function(c,d,h,p,m){return{payload:p,error:(r&&r.serializeError||QL)(c||"Rejected"),meta:dp(xs({},m||{}),{arg:h,requestId:d,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(d,h,p){var m=r!=null&&r.idGenerator?r.idGenerator(c):KL(),y=new a,v;function _(g){v=g,y.abort()}var x=function(){return jL(this,null,function(){var g,w,E,T,S,I,b;return AL(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),T=(g=r==null?void 0:r.condition)==null?void 0:g.call(r,c,{getState:h,extra:p}),XL(T)?[4,T]:[3,2];case 1:T=A.sent(),A.label=2;case 2:if(T===!1||y.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(R,k){return y.signal.addEventListener("abort",function(){return k({name:"AbortError",message:v||"Aborted"})})}),d(i(m,c,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:m,arg:c},{getState:h,extra:p}))),[4,Promise.race([S,Promise.resolve(n(c,{dispatch:d,getState:h,extra:p,requestId:m,signal:y.signal,abort:_,rejectWithValue:function(R,k){return new fp(R,k)},fulfillWithValue:function(R,k){return new G1(R,k)}})).then(function(R){if(R instanceof fp)throw R;return R instanceof G1?s(R.payload,m,c,R.meta):s(R,m,c)})])];case 3:return E=A.sent(),[3,5];case 4:return I=A.sent(),E=I instanceof fp?o(null,m,c,I.payload,I.meta):o(I,m,c),[3,5];case 5:return b=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,b||d(E),[2,E]}})})}();return Object.assign(x,{abort:_,requestId:m,arg:c,unwrap:function(){return x.then(JL)}})}}return Object.assign(l,{pending:i,rejected:o,fulfilled:s,typePrefix:e})}return t.withTypes=function(){return t},t})();function JL(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function XL(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var u0="listenerMiddleware";ws(u0+"/add");ws(u0+"/removeAll");ws(u0+"/remove");var Q1;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);mL();let wb={...ji({}),currentIndex:0,song_in:""};const hp=JSON.parse(localStorage.getItem("hdmp3")||JSON.stringify({songs:[],current:""}));hp.songs&&hp.songs.forEach((t,e)=>{t.id===hp.current&&(wb={...t,currentIndex:e})});const J1={song:wb,playlist:{id:"",name:"",song_ids:[],time:0,count:0,by:"",image_url:"",blurhash_encode:""}},_b=xb({name:"song",initialState:J1,reducers:{setSong(t,e){t.song=e.payload?e.payload:J1.song},setPlaylist(t,e){t.playlist={...e.payload}}}}),Re=t=>t.song,{setSong:He,setPlaylist:Js}=_b.actions,YL=_b.reducer;var Eb={exports:{}},Sb={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lo=f;function ZL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var e3=typeof Object.is=="function"?Object.is:ZL,t3=Lo.useState,n3=Lo.useEffect,r3=Lo.useLayoutEffect,s3=Lo.useDebugValue;function i3(t,e){var n=e(),r=t3({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return r3(function(){s.value=n,s.getSnapshot=e,pp(s)&&i({inst:s})},[t,n,e]),n3(function(){return pp(s)&&i({inst:s}),t(function(){pp(s)&&i({inst:s})})},[t]),s3(n),n}function pp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!e3(t,n)}catch{return!0}}function o3(t,e){return e()}var a3=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?o3:i3;Sb.useSyncExternalStore=Lo.useSyncExternalStore!==void 0?Lo.useSyncExternalStore:a3;Eb.exports=Sb;var l3=Eb.exports,Tb={exports:{}},bb={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vf=f,c3=l3;function u3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var d3=typeof Object.is=="function"?Object.is:u3,f3=c3.useSyncExternalStore,h3=vf.useRef,p3=vf.useEffect,m3=vf.useMemo,g3=vf.useDebugValue;bb.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=h3(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=m3(function(){function l(m){if(!c){if(c=!0,d=m,m=r(m),s!==void 0&&o.hasValue){var y=o.value;if(s(y,m))return h=y}return h=m}if(y=h,d3(d,m))return y;var v=r(m);return s!==void 0&&s(y,v)?y:(d=m,h=v)}var c=!1,d,h,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,s]);var a=f3(t,i[0],i[1]);return p3(function(){o.hasValue=!0,o.value=a},[a]),g3(a),a};Tb.exports=bb;var y3=Tb.exports;function v3(t){t()}let Ib=v3;const x3=t=>Ib=t,w3=()=>Ib,X1=Symbol.for("react-redux-context"),Y1=typeof globalThis<"u"?globalThis:{};function _3(){var t;if(!f.createContext)return{};const e=(t=Y1[X1])!=null?t:Y1[X1]=new Map;let n=e.get(f.createContext);return n||(n=f.createContext(null),e.set(f.createContext,n)),n}const As=_3();function d0(t=As){return function(){return f.useContext(t)}}const Ab=d0(),E3=()=>{throw new Error("uSES not initialized!")};let Rb=E3;const S3=t=>{Rb=t},T3=(t,e)=>t===e;function b3(t=As){const e=t===As?Ab:d0(t);return function(r,s={}){const{equalityFn:i=T3,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof s=="function"?{equalityFn:s}:s,{store:l,subscription:c,getServerState:d,stabilityCheck:h,noopCheck:p}=e();f.useRef(!0);const m=f.useCallback({[r.name](v){return r(v)}}[r.name],[r,h,o]),y=Rb(c.addNestedSub,l.getState,d||l.getState,m,i);return f.useDebugValue(y),y}}const fe=b3();var Cb={exports:{}},Ie={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wt=typeof Symbol=="function"&&Symbol.for,f0=wt?Symbol.for("react.element"):60103,h0=wt?Symbol.for("react.portal"):60106,xf=wt?Symbol.for("react.fragment"):60107,wf=wt?Symbol.for("react.strict_mode"):60108,_f=wt?Symbol.for("react.profiler"):60114,Ef=wt?Symbol.for("react.provider"):60109,Sf=wt?Symbol.for("react.context"):60110,p0=wt?Symbol.for("react.async_mode"):60111,Tf=wt?Symbol.for("react.concurrent_mode"):60111,bf=wt?Symbol.for("react.forward_ref"):60112,If=wt?Symbol.for("react.suspense"):60113,I3=wt?Symbol.for("react.suspense_list"):60120,Af=wt?Symbol.for("react.memo"):60115,Rf=wt?Symbol.for("react.lazy"):60116,A3=wt?Symbol.for("react.block"):60121,R3=wt?Symbol.for("react.fundamental"):60117,C3=wt?Symbol.for("react.responder"):60118,k3=wt?Symbol.for("react.scope"):60119;function Sn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case f0:switch(t=t.type,t){case p0:case Tf:case xf:case _f:case wf:case If:return t;default:switch(t=t&&t.$$typeof,t){case Sf:case bf:case Rf:case Af:case Ef:return t;default:return e}}case h0:return e}}}function kb(t){return Sn(t)===Tf}Ie.AsyncMode=p0;Ie.ConcurrentMode=Tf;Ie.ContextConsumer=Sf;Ie.ContextProvider=Ef;Ie.Element=f0;Ie.ForwardRef=bf;Ie.Fragment=xf;Ie.Lazy=Rf;Ie.Memo=Af;Ie.Portal=h0;Ie.Profiler=_f;Ie.StrictMode=wf;Ie.Suspense=If;Ie.isAsyncMode=function(t){return kb(t)||Sn(t)===p0};Ie.isConcurrentMode=kb;Ie.isContextConsumer=function(t){return Sn(t)===Sf};Ie.isContextProvider=function(t){return Sn(t)===Ef};Ie.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===f0};Ie.isForwardRef=function(t){return Sn(t)===bf};Ie.isFragment=function(t){return Sn(t)===xf};Ie.isLazy=function(t){return Sn(t)===Rf};Ie.isMemo=function(t){return Sn(t)===Af};Ie.isPortal=function(t){return Sn(t)===h0};Ie.isProfiler=function(t){return Sn(t)===_f};Ie.isStrictMode=function(t){return Sn(t)===wf};Ie.isSuspense=function(t){return Sn(t)===If};Ie.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===xf||t===Tf||t===_f||t===wf||t===If||t===I3||typeof t=="object"&&t!==null&&(t.$$typeof===Rf||t.$$typeof===Af||t.$$typeof===Ef||t.$$typeof===Sf||t.$$typeof===bf||t.$$typeof===R3||t.$$typeof===C3||t.$$typeof===k3||t.$$typeof===A3)};Ie.typeOf=Sn;Cb.exports=Ie;var P3=Cb.exports,Pb=P3,N3={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},j3={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Nb={};Nb[Pb.ForwardRef]=N3;Nb[Pb.Memo]=j3;var Ce={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0=Symbol.for("react.element"),g0=Symbol.for("react.portal"),Cf=Symbol.for("react.fragment"),kf=Symbol.for("react.strict_mode"),Pf=Symbol.for("react.profiler"),Nf=Symbol.for("react.provider"),jf=Symbol.for("react.context"),O3=Symbol.for("react.server_context"),Of=Symbol.for("react.forward_ref"),Lf=Symbol.for("react.suspense"),Df=Symbol.for("react.suspense_list"),Mf=Symbol.for("react.memo"),$f=Symbol.for("react.lazy"),L3=Symbol.for("react.offscreen"),jb;jb=Symbol.for("react.module.reference");function Dn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case m0:switch(t=t.type,t){case Cf:case Pf:case kf:case Lf:case Df:return t;default:switch(t=t&&t.$$typeof,t){case O3:case jf:case Of:case $f:case Mf:case Nf:return t;default:return e}}case g0:return e}}}Ce.ContextConsumer=jf;Ce.ContextProvider=Nf;Ce.Element=m0;Ce.ForwardRef=Of;Ce.Fragment=Cf;Ce.Lazy=$f;Ce.Memo=Mf;Ce.Portal=g0;Ce.Profiler=Pf;Ce.StrictMode=kf;Ce.Suspense=Lf;Ce.SuspenseList=Df;Ce.isAsyncMode=function(){return!1};Ce.isConcurrentMode=function(){return!1};Ce.isContextConsumer=function(t){return Dn(t)===jf};Ce.isContextProvider=function(t){return Dn(t)===Nf};Ce.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===m0};Ce.isForwardRef=function(t){return Dn(t)===Of};Ce.isFragment=function(t){return Dn(t)===Cf};Ce.isLazy=function(t){return Dn(t)===$f};Ce.isMemo=function(t){return Dn(t)===Mf};Ce.isPortal=function(t){return Dn(t)===g0};Ce.isProfiler=function(t){return Dn(t)===Pf};Ce.isStrictMode=function(t){return Dn(t)===kf};Ce.isSuspense=function(t){return Dn(t)===Lf};Ce.isSuspenseList=function(t){return Dn(t)===Df};Ce.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Cf||t===Pf||t===kf||t===Lf||t===Df||t===L3||typeof t=="object"&&t!==null&&(t.$$typeof===$f||t.$$typeof===Mf||t.$$typeof===Nf||t.$$typeof===jf||t.$$typeof===Of||t.$$typeof===jb||t.getModuleId!==void 0)};Ce.typeOf=Dn;function D3(){const t=w3();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0,i=n={callback:r,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){!s||e===null||(s=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}const Z1={notify(){},get:()=>[]};function M3(t,e){let n,r=Z1;function s(h){return l(),r.subscribe(h)}function i(){r.notify()}function o(){d.onStateChange&&d.onStateChange()}function a(){return!!n}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=D3())}function c(){n&&(n(),n=void 0,r.clear(),r=Z1)}const d={addNestedSub:s,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:c,getListeners:()=>r};return d}const $3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",V3=$3?f.useLayoutEffect:f.useEffect;function F3({store:t,context:e,children:n,serverState:r,stabilityCheck:s="once",noopCheck:i="once"}){const o=f.useMemo(()=>{const c=M3(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:s,noopCheck:i}},[t,r,s,i]),a=f.useMemo(()=>t.getState(),[t]);V3(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||As;return f.createElement(l.Provider,{value:o},n)}function Ob(t=As){const e=t===As?Ab:d0(t);return function(){const{store:r}=e();return r}}const U3=Ob();function B3(t=As){const e=t===As?U3:Ob(t);return function(){return e().dispatch}}const et=B3();S3(y3.useSyncExternalStoreWithSelector);x3(Qo.unstable_batchedUpdates);let y0=[];const ew=JSON.parse(localStorage.getItem("hdmp3")||JSON.stringify({songs:[],current:""}));ew&&(y0=ew.songs);const z3={actuallySongs:y0},W3={state:z3,setActuallySongs:()=>{}},Lb=f.createContext(W3),H3=({children:t})=>{const[e,n]=f.useState(y0),{song:r}=fe(Re);return f.useEffect(()=>{localStorage.setItem("hdmp3",JSON.stringify({songs:e,current:r.id}))},[e,r.currentIndex]),u.jsx(Lb.Provider,{value:{state:{actuallySongs:e},setActuallySongs:n},children:t})},ht=()=>{const{setActuallySongs:t,state:{actuallySongs:e}}=f.useContext(Lb);return{actuallySongs:e,setActuallySongs:t,addToQueue:s=>{const i=[...e];i.push(s),t(i),console.log("setActuallySongs")},removeFromQueue:s=>{const i=e.filter(o=>o.id!==s.id);t(i),console.log("setActuallySongs")}}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},q3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Mb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[d],n[h],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Db(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):q3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new K3;const p=i<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const y=c<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class K3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const G3=function(t){const e=Db(t);return Mb.encodeByteArray(e,!0)},pd=function(t){return G3(t).replace(/\./g,"")},$b=function(t){try{return Mb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3=()=>Q3().__FIREBASE_DEFAULTS__,X3=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Y3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$b(t[1]);return e&&JSON.parse(e)},Vf=()=>{try{return J3()||X3()||Y3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Vb=t=>{var e,n;return(n=(e=Vf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Fb=t=>{const e=Vb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ub=()=>{var t;return(t=Vf())===null||t===void 0?void 0:t.config},Bb=t=>{var e;return(e=Vf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[pd(JSON.stringify(n)),pd(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function tD(){var t;const e=(t=Vf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function rD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sD(){const t=zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function iD(){try{return typeof indexedDB=="object"}catch{return!1}}function oD(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD="FirebaseError";class wr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=aD,Object.setPrototypeOf(this,wr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yl.prototype.create)}}class Yl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?lD(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new wr(s,a,r)}}function lD(t,e){return t.replace(cD,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const cD=/\{\$([^}]+)}/g;function uD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function md(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(tw(i)&&tw(o)){if(!md(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function tw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function dD(t,e){const n=new fD(t,e);return n.subscribe.bind(n)}class fD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");hD(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=mp),s.error===void 0&&(s.error=mp),s.complete===void 0&&(s.complete=mp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function mp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(t){return t&&t._delegate?t._delegate:t}class Rs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Z3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gD(e))try{this.getOrInitializeService({instanceIdentifier:Qs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qs){return this.instances.has(e)}getOptions(e=Qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qs){return this.component?this.component.multipleInstances?e:Qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mD(t){return t===Qs?void 0:t}function gD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const vD={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},xD=_e.INFO,wD={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},_D=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=wD[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class v0{constructor(e){this.name=e,this._logLevel=xD,this._logHandler=_D,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const ED=(t,e)=>e.some(n=>t instanceof n);let nw,rw;function SD(){return nw||(nw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TD(){return rw||(rw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wb=new WeakMap,rg=new WeakMap,Hb=new WeakMap,gp=new WeakMap,x0=new WeakMap;function bD(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(_s(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Wb.set(n,t)}).catch(()=>{}),x0.set(e,t),e}function ID(t){if(rg.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});rg.set(t,e)}let sg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Hb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _s(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function AD(t){sg=t(sg)}function RD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(yp(this),e,...n);return Hb.set(r,e.sort?e.sort():[e]),_s(r)}:TD().includes(t)?function(...e){return t.apply(yp(this),e),_s(Wb.get(this))}:function(...e){return _s(t.apply(yp(this),e))}}function CD(t){return typeof t=="function"?RD(t):(t instanceof IDBTransaction&&ID(t),ED(t,SD())?new Proxy(t,sg):t)}function _s(t){if(t instanceof IDBRequest)return bD(t);if(gp.has(t))return gp.get(t);const e=CD(t);return e!==t&&(gp.set(t,e),x0.set(e,t)),e}const yp=t=>x0.get(t);function kD(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=_s(o);return r&&o.addEventListener("upgradeneeded",l=>{r(_s(o.result),l.oldVersion,l.newVersion,_s(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const PD=["get","getKey","getAll","getAllKeys","count"],ND=["put","add","delete","clear"],vp=new Map;function sw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vp.get(e))return vp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=ND.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||PD.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return vp.set(e,i),i}AD(t=>({...t,get:(e,n,r)=>sw(e,n)||t.get(e,n,r),has:(e,n)=>!!sw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(OD(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function OD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ig="@firebase/app",iw="0.9.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new v0("@firebase/app"),LD="@firebase/app-compat",DD="@firebase/analytics-compat",MD="@firebase/analytics",$D="@firebase/app-check-compat",VD="@firebase/app-check",FD="@firebase/auth",UD="@firebase/auth-compat",BD="@firebase/database",zD="@firebase/database-compat",WD="@firebase/functions",HD="@firebase/functions-compat",qD="@firebase/installations",KD="@firebase/installations-compat",GD="@firebase/messaging",QD="@firebase/messaging-compat",JD="@firebase/performance",XD="@firebase/performance-compat",YD="@firebase/remote-config",ZD="@firebase/remote-config-compat",eM="@firebase/storage",tM="@firebase/storage-compat",nM="@firebase/firestore",rM="@firebase/firestore-compat",sM="firebase",iM="10.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="[DEFAULT]",oM={[ig]:"fire-core",[LD]:"fire-core-compat",[MD]:"fire-analytics",[DD]:"fire-analytics-compat",[VD]:"fire-app-check",[$D]:"fire-app-check-compat",[FD]:"fire-auth",[UD]:"fire-auth-compat",[BD]:"fire-rtdb",[zD]:"fire-rtdb-compat",[WD]:"fire-fn",[HD]:"fire-fn-compat",[qD]:"fire-iid",[KD]:"fire-iid-compat",[GD]:"fire-fcm",[QD]:"fire-fcm-compat",[JD]:"fire-perf",[XD]:"fire-perf-compat",[YD]:"fire-rc",[ZD]:"fire-rc-compat",[eM]:"fire-gcs",[tM]:"fire-gcs-compat",[nM]:"fire-fst",[rM]:"fire-fst-compat","fire-js":"fire-js",[sM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=new Map,ag=new Map;function aM(t,e){try{t.container.addComponent(e)}catch(n){vi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xi(t){const e=t.name;if(ag.has(e))return vi.debug(`There were multiple attempts to register component ${e}.`),!1;ag.set(e,t);for(const n of gd.values())aM(n,t);return!0}function Ff(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Es=new Yl("app","Firebase",lM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=iM;function qb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:og,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Es.create("bad-app-name",{appName:String(s)});if(n||(n=Ub()),!n)throw Es.create("no-options");const i=gd.get(s);if(i){if(md(n,i.options)&&md(r,i.config))return i;throw Es.create("duplicate-app",{appName:s})}const o=new yD(s);for(const l of ag.values())o.addComponent(l);const a=new cM(n,r,o);return gd.set(s,a),a}function w0(t=og){const e=gd.get(t);if(!e&&t===og&&Ub())return qb();if(!e)throw Es.create("no-app",{appName:t});return e}function cr(t,e,n){var r;let s=(r=oM[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vi.warn(a.join(" "));return}xi(new Rs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM="firebase-heartbeat-database",dM=1,bl="firebase-heartbeat-store";let xp=null;function Kb(){return xp||(xp=kD(uM,dM,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(bl)}}}).catch(t=>{throw Es.create("idb-open",{originalErrorMessage:t.message})})),xp}async function fM(t){try{return await(await Kb()).transaction(bl).objectStore(bl).get(Gb(t))}catch(e){if(e instanceof wr)vi.warn(e.message);else{const n=Es.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vi.warn(n.message)}}}async function ow(t,e){try{const r=(await Kb()).transaction(bl,"readwrite");await r.objectStore(bl).put(e,Gb(t)),await r.done}catch(n){if(n instanceof wr)vi.warn(n.message);else{const r=Es.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});vi.warn(r.message)}}}function Gb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=1024,pM=30*24*60*60*1e3;class mM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=aw();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=pM}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=aw(),{heartbeatsToSend:n,unsentEntries:r}=gM(this._heartbeatsCache.heartbeats),s=pd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function aw(){return new Date().toISOString().substring(0,10)}function gM(t,e=hM){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),lw(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),lw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class yM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iD()?oD().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await fM(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ow(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ow(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function lw(t){return pd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(t){xi(new Rs("platform-logger",e=>new jD(e),"PRIVATE")),xi(new Rs("heartbeat",e=>new mM(e),"PRIVATE")),cr(ig,iw,t),cr(ig,iw,"esm2017"),cr("fire-js","")}vM("");var xM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},q,_0=_0||{},oe=xM||self;function Uf(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ec(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function wM(t){return Object.prototype.hasOwnProperty.call(t,wp)&&t[wp]||(t[wp]=++_M)}var wp="closure_uid_"+(1e9*Math.random()>>>0),_M=0;function EM(t,e,n){return t.call.apply(t.bind,arguments)}function SM(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function $t(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?$t=EM:$t=SM,$t.apply(null,arguments)}function qc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function _t(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function $s(){this.s=this.s,this.o=this.o}var TM=0;$s.prototype.s=!1;$s.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),TM!=0)&&wM(this)};$s.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Qb=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function E0(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function cw(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Uf(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function Vt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Vt.prototype.h=function(){this.defaultPrevented=!0};var bM=function(){if(!oe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{oe.addEventListener("test",()=>{},e),oe.removeEventListener("test",()=>{},e)}catch{}return t}();function Il(t){return/^[\s\xa0]*$/.test(t)}function Bf(){var t=oe.navigator;return t&&(t=t.userAgent)?t:""}function Xn(t){return Bf().indexOf(t)!=-1}function S0(t){return S0[" "](t),t}S0[" "]=function(){};function IM(t,e){var n=v$;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var AM=Xn("Opera"),Do=Xn("Trident")||Xn("MSIE"),Jb=Xn("Edge"),lg=Jb||Do,Xb=Xn("Gecko")&&!(Bf().toLowerCase().indexOf("webkit")!=-1&&!Xn("Edge"))&&!(Xn("Trident")||Xn("MSIE"))&&!Xn("Edge"),RM=Bf().toLowerCase().indexOf("webkit")!=-1&&!Xn("Edge");function Yb(){var t=oe.document;return t?t.documentMode:void 0}var cg;e:{var _p="",Ep=function(){var t=Bf();if(Xb)return/rv:([^\);]+)(\)|;)/.exec(t);if(Jb)return/Edge\/([\d\.]+)/.exec(t);if(Do)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(RM)return/WebKit\/(\S+)/.exec(t);if(AM)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Ep&&(_p=Ep?Ep[1]:""),Do){var Sp=Yb();if(Sp!=null&&Sp>parseFloat(_p)){cg=String(Sp);break e}}cg=_p}var ug;if(oe.document&&Do){var uw=Yb();ug=uw||parseInt(cg,10)||void 0}else ug=void 0;var CM=ug;function Al(t,e){if(Vt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Xb){e:{try{S0(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:kM[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Al.$.h.call(this)}}_t(Al,Vt);var kM={2:"touch",3:"pen",4:"mouse"};Al.prototype.h=function(){Al.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var tc="closure_listenable_"+(1e6*Math.random()|0),PM=0;function NM(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++PM,this.fa=this.ia=!1}function zf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function T0(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function jM(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function Zb(t){const e={};for(const n in t)e[n]=t[n];return e}const dw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function eI(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<dw.length;i++)n=dw[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Wf(t){this.src=t,this.g={},this.h=0}Wf.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=fg(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new NM(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function dg(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=Qb(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(zf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function fg(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var b0="closure_lm_"+(1e6*Math.random()|0),Tp={};function tI(t,e,n,r,s){if(r&&r.once)return rI(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)tI(t,e[i],n,r,s);return null}return n=R0(n),t&&t[tc]?t.O(e,n,ec(r)?!!r.capture:!!r,s):nI(t,e,n,!1,r,s)}function nI(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=ec(s)?!!s.capture:!!s,a=A0(t);if(a||(t[b0]=a=new Wf(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=OM(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)bM||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(iI(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function OM(){function t(n){return e.call(t.src,t.listener,n)}const e=LM;return t}function rI(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)rI(t,e[i],n,r,s);return null}return n=R0(n),t&&t[tc]?t.P(e,n,ec(r)?!!r.capture:!!r,s):nI(t,e,n,!0,r,s)}function sI(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)sI(t,e[i],n,r,s);else r=ec(r)?!!r.capture:!!r,n=R0(n),t&&t[tc]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=fg(i,n,r,s),-1<n&&(zf(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=A0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=fg(e,n,r,s)),(n=-1<t?e[t]:null)&&I0(n))}function I0(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[tc])dg(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(iI(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=A0(e))?(dg(n,t),n.h==0&&(n.src=null,e[b0]=null)):zf(t)}}}function iI(t){return t in Tp?Tp[t]:Tp[t]="on"+t}function LM(t,e){if(t.fa)t=!0;else{e=new Al(e,this);var n=t.listener,r=t.la||t.src;t.ia&&I0(t),t=n.call(r,e)}return t}function A0(t){return t=t[b0],t instanceof Wf?t:null}var bp="__closure_events_fn_"+(1e9*Math.random()>>>0);function R0(t){return typeof t=="function"?t:(t[bp]||(t[bp]=function(e){return t.handleEvent(e)}),t[bp])}function xt(){$s.call(this),this.i=new Wf(this),this.S=this,this.J=null}_t(xt,$s);xt.prototype[tc]=!0;xt.prototype.removeEventListener=function(t,e,n,r){sI(this,t,e,n,r)};function Rt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Vt(e,t);else if(e instanceof Vt)e.target=e.target||t;else{var s=e;e=new Vt(r,t),eI(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=Kc(o,r,!0,e)&&s}if(o=e.g=t,s=Kc(o,r,!0,e)&&s,s=Kc(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=Kc(o,r,!1,e)&&s}xt.prototype.N=function(){if(xt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)zf(n[r]);delete t.g[e],t.h--}}this.J=null};xt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};xt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Kc(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&dg(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var C0=oe.JSON.stringify;class DM{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function MM(){var t=k0;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class $M{constructor(){this.h=this.g=null}add(e,n){const r=oI.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var oI=new DM(()=>new VM,t=>t.reset());class VM{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function FM(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function UM(t){oe.setTimeout(()=>{throw t},0)}let Rl,Cl=!1,k0=new $M,aI=()=>{const t=oe.Promise.resolve(void 0);Rl=()=>{t.then(BM)}};var BM=()=>{for(var t;t=MM();){try{t.h.call(t.g)}catch(n){UM(n)}var e=oI;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Cl=!1};function Hf(t,e){xt.call(this),this.h=t||1,this.g=e||oe,this.j=$t(this.qb,this),this.l=Date.now()}_t(Hf,xt);q=Hf.prototype;q.ga=!1;q.T=null;q.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Rt(this,"tick"),this.ga&&(P0(this),this.start()))}};q.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function P0(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}q.N=function(){Hf.$.N.call(this),P0(this),delete this.g};function N0(t,e,n){if(typeof t=="function")n&&(t=$t(t,n));else if(t&&typeof t.handleEvent=="function")t=$t(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:oe.setTimeout(t,e||0)}function lI(t){t.g=N0(()=>{t.g=null,t.i&&(t.i=!1,lI(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class zM extends $s{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:lI(this)}N(){super.N(),this.g&&(oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kl(t){$s.call(this),this.h=t,this.g={}}_t(kl,$s);var fw=[];function cI(t,e,n,r){Array.isArray(n)||(n&&(fw[0]=n.toString()),n=fw);for(var s=0;s<n.length;s++){var i=tI(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function uI(t){T0(t.g,function(e,n){this.g.hasOwnProperty(n)&&I0(e)},t),t.g={}}kl.prototype.N=function(){kl.$.N.call(this),uI(this)};kl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function qf(){this.g=!0}qf.prototype.Ea=function(){this.g=!1};function WM(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var d=c[0];c=c[1];var h=d.split("_");o=2<=h.length&&h[1]=="type"?o+(d+"="+c+"&"):o+(d+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function HM(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function oo(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+KM(t,n)+(r?" "+r:"")})}function qM(t,e){t.info(function(){return"TIMEOUT: "+e})}qf.prototype.info=function(){};function KM(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return C0(n)}catch{return e}}var Li={},hw=null;function Kf(){return hw=hw||new xt}Li.Ta="serverreachability";function dI(t){Vt.call(this,Li.Ta,t)}_t(dI,Vt);function Pl(t){const e=Kf();Rt(e,new dI(e))}Li.STAT_EVENT="statevent";function fI(t,e){Vt.call(this,Li.STAT_EVENT,t),this.stat=e}_t(fI,Vt);function Gt(t){const e=Kf();Rt(e,new fI(e,t))}Li.Ua="timingevent";function hI(t,e){Vt.call(this,Li.Ua,t),this.size=e}_t(hI,Vt);function nc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return oe.setTimeout(function(){t()},e)}var Gf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},pI={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function j0(){}j0.prototype.h=null;function pw(t){return t.h||(t.h=t.i())}function mI(){}var rc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function O0(){Vt.call(this,"d")}_t(O0,Vt);function L0(){Vt.call(this,"c")}_t(L0,Vt);var hg;function Qf(){}_t(Qf,j0);Qf.prototype.g=function(){return new XMLHttpRequest};Qf.prototype.i=function(){return{}};hg=new Qf;function sc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new kl(this),this.P=GM,t=lg?125:void 0,this.V=new Hf(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new gI}function gI(){this.i=null,this.g="",this.h=!1}var GM=45e3,pg={},yd={};q=sc.prototype;q.setTimeout=function(t){this.P=t};function mg(t,e,n){t.L=1,t.v=Xf($r(e)),t.s=n,t.S=!0,yI(t,null)}function yI(t,e){t.G=Date.now(),ic(t),t.A=$r(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),bI(n.i,"t",r),t.C=0,n=t.l.J,t.h=new gI,t.g=qI(t.l,n?e:null,!t.s),0<t.O&&(t.M=new zM($t(t.Pa,t,t.g),t.O)),cI(t.U,t.g,"readystatechange",t.nb),e=t.I?Zb(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Pl(),WM(t.j,t.u,t.A,t.m,t.W,t.s)}q.nb=function(t){t=t.target;const e=this.M;e&&nr(t)==3?e.l():this.Pa(t)};q.Pa=function(t){try{if(t==this.g)e:{const d=nr(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>d)&&(d!=3||lg||this.g&&(this.h.h||this.g.ja()||vw(this.g)))){this.J||d!=4||e==7||(e==8||0>=h?Pl(3):Pl(2)),Jf(this);var n=this.g.da();this.ca=n;t:if(vI(this)){var r=vw(this.g);t="";var s=r.length,i=nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ei(this),Wa(this);var o="";break t}this.h.i=new oe.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,HM(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Il(a)){var c=a;break t}}c=null}if(n=c)oo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gg(this,n);else{this.i=!1,this.o=3,Gt(12),ei(this),Wa(this);break e}}this.S?(xI(this,d,o),lg&&this.i&&d==3&&(cI(this.U,this.V,"tick",this.mb),this.V.start())):(oo(this.j,this.m,o,null),gg(this,o)),d==4&&ei(this),this.i&&!this.J&&(d==4?BI(this.l,this):(this.i=!1,ic(this)))}else m$(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Gt(12)):(this.o=0,Gt(13)),ei(this),Wa(this)}}}catch{}finally{}};function vI(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function xI(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=QM(t,n),s==yd){e==4&&(t.o=4,Gt(14),r=!1),oo(t.j,t.m,null,"[Incomplete Response]");break}else if(s==pg){t.o=4,Gt(15),oo(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else oo(t.j,t.m,s,null),gg(t,s);vI(t)&&s!=yd&&s!=pg&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Gt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),U0(e),e.M=!0,Gt(11))):(oo(t.j,t.m,n,"[Invalid Chunked Response]"),ei(t),Wa(t))}q.mb=function(){if(this.g){var t=nr(this.g),e=this.g.ja();this.C<e.length&&(Jf(this),xI(this,t,e),this.i&&t!=4&&ic(this))}};function QM(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?yd:(n=Number(e.substring(n,r)),isNaN(n)?pg:(r+=1,r+n>e.length?yd:(e=e.slice(r,r+n),t.C=r+n,e)))}q.cancel=function(){this.J=!0,ei(this)};function ic(t){t.Y=Date.now()+t.P,wI(t,t.P)}function wI(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=nc($t(t.lb,t),e)}function Jf(t){t.B&&(oe.clearTimeout(t.B),t.B=null)}q.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(qM(this.j,this.A),this.L!=2&&(Pl(),Gt(17)),ei(this),this.o=2,Wa(this)):wI(this,this.Y-t)};function Wa(t){t.l.H==0||t.J||BI(t.l,t)}function ei(t){Jf(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,P0(t.V),uI(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function gg(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||yg(n.i,t))){if(!t.K&&yg(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)wd(n),th(n);else break e;F0(n),Gt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=nc($t(n.ib,n),6e3));if(1>=RI(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ti(n,11)}else if((t.K||n.g==t)&&wd(n),!Il(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const d=c[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const p=c[5];p!=null&&typeof p=="number"&&0<p&&(r=1.5*p,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const y=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var i=r.i;i.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(D0(i,i.h),i.h=null))}if(r.F){const v=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,je(r.I,r.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=HI(r,r.J?r.pa:null,r.Y),o.K){CI(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Jf(a),ic(a)),r.g=o}else FI(r);0<n.j.length&&nh(n)}else c[0]!="stop"&&c[0]!="close"||ti(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?ti(n,7):V0(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Pl(4)}catch{}}function JM(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Uf(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function XM(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Uf(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function _I(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Uf(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=XM(t),r=JM(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var EI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function YM(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function oi(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof oi){this.h=t.h,vd(this,t.j),this.s=t.s,this.g=t.g,xd(this,t.m),this.l=t.l;var e=t.i,n=new Nl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),mw(this,n),this.o=t.o}else t&&(e=String(t).match(EI))?(this.h=!1,vd(this,e[1]||"",!0),this.s=Ra(e[2]||""),this.g=Ra(e[3]||"",!0),xd(this,e[4]),this.l=Ra(e[5]||"",!0),mw(this,e[6]||"",!0),this.o=Ra(e[7]||"")):(this.h=!1,this.i=new Nl(null,this.h))}oi.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ca(e,gw,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ca(e,gw,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ca(n,n.charAt(0)=="/"?t$:e$,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ca(n,r$)),t.join("")};function $r(t){return new oi(t)}function vd(t,e,n){t.j=n?Ra(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function xd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function mw(t,e,n){e instanceof Nl?(t.i=e,s$(t.i,t.h)):(n||(e=Ca(e,n$)),t.i=new Nl(e,t.h))}function je(t,e,n){t.i.set(e,n)}function Xf(t){return je(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ra(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ca(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,ZM),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ZM(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var gw=/[#\/\?@]/g,e$=/[#\?:]/g,t$=/[#\?]/g,n$=/[#\?@]/g,r$=/#/g;function Nl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Vs(t){t.g||(t.g=new Map,t.h=0,t.i&&YM(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}q=Nl.prototype;q.add=function(t,e){Vs(this),this.i=null,t=ta(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function SI(t,e){Vs(t),e=ta(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function TI(t,e){return Vs(t),e=ta(t,e),t.g.has(e)}q.forEach=function(t,e){Vs(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};q.ta=function(){Vs(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};q.Z=function(t){Vs(this);let e=[];if(typeof t=="string")TI(this,t)&&(e=e.concat(this.g.get(ta(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};q.set=function(t,e){return Vs(this),this.i=null,t=ta(this,t),TI(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};q.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function bI(t,e,n){SI(t,e),0<n.length&&(t.i=null,t.g.set(ta(t,e),E0(n)),t.h+=n.length)}q.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function ta(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function s$(t,e){e&&!t.j&&(Vs(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(SI(this,r),bI(this,s,n))},t)),t.j=e}var i$=class{constructor(t,e){this.g=t,this.map=e}};function II(t){this.l=t||o$,oe.PerformanceNavigationTiming?(t=oe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(oe.g&&oe.g.Ka&&oe.g.Ka()&&oe.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var o$=10;function AI(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function RI(t){return t.h?1:t.g?t.g.size:0}function yg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function D0(t,e){t.g?t.g.add(e):t.h=e}function CI(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}II.prototype.cancel=function(){if(this.i=kI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function kI(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return E0(t.i)}var a$=class{stringify(t){return oe.JSON.stringify(t,void 0)}parse(t){return oe.JSON.parse(t,void 0)}};function l$(){this.g=new a$}function c$(t,e,n){const r=n||"";try{_I(t,function(s,i){let o=s;ec(s)&&(o=C0(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function u$(t,e){const n=new qf;if(oe.Image){const r=new Image;r.onload=qc(Gc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=qc(Gc,n,r,"TestLoadImage: error",!1,e),r.onabort=qc(Gc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=qc(Gc,n,r,"TestLoadImage: timeout",!1,e),oe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Gc(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Yf(t){this.l=t.fc||null,this.j=t.ob||!1}_t(Yf,j0);Yf.prototype.g=function(){return new Zf(this.l,this.j)};Yf.prototype.i=function(t){return function(){return t}}({});function Zf(t,e){xt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=M0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_t(Zf,xt);var M0=0;q=Zf.prototype;q.open=function(t,e){if(this.readyState!=M0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,jl(this)};q.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||oe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};q.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oc(this)),this.readyState=M0};q.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,jl(this)),this.g&&(this.readyState=3,jl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof oe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;PI(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function PI(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}q.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?oc(this):jl(this),this.readyState==3&&PI(this)}};q.Za=function(t){this.g&&(this.response=this.responseText=t,oc(this))};q.Ya=function(t){this.g&&(this.response=t,oc(this))};q.ka=function(){this.g&&oc(this)};function oc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,jl(t)}q.setRequestHeader=function(t,e){this.v.append(t,e)};q.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};q.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function jl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Zf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var d$=oe.JSON.parse;function qe(t){xt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=NI,this.L=this.M=!1}_t(qe,xt);var NI="",f$=/^https?$/i,h$=["POST","PUT"];q=qe.prototype;q.Oa=function(t){this.M=t};q.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():hg.g(),this.C=this.u?pw(this.u):pw(hg),this.g.onreadystatechange=$t(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){yw(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=oe.FormData&&t instanceof oe.FormData,!(0<=Qb(h$,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{LI(this),0<this.B&&((this.L=p$(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$t(this.ua,this)):this.A=N0(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){yw(this,i)}};function p$(t){return Do&&typeof t.timeout=="number"&&t.ontimeout!==void 0}q.ua=function(){typeof _0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Rt(this,"timeout"),this.abort(8))};function yw(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,jI(t),eh(t)}function jI(t){t.F||(t.F=!0,Rt(t,"complete"),Rt(t,"error"))}q.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Rt(this,"complete"),Rt(this,"abort"),eh(this))};q.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),eh(this,!0)),qe.$.N.call(this)};q.La=function(){this.s||(this.G||this.v||this.l?OI(this):this.kb())};q.kb=function(){OI(this)};function OI(t){if(t.h&&typeof _0<"u"&&(!t.C[1]||nr(t)!=4||t.da()!=2)){if(t.v&&nr(t)==4)N0(t.La,0,t);else if(Rt(t,"readystatechange"),nr(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(EI)[1]||null;!s&&oe.self&&oe.self.location&&(s=oe.self.location.protocol.slice(0,-1)),r=!f$.test(s?s.toLowerCase():"")}n=r}if(n)Rt(t,"complete"),Rt(t,"success");else{t.m=6;try{var i=2<nr(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",jI(t)}}finally{eh(t)}}}}function eh(t,e){if(t.g){LI(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Rt(t,"ready");try{n.onreadystatechange=r}catch{}}}function LI(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(oe.clearTimeout(t.A),t.A=null)}q.isActive=function(){return!!this.g};function nr(t){return t.g?t.g.readyState:0}q.da=function(){try{return 2<nr(this)?this.g.status:-1}catch{return-1}};q.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};q.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),d$(e)}};function vw(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case NI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function m$(t){const e={};t=(t.g&&2<=nr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Il(t[r]))continue;var n=FM(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}jM(e,function(r){return r.join(", ")})}q.Ia=function(){return this.m};q.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function DI(t){let e="";return T0(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function $0(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=DI(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):je(t,e,n))}function xa(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function MI(t){this.Ga=0,this.j=[],this.l=new qf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=xa("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=xa("baseRetryDelayMs",5e3,t),this.hb=xa("retryDelaySeedMs",1e4,t),this.eb=xa("forwardChannelMaxRetries",2,t),this.xa=xa("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new II(t&&t.concurrentRequestLimit),this.Ja=new l$,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}q=MI.prototype;q.ra=8;q.H=1;function V0(t){if($I(t),t.H==3){var e=t.W++,n=$r(t.I);if(je(n,"SID",t.K),je(n,"RID",e),je(n,"TYPE","terminate"),ac(t,n),e=new sc(t,t.l,e),e.L=2,e.v=Xf($r(n)),n=!1,oe.navigator&&oe.navigator.sendBeacon)try{n=oe.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&oe.Image&&(new Image().src=e.v,n=!0),n||(e.g=qI(e.l,null),e.g.ha(e.v)),e.G=Date.now(),ic(e)}WI(t)}function th(t){t.g&&(U0(t),t.g.cancel(),t.g=null)}function $I(t){th(t),t.u&&(oe.clearTimeout(t.u),t.u=null),wd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&oe.clearTimeout(t.m),t.m=null)}function nh(t){if(!AI(t.i)&&!t.m){t.m=!0;var e=t.Na;Rl||aI(),Cl||(Rl(),Cl=!0),k0.add(e,t),t.C=0}}function g$(t,e){return RI(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=nc($t(t.Na,t,e),zI(t,t.C)),t.C++,!0)}q.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new sc(this,this.l,t);let i=this.s;if(this.U&&(i?(i=Zb(i),eI(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=VI(this,s,e),n=$r(this.I),je(n,"RID",t),je(n,"CVER",22),this.F&&je(n,"X-HTTP-Session-Id",this.F),ac(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(DI(i)))+"&"+e:this.o&&$0(n,this.o,i)),D0(this.i,s),this.bb&&je(n,"TYPE","init"),this.P?(je(n,"$req",e),je(n,"SID","null"),s.aa=!0,mg(s,n,null)):mg(s,n,e),this.H=2}}else this.H==3&&(t?xw(this,t):this.j.length==0||AI(this.i)||xw(this))};function xw(t,e){var n;e?n=e.m:n=t.W++;const r=$r(t.I);je(r,"SID",t.K),je(r,"RID",n),je(r,"AID",t.V),ac(t,r),t.o&&t.s&&$0(r,t.o,t.s),n=new sc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=VI(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),D0(t.i,n),mg(n,r,e)}function ac(t,e){t.na&&T0(t.na,function(n,r){je(e,r,n)}),t.h&&_I({},function(n,r){je(e,r,n)})}function VI(t,e,n){n=Math.min(t.j.length,n);var r=t.h?$t(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const d=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{c$(d,o,"req"+c+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function FI(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Rl||aI(),Cl||(Rl(),Cl=!0),k0.add(e,t),t.A=0}}function F0(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=nc($t(t.Ma,t),zI(t,t.A)),t.A++,!0)}q.Ma=function(){if(this.u=null,UI(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=nc($t(this.jb,this),t)}};q.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Gt(10),th(this),UI(this))};function U0(t){t.B!=null&&(oe.clearTimeout(t.B),t.B=null)}function UI(t){t.g=new sc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=$r(t.wa);je(e,"RID","rpc"),je(e,"SID",t.K),je(e,"AID",t.V),je(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&je(e,"TO",t.qa),je(e,"TYPE","xmlhttp"),ac(t,e),t.o&&t.s&&$0(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Xf($r(e)),n.s=null,n.S=!0,yI(n,t)}q.ib=function(){this.v!=null&&(this.v=null,th(this),F0(this),Gt(19))};function wd(t){t.v!=null&&(oe.clearTimeout(t.v),t.v=null)}function BI(t,e){var n=null;if(t.g==e){wd(t),U0(t),t.g=null;var r=2}else if(yg(t.i,e))n=e.F,CI(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=Kf(),Rt(r,new hI(r,n)),nh(t)}else FI(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&g$(t,e)||r==2&&F0(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:ti(t,5);break;case 4:ti(t,10);break;case 3:ti(t,6);break;default:ti(t,2)}}}function zI(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ti(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=$t(t.pb,t);n||(n=new oi("//www.google.com/images/cleardot.gif"),oe.location&&oe.location.protocol=="http"||vd(n,"https"),Xf(n)),u$(n.toString(),r)}else Gt(2);t.H=0,t.h&&t.h.za(e),WI(t),$I(t)}q.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Gt(2)):(this.l.info("Failed to ping google.com"),Gt(1))};function WI(t){if(t.H=0,t.ma=[],t.h){const e=kI(t.i);(e.length!=0||t.j.length!=0)&&(cw(t.ma,e),cw(t.ma,t.j),t.i.i.length=0,E0(t.j),t.j.length=0),t.h.ya()}}function HI(t,e,n){var r=n instanceof oi?$r(n):new oi(n);if(r.g!="")e&&(r.g=e+"."+r.g),xd(r,r.m);else{var s=oe.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new oi(null);r&&vd(i,r),e&&(i.g=e),s&&xd(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&je(r,n,e),je(r,"VER",t.ra),ac(t,r),r}function qI(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new qe(new Yf({ob:!0})):new qe(t.va),e.Oa(t.J),e}q.isActive=function(){return!!this.h&&this.h.isActive(this)};function KI(){}q=KI.prototype;q.Ba=function(){};q.Aa=function(){};q.za=function(){};q.ya=function(){};q.isActive=function(){return!0};q.Va=function(){};function _d(){if(Do&&!(10<=Number(CM)))throw Error("Environmental error: no available transport.")}_d.prototype.g=function(t,e){return new vn(t,e)};function vn(t,e){xt.call(this),this.g=new MI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Il(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Il(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new na(this)}_t(vn,xt);vn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Gt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=HI(t,null,t.Y),nh(t)};vn.prototype.close=function(){V0(this.g)};vn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=C0(t),t=n);e.j.push(new i$(e.fb++,t)),e.H==3&&nh(e)};vn.prototype.N=function(){this.g.h=null,delete this.j,V0(this.g),delete this.g,vn.$.N.call(this)};function GI(t){O0.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}_t(GI,O0);function QI(){L0.call(this),this.status=1}_t(QI,L0);function na(t){this.g=t}_t(na,KI);na.prototype.Ba=function(){Rt(this.g,"a")};na.prototype.Aa=function(t){Rt(this.g,new GI(t))};na.prototype.za=function(t){Rt(this.g,new QI)};na.prototype.ya=function(){Rt(this.g,"b")};function y$(){this.blockSize=-1}function qn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}_t(qn,y$);qn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Ip(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}qn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)Ip(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){Ip(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){Ip(this,r),s=0;break}}this.h=s,this.i+=e};qn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function be(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var v$={};function B0(t){return-128<=t&&128>t?IM(t,function(e){return new be([e|0],0>e?-1:0)}):new be([t|0],0>t?-1:0)}function rr(t){if(isNaN(t)||!isFinite(t))return yo;if(0>t)return bt(rr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=vg;return new be(e,0)}function JI(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return bt(JI(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=rr(Math.pow(e,8)),r=yo,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=rr(Math.pow(e,i)),r=r.R(i).add(rr(o))):(r=r.R(n),r=r.add(rr(o)))}return r}var vg=4294967296,yo=B0(0),xg=B0(1),ww=B0(16777216);q=be.prototype;q.ea=function(){if(Rn(this))return-bt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:vg+r)*e,e*=vg}return t};q.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Ar(this))return"0";if(Rn(this))return"-"+bt(this).toString(t);for(var e=rr(Math.pow(t,6)),n=this,r="";;){var s=Sd(n,e).g;n=Ed(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,Ar(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};q.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Ar(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Rn(t){return t.h==-1}q.X=function(t){return t=Ed(this,t),Rn(t)?-1:Ar(t)?0:1};function bt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new be(n,~t.h).add(xg)}q.abs=function(){return Rn(this)?bt(this):this};q.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new be(n,n[n.length-1]&-2147483648?-1:0)};function Ed(t,e){return t.add(bt(e))}q.R=function(t){if(Ar(this)||Ar(t))return yo;if(Rn(this))return Rn(t)?bt(this).R(bt(t)):bt(bt(this).R(t));if(Rn(t))return bt(this.R(bt(t)));if(0>this.X(ww)&&0>t.X(ww))return rr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,Qc(n,2*r+2*s),n[2*r+2*s+1]+=i*l,Qc(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Qc(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Qc(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new be(n,0)};function Qc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function wa(t,e){this.g=t,this.h=e}function Sd(t,e){if(Ar(e))throw Error("division by zero");if(Ar(t))return new wa(yo,yo);if(Rn(t))return e=Sd(bt(t),e),new wa(bt(e.g),bt(e.h));if(Rn(e))return e=Sd(t,bt(e)),new wa(bt(e.g),e.h);if(30<t.g.length){if(Rn(t)||Rn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=xg,r=e;0>=r.X(t);)n=_w(n),r=_w(r);var s=zi(n,1),i=zi(r,1);for(r=zi(r,2),n=zi(n,2);!Ar(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=zi(r,1),n=zi(n,1)}return e=Ed(t,s.R(e)),new wa(s,e)}for(s=yo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=rr(n),o=i.R(e);Rn(o)||0<o.X(t);)n-=r,i=rr(n),o=i.R(e);Ar(i)&&(i=xg),s=s.add(i),t=Ed(t,o)}return new wa(s,t)}q.gb=function(t){return Sd(this,t).h};q.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new be(n,this.h&t.h)};q.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new be(n,this.h|t.h)};q.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new be(n,this.h^t.h)};function _w(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new be(n,t.h)}function zi(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new be(s,t.h)}_d.prototype.createWebChannel=_d.prototype.g;vn.prototype.send=vn.prototype.u;vn.prototype.open=vn.prototype.m;vn.prototype.close=vn.prototype.close;Gf.NO_ERROR=0;Gf.TIMEOUT=8;Gf.HTTP_ERROR=6;pI.COMPLETE="complete";mI.EventType=rc;rc.OPEN="a";rc.CLOSE="b";rc.ERROR="c";rc.MESSAGE="d";xt.prototype.listen=xt.prototype.O;qe.prototype.listenOnce=qe.prototype.P;qe.prototype.getLastError=qe.prototype.Sa;qe.prototype.getLastErrorCode=qe.prototype.Ia;qe.prototype.getStatus=qe.prototype.da;qe.prototype.getResponseJson=qe.prototype.Wa;qe.prototype.getResponseText=qe.prototype.ja;qe.prototype.send=qe.prototype.ha;qe.prototype.setWithCredentials=qe.prototype.Oa;qn.prototype.digest=qn.prototype.l;qn.prototype.reset=qn.prototype.reset;qn.prototype.update=qn.prototype.j;be.prototype.add=be.prototype.add;be.prototype.multiply=be.prototype.R;be.prototype.modulo=be.prototype.gb;be.prototype.compare=be.prototype.X;be.prototype.toNumber=be.prototype.ea;be.prototype.toString=be.prototype.toString;be.prototype.getBits=be.prototype.D;be.fromNumber=rr;be.fromString=JI;var x$=function(){return new _d},w$=function(){return Kf()},Ap=Gf,_$=pI,E$=Li,Ew={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Jc=mI,S$=qe,T$=qn,vo=be;const Sw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ra="10.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new v0("@firebase/firestore");function Tw(){return wi.logLevel}function Z(t,...e){if(wi.logLevel<=_e.DEBUG){const n=e.map(z0);wi.debug(`Firestore (${ra}): ${t}`,...n)}}function Vr(t,...e){if(wi.logLevel<=_e.ERROR){const n=e.map(z0);wi.error(`Firestore (${ra}): ${t}`,...n)}}function Mo(t,...e){if(wi.logLevel<=_e.WARN){const n=e.map(z0);wi.warn(`Firestore (${ra}): ${t}`,...n)}}function z0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${ra}) INTERNAL ASSERTION FAILED: `+t;throw Vr(e),new Error(e)}function De(t,e){t||ie()}function de(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends wr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class b${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class I${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class A${constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Nr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Nr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new XI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new Ot(e)}}class R${constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class C${constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new R$(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class k${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class P${constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string"),this.R=n.token,new k$(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=N$(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function $o(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new it(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new le(e)}static min(){return new le(new it(0,0))}static max(){return new le(new it(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ol.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ol?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Oe extends Ol{construct(e,n,r){return new Oe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Oe(n)}static emptyPath(){return new Oe([])}}const j$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends Ol{construct(e,n,r){return new Mt(e,n,r)}static isValidIdentifier(e){return j$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Mt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new X(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new X(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new X(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new X(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(n)}static emptyPath(){return new Mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Oe.fromString(e))}static fromName(e){return new te(Oe.fromString(e).popFirst(5))}static empty(){return new te(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Oe(e.slice()))}}function O$(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=le.fromTimestamp(r===1e9?new it(n+1,0):new it(n,r));return new Cs(s,te.empty(),e)}function L$(t){return new Cs(t.readTime,t.key,-1)}class Cs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Cs(le.min(),te.empty(),-1)}static max(){return new Cs(le.max(),te.empty(),-1)}}function D$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lc(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==M$)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new B((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function cc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}W0.ae=-1;function rh(t){return t==null}function Td(t){return t===0&&1/t==-1/0}function V$(t){return typeof t=="number"&&Number.isInteger(t)&&!Td(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function sa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ZI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){this.comparator=e,this.root=n||Tt.EMPTY}insert(e,n){return new ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tt.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xc(this.root,e,this.comparator,!0)}}class Xc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Tt.RED,this.left=s??Tt.EMPTY,this.right=i??Tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Tt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Tt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}Tt.EMPTY=null,Tt.RED=!0,Tt.BLACK=!1;Tt.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Iw(this.data.getIterator())}getIteratorFrom(e){return new Iw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ft(this.comparator);return n.data=e,n}}class Iw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new Bn([])}unionWith(e){let n=new Ft(Mt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $o(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new e2("Invalid base64 string: "+i):i}}(e);return new Wt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const F$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ks(t){if(De(!!t),typeof t=="string"){let e=0;const n=F$.exec(t);if(De(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _i(t){return typeof t=="string"?Wt.fromBase64String(t):Wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function q0(t){const e=t.mapValue.fields.__previous_value__;return H0(e)?q0(e):e}function Ll(t){const e=ks(t.mapValue.fields.__local_write_time__.timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U${constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Dl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Dl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Dl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ei(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?H0(t)?4:B$(t)?9007199254740991:10:ie()}function pr(t,e){if(t===e)return!0;const n=Ei(t);if(n!==Ei(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ll(t).isEqual(Ll(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ks(s.timestampValue),a=ks(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return _i(s.bytesValue).isEqual(_i(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return nt(s.geoPointValue.latitude)===nt(i.geoPointValue.latitude)&&nt(s.geoPointValue.longitude)===nt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return nt(s.integerValue)===nt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=nt(s.doubleValue),a=nt(i.doubleValue);return o===a?Td(o)===Td(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return $o(t.arrayValue.values||[],e.arrayValue.values||[],pr);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(bw(o)!==bw(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!pr(o[l],a[l])))return!1;return!0}(t,e);default:return ie()}}function Ml(t,e){return(t.values||[]).find(n=>pr(n,e))!==void 0}function Vo(t,e){if(t===e)return 0;const n=Ei(t),r=Ei(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=nt(i.integerValue||i.doubleValue),l=nt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Aw(t.timestampValue,e.timestampValue);case 4:return Aw(Ll(t),Ll(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(i,o){const a=_i(i),l=_i(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Ee(a[c],l[c]);if(d!==0)return d}return Ee(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ee(nt(i.latitude),nt(o.latitude));return a!==0?a:Ee(nt(i.longitude),nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const d=Vo(a[c],l[c]);if(d)return d}return Ee(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Yc.mapValue&&o===Yc.mapValue)return 0;if(i===Yc.mapValue)return 1;if(o===Yc.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=Ee(l[h],d[h]);if(p!==0)return p;const m=Vo(a[l[h]],c[d[h]]);if(m!==0)return m}return Ee(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ie()}}function Aw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=ks(t),r=ks(e),s=Ee(n.seconds,r.seconds);return s!==0?s:Ee(n.nanos,r.nanos)}function Fo(t){return wg(t)}function wg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ks(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return _i(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=wg(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${wg(n.fields[o])}`;return s+"}"}(t.mapValue):ie()}function Rw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _g(t){return!!t&&"integerValue"in t}function K0(t){return!!t&&"arrayValue"in t}function Cw(t){return!!t&&"nullValue"in t}function kw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Su(t){return!!t&&"mapValue"in t}function Ha(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return sa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ha(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ha(t.arrayValue.values[n]);return e}return Object.assign({},t)}function B$(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Su(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ha(n)}setAll(e){let n=Mt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Ha(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Su(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Su(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){sa(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Cn(Ha(this.value))}}function t2(t){const e=[];return sa(t.fields,(n,r)=>{const s=new Mt([n]);if(Su(r)){const i=t2(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Dt(e,0,le.min(),le.min(),le.min(),Cn.empty(),0)}static newFoundDocument(e,n,r,s){return new Dt(e,1,n,le.min(),r,s,0)}static newNoDocument(e,n){return new Dt(e,2,n,le.min(),le.min(),Cn.empty(),0)}static newUnknownDocument(e,n){return new Dt(e,3,n,le.min(),le.min(),Cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,n){this.position=e,this.inclusive=n}}function Pw(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=Vo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Nw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,n="asc"){this.field=e,this.dir=n}}function z$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{}class st extends n2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new H$(e,n,r):n==="array-contains"?new G$(e,r):n==="in"?new Q$(e,r):n==="not-in"?new J$(e,r):n==="array-contains-any"?new X$(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new q$(e,r):new K$(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Vo(n,this.value)):n!==null&&Ei(this.value)===Ei(n)&&this.matchesComparison(Vo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Kn extends n2{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Kn(e,n)}matches(e){return r2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function r2(t){return t.op==="and"}function s2(t){return W$(t)&&r2(t)}function W$(t){for(const e of t.filters)if(e instanceof Kn)return!1;return!0}function Eg(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+Fo(t.value);if(s2(t))return t.filters.map(e=>Eg(e)).join(",");{const e=t.filters.map(n=>Eg(n)).join(",");return`${t.op}(${e})`}}function i2(t,e){return t instanceof st?function(r,s){return s instanceof st&&r.op===s.op&&r.field.isEqual(s.field)&&pr(r.value,s.value)}(t,e):t instanceof Kn?function(r,s){return s instanceof Kn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&i2(o,s.filters[a]),!0):!1}(t,e):void ie()}function o2(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${Fo(n.value)}`}(t):t instanceof Kn?function(n){return n.op.toString()+" {"+n.getFilters().map(o2).join(" ,")+"}"}(t):"Filter"}class H$ extends st{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class q$ extends st{constructor(e,n){super(e,"in",n),this.keys=a2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class K$ extends st{constructor(e,n){super(e,"not-in",n),this.keys=a2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function a2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class G$ extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return K0(n)&&Ml(n.arrayValue,this.value)}}class Q$ extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ml(this.value.arrayValue,n)}}class J$ extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ml(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ml(this.value.arrayValue,n)}}class X$ extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!K0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ml(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y${constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.he=null}}function jw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new Y$(t,e,n,r,s,i,o)}function G0(t){const e=de(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Eg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),rh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fo(r)).join(",")),e.he=n}return e.he}function Q0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!z$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!i2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Nw(t.startAt,e.startAt)&&Nw(t.endAt,e.endAt)}function Sg(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function Z$(t,e,n,r,s,i,o,a){return new uc(t,e,n,r,s,i,o,a)}function J0(t){return new uc(t)}function Ow(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function l2(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function X0(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function c2(t){return t.collectionGroup!==null}function Ka(t){const e=de(t);if(e.Pe===null){e.Pe=[];const n=X0(e),r=l2(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new qa(n)),e.Pe.push(new qa(Mt.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.Pe.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new qa(Mt.keyField(),i))}}}return e.Pe}function Fr(t){const e=de(t);return e.Ie||(e.Ie=e6(e,Ka(t))),e.Ie}function e6(t,e){if(t.limitType==="F")return jw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new qa(s.field,i)});const n=t.endAt?new bd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new bd(t.startAt.position,t.startAt.inclusive):null;return jw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Tg(t,e){e.getFirstInequalityField(),X0(t);const n=t.filters.concat([e]);return new uc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function bg(t,e,n){return new uc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function sh(t,e){return Q0(Fr(t),Fr(e))&&t.limitType===e.limitType}function u2(t){return`${G0(Fr(t))}|lt:${t.limitType}`}function Ig(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>o2(s)).join(", ")}]`),rh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Fo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Fo(s)).join(",")),`Target(${r})`}(Fr(t))}; limitType=${t.limitType})`}function ih(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ka(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=Pw(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ka(r),s)||r.endAt&&!function(o,a,l){const c=Pw(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ka(r),s))}(t,e)}function t6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function d2(t){return(e,n)=>{let r=!1;for(const s of Ka(t)){const i=n6(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function n6(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Vo(l,c):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){sa(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return ZI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=new ze(te.comparator);function Ur(){return r6}const f2=new ze(te.comparator);function ka(...t){let e=f2;for(const n of t)e=e.insert(n.key,n);return e}function h2(t){let e=f2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ni(){return Ga()}function p2(){return Ga()}function Ga(){return new ia(t=>t.toString(),(t,e)=>t.isEqual(e))}const s6=new ze(te.comparator),i6=new Ft(te.comparator);function me(...t){let e=i6;for(const n of t)e=e.add(n);return e}const o6=new Ft(Ee);function a6(){return o6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Td(e)?"-0":e}}function g2(t){return{integerValue:""+t}}function l6(t,e){return V$(e)?g2(e):m2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(){this._=void 0}}function c6(t,e,n){return t instanceof Id?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&H0(i)&&(i=q0(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof $l?v2(t,e):t instanceof Vl?x2(t,e):function(s,i){const o=y2(s,i),a=Lw(o)+Lw(s.Ee);return _g(o)&&_g(s.Ee)?g2(a):m2(s.serializer,a)}(t,e)}function u6(t,e,n){return t instanceof $l?v2(t,e):t instanceof Vl?x2(t,e):n}function y2(t,e){return t instanceof Ad?function(r){return _g(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Id extends oh{}class $l extends oh{constructor(e){super(),this.elements=e}}function v2(t,e){const n=w2(e);for(const r of t.elements)n.some(s=>pr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Vl extends oh{constructor(e){super(),this.elements=e}}function x2(t,e){let n=w2(e);for(const r of t.elements)n=n.filter(s=>!pr(s,r));return{arrayValue:{values:n}}}class Ad extends oh{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Lw(t){return nt(t.integerValue||t.doubleValue)}function w2(t){return K0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function d6(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof $l&&s instanceof $l||r instanceof Vl&&s instanceof Vl?$o(r.elements,s.elements,pr):r instanceof Ad&&s instanceof Ad?pr(r.Ee,s.Ee):r instanceof Id&&s instanceof Id}(t.transform,e.transform)}class f6{constructor(e,n){this.version=e,this.transformResults=n}}class ur{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ur}static exists(e){return new ur(void 0,e)}static updateTime(e){return new ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ah{}function _2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Y0(t.key,ur.none()):new dc(t.key,t.data,ur.none());{const n=t.data,r=Cn.empty();let s=new Ft(Mt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Di(t.key,r,new Bn(s.toArray()),ur.none())}}function h6(t,e,n){t instanceof dc?function(s,i,o){const a=s.value.clone(),l=Mw(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Di?function(s,i,o){if(!Tu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Mw(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(E2(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Qa(t,e,n,r){return t instanceof dc?function(i,o,a,l){if(!Tu(i.precondition,o))return a;const c=i.value.clone(),d=$w(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Di?function(i,o,a,l){if(!Tu(i.precondition,o))return a;const c=$w(i.fieldTransforms,l,o),d=o.data;return d.setAll(E2(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Tu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function p6(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=y2(r.transform,s||null);i!=null&&(n===null&&(n=Cn.empty()),n.set(r.field,i))}return n||null}function Dw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&$o(r,s,(i,o)=>d6(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class dc extends ah{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Di extends ah{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function E2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Mw(t,e,n){const r=new Map;De(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,u6(o,a,n[s]))}return r}function $w(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,c6(i,o,e))}return r}class Y0 extends ah{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class m6 extends ah{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&h6(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Qa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Qa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=p2();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=_2(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&$o(this.mutations,e.mutations,(n,r)=>Dw(n,r))&&$o(this.baseMutations,e.baseMutations,(n,r)=>Dw(n,r))}}class Z0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){De(e.mutations.length===r.length);let s=function(){return s6}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Z0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt,ve;function x6(t){switch(t){default:return ie();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function S2(t){if(t===void 0)return Vr("GRPC error has no .code"),L.UNKNOWN;switch(t){case tt.OK:return L.OK;case tt.CANCELLED:return L.CANCELLED;case tt.UNKNOWN:return L.UNKNOWN;case tt.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case tt.INTERNAL:return L.INTERNAL;case tt.UNAVAILABLE:return L.UNAVAILABLE;case tt.UNAUTHENTICATED:return L.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case tt.NOT_FOUND:return L.NOT_FOUND;case tt.ALREADY_EXISTS:return L.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return L.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case tt.ABORTED:return L.ABORTED;case tt.OUT_OF_RANGE:return L.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return L.UNIMPLEMENTED;case tt.DATA_LOSS:return L.DATA_LOSS;default:return ie()}}(ve=tt||(tt={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6=new vo([4294967295,4294967295],0);function Vw(t){const e=w6().encode(t),n=new T$;return n.update(e),new Uint8Array(n.digest())}function Fw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new vo([n,r],0),new vo([s,i],0)]}class ev{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Pa(`Invalid padding: ${n}`);if(r<0)throw new Pa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Pa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Pa(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=vo.fromNumber(this.Ae)}Ve(e,n,r){let s=e.add(n.multiply(vo.fromNumber(r)));return s.compare(_6)===1&&(s=new vo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=Vw(e),[r,s]=Fw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);if(!this.me(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ev(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=Vw(e),[r,s]=Fw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Pa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,fc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new lh(le.min(),s,new ze(Ee),Ur(),me())}}class fc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new fc(r,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n,r,s){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=s}}class T2{constructor(e,n){this.targetId=e,this.ye=n}}class b2{constructor(e,n,r=Wt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Uw{constructor(){this.we=0,this.Se=zw(),this.be=Wt.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=me(),n=me(),r=me();return this.Se.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie()}}),new fc(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=zw()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class E6{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=Ur(),this.Ue=Bw(),this.We=new ze(Ee)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,s)=>{this.Ye(s)&&n(s)})}Xe(e){const n=e.targetId,r=e.ye.count,s=this.et(n);if(s){const i=s.target;if(Sg(i))if(r===0){const o=new te(i.path);this.je(n,o,Dt.newNoDocument(o,le.min()))}else De(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),l=a?this.rt(a,e,o):1;if(l!==0){this.Ze(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,c)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=_i(r).toUint8Array()}catch(l){if(l instanceof e2)return Mo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ev(o,s,i)}catch(l){return Mo(l instanceof Pa?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.je(n,i,null),s++)}),s}_t(e){const n=new Map;this.Ke.forEach((i,o)=>{const a=this.et(o);if(a){if(i.current&&Sg(a.target)){const l=new te(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,Dt.newNoDocument(l,e))}i.Fe&&(n.set(o,i.xe()),i.Oe())}});let r=me();this.Ue.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.et(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.$e.forEach((i,o)=>o.setReadTime(e));const s=new lh(e,n,this.We,this.$e,r);return this.$e=Ur(),this.Ue=Bw(),this.We=new ze(Ee),s}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const s=this.Je(e);this.ut(e,n)?s.Ne(n,1):s.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new Uw,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Ft(Ee),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new Uw),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function Bw(){return new ze(te.comparator)}function zw(){return new ze(te.comparator)}const S6=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),T6=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),b6=(()=>({and:"AND",or:"OR"}))();class I6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ag(t,e){return t.useProto3Json||rh(e)?e:{value:e}}function Rd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function I2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function A6(t,e){return Rd(t,e.toTimestamp())}function dr(t){return De(!!t),le.fromTimestamp(function(n){const r=ks(n);return new it(r.seconds,r.nanos)}(t))}function tv(t,e){return function(r){return new Oe(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function A2(t){const e=Oe.fromString(t);return De(P2(e)),e}function Rg(t,e){return tv(t.databaseId,e.path)}function Rp(t,e){const n=A2(e);if(n.get(1)!==t.databaseId.projectId)throw new X(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(R2(n))}function Cg(t,e){return tv(t.databaseId,e)}function R6(t){const e=A2(t);return e.length===4?Oe.emptyPath():R2(e)}function kg(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function R2(t){return De(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ww(t,e,n){return{name:Rg(t,e),fields:n.value.mapValue.fields}}function C6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(De(d===void 0||typeof d=="string"),Wt.fromBase64String(d||"")):(De(d===void 0||d instanceof Uint8Array),Wt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?L.UNKNOWN:S2(c.code);return new X(d,c.message||"")}(o);n=new b2(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Rp(t,r.document.name),i=dr(r.document.updateTime),o=r.document.createTime?dr(r.document.createTime):le.min(),a=new Cn({mapValue:{fields:r.document.fields}}),l=Dt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new bu(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Rp(t,r.document),i=r.readTime?dr(r.readTime):le.min(),o=Dt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new bu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Rp(t,r.document),i=r.removedTargetIds||[];n=new bu([],i,s,null)}else{if(!("filter"in e))return ie();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new v6(s,i),a=r.targetId;n=new T2(a,o)}}return n}function k6(t,e){let n;if(e instanceof dc)n={update:Ww(t,e.key,e.value)};else if(e instanceof Y0)n={delete:Rg(t,e.key)};else if(e instanceof Di)n={update:Ww(t,e.key,e.data),updateMask:V6(e.fieldMask)};else{if(!(e instanceof m6))return ie();n={verify:Rg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Id)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $l)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Vl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ad)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:A6(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie()}(t,e.precondition)),n}function P6(t,e){return t&&t.length>0?(De(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?dr(s.updateTime):dr(i);return o.isEqual(le.min())&&(o=dr(i)),new f6(o,s.transformResults||[])}(n,e))):[]}function N6(t,e){return{documents:[Cg(t,e.path)]}}function j6(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Cg(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Cg(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return k2(Kn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:Hi(h.field),direction:D6(h.dir)}}(c))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=Ag(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function O6(t){let e=R6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){De(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const p=C2(h);return p instanceof Kn&&s2(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(y){return new qa(qi(y.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,rh(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,m=h.values||[];return new bd(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,m=h.values||[];return new bd(m,p)}(n.endAt)),Z$(e,s,o,i,a,"F",l,c)}function L6(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function C2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=qi(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=qi(n.unaryFilter.field);return st.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=qi(n.unaryFilter.field);return st.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=qi(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return st.create(qi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Kn.create(n.compositeFilter.filters.map(r=>C2(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function D6(t){return S6[t]}function M6(t){return T6[t]}function $6(t){return b6[t]}function Hi(t){return{fieldPath:t.canonicalString()}}function qi(t){return Mt.fromServerFormat(t.fieldPath)}function k2(t){return t instanceof st?function(n){if(n.op==="=="){if(kw(n.value))return{unaryFilter:{field:Hi(n.field),op:"IS_NAN"}};if(Cw(n.value))return{unaryFilter:{field:Hi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(kw(n.value))return{unaryFilter:{field:Hi(n.field),op:"IS_NOT_NAN"}};if(Cw(n.value))return{unaryFilter:{field:Hi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hi(n.field),op:M6(n.op),value:n.value}}}(t):t instanceof Kn?function(n){const r=n.getFilters().map(s=>k2(s));return r.length===1?r[0]:{compositeFilter:{op:$6(n.op),filters:r}}}(t):ie()}function V6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function P2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,n,r,s,i=le.min(),o=le.min(),a=Wt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ls(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e){this.ht=e}}function U6(t){const e=O6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(){this._n=new z6}addToCollectionParentIndex(e,n){return this._n.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Cs.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class z6{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ft(Oe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ft(Oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Uo(0)}static Bn(){return new Uo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(){this.changes=new ia(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Qa(r.mutation,s,Bn.empty(),it.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){const s=ni();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ka();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ni();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Ur();const o=Ga(),a=function(){return Ga()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Di)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Qa(d.mutation,c,d.mutation.getFieldMask(),it.now())):o.set(c.key,Bn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new H6(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ga();let s=new ze((o,a)=>o-a),i=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Bn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||me()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=p2();d.forEach(p=>{if(!i.has(p)){const m=_2(n.get(p),r.get(p));m!==null&&h.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return te.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):c2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):B.resolve(ni());let a=-1,l=i;return o.next(c=>B.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?B.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,me())).next(d=>({batchId:a,changes:h2(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=ka();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=ka();return this.indexManager.getCollectionParents(e,s).next(o=>B.forEach(o,a=>{const l=function(d,h){return new uc(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((d,h)=>{i=i.insert(d,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((a,l)=>{const c=l.getKey();i.get(c)===null&&(i=i.insert(c,Dt.newInvalidDocument(c)))});let o=ka();return i.forEach((a,l)=>{const c=s.get(a);c!==void 0&&Qa(c.mutation,l,Bn.empty(),it.now()),ih(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return B.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:dr(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:U6(s.bundledQuery),readTime:dr(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(){this.overlays=new ze(te.comparator),this.hr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ni();return B.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.It(e,n,i)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=ni(),i=n.length+1,o=new te(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ze((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=ni(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=ni(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return B.resolve(a)}It(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new y6(n,r));let i=this.hr.get(n);i===void 0&&(i=me(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(){this.Pr=new Ft(mt.Ir),this.Tr=new Ft(mt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new mt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new mt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new te(new Oe([])),r=new mt(n,e),s=new mt(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new te(new Oe([])),r=new mt(n,e),s=new mt(n,e+1);let i=me();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new mt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class mt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return te.comparator(e.key,n.key)||Ee(e.pr,n.pr)}static Er(e,n){return Ee(e.pr,n.pr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ft(mt.Ir)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new g6(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new mt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new mt(n,0),s=new mt(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ft(Ee);return n.forEach(s=>{const i=new mt(s,0),o=new mt(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),B.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new mt(new te(i),0);let a=new Ft(Ee);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),B.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){De(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return B.forEach(n.mutations,s=>{const i=new mt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new mt(n,0),s=this.wr.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}vr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e){this.Cr=e,this.docs=function(){return new ze(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let r=Ur();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Dt.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Ur();const o=n.path,a=new te(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||D$(L$(d),r)<=0||(s.has(d.key)||ih(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie()}Fr(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new X6(this)}getSize(e){return B.resolve(this.size)}}class X6 extends W6{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e){this.persistence=e,this.Mr=new ia(n=>G0(n),Q0),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Or=0,this.Nr=new nv,this.targetCount=0,this.Br=Uo.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),B.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Uo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.qn(n),B.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),B.waitFor(i).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e,n){this.Lr={},this.overlays={},this.kr=new W0(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Y6(this),this.indexManager=new B6,this.remoteDocumentCache=function(s){return new J6(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new F6(n),this.$r=new K6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new G6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new Q6(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const s=new eV(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return B.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class eV extends $${constructor(e){super(),this.currentSequenceNumber=e}}class rv{constructor(e){this.persistence=e,this.zr=new nv,this.jr=null}static Hr(e){return new rv(e)}get Jr(){if(this.jr)return this.jr;throw ie()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),B.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Jr,r=>{const s=te.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,le.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return B.or([()=>B.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=me(),s=me();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new sv(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(){this.$i=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Wi(e,n).next(i=>i||this.Gi(e,n,s,r)).next(i=>i||this.zi(e,n))}Wi(e,n){if(Ow(n))return B.resolve(null);let r=Fr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=bg(n,null,"F"),r=Fr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=me(...i);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ji(n,a);return this.Hi(n,c,o,l.readTime)?this.Wi(e,bg(n,null,"F")):this.Ji(e,c,n,l)}))})))}Gi(e,n,r,s){return Ow(n)||s.isEqual(le.min())?this.zi(e,n):this.Ui.getDocuments(e,r).next(i=>{const o=this.ji(n,i);return this.Hi(n,o,r,s)?this.zi(e,n):(Tw()<=_e.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ig(n)),this.Ji(e,o,n,O$(s,-1)))})}ji(e,n){let r=new Ft(d2(e));return n.forEach((s,i)=>{ih(e,i)&&(r=r.add(i))}),r}Hi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}zi(e,n){return Tw()<=_e.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",Ig(n)),this.Ui.getDocumentsMatchingQuery(e,n,Cs.min())}Ji(e,n,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,n,r,s){this.persistence=e,this.Yi=n,this.serializer=s,this.Zi=new ze(Ee),this.Xi=new ia(i=>G0(i),Q0),this.es=new Map,this.ts=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this.ns(r)}ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new q6(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Zi))}}function rV(t,e,n,r){return new nV(t,e,n,r)}async function N2(t,e){const n=de(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=me();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function sV(t,e){const n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.ts.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,p=h.keys();let m=B.resolve();return p.forEach(y=>{m=m.next(()=>d.getEntry(l,y)).next(v=>{const _=c.docVersions.get(y);De(_!==null),v.version.compareTo(_)<0&&(h.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),d.addEntry(v)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=me();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function j2(t){const e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function iV(t,e){const n=de(t),r=e.snapshotVersion;let s=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ts.newChangeBuffer({trackRemovals:!0});s=n.Zi;const a=[];e.targetChanges.forEach((d,h)=>{const p=s.get(h);if(!p)return;a.push(n.Qr.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(i,d.addedDocuments,h)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Wt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(v,_,x){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(p,m,d)&&a.push(n.Qr.updateTargetData(i,m))});let l=Ur(),c=me();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(oV(i,o,e.documentUpdates).next(d=>{l=d.ss,c=d.os})),!r.isEqual(le.min())){const d=n.Qr.getLastRemoteSnapshotVersion(i).next(h=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return B.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Zi=s,i))}function oV(t,e,n){let r=me(),s=me();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Ur();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ss:o,os:s}})}function aV(t,e){const n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lV(t,e){const n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,B.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new ls(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Zi.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(r.targetId,r),n.Xi.set(e,r.targetId)),r})}async function Pg(t,e,n){const r=de(t),s=r.Zi.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!cc(o))throw o;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Zi=r.Zi.remove(e),r.Xi.delete(s.target)}function Hw(t,e,n){const r=de(t);let s=le.min(),i=me();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,c,d){const h=de(l),p=h.Xi.get(d);return p!==void 0?B.resolve(h.Zi.get(p)):h.Qr.getTargetData(c,d)}(r,o,Fr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Yi.getDocumentsMatchingQuery(o,e,n?s:le.min(),n?i:me())).next(a=>(cV(r,t6(e),a),{documents:a,_s:i})))}function cV(t,e,n){let r=t.es.get(e)||le.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.es.set(e,r)}class qw{constructor(){this.activeTargetIds=a6()}Is(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ts(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ps(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uV{constructor(){this.Ys=new qw,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}updateQueryState(e,n,r){this.Zs[e]=n}removeLocalQueryTarget(e){this.Ys.Ts(e)}isLocalQueryTarget(e){return this.Ys.activeTargetIds.has(e)}clearQueryState(e){delete this.Zs[e]}getAllActiveQueryTargets(){return this.Ys.activeTargetIds}isActiveQueryTarget(e){return this.Ys.activeTargetIds.has(e)}start(){return this.Ys=new qw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{Xs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(){this.eo=()=>this.no(),this.ro=()=>this.io(),this.so=[],this.oo()}Xs(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}oo(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}no(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}io(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zc=null;function Cp(){return Zc===null?Zc=function(){return 268435456+Math.round(2147483648*Math.random())}():Zc++,"0x"+Zc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e){this._o=e._o,this.ao=e.ao}uo(e){this.co=e}lo(e){this.ho=e}onMessage(e){this.Po=e}close(){this.ao()}send(e){this._o(e)}Io(){this.co()}To(e){this.ho(e)}Eo(e){this.Po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="WebChannelConnection";class pV extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ao=r+"://"+n.host,this.Ro=`projects/${s}/databases/${i}`,this.Vo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get mo(){return!1}fo(n,r,s,i,o){const a=Cp(),l=this.po(n,r);Z("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(c,i,o),this.wo(n,l,c,s).then(d=>(Z("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Mo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}So(n,r,s,i,o,a){return this.fo(n,r,s,i,o)}yo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ra}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}po(n,r){const s=fV[n];return`${this.Ao}/v1/${r}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}wo(e,n,r,s){const i=Cp();return new Promise((o,a)=>{const l=new S$;l.setWithCredentials(!0),l.listenOnce(_$.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ap.NO_ERROR:const d=l.getResponseJson();Z(Nt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case Ap.TIMEOUT:Z(Nt,`RPC '${e}' ${i} timed out`),a(new X(L.DEADLINE_EXCEEDED,"Request time out"));break;case Ap.HTTP_ERROR:const h=l.getStatus();if(Z(Nt,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const y=function(_){const x=_.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(x)>=0?x:L.UNKNOWN}(m.status);a(new X(y,m.message))}else a(new X(L.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new X(L.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{Z(Nt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);Z(Nt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}bo(e,n,r){const s=Cp(),i=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=x$(),a=w$(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.yo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");Z(Nt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);let p=!1,m=!1;const y=new hV({_o:_=>{m?Z(Nt,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(p||(Z(Nt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),Z(Nt,`RPC '${e}' stream ${s} sending:`,_),h.send(_))},ao:()=>h.close()}),v=(_,x,g)=>{_.listen(x,w=>{try{g(w)}catch(E){setTimeout(()=>{throw E},0)}})};return v(h,Jc.EventType.OPEN,()=>{m||Z(Nt,`RPC '${e}' stream ${s} transport opened.`)}),v(h,Jc.EventType.CLOSE,()=>{m||(m=!0,Z(Nt,`RPC '${e}' stream ${s} transport closed`),y.To())}),v(h,Jc.EventType.ERROR,_=>{m||(m=!0,Mo(Nt,`RPC '${e}' stream ${s} transport errored:`,_),y.To(new X(L.UNAVAILABLE,"The operation could not be completed")))}),v(h,Jc.EventType.MESSAGE,_=>{var x;if(!m){const g=_.data[0];De(!!g);const w=g,E=w.error||((x=w[0])===null||x===void 0?void 0:x.error);if(E){Z(Nt,`RPC '${e}' stream ${s} received error:`,E);const T=E.status;let S=function(A){const R=tt[A];if(R!==void 0)return S2(R)}(T),I=E.message;S===void 0&&(S=L.INTERNAL,I="Unknown error status: "+T+" with message "+E.message),m=!0,y.To(new X(S,I)),h.close()}else Z(Nt,`RPC '${e}' stream ${s} received:`,g),y.Eo(g)}}),v(a,E$.STAT_EVENT,_=>{_.stat===Ew.PROXY?Z(Nt,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===Ew.NOPROXY&&Z(Nt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.Io()},0),y}}function kp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(t){return new I6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Do=r,this.vo=s,this.Co=i,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}reset(){this.Fo=0}Oo(){this.Fo=this.Co}No(e){this.cancel();const n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),s=Math.max(0,n-r);s>0&&Z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Fo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Mo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.xo=Date.now(),e())),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}Lo(){this.Mo!==null&&(this.Mo.skipDelay(),this.Mo=null)}cancel(){this.Mo!==null&&(this.Mo.cancel(),this.Mo=null)}Bo(){return(Math.random()-.5)*this.Fo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.ko=r,this.qo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new O2(e,n)}Wo(){return this.state===1||this.state===5||this.Go()}Go(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.zo()}async stop(){this.Wo()&&await this.close(0)}jo(){this.state=0,this.Uo.reset()}Ho(){this.Go()&&this.Ko===null&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,()=>this.Jo()))}Yo(e){this.Zo(),this.stream.send(e)}async Jo(){if(this.Go())return this.close(0)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}Xo(){this.$o&&(this.$o.cancel(),this.$o=null)}async close(e,n){this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,e!==4?this.Uo.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Vr(n.toString()),Vr("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.e_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.lo(n)}e_(){}auth(){this.state=1;const e=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Qo===n&&this.n_(r,s)},r=>{e(()=>{const s=new X(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.r_(s)})})}n_(e,n){const r=this.t_(this.Qo);this.stream=this.i_(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.$o=this.oi.enqueueAfterDelay(this.qo,1e4,()=>(this.Go()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.lo(s=>{r(()=>this.r_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}zo(){this.state=5,this.Uo.No(async()=>{this.state=0,this.start()})}r_(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}t_(e){return n=>{this.oi.enqueueAndForget(()=>this.Qo===e?n():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mV extends L2{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}i_(e,n){return this.connection.bo("Listen",e,n)}onMessage(e){this.Uo.reset();const n=C6(this.serializer,e),r=function(i){if(!("targetChange"in i))return le.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?dr(o.readTime):le.min()}(e);return this.listener.s_(n,r)}o_(e){const n={};n.database=kg(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Sg(l)?{documents:N6(i,l)}:{query:j6(i,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=I2(i,o.resumeToken);const c=Ag(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=Rd(i,o.snapshotVersion.toTimestamp());const c=Ag(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=L6(this.serializer,e);r&&(n.labels=r),this.Yo(n)}__(e){const n={};n.database=kg(this.serializer),n.removeTarget=e,this.Yo(n)}}class gV extends L2{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.a_=!1}get u_(){return this.a_}start(){this.a_=!1,this.lastStreamToken=void 0,super.start()}e_(){this.a_&&this.c_([])}i_(e,n){return this.connection.bo("Write",e,n)}onMessage(e){if(De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();const n=P6(e.writeResults,e.commitTime),r=dr(e.commitTime);return this.listener.l_(r,n)}return De(!e.writeResults||e.writeResults.length===0),this.a_=!0,this.listener.h_()}P_(){const e={};e.database=kg(this.serializer),this.Yo(e)}c_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>k6(this.serializer,r))};this.Yo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.I_=!1}T_(){if(this.I_)throw new X(L.FAILED_PRECONDITION,"The client has already been terminated.")}fo(e,n,r){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.fo(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(L.UNKNOWN,s.toString())})}So(e,n,r,s){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(L.UNKNOWN,i.toString())})}terminate(){this.I_=!0}}class vV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}V_(){this.d_===0&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.A_=null,this.f_("Backend didn't respond within 10 seconds."),this.m_("Offline"),Promise.resolve())))}g_(e){this.state==="Online"?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.m_("Offline")))}set(e){this.p_(),this.d_=0,e==="Online"&&(this.R_=!1),this.m_(e)}m_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}f_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.R_?(Vr(n),this.R_=!1):Z("OnlineStateTracker",n)}p_(){this.A_!==null&&(this.A_.cancel(),this.A_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=i,this.D_.Xs(o=>{r.enqueueAndForget(async()=>{Mi(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=de(l);c.S_.add(4),await hc(c),c.v_.set("Unknown"),c.S_.delete(4),await uh(c)}(this))})}),this.v_=new vV(r,s)}}async function uh(t){if(Mi(t))for(const e of t.b_)await e(!0)}async function hc(t){for(const e of t.b_)await e(!1)}function D2(t,e){const n=de(t);n.w_.has(e.targetId)||(n.w_.set(e.targetId,e),av(n)?ov(n):oa(n).Go()&&iv(n,e))}function M2(t,e){const n=de(t),r=oa(n);n.w_.delete(e),r.Go()&&$2(n,e),n.w_.size===0&&(r.Go()?r.Ho():Mi(n)&&n.v_.set("Unknown"))}function iv(t,e){if(t.C_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}oa(t).o_(e)}function $2(t,e){t.C_.Le(e),oa(t).__(e)}function ov(t){t.C_=new E6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.w_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),oa(t).start(),t.v_.V_()}function av(t){return Mi(t)&&!oa(t).Wo()&&t.w_.size>0}function Mi(t){return de(t).S_.size===0}function V2(t){t.C_=void 0}async function wV(t){t.w_.forEach((e,n)=>{iv(t,e)})}async function _V(t,e){V2(t),av(t)?(t.v_.g_(e),ov(t)):t.v_.set("Unknown")}async function EV(t,e,n){if(t.v_.set("Online"),e instanceof b2&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.w_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.w_.delete(a),s.C_.removeTarget(a))}(t,e)}catch(r){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Cd(t,r)}else if(e instanceof bu?t.C_.Ge(e):e instanceof T2?t.C_.Xe(e):t.C_.He(e),!n.isEqual(le.min()))try{const r=await j2(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.C_._t(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.w_.get(c);d&&i.w_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.w_.get(l);if(!d)return;i.w_.set(l,d.withResumeToken(Wt.EMPTY_BYTE_STRING,d.snapshotVersion)),$2(i,l);const h=new ls(d.target,l,c,d.sequenceNumber);iv(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Z("RemoteStore","Failed to raise snapshot:",r),await Cd(t,r)}}async function Cd(t,e,n){if(!cc(e))throw e;t.S_.add(1),await hc(t),t.v_.set("Offline"),n||(n=()=>j2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z("RemoteStore","Retrying IndexedDB access"),await n(),t.S_.delete(1),await uh(t)})}function F2(t,e){return e().catch(n=>Cd(t,n,e))}async function dh(t){const e=de(t),n=Ps(e);let r=e.y_.length>0?e.y_[e.y_.length-1].batchId:-1;for(;SV(e);)try{const s=await aV(e.localStore,r);if(s===null){e.y_.length===0&&n.Ho();break}r=s.batchId,TV(e,s)}catch(s){await Cd(e,s)}U2(e)&&B2(e)}function SV(t){return Mi(t)&&t.y_.length<10}function TV(t,e){t.y_.push(e);const n=Ps(t);n.Go()&&n.u_&&n.c_(e.mutations)}function U2(t){return Mi(t)&&!Ps(t).Wo()&&t.y_.length>0}function B2(t){Ps(t).start()}async function bV(t){Ps(t).P_()}async function IV(t){const e=Ps(t);for(const n of t.y_)e.c_(n.mutations)}async function AV(t,e,n){const r=t.y_.shift(),s=Z0.from(r,e,n);await F2(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await dh(t)}async function RV(t,e){e&&Ps(t).u_&&await async function(r,s){if(function(o){return x6(o)&&o!==L.ABORTED}(s.code)){const i=r.y_.shift();Ps(r).jo(),await F2(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await dh(r)}}(t,e),U2(t)&&B2(t)}async function Gw(t,e){const n=de(t);n.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");const r=Mi(n);n.S_.add(3),await hc(n),r&&n.v_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.S_.delete(3),await uh(n)}async function CV(t,e){const n=de(t);e?(n.S_.delete(2),await uh(n)):e||(n.S_.add(2),await hc(n),n.v_.set("Unknown"))}function oa(t){return t.F_||(t.F_=function(n,r,s){const i=de(n);return i.T_(),new mV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:wV.bind(null,t),lo:_V.bind(null,t),s_:EV.bind(null,t)}),t.b_.push(async e=>{e?(t.F_.jo(),av(t)?ov(t):t.v_.set("Unknown")):(await t.F_.stop(),V2(t))})),t.F_}function Ps(t){return t.M_||(t.M_=function(n,r,s){const i=de(n);return i.T_(),new gV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:bV.bind(null,t),lo:RV.bind(null,t),h_:IV.bind(null,t),l_:AV.bind(null,t)}),t.b_.push(async e=>{e?(t.M_.jo(),await dh(t)):(await t.M_.stop(),t.y_.length>0&&(Z("RemoteStore",`Stopping write stream with ${t.y_.length} pending writes`),t.y_=[]))})),t.M_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new lv(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cv(t,e){if(Vr("AsyncQueue",`${e}: ${t}`),cc(t))return new X(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=ka(),this.sortedSet=new ze(this.comparator)}static emptySet(e){return new xo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof xo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new xo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(){this.x_=new ze(te.comparator)}track(e){const n=e.doc.key,r=this.x_.get(n);r?e.type!==0&&r.type===3?this.x_=this.x_.insert(n,e):e.type===3&&r.type!==1?this.x_=this.x_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.x_=this.x_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.x_=this.x_.remove(n):e.type===1&&r.type===2?this.x_=this.x_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):ie():this.x_=this.x_.insert(n,e)}O_(){const e=[];return this.x_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Bo{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Bo(e,n,xo.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(){this.N_=void 0,this.listeners=[]}}class PV{constructor(){this.queries=new ia(e=>u2(e),sh),this.onlineState="Unknown",this.B_=new Set}}async function z2(t,e){const n=de(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new kV),s)try{i.N_=await n.onListen(r)}catch(o){const a=cv(o,`Initialization of query '${Ig(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.L_(n.onlineState),i.N_&&e.k_(i.N_)&&uv(n)}async function W2(t,e){const n=de(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function NV(t,e){const n=de(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.k_(s)&&(r=!0);o.N_=s}}r&&uv(n)}function jV(t,e,n){const r=de(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function uv(t){t.B_.forEach(e=>{e.next()})}class H2{constructor(e,n,r){this.query=e,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}k_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Bo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),n=!0):this.W_(e,this.onlineState)&&(this.G_(e),n=!0),this.K_=e,n}onError(e){this.q_.error(e)}L_(e){this.onlineState=e;let n=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),n=!0),n}W_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}U_(e){if(e.docChanges.length>0)return!0;const n=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}G_(e){e=Bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e){this.key=e}}class K2{constructor(e){this.key=e}}class OV{constructor(e,n){this.query=e,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=me(),this.mutatedKeys=me(),this.ia=d2(e),this.sa=new xo(this.ia)}get oa(){return this.ta}_a(e,n){const r=n?n.aa:new Qw,s=n?n.sa:this.sa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const p=s.get(d),m=ih(this.query,h)?h:null,y=!!p&&this.mutatedKeys.has(p.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let _=!1;p&&m?p.data.isEqual(m.data)?y!==v&&(r.track({type:3,doc:m}),_=!0):this.ua(p,m)||(r.track({type:2,doc:m}),_=!0,(l&&this.ia(m,l)>0||c&&this.ia(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),_=!0):p&&!m&&(r.track({type:1,doc:p}),_=!0,(l||c)&&(a=!0)),_&&(m?(o=o.add(m),i=v?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{sa:o,aa:r,Hi:a,mutatedKeys:i}}ua(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;const i=e.aa.O_();i.sort((c,d)=>function(p,m){const y=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return y(p)-y(m)}(c.type,d.type)||this.ia(c.doc,d.doc)),this.ca(r);const o=n?this.la():[],a=this.ra.size===0&&this.current?1:0,l=a!==this.na;return this.na=a,i.length!==0||l?{snapshot:new Bo(this.query,e.sa,s,i,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ha:o}:{ha:o}}L_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({sa:this.sa,aa:new Qw,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}Pa(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}ca(e){e&&(e.addedDocuments.forEach(n=>this.ta=this.ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ta=this.ta.delete(n)),this.current=e.current)}la(){if(!this.current)return[];const e=this.ra;this.ra=me(),this.sa.forEach(r=>{this.Pa(r.key)&&(this.ra=this.ra.add(r.key))});const n=[];return e.forEach(r=>{this.ra.has(r)||n.push(new K2(r))}),this.ra.forEach(r=>{e.has(r)||n.push(new q2(r))}),n}Ia(e){this.ta=e._s,this.ra=me();const n=this._a(e.documents);return this.applyChanges(n,!0)}Ta(){return Bo.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,this.na===0,this.hasCachedResults)}}class LV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class DV{constructor(e){this.key=e,this.Ea=!1}}class MV{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.da={},this.Aa=new ia(a=>u2(a),sh),this.Ra=new Map,this.Va=new Set,this.ma=new ze(te.comparator),this.fa=new Map,this.ga=new nv,this.pa={},this.ya=new Map,this.wa=Uo.Bn(),this.onlineState="Unknown",this.Sa=void 0}get isPrimaryClient(){return this.Sa===!0}}async function $V(t,e){const n=GV(t);let r,s;const i=n.Aa.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Ta();else{const o=await lV(n.localStore,Fr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await VV(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&D2(n.remoteStore,o)}return s}async function VV(t,e,n,r,s){t.ba=(h,p,m)=>async function(v,_,x,g){let w=_.view._a(x);w.Hi&&(w=await Hw(v.localStore,_.query,!1).then(({documents:S})=>_.view._a(S,w)));const E=g&&g.targetChanges.get(_.targetId),T=_.view.applyChanges(w,v.isPrimaryClient,E);return Xw(v,_.targetId,T.ha),T.snapshot}(t,h,p,m);const i=await Hw(t.localStore,e,!0),o=new OV(e,i._s),a=o._a(i.documents),l=fc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Xw(t,n,c.ha);const d=new LV(e,n,o);return t.Aa.set(e,d),t.Ra.has(n)?t.Ra.get(n).push(e):t.Ra.set(n,[e]),c.snapshot}async function FV(t,e){const n=de(t),r=n.Aa.get(e),s=n.Ra.get(r.targetId);if(s.length>1)return n.Ra.set(r.targetId,s.filter(i=>!sh(i,e))),void n.Aa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Pg(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),M2(n.remoteStore,r.targetId),Ng(n,r.targetId)}).catch(lc)):(Ng(n,r.targetId),await Pg(n.localStore,r.targetId,!0))}async function UV(t,e,n){const r=QV(t);try{const s=await function(o,a){const l=de(o),c=it.now(),d=a.reduce((m,y)=>m.add(y.key),me());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=Ur(),v=me();return l.ts.getEntries(m,d).next(_=>{y=_,y.forEach((x,g)=>{g.isValidDocument()||(v=v.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(_=>{h=_;const x=[];for(const g of a){const w=p6(g,h.get(g.key).overlayedDocument);w!=null&&x.push(new Di(g.key,w,t2(w.value.mapValue),ur.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,x,a)}).next(_=>{p=_;const x=_.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(m,_.batchId,x)})}).then(()=>({batchId:p.batchId,changes:h2(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.pa[o.currentUser.toKey()];c||(c=new ze(Ee)),c=c.insert(a,l),o.pa[o.currentUser.toKey()]=c}(r,s.batchId,n),await pc(r,s.changes),await dh(r.remoteStore)}catch(s){const i=cv(s,"Failed to persist write");n.reject(i)}}async function G2(t,e){const n=de(t);try{const r=await iV(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.fa.get(i);o&&(De(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ea=!0:s.modifiedDocuments.size>0?De(o.Ea):s.removedDocuments.size>0&&(De(o.Ea),o.Ea=!1))}),await pc(n,r,e)}catch(r){await lc(r)}}function Jw(t,e,n){const r=de(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Aa.forEach((i,o)=>{const a=o.view.L_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=de(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.listeners)p.L_(a)&&(c=!0)}),c&&uv(l)}(r.eventManager,e),s.length&&r.da.s_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function BV(t,e,n){const r=de(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.fa.get(e),i=s&&s.key;if(i){let o=new ze(te.comparator);o=o.insert(i,Dt.newNoDocument(i,le.min()));const a=me().add(i),l=new lh(le.min(),new Map,new ze(Ee),o,a);await G2(r,l),r.ma=r.ma.remove(i),r.fa.delete(e),dv(r)}else await Pg(r.localStore,e,!1).then(()=>Ng(r,e,n)).catch(lc)}async function zV(t,e){const n=de(t),r=e.batch.batchId;try{const s=await sV(n.localStore,e);J2(n,r,null),Q2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await pc(n,s)}catch(s){await lc(s)}}async function WV(t,e,n){const r=de(t);try{const s=await function(o,a){const l=de(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(De(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);J2(r,e,n),Q2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await pc(r,s)}catch(s){await lc(s)}}function Q2(t,e){(t.ya.get(e)||[]).forEach(n=>{n.resolve()}),t.ya.delete(e)}function J2(t,e,n){const r=de(t);let s=r.pa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.pa[r.currentUser.toKey()]=s}}function Ng(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ra.get(e))t.Aa.delete(r),n&&t.da.Da(r,n);t.Ra.delete(e),t.isPrimaryClient&&t.ga.Vr(e).forEach(r=>{t.ga.containsKey(r)||X2(t,r)})}function X2(t,e){t.Va.delete(e.path.canonicalString());const n=t.ma.get(e);n!==null&&(M2(t.remoteStore,n),t.ma=t.ma.remove(e),t.fa.delete(n),dv(t))}function Xw(t,e,n){for(const r of n)r instanceof q2?(t.ga.addReference(r.key,e),HV(t,r)):r instanceof K2?(Z("SyncEngine","Document no longer in limbo: "+r.key),t.ga.removeReference(r.key,e),t.ga.containsKey(r.key)||X2(t,r.key)):ie()}function HV(t,e){const n=e.key,r=n.path.canonicalString();t.ma.get(n)||t.Va.has(r)||(Z("SyncEngine","New document in limbo: "+n),t.Va.add(r),dv(t))}function dv(t){for(;t.Va.size>0&&t.ma.size<t.maxConcurrentLimboResolutions;){const e=t.Va.values().next().value;t.Va.delete(e);const n=new te(Oe.fromString(e)),r=t.wa.next();t.fa.set(r,new DV(n)),t.ma=t.ma.insert(n,r),D2(t.remoteStore,new ls(Fr(J0(n.path)),r,"TargetPurposeLimboResolution",W0.ae))}}async function pc(t,e,n){const r=de(t),s=[],i=[],o=[];r.Aa.isEmpty()||(r.Aa.forEach((a,l)=>{o.push(r.ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const d=sv.Ki(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.da.s_(s),await async function(l,c){const d=de(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>B.forEach(c,p=>B.forEach(p.qi,m=>d.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>B.forEach(p.Qi,m=>d.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!cc(h))throw h;Z("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const m=d.Zi.get(p),y=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(y);d.Zi=d.Zi.insert(p,v)}}}(r.localStore,i))}async function qV(t,e){const n=de(t);if(!n.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());const r=await N2(n.localStore,e);n.currentUser=e,function(i,o){i.ya.forEach(a=>{a.forEach(l=>{l.reject(new X(L.CANCELLED,o))})}),i.ya.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pc(n,r.rs)}}function KV(t,e){const n=de(t),r=n.fa.get(e);if(r&&r.Ea)return me().add(r.key);{let s=me();const i=n.Ra.get(e);if(!i)return s;for(const o of i){const a=n.Aa.get(o);s=s.unionWith(a.view.oa)}return s}}function GV(t){const e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=G2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BV.bind(null,e),e.da.s_=NV.bind(null,e.eventManager),e.da.Da=jV.bind(null,e.eventManager),e}function QV(t){const e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WV.bind(null,e),e}class Yw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=ch(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return rV(this.persistence,new tV,e.initialUser,this.serializer)}createPersistence(e){return new Z6(rv.Hr,this.serializer)}createSharedClientState(e){return new uV}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class JV{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Jw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qV.bind(null,this.syncEngine),await CV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new PV}()}createDatastore(e){const n=ch(e.databaseInfo.databaseId),r=function(i){return new pV(i)}(e.databaseInfo);return function(i,o,a,l){return new yV(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new xV(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Jw(this.syncEngine,n,0),function(){return Kw.v()?new Kw:new dV}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new MV(s,i,o,a,l,c);return d&&(h.Sa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=de(n);Z("RemoteStore","RemoteStore shutting down."),r.S_.add(5),await hc(r),r.D_.shutdown(),r.v_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Fa(this.observer.next,e)}error(e){this.observer.error?this.Fa(this.observer.error,e):Vr("Uncaught Error in snapshot listener:",e.toString())}Ma(){this.muted=!0}Fa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ot.UNAUTHENTICATED,this.clientId=YI.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{Z("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(Z("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new X(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=cv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Pp(t,e){t.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await N2(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Zw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ZV(t);Z("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>Gw(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Gw(e.remoteStore,i)),t._onlineComponents=e}function YV(t){return t.name==="FirebaseError"?t.code===L.FAILED_PRECONDITION||t.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function ZV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{await Pp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!YV(n))throw n;Mo("Error using user provided cache. Falling back to memory cache: "+n),await Pp(t,new Yw)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),await Pp(t,new Yw);return t._offlineComponents}async function Z2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),await Zw(t,t._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),await Zw(t,new JV))),t._onlineComponents}function eF(t){return Z2(t).then(e=>e.syncEngine)}async function eA(t){const e=await Z2(t),n=e.eventManager;return n.onListen=$V.bind(null,e.syncEngine),n.onUnlisten=FV.bind(null,e.syncEngine),n}function tF(t,e,n={}){const r=new Nr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Y2({next:p=>{o.enqueueAndForget(()=>W2(i,h));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new X(L.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new X(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new H2(J0(a.path),d,{includeMetadataChanges:!0,z_:!0});return z2(i,h)}(await eA(t),t.asyncQueue,e,n,r)),r.promise}function nF(t,e,n={}){const r=new Nr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Y2({next:p=>{o.enqueueAndForget(()=>W2(i,h)),p.fromCache&&l.source==="server"?c.reject(new X(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new H2(a,d,{includeMetadataChanges:!0,z_:!0});return z2(i,h)}(await eA(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(t,e,n){if(!n)throw new X(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function rF(t,e,n,r){if(e===!0&&r===!0)throw new X(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function t_(t){if(!te.isDocumentKey(t))throw new X(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function n_(t){if(te.isDocumentKey(t))throw new X(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function Ns(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fh(t);throw new X(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new X(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new X(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new X(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new X(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new X(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new r_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new X(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new X(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new r_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new b$;switch(r.type){case"firstParty":return new C$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=e_.get(n);r&&(Z("ComponentProvider","Removing Datastore"),e_.delete(n),r.terminate())}(this),Promise.resolve()}}function sF(t,e,n,r={}){var s;const i=(t=Ns(t,hh))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Ot.MOCK_USER;else{a=zb(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new X(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ot(c)}t._authCredentials=new I$(new XI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new aa(this.firestore,e,this._query)}}class cn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}}class Ss extends aa{constructor(e,n,r){super(e,n,J0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new te(e))}withConverter(e){return new Ss(this.firestore,e,this._path)}}function $i(t,e,...n){if(t=dt(t),nA("collection","path",e),t instanceof hh){const r=Oe.fromString(e,...n);return n_(r),new Ss(t,null,r)}{if(!(t instanceof cn||t instanceof Ss))throw new X(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return n_(r),new Ss(t.firestore,null,r)}}function ph(t,e,...n){if(t=dt(t),arguments.length===1&&(e=YI.V()),nA("doc","path",e),t instanceof hh){const r=Oe.fromString(e,...n);return t_(r),new cn(t,null,new te(r))}{if(!(t instanceof cn||t instanceof Ss))throw new X(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return t_(r),new cn(t.firestore,t instanceof Ss?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(){this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new O2(this,"async_queue_retry"),this.tu=()=>{const n=kp();n&&Z("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Uo.Lo()};const e=kp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.tu)}get isShuttingDown(){return this.Ha}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nu(),this.ru(e)}enterRestrictedMode(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;const n=kp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.tu)}}enqueue(e){if(this.nu(),this.Ha)return new Promise(()=>{});const n=new Nr;return this.ru(()=>this.Ha&&this.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ja.push(e),this.iu()))}async iu(){if(this.ja.length!==0){try{await this.ja[0](),this.ja.shift(),this.Uo.reset()}catch(e){if(!cc(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.ja.length>0&&this.Uo.No(()=>this.iu())}}ru(e){const n=this.za.then(()=>(this.Za=!0,e().catch(r=>{this.Ya=r,this.Za=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Vr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Za=!1,r))));return this.za=n,n}enqueueAfterDelay(e,n,r){this.nu(),this.eu.indexOf(e)>-1&&(n=0);const s=lv.createAndSchedule(this,e,n,r,i=>this.su(i));return this.Ja.push(s),s}nu(){this.Ya&&ie()}verifyOperationInProgress(){}async ou(){let e;do e=this.za,await e;while(e!==this.za)}_u(e){for(const n of this.Ja)if(n.timerId===e)return!0;return!1}au(e){return this.ou().then(()=>{this.Ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ou()})}uu(e){this.eu.push(e)}su(e){const n=this.Ja.indexOf(e);this.Ja.splice(n,1)}}class mc extends hh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new iF}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||rA(this),this._firestoreClient.terminate()}}function oF(t,e){const n=typeof t=="object"?t:w0(),r=typeof t=="string"?t:e||"(default)",s=Ff(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Fb("firestore");i&&sF(s,...i)}return s}function fv(t){return t._firestoreClient||rA(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function rA(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new U$(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,tA(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new XV(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zo(Wt.fromBase64String(e))}catch(n){throw new X(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zo(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF=/^__.*__$/;class lF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Di(e,this.data,this.fieldMask,n,this.fieldTransforms):new dc(e,this.data,n,this.fieldTransforms)}}function iA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class mv{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.cu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get lu(){return this.settings.lu}hu(e){return new mv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.Tu(e),s}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.cu(),s}du(e){return this.hu({path:void 0,Iu:!0})}Au(e){return kd(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}cu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}Tu(e){if(e.length===0)throw this.Au("Document fields must not be empty");if(iA(this.lu)&&aF.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}class cF{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ch(e)}mu(e,n,r,s=!1){return new mv({lu:e,methodName:n,Vu:r,path:Mt.emptyPath(),Iu:!1,Ru:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function oA(t){const e=t._freezeSettings(),n=ch(t._databaseId);return new cF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function uF(t,e,n,r,s,i={}){const o=t.mu(i.merge||i.mergeFields?2:0,e,n,s);cA("Data must be an object, but it was:",o,r);const a=aA(r,o);let l,c;if(i.merge)l=new Bn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const p=fF(e,h,n);if(!o.contains(p))throw new X(L.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);pF(d,p)||d.push(p)}l=new Bn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new lF(new Cn(a),l,c)}function dF(t,e,n,r=!1){return gv(n,t.mu(r?4:3,e))}function gv(t,e){if(lA(t=dt(t)))return cA("Unsupported field value:",e,t),aA(t,e);if(t instanceof sA)return function(r,s){if(!iA(s.lu))throw s.Au(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Au(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Iu&&e.lu!==4)throw e.Au("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=gv(a,s.du(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=dt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return l6(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=it.fromDate(r);return{timestampValue:Rd(s.serializer,i)}}if(r instanceof it){const i=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rd(s.serializer,i)}}if(r instanceof pv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zo)return{bytesValue:I2(s.serializer,r._byteString)};if(r instanceof cn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Au(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:tv(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Au(`Unsupported field value: ${fh(r)}`)}(t,e)}function aA(t,e){const n={};return ZI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sa(t,(r,s)=>{const i=gv(s,e.Pu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function lA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof it||t instanceof pv||t instanceof zo||t instanceof cn||t instanceof sA)}function cA(t,e,n){if(!lA(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=fh(n);throw r==="an object"?e.Au(t+" a custom object"):e.Au(t+" "+r)}}function fF(t,e,n){if((e=dt(e))instanceof hv)return e._internalPath;if(typeof e=="string")return uA(t,e);throw kd("Field path arguments must be of type string or ",t,!1,void 0,n)}const hF=new RegExp("[~\\*/\\[\\]]");function uA(t,e,n){if(e.search(hF)>=0)throw kd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hv(...e.split("."))._internalPath}catch{throw kd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function kd(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new X(L.INVALID_ARGUMENT,a+t+l)}function pF(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mF extends dA{data(){return super.data()}}function yv(t,e){return typeof e=="string"?uA(t,e):e instanceof hv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vv{}class yF extends vv{}function Fs(t,e,...n){let r=[];e instanceof vv&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof xv).length,a=i.filter(l=>l instanceof mh).length;if(o>1||o>0&&a>0)throw new X(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class mh extends yF{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new mh(e,n,r)}_apply(e){const n=this._parse(e);return fA(e._query,n),new aa(e.firestore,e.converter,Tg(e._query,n))}_parse(e){const n=oA(e.firestore);return function(i,o,a,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new X(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){i_(h,d);const m=[];for(const y of h)m.push(s_(l,i,y));p={arrayValue:{values:m}}}else p=s_(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||i_(h,d),p=dF(a,o,h,d==="in"||d==="not-in");return st.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Us(t,e,n){const r=e,s=yv("where",t);return mh._create(s,r,n)}class xv extends vv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Kn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)fA(o,l),o=Tg(o,l)}(e._query,n),new aa(e.firestore,e.converter,Tg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function s_(t,e,n){if(typeof(n=dt(n))=="string"){if(n==="")throw new X(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!c2(e)&&n.indexOf("/")!==-1)throw new X(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Oe.fromString(n));if(!te.isDocumentKey(r))throw new X(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Rw(t,new te(r))}if(n instanceof cn)return Rw(t,n._key);throw new X(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fh(n)}.`)}function i_(t,e){if(!Array.isArray(t)||t.length===0)throw new X(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fA(t,e){if(e.isInequality()){const r=X0(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new X(L.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const i=l2(t);i!==null&&vF(t,s,i)}const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new X(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function vF(t,e,n){if(!n.isEqual(e))throw new X(L.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class xF{convertValue(e,n="none"){switch(Ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_i(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return sa(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new pv(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=q0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ll(e));default:return null}}convertTimestamp(e){const n=ks(e);return new it(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Oe.fromString(e);De(P2(r));const s=new Dl(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||Vr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wF(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hA extends dA{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(yv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Iu extends hA{data(e={}){return super.data(e)}}class _F{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Na(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Iu(this._firestore,this._userDataWriter,r.key,r,new Na(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Iu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Na(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Iu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Na(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:EF(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function EF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(t){t=Ns(t,cn);const e=Ns(t.firestore,mc);return tF(fv(e),t._key).then(n=>bF(e,t,n))}class mA extends xF{constructor(e){super(),this.firestore=e}convertBytes(e){return new zo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,n)}}function Bs(t){t=Ns(t,aa);const e=Ns(t.firestore,mc),n=fv(e),r=new mA(e);return gF(t._query),nF(n,t._query).then(s=>new _F(e,r,t,s))}function SF(t,e,n){t=Ns(t,cn);const r=Ns(t.firestore,mc),s=wF(t.converter,e,n);return gA(r,[uF(oA(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ur.none())])}function TF(t){return gA(Ns(t.firestore,mc),[new Y0(t._key,ur.none())])}function gA(t,e){return function(r,s){const i=new Nr;return r.asyncQueue.enqueueAndForget(async()=>UV(await eF(r),s,i)),i.promise}(fv(t),e)}function bF(t,e,n){const r=n.docs.get(e._key),s=new mA(t);return new hA(t,s,e._key,r,new Na(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){ra=s})(Oi),xi(new Rs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new mc(new A$(r.getProvider("auth-internal")),new P$(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new X(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dl(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),cr(Sw,"4.1.2",e),cr(Sw,"4.1.2","esm2017")})();function wv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function yA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IF=yA,vA=new Yl("auth","Firebase",yA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=new v0("@firebase/auth");function AF(t,...e){Pd.logLevel<=_e.WARN&&Pd.warn(`Auth (${Oi}): ${t}`,...e)}function Au(t,...e){Pd.logLevel<=_e.ERROR&&Pd.error(`Auth (${Oi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(t,...e){throw _v(t,...e)}function fr(t,...e){return _v(t,...e)}function xA(t,e,n){const r=Object.assign(Object.assign({},IF()),{[e]:n});return new Yl("auth","Firebase",r).create(e,{appName:t.name})}function RF(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&mr(t,"argument-error"),xA(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _v(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return vA.create(t,...e)}function ce(t,e,...n){if(!t)throw _v(e,...n)}function Rr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Au(e),new Error(e)}function Br(t,e){t||Rr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function CF(){return o_()==="http:"||o_()==="https:"}function o_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CF()||nD()||"connection"in navigator)?navigator.onLine:!0}function PF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Br(n>e,"Short delay should be less than long delay!"),this.isMobile=eD()||rD()}get(){return kF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(t,e){Br(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF=new gc(3e4,6e4);function _A(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function yc(t,e,n,r,s={}){return EA(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Zl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),wA.fetch()(SA(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function EA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},NF),e);try{const s=new LF(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw eu(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw eu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw eu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw eu(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw xA(t,d,c);mr(t,d)}}catch(s){if(s instanceof wr)throw s;mr(t,"network-request-failed",{message:String(s)})}}async function OF(t,e,n,r,s={}){const i=await yc(t,e,n,r,s);return"mfaPendingCredential"in i&&mr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function SA(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Ev(t.config,s):`${t.config.apiScheme}://${s}`}class LF{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(fr(this.auth,"network-request-failed")),jF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function eu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=fr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DF(t,e){return yc(t,"POST","/v1/accounts:delete",e)}async function MF(t,e){return yc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $F(t,e=!1){const n=dt(t),r=await n.getIdToken(e),s=Sv(r);ce(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ja(Np(s.auth_time)),issuedAtTime:Ja(Np(s.iat)),expirationTime:Ja(Np(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Np(t){return Number(t)*1e3}function Sv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Au("JWT malformed, contained fewer than 3 sections"),null;try{const s=$b(n);return s?JSON.parse(s):(Au("Failed to decode base64 JWT payload"),null)}catch(s){return Au("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function VF(t){const e=Sv(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof wr&&FF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function FF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ja(this.lastLoginAt),this.creationTime=Ja(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nd(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Fl(t,MF(n,{idToken:r}));ce(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?WF(i.providerUserInfo):[],a=zF(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new TA(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function BF(t){const e=dt(t);await Nd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zF(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function WF(t){return t.map(e=>{var{providerId:n}=e,r=wv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HF(t,e){const n=await EA(t,{},async()=>{const r=Zl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=SA(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",wA.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):VF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ce(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await HF(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ul;return r&&(ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ce(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ce(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ul,this.toJSON())}_performRefresh(){return Rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ai{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=wv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new UF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new TA(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Fl(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $F(this,e)}reload(){return BF(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ai(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Nd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Fl(this,DF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:E,isAnonymous:T,providerData:S,stsTokenManager:I}=n;ce(w&&I,e,"internal-error");const b=Ul.fromJSON(this.name,I);ce(typeof w=="string",e,"internal-error"),Qr(h,e.name),Qr(p,e.name),ce(typeof E=="boolean",e,"internal-error"),ce(typeof T=="boolean",e,"internal-error"),Qr(m,e.name),Qr(y,e.name),Qr(v,e.name),Qr(_,e.name),Qr(x,e.name),Qr(g,e.name);const A=new ai({uid:w,auth:e,email:p,emailVerified:E,displayName:h,isAnonymous:T,photoURL:y,phoneNumber:m,tenantId:v,stsTokenManager:b,createdAt:x,lastLoginAt:g});return S&&Array.isArray(S)&&(A.providerData=S.map(R=>Object.assign({},R))),_&&(A._redirectEventId=_),A}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ul;s.updateFromServerResponse(n);const i=new ai({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Nd(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=new Map;function Cr(t){Br(t instanceof Function,"Expected a class definition");let e=a_.get(t);return e?(Br(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,a_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bA.type="NONE";const l_=bA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(t,e,n){return`firebase:${t}:${e}:${n}`}class wo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ru(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ru("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ai._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new wo(Cr(l_),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Cr(l_);const o=Ru(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=ai._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new wo(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new wo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(IA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kA(e))return"Blackberry";if(PA(e))return"Webos";if(Tv(e))return"Safari";if((e.includes("chrome/")||AA(e))&&!e.includes("edge/"))return"Chrome";if(CA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function IA(t=zt()){return/firefox\//i.test(t)}function Tv(t=zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AA(t=zt()){return/crios\//i.test(t)}function RA(t=zt()){return/iemobile/i.test(t)}function CA(t=zt()){return/android/i.test(t)}function kA(t=zt()){return/blackberry/i.test(t)}function PA(t=zt()){return/webos/i.test(t)}function gh(t=zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function qF(t=zt()){var e;return gh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function KF(){return sD()&&document.documentMode===10}function NA(t=zt()){return gh(t)||CA(t)||PA(t)||kA(t)||/windows phone/i.test(t)||RA(t)}function GF(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(t,e=[]){let n;switch(t){case"Browser":n=c_(zt());break;case"Worker":n=`${c_(zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JF(t,e={}){return yc(t,"GET","/v2/passwordPolicy",_A(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF=6;class YF{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:XF,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new u_(this),this.idTokenSubscription=new u_(this),this.beforeStateQueue=new QF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Cr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await wo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Nd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?dt(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JF(this),n=new YF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Cr(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await wo.create(this,[Cr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&AF(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function yh(t){return dt(t)}class u_{constructor(e){this.auth=e,this.observer=null,this.addObserver=dD(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e9(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function t9(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=fr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",e9().appendChild(r)})}function n9(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r9(t,e){const n=Ff(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(md(i,e??{}))return s;mr(s,"already-initialized")}return n.initialize({options:e})}function s9(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Cr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function i9(t,e,n){const r=yh(t);ce(r._canInitEmulator,r,"emulator-config-failed"),ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=OA(e),{host:o,port:a}=o9(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||a9()}function OA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function o9(t){const e=OA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:d_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:d_(o)}}}function d_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function a9(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Rr("not implemented")}_getIdTokenResponse(e){return Rr("not implemented")}_linkToIdToken(e,n){return Rr("not implemented")}_getReauthenticationResolver(e){return Rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _o(t,e){return OF(t,"POST","/v1/accounts:signInWithIdp",_A(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9="http://localhost";class Si extends LA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Si(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=wv(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Si(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return _o(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,_o(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_o(e,n)}buildRequest(){const e={requestUri:l9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Zl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends bv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends vc{constructor(){super("facebook.com")}static credential(e){return Si._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.FACEBOOK_SIGN_IN_METHOD="facebook.com";ts.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn extends vc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Si._fromParams({providerId:Yn.PROVIDER_ID,signInMethod:Yn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Yn.credentialFromTaggedObject(e)}static credentialFromError(e){return Yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Yn.credential(n,r)}catch{return null}}}Yn.GOOGLE_SIGN_IN_METHOD="google.com";Yn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends vc{constructor(){super("github.com")}static credential(e){return Si._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ns.credential(e.oauthAccessToken)}catch{return null}}}ns.GITHUB_SIGN_IN_METHOD="github.com";ns.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends vc{constructor(){super("twitter.com")}static credential(e,n){return Si._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return rs.credential(n,r)}catch{return null}}}rs.TWITTER_SIGN_IN_METHOD="twitter.com";rs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ai._fromIdTokenResponse(e,r,s),o=f_(r);return new Wo({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=f_(r);return new Wo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function f_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends wr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,jd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new jd(e,n,r,s)}}function DA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?jd._fromErrorAndOperation(t,i,e,r):i})}async function c9(t,e,n=!1){const r=await Fl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Wo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u9(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await Fl(t,DA(r,s,e,t),n);ce(i.idToken,r,"internal-error");const o=Sv(i.idToken);ce(o,r,"internal-error");const{sub:a}=o;return ce(t.uid===a,r,"user-mismatch"),Wo._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&mr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d9(t,e,n=!1){const r="signIn",s=await DA(t,r,e),i=await Wo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function f9(t,e,n,r){return dt(t).onIdTokenChanged(e,n,r)}function h9(t,e,n){return dt(t).beforeAuthStateChanged(e,n)}function p9(t,e,n,r){return dt(t).onAuthStateChanged(e,n,r)}function MA(t){return dt(t).signOut()}const Od="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Od,"1"),this.storage.removeItem(Od),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m9(){const t=zt();return Tv(t)||gh(t)}const g9=1e3,y9=10;class VA extends $A{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=m9()&&GF(),this.fallbackToPolling=NA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);KF()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,y9):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},g9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}VA.type="LOCAL";const v9=VA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA extends $A{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}FA.type="SESSION";const UA=FA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new vh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await x9(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Iv("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(){return window}function _9(t){hr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(){return typeof hr().WorkerGlobalScope<"u"&&typeof hr().importScripts=="function"}async function E9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function S9(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function T9(){return BA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="firebaseLocalStorageDb",b9=1,Ld="firebaseLocalStorage",WA="fbase_key";class xc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function xh(t,e){return t.transaction([Ld],e?"readwrite":"readonly").objectStore(Ld)}function I9(){const t=indexedDB.deleteDatabase(zA);return new xc(t).toPromise()}function Og(){const t=indexedDB.open(zA,b9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ld,{keyPath:WA})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ld)?e(r):(r.close(),await I9(),e(await Og()))})})}async function h_(t,e,n){const r=xh(t,!0).put({[WA]:e,value:n});return new xc(r).toPromise()}async function A9(t,e){const n=xh(t,!1).get(e),r=await new xc(n).toPromise();return r===void 0?null:r.value}function p_(t,e){const n=xh(t,!0).delete(e);return new xc(n).toPromise()}const R9=800,C9=3;class HA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Og(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>C9)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return BA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vh._getInstance(T9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await E9(),!this.activeServiceWorker)return;this.sender=new w9(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||S9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Og();return await h_(e,Od,"1"),await p_(e,Od),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>h_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>A9(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>p_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=xh(s,!1).getAll();return new xc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),R9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}HA.type="LOCAL";const k9=HA;new gc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(t,e){return e?Cr(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av extends LA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _o(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _o(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _o(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function P9(t){return d9(t.auth,new Av(t),t.bypassAuthState)}function N9(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),u9(n,new Av(t),t.bypassAuthState)}async function j9(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),c9(n,new Av(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return P9;case"linkViaPopup":case"linkViaRedirect":return j9;case"reauthViaPopup":case"reauthViaRedirect":return N9;default:mr(this.auth,"internal-error")}}resolve(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9=new gc(2e3,1e4);async function L9(t,e,n){const r=yh(t);RF(t,e,bv);const s=qA(r,n);return new ri(r,"signInViaPopup",e,s).executeNotNull()}class ri extends KA{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ri.currentPopupAction&&ri.currentPopupAction.cancel(),ri.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){Br(this.filter.length===1,"Popup operations only handle one event");const e=Iv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ri.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,O9.get())};e()}}ri.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D9="pendingRedirect",Cu=new Map;class M9 extends KA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Cu.get(this.auth._key());if(!e){try{const r=await $9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Cu.set(this.auth._key(),e)}return this.bypassAuthState||Cu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $9(t,e){const n=U9(e),r=F9(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function V9(t,e){Cu.set(t._key(),e)}function F9(t){return Cr(t._redirectPersistence)}function U9(t){return Ru(D9,t.config.apiKey,t.name)}async function B9(t,e,n=!1){const r=yh(t),s=qA(r,e),o=await new M9(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9=10*60*1e3;class W9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!H9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!GA(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(fr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=z9&&this.cachedEventUids.clear(),this.cachedEventUids.has(m_(e))}saveEventToCache(e){this.cachedEventUids.add(m_(e)),this.lastProcessedEventTime=Date.now()}}function m_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function GA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function H9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q9(t,e={}){return yc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,G9=/^https?/;async function Q9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await q9(t);for(const n of e)try{if(J9(n))return}catch{}mr(t,"unauthorized-domain")}function J9(t){const e=jg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!G9.test(n))return!1;if(K9.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X9=new gc(3e4,6e4);function g_(){const t=hr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Y9(t){return new Promise((e,n)=>{var r,s,i;function o(){g_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{g_(),n(fr(t,"network-request-failed"))},timeout:X9.get()})}if(!((s=(r=hr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=hr().gapi)===null||i===void 0)&&i.load)o();else{const a=n9("iframefcb");return hr()[a]=()=>{gapi.load?o():n(fr(t,"network-request-failed"))},t9(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw ku=null,e})}let ku=null;function Z9(t){return ku=ku||Y9(t),ku}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eU=new gc(5e3,15e3),tU="__/auth/iframe",nU="emulator/auth/iframe",rU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iU(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ev(e,nU):`https://${t.config.authDomain}/${tU}`,r={apiKey:e.apiKey,appName:t.name,v:Oi},s=sU.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Zl(r).slice(1)}`}async function oU(t){const e=await Z9(t),n=hr().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:iU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rU,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=fr(t,"network-request-failed"),a=hr().setTimeout(()=>{i(o)},eU.get());function l(){hr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lU=500,cU=600,uU="_blank",dU="http://localhost";class y_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fU(t,e,n,r=lU,s=cU){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},aU),{width:r.toString(),height:s.toString(),top:i,left:o}),c=zt().toLowerCase();n&&(a=AA(c)?uU:n),IA(c)&&(e=e||dU,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[m,y])=>`${p}${m}=${y},`,"");if(qF(c)&&a!=="_self")return hU(e||"",a),new y_(null);const h=window.open(e||"",a,d);ce(h,t,"popup-blocked");try{h.focus()}catch{}return new y_(h)}function hU(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU="__/auth/handler",mU="emulator/auth/handler",gU=encodeURIComponent("fac");async function v_(t,e,n,r,s,i){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Oi,eventId:s};if(e instanceof bv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",uD(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(i||{}))o[d]=h}if(e instanceof vc){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${gU}=${encodeURIComponent(l)}`:"";return`${yU(t)}?${Zl(a).slice(1)}${c}`}function yU({config:t}){return t.emulator?Ev(t,mU):`https://${t.authDomain}/${pU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="webStorageSupport";class vU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UA,this._completeRedirectFn=B9,this._overrideRedirectResult=V9}async _openPopup(e,n,r,s){var i;Br((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await v_(e,n,r,jg(),s);return fU(e,o,Iv())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await v_(e,n,r,jg(),s);return _9(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Br(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await oU(e),r=new W9(e);return n.register("authEvent",s=>(ce(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jp,{type:jp},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[jp];o!==void 0&&n(!!o),mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Q9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return NA()||Tv()||gh()}}const xU=vU;var x_="@firebase/auth",w_="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _U(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function EU(t){xi(new Rs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jA(t)},c=new ZF(r,s,i,l);return s9(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xi(new Rs("auth-internal",e=>{const n=yh(e.getProvider("auth").getImmediate());return(r=>new wU(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cr(x_,w_,_U(t)),cr(x_,w_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU=5*60,TU=Bb("authIdTokenMaxAge")||SU;let __=null;const bU=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>TU)return;const s=n==null?void 0:n.token;__!==s&&(__=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function IU(t=w0()){const e=Ff(t,"auth");if(e.isInitialized())return e.getImmediate();const n=r9(t,{popupRedirectResolver:xU,persistence:[k9,v9,UA]}),r=Bb("authTokenSyncURL");if(r){const i=bU(r);h9(n,i,()=>i(n.currentUser)),f9(n,o=>i(o))}const s=Vb("auth");return s&&i9(n,`http://${s}`),n}EU("Browser");var AU="firebase",RU="10.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr(AU,RU,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="firebasestorage.googleapis.com",JA="storageBucket",CU=2*60*1e3,kU=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge extends wr{constructor(e,n,r=0){super(Op(e),`Firebase Storage: ${n} (${Op(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ge.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Op(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ke;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ke||(Ke={}));function Op(t){return"storage/"+t}function Rv(){const t="An unknown error occurred, please check the error payload for server response.";return new Ge(Ke.UNKNOWN,t)}function PU(t){return new Ge(Ke.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function NU(t){return new Ge(Ke.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function jU(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ge(Ke.UNAUTHENTICATED,t)}function OU(){return new Ge(Ke.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function LU(t){return new Ge(Ke.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function DU(){return new Ge(Ke.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function MU(){return new Ge(Ke.CANCELED,"User canceled the upload/download.")}function $U(t){return new Ge(Ke.INVALID_URL,"Invalid URL '"+t+"'.")}function VU(t){return new Ge(Ke.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function FU(){return new Ge(Ke.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+JA+"' property when initializing the app?")}function UU(){return new Ge(Ke.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function BU(){return new Ge(Ke.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function zU(t){return new Ge(Ke.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Lg(t){return new Ge(Ke.INVALID_ARGUMENT,t)}function XA(){return new Ge(Ke.APP_DELETED,"The Firebase app was deleted.")}function WU(t){return new Ge(Ke.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xa(t,e){return new Ge(Ke.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function _a(t){throw new Ge(Ke.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=hn.makeFromUrl(e,n)}catch{return new hn(e,"")}if(r.path==="")return r;throw VU(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${p}`,"i"),y={bucket:1,path:3},v=n===QA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",x=new RegExp(`^https?://${v}/${s}/${_}`,"i"),w=[{regex:a,indices:l,postModify:i},{regex:m,indices:y,postModify:c},{regex:x,indices:{bucket:1,path:2},postModify:c}];for(let E=0;E<w.length;E++){const T=w[E],S=T.regex.exec(e);if(S){const I=S[T.indices.bucket];let b=S[T.indices.path];b||(b=""),r=new hn(I,b),T.postModify(r);break}}if(r==null)throw $U(e);return r}}class HU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qU(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(..._){c||(c=!0,e.apply(null,_))}function h(_){s=setTimeout(()=>{s=null,t(m,l())},_)}function p(){i&&clearTimeout(i)}function m(_,...x){if(c){p();return}if(_){p(),d.call(null,_,...x);return}if(l()||o){p(),d.call(null,_,...x);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,h(w)}let y=!1;function v(_){y||(y=!0,p(),!c&&(s!==null?(_||(a=2),clearTimeout(s),h(0)):_||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,v(!0)},n),v}function KU(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GU(t){return t!==void 0}function QU(t){return typeof t=="object"&&!Array.isArray(t)}function Cv(t){return typeof t=="string"||t instanceof String}function E_(t){return kv()&&t instanceof Blob}function kv(){return typeof Blob<"u"&&!tD()}function S_(t,e,n,r){if(r<e)throw Lg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Lg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function YA(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var li;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(li||(li={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JU(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(e,n,r,s,i,o,a,l,c,d,h,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,y)=>{this.resolve_=m,this.reject_=y,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new tu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===li.NO_ERROR,l=i.getStatus();if(!a||JU(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===li.ABORT;r(!1,new tu(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new tu(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());GU(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Rv();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?XA():MU();o(l)}else{const l=DU();o(l)}};this.canceled_?n(!1,new tu(!1,null,!0)):this.backoffId_=qU(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&KU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class tu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function YU(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function ZU(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function e8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function t8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function n8(t,e,n,r,s,i,o=!0){const a=YA(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return e8(c,e),YU(c,n),ZU(c,i),t8(c,r),new XU(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function s8(...t){const e=r8();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(kv())return new Blob(t);throw new Ge(Ke.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function i8(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o8(t){if(typeof atob>"u")throw zU("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Lp{constructor(e,n){this.data=e,this.contentType=n||null}}function a8(t,e){switch(t){case sr.RAW:return new Lp(ZA(e));case sr.BASE64:case sr.BASE64URL:return new Lp(eR(t,e));case sr.DATA_URL:return new Lp(c8(e),u8(e))}throw Rv()}function ZA(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function l8(t){let e;try{e=decodeURIComponent(t)}catch{throw Xa(sr.DATA_URL,"Malformed data URL.")}return ZA(e)}function eR(t,e){switch(t){case sr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Xa(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case sr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Xa(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=o8(e)}catch(s){throw s.message.includes("polyfill")?s:Xa(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class tR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Xa(sr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=d8(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function c8(t){const e=new tR(t);return e.base64?eR(sr.BASE64,e.rest):l8(e.rest)}function u8(t){return new tR(t).contentType}function d8(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n){let r=0,s="";E_(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(E_(this.data_)){const r=this.data_,s=i8(r,e,n);return s===null?null:new ss(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ss(r,!0)}}static getBlob(...e){if(kv()){const n=e.map(r=>r instanceof ss?r.data_:r);return new ss(s8.apply(null,n))}else{const n=e.map(o=>Cv(o)?a8(sr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new ss(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(t){let e;try{e=JSON.parse(t)}catch{return null}return QU(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f8(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function h8(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function rR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p8(t,e){return e}class qt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||p8}}let nu=null;function m8(t){return!Cv(t)||t.length<2?t:rR(t)}function sR(){if(nu)return nu;const t=[];t.push(new qt("bucket")),t.push(new qt("generation")),t.push(new qt("metageneration")),t.push(new qt("name","fullPath",!0));function e(i,o){return m8(o)}const n=new qt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new qt("size");return s.xform=r,t.push(s),t.push(new qt("timeCreated")),t.push(new qt("updated")),t.push(new qt("md5Hash",null,!0)),t.push(new qt("cacheControl",null,!0)),t.push(new qt("contentDisposition",null,!0)),t.push(new qt("contentEncoding",null,!0)),t.push(new qt("contentLanguage",null,!0)),t.push(new qt("contentType",null,!0)),t.push(new qt("metadata","customMetadata",!0)),nu=t,nu}function g8(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new hn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function y8(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return g8(r,t),r}function iR(t,e,n){const r=nR(e);return r===null?null:y8(t,r,n)}function v8(t,e,n,r){const s=nR(e);if(s===null||!Cv(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,h=t.fullPath,p="/b/"+o(d)+"/o/"+o(h),m=wh(p,n,r),y=YA({alt:"media",token:c});return m+y})[0]}function x8(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Pv{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(t){if(!t)throw Rv()}function w8(t,e){function n(r,s){const i=iR(t,s,e);return oR(i!==null),i}return n}function _8(t,e){function n(r,s){const i=iR(t,s,e);return oR(i!==null),v8(i,s,t.host,t._protocol)}return n}function aR(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=OU():s=jU():n.getStatus()===402?s=NU(t.bucket):n.getStatus()===403?s=LU(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function lR(t){const e=aR(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=PU(t.path)),i.serverResponse=s.serverResponse,i}return n}function E8(t,e,n){const r=e.fullServerUrl(),s=wh(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Pv(s,i,_8(t,n),o);return a.errorHandler=lR(e),a}function S8(t,e){const n=e.fullServerUrl(),r=wh(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new Pv(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=lR(e),a}function T8(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function b8(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=T8(null,e)),r}function I8(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=b8(e,r,s),d=x8(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=ss.getBlob(h,r,p);if(m===null)throw UU();const y={name:c.fullPath},v=wh(i,t.host,t._protocol),_="POST",x=t.maxUploadRetryTime,g=new Pv(v,_,w8(t,n),x);return g.urlParams=y,g.headers=o,g.body=m.uploadData(),g.errorHandler=aR(e),g}class A8{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=li.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=li.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=li.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw _a("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw _a("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw _a("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw _a("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw _a("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class R8 extends A8{initXhr(){this.xhr_.responseType="text"}}function Nv(){return new R8}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n){this._service=e,n instanceof hn?this._location=n:this._location=hn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ti(e,n)}get root(){const e=new hn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rR(this._location.path)}get storage(){return this._service}get parent(){const e=f8(this._location.path);if(e===null)return null;const n=new hn(this._location.bucket,e);return new Ti(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw WU(e)}}function C8(t,e,n){t._throwIfRoot("uploadBytes");const r=I8(t.storage,t._location,sR(),new ss(e,!0),n);return t.storage.makeRequestWithTokens(r,Nv).then(s=>({metadata:s,ref:t}))}function k8(t){t._throwIfRoot("getDownloadURL");const e=E8(t.storage,t._location,sR());return t.storage.makeRequestWithTokens(e,Nv).then(n=>{if(n===null)throw BU();return n})}function P8(t){t._throwIfRoot("deleteObject");const e=S8(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Nv)}function N8(t,e){const n=h8(t._location.path,e),r=new hn(t._location.bucket,n);return new Ti(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j8(t){return/^[A-Za-z]+:\/\//.test(t)}function O8(t,e){return new Ti(t,e)}function cR(t,e){if(t instanceof jv){const n=t;if(n._bucket==null)throw FU();const r=new Ti(n,n._bucket);return e!=null?cR(r,e):r}else return e!==void 0?N8(t,e):t}function L8(t,e){if(e&&j8(e)){if(t instanceof jv)return O8(t,e);throw Lg("To use ref(service, url), the first argument must be a Storage instance.")}else return cR(t,e)}function T_(t,e){const n=e==null?void 0:e[JA];return n==null?null:hn.makeFromBucketSpec(n,t)}function D8(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:zb(s,t.app.options.projectId))}class jv{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=QA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=CU,this._maxUploadRetryTime=kU,this._requests=new Set,s!=null?this._bucket=hn.makeFromBucketSpec(s,this._host):this._bucket=T_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=hn.makeFromBucketSpec(this._url,e):this._bucket=T_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){S_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){S_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ti(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new HU(XA());{const o=n8(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const b_="@firebase/storage",I_="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="storage";function dR(t,e,n){return t=dt(t),C8(t,e,n)}function fR(t){return t=dt(t),k8(t)}function M8(t){return t=dt(t),P8(t)}function Ov(t,e){return t=dt(t),L8(t,e)}function $8(t=w0(),e){t=dt(t);const r=Ff(t,uR).getImmediate({identifier:e}),s=Fb("storage");return s&&V8(r,...s),r}function V8(t,e,n,r={}){D8(t,e,n,r)}function F8(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new jv(n,r,s,e,Oi)}function U8(){xi(new Rs(uR,F8,"PUBLIC").setMultipleInstances(!0)),cr(b_,I_,""),cr(b_,I_,"esm2017")}U8();const B8={apiKey:"AIzaSyBPNpckpYiu009eSzHz_1YMlwHLtScgVjE",authDomain:"zingmp3-clone-61799.firebaseapp.com",projectId:"zingmp3-clone-61799",storageBucket:"zingmp3-clone-61799.appspot.com",messagingSenderId:"938280289868",appId:"1:938280289868:web:1b426fc2dba5d03dde96e9"},Lv=qb(B8),_r=oF(Lv),gr=IU(Lv);new Yn;const Dv=$8(Lv);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function hR(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function pR(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ao=function(){return ao=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ao.apply(this,arguments)},mR=function(t){return{loading:t==null,value:t}},z8=function(){return function(t,e){switch(e.type){case"error":return ao(ao({},t),{error:e.error,loading:!1,value:void 0});case"reset":return mR(e.defaultValue);case"value":return ao(ao({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},W8=function(t){var e=t?t():void 0,n=f.useReducer(z8(),mR(e)),r=n[0],s=n[1],i=f.useCallback(function(){var l=t?t():void 0;s({type:"reset",defaultValue:l})},[t]),o=f.useCallback(function(l){s({type:"error",error:l})},[]),a=f.useCallback(function(l){s({type:"value",value:l})},[]);return f.useMemo(function(){return{error:r.error,loading:r.loading,reset:i,setError:o,setValue:a,value:r.value}},[r.error,r.loading,i,o,a,r.value])},Vi=function(t,e){var n=W8(function(){return t.currentUser}),r=n.error,s=n.loading,i=n.setError,o=n.setValue,a=n.value;return f.useEffect(function(){var l=p9(t,function(c){return hR(void 0,void 0,void 0,function(){var d;return pR(this,function(h){switch(h.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return h.sent(),[3,4];case 3:return d=h.sent(),i(d),[3,4];case 4:return o(c),[2]}})})},i);return function(){l()}},[t]),[a,s,r]},H8=function(t){var e=f.useCallback(function(n,r){var s=new Yn;return n&&n.forEach(function(i){return s.addScope(i)}),r&&s.setCustomParameters(r),s},[]);return q8(t,e)},q8=function(t,e){var n=f.useState(),r=n[0],s=n[1],i=f.useState(),o=i[0],a=i[1],l=f.useState(!1),c=l[0],d=l[1],h=f.useCallback(function(p,m){return hR(void 0,void 0,void 0,function(){var y,v,_;return pR(this,function(x){switch(x.label){case 0:d(!0),s(void 0),x.label=1;case 1:return x.trys.push([1,3,4,5]),y=e(p,m),[4,L9(t,y)];case 2:return v=x.sent(),a(v),[2,v];case 3:return _=x.sent(),s(_),[3,5];case 4:return d(!1),[7];case 5:return[2]}})})},[t,e]);return[h,o,c,r]};const Mv={userInfo:{status:"loading",display_name:"",playlist_ids:[],role:"",song_count:0,song_ids:[],play_history:[],email:"",photoURL:"",like_song_ids:[],latest_seen:new it(0,0)}},K8=(t,e)=>{switch(e.type){case 0:return console.log("dispatch set user info"),{userInfo:{...t.userInfo,...e.payload.userInfo}};default:return console.log("default case"),{userInfo:t.userInfo}}},G8=()=>{const[t,e]=f.useReducer(K8,Mv),n=f.useCallback(r=>{e({type:0,payload:{userInfo:r}})},[]);return{userInfo:t.userInfo,setUserInfo:n}},Q8={userInfo:Mv.userInfo,setUserInfo:()=>{}},gR=f.createContext(Q8),J8=({children:t})=>{const{userInfo:e,setUserInfo:n}=G8();return u.jsx(gR.Provider,{value:{userInfo:e,setUserInfo:n},children:t})},Et=()=>{const{userInfo:t,setUserInfo:e}=f.useContext(gR);return{userInfo:t,setUserInfo:e}},_h=()=>{const t=Zt(),e=et(),{setUserInfo:n}=Et(),{initSongsContext:r}=ft(),[s]=H8(gr),{setActuallySongs:i}=ht(),o=()=>{document.querySelector(".hd-mp3").pause(),e(He({...ji({}),song_in:"",currentIndex:0}))};return{logOut:async()=>{await MA(gr),n(Mv.userInfo),console.log("use auth setUserInfo"),i([]),r(Qy),o(),t(It.Home)},logIn:async()=>{await s()&&(e(He()),r({adminSongs:[],adminPlaylists:[]}),n({status:"loading"}),console.log("use auth login, setUser info"))}}},X8={toasts:[]},Y8={state:X8,setToasts:()=>{},setErrorToast:()=>{},setSuccessToast:()=>{}},yR=f.createContext(Y8),Z8=({children:t})=>{const[e,n]=f.useState([]),r=({message:i="Somethings went wrong"})=>n(o=>[...o,{title:"error",id:ad(4),desc:i}]),s=({message:i="Success"})=>n(o=>[...o,{title:"success",id:ad(4),desc:`${i}`}]);return u.jsx(yR.Provider,{value:{state:{toasts:e},setToasts:n,setErrorToast:r,setSuccessToast:s},children:t})},Ht=()=>{const{state:{toasts:t},setToasts:e,setErrorToast:n,setSuccessToast:r}=f.useContext(yR);return{toasts:t,setToasts:e,setErrorToast:n,setSuccessToast:r}},eB={tempSongs:[],addedSongIds:[],status:"idle"},tB={state:eB,setTempSongs:()=>{},setAddedSongIds:()=>{},setStatus:()=>{}},vR=f.createContext(tB),nB=({children:t})=>{const[e,n]=f.useState([]),[r,s]=f.useState([]),[i,o]=f.useState("idle");return u.jsx(vR.Provider,{value:{state:{addedSongIds:r,tempSongs:e,status:i},setAddedSongIds:s,setTempSongs:n,setStatus:o},children:t})},$v=()=>{const{state:{addedSongIds:t,tempSongs:e,status:n},setTempSongs:r,setAddedSongIds:s,setStatus:i}=f.useContext(vR);return{addedSongIds:t,tempSongs:e,setTempSongs:r,setAddedSongIds:s,setStatus:i,status:n}},Dd=async({collection:t,id:e,msg:n})=>{await TF(ph(_r,t,e))},Ho=async({collection:t,id:e,msg:n})=>pA(ph(_r,t,e)),Ut=async({collection:t,id:e,data:n,msg:r})=>await SF(ph(_r,t,e),{...n},{merge:!0}),xR=async({file:t,folder:e,email:n,msg:r})=>{const s=n.replace("@gmail.com","")+"_"+t.name.replaceAll(" ","").toLowerCase(),i=Ov(Dv,`${e+s}`),o=await dR(i,t);return{fileURL:await fR(o.ref),filePath:o.metadata.fullPath}},wR=async({blob:t,folder:e,songId:n,msg:r})=>{const s=n+"_stock",i=Ov(Dv,`${e+s}`),o=await dR(i,t);return{fileURL:await fR(o.ref),filePath:o.metadata.fullPath}},Dg=async({filePath:t,msg:e})=>{const n=Ov(Dv,t);await M8(n)},Vv=async t=>{await Dd({collection:"songs",id:t.id,msg:">>> api: delete song doc"}),await Dg({filePath:t.song_file_path,msg:">>> api: delete song file"}),t.lyric_id&&await Dd({collection:"lyrics",id:t.lyric_id,msg:">>> api: delete song lyric doc"}),t.image_file_path&&await Dg({filePath:t.image_file_path,msg:">>> api: delete song's image file"})},A_=async(t,e)=>{const n=t.map(r=>r.id);await Ut({collection:"users",data:{playlist_ids:n},id:e.email,msg:">>> api: set user playlist_ids"})},_R=async({songIds:t,userInfo:e})=>{await Ut({collection:"users",data:{song_ids:t,song_count:t.length},id:e.email,msg:">>> api: set user song_ids, song_count"})};function la({admin:t}){const{userInfo:e}=Et(),n=et(),[r,s]=f.useState(!1),{playlist:i}=fe(Re),{setErrorToast:o,setSuccessToast:a}=Ht(),{userPlaylists:l,setUserPlaylists:c,adminPlaylists:d,setAdminPlaylists:h}=ft(),p=Zt(),y=(I=>A=>console.log(`[${I}]: ${A}`))("error"),v=async({newPlaylist:I})=>{const A=I.by==="admin"?[...d]:[...l];if(aL(I,A),!A.length)throw new Error("New playlists data error");await Ut({collection:"playlist",data:I,id:I.id,msg:">>> api: set playlist doc"}),t?h(A):c(A,[]),i.name===I.name&&n(Js(I))},_=async I=>{if(t===void 0&&e===void 0)throw y("lack of props"),o({message:"Add playlist error"}),new Error("lack of props");if(!I)throw y("playlist name invalid"),o({message:"Add playlist error"}),new Error("playlist name invalid");let b=sb(I);t&&(b+="_admin");const A=O1({id:b,by:t?"admin":e==null?void 0:e.email,name:I});s(!0);const k=[...t?d:l,A];await Ut({collection:"playlist",data:A,id:b,msg:">>> api: set playlist doc"}),t?h(k):(await A_(k,e),c(k,[]))},x=async I=>{console.log("playlist action deletePlaylist"),s(!0),await Dd({collection:"playlist",id:I.id,msg:">>> api: delete playlist doc"});let b=[];if(t){const R=d.filter(k=>k.id!==I.id);h(R)}else b=l.filter(R=>R.id!==I.id),c(b,[]);t||await A_(b,e),s(!1);const A=O1({});n(Js(A)),a({message:`${I.name} deleted`}),p(t?"/dashboard":"/mysongs")},g=async(I,b)=>{console.log("playlist action addSongToPlaylist"),s(!0);const{ids:A,time:R}=ob(I),k=[...b.song_ids,...A],V={...b,song_ids:k,time:b.time+R,count:k.length};if(V.song_ids.length<=b.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");await v({newPlaylist:V}),i.id,V.id,s(!1),a({message:`${I.length} songs added`})},w=async(I,b)=>{try{s(!0);const A={...b,name:I};await v({newPlaylist:A}),n(Js(A)),a({message:"Playlist edited"})}catch(A){throw console.log(A),new Error("Error when edit playlist")}finally{s(!1)}},E=async(I,b)=>{console.log("playlist action addSongToPlaylist");try{s(!0);const A=lL({song:I,playlist:b});if(A.time<=b.time||A.song_ids.length<=b.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");await v({newPlaylist:A})}catch(A){throw console.log(A),new Error("Error when edit playlist")}finally{s(!1)}},T=async(I,b)=>{if(!i.song_ids)throw o({}),new Error("Wrong playlist data");console.log("playlist action deleteSongFromPlaylist");const A=[...b],R=A.findIndex(V=>V.id===I.id);A.splice(R,1);const k=Xm({songs:A,existingPlaylist:i});if(k.count<0||k.time<0||k.song_ids.length===i.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");return await v({newPlaylist:k}),n(Js(k)),a({message:`'${I.name}' removed`}),A};return{loading:r,addPlaylist:_,editPlaylist:w,deletePlaylist:x,addSongsToPlaylist:g,deleteManyFromPlaylist:async(I,b)=>{if(console.log("playlist action deleteManyFromPlaylist"),!i.song_ids)throw console.log("Wrong playlist data"),o({}),new Error("Wrong playlist data");if(I.length===1)return T(I[0],b);const A=[...b];for(let k of I){const V=A.indexOf(k);A.splice(V,1)}const R=Xm({songs:A,existingPlaylist:i});if(R.count<0||R.time<0||R.song_ids.length===i.song_ids.length)throw o({message:"New playlist data error"}),new Error("New playlist data error");return s(!0),await v({newPlaylist:R}),n(Js(R)),s(!1),a({message:`${I.length} songs removed`}),A},deleteSongFromPlaylist:T,addSongToPlaylistSongItem:E,setPlaylistDocAndSetContext:v}}function rB({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"}))}const sB=f.forwardRef(rB),iB=sB;function zs({setIsOpenModal:t,title:e}){return u.jsxs("div",{className:"flex justify-between mb-[15px]",children:[u.jsx("h1",{className:"text-[26px] font-semibold",children:e}),u.jsx("button",{onClick:()=>t(!1),children:u.jsx(iB,{className:"w-[30px]"})})]})}function ER({admin:t,theme:e,playlist:n,playlistSongs:r,setPlaylistSongs:s,setIsOpenModal:i}){const{song:o}=fe(Re),{actuallySongs:a,setActuallySongs:l}=ht(),[c,d]=f.useState([]),{userSongs:h,adminSongs:p}=ft(),{addSongsToPlaylist:m,loading:y}=la({}),v={addSongContainer:"pb-[50px] relative",addSongContent:"max-h-[calc(60vh)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full max-[549px]:w-full"},_=f.useMemo(()=>!!c.length,[c]),x=f.useMemo(()=>t?p:h,[h,p]),g=async()=>{try{if(!n||!c.length||!i||!s)return;await m(c,n);const w=[...r,...c];if(s(w),o.song_in===`playlist_${n.id}`){console.log("set actually songs");const E=[...a,...c];l(E)}}catch(w){console.log(w)}finally{i(!1)}};return u.jsxs("div",{className:v.addSongContainer,children:[u.jsx(zs,{setIsOpenModal:i,title:"Add song to playlist"}),u.jsxs("div",{className:v.addSongContent,children:[u.jsx(K,{onClick:g,variant:"primary",className:`rounded-full ${e.content_bg} absolute bottom-0 right-15px min-w-[34px] h-[32px] ${!_&&"opacity-60 pointer-events-none"}`,children:y?u.jsx(Ln,{className:"w-[20px] animate-spin"}):"Save"}),x.map((w,E)=>{if(r.findIndex(S=>S.id===w.id)===-1)return u.jsx("div",{className:v.songItem,children:u.jsx(lb,{isChecked:!0,selectedSongs:c,setSelectedSongs:d,theme:e,data:w,active:!1,onClick:()=>{},setIsChecked:()=>{}})},E)})]})]})}function SR({children:t,active:e,done:n,inUpload:r,className:s,scrollBehavior:i}){const o=f.useRef(null),a=()=>{const l=o.current;l&&(l.scrollIntoView({behavior:i.current,block:"center"}),i.current==="instant"&&(i.current="smooth"))};return f.useEffect(()=>{e&&a()},[e]),u.jsxs("p",{ref:o,className:`lyric ${s&&s} ${r?"text-[16px]":"text-[30px] min-[1536px]:text-[40px]"}  select-none  max-[549px]:text-center font-bold ${n&&"opacity-40"} ${r?"flex":""} ${e&&!r?"text-[#ffed00]":""}`,children:[t,r&&e&&u.jsx("span",{className:"ml-[10px] text-[16px]"})]})}const oB={playStatus:{isError:!1,isPlaying:!1,isWaiting:!1,lyricSize:localStorage.getItem("lyricSize")||"medium",isLoaded:!0,isRepeat:localStorage.getItem("isRepeat")||"no",isShuffle:JSON.parse(localStorage.getItem("isShuffle")||"false"),isTimer:JSON.parse(localStorage.getItem("isTimer")||"0"),isCrossFade:JSON.parse(localStorage.getItem("isCrossFade")||"false")}},TR=xb({name:"playStatus",initialState:oB,reducers:{setPlayStatus(t,e){t.playStatus={...t.playStatus,...e.payload}}}}),Tn=t=>t.playStatus,{setPlayStatus:gt}=TR.actions,aB=TR.reducer;function lB({handlePlayPause:t}){const{playStatus:{isError:e,isPlaying:n,isWaiting:r}}=fe(Tn),{song:s}=fe(Re),i=f.useMemo(()=>r?u.jsx(Ln,{className:"w-[36px] max-[549px]:w-[46px] animate-spin"}):e&&s.name?u.jsx(qy,{className:"w-[30px] max-[549px]:w-[40px]"}):n?u.jsx(Ql,{className:"w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]"}):u.jsx(Ky,{className:"w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]"}),[r,e,n,s]);return u.jsx(u.Fragment,{children:u.jsx("button",{className:`p-[5px] ${r&&"pointer-events-none"} inline-flex items-center justify-center w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]`,onClick:()=>t(),children:i})})}const R_=f.memo(lB);function bR({bgRef:t,songInStore:e}){f.useEffect(()=>{if(e.image_url){const n=t.current;n&&(n.style.backgroundImage=`url(${e.image_url})`)}},[e])}function cB({audioEle:t,isOpenFullScreen:e}){const{song:n}=fe(Re),{playStatus:{isError:r}}=fe(Tn),[s,i]=f.useState({id:"",base:"",real_time:[]}),[o,a]=f.useState(!1),[l,c]=f.useState(!1),d=f.useRef(),h=async()=>{a(!0);try{const m=await Ho({collection:"lyrics",id:n.lyric_id,msg:">>> api: get lyric doc"});if(m.exists()){const y=m.data();i(y)}}catch{console.log("[error] get lyric error")}finally{a(!1)}},p=()=>{clearTimeout(d.current),c(!1),a(!0),i({base:"",real_time:[],id:""})};return f.useEffect(()=>{const m=async()=>{console.log("song loaded"),c(!0)};return t&&t.addEventListener("loadeddata",m),()=>{t&&t.removeEventListener("loadeddata",m)}},[]),f.useEffect(()=>{if(!n.lyric_id&&l){a(!1);return}s.real_time.length||l&&e&&(d.current=setTimeout(()=>{h()},500))},[l,e]),f.useEffect(()=>{if(r){a(!1);return}return()=>{p()}},[n,r]),{songLyric:s,loading:o}}const wc=(t,e)=>{const[n,r]=f.useState(JSON.parse(localStorage.getItem(t)||JSON.stringify(e)));return f.useEffect(()=>{localStorage.setItem(t,JSON.stringify(n))},[n]),[n,r]},Zn={isDebug:!1,focusDelay:3e3,scrollSongDelay:4e3,loadingDuration:200};function IR({admin:t}){const e=et(),{userInfo:n}=Et(),{setErrorToast:r}=Ht(),{setActuallySongs:s,actuallySongs:i}=ht(),{song:o,playlist:a}=fe(Re),{errorMsg:l,initial:c}=_c({admin:t}),{adminSongs:d,userSongs:h}=ft(),[p,m]=f.useState(!0),[y,v]=f.useState([]),[_,x]=f.useState(0),g=f.useRef(!0),w=lf(),E=Zt(),T=f.useCallback(async()=>{if(!w.id)throw new Error;try{let R;const k=await Ho({collection:"playlist",id:w.id,msg:"Get playlist doc"});k.exists()?(R=k.data(),console.log(">>> local: set playlist"),e(Js(R)),x(Math.random())):(console.log("Playlist not found"),E(t?"/dashboard":"/"))}catch(R){console.log(R),r({message:"Error when get playlist"})}},[w,n]),S=async R=>{console.log(">>> handle playlist, song modified");const k=Xm({songs:R,existingPlaylist:a});await Ut({collection:"playlist",data:k,id:a.id,msg:">>> api: update playlist doc"}),e(Js(k))},I=f.useCallback(async()=>{console.log(">>> api: get playlist songs"),m(!0);const R=$i(_r,"songs"),k=Fs(R,Us("id","in",a.song_ids)),V=await Bs(k);if(V.docs){const P=V.docs.map(D=>({...D.data(),song_in:`playlist_${a.id}`}));v(P),P.length!=a.song_ids.length&&(console.log(">>> handle playlist, song modified"),await S(P)),o.song_in===`playlist_${a.id}`&&i.length<P.length&&(s(P),console.log("set actually songs")),await _l(Zn.loadingDuration),m(!1)}},[a.song_ids,h,d,y]),b=async()=>{const R=y.find(V=>V.image_url);if(!R||a.image_url&&a.image_url===R.image_url)return;const k={...a,image_url:R.image_url,blurhash_encode:R.blurhash_encode||""};await Ut({collection:"playlist",id:a.id,data:k,msg:">>> api: update image_url playlist doc"})},A=()=>{o.song_in.includes(a.name)&&(s(y),console.log("setActuallySongs"))};return f.useEffect(()=>{t&&!c&&E("/dashboard")},[]),f.useEffect(()=>{if(!(!c||l)&&g.current){if(g.current=!1,a.id===w.id){console.log("Already have playlist"),x(Math.random());return}T()}},[c]),f.useEffect(()=>{if(!(!_||l)){if(!a.song_ids.length){setTimeout(()=>{m(!1)},Zn.loadingDuration);return}I()}},[_]),f.useEffect(()=>{c&&y.length&&b()},[y]),f.useEffect(()=>{t||y.length&&A()},[y]),{playlistSongs:y,loading:p,setPlaylistSongs:v}}const AR=()=>{window.dispatchEvent(new Event("mousemove"))},RR=(t,e,n=!1)=>{const r=window.innerWidth;if(!t||!e){console.log("ele not found");return}const i=t.getBoundingClientRect().left,o=r-(i+t.offsetWidth),a=Math.abs(Math.ceil(i-o))/2;if(a<5)return!1;n&&(e.onscroll=()=>{},setTimeout(()=>{e.onscroll=AR},900)),n||Math.abs(i)>r||Math.abs(o)>r?e.style.scrollBehavior="auto":e.style.scrollBehavior="smooth";let l=e.scrollLeft;return o>i?setTimeout(()=>{e.scrollLeft=l-a},300):o<i&&setTimeout(()=>{e.scrollLeft=l+a},300),!0};function uB({containerRef:t,songItemRef:e,isOpenFullScreen:n,idle:r}){const{song:s}=fe(Re),i=()=>{const o=e==null?void 0:e.current,a=t==null?void 0:t.current;RR(o,a,r)};f.useEffect(()=>{if(n){if(!scroll||!(t!=null&&t.current)||!(e!=null&&e.current)){console.log("lack props");return}s.name&&n&&i()}},[s,n]),f.useEffect(()=>{const o=t==null?void 0:t.current;if(o)return o.onscroll=AR,()=>{o.onscroll=()=>{}}},[])}function dB({textRef:t,textWrapperRef:e,autoScroll:n}){const{song:r}=fe(Re),{playStatus:{isPlaying:s}}=fe(Tn),i=f.useRef(),o=f.useRef(),a=f.useRef(0),l=f.useRef(""),c=f.useRef(0),d=f.useRef(!1),h=f.useCallback(()=>{const v=t==null?void 0:t.current;v&&(v.style.transition="none",v.style.transform="translateX(0)",v.innerText=l.current,d.current=!1)},[t]),p=()=>{if(!t){console.log("lack of prop");return}if(!a.current&&!c.current)return;const v=t.current;v&&(console.log("scroll"),v.innerHTML=l.current+"&nbsp; &nbsp; &nbsp;"+l.current,d.current=!0,v.style.transition=`transform linear ${a.current}s`,v.style.transform=`translateX(-${c.current}px)`,o.current=setTimeout(()=>{h(),console.log("call unscroll")},a.current*1e3))},m=()=>{if(!n||!t||!e)return;if(d.current){console.log("reScroll cancel cause is scroll");return}const v=t.current,_=e.current;v.offsetWidth-_.offsetWidth>0&&(l.current=v.innerText,c.current=v.offsetWidth+20,a.current=Math.ceil(c.current/35),console.log("reScroll dis",c.current))},y=()=>{h(),a.current=0,c.current=0};f.useEffect(()=>{if(!(!r.name||!s)&&(m(),!!c.current))return n&&a.current&&!d.current&&(setTimeout(()=>{p()},1e3),i.current=setInterval(()=>{p()},a.current*1e3+3e3+1e3)),()=>{clearInterval(i.current),clearTimeout(o.current),y()}},[r,s])}const CR=f.createContext(null);function fB({children:t,playlistSongs:e,setPlaylistSongs:n}){return u.jsx(CR.Provider,{value:{setPlaylistSongs:n,playlistSongs:e},children:t})}const hB=()=>{const t=f.useContext(CR);if(!t)throw console.log("Playlist context not found"),new Error("Playlist context not found");return t},pB=({song:t,admin:e=!1,closeModal:n,setIsOpenPopup:r})=>{const s=et(),{song:i}=fe(Re),{setErrorToast:o,setSuccessToast:a}=Ht(),{userInfo:l,setUserInfo:c}=Et(),{removeFromQueue:d}=ht(),{userSongs:h,setUserSongs:p,adminSongs:m,setAdminSongs:y}=ft(),{playlistSongs:v,setPlaylistSongs:_}=hB(),{addSongToPlaylistSongItem:x,deleteSongFromPlaylist:g}=la({}),w=f.useMemo(()=>e?m:h,[m,h]),E=f.useMemo(()=>e?y:p,[]),[T,S]=f.useState(!1),b=(D=>M=>console.log(`[${D}]: ${M}`))("success");return{updateAndSetUserSongs:f.useCallback(async({song:D})=>{let z=[...h];const M=z.indexOf(D);z.splice(M,1);const G=z.map(C=>C.id);if(z.length!==h.length)return p(z),G},[h]),handleDeleteSong:async()=>{try{S(!0);let D=[...w];const z=D.indexOf(t);D.splice(z,1);const M=D.map(G=>G.id);if(await Vv(t),e||await Ut({collection:"users",data:{song_ids:M,song_count:M.length},id:l.email,msg:`>>> api: update user doc ${l.email}`}),E(D),(e||i.song_in==="user")&&d(t),!e&&l.like_song_ids.includes(t.id)){const G=l.like_song_ids.filter(C=>C!==t.id);c({like_song_ids:G})}if(i.id===t.id){const G=ji({});s(He({...G,song_in:"",currentIndex:0}))}b("delete song completed"),a({message:`'${t.name}' deleted`})}catch(D){throw console.log({message:D}),new Error("Error when delete song")}finally{S(!1),n()}},handleAddSongToPlaylistMobile:async D=>{try{S(!0),await x(t,D),a({message:`'${t.name}' added to '${D.name}'`})}catch(z){throw console.log(z),new Error("Error when add song to playlist")}finally{S(!1),n()}},handleRemoveSongFromPlaylist:async()=>{try{if(S(!0),!v.length)throw Error("Error when remove song from playlist");const D=await g(t,v);_(D)}catch(D){throw console.log(D),new Error("Error when remove song from playlist")}finally{S(!1),r(!1)}},handleAddSongToPlaylist:async D=>{if(!t||!D){o({message:"Lack of props"});return}try{S(!0),await x(t,D),a({message:`'${t.name}' added to '${D.name}'`})}catch(z){throw console.log(z),new Error("Error when add song to playlist")}finally{S(!1),r(!1)}},loading:T}},C_=[{blurhash_encode:"",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fdatb2110118%40student.ctu.edu.vn_alexskrindo-jumbo%5Bncsrelease%5D.mp3?alt=media&token=ce5c858f-d936-4fc9-903f-2a562e1118ea",by:"admin",id:"alexskrindojumboncsrelease_0DR0_admin",duration:191,song_file_path:"songs/datb2110118@student.ctu.edu.vn_alexskrindo-jumbo[ncsrelease].mp3",singer:"Alex Skrindo",lyric_id:"alexskrindojumboncsrelease_0DR0_admin",image_file_path:"",image_url:"",song_in:"admin",name:"Jumbo",size:1e3},{name:"Time",song_file_path:"songs/syncole-time.mp3_huudat01234560",singer:"Syn Cole",blurhash_encode:"U8H,Yj56Mdxt7%r=n$S400%1X,V[_#OZo#s,",image_file_path:"images/time_eFcd_admin_stock",by:"admin",id:"time_eFcd_admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fsyncole-time.mp3_huudat01234560?alt=media&token=68c0f28e-50b1-4f25-8fb3-c61221154d27",lyric_id:"time_eFcd_admin",duration:183,image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Ftime_eFcd_admin_stock?alt=media&token=b340df35-159e-4cb1-8b6a-6e9574b849a4",song_in:"admin",size:1e3},{blurhash_encode:"UZOzSt~qD%tlozi_buV@x]s:ozaK-VNunOkq",lyric_id:"tropiclove_GKjN_admin",name:"Tropic Love",singer:"Contacreast",by:"admin",image_file_path:"images/tropiclove_GKjN_admin_stock",duration:300,song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_contacreast-tropiclove.mp3?alt=media&token=84b102c3-5e44-4e0d-ae90-0c4f0d886c50",song_in:"admin",id:"tropiclove_GKjN_admin",song_file_path:"songs/huudat01234560_contacreast-tropiclove.mp3",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Ftropiclove_GKjN_admin_stock?alt=media&token=19fbd815-6b18-47b6-8f28-db7a6c0638d6",size:1e3}],k_=[{name:"NCS",id:"test_b6-B_admin",time:654,count:3,blurhash_encode:"U48Eh:@@D47y*Wz~tLGg00CPyp*#HQ7TS5[O",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fncs005dddifferentheavensafeandsound_Rnfk_admin_stock?alt=media&token=cb41fea4-1246-431e-a0d9-f36ec86fd494",by:"admin",song_ids:["time_eFcd_admin","popsicle_Wv03_admin","ncs005dddifferentheavensafeandsound_Rnfk_admin"]}],kR=$i(_r,"songs"),PR=$i(_r,"playlist"),mB=async()=>{const t=Fs(kR,Us("by","==","admin")),e=await Bs(t);if(e.docs)return e.docs.map(r=>({...r.data(),song_in:"admin"}))},gB=async()=>{const t=Fs(PR,Us("by","==","admin")),e=await Bs(t);if(e.docs)return e.docs.map(r=>r.data())},yB=async t=>{const e=Fs(PR,Us("id","in",t.playlist_ids)),n=await Bs(e);if(n.docs.length)return n.docs.map(s=>s.data())},vB=async t=>{const e=Fs(kR,Us("id","in",t.song_ids)),n=await Bs(e);if(n.docs.length)return n.docs.map(s=>({...s.data(),song_in:"user"}))},xB=async t=>{var n,r;const e={userSongs:[],userPlaylists:[]};if((n=t==null?void 0:t.song_ids)!=null&&n.length){const s=await vB(t);s!=null&&s.length&&(e.userSongs=s)}if((r=t==null?void 0:t.playlist_ids)!=null&&r.length){const s=await yB(t);s!=null&&s.length&&(e.userPlaylists=s)}return e},wB=async t=>{const e=$i(_r,"users"),n=ph(e,t),r=await pA(n);if(r.exists())return r.data()};function _c({admin:t}){const{setErrorToast:e}=Ht(),{userInfo:n,setUserInfo:r}=Et(),{initial:s,initSongsContext:i}=ft(),[o,a]=f.useState(""),[l,c]=f.useState(!0),d=f.useRef(!0),h=En(),[p,m]=wc("play_history",[]),y=_=>{c(!1),a(_),e({message:"Use song error"})},v=async()=>{if(Zn.isDebug){await _l(Zn.loadingDuration),i({userSongs:C_,userPlaylists:k_,adminPlaylists:k_,adminSongs:C_}),c(!1);return}try{c(!0);const _=await mB(),x=await gB();if(!n.email||t){await _l(Zn.loadingDuration),i({adminSongs:_,adminPlaylists:x}),c(!1);return}const g=await wB(n.email);if(!(g!=null&&g.email)){i({adminSongs:_,adminPlaylists:x}),c(!1);return}r({...g}),console.log("use song set full user info"),g.play_history&&m(g.play_history);const w=await xB(g);i({...w,adminSongs:_,adminPlaylists:x})}catch(_){console.log(_),y("init song error")}finally{c(!1),d.current=!0}};return f.useEffect(()=>{if(t){s&&setTimeout(()=>c(!1),Zn.loadingDuration);return}if(n.status==="loading"){c(!0);return}if(h.pathname==="/mysongs"&&!n.email){console.log(">>> skip init because in /mysongs but no user");return}if(!s&&d.current){d.current=!1,v();return}else if(s){console.log("Already init"),setTimeout(()=>c(!1),Zn.loadingDuration);return}},[n.status,s]),{initial:s,loading:l,errorMsg:o,initSongsAndPlaylists:v}}function _B({audioRef:t,admin:e,inputRef:n,testImageRef:r}){const{userInfo:s}=Et(),{setTempSongs:i,tempSongs:o,setAddedSongIds:a,setStatus:l,status:c}=$v(),{setErrorToast:d,setSuccessToast:h,setToasts:p}=Ht(),{setUserSongs:m,userSongs:y,setAdminSongs:v,adminSongs:_}=ft(),{setActuallySongs:x,actuallySongs:g}=ht(),{song:w}=fe(Re),[E,T]=f.useState(),S=f.useRef([]),I=f.useRef([]),b=f.useRef(!1),A=f.useMemo(()=>e?_:y,[y,_]),R=M=>{if(!n.current)return;const G=n.current;G&&(G.value="",I.current=[],l(M))},V=(M=>C=>console.log(`[${M}]: ${C}`))("error"),P=f.useCallback(async M=>{if(!s.email){d({message:"Missing user data"});return}l("uploading");const C=M.target.files;if(!C.length){l("finish");return}let W=ji({by:e?"admin":s.email}),F=[];const $=Date.now(),H=j=>A.some(O=>O.singer===j.singer&&O.name===j.name&&O.size===j.size)||F.some(O=>O.singer===j.singer&&O.name===j.name&&O.size===j.size);try{let j;for(j=0;j<=C.length-1;j++){const O=C[j],Q=await iL(O);if(!Q){d({message:"Error when parser song"}),R("finish-error");return}let Y={...W,name:Q.name,singer:Q.singer,size:Math.floor(O.size/1024)},ne;if(Q.image){ne=new Blob([Q.image],{type:"application/octet-stream"});const ae=URL.createObjectURL(ne);Y.image_url=ae}if(H(Y)){console.log(">>>duplicate"),b.current=!0,S.current.push(Y);continue}F.push(Y),I.current=[...I.current,j],Object.assign(O,{for_song_id:F.length-1,imageBlob:ne})}if(y.length+I.current.length>5&&s.role!=="admin"){R("finish-error"),d({message:"You have reach the upload limit"});return}if(!F.length){b.current=!1,l("finish-error"),R("finish-error"),d({message:"Duplicate song"});return}i(F);for(let O of I.current){let Q=C[O],Y=sb(F[Q.for_song_id].name);e&&(Y+="_admin");const ne=Q.for_song_id,se={...F[ne]};se.image_url&&(console.log("have stock image"),await D(Q.imageBlob,Y,se));const{filePath:ae,fileURL:Ae}=await xR({file:Q,folder:"/songs/",email:s.email,msg:">>> api: upload song file"});F[ne]={...se,id:Y,song_file_path:ae,song_url:Ae};const pt=t.current;pt.src=URL.createObjectURL(Q),await z(F,ne)}}catch{R("finish-error"),d({message:"Error when upload song file"}),i([]);return}try{if(I.current=[],!e){const O=F.map(ne=>ne.id),Y=[...y.map(ne=>ne.id),...O];await _R({songIds:Y,userInfo:s})}e?v([..._,...F]):m([...y,...F]),i([]),b.current?(R("finish-error"),p(O=>[...O,{id:ad(4),title:"warning",desc:"Song duplicate"}])):(R("finish"),h({message:`${F.length} songs uploaded`}));const j=Date.now();console.log(">>> upload songs finished after",(j-$)/1e3)}catch(j){V(`catch 2 erorr ${j}`),d({message:"Update user data failed"}),R("finish-error");return}},[s,y,w.song_in]),D=async(M,G,C)=>new Promise((W,F)=>{const $=r.current,H=URL.createObjectURL(M);$.src=H;const j=async()=>{try{URL.revokeObjectURL(H);const{encode:Q}=await ib(M),{fileURL:Y,filePath:ne}=await wR({blob:M,folder:"/images/",songId:G,msg:">>> api: upload song's image blob"});Q&&(C.blurhash_encode=Q),C.image_url=Y,C.image_file_path=ne,W()}catch{V("upload image error"),$.removeEventListener("error",O),F()}finally{$.removeEventListener("load",j)}},O=()=>{V("stock image error"),URL.revokeObjectURL(H),C.image_url="",$.removeEventListener("error",O),W()};$.addEventListener("load",j),$.addEventListener("error",O)}),z=async(M,G)=>new Promise((C,W)=>{const F=t.current,$=async()=>{try{let H=M[G];const j=Math.ceil(F.duration);H={...H,duration:j},M[G]={...H,song_in:e?"admin":"user"},await Ut({collection:"songs",data:H,id:H.id,msg:">>> api: set song doc"}),i(M),a(O=>[...O,H.id]),(e||w.song_in==="user")&&(T(M[G]),console.log("trigger update actually songs")),URL.revokeObjectURL(F.src),console.log(M[G].name,"uploaded"),C()}catch{V("upload song file error"),W()}finally{F.removeEventListener("loadedmetadata",$)}};F.addEventListener("loadedmetadata",$)});return f.useEffect(()=>{if(!E)return;const M=[...g];M.push(E),x(M),console.log("setActuallySongs when upload song")},[E==null?void 0:E.id]),f.useEffect(()=>{const M=document.querySelector(".temp-song");M&&M.scrollIntoView({behavior:"smooth",block:"center"})},[o]),{handleInputChange:P}}function EB(t,e,n){const[r,s]=f.useState(!1),[i,o]=wc("volume",1),a=c=>{const h=c.target.getBoundingClientRect();if(t.current){let p=+((c.clientX-h.x)/t.current).toFixed(2);p>.9?p=1:p<.05?(p=0,s(!0)):s(!1),o(p)}},l=()=>{s(!r)};return f.useEffect(()=>{e.current&&n&&(e.current.style.width=i*100+"%",n.volume=i)},[i]),f.useEffect(()=>{n&&(r?n.muted=!0:n.muted=!1)},[r]),{volume:i,handleSetVolume:a,isMute:r,handleMute:l}}const SB=/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;function TB({data:t,inputFields:e,imageURLFromLocal:n}){const[r,s]=f.useState(!!t.name),[i,o]=f.useState(!!t.singer),[a,l]=f.useState(!1),[c,d]=f.useState(!1),[h,p]=f.useState(!1);return f.useEffect(()=>{e.name?s(!0):s(!1)},[e.name]),f.useEffect(()=>{e.singer?o(!0):o(!1)},[e.singer]),f.useEffect(()=>{if(!e.image_url){l(!0);return}const m=SB.test(e.image_url);l(m)},[e.image_url]),f.useEffect(()=>{(e.name!==t.name||e.singer!==t.singer||e.image_url)&&p(!0)},[e,n]),f.useEffect(()=>{d(r&&i&&a&&h)},[r,i,a,h]),{validName:r,validSinger:i,validURL:a,isAbleToSubmit:c,isChangeInEdit:h,setValidURL:l}}function bB({song:t,setIsOpenModal:e,theme:n,admin:r}){const s=et(),{userInfo:i}=Et(),{setErrorToast:o,setSuccessToast:a}=Ht(),{song:l}=fe(Re),{userSongs:c,adminSongs:d,setUserSongs:h,setAdminSongs:p}=ft(),{actuallySongs:m,setActuallySongs:y}=ht(),[v,_]=f.useState(!1),[x,g]=f.useState(!1),[w,E]=f.useState(t.image_url),[T,S]=f.useState(""),[I,b]=f.useState(),[A,R]=f.useState({name:t.name,singer:t.singer,image_url:""}),k=f.useRef(null),V=f.useMemo(()=>r?d:c,[r,r,c]),{isAbleToSubmit:P,validName:D,validSinger:z,validURL:M,isChangeInEdit:G,setValidURL:C}=TB({data:t,inputFields:A,imageURLFromLocal:T}),W=f.useMemo(()=>{if(T)return T;if(w)return w;if(M)return A.image_url},[A,T,w,t,M]),F=f.useMemo(()=>!!T||!!w,[T,w]),$=(se,ae)=>{R({...A,[se]:ae})},H=f.useCallback(()=>{t.image_file_path&&!T?E(""):T?(S(""),b(void 0)):E(""),g(!0);const se=k.current;se&&(se.value="")},[T,t.image_file_path]),j=f.useCallback(se=>{const Ae=se.target.files[0];S(URL.createObjectURL(Ae)),g(!0),b(Ae)},[]),O=()=>{_(!1),e(!1)},Q=se=>{se.stopPropagation(),O(),e(!1)},Y=async()=>{if(!t.id){o({message:"Edit song wrong data id"});return}try{const se=[...V];let ae={...t};if(G){if(console.log("is change in edit"),!A.name||!A.singer){console.log("input invalid"),o({});return}const Ae=A.image_url&&M?A.image_url:ae.image_url;if(_(!0),ae={...ae,name:A.name,singer:A.singer,image_url:Ae},ae.name!==A.name||ae.singer!==A.singer){console.log("input invalid"),o({});return}if(I&&x){const{filePath:pt,fileURL:un}=await xR({file:I,folder:"/images/",email:i.email});ae.image_file_path=pt,ae.image_url=un}else x&&(ae.image_file_path="");if(!x&&za(ae,se)==null){o({message:"New user song Error"});return}}if(x){if(_(!0),console.log("isImpactOnImage"),t.image_file_path&&(ae.image_file_path="",ae.image_url="",await Dg({filePath:t.image_file_path,msg:">>> api: delete song's image file"})),!w&&!I&&(console.log("remove current image url"),ae.image_file_path="",ae.image_url=""),I){console.log("upload new file");const pt=await oL(I);if(pt==null)return;const un=wR({blob:pt,folder:"/images/",songId:ae.id}),{encode:en}=await ib(pt);en&&(ae.blurhash_encode=en,console.log("check encode",en));const{filePath:pe,fileURL:Qe}=await un;ae.image_file_path=pe,ae.image_url=Qe}if(za(ae,se)==null){o({message:"New user song Error"});return}}if(await Ut({collection:"songs",data:ae,id:ae.id,msg:">>> api: update song doc"}),r)p(se);else{h(se);const Ae=[...m];za(ae,Ae),y(Ae),console.log("setActuallySongs"),l.id===ae.id&&s(He({...ae,currentIndex:l.currentIndex,song_in:l.song_in}))}a({message:`${ae.name} edited`}),O()}catch(se){console.log(se),se.response.data?console.log("[error]: ",se.response.data):console.log("[error]: Server error"),o({})}finally{_(!1)}},ne={textColor:n.type==="light"?"text-[#333]":"text-[#fff]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${n.alpha} text-[14px] font-[500]`};return u.jsxs("div",{className:`w-[500px] max-w-[calc(90vw-40px)] h-[auto] ${v?"opacity-60 pointer-events-none":""}`,children:[u.jsx("input",{ref:k,id:"editImageInput",type:"file",accept:"image/*",onChange:j,className:"hidden"}),u.jsx("h1",{className:"text-[20px] font-semibold",children:"Edit"}),u.jsxs("div",{className:"flex gap-[20px] mt-[10px] max-[800px]:flex-col",children:[u.jsxs("div",{className:"w-[30%] max-[800px]:flex max-[800px]:w-full max-[800px]:gap-[12px]",children:[u.jsx("div",{className:"w-full rounded-[5px] overflow-hidden",children:u.jsx(Hr,{classNames:"object-cover object-center w-full h-full",onError:()=>C(!1),src:W,blurHashEncode:t.blurhash_encode})}),u.jsxs("div",{className:"md:mt-[10px]",children:[u.jsxs("div",{className:"flex gap-[10px]",children:[u.jsx("label",{htmlFor:"editImageInput",className:`inline-block cursor-pointer hover:brightness-90 px-[20px] py-[5px] bg-${n.alpha} rounded-full text-[14px]`,children:u.jsx(_j,{className:"w-[15px]"})}),F&&u.jsx(K,{onClick:()=>H(),className:`inline-block hover:brightness-90 px-[20px] py-[5px] ${n.content_bg} rounded-full text-[14px]`,children:u.jsx(er,{className:"w-[15px]"})})]}),u.jsx("p",{className:`text-[12px] ${ne.textColor} mt-[10px]`,children:"* Image from URL will not be apply until you remove current image"})]})]}),u.jsxs("div",{className:"flex flex-col flex-grow gap-[10px]",children:[u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"text-[14px] inline-flex",children:["Name:",D?u.jsx(Ba,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(er,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:`${ne.input} ${ne.textColor}`,value:A.name,type:"text",onChange:se=>$("name",se.target.value),placeholder:t.name})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Singer:",z?u.jsx(Ba,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(er,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:ne.input,value:A.singer,onChange:se=>$("singer",se.target.value),type:"text",placeholder:t.singer})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Image URL:",A.image_url&&u.jsx(u.Fragment,{children:M?u.jsx(Ba,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(er,{className:"w-[20px] text-red-500 ml-[10px]"})})]}),u.jsx("input",{className:ne.input,value:A.image_url,onChange:se=>$("image_url",se.target.value),type:"text"})]}),u.jsxs("div",{className:"flex gap-[10px] mt-[10px]",children:[u.jsx(K,{isLoading:v,onClick:()=>Y(),className:`${n.content_bg} rounded-full text-[14px] ${P?"":!x&&"pointer-events-none opacity-60"}`,variant:"primary",children:"Save"}),u.jsx(K,{onClick:Q,className:`bg-${n.alpha} rounded-full hover:bg-red-500 hover:text-[#fff] text-[14px]`,variant:"primary",children:"Close"})]})]})]})]})}function IB({toast:t,theme:e,onClick:n}){const r={icon:"w-[30px] max-[549px]:w-[25px]",container:`text-white px-[12px] py-[6px] rounded-[4px] flex items-center  ${e.side_bar_bg} border border-${e.alpha}`,text:`font-[500] text-[14px] max-[549px]:text-[14px] ${e.type==="light"?"text-[#333]":""}`};return u.jsxs("div",{onClick:()=>n?n(t.id):void 0,className:`${r.container} animate-[fadeIn_0.3s_linear]`,children:[t.title&&u.jsxs("span",{className:"mr-[10px]",children:[t.title==="success"&&u.jsx(wT,{className:`${r.icon} text-emerald-500 `}),t.title==="error"&&u.jsx(a4,{className:`${r.icon} text-red-500`}),t.title==="warning"&&u.jsx(qy,{className:`${r.icon} text-yellow-500`})]}),u.jsx("p",{className:r.text,children:t.desc})]})}function AB({lyric:t,handleSetTime:e,theme:n,realTimeLyrics:r,index:s,setRealTimeLyrics:i}){const[o,a]=f.useState(!1),[l,c]=f.useState(t.text),d=f.useRef(null),h=m=>{m.preventDefault();const y=[...r],v={...y[s],text:l};y[s]=v,console.log("check new lyric ",v),i(y),a(!1)},p={input:`bg-${n.alpha} rounded-[4px] outline-none w-full px-[8px] text-[16px]`};return f.useEffect(()=>{var m;o&&((m=d.current)==null||m.focus())},[o]),u.jsxs("div",{className:"pb-[10px]",children:[!o&&u.jsxs("p",{className:"text-[16px] leading-[1.2] font-bold select-none flex items-center",children:[t.text,u.jsx("button",{onClick:()=>a(!0),className:"ml-[8px]",children:u.jsx(xl,{className:"w-[16px]"})})]}),o&&u.jsx("form",{action:"",onSubmit:h,children:u.jsx("input",{onBlur:()=>a(!1),value:l,onChange:m=>c(m.target.value),ref:d,type:"text",className:p.input})}),u.jsxs("div",{className:"flex gap-[10px] h-[20px]",children:[u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.start),children:[t.start,"s"]}),u.jsx("span",{children:" - "}),u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.end),children:[t.end,"s"]})]})]})}function Mg({cb:t,active:e,size:n="default"}){const{theme:r}=ye(),s={circle:`${n==="default"?"w-[20px] h-[20px]":"w-[16px] h-[16px]"}  absolute bg-white left-[3px] rounded-[50%] transition-transform top-[50%] translate-y-[-50%]`};return u.jsx("div",{onClick:t,className:`relative  ${n==="default"?"h-[24px]":"h-[20px]"} rounded-[99px] w-[40px]  ${e?r.content_bg:"bg-"+r.alpha}`,children:u.jsx("div",{className:`${s.circle} ${e?"translate-x-[14px]":"translate-x-[0]"}`})})}function RB({children:t}){const[e,n]=Vi(gr),{setUserInfo:r,userInfo:s}=Et(),i=f.useRef(!1),o=async()=>{i.current=!0;try{await r0.get("")}catch(l){l.response?console.log(">>> server is running"):console.log(">>> server is offline")}},a=async()=>{try{if(!(e!=null&&e.email)){r({status:"finish"});return}r({status:"finish",email:e==null?void 0:e.email,display_name:e==null?void 0:e.displayName,photoURL:e==null?void 0:e.photoURL}),console.log(">>> auth have user, update status")}catch(l){console.log(l)}};return f.useEffect(()=>{if(!n){if(!e){s.status!=="finish"&&(r({status:"finish"}),console.log(">>> auth no user, set userinfo status"));return}i.current||o(),a()}},[e,n]),t}const Fv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABnCAMAAADBqBfIAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAu5QTFRF+9t4AAAA////+tp4+9t6iWRS/fDGkm1W//35imVT///+imRT/Oah9NN25sRx/eej+91+//78i2ZT+9x7kGtV/vbeiWRS9tZ2+Nd3/fHL+96C/OWd//zz//32/vPS2rlu/vLOjWhU/e/D+9+F//rslXBX/euy/vTXl3NX/vTV+dl3/ems7s10/OGN/vfhlnBQ/Oem/OSa/OKQt5Ri8dB1/N+I/vXaoHta/eu1/vjk/fHJ/vnp/OCK/e26o39b6chyj2lR/e/BimVSiWRS7Mtz/eiqjGdR/eqv//vv/OSYjWdR4b9vzqxp/OOWk21Qi2ZRnXlZ/vnnpoJcv5xl3bxumnNP/OKUimRSimVSkGlRm3ZZimRSq4del3BP1LJrmnJPzKppnXVO2LZtroZMt45Mj2hRqH9MrIJKmXJPqIRdrIhelG1Qn3dPxaNms49hqoJLlG1Qm3NPupFJoXlOnXZPnHVPlG5QlW5QkWtRjmhRjGZSi2ZSn3dOmHFPjWdSnXVOtZJhoXhO/e6948FwvZpk/OGPmXJQqoJJu5djrodFvpVIj2hRl3BPj2lRjGdRsohLkWpRm3NP////jWdRw5lGqIFNpHxPlm9QlG1Qn3dPl3BPsYhNx6Rn0K5qsY5gmHBP//vxkWtR////////zqNJ////////s4pIkGpRl3BQ///+pn1M////ropfmHFQpn5PjmhRmnNPonpOm3VOl3BQxp9JxZlLkmxRwp9lk2xRs4lK////lnBQwplJnXZPkmtQzLqvkmtQ////lW9Q9/Tx+vj2sJN74s+lkmxQ6+Xjo4Rx2c3EspmN2rt4////5sqFwa6k////xZtD5dfDoXhKlnRl////uaCQ+/jy////zKBH////totJ////////4MeV////////1Kc++vfznHdYu5RFn3hOr4dLnXZP8ezp////////vpVD////////mnNP////l3BQkWtRmXJPpH1Np39Q////rINMmnROoHhQyC8s0wAAAPp0Uk5T/wD////3///////9//////////////r///////////////////////////////9o/////////////////////7//4u7//9X////K////iN///////0P/8uyf/+j/Q/8Y/x3/AwKuBg1O//9xDP//C4Q1BRMuK3hWirnn2idLzxf/Cf////86A/8CA7RSqNAIm0v5xQEVFmJqEl0E////WP+kBVcBf7wCkT0VEeP/XgujPCBVfwEClf+OD8pLBTqrwkqTJsneoApf///h6P8d///rAv8E66f//4sCKxNpw/+i1wHWXwIxCyf/sTQKDOoh9G7EZC4NkhEsBY8dBX0AAAe/SURBVHic7ZpnWBNJGMd3E0IIoYQQktACoUZ6C6GDdFEBkd6kSrFixY7KoWfvXRTLnd07z16v9957P73e77z7drshOxOyk82mPPfcPY//j+/svr+Zd2benbIY/i8Iuwf5P0Pe/3Duw0v2REf/dqCh59z3tofcmRO9fkOVUCzhBwergoP5SoE0e2tvZ/Msm0Gubh4qkSo1fU3luQnOMrlc5pwQ4dJyuVslzFk67/bnNoDM6GznSbqaMsMwupzL+1WCkt7FbdZB7uzKF2r2R3ARhGHJXeL5VWt7LlgO2T1lIX8w0yhAp7BxGYKs45Mtg7RGZ0smJphCkOKOrZdmLbYA0jaQJelzZoPQyi9D2rvbXMjymdIyk4EaGTT+ogbzIE8USZqM9zZaCfWC81PNgJypLss1E0E2plG5dQdbyOR54j7UtDAtl9KSAXaQN28JG80NFSXnripUx9AgJx/it1iIICSP550xDZm8QOJiOYPomNXSR7aZgMyo4a+0hkFQJvLWMUO2bVJa1Q5S3D7ebSbI3l3KRmsZRL+czv6aAXKdZ/YURElWu2GjUciyutM2QBDK5F9ZZQTyd3sp+4zILD/pASOQKWKrOx1osHo3ErKjOt5mDCxCdWwVAtJaY7NgkfLjVSAgAzw/GzIwbkbRGhqkrSjDlgwiIyuv0yA94nLbQrjTi84aQCZnddtiGuorVzDfANLDG2tjBoZ1FelBrn37+NFH3/GujFQH2tkSMlYwF0I4Orn5pMbZEiIvvQIhP3OAxqAeTk8qyItxih0fF+kObHZs2jyubjsK4o16FpS6qYGtYJTC398zxV6ngNFarUgPCXcdo6YqkCDsBJAfIcQJBXEDxZHAZs9hkENiuncaSdK0A8gpWJyHgjiA4vuALYUJQspXUeCFXV54g4J8BotC2EI8TUEIudm/IlhMQT6G9nQUxAcB8WcB4XDeffVLCvI2tNqjIIWguBIBCXClFBOeHqBI9nXUxzz5sg5yFNoSUZAJoHg8sCmAzWCs2MUVJLrpUa79MAw5DE2pKIgHKIbTCELoo17kHaXXmj8PaSEfbAEWBxQkFOFwFKJ1ehi9cbHlOy3kxGvQFIh4BQ5XGBoIjkS8gYmSocv3tJBnnoIWVL3SQSmcRhCCqhaGOcGAPaCFdLwAIeG6h9xFXuq0yMpYp5jwEBgaOI0Sgc0dCVE7GEBmvwghCqe8kPQAT0ViVGqhr/4o0SqdDkH24gjIp1rIpLdg2xwdOQyC0wiMuEI0JBb6OTwMyfmGybOeFHRIMhoCh/ipEzrIGywhHnRIKJJRCSP90fBknFT9CWOQoFLBpyqKMiETUVoqeOWLQ8OQ2XUv+SB9Et3qE+ShsAfjtVBEg6DydhxMRM89rctdHdn76UnVN3lUQFJMbBrp1psy+nhRfsBko2cV9xBY5YPPF+sgN/L3jdGrfGpoSlJMZZoX/IoHgjK1IcTNYMLbqQs8YOw94vi/UOuuBfF2ED5BhBnKzldX5gg+KFRAYNsIicaH+x+E1XWzF8kEnRTkUhk3ALYEsSwCPeBtCHHwTElJ8STkrwiNCvLl6CGivN2xXOkcChKtkkXCGRpAh4AqFFCWVA6zHJPzyIiUVy+jIAPKCDuYjA7Sl1SutAqYgES5DodxX/5GCnJX6IfpdX0sDaKm4gCmXpBxgM+oJGo0cOuHwIL7Qkk/Zge/5AoaxJ2qeDIzxDHIPyRWDfOyLDgaruqHNBgWDkaeQxqNMpqqJWVI9FB4BqxIKggnFrDD8h4TpzZM+y5wSYTjZ8QyTAQrt4IGiaWqSrnxErFZDE+rngUhzTl+er3L8aVNFRGZ8ApDV+ShP1HGpFmvtwlqyxokAg+bEk57PNkjKTbQPAKGOQsO6O+05ksSiKaA/FzoZfi8Rbujpuzd+pCTvHFEU8BHwjHJEp+Gkms2XRyxZ1xfS+xL49yM94oFGrGdI3VcSp6rwIyPXN6bqe78r0ZC9i7oDiMGJuh7H/RyyhzlCg232HiFmDx7BMPYgz4hzVV8/lRDyJqtGeRpgXYh55CC3KCaJxflEtwQgjdIyeOCNCIV+o+3xXa+K7+VDmmrqSWPomI8K02+z0booyi8uWoixnKDblrOtTWtKAg+T2zWjQmj+nK240jI8rUa2x10zsfREGK9Omib86hc/jFjR7Y4vo5MYdZLXpo/8kpoBOTIFKUV1xqAMZ3xGB3fO2TdxYZW8bybOBMEX97Ot5ISNo23B2eG4B2/WknpFx540BQEv7qWb8W5qryfF23oEXVxNvWW5ZcosnredVo70FeAxcJ+y64AMzXZFXR/6MvM1meruiy4zOQ2SoqaUQwj17K/L5K0mNsY50Fp73KkN2MXzDtmCrsizGKMU5U8dj/amfH7+Iqlyn7W+ZK7soy36a4xVwyX/n/sWhg8UcaKMbZbnNXTatQT4+8LHb11ktW5phKz3K9MuKECMXDZQXB8WfFCZZcfQ3O4EdNqhUWbZzB6MflLyawl7VXisn2ZiO4JSyhfrRIuKj53xIQPFj/HvN68c0GOOLj+cotLglxXf1nuyv2rNXxhyaWGsyYdsP3NZ81fO2s21PEEAkmwSkX+5SOsKskq7txOu6+2BkJq1uyfbq6Lnjdz5vkpOzfPae64yPrN/9yvV/cgOP4PsP50Fs+e30kAAAAASUVORK5CYII=",$g=Math.min,Eo=Math.max,Md=Math.round,ru=Math.floor,js=t=>({x:t,y:t});function CB(t,e){return typeof t=="function"?t(e):t}function Uv(t){return t.split("-")[0]}function NR(t){return t.split("-")[1]}function kB(t){return t==="x"?"y":"x"}function PB(t){return t==="y"?"height":"width"}function Bv(t){return["top","bottom"].includes(Uv(t))?"y":"x"}function NB(t){return kB(Bv(t))}function jR(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function P_(t,e,n){let{reference:r,floating:s}=t;const i=Bv(e),o=NB(e),a=PB(o),l=Uv(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(NR(e)){case"start":m[o]-=p*(n&&c?-1:1);break;case"end":m[o]+=p*(n&&c?-1:1);break}return m}const jB=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=P_(c,r,l),p=r,m={},y=0;for(let v=0;v<a.length;v++){const{name:_,fn:x}=a[v],{x:g,y:w,data:E,reset:T}=await x({x:d,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});if(d=g??d,h=w??h,m={...m,[_]:{...m[_],...E}},T&&y<=50){y++,typeof T=="object"&&(T.placement&&(p=T.placement),T.rects&&(c=T.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):T.rects),{x:d,y:h}=P_(c,p,l)),v=-1;continue}}return{x:d,y:h,placement:p,strategy:s,middlewareData:m}};async function OB(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Uv(n),a=NR(n),l=Bv(n)==="y",c=["left","top"].includes(o)?-1:1,d=i&&l?-1:1,h=CB(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof y=="number"&&(m=a==="end"?y*-1:y),l?{x:m*d,y:p*c}:{x:p*c,y:m*d}}const OR=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,s=await OB(e,t);return{x:n+s.x,y:r+s.y,data:s}}}};function Os(t){return LR(t)?(t.nodeName||"").toLowerCase():"#document"}function mn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function qr(t){var e;return(e=(LR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function LR(t){return t instanceof Node||t instanceof mn(t).Node}function Ye(t){return t instanceof Element||t instanceof mn(t).Element}function Jt(t){return t instanceof HTMLElement||t instanceof mn(t).HTMLElement}function Vg(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof mn(t).ShadowRoot}function Ec(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=xn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function LB(t){return["table","td","th"].includes(Os(t))}function zv(t){const e=Wv(),n=xn(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function DB(t){let e=bi(t);for(;Jt(e)&&!Sc(e);){if(zv(e))return e;e=bi(e)}return null}function Wv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Sc(t){return["html","body","#document"].includes(Os(t))}function xn(t){return mn(t).getComputedStyle(t)}function Eh(t){return Ye(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function bi(t){if(Os(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Vg(t)&&t.host||qr(t);return Vg(e)?e.host:e}function DR(t){const e=bi(t);return Sc(e)?t.ownerDocument?t.ownerDocument.body:t.body:Jt(e)&&Ec(e)?e:DR(e)}function ci(t,e){var n;e===void 0&&(e=[]);const r=DR(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=mn(r);return s?e.concat(i,i.visualViewport||[],Ec(r)?r:[]):e.concat(r,ci(r))}function MR(t){const e=xn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Jt(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Md(n)!==i||Md(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Hv(t){return Ye(t)?t:t.contextElement}function So(t){const e=Hv(t);if(!Jt(e))return js(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=MR(e);let o=(i?Md(n.width):n.width)/r,a=(i?Md(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const MB=js(0);function $R(t){const e=mn(t);return!Wv()||!e.visualViewport?MB:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function $B(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==mn(t)?!1:e}function Ii(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Hv(t);let o=js(1);e&&(r?Ye(r)&&(o=So(r)):o=So(t));const a=$B(i,n,r)?$R(i):js(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const p=mn(i),m=r&&Ye(r)?mn(r):r;let y=p.frameElement;for(;y&&r&&m!==p;){const v=So(y),_=y.getBoundingClientRect(),x=xn(y),g=_.left+(y.clientLeft+parseFloat(x.paddingLeft))*v.x,w=_.top+(y.clientTop+parseFloat(x.paddingTop))*v.y;l*=v.x,c*=v.y,d*=v.x,h*=v.y,l+=g,c+=w,y=mn(y).frameElement}}return jR({width:d,height:h,x:l,y:c})}function VB(t){let{rect:e,offsetParent:n,strategy:r}=t;const s=Jt(n),i=qr(n);if(n===i)return e;let o={scrollLeft:0,scrollTop:0},a=js(1);const l=js(0);if((s||!s&&r!=="fixed")&&((Os(n)!=="body"||Ec(i))&&(o=Eh(n)),Jt(n))){const c=Ii(n);a=So(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function FB(t){return Array.from(t.getClientRects())}function VR(t){return Ii(qr(t)).left+Eh(t).scrollLeft}function UB(t){const e=qr(t),n=Eh(t),r=t.ownerDocument.body,s=Eo(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Eo(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+VR(t);const a=-n.scrollTop;return xn(r).direction==="rtl"&&(o+=Eo(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function BB(t,e){const n=mn(t),r=qr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Wv();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function zB(t,e){const n=Ii(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Jt(t)?So(t):js(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function N_(t,e,n){let r;if(e==="viewport")r=BB(t,n);else if(e==="document")r=UB(qr(t));else if(Ye(e))r=zB(e,n);else{const s=$R(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return jR(r)}function FR(t,e){const n=bi(t);return n===e||!Ye(n)||Sc(n)?!1:xn(n).position==="fixed"||FR(n,e)}function WB(t,e){const n=e.get(t);if(n)return n;let r=ci(t).filter(a=>Ye(a)&&Os(a)!=="body"),s=null;const i=xn(t).position==="fixed";let o=i?bi(t):t;for(;Ye(o)&&!Sc(o);){const a=xn(o),l=zv(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Ec(o)&&!l&&FR(t,o))?r=r.filter(d=>d!==o):s=a,o=bi(o)}return e.set(t,r),r}function HB(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?WB(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=N_(e,d,s);return c.top=Eo(h.top,c.top),c.right=$g(h.right,c.right),c.bottom=$g(h.bottom,c.bottom),c.left=Eo(h.left,c.left),c},N_(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function qB(t){return MR(t)}function KB(t,e,n){const r=Jt(e),s=qr(e),i=n==="fixed",o=Ii(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=js(0);if(r||!r&&!i)if((Os(e)!=="body"||Ec(s))&&(a=Eh(e)),r){const c=Ii(e,!0,i,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else s&&(l.x=VR(s));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function j_(t,e){return!Jt(t)||xn(t).position==="fixed"?null:e?e(t):t.offsetParent}function UR(t,e){const n=mn(t);if(!Jt(t))return n;let r=j_(t,e);for(;r&&LB(r)&&xn(r).position==="static";)r=j_(r,e);return r&&(Os(r)==="html"||Os(r)==="body"&&xn(r).position==="static"&&!zv(r))?n:r||DB(t)||n}const GB=async function(t){let{reference:e,floating:n,strategy:r}=t;const s=this.getOffsetParent||UR,i=this.getDimensions;return{reference:KB(e,await s(n),r),floating:{x:0,y:0,...await i(n)}}};function QB(t){return xn(t).direction==="rtl"}const JB={convertOffsetParentRelativeRectToViewportRelativeRect:VB,getDocumentElement:qr,getClippingRect:HB,getOffsetParent:UR,getElementRects:GB,getClientRects:FB,getDimensions:qB,getScale:So,isElement:Ye,isRTL:QB};function XB(t,e){let n=null,r;const s=qr(t);function i(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:d,width:h,height:p}=t.getBoundingClientRect();if(a||e(),!h||!p)return;const m=ru(d),y=ru(s.clientWidth-(c+h)),v=ru(s.clientHeight-(d+p)),_=ru(c),g={rootMargin:-m+"px "+-y+"px "+-v+"px "+-_+"px",threshold:Eo(0,$g(1,l))||1};let w=!0;function E(T){const S=T[0].intersectionRatio;if(S!==l){if(!w)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},100)}w=!1}try{n=new IntersectionObserver(E,{...g,root:s.ownerDocument})}catch{n=new IntersectionObserver(E,g)}n.observe(t)}return o(!0),i}function BR(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Hv(t),d=s||i?[...c?ci(c):[],...ci(e)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=c&&a?XB(c,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(x=>{let[g]=x;g&&g.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{m&&m.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let y,v=l?Ii(t):null;l&&_();function _(){const x=Ii(t);v&&(x.x!==v.x||x.y!==v.y||x.width!==v.width||x.height!==v.height)&&n(),v=x,y=requestAnimationFrame(_)}return n(),()=>{d.forEach(x=>{s&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),h&&h(),m&&m.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const YB=(t,e,n)=>{const r=new Map,s={platform:JB,...n},i={...s.platform,_c:r};return jB(t,e,{...s,platform:i})};var Pu=typeof document<"u"?f.useLayoutEffect:f.useEffect;function $d(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!$d(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!$d(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function zR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function O_(t,e){const n=zR(t);return Math.round(e*n)/n}function L_(t){const e=f.useRef(t);return Pu(()=>{e.current=t}),e}function ZB(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=f.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=f.useState(r);$d(p,r)||m(r);const[y,v]=f.useState(null),[_,x]=f.useState(null),g=f.useCallback(M=>{M!=S.current&&(S.current=M,v(M))},[v]),w=f.useCallback(M=>{M!==I.current&&(I.current=M,x(M))},[x]),E=i||y,T=o||_,S=f.useRef(null),I=f.useRef(null),b=f.useRef(d),A=L_(l),R=L_(s),k=f.useCallback(()=>{if(!S.current||!I.current)return;const M={placement:e,strategy:n,middleware:p};R.current&&(M.platform=R.current),YB(S.current,I.current,M).then(G=>{const C={...G,isPositioned:!0};V.current&&!$d(b.current,C)&&(b.current=C,Qo.flushSync(()=>{h(C)}))})},[p,e,n,R]);Pu(()=>{c===!1&&b.current.isPositioned&&(b.current.isPositioned=!1,h(M=>({...M,isPositioned:!1})))},[c]);const V=f.useRef(!1);Pu(()=>(V.current=!0,()=>{V.current=!1}),[]),Pu(()=>{if(E&&(S.current=E),T&&(I.current=T),E&&T){if(A.current)return A.current(E,T,k);k()}},[E,T,k,A]);const P=f.useMemo(()=>({reference:S,floating:I,setReference:g,setFloating:w}),[g,w]),D=f.useMemo(()=>({reference:E,floating:T}),[E,T]),z=f.useMemo(()=>{const M={position:n,left:0,top:0};if(!D.floating)return M;const G=O_(D.floating,d.x),C=O_(D.floating,d.y);return a?{...M,transform:"translate("+G+"px, "+C+"px)",...zR(D.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:G,top:C}},[n,a,D.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:k,refs:P,elements:D,floatingStyles:z}),[d,k,P,D,z])}function Ki(t){let e=t.activeElement;for(;((n=e)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;e=e.shadowRoot.activeElement}return e}function tn(t,e){if(!t||!e)return!1;const n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Vg(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function e7(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function t7(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function n7(t){if(t.mozInputSource===0&&t.isTrusted)return!0;const e=/Android/i;return(e.test(e7())||e.test(t7()))&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function r7(t){return t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType!=="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0}function s7(){return/apple/i.test(navigator.vendor)}function Vd(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function i7(t){return"nativeEvent"in t}function o7(t){return t.matches("html,body")}function rn(t){return(t==null?void 0:t.ownerDocument)||document}function Dp(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function WR(t){return"composedPath"in t?t.composedPath()[0]:t.target}const a7="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function HR(t){return Jt(t)&&t.matches(a7)}function Mp(t){t.preventDefault(),t.stopPropagation()}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var l7=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Fg=l7.join(","),qR=typeof Element>"u",Bl=qR?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Fd=!qR&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Ud=function t(e,n){var r;n===void 0&&(n=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=s===""||s==="true",o=i||n&&e&&t(e.parentNode);return o},c7=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},u7=function(e,n,r){if(Ud(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(Fg));return n&&Bl.call(e,Fg)&&s.unshift(e),s=s.filter(r),s},d7=function t(e,n,r){for(var s=[],i=Array.from(e);i.length;){var o=i.shift();if(!Ud(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?s.push.apply(s,c):s.push({scopeParent:o,candidates:c})}else{var d=Bl.call(o,Fg);d&&r.filter(o)&&(n||!e.includes(o))&&s.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),p=!Ud(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&p){var m=t(h===!0?o.children:h.children,!0,r);r.flatten?s.push.apply(s,m):s.push({scopeParent:o,candidates:m})}else i.unshift.apply(i,o.children)}}return s},KR=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},GR=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||c7(e))&&!KR(e)?0:e.tabIndex},f7=function(e,n){var r=GR(e);return r<0&&n&&!KR(e)?0:r},h7=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},QR=function(e){return e.tagName==="INPUT"},p7=function(e){return QR(e)&&e.type==="hidden"},m7=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},g7=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},y7=function(e){if(!e.name)return!0;var n=e.form||Fd(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var i=g7(s,e.form);return!i||i===e},v7=function(e){return QR(e)&&e.type==="radio"},x7=function(e){return v7(e)&&!y7(e)},w7=function(e){var n,r=e&&Fd(e),s=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==e){var o,a,l;for(i=!!((o=s)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(s)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!i&&s;){var c,d,h;r=Fd(s),s=(c=r)===null||c===void 0?void 0:c.host,i=!!((d=s)!==null&&d!==void 0&&(h=d.ownerDocument)!==null&&h!==void 0&&h.contains(s))}}return i},D_=function(e){var n=e.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},_7=function(e,n){var r=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=Bl.call(e,"details>summary:first-of-type"),o=i?e.parentElement:e;if(Bl.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var a=e;e;){var l=e.parentElement,c=Fd(e);if(l&&!l.shadowRoot&&s(l)===!0)return D_(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(w7(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return D_(e);return!1},E7=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return Bl.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},S7=function(e,n){return!(n.disabled||Ud(n)||p7(n)||_7(n,e)||m7(n)||E7(n))},M_=function(e,n){return!(x7(n)||GR(n)<0||!S7(e,n))},T7=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},b7=function t(e){var n=[],r=[];return e.forEach(function(s,i){var o=!!s.scopeParent,a=o?s.scopeParent:s,l=f7(a,o),c=o?t(s.candidates):a;l===0?o?n.push.apply(n,c):n.push(a):r.push({documentOrder:i,tabIndex:l,item:s,isScope:o,content:c})}),r.sort(h7).reduce(function(s,i){return i.isScope?s.push.apply(s,i.content):s.push(i.content),s},[]).concat(n)},JR=function(e,n){n=n||{};var r;return n.getShadowRoot?r=d7([e],n.includeContainer,{filter:M_.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:T7}):r=u7(e,n.includeContainer,M_.bind(null,n)),b7(r)};function Bd(){return Bd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bd.apply(this,arguments)}var ir=typeof document<"u"?f.useLayoutEffect:f.useEffect;let $p=!1,I7=0;const $_=()=>"floating-ui-"+I7++;function A7(){const[t,e]=f.useState(()=>$p?$_():void 0);return ir(()=>{t==null&&e($_())},[]),f.useEffect(()=>{$p||($p=!0)},[]),t}const R7=Qg["useId".toString()],XR=R7||A7;function C7(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(s=>s(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(s=>s!==n))||[])}}}const k7=f.createContext(null),P7=f.createContext(null),YR=()=>{var t;return((t=f.useContext(k7))==null?void 0:t.id)||null},Sh=()=>f.useContext(P7);function zl(t){return"data-floating-ui-"+t}function Ya(t){const e=f.useRef(t);return ir(()=>{e.current=t}),e}const V_=zl("safe-polygon");function Vp(t,e,n){return n&&!Vd(n)?0:typeof t=="number"?t:t==null?void 0:t[e]}function N7(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,events:i,elements:{domReference:o,floating:a},refs:l}=t,{enabled:c=!0,delay:d=0,handleClose:h=null,mouseOnly:p=!1,restMs:m=0,move:y=!0}=e,v=Sh(),_=YR(),x=Ya(h),g=Ya(d),w=f.useRef(),E=f.useRef(),T=f.useRef(),S=f.useRef(),I=f.useRef(!0),b=f.useRef(!1),A=f.useRef(()=>{}),R=f.useCallback(()=>{var D;const z=(D=s.current.openEvent)==null?void 0:D.type;return(z==null?void 0:z.includes("mouse"))&&z!=="mousedown"},[s]);f.useEffect(()=>{if(!c)return;function D(){clearTimeout(E.current),clearTimeout(S.current),I.current=!0}return i.on("dismiss",D),()=>{i.off("dismiss",D)}},[c,i]),f.useEffect(()=>{if(!c||!x.current||!n)return;function D(M){R()&&r(!1,M)}const z=rn(a).documentElement;return z.addEventListener("mouseleave",D),()=>{z.removeEventListener("mouseleave",D)}},[a,n,r,c,x,s,R]);const k=f.useCallback(function(D,z){z===void 0&&(z=!0);const M=Vp(g.current,"close",w.current);M&&!T.current?(clearTimeout(E.current),E.current=setTimeout(()=>r(!1,D),M)):z&&(clearTimeout(E.current),r(!1,D))},[g,r]),V=f.useCallback(()=>{A.current(),T.current=void 0},[]),P=f.useCallback(()=>{if(b.current){const D=rn(l.floating.current).body;D.style.pointerEvents="",D.removeAttribute(V_),b.current=!1}},[l]);return f.useEffect(()=>{if(!c)return;function D(){return s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1}function z(C){if(clearTimeout(E.current),I.current=!1,p&&!Vd(w.current)||m>0&&Vp(g.current,"open")===0)return;const W=Vp(g.current,"open",w.current);W?E.current=setTimeout(()=>{r(!0,C)},W):r(!0,C)}function M(C){if(D())return;A.current();const W=rn(a);if(clearTimeout(S.current),x.current){n||clearTimeout(E.current),T.current=x.current({...t,tree:v,x:C.clientX,y:C.clientY,onClose(){P(),V(),k(C)}});const $=T.current;W.addEventListener("mousemove",$),A.current=()=>{W.removeEventListener("mousemove",$)};return}(w.current==="touch"?!tn(a,C.relatedTarget):!0)&&k(C)}function G(C){D()||x.current==null||x.current({...t,tree:v,x:C.clientX,y:C.clientY,onClose(){P(),V(),k(C)}})(C)}if(Ye(o)){const C=o;return n&&C.addEventListener("mouseleave",G),a==null||a.addEventListener("mouseleave",G),y&&C.addEventListener("mousemove",z,{once:!0}),C.addEventListener("mouseenter",z),C.addEventListener("mouseleave",M),()=>{n&&C.removeEventListener("mouseleave",G),a==null||a.removeEventListener("mouseleave",G),y&&C.removeEventListener("mousemove",z),C.removeEventListener("mouseenter",z),C.removeEventListener("mouseleave",M)}}},[o,a,c,t,p,m,y,k,V,P,r,n,v,g,x,s]),ir(()=>{var D;if(c&&n&&(D=x.current)!=null&&D.__options.blockPointerEvents&&R()){const G=rn(a).body;if(G.setAttribute(V_,""),G.style.pointerEvents="none",b.current=!0,Ye(o)&&a){var z,M;const C=o,W=v==null||(z=v.nodesRef.current.find(F=>F.id===_))==null||(M=z.context)==null?void 0:M.elements.floating;return W&&(W.style.pointerEvents=""),C.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{C.style.pointerEvents="",a.style.pointerEvents=""}}}},[c,n,_,a,o,v,x,s,R]),ir(()=>{n||(w.current=void 0,V(),P())},[n,V,P]),f.useEffect(()=>()=>{V(),clearTimeout(E.current),clearTimeout(S.current),P()},[c,o,V,P]),f.useMemo(()=>{if(!c)return{};function D(z){w.current=z.pointerType}return{reference:{onPointerDown:D,onPointerEnter:D,onMouseMove(z){n||m===0||(clearTimeout(S.current),S.current=setTimeout(()=>{I.current||r(!0,z.nativeEvent)},m))}},floating:{onMouseEnter(){clearTimeout(E.current)},onMouseLeave(z){i.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),k(z.nativeEvent,!1)}}}},[i,c,m,n,r,k])}let F_=0;function Ws(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:s=!1}=e;r&&cancelAnimationFrame(F_);const i=()=>t==null?void 0:t.focus({preventScroll:n});s?i():F_=requestAnimationFrame(i)}function j7(t,e){var n;let r=[],s=(n=t.find(i=>i.id===e))==null?void 0:n.parentId;for(;s;){const i=t.find(o=>o.id===s);s=i==null?void 0:i.parentId,i&&(r=r.concat(i))}return r}function Za(t,e){let n=t.filter(s=>{var i;return s.parentId===e&&((i=s.context)==null?void 0:i.open)}),r=n;for(;r.length;)r=t.filter(s=>{var i;return(i=r)==null?void 0:i.some(o=>{var a;return s.parentId===o.id&&((a=s.context)==null?void 0:a.open)})}),n=n.concat(r);return n}let Wi=new WeakMap,su=new WeakSet,iu={},Fp=0;const O7=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,ZR=t=>t&&(t.host||ZR(t.parentNode)),L7=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=ZR(n);return t.contains(r)?r:null}).filter(n=>n!=null);function D7(t,e,n,r){const s="data-floating-ui-inert",i=r?"inert":n?"aria-hidden":null,o=L7(e,t),a=new Set,l=new Set(o),c=[];iu[s]||(iu[s]=new WeakMap);const d=iu[s];o.forEach(h),p(e),a.clear();function h(m){!m||a.has(m)||(a.add(m),m.parentNode&&h(m.parentNode))}function p(m){!m||l.has(m)||Array.prototype.forEach.call(m.children,y=>{if(a.has(y))p(y);else{const v=i?y.getAttribute(i):null,_=v!==null&&v!=="false",x=(Wi.get(y)||0)+1,g=(d.get(y)||0)+1;Wi.set(y,x),d.set(y,g),c.push(y),x===1&&_&&su.add(y),g===1&&y.setAttribute(s,""),!_&&i&&y.setAttribute(i,"true")}})}return Fp++,()=>{c.forEach(m=>{const y=(Wi.get(m)||0)-1,v=(d.get(m)||0)-1;Wi.set(m,y),d.set(m,v),y||(!su.has(m)&&i&&m.removeAttribute(i),su.delete(m)),v||m.removeAttribute(s)}),Fp--,Fp||(Wi=new WeakMap,Wi=new WeakMap,su=new WeakSet,iu={})}}function U_(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=rn(t[0]).body;return D7(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const eC=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function tC(t,e){const n=JR(t,eC());e==="prev"&&n.reverse();const r=n.indexOf(Ki(rn(t)));return n.slice(r+1)[0]}function M7(){return tC(document.body,"next")}function $7(){return tC(document.body,"prev")}function B_(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!tn(n,r)}const nC={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let V7;function z_(t){t.key==="Tab"&&(t.target,clearTimeout(V7))}const W_=f.forwardRef(function(e,n){const[r,s]=f.useState();ir(()=>(s7()&&s("button"),document.addEventListener("keydown",z_),()=>{document.removeEventListener("keydown",z_)}),[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[zl("focus-guard")]:"",style:nC};return f.createElement("span",Bd({},e,i))}),F7=f.createContext(null),U7=()=>f.useContext(F7),B7=f.forwardRef(function(e,n){return f.createElement("button",Bd({},e,{type:"button",ref:n,tabIndex:-1,style:nC}))});function rC(t){const{context:e,children:n,disabled:r=!1,order:s=["content"],guards:i=!0,initialFocus:o=0,returnFocus:a=!0,modal:l=!0,visuallyHiddenDismiss:c=!1,closeOnFocusOut:d=!0}=t,{open:h,refs:p,nodeId:m,onOpenChange:y,events:v,dataRef:_,elements:{domReference:x,floating:g}}=e,w=O7()?i:!0,E=Ya(s),T=Ya(o),S=Ya(a),I=Sh(),b=U7(),A=typeof o=="number"&&o<0,R=f.useRef(null),k=f.useRef(null),V=f.useRef(!1),P=f.useRef(null),D=f.useRef(!1),z=b!=null,M=x&&x.getAttribute("role")==="combobox"&&HR(x),G=f.useCallback(function($){return $===void 0&&($=g),$?JR($,eC()):[]},[g]),C=f.useCallback($=>{const H=G($);return E.current.map(j=>x&&j==="reference"?x:g&&j==="floating"?g:H).filter(Boolean).flat()},[x,g,E,G]);f.useEffect(()=>{if(r||!l)return;function $(j){if(j.key==="Tab"){tn(g,Ki(rn(g)))&&G().length===0&&!M&&Mp(j);const O=C(),Q=WR(j);E.current[0]==="reference"&&Q===x&&(Mp(j),j.shiftKey?Ws(O[O.length-1]):Ws(O[1])),E.current[1]==="floating"&&Q===g&&j.shiftKey&&(Mp(j),Ws(O[0]))}}const H=rn(g);return H.addEventListener("keydown",$),()=>{H.removeEventListener("keydown",$)}},[r,x,g,l,E,p,M,G,C]),f.useEffect(()=>{if(r||!d)return;function $(){D.current=!0,setTimeout(()=>{D.current=!1})}function H(j){const O=j.relatedTarget;queueMicrotask(()=>{const Q=!(tn(x,O)||tn(g,O)||tn(O,g)||tn(b==null?void 0:b.portalNode,O)||O!=null&&O.hasAttribute(zl("focus-guard"))||I&&(Za(I.nodesRef.current,m).find(Y=>{var ne,se;return tn((ne=Y.context)==null?void 0:ne.elements.floating,O)||tn((se=Y.context)==null?void 0:se.elements.domReference,O)})||j7(I.nodesRef.current,m).find(Y=>{var ne,se;return((ne=Y.context)==null?void 0:ne.elements.floating)===O||((se=Y.context)==null?void 0:se.elements.domReference)===O})));O&&Q&&!D.current&&O!==P.current&&(V.current=!0,y(!1,j))})}if(g&&Jt(x))return x.addEventListener("focusout",H),x.addEventListener("pointerdown",$),!l&&g.addEventListener("focusout",H),()=>{x.removeEventListener("focusout",H),x.removeEventListener("pointerdown",$),!l&&g.removeEventListener("focusout",H)}},[r,x,g,l,m,I,b,y,d]),f.useEffect(()=>{var $;if(r)return;const H=Array.from((b==null||($=b.portalNode)==null?void 0:$.querySelectorAll("["+zl("portal")+"]"))||[]);if(g){const j=[g,...H,R.current,k.current,E.current.includes("reference")||M?x:null].filter(Q=>Q!=null),O=l?U_(j,w,!w):U_(j);return()=>{O()}}},[r,x,g,l,E,b,M,w]),ir(()=>{if(r||!g)return;const $=rn(g),H=Ki($);queueMicrotask(()=>{const j=C(g),O=T.current,Q=(typeof O=="number"?j[O]:O.current)||g,Y=tn(g,H);!A&&!Y&&h&&Ws(Q,{preventScroll:Q===g})})},[r,h,g,A,C,T]),ir(()=>{if(r||!g)return;let $=!1;const H=rn(g),j=Ki(H),O=_.current;P.current=j;function Q(Y){if(Y.type==="escapeKey"&&p.domReference.current&&(P.current=p.domReference.current),["referencePress","escapeKey"].includes(Y.type))return;const ne=Y.data.returnFocus;typeof ne=="object"?(V.current=!1,$=ne.preventScroll):V.current=!ne}return v.on("dismiss",Q),()=>{v.off("dismiss",Q);const Y=Ki(H);(tn(g,Y)||I&&Za(I.nodesRef.current,m).some(se=>{var ae;return tn((ae=se.context)==null?void 0:ae.elements.floating,Y)})||O.openEvent&&["click","mousedown"].includes(O.openEvent.type))&&p.domReference.current&&(P.current=p.domReference.current),S.current&&Jt(P.current)&&!V.current&&Ws(P.current,{cancelPrevious:!1,preventScroll:$})}},[r,g,S,_,p,v,I,m]),ir(()=>{if(!(r||!b))return b.setFocusManagerState({modal:l,closeOnFocusOut:d,open:h,onOpenChange:y,refs:p}),()=>{b.setFocusManagerState(null)}},[r,b,l,h,y,p,d]),ir(()=>{if(!r&&g&&typeof MutationObserver=="function"){const $=()=>{const j=g.getAttribute("tabindex");E.current.includes("floating")||Ki(rn(g))!==p.domReference.current&&G().length===0?j!=="0"&&g.setAttribute("tabindex","0"):j!=="-1"&&g.setAttribute("tabindex","-1")};$();const H=new MutationObserver($);return H.observe(g,{childList:!0,subtree:!0,attributes:!0}),()=>{H.disconnect()}}},[r,g,p,E,G]);function W($){return r||!c||!l?null:f.createElement(B7,{ref:$==="start"?R:k,onClick:H=>y(!1,H.nativeEvent)},typeof c=="string"?c:"Dismiss")}const F=!r&&w&&!M&&(z||l);return f.createElement(f.Fragment,null,F&&f.createElement(W_,{"data-type":"inside",ref:b==null?void 0:b.beforeInsideRef,onFocus:$=>{if(l){const j=C();Ws(s[0]==="reference"?j[0]:j[j.length-1])}else if(b!=null&&b.preserveTabOrder&&b.portalNode)if(V.current=!1,B_($,b.portalNode)){const j=M7()||x;j==null||j.focus()}else{var H;(H=b.beforeOutsideRef.current)==null||H.focus()}}}),!M&&W("start"),n,W("end"),F&&f.createElement(W_,{"data-type":"inside",ref:b==null?void 0:b.afterInsideRef,onFocus:$=>{if(l)Ws(C()[0]);else if(b!=null&&b.preserveTabOrder&&b.portalNode)if(d&&(V.current=!0),B_($,b.portalNode)){const j=$7()||x;j==null||j.focus()}else{var H;(H=b.afterOutsideRef.current)==null||H.focus()}}}))}function H_(t){return Jt(t.target)&&t.target.tagName==="BUTTON"}function q_(t){return HR(t)}function z7(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,elements:{domReference:i}}=t,{enabled:o=!0,event:a="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:d=!0}=e,h=f.useRef(),p=f.useRef(!1);return f.useMemo(()=>o?{reference:{onPointerDown(m){h.current=m.pointerType},onMouseDown(m){m.button===0&&(Vd(h.current,!0)&&c||a!=="click"&&(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="mousedown")?r(!1,m.nativeEvent):(m.preventDefault(),r(!0,m.nativeEvent))))},onClick(m){if(a==="mousedown"&&h.current){h.current=void 0;return}Vd(h.current,!0)&&c||(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="click")?r(!1,m.nativeEvent):r(!0,m.nativeEvent))},onKeyDown(m){h.current=void 0,!(m.defaultPrevented||!d||H_(m))&&(m.key===" "&&!q_(i)&&(m.preventDefault(),p.current=!0),m.key==="Enter"&&r(!(n&&l),m.nativeEvent))},onKeyUp(m){m.defaultPrevented||!d||H_(m)||q_(i)||m.key===" "&&p.current&&(p.current=!1,r(!(n&&l),m.nativeEvent))}}}:{},[o,s,a,c,d,i,l,n,r])}const W7=Qg["useInsertionEffect".toString()],H7=W7||(t=>t());function Nu(t){const e=f.useRef(()=>{});return H7(()=>{e.current=t}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}const q7={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},K7={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},G7=t=>{var e,n;return{escapeKeyBubbles:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePressBubbles:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function sC(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:s,nodeId:i,elements:{reference:o,domReference:a,floating:l},dataRef:c}=t,{enabled:d=!0,escapeKey:h=!0,outsidePress:p=!0,outsidePressEvent:m="pointerdown",referencePress:y=!1,referencePressEvent:v="pointerdown",ancestorScroll:_=!1,bubbles:x}=e,g=Sh(),w=YR()!=null,E=Nu(typeof p=="function"?p:()=>!1),T=typeof p=="function"?E:p,S=f.useRef(!1),{escapeKeyBubbles:I,outsidePressBubbles:b}=G7(x),A=Nu(k=>{if(!n||!d||!h||k.key!=="Escape")return;const V=g?Za(g.nodesRef.current,i):[];if(!I&&(k.stopPropagation(),V.length>0)){let P=!0;if(V.forEach(D=>{var z;if((z=D.context)!=null&&z.open&&!D.context.dataRef.current.__escapeKeyBubbles){P=!1;return}}),!P)return}s.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1,i7(k)?k.nativeEvent:k)}),R=Nu(k=>{const V=S.current;if(S.current=!1,V||typeof T=="function"&&!T(k))return;const P=WR(k),D="["+zl("inert")+"]",z=rn(l).querySelectorAll(D);let M=Ye(P)?P:null;for(;M&&!Sc(M);){const W=bi(M);if(W===rn(l).body||!Ye(W))break;M=W}if(z.length&&Ye(P)&&!o7(P)&&!tn(P,l)&&Array.from(z).every(W=>!tn(M,W)))return;if(Jt(P)&&l){const W=P.clientWidth>0&&P.scrollWidth>P.clientWidth,F=P.clientHeight>0&&P.scrollHeight>P.clientHeight;let $=F&&k.offsetX>P.clientWidth;if(F&&xn(P).direction==="rtl"&&($=k.offsetX<=P.offsetWidth-P.clientWidth),$||W&&k.offsetY>P.clientHeight)return}const G=g&&Za(g.nodesRef.current,i).some(W=>{var F;return Dp(k,(F=W.context)==null?void 0:F.elements.floating)});if(Dp(k,l)||Dp(k,a)||G)return;const C=g?Za(g.nodesRef.current,i):[];if(C.length>0){let W=!0;if(C.forEach(F=>{var $;if(($=F.context)!=null&&$.open&&!F.context.dataRef.current.__outsidePressBubbles){W=!1;return}}),!W)return}s.emit("dismiss",{type:"outsidePress",data:{returnFocus:w?{preventScroll:!0}:n7(k)||r7(k)}}),r(!1,k)});return f.useEffect(()=>{if(!n||!d)return;c.current.__escapeKeyBubbles=I,c.current.__outsidePressBubbles=b;function k(D){r(!1,D)}const V=rn(l);h&&V.addEventListener("keydown",A),T&&V.addEventListener(m,R);let P=[];return _&&(Ye(a)&&(P=ci(a)),Ye(l)&&(P=P.concat(ci(l))),!Ye(o)&&o&&o.contextElement&&(P=P.concat(ci(o.contextElement)))),P=P.filter(D=>{var z;return D!==((z=V.defaultView)==null?void 0:z.visualViewport)}),P.forEach(D=>{D.addEventListener("scroll",k,{passive:!0})}),()=>{h&&V.removeEventListener("keydown",A),T&&V.removeEventListener(m,R),P.forEach(D=>{D.removeEventListener("scroll",k)})}},[c,l,a,o,h,T,m,n,r,_,d,I,b,A,R]),f.useEffect(()=>{S.current=!1},[T,m]),f.useMemo(()=>d?{reference:{onKeyDown:A,[q7[v]]:k=>{y&&(s.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1,k.nativeEvent))}},floating:{onKeyDown:A,[K7[m]]:()=>{S.current=!0}}}:{},[d,s,y,m,v,r,A])}function iC(t){var e;t===void 0&&(t={});const{open:n=!1,onOpenChange:r,nodeId:s}=t,[i,o]=f.useState(null),a=((e=t.elements)==null?void 0:e.reference)||i,l=ZB(t),c=Sh(),d=Nu((E,T)=>{E&&(p.current.openEvent=T),r==null||r(E,T)}),h=f.useRef(null),p=f.useRef({}),m=f.useState(()=>C7())[0],y=XR(),v=f.useCallback(E=>{const T=Ye(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;l.refs.setReference(T)},[l.refs]),_=f.useCallback(E=>{(Ye(E)||E===null)&&(h.current=E,o(E)),(Ye(l.refs.reference.current)||l.refs.reference.current===null||E!==null&&!Ye(E))&&l.refs.setReference(E)},[l.refs]),x=f.useMemo(()=>({...l.refs,setReference:_,setPositionReference:v,domReference:h}),[l.refs,_,v]),g=f.useMemo(()=>({...l.elements,domReference:a}),[l.elements,a]),w=f.useMemo(()=>({...l,refs:x,elements:g,dataRef:p,nodeId:s,floatingId:y,events:m,open:n,onOpenChange:d}),[l,s,y,m,n,d,x,g]);return ir(()=>{const E=c==null?void 0:c.nodesRef.current.find(T=>T.id===s);E&&(E.context=w)}),f.useMemo(()=>({...l,context:w,refs:x,elements:g}),[l,x,g,w])}function Up(t,e,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...t,...e.map(s=>s?s[n]:null).concat(t).reduce((s,i)=>(i&&Object.entries(i).forEach(o=>{let[a,l]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof l=="function"){var c;(c=r.get(a))==null||c.push(l),s[a]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(a))==null?void 0:d.map(y=>y(...p)).find(y=>y!==void 0)}}}else s[a]=l}),s),{})}}function oC(t){t===void 0&&(t=[]);const e=t,n=f.useCallback(i=>Up(i,t,"reference"),e),r=f.useCallback(i=>Up(i,t,"floating"),e),s=f.useCallback(i=>Up(i,t,"item"),t.map(i=>i==null?void 0:i.item));return f.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:s}),[n,r,s])}function aC(t,e){e===void 0&&(e={});const{open:n,floatingId:r}=t,{enabled:s=!0,role:i="dialog"}=e,o=XR();return f.useMemo(()=>{const a={id:r,role:i};return s?i==="tooltip"?{reference:{"aria-describedby":n?r:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?r:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:o}},floating:{...a,...i==="menu"&&{"aria-labelledby":o}}}:{}},[s,i,n,r,o])}function Q7({placement:t="bottom"}={}){const[e,n]=f.useState(!1),{context:r,floatingStyles:s,refs:i}=iC({placement:t,open:e,onOpenChange:n,whileElementsMounted:BR,middleware:[OR(10)]}),o=N7(r,{move:!1}),a=sC(r),l=aC(r,{role:"tooltip"}),{getFloatingProps:c,getReferenceProps:d}=oC([o,a,l]);return{isOpen:e,setIsOpen:n,getFloatingProps:c,getReferenceProps:d,floatingStyles:s,refs:i,context:r}}const lC=f.createContext(null),cC=()=>{const t=f.useContext(lC);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function Ug({children:t,...e}){const n=Q7({...e});return u.jsx(lC.Provider,{value:n,children:t})}function Bg({children:t,...e}){const{getReferenceProps:n,refs:r,isOpen:s}=cC();return u.jsx("button",{ref:r.setReference,"data-state":s?"open":"closed",...n(e),children:t})}function zg({children:t,className:e,...n}){const{theme:r}=ye(),{context:s,refs:i,getFloatingProps:o,floatingStyles:a,isOpen:l}=cC(),c={container:`${r.type==="dark"?"bg-[#fff] text-[#000]":"bg-[#333] text-white"}`};if(l)return u.jsx(rC,{context:s,modal:!1,children:u.jsx("div",{className:`${c.container} text-[13px] px-[12px] py-[3px] rounded-[4px]`,ref:i.setFloating,style:{...a},...o(n),children:t})})}function uC(t,e){f.useEffect(()=>{if(t)return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[...e])}function J7({idle:t,audioEle:e,admin:n,isOpenFullScreen:r,setIsOpenFullScreen:s,isOpenSongQueue:i,setIsOpenSongQueue:o}){const{theme:a}=ye(),{song:l}=fe(Re),{playStatus:{isPlaying:c,isWaiting:d}}=fe(Tn),h=f.useRef(),p=f.useRef(null),m=f.useRef(null),y=f.useRef(null),v=En(),{handleSetVolume:_,isMute:x,handleMute:g}=EB(h,m,e);uC(()=>{var I;h.current=(I=p.current)==null?void 0:I.offsetWidth},[]);const E=f.useMemo(()=>v.pathname.includes("edit"),[v]),T=()=>{i&&o(!1),s(!0)};f.useEffect(()=>{var I;h.current=(I=p.current)==null?void 0:I.offsetWidth},[r]),f.useEffect(()=>{const I=y.current;c?I.style.animationPlayState="running":I.style.animationPlayState="paused"},[c]);const S={before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]",wrapper:`border-${a.alpha} fixed bottom-0 w-full border-t transition-transform z-50 px-10 ${n?"h-[60px]":"h-[90px]"}`,container:"flex flex-row gap-[10px] h-full items-stretch",songInfoWrapper:`${n?"w-1/4":"w-1/4 "}`,songInfoChild:"flex flex-row items-center h-full origin-center",controlWrapper:"flex max-w-[450px] flex-grow",controlWrapperChild_1:`${r?"max-w-[600px] flex-col-reverse pb-[10px]":"flex-col justify-center"}`,controlWrapperChild_2:`${!l.song_url&&"pointer-events-none opacity-60"}`,volumeWrapper:`volume-control ${n?"w-1/4":"w-1/4 "} flex items-center justify-end gap-[8px]`,volumeLineBase:"ml-3 w-full relative h-[4px] cursor-pointer rounded-3xl bg-gray-200",volumeLineCurrent:"absolute left-0 top-0 h-full w-full rounded-l-full",blurBg:`bg-opacity-[0.8] backdrop-blur-[15px] z-[-1] absolute inset-0 ${a.bottom_player_bg}`};return u.jsxs("div",{className:`${S.wrapper} ${r&&"border-transparent"} ${E&&"translate-y-[100%] "} bg-transparent`,children:[u.jsx("div",{className:`${S.blurBg} ${r?"opacity-0 transition-opacity delay-[.2s]":""}`}),u.jsxs("div",{className:`${S.container} ${r?"justify-center text-white":"justify-between"} ${t&&"transition-opacity duration-[.3s] opacity-0"}`,children:[u.jsx("div",{className:`${S.songInfoWrapper}  ${r?"hidden":""}`,children:u.jsxs("div",{className:`${S.songInfoChild} ${r?"hidden":""}`,children:[u.jsx("div",{className:n?"w-[36px]":"w-[46px]",children:u.jsx("img",{ref:y,src:l.image_url||Fv,className:"rounded-full w-full animate-[spin_8s_linear_infinite]"})}),u.jsxs("div",{className:"ml-[10px] flex-grow",children:[u.jsx("div",{className:"h-[24px] w-full mask-image-horizontal",children:f.useMemo(()=>u.jsx(zd,{songInStore:l,autoScroll:!0,classNames:"text-[18px] font-[500]",label:(l==null?void 0:l.name)||"name"}),[l])}),u.jsx("div",{className:"h-[20px] w-full mask-image-horizontal",children:f.useMemo(()=>u.jsx(zd,{songInStore:l,autoScroll:!0,classNames:"text-[14px] opacity-60",label:(l==null?void 0:l.singer)||"singer"}),[l])})]})]})}),u.jsx("div",{className:` ${S.controlWrapper} ${n?"":S.controlWrapperChild_1}  ${S.controlWrapperChild_2}`,children:f.useMemo(()=>u.jsx(dC,{admin:n,audioEle:e,idle:!1,isOpenFullScreen:r}),[c,r,d])}),u.jsxs("div",{className:`${S.volumeWrapper}  ${r?"hidden":""}`,children:[u.jsxs("div",{className:"flex flex-grow items-center max-w-[150px]",children:[u.jsx("button",{onClick:()=>g(),children:x?u.jsx(e4,{className:"w-6 h-6"}):u.jsx(X5,{className:"w-6 h-6"})}),u.jsx("div",{onClick:I=>_(I),ref:p,className:`${S.volumeLineBase} ${S.before}`,children:u.jsx("div",{ref:m,className:`${S.volumeLineCurrent} ${a.content_bg}`})})]}),!n&&u.jsxs(u.Fragment,{children:[u.jsxs(Ug,{placement:"top",children:[u.jsx(Bg,{onClick:T,className:`h-[35px] w-[35px] rounded-[99px] ${a.side_bar_bg}  ${a.content_hover_bg} p-[8px] ${l.name?"":"opacity-20 pointer-events-none"}`,children:u.jsx(Qj,{})}),u.jsx(zg,{children:"Fullscreen mode"})]}),u.jsxs(Ug,{placement:"top",children:[u.jsx(Bg,{onClick:()=>o(!i),className:`${a.content_hover_bg} h-[35px] w-[35px] p-[8px] rounded-[4px] ${l.name?"":"opacity-20 pointer-events-none"} ${i?a.content_bg:a.side_bar_bg}`,children:u.jsx(uf,{})}),u.jsx(zg,{children:"Queue"})]})]})]})]})]})}function X7({audioEle:t,admin:e,isOpenFullScreen:n,durationLineRef:r,timeProcessLine:s,currentTimeRef:i,remainingTimeRef:o}){const a=et(),{userInfo:l}=Et(),{actuallySongs:c}=ht(),{playStatus:{isPlaying:d,isRepeat:h,isShuffle:p,isCrossFade:m}}=fe(Tn),{song:y,playlist:v}=fe(Re),[_,x]=f.useState(!1),[g,w]=f.useState(0),[E,T]=f.useState(0),[S,I]=f.useState(!0),b=f.useRef(0),A=f.useRef(0),R=f.useRef(),k=f.useRef(0),V=f.useRef(0),P=f.useRef(0),D=f.useRef(!1),z=f.useRef(!0),M=f.useRef(),G=En(),C=f.useMemo(()=>G.pathname.includes("edit"),[G]),[W,F]=wc("play_history",[]);uC(()=>{var ee;R.current=(ee=r.current)==null?void 0:ee.offsetWidth},[n]);const H=async()=>{if(e||!y.id)return;const ee=JSON.parse(localStorage.getItem("play_history")||"[]");let ue=[];ee.length&&(ue=[...ee],ue.find(Er=>Er===y.id))||(ue.push(y.id),ue.length>5&&(ue=ue.slice(1)),F(ue),await Ut({collection:"users",data:{play_history:ue},id:l.email,msg:">>> api: set play history"}))},j=()=>{try{if(t==null||t.play(),!l.email)return;z.current&&(m&&(t.volume=0),z.current=!1,T(Math.floor(Math.random()*10)))}catch{}},O=()=>{t==null||t.pause()},Q=ee=>c[ee],Y=()=>{a(gt({isPlaying:!1})),M.current&&clearInterval(M.current)},ne=()=>{I(!1),a(gt({isPlaying:!0,isWaiting:!1,isError:!1}))},se=()=>{a(gt({isWaiting:!0}))},ae=()=>{const ee=s.current;x(!1),ee&&i.current&&o.current&&(i.current.innerText="00:00",o.current.innerText="00:00",ee.style.width="0%")},Ae=f.useCallback(ee=>{const ue=ee.target;if(R.current&&A.current){const lt=ue.getBoundingClientRect(),Er=s.current,bc=(ee.clientX-lt.left)/R.current,ca=Math.ceil(bc*A.current);if(t&&Er){const Ic=t.currentTime;if(k.current&&Math.abs(Ic-k.current)<1&&Math.abs(ca-k.current)<1){console.log("no seek");return}t.currentTime=ca,k.current=ca,Er.style.width=(bc*100).toFixed(1)+"%",d?a(gt({isWaiting:!0})):j()}}},[n,y,d]),pt=f.useCallback(()=>{let ee=b.current+1,ue;ee<c.length?ue=c[ee]:(ee=0,ue=c[0]),a(He({...ue,currentIndex:ee,song_in:y.song_in}))},[y,c]),un=f.useCallback(()=>{let ee=b.current-1,ue;ee>=0?ue=c[ee]:(ue=c[c.length-1],ee=c.length-1),a(He({...ue,currentIndex:ee,song_in:y.song_in}))},[y,c]),en=ee=>{const ue=JSON.parse(localStorage.getItem("volume")||"1");if(ee<=2){const lt=ee/2*ue;t.volume=lt}else if(ee<V.current){t.volume!=ue&&(t.volume=ue);return}if(ee>=V.current){const lt=(A.current-ee)/2*ue;t.volume=lt}},pe=()=>{if(!t)return;const ee=t==null?void 0:t.currentTime,ue=s.current;if(A.current&&ee){const lt=ee/(A.current/100);ue.style.width=lt.toFixed(1)+"%"}i.current&&(i.current.innerText=gi(ee)||"00:00"),m&&en(ee)},Qe=()=>{const ee=JSON.parse(localStorage.getItem("volume")||"1");if(t.volume=ee,h==="one")return j();if(p){let ue=b.current;for(;ue===b.current;)ue=Math.floor(Math.random()*c.length);const lt=Q(ue);return a(He({...lt,currentIndex:ue,song_in:y.song_in}))}return b.current===c.length-1&&(h==="all"?D.current=!1:D.current=!0),pt()},at=()=>{var lt;if(!t)return;const ee=o.current,ue=t.duration;if(x(!0),A.current=ue,ee.innerText=gi(ue),R.current=(lt=r.current)==null?void 0:lt.offsetWidth,V.current=ue-3,D.current){D.current=!1,a(gt({isWaiting:!1,isPlaying:!1}));return}if(C||S){a(gt({isWaiting:!1,isPlaying:!1}));const Er=JSON.parse(localStorage.getItem("duration")||"0");S&&Er?(t.currentTime=Er,pe()):j(),I(!1);return}j()},Je=()=>{w(Math.random())};return f.useEffect(()=>{if(t)return t.addEventListener("error",Je),t.addEventListener("pause",Y),t.addEventListener("playing",ne),t.addEventListener("waiting",se),()=>{t.removeEventListener("error",Je),t.removeEventListener("pause",Y),t.removeEventListener("playing",ne),t.removeEventListener("waiting",se)}},[]),f.useEffect(()=>{g&&y.name&&a(gt({isWaiting:!1,isError:!0}))},[g]),f.useEffect(()=>{if(!t||!y.name){a(gt({isWaiting:!1,isPlaying:!1}));return}return O(),a(gt({isWaiting:!0,isError:!1,isPlaying:!1})),t.src=y.song_url,b.current=y.currentIndex,y.name&&(document.title=`${y.name} - ${y.singer}`),()=>{ae(),clearInterval(M.current),z.current=!0}},[y]),f.useEffect(()=>{if(!y.name)return;let ee=`${y.name} - ${y.singer}`;!d&&v.name&&y.song_in.includes(v.id)&&(ee=`${v.name}`),document.title=ee},[d]),f.useEffect(()=>{if(t)return t==null||t.addEventListener("ended",Qe),()=>t==null?void 0:t.removeEventListener("ended",Qe)},[h,p,y.song_in,c]),f.useEffect(()=>(t.addEventListener("timeupdate",pe),()=>t.removeEventListener("timeupdate",pe)),[m]),f.useEffect(()=>{if(t)return C&&d&&O(),t.addEventListener("loadedmetadata",at),()=>{t.removeEventListener("loadedmetadata",at)}},[C,y.id,l.like_song_ids,m]),f.useEffect(()=>{g&&H()},[E]),f.useEffect(()=>(P.current=t.volume,d&&(M.current=setInterval(()=>{localStorage.setItem("duration",JSON.stringify(t.currentTime))},3e3)),()=>clearInterval(M.current)),[d]),f.useEffect(()=>{if(S)return;const ee=ue=>{ue.preventDefault(),ue.returnValue=!0};return window.addEventListener("beforeunload",ee),()=>{window.removeEventListener("beforeunload",ee)}},[S]),{handleNext:pt,handlePrevious:un,handleSeek:Ae,play:j,pause:O,isLoaded:_}}function dC({audioEle:t,admin:e,isOpenFullScreen:n}){const r=et(),{theme:s}=ye(),{actuallySongs:i}=ht(),{playStatus:{isPlaying:o,isRepeat:a,isShuffle:l,isError:c}}=fe(Tn),{song:d}=fe(Re),h=f.useRef(null),p=f.useRef(null),m=f.useRef(null),y=f.useRef(null),{handleNext:v,handlePrevious:_,handleSeek:x,play:g,pause:w,isLoaded:E}=X7({audioEle:t,isOpenFullScreen:n,admin:e,durationLineRef:h,timeProcessLine:p,currentTimeRef:m,remainingTimeRef:y}),T=f.useCallback(()=>{o?w():g()},[o]),S=()=>{let A;switch(a){case"no":A="one";break;case"one":A="all";break;case"all":A="no";break;default:A="no"}localStorage.setItem("isRepeat",A),r(gt({isRepeat:A}))},I=()=>{const A=!l;r(gt({isShuffle:A})),localStorage.setItem("isShuffle",JSON.stringify(A))},b={button:`p-[5px] ${i.length<=1&&"opacity-20 pointer-events-none"}`,buttonsContainer:`w-full flex justify-center items-center gap-x-[20px] ${e?"":"h-[50px]"}`,processContainer:`flex w-full flex-row items-center h-[30px] ${e?"h-full":""}`,processLineBase:"h-[4px] flex-grow relative cursor-pointer rounded-[99px] bg-gray-200 ",processLineCurrent:`absolute left-0 rounded-l-[99px] top-0 h-full ${s.content_bg}`,currentTime:"opacity-60 text-[14px] font-semibold",duration:"text-[14px] font-semibold",icon:"w-[30px] max-[350px]:w-[25px]",before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]"};return u.jsxs("div",{className:"relative h-full w-full",children:[u.jsx("div",{className:`${b.buttonsContainer}`,children:!e&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{className:`relative ${b.button} ${a!=="no"&&s.content_text}`,onClick:S,children:[u.jsx(lj,{className:b.icon}),u.jsx("span",{className:"absolute font-bold text-[12px] top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ",children:d.name&&(a==="one"?"1":a==="all"?"--":"")})]}),u.jsx("button",{className:b.button,onClick:()=>_(),children:u.jsx(Aj,{className:b.icon})}),u.jsx(R_,{handlePlayPause:T}),u.jsx("button",{className:`${b.button}`,onClick:()=>v(),children:u.jsx(Bm,{className:b.icon})}),u.jsx("button",{className:`${b.button} ${l&&s.content_text}`,onClick:I,children:u.jsx(vj,{className:b.icon})})]})}),u.jsxs("div",{className:`${b.processContainer} ${c?"opacity-[.6] pointer-events-none":""}`,children:[u.jsx("div",{className:"w-[45px]",children:t&&u.jsx("span",{ref:m,className:`${b.currentTime}`,children:"00:00"})}),u.jsx("div",{ref:h,onClick:A=>x(A),className:`${b.processLineBase} ${!E&&"pointer-events-none"}  ${b.before}`,children:u.jsx("div",{ref:p,className:`${b.processLineCurrent}`})}),u.jsx("div",{className:"w-[55px] pl-[5px]",children:t&&u.jsx("span",{ref:y,className:b.duration,children:"00:00"})}),e&&u.jsxs("div",{className:"flex items-center",children:[u.jsx(R_,{handlePlayPause:T}),u.jsx("button",{className:`${b.button}`,onClick:()=>v(),children:u.jsx(Bm,{className:b.icon})})]})]}),!e&&u.jsx(bz,{isOpenFullScreen:n,cb:w,play:g,isPlaying:o})]})}function K_(t,e){const n=f.useRef(),[r,s]=f.useState(0),[i,o]=f.useState(0);return f.useEffect(()=>{r&&(n.current=setTimeout(()=>n.current=void 0,e))},[i,Zn]),f.useEffect(()=>{n.current||(t(),o(Math.random()*10))},[r]),()=>s(Math.random()*10)}function Y7({placement:t="bottom",isOpenFromParent:e,setIsOpenFromParent:n}={}){const[r,s]=f.useState(!1),{context:i,floatingStyles:o,refs:a}=iC({placement:t,open:e||r,onOpenChange:n||s,whileElementsMounted:BR,middleware:[OR(6)]}),l=z7(i),c=sC(i,{escapeKey:!1}),d=aC(i),{getFloatingProps:h,getReferenceProps:p}=oC([l,c,d]);return{isOpen:e||r,setIsOpen:n||s,getFloatingProps:h,getReferenceProps:p,floatingStyles:o,refs:a,context:i}}const fC=f.createContext(null),hC=()=>{const t=f.useContext(fC);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function Ai({children:t,...e}){const n=Y7({...e});return u.jsx(fC.Provider,{value:n,children:t})}function Ri({children:t,className:e,asChild:n=!1,...r}){const{getReferenceProps:s,refs:i,isOpen:o}=hC();return n&&f.isValidElement(t)?f.cloneElement(t,s({ref:i.setReference,...r,...t.props,"data-state":o?"open":"closed"})):u.jsx("button",{type:"button",ref:i.setReference,"data-state":o?"open":"closed",className:`${e??""}`,...s(r),children:t})}function Ci({children:t,className:e,...n}){const{context:r,refs:s,getFloatingProps:i,floatingStyles:o,isOpen:a}=hC();if(a)return u.jsx(rC,{context:r,modal:!1,children:u.jsx("div",{ref:s.setFloating,className:`z-[20] ${e}`,style:{...o},...i(n),children:t})})}function pC(){const{theme:t}=ye(),e=et(),{playStatus:{isTimer:n,lyricSize:r}}=fe(Tn),[s,i]=f.useState(!1),o=c=>{e(gt({lyricSize:c})),localStorage.setItem("lyricSize",c)},a=()=>{if(n)return e(gt({isTimer:0}));i(!0)},l={disableBtn:"bg-gray-500 bg-opacity-20",lyricSizeBtn:`group/text !hover:brightness-100 h-[26px] w-[26px] relative ${t.content_hover_bg}`,itemContainer:"flex justify-between items-center"};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-[220px]",children:u.jsxs(Ni,{variant:"default",className:"bg-[#292929]",theme:t,children:[u.jsxs("div",{className:l.itemContainer,children:[u.jsx("p",{className:"text-[14px] text-[#ccc]",children:"Lyric size"}),u.jsxs("div",{className:"flex gap-[12px]",children:[u.jsx(K,{onClick:()=>o("small"),variant:"circle",className:`${r==="small"?t.content_bg:l.disableBtn} ${l.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[12px]",children:"A"})}),u.jsx(K,{onClick:()=>o("medium"),variant:"circle",className:`${r==="medium"?t.content_bg:l.disableBtn} ${l.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[13px]",children:"A"})}),u.jsx(K,{onClick:()=>o("large"),variant:"circle",className:`${r==="large"?t.content_bg:l.disableBtn} ${l.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[14px]",children:"A"})})]})]}),u.jsxs("div",{className:`${l.itemContainer} mt-[10px]`,children:[u.jsx("p",{className:"text-[14px] text-[#ccc]",children:"Another option"}),u.jsx(Mg,{size:"thin",active:!1,cb:()=>{}})]}),u.jsxs("div",{className:`${l.itemContainer} mt-[10px]`,children:[u.jsx("p",{className:"text-[14px] text-[#ccc]",children:"Sleep timer"}),u.jsx(Mg,{size:"thin",active:!!n,cb:a})]})]})}),s&&u.jsx(bn,{classNames:"z-[999]",setOpenModal:i,theme:t,children:u.jsx(Yv,{setIsOpenModal:i,theme:t})})]})}function Z7({isOpenFullScreen:t,setIsOpenFullScreen:e,idle:n,audioEle:r}){const s=et(),{theme:i}=ye(),{song:o}=fe(Re),{actuallySongs:a}=ht(),[l,c]=f.useState("Lyric"),d=f.useRef(null),h=f.useRef(null),p=f.useRef(null),m=Zt();bR({bgRef:d,songInStore:o}),uB({containerRef:h,songItemRef:p,isOpenFullScreen:t,idle:n});const y=K_(()=>x("next"),200),v=K_(()=>x("previous"),200),_=(S,I)=>{o.id!==S.id&&s(He({...S,currentIndex:I,song_in:o.song_in}))},x=(S="next")=>{const I=h.current;I.style.scrollBehavior="smooth",S==="next"?I.scrollLeft+=500:S==="previous"&&(I.scrollLeft-=500)},g=()=>{e(!1),setTimeout(()=>{m(`/mysongs/edit/${o.id}`)},300)},w={button:`p-[8px] bg-gray-500 bg-opacity-20 text-xl ${i.content_hover_text}`,mainContainer:`fixed inset-0 z-50 overflow-hidden text-white bg-zinc-900
    } transition-[transform] duration-[.7s] linear delay-100`,bg:"-z-10 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background] duration-100",overplay:"bg-zinc-900 bg-opacity-60 bg-blend-multiply",absoluteFull:"absolute h-[100vh] w-[100vw] inset-0",headerWrapper:"py-[20px] px-[40px] w-full h-[75px]",header:"relative flex",headerCta:"absolute h-full flex items-center",contentContainer:"h-[calc(100%-100px)] song-thumbnail-container relative overflow-hidden",songsListTab:" relative h-full no-scrollbar flex items-center flex-row overflow-auto scroll-smooth px-[calc(50%-350px/2)]",absoluteButton:`absolute top-[50%] -translate-y-[50%] p-[8px] bg-[#fff] bg-opacity-[.2] hover:opacity-100 rounded-full ${i.content_hover_text}`,songNameSinger:"relative text-center text-white text-[14px] opacity-80",lyricTabContainer:"px-[40px] min-[1536px]:container min-[1536px]:mx-auto min-[1536px]:px-[200px] h-full flex items-center justify-center flex-row",fadeTransition:"opacity-0 transition-opacity duration-[.3s]",before:"before:content-[''] before:w-[50px] before:h-[10px] before:absolute before:bottom-[-7px] ",logo:"animate-[spin_8s_linear_infinite] w-[46px] mr-[10px]"},E=f.useMemo(()=>{if(o.id&&a.length)return a.map((S,I)=>{const b=I===o.currentIndex;return b?u.jsx(zp,{theme:i,ref:p,classNames:"active",hasTitle:!0,onClick:()=>_(S,I),active:b,data:S},I):u.jsx(zp,{theme:i,idleClass:`${!b&&n?w.fadeTransition:""}`,hasTitle:!0,active:b,data:S,onClick:()=>_(S,I)},I)})},[o,a,n]),T=u.jsxs("div",{className:w.lyricTabContainer,children:[u.jsx(zp,{theme:i,active:!0,data:o}),u.jsx(gC,{className:"w-full ml-[40px] h-full",audioEle:r,isOpenFullScreen:t&&l==="Lyric",active:l==="Lyric"})]});return u.jsxs("div",{className:`${w.mainContainer}  ${t?"translate-y-0":"translate-y-full"}`,children:[u.jsx("div",{ref:d,className:`${w.absoluteFull} ${w.bg}`}),u.jsx("div",{className:`${w.absoluteFull} ${w.overplay}`}),u.jsxs("div",{className:"h-[calc(100vh-90px)]",children:[u.jsx("div",{className:w.headerWrapper,children:u.jsxs("div",{className:w.header,children:[n&&u.jsxs("div",{className:`${w.headerCta} left-0`,children:[u.jsx("img",{className:`${w.logo}`,src:Fv,alt:""}),l==="Lyric"&&u.jsxs("p",{className:`${w.songNameSinger}`,children:[o.name," - ",u.jsx("span",{className:"opacity-30",children:o.singer})]})]}),u.jsx(Gv,{inFullScreen:!0,activeTab:l,setActiveTab:c,className:`${n&&w.fadeTransition}`,tabs:["Songs","Karaoke","Lyric"],render:S=>S}),u.jsxs("div",{className:`${w.headerCta} right-0 gap-[10px] ${n&&w.fadeTransition}`,children:[o.by!="admin"&&l==="Lyric"&&u.jsx(K,{onClick:()=>g(),variant:"circle",className:`p-[4px] ${w.button}`,children:u.jsx(l5,{className:"w-[20px]"})}),u.jsxs(Ai,{placement:"bottom-end",children:[u.jsx(Ri,{className:`h-[36px] rounded-full w-[36px] ${w.button}`,children:u.jsx(cf,{className:"w-[20px]"})}),u.jsx(Ci,{className:"z-[99]",children:u.jsx(pC,{})})]}),u.jsx(K,{onClick:()=>e(!1),variant:"circle",className:`p-[4px] ${w.button}`,children:u.jsx(_T,{className:"w-[20px]"})})]})]})}),u.jsxs("div",{className:w.contentContainer,children:[u.jsx("div",{ref:h,className:`song-list-container ${w.songsListTab} ${l!=="Songs"?"opacity-0":"opacity-100"}`,children:E}),l==="Songs"&&!n&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>v(),className:`${w.absoluteButton} left-[20px]`,children:u.jsx(Hy,{className:"w-[25px]"})}),u.jsx("button",{onClick:()=>y(),className:`${w.absoluteButton} right-[20px]`,children:u.jsx(vu,{className:"w-[25px]"})})]}),u.jsx("div",{className:`absolute inset-0 z-20 ${l==="Lyric"?"":"hidden"}`,children:T}),u.jsx("div",{className:`absolute inset-0 z-20 ${l==="Karaoke"?"":"hidden"}`,children:u.jsx("h1",{className:"text-center font-semibold opacity-60 relative top-[50%]",children:"Coming soon..."})})]}),t&&l==="Lyric"&&!n&&u.jsxs("p",{className:`${w.songNameSinger} ${n&&w.fadeTransition}`,children:[o.name," - ",u.jsx("span",{className:"opacity-30",children:o.singer})]})]})]})}const ez="/HD-MP3/assets/tutorial1-1bb11af6.png",tz="/HD-MP3/assets/tutorial2-2363d450.png";function mC({audioRef:t,theme:e,song:n,admin:r,lyric:s}){const i=et(),{userSongs:o,setUserSongs:a,adminSongs:l,setAdminSongs:c}=ft(),{setSuccessToast:d,setErrorToast:h}=Ht(),{actuallySongs:p,setActuallySongs:m}=ht(),[y,v]=f.useState(!1),[_,x]=f.useState(!1),[g,w]=f.useState(s?s.base:""),[E,T]=f.useState([]),[S,I]=f.useState(s?s.real_time:[]),[b,A]=f.useState(!1),[R,k]=f.useState(1),[V,P]=f.useState(!1),[D,z]=f.useState(!1),[M,G]=f.useState(S?S.length:0),[C,W]=f.useState(g||""),[F,$]=f.useState(!1),H=f.useRef(!0),j=f.useRef(null),O=f.useRef(0),Q=f.useRef(0),Y=f.useRef("smooth"),ne=f.useRef("add_base_lyric"),se=Zt(),ae=f.useMemo(()=>S.length>=E.length,[E,S,_]),Ae=f.useMemo(()=>S.length===E.length-1,[E,S,_]),pt=f.useMemo(()=>_&&!!E.length&&!ae,[ae,E,_]),un=f.useMemo(()=>r?l:o,[l,o]),en=f.useMemo(()=>!!E.length,[E]),pe=()=>{se(r?"/dashboard":"/")},Qe=()=>{const re=t.current;re&&(re.play(),v(!0),x(!0))},at=()=>{const re=t.current;re&&(re.pause(),v(!1))},Je=re=>{const he=t.current;he&&(he.playbackRate=re,k(re)),A(!1)},ee=()=>{w(C),z(!1)},ue=re=>{const he=t.current;he&&(he.currentTime=re)},lt=f.useCallback(()=>{if(!E.length)return;const re=t.current;if(!re||ae||Q.current==+re.currentTime.toFixed(1))return;Ae?O.current=+re.duration.toFixed(1):O.current=+re.currentTime.toFixed(1);const he=E[M],Rc={start:Q.current,text:he,end:O.current};Q.current=O.current,I([...S,Rc]),G(M+1)},[E,M]),Er=()=>{if(M<=0)return;if(t.current){Q.current=S[M-1].start,O.current=0;const he=S.slice(0,M-1);I(he),G(M-1)}},Th=re=>{const he=[...un],Rc=za(re,he);if(Rc==null){h({message:"No song found"}),P(!1);return}r?c(he):a(he);const ex=[...p];return za(re,ex),m(ex),console.log("setActuallySongs"),Rc},bc=async()=>{try{P(!0),at(),await Ut({collection:"lyrics",data:{real_time:S,base:g},id:n.id});const re={...n,lyric_id:n.id},he=Th(re);if(!he)return;await Ut({collection:"songs",data:{lyric_id:n.id},id:n.id}),i(He({...re,currentIndex:he,song_in:"user"})),d({message:"Add lyric successful"}),$(!1)}catch(re){console.log({message:re})}finally{P(!1)}},ca=async()=>{try{P(!0),await Ut({collection:"songs",data:{lyric_id:""},id:n.id}),await Dd({collection:"lyrics",id:n.lyric_id}),d({message:"Delete lyric successful"});const re={...n,lyric_id:""},he=Th(re);if(!he)return;i(He({...re,currentIndex:he,song_in:"user"})),bh()}catch(re){console.log(re)}finally{P(!1)}},Ic=()=>{at(),lt()},Ac=re=>{z(!0),ne.current=re},Zv=re=>{const he=t.current;re==="next"?he.currentTime+=2:he.currentTime-=2},SC=()=>{F?Ac("confirm_navigate_back"):bh()},bh=()=>se(r?"/dashboard":"/mysongs");f.useEffect(()=>{if(g){const re=g.split(/\r?\n/).filter(he=>he);T(re)}E.length&&H.current&&(H.current=!1),console.log("check firstTimeRender",H.current)},[g]),f.useEffect(()=>{const re=t.current;if(re){if(S.length){const he=S[S.length-1].end;re&&(re.currentTime=he,Q.current=he)}if(!un.length||!un.find(he=>he.id===n.id)){pe();return}return re.addEventListener("ended",Ic),()=>{re.removeEventListener("ended",Ic)}}},[]),f.useEffect(()=>{if(!F){if(!s){$(!0);return}(s.real_time!==S||s.base!=g)&&$(!0)}},[g,S]),f.useEffect(()=>{if(!F)return;const re=he=>{he.preventDefault()};return window.addEventListener("beforeunload",re),()=>{window.removeEventListener("beforeunload",re)}},[F]);const TC=`${e.type==="light"?"text-[#333]":"text-white"}`,ke={section:`bg-${e.alpha} py-[10px] px-[20px] rounded-[12px] w-full`,row:"flex no-scrollbar justify-between -mx-[10px]",col:"flex-grow flex flex-col gap-[10px]",formGroup:"flex flex-col gap-[5px] flex-grow",label:"text-md font-[500]",button:`${e.content_bg} rounded-full text-white text-[14px] px-[10px]`,disable:" opacity-60 pointer-events-none ",icon:"h-[20px] w-[20px]",lyricBox:"list-none h-full px-[10px] max-[549px]:w-[100%] pb-[20%] ",listItem:"h-[34px] w-[34px] text-[14px]",changeSpeedBtn:"inline-flex items-center hover:brightness-90 px-[20px] py-[5px] rounded-full text-white text-[14px]",ctaContainer:"flex justify-between gap-[10px] mb-[20px]",getActiveClass:re=>re?e.content_bg:`bg-${e.alpha}`},bC=u.jsxs("div",{className:`${ke.ctaContainer} ${TC}`,children:[u.jsxs("div",{className:"left flex flex-wrap gap-[10px]",children:[u.jsx("button",{onClick:()=>Ac("add_base_lyric"),className:ke.button,children:g?"Change lyric":"Add lyric"}),u.jsxs(Ai,{isOpenFromParent:b,setIsOpenFromParent:A,children:[u.jsxs(Ri,{className:`${ke.button} ${ke.changeSpeedBtn}`,children:[R,"x"]}),u.jsx(Ci,{children:u.jsx(Ni,{theme:e,children:u.jsxs("div",{className:"flex justify-center gap-[8px]",children:[u.jsx(K,{variant:"circle",onClick:()=>Je(1),className:`${ke.getActiveClass(R===1)} ${ke.listItem}`,children:"1x"}),u.jsx(K,{variant:"circle",onClick:()=>Je(1.2),className:`${ke.getActiveClass(R===1.2)} ${ke.listItem}`,children:"1.2x"}),u.jsx(K,{variant:"circle",onClick:()=>Je(1.5),className:`${ke.getActiveClass(R===1.5)} ${ke.listItem}`,children:"1.5x"})]})})})]}),y?u.jsx(K,{variant:"primary",onClick:at,className:ke.button+(_?"":ke.disable),children:"Pause"}):u.jsx(K,{variant:"primary",onClick:Qe,className:ke.button+(y||!en?ke.disable:""),children:"Play"}),u.jsx(K,{variant:"primary",onClick:lt,className:ke.button+(!pt&&ke.disable),children:u.jsx(z5,{className:"w-[16px]"})}),u.jsx(K,{variant:"primary",onClick:Er,className:ke.button+(!S.length||!E.length?ke.disable:""),children:u.jsx(b5,{className:"w-[16px]"})}),u.jsxs(K,{variant:"primary",onClick:()=>Zv("prev"),className:ke.button+(!_||!E.length?ke.disable:""),children:[u.jsx(Mj,{className:"w-[16px] mr-[5px]"}),"2s"]}),u.jsxs(K,{variant:"primary",onClick:()=>Zv("next"),className:ke.button+(!_||!E.length?ke.disable:""),children:["2s",u.jsx(Fj,{className:"w-[16px] ml-[5px]"})]})]}),u.jsx("button",{onClick:()=>Ac("turtorial"),children:u.jsx(q5,{className:"w-[20px]"})})]});return u.jsxs("div",{className:`${V?"opacity-[0.6] pointer-events-none":""}`,children:[u.jsxs("button",{onClick:SC,className:`inline-flex text-[20px] font-bold mb-[14px] ${e.content_hover_text}`,children:[u.jsx(Hy,{className:"w-[25px]"}),u.jsx("span",{className:"ml-[12px]",children:n.name})]}),bC,u.jsxs("div",{className:`${ke.row} ${ke.section} mb-[0] h-[55vh] pb min-h-[200px] overflow-auto`,children:[u.jsx("div",{className:ke.lyricBox+"min-w-[50%] max-w-[50%]",children:E.length?u.jsx(u.Fragment,{children:E.map((re,he)=>u.jsx(SR,{inUpload:!0,scrollBehavior:Y,className:"pb-[30px] leading-[1.2] mr-[24px]",active:he===M,done:he!=M,children:re},he))}):u.jsx("h1",{children:"Base lyric..."})}),u.jsx("div",{className:ke.lyricBox+" border-none w-[50%]",children:!!(S!=null&&S.length)&&S.map((re,he)=>u.jsx(AB,{handleSetTime:ue,lyric:re,theme:e,index:he,realTimeLyrics:S,setRealTimeLyrics:I},he))})]}),u.jsx(K,{className:`${e.content_bg} ${F?"":"opacity-[.6] pointer-events-none"} text-[14px] rounded-full mt-[20px]`,variant:"primary",onClick:bc,children:"Save"}),u.jsx(K,{className:"bg-red-500 text-[#fff] text-[14px] ml-[12px] rounded-full mt-[20px]",variant:"primary",onClick:()=>Ac("delete_lyric"),children:"Delete"}),D&&u.jsxs(bn,{classNames:"w-[700px] max-w-[calc(90vw-40px)]",theme:e,setOpenModal:z,children:[ne.current=="add_base_lyric"&&u.jsxs(u.Fragment,{children:[u.jsx("textarea",{ref:j,value:C,onChange:re=>W(re.target.value),className:"w-full rounded-[4px] mb-[10px] min-h-[50vh] bg-transparent border p-[10px]"}),u.jsx(K,{variant:"primary",onClick:ee,className:ke.button,children:"Ok"})]}),ne.current==="delete_lyric"&&u.jsx(yr,{loading:V,label:"Delete playlist ?",theme:e,callback:ca,setOpenModal:z}),ne.current==="confirm_navigate_back"&&u.jsx(yr,{loading:V,label:"Your change not save",theme:e,buttonLabel:"Close and don't save",callback:bh,setOpenModal:z}),ne.current==="turtorial"&&u.jsxs(u.Fragment,{children:[u.jsx(zs,{title:"Tutorial",setIsOpenModal:z}),u.jsxs("div",{className:"h-[500px] max-h-[75vh] overflow-y-auto no-scrollbar",children:[u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Phím chắc năng:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:tz,alt:""}),u.jsx("br",{}),u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Cách thêm lời bài hát:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:ez,alt:""})]})]})]})]})}const gC=({audioEle:t,className:e,isOpenFullScreen:n,active:r})=>{const{playStatus:{lyricSize:s}}=fe(Tn),[i,o]=f.useState(0),a=f.useRef("instant"),l=f.useRef(null),{song:c}=fe(Re),d=f.useRef(0),{loading:h,songLyric:p}=cB({audioEle:t,isOpenFullScreen:n}),m=f.useCallback(()=>{const x=t.currentTime;if(o(x),Math.abs(x-d.current)>5){a.current="instant",d.current=x;return}d.current=x},[]),y={small:"text-[30px]",medium:"text-[35px]",large:"text-[40px]"},v=()=>p.real_time.map((x,g)=>{const E=i>=x.start-.3&&i<x.end-.3;return u.jsx(SR,{done:!E&&i>x.end-.3,active:E,scrollBehavior:a,className:`${y[s||"medium"]} ${E?"active":""} mb-[30px]`,children:x.text},g)});f.useEffect(()=>{if(t)return t.addEventListener("timeupdate",m),()=>{t&&t.removeEventListener("timeupdate",m)}},[]),f.useEffect(()=>{const x=document.querySelector(".active.lyric");x&&x.scrollIntoView({behavior:"instant",block:"center"})},[r]),f.useEffect(()=>{a.current!=="instant"&&(a.current="instant")},[c]);const _={container:"overflow-y-auto overflow-x-hidden no-scrollbar pt-[30px] mask-image",loadingContainer:"flex justify-center items-center h-full w-full",loadingIcon:"opacity-[.6] animate-spin w-[35px] duration-[2s]"};return u.jsxs("div",{ref:l,className:`${e&&e} ${_.container}`,children:[h&&u.jsx("div",{className:_.loadingContainer,children:u.jsx("span",{children:u.jsx(Ln,{className:_.loadingIcon})})}),!h&&u.jsx(u.Fragment,{children:p.real_time.length?v():u.jsx("div",{className:_.loadingContainer,children:u.jsx("h1",{className:"text-[30px] opacity-60",children:"..."})})})]})},nz=({audioEle:t,setIsOpenFullScreen:e,isOpenFullScreen:n})=>{const r=et(),s=fe(Re),{playStatus:{isPlaying:i,isError:o,isWaiting:a}}=fe(Tn),{userSongs:l}=ft(),{theme:c}=ye(),{song:d}=s,h=En(),p=f.useMemo(()=>h.pathname.includes("edit"),[h]),m=()=>{t==null||t.play()},y=()=>{t==null||t.pause()},v=()=>{i?y():m()},_=()=>{let w=d.currentIndex+1,E;w<l.length?E=l[w]:(E=l[0],w=0),r(He({...E,currentIndex:w,song_in:d.song_in}))},x=f.useMemo(()=>a?u.jsx(Ln,{className:"w-[36px] animate-spin"}):o&&d.name?u.jsx(qy,{className:"w-[36px] "}):i?u.jsx(Ql,{className:"w-[36px] "}):u.jsx(Ky,{className:"w-[36px]"}),[a,o,i]),g={wrapper:`fixed bottom-0 transition-transform w-full h-[70px] border-t border-${c.alpha} z-40  px-[20px]`,container:`absolute inset-0 ${c.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1]`,songImageWrapper:"flex flex-row items-center flex-grow h-full",image:"w-[40px] h-[40px] flex-shrink-0",cta:"mobile-bottom-player flex items-center h-full pl-[15px] gap-[10px]"};return u.jsxs("div",{className:`${g.wrapper} ${p?"translate-y-full":""}`,children:[u.jsx("div",{className:`${g.container} ${n?"opacity-0 transition-opacity delay-[.3s]":""}`}),u.jsxs("div",{className:"flex flex-row  h-full",children:[u.jsx("div",{onClick:()=>e(!0),className:"mobile-current-song flex-grow",children:u.jsxs("div",{className:g.songImageWrapper,children:[u.jsx("div",{className:g.image,children:u.jsx(Hr,{src:d.image_url||Fv,classNames:"rounded-full"})}),u.jsx("div",{className:"flex-grow  ml-[10px]",children:d.song_url&&u.jsxs(u.Fragment,{children:[u.jsx("h5",{className:"text-[18px] font-[500] line-clamp-1",children:(d==null?void 0:d.name)||"name"}),u.jsx("p",{className:"text-[14px] font-[400] opacity-60 line-clamp-1",children:(d==null?void 0:d.singer)||"singer"})]})})]})}),u.jsxs("div",{className:`${g.cta} ${!d.name&&"opacity-60 pointer-events-none"}`,children:[u.jsx("button",{className:" p-[4px]",onClick:()=>v(),children:x}),u.jsx("button",{onClick:_,className:" p-[4px]",children:u.jsx(Bm,{className:"w-[35px]"})})]})]})]})};function rz({audioEle:t,isOpenFullScreen:e,setIsOpenFullScreen:n}){const r=et(),{theme:s}=ye(),{song:i}=fe(Re),{playStatus:{isPlaying:o}}=fe(Tn),{actuallySongs:a}=ht(),[l,c]=f.useState("Playing"),[d,h]=f.useState(!1),[p,m]=f.useState(!1),[y,v]=f.useState(!1),_=f.useRef(null),x=f.useRef(null),g=f.useRef(null);bR({bgRef:_,songInStore:i});const w=A=>{let R=0,k=A.parentElement;for(;!k.classList.contains("item-container")&&R<5;)k=k.parentElement,R++;return k},E={opacity:"0"},T=A=>{let R=0,k=A.previousElementSibling;for(;k&&R<100;)Object.assign(k.style,E),R++,k=k.previousElementSibling},S=(A,R,k)=>{const V=A.target,P=w(V);T(P),Object.assign(P.style,E),setTimeout(()=>{r(He({...R,currentIndex:k,song_in:i.song_in}))},250)},I=f.useMemo(()=>u.jsx(u.Fragment,{children:i&&u.jsx(u.Fragment,{children:i.currentIndex===a.length-1?u.jsx("p",{children:"..."}):u.jsx(u.Fragment,{children:a.map((A,R)=>{if(R>i.currentIndex)return u.jsx(lb,{theme:s,data:A,onClick:k=>S(k,A,R),active:!1},R)})})})}),[i,a]);f.useEffect(()=>{const A=()=>{window.innerWidth>549&&window.innerWidth<800?v(!0):v(!1)};return A(),window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[]);const b={headerWrapper:"h-[65px] p-[15px]",header:"relative w-full",main:"h-[calc(100%-65px)] relative px-[15px] overflow-hidden",songImage:"flex-shrink-0 transition-[height, width] origin-top-left",nameAndSinger:"flex flex-grow justify-between items-center",scrollText:"h-[30px] mask-image-horizontal",control:"absolute bottom-0 left-[15px] right-[15px]",lyricContainer:"absolute top-[65px] bottom-[100px] left-[15px] right-[15px]",bgImage:"absolute inset-0 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background-image] duration-[.3s ]",overlay:"absolute inset-0 bg-zinc-900 bg-opacity-60 bg-blend-multiply overflow-hidden",button:"inline-flex justify-center items-center rounded-full absolute top-0 h-full w-[35px]"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`fixed inset-0 z-50 bg-zinc-900 text-white overflow-hidden  ${e?"translate-y-0":"translate-y-full"} transition-[transform] duration-[.5s] ease-in-out delay-150  `,children:[u.jsx("div",{ref:_,className:b.bgImage}),u.jsx("div",{className:b.overlay}),u.jsxs("div",{className:"absolute inset-0 z-10",children:[u.jsx("div",{className:b.headerWrapper,children:u.jsxs("div",{className:b.header,children:[u.jsxs(Ai,{placement:"bottom-start",children:[u.jsx(Ri,{className:`${b.button} p-[6px] left-0 bg-gray-500 bg-opacity-20`,children:u.jsx(cf,{className:"w-[20px]"})}),u.jsx(Ci,{children:u.jsx(pC,{})})]}),u.jsx(Gv,{inFullScreen:!0,className:"w-fit",setActiveTab:c,activeTab:l,render:A=>A,tabs:["Songs","Playing","Lyric"]}),u.jsx("button",{className:`${b.button} p-[6px] right-0 bg-gray-500 bg-opacity-20`,onClick:()=>n(!1),children:u.jsx(_T,{className:"w-[20px]"})})]})}),u.jsxs("div",{ref:x,className:b.main,children:[u.jsxs("div",{className:`${l!="Playing"&&!d||y?"flex":""}`,children:[f.useMemo(()=>u.jsx(vz,{active:l==="Playing"&&!y,data:i}),[i,o,l,y]),u.jsx("div",{className:`${b.nameAndSinger} ${l!="Playing"||y?"ml-[10px]":"mt-[15px] min-[549px]:mt-0"}`,children:u.jsxs("div",{className:"group flex-grow overflow-hidden",children:[u.jsx("div",{className:b.scrollText,children:f.useMemo(()=>u.jsx(zd,{songInStore:i,autoScroll:!0,classNames:`${l==="Playing"||y?"text-[24px] leading-[30px]":"text-[20px]"} font-[500]`,label:i.name||"..."}),[i,l])}),u.jsx("div",{className:b.scrollText,children:f.useMemo(()=>u.jsx(zd,{songInStore:i,autoScroll:!0,classNames:`${l==="Playing"||y?"text-[22px]":"text-[16px] opacity-60"} font-[400]`,label:i.singer||"..."}),[i,l])})]})})]}),u.jsx("div",{ref:g,className:`${b.lyricContainer} ${l==="Lyric"?"block":"hidden"}`,children:f.useMemo(()=>u.jsx(gC,{active:l==="Lyric",className:"h-full",audioEle:t,isOpenFullScreen:e&&l==="Lyric"}),[e,l,y])}),u.jsx("div",{className:`absolute left-[15px] right-[15px] ${l==="Songs"?"block":"hidden"}`,children:u.jsxs("div",{className:"relative",children:[u.jsx("h3",{className:"text-white text-[16px] my-[10px]",children:"Playing next"}),u.jsx("div",{className:"h-[calc(100vh-170px)] pb-[30px] no-scrollbar overflow-auto",children:I})]})}),u.jsx("div",{className:`${b.control} ${l==="Songs"&&"opacity-0 pointer-events-none h-[0px] mb-[0px]"}`,children:u.jsx("div",{className:"flex flex-col-reverse justify-between h-[100px]",children:f.useMemo(()=>u.jsx(dC,{audioEle:t,isOpenFullScreen:!0,idle:!1}),[e])})})]})]})]}),p&&u.jsx(bn,{setOpenModal:m,theme:s,children:u.jsx(Yv,{setIsOpenModal:m,theme:s})})]})}const bn=({children:t,setOpenModal:e,theme:n,classNames:r})=>u.jsx(u.Fragment,{children:Qo.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[99]",children:[u.jsx("div",{onClick:s=>{s.preventDefault(),s.stopPropagation(),e(!1)},className:"absolute bg-black opacity-60 inset-0 z-[90]"}),u.jsx("div",{className:"absolute z-[99] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:u.jsx(Ni,{className:r||"",theme:n,children:t})})]}),document.getElementById("portals"))});function sz({isOpenSongQueue:t,setIsOpenSongQueue:e}){const n=et(),{theme:r}=ye(),{userInfo:s}=Et(),{actuallySongs:i,setActuallySongs:o}=ht(),{playStatus:{isTimer:a}}=fe(Tn),{song:l}=fe(Re),[c,d]=f.useState(!1),[h,p]=f.useState("Queue"),[m,y]=f.useState([]),[v,_]=f.useState(!1),[x,g]=wc("play_history",[]),[w,E]=f.useState(!1),T=(P,D)=>{D!==l.currentIndex&&n(He({...P,currentIndex:D}))},S=(P,D)=>{if(D!==l.currentIndex){const z=[...i];z.push(P),o(z),console.log("setActuallySongs"),n(He({...P,currentIndex:z.length-1})),p("Queue")}},I=()=>{if(a)return n(gt({isTimer:0}));d(!0)},b=()=>{e(!1),o([]),console.log("setActuallySongs"),n(He({...ji({}),currentIndex:0,song_in:""})),localStorage.setItem("duration",JSON.stringify(0))},A=async()=>{try{E(!0),await Ut({collection:"users",data:{play_history:[]},id:s.email}),y([]),g([])}catch(P){console.log(P)}finally{E(!1),p("Queue")}},R=async()=>{try{const P=JSON.parse(localStorage.getItem("play_history")||"[]");if(await _l(500),!P.length){_(!1);return}const D=Fs($i(_r,"songs"),Us("id","in",P)),M=(await Bs(D)).docs.map(G=>{const C=G.data();return{...C,song_in:C.by==="admin"?"admin":"user"}});y(M)}catch(P){console.log(P)}finally{_(!1)}};f.useEffect(()=>{if(s.email)return h==="Recent"&&R(),()=>{_(!0)}},[h]),f.useEffect(()=>{s.email||(e(!1),p("Queue"))},[s]),f.useEffect(()=>{setTimeout(()=>{t||p("Queue")},1e3)},[t]);const k=[...Array(4).keys()].map(P=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Se,{className:"h-[40px] w-[40px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Se,{className:"h-[20px] mb-[5px] w-[120px]"}),u.jsx(Se,{className:"h-[12px] mt-[5px] w-[60px]"})]})]},P)),V={textColor:`${r.type==="dark"?"text-white":"text-[#333]"} `,mainContainer:`fixed w-[260px] bottom-[0] right-[0] top-[0] z-20 px-[15px] ${r.container} border-l-[1px] border-${r.alpha} transition-[transform] duration-[.5s] linear delay-100`};return u.jsxs("div",{className:`${V.textColor} ${V.mainContainer} ${t?"translate-x-0---":"translate-x-full"}     `,children:[u.jsxs("div",{className:"flex items-center my-[10px] gap-[8px]",children:[u.jsx(Gv,{className:`text-[13px] ${s.email?"":"opacity-[.6] pointer-events-none"}`,activeTab:h,setActiveTab:s.email?p:()=>{},tabs:["Queue","Recent"],render:P=>P}),u.jsxs(Ug,{placement:"bottom",children:[u.jsx(Bg,{onClick:I,className:`p-[8px] rounded-[50%] ${r.content_hover_bg} ${a?r.content_bg:r.side_bar_bg}`,children:u.jsx(ET,{className:"w-[20px]"})}),u.jsx(zg,{children:"Add timer"})]})]}),u.jsxs("div",{className:"h-[calc(100vh-146px)] pb-[30px] overflow-y-auto overflow-x-hidden no-scrollbar",children:[h==="Queue"&&u.jsxs(u.Fragment,{children:[u.jsx(zr,{inQueue:!0,songs:i,handleSetSong:T,activeExtend:!0}),u.jsx("div",{className:"text-center",children:!!i.length&&u.jsx(K,{onClick:b,size:"small",className:`${r.content_bg} rounded-full mt-[24px]`,children:"Clear"})})]}),h==="Recent"&&u.jsx(u.Fragment,{children:v?k:u.jsxs(u.Fragment,{children:[u.jsx(zr,{inQueue:!0,inHistory:!0,songs:m,handleSetSong:S,activeExtend:!0}),!!m.length&&u.jsx("p",{className:"text-center",children:u.jsx(K,{onClick:A,size:"small",className:`${r.content_bg} rounded-full mt-[24px]`,children:w?u.jsx(Ln,{className:"w-[20px] animate-spin"}):"Clear"})})]})})]}),c&&u.jsx(bn,{setOpenModal:d,theme:r,children:u.jsx(Yv,{setIsOpenModal:d,theme:r})})]})}function iz(t,e,n){const{song:r}=fe(Re),[s,i]=f.useState(!1),[o,a]=f.useState(0),l=f.useRef(),c=f.useRef(),d=()=>{i(!1),a(Math.random())},h=()=>{clearTimeout(c.current),clearTimeout(l.current)},p=async()=>{if(!n)return;const m=document.querySelector(".song-thumb.active"),y=document.querySelector(".song-list-container");if(m&&y){const v=RR(m,y,!0);console.log("check isScroll",v);let _=Zn.focusDelay;v||(_=0),l.current=setTimeout(()=>{i(!0)},_)}};return f.useEffect(()=>{if(n&&!(e||!r.id))return setTimeout(()=>{window.addEventListener("mousemove",d),window.dispatchEvent(new Event("mousemove"))},1e3),()=>{window.removeEventListener("mousemove",d),h()}},[n]),f.useEffect(()=>(c.current=setTimeout(()=>{p()},t),()=>{h()}),[o]),n?s:!1}const yC=({admin:t})=>{const e=fe(Re),{song:n}=e,[r,s]=f.useState(!1),[i,o]=f.useState(!1),[a,l]=f.useState(!1),c=f.useRef(null),d=f.useMemo(()=>window.innerWidth<800,[]),h=iz(Zn.scrollSongDelay,d,r),p=u.jsxs(u.Fragment,{children:[!t&&u.jsx(Z7,{audioEle:c.current,idle:h,isOpenFullScreen:r,setIsOpenFullScreen:s}),u.jsx(sz,{isOpenSongQueue:i,setIsOpenSongQueue:o}),u.jsx(J7,{admin:t,audioEle:c.current,idle:h&&r,isOpenFullScreen:r,isOpenSongQueue:i,setIsOpenSongQueue:o,setIsOpenFullScreen:s})]}),m=u.jsxs(u.Fragment,{children:[u.jsx(rz,{audioEle:c.current,isOpenFullScreen:r,setIsOpenFullScreen:s}),u.jsx(nz,{audioEle:c.current,idle:h&&r,isOpenFullScreen:r,setIsOpenFullScreen:s})]});return f.useEffect(()=>{a||c.current&&l(!0)},[]),u.jsxs("div",{className:"absolute",children:[u.jsx("audio",{ref:c,src:n.song_url,className:"hd-mp3 hidden"}),a?d?m:p:""]})},qv="data:image/gif;base64,R0lGODlhJAAkAIABAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NmRjOGMyNC03YmYxLTQxZTMtYjQ2Zi1mY2ZhMDk4MDE1YWYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTBDRTc0QzlGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTBDRTc0QzhGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YzBhNGU4OWYtNjc4Yy00NmMyLTg4NmUtYzIxNGE0NTIwZDRjIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODRlMDBjYmEtZjhlNy03YzQ4LWE4MTgtNDc3NTI3MGQ1ZTAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQgAAQAsAAAAACQAJAAAAnKMj5nArQ9jc7HWyax+GOx/dCAojltpWmgqYazqvu0kz1StrHgYp6tO6gWAn59wZKSxkjcTM7MUEk/SY1BpmGqeHhs0W8Vywk3tkPw9iztcBLfNW7Pl9PLcXk/f8Xz9vguWB6h254Y2+Id4aLjH2Kc4UQAAIfkECQgAAQAsAAAAACQAJAAAAnSMj6nL7Q+jnAzYS+XFGW7beV/4fADpmGijrkvrJnA2z1Q9hvhG7lznA+lyBpuMGAieDiYlQulkIpvTKk9KFRatv2RW671uxeHskwv+ptHLsRnbhbLPZHW7vK6r6XF21J33Bngnp2fY98UXuNikSOg3B8dYAAAh+QQJCAABACwAAAAAJAAkAAACfIyPqcvtD6OctNqLKdg8N955C7iJI4mQAKam6NUeMTMHda3cr4EnOugCfnY2Yi8Y4hmXKqHSWYQ2mclodSqllmTY7fOqbSK9VnLXHB6Ludk2Vg1nv+Vo9zT+rc/zK3qf/wNmt8aHV0Z4aHj2l+inFqgXiQjJuKgYRnkJUgAAIfkECQgAAQAsAAAAACQAJAAAAnuMj6nL7Q+jnLTaC7K+T2/eeBkYiiQjAlyKsJh5uJYc0BRtTzgMpbsn8fFqQ4cQGCuWjqok0vA7toZR4fRJxDJHzg+Uur16s+Nt86sFM8VcdDncbZPlZvZ5fq/H82rp3m5XxZe29mfoZnWIF9hH1+gDqKiHOPhWSBlJWQAAIfkECQgAAQAsAAAAACQAJAAAAn6Mj6nL7Q8RmDTaQ+u1eW7efVg4ZqLRARIppqsZpW6pQTIbzPZd57jD6+keQQ/NuAu+esDiEkl0HlUxKerXKFKvsCTvuY0qp2Dw8IzTlslTdNf3VrO5Qiu8Hre78d/5HSpHB5imR5g3Jhi2d7OWaGbIN4j4pwjJ6Lco00gJVgAAIfkECQgAAQAsAAAAACQAJAAAAn2EH6nL7XnQmxRGULO7WHsbfRPHiQ95mRsqqQvbBqUGG29K13eYw3tMqXVAwJFOMcsIf7YeizmsLJE45ZHYtPqoPO2TWzxdZVXpOGneYqPBc7mtJnflsekaCkXry3Z61h/VtzcnyGcYN1jnRnj4dQf2V8g46QiIB0ly+bhWAAAh+QQJCAABACwAAAAAJAAkAAACfYyPqcvtD+MDtMobqt6Y7Q90C8iJCamZJ0qpCNu6Bhwen0S/JZTb+wTTpSK92c9RzBwbyRsx6BvyoEYpkCW0RLVVVDbWBSuxW7EzDPrW0OrzmPs2U+Nrevvnzs/11ib+T8ZWVufXB+g1qHZnyAhX6HhIopg4yAfZKEkpiFYAACH5BAkIAAEALAAAAAAkACQAAAJ7jI+py+0Po5y02ouB3tht3jGfFopjuYwqgK5npCLuJ8XHDEK2gZP3ywMGeqwfzZgb9mTCnRLHPAalz1k06SRefVPsEsmthrXgYnf8PZvFa7J6206z4fBs8w4t08t2at+qF6j2h+YnRxiX9ybIhrg3iOdlqDjH6Fa5qFYAACH5BAkIAAEALAAAAAAkACQAAAJ1jI+py+0Po5y02otzArxr1nmfEnIjWZ5bqh4l0Lqs8WK1HNpzcFs9/9o5fkFhg1gUQZBJWISZlECL0l3ThFMCc1lq10mzXhFT8Db6JYubam7Yffa+teVymz5O6+fyuLm+hgd39ReIxRd0d+inmLjH+GX3+FIAACH5BAUIAAEALAAAAAAkACQAAAJwjI+py+0Po5y0PoCzhVlv12EfGI5NCJgMqi5sm7zwIc9BPeOw3vKqb6oBLyUaqshB3o4diZDpSTaN0FTkWUVgo8sslbtlapXh43hqKJfP4Ko1TY574ehue24XffV0KJuf9xa4tifoZih351f4h9hRAAA7",Tc=({data:t,inDetail:e,theme:n,active:r,admin:s})=>{const i={button:`rounded-full text-[#fff] p-[4px] hover:bg-${n==null?void 0:n.alpha}`,imageContainer:"absolute inset-0 overflow-hidden rounded-[6px]",absoluteContainer:"absolute inset-0 group-hover:block",overlay:"absolute inset-0 bg-[#000] opacity-[.5]",buttonContainer:"justify-center items-center h-full relative z-10 relative",buttonWrapper:"flex items-center justify-center z-10 h-full w-full relative"},o=u.jsxs("div",{className:i.imageContainer,children:[u.jsx(Hr,{classNames:"group-hover:scale-[1.1] transition duration-[.3s]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsxs("div",{className:`${i.absoluteContainer} ${r?"block":"hidden"}`,children:[u.jsx("div",{className:i.overlay}),r&&u.jsx("div",{className:i.buttonWrapper,children:u.jsx("img",{src:qv,alt:"",className:"w-[30px]"})})]})]});return e?u.jsx("div",{className:"group relative pt-[100%] w-full block",children:o}):u.jsxs(u.Fragment,{children:[u.jsx(vs,{to:s?`/dashboard/playlist/${t.id}`:`/playlist/${t.id}`,className:"group relative pt-[100%] w-full block",children:o}),u.jsx("h5",{className:"text-[18px] line-clamp-1 leading-[22px] font-[500] mt-[6px]",children:t.name})]})};function zd({label:t,classNames:e,autoScroll:n}){const r=f.useRef(null),s=f.useRef(null);return dB({textRef:s,textWrapperRef:r,autoScroll:n}),u.jsx("div",{ref:r,className:"overflow-hidden scroll-smooth relative h-full",children:u.jsx("div",{ref:s,className:`${e} absolute left-0 whitespace-nowrap line-clamp-1`,children:t||"..."})})}function vC({modalName:t,setIsOpenModal:e}){const{theme:n}=ye(),r=et(),s=c=>{t.current=c,e(!0)},[i,o]=wc("isCrossFade",!1),a=()=>{o(!i),r(gt({isCrossFade:!i}))},l={menuItem:`${n.content_hover_text} hover:bg-${n.alpha} rounded-[4px] w-full px-[10px] text-[14px] h-[40px] inline-flex items-center cursor-pointer`,icon:"w-[25px] mr-[8px]",divide:`h-[1px]  w-[calc(100%-20px)] my-[4px] mx-auto bg-${n.alpha}`,disable:"opacity-[.6] pointer-events-none"};return u.jsx(u.Fragment,{children:u.jsx(Ni,{variant:"thin",color:"sidebar",theme:n,children:u.jsxs("ul",{className:"flex flex-col w-[200px]",children:[u.jsxs("li",{className:`${l.menuItem} justify-between hover:bg-[unset]`,children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(Ky,{className:l.icon}),"Cross fade"]}),u.jsx(Mg,{active:i,cb:a})]}),u.jsxs("li",{className:`${l.menuItem}`,onClick:()=>s("theme"),children:[u.jsx(bT,{className:l.icon}),"Themes"]}),u.jsx("div",{className:l.divide}),u.jsxs("li",{className:`${l.menuItem}`,onClick:()=>s("info"),children:[u.jsx(TT,{className:l.icon}),"Info"]})]})})})}function oz({className:t}){const[e,n]=f.useState(!1),{theme:r}=ye(),s=()=>{const o=document.querySelector(".main-container");if(!o)return;const a=o.scrollTop||0;n(a>100)},i=()=>{const o=document.querySelector(".main-container");o==null||o.scroll({behavior:"smooth",top:0})};return f.useEffect(()=>{const o=document.querySelector(".main-container");if(o)return o.addEventListener("scroll",s),()=>{o.removeEventListener("scroll",s)}},[]),u.jsx(K,{onClick:i,variant:"circle",className:`absolute transition-[opacity,transform] ${t||""} w-[30px] ${r.content_hover_bg} h-[30px] bg-${r.alpha} 
      ${e?"opacity-[1]":"opacity-0 translate-y-[20px]"}`,children:u.jsx(mj,{className:"w-[20px]"})})}function az(){const t=et(),{theme:e}=ye(),{userInfo:n}=Et(),[r]=Vi(gr),s=En(),i=Zt(),o=()=>{document.querySelector(".hd-mp3").pause(),t(He({...ji({}),song_in:"",currentIndex:0}))},a=()=>{i("/dashboard"),o()},l=[...Array(2).keys()].map(d=>u.jsxs("div",{className:"pl-[14px] h-[44px] flex items-center",children:[u.jsx(Se,{className:"w-[25px] h-[25px] flex-shrink-0"}),u.jsx(Se,{className:"w-[80px] h-[19px] ml-[5px]"})]},d)),c={container:`w-[180px] relative h-full flex-shrink-0 border-r-[1px] h-screen ${e.side_bar_bg} border-${e.alpha}`,button:`w-full text-[14px] font-[500] ${e.content_hover_text}`,text:e.type==="light"?"text-[#333]":"text-white",icon:"w-[25px] mr-[5px]",menuItem:"w-full border-l-[4px] pl-[10px] h-[44px] inline-flex items-center",activeMenu:`${e.content_text} ${e.container} ${e.content_border}`};return u.jsxs("div",{className:`${c.container} ${c.text}`,children:[u.jsx("div",{className:"px-[10px] h-[60px] flex items-center",children:u.jsxs(vs,{to:"/",className:"text-[24px] font-semibold",children:["HD",u.jsx("span",{className:`${e.content_text} ml-[4px]`,children:"MP3"})]})}),u.jsxs("div",{className:"flex flex-col items-start",children:[n.status==="loading"&&l,n.status!=="loading"&&u.jsxs(u.Fragment,{children:[u.jsx(vs,{className:`${c.menuItem} ${s.pathname==="/"?c.activeMenu:"border-transparent"}`,to:It.Home,children:u.jsxs(K,{className:c.button,children:[u.jsx(y5,{className:c.icon}),"Discover"]})}),(r==null?void 0:r.email)&&u.jsx(vs,{className:`${c.menuItem}  ${s.pathname.includes("mysongs")?c.activeMenu:"border-transparent"}`,to:It.MySongs,children:u.jsxs(K,{className:c.button,children:[u.jsx(Po,{className:c.icon}),"My Song"]})}),n.role==="admin"&&u.jsxs(K,{onClick:a,className:`${c.menuItem} ${c.button} border-transparent`,children:[u.jsx(n5,{className:c.icon}),"Dashboard"]})]})]}),u.jsx(oz,{className:"left-[50%] translate-x-[-50%] bottom-[80px] md:bottom-[100px]"})]})}function lz({contentRef:t}){const{theme:e}=ye(),[n,r]=Vi(gr),[s,i]=f.useState(0),[o,a]=f.useState(!1),l=f.useRef("theme"),{logOut:c,logIn:d}=_h(),h=x=>{a(!0),l.current=x},p=async()=>{try{await c()}catch(x){console.log("signOut error",{messsage:x})}finally{a(!1)}},m=async()=>{try{const x=document.querySelector(".login-trigger");await d(),x&&x.click()}catch(x){console.log(x)}},y=()=>{var g;const x=((g=t.current)==null?void 0:g.scrollTop)||0;i(x)};f.useEffect(()=>{var x;return(x=t.current)==null||x.addEventListener("scroll",y),()=>{document.removeEventListener("scroll",y)}},[]);const v=u.jsx(Se,{className:"w-[35px] h-[35px] rounded-full"}),_={userName:"text-[16px] font-[500] ml-[8px] line-clamp-1",button:`h-[35px] w-[35px] inline-flex items-center justify-center rounded-full bg-${e.alpha} ${e.content_hover_text}`,menuItem:`hover:bg-${e.alpha} ${e.content_hover_text} rounded-[4px] w-full px-[10px] h-[44px] inline-flex items-center`,icon:"w-[25px] mr-[5px]",divide:`h-[1px]  w-[calc(100%-20px)] mb-[10px] mt-[20px] mx-auto bg-${e.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`${e.container} ${s?"shadow-lg":""} h-[60px] fixed right-0 ${s?"bg-transparent":""} left-[180px] z-[20]`,children:[u.jsx("div",{className:`${s?"":"hidden "} absolute  inset-0 ${e.container} bg-opacity-[0.9] backdrop-blur-[15px] z-[-1] `}),u.jsxs("div",{className:"px-[40px] flex items-center justify-between h-full",children:[u.jsx("div",{className:""}),u.jsxs("div",{className:"flex gap-[16px]",children:[u.jsxs(Ai,{placement:"bottom-end",children:[u.jsx(Ri,{className:`flex items-center hover:brightness-75 ${_.button}`,children:u.jsx(cf,{className:"w-[20px]"})}),u.jsx(Ci,{children:u.jsx(vC,{loggedIn:!1,setIsOpenModal:a,modalName:l})})]}),u.jsxs(Ai,{placement:"bottom-end",children:[u.jsx(Ri,{className:`flex login-trigger items-center hover:brightness-75 ${_.button}`,children:r?v:u.jsx(Wg,{})}),u.jsx(Ci,{children:u.jsx(Ni,{color:"sidebar",variant:"thin",theme:e,children:u.jsxs("div",{className:"w-[250px] max-h-[50vh]",children:[n&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center p-[10px] pb-0",children:[u.jsx(Wg,{className:"login-trigger w-[46px] h-[46px]"}),u.jsx("div",{className:"ml-[12px]",children:u.jsx("h5",{className:"font-semibold line-clamp-1",children:n==null?void 0:n.displayName})})]}),u.jsx("div",{className:_.divide}),u.jsxs("button",{className:`${_.menuItem}`,onClick:()=>h("confirm"),children:[u.jsx(xT,{className:_.icon}),"Log out"]})]}),!n&&u.jsxs("button",{className:`${_.menuItem}`,onClick:m,children:[u.jsx(ij,{className:_.icon}),"Log in"]})]})})})]})]})]})]}),o&&u.jsxs(bn,{theme:e,setOpenModal:a,children:[l.current==="confirm"&&u.jsx(yr,{setOpenModal:a,callback:p,loading:!1,label:"Sign out ?",desc:"",theme:e}),l.current==="info"&&u.jsx(Jv,{setIsOpenModal:a}),l.current==="theme"&&u.jsx(Xv,{setIsOpenModal:a})]})]})}function cz({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"}))}const uz=f.forwardRef(cz),dz=uz;function fz({isOnMobile:t,admin:e,inPlaylist:n,inQueue:r,songData:s,handleOpenModal:i,handleAddSongToPlaylist:o,handleRemoveSongFromPlaylist:a}){const{theme:l}=ye(),{userInfo:c}=Et(),{setSuccessToast:d}=Ht(),{actuallySongs:h,removeFromQueue:p,addToQueue:m}=ht(),{userPlaylists:y}=ft(),v=f.useMemo(()=>!e&&(n==null?void 0:n.by)==="admin",[e,n]),_=()=>{m(s),d({message:"Song add to queue"})},x=()=>{r&&(p(s),d({message:"Song removed from queue"}))},g={before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]",level2Menu:"w-[100%] absolute right-[calc(100%+5px)] hidden group-hover/add-playlist:block hover:block",menuItem:`hover:bg-${l.alpha} ${l.content_hover_text} pl-[12px] rounded-[4px]`,menuIcon:"w-[18px] mr-[8px]",overlay:"absolute flex items-center justify-center inset-0 bg-[#000] bg-opacity-[.5]"},w=u.jsx(u.Fragment,{children:t?u.jsxs(K,{className:`group relative ${g.menuItem}  ${l.content_hover_text} ${g.before}`,variant:"list",onClick:()=>i("addToPlaylist"),children:[u.jsx(mi,{className:g.menuIcon}),"Add to playlist"]}):u.jsxs(K,{className:`group/add-playlist hover:!brightness-100 relative ${g.menuItem}  ${l.content_hover_text} ${g.before}`,variant:"list",children:[u.jsx(mi,{className:g.menuIcon}),"Add to playlist",u.jsx(Ni,{variant:"thin",className:`${g.level2Menu} z-[99] 
               
                  `,color:"sidebar",theme:l,children:u.jsx("ul",{className:"w-full",children:!!(y!=null&&y.length)&&u.jsx(u.Fragment,{children:y.map((E,T)=>{const S=E.song_ids.includes(s.id);return u.jsxs("li",{onClick:()=>!S&&o(E),className:`list-none w-full flex rounded-[4px] p-[5px] ${S&&"opacity-60 pointer-events-none"} ${g.menuItem}`,children:[u.jsx("span",{children:u.jsx(Po,{className:g.menuIcon})}),u.jsxs("p",{className:"line-clamp-1 text-left",children:[E.name," ",S&&"(Added)"]})]},T)})})})})]})});return u.jsx(u.Fragment,{children:u.jsxs("div",{className:` ${r?"w-[160px]":"w-[200px]"} `,children:[u.jsxs("div",{className:"ml-[14px] mt-[10px]",children:[u.jsx("h5",{className:"text-[14px] line-clamp-1",children:s.name}),u.jsx("p",{className:"text-[12px] text-gray-500 line-clamp-1",children:s.singer})]}),u.jsxs("div",{className:"mt-[14px]",children:[h&&u.jsxs(K,{onClick:r?x:_,className:` ${g.menuItem}`,variant:"list",children:[u.jsx(Tj,{className:g.menuIcon}),r?"Remove":"Add to queue"]}),(c==null?void 0:c.email)&&u.jsx(u.Fragment,{children:e&&!n||!n||v?w:u.jsxs(K,{className:g.menuItem,variant:"list",onClick:a,children:[u.jsx(E5,{className:g.menuIcon}),"Remove"]})}),(e||s.by!=="admin")&&!r&&u.jsxs(u.Fragment,{children:[!n&&u.jsxs(K,{onClick:()=>i("edit"),className:` ${g.menuItem} `,variant:"list",children:[u.jsx(xl,{className:g.menuIcon}),"Edit"]}),u.jsx(vs,{to:`edit/${s.id}`,children:u.jsxs(K,{className:` ${g.menuItem} `,variant:"list",children:[u.jsx(i5,{className:g.menuIcon}),s.lyric_id?"Add lyric":"Edit lyric"]})}),u.jsxs(K,{onClick:()=>i("confirm"),className:` ${g.menuItem} `,variant:"list",children:[u.jsx(df,{className:g.menuIcon}),"Delete"]})]}),u.jsxs("a",{target:"_blank",download:!0,href:s.song_url,className:` ${g.menuItem} w-full py-[5px] text-[14px] inline-flex items-center cursor-pointer`,children:[u.jsx(nj,{className:"w-[18px] mr-[5px]"}),"Download"]})]}),!r&&!t&&u.jsxs("p",{className:"opacity-60 text-center text-[12px] mt-[10px]",children:["uploaded by ",s.by]})]})})}const hz=f.memo(fz),pz=(t,e,n,r)=>f.useMemo(()=>({isChecked:t,setIsChecked:n,selectedSongs:e,setSelectedSongs:r}),[t,e]),xC=f.createContext(void 0),mz=()=>{const t=f.useContext(xC);return t===void 0?{isChecked:!1,setIsChecked:()=>{},selectedSongs:[],setSelectedSongs:()=>{}}:t},Kv=({children:t,isChecked:e,selectedSongs:n,setIsChecked:r,setSelectedSongs:s})=>{const i=pz(e,n,r,s);return u.jsx(xC.Provider,{value:i,children:t})};function gz({className:t,data:e,active:n,onClick:r,theme:s,inProcess:i,inPlaylist:o,admin:a,inQueue:l}){const{userInfo:c,setUserInfo:d}=Et(),{setErrorToast:h,setSuccessToast:p}=Ht(),{actuallySongs:m,addToQueue:y,removeFromQueue:v}=ht(),{isChecked:_,selectedSongs:x,setIsChecked:g,setSelectedSongs:w}=mz(),{userPlaylists:E}=ft(),[T,S]=f.useState(!1),[I,b]=f.useState(!1),[A,R]=f.useState(!1),[k,V]=f.useState(),P=()=>{S(!1),R(!1)},{handleDeleteSong:D,handleAddSongToPlaylistMobile:z,handleAddSongToPlaylist:M,handleRemoveSongFromPlaylist:G,loading:C}=pB({song:e,admin:a,closeModal:P,setIsOpenPopup:b}),W=Ae=>{V(Ae),R(!0)},F=f.useMemo(()=>window.innerWidth<800,[]),$=f.useMemo(()=>x?(x==null?void 0:x.indexOf(e))!=-1:!1,[x]),H=f.useMemo(()=>(c==null?void 0:c.like_song_ids.includes(e.id))??!1,[c==null?void 0:c.like_song_ids,e]),j=()=>{y(e),p({message:"Song add to queue"})},O=async()=>{if(!a){if(!c||!d){console.log("lack of props");return}try{S(!0);const Ae=[...c.like_song_ids],pt=Ae.indexOf(e.id);pt===-1?(Ae.push(e.id),m&&(m.find(en=>en.id===e.id)||(console.log("like songs, add to queue"),j()))):(Ae.splice(pt,1),m&&m.find(en=>en.id===e.id)&&(console.log("unlike songs remove from queue"),v(e))),d({like_song_ids:Ae}),await Ut({collection:"users",data:{like_song_ids:Ae},id:c.email})}catch(Ae){console.log(Ae),h({message:"Error when liked song"})}finally{S(!1)}}},Q=Ae=>{if(!w||!x||!g){h({message:"Selected lack of props"});return}_!==void 0&&ab(Ae,_,g,x,w)},Y={button:`${s.content_hover_bg} p-[8px] rounded-full`,songListButton:"mr-[10px] text-[inherit]",itemContainer:`group/container flex flex-row rounded justify-between px-[10px] py-[10px] w-full border-b border-${s.alpha} last:border-none p-[0px] 
         ${n||$?l?s.content_bg+" text-white":"bg-"+s.alpha:""} 
         ${n?"":"hover:bg-"+s.alpha}`,imageFrame:` relative rounded-[4px] overflow-hidden flex-shrink-0 ${l?"w-[40px] h-[40px]":"h-[54px] w-[54px]"}`,overlay:"absolute flex items-center justify-center inset-0 bg-[#000] bg-opacity-[.5]",ctaWrapper:"flex items-center justify-end min-w-[86px] flex-shrink-0",menuBtnWrapper:"w-[50px] flex justify-center "},ne=u.jsx(u.Fragment,{children:i?u.jsx("button",{className:`${Y.songListButton}`,children:u.jsx(Po,{className:"w-[18px]"})}):u.jsx(u.Fragment,{children:!_&&!F?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>Q(e),className:`${Y.songListButton} hidden ${g&&w?"group-hover/main:block":""}`,children:u.jsx(No,{className:"w-[18px] "})}),u.jsx("button",{className:`${Y.songListButton} ${g&&w?"group-hover/main:hidden group-hover/main:mr-[0px]":""}`,children:u.jsx(Po,{className:"w-[18px]"})})]}):u.jsx("button",{onClick:()=>Q(e),className:`${Y.songListButton} text-[inherit]`,children:$?u.jsx(Ba,{className:"w-[18px]"}):u.jsx(No,{className:"w-[18px]"})})})}),se=u.jsxs("div",{className:`flex flex-row flex-grow ${i?"opacity-60":""}`,children:[!l&&ne,u.jsxs("div",{className:"flex flex-grow ",onClick:F?r:()=>"",children:[u.jsxs("div",{className:`${Y.imageFrame}`,children:[u.jsx(Hr,{src:e.image_url,blurHashEncode:e.blurhash_encode}),u.jsx("div",{className:`${Y.overlay} 
               ${n?"":"hidden group-hover/main:flex"}`,children:n?u.jsx("img",{src:qv,alt:"",className:"h-[18px] w-[18px]"}):u.jsx(K,{onClick:r,variant:"default",className:"w-[25px] text-white",children:u.jsx(Ql,{})})})]}),u.jsxs("div",{className:`ml-[10px] ${l?"max-w-[96px]":""}`,children:[u.jsx("h5",{className:`line-clamp-1 overflow-hidden ${l?"text-[13px]":""}`,children:e.name}),u.jsx("p",{className:"text-xs opacity-[.6] line-clamp-1",children:e.singer})]})]})]}),ae=()=>T?u.jsx(Ln,{className:"w-[20px] animate-spin"}):u.jsxs(u.Fragment,{children:[u.jsx(dz,{className:`w-[20px]  ${H?`${s.content_text} block group-hover:hidden`:"text-white hidden group-hover:block"}`}),u.jsx(ST,{className:`w-[20px] ${H?"hidden group-hover:block":"block group-hover:hidden"}`})]});return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`${t||""} ${i?"":"group/main"}  ${Y.itemContainer} ${l?"py-[6px]":""}`,children:[se,i?u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{children:u.jsx(Ln,{className:"w-[20px] mr-[10px] animate-spin"})}),u.jsx("p",{className:"text-[14px]",children:"In process..."})]}):u.jsxs("div",{className:Y.ctaWrapper,children:[!a&&(c==null?void 0:c.email)&&u.jsx("button",{onClick:O,className:`${Y.button} group`,children:ae()}),u.jsxs("div",{className:Y.menuBtnWrapper,children:[u.jsxs(Ai,{isOpenFromParent:I,setIsOpenFromParent:b,placement:l?"bottom-end":"left",children:[u.jsx(Ri,{asChild:!0,children:u.jsx("button",{className:`block  group-hover/main:block ${Y.button} ${I||l?"md:block":"md:hidden"}`,children:u.jsx(kj,{className:"w-[20px]"})})}),u.jsx(Ci,{children:u.jsxs(Ni,{className:`${C?"overflow-hidden relative":""}`,variant:"thin",color:"sidebar",theme:s,children:[u.jsx(hz,{admin:a,inPlaylist:o,isOnMobile:F,inQueue:l,songData:e,handleOpenModal:W,handleAddSongToPlaylist:M,handleRemoveSongFromPlaylist:G}),C&&u.jsx("div",{className:Y.overlay,children:u.jsx("div",{className:"h-[25px] w-[25px] border-[2px] border-r-black rounded-[50%] animate-spin"})})]})})]}),u.jsx("span",{className:`text-[12px] hidden  group-hover/main:hidden ${I||l?"hidden":"md:block"}`,children:gi(e.duration)})]})]})]}),A&&u.jsxs(bn,{theme:s,setOpenModal:R,children:[k==="edit"&&u.jsx(bB,{setIsOpenModal:R,theme:s,song:e,admin:a}),k==="confirm"&&u.jsx(yr,{loading:C,label:`Delete '${e.name}' ?`,desc:"This action cannot be undone",theme:s,callback:D,setOpenModal:R}),k==="addToPlaylist"&&E&&u.jsx(Iz,{loading:C,handleAddSongToPlaylist:z,setIsOpenModal:R,song:e,userPlaylists:E})]})]})}const Bp=f.memo(gz),yz=({data:t,active:e,onClick:n,hasTitle:r,classNames:s,theme:i,idleClass:o},a)=>{const l={container:"flex flex-col",imageFrame:"group relative transition-[width] duration-[.3s] origin-center rounded-[6px] overflow-hidden",image:"select-none object-cover object-center rounded w-full",overlay:`absolute  ${e?"":"inset-0 hidden bg-opacity-60 bg-[#333] items-center justify-center"}   group-hover:flex`,playingGifFrame:"absolute h-[30px] w-[30px] bottom-[15px] left-[15px] -z-1",title:"text-[22px] text-white mt-[10px] font-bold text-ellipsis line-clamp-1"};if(t)return u.jsxs("div",{ref:a,className:`${l.container} ${o||""}`,children:[u.jsx("div",{className:`song-thumb ${s??""} flex items-end justify-center flex-shrink-0 w-[350px] h-[350px] min-[1536px]:w-[450px] min-[1536px]:h-[450px] `,children:u.jsxs("div",{className:`${l.imageFrame} ${e?"w-[320px] min-[1536px]:w-[400px]":"w-[280px] min-[1536px]:w-[330px]"}`,children:[u.jsx(Hr,{classNames:"rounded-[6px]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsx("div",{className:`${l.overlay}`,children:!e&&u.jsx(K,{onClick:n,variant:"circle",className:`h-[50px] w-[50px] text-white ${i.content_hover_text}`,children:u.jsx(Ql,{className:"w-full"})})}),e&&u.jsx("div",{className:l.playingGifFrame,children:u.jsx("img",{src:qv,alt:""})})]})}),r&&u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:l.title,children:(t==null?void 0:t.name)||"Some song"}),u.jsx("p",{className:"text-md opacity-50 line-clamp-1",children:(t==null?void 0:t.singer)||"..."})]})]})},zp=f.forwardRef(yz);function vz({data:t,active:e}){const n={container:"flex flex-col",imageFrame:"rounded-[4px] overflow-hidden",image:"select-none object-cover object-center w-full"};if(t)return u.jsx("div",{className:`${n.container} ${e?"w-full px-[20px]":"w-[60px] h-[60px] flex-shrink-0"}`,children:u.jsx("div",{className:`${n.imageFrame}`,children:u.jsx(Hr,{src:t.image_url,classNames:"w-full"})})})}function xz({songs:t,inAdmin:e,inPlaylist:n,activeExtend:r,handleSetSong:s,tempSongs:i=[],addedSongIds:o=[],inQueue:a,playlistSongs:l,setPlaylistSongs:c}){const{theme:d}=ye(),{song:h}=fe(Re),{actuallySongs:p}=ht(),m=()=>i.map((v,_)=>{const x=o.some(w=>w===v.id);let g=!!r&&h.id===v.id;return _==0?u.jsx(Bp,{className:"temp-song",active:g,onClick:()=>s(v,_),theme:d,inProcess:!x,data:v},_):u.jsx(Bp,{active:g,onClick:()=>s(v,_),theme:d,inProcess:!x,data:v},_)}),y=()=>!t.length&&!i.length?u.jsx("h1",{children:"No song jet..."}):t.map((v,_)=>{let x=!!r&&h.id===v.id;a&&(x=x&&h.currentIndex===_);const g=h.currentIndex===(p==null?void 0:p.length)-1;return u.jsxs("div",{children:[u.jsx(Bp,{data:v,theme:d,admin:e,active:x,inPlaylist:n,onClick:()=>s(v,_),inQueue:a,className:`${a&&_<h.currentIndex?"opacity-[.6] hover:opacity-[1]":""}`}),a&&x&&!g&&u.jsx("div",{className:"mt-[12px] mb-[4px]",children:u.jsx("p",{className:`${d.content_text} text-[14px] font-[600]`,children:"Playing next"})})]},_)});return u.jsx(u.Fragment,{children:u.jsxs(fB,{playlistSongs:l||[],setPlaylistSongs:c||function(){},children:[y(),!!i.length&&m()]})})}const zr=f.memo(xz);function Gv({tabs:t,activeTab:e,setActiveTab:n,className:r,render:s,inFullScreen:i}){const{theme:o}=ye();return u.jsx("ul",{className:`flex py-[4px] h-full px-[4px] items-center ${i?"mx-auto":""} rounded-full ${i?"bg-gray-500 bg-opacity-[.2]":o.side_bar_bg} ${r&&r}`,children:t.map((a,l)=>u.jsx("li",{onClick:()=>n(a),className:`${i?"px-[30px]":"px-[20px]"}  cursor-pointer h-full rounded-full max-[549px]:px-[15px] ${i?"":o.content_hover_text} ${e===a?i?"bg-gray-400 bg-opacity-[.2]":`${o.content_text} ${o.container}`:"opacity-60"}`,children:u.jsx("span",{className:"leading-[27px] font-semibold max-[549px]:font-normal",children:s(a)})},l))})}function Qv(){const{theme:t}=ye(),e=Zt(),n=En(),r=i=>{i==="back"&&e(-1)},s={button:`h-[36px] w-[36px] inline-flex items-center justify-center p-[6px] rounded-full ${t.content_hover_bg} bg-${t.alpha}`};return u.jsx("div",{className:"flex gap-[10px] mb-[30px]",children:u.jsx("button",{onClick:()=>r("back"),className:`${s.button} ${n.pathname==="/"?"opacity-60 pointer-events-none":""}`,children:u.jsx(Hy,{className:""})})})}const wz=({time:t=6e3,autoClose:e})=>{const{setToasts:n,toasts:r}=Ht(),{theme:s}=ye(),[i,o]=f.useState(""),a=c=>{n(d=>d.filter(h=>h.id!=c))};f.useEffect(()=>{i&&n(c=>c.filter(d=>d.id!=i))},[i]),f.useEffect(()=>{if(!e||!r.length)return;const c=r[r.length-1].id;setTimeout(()=>{o(c)},t)},[r]);const l={container:"toast-portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:Qo.createPortal(u.jsx("div",{className:l.container,children:u.jsx("div",{className:"flex flex-col gap-[10px]",children:!!r.length&&r.map((c,d)=>u.jsx(IB,{onClick:a,theme:s,toast:c},d))})}),document.getElementById("portals"))})};function _z({user:t},e){return e?u.jsx("p",{className:"text-xl mb-4 ml-2",ref:e,children:t.display_name}):u.jsx("p",{className:"text-xl mb-4 ml-2",children:t.display_name})}f.forwardRef(_z);function Ez(){const{theme:t}=ye(),[e]=Vi(gr),[n,r]=f.useState(!1),s=f.useRef("confirm"),{logOut:i}=_h(),o=async()=>{try{await i()}catch(l){console.log("signOut error",{messsage:l})}finally{r(!1)}},a={header:`${t.side_bar_bg} fixed top-0 z-10 left-0 right-0`,container:"container mx-auto px-[40px] flex justify-between items-center h-[50px]",avatarFrame:"w-[34px] h-[34px] rounded-full",settingBtn:` flex ml-[12px] justify-center items-center hover:brightness-75 bg-${t.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`${a.header}`,children:u.jsxs("div",{className:a.container,children:[u.jsxs(vs,{to:"/dashboard",className:"text-[24px] font-semibold",children:["HD",u.jsx("span",{className:`${t.content_text} ml-[4px] uppercase`,children:"Dashboard"})]}),u.jsxs("div",{className:"flex items-center",children:[(e==null?void 0:e.displayName)&&u.jsx("p",{className:"text-[14px] mr-[8px]",children:e.displayName}),u.jsx("div",{className:`${a.avatarFrame} overflow-hidden `,children:(e==null?void 0:e.photoURL)&&u.jsx("img",{src:e.photoURL,className:"w-full",alt:""})}),u.jsxs(Ai,{placement:"bottom-end",children:[u.jsx(Ri,{className:`${a.avatarFrame} ${a.settingBtn}`,children:u.jsx(cf,{className:"w-[24px]"})}),u.jsx(Ci,{children:u.jsx(vC,{loggedIn:!1,setIsOpenModal:r,modalName:s})})]})]})]})}),n&&u.jsxs(bn,{theme:t,setOpenModal:r,children:[s.current==="confirm"&&u.jsx(yr,{setOpenModal:r,callback:o,loading:!1,theme:t,label:"Log out ?"}),s.current==="info"&&u.jsx(Jv,{setIsOpenModal:r}),s.current==="theme"&&u.jsx(Xv,{setIsOpenModal:r})]})]})}const Sz="/HD-MP3/assets/user-default-971f59df.png";function Wg({className:t}){const[e]=Vi(gr),n={imageFrame:`${t||"w-[35px] h-[35px]"} flex-shrink-0 rounded-full overflow-hidden ${e!=null&&e.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`};return u.jsx("div",{className:n.imageFrame,children:u.jsx(Hr,{src:(e==null?void 0:e.photoURL)||Sz,classNames:"w-full"})})}const Tz=JSON.parse(localStorage.getItem("isTimer")||"0");function bz({cb:t,isPlaying:e,play:n,isOpenFullScreen:r}){const s=et(),{theme:i}=ye(),{playStatus:{isTimer:o}}=fe(Tn),[a,l]=f.useState(Tz),[c,d]=f.useState(0),[h,p]=f.useState(!1),m=f.useRef(),y=f.useRef(0),v=f.useRef(0),_=f.useRef(!1),x=()=>{v.current=0,p(!1),n()},g=()=>{p(!1),v.current=0},w=()=>{s(gt({isTimer:0})),l(0),localStorage.setItem("isTimer",JSON.stringify(0))};return f.useEffect(()=>{if(c){if(a===1){console.log("pause"),t(),l(0),s(gt({isTimer:0})),localStorage.setItem("isTimer",JSON.stringify(0)),p(!0);return}l(a-1)}},[c]),f.useEffect(()=>{if(o){if(console.log("check sec",a,v.current),!e&&a===v.current)_.current=!0,n();else if(!e)return;return a||(l(o),v.current=o),m.current=setInterval(()=>{d(Math.random())},1e3),()=>{clearInterval(m.current),d(0)}}},[o,e]),f.useEffect(()=>()=>{_.current=!1,a&&(v.current=0)},[o]),f.useEffect(()=>{a&&(y.current+=1,y.current===5&&(localStorage.setItem("isTimer",JSON.stringify(a)),y.current=0))},[a]),u.jsxs(u.Fragment,{children:[!!a&&!r&&u.jsx("div",{className:"absolute bottom-[100%] w-[70%] left-[50%] translate-x-[-50%]",children:u.jsxs("div",{className:`${i.content_bg} flex justify-center gap-[10px] py-[2px] text-[13px] px-[20px] rounded-tl-[4px] rounded-tr-[4px]`,children:[u.jsxs("p",{className:" text-[13px]",children:["Song stop in ",gi(a)]}),u.jsx("button",{onClick:w,children:u.jsx(er,{className:"w-[18px]"})})]})}),h&&u.jsx(bn,{setOpenModal:p,theme:i,children:u.jsxs("div",{className:"w-[500px] max-w-[calc(100vw-40px)]",children:[u.jsxs("h1",{className:"text-[22px]",children:["You have been listened music in ",gi(v.current)]}),u.jsxs("div",{className:"flex gap-[10px] mt-[30px]",children:[u.jsx(K,{onClick:()=>x(),size:"normal",className:`${i.content_bg} rounded-[99px]`,children:"Continue playing"}),u.jsx(K,{onClick:g,size:"normal",className:`bg-${i.alpha} rounded-[99px]`,children:"Close"})]})]})})]})}function Jv({setIsOpenModal:t}){return u.jsxs("div",{className:"w-[400px] max-w-[calc(90vw-40px)]",children:[u.jsx(zs,{setIsOpenModal:t,title:"HD Player"}),u.jsxs("div",{className:"",children:[u.jsx("h5",{className:"text-lg font-bold",children:"Các công nghệ sử dụng:"}),u.jsx("ul",{}),u.jsx("a",{href:"asldj",target:"_blank",className:"text-lg font-bold",children:"#Github"})]})]})}function G_({onClick:t,theme:e,active:n}){return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"w-[25%] px-[10px] max-[549px]:w-[50%]",children:[u.jsx("div",{onClick:()=>t(e),className:`relative border-l-[20px] ${e.content_border} pt-[100%] rounded-xl ${e.side_bar_bg} ${n?e.content_border:""}`,children:n&&u.jsx("div",{className:"absolute bottom-[10px] right-[10px]",children:u.jsx(wT,{className:`${e.content_text} w-[25px]`})})}),u.jsx("p",{className:"text-[14px] mt-[6px]",children:e.name})]})})}function Xv({setIsOpenModal:t}){const{theme:e,setTheme:n}=ye(),r=a=>{localStorage.setItem("theme",JSON.stringify(a.id)),n(a)},s={songItemContainer:`w-full border-b border-${e.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[900px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-y-auto overflow-x-hidden no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap",linkItem:`py-[10px] border-b border-${e.alpha} last:border-none`},i=id.map(a=>{const l=a.id===e.id;if(a.type==="light")return u.jsx(G_,{active:l,theme:a,onClick:r},a.id)}),o=id.map(a=>{const l=a.id===e.id;if(a.type==="dark")return u.jsx(G_,{active:l,theme:a,onClick:r},a.id)});return u.jsxs("div",{className:s.popupWrapper,children:[u.jsx(zs,{setIsOpenModal:t,title:"Themes"}),u.jsxs("div",{className:s.themeContainer,children:[u.jsx("h2",{className:"text-md font-semibold mb-[10px]",children:"Dark"}),u.jsx("div",{className:s.themeList,children:o}),u.jsx("h2",{className:"text-md font-semibold mb-[10px] mt-[30px]",children:"Light"}),u.jsx("div",{className:s.themeList,children:i})]})]})}function yr({loading:t,theme:e,callback:n,label:r,setOpenModal:s,buttonLabel:i,desc:o="This action cannot be undone",className:a}){return u.jsxs("div",{className:`${a||"w-[400px] max-w-[calc(90vw-40px)]"} ${t?"opacity-60 pointer-events-none":""}`,children:[u.jsx("h1",{className:"text-[20px] font-semibold",children:r||"Wait a minute"}),o&&u.jsx("p",{className:" text-[16px] font-semibold text-red-500",children:o}),u.jsxs("div",{className:"flex gap-[10px] mt-[20px]",children:[u.jsx(K,{onClick:()=>s(!1),className:`${e.content_bg} rounded-full text-[14px]`,variant:"primary",children:"Close"}),u.jsx(K,{isLoading:t,className:" text-[#fff] bg-red-500 rounded-full text-[14px] font-bold",variant:"primary",onClick:n,children:i||"Yes please"})]})]})}function wC({setIsOpenModal:t,theme:e,admin:n}){const[r,s]=f.useState(""),{addPlaylist:i,loading:o}=la({admin:n}),{adminPlaylists:a,userPlaylists:l}=ft(),{setErrorToast:c,setSuccessToast:d}=Ht(),[h,p]=f.useState(!1),m=f.useRef(null),y=async v=>{if(v.preventDefault(),h)return;if((n?a:l).find(g=>g.name===r)){c({message:"Playlist name already use"}),p(!0);return}try{await i(r),d({message:`'${r}' created`})}catch{console.log("error"),c({message:"Error when add playlist"})}finally{console.log("run finally"),t(!1)}};return f.useEffect(()=>{r.trim()&&p(!1)},[r]),f.useEffect(()=>{var v;(v=m.current)==null||v.focus()},[]),u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]:",children:[u.jsx(zs,{setIsOpenModal:t,title:"Add playlist"}),u.jsxs("form",{action:"",onSubmit:y,children:[u.jsx("input",{ref:m,className:`bg-${e.alpha} ${h?"border border-red-500":""} px-[20px] rounded-full outline-none mt-[10px] text-[16px]  h-[35px] w-full`,type:"text",placeholder:"name...",value:r,onChange:v=>s(v.target.value)}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(K,{type:"submit",isLoading:o,variant:"primary",className:`${e.content_bg} rounded-full ${h?"opacity-[.6] pointer-events-none":""}`,children:"Save"})})]})]})}function Iz({setIsOpenModal:t,handleAddSongToPlaylist:e,userPlaylists:n,song:r,loading:s}){return u.jsxs("div",{className:`w-[400px] max-w-[calc(90vw-40px)] ${s?"opacity-60 pointer-events-none":""}`,children:[u.jsx(zs,{setIsOpenModal:t,title:"Playlist"}),u.jsx("div",{className:"max-h-[60vh]",children:u.jsx("ul",{className:"",children:!!(n!=null&&n.length)&&u.jsx(u.Fragment,{children:n.map((i,o)=>{const a=i.song_ids.includes(r.id);return u.jsxs("li",{onClick:()=>!a&&e(i),className:`list-none flex rounded-[4px] p-[5px] ${a&&"opacity-60"}`,children:[u.jsx(Po,{className:"w-[20px] mr-[5px]"}),u.jsxs("p",{children:[i.name," ",a&&"(added)"]})]},o)})})})})]})}function Yv({setIsOpenModal:t,theme:e}){const n=et(),[r,s]=f.useState(),[i,o]=f.useState(""),[a,l]=f.useState(""),{setSuccessToast:c}=Ht(),d={button:"text-[14px] font-[500] px-[10px]  py-[4px] rounded-[99px]",input:`bg-${e.alpha} px-[10px] rounded-[4px] outline-none mt-[10px] text-[16px]  h-[35px] w-full`},h=(v,_)=>{console.log("handleSelect",v),_.stopPropagation(),_.preventDefault(),l(""),o(""),s(v)},p=(v,_)=>{s(""),v=="minute"?o(_):l(_)},m=()=>{let v;r?v=+r:v=+a*60+ +i,n(gt({isTimer:v})),localStorage.setItem("isTimer",JSON.stringify(v)),c({message:"Timer added"}),t(!1)},y=r||a||i;return u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]",children:[u.jsx(zs,{setIsOpenModal:t,title:"Timer"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex gap-[10px] mb-[12px]",children:[u.jsx("button",{type:"button",onClick:v=>h("5",v),className:`${d.button} ${r==="5"?e.content_bg:`${e.content_border} border`}`,children:"5 min"}),u.jsx("button",{type:"button",onClick:v=>h("15",v),className:`${d.button} ${r==="15"?e.content_bg:`${e.content_border} border`}`,children:"15 min"}),u.jsx("button",{type:"button",onClick:v=>h("30",v),className:`${d.button} ${r==="30"?e.content_bg:`${e.content_border} border`}`,children:"30 min"})]}),u.jsxs("div",{className:"flex gap-[10px]",children:[u.jsxs("div",{className:"flex flex-col w-[50%]",children:[u.jsx("label",{htmlFor:"hour_input",children:"Hour"}),u.jsxs("select",{value:a,onChange:v=>p("hour",v.target.value),id:"hour_input",className:d.input,children:[u.jsx("option",{value:"0",children:"---"}),u.jsx("option",{value:"1",children:"1"}),u.jsx("option",{value:"2",children:"2"}),u.jsx("option",{value:"3",children:"3"})]})]}),u.jsxs("div",{className:"flex flex-col w-[50%]",children:[u.jsx("label",{htmlFor:"minute_input",children:"Minute"}),u.jsxs("select",{value:i,onChange:v=>p("minute",v.target.value),className:d.input,id:"minute_input",children:[u.jsx("option",{className:d.input,value:"0",children:"---"}),u.jsx("option",{value:"15",children:"15"}),u.jsx("option",{value:"30",children:"30"}),u.jsx("option",{value:"45",children:"45"})]})]})]}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(K,{onClick:m,variant:"primary",className:`${e.content_bg} rounded-full ${y?"":"opacity-60 pointer-events-none"}`,children:"Ok"})})]})]})}function _C({admin:t}){const e=f.useRef(null),n=f.useRef(null),r=f.useRef(null),{handleInputChange:s}=_B({audioRef:e,testImageRef:r,inputRef:n,admin:t}),i={container:"upload portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:Qo.createPortal(u.jsxs("div",{className:i.container,children:[u.jsx("audio",{className:"hidden",ref:e}),u.jsx("input",{ref:n,onChange:s,type:"file",multiple:!0,accept:"audio",id:"song_upload",className:"hidden"}),u.jsx("img",{className:"hidden",ref:r})]}),document.getElementById("portals"))})}function Wp({children:t}){const{theme:e}=ye();return u.jsx(u.Fragment,{children:u.jsxs("div",{className:`${e.container} min-h-screen ${e.type==="dark"?"text-white":"text-[#333]"}`,children:[u.jsx(Ez,{}),u.jsxs("div",{className:"h-[calc(100vh-50px)] no-scrollbar overflow-auto",children:[u.jsx("div",{className:"h-[100px]"}),u.jsx("div",{className:"container mx-[auto] px-[40px]",children:t})]}),u.jsx(yC,{admin:!0}),u.jsx(_C,{admin:!0})]})})}function Az(){const t=et(),[e,n]=Vi(gr),{theme:r}=ye(),{setSuccessToast:s}=Ht(),{userInfo:i}=Et(),{adminSongs:o,adminPlaylists:a}=ft(),{loading:l}=_c({}),{song:c}=fe(Re),[d,h]=f.useState(!1),[p,m]=f.useState(!1),[y,v]=f.useState([]),_=f.useRef("theme"),{logIn:x,logOut:g}=_h(),{actuallySongs:w,setActuallySongs:E}=ht(),T=(P,D)=>{(c.id!==P.id||c.song_in!=="admin")&&(t(He({...P,currentIndex:D})),c.song_in!=="admin"&&(E(o),console.log("setActuallySongs")))},S=f.useMemo(()=>window.innerWidth<800,[]),I=async()=>{try{await x()}catch(P){console.log(P)}finally{h(!1)}},b=async()=>{try{await g()}catch(P){console.log("signOut error",{messsage:P})}finally{h(!1)}},A=P=>{_.current=P,h(!0)},R=()=>{v([]),m(!1)},k=()=>{const P=[...w,...y];E(P),console.log("setActuallySongs"),s({message:"songs added to queue"})},V={songItemContainer:`w-full border-b border-${r.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[400px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-auto no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap gap-y-[20px]",linkItem:`py-[10px] border-b border-${r.alpha} last:border-none`,button:`${r.content_bg} rounded-full`};return u.jsxs(u.Fragment,{children:[S&&u.jsx("div",{className:"pb-[20px]",children:u.jsxs("div",{className:"flex flex-col gap-3 items-start ",children:[u.jsx("h1",{className:"text-[24px] font-bold",children:"Library"}),i.status==="loading"?"":u.jsx(u.Fragment,{children:i.email?u.jsxs(u.Fragment,{children:[u.jsx(Ui,{className:V.linkItem,to:It.MySongs,icon:u.jsx(Po,{className:V.icon+r.content_text}),label:"All songs",arrowIcon:u.jsx(vu,{className:"w-5 h-5 text-gray-500"})}),u.jsx(Ui,{className:V.linkItem,to:It.MySongs,icon:u.jsx(ST,{className:V.icon+r.content_text}),label:"Favorite",arrowIcon:u.jsx(vu,{className:"w-5 h-5 text-gray-500"})}),u.jsx(Ui,{className:V.linkItem,to:It.MySongs,icon:u.jsx(ET,{className:V.icon+r.content_text}),label:"Recent",arrowIcon:u.jsx(vu,{className:"w-5 h-5 text-gray-500"})})]}):u.jsx(K,{onClick:I,className:`${r.content_bg} rounded-[4px] px-[40px]`,variant:"primary",children:"Login"})})]})}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[14px]",children:"Popular"}),u.jsxs("div",{className:"flex flex-row flex-wrap -mx-[8px] mb-[30px]",children:[(l||i.status==="loading")&&Gy,i.status==="finish"&&!l&&!!a.length&&a.map((P,D)=>u.jsx("div",{className:"w-1/2 min-[800px]:w-1/4 p-[8px]",children:u.jsx(Tc,{active:c.song_in.includes(P.id),theme:r,data:P})},D))]}),u.jsxs("div",{className:"h-[30px] mb-[10px] flex items-center gap-[8px]",children:[!p&&u.jsx("h3",{className:"text-2xl font-bold mr-[14px]",children:"Songs"}),!S&&p&&u.jsx("p",{className:"text-[14px] font-medium",children:y.length+" selected"}),p&&y.length&&u.jsxs(u.Fragment,{children:[u.jsxs(K,{onClick:k,variant:"outline",size:"small",className:`border-${r.alpha} ${r.side_bar_bg}`,children:[u.jsx(uf,{className:"w-[20px] mr-[4px]"}),"Add to songs queue"]}),u.jsx(K,{variant:"circle",onClick:R,className:`p-[4px] border border-${r.alpha} ${r.side_bar_bg}`,children:u.jsx(er,{className:"w-[20px]"})})]})]}),l&&ff,!l&&u.jsx(u.Fragment,{children:o.length?u.jsx(u.Fragment,{children:u.jsx(Kv,{isChecked:p,setIsChecked:m,selectedSongs:y,setSelectedSongs:v,children:u.jsx(zr,{handleSetSong:T,activeExtend:c.song_in==="admin"||c.song_in==="favorite",songs:o})})}):u.jsx("h1",{className:"text-[22px] text-center",children:"..."})})]}),S&&u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[10px]",children:"Setting"}),u.jsx(Wg,{className:"h-[65px] w-[65px]"}),n?u.jsx(Se,{className:"my-[8px] h-[27px]"}):u.jsx("p",{className:"text-[18px] font-[500] my-[8px]",children:(e==null?void 0:e.displayName)||"Guest"}),n?[...Array(3).keys()].map(()=>m4):u.jsxs(u.Fragment,{children:[u.jsx(Ui,{className:V.linkItem,icon:u.jsx(bT,{className:V.icon}),label:"Theme",onClick:()=>A("theme")}),u.jsx(Ui,{className:V.linkItem,icon:u.jsx(TT,{className:V.icon}),label:"Info",onClick:()=>A("info")}),i.email&&u.jsx(Ui,{className:V.linkItem,icon:u.jsx(xT,{className:V.icon}),label:"Logout",onClick:()=>A("confirm")})]})]}),d&&u.jsxs(bn,{theme:r,setOpenModal:h,classNames:"w-[90vw]",children:[_.current==="confirm"&&u.jsx(yr,{setOpenModal:h,callback:b,loading:!1,theme:r,label:"Log out ?"}),_.current==="info"&&u.jsx(Jv,{setIsOpenModal:h}),_.current==="theme"&&u.jsx(Xv,{setIsOpenModal:h})]})]})}function Rz(){const{theme:t}=ye(),{song:e}=fe(Re),{userSongs:n}=ft(),[r,s]=f.useState(),[i,o]=f.useState({base:"",real_time:[],id:""}),a=f.useRef(null),[l,c]=f.useState(!1),d=f.useRef(!0),{errorMsg:h,loading:p,initial:m}=_c({}),y=Zt(),v=lf(),_=f.useCallback(async g=>{try{if(g.lyric_id){c(!0);const w=await Ho({collection:"lyrics",id:g.lyric_id,msg:">>> api: get lyric doc"});if(w.exists()){const E=w.data();o(E)}}}catch(w){console.log({message:w})}finally{c(!1)}},[]),x=f.useCallback(async()=>{if(console.log("get song"),e.name&&e.id===v.id)e.by==="admin"?y(It.Home):(s(e),await _(e));else{const g=n.find(w=>w.id===v.id);g?(s(g),await _(g)):y(It.Home)}},[e,n]);return f.useEffect(()=>{m&&d.current&&(r||x(),d.current=!1)},[m]),p||l?u.jsx("h1",{children:u.jsx(Ln,{className:"w-[25px] animate-spin"})}):h?u.jsx("h1",{children:h}):u.jsxs("div",{className:"",children:[u.jsx("audio",{ref:a,src:r==null?void 0:r.song_url,className:"hidden"}),r&&u.jsx(u.Fragment,{children:u.jsx(mC,{lyric:i,audioRef:a,theme:t,song:r})})]})}function Cz(){const t=et(),{userInfo:e}=Et(),{song:n}=fe(Re),{adminPlaylists:r,adminSongs:s,setAdminSongs:i}=ft(),[o,a]=f.useState([]),[l,c]=f.useState(!1),[d,h]=f.useState(!1),[p,m]=f.useState(),[y,v]=f.useState(!0),[_,x]=f.useState([]),[g,w]=f.useState("adminSongs"),E=f.useRef(!0),{theme:T}=ye(),{setActuallySongs:S,actuallySongs:I}=ht(),{addedSongIds:b,tempSongs:A,status:R}=$v(),{loading:k,initSongsAndPlaylists:V,initial:P}=_c({admin:!0}),D=f.useMemo(()=>A.length+s.length,[A,s]),z=async()=>{console.log(">>> api: get user");try{v(!0);const O=Fs($i(_r,"users"),Us("email","!=",e==null?void 0:e.email)),Q=await Bs(O);if(Q.docs){const Y=Q.docs.map(ne=>ne.data());x(Y)}}catch(O){console.log(O)}finally{v(!1)}},M=(O,Q)=>{(n.song_in!=="admin"||I.length!==s.length)&&(S(s),console.log("setActuallySongs")),n.id!==O.id&&t(He({...O,currentIndex:Q,song_in:"admin"}))},G=()=>{a([]),c(!1)},C=()=>{v(!1),h(!1)},W=()=>{o.length<s.length?a(s):a([])},F=async()=>{try{const O=[...s];v(!0);for(let Q of o){await Vv(Q);const Y=s.findIndex(ne=>ne.id===Q.id);O.splice(Y,1)}S(O),console.log("setActuallySongs"),i(O)}catch(O){console.log({message:O})}finally{G(),C()}},$=O=>{m(O),h(!0)},H=()=>_.map((O,Q)=>u.jsxs("tr",{className:"",children:[u.jsx("td",{className:j.td,children:u.jsx("div",{className:"h-[44px] w-[44px] ml-[20px]",children:u.jsx(Hr,{classNames:"rounded-[4px]",src:O.photoURL})})}),u.jsx("td",{className:j.td,children:O.display_name}),u.jsx("td",{className:j.td,children:O.email}),u.jsx("td",{className:j.td,children:sL(O==null?void 0:O.latest_seen)})]},Q));f.useEffect(()=>{const O=async()=>{try{P?(console.log("already initialized"),setTimeout(()=>v(!1),200)):V()}catch(Q){console.log(Q)}};E.current&&(E.current=!1,O())},[]),f.useEffect(()=>{e.status!=="loading"&&g==="users"&&!_.length&&z()},[g]);const j={button:`${T.content_bg} rounded-full`,inActiveBtn:`bg-${T.alpha}`,activeBtn:`${T.content_bg}`,td:`py-[10px] my-[10px] border-${T.alpha} border-b-[1px]`,th:"py-[5px]",tableContainer:`border border-${T.alpha} rounded-[4px]`,tableHeader:`border-b border-${T.alpha} ${T.side_bar_bg} flex items-center h-[50px] gap-[15px]`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsxs("div",{className:"mb-[20px]",children:[u.jsx(K,{onClick:()=>w("adminSongs"),className:`${g==="adminSongs"?j.activeBtn:j.inActiveBtn}  rounded-full`,variant:"primary",children:"Songs"}),u.jsx(K,{onClick:()=>w("users"),className:` ${g==="users"?j.activeBtn:j.inActiveBtn} rounded-full ml-[10px]`,variant:"primary",children:"Users"})]}),u.jsxs("div",{className:"mt-[30px]",children:[g==="adminSongs"&&u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-2xl font-bold mb-[10px]",children:"Playlist"}),u.jsxs("div",{className:"flex flex-row flex-wrap mb-[30px] -mx-[8px]",children:[!k&&!!r.length&&r.map((O,Q)=>u.jsx("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:u.jsx(Tc,{admin:!0,theme:T,data:O})},Q)),k&&Gy,u.jsx("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:u.jsx(jT,{theme:T,className:"pt-[100%]",onClick:()=>$("addPlaylist")})})]}),u.jsxs("div",{className:"flex justify-between mb-[10px]",children:[u.jsx("h3",{className:"text-2xl font-bold",children:"Songs"}),u.jsx("div",{className:"flex items-center",children:u.jsxs("label",{className:`${T.content_bg} ${R==="uploading"||k?"opacity-60 pointer-events-none":""} rounded-full flex px-[20px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(mi,{className:"w-[20px] mr-[5px]"}),"Upload"]})})]}),u.jsxs("div",{className:`flex gap-[12px] items-center border-b border-${T.alpha} h-[60px]`,children:[k&&u.jsx(Se,{className:"h-[20px] w-[150px]"}),!k&&u.jsx("p",{className:"text-[14px]] font-semibold text-gray-500 w-[100px]",children:l?o.length+" selected":(D||0)+" songs"}),l&&u.jsxs(u.Fragment,{children:[u.jsx(K,{onClick:W,variant:"primary",className:j.button,children:"All"}),u.jsx(K,{onClick:()=>$("confirm"),variant:"primary",className:j.button,children:"Delete"}),u.jsx(K,{onClick:G,className:"px-[5px]",children:u.jsx(er,{className:"w-[25px]"})})]})]}),u.jsxs("div",{className:"min-h-[50vh]",children:[k&&ff,!k&&u.jsx(u.Fragment,{children:D?u.jsx(zr,{inAdmin:!0,activeExtend:!0,songs:s,handleSetSong:M,addedSongIds:b}):u.jsx("h1",{children:"No song jet..."})})]})]}),g==="users"&&u.jsx("div",{className:j.tableContainer,children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:`${T.bottom_player_bg} w-full text-[14px] py-[4px]`,children:u.jsxs("tr",{children:[u.jsx("th",{}),u.jsx("th",{className:"text-left py-[4px]",children:"Name"}),u.jsx("th",{className:"text-left py-[4px]",children:"Email"}),u.jsx("th",{className:"text-left py-[4px]",children:"Latest Seen"})]})}),u.jsx("tbody",{children:H()})]})})]})]}),d&&u.jsxs(bn,{theme:T,setOpenModal:h,children:[p==="confirm"&&u.jsx(yr,{loading:y,label:`Delete '${o.length} adminSongs'`,desc:"This action cannot be undone",theme:T,callback:F,setOpenModal:h}),p==="addPlaylist"&&u.jsx(wC,{setIsOpenModal:h,theme:T,admin:!0})]})]})}function EC({playlist:t,isOpenModal:e,setIsOpenModal:n}){const{theme:r}=ye(),s=f.useRef(null),[i,o]=f.useState(""),[a,l]=f.useState(!1),{editPlaylist:c,loading:d}=la({}),h=async m=>{if(m.preventDefault(),!!a){console.log("submiy");try{await c(i,t)}catch(y){console.log(y)}finally{n(!1)}}},p={editContainer:"w-[400px] max-w-[90vw] max-w-[calc(90vw-40px)]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full"};return f.useEffect(()=>{e&&(s.current.focus(),o(t.name))},[e]),f.useEffect(()=>{i.trim()&&i.trim()!==t.name?l(!0):l(!1)},[i]),u.jsxs(u.Fragment,{children:[u.jsx(zs,{setIsOpenModal:n,title:"Edit playlist"}),u.jsxs("form",{action:"",onSubmit:h,className:`${p.editContainer} ${d?"opacity-60 pointer-events-none":""}`,children:[u.jsx("input",{ref:s,value:i,onChange:m=>o(m.target.value),type:"text",className:`${p.input} bg-${r.alpha} ${r.type==="light"?"text-[#333]":"text-white"}`}),u.jsx(K,{type:"submit",variant:"primary",className:`${r.content_bg} rounded-full self-end mt-[15px] ${a?"":"opacity-60 pointer-events-none"}`,children:d?u.jsx(Ln,{className:"w-[20px] animate-spin"}):"Save"})]})]})}function kz(){const t=et(),{userSongs:e}=ft(),{song:n,playlist:r}=fe(Re),s=f.useRef(!0),[i,o]=f.useState(!1),[a,l]=f.useState(!1),[c,d]=f.useState([]),[h,p]=f.useState(),m=lf(),{theme:y}=ye(),{setErrorToast:v}=Ht(),{setActuallySongs:_,actuallySongs:x}=ht(),{deletePlaylist:g,loading:w,deleteManyFromPlaylist:E,deleteSongFromPlaylist:T}=la({}),{playlistSongs:S,loading:I,setPlaylistSongs:b}=IR({firstTimeRender:s,playlistInStore:r,songInStore:n}),A=(j,O)=>{const Q=`playlist_${r.id}`;(n.id!==j.id||n.song_in!==Q)&&(t(He({...j,currentIndex:O,song_in:Q})),n.song_in!==Q&&(_(S),console.log("setActuallySongs when playlist list")))},R=()=>{c.length<S.length?d(S):k()},k=()=>{d([]),o(!1)},V=()=>{const j=c.map(Q=>({...Q,song_in:`playlist_${r.id}`})),O=[...x,...j];_(O),console.log("setActuallySongs when add to song queuec")},P=()=>{const j=S[0];n.song_in.includes(m.name)||A(j,0)},D=async j=>{try{const O=await T(j,S);O&&(b(O),n.song_in===`playlist_${r.id}`&&(_(O),console.log("set actually songs")))}catch(O){console.log(O),v({message:"Error when delete song"})}},z=async()=>{try{const j=await E(c,S);j&&(b(j),n.song_in===`playlist_${r.id}`&&(_(j),console.log("set actually songs")))}catch(j){console.log(j),v({message:"Error when delete song"})}finally{o(!1),d([])}},M=async()=>{try{await g(r);const j=document.querySelector(".hd-mp3");j&&j.pause()}catch(j){console.log(j)}finally{l(!1)}},G=j=>{p(j),l(!0)},C=()=>{l(!1),o(!1),d([])},W=f.useMemo(()=>S.length,[S]),F=f.useMemo(()=>window.innerWidth<800,[window.innerWidth]),$={button:`${y.content_bg} rounded-full`,playListTop:"w-full gap-[12px] flex flex-col md:flex-row",playlistInfoContainer:"flex flex-col gap-[12px] md:justify-between",infoTop:"flex justify-center items-center gap-[8px] md:flex-col md:items-start",songListContainer:"h-[50px] w-full mb-[10px] flex gap-[8px] max-[549px]:gap-[12px] items-center border-b",countSongText:"text-[14px]] font-semibold opacity-[.6] leading-[1]",ctaContainer:"flex justify-center gap-[12px] md:justify-start",buttonAddSongContainer:"w-full text-center mt-[30px]"},H=[...Array(4).keys()].map(j=>u.jsxs("div",{className:"flex p-[10px]",children:[u.jsx(Se,{className:"h-[54px] w-[54px] ml-[28px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Se,{className:"h-[20px] mb-[5px] w-[150px]"}),u.jsx(Se,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},j));return u.jsxs("div",{className:"min-h-screen",children:[u.jsx(Qv,{}),u.jsxs("div",{className:$.playListTop,children:[u.jsx("div",{className:"w-full px-[20px] md:w-1/4 md:px-0",children:I?u.jsx(Se,{className:"pt-[100%] rounded-[8px]"}):u.jsx(Tc,{data:r,active:n.song_in===`playlist_${r.id}`,inDetail:!0,theme:y})}),u.jsxs("div",{className:$.playlistInfoContainer,children:[u.jsx("div",{className:$.infoTop,children:I?u.jsxs(u.Fragment,{children:[u.jsx(Se,{className:"h-[30px]  w-[200px]"}),u.jsx(Se,{className:"hidden md:block h-[16px] w-[60px]"}),u.jsx(Se,{className:"hidden md:block h-[16px] w-[200px]"})]}):u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-[30px] font-semibold leading-[1]",children:r.name}),!F&&u.jsx("p",{className:"text-[16px] leading-[1]",children:gi(r==null?void 0:r.time)}),u.jsxs("p",{className:"hidden md:block opacity-60 leading-[1]",children:["create by ",r.by]})]})}),u.jsxs("div",{className:`${$.ctaContainer} ${I?"opacity-60 pointer-events-none":""}`,children:[u.jsxs(K,{onClick:P,className:`rounded-full px-[20px] py-[6px] ${y.content_bg} ${!r.song_ids.length&&"opacity-60 pointer-events-none"}`,children:["Play",u.jsx($5,{className:"ml-[5px] w-[25px]"})]}),r.name&&r.by!=="admin"&&u.jsxs(u.Fragment,{children:[u.jsx(K,{onClick:()=>G("confirm"),className:`p-[8px] rounded-full ${y.content_hover_bg} bg-${y.alpha}`,children:u.jsx(df,{className:"w-[25px]"})}),u.jsx(K,{onClick:()=>G("edit"),className:`p-[8px] rounded-full ${y.content_hover_bg} bg-${y.alpha}`,children:u.jsx(xl,{className:"w-[25px]"})})]})]})]})]}),u.jsxs("div",{className:"pb-[50px] mt-[30px]",children:[u.jsxs("div",{className:`${$.songListContainer} overflow-x-auto overflow-y-hidden border-${y.alpha}`,children:[I&&u.jsx(Se,{className:"h-[16px] w-[90px]"}),i&&u.jsx("button",{onClick:R,className:"ml-[10px]",children:u.jsx(No,{className:"w-[18px]"})}),!I&&!!W&&u.jsx("p",{className:$.countSongText,children:i?c.length:W+" songs"}),i&&c.length&&u.jsxs("div",{className:"ml-[12px] flex items-center gap-[8px]",children:[u.jsxs(K,{onClick:V,variant:"outline",size:"small",className:`border-${y.alpha} flex-shrink-0 ${y.side_bar_bg}`,children:[u.jsx(uf,{className:"w-[20px] mr-[4px]"}),"Add to songs queue"]}),r.by!=="admin"&&u.jsx(K,{onClick:()=>z(),variant:"outline",size:"small",className:`border-${y.alpha} flex-shrink-0 ${y.side_bar_bg}`,children:w?u.jsx(Ln,{className:"w-[20px] animate-spin"}):"Remove"}),u.jsx(K,{onClick:k,className:"px-[5px]",children:u.jsx(er,{className:"w-[20px]"})})]})]}),I&&H,!I&&!!S.length&&u.jsx(Kv,{setIsChecked:o,setSelectedSongs:d,isChecked:i,selectedSongs:c,children:r.by==="admin"?u.jsx(zr,{songs:S,inPlaylist:r,handleSetSong:A,activeExtend:n.song_in.includes(r.id)}):u.jsx(zr,{songs:S,inPlaylist:r,handleSetSong:A,activeExtend:n.song_in.includes(r.id),deleteFromPlaylist:D,playlistSongs:S,setPlaylistSongs:b})}),r.by!=="admin"&&!!e.length&&u.jsx("div",{className:`${$.buttonAddSongContainer} ${S.length===e.length?"opacity-60 pointer-events-none":""}`,children:u.jsxs(K,{onClick:()=>G("addSongs"),className:`${y.content_bg} rounded-full`,variant:"primary",children:[u.jsx(mi,{className:"w-[30px] mr-[5px]"}),"Add song"]})})]}),a&&u.jsxs(bn,{classNames:"",theme:y,setOpenModal:C,children:[h==="edit"&&u.jsx(EC,{setIsOpenModal:l,isOpenModal:a,playlist:r}),h==="confirm"&&u.jsx(yr,{loading:w,label:"Delete playlist ?",theme:y,callback:M,setOpenModal:l}),h==="addSongs"&&u.jsx(ER,{theme:y,playlist:r,setIsOpenModal:l,setPlaylistSongs:b,playlistSongs:S})]})]})}const Pz=["mine","favorite"];function Nz(){const t=et(),{userInfo:e,setUserInfo:n}=Et(),{song:r}=fe(Re),{playStatus:{isPlaying:s}}=fe(Tn),{userPlaylists:i,setUserSongs:o,userSongs:a}=ft(),[l,c]=f.useState(!1),[d,h]=f.useState(!1),[p,m]=f.useState("addPlaylist"),[y,v]=f.useState(!1),[_,x]=f.useState([]),[g,w]=f.useState([]),[E,T]=f.useState(!1),{theme:S}=ye(),I=Zt(),{actuallySongs:b,setActuallySongs:A}=ht(),{setErrorToast:R,setSuccessToast:k}=Ht(),{tempSongs:V,addedSongIds:P,status:D}=$v(),{loading:z,errorMsg:M,initial:G}=_c({}),[C,W]=f.useState("mine"),F=f.useMemo(()=>z||!G?0:V.length+a.length,[V,a,G,z]),$=f.useMemo(()=>g.filter(pe=>e.like_song_ids.includes(pe.id)),[e.like_song_ids]),H=pe=>{m(pe),h(!0)},j=async()=>{if(!e||!e.like_song_ids.length){R({});return}try{const pe=Fs($i(_r,"songs"),Us("id","in",e.like_song_ids)),Qe=await Bs(pe);let at=!1,Je=[];if(Qe.docs.length){const ee=Qe.docs.map(ue=>({...ue.data(),song_in:"favorite"}));if(w(ee),g.length<e.like_song_ids.length){const ue=ee.map(lt=>lt.id);at=!0,Je=ue}}else e.like_song_ids&&(at=!0,Je=[]);at&&(await Ut({collection:"users",data:{like_song_ids:Je},id:e.email,msg:">>> api: update user like song ids"}),n({like_song_ids:Je}),console.log("get favorite set user info"))}catch{console.log("error")}finally{T(!1)}},O=async pe=>{W(pe),T(!0),se(),pe==="favorite"?await j():(await _l(300),T(!1))},Q=(pe,Qe)=>{r.id!==pe.id&&(t(He({...pe,currentIndex:Qe})),(r.song_in!=="favorite"||b.length!==$.length)&&(A($),console.log("setActuallySongs")))},Y=(pe,Qe)=>{console.log(">>> check songin",r.song_in),r.song_in!=="user"&&(A(a),console.log("setActuallySongs")),(r.id!==pe.id||r.song_in!=="user")&&t(He({...pe,currentIndex:Qe}))},ne=()=>{_.length<a.length?x(a):se()},se=()=>{x([]),v(!1)},ae=()=>{c(!1),h(!1)},Ae=()=>{const pe=[...b,..._];A(pe),console.log("setActuallySongs"),se(),k({message:"Songs added to queue"})},pt=async()=>{let pe=[...a];const Qe=[];try{c(!0);for(let Je of _)await Vv(Je),pe=pe.filter(ee=>ee.id!==Je.id),Qe.push(Je.id);const at=pe.map(Je=>Je.id);if(await _R({songIds:at,userInfo:e}),r.song_in==="user"){const Je=b.filter(ee=>!Qe.includes(ee.id));A(Je),console.log("setActuallySongs")}if(Qe.includes(r.id)){const Je=ji({});t(He({...Je,song_in:"",currentIndex:0}))}o(pe),k({message:`${_.length} songs deleted`})}catch(at){console.log(at),R({message:"Error when delete songs"})}finally{se(),ae()}},un={addPlaylist:u.jsx(wC,{setIsOpenModal:h,theme:S,userInfo:e}),confirm:u.jsx(yr,{loading:l,label:`Delete ${_.length} songs ?`,theme:S,callback:pt,setOpenModal:h})};f.useEffect(()=>{e.status!=="loading"&&(e.email||(I(It.Home),console.log(">>> navigate to home")))},[e.status,G]),f.useEffect(()=>{e.like_song_ids.length||C==="favorite"&&W("mine")},[e.like_song_ids]);const en={playlistItem:"w-1/4 p-[8px] max-[800px]:w-1/2"};return M?u.jsx("h1",{children:M}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px] ",children:[window.innerWidth<800&&u.jsx(Qv,{}),u.jsx("h3",{className:"text-[24px] font-bold",children:"Playlist"}),u.jsxs("div",{className:"flex flex-row flex-wrap -mx-[8px]",children:[!!i.length&&!z&&i.map((pe,Qe)=>{const at=s&&!!(r!=null&&r.song_in)&&r.song_in.includes(pe.id);return u.jsx("div",{className:en.playlistItem,children:u.jsx(Tc,{active:at,theme:S,data:pe})},Qe)}),z&&Gy,u.jsx("div",{className:`${en.playlistItem} mb-[25px]`,children:u.jsx(jT,{theme:S,className:"pt-[100%]",onClick:()=>H("addPlaylist")})})]})]}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-[24px] font-bold",children:C==="mine"?"Songs":"Favorite"}),u.jsxs("label",{className:`${S.content_bg} ${D==="uploading"||z?"opacity-60 pointer-events-none":""} items-center hover:opacity-60 rounded-full flex px-[16px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(mi,{className:"w-[20px] mr-[5px]"}),"Upload"]})]}),u.jsxs("div",{className:`flex gap-[8px] items-center h-[45px] no-scrollbar overflow-x-auto border-b border-${S.alpha}`,children:[z&&u.jsx(Se,{className:"h-[20px] w-[150px]"}),y&&u.jsx("button",{onClick:ne,className:"ml-[10px]",children:u.jsx(No,{className:"w-[18px]"})}),!z&&u.jsx("p",{className:"text-[14px] font-semibold opacity-[.6] leading-[1]",children:y?_.length:u.jsx(u.Fragment,{children:C==="mine"?u.jsx(u.Fragment,{children:(F||0)+" songs"}):g.length+" songs"})}),y&&a.length&&u.jsxs(u.Fragment,{children:[u.jsxs(K,{onClick:Ae,variant:"outline",size:"small",className:`border-${S.alpha} flex-shrink-0 ${S.side_bar_bg} ml-[12px]`,children:[u.jsx(uf,{className:"w-[20px] mr-[4px]"}),"Add to queue"]}),u.jsxs(K,{onClick:()=>H("confirm"),variant:"outline",size:"small",className:`border-${S.alpha} ${S.side_bar_bg}`,children:[u.jsx(df,{className:"w-[20px] flex-shrink-0 mr-[4px]"}),"Delete"]}),u.jsx(K,{onClick:se,className:"px-[5px] flex-shrink-0",children:u.jsx(er,{className:"w-[20px]"})})]})]}),u.jsx("div",{className:"flex items-center gap-[10px] my-[10px]",children:Pz.map((pe,Qe)=>{const at=C===pe;return u.jsx("button",{onClick:()=>O(pe),className:`text-[14px] font-[500] px-[10px]  py-[4px] rounded-[99px] ${at?S.content_bg:`${S.content_border} border`} ${!at&&!e.like_song_ids.length?"opacity-[.2] pointer-events-none":""}`,children:pe==="mine"?"My songs":"Favorite"},Qe)})}),u.jsxs("div",{className:"min-h-[50vh]",children:[(z||E)&&ff,!z&&!E&&u.jsxs(Kv,{isChecked:y,setIsChecked:v,selectedSongs:_,setSelectedSongs:x,children:[C==="mine"&&!!F&&u.jsx(zr,{handleSetSong:Y,activeExtend:r.song_in==="user"||r.song_in==="favorite",songs:a,tempSongs:V,addedSongIds:P}),C==="favorite"&&!!$.length&&u.jsx(zr,{activeExtend:r.song_in==="user"||r.song_in==="favorite",handleSetSong:Q,songs:$})]})]})]}),d&&u.jsx(bn,{theme:S,setOpenModal:h,children:un[p]})]})}function jz(){const{theme:t}=ye(),{userInfo:e}=Et(),[n,r]=f.useState(),[s,i]=f.useState({base:"",real_time:[],id:""}),o=f.useRef(null),a=f.useRef(!1),l=lf(),c=Zt(),d=async()=>{try{const h=await Ho({collection:"songs",id:l==null?void 0:l.id,msg:">>> api: get song doc"});if(!h.exists()){c("/dashboard");return}const p=h.data();if(p.lyric_id){const m=await Ho({collection:"lyrics",id:p.lyric_id});if(m.exists()){const y=m.data();i(y)}}r(p)}catch(h){console.log({message:h})}};return f.useEffect(()=>{if(e.status!=="loading"){if(!e.email){c(It.Home);return}a.current||(a.current=!0,d())}},[]),u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsx("audio",{ref:o,src:n&&n.song_url,className:"hidden"}),n&&u.jsx(u.Fragment,{children:u.jsx(mC,{admin:!0,lyric:s,audioRef:o,theme:t,song:n})})]})}function Oz(){const{theme:t}=ye(),{setErrorToast:e}=Ht(),{userSongs:n,adminSongs:r}=ft(),{song:s,playlist:i}=fe(Re),o=f.useRef(!0),[a,l]=f.useState(!1),[c,d]=f.useState(),[h,p]=f.useState([]),[m,y]=f.useState(!1),{deletePlaylist:v,loading:_,deleteManyFromPlaylist:x}=la({admin:!0}),{playlistSongs:g,loading:w,setPlaylistSongs:E}=IR({firstTimeRender:o,playlistInStore:i,songInStore:s,admin:!0}),T=async()=>{try{await x(h,g)}catch(V){console.log(V),e({message:"Error when delete song"})}finally{l(!1)}},S=async()=>{try{await v(i)}catch(V){console.log(V)}finally{l(!1)}},I=V=>{d(V),l(!0)},b=()=>{l(!1),y(!1),p([])},A=f.useMemo(()=>g.length,[g]),R={addSongContainer:"pb-[50px] relative",addSongContent:"max-h-[calc(90vh-50px)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full ",editContainer:"w-[400px] max-w-[90vw] max-h-[90vh]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full",button:`${t.content_bg} rounded-full`,playListTop:"w-full flex",playlistInfoContainer:"flex flex-col gap-[12px] justify-between ml-[12px]",songListContainer:"h-[50px] mb-[10px] flex gap-[20px] ] items-center border-b",countSongText:"text-[14px]] font-semibold text-gray-500 w-[100px]",ctaContainer:"flex justify-center gap-[12px] md:justify-start",buttonAddSongContainer:"w-full text-center mt-[30px]"},k=u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"w-1/4 ",children:u.jsx(Se,{className:"pt-[100%] rounded-[8px]"})}),u.jsxs("div",{className:"min-[550px]:ml-[15px]  justify-between",children:[u.jsx(Se,{className:"h-[30px]  w-[100px]"}),u.jsx(Se,{className:"h-[20px] mt-[9px] w-[50px]"}),u.jsx(Se,{className:"h-[20px] mt-[9px] w-[100px]"})]})]});return u.jsxs("div",{className:"playlist-page min-  h-[100vh]",children:[u.jsx(Qv,{}),w&&k,!w&&!!i.name&&u.jsxs("div",{className:R.playListTop,children:[u.jsx("div",{className:"w-1/4",children:u.jsx(Tc,{data:i,inDetail:!0,theme:t})}),u.jsxs("div",{className:R.playlistInfoContainer,children:[u.jsxs("div",{className:"",children:[u.jsxs("h3",{className:"text-[20px] font-semibold leading-1",children:[i.name,u.jsx("button",{onClick:()=>I("edit"),className:"p-[5px]",children:u.jsx(xl,{className:"w-[20px]"})})]}),u.jsx("p",{className:"text-[16px]",children:gi(i==null?void 0:i.time)}),u.jsxs("p",{className:"text-[14px] opacity-60",children:["create by ",i.by]})]}),u.jsxs("div",{className:`${R.ctaContainer} ${w?"opacity-60 pointer-events-none":""}`,children:[u.jsx(K,{onClick:()=>I("confirm"),className:`p-[8px] rounded-full ${t.content_hover_bg} bg-${t.alpha}`,children:u.jsx(df,{className:"w-[25px]"})}),u.jsx(K,{onClick:()=>I("edit"),className:`p-[8px] rounded-full ${t.content_hover_bg} bg-${t.alpha}`,children:u.jsx(xl,{className:"w-[25px]"})})]})]})]}),u.jsxs("div",{className:"pb-[50px]",children:[u.jsxs("div",{className:`${R.songListContainer} border-${t.alpha}`,children:[w&&u.jsx(Se,{className:"h-[20px] w-[80px]"}),!w&&u.jsx(u.Fragment,{children:m?u.jsx("p",{className:R.countSongText,children:h.length+" selected"}):u.jsx("p",{className:R.countSongText,children:A+" songs"})}),m&&g.length&&u.jsxs(u.Fragment,{children:[u.jsx(K,{onClick:()=>p(g),variant:"primary",className:R.button,children:"All"}),u.jsx(K,{onClick:()=>T(),variant:"primary",className:R.button,children:"Remove"}),u.jsx(K,{onClick:()=>{y(!1),p([])},className:"p-[5px]",children:u.jsx(er,{className:"w-[20px]"})})]})]}),w&&ff,!w&&!!g.length&&u.jsx(zr,{inAdmin:!0,inPlaylist:i,songs:g,handleSetSong:()=>{},activeExtend:s.song_in.includes(i.name)}),(!!n.length||!!r.length)&&u.jsx("div",{className:R.buttonAddSongContainer,children:u.jsxs(K,{onClick:()=>I("addSongs"),className:`${t.content_bg} rounded-full`,variant:"primary",children:[u.jsx(mi,{className:"w-[30px] mr-[5px]"}),"Add song"]})})]}),a&&u.jsxs(bn,{classNames:"",theme:t,setOpenModal:b,children:[c==="edit"&&u.jsx(EC,{isOpenModal:a,setIsOpenModal:l,playlist:i}),c==="confirm"&&u.jsx(yr,{loading:_,label:"Delete playlist ?",theme:t,callback:S,setOpenModal:l}),c==="addSongs"&&u.jsx(ER,{admin:!0,theme:t,setIsOpenModal:l,setPlaylistSongs:E,playlist:i,playlistSongs:g})]})]})}function Lz(){const{theme:t}=ye();return u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.container} ${t.type==="dark"?"text-white":"text-black"}`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Page Not found"}),u.jsx(vs,{to:"/",className:`${t.content_bg} font-bold  text-[#fff] mt-[20px] rounded-full flex px-[20px] py-[4px] cursor-pointer`,children:"Go home"})," "]})}function Dz(){const{theme:t}=ye(),e=Zt(),n=async()=>{await MA(gr),e("/login")};return u.jsxs("div",{className:`${t.container} flex flex-col justify-center items-center min-h-screen`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Unauthorized"}),u.jsx(K,{onClick:n,variant:"primary",size:"normal",className:`${t.content_bg} font-bold text-[20px]  text-[#fff] rounded-full mt-[20px]`,children:"Exit"})]})}function Mz(){var a,l;const[t]=Vi(gr),{logIn:e}=_h(),{theme:n}=ye(),r=Zt(),s=En(),i=((l=(a=s==null?void 0:s.state)==null?void 0:a.from)==null?void 0:l.pathname)||"/dashboard",o=async()=>{try{await e()}catch(c){console.log(c)}};return f.useEffect(()=>{if(t!=null&&t.email){r(i,{replace:!0});return}console.log("run effect")},[t]),u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${n.container} ${n.type==="dark"?"text-white":"text-black"}`,children:[u.jsx(K,{onClick:o,variant:"default",size:"normal",className:`${n.content_bg} font-bold text-[#fff] text-[30px] rounded-full`,children:"Login with google"})," "]})}const It={Home:"/",Dashboard:"/dashboard",DashboardPlaylist:"/dashboard/playlist/:id",DashboardEdit:"/dashboard/edit/:id",MySongs:"/mysongs",Favorite:"/favorite",Playlist:"/playlist/:id",Edit:"/mysongs/edit/:id"},$z=[{path:It.Home,component:Az,layout:""},{path:It.MySongs,component:Nz,layout:""},{path:It.Playlist,component:kz,layout:""},{path:It.Edit,component:Rz,layout:""}],Vz=[{path:It.Dashboard,component:Cz,layout:Wp},{path:It.DashboardPlaylist,component:Oz,layout:Wp},{path:It.DashboardEdit,component:jz,layout:Wp}];function Fz(){const t={container:"my-[30px] h-[45px] justify-end max-[800px]:justify-center  text-right flex items-center",icon:"w-[20px] scale-[1] hover:scale-[1.1] transition linear ",copyRightText:"text-[11px] italic"};return u.jsxs("div",{className:`${t.container}`,children:[u.jsx("p",{className:t.copyRightText,children:"Nguyen Huu Dat © - 2023"}),u.jsxs("div",{className:"flex ml-[30px] gap-[10px]",children:[u.jsx("a",{href:"https://facebook.com/DAtdz06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"})})}),u.jsx("a",{href:"https://www.linkedin.com/in/dat-nguyen-9371a926a",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"})})}),u.jsx("a",{href:"https://github.com/d4t06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 496 512",fill:"currentColor",children:u.jsx("path",{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})})})]})]})}const Q_=({children:t})=>{const{theme:e}=ye(),n=En(),r=f.useMemo(()=>n.pathname.includes("edit"),[n]),s=f.useRef(null),i={container:` main-container overflow-auto no-scrollbar main-content w-full ${r?"":"min-h-[100vh] pb-[90px]"} max-[549px]:h-full `,content:"px-[40px] max-[549px]:px-[15px] mt-[60px]",page:`flex h-[100vh] overflow-hidden ${e.type==="dark"?"text-white":"text-[#333]"} ${e.container}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:i.page,children:[window.innerWidth>=800&&u.jsx(az,{}),u.jsxs("div",{ref:s,className:i.container,children:[window.innerWidth>=800&&u.jsx(lz,{contentRef:s}),u.jsxs("div",{className:i.content,children:[t,u.jsx(Fz,{})]})]}),u.jsx(yC,{})]}),u.jsx(_C,{})]})},Uz="/HD-MP3/assets/loading-b1210647.gif";function Bz(){const{userInfo:t}=Et(),[e,n]=f.useState(!0),r=f.useRef(!1),{theme:s}=ye(),i=Zt();return f.useEffect(()=>{if(t.status==="loading"){n(!0);return}const o=async()=>{n(!0);try{(await Ho({collection:"users",id:t==null?void 0:t.email,msg:">>> api: get auth info"})).data().role!=="admin"&&i("/unauthorized"),n(!1);return}catch(a){console.log(a)}};if(!r.current)if(r.current=!0,t.email)o();else{n(!1);return}},[t.status]),e?u.jsx("div",{className:`min-h-screen flex flex-col items-center justify-center ${s.container}`,children:u.jsx("img",{className:"w-[100px]",src:Uz,alt:""})}):t!=null&&t.email?u.jsx(UN,{}):u.jsx(FN,{replace:!0,to:"/login"})}function zz(){return u.jsxs(u.Fragment,{children:[u.jsx(QN,{basename:"HD-MP3",children:u.jsxs(zN,{children:[u.jsx(Ks,{path:"/login",element:u.jsx(Mz,{})}),u.jsx(Ks,{path:"/unauthorized",element:u.jsx(Dz,{})}),u.jsx(Ks,{path:"*",element:u.jsx(Lz,{})}),$z.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=Q_,u.jsx(Ks,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)}),u.jsx(Ks,{element:u.jsx(Bz,{}),children:Vz.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=Q_,u.jsx(Ks,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)})})]})}),u.jsx(wz,{autoClose:!0})]})}const Wz=BL({reducer:{song:YL,playStatus:aB}});Hp.createRoot(document.getElementById("root")).render(u.jsx(iE.StrictMode,{children:u.jsx(J8,{children:u.jsx(p4,{theme:IT,children:u.jsx(N4,{songsStore:Qy,children:u.jsx(F3,{store:Wz,children:u.jsx(Z8,{children:u.jsx(H3,{children:u.jsx(nB,{children:u.jsx(RB,{children:u.jsx(zz,{})})})})})})})})})}));
