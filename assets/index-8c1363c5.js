function LC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function DC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sx={exports:{}},Id={},Tx={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var El=Symbol.for("react.element"),MC=Symbol.for("react.portal"),$C=Symbol.for("react.fragment"),VC=Symbol.for("react.strict_mode"),FC=Symbol.for("react.profiler"),UC=Symbol.for("react.provider"),BC=Symbol.for("react.context"),zC=Symbol.for("react.forward_ref"),WC=Symbol.for("react.suspense"),HC=Symbol.for("react.memo"),qC=Symbol.for("react.lazy"),bv=Symbol.iterator;function KC(t){return t===null||typeof t!="object"?null:(t=bv&&t[bv]||t["@@iterator"],typeof t=="function"?t:null)}var Ix={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rx=Object.assign,bx={};function Io(t,e,n){this.props=t,this.context=e,this.refs=bx,this.updater=n||Ix}Io.prototype.isReactComponent={};Io.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Io.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ax(){}Ax.prototype=Io.prototype;function Ig(t,e,n){this.props=t,this.context=e,this.refs=bx,this.updater=n||Ix}var Rg=Ig.prototype=new Ax;Rg.constructor=Ig;Rx(Rg,Io.prototype);Rg.isPureReactComponent=!0;var Av=Array.isArray,Cx=Object.prototype.hasOwnProperty,bg={current:null},kx={key:!0,ref:!0,__self:!0,__source:!0};function Px(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Cx.call(e,r)&&!kx.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:El,type:t,key:i,ref:o,props:s,_owner:bg.current}}function GC(t,e){return{$$typeof:El,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ag(t){return typeof t=="object"&&t!==null&&t.$$typeof===El}function QC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Cv=/\/+/g;function dh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?QC(""+t.key):e.toString(36)}function Fc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case El:case MC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+dh(o,0):r,Av(s)?(n="",t!=null&&(n=t.replace(Cv,"$&/")+"/"),Fc(s,e,n,"",function(c){return c})):s!=null&&(Ag(s)&&(s=GC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Cv,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Av(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+dh(i,a);o+=Fc(i,e,n,l,s)}else if(l=KC(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+dh(i,a++),o+=Fc(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function lc(t,e,n){if(t==null)return t;var r=[],s=0;return Fc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function YC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var zt={current:null},Uc={transition:null},JC={ReactCurrentDispatcher:zt,ReactCurrentBatchConfig:Uc,ReactCurrentOwner:bg};ye.Children={map:lc,forEach:function(t,e,n){lc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return lc(t,function(){e++}),e},toArray:function(t){return lc(t,function(e){return e})||[]},only:function(t){if(!Ag(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=Io;ye.Fragment=$C;ye.Profiler=FC;ye.PureComponent=Ig;ye.StrictMode=VC;ye.Suspense=WC;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JC;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Rx({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=bg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Cx.call(e,l)&&!kx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:El,type:t.type,key:s,ref:i,props:r,_owner:o}};ye.createContext=function(t){return t={$$typeof:BC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:UC,_context:t},t.Consumer=t};ye.createElement=Px;ye.createFactory=function(t){var e=Px.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:zC,render:t}};ye.isValidElement=Ag;ye.lazy=function(t){return{$$typeof:qC,_payload:{_status:-1,_result:t},_init:YC}};ye.memo=function(t,e){return{$$typeof:HC,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=Uc.transition;Uc.transition={};try{t()}finally{Uc.transition=e}};ye.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ye.useCallback=function(t,e){return zt.current.useCallback(t,e)};ye.useContext=function(t){return zt.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return zt.current.useDeferredValue(t)};ye.useEffect=function(t,e){return zt.current.useEffect(t,e)};ye.useId=function(){return zt.current.useId()};ye.useImperativeHandle=function(t,e,n){return zt.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return zt.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return zt.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return zt.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return zt.current.useReducer(t,e,n)};ye.useRef=function(t){return zt.current.useRef(t)};ye.useState=function(t){return zt.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return zt.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return zt.current.useTransition()};ye.version="18.2.0";Tx.exports=ye;var h=Tx.exports;const Nx=DC(h),Cg=LC({__proto__:null,default:Nx},[h]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XC=h,ZC=Symbol.for("react.element"),e2=Symbol.for("react.fragment"),t2=Object.prototype.hasOwnProperty,n2=XC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r2={key:!0,ref:!0,__self:!0,__source:!0};function Ox(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)t2.call(e,r)&&!r2.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:ZC,type:t,key:i,ref:o,props:s,_owner:n2.current}}Id.Fragment=e2;Id.jsx=Ox;Id.jsxs=Ox;Sx.exports=Id;var d=Sx.exports;var Cp={},jx={exports:{}},un={},Lx={exports:{}},Dx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,F){var B=k.length;k.push(F);e:for(;0<B;){var M=B-1>>>1,j=k[M];if(0<s(j,F))k[M]=F,k[B]=j,B=M;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var F=k[0],B=k.pop();if(B!==F){k[0]=B;e:for(var M=0,j=k.length,P=j>>>1;M<P;){var W=2*(M+1)-1,J=k[W],se=W+1,ae=k[se];if(0>s(J,B))se<j&&0>s(ae,J)?(k[M]=ae,k[se]=B,M=se):(k[M]=J,k[W]=B,M=W);else if(se<j&&0>s(ae,B))k[M]=ae,k[se]=B,M=se;else break e}}return F}function s(k,F){var B=k.sortIndex-F.sortIndex;return B!==0?B:k.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,y=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(k){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=k)r(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function E(k){if(w=!1,_(k),!y)if(n(l)!==null)y=!0,z(S);else{var F=n(c);F!==null&&ee(E,F.startTime-k)}}function S(k,F){y=!1,w&&(w=!1,v(R),R=-1),m=!0;var B=p;try{for(_(F),f=n(l);f!==null&&(!(f.expirationTime>F)||k&&!A());){var M=f.callback;if(typeof M=="function"){f.callback=null,p=f.priorityLevel;var j=M(f.expirationTime<=F);F=t.unstable_now(),typeof j=="function"?f.callback=j:f===n(l)&&r(l),_(F)}else r(l);f=n(l)}if(f!==null)var P=!0;else{var W=n(c);W!==null&&ee(E,W.startTime-F),P=!1}return P}finally{f=null,p=B,m=!1}}var T=!1,I=null,R=-1,C=5,b=-1;function A(){return!(t.unstable_now()-b<C)}function D(){if(I!==null){var k=t.unstable_now();b=k;var F=!0;try{F=I(!0,k)}finally{F?L():(T=!1,I=null)}}else T=!1}var L;if(typeof g=="function")L=function(){g(D)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Y=U.port2;U.port1.onmessage=D,L=function(){Y.postMessage(null)}}else L=function(){x(D,0)};function z(k){I=k,T||(T=!0,L())}function ee(k,F){R=x(function(){k(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,z(S))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(k){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var B=p;p=F;try{return k()}finally{p=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,F){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var B=p;p=k;try{return F()}finally{p=B}},t.unstable_scheduleCallback=function(k,F,B){var M=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?M+B:M):B=M,k){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=B+j,k={id:u++,callback:F,priorityLevel:k,startTime:B,expirationTime:j,sortIndex:-1},B>M?(k.sortIndex=B,e(c,k),n(l)===null&&k===n(c)&&(w?(v(R),R=-1):w=!0,ee(E,B-M))):(k.sortIndex=j,e(l,k),y||m||(y=!0,z(S))),k},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(k){var F=p;return function(){var B=p;p=F;try{return k.apply(this,arguments)}finally{p=B}}}})(Dx);Lx.exports=Dx;var s2=Lx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mx=h,on=s2;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $x=new Set,ka={};function pi(t,e){so(t,e),so(t+"Capture",e)}function so(t,e){for(ka[t]=e,t=0;t<e.length;t++)$x.add(e[t])}var xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kp=Object.prototype.hasOwnProperty,i2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kv={},Pv={};function o2(t){return kp.call(Pv,t)?!0:kp.call(kv,t)?!1:i2.test(t)?Pv[t]=!0:(kv[t]=!0,!1)}function a2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function l2(t,e,n,r){if(e===null||typeof e>"u"||a2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Wt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var St={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){St[t]=new Wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];St[e]=new Wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){St[t]=new Wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){St[t]=new Wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){St[t]=new Wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){St[t]=new Wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){St[t]=new Wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){St[t]=new Wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){St[t]=new Wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var kg=/[\-:]([a-z])/g;function Pg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(kg,Pg);St[e]=new Wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(kg,Pg);St[e]=new Wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(kg,Pg);St[e]=new Wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){St[t]=new Wt(t,1,!1,t.toLowerCase(),null,!1,!1)});St.xlinkHref=new Wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){St[t]=new Wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ng(t,e,n,r){var s=St.hasOwnProperty(e)?St[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(l2(e,n,s,r)&&(n=null),r||s===null?o2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Nr=Mx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cc=Symbol.for("react.element"),bi=Symbol.for("react.portal"),Ai=Symbol.for("react.fragment"),Og=Symbol.for("react.strict_mode"),Pp=Symbol.for("react.profiler"),Vx=Symbol.for("react.provider"),Fx=Symbol.for("react.context"),jg=Symbol.for("react.forward_ref"),Np=Symbol.for("react.suspense"),Op=Symbol.for("react.suspense_list"),Lg=Symbol.for("react.memo"),Vr=Symbol.for("react.lazy"),Ux=Symbol.for("react.offscreen"),Nv=Symbol.iterator;function Fo(t){return t===null||typeof t!="object"?null:(t=Nv&&t[Nv]||t["@@iterator"],typeof t=="function"?t:null)}var ze=Object.assign,fh;function Xo(t){if(fh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fh=e&&e[1]||""}return`
`+fh+t}var hh=!1;function ph(t,e){if(!t||hh)return"";hh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{hh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Xo(t):""}function c2(t){switch(t.tag){case 5:return Xo(t.type);case 16:return Xo("Lazy");case 13:return Xo("Suspense");case 19:return Xo("SuspenseList");case 0:case 2:case 15:return t=ph(t.type,!1),t;case 11:return t=ph(t.type.render,!1),t;case 1:return t=ph(t.type,!0),t;default:return""}}function jp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ai:return"Fragment";case bi:return"Portal";case Pp:return"Profiler";case Og:return"StrictMode";case Np:return"Suspense";case Op:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Fx:return(t.displayName||"Context")+".Consumer";case Vx:return(t._context.displayName||"Context")+".Provider";case jg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Lg:return e=t.displayName||null,e!==null?e:jp(t.type)||"Memo";case Vr:e=t._payload,t=t._init;try{return jp(t(e))}catch{}}return null}function u2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jp(e);case 8:return e===Og?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ps(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Bx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function d2(t){var e=Bx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function uc(t){t._valueTracker||(t._valueTracker=d2(t))}function zx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Bx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function fu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Lp(t,e){var n=e.checked;return ze({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ov(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ps(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Wx(t,e){e=e.checked,e!=null&&Ng(t,"checked",e,!1)}function Dp(t,e){Wx(t,e);var n=ps(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Mp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Mp(t,e.type,ps(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function jv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Mp(t,e,n){(e!=="number"||fu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Zo=Array.isArray;function Wi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ps(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function $p(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return ze({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Lv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Zo(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ps(n)}}function Hx(t,e){var n=ps(e.value),r=ps(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Dv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var dc,Kx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(dc=dc||document.createElement("div"),dc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=dc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ca={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},f2=["Webkit","ms","Moz","O"];Object.keys(ca).forEach(function(t){f2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ca[e]=ca[t]})});function Gx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ca.hasOwnProperty(t)&&ca[t]?(""+e).trim():e+"px"}function Qx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Gx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var h2=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fp(t,e){if(e){if(h2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Up(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bp=null;function Dg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zp=null,Hi=null,qi=null;function Mv(t){if(t=Il(t)){if(typeof zp!="function")throw Error($(280));var e=t.stateNode;e&&(e=kd(e),zp(t.stateNode,t.type,e))}}function Yx(t){Hi?qi?qi.push(t):qi=[t]:Hi=t}function Jx(){if(Hi){var t=Hi,e=qi;if(qi=Hi=null,Mv(t),e)for(t=0;t<e.length;t++)Mv(e[t])}}function Xx(t,e){return t(e)}function Zx(){}var mh=!1;function eE(t,e,n){if(mh)return t(e,n);mh=!0;try{return Xx(t,e,n)}finally{mh=!1,(Hi!==null||qi!==null)&&(Zx(),Jx())}}function Na(t,e){var n=t.stateNode;if(n===null)return null;var r=kd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Wp=!1;if(xr)try{var Uo={};Object.defineProperty(Uo,"passive",{get:function(){Wp=!0}}),window.addEventListener("test",Uo,Uo),window.removeEventListener("test",Uo,Uo)}catch{Wp=!1}function p2(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var ua=!1,hu=null,pu=!1,Hp=null,m2={onError:function(t){ua=!0,hu=t}};function g2(t,e,n,r,s,i,o,a,l){ua=!1,hu=null,p2.apply(m2,arguments)}function y2(t,e,n,r,s,i,o,a,l){if(g2.apply(this,arguments),ua){if(ua){var c=hu;ua=!1,hu=null}else throw Error($(198));pu||(pu=!0,Hp=c)}}function mi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function tE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $v(t){if(mi(t)!==t)throw Error($(188))}function v2(t){var e=t.alternate;if(!e){if(e=mi(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return $v(s),t;if(i===r)return $v(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function nE(t){return t=v2(t),t!==null?rE(t):null}function rE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rE(t);if(e!==null)return e;t=t.sibling}return null}var sE=on.unstable_scheduleCallback,Vv=on.unstable_cancelCallback,w2=on.unstable_shouldYield,_2=on.unstable_requestPaint,Qe=on.unstable_now,x2=on.unstable_getCurrentPriorityLevel,Mg=on.unstable_ImmediatePriority,iE=on.unstable_UserBlockingPriority,mu=on.unstable_NormalPriority,E2=on.unstable_LowPriority,oE=on.unstable_IdlePriority,Rd=null,Yn=null;function S2(t){if(Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(Rd,t,void 0,(t.current.flags&128)===128)}catch{}}var On=Math.clz32?Math.clz32:R2,T2=Math.log,I2=Math.LN2;function R2(t){return t>>>=0,t===0?32:31-(T2(t)/I2|0)|0}var fc=64,hc=4194304;function ea(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ea(a):(i&=o,i!==0&&(r=ea(i)))}else o=n&~s,o!==0?r=ea(o):i!==0&&(r=ea(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-On(e),s=1<<n,r|=t[n],e&=~s;return r}function b2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function A2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-On(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=b2(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function qp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function aE(){var t=fc;return fc<<=1,!(fc&4194240)&&(fc=64),t}function gh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Sl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-On(e),t[e]=n}function C2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-On(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function $g(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-On(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Se=0;function lE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var cE,Vg,uE,dE,fE,Kp=!1,pc=[],es=null,ts=null,ns=null,Oa=new Map,ja=new Map,Ur=[],k2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fv(t,e){switch(t){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":ts=null;break;case"mouseover":case"mouseout":ns=null;break;case"pointerover":case"pointerout":Oa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ja.delete(e.pointerId)}}function Bo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Il(e),e!==null&&Vg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function P2(t,e,n,r,s){switch(e){case"focusin":return es=Bo(es,t,e,n,r,s),!0;case"dragenter":return ts=Bo(ts,t,e,n,r,s),!0;case"mouseover":return ns=Bo(ns,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Oa.set(i,Bo(Oa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ja.set(i,Bo(ja.get(i)||null,t,e,n,r,s)),!0}return!1}function hE(t){var e=$s(t.target);if(e!==null){var n=mi(e);if(n!==null){if(e=n.tag,e===13){if(e=tE(n),e!==null){t.blockedOn=e,fE(t.priority,function(){uE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Bp=r,n.target.dispatchEvent(r),Bp=null}else return e=Il(n),e!==null&&Vg(e),t.blockedOn=n,!1;e.shift()}return!0}function Uv(t,e,n){Bc(t)&&n.delete(e)}function N2(){Kp=!1,es!==null&&Bc(es)&&(es=null),ts!==null&&Bc(ts)&&(ts=null),ns!==null&&Bc(ns)&&(ns=null),Oa.forEach(Uv),ja.forEach(Uv)}function zo(t,e){t.blockedOn===e&&(t.blockedOn=null,Kp||(Kp=!0,on.unstable_scheduleCallback(on.unstable_NormalPriority,N2)))}function La(t){function e(s){return zo(s,t)}if(0<pc.length){zo(pc[0],t);for(var n=1;n<pc.length;n++){var r=pc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(es!==null&&zo(es,t),ts!==null&&zo(ts,t),ns!==null&&zo(ns,t),Oa.forEach(e),ja.forEach(e),n=0;n<Ur.length;n++)r=Ur[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ur.length&&(n=Ur[0],n.blockedOn===null);)hE(n),n.blockedOn===null&&Ur.shift()}var Ki=Nr.ReactCurrentBatchConfig,yu=!0;function O2(t,e,n,r){var s=Se,i=Ki.transition;Ki.transition=null;try{Se=1,Fg(t,e,n,r)}finally{Se=s,Ki.transition=i}}function j2(t,e,n,r){var s=Se,i=Ki.transition;Ki.transition=null;try{Se=4,Fg(t,e,n,r)}finally{Se=s,Ki.transition=i}}function Fg(t,e,n,r){if(yu){var s=Gp(t,e,n,r);if(s===null)Rh(t,e,r,vu,n),Fv(t,r);else if(P2(s,t,e,n,r))r.stopPropagation();else if(Fv(t,r),e&4&&-1<k2.indexOf(t)){for(;s!==null;){var i=Il(s);if(i!==null&&cE(i),i=Gp(t,e,n,r),i===null&&Rh(t,e,r,vu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Rh(t,e,r,null,n)}}var vu=null;function Gp(t,e,n,r){if(vu=null,t=Dg(r),t=$s(t),t!==null)if(e=mi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=tE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vu=t,null}function pE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(x2()){case Mg:return 1;case iE:return 4;case mu:case E2:return 16;case oE:return 536870912;default:return 16}default:return 16}}var Gr=null,Ug=null,zc=null;function mE(){if(zc)return zc;var t,e=Ug,n=e.length,r,s="value"in Gr?Gr.value:Gr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return zc=s.slice(t,1<r?1-r:void 0)}function Wc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function mc(){return!0}function Bv(){return!1}function dn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?mc:Bv,this.isPropagationStopped=Bv,this}return ze(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=mc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=mc)},persist:function(){},isPersistent:mc}),e}var Ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bg=dn(Ro),Tl=ze({},Ro,{view:0,detail:0}),L2=dn(Tl),yh,vh,Wo,bd=ze({},Tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wo&&(Wo&&t.type==="mousemove"?(yh=t.screenX-Wo.screenX,vh=t.screenY-Wo.screenY):vh=yh=0,Wo=t),yh)},movementY:function(t){return"movementY"in t?t.movementY:vh}}),zv=dn(bd),D2=ze({},bd,{dataTransfer:0}),M2=dn(D2),$2=ze({},Tl,{relatedTarget:0}),wh=dn($2),V2=ze({},Ro,{animationName:0,elapsedTime:0,pseudoElement:0}),F2=dn(V2),U2=ze({},Ro,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),B2=dn(U2),z2=ze({},Ro,{data:0}),Wv=dn(z2),W2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function K2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=q2[t])?!!e[t]:!1}function zg(){return K2}var G2=ze({},Tl,{key:function(t){if(t.key){var e=W2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Wc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?H2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zg,charCode:function(t){return t.type==="keypress"?Wc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Q2=dn(G2),Y2=ze({},bd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hv=dn(Y2),J2=ze({},Tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zg}),X2=dn(J2),Z2=ze({},Ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),ek=dn(Z2),tk=ze({},bd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nk=dn(tk),rk=[9,13,27,32],Wg=xr&&"CompositionEvent"in window,da=null;xr&&"documentMode"in document&&(da=document.documentMode);var sk=xr&&"TextEvent"in window&&!da,gE=xr&&(!Wg||da&&8<da&&11>=da),qv=String.fromCharCode(32),Kv=!1;function yE(t,e){switch(t){case"keyup":return rk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ci=!1;function ik(t,e){switch(t){case"compositionend":return vE(e);case"keypress":return e.which!==32?null:(Kv=!0,qv);case"textInput":return t=e.data,t===qv&&Kv?null:t;default:return null}}function ok(t,e){if(Ci)return t==="compositionend"||!Wg&&yE(t,e)?(t=mE(),zc=Ug=Gr=null,Ci=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gE&&e.locale!=="ko"?null:e.data;default:return null}}var ak={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ak[t.type]:e==="textarea"}function wE(t,e,n,r){Yx(r),e=wu(e,"onChange"),0<e.length&&(n=new Bg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var fa=null,Da=null;function lk(t){kE(t,0)}function Ad(t){var e=Ni(t);if(zx(e))return t}function ck(t,e){if(t==="change")return e}var _E=!1;if(xr){var _h;if(xr){var xh="oninput"in document;if(!xh){var Qv=document.createElement("div");Qv.setAttribute("oninput","return;"),xh=typeof Qv.oninput=="function"}_h=xh}else _h=!1;_E=_h&&(!document.documentMode||9<document.documentMode)}function Yv(){fa&&(fa.detachEvent("onpropertychange",xE),Da=fa=null)}function xE(t){if(t.propertyName==="value"&&Ad(Da)){var e=[];wE(e,Da,t,Dg(t)),eE(lk,e)}}function uk(t,e,n){t==="focusin"?(Yv(),fa=e,Da=n,fa.attachEvent("onpropertychange",xE)):t==="focusout"&&Yv()}function dk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ad(Da)}function fk(t,e){if(t==="click")return Ad(e)}function hk(t,e){if(t==="input"||t==="change")return Ad(e)}function pk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ln=typeof Object.is=="function"?Object.is:pk;function Ma(t,e){if(Ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!kp.call(e,s)||!Ln(t[s],e[s]))return!1}return!0}function Jv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xv(t,e){var n=Jv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jv(n)}}function EE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?EE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function SE(){for(var t=window,e=fu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=fu(t.document)}return e}function Hg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mk(t){var e=SE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&EE(n.ownerDocument.documentElement,n)){if(r!==null&&Hg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Xv(n,i);var o=Xv(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gk=xr&&"documentMode"in document&&11>=document.documentMode,ki=null,Qp=null,ha=null,Yp=!1;function Zv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yp||ki==null||ki!==fu(r)||(r=ki,"selectionStart"in r&&Hg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ha&&Ma(ha,r)||(ha=r,r=wu(Qp,"onSelect"),0<r.length&&(e=new Bg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ki)))}function gc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Pi={animationend:gc("Animation","AnimationEnd"),animationiteration:gc("Animation","AnimationIteration"),animationstart:gc("Animation","AnimationStart"),transitionend:gc("Transition","TransitionEnd")},Eh={},TE={};xr&&(TE=document.createElement("div").style,"AnimationEvent"in window||(delete Pi.animationend.animation,delete Pi.animationiteration.animation,delete Pi.animationstart.animation),"TransitionEvent"in window||delete Pi.transitionend.transition);function Cd(t){if(Eh[t])return Eh[t];if(!Pi[t])return t;var e=Pi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in TE)return Eh[t]=e[n];return t}var IE=Cd("animationend"),RE=Cd("animationiteration"),bE=Cd("animationstart"),AE=Cd("transitionend"),CE=new Map,ew="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Is(t,e){CE.set(t,e),pi(e,[t])}for(var Sh=0;Sh<ew.length;Sh++){var Th=ew[Sh],yk=Th.toLowerCase(),vk=Th[0].toUpperCase()+Th.slice(1);Is(yk,"on"+vk)}Is(IE,"onAnimationEnd");Is(RE,"onAnimationIteration");Is(bE,"onAnimationStart");Is("dblclick","onDoubleClick");Is("focusin","onFocus");Is("focusout","onBlur");Is(AE,"onTransitionEnd");so("onMouseEnter",["mouseout","mouseover"]);so("onMouseLeave",["mouseout","mouseover"]);so("onPointerEnter",["pointerout","pointerover"]);so("onPointerLeave",["pointerout","pointerover"]);pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pi("onBeforeInput",["compositionend","keypress","textInput","paste"]);pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wk=new Set("cancel close invalid load scroll toggle".split(" ").concat(ta));function tw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,y2(r,e,void 0,t),t.currentTarget=null}function kE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;tw(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;tw(s,a,c),i=l}}}if(pu)throw t=Hp,pu=!1,Hp=null,t}function Pe(t,e){var n=e[tm];n===void 0&&(n=e[tm]=new Set);var r=t+"__bubble";n.has(r)||(PE(e,t,2,!1),n.add(r))}function Ih(t,e,n){var r=0;e&&(r|=4),PE(n,t,r,e)}var yc="_reactListening"+Math.random().toString(36).slice(2);function $a(t){if(!t[yc]){t[yc]=!0,$x.forEach(function(n){n!=="selectionchange"&&(wk.has(n)||Ih(n,!1,t),Ih(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[yc]||(e[yc]=!0,Ih("selectionchange",!1,e))}}function PE(t,e,n,r){switch(pE(e)){case 1:var s=O2;break;case 4:s=j2;break;default:s=Fg}n=s.bind(null,e,n,t),s=void 0,!Wp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Rh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=$s(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}eE(function(){var c=i,u=Dg(n),f=[];e:{var p=CE.get(t);if(p!==void 0){var m=Bg,y=t;switch(t){case"keypress":if(Wc(n)===0)break e;case"keydown":case"keyup":m=Q2;break;case"focusin":y="focus",m=wh;break;case"focusout":y="blur",m=wh;break;case"beforeblur":case"afterblur":m=wh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=zv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=M2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=X2;break;case IE:case RE:case bE:m=F2;break;case AE:m=ek;break;case"scroll":m=L2;break;case"wheel":m=nk;break;case"copy":case"cut":case"paste":m=B2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Hv}var w=(e&4)!==0,x=!w&&t==="scroll",v=w?p!==null?p+"Capture":null:p;w=[];for(var g=c,_;g!==null;){_=g;var E=_.stateNode;if(_.tag===5&&E!==null&&(_=E,v!==null&&(E=Na(g,v),E!=null&&w.push(Va(g,E,_)))),x)break;g=g.return}0<w.length&&(p=new m(p,y,null,n,u),f.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==Bp&&(y=n.relatedTarget||n.fromElement)&&($s(y)||y[Er]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=c,y=y?$s(y):null,y!==null&&(x=mi(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(w=zv,E="onMouseLeave",v="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(w=Hv,E="onPointerLeave",v="onPointerEnter",g="pointer"),x=m==null?p:Ni(m),_=y==null?p:Ni(y),p=new w(E,g+"leave",m,n,u),p.target=x,p.relatedTarget=_,E=null,$s(u)===c&&(w=new w(v,g+"enter",y,n,u),w.target=_,w.relatedTarget=x,E=w),x=E,m&&y)t:{for(w=m,v=y,g=0,_=w;_;_=_i(_))g++;for(_=0,E=v;E;E=_i(E))_++;for(;0<g-_;)w=_i(w),g--;for(;0<_-g;)v=_i(v),_--;for(;g--;){if(w===v||v!==null&&w===v.alternate)break t;w=_i(w),v=_i(v)}w=null}else w=null;m!==null&&nw(f,p,m,w,!1),y!==null&&x!==null&&nw(f,x,y,w,!0)}}e:{if(p=c?Ni(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var S=ck;else if(Gv(p))if(_E)S=hk;else{S=dk;var T=uk}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=fk);if(S&&(S=S(t,c))){wE(f,S,n,u);break e}T&&T(t,p,c),t==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&Mp(p,"number",p.value)}switch(T=c?Ni(c):window,t){case"focusin":(Gv(T)||T.contentEditable==="true")&&(ki=T,Qp=c,ha=null);break;case"focusout":ha=Qp=ki=null;break;case"mousedown":Yp=!0;break;case"contextmenu":case"mouseup":case"dragend":Yp=!1,Zv(f,n,u);break;case"selectionchange":if(gk)break;case"keydown":case"keyup":Zv(f,n,u)}var I;if(Wg)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Ci?yE(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(gE&&n.locale!=="ko"&&(Ci||R!=="onCompositionStart"?R==="onCompositionEnd"&&Ci&&(I=mE()):(Gr=u,Ug="value"in Gr?Gr.value:Gr.textContent,Ci=!0)),T=wu(c,R),0<T.length&&(R=new Wv(R,t,null,n,u),f.push({event:R,listeners:T}),I?R.data=I:(I=vE(n),I!==null&&(R.data=I)))),(I=sk?ik(t,n):ok(t,n))&&(c=wu(c,"onBeforeInput"),0<c.length&&(u=new Wv("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=I))}kE(f,e)})}function Va(t,e,n){return{instance:t,listener:e,currentTarget:n}}function wu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Na(t,n),i!=null&&r.unshift(Va(t,i,s)),i=Na(t,e),i!=null&&r.push(Va(t,i,s))),t=t.return}return r}function _i(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function nw(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Na(n,i),l!=null&&o.unshift(Va(n,l,a))):s||(l=Na(n,i),l!=null&&o.push(Va(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var _k=/\r\n?/g,xk=/\u0000|\uFFFD/g;function rw(t){return(typeof t=="string"?t:""+t).replace(_k,`
`).replace(xk,"")}function vc(t,e,n){if(e=rw(e),rw(t)!==e&&n)throw Error($(425))}function _u(){}var Jp=null,Xp=null;function Zp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var em=typeof setTimeout=="function"?setTimeout:void 0,Ek=typeof clearTimeout=="function"?clearTimeout:void 0,sw=typeof Promise=="function"?Promise:void 0,Sk=typeof queueMicrotask=="function"?queueMicrotask:typeof sw<"u"?function(t){return sw.resolve(null).then(t).catch(Tk)}:em;function Tk(t){setTimeout(function(){throw t})}function bh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),La(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);La(e)}function rs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function iw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var bo=Math.random().toString(36).slice(2),Un="__reactFiber$"+bo,Fa="__reactProps$"+bo,Er="__reactContainer$"+bo,tm="__reactEvents$"+bo,Ik="__reactListeners$"+bo,Rk="__reactHandles$"+bo;function $s(t){var e=t[Un];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Er]||n[Un]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=iw(t);t!==null;){if(n=t[Un])return n;t=iw(t)}return e}t=n,n=t.parentNode}return null}function Il(t){return t=t[Un]||t[Er],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ni(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function kd(t){return t[Fa]||null}var nm=[],Oi=-1;function Rs(t){return{current:t}}function je(t){0>Oi||(t.current=nm[Oi],nm[Oi]=null,Oi--)}function ke(t,e){Oi++,nm[Oi]=t.current,t.current=e}var ms={},Lt=Rs(ms),Kt=Rs(!1),Xs=ms;function io(t,e){var n=t.type.contextTypes;if(!n)return ms;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Gt(t){return t=t.childContextTypes,t!=null}function xu(){je(Kt),je(Lt)}function ow(t,e,n){if(Lt.current!==ms)throw Error($(168));ke(Lt,e),ke(Kt,n)}function NE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,u2(t)||"Unknown",s));return ze({},n,r)}function Eu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ms,Xs=Lt.current,ke(Lt,t),ke(Kt,Kt.current),!0}function aw(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=NE(t,e,Xs),r.__reactInternalMemoizedMergedChildContext=t,je(Kt),je(Lt),ke(Lt,t)):je(Kt),ke(Kt,n)}var ur=null,Pd=!1,Ah=!1;function OE(t){ur===null?ur=[t]:ur.push(t)}function bk(t){Pd=!0,OE(t)}function bs(){if(!Ah&&ur!==null){Ah=!0;var t=0,e=Se;try{var n=ur;for(Se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ur=null,Pd=!1}catch(s){throw ur!==null&&(ur=ur.slice(t+1)),sE(Mg,bs),s}finally{Se=e,Ah=!1}}return null}var ji=[],Li=0,Su=null,Tu=0,mn=[],gn=0,Zs=null,fr=1,hr="";function Os(t,e){ji[Li++]=Tu,ji[Li++]=Su,Su=t,Tu=e}function jE(t,e,n){mn[gn++]=fr,mn[gn++]=hr,mn[gn++]=Zs,Zs=t;var r=fr;t=hr;var s=32-On(r)-1;r&=~(1<<s),n+=1;var i=32-On(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,fr=1<<32-On(e)+s|n<<s|r,hr=i+t}else fr=1<<i|n<<s|r,hr=t}function qg(t){t.return!==null&&(Os(t,1),jE(t,1,0))}function Kg(t){for(;t===Su;)Su=ji[--Li],ji[Li]=null,Tu=ji[--Li],ji[Li]=null;for(;t===Zs;)Zs=mn[--gn],mn[gn]=null,hr=mn[--gn],mn[gn]=null,fr=mn[--gn],mn[gn]=null}var nn=null,en=null,$e=!1,kn=null;function LE(t,e){var n=wn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function lw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,nn=t,en=rs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,nn=t,en=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Zs!==null?{id:fr,overflow:hr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=wn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,nn=t,en=null,!0):!1;default:return!1}}function rm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sm(t){if($e){var e=en;if(e){var n=e;if(!lw(t,e)){if(rm(t))throw Error($(418));e=rs(n.nextSibling);var r=nn;e&&lw(t,e)?LE(r,n):(t.flags=t.flags&-4097|2,$e=!1,nn=t)}}else{if(rm(t))throw Error($(418));t.flags=t.flags&-4097|2,$e=!1,nn=t}}}function cw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nn=t}function wc(t){if(t!==nn)return!1;if(!$e)return cw(t),$e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zp(t.type,t.memoizedProps)),e&&(e=en)){if(rm(t))throw DE(),Error($(418));for(;e;)LE(t,e),e=rs(e.nextSibling)}if(cw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){en=rs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}en=null}}else en=nn?rs(t.stateNode.nextSibling):null;return!0}function DE(){for(var t=en;t;)t=rs(t.nextSibling)}function oo(){en=nn=null,$e=!1}function Gg(t){kn===null?kn=[t]:kn.push(t)}var Ak=Nr.ReactCurrentBatchConfig;function An(t,e){if(t&&t.defaultProps){e=ze({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Iu=Rs(null),Ru=null,Di=null,Qg=null;function Yg(){Qg=Di=Ru=null}function Jg(t){var e=Iu.current;je(Iu),t._currentValue=e}function im(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Gi(t,e){Ru=t,Qg=Di=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qt=!0),t.firstContext=null)}function En(t){var e=t._currentValue;if(Qg!==t)if(t={context:t,memoizedValue:e,next:null},Di===null){if(Ru===null)throw Error($(308));Di=t,Ru.dependencies={lanes:0,firstContext:t}}else Di=Di.next=t;return e}var Vs=null;function Xg(t){Vs===null?Vs=[t]:Vs.push(t)}function ME(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Xg(e)):(n.next=s.next,s.next=n),e.interleaved=n,Sr(t,r)}function Sr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fr=!1;function Zg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $E(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ss(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Sr(t,n)}return s=r.interleaved,s===null?(e.next=e,Xg(r)):(e.next=s.next,s.next=e),r.interleaved=e,Sr(t,n)}function Hc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$g(t,n)}}function uw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function bu(t,e,n,r){var s=t.updateQueue;Fr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,u=c=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,w=a;switch(p=e,m=n,w.tag){case 1:if(y=w.payload,typeof y=="function"){f=y.call(m,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,p=typeof y=="function"?y.call(m,f,p):y,p==null)break e;f=ze({},f,p);break e;case 2:Fr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=f):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(1);if(u===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ti|=o,t.lanes=o,t.memoizedState=f}}function dw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var VE=new Mx.Component().refs;function om(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ze({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Nd={isMounted:function(t){return(t=t._reactInternals)?mi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ut(),s=os(t),i=yr(r,s);i.payload=e,n!=null&&(i.callback=n),e=ss(t,i,s),e!==null&&(jn(e,t,s,r),Hc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ut(),s=os(t),i=yr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ss(t,i,s),e!==null&&(jn(e,t,s,r),Hc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ut(),r=os(t),s=yr(n,r);s.tag=2,e!=null&&(s.callback=e),e=ss(t,s,r),e!==null&&(jn(e,t,r,n),Hc(e,t,r))}};function fw(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ma(n,r)||!Ma(s,i):!0}function FE(t,e,n){var r=!1,s=ms,i=e.contextType;return typeof i=="object"&&i!==null?i=En(i):(s=Gt(e)?Xs:Lt.current,r=e.contextTypes,i=(r=r!=null)?io(t,s):ms),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Nd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function hw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Nd.enqueueReplaceState(e,e.state,null)}function am(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=VE,Zg(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=En(i):(i=Gt(e)?Xs:Lt.current,s.context=io(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(om(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Nd.enqueueReplaceState(s,s.state,null),bu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ho(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===VE&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function _c(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function pw(t){var e=t._init;return e(t._payload)}function UE(t){function e(v,g){if(t){var _=v.deletions;_===null?(v.deletions=[g],v.flags|=16):_.push(g)}}function n(v,g){if(!t)return null;for(;g!==null;)e(v,g),g=g.sibling;return null}function r(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function s(v,g){return v=as(v,g),v.index=0,v.sibling=null,v}function i(v,g,_){return v.index=_,t?(_=v.alternate,_!==null?(_=_.index,_<g?(v.flags|=2,g):_):(v.flags|=2,g)):(v.flags|=1048576,g)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,g,_,E){return g===null||g.tag!==6?(g=Lh(_,v.mode,E),g.return=v,g):(g=s(g,_),g.return=v,g)}function l(v,g,_,E){var S=_.type;return S===Ai?u(v,g,_.props.children,E,_.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Vr&&pw(S)===g.type)?(E=s(g,_.props),E.ref=Ho(v,g,_),E.return=v,E):(E=Jc(_.type,_.key,_.props,null,v.mode,E),E.ref=Ho(v,g,_),E.return=v,E)}function c(v,g,_,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==_.containerInfo||g.stateNode.implementation!==_.implementation?(g=Dh(_,v.mode,E),g.return=v,g):(g=s(g,_.children||[]),g.return=v,g)}function u(v,g,_,E,S){return g===null||g.tag!==7?(g=qs(_,v.mode,E,S),g.return=v,g):(g=s(g,_),g.return=v,g)}function f(v,g,_){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Lh(""+g,v.mode,_),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case cc:return _=Jc(g.type,g.key,g.props,null,v.mode,_),_.ref=Ho(v,null,g),_.return=v,_;case bi:return g=Dh(g,v.mode,_),g.return=v,g;case Vr:var E=g._init;return f(v,E(g._payload),_)}if(Zo(g)||Fo(g))return g=qs(g,v.mode,_,null),g.return=v,g;_c(v,g)}return null}function p(v,g,_,E){var S=g!==null?g.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return S!==null?null:a(v,g,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case cc:return _.key===S?l(v,g,_,E):null;case bi:return _.key===S?c(v,g,_,E):null;case Vr:return S=_._init,p(v,g,S(_._payload),E)}if(Zo(_)||Fo(_))return S!==null?null:u(v,g,_,E,null);_c(v,_)}return null}function m(v,g,_,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(_)||null,a(g,v,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case cc:return v=v.get(E.key===null?_:E.key)||null,l(g,v,E,S);case bi:return v=v.get(E.key===null?_:E.key)||null,c(g,v,E,S);case Vr:var T=E._init;return m(v,g,_,T(E._payload),S)}if(Zo(E)||Fo(E))return v=v.get(_)||null,u(g,v,E,S,null);_c(g,E)}return null}function y(v,g,_,E){for(var S=null,T=null,I=g,R=g=0,C=null;I!==null&&R<_.length;R++){I.index>R?(C=I,I=null):C=I.sibling;var b=p(v,I,_[R],E);if(b===null){I===null&&(I=C);break}t&&I&&b.alternate===null&&e(v,I),g=i(b,g,R),T===null?S=b:T.sibling=b,T=b,I=C}if(R===_.length)return n(v,I),$e&&Os(v,R),S;if(I===null){for(;R<_.length;R++)I=f(v,_[R],E),I!==null&&(g=i(I,g,R),T===null?S=I:T.sibling=I,T=I);return $e&&Os(v,R),S}for(I=r(v,I);R<_.length;R++)C=m(I,v,R,_[R],E),C!==null&&(t&&C.alternate!==null&&I.delete(C.key===null?R:C.key),g=i(C,g,R),T===null?S=C:T.sibling=C,T=C);return t&&I.forEach(function(A){return e(v,A)}),$e&&Os(v,R),S}function w(v,g,_,E){var S=Fo(_);if(typeof S!="function")throw Error($(150));if(_=S.call(_),_==null)throw Error($(151));for(var T=S=null,I=g,R=g=0,C=null,b=_.next();I!==null&&!b.done;R++,b=_.next()){I.index>R?(C=I,I=null):C=I.sibling;var A=p(v,I,b.value,E);if(A===null){I===null&&(I=C);break}t&&I&&A.alternate===null&&e(v,I),g=i(A,g,R),T===null?S=A:T.sibling=A,T=A,I=C}if(b.done)return n(v,I),$e&&Os(v,R),S;if(I===null){for(;!b.done;R++,b=_.next())b=f(v,b.value,E),b!==null&&(g=i(b,g,R),T===null?S=b:T.sibling=b,T=b);return $e&&Os(v,R),S}for(I=r(v,I);!b.done;R++,b=_.next())b=m(I,v,R,b.value,E),b!==null&&(t&&b.alternate!==null&&I.delete(b.key===null?R:b.key),g=i(b,g,R),T===null?S=b:T.sibling=b,T=b);return t&&I.forEach(function(D){return e(v,D)}),$e&&Os(v,R),S}function x(v,g,_,E){if(typeof _=="object"&&_!==null&&_.type===Ai&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case cc:e:{for(var S=_.key,T=g;T!==null;){if(T.key===S){if(S=_.type,S===Ai){if(T.tag===7){n(v,T.sibling),g=s(T,_.props.children),g.return=v,v=g;break e}}else if(T.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Vr&&pw(S)===T.type){n(v,T.sibling),g=s(T,_.props),g.ref=Ho(v,T,_),g.return=v,v=g;break e}n(v,T);break}else e(v,T);T=T.sibling}_.type===Ai?(g=qs(_.props.children,v.mode,E,_.key),g.return=v,v=g):(E=Jc(_.type,_.key,_.props,null,v.mode,E),E.ref=Ho(v,g,_),E.return=v,v=E)}return o(v);case bi:e:{for(T=_.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===_.containerInfo&&g.stateNode.implementation===_.implementation){n(v,g.sibling),g=s(g,_.children||[]),g.return=v,v=g;break e}else{n(v,g);break}else e(v,g);g=g.sibling}g=Dh(_,v.mode,E),g.return=v,v=g}return o(v);case Vr:return T=_._init,x(v,g,T(_._payload),E)}if(Zo(_))return y(v,g,_,E);if(Fo(_))return w(v,g,_,E);_c(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,g!==null&&g.tag===6?(n(v,g.sibling),g=s(g,_),g.return=v,v=g):(n(v,g),g=Lh(_,v.mode,E),g.return=v,v=g),o(v)):n(v,g)}return x}var ao=UE(!0),BE=UE(!1),Rl={},Jn=Rs(Rl),Ua=Rs(Rl),Ba=Rs(Rl);function Fs(t){if(t===Rl)throw Error($(174));return t}function ey(t,e){switch(ke(Ba,e),ke(Ua,t),ke(Jn,Rl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vp(e,t)}je(Jn),ke(Jn,e)}function lo(){je(Jn),je(Ua),je(Ba)}function zE(t){Fs(Ba.current);var e=Fs(Jn.current),n=Vp(e,t.type);e!==n&&(ke(Ua,t),ke(Jn,n))}function ty(t){Ua.current===t&&(je(Jn),je(Ua))}var Fe=Rs(0);function Au(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ch=[];function ny(){for(var t=0;t<Ch.length;t++)Ch[t]._workInProgressVersionPrimary=null;Ch.length=0}var qc=Nr.ReactCurrentDispatcher,kh=Nr.ReactCurrentBatchConfig,ei=0,Be=null,it=null,ft=null,Cu=!1,pa=!1,za=0,Ck=0;function Tt(){throw Error($(321))}function ry(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ln(t[n],e[n]))return!1;return!0}function sy(t,e,n,r,s,i){if(ei=i,Be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qc.current=t===null||t.memoizedState===null?Ok:jk,t=n(r,s),pa){i=0;do{if(pa=!1,za=0,25<=i)throw Error($(301));i+=1,ft=it=null,e.updateQueue=null,qc.current=Lk,t=n(r,s)}while(pa)}if(qc.current=ku,e=it!==null&&it.next!==null,ei=0,ft=it=Be=null,Cu=!1,e)throw Error($(300));return t}function iy(){var t=za!==0;return za=0,t}function Fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Be.memoizedState=ft=t:ft=ft.next=t,ft}function Sn(){if(it===null){var t=Be.alternate;t=t!==null?t.memoizedState:null}else t=it.next;var e=ft===null?Be.memoizedState:ft.next;if(e!==null)ft=e,it=t;else{if(t===null)throw Error($(310));it=t,t={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},ft===null?Be.memoizedState=ft=t:ft=ft.next=t}return ft}function Wa(t,e){return typeof e=="function"?e(t):e}function Ph(t){var e=Sn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=it,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((ei&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Be.lanes|=u,ti|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Ln(r,e.memoizedState)||(qt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Be.lanes|=i,ti|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Nh(t){var e=Sn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ln(i,e.memoizedState)||(qt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function WE(){}function HE(t,e){var n=Be,r=Sn(),s=e(),i=!Ln(r.memoizedState,s);if(i&&(r.memoizedState=s,qt=!0),r=r.queue,oy(GE.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ft!==null&&ft.memoizedState.tag&1){if(n.flags|=2048,Ha(9,KE.bind(null,n,r,s,e),void 0,null),ht===null)throw Error($(349));ei&30||qE(n,e,s)}return s}function qE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function KE(t,e,n,r){e.value=n,e.getSnapshot=r,QE(e)&&YE(t)}function GE(t,e,n){return n(function(){QE(e)&&YE(t)})}function QE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ln(t,n)}catch{return!0}}function YE(t){var e=Sr(t,1);e!==null&&jn(e,t,1,-1)}function mw(t){var e=Fn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:t},e.queue=t,t=t.dispatch=Nk.bind(null,Be,t),[e.memoizedState,t]}function Ha(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function JE(){return Sn().memoizedState}function Kc(t,e,n,r){var s=Fn();Be.flags|=t,s.memoizedState=Ha(1|e,n,void 0,r===void 0?null:r)}function Od(t,e,n,r){var s=Sn();r=r===void 0?null:r;var i=void 0;if(it!==null){var o=it.memoizedState;if(i=o.destroy,r!==null&&ry(r,o.deps)){s.memoizedState=Ha(e,n,i,r);return}}Be.flags|=t,s.memoizedState=Ha(1|e,n,i,r)}function gw(t,e){return Kc(8390656,8,t,e)}function oy(t,e){return Od(2048,8,t,e)}function XE(t,e){return Od(4,2,t,e)}function ZE(t,e){return Od(4,4,t,e)}function eS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function tS(t,e,n){return n=n!=null?n.concat([t]):null,Od(4,4,eS.bind(null,e,t),n)}function ay(){}function nS(t,e){var n=Sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ry(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function rS(t,e){var n=Sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ry(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function sS(t,e,n){return ei&21?(Ln(n,e)||(n=aE(),Be.lanes|=n,ti|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qt=!0),t.memoizedState=n)}function kk(t,e){var n=Se;Se=n!==0&&4>n?n:4,t(!0);var r=kh.transition;kh.transition={};try{t(!1),e()}finally{Se=n,kh.transition=r}}function iS(){return Sn().memoizedState}function Pk(t,e,n){var r=os(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},oS(t))aS(e,n);else if(n=ME(t,e,n,r),n!==null){var s=Ut();jn(n,t,r,s),lS(n,e,r)}}function Nk(t,e,n){var r=os(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(oS(t))aS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ln(a,o)){var l=e.interleaved;l===null?(s.next=s,Xg(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=ME(t,e,s,r),n!==null&&(s=Ut(),jn(n,t,r,s),lS(n,e,r))}}function oS(t){var e=t.alternate;return t===Be||e!==null&&e===Be}function aS(t,e){pa=Cu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function lS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$g(t,n)}}var ku={readContext:En,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useInsertionEffect:Tt,useLayoutEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useMutableSource:Tt,useSyncExternalStore:Tt,useId:Tt,unstable_isNewReconciler:!1},Ok={readContext:En,useCallback:function(t,e){return Fn().memoizedState=[t,e===void 0?null:e],t},useContext:En,useEffect:gw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Kc(4194308,4,eS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Kc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Kc(4,2,t,e)},useMemo:function(t,e){var n=Fn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Fn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Pk.bind(null,Be,t),[r.memoizedState,t]},useRef:function(t){var e=Fn();return t={current:t},e.memoizedState=t},useState:mw,useDebugValue:ay,useDeferredValue:function(t){return Fn().memoizedState=t},useTransition:function(){var t=mw(!1),e=t[0];return t=kk.bind(null,t[1]),Fn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Be,s=Fn();if($e){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),ht===null)throw Error($(349));ei&30||qE(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,gw(GE.bind(null,r,i,t),[t]),r.flags|=2048,Ha(9,KE.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Fn(),e=ht.identifierPrefix;if($e){var n=hr,r=fr;n=(r&~(1<<32-On(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=za++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Ck++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},jk={readContext:En,useCallback:nS,useContext:En,useEffect:oy,useImperativeHandle:tS,useInsertionEffect:XE,useLayoutEffect:ZE,useMemo:rS,useReducer:Ph,useRef:JE,useState:function(){return Ph(Wa)},useDebugValue:ay,useDeferredValue:function(t){var e=Sn();return sS(e,it.memoizedState,t)},useTransition:function(){var t=Ph(Wa)[0],e=Sn().memoizedState;return[t,e]},useMutableSource:WE,useSyncExternalStore:HE,useId:iS,unstable_isNewReconciler:!1},Lk={readContext:En,useCallback:nS,useContext:En,useEffect:oy,useImperativeHandle:tS,useInsertionEffect:XE,useLayoutEffect:ZE,useMemo:rS,useReducer:Nh,useRef:JE,useState:function(){return Nh(Wa)},useDebugValue:ay,useDeferredValue:function(t){var e=Sn();return it===null?e.memoizedState=t:sS(e,it.memoizedState,t)},useTransition:function(){var t=Nh(Wa)[0],e=Sn().memoizedState;return[t,e]},useMutableSource:WE,useSyncExternalStore:HE,useId:iS,unstable_isNewReconciler:!1};function co(t,e){try{var n="",r=e;do n+=c2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Oh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Dk=typeof WeakMap=="function"?WeakMap:Map;function cS(t,e,n){n=yr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Nu||(Nu=!0,vm=r),lm(t,e)},n}function uS(t,e,n){n=yr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){lm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){lm(t,e),typeof r!="function"&&(is===null?is=new Set([this]):is.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function yw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Dk;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Yk.bind(null,t,e,n),e.then(t,t))}function vw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ww(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=yr(-1,1),e.tag=2,ss(n,e,1))),n.lanes|=1),t)}var Mk=Nr.ReactCurrentOwner,qt=!1;function Vt(t,e,n,r){e.child=t===null?BE(e,null,n,r):ao(e,t.child,n,r)}function _w(t,e,n,r,s){n=n.render;var i=e.ref;return Gi(e,s),r=sy(t,e,n,r,i,s),n=iy(),t!==null&&!qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Tr(t,e,s)):($e&&n&&qg(e),e.flags|=1,Vt(t,e,r,s),e.child)}function xw(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!my(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,dS(t,e,i,r,s)):(t=Jc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ma,n(o,r)&&t.ref===e.ref)return Tr(t,e,s)}return e.flags|=1,t=as(i,r),t.ref=e.ref,t.return=e,e.child=t}function dS(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ma(i,r)&&t.ref===e.ref)if(qt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(qt=!0);else return e.lanes=t.lanes,Tr(t,e,s)}return cm(t,e,n,r,s)}function fS(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke($i,Zt),Zt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ke($i,Zt),Zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ke($i,Zt),Zt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ke($i,Zt),Zt|=r;return Vt(t,e,s,n),e.child}function hS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cm(t,e,n,r,s){var i=Gt(n)?Xs:Lt.current;return i=io(e,i),Gi(e,s),n=sy(t,e,n,r,i,s),r=iy(),t!==null&&!qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Tr(t,e,s)):($e&&r&&qg(e),e.flags|=1,Vt(t,e,n,s),e.child)}function Ew(t,e,n,r,s){if(Gt(n)){var i=!0;Eu(e)}else i=!1;if(Gi(e,s),e.stateNode===null)Gc(t,e),FE(e,n,r),am(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=En(c):(c=Gt(n)?Xs:Lt.current,c=io(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&hw(e,o,r,c),Fr=!1;var p=e.memoizedState;o.state=p,bu(e,r,o,s),l=e.memoizedState,a!==r||p!==l||Kt.current||Fr?(typeof u=="function"&&(om(e,n,u,r),l=e.memoizedState),(a=Fr||fw(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,$E(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:An(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=En(l):(l=Gt(n)?Xs:Lt.current,l=io(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&hw(e,o,r,l),Fr=!1,p=e.memoizedState,o.state=p,bu(e,r,o,s);var y=e.memoizedState;a!==f||p!==y||Kt.current||Fr?(typeof m=="function"&&(om(e,n,m,r),y=e.memoizedState),(c=Fr||fw(e,n,c,r,p,y,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return um(t,e,n,r,i,s)}function um(t,e,n,r,s,i){hS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&aw(e,n,!1),Tr(t,e,i);r=e.stateNode,Mk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ao(e,t.child,null,i),e.child=ao(e,null,a,i)):Vt(t,e,a,i),e.memoizedState=r.state,s&&aw(e,n,!0),e.child}function pS(t){var e=t.stateNode;e.pendingContext?ow(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ow(t,e.context,!1),ey(t,e.containerInfo)}function Sw(t,e,n,r,s){return oo(),Gg(s),e.flags|=256,Vt(t,e,n,r),e.child}var dm={dehydrated:null,treeContext:null,retryLane:0};function fm(t){return{baseLanes:t,cachePool:null,transitions:null}}function mS(t,e,n){var r=e.pendingProps,s=Fe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ke(Fe,s&1),t===null)return sm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Dd(o,r,0,null),t=qs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=fm(n),e.memoizedState=dm,t):ly(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return $k(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=as(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=as(a,i):(i=qs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?fm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=dm,r}return i=t.child,t=i.sibling,r=as(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ly(t,e){return e=Dd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xc(t,e,n,r){return r!==null&&Gg(r),ao(e,t.child,null,n),t=ly(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $k(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Oh(Error($(422))),xc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Dd({mode:"visible",children:r.children},s,0,null),i=qs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ao(e,t.child,null,o),e.child.memoizedState=fm(o),e.memoizedState=dm,i);if(!(e.mode&1))return xc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error($(419)),r=Oh(i,r,void 0),xc(t,e,o,r)}if(a=(o&t.childLanes)!==0,qt||a){if(r=ht,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Sr(t,s),jn(r,t,s,-1))}return py(),r=Oh(Error($(421))),xc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Jk.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,en=rs(s.nextSibling),nn=e,$e=!0,kn=null,t!==null&&(mn[gn++]=fr,mn[gn++]=hr,mn[gn++]=Zs,fr=t.id,hr=t.overflow,Zs=e),e=ly(e,r.children),e.flags|=4096,e)}function Tw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),im(t.return,e,n)}function jh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function gS(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Vt(t,e,r.children,n),r=Fe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tw(t,n,e);else if(t.tag===19)Tw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ke(Fe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Au(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),jh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Au(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}jh(e,!0,n,null,i);break;case"together":jh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Tr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ti|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=as(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=as(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Vk(t,e,n){switch(e.tag){case 3:pS(e),oo();break;case 5:zE(e);break;case 1:Gt(e.type)&&Eu(e);break;case 4:ey(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ke(Iu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ke(Fe,Fe.current&1),e.flags|=128,null):n&e.child.childLanes?mS(t,e,n):(ke(Fe,Fe.current&1),t=Tr(t,e,n),t!==null?t.sibling:null);ke(Fe,Fe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return gS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ke(Fe,Fe.current),r)break;return null;case 22:case 23:return e.lanes=0,fS(t,e,n)}return Tr(t,e,n)}var yS,hm,vS,wS;yS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hm=function(){};vS=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Fs(Jn.current);var i=null;switch(n){case"input":s=Lp(t,s),r=Lp(t,r),i=[];break;case"select":s=ze({},s,{value:void 0}),r=ze({},r,{value:void 0}),i=[];break;case"textarea":s=$p(t,s),r=$p(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=_u)}Fp(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ka.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ka.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Pe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};wS=function(t,e,n,r){n!==r&&(e.flags|=4)};function qo(t,e){if(!$e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function It(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Fk(t,e,n){var r=e.pendingProps;switch(Kg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(e),null;case 1:return Gt(e.type)&&xu(),It(e),null;case 3:return r=e.stateNode,lo(),je(Kt),je(Lt),ny(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(wc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,kn!==null&&(xm(kn),kn=null))),hm(t,e),It(e),null;case 5:ty(e);var s=Fs(Ba.current);if(n=e.type,t!==null&&e.stateNode!=null)vS(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return It(e),null}if(t=Fs(Jn.current),wc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Un]=e,r[Fa]=i,t=(e.mode&1)!==0,n){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(s=0;s<ta.length;s++)Pe(ta[s],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":Ov(r,i),Pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Pe("invalid",r);break;case"textarea":Lv(r,i),Pe("invalid",r)}Fp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&vc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&vc(r.textContent,a,t),s=["children",""+a]):ka.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Pe("scroll",r)}switch(n){case"input":uc(r),jv(r,i,!0);break;case"textarea":uc(r),Dv(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=_u)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Un]=e,t[Fa]=r,yS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Up(n,r),n){case"dialog":Pe("cancel",t),Pe("close",t),s=r;break;case"iframe":case"object":case"embed":Pe("load",t),s=r;break;case"video":case"audio":for(s=0;s<ta.length;s++)Pe(ta[s],t);s=r;break;case"source":Pe("error",t),s=r;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),s=r;break;case"details":Pe("toggle",t),s=r;break;case"input":Ov(t,r),s=Lp(t,r),Pe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ze({},r,{value:void 0}),Pe("invalid",t);break;case"textarea":Lv(t,r),s=$p(t,r),Pe("invalid",t);break;default:s=r}Fp(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Qx(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Kx(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Pa(t,l):typeof l=="number"&&Pa(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ka.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Pe("scroll",t):l!=null&&Ng(t,i,l,o))}switch(n){case"input":uc(t),jv(t,r,!1);break;case"textarea":uc(t),Dv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ps(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Wi(t,!!r.multiple,i,!1):r.defaultValue!=null&&Wi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=_u)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return It(e),null;case 6:if(t&&e.stateNode!=null)wS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Fs(Ba.current),Fs(Jn.current),wc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Un]=e,(i=r.nodeValue!==n)&&(t=nn,t!==null))switch(t.tag){case 3:vc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Un]=e,e.stateNode=r}return It(e),null;case 13:if(je(Fe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($e&&en!==null&&e.mode&1&&!(e.flags&128))DE(),oo(),e.flags|=98560,i=!1;else if(i=wc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[Un]=e}else oo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;It(e),i=!1}else kn!==null&&(xm(kn),kn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Fe.current&1?at===0&&(at=3):py())),e.updateQueue!==null&&(e.flags|=4),It(e),null);case 4:return lo(),hm(t,e),t===null&&$a(e.stateNode.containerInfo),It(e),null;case 10:return Jg(e.type._context),It(e),null;case 17:return Gt(e.type)&&xu(),It(e),null;case 19:if(je(Fe),i=e.memoizedState,i===null)return It(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)qo(i,!1);else{if(at!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Au(t),o!==null){for(e.flags|=128,qo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ke(Fe,Fe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Qe()>uo&&(e.flags|=128,r=!0,qo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Au(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!$e)return It(e),null}else 2*Qe()-i.renderingStartTime>uo&&n!==1073741824&&(e.flags|=128,r=!0,qo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Qe(),e.sibling=null,n=Fe.current,ke(Fe,r?n&1|2:n&1),e):(It(e),null);case 22:case 23:return hy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Zt&1073741824&&(It(e),e.subtreeFlags&6&&(e.flags|=8192)):It(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function Uk(t,e){switch(Kg(e),e.tag){case 1:return Gt(e.type)&&xu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return lo(),je(Kt),je(Lt),ny(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ty(e),null;case 13:if(je(Fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));oo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(Fe),null;case 4:return lo(),null;case 10:return Jg(e.type._context),null;case 22:case 23:return hy(),null;case 24:return null;default:return null}}var Ec=!1,Ct=!1,Bk=typeof WeakSet=="function"?WeakSet:Set,K=null;function Mi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(t,e,r)}else n.current=null}function pm(t,e,n){try{n()}catch(r){He(t,e,r)}}var Iw=!1;function zk(t,e){if(Jp=yu,t=SE(),Hg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=t,p=null;t:for(;;){for(var m;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++u===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xp={focusedElem:t,selectionRange:n},yu=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,x=y.memoizedState,v=e.stateNode,g=v.getSnapshotBeforeUpdate(e.elementType===e.type?w:An(e.type,w),x);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(E){He(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return y=Iw,Iw=!1,y}function ma(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&pm(e,n,i)}s=s.next}while(s!==r)}}function jd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function mm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function _S(t){var e=t.alternate;e!==null&&(t.alternate=null,_S(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Un],delete e[Fa],delete e[tm],delete e[Ik],delete e[Rk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xS(t){return t.tag===5||t.tag===3||t.tag===4}function Rw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=_u));else if(r!==4&&(t=t.child,t!==null))for(gm(t,e,n),t=t.sibling;t!==null;)gm(t,e,n),t=t.sibling}function ym(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ym(t,e,n),t=t.sibling;t!==null;)ym(t,e,n),t=t.sibling}var yt=null,Cn=!1;function Dr(t,e,n){for(n=n.child;n!==null;)ES(t,e,n),n=n.sibling}function ES(t,e,n){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(Rd,n)}catch{}switch(n.tag){case 5:Ct||Mi(n,e);case 6:var r=yt,s=Cn;yt=null,Dr(t,e,n),yt=r,Cn=s,yt!==null&&(Cn?(t=yt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):yt.removeChild(n.stateNode));break;case 18:yt!==null&&(Cn?(t=yt,n=n.stateNode,t.nodeType===8?bh(t.parentNode,n):t.nodeType===1&&bh(t,n),La(t)):bh(yt,n.stateNode));break;case 4:r=yt,s=Cn,yt=n.stateNode.containerInfo,Cn=!0,Dr(t,e,n),yt=r,Cn=s;break;case 0:case 11:case 14:case 15:if(!Ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&pm(n,e,o),s=s.next}while(s!==r)}Dr(t,e,n);break;case 1:if(!Ct&&(Mi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){He(n,e,a)}Dr(t,e,n);break;case 21:Dr(t,e,n);break;case 22:n.mode&1?(Ct=(r=Ct)||n.memoizedState!==null,Dr(t,e,n),Ct=r):Dr(t,e,n);break;default:Dr(t,e,n)}}function bw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Bk),e.forEach(function(r){var s=Xk.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function bn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:yt=a.stateNode,Cn=!1;break e;case 3:yt=a.stateNode.containerInfo,Cn=!0;break e;case 4:yt=a.stateNode.containerInfo,Cn=!0;break e}a=a.return}if(yt===null)throw Error($(160));ES(i,o,s),yt=null,Cn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){He(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)SS(e,t),e=e.sibling}function SS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(bn(e,t),Vn(t),r&4){try{ma(3,t,t.return),jd(3,t)}catch(w){He(t,t.return,w)}try{ma(5,t,t.return)}catch(w){He(t,t.return,w)}}break;case 1:bn(e,t),Vn(t),r&512&&n!==null&&Mi(n,n.return);break;case 5:if(bn(e,t),Vn(t),r&512&&n!==null&&Mi(n,n.return),t.flags&32){var s=t.stateNode;try{Pa(s,"")}catch(w){He(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Wx(s,i),Up(a,o);var c=Up(a,i);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?Qx(s,f):u==="dangerouslySetInnerHTML"?Kx(s,f):u==="children"?Pa(s,f):Ng(s,u,f,c)}switch(a){case"input":Dp(s,i);break;case"textarea":Hx(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Wi(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?Wi(s,!!i.multiple,i.defaultValue,!0):Wi(s,!!i.multiple,i.multiple?[]:"",!1))}s[Fa]=i}catch(w){He(t,t.return,w)}}break;case 6:if(bn(e,t),Vn(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){He(t,t.return,w)}}break;case 3:if(bn(e,t),Vn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{La(e.containerInfo)}catch(w){He(t,t.return,w)}break;case 4:bn(e,t),Vn(t);break;case 13:bn(e,t),Vn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(dy=Qe())),r&4&&bw(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Ct=(c=Ct)||u,bn(e,t),Ct=c):bn(e,t),Vn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(K=t,u=t.child;u!==null;){for(f=K=u;K!==null;){switch(p=K,m=p.child,p.tag){case 0:case 11:case 14:case 15:ma(4,p,p.return);break;case 1:Mi(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){He(r,n,w)}}break;case 5:Mi(p,p.return);break;case 22:if(p.memoizedState!==null){Cw(f);continue}}m!==null?(m.return=p,K=m):Cw(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Gx("display",o))}catch(w){He(t,t.return,w)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(w){He(t,t.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:bn(e,t),Vn(t),r&4&&bw(t);break;case 21:break;default:bn(e,t),Vn(t)}}function Vn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(xS(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Pa(s,""),r.flags&=-33);var i=Rw(t);ym(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Rw(t);gm(t,a,o);break;default:throw Error($(161))}}catch(l){He(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Wk(t,e,n){K=t,TS(t)}function TS(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var s=K,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ec;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Ct;a=Ec;var c=Ct;if(Ec=o,(Ct=l)&&!c)for(K=s;K!==null;)o=K,l=o.child,o.tag===22&&o.memoizedState!==null?kw(s):l!==null?(l.return=o,K=l):kw(s);for(;i!==null;)K=i,TS(i),i=i.sibling;K=s,Ec=a,Ct=c}Aw(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,K=i):Aw(t)}}function Aw(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ct||jd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ct)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:An(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&dw(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}dw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&La(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Ct||e.flags&512&&mm(e)}catch(p){He(e,e.return,p)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function Cw(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function kw(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{jd(4,e)}catch(l){He(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){He(e,s,l)}}var i=e.return;try{mm(e)}catch(l){He(e,i,l)}break;case 5:var o=e.return;try{mm(e)}catch(l){He(e,o,l)}}}catch(l){He(e,e.return,l)}if(e===t){K=null;break}var a=e.sibling;if(a!==null){a.return=e.return,K=a;break}K=e.return}}var Hk=Math.ceil,Pu=Nr.ReactCurrentDispatcher,cy=Nr.ReactCurrentOwner,_n=Nr.ReactCurrentBatchConfig,_e=0,ht=null,Xe=null,_t=0,Zt=0,$i=Rs(0),at=0,qa=null,ti=0,Ld=0,uy=0,ga=null,Ht=null,dy=0,uo=1/0,cr=null,Nu=!1,vm=null,is=null,Sc=!1,Qr=null,Ou=0,ya=0,wm=null,Qc=-1,Yc=0;function Ut(){return _e&6?Qe():Qc!==-1?Qc:Qc=Qe()}function os(t){return t.mode&1?_e&2&&_t!==0?_t&-_t:Ak.transition!==null?(Yc===0&&(Yc=aE()),Yc):(t=Se,t!==0||(t=window.event,t=t===void 0?16:pE(t.type)),t):1}function jn(t,e,n,r){if(50<ya)throw ya=0,wm=null,Error($(185));Sl(t,n,r),(!(_e&2)||t!==ht)&&(t===ht&&(!(_e&2)&&(Ld|=n),at===4&&Br(t,_t)),Qt(t,r),n===1&&_e===0&&!(e.mode&1)&&(uo=Qe()+500,Pd&&bs()))}function Qt(t,e){var n=t.callbackNode;A2(t,e);var r=gu(t,t===ht?_t:0);if(r===0)n!==null&&Vv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Vv(n),e===1)t.tag===0?bk(Pw.bind(null,t)):OE(Pw.bind(null,t)),Sk(function(){!(_e&6)&&bs()}),n=null;else{switch(lE(r)){case 1:n=Mg;break;case 4:n=iE;break;case 16:n=mu;break;case 536870912:n=oE;break;default:n=mu}n=NS(n,IS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function IS(t,e){if(Qc=-1,Yc=0,_e&6)throw Error($(327));var n=t.callbackNode;if(Qi()&&t.callbackNode!==n)return null;var r=gu(t,t===ht?_t:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ju(t,r);else{e=r;var s=_e;_e|=2;var i=bS();(ht!==t||_t!==e)&&(cr=null,uo=Qe()+500,Hs(t,e));do try{Gk();break}catch(a){RS(t,a)}while(1);Yg(),Pu.current=i,_e=s,Xe!==null?e=0:(ht=null,_t=0,e=at)}if(e!==0){if(e===2&&(s=qp(t),s!==0&&(r=s,e=_m(t,s))),e===1)throw n=qa,Hs(t,0),Br(t,r),Qt(t,Qe()),n;if(e===6)Br(t,r);else{if(s=t.current.alternate,!(r&30)&&!qk(s)&&(e=ju(t,r),e===2&&(i=qp(t),i!==0&&(r=i,e=_m(t,i))),e===1))throw n=qa,Hs(t,0),Br(t,r),Qt(t,Qe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:js(t,Ht,cr);break;case 3:if(Br(t,r),(r&130023424)===r&&(e=dy+500-Qe(),10<e)){if(gu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ut(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=em(js.bind(null,t,Ht,cr),e);break}js(t,Ht,cr);break;case 4:if(Br(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-On(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Hk(r/1960))-r,10<r){t.timeoutHandle=em(js.bind(null,t,Ht,cr),r);break}js(t,Ht,cr);break;case 5:js(t,Ht,cr);break;default:throw Error($(329))}}}return Qt(t,Qe()),t.callbackNode===n?IS.bind(null,t):null}function _m(t,e){var n=ga;return t.current.memoizedState.isDehydrated&&(Hs(t,e).flags|=256),t=ju(t,e),t!==2&&(e=Ht,Ht=n,e!==null&&xm(e)),t}function xm(t){Ht===null?Ht=t:Ht.push.apply(Ht,t)}function qk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ln(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Br(t,e){for(e&=~uy,e&=~Ld,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-On(e),r=1<<n;t[n]=-1,e&=~r}}function Pw(t){if(_e&6)throw Error($(327));Qi();var e=gu(t,0);if(!(e&1))return Qt(t,Qe()),null;var n=ju(t,e);if(t.tag!==0&&n===2){var r=qp(t);r!==0&&(e=r,n=_m(t,r))}if(n===1)throw n=qa,Hs(t,0),Br(t,e),Qt(t,Qe()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,js(t,Ht,cr),Qt(t,Qe()),null}function fy(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(uo=Qe()+500,Pd&&bs())}}function ni(t){Qr!==null&&Qr.tag===0&&!(_e&6)&&Qi();var e=_e;_e|=1;var n=_n.transition,r=Se;try{if(_n.transition=null,Se=1,t)return t()}finally{Se=r,_n.transition=n,_e=e,!(_e&6)&&bs()}}function hy(){Zt=$i.current,je($i)}function Hs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ek(n)),Xe!==null)for(n=Xe.return;n!==null;){var r=n;switch(Kg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xu();break;case 3:lo(),je(Kt),je(Lt),ny();break;case 5:ty(r);break;case 4:lo();break;case 13:je(Fe);break;case 19:je(Fe);break;case 10:Jg(r.type._context);break;case 22:case 23:hy()}n=n.return}if(ht=t,Xe=t=as(t.current,null),_t=Zt=e,at=0,qa=null,uy=Ld=ti=0,Ht=ga=null,Vs!==null){for(e=0;e<Vs.length;e++)if(n=Vs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Vs=null}return t}function RS(t,e){do{var n=Xe;try{if(Yg(),qc.current=ku,Cu){for(var r=Be.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Cu=!1}if(ei=0,ft=it=Be=null,pa=!1,za=0,cy.current=null,n===null||n.return===null){at=1,qa=e,Xe=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=_t,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=vw(o);if(m!==null){m.flags&=-257,ww(m,o,a,i,e),m.mode&1&&yw(i,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var w=new Set;w.add(l),e.updateQueue=w}else y.add(l);break e}else{if(!(e&1)){yw(i,c,e),py();break e}l=Error($(426))}}else if($e&&a.mode&1){var x=vw(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),ww(x,o,a,i,e),Gg(co(l,a));break e}}i=l=co(l,a),at!==4&&(at=2),ga===null?ga=[i]:ga.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=cS(i,l,e);uw(i,v);break e;case 1:a=l;var g=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(is===null||!is.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=uS(i,a,e);uw(i,E);break e}}i=i.return}while(i!==null)}CS(n)}catch(S){e=S,Xe===n&&n!==null&&(Xe=n=n.return);continue}break}while(1)}function bS(){var t=Pu.current;return Pu.current=ku,t===null?ku:t}function py(){(at===0||at===3||at===2)&&(at=4),ht===null||!(ti&268435455)&&!(Ld&268435455)||Br(ht,_t)}function ju(t,e){var n=_e;_e|=2;var r=bS();(ht!==t||_t!==e)&&(cr=null,Hs(t,e));do try{Kk();break}catch(s){RS(t,s)}while(1);if(Yg(),_e=n,Pu.current=r,Xe!==null)throw Error($(261));return ht=null,_t=0,at}function Kk(){for(;Xe!==null;)AS(Xe)}function Gk(){for(;Xe!==null&&!w2();)AS(Xe)}function AS(t){var e=PS(t.alternate,t,Zt);t.memoizedProps=t.pendingProps,e===null?CS(t):Xe=e,cy.current=null}function CS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Uk(n,e),n!==null){n.flags&=32767,Xe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{at=6,Xe=null;return}}else if(n=Fk(n,e,Zt),n!==null){Xe=n;return}if(e=e.sibling,e!==null){Xe=e;return}Xe=e=t}while(e!==null);at===0&&(at=5)}function js(t,e,n){var r=Se,s=_n.transition;try{_n.transition=null,Se=1,Qk(t,e,n,r)}finally{_n.transition=s,Se=r}return null}function Qk(t,e,n,r){do Qi();while(Qr!==null);if(_e&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(C2(t,i),t===ht&&(Xe=ht=null,_t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Sc||(Sc=!0,NS(mu,function(){return Qi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=_n.transition,_n.transition=null;var o=Se;Se=1;var a=_e;_e|=4,cy.current=null,zk(t,n),SS(n,t),mk(Xp),yu=!!Jp,Xp=Jp=null,t.current=n,Wk(n),_2(),_e=a,Se=o,_n.transition=i}else t.current=n;if(Sc&&(Sc=!1,Qr=t,Ou=s),i=t.pendingLanes,i===0&&(is=null),S2(n.stateNode),Qt(t,Qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Nu)throw Nu=!1,t=vm,vm=null,t;return Ou&1&&t.tag!==0&&Qi(),i=t.pendingLanes,i&1?t===wm?ya++:(ya=0,wm=t):ya=0,bs(),null}function Qi(){if(Qr!==null){var t=lE(Ou),e=_n.transition,n=Se;try{if(_n.transition=null,Se=16>t?16:t,Qr===null)var r=!1;else{if(t=Qr,Qr=null,Ou=0,_e&6)throw Error($(331));var s=_e;for(_e|=4,K=t.current;K!==null;){var i=K,o=i.child;if(K.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(K=c;K!==null;){var u=K;switch(u.tag){case 0:case 11:case 15:ma(8,u,i)}var f=u.child;if(f!==null)f.return=u,K=f;else for(;K!==null;){u=K;var p=u.sibling,m=u.return;if(_S(u),u===c){K=null;break}if(p!==null){p.return=m,K=p;break}K=m}}}var y=i.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var x=w.sibling;w.sibling=null,w=x}while(w!==null)}}K=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,K=o;else e:for(;K!==null;){if(i=K,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ma(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,K=v;break e}K=i.return}}var g=t.current;for(K=g;K!==null;){o=K;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,K=_;else e:for(o=g;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:jd(9,a)}}catch(S){He(a,a.return,S)}if(a===o){K=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,K=E;break e}K=a.return}}if(_e=s,bs(),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(Rd,t)}catch{}r=!0}return r}finally{Se=n,_n.transition=e}}return!1}function Nw(t,e,n){e=co(n,e),e=cS(t,e,1),t=ss(t,e,1),e=Ut(),t!==null&&(Sl(t,1,e),Qt(t,e))}function He(t,e,n){if(t.tag===3)Nw(t,t,n);else for(;e!==null;){if(e.tag===3){Nw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(is===null||!is.has(r))){t=co(n,t),t=uS(e,t,1),e=ss(e,t,1),t=Ut(),e!==null&&(Sl(e,1,t),Qt(e,t));break}}e=e.return}}function Yk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ut(),t.pingedLanes|=t.suspendedLanes&n,ht===t&&(_t&n)===n&&(at===4||at===3&&(_t&130023424)===_t&&500>Qe()-dy?Hs(t,0):uy|=n),Qt(t,e)}function kS(t,e){e===0&&(t.mode&1?(e=hc,hc<<=1,!(hc&130023424)&&(hc=4194304)):e=1);var n=Ut();t=Sr(t,e),t!==null&&(Sl(t,e,n),Qt(t,n))}function Jk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),kS(t,n)}function Xk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),kS(t,n)}var PS;PS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Kt.current)qt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return qt=!1,Vk(t,e,n);qt=!!(t.flags&131072)}else qt=!1,$e&&e.flags&1048576&&jE(e,Tu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Gc(t,e),t=e.pendingProps;var s=io(e,Lt.current);Gi(e,n),s=sy(null,e,r,t,s,n);var i=iy();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gt(r)?(i=!0,Eu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Zg(e),s.updater=Nd,e.stateNode=s,s._reactInternals=e,am(e,r,t,n),e=um(null,e,r,!0,i,n)):(e.tag=0,$e&&i&&qg(e),Vt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Gc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=eP(r),t=An(r,t),s){case 0:e=cm(null,e,r,t,n);break e;case 1:e=Ew(null,e,r,t,n);break e;case 11:e=_w(null,e,r,t,n);break e;case 14:e=xw(null,e,r,An(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:An(r,s),cm(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:An(r,s),Ew(t,e,r,s,n);case 3:e:{if(pS(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,$E(t,e),bu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=co(Error($(423)),e),e=Sw(t,e,r,n,s);break e}else if(r!==s){s=co(Error($(424)),e),e=Sw(t,e,r,n,s);break e}else for(en=rs(e.stateNode.containerInfo.firstChild),nn=e,$e=!0,kn=null,n=BE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(oo(),r===s){e=Tr(t,e,n);break e}Vt(t,e,r,n)}e=e.child}return e;case 5:return zE(e),t===null&&sm(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Zp(r,s)?o=null:i!==null&&Zp(r,i)&&(e.flags|=32),hS(t,e),Vt(t,e,o,n),e.child;case 6:return t===null&&sm(e),null;case 13:return mS(t,e,n);case 4:return ey(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ao(e,null,r,n):Vt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:An(r,s),_w(t,e,r,s,n);case 7:return Vt(t,e,e.pendingProps,n),e.child;case 8:return Vt(t,e,e.pendingProps.children,n),e.child;case 12:return Vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ke(Iu,r._currentValue),r._currentValue=o,i!==null)if(Ln(i.value,o)){if(i.children===s.children&&!Kt.current){e=Tr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=yr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),im(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),im(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Vt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Gi(e,n),s=En(s),r=r(s),e.flags|=1,Vt(t,e,r,n),e.child;case 14:return r=e.type,s=An(r,e.pendingProps),s=An(r.type,s),xw(t,e,r,s,n);case 15:return dS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:An(r,s),Gc(t,e),e.tag=1,Gt(r)?(t=!0,Eu(e)):t=!1,Gi(e,n),FE(e,r,s),am(e,r,s,n),um(null,e,r,!0,t,n);case 19:return gS(t,e,n);case 22:return fS(t,e,n)}throw Error($(156,e.tag))};function NS(t,e){return sE(t,e)}function Zk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(t,e,n,r){return new Zk(t,e,n,r)}function my(t){return t=t.prototype,!(!t||!t.isReactComponent)}function eP(t){if(typeof t=="function")return my(t)?1:0;if(t!=null){if(t=t.$$typeof,t===jg)return 11;if(t===Lg)return 14}return 2}function as(t,e){var n=t.alternate;return n===null?(n=wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Jc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")my(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ai:return qs(n.children,s,i,e);case Og:o=8,s|=8;break;case Pp:return t=wn(12,n,e,s|2),t.elementType=Pp,t.lanes=i,t;case Np:return t=wn(13,n,e,s),t.elementType=Np,t.lanes=i,t;case Op:return t=wn(19,n,e,s),t.elementType=Op,t.lanes=i,t;case Ux:return Dd(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Vx:o=10;break e;case Fx:o=9;break e;case jg:o=11;break e;case Lg:o=14;break e;case Vr:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=wn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function qs(t,e,n,r){return t=wn(7,t,r,e),t.lanes=n,t}function Dd(t,e,n,r){return t=wn(22,t,r,e),t.elementType=Ux,t.lanes=n,t.stateNode={isHidden:!1},t}function Lh(t,e,n){return t=wn(6,t,null,e),t.lanes=n,t}function Dh(t,e,n){return e=wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function tP(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gh(0),this.expirationTimes=gh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function gy(t,e,n,r,s,i,o,a,l){return t=new tP(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=wn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zg(i),t}function nP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function OS(t){if(!t)return ms;t=t._reactInternals;e:{if(mi(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Gt(n))return NE(t,n,e)}return e}function jS(t,e,n,r,s,i,o,a,l){return t=gy(n,r,!0,t,s,i,o,a,l),t.context=OS(null),n=t.current,r=Ut(),s=os(n),i=yr(r,s),i.callback=e??null,ss(n,i,s),t.current.lanes=s,Sl(t,s,r),Qt(t,r),t}function Md(t,e,n,r){var s=e.current,i=Ut(),o=os(s);return n=OS(n),e.context===null?e.context=n:e.pendingContext=n,e=yr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ss(s,e,o),t!==null&&(jn(t,s,o,i),Hc(t,s,o)),o}function Lu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ow(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function yy(t,e){Ow(t,e),(t=t.alternate)&&Ow(t,e)}function rP(){return null}var LS=typeof reportError=="function"?reportError:function(t){console.error(t)};function vy(t){this._internalRoot=t}$d.prototype.render=vy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Md(t,e,null,null)};$d.prototype.unmount=vy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ni(function(){Md(null,t,null,null)}),e[Er]=null}};function $d(t){this._internalRoot=t}$d.prototype.unstable_scheduleHydration=function(t){if(t){var e=dE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ur.length&&e!==0&&e<Ur[n].priority;n++);Ur.splice(n,0,t),n===0&&hE(t)}};function wy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jw(){}function sP(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Lu(o);i.call(c)}}var o=jS(e,r,t,0,null,!1,!1,"",jw);return t._reactRootContainer=o,t[Er]=o.current,$a(t.nodeType===8?t.parentNode:t),ni(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Lu(l);a.call(c)}}var l=gy(t,0,!1,null,null,!1,!1,"",jw);return t._reactRootContainer=l,t[Er]=l.current,$a(t.nodeType===8?t.parentNode:t),ni(function(){Md(e,l,n,r)}),l}function Fd(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Lu(o);a.call(l)}}Md(e,o,t,s)}else o=sP(n,e,t,s,r);return Lu(o)}cE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ea(e.pendingLanes);n!==0&&($g(e,n|1),Qt(e,Qe()),!(_e&6)&&(uo=Qe()+500,bs()))}break;case 13:ni(function(){var r=Sr(t,1);if(r!==null){var s=Ut();jn(r,t,1,s)}}),yy(t,1)}};Vg=function(t){if(t.tag===13){var e=Sr(t,134217728);if(e!==null){var n=Ut();jn(e,t,134217728,n)}yy(t,134217728)}};uE=function(t){if(t.tag===13){var e=os(t),n=Sr(t,e);if(n!==null){var r=Ut();jn(n,t,e,r)}yy(t,e)}};dE=function(){return Se};fE=function(t,e){var n=Se;try{return Se=t,e()}finally{Se=n}};zp=function(t,e,n){switch(e){case"input":if(Dp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=kd(r);if(!s)throw Error($(90));zx(r),Dp(r,s)}}}break;case"textarea":Hx(t,n);break;case"select":e=n.value,e!=null&&Wi(t,!!n.multiple,e,!1)}};Xx=fy;Zx=ni;var iP={usingClientEntryPoint:!1,Events:[Il,Ni,kd,Yx,Jx,fy]},Ko={findFiberByHostInstance:$s,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},oP={bundleType:Ko.bundleType,version:Ko.version,rendererPackageName:Ko.rendererPackageName,rendererConfig:Ko.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nE(t),t===null?null:t.stateNode},findFiberByHostInstance:Ko.findFiberByHostInstance||rP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tc.isDisabled&&Tc.supportsFiber)try{Rd=Tc.inject(oP),Yn=Tc}catch{}}un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iP;un.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wy(e))throw Error($(200));return nP(t,e,null,n)};un.createRoot=function(t,e){if(!wy(t))throw Error($(299));var n=!1,r="",s=LS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=gy(t,1,!1,null,null,n,!1,r,s),t[Er]=e.current,$a(t.nodeType===8?t.parentNode:t),new vy(e)};un.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=nE(e),t=t===null?null:t.stateNode,t};un.flushSync=function(t){return ni(t)};un.hydrate=function(t,e,n){if(!Vd(e))throw Error($(200));return Fd(null,t,e,!0,n)};un.hydrateRoot=function(t,e,n){if(!wy(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=LS;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=jS(e,null,t,1,n??null,s,!1,i,o),t[Er]=e.current,$a(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new $d(e)};un.render=function(t,e,n){if(!Vd(e))throw Error($(200));return Fd(null,t,e,!1,n)};un.unmountComponentAtNode=function(t){if(!Vd(t))throw Error($(40));return t._reactRootContainer?(ni(function(){Fd(null,null,t,!1,function(){t._reactRootContainer=null,t[Er]=null})}),!0):!1};un.unstable_batchedUpdates=fy;un.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Vd(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Fd(t,e,n,!1,r)};un.version="18.2.0-next-9e3b772b8-20220608";function DS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(DS)}catch(t){console.error(t)}}DS(),jx.exports=un;var bl=jx.exports,Lw=bl;Cp.createRoot=Lw.createRoot,Cp.hydrateRoot=Lw.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ka(){return Ka=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ka.apply(this,arguments)}var Yr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Yr||(Yr={}));const Dw="popstate";function aP(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Em("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Du(s)}return cP(e,n,null,t)}function et(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _y(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lP(){return Math.random().toString(36).substr(2,8)}function Mw(t,e){return{usr:t.state,key:t.key,idx:e}}function Em(t,e,n,r){return n===void 0&&(n=null),Ka({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ao(e):e,{state:n,key:e&&e.key||r||lP()})}function Du(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ao(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function cP(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Yr.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Ka({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function f(){a=Yr.Pop;let x=u(),v=x==null?null:x-c;c=x,l&&l({action:a,location:w.location,delta:v})}function p(x,v){a=Yr.Push;let g=Em(w.location,x,v);n&&n(g,x),c=u()+1;let _=Mw(g,c),E=w.createHref(g);try{o.pushState(_,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(E)}i&&l&&l({action:a,location:w.location,delta:1})}function m(x,v){a=Yr.Replace;let g=Em(w.location,x,v);n&&n(g,x),c=u();let _=Mw(g,c),E=w.createHref(g);o.replaceState(_,"",E),i&&l&&l({action:a,location:w.location,delta:0})}function y(x){let v=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof x=="string"?x:Du(x);return et(v,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,v)}let w={get action(){return a},get location(){return t(s,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Dw,f),l=x,()=>{s.removeEventListener(Dw,f),l=null}},createHref(x){return e(s,x)},createURL:y,encodeLocation(x){let v=y(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:m,go(x){return o.go(x)}};return w}var $w;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})($w||($w={}));function uP(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Ao(e):e,s=xy(r.pathname||"/",n);if(s==null)return null;let i=MS(t);dP(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=_P(i[a],SP(s));return o}function MS(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(et(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ls([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(et(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),MS(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:vP(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of $S(i.path))s(i,o,l)}),e}function $S(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=$S(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function dP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:wP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const fP=/^:\w+$/,hP=3,pP=2,mP=1,gP=10,yP=-2,Vw=t=>t==="*";function vP(t,e){let n=t.split("/"),r=n.length;return n.some(Vw)&&(r+=yP),e&&(r+=pP),n.filter(s=>!Vw(s)).reduce((s,i)=>s+(fP.test(i)?hP:i===""?mP:gP),r)}function wP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function _P(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",u=xP({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let f=a.route;i.push({params:r,pathname:ls([s,u.pathname]),pathnameBase:bP(ls([s,u.pathnameBase])),route:f}),u.pathnameBase!=="/"&&(s=ls([s,u.pathnameBase]))}return i}function xP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=EP(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,f)=>{if(u==="*"){let p=a[f]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}return c[u]=TP(a[f]||"",u),c},{}),pathname:i,pathnameBase:o,pattern:t}}function EP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),_y(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function SP(t){try{return decodeURI(t)}catch(e){return _y(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function TP(t,e){try{return decodeURIComponent(t)}catch(n){return _y(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function xy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function IP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ao(t):t;return{pathname:n?n.startsWith("/")?n:RP(n,e):e,search:AP(r),hash:CP(s)}}function RP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Mh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function VS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function FS(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ao(t):(s=Ka({},t),et(!s.pathname||!s.pathname.includes("?"),Mh("?","pathname","search",s)),et(!s.pathname||!s.pathname.includes("#"),Mh("#","pathname","hash",s)),et(!s.search||!s.search.includes("#"),Mh("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(r||o==null)a=n;else{let f=e.length-1;if(o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=IP(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const ls=t=>t.join("/").replace(/\/\/+/g,"/"),bP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),AP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,CP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const US=["post","put","patch","delete"];new Set(US);const PP=["get",...US];new Set(PP);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mu(){return Mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mu.apply(this,arguments)}const Ey=h.createContext(null),NP=h.createContext(null),Co=h.createContext(null),Ud=h.createContext(null),As=h.createContext({outlet:null,matches:[],isDataRoute:!1}),BS=h.createContext(null);function OP(t,e){let{relative:n}=e===void 0?{}:e;Al()||et(!1);let{basename:r,navigator:s}=h.useContext(Co),{hash:i,pathname:o,search:a}=WS(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ls([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Al(){return h.useContext(Ud)!=null}function Cs(){return Al()||et(!1),h.useContext(Ud).location}function zS(t){h.useContext(Co).static||h.useLayoutEffect(t)}function Or(){let{isDataRoute:t}=h.useContext(As);return t?qP():jP()}function jP(){Al()||et(!1);let t=h.useContext(Ey),{basename:e,navigator:n}=h.useContext(Co),{matches:r}=h.useContext(As),{pathname:s}=Cs(),i=JSON.stringify(VS(r).map(l=>l.pathnameBase)),o=h.useRef(!1);return zS(()=>{o.current=!0}),h.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let u=FS(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:ls([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,i,s,t])}function Bd(){let{matches:t}=h.useContext(As),e=t[t.length-1];return e?e.params:{}}function WS(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=h.useContext(As),{pathname:s}=Cs(),i=JSON.stringify(VS(r).map(o=>o.pathnameBase));return h.useMemo(()=>FS(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function LP(t,e){return DP(t,e)}function DP(t,e,n){Al()||et(!1);let{navigator:r}=h.useContext(Co),{matches:s}=h.useContext(As),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let l=Cs(),c;if(e){var u;let w=typeof e=="string"?Ao(e):e;a==="/"||(u=w.pathname)!=null&&u.startsWith(a)||et(!1),c=w}else c=l;let f=c.pathname||"/",p=a==="/"?f:f.slice(a.length)||"/",m=uP(t,{pathname:p}),y=UP(m&&m.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:ls([a,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?a:ls([a,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n);return e&&y?h.createElement(Ud.Provider,{value:{location:Mu({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Yr.Pop}},y):y}function MP(){let t=HP(),e=kP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},e),n?h.createElement("pre",{style:s},n):null,i)}const $P=h.createElement(MP,null);class VP extends h.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?h.createElement(As.Provider,{value:this.props.routeContext},h.createElement(BS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function FP(t){let{routeContext:e,match:n,children:r}=t,s=h.useContext(Ey);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),h.createElement(As.Provider,{value:e},r)}function UP(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let i=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=i.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||et(!1),i=i.slice(0,Math.min(i.length,a+1))}return i.reduceRight((a,l,c)=>{let u=l.route.id?o==null?void 0:o[l.route.id]:null,f=null;n&&(f=l.route.errorElement||$P);let p=e.concat(i.slice(0,c+1)),m=()=>{let y;return u?y=f:l.route.Component?y=h.createElement(l.route.Component,null):l.route.element?y=l.route.element:y=a,h.createElement(FP,{match:l,routeContext:{outlet:a,matches:p,isDataRoute:n!=null},children:y})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?h.createElement(VP,{location:n.location,revalidation:n.revalidation,component:f,error:u,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var Sm;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(Sm||(Sm={}));var Ga;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(Ga||(Ga={}));function BP(t){let e=h.useContext(Ey);return e||et(!1),e}function zP(t){let e=h.useContext(NP);return e||et(!1),e}function WP(t){let e=h.useContext(As);return e||et(!1),e}function HS(t){let e=WP(),n=e.matches[e.matches.length-1];return n.route.id||et(!1),n.route.id}function HP(){var t;let e=h.useContext(BS),n=zP(Ga.UseRouteError),r=HS(Ga.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function qP(){let{router:t}=BP(Sm.UseNavigateStable),e=HS(Ga.UseNavigateStable),n=h.useRef(!1);return zS(()=>{n.current=!0}),h.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Mu({fromRouteId:e},i)))},[t,e])}function qS(t){et(!1)}function KP(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Yr.Pop,navigator:i,static:o=!1}=t;Al()&&et(!1);let a=e.replace(/^\/*/,"/"),l=h.useMemo(()=>({basename:a,navigator:i,static:o}),[a,i,o]);typeof r=="string"&&(r=Ao(r));let{pathname:c="/",search:u="",hash:f="",state:p=null,key:m="default"}=r,y=h.useMemo(()=>{let w=xy(c,a);return w==null?null:{location:{pathname:w,search:u,hash:f,state:p,key:m},navigationType:s}},[a,c,u,f,p,m,s]);return y==null?null:h.createElement(Co.Provider,{value:l},h.createElement(Ud.Provider,{children:n,value:y}))}function GP(t){let{children:e,location:n}=t;return LP(Tm(e),n)}var Fw;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(Fw||(Fw={}));new Promise(()=>{});function Tm(t,e){e===void 0&&(e=[]);let n=[];return h.Children.forEach(t,(r,s)=>{if(!h.isValidElement(r))return;let i=[...e,s];if(r.type===h.Fragment){n.push.apply(n,Tm(r.props.children,i));return}r.type!==qS&&et(!1),!r.props.index||!r.props.children||et(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Tm(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Im(){return Im=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Im.apply(this,arguments)}function QP(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function YP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function JP(t,e){return t.button===0&&(!e||e==="_self")&&!YP(t)}const XP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],ZP="startTransition",Uw=Cg[ZP];function eN(t){let{basename:e,children:n,future:r,window:s}=t,i=h.useRef();i.current==null&&(i.current=aP({window:s,v5Compat:!0}));let o=i.current,[a,l]=h.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=h.useCallback(f=>{c&&Uw?Uw(()=>l(f)):l(f)},[l,c]);return h.useLayoutEffect(()=>o.listen(u),[o,u]),h.createElement(KP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const tN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tn=h.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u}=e,f=QP(e,XP),{basename:p}=h.useContext(Co),m,y=!1;if(typeof c=="string"&&nN.test(c)&&(m=c,tN))try{let g=new URL(window.location.href),_=c.startsWith("//")?new URL(g.protocol+c):new URL(c),E=xy(_.pathname,p);_.origin===g.origin&&E!=null?c=E+_.search+_.hash:y=!0}catch{}let w=OP(c,{relative:s}),x=rN(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s});function v(g){r&&r(g),g.defaultPrevented||x(g)}return h.createElement("a",Im({},f,{href:m||w,onClick:y||i?r:v,ref:n,target:l}))});var Bw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(Bw||(Bw={}));var zw;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(zw||(zw={}));function rN(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o}=e===void 0?{}:e,a=Or(),l=Cs(),c=WS(t,{relative:o});return h.useCallback(u=>{if(JP(u,n)){u.preventDefault();let f=r!==void 0?r:Du(l)===Du(c);a(t,{replace:f,state:s,preventScrollReset:i,relative:o})}},[l,a,c,r,s,n,t,i,o])}function KS(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=KS(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function sN(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=KS(t))&&(r&&(r+=" "),r+=e);return r}const Ww=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,Hw=sN,iN=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return Hw(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=n==null?void 0:n[c],f=i==null?void 0:i[c];if(u===null)return null;const p=Ww(u)||Ww(f);return s[c][p]}),a=n&&Object.entries(n).reduce((c,u)=>{let[f,p]=u;return p===void 0||(c[f]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:f,className:p,...m}=u;return Object.entries(m).every(y=>{let[w,x]=y;return Array.isArray(x)?x.includes({...i,...a}[w]):{...i,...a}[w]===x})?[...c,f,p]:c},[]);return Hw(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function oN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const aN=h.forwardRef(oN),lN=aN;function cN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}))}const uN=h.forwardRef(cN),dN=uN;function fN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3"}))}const hN=h.forwardRef(fN),pN=hN;function mN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const gN=h.forwardRef(mN),zd=gN;function yN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"}))}const vN=h.forwardRef(yN),GS=vN;function wN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"}))}const _N=h.forwardRef(wN),xN=_N;function EN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}))}const SN=h.forwardRef(EN),TN=SN;function IN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953l7.108-4.062A1.125 1.125 0 0121 8.688v8.123zM11.25 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953L9.567 7.71a1.125 1.125 0 011.683.977v8.123z"}))}const RN=h.forwardRef(IN),bN=RN;function AN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const CN=h.forwardRef(AN),kN=CN;function PN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const NN=h.forwardRef(PN),QS=NN;function ON({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))}const jN=h.forwardRef(ON),va=jN;function LN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"}))}const DN=h.forwardRef(LN),MN=DN;function $N({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"}))}const VN=h.forwardRef($N),FN=VN;function UN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const BN=h.forwardRef(UN),YS=BN;function zN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}const WN=h.forwardRef(zN),Cl=WN;function HN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const qN=h.forwardRef(HN),JS=qN;function KN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"}))}const GN=h.forwardRef(KN),QN=GN;function YN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const JN=h.forwardRef(YN),XS=JN;function XN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const ZN=h.forwardRef(XN),qw=ZN;function eO({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const tO=h.forwardRef(eO),nO=tO;function rO({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const sO=h.forwardRef(rO),iO=sO;function oO({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))}const aO=h.forwardRef(oO),ZS=aO;function lO({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z"}))}const cO=h.forwardRef(lO),eT=cO;function uO({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const dO=h.forwardRef(uO),tT=dO;function fO({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const hO=h.forwardRef(fO),pO=hO;function mO({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const gO=h.forwardRef(mO),nT=gO;function yO({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const vO=h.forwardRef(yO),wO=vO;function _O({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"}))}const xO=h.forwardRef(_O),EO=xO;function SO({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"}))}const TO=h.forwardRef(SO),wa=TO;function IO({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}))}const RO=h.forwardRef(IO),rT=RO;function bO({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const AO=h.forwardRef(bO),ko=AO;function CO({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))}const kO=h.forwardRef(CO),Sy=kO;function PO({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"}))}const NO=h.forwardRef(PO),sT=NO;function OO({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"}))}const jO=h.forwardRef(OO),LO=jO;function DO({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const MO=h.forwardRef(DO),Qa=MO;function $O({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const VO=h.forwardRef($O),FO=VO;function UO({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"}))}const BO=h.forwardRef(UO),zO=BO;function WO({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75L19.5 12m0 0l2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6l4.72-4.72a.75.75 0 011.28.531V19.94a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.506-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.395C2.806 8.757 3.63 8.25 4.51 8.25H6.75z"}))}const HO=h.forwardRef(WO),qO=HO;function KO({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"}))}const GO=h.forwardRef(KO),$u=GO;function QO({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const YO=h.forwardRef(QO),Ty=YO;function JO({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}))}const XO=h.forwardRef(JO),ZO=XO;function e5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const t5=h.forwardRef(e5),n5=t5;function r5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const s5=h.forwardRef(r5),dr=s5,i5=iN("inline-flex items-center hover:brightness-90",{variants:{variant:{default:"",circle:"rounded-[99px] p-[4px] bg-gray-500 bg-opacity-20 text-xl",list:"flex items-center py-[4px] w-full text-[14px]",primary:"px-[20px] py-[5px] text-[14px]"},size:{half:"w-1/2",full:"w-full",small:"h-[20px] w-[20px]",normal:"h-[35px] w-[35px]",large:"h-[40px] w-[40px]"}},defaultVariants:{variant:"default"}}),te=({className:t,children:e,variant:n,size:r,isLoading:s,onClick:i,...o})=>d.jsxs("button",{type:"button",onClick:a=>i?i(a):"",...o,className:i5({variant:n,size:r,className:t}),disabled:s,children:[s?d.jsx(zd,{className:"h-5 w-5 animate-spin"}):null,!s&&e]}),Rm=[{name:"Red",id:"red",type:"dark",bottom_player_bg:"bg-[#3b1113]",side_bar_bg:"bg-[#391b1c]",content_text:"text-[#ca4954]",content_hover_text:"hover:text-[#ca4954]",content_border:"border-[#ca4954]",content_hover_border:"hover:border-[#ca4954]",content_bg:"bg-[#ca4954]  text-[#fff]",content_hover_bg:"hover:bg-[#ca4954] hover:text-[#fff] ",container:"bg-[#2e0f10]"},{name:"Deep blue",id:"deep_blue",type:"dark",bottom_player_bg:"bg-[#111f3b]",side_bar_bg:"bg-[#1b2639]",content_text:"text-[#0c9e85]",content_hover_text:"hover:text-[#0c9e85]",content_border:"border-[#0c9e85]",content_hover_border:"hover:border-[#0c9e85]",content_bg:"bg-[#0c9e85]  text-[#fff]",content_hover_bg:"hover:bg-[#0c9e85] hover:text-[#fff] ",container:"bg-[#0f1a2e]"},{name:"Light green",id:"green_light",type:"light",bottom_player_bg:"bg-[#c0d8d8]",side_bar_bg:"bg-[#dde5e5]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"bg-[#198585] text-[#fff]",content_hover_bg:"hover:bg-[#198585] hover:text-[#fff]",container:"bg-[#ced9d9]"},{name:"Gray",id:"gray",type:"light",bottom_player_bg:"bg-[#dedad1]",side_bar_bg:"bg-[#d9d7d4]",content_text:"text-[#644646]",content_hover_text:"hover:text-[#644646]",content_border:"border-[#644646]",content_hover_border:"hover:border-[#644646]",content_bg:"bg-[#644646]  text-[#fff]",content_hover_bg:"hover:bg-[#644646] hover:text-[#fff]",container:"bg-[#e5e3df]"}],o5=JSON.parse(localStorage.getItem("theme")),Kw=Rm.find(t=>t.id===o5)||Rm[0],iT={theme:{...Kw,alpha:Kw.type==="light"?"[#000]/[.1]":"[#fff]/[.1]"}},a5=(t,e)=>{const n=e.payload.theme;return{theme:{...n,alpha:n.type==="dark"?"[#fff]/[.1]":"[#000]/[.1]"}}},l5=t=>{const[e,n]=h.useReducer(a5,t),r=h.useCallback(s=>{console.log("set theme"),n({type:0,payload:{theme:s}})},[]);return{state:e,setTheme:r}},c5={state:iT,setTheme:()=>{}},oT=h.createContext(c5),u5=({children:t,theme:e})=>d.jsx(oT.Provider,{value:l5(e),children:t}),ct=()=>{const{state:{theme:t},setTheme:e}=h.useContext(oT);return{theme:t,setTheme:e}};function Ve({className:t}){const{theme:e}=ct();return d.jsx("div",{className:`animate-pulse rounded-[4px] bg-${e.alpha} ${t}`})}const aT=[...Array(4).keys()].map(t=>d.jsxs("div",{className:"flex items-center p-[10px]",children:[d.jsx(Ve,{className:"h-[18px] w-[18px]"}),d.jsx(Ve,{className:"h-[54px] w-[54px] ml-[10px] rounded-[4px]"}),d.jsxs("div",{className:"ml-[10px]",children:[d.jsx(Ve,{className:"h-[20px] mb-[5px] w-[150px]"}),d.jsx(Ve,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},t)),Gw=[...Array(1).keys()].map(t=>d.jsx(Ve,{className:"w-full h-[40px] mb-[10px]"},t)),d5=[...Array(2).keys()].map(t=>d.jsxs("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:[d.jsx(Ve,{className:"pt-[100%] rounded-[8px]"}),d.jsx(Ve,{className:"h-[20px] mt-[9px] w-[50%]"})]},t));var f5=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],na=t=>{let e=0;for(let n=0;n<t.length;n++){let r=t[n],s=f5.indexOf(r);e=e*83+s}return e},$h=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},Vh=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},h5=t=>t<0?-1:1,Fh=(t,e)=>h5(t)*Math.pow(Math.abs(t),e),Qw=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},p5=t=>{if(!t||t.length<6)throw new Qw("The blurhash string must be at least 6 characters");let e=na(t[0]),n=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*n)throw new Qw(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*n}`)},m5=t=>{let e=t>>16,n=t>>8&255,r=t&255;return[$h(e),$h(n),$h(r)]},g5=(t,e)=>{let n=Math.floor(t/361),r=Math.floor(t/19)%19,s=t%19;return[Fh((n-9)/9,2)*e,Fh((r-9)/9,2)*e,Fh((s-9)/9,2)*e]},y5=(t,e,n,r)=>{p5(t),r=r|1;let s=na(t[0]),i=Math.floor(s/9)+1,o=s%9+1,a=(na(t[1])+1)/166,l=new Array(o*i);for(let f=0;f<l.length;f++)if(f===0){let p=na(t.substring(2,6));l[f]=m5(p)}else{let p=na(t.substring(4+f*2,6+f*2));l[f]=g5(p,a*r)}let c=e*4,u=new Uint8ClampedArray(c*n);for(let f=0;f<n;f++)for(let p=0;p<e;p++){let m=0,y=0,w=0;for(let _=0;_<i;_++)for(let E=0;E<o;E++){let S=Math.cos(Math.PI*p*E/e)*Math.cos(Math.PI*f*_/n),T=l[E+_*o];m+=T[0]*S,y+=T[1]*S,w+=T[2]*S}let x=Vh(m),v=Vh(y),g=Vh(w);u[4*p+0+f*c]=x,u[4*p+1+f*c]=v,u[4*p+2+f*c]=g,u[4*p+3+f*c]=255}return u},v5=y5,w5=Object.defineProperty,_5=Object.defineProperties,x5=Object.getOwnPropertyDescriptors,Vu=Object.getOwnPropertySymbols,lT=Object.prototype.hasOwnProperty,cT=Object.prototype.propertyIsEnumerable,Yw=(t,e,n)=>e in t?w5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bm=(t,e)=>{for(var n in e||(e={}))lT.call(e,n)&&Yw(t,n,e[n]);if(Vu)for(var n of Vu(e))cT.call(e,n)&&Yw(t,n,e[n]);return t},Am=(t,e)=>_5(t,x5(e)),uT=(t,e)=>{var n={};for(var r in t)lT.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Vu)for(var r of Vu(t))e.indexOf(r)<0&&cT.call(t,r)&&(n[r]=t[r]);return n},dT=class extends h.PureComponent{constructor(){super(...arguments),this.canvas=null,this.handleRef=e=>{this.canvas=e,this.draw()},this.draw=()=>{let{hash:e,height:n,punch:r,width:s}=this.props;if(this.canvas){let i=v5(e,s,n,r),o=this.canvas.getContext("2d"),a=o.createImageData(s,n);a.data.set(i),o.putImageData(a,0,0)}}}componentDidUpdate(){this.draw()}render(){let e=this.props,{hash:n,height:r,width:s}=e,i=uT(e,["hash","height","width"]);return h.createElement("canvas",Am(bm({},i),{height:r,width:s,ref:this.handleRef}))}};dT.defaultProps={height:128,width:128};var E5={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},fT=class extends h.PureComponent{componentDidUpdate(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")}render(){let e=this.props,{hash:n,height:r,width:s,punch:i,resolutionX:o,resolutionY:a,style:l}=e,c=uT(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return h.createElement("div",Am(bm({},c),{style:Am(bm({display:"inline-block",height:r,width:s},l),{position:"relative"})}),h.createElement(dT,{hash:n,height:a,width:o,punch:i,style:E5}))}};fT.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32};function or({src:t,classNames:e,blurHashEncode:n,onError:r}){const[s,i]=h.useState(!1),o=h.useRef(null),a=()=>{i(!0),t&&t!=null&&t.includes("blob")&&(console.log("revoke"),URL.revokeObjectURL(t))},l=()=>{const u=o.current;u.src="https://placehold.co/100",i(!0)},c=()=>{r?(r(),l()):l()};return d.jsxs(d.Fragment,{children:[!s&&d.jsx(d.Fragment,{children:n?d.jsx(fT,{hash:n,height:"100%",width:"100%"}):d.jsx(Ve,{className:"w-full h-0"})}),d.jsx("img",{onLoad:a,onError:c,className:`${e||""} w-full ${s?"":"hidden"}`,src:t||"https://placehold.co/100",ref:o})]})}const S5=({className:t,onClick:e,theme:n})=>d.jsx("div",{className:`w-full rounded-[8px] border ${n.type==="light"?"border-[#333]":"border-[#fff]"} relative`,children:d.jsx("div",{onClick:()=>e(),className:`${n==null?void 0:n.content_hover_text} ${t} cursor-pointer`,children:d.jsx(te,{className:`absolute top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ${n.type==="light"?"text-[#333]":"text-[#fff]"}`,children:d.jsx(Qa,{className:"w-[40px] max-[549px]:w-[30px]"})})})});function Ya({children:t,theme:e,classNames:n}){return d.jsx("div",{className:`rounded  px-[20px] py-[10px] ${e.type==="light"?"text-[#333]":"text-white"} ${e.container} border-[1px] border-${e.alpha} ${n??""}`,children:t})}function Ic({className:t,icon:e,label:n,to:r,arrowIcon:s,onClick:i}){return r?d.jsxs(Tn,{className:"w-full flex flex-row justify-between items-center "+t,to:r,children:[d.jsxs("div",{className:"inline-flex",children:[e,d.jsx("span",{className:"text-lg font-medium",children:n})]}),s&&d.jsx("span",{children:s})]}):i?d.jsx("button",{onClick:i,className:"w-full flex flex-row justify-between items-center "+t,children:d.jsxs("p",{className:"inline-flex",children:[e,d.jsx("span",{className:"text-lg font-medium",children:n})]})}):d.jsx("p",{children:"No onClick"})}const Iy={userSongs:[],userPlaylists:[],adminSongs:[],adminPlaylists:[],initial:!1},T5=(t,e)=>{var r,s;const n=e.payload;switch(console.log("dispatch song context"),e.type){case 2:return{userSongs:n.userSongs||[],userPlaylists:n.userPlaylists||[],adminSongs:n.adminSongs||t.adminSongs,adminPlaylists:n.adminPlaylists||t.adminPlaylists,initial:!!((r=n.adminSongs)!=null&&r.length||(s=n.userSongs)!=null&&s.length)};case 0:return{userSongs:n.userSongs||[],adminSongs:t.adminSongs,userPlaylists:t.userPlaylists,adminPlaylists:t.adminPlaylists,initial:t.initial};case 1:return{adminSongs:t.adminSongs,userSongs:t.userSongs,userPlaylists:n.userPlaylists||[],adminPlaylists:t.adminPlaylists,initial:t.initial};default:return{adminSongs:t.adminSongs,userSongs:t.userSongs,userPlaylists:t.userPlaylists,adminPlaylists:t.adminPlaylists,initial:t.initial}}},I5=t=>{const[e,n]=h.useReducer(T5,t),r=h.useCallback(o=>{n({type:0,payload:{userSongs:o}})},[]),s=h.useCallback(({userSongs:o,adminSongs:a,userPlaylists:l,adminPlaylists:c})=>{n({type:2,payload:{userSongs:o,adminSongs:a,userPlaylists:l,adminPlaylists:c}})},[]),i=h.useCallback(o=>{n({type:1,payload:{userPlaylists:o}})},[]);return{state:e,setUserSongs:r,initSongsContext:s,setUserPlaylists:i}},R5={state:Iy,setUserSongs:()=>{},initSongsContext:()=>{},setUserPlaylists:()=>{}},hT=h.createContext(R5),b5=({children:t,songsStore:e})=>d.jsx(hT.Provider,{value:I5(e),children:t}),fn=()=>{const{state:{adminPlaylists:t,adminSongs:e,initial:n,userPlaylists:r,userSongs:s},initSongsContext:i,setUserSongs:o,setUserPlaylists:a}=h.useContext(hT);return{adminPlaylists:t,adminSongs:e,initial:n,userPlaylists:r,userSongs:s,initSongsContext:i,setUserSongs:o,setUserPlaylists:a}},kl=({data:t,theme:e,selectedSongList:n,active:r,onClick:s,isCheckedSong:i,setSelectedSongList:o,setIsCheckedSong:a})=>{const l=h.useCallback(()=>n?(n==null?void 0:n.indexOf(t))!=-1:!1,[n]),c=f=>{if(console.log("check selected"),!o||!n){console.log("song list item lack of props");return}i||a&&a(!0);let p=[...n];const m=p.indexOf(f);m===-1?p.push(f):p.splice(m,1),o(p),p.length||a&&a(!0)},u={button:`${e.content_bg} rounded-full`,songListButton:"mr-[10px] px-[5px]",itemContainer:`hover:bg-${e.alpha} item-container transition-opacity duration-[.3s] border-b last:border-none border-${e.alpha} flex rounded-[4px] justify-between w-[100%] px-[5px] py-[10px] ${l()&&"bg-"+e.alpha}`,imageFrame:"w-[54px] h-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]"};return d.jsx(d.Fragment,{children:d.jsx("div",{className:`${u.itemContainer}`,children:d.jsxs("div",{className:"flex flex-row w-[100%]",children:[d.jsx(d.Fragment,{children:i?d.jsx("button",{onClick:()=>c(t),className:`${u.songListButton} text-[inherit]`,children:l()?d.jsx(va,{className:"w-[18px]"}):d.jsx($u,{className:"w-[18px]"})}):d.jsx(d.Fragment,{children:d.jsx("button",{onClick:()=>c(t),className:`${u.songListButton} block`,children:d.jsx($u,{className:"w-[18px] "})})})}),d.jsxs("div",{className:"flex-grow flex",onClick:f=>s(f),children:[d.jsxs("div",{className:`${u.imageFrame}`,children:[d.jsx(or,{blurHashEncode:t.blurhash_encode,src:t.image_url}),r&&d.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex songContainers-center items-center justify-center",children:d.jsx(ko,{className:"w-[28px] text-[#fff]"})})]}),d.jsxs("div",{className:"ml-[10px]",children:[d.jsx("h5",{className:`text-mg line-clamp-1 ${r&&e.content_text}`,children:t.name}),d.jsx("p",{className:"text-xs opacity-60 bg-blend-lighten line-clamp-1",children:t.singer})]})]})]})})})};function A5({playlistSongs:t,theme:e,handleAddSongsToPlaylist:n}){const[r,s]=h.useState([]),{userSongs:i}=fn(),o={addSongContainer:"pb-[50px] relative",addSongContent:"max-h-[calc(90vh-50px)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full max-[549px]:w-full"},a=h.useMemo(()=>!!r.length,[r]);return d.jsx("div",{className:o.addSongContainer,children:d.jsxs("div",{className:o.addSongContent,children:[d.jsx(te,{onClick:()=>n(r),variant:"primary",className:`rounded-full ${e.content_bg} absolute bottom-0 right-15px ${!a&&"opacity-60 pointer-events-none"}`,children:"Save"}),i.map((l,c)=>{if(t.indexOf(l)==-1)return d.jsx("div",{className:o.songItem,children:d.jsx(kl,{isCheckedSong:!0,selectedSongList:r,setSelectedSongList:s,theme:e,data:l,active:!1,onClick:()=>{}})},c)})]})})}function pT({children:t,active:e,done:n,firstTimeRender:r,inUpload:s,className:i,scrollBehavior:o}){const a=h.useRef(null),l=()=>{const u=a.current;c(u)},c=u=>{u.scrollIntoView({behavior:(o==null?void 0:o.current)||"smooth",block:"center"})};return h.useEffect(()=>{if(e){if(r.current){r.current=!1;return}l(),o&&o.current!="smooth"&&(o.current="smooth")}},[e]),d.jsxs("p",{ref:a,className:`${i&&i} ${s?"text-[16px]":"text-[30px]"}  select-none  max-[549px]:text-center font-bold ${n&&"opacity-40"} ${s&&"flex"} ${e&&!s&&"text-[#ffed00]"}`,children:[t,s&&e&&d.jsx("span",{className:"ml-[10px] text-[16px]"})]})}function C5({isWaiting:t,isPlaying:e,handlePlayPause:n,hoverClasses:r,isError:s,songInStore:i}){const o=h.useMemo(()=>t?d.jsx(zd,{className:"w-[36px] max-[549px]:w-[46px] animate-spin"}):s&&i.name?d.jsx(ZS,{className:"w-[30px] max-[549px]:w-[40px]"}):e?d.jsx(ko,{className:"w-[50px] max-[549px]:w-[60px]"}):d.jsx(sT,{className:"w-[50px] max-[549px]:w-[60px]"}),[t,s,e]);return d.jsx(d.Fragment,{children:d.jsx("button",{className:`p-[5px] ${r&&r} ${t&&"pointer-events-none"} inline-flex items-center justify-center w-[50px] max-[549px]:w-[60px]`,onClick:()=>n(),children:o})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},k5=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},gT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[u],n[f],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):k5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new P5;const p=i<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),f!==64){const y=c<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class P5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const N5=function(t){const e=mT(t);return gT.encodeByteArray(e,!0)},Fu=function(t){return N5(t).replace(/\./g,"")},yT=function(t){try{return gT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5=()=>O5().__FIREBASE_DEFAULTS__,L5=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},D5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yT(t[1]);return e&&JSON.parse(e)},Wd=()=>{try{return j5()||L5()||D5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vT=t=>{var e,n;return(n=(e=Wd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},wT=t=>{const e=vT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_T=()=>{var t;return(t=Wd())===null||t===void 0?void 0:t.config},xT=t=>{var e;return(e=Wd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Fu(JSON.stringify(n)),Fu(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function V5(){var t;const e=(t=Wd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function F5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function U5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function B5(){const t=Dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function z5(){try{return typeof indexedDB=="object"}catch{return!1}}function W5(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5="FirebaseError";class ar extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=H5,Object.setPrototypeOf(this,ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pl.prototype.create)}}class Pl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?q5(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new ar(s,a,r)}}function q5(t,e){return t.replace(K5,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const K5=/\{\$([^}]+)}/g;function G5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Uu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Jw(i)&&Jw(o)){if(!Uu(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Jw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Q5(t,e){const n=new Y5(t,e);return n.subscribe.bind(n)}class Y5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");J5(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Uh),s.error===void 0&&(s.error=Uh),s.complete===void 0&&(s.complete=Uh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function J5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Uh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t){return t&&t._delegate?t._delegate:t}class gs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let X5=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new M5;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ej(e))try{this.getOrInitializeService({instanceIdentifier:Ls})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ls){return this.instances.has(e)}getOptions(e=Ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Z5(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ls){return this.component?this.component.multipleInstances?e:Ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Z5(t){return t===Ls?void 0:t}function ej(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new X5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const nj={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},rj=xe.INFO,sj={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},ij=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=sj[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ry{constructor(e){this.name=e,this._logLevel=rj,this._logHandler=ij,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const oj=(t,e)=>e.some(n=>t instanceof n);let Xw,Zw;function aj(){return Xw||(Xw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lj(){return Zw||(Zw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ST=new WeakMap,Cm=new WeakMap,TT=new WeakMap,Bh=new WeakMap,by=new WeakMap;function cj(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(cs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ST.set(n,t)}).catch(()=>{}),by.set(e,t),e}function uj(t){if(Cm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Cm.set(t,e)}let km={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Cm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||TT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dj(t){km=t(km)}function fj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(zh(this),e,...n);return TT.set(r,e.sort?e.sort():[e]),cs(r)}:lj().includes(t)?function(...e){return t.apply(zh(this),e),cs(ST.get(this))}:function(...e){return cs(t.apply(zh(this),e))}}function hj(t){return typeof t=="function"?fj(t):(t instanceof IDBTransaction&&uj(t),oj(t,aj())?new Proxy(t,km):t)}function cs(t){if(t instanceof IDBRequest)return cj(t);if(Bh.has(t))return Bh.get(t);const e=hj(t);return e!==t&&(Bh.set(t,e),by.set(e,t)),e}const zh=t=>by.get(t);function pj(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=cs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(cs(o.result),l.oldVersion,l.newVersion,cs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const mj=["get","getKey","getAll","getAllKeys","count"],gj=["put","add","delete","clear"],Wh=new Map;function e_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wh.get(e))return Wh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=gj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||mj.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Wh.set(e,i),i}dj(t=>({...t,get:(e,n,r)=>e_(e,n)||t.get(e,n,r),has:(e,n)=>!!e_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vj(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function vj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pm="@firebase/app",t_="0.9.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri=new Ry("@firebase/app"),wj="@firebase/app-compat",_j="@firebase/analytics-compat",xj="@firebase/analytics",Ej="@firebase/app-check-compat",Sj="@firebase/app-check",Tj="@firebase/auth",Ij="@firebase/auth-compat",Rj="@firebase/database",bj="@firebase/database-compat",Aj="@firebase/functions",Cj="@firebase/functions-compat",kj="@firebase/installations",Pj="@firebase/installations-compat",Nj="@firebase/messaging",Oj="@firebase/messaging-compat",jj="@firebase/performance",Lj="@firebase/performance-compat",Dj="@firebase/remote-config",Mj="@firebase/remote-config-compat",$j="@firebase/storage",Vj="@firebase/storage-compat",Fj="@firebase/firestore",Uj="@firebase/firestore-compat",Bj="firebase",zj="10.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="[DEFAULT]",Wj={[Pm]:"fire-core",[wj]:"fire-core-compat",[xj]:"fire-analytics",[_j]:"fire-analytics-compat",[Sj]:"fire-app-check",[Ej]:"fire-app-check-compat",[Tj]:"fire-auth",[Ij]:"fire-auth-compat",[Rj]:"fire-rtdb",[bj]:"fire-rtdb-compat",[Aj]:"fire-fn",[Cj]:"fire-fn-compat",[kj]:"fire-iid",[Pj]:"fire-iid-compat",[Nj]:"fire-fcm",[Oj]:"fire-fcm-compat",[jj]:"fire-perf",[Lj]:"fire-perf-compat",[Dj]:"fire-rc",[Mj]:"fire-rc-compat",[$j]:"fire-gcs",[Vj]:"fire-gcs-compat",[Fj]:"fire-fst",[Uj]:"fire-fst-compat","fire-js":"fire-js",[Bj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu=new Map,Om=new Map;function Hj(t,e){try{t.container.addComponent(e)}catch(n){ri.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function si(t){const e=t.name;if(Om.has(e))return ri.debug(`There were multiple attempts to register component ${e}.`),!1;Om.set(e,t);for(const n of Bu.values())Hj(n,t);return!0}function Hd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},us=new Pl("app","Firebase",qj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=zj;function IT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Nm,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw us.create("bad-app-name",{appName:String(s)});if(n||(n=_T()),!n)throw us.create("no-options");const i=Bu.get(s);if(i){if(Uu(n,i.options)&&Uu(r,i.config))return i;throw us.create("duplicate-app",{appName:s})}const o=new tj(s);for(const l of Om.values())o.addComponent(l);const a=new Kj(n,r,o);return Bu.set(s,a),a}function Ay(t=Nm){const e=Bu.get(t);if(!e&&t===Nm&&_T())return IT();if(!e)throw us.create("no-app",{appName:t});return e}function Xn(t,e,n){var r;let s=(r=Wj[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ri.warn(a.join(" "));return}si(new gs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj="firebase-heartbeat-database",Qj=1,Ja="firebase-heartbeat-store";let Hh=null;function RT(){return Hh||(Hh=pj(Gj,Qj,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ja)}}}).catch(t=>{throw us.create("idb-open",{originalErrorMessage:t.message})})),Hh}async function Yj(t){try{return await(await RT()).transaction(Ja).objectStore(Ja).get(bT(t))}catch(e){if(e instanceof ar)ri.warn(e.message);else{const n=us.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ri.warn(n.message)}}}async function n_(t,e){try{const r=(await RT()).transaction(Ja,"readwrite");await r.objectStore(Ja).put(e,bT(t)),await r.done}catch(n){if(n instanceof ar)ri.warn(n.message);else{const r=us.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ri.warn(r.message)}}}function bT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj=1024,Xj=30*24*60*60*1e3;class Zj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new tL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=r_();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=Xj}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=r_(),{heartbeatsToSend:n,unsentEntries:r}=eL(this._heartbeatsCache.heartbeats),s=Fu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function r_(){return new Date().toISOString().substring(0,10)}function eL(t,e=Jj){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),s_(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),s_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class tL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return z5()?W5().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Yj(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return n_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return n_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function s_(t){return Fu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nL(t){si(new gs("platform-logger",e=>new yj(e),"PRIVATE")),si(new gs("heartbeat",e=>new Zj(e),"PRIVATE")),Xn(Pm,t_,t),Xn(Pm,t_,"esm2017"),Xn("fire-js","")}nL("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="firebasestorage.googleapis.com",CT="storageBucket",rL=2*60*1e3,sL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge extends ar{constructor(e,n,r=0){super(qh(e),`Firebase Storage: ${n} (${qh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ge.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return qh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var qe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(qe||(qe={}));function qh(t){return"storage/"+t}function Cy(){const t="An unknown error occurred, please check the error payload for server response.";return new Ge(qe.UNKNOWN,t)}function iL(t){return new Ge(qe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function oL(t){return new Ge(qe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function aL(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ge(qe.UNAUTHENTICATED,t)}function lL(){return new Ge(qe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function cL(t){return new Ge(qe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function uL(){return new Ge(qe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dL(){return new Ge(qe.CANCELED,"User canceled the upload/download.")}function fL(t){return new Ge(qe.INVALID_URL,"Invalid URL '"+t+"'.")}function hL(t){return new Ge(qe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function pL(){return new Ge(qe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+CT+"' property when initializing the app?")}function mL(){return new Ge(qe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function gL(){return new Ge(qe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function yL(t){return new Ge(qe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function jm(t){return new Ge(qe.INVALID_ARGUMENT,t)}function kT(){return new Ge(qe.APP_DELETED,"The Firebase app was deleted.")}function vL(t){return new Ge(qe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _a(t,e){return new Ge(qe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Go(t){throw new Ge(qe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=tn.makeFromUrl(e,n)}catch{return new tn(e,"")}if(r.path==="")return r;throw hL(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(E){E.path_=decodeURIComponent(E.path)}const u="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${u}/b/${s}/o${p}`,"i"),y={bucket:1,path:3},w=n===AT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",v=new RegExp(`^https?://${w}/${s}/${x}`,"i"),_=[{regex:a,indices:l,postModify:i},{regex:m,indices:y,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let E=0;E<_.length;E++){const S=_[E],T=S.regex.exec(e);if(T){const I=T[S.indices.bucket];let R=T[S.indices.path];R||(R=""),r=new tn(I,R),S.postModify(r);break}}if(r==null)throw fL(e);return r}}class wL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...x){c||(c=!0,e.apply(null,x))}function f(x){s=setTimeout(()=>{s=null,t(m,l())},x)}function p(){i&&clearTimeout(i)}function m(x,...v){if(c){p();return}if(x){p(),u.call(null,x,...v);return}if(l()||o){p(),u.call(null,x,...v);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,f(_)}let y=!1;function w(x){y||(y=!0,p(),!c&&(s!==null?(x||(a=2),clearTimeout(s),f(0)):x||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,w(!0)},n),w}function xL(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(t){return t!==void 0}function SL(t){return typeof t=="object"&&!Array.isArray(t)}function ky(t){return typeof t=="string"||t instanceof String}function i_(t){return Py()&&t instanceof Blob}function Py(){return typeof Blob<"u"&&!V5()}function o_(t,e,n,r){if(r<e)throw jm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw jm(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function PT(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ks;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ks||(Ks={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e,n,r,s,i,o,a,l,c,u,f,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,y)=>{this.resolve_=m,this.reject_=y,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Rc(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Ks.NO_ERROR,l=i.getStatus();if(!a||TL(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===Ks.ABORT;r(!1,new Rc(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Rc(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());EL(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Cy();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?kT():dL();o(l)}else{const l=uL();o(l)}};this.canceled_?n(!1,new Rc(!1,null,!0)):this.backoffId_=_L(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&xL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Rc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function RL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function bL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function AL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function CL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function kL(t,e,n,r,s,i,o=!0){const a=PT(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return AL(c,e),RL(c,n),bL(c,i),CL(c,r),new IL(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function NL(...t){const e=PL();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Py())return new Blob(t);throw new Ge(qe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function OL(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(t){if(typeof atob>"u")throw yL("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Kh{constructor(e,n){this.data=e,this.contentType=n||null}}function LL(t,e){switch(t){case qn.RAW:return new Kh(NT(e));case qn.BASE64:case qn.BASE64URL:return new Kh(OT(t,e));case qn.DATA_URL:return new Kh(ML(e),$L(e))}throw Cy()}function NT(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function DL(t){let e;try{e=decodeURIComponent(t)}catch{throw _a(qn.DATA_URL,"Malformed data URL.")}return NT(e)}function OT(t,e){switch(t){case qn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw _a(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case qn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw _a(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=jL(e)}catch(s){throw s.message.includes("polyfill")?s:_a(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class jT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw _a(qn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=VL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function ML(t){const e=new jT(t);return e.base64?OT(qn.BASE64,e.rest):DL(e.rest)}function $L(t){return new jT(t).contentType}function VL(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n){let r=0,s="";i_(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(i_(this.data_)){const r=this.data_,s=OL(r,e,n);return s===null?null:new zr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new zr(r,!0)}}static getBlob(...e){if(Py()){const n=e.map(r=>r instanceof zr?r.data_:r);return new zr(NL.apply(null,n))}else{const n=e.map(o=>ky(o)?LL(qn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new zr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(t){let e;try{e=JSON.parse(t)}catch{return null}return SL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function UL(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function DT(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(t,e){return e}class $t{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||BL}}let bc=null;function zL(t){return!ky(t)||t.length<2?t:DT(t)}function MT(){if(bc)return bc;const t=[];t.push(new $t("bucket")),t.push(new $t("generation")),t.push(new $t("metageneration")),t.push(new $t("name","fullPath",!0));function e(i,o){return zL(o)}const n=new $t("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new $t("size");return s.xform=r,t.push(s),t.push(new $t("timeCreated")),t.push(new $t("updated")),t.push(new $t("md5Hash",null,!0)),t.push(new $t("cacheControl",null,!0)),t.push(new $t("contentDisposition",null,!0)),t.push(new $t("contentEncoding",null,!0)),t.push(new $t("contentLanguage",null,!0)),t.push(new $t("contentType",null,!0)),t.push(new $t("metadata","customMetadata",!0)),bc=t,bc}function WL(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new tn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function HL(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return WL(r,t),r}function $T(t,e,n){const r=LT(e);return r===null?null:HL(t,r,n)}function qL(t,e,n,r){const s=LT(e);if(s===null||!ky(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const u=t.bucket,f=t.fullPath,p="/b/"+o(u)+"/o/"+o(f),m=qd(p,n,r),y=PT({alt:"media",token:c});return m+y})[0]}function KL(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Ny{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(t){if(!t)throw Cy()}function GL(t,e){function n(r,s){const i=$T(t,s,e);return VT(i!==null),i}return n}function QL(t,e){function n(r,s){const i=$T(t,s,e);return VT(i!==null),qL(i,s,t.host,t._protocol)}return n}function FT(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=lL():s=aL():n.getStatus()===402?s=oL(t.bucket):n.getStatus()===403?s=cL(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function UT(t){const e=FT(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=iL(t.path)),i.serverResponse=s.serverResponse,i}return n}function YL(t,e,n){const r=e.fullServerUrl(),s=qd(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Ny(s,i,QL(t,n),o);return a.errorHandler=UT(e),a}function JL(t,e){const n=e.fullServerUrl(),r=qd(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new Ny(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=UT(e),a}function XL(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function ZL(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=XL(null,e)),r}function eD(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let E=0;E<2;E++)_=_+Math.random().toString().slice(2);return _}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=ZL(e,r,s),u=KL(c,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=zr.getBlob(f,r,p);if(m===null)throw mL();const y={name:c.fullPath},w=qd(i,t.host,t._protocol),x="POST",v=t.maxUploadRetryTime,g=new Ny(w,x,GL(t,n),v);return g.urlParams=y,g.headers=o,g.body=m.uploadData(),g.errorHandler=FT(e),g}class tD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ks.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ks.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ks.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Go("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Go("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Go("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Go("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Go("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class nD extends tD{initXhr(){this.xhr_.responseType="text"}}function Oy(){return new nD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n){this._service=e,n instanceof tn?this._location=n:this._location=tn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ii(e,n)}get root(){const e=new tn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return DT(this._location.path)}get storage(){return this._service}get parent(){const e=FL(this._location.path);if(e===null)return null;const n=new tn(this._location.bucket,e);return new ii(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw vL(e)}}function rD(t,e,n){t._throwIfRoot("uploadBytes");const r=eD(t.storage,t._location,MT(),new zr(e,!0),n);return t.storage.makeRequestWithTokens(r,Oy).then(s=>({metadata:s,ref:t}))}function sD(t){t._throwIfRoot("getDownloadURL");const e=YL(t.storage,t._location,MT());return t.storage.makeRequestWithTokens(e,Oy).then(n=>{if(n===null)throw gL();return n})}function iD(t){t._throwIfRoot("deleteObject");const e=JL(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Oy)}function oD(t,e){const n=UL(t._location.path,e),r=new tn(t._location.bucket,n);return new ii(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(t){return/^[A-Za-z]+:\/\//.test(t)}function lD(t,e){return new ii(t,e)}function BT(t,e){if(t instanceof jy){const n=t;if(n._bucket==null)throw pL();const r=new ii(n,n._bucket);return e!=null?BT(r,e):r}else return e!==void 0?oD(t,e):t}function cD(t,e){if(e&&aD(e)){if(t instanceof jy)return lD(t,e);throw jm("To use ref(service, url), the first argument must be a Storage instance.")}else return BT(t,e)}function a_(t,e){const n=e==null?void 0:e[CT];return n==null?null:tn.makeFromBucketSpec(n,t)}function uD(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:ET(s,t.app.options.projectId))}class jy{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=AT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=rL,this._maxUploadRetryTime=sL,this._requests=new Set,s!=null?this._bucket=tn.makeFromBucketSpec(s,this._host):this._bucket=a_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=tn.makeFromBucketSpec(this._url,e):this._bucket=a_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){o_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){o_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ii(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new wL(kT());{const o=kL(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const l_="@firebase/storage",c_="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="storage";function WT(t,e,n){return t=lt(t),rD(t,e,n)}function HT(t){return t=lt(t),sD(t)}function dD(t){return t=lt(t),iD(t)}function Ly(t,e){return t=lt(t),cD(t,e)}function fD(t=Ay(),e){t=lt(t);const r=Hd(t,zT).getImmediate({identifier:e}),s=wT("storage");return s&&hD(r,...s),r}function hD(t,e,n,r={}){uD(t,e,n,r)}function pD(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new jy(n,r,s,e,gi)}function mD(){si(new gs(zT,pD,"PUBLIC").setMultipleInstances(!0)),Xn(l_,c_,""),Xn(l_,c_,"esm2017")}mD();var gD="firebase",yD="10.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn(gD,yD,"app");function Dy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function qT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vD=qT,KT=new Pl("auth","Firebase",qT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu=new Ry("@firebase/auth");function wD(t,...e){zu.logLevel<=xe.WARN&&zu.warn(`Auth (${gi}): ${t}`,...e)}function Xc(t,...e){zu.logLevel<=xe.ERROR&&zu.error(`Auth (${gi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,...e){throw My(t,...e)}function Zn(t,...e){return My(t,...e)}function GT(t,e,n){const r=Object.assign(Object.assign({},vD()),{[e]:n});return new Pl("auth","Firebase",r).create(e,{appName:t.name})}function _D(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&sr(t,"argument-error"),GT(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function My(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return KT.create(t,...e)}function fe(t,e,...n){if(!t)throw My(e,...n)}function pr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xc(e),new Error(e)}function Ir(t,e){t||pr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function xD(){return u_()==="http:"||u_()==="https:"}function u_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xD()||F5()||"connection"in navigator)?navigator.onLine:!0}function SD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ir(n>e,"Short delay should be less than long delay!"),this.isMobile=$5()||U5()}get(){return ED()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(t,e){Ir(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=new Ol(3e4,6e4);function YT(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function jl(t,e,n,r,s={}){return JT(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Nl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),QT.fetch()(XT(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function JT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},TD),e);try{const s=new bD(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ac(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ac(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ac(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ac(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw GT(t,u,c);sr(t,u)}}catch(s){if(s instanceof ar)throw s;sr(t,"network-request-failed",{message:String(s)})}}async function RD(t,e,n,r,s={}){const i=await jl(t,e,n,r,s);return"mfaPendingCredential"in i&&sr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function XT(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?$y(t.config,s):`${t.config.apiScheme}://${s}`}class bD{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Zn(this.auth,"network-request-failed")),ID.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ac(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Zn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AD(t,e){return jl(t,"POST","/v1/accounts:delete",e)}async function CD(t,e){return jl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kD(t,e=!1){const n=lt(t),r=await n.getIdToken(e),s=Vy(r);fe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:xa(Gh(s.auth_time)),issuedAtTime:xa(Gh(s.iat)),expirationTime:xa(Gh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Gh(t){return Number(t)*1e3}function Vy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Xc("JWT malformed, contained fewer than 3 sections"),null;try{const s=yT(n);return s?JSON.parse(s):(Xc("Failed to decode base64 JWT payload"),null)}catch(s){return Xc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function PD(t){const e=Vy(t);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ar&&ND(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ND({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xa(this.lastLoginAt),this.creationTime=xa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Xa(t,CD(n,{idToken:r}));fe(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?DD(i.providerUserInfo):[],a=LD(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new ZT(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function jD(t){const e=lt(t);await Wu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LD(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function DD(t){return t.map(e=>{var{providerId:n}=e,r=Dy(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MD(t,e){const n=await JT(t,{},async()=>{const r=Nl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=XT(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",QT.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):PD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return fe(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await MD(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Za;return r&&(fe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(fe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(fe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Za,this.toJSON())}_performRefresh(){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(t,e){fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Gs{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Dy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new OD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ZT(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Xa(this,this.stsTokenManager.getToken(this.auth,e));return fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return kD(this,e)}reload(){return jD(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Gs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Wu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Xa(this,AD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,u;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:_,emailVerified:E,isAnonymous:S,providerData:T,stsTokenManager:I}=n;fe(_&&I,e,"internal-error");const R=Za.fromJSON(this.name,I);fe(typeof _=="string",e,"internal-error"),Mr(f,e.name),Mr(p,e.name),fe(typeof E=="boolean",e,"internal-error"),fe(typeof S=="boolean",e,"internal-error"),Mr(m,e.name),Mr(y,e.name),Mr(w,e.name),Mr(x,e.name),Mr(v,e.name),Mr(g,e.name);const C=new Gs({uid:_,auth:e,email:p,emailVerified:E,displayName:f,isAnonymous:S,photoURL:y,phoneNumber:m,tenantId:w,stsTokenManager:R,createdAt:v,lastLoginAt:g});return T&&Array.isArray(T)&&(C.providerData=T.map(b=>Object.assign({},b))),x&&(C._redirectEventId=x),C}static async _fromIdTokenResponse(e,n,r=!1){const s=new Za;s.updateFromServerResponse(n);const i=new Gs({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Wu(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_=new Map;function mr(t){Ir(t instanceof Function,"Expected a class definition");let e=d_.get(t);return e?(Ir(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,d_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}eI.type="NONE";const f_=eI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(t,e,n){return`firebase:${t}:${e}:${n}`}class Yi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Zc(this.userKey,s.apiKey,i),this.fullPersistenceKey=Zc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Gs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Yi(mr(f_),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||mr(f_);const o=Zc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const f=Gs._fromJSON(e,u);c!==i&&(a=f),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Yi(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Yi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iI(e))return"Blackberry";if(oI(e))return"Webos";if(Fy(e))return"Safari";if((e.includes("chrome/")||nI(e))&&!e.includes("edge/"))return"Chrome";if(sI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function tI(t=Dt()){return/firefox\//i.test(t)}function Fy(t=Dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nI(t=Dt()){return/crios\//i.test(t)}function rI(t=Dt()){return/iemobile/i.test(t)}function sI(t=Dt()){return/android/i.test(t)}function iI(t=Dt()){return/blackberry/i.test(t)}function oI(t=Dt()){return/webos/i.test(t)}function Kd(t=Dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function $D(t=Dt()){var e;return Kd(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function VD(){return B5()&&document.documentMode===10}function aI(t=Dt()){return Kd(t)||sI(t)||oI(t)||iI(t)||/windows phone/i.test(t)||rI(t)}function FD(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(t,e=[]){let n;switch(t){case"Browser":n=h_(Dt());break;case"Worker":n=`${h_(Dt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BD(t,e={}){return jl(t,"GET","/v2/passwordPolicy",YT(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD=6;class WD{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:zD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new p_(this),this.idTokenSubscription=new p_(this),this.beforeStateQueue=new UD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=KT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=mr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Yi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?lt(e):null;return n&&fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(mr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await BD(this),n=new WD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Pl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&mr(e)||this._popupRedirectResolver;fe(n,this,"argument-error"),this.redirectPersistenceManager=await Yi.create(this,[mr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&wD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Gd(t){return lt(t)}class p_{constructor(e){this.auth=e,this.observer=null,this.addObserver=Q5(n=>this.observer=n)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function KD(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Zn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",qD().appendChild(r)})}function GD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(t,e){const n=Hd(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Uu(i,e??{}))return s;sr(s,"already-initialized")}return n.initialize({options:e})}function YD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(mr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function JD(t,e,n){const r=Gd(t);fe(r._canInitEmulator,r,"emulator-config-failed"),fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=cI(e),{host:o,port:a}=XD(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||ZD()}function cI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function XD(t){const e=cI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:m_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:m_(o)}}}function m_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ZD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pr("not implemented")}_getIdTokenResponse(e){return pr("not implemented")}_linkToIdToken(e,n){return pr("not implemented")}_getReauthenticationResolver(e){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ji(t,e){return RD(t,"POST","/v1/accounts:signInWithIdp",YT(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4="http://localhost";class oi extends uI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new oi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):sr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Dy(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new oi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ji(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ji(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ji(e,n)}buildRequest(){const e={requestUri:e4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Nl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends Uy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends Ll{constructor(){super("facebook.com")}static credential(e){return oi._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn extends Ll{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return oi._fromParams({providerId:Bn.PROVIDER_ID,signInMethod:Bn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Bn.credentialFromTaggedObject(e)}static credentialFromError(e){return Bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Bn.credential(n,r)}catch{return null}}}Bn.GOOGLE_SIGN_IN_METHOD="google.com";Bn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends Ll{constructor(){super("github.com")}static credential(e){return oi._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hr.credential(e.oauthAccessToken)}catch{return null}}}Hr.GITHUB_SIGN_IN_METHOD="github.com";Hr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends Ll{constructor(){super("twitter.com")}static credential(e,n){return oi._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return qr.credential(n,r)}catch{return null}}}qr.TWITTER_SIGN_IN_METHOD="twitter.com";qr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Gs._fromIdTokenResponse(e,r,s),o=g_(r);return new fo({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=g_(r);return new fo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function g_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu extends ar{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Hu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Hu(e,n,r,s)}}function dI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Hu._fromErrorAndOperation(t,i,e,r):i})}async function t4(t,e,n=!1){const r=await Xa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n4(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await Xa(t,dI(r,s,e,t),n);fe(i.idToken,r,"internal-error");const o=Vy(i.idToken);fe(o,r,"internal-error");const{sub:a}=o;return fe(t.uid===a,r,"user-mismatch"),fo._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&sr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r4(t,e,n=!1){const r="signIn",s=await dI(t,r,e),i=await fo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function s4(t,e,n,r){return lt(t).onIdTokenChanged(e,n,r)}function i4(t,e,n){return lt(t).beforeAuthStateChanged(e,n)}function o4(t,e,n,r){return lt(t).onAuthStateChanged(e,n,r)}function a4(t){return lt(t).signOut()}const qu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qu,"1"),this.storage.removeItem(qu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(){const t=Dt();return Fy(t)||Kd(t)}const c4=1e3,u4=10;class hI extends fI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=l4()&&FD(),this.fallbackToPolling=aI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);VD()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,u4):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},c4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}hI.type="LOCAL";const d4=hI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI extends fI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}pI.type="SESSION";const mI=pI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Qd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await f4(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=By("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return window}function p4(t){er().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(){return typeof er().WorkerGlobalScope<"u"&&typeof er().importScripts=="function"}async function m4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function g4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function y4(){return gI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="firebaseLocalStorageDb",v4=1,Ku="firebaseLocalStorage",vI="fbase_key";class Dl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yd(t,e){return t.transaction([Ku],e?"readwrite":"readonly").objectStore(Ku)}function w4(){const t=indexedDB.deleteDatabase(yI);return new Dl(t).toPromise()}function Dm(){const t=indexedDB.open(yI,v4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ku,{keyPath:vI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ku)?e(r):(r.close(),await w4(),e(await Dm()))})})}async function y_(t,e,n){const r=Yd(t,!0).put({[vI]:e,value:n});return new Dl(r).toPromise()}async function _4(t,e){const n=Yd(t,!1).get(e),r=await new Dl(n).toPromise();return r===void 0?null:r.value}function v_(t,e){const n=Yd(t,!0).delete(e);return new Dl(n).toPromise()}const x4=800,E4=3;class wI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>E4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qd._getInstance(y4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await m4(),!this.activeServiceWorker)return;this.sender=new h4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||g4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dm();return await y_(e,qu,"1"),await v_(e,qu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>y_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>_4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>v_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Yd(s,!1).getAll();return new Dl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),x4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wI.type="LOCAL";const S4=wI;new Ol(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(t,e){return e?mr(e):(fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy extends uI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ji(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ji(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ji(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function T4(t){return r4(t.auth,new zy(t),t.bypassAuthState)}function I4(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),n4(n,new zy(t),t.bypassAuthState)}async function R4(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),t4(n,new zy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return T4;case"linkViaPopup":case"linkViaRedirect":return R4;case"reauthViaPopup":case"reauthViaRedirect":return I4;default:sr(this.auth,"internal-error")}}resolve(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=new Ol(2e3,1e4);async function A4(t,e,n){const r=Gd(t);_D(t,e,Uy);const s=_I(r,n);return new Us(r,"signInViaPopup",e,s).executeNotNull()}class Us extends xI{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Us.currentPopupAction&&Us.currentPopupAction.cancel(),Us.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){Ir(this.filter.length===1,"Popup operations only handle one event");const e=By();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Us.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,b4.get())};e()}}Us.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4="pendingRedirect",eu=new Map;class k4 extends xI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=eu.get(this.auth._key());if(!e){try{const r=await P4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}eu.set(this.auth._key(),e)}return this.bypassAuthState||eu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function P4(t,e){const n=j4(e),r=O4(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function N4(t,e){eu.set(t._key(),e)}function O4(t){return mr(t._redirectPersistence)}function j4(t){return Zc(C4,t.config.apiKey,t.name)}async function L4(t,e,n=!1){const r=Gd(t),s=_I(r,e),o=await new k4(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=10*60*1e3;class M4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!EI(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Zn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=D4&&this.cachedEventUids.clear(),this.cachedEventUids.has(w_(e))}saveEventToCache(e){this.cachedEventUids.add(w_(e)),this.lastProcessedEventTime=Date.now()}}function w_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function EI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return EI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V4(t,e={}){return jl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,U4=/^https?/;async function B4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await V4(t);for(const n of e)try{if(z4(n))return}catch{}sr(t,"unauthorized-domain")}function z4(t){const e=Lm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!U4.test(n))return!1;if(F4.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4=new Ol(3e4,6e4);function __(){const t=er().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function H4(t){return new Promise((e,n)=>{var r,s,i;function o(){__(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{__(),n(Zn(t,"network-request-failed"))},timeout:W4.get()})}if(!((s=(r=er().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=er().gapi)===null||i===void 0)&&i.load)o();else{const a=GD("iframefcb");return er()[a]=()=>{gapi.load?o():n(Zn(t,"network-request-failed"))},KD(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw tu=null,e})}let tu=null;function q4(t){return tu=tu||H4(t),tu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4=new Ol(5e3,15e3),G4="__/auth/iframe",Q4="emulator/auth/iframe",Y4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},J4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function X4(t){const e=t.config;fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?$y(e,Q4):`https://${t.config.authDomain}/${G4}`,r={apiKey:e.apiKey,appName:t.name,v:gi},s=J4.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Nl(r).slice(1)}`}async function Z4(t){const e=await q4(t),n=er().gapi;return fe(n,t,"internal-error"),e.open({where:document.body,url:X4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Y4,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Zn(t,"network-request-failed"),a=er().setTimeout(()=>{i(o)},K4.get());function l(){er().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tM=500,nM=600,rM="_blank",sM="http://localhost";class x_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function iM(t,e,n,r=tM,s=nM){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},eM),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Dt().toLowerCase();n&&(a=nI(c)?rM:n),tI(c)&&(e=e||sM,l.scrollbars="yes");const u=Object.entries(l).reduce((p,[m,y])=>`${p}${m}=${y},`,"");if($D(c)&&a!=="_self")return oM(e||"",a),new x_(null);const f=window.open(e||"",a,u);fe(f,t,"popup-blocked");try{f.focus()}catch{}return new x_(f)}function oM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM="__/auth/handler",lM="emulator/auth/handler",cM=encodeURIComponent("fac");async function E_(t,e,n,r,s,i){fe(t.config.authDomain,t,"auth-domain-config-required"),fe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:gi,eventId:s};if(e instanceof Uy){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",G5(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,f]of Object.entries(i||{}))o[u]=f}if(e instanceof Ll){const u=e.getScopes().filter(f=>f!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${cM}=${encodeURIComponent(l)}`:"";return`${uM(t)}?${Nl(a).slice(1)}${c}`}function uM({config:t}){return t.emulator?$y(t,lM):`https://${t.authDomain}/${aM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh="webStorageSupport";class dM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mI,this._completeRedirectFn=L4,this._overrideRedirectResult=N4}async _openPopup(e,n,r,s){var i;Ir((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await E_(e,n,r,Lm(),s);return iM(e,o,By())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await E_(e,n,r,Lm(),s);return p4(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ir(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Z4(e),r=new M4(e);return n.register("authEvent",s=>(fe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qh,{type:Qh},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Qh];o!==void 0&&n(!!o),sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=B4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return aI()||Fy()||Kd()}}const fM=dM;var S_="@firebase/auth",T_="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function mM(t){si(new gs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;fe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lI(t)},c=new HD(r,s,i,l);return YD(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),si(new gs("auth-internal",e=>{const n=Gd(e.getProvider("auth").getImmediate());return(r=>new hM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xn(S_,T_,pM(t)),Xn(S_,T_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=5*60,yM=xT("authIdTokenMaxAge")||gM;let I_=null;const vM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>yM)return;const s=n==null?void 0:n.token;I_!==s&&(I_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function wM(t=Ay()){const e=Hd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=QD(t,{popupRedirectResolver:fM,persistence:[S4,d4,mI]}),r=xT("authTokenSyncURL");if(r){const i=vM(r);i4(n,i,()=>i(n.currentUser)),s4(n,o=>i(o))}const s=vT("auth");return s&&JD(n,`http://${s}`),n}mM("Browser");var _M=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},H,Wy=Wy||{},le=_M||self;function Jd(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Ml(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function xM(t){return Object.prototype.hasOwnProperty.call(t,Yh)&&t[Yh]||(t[Yh]=++EM)}var Yh="closure_uid_"+(1e9*Math.random()>>>0),EM=0;function SM(t,e,n){return t.call.apply(t.bind,arguments)}function TM(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Nt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Nt=SM:Nt=TM,Nt.apply(null,arguments)}function Cc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function mt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function ks(){this.s=this.s,this.o=this.o}var IM=0;ks.prototype.s=!1;ks.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),IM!=0)&&xM(this)};ks.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const SI=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Hy(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function R_(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Jd(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function Ot(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ot.prototype.h=function(){this.defaultPrevented=!0};var RM=function(){if(!le.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{le.addEventListener("test",()=>{},e),le.removeEventListener("test",()=>{},e)}catch{}return t}();function el(t){return/^[\s\xa0]*$/.test(t)}function Xd(){var t=le.navigator;return t&&(t=t.userAgent)?t:""}function zn(t){return Xd().indexOf(t)!=-1}function qy(t){return qy[" "](t),t}qy[" "]=function(){};function bM(t,e){var n=w$;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var AM=zn("Opera"),ho=zn("Trident")||zn("MSIE"),TI=zn("Edge"),Mm=TI||ho,II=zn("Gecko")&&!(Xd().toLowerCase().indexOf("webkit")!=-1&&!zn("Edge"))&&!(zn("Trident")||zn("MSIE"))&&!zn("Edge"),CM=Xd().toLowerCase().indexOf("webkit")!=-1&&!zn("Edge");function RI(){var t=le.document;return t?t.documentMode:void 0}var $m;e:{var Jh="",Xh=function(){var t=Xd();if(II)return/rv:([^\);]+)(\)|;)/.exec(t);if(TI)return/Edge\/([\d\.]+)/.exec(t);if(ho)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(CM)return/WebKit\/(\S+)/.exec(t);if(AM)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Xh&&(Jh=Xh?Xh[1]:""),ho){var Zh=RI();if(Zh!=null&&Zh>parseFloat(Jh)){$m=String(Zh);break e}}$m=Jh}var Vm;if(le.document&&ho){var b_=RI();Vm=b_||parseInt($m,10)||void 0}else Vm=void 0;var kM=Vm;function tl(t,e){if(Ot.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(II){e:{try{qy(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:PM[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&tl.$.h.call(this)}}mt(tl,Ot);var PM={2:"touch",3:"pen",4:"mouse"};tl.prototype.h=function(){tl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var $l="closure_listenable_"+(1e6*Math.random()|0),NM=0;function OM(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++NM,this.fa=this.ia=!1}function Zd(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Ky(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function jM(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function bI(t){const e={};for(const n in t)e[n]=t[n];return e}const A_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function AI(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<A_.length;i++)n=A_[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ef(t){this.src=t,this.g={},this.h=0}ef.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=Um(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new OM(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function Fm(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=SI(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Zd(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Um(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var Gy="closure_lm_"+(1e6*Math.random()|0),ep={};function CI(t,e,n,r,s){if(r&&r.once)return PI(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)CI(t,e[i],n,r,s);return null}return n=Jy(n),t&&t[$l]?t.O(e,n,Ml(r)?!!r.capture:!!r,s):kI(t,e,n,!1,r,s)}function kI(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=Ml(s)?!!s.capture:!!s,a=Yy(t);if(a||(t[Gy]=a=new ef(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=LM(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)RM||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(OI(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function LM(){function t(n){return e.call(t.src,t.listener,n)}const e=DM;return t}function PI(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)PI(t,e[i],n,r,s);return null}return n=Jy(n),t&&t[$l]?t.P(e,n,Ml(r)?!!r.capture:!!r,s):kI(t,e,n,!0,r,s)}function NI(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)NI(t,e[i],n,r,s);else r=Ml(r)?!!r.capture:!!r,n=Jy(n),t&&t[$l]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=Um(i,n,r,s),-1<n&&(Zd(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=Yy(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Um(e,n,r,s)),(n=-1<t?e[t]:null)&&Qy(n))}function Qy(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[$l])Fm(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(OI(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Yy(e))?(Fm(n,t),n.h==0&&(n.src=null,e[Gy]=null)):Zd(t)}}}function OI(t){return t in ep?ep[t]:ep[t]="on"+t}function DM(t,e){if(t.fa)t=!0;else{e=new tl(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Qy(t),t=n.call(r,e)}return t}function Yy(t){return t=t[Gy],t instanceof ef?t:null}var tp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jy(t){return typeof t=="function"?t:(t[tp]||(t[tp]=function(e){return t.handleEvent(e)}),t[tp])}function pt(){ks.call(this),this.i=new ef(this),this.S=this,this.J=null}mt(pt,ks);pt.prototype[$l]=!0;pt.prototype.removeEventListener=function(t,e,n,r){NI(this,t,e,n,r)};function xt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Ot(e,t);else if(e instanceof Ot)e.target=e.target||t;else{var s=e;e=new Ot(r,t),AI(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=kc(o,r,!0,e)&&s}if(o=e.g=t,s=kc(o,r,!0,e)&&s,s=kc(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=kc(o,r,!1,e)&&s}pt.prototype.N=function(){if(pt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Zd(n[r]);delete t.g[e],t.h--}}this.J=null};pt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};pt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function kc(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Fm(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var Xy=le.JSON.stringify;class MM{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function $M(){var t=Zy;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class VM{constructor(){this.h=this.g=null}add(e,n){const r=jI.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var jI=new MM(()=>new FM,t=>t.reset());class FM{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function UM(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function BM(t){le.setTimeout(()=>{throw t},0)}let nl,rl=!1,Zy=new VM,LI=()=>{const t=le.Promise.resolve(void 0);nl=()=>{t.then(zM)}};var zM=()=>{for(var t;t=$M();){try{t.h.call(t.g)}catch(n){BM(n)}var e=jI;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}rl=!1};function tf(t,e){pt.call(this),this.h=t||1,this.g=e||le,this.j=Nt(this.qb,this),this.l=Date.now()}mt(tf,pt);H=tf.prototype;H.ga=!1;H.T=null;H.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),xt(this,"tick"),this.ga&&(e0(this),this.start()))}};H.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function e0(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}H.N=function(){tf.$.N.call(this),e0(this),delete this.g};function t0(t,e,n){if(typeof t=="function")n&&(t=Nt(t,n));else if(t&&typeof t.handleEvent=="function")t=Nt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:le.setTimeout(t,e||0)}function DI(t){t.g=t0(()=>{t.g=null,t.i&&(t.i=!1,DI(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class WM extends ks{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:DI(this)}N(){super.N(),this.g&&(le.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sl(t){ks.call(this),this.h=t,this.g={}}mt(sl,ks);var C_=[];function MI(t,e,n,r){Array.isArray(n)||(n&&(C_[0]=n.toString()),n=C_);for(var s=0;s<n.length;s++){var i=CI(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function $I(t){Ky(t.g,function(e,n){this.g.hasOwnProperty(n)&&Qy(e)},t),t.g={}}sl.prototype.N=function(){sl.$.N.call(this),$I(this)};sl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function nf(){this.g=!0}nf.prototype.Ea=function(){this.g=!1};function HM(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var f=u.split("_");o=2<=f.length&&f[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function qM(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function Vi(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+GM(t,n)+(r?" "+r:"")})}function KM(t,e){t.info(function(){return"TIMEOUT: "+e})}nf.prototype.info=function(){};function GM(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Xy(n)}catch{return e}}var yi={},k_=null;function rf(){return k_=k_||new pt}yi.Ta="serverreachability";function VI(t){Ot.call(this,yi.Ta,t)}mt(VI,Ot);function il(t){const e=rf();xt(e,new VI(e))}yi.STAT_EVENT="statevent";function FI(t,e){Ot.call(this,yi.STAT_EVENT,t),this.stat=e}mt(FI,Ot);function Ft(t){const e=rf();xt(e,new FI(e,t))}yi.Ua="timingevent";function UI(t,e){Ot.call(this,yi.Ua,t),this.size=e}mt(UI,Ot);function Vl(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return le.setTimeout(function(){t()},e)}var sf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},BI={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function n0(){}n0.prototype.h=null;function P_(t){return t.h||(t.h=t.i())}function zI(){}var Fl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function r0(){Ot.call(this,"d")}mt(r0,Ot);function s0(){Ot.call(this,"c")}mt(s0,Ot);var Bm;function of(){}mt(of,n0);of.prototype.g=function(){return new XMLHttpRequest};of.prototype.i=function(){return{}};Bm=new of;function Ul(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new sl(this),this.P=QM,t=Mm?125:void 0,this.V=new tf(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new WI}function WI(){this.i=null,this.g="",this.h=!1}var QM=45e3,zm={},Gu={};H=Ul.prototype;H.setTimeout=function(t){this.P=t};function Wm(t,e,n){t.L=1,t.v=lf(Rr(e)),t.s=n,t.S=!0,HI(t,null)}function HI(t,e){t.G=Date.now(),Bl(t),t.A=Rr(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),ZI(n.i,"t",r),t.C=0,n=t.l.J,t.h=new WI,t.g=_R(t.l,n?e:null,!t.s),0<t.O&&(t.M=new WM(Nt(t.Pa,t,t.g),t.O)),MI(t.U,t.g,"readystatechange",t.nb),e=t.I?bI(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),il(),HM(t.j,t.u,t.A,t.m,t.W,t.s)}H.nb=function(t){t=t.target;const e=this.M;e&&Kn(t)==3?e.l():this.Pa(t)};H.Pa=function(t){try{if(t==this.g)e:{const u=Kn(this.g);var e=this.g.Ia();const f=this.g.da();if(!(3>u)&&(u!=3||Mm||this.g&&(this.h.h||this.g.ja()||L_(this.g)))){this.J||u!=4||e==7||(e==8||0>=f?il(3):il(2)),af(this);var n=this.g.da();this.ca=n;t:if(qI(this)){var r=L_(this.g);t="";var s=r.length,i=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Bs(this),Ea(this);var o="";break t}this.h.i=new le.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,qM(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!el(a)){var c=a;break t}}c=null}if(n=c)Vi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hm(this,n);else{this.i=!1,this.o=3,Ft(12),Bs(this),Ea(this);break e}}this.S?(KI(this,u,o),Mm&&this.i&&u==3&&(MI(this.U,this.V,"tick",this.mb),this.V.start())):(Vi(this.j,this.m,o,null),Hm(this,o)),u==4&&Bs(this),this.i&&!this.J&&(u==4?gR(this.l,this):(this.i=!1,Bl(this)))}else g$(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Ft(12)):(this.o=0,Ft(13)),Bs(this),Ea(this)}}}catch{}finally{}};function qI(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function KI(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=YM(t,n),s==Gu){e==4&&(t.o=4,Ft(14),r=!1),Vi(t.j,t.m,null,"[Incomplete Response]");break}else if(s==zm){t.o=4,Ft(15),Vi(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Vi(t.j,t.m,s,null),Hm(t,s);qI(t)&&s!=Gu&&s!=zm&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Ft(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),u0(e),e.M=!0,Ft(11))):(Vi(t.j,t.m,n,"[Invalid Chunked Response]"),Bs(t),Ea(t))}H.mb=function(){if(this.g){var t=Kn(this.g),e=this.g.ja();this.C<e.length&&(af(this),KI(this,t,e),this.i&&t!=4&&Bl(this))}};function YM(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Gu:(n=Number(e.substring(n,r)),isNaN(n)?zm:(r+=1,r+n>e.length?Gu:(e=e.slice(r,r+n),t.C=r+n,e)))}H.cancel=function(){this.J=!0,Bs(this)};function Bl(t){t.Y=Date.now()+t.P,GI(t,t.P)}function GI(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Vl(Nt(t.lb,t),e)}function af(t){t.B&&(le.clearTimeout(t.B),t.B=null)}H.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(KM(this.j,this.A),this.L!=2&&(il(),Ft(17)),Bs(this),this.o=2,Ea(this)):GI(this,this.Y-t)};function Ea(t){t.l.H==0||t.J||gR(t.l,t)}function Bs(t){af(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,e0(t.V),$I(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Hm(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||qm(n.i,t))){if(!t.K&&qm(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Ju(n),ff(n);else break e;c0(n),Ft(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=Vl(Nt(n.ib,n),6e3));if(1>=nR(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else zs(n,11)}else if((t.K||n.g==t)&&Ju(n),!el(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const f=c[4];f!=null&&(n.Ga=f,n.l.info("SVER="+n.Ga));const p=c[5];p!=null&&typeof p=="number"&&0<p&&(r=1.5*p,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const y=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var i=r.i;i.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(i0(i,i.h),i.h=null))}if(r.F){const w=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(r.Da=w,Ne(r.I,r.F,w))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=wR(r,r.J?r.pa:null,r.Y),o.K){rR(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(af(a),Bl(a)),r.g=o}else pR(r);0<n.j.length&&hf(n)}else c[0]!="stop"&&c[0]!="close"||zs(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?zs(n,7):l0(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}il(4)}catch{}}function JM(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Jd(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function XM(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Jd(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function QI(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Jd(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=XM(t),r=JM(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var YI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ZM(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Qs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Qs){this.h=t.h,Qu(this,t.j),this.s=t.s,this.g=t.g,Yu(this,t.m),this.l=t.l;var e=t.i,n=new ol;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),N_(this,n),this.o=t.o}else t&&(e=String(t).match(YI))?(this.h=!1,Qu(this,e[1]||"",!0),this.s=ra(e[2]||""),this.g=ra(e[3]||"",!0),Yu(this,e[4]),this.l=ra(e[5]||"",!0),N_(this,e[6]||"",!0),this.o=ra(e[7]||"")):(this.h=!1,this.i=new ol(null,this.h))}Qs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(sa(e,O_,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(sa(e,O_,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(sa(n,n.charAt(0)=="/"?n$:t$,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",sa(n,s$)),t.join("")};function Rr(t){return new Qs(t)}function Qu(t,e,n){t.j=n?ra(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Yu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function N_(t,e,n){e instanceof ol?(t.i=e,i$(t.i,t.h)):(n||(e=sa(e,r$)),t.i=new ol(e,t.h))}function Ne(t,e,n){t.i.set(e,n)}function lf(t){return Ne(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ra(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function sa(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,e$),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function e$(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var O_=/[#\/\?@]/g,t$=/[#\?:]/g,n$=/[#\?]/g,r$=/[#\?@]/g,s$=/#/g;function ol(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ps(t){t.g||(t.g=new Map,t.h=0,t.i&&ZM(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}H=ol.prototype;H.add=function(t,e){Ps(this),this.i=null,t=Po(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function JI(t,e){Ps(t),e=Po(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function XI(t,e){return Ps(t),e=Po(t,e),t.g.has(e)}H.forEach=function(t,e){Ps(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};H.ta=function(){Ps(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};H.Z=function(t){Ps(this);let e=[];if(typeof t=="string")XI(this,t)&&(e=e.concat(this.g.get(Po(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};H.set=function(t,e){return Ps(this),this.i=null,t=Po(this,t),XI(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};H.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function ZI(t,e,n){JI(t,e),0<n.length&&(t.i=null,t.g.set(Po(t,e),Hy(n)),t.h+=n.length)}H.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function Po(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function i$(t,e){e&&!t.j&&(Ps(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(JI(this,r),ZI(this,s,n))},t)),t.j=e}var o$=class{constructor(t,e){this.g=t,this.map=e}};function eR(t){this.l=t||a$,le.PerformanceNavigationTiming?(t=le.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(le.g&&le.g.Ka&&le.g.Ka()&&le.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var a$=10;function tR(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function nR(t){return t.h?1:t.g?t.g.size:0}function qm(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function i0(t,e){t.g?t.g.add(e):t.h=e}function rR(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}eR.prototype.cancel=function(){if(this.i=sR(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function sR(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Hy(t.i)}var l$=class{stringify(t){return le.JSON.stringify(t,void 0)}parse(t){return le.JSON.parse(t,void 0)}};function c$(){this.g=new l$}function u$(t,e,n){const r=n||"";try{QI(t,function(s,i){let o=s;Ml(s)&&(o=Xy(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function d$(t,e){const n=new nf;if(le.Image){const r=new Image;r.onload=Cc(Pc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Cc(Pc,n,r,"TestLoadImage: error",!1,e),r.onabort=Cc(Pc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Cc(Pc,n,r,"TestLoadImage: timeout",!1,e),le.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Pc(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function cf(t){this.l=t.fc||null,this.j=t.ob||!1}mt(cf,n0);cf.prototype.g=function(){return new uf(this.l,this.j)};cf.prototype.i=function(t){return function(){return t}}({});function uf(t,e){pt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=o0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mt(uf,pt);var o0=0;H=uf.prototype;H.open=function(t,e){if(this.readyState!=o0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,al(this)};H.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||le).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};H.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zl(this)),this.readyState=o0};H.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,al(this)),this.g&&(this.readyState=3,al(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof le.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;iR(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function iR(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}H.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?zl(this):al(this),this.readyState==3&&iR(this)}};H.Za=function(t){this.g&&(this.response=this.responseText=t,zl(this))};H.Ya=function(t){this.g&&(this.response=t,zl(this))};H.ka=function(){this.g&&zl(this)};function zl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,al(t)}H.setRequestHeader=function(t,e){this.v.append(t,e)};H.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};H.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function al(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(uf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var f$=le.JSON.parse;function Ke(t){pt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=oR,this.L=this.M=!1}mt(Ke,pt);var oR="",h$=/^https?$/i,p$=["POST","PUT"];H=Ke.prototype;H.Oa=function(t){this.M=t};H.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Bm.g(),this.C=this.u?P_(this.u):P_(Bm),this.g.onreadystatechange=Nt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){j_(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=le.FormData&&t instanceof le.FormData,!(0<=SI(p$,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{cR(this),0<this.B&&((this.L=m$(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Nt(this.ua,this)):this.A=t0(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){j_(this,i)}};function m$(t){return ho&&typeof t.timeout=="number"&&t.ontimeout!==void 0}H.ua=function(){typeof Wy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xt(this,"timeout"),this.abort(8))};function j_(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,aR(t),df(t)}function aR(t){t.F||(t.F=!0,xt(t,"complete"),xt(t,"error"))}H.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,xt(this,"complete"),xt(this,"abort"),df(this))};H.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),df(this,!0)),Ke.$.N.call(this)};H.La=function(){this.s||(this.G||this.v||this.l?lR(this):this.kb())};H.kb=function(){lR(this)};function lR(t){if(t.h&&typeof Wy<"u"&&(!t.C[1]||Kn(t)!=4||t.da()!=2)){if(t.v&&Kn(t)==4)t0(t.La,0,t);else if(xt(t,"readystatechange"),Kn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(YI)[1]||null;!s&&le.self&&le.self.location&&(s=le.self.location.protocol.slice(0,-1)),r=!h$.test(s?s.toLowerCase():"")}n=r}if(n)xt(t,"complete"),xt(t,"success");else{t.m=6;try{var i=2<Kn(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",aR(t)}}finally{df(t)}}}}function df(t,e){if(t.g){cR(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||xt(t,"ready");try{n.onreadystatechange=r}catch{}}}function cR(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(le.clearTimeout(t.A),t.A=null)}H.isActive=function(){return!!this.g};function Kn(t){return t.g?t.g.readyState:0}H.da=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}};H.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};H.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),f$(e)}};function L_(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case oR:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function g$(t){const e={};t=(t.g&&2<=Kn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(el(t[r]))continue;var n=UM(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}jM(e,function(r){return r.join(", ")})}H.Ia=function(){return this.m};H.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function uR(t){let e="";return Ky(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function a0(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=uR(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ne(t,e,n))}function Qo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function dR(t){this.Ga=0,this.j=[],this.l=new nf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Qo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Qo("baseRetryDelayMs",5e3,t),this.hb=Qo("retryDelaySeedMs",1e4,t),this.eb=Qo("forwardChannelMaxRetries",2,t),this.xa=Qo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new eR(t&&t.concurrentRequestLimit),this.Ja=new c$,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}H=dR.prototype;H.ra=8;H.H=1;function l0(t){if(fR(t),t.H==3){var e=t.W++,n=Rr(t.I);if(Ne(n,"SID",t.K),Ne(n,"RID",e),Ne(n,"TYPE","terminate"),Wl(t,n),e=new Ul(t,t.l,e),e.L=2,e.v=lf(Rr(n)),n=!1,le.navigator&&le.navigator.sendBeacon)try{n=le.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&le.Image&&(new Image().src=e.v,n=!0),n||(e.g=_R(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Bl(e)}vR(t)}function ff(t){t.g&&(u0(t),t.g.cancel(),t.g=null)}function fR(t){ff(t),t.u&&(le.clearTimeout(t.u),t.u=null),Ju(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&le.clearTimeout(t.m),t.m=null)}function hf(t){if(!tR(t.i)&&!t.m){t.m=!0;var e=t.Na;nl||LI(),rl||(nl(),rl=!0),Zy.add(e,t),t.C=0}}function y$(t,e){return nR(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Vl(Nt(t.Na,t,e),yR(t,t.C)),t.C++,!0)}H.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new Ul(this,this.l,t);let i=this.s;if(this.U&&(i?(i=bI(i),AI(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=hR(this,s,e),n=Rr(this.I),Ne(n,"RID",t),Ne(n,"CVER",22),this.F&&Ne(n,"X-HTTP-Session-Id",this.F),Wl(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(uR(i)))+"&"+e:this.o&&a0(n,this.o,i)),i0(this.i,s),this.bb&&Ne(n,"TYPE","init"),this.P?(Ne(n,"$req",e),Ne(n,"SID","null"),s.aa=!0,Wm(s,n,null)):Wm(s,n,e),this.H=2}}else this.H==3&&(t?D_(this,t):this.j.length==0||tR(this.i)||D_(this))};function D_(t,e){var n;e?n=e.m:n=t.W++;const r=Rr(t.I);Ne(r,"SID",t.K),Ne(r,"RID",n),Ne(r,"AID",t.V),Wl(t,r),t.o&&t.s&&a0(r,t.o,t.s),n=new Ul(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=hR(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),i0(t.i,n),Wm(n,r,e)}function Wl(t,e){t.na&&Ky(t.na,function(n,r){Ne(e,r,n)}),t.h&&QI({},function(n,r){Ne(e,r,n)})}function hR(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Nt(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const u=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{u$(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function pR(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;nl||LI(),rl||(nl(),rl=!0),Zy.add(e,t),t.A=0}}function c0(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Vl(Nt(t.Ma,t),yR(t,t.A)),t.A++,!0)}H.Ma=function(){if(this.u=null,mR(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Vl(Nt(this.jb,this),t)}};H.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ft(10),ff(this),mR(this))};function u0(t){t.B!=null&&(le.clearTimeout(t.B),t.B=null)}function mR(t){t.g=new Ul(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Rr(t.wa);Ne(e,"RID","rpc"),Ne(e,"SID",t.K),Ne(e,"AID",t.V),Ne(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ne(e,"TO",t.qa),Ne(e,"TYPE","xmlhttp"),Wl(t,e),t.o&&t.s&&a0(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=lf(Rr(e)),n.s=null,n.S=!0,HI(n,t)}H.ib=function(){this.v!=null&&(this.v=null,ff(this),c0(this),Ft(19))};function Ju(t){t.v!=null&&(le.clearTimeout(t.v),t.v=null)}function gR(t,e){var n=null;if(t.g==e){Ju(t),u0(t),t.g=null;var r=2}else if(qm(t.i,e))n=e.F,rR(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=rf(),xt(r,new UI(r,n)),hf(t)}else pR(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&y$(t,e)||r==2&&c0(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:zs(t,5);break;case 4:zs(t,10);break;case 3:zs(t,6);break;default:zs(t,2)}}}function yR(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function zs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Nt(t.pb,t);n||(n=new Qs("//www.google.com/images/cleardot.gif"),le.location&&le.location.protocol=="http"||Qu(n,"https"),lf(n)),d$(n.toString(),r)}else Ft(2);t.H=0,t.h&&t.h.za(e),vR(t),fR(t)}H.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Ft(2)):(this.l.info("Failed to ping google.com"),Ft(1))};function vR(t){if(t.H=0,t.ma=[],t.h){const e=sR(t.i);(e.length!=0||t.j.length!=0)&&(R_(t.ma,e),R_(t.ma,t.j),t.i.i.length=0,Hy(t.j),t.j.length=0),t.h.ya()}}function wR(t,e,n){var r=n instanceof Qs?Rr(n):new Qs(n);if(r.g!="")e&&(r.g=e+"."+r.g),Yu(r,r.m);else{var s=le.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new Qs(null);r&&Qu(i,r),e&&(i.g=e),s&&Yu(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&Ne(r,n,e),Ne(r,"VER",t.ra),Wl(t,r),r}function _R(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Ke(new cf({ob:!0})):new Ke(t.va),e.Oa(t.J),e}H.isActive=function(){return!!this.h&&this.h.isActive(this)};function xR(){}H=xR.prototype;H.Ba=function(){};H.Aa=function(){};H.za=function(){};H.ya=function(){};H.isActive=function(){return!0};H.Va=function(){};function Xu(){if(ho&&!(10<=Number(kM)))throw Error("Environmental error: no available transport.")}Xu.prototype.g=function(t,e){return new an(t,e)};function an(t,e){pt.call(this),this.g=new dR(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!el(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!el(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new No(this)}mt(an,pt);an.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Ft(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=wR(t,null,t.Y),hf(t)};an.prototype.close=function(){l0(this.g)};an.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Xy(t),t=n);e.j.push(new o$(e.fb++,t)),e.H==3&&hf(e)};an.prototype.N=function(){this.g.h=null,delete this.j,l0(this.g),delete this.g,an.$.N.call(this)};function ER(t){r0.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}mt(ER,r0);function SR(){s0.call(this),this.status=1}mt(SR,s0);function No(t){this.g=t}mt(No,xR);No.prototype.Ba=function(){xt(this.g,"a")};No.prototype.Aa=function(t){xt(this.g,new ER(t))};No.prototype.za=function(t){xt(this.g,new SR)};No.prototype.ya=function(){xt(this.g,"b")};function v$(){this.blockSize=-1}function Dn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}mt(Dn,v$);Dn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function np(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}Dn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)np(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){np(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){np(this,r),s=0;break}}this.h=s,this.i+=e};Dn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Te(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var w$={};function d0(t){return-128<=t&&128>t?bM(t,function(e){return new Te([e|0],0>e?-1:0)}):new Te([t|0],0>t?-1:0)}function Gn(t){if(isNaN(t)||!isFinite(t))return Xi;if(0>t)return wt(Gn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Km;return new Te(e,0)}function TR(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return wt(TR(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Gn(Math.pow(e,8)),r=Xi,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=Gn(Math.pow(e,i)),r=r.R(i).add(Gn(o))):(r=r.R(n),r=r.add(Gn(o)))}return r}var Km=4294967296,Xi=d0(0),Gm=d0(1),M_=d0(16777216);H=Te.prototype;H.ea=function(){if(yn(this))return-wt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Km+r)*e,e*=Km}return t};H.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(gr(this))return"0";if(yn(this))return"-"+wt(this).toString(t);for(var e=Gn(Math.pow(t,6)),n=this,r="";;){var s=ed(n,e).g;n=Zu(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,gr(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};H.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function gr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function yn(t){return t.h==-1}H.X=function(t){return t=Zu(this,t),yn(t)?-1:gr(t)?0:1};function wt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Te(n,~t.h).add(Gm)}H.abs=function(){return yn(this)?wt(this):this};H.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new Te(n,n[n.length-1]&-2147483648?-1:0)};function Zu(t,e){return t.add(wt(e))}H.R=function(t){if(gr(this)||gr(t))return Xi;if(yn(this))return yn(t)?wt(this).R(wt(t)):wt(wt(this).R(t));if(yn(t))return wt(this.R(wt(t)));if(0>this.X(M_)&&0>t.X(M_))return Gn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,Nc(n,2*r+2*s),n[2*r+2*s+1]+=i*l,Nc(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Nc(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Nc(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Te(n,0)};function Nc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Yo(t,e){this.g=t,this.h=e}function ed(t,e){if(gr(e))throw Error("division by zero");if(gr(t))return new Yo(Xi,Xi);if(yn(t))return e=ed(wt(t),e),new Yo(wt(e.g),wt(e.h));if(yn(e))return e=ed(t,wt(e)),new Yo(wt(e.g),e.h);if(30<t.g.length){if(yn(t)||yn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Gm,r=e;0>=r.X(t);)n=$_(n),r=$_(r);var s=xi(n,1),i=xi(r,1);for(r=xi(r,2),n=xi(n,2);!gr(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=xi(r,1),n=xi(n,1)}return e=Zu(t,s.R(e)),new Yo(s,e)}for(s=Xi;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Gn(n),o=i.R(e);yn(o)||0<o.X(t);)n-=r,i=Gn(n),o=i.R(e);gr(i)&&(i=Gm),s=s.add(i),t=Zu(t,o)}return new Yo(s,t)}H.gb=function(t){return ed(this,t).h};H.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Te(n,this.h&t.h)};H.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Te(n,this.h|t.h)};H.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Te(n,this.h^t.h)};function $_(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Te(n,t.h)}function xi(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new Te(s,t.h)}Xu.prototype.createWebChannel=Xu.prototype.g;an.prototype.send=an.prototype.u;an.prototype.open=an.prototype.m;an.prototype.close=an.prototype.close;sf.NO_ERROR=0;sf.TIMEOUT=8;sf.HTTP_ERROR=6;BI.COMPLETE="complete";zI.EventType=Fl;Fl.OPEN="a";Fl.CLOSE="b";Fl.ERROR="c";Fl.MESSAGE="d";pt.prototype.listen=pt.prototype.O;Ke.prototype.listenOnce=Ke.prototype.P;Ke.prototype.getLastError=Ke.prototype.Sa;Ke.prototype.getLastErrorCode=Ke.prototype.Ia;Ke.prototype.getStatus=Ke.prototype.da;Ke.prototype.getResponseJson=Ke.prototype.Wa;Ke.prototype.getResponseText=Ke.prototype.ja;Ke.prototype.send=Ke.prototype.ha;Ke.prototype.setWithCredentials=Ke.prototype.Oa;Dn.prototype.digest=Dn.prototype.l;Dn.prototype.reset=Dn.prototype.reset;Dn.prototype.update=Dn.prototype.j;Te.prototype.add=Te.prototype.add;Te.prototype.multiply=Te.prototype.R;Te.prototype.modulo=Te.prototype.gb;Te.prototype.compare=Te.prototype.X;Te.prototype.toNumber=Te.prototype.ea;Te.prototype.toString=Te.prototype.toString;Te.prototype.getBits=Te.prototype.D;Te.fromNumber=Gn;Te.fromString=TR;var _$=function(){return new Xu},x$=function(){return rf()},rp=sf,E$=BI,S$=yi,V_={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Oc=zI,T$=Ke,I$=Dn,Zi=Te;const F_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}At.UNAUTHENTICATED=new At(null),At.GOOGLE_CREDENTIALS=new At("google-credentials-uid"),At.FIRST_PARTY=new At("first-party-uid"),At.MOCK_USER=new At("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo="10.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=new Ry("@firebase/firestore");function U_(){return ai.logLevel}function X(t,...e){if(ai.logLevel<=xe.DEBUG){const n=e.map(f0);ai.debug(`Firestore (${Oo}): ${t}`,...n)}}function br(t,...e){if(ai.logLevel<=xe.ERROR){const n=e.map(f0);ai.error(`Firestore (${Oo}): ${t}`,...n)}}function po(t,...e){if(ai.logLevel<=xe.WARN){const n=e.map(f0);ai.warn(`Firestore (${Oo}): ${t}`,...n)}}function f0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${Oo}) INTERNAL ASSERTION FAILED: `+t;throw br(e),new Error(e)}function Le(t,e){t||oe()}function pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends ar{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class R${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(At.UNAUTHENTICATED))}shutdown(){}}class b${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class A${constructor(e){this.t=e,this.currentUser=At.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new vr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new vr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string"),new IR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string"),new At(e)}}class C${constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=At.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class k${constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new C$(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(At.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class P${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class N${constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string"),this.R=n.token,new P$(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=O$(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function mo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new tt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.timestamp=e}static fromTimestamp(e){return new de(e)}static min(){return new de(new tt(0,0))}static max(){return new de(new tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ll.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ll?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Oe extends ll{construct(e,n,r){return new Oe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Oe(n)}static emptyPath(){return new Oe([])}}const j$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends ll{construct(e,n,r){return new Pt(e,n,r)}static isValidIdentifier(e){return j$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new G(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new G(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Oe.fromString(e))}static fromName(e){return new ne(Oe.fromString(e).popFirst(5))}static empty(){return new ne(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Oe(e.slice()))}}function L$(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=de.fromTimestamp(r===1e9?new tt(n+1,0):new tt(n,r));return new ys(s,ne.empty(),e)}function D$(t){return new ys(t.readTime,t.key,-1)}class ys{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ys(de.min(),ne.empty(),-1)}static max(){return new ys(de.max(),ne.empty(),-1)}}function M$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class V${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hl(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==$$)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(s=>s?V.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new V((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,n){return new V((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function ql(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}h0.ae=-1;function pf(t){return t==null}function td(t){return t===0&&1/t==-1/0}function F$(t){return typeof t=="number"&&Number.isInteger(t)&&!td(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function jo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){this.comparator=e,this.root=n||vt.EMPTY}insert(e,n){return new We(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vt.BLACK,null,null))}remove(e){return new We(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jc(this.root,e,this.comparator,!1)}getReverseIterator(){return new jc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jc(this.root,e,this.comparator,!0)}}class jc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??vt.RED,this.left=s??vt.EMPTY,this.right=i??vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new vt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return vt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}vt.EMPTY=null,vt.RED=!0,vt.BLACK=!1;vt.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,r,s,i){return this}insert(e,n,r){return new vt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new z_(this.data.getIterator())}getIteratorFrom(e){return new z_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new jt(this.comparator);return n.data=e,n}}class z_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new Nn([])}unionWith(e){let n=new jt(Pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return mo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new AR("Invalid base64 string: "+i):i}}(e);return new Mt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const U$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vs(t){if(Le(!!t),typeof t=="string"){let e=0;const n=U$.exec(t);if(Le(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Je(t.seconds),nanos:Je(t.nanos)}}function Je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function li(t){return typeof t=="string"?Mt.fromBase64String(t):Mt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function m0(t){const e=t.mapValue.fields.__previous_value__;return p0(e)?m0(e):e}function cl(t){const e=vs(t.mapValue.fields.__local_write_time__.timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B${constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class ul{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ul("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ul&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ci(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?p0(t)?4:z$(t)?9007199254740991:10:oe()}function ir(t,e){if(t===e)return!0;const n=ci(t);if(n!==ci(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return cl(t).isEqual(cl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=vs(s.timestampValue),a=vs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return li(s.bytesValue).isEqual(li(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Je(s.geoPointValue.latitude)===Je(i.geoPointValue.latitude)&&Je(s.geoPointValue.longitude)===Je(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Je(s.integerValue)===Je(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Je(s.doubleValue),a=Je(i.doubleValue);return o===a?td(o)===td(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return mo(t.arrayValue.values||[],e.arrayValue.values||[],ir);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(B_(o)!==B_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ir(o[l],a[l])))return!1;return!0}(t,e);default:return oe()}}function dl(t,e){return(t.values||[]).find(n=>ir(n,e))!==void 0}function go(t,e){if(t===e)return 0;const n=ci(t),r=ci(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Je(i.integerValue||i.doubleValue),l=Je(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return W_(t.timestampValue,e.timestampValue);case 4:return W_(cl(t),cl(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(i,o){const a=li(i),l=li(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Ee(a[c],l[c]);if(u!==0)return u}return Ee(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ee(Je(i.latitude),Je(o.latitude));return a!==0?a:Ee(Je(i.longitude),Je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=go(a[c],l[c]);if(u)return u}return Ee(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Lc.mapValue&&o===Lc.mapValue)return 0;if(i===Lc.mapValue)return 1;if(o===Lc.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const p=Ee(l[f],u[f]);if(p!==0)return p;const m=go(a[l[f]],c[u[f]]);if(m!==0)return m}return Ee(l.length,u.length)}(t.mapValue,e.mapValue);default:throw oe()}}function W_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=vs(t),r=vs(e),s=Ee(n.seconds,r.seconds);return s!==0?s:Ee(n.nanos,r.nanos)}function yo(t){return Qm(t)}function Qm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=vs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return li(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Qm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Qm(n.fields[o])}`;return s+"}"}(t.mapValue):oe()}function H_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ym(t){return!!t&&"integerValue"in t}function g0(t){return!!t&&"arrayValue"in t}function q_(t){return!!t&&"nullValue"in t}function K_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nu(t){return!!t&&"mapValue"in t}function Sa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return jo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Sa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Sa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function z$(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!nu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sa(n)}setAll(e){let n=Pt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Sa(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());nu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ir(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];nu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){jo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new vn(Sa(this.value))}}function CR(t){const e=[];return jo(t.fields,(n,r)=>{const s=new Pt([n]);if(nu(r)){const i=CR(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new kt(e,0,de.min(),de.min(),de.min(),vn.empty(),0)}static newFoundDocument(e,n,r,s){return new kt(e,1,n,de.min(),r,s,0)}static newNoDocument(e,n){return new kt(e,2,n,de.min(),de.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new kt(e,3,n,de.min(),de.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n){this.position=e,this.inclusive=n}}function G_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=go(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Q_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ir(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n="asc"){this.field=e,this.dir=n}}function W$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{}class Ze extends kR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new q$(e,n,r):n==="array-contains"?new Q$(e,r):n==="in"?new Y$(e,r):n==="not-in"?new J$(e,r):n==="array-contains-any"?new X$(e,r):new Ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new K$(e,r):new G$(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(go(n,this.value)):n!==null&&ci(this.value)===ci(n)&&this.matchesComparison(go(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Mn extends kR{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Mn(e,n)}matches(e){return PR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function PR(t){return t.op==="and"}function NR(t){return H$(t)&&PR(t)}function H$(t){for(const e of t.filters)if(e instanceof Mn)return!1;return!0}function Jm(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+yo(t.value);if(NR(t))return t.filters.map(e=>Jm(e)).join(",");{const e=t.filters.map(n=>Jm(n)).join(",");return`${t.op}(${e})`}}function OR(t,e){return t instanceof Ze?function(r,s){return s instanceof Ze&&r.op===s.op&&r.field.isEqual(s.field)&&ir(r.value,s.value)}(t,e):t instanceof Mn?function(r,s){return s instanceof Mn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&OR(o,s.filters[a]),!0):!1}(t,e):void oe()}function jR(t){return t instanceof Ze?function(n){return`${n.field.canonicalString()} ${n.op} ${yo(n.value)}`}(t):t instanceof Mn?function(n){return n.op.toString()+" {"+n.getFilters().map(jR).join(" ,")+"}"}(t):"Filter"}class q$ extends Ze{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class K$ extends Ze{constructor(e,n){super(e,"in",n),this.keys=LR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class G$ extends Ze{constructor(e,n){super(e,"not-in",n),this.keys=LR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function LR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class Q$ extends Ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return g0(n)&&dl(n.arrayValue,this.value)}}class Y$ extends Ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&dl(this.value.arrayValue,n)}}class J$ extends Ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!dl(this.value.arrayValue,n)}}class X$ extends Ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!g0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>dl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.he=null}}function Y_(t,e=null,n=[],r=[],s=null,i=null,o=null){return new Z$(t,e,n,r,s,i,o)}function y0(t){const e=pe(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Jm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),pf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>yo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>yo(r)).join(",")),e.he=n}return e.he}function v0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!W$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!OR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Q_(t.startAt,e.startAt)&&Q_(t.endAt,e.endAt)}function Xm(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function e3(t,e,n,r,s,i,o,a){return new Kl(t,e,n,r,s,i,o,a)}function w0(t){return new Kl(t)}function J_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function DR(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function _0(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function MR(t){return t.collectionGroup!==null}function Ia(t){const e=pe(t);if(e.Pe===null){e.Pe=[];const n=_0(e),r=DR(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new Ta(n)),e.Pe.push(new Ta(Pt.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.Pe.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Ta(Pt.keyField(),i))}}}return e.Pe}function Ar(t){const e=pe(t);return e.Ie||(e.Ie=t3(e,Ia(t))),e.Ie}function t3(t,e){if(t.limitType==="F")return Y_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ta(s.field,i)});const n=t.endAt?new nd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new nd(t.startAt.position,t.startAt.inclusive):null;return Y_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Zm(t,e){e.getFirstInequalityField(),_0(t);const n=t.filters.concat([e]);return new Kl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function eg(t,e,n){return new Kl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function mf(t,e){return v0(Ar(t),Ar(e))&&t.limitType===e.limitType}function $R(t){return`${y0(Ar(t))}|lt:${t.limitType}`}function tg(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>jR(s)).join(", ")}]`),pf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>yo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>yo(s)).join(",")),`Target(${r})`}(Ar(t))}; limitType=${t.limitType})`}function gf(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ne.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ia(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=G_(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ia(r),s)||r.endAt&&!function(o,a,l){const c=G_(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ia(r),s))}(t,e)}function n3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function VR(t){return(e,n)=>{let r=!1;for(const s of Ia(t)){const i=r3(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function r3(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?go(l,c):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){jo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return bR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3=new We(ne.comparator);function Cr(){return s3}const FR=new We(ne.comparator);function ia(...t){let e=FR;for(const n of t)e=e.insert(n.key,n);return e}function UR(t){let e=FR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ws(){return Ra()}function BR(){return Ra()}function Ra(){return new Lo(t=>t.toString(),(t,e)=>t.isEqual(e))}const i3=new We(ne.comparator),o3=new jt(ne.comparator);function ge(...t){let e=o3;for(const n of t)e=e.add(n);return e}const a3=new jt(Ee);function l3(){return a3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:td(e)?"-0":e}}function WR(t){return{integerValue:""+t}}function c3(t,e){return F$(e)?WR(e):zR(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(){this._=void 0}}function u3(t,e,n){return t instanceof fl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&p0(i)&&(i=m0(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof hl?qR(t,e):t instanceof pl?KR(t,e):function(s,i){const o=HR(s,i),a=X_(o)+X_(s.Ee);return Ym(o)&&Ym(s.Ee)?WR(a):zR(s.serializer,a)}(t,e)}function d3(t,e,n){return t instanceof hl?qR(t,e):t instanceof pl?KR(t,e):n}function HR(t,e){return t instanceof rd?function(r){return Ym(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class fl extends yf{}class hl extends yf{constructor(e){super(),this.elements=e}}function qR(t,e){const n=GR(e);for(const r of t.elements)n.some(s=>ir(s,r))||n.push(r);return{arrayValue:{values:n}}}class pl extends yf{constructor(e){super(),this.elements=e}}function KR(t,e){let n=GR(e);for(const r of t.elements)n=n.filter(s=>!ir(s,r));return{arrayValue:{values:n}}}class rd extends yf{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function X_(t){return Je(t.integerValue||t.doubleValue)}function GR(t){return g0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e,n){this.field=e,this.transform=n}}function h3(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof hl&&s instanceof hl||r instanceof pl&&s instanceof pl?mo(r.elements,s.elements,ir):r instanceof rd&&s instanceof rd?ir(r.Ee,s.Ee):r instanceof fl&&s instanceof fl}(t.transform,e.transform)}class p3{constructor(e,n){this.version=e,this.transformResults=n}}class tr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new tr}static exists(e){return new tr(void 0,e)}static updateTime(e){return new tr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ru(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class vf{}function QR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new x0(t.key,tr.none()):new Gl(t.key,t.data,tr.none());{const n=t.data,r=vn.empty();let s=new jt(Pt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new vi(t.key,r,new Nn(s.toArray()),tr.none())}}function m3(t,e,n){t instanceof Gl?function(s,i,o){const a=s.value.clone(),l=e1(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof vi?function(s,i,o){if(!ru(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=e1(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(YR(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ba(t,e,n,r){return t instanceof Gl?function(i,o,a,l){if(!ru(i.precondition,o))return a;const c=i.value.clone(),u=t1(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof vi?function(i,o,a,l){if(!ru(i.precondition,o))return a;const c=t1(i.fieldTransforms,l,o),u=o.data;return u.setAll(YR(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return ru(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function g3(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=HR(r.transform,s||null);i!=null&&(n===null&&(n=vn.empty()),n.set(r.field,i))}return n||null}function Z_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&mo(r,s,(i,o)=>h3(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Gl extends vf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class vi extends vf{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function YR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function e1(t,e,n){const r=new Map;Le(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,d3(o,a,n[s]))}return r}function t1(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,u3(i,o,e))}return r}class x0 extends vf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class y3 extends vf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&m3(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ba(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ba(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=BR();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=QR(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&mo(this.mutations,e.mutations,(n,r)=>Z_(n,r))&&mo(this.baseMutations,e.baseMutations,(n,r)=>Z_(n,r))}}class E0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Le(e.mutations.length===r.length);let s=function(){return i3}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new E0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye,ve;function x3(t){switch(t){default:return oe();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function JR(t){if(t===void 0)return br("GRPC error has no .code"),O.UNKNOWN;switch(t){case Ye.OK:return O.OK;case Ye.CANCELLED:return O.CANCELLED;case Ye.UNKNOWN:return O.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return O.INTERNAL;case Ye.UNAVAILABLE:return O.UNAVAILABLE;case Ye.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Ye.NOT_FOUND:return O.NOT_FOUND;case Ye.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Ye.ABORTED:return O.ABORTED;case Ye.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Ye.DATA_LOSS:return O.DATA_LOSS;default:return oe()}}(ve=Ye||(Ye={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3=new Zi([4294967295,4294967295],0);function n1(t){const e=E3().encode(t),n=new I$;return n.update(e),new Uint8Array(n.digest())}function r1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Zi([n,r],0),new Zi([s,i],0)]}class S0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new oa(`Invalid padding: ${n}`);if(r<0)throw new oa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new oa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new oa(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=Zi.fromNumber(this.Ae)}Ve(e,n,r){let s=e.add(n.multiply(Zi.fromNumber(r)));return s.compare(S3)===1&&(s=new Zi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=n1(e),[r,s]=r1(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);if(!this.me(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new S0(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=n1(e),[r,s]=r1(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class oa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ql.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new wf(de.min(),s,new We(Ee),Cr(),ge())}}class Ql{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ql(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n,r,s){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=s}}class XR{constructor(e,n){this.targetId=e,this.ye=n}}class ZR{constructor(e,n,r=Mt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class s1{constructor(){this.we=0,this.Se=o1(),this.be=Mt.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=ge(),n=ge(),r=ge();return this.Se.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:oe()}}),new Ql(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=o1()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class T3{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=Cr(),this.Ue=i1(),this.We=new We(Ee)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,s)=>{this.Ye(s)&&n(s)})}Xe(e){const n=e.targetId,r=e.ye.count,s=this.et(n);if(s){const i=s.target;if(Xm(i))if(r===0){const o=new ne(i.path);this.je(n,o,kt.newNoDocument(o,de.min()))}else Le(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),l=a?this.rt(a,e,o):1;if(l!==0){this.Ze(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,c)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=li(r).toUint8Array()}catch(l){if(l instanceof AR)return po("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new S0(o,s,i)}catch(l){return po(l instanceof oa?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.je(n,i,null),s++)}),s}_t(e){const n=new Map;this.Ke.forEach((i,o)=>{const a=this.et(o);if(a){if(i.current&&Xm(a.target)){const l=new ne(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,kt.newNoDocument(l,e))}i.Fe&&(n.set(o,i.xe()),i.Oe())}});let r=ge();this.Ue.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.et(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.$e.forEach((i,o)=>o.setReadTime(e));const s=new wf(e,n,this.We,this.$e,r);return this.$e=Cr(),this.Ue=i1(),this.We=new We(Ee),s}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const s=this.Je(e);this.ut(e,n)?s.Ne(n,1):s.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new s1,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new jt(Ee),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new s1),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function i1(){return new We(ne.comparator)}function o1(){return new We(ne.comparator)}const I3=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),R3=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),b3=(()=>({and:"AND",or:"OR"}))();class A3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ng(t,e){return t.useProto3Json||pf(e)?e:{value:e}}function sd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function C3(t,e){return sd(t,e.toTimestamp())}function nr(t){return Le(!!t),de.fromTimestamp(function(n){const r=vs(n);return new tt(r.seconds,r.nanos)}(t))}function T0(t,e){return function(r){return new Oe(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function tb(t){const e=Oe.fromString(t);return Le(ib(e)),e}function rg(t,e){return T0(t.databaseId,e.path)}function sp(t,e){const n=tb(e);if(n.get(1)!==t.databaseId.projectId)throw new G(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(nb(n))}function sg(t,e){return T0(t.databaseId,e)}function k3(t){const e=tb(t);return e.length===4?Oe.emptyPath():nb(e)}function ig(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function nb(t){return Le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function a1(t,e,n){return{name:rg(t,e),fields:n.value.mapValue.fields}}function P3(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(Le(u===void 0||typeof u=="string"),Mt.fromBase64String(u||"")):(Le(u===void 0||u instanceof Uint8Array),Mt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?O.UNKNOWN:JR(c.code);return new G(u,c.message||"")}(o);n=new ZR(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=sp(t,r.document.name),i=nr(r.document.updateTime),o=r.document.createTime?nr(r.document.createTime):de.min(),a=new vn({mapValue:{fields:r.document.fields}}),l=kt.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new su(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=sp(t,r.document),i=r.readTime?nr(r.readTime):de.min(),o=kt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new su([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=sp(t,r.document),i=r.removedTargetIds||[];n=new su([],i,s,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new _3(s,i),a=r.targetId;n=new XR(a,o)}}return n}function N3(t,e){let n;if(e instanceof Gl)n={update:a1(t,e.key,e.value)};else if(e instanceof x0)n={delete:rg(t,e.key)};else if(e instanceof vi)n={update:a1(t,e.key,e.data),updateMask:U3(e.fieldMask)};else{if(!(e instanceof y3))return oe();n={verify:rg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof fl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof hl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof pl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof rd)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:C3(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:oe()}(t,e.precondition)),n}function O3(t,e){return t&&t.length>0?(Le(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?nr(s.updateTime):nr(i);return o.isEqual(de.min())&&(o=nr(i)),new p3(o,s.transformResults||[])}(n,e))):[]}function j3(t,e){return{documents:[sg(t,e.path)]}}function L3(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=sg(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=sg(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return sb(Mn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(c=>function(f){return{field:Ti(f.field),direction:$3(f.dir)}}(c))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=ng(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function D3(t){let e=k3(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Le(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=function(f){const p=rb(f);return p instanceof Mn&&NR(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(y){return new Ta(Ii(y.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,pf(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new nd(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,m=f.values||[];return new nd(m,p)}(n.endAt)),e3(e,s,o,i,a,"F",l,c)}function M3(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function rb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ii(n.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ii(n.unaryFilter.field);return Ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ii(n.unaryFilter.field);return Ze.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ii(n.unaryFilter.field);return Ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return Ze.create(Ii(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Mn.create(n.compositeFilter.filters.map(r=>rb(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function $3(t){return I3[t]}function V3(t){return R3[t]}function F3(t){return b3[t]}function Ti(t){return{fieldPath:t.canonicalString()}}function Ii(t){return Pt.fromServerFormat(t.fieldPath)}function sb(t){return t instanceof Ze?function(n){if(n.op==="=="){if(K_(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NAN"}};if(q_(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(K_(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NOT_NAN"}};if(q_(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ti(n.field),op:V3(n.op),value:n.value}}}(t):t instanceof Mn?function(n){const r=n.getFilters().map(s=>sb(s));return r.length===1?r[0]:{compositeFilter:{op:F3(n.op),filters:r}}}(t):oe()}function U3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ib(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n,r,s,i=de.min(),o=de.min(),a=Mt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e){this.ht=e}}function z3(t){const e=D3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?eg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(){this._n=new H3}addToCollectionParentIndex(e,n){return this._n.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(ys.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(ys.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class H3{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new jt(Oe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new jt(Oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new vo(0)}static Bn(){return new vo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(){this.changes=new Lo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ba(r.mutation,s,Nn.empty(),tt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const s=Ws();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ia();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ws();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Cr();const o=Ra(),a=function(){return Ra()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof vi)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),ba(u.mutation,c,u.mutation.getFieldMask(),tt.now())):o.set(c.key,Nn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var f;return a.set(c,new K3(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ra();let s=new We((o,a)=>o-a),i=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||Nn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const f=(s.get(a.batchId)||ge()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=BR();u.forEach(p=>{if(!i.has(p)){const m=QR(n.get(p),r.get(p));m!==null&&f.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return ne.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):MR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):V.resolve(Ws());let a=-1,l=i;return o.next(c=>V.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(u)?V.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,ge())).next(u=>({batchId:a,changes:UR(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let s=ia();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=ia();return this.indexManager.getCollectionParents(e,s).next(o=>V.forEach(o,a=>{const l=function(u,f){return new Kl(f,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((u,f)=>{i=i.insert(u,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((a,l)=>{const c=l.getKey();i.get(c)===null&&(i=i.insert(c,kt.newInvalidDocument(c)))});let o=ia();return i.forEach((a,l)=>{const c=s.get(a);c!==void 0&&ba(c.mutation,l,Nn.empty(),tt.now()),gf(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return V.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:nr(s.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:z3(s.bundledQuery),readTime:nr(s.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(){this.overlays=new We(ne.comparator),this.hr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ws();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.It(e,n,i)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const s=Ws(),i=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return V.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new We((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=Ws(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Ws(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return V.resolve(a)}It(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new w3(n,r));let i=this.hr.get(n);i===void 0&&(i=ge(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(){this.Pr=new jt(dt.Ir),this.Tr=new jt(dt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new dt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new dt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new ne(new Oe([])),r=new dt(n,e),s=new dt(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new ne(new Oe([])),r=new dt(n,e),s=new dt(n,e+1);let i=ge();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new dt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class dt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ne.comparator(e.key,n.key)||Ee(e.pr,n.pr)}static Er(e,n){return Ee(e.pr,n.pr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new jt(dt.Ir)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new v3(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new dt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new dt(n,0),s=new dt(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new jt(Ee);return n.forEach(s=>{const i=new dt(s,0),o=new dt(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),V.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ne.isDocumentKey(i)||(i=i.child(""));const o=new dt(new ne(i),0);let a=new jt(Ee);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),V.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Le(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return V.forEach(n.mutations,s=>{const i=new dt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new dt(n,0),s=this.wr.firstAfterOrEqual(r);return V.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}vr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e){this.Cr=e,this.docs=function(){return new We(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():kt.newInvalidDocument(n))}getEntries(e,n){let r=Cr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():kt.newInvalidDocument(s))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Cr();const o=n.path,a=new ne(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||M$(D$(u),r)<=0||(s.has(u.key)||gf(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(e,n,r,s){oe()}Fr(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Z3(this)}getSize(e){return V.resolve(this.size)}}class Z3 extends q3{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e){this.persistence=e,this.Mr=new Lo(n=>y0(n),v0),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.Or=0,this.Nr=new I0,this.targetCount=0,this.Br=vo.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),V.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new vo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.qn(n),V.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),V.waitFor(i).next(()=>s)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),V.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e,n){this.Lr={},this.overlays={},this.kr=new h0(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new eV(this),this.indexManager=new W3,this.remoteDocumentCache=function(s){return new X3(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new B3(n),this.$r=new Q3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Y3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new J3(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new nV(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return V.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class nV extends V${constructor(e){super(),this.currentSequenceNumber=e}}class R0{constructor(e){this.persistence=e,this.zr=new I0,this.jr=null}static Hr(e){return new R0(e)}get Jr(){if(this.jr)return this.jr;throw oe()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),V.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Jr,r=>{const s=ne.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,de.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return V.or([()=>V.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=ge(),s=ge();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new b0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(){this.$i=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Wi(e,n).next(i=>i||this.Gi(e,n,s,r)).next(i=>i||this.zi(e,n))}Wi(e,n){if(J_(n))return V.resolve(null);let r=Ar(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=eg(n,null,"F"),r=Ar(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ge(...i);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ji(n,a);return this.Hi(n,c,o,l.readTime)?this.Wi(e,eg(n,null,"F")):this.Ji(e,c,n,l)}))})))}Gi(e,n,r,s){return J_(n)||s.isEqual(de.min())?this.zi(e,n):this.Ui.getDocuments(e,r).next(i=>{const o=this.ji(n,i);return this.Hi(n,o,r,s)?this.zi(e,n):(U_()<=xe.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),tg(n)),this.Ji(e,o,n,L$(s,-1)))})}ji(e,n){let r=new jt(VR(e));return n.forEach((s,i)=>{gf(e,i)&&(r=r.add(i))}),r}Hi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}zi(e,n){return U_()<=xe.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",tg(n)),this.Ui.getDocumentsMatchingQuery(e,n,ys.min())}Ji(e,n,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,n,r,s){this.persistence=e,this.Yi=n,this.serializer=s,this.Zi=new We(Ee),this.Xi=new Lo(i=>y0(i),v0),this.es=new Map,this.ts=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this.ns(r)}ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new G3(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Zi))}}function iV(t,e,n,r){return new sV(t,e,n,r)}async function ob(t,e){const n=pe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ge();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function oV(t,e){const n=pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.ts.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,p=f.keys();let m=V.resolve();return p.forEach(y=>{m=m.next(()=>u.getEntry(l,y)).next(w=>{const x=c.docVersions.get(y);Le(x!==null),w.version.compareTo(x)<0&&(f.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),u.addEntry(w)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ge();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function ab(t){const e=pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function aV(t,e){const n=pe(t),r=e.snapshotVersion;let s=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ts.newChangeBuffer({trackRemovals:!0});s=n.Zi;const a=[];e.targetChanges.forEach((u,f)=>{const p=s.get(f);if(!p)return;a.push(n.Qr.removeMatchingKeys(i,u.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(i,u.addedDocuments,f)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Mt.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),s=s.insert(f,m),function(w,x,v){return w.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,m,u)&&a.push(n.Qr.updateTargetData(i,m))});let l=Cr(),c=ge();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(lV(i,o,e.documentUpdates).next(u=>{l=u.ss,c=u.os})),!r.isEqual(de.min())){const u=n.Qr.getLastRemoteSnapshotVersion(i).next(f=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return V.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Zi=s,i))}function lV(t,e,n){let r=ge(),s=ge();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Cr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(de.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):X("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ss:o,os:s}})}function cV(t,e){const n=pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function uV(t,e){const n=pe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,V.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new Jr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Zi.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(r.targetId,r),n.Xi.set(e,r.targetId)),r})}async function og(t,e,n){const r=pe(t),s=r.Zi.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ql(o))throw o;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Zi=r.Zi.remove(e),r.Xi.delete(s.target)}function l1(t,e,n){const r=pe(t);let s=de.min(),i=ge();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,c,u){const f=pe(l),p=f.Xi.get(u);return p!==void 0?V.resolve(f.Zi.get(p)):f.Qr.getTargetData(c,u)}(r,o,Ar(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Yi.getDocumentsMatchingQuery(o,e,n?s:de.min(),n?i:ge())).next(a=>(dV(r,n3(e),a),{documents:a,_s:i})))}function dV(t,e,n){let r=t.es.get(e)||de.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.es.set(e,r)}class c1{constructor(){this.activeTargetIds=l3()}Is(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ts(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ps(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fV{constructor(){this.Ys=new c1,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}updateQueryState(e,n,r){this.Zs[e]=n}removeLocalQueryTarget(e){this.Ys.Ts(e)}isLocalQueryTarget(e){return this.Ys.activeTargetIds.has(e)}clearQueryState(e){delete this.Zs[e]}getAllActiveQueryTargets(){return this.Ys.activeTargetIds}isActiveQueryTarget(e){return this.Ys.activeTargetIds.has(e)}start(){return this.Ys=new c1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{Xs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(){this.eo=()=>this.no(),this.ro=()=>this.io(),this.so=[],this.oo()}Xs(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}oo(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}no(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}io(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dc=null;function ip(){return Dc===null?Dc=function(){return 268435456+Math.round(2147483648*Math.random())}():Dc++,"0x"+Dc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e){this._o=e._o,this.ao=e.ao}uo(e){this.co=e}lo(e){this.ho=e}onMessage(e){this.Po=e}close(){this.ao()}send(e){this._o(e)}Io(){this.co()}To(e){this.ho(e)}Eo(e){this.Po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt="WebChannelConnection";class gV extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ao=r+"://"+n.host,this.Ro=`projects/${s}/databases/${i}`,this.Vo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get mo(){return!1}fo(n,r,s,i,o){const a=ip(),l=this.po(n,r);X("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(c,i,o),this.wo(n,l,c,s).then(u=>(X("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw po("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}So(n,r,s,i,o,a){return this.fo(n,r,s,i,o)}yo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}po(n,r){const s=pV[n];return`${this.Ao}/v1/${r}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}wo(e,n,r,s){const i=ip();return new Promise((o,a)=>{const l=new T$;l.setWithCredentials(!0),l.listenOnce(E$.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case rp.NO_ERROR:const u=l.getResponseJson();X(Rt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),o(u);break;case rp.TIMEOUT:X(Rt,`RPC '${e}' ${i} timed out`),a(new G(O.DEADLINE_EXCEEDED,"Request time out"));break;case rp.HTTP_ERROR:const f=l.getStatus();if(X(Rt,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const y=function(x){const v=x.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(v)>=0?v:O.UNKNOWN}(m.status);a(new G(y,m.message))}else a(new G(O.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new G(O.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{X(Rt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);X(Rt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}bo(e,n,r){const s=ip(),i=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=_$(),a=x$(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.yo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");X(Rt,`Creating RPC '${e}' stream ${s}: ${u}`,l);const f=o.createWebChannel(u,l);let p=!1,m=!1;const y=new mV({_o:x=>{m?X(Rt,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(p||(X(Rt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),X(Rt,`RPC '${e}' stream ${s} sending:`,x),f.send(x))},ao:()=>f.close()}),w=(x,v,g)=>{x.listen(v,_=>{try{g(_)}catch(E){setTimeout(()=>{throw E},0)}})};return w(f,Oc.EventType.OPEN,()=>{m||X(Rt,`RPC '${e}' stream ${s} transport opened.`)}),w(f,Oc.EventType.CLOSE,()=>{m||(m=!0,X(Rt,`RPC '${e}' stream ${s} transport closed`),y.To())}),w(f,Oc.EventType.ERROR,x=>{m||(m=!0,po(Rt,`RPC '${e}' stream ${s} transport errored:`,x),y.To(new G(O.UNAVAILABLE,"The operation could not be completed")))}),w(f,Oc.EventType.MESSAGE,x=>{var v;if(!m){const g=x.data[0];Le(!!g);const _=g,E=_.error||((v=_[0])===null||v===void 0?void 0:v.error);if(E){X(Rt,`RPC '${e}' stream ${s} received error:`,E);const S=E.status;let T=function(C){const b=Ye[C];if(b!==void 0)return JR(b)}(S),I=E.message;T===void 0&&(T=O.INTERNAL,I="Unknown error status: "+S+" with message "+E.message),m=!0,y.To(new G(T,I)),f.close()}else X(Rt,`RPC '${e}' stream ${s} received:`,g),y.Eo(g)}}),w(a,S$.STAT_EVENT,x=>{x.stat===V_.PROXY?X(Rt,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===V_.NOPROXY&&X(Rt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.Io()},0),y}}function op(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(t){return new A3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Do=r,this.vo=s,this.Co=i,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}reset(){this.Fo=0}Oo(){this.Fo=this.Co}No(e){this.cancel();const n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Fo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Mo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.xo=Date.now(),e())),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}Lo(){this.Mo!==null&&(this.Mo.skipDelay(),this.Mo=null)}cancel(){this.Mo!==null&&(this.Mo.cancel(),this.Mo=null)}Bo(){return(Math.random()-.5)*this.Fo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.ko=r,this.qo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new lb(e,n)}Wo(){return this.state===1||this.state===5||this.Go()}Go(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.zo()}async stop(){this.Wo()&&await this.close(0)}jo(){this.state=0,this.Uo.reset()}Ho(){this.Go()&&this.Ko===null&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,()=>this.Jo()))}Yo(e){this.Zo(),this.stream.send(e)}async Jo(){if(this.Go())return this.close(0)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}Xo(){this.$o&&(this.$o.cancel(),this.$o=null)}async close(e,n){this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,e!==4?this.Uo.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(br(n.toString()),br("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.e_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.lo(n)}e_(){}auth(){this.state=1;const e=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Qo===n&&this.n_(r,s)},r=>{e(()=>{const s=new G(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.r_(s)})})}n_(e,n){const r=this.t_(this.Qo);this.stream=this.i_(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.$o=this.oi.enqueueAfterDelay(this.qo,1e4,()=>(this.Go()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.lo(s=>{r(()=>this.r_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}zo(){this.state=5,this.Uo.No(async()=>{this.state=0,this.start()})}r_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}t_(e){return n=>{this.oi.enqueueAndForget(()=>this.Qo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yV extends cb{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}i_(e,n){return this.connection.bo("Listen",e,n)}onMessage(e){this.Uo.reset();const n=P3(this.serializer,e),r=function(i){if(!("targetChange"in i))return de.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?nr(o.readTime):de.min()}(e);return this.listener.s_(n,r)}o_(e){const n={};n.database=ig(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Xm(l)?{documents:j3(i,l)}:{query:L3(i,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=eb(i,o.resumeToken);const c=ng(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(de.min())>0){a.readTime=sd(i,o.snapshotVersion.toTimestamp());const c=ng(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=M3(this.serializer,e);r&&(n.labels=r),this.Yo(n)}__(e){const n={};n.database=ig(this.serializer),n.removeTarget=e,this.Yo(n)}}class vV extends cb{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.a_=!1}get u_(){return this.a_}start(){this.a_=!1,this.lastStreamToken=void 0,super.start()}e_(){this.a_&&this.c_([])}i_(e,n){return this.connection.bo("Write",e,n)}onMessage(e){if(Le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();const n=O3(e.writeResults,e.commitTime),r=nr(e.commitTime);return this.listener.l_(r,n)}return Le(!e.writeResults||e.writeResults.length===0),this.a_=!0,this.listener.h_()}P_(){const e={};e.database=ig(this.serializer),this.Yo(e)}c_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>N3(this.serializer,r))};this.Yo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.I_=!1}T_(){if(this.I_)throw new G(O.FAILED_PRECONDITION,"The client has already been terminated.")}fo(e,n,r){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.fo(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(O.UNKNOWN,s.toString())})}So(e,n,r,s){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(O.UNKNOWN,i.toString())})}terminate(){this.I_=!0}}class _V{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}V_(){this.d_===0&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.A_=null,this.f_("Backend didn't respond within 10 seconds."),this.m_("Offline"),Promise.resolve())))}g_(e){this.state==="Online"?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.m_("Offline")))}set(e){this.p_(),this.d_=0,e==="Online"&&(this.R_=!1),this.m_(e)}m_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}f_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.R_?(br(n),this.R_=!1):X("OnlineStateTracker",n)}p_(){this.A_!==null&&(this.A_.cancel(),this.A_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=i,this.D_.Xs(o=>{r.enqueueAndForget(async()=>{wi(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=pe(l);c.S_.add(4),await Yl(c),c.v_.set("Unknown"),c.S_.delete(4),await xf(c)}(this))})}),this.v_=new _V(r,s)}}async function xf(t){if(wi(t))for(const e of t.b_)await e(!0)}async function Yl(t){for(const e of t.b_)await e(!1)}function ub(t,e){const n=pe(t);n.w_.has(e.targetId)||(n.w_.set(e.targetId,e),k0(n)?C0(n):Do(n).Go()&&A0(n,e))}function db(t,e){const n=pe(t),r=Do(n);n.w_.delete(e),r.Go()&&fb(n,e),n.w_.size===0&&(r.Go()?r.Ho():wi(n)&&n.v_.set("Unknown"))}function A0(t,e){if(t.C_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Do(t).o_(e)}function fb(t,e){t.C_.Le(e),Do(t).__(e)}function C0(t){t.C_=new T3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.w_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),Do(t).start(),t.v_.V_()}function k0(t){return wi(t)&&!Do(t).Wo()&&t.w_.size>0}function wi(t){return pe(t).S_.size===0}function hb(t){t.C_=void 0}async function EV(t){t.w_.forEach((e,n)=>{A0(t,e)})}async function SV(t,e){hb(t),k0(t)?(t.v_.g_(e),C0(t)):t.v_.set("Unknown")}async function TV(t,e,n){if(t.v_.set("Online"),e instanceof ZR&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.w_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.w_.delete(a),s.C_.removeTarget(a))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await id(t,r)}else if(e instanceof su?t.C_.Ge(e):e instanceof XR?t.C_.Xe(e):t.C_.He(e),!n.isEqual(de.min()))try{const r=await ab(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.C_._t(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.w_.get(c);u&&i.w_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.w_.get(l);if(!u)return;i.w_.set(l,u.withResumeToken(Mt.EMPTY_BYTE_STRING,u.snapshotVersion)),fb(i,l);const f=new Jr(u.target,l,c,u.sequenceNumber);A0(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await id(t,r)}}async function id(t,e,n){if(!ql(e))throw e;t.S_.add(1),await Yl(t),t.v_.set("Offline"),n||(n=()=>ab(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.S_.delete(1),await xf(t)})}function pb(t,e){return e().catch(n=>id(t,n,e))}async function Ef(t){const e=pe(t),n=ws(e);let r=e.y_.length>0?e.y_[e.y_.length-1].batchId:-1;for(;IV(e);)try{const s=await cV(e.localStore,r);if(s===null){e.y_.length===0&&n.Ho();break}r=s.batchId,RV(e,s)}catch(s){await id(e,s)}mb(e)&&gb(e)}function IV(t){return wi(t)&&t.y_.length<10}function RV(t,e){t.y_.push(e);const n=ws(t);n.Go()&&n.u_&&n.c_(e.mutations)}function mb(t){return wi(t)&&!ws(t).Wo()&&t.y_.length>0}function gb(t){ws(t).start()}async function bV(t){ws(t).P_()}async function AV(t){const e=ws(t);for(const n of t.y_)e.c_(n.mutations)}async function CV(t,e,n){const r=t.y_.shift(),s=E0.from(r,e,n);await pb(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ef(t)}async function kV(t,e){e&&ws(t).u_&&await async function(r,s){if(function(o){return x3(o)&&o!==O.ABORTED}(s.code)){const i=r.y_.shift();ws(r).jo(),await pb(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ef(r)}}(t,e),mb(t)&&gb(t)}async function d1(t,e){const n=pe(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=wi(n);n.S_.add(3),await Yl(n),r&&n.v_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.S_.delete(3),await xf(n)}async function PV(t,e){const n=pe(t);e?(n.S_.delete(2),await xf(n)):e||(n.S_.add(2),await Yl(n),n.v_.set("Unknown"))}function Do(t){return t.F_||(t.F_=function(n,r,s){const i=pe(n);return i.T_(),new yV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:EV.bind(null,t),lo:SV.bind(null,t),s_:TV.bind(null,t)}),t.b_.push(async e=>{e?(t.F_.jo(),k0(t)?C0(t):t.v_.set("Unknown")):(await t.F_.stop(),hb(t))})),t.F_}function ws(t){return t.M_||(t.M_=function(n,r,s){const i=pe(n);return i.T_(),new vV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:bV.bind(null,t),lo:kV.bind(null,t),h_:AV.bind(null,t),l_:CV.bind(null,t)}),t.b_.push(async e=>{e?(t.M_.jo(),await Ef(t)):(await t.M_.stop(),t.y_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.y_.length} pending writes`),t.y_=[]))})),t.M_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new P0(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function N0(t,e){if(br("AsyncQueue",`${e}: ${t}`),ql(t))return new G(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=ia(),this.sortedSet=new We(this.comparator)}static emptySet(e){return new eo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof eo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new eo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(){this.x_=new We(ne.comparator)}track(e){const n=e.doc.key,r=this.x_.get(n);r?e.type!==0&&r.type===3?this.x_=this.x_.insert(n,e):e.type===3&&r.type!==1?this.x_=this.x_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.x_=this.x_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.x_=this.x_.remove(n):e.type===1&&r.type===2?this.x_=this.x_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):oe():this.x_=this.x_.insert(n,e)}O_(){const e=[];return this.x_.inorderTraversal((n,r)=>{e.push(r)}),e}}class wo{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new wo(e,n,eo.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(){this.N_=void 0,this.listeners=[]}}class OV{constructor(){this.queries=new Lo(e=>$R(e),mf),this.onlineState="Unknown",this.B_=new Set}}async function yb(t,e){const n=pe(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new NV),s)try{i.N_=await n.onListen(r)}catch(o){const a=N0(o,`Initialization of query '${tg(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.L_(n.onlineState),i.N_&&e.k_(i.N_)&&O0(n)}async function vb(t,e){const n=pe(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function jV(t,e){const n=pe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.k_(s)&&(r=!0);o.N_=s}}r&&O0(n)}function LV(t,e,n){const r=pe(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function O0(t){t.B_.forEach(e=>{e.next()})}class wb{constructor(e,n,r){this.query=e,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}k_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new wo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),n=!0):this.W_(e,this.onlineState)&&(this.G_(e),n=!0),this.K_=e,n}onError(e){this.q_.error(e)}L_(e){this.onlineState=e;let n=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),n=!0),n}W_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}U_(e){if(e.docChanges.length>0)return!0;const n=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}G_(e){e=wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.key=e}}class xb{constructor(e){this.key=e}}class DV{constructor(e,n){this.query=e,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=ge(),this.mutatedKeys=ge(),this.ia=VR(e),this.sa=new eo(this.ia)}get oa(){return this.ta}_a(e,n){const r=n?n.aa:new f1,s=n?n.sa:this.sa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,f)=>{const p=s.get(u),m=gf(this.query,f)?f:null,y=!!p&&this.mutatedKeys.has(p.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let x=!1;p&&m?p.data.isEqual(m.data)?y!==w&&(r.track({type:3,doc:m}),x=!0):this.ua(p,m)||(r.track({type:2,doc:m}),x=!0,(l&&this.ia(m,l)>0||c&&this.ia(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),x=!0):p&&!m&&(r.track({type:1,doc:p}),x=!0,(l||c)&&(a=!0)),x&&(m?(o=o.add(m),i=w?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{sa:o,aa:r,Hi:a,mutatedKeys:i}}ua(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;const i=e.aa.O_();i.sort((c,u)=>function(p,m){const y=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return y(p)-y(m)}(c.type,u.type)||this.ia(c.doc,u.doc)),this.ca(r);const o=n?this.la():[],a=this.ra.size===0&&this.current?1:0,l=a!==this.na;return this.na=a,i.length!==0||l?{snapshot:new wo(this.query,e.sa,s,i,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ha:o}:{ha:o}}L_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({sa:this.sa,aa:new f1,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}Pa(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}ca(e){e&&(e.addedDocuments.forEach(n=>this.ta=this.ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ta=this.ta.delete(n)),this.current=e.current)}la(){if(!this.current)return[];const e=this.ra;this.ra=ge(),this.sa.forEach(r=>{this.Pa(r.key)&&(this.ra=this.ra.add(r.key))});const n=[];return e.forEach(r=>{this.ra.has(r)||n.push(new xb(r))}),this.ra.forEach(r=>{e.has(r)||n.push(new _b(r))}),n}Ia(e){this.ta=e._s,this.ra=ge();const n=this._a(e.documents);return this.applyChanges(n,!0)}Ta(){return wo.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,this.na===0,this.hasCachedResults)}}class MV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $V{constructor(e){this.key=e,this.Ea=!1}}class VV{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.da={},this.Aa=new Lo(a=>$R(a),mf),this.Ra=new Map,this.Va=new Set,this.ma=new We(ne.comparator),this.fa=new Map,this.ga=new I0,this.pa={},this.ya=new Map,this.wa=vo.Bn(),this.onlineState="Unknown",this.Sa=void 0}get isPrimaryClient(){return this.Sa===!0}}async function FV(t,e){const n=YV(t);let r,s;const i=n.Aa.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Ta();else{const o=await uV(n.localStore,Ar(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await UV(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&ub(n.remoteStore,o)}return s}async function UV(t,e,n,r,s){t.ba=(f,p,m)=>async function(w,x,v,g){let _=x.view._a(v);_.Hi&&(_=await l1(w.localStore,x.query,!1).then(({documents:T})=>x.view._a(T,_)));const E=g&&g.targetChanges.get(x.targetId),S=x.view.applyChanges(_,w.isPrimaryClient,E);return p1(w,x.targetId,S.ha),S.snapshot}(t,f,p,m);const i=await l1(t.localStore,e,!0),o=new DV(e,i._s),a=o._a(i.documents),l=Ql.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);p1(t,n,c.ha);const u=new MV(e,n,o);return t.Aa.set(e,u),t.Ra.has(n)?t.Ra.get(n).push(e):t.Ra.set(n,[e]),c.snapshot}async function BV(t,e){const n=pe(t),r=n.Aa.get(e),s=n.Ra.get(r.targetId);if(s.length>1)return n.Ra.set(r.targetId,s.filter(i=>!mf(i,e))),void n.Aa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await og(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),db(n.remoteStore,r.targetId),ag(n,r.targetId)}).catch(Hl)):(ag(n,r.targetId),await og(n.localStore,r.targetId,!0))}async function zV(t,e,n){const r=JV(t);try{const s=await function(o,a){const l=pe(o),c=tt.now(),u=a.reduce((m,y)=>m.add(y.key),ge());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=Cr(),w=ge();return l.ts.getEntries(m,u).next(x=>{y=x,y.forEach((v,g)=>{g.isValidDocument()||(w=w.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(x=>{f=x;const v=[];for(const g of a){const _=g3(g,f.get(g.key).overlayedDocument);_!=null&&v.push(new vi(g.key,_,CR(_.value.mapValue),tr.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,v,a)}).next(x=>{p=x;const v=x.applyToLocalDocumentSet(f,w);return l.documentOverlayCache.saveOverlays(m,x.batchId,v)})}).then(()=>({batchId:p.batchId,changes:UR(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.pa[o.currentUser.toKey()];c||(c=new We(Ee)),c=c.insert(a,l),o.pa[o.currentUser.toKey()]=c}(r,s.batchId,n),await Jl(r,s.changes),await Ef(r.remoteStore)}catch(s){const i=N0(s,"Failed to persist write");n.reject(i)}}async function Eb(t,e){const n=pe(t);try{const r=await aV(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.fa.get(i);o&&(Le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ea=!0:s.modifiedDocuments.size>0?Le(o.Ea):s.removedDocuments.size>0&&(Le(o.Ea),o.Ea=!1))}),await Jl(n,r,e)}catch(r){await Hl(r)}}function h1(t,e,n){const r=pe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Aa.forEach((i,o)=>{const a=o.view.L_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=pe(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const p of f.listeners)p.L_(a)&&(c=!0)}),c&&O0(l)}(r.eventManager,e),s.length&&r.da.s_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function WV(t,e,n){const r=pe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.fa.get(e),i=s&&s.key;if(i){let o=new We(ne.comparator);o=o.insert(i,kt.newNoDocument(i,de.min()));const a=ge().add(i),l=new wf(de.min(),new Map,new We(Ee),o,a);await Eb(r,l),r.ma=r.ma.remove(i),r.fa.delete(e),j0(r)}else await og(r.localStore,e,!1).then(()=>ag(r,e,n)).catch(Hl)}async function HV(t,e){const n=pe(t),r=e.batch.batchId;try{const s=await oV(n.localStore,e);Tb(n,r,null),Sb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Jl(n,s)}catch(s){await Hl(s)}}async function qV(t,e,n){const r=pe(t);try{const s=await function(o,a){const l=pe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Le(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);Tb(r,e,n),Sb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Jl(r,s)}catch(s){await Hl(s)}}function Sb(t,e){(t.ya.get(e)||[]).forEach(n=>{n.resolve()}),t.ya.delete(e)}function Tb(t,e,n){const r=pe(t);let s=r.pa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.pa[r.currentUser.toKey()]=s}}function ag(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ra.get(e))t.Aa.delete(r),n&&t.da.Da(r,n);t.Ra.delete(e),t.isPrimaryClient&&t.ga.Vr(e).forEach(r=>{t.ga.containsKey(r)||Ib(t,r)})}function Ib(t,e){t.Va.delete(e.path.canonicalString());const n=t.ma.get(e);n!==null&&(db(t.remoteStore,n),t.ma=t.ma.remove(e),t.fa.delete(n),j0(t))}function p1(t,e,n){for(const r of n)r instanceof _b?(t.ga.addReference(r.key,e),KV(t,r)):r instanceof xb?(X("SyncEngine","Document no longer in limbo: "+r.key),t.ga.removeReference(r.key,e),t.ga.containsKey(r.key)||Ib(t,r.key)):oe()}function KV(t,e){const n=e.key,r=n.path.canonicalString();t.ma.get(n)||t.Va.has(r)||(X("SyncEngine","New document in limbo: "+n),t.Va.add(r),j0(t))}function j0(t){for(;t.Va.size>0&&t.ma.size<t.maxConcurrentLimboResolutions;){const e=t.Va.values().next().value;t.Va.delete(e);const n=new ne(Oe.fromString(e)),r=t.wa.next();t.fa.set(r,new $V(n)),t.ma=t.ma.insert(n,r),ub(t.remoteStore,new Jr(Ar(w0(n.path)),r,"TargetPurposeLimboResolution",h0.ae))}}async function Jl(t,e,n){const r=pe(t),s=[],i=[],o=[];r.Aa.isEmpty()||(r.Aa.forEach((a,l)=>{o.push(r.ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const u=b0.Ki(l.targetId,c);i.push(u)}}))}),await Promise.all(o),r.da.s_(s),await async function(l,c){const u=pe(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>V.forEach(c,p=>V.forEach(p.qi,m=>u.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>V.forEach(p.Qi,m=>u.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!ql(f))throw f;X("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=u.Zi.get(p),y=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(y);u.Zi=u.Zi.insert(p,w)}}}(r.localStore,i))}async function GV(t,e){const n=pe(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await ob(n.localStore,e);n.currentUser=e,function(i,o){i.ya.forEach(a=>{a.forEach(l=>{l.reject(new G(O.CANCELLED,o))})}),i.ya.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Jl(n,r.rs)}}function QV(t,e){const n=pe(t),r=n.fa.get(e);if(r&&r.Ea)return ge().add(r.key);{let s=ge();const i=n.Ra.get(e);if(!i)return s;for(const o of i){const a=n.Aa.get(o);s=s.unionWith(a.view.oa)}return s}}function YV(t){const e=pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Eb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WV.bind(null,e),e.da.s_=jV.bind(null,e.eventManager),e.da.Da=LV.bind(null,e.eventManager),e}function JV(t){const e=pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qV.bind(null,e),e}class m1{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=_f(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return iV(this.persistence,new rV,e.initialUser,this.serializer)}createPersistence(e){return new tV(R0.Hr,this.serializer)}createSharedClientState(e){return new fV}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class XV{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>h1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=GV.bind(null,this.syncEngine),await PV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new OV}()}createDatastore(e){const n=_f(e.databaseInfo.databaseId),r=function(i){return new gV(i)}(e.databaseInfo);return function(i,o,a,l){return new wV(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new xV(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>h1(this.syncEngine,n,0),function(){return u1.v()?new u1:new hV}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,u){const f=new VV(s,i,o,a,l,c);return u&&(f.Sa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=pe(n);X("RemoteStore","RemoteStore shutting down."),r.S_.add(5),await Yl(r),r.D_.shutdown(),r.v_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Fa(this.observer.next,e)}error(e){this.observer.error?this.Fa(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString())}Ma(){this.muted=!0}Fa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=At.UNAUTHENTICATED,this.clientId=RR.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{X("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(X("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new G(O.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=N0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ap(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await ob(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function g1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await tF(t);X("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>d1(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>d1(e.remoteStore,i)),t._onlineComponents=e}function eF(t){return t.name==="FirebaseError"?t.code===O.FAILED_PRECONDITION||t.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function tF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await ap(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!eF(n))throw n;po("Error using user provided cache. Falling back to memory cache: "+n),await ap(t,new m1)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await ap(t,new m1);return t._offlineComponents}async function bb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await g1(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await g1(t,new XV))),t._onlineComponents}function nF(t){return bb(t).then(e=>e.syncEngine)}async function Ab(t){const e=await bb(t),n=e.eventManager;return n.onListen=FV.bind(null,e.syncEngine),n.onUnlisten=BV.bind(null,e.syncEngine),n}function rF(t,e,n={}){const r=new vr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new Rb({next:p=>{o.enqueueAndForget(()=>vb(i,f));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new G(O.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new G(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new wb(w0(a.path),u,{includeMetadataChanges:!0,z_:!0});return yb(i,f)}(await Ab(t),t.asyncQueue,e,n,r)),r.promise}function sF(t,e,n={}){const r=new vr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new Rb({next:p=>{o.enqueueAndForget(()=>vb(i,f)),p.fromCache&&l.source==="server"?c.reject(new G(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new wb(a,u,{includeMetadataChanges:!0,z_:!0});return yb(i,f)}(await Ab(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(t,e,n){if(!n)throw new G(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function iF(t,e,n,r){if(e===!0&&r===!0)throw new G(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function v1(t){if(!ne.isDocumentKey(t))throw new G(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function w1(t){if(ne.isDocumentKey(t))throw new G(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Sf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function _s(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sf(t);throw new G(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Cb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _1({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new G(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new G(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _1(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new R$;switch(r.type){case"firstParty":return new k$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=y1.get(n);r&&(X("ComponentProvider","Removing Datastore"),y1.delete(n),r.terminate())}(this),Promise.resolve()}}function oF(t,e,n,r={}){var s;const i=(t=_s(t,Tf))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=At.MOCK_USER;else{a=ET(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new G(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new At(c)}t._authCredentials=new b$(new IR(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mo(this.firestore,e,this._query)}}class Yt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yt(this.firestore,e,this._key)}}class ds extends Mo{constructor(e,n,r){super(e,n,w0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yt(this.firestore,null,new ne(e))}withConverter(e){return new ds(this.firestore,e,this._path)}}function Ms(t,e,...n){if(t=lt(t),kb("collection","path",e),t instanceof Tf){const r=Oe.fromString(e,...n);return w1(r),new ds(t,null,r)}{if(!(t instanceof Yt||t instanceof ds))throw new G(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return w1(r),new ds(t.firestore,null,r)}}function If(t,e,...n){if(t=lt(t),arguments.length===1&&(e=RR.V()),kb("doc","path",e),t instanceof Tf){const r=Oe.fromString(e,...n);return v1(r),new Yt(t,null,new ne(r))}{if(!(t instanceof Yt||t instanceof ds))throw new G(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return v1(r),new Yt(t.firestore,t instanceof ds?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(){this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new lb(this,"async_queue_retry"),this.tu=()=>{const n=op();n&&X("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Uo.Lo()};const e=op();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.tu)}get isShuttingDown(){return this.Ha}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nu(),this.ru(e)}enterRestrictedMode(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;const n=op();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.tu)}}enqueue(e){if(this.nu(),this.Ha)return new Promise(()=>{});const n=new vr;return this.ru(()=>this.Ha&&this.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ja.push(e),this.iu()))}async iu(){if(this.ja.length!==0){try{await this.ja[0](),this.ja.shift(),this.Uo.reset()}catch(e){if(!ql(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.ja.length>0&&this.Uo.No(()=>this.iu())}}ru(e){const n=this.za.then(()=>(this.Za=!0,e().catch(r=>{this.Ya=r,this.Za=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw br("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Za=!1,r))));return this.za=n,n}enqueueAfterDelay(e,n,r){this.nu(),this.eu.indexOf(e)>-1&&(n=0);const s=P0.createAndSchedule(this,e,n,r,i=>this.su(i));return this.Ja.push(s),s}nu(){this.Ya&&oe()}verifyOperationInProgress(){}async ou(){let e;do e=this.za,await e;while(e!==this.za)}_u(e){for(const n of this.Ja)if(n.timerId===e)return!0;return!1}au(e){return this.ou().then(()=>{this.Ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ou()})}uu(e){this.eu.push(e)}su(e){const n=this.Ja.indexOf(e);this.Ja.splice(n,1)}}class Xl extends Tf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new aF}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Pb(this),this._firestoreClient.terminate()}}function lF(t,e){const n=typeof t=="object"?t:Ay(),r=typeof t=="string"?t:e||"(default)",s=Hd(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=wT("firestore");i&&oF(s,...i)}return s}function L0(t){return t._firestoreClient||Pb(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Pb(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,u){return new B$(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Cb(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new ZV(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _o(Mt.fromBase64String(e))}catch(n){throw new G(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _o(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF=/^__.*__$/;class uF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new vi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gl(e,this.data,n,this.fieldTransforms)}}function Nb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class V0{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.cu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get lu(){return this.settings.lu}hu(e){return new V0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.Tu(e),s}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.cu(),s}du(e){return this.hu({path:void 0,Iu:!0})}Au(e){return od(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}cu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}Tu(e){if(e.length===0)throw this.Au("Document fields must not be empty");if(Nb(this.lu)&&cF.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}class dF{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||_f(e)}mu(e,n,r,s=!1){return new V0({lu:e,methodName:n,Vu:r,path:Pt.emptyPath(),Iu:!1,Ru:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ob(t){const e=t._freezeSettings(),n=_f(t._databaseId);return new dF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function fF(t,e,n,r,s,i={}){const o=t.mu(i.merge||i.mergeFields?2:0,e,n,s);Db("Data must be an object, but it was:",o,r);const a=jb(r,o);let l,c;if(i.merge)l=new Nn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const f of i.mergeFields){const p=pF(e,f,n);if(!o.contains(p))throw new G(O.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);gF(u,p)||u.push(p)}l=new Nn(u),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new uF(new vn(a),l,c)}class F0 extends M0{_toFieldTransform(e){return new f3(e.path,new fl)}isEqual(e){return e instanceof F0}}function hF(t,e,n,r=!1){return U0(n,t.mu(r?4:3,e))}function U0(t,e){if(Lb(t=lt(t)))return Db("Unsupported field value:",e,t),jb(t,e);if(t instanceof M0)return function(r,s){if(!Nb(s.lu))throw s.Au(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Au(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Iu&&e.lu!==4)throw e.Au("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=U0(a,s.du(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return c3(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=tt.fromDate(r);return{timestampValue:sd(s.serializer,i)}}if(r instanceof tt){const i=new tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sd(s.serializer,i)}}if(r instanceof $0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _o)return{bytesValue:eb(s.serializer,r._byteString)};if(r instanceof Yt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Au(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:T0(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Au(`Unsupported field value: ${Sf(r)}`)}(t,e)}function jb(t,e){const n={};return bR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jo(t,(r,s)=>{const i=U0(s,e.Pu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Lb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tt||t instanceof $0||t instanceof _o||t instanceof Yt||t instanceof M0)}function Db(t,e,n){if(!Lb(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Sf(n);throw r==="an object"?e.Au(t+" a custom object"):e.Au(t+" "+r)}}function pF(t,e,n){if((e=lt(e))instanceof D0)return e._internalPath;if(typeof e=="string")return Mb(t,e);throw od("Field path arguments must be of type string or ",t,!1,void 0,n)}const mF=new RegExp("[~\\*/\\[\\]]");function Mb(t,e,n){if(e.search(mF)>=0)throw od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new D0(...e.split("."))._internalPath}catch{throw od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function od(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new G(O.INVALID_ARGUMENT,a+t+l)}function gF(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(B0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class yF extends $b{data(){return super.data()}}function B0(t,e){return typeof e=="string"?Mb(t,e):e instanceof D0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class z0{}class wF extends z0{}function Fi(t,e,...n){let r=[];e instanceof z0&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof W0).length,a=i.filter(l=>l instanceof Rf).length;if(o>1||o>0&&a>0)throw new G(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Rf extends wF{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Rf(e,n,r)}_apply(e){const n=this._parse(e);return Vb(e._query,n),new Mo(e.firestore,e.converter,Zm(e._query,n))}_parse(e){const n=Ob(e.firestore);return function(i,o,a,l,c,u,f){let p;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new G(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){E1(f,u);const m=[];for(const y of f)m.push(x1(l,i,y));p={arrayValue:{values:m}}}else p=x1(l,i,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||E1(f,u),p=hF(a,o,f,u==="in"||u==="not-in");return Ze.create(c,u,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ui(t,e,n){const r=e,s=B0("where",t);return Rf._create(s,r,n)}class W0 extends z0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new W0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Mn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)Vb(o,l),o=Zm(o,l)}(e._query,n),new Mo(e.firestore,e.converter,Zm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function x1(t,e,n){if(typeof(n=lt(n))=="string"){if(n==="")throw new G(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!MR(e)&&n.indexOf("/")!==-1)throw new G(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Oe.fromString(n));if(!ne.isDocumentKey(r))throw new G(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return H_(t,new ne(r))}if(n instanceof Yt)return H_(t,n._key);throw new G(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sf(n)}.`)}function E1(t,e){if(!Array.isArray(t)||t.length===0)throw new G(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Vb(t,e){if(e.isInequality()){const r=_0(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new G(O.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const i=DR(t);i!==null&&_F(t,s,i)}const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function _F(t,e,n){if(!n.isEqual(e))throw new G(O.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class xF{convertValue(e,n="none"){switch(ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return jo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new $0(Je(e.latitude),Je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=m0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(cl(e));default:return null}}convertTimestamp(e){const n=vs(e);return new tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Oe.fromString(e);Le(ib(r));const s=new ul(r.get(1),r.get(3)),i=new ne(r.popFirst(5));return s.isEqual(n)||br(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EF(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fb extends $b{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(B0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class iu extends Fb{data(e={}){return super.data(e)}}class SF{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new aa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new iu(this._firestore,this._userDataWriter,r.key,r,new aa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new iu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new aa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new iu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new aa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:TF(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function TF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(t){t=_s(t,Yt);const e=_s(t.firestore,Xl);return rF(L0(e),t._key).then(n=>bF(e,t,n))}class Bb extends xF{constructor(e){super(),this.firestore=e}convertBytes(e){return new _o(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,n)}}function Bi(t){t=_s(t,Mo);const e=_s(t.firestore,Xl),n=L0(e),r=new Bb(e);return vF(t._query),sF(n,t._query).then(s=>new SF(e,r,t,s))}function IF(t,e,n){t=_s(t,Yt);const r=_s(t.firestore,Xl),s=EF(t.converter,e,n);return zb(r,[fF(Ob(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,tr.none())])}function RF(t){return zb(_s(t.firestore,Xl),[new x0(t._key,tr.none())])}function zb(t,e){return function(r,s){const i=new vr;return r.asyncQueue.enqueueAndForget(async()=>zV(await nF(r),s,i)),i.promise}(L0(t),e)}function bF(t,e,n){const r=n.docs.get(e._key),s=new Bb(t);return new Fb(t,s,e._key,r,new aa(n.hasPendingWrites,n.fromCache),e.converter)}function AF(){return new F0("serverTimestamp")}(function(e,n=!0){(function(s){Oo=s})(gi),si(new gs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Xl(new A$(r.getProvider("auth-internal")),new N$(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new G(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ul(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Xn(F_,"4.1.2",e),Xn(F_,"4.1.2","esm2017")})();const CF={apiKey:"AIzaSyBPNpckpYiu009eSzHz_1YMlwHLtScgVjE",authDomain:"zingmp3-clone-61799.firebaseapp.com",projectId:"zingmp3-clone-61799",storageBucket:"zingmp3-clone-61799.appspot.com",messagingSenderId:"938280289868",appId:"1:938280289868:web:1b426fc2dba5d03dde96e9"},H0=IT(CF),Wn=lF(H0),ui=wM(H0);new Bn;const q0=fD(H0),lg=async({collection:t,id:e,msg:n})=>{await RF(If(Wn,t,e))},ml=async({collection:t,id:e,msg:n})=>Ub(If(Wn,t,e)),Et=async({collection:t,id:e,data:n,msg:r})=>await IF(If(Wn,t,e),{...n},{merge:!0}),Wb=async({file:t,folder:e,email:n,msg:r})=>{const s=t.name.replaceAll(" ","").toLowerCase()+"_"+n.replace("@gmail.com",""),i=Ly(q0,`${e+s}`),o=await WT(i,t);return{fileURL:await HT(o.ref),filePath:o.metadata.fullPath}},Hb=async({blob:t,folder:e,songId:n,msg:r})=>{const s=n+"_stock",i=Ly(q0,`${e+s}`),o=await WT(i,t);return{fileURL:await HT(o.ref),filePath:o.metadata.fullPath}},cg=async({filePath:t,msg:e})=>{const n=Ly(q0,t);await dD(n)},bf=async t=>{await lg({collection:"songs",id:t.id,msg:">>> api: delete song doc"}),await cg({filePath:t.song_file_path,msg:">>> api: delete song file"}),t.lyric_id&&await lg({collection:"lyrics",id:t.lyric_id,msg:">>> api: delete song lyric doc"}),t.image_file_path&&await cg({filePath:t.image_file_path,msg:">>> api: delete song's image file"})},K0=async(t,e)=>{const n=t.map(r=>r.id);await Et({collection:"users",data:{playlist_ids:n},id:e.email,msg:">>> api: set user playlist_ids"})},qb=async({songIds:t,userInfo:e})=>{await Et({collection:"users",data:{song_ids:t,song_count:t.length},id:e.email,msg:">>> api: set user song_ids, song_count"})};function Pn(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function xs(t){return!!t&&!!t[Me]}function kr(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var s=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return s===Object||typeof s=="function"&&Function.toString.call(s)===$F}(t)||Array.isArray(t)||!!t[C1]||!!(!((e=t.constructor)===null||e===void 0)&&e[C1])||G0(t)||Q0(t))}function di(t,e,n){n===void 0&&(n=!1),$o(t)===0?(n?Object.keys:no)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,s){return e(s,r,t)})}function $o(t){var e=t[Me];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:G0(t)?2:Q0(t)?3:0}function to(t,e){return $o(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function kF(t,e){return $o(t)===2?t.get(e):t[e]}function Kb(t,e,n){var r=$o(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Gb(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function G0(t){return DF&&t instanceof Map}function Q0(t){return MF&&t instanceof Set}function Ds(t){return t.o||t.t}function Y0(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=Yb(t);delete e[Me];for(var n=no(e),r=0;r<n.length;r++){var s=n[r],i=e[s];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[s]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[s]})}return Object.create(Object.getPrototypeOf(t),e)}function J0(t,e){return e===void 0&&(e=!1),X0(t)||xs(t)||!kr(t)||($o(t)>1&&(t.set=t.add=t.clear=t.delete=PF),Object.freeze(t),e&&di(t,function(n,r){return J0(r,!0)},!0)),t}function PF(){Pn(2)}function X0(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function rr(t){var e=hg[t];return e||Pn(18,t),e}function NF(t,e){hg[t]||(hg[t]=e)}function ug(){return gl}function lp(t,e){e&&(rr("Patches"),t.u=[],t.s=[],t.v=e)}function ad(t){dg(t),t.p.forEach(OF),t.p=null}function dg(t){t===gl&&(gl=t.l)}function S1(t){return gl={p:[],l:gl,h:t,m:!0,_:0}}function OF(t){var e=t[Me];e.i===0||e.i===1?e.j():e.g=!0}function cp(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||rr("ES5").S(e,t,r),r?(n[Me].P&&(ad(e),Pn(4)),kr(t)&&(t=ld(e,t),e.l||cd(e,t)),e.u&&rr("Patches").M(n[Me].t,t,e.u,e.s)):t=ld(e,n,[]),ad(e),e.u&&e.v(e.u,e.s),t!==Qb?t:void 0}function ld(t,e,n){if(X0(e))return e;var r=e[Me];if(!r)return di(e,function(a,l){return T1(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return cd(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var s=r.i===4||r.i===5?r.o=Y0(r.k):r.o,i=s,o=!1;r.i===3&&(i=new Set(s),s.clear(),o=!0),di(i,function(a,l){return T1(t,r,s,a,l,n,o)}),cd(t,s,!1),n&&t.u&&rr("Patches").N(r,n,t.u,t.s)}return r.o}function T1(t,e,n,r,s,i,o){if(xs(s)){var a=ld(t,s,i&&e&&e.i!==3&&!to(e.R,r)?i.concat(r):void 0);if(Kb(n,r,a),!xs(a))return;t.m=!1}else o&&n.add(s);if(kr(s)&&!X0(s)){if(!t.h.D&&t._<1)return;ld(t,s),e&&e.A.l||cd(t,s)}}function cd(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&J0(e,n)}function up(t,e){var n=t[Me];return(n?Ds(n):t)[e]}function I1(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Kr(t){t.P||(t.P=!0,t.l&&Kr(t.l))}function dp(t){t.o||(t.o=Y0(t.t))}function fg(t,e,n){var r=G0(e)?rr("MapSet").F(e,n):Q0(e)?rr("MapSet").T(e,n):t.O?function(s,i){var o=Array.isArray(s),a={i:o?1:0,A:i?i.A:ug(),P:!1,I:!1,R:{},l:i,t:s,k:null,o:null,j:null,C:!1},l=a,c=yl;o&&(l=[a],c=la);var u=Proxy.revocable(l,c),f=u.revoke,p=u.proxy;return a.k=p,a.j=f,p}(e,n):rr("ES5").J(e,n);return(n?n.A:ug()).p.push(r),r}function jF(t){return xs(t)||Pn(22,t),function e(n){if(!kr(n))return n;var r,s=n[Me],i=$o(n);if(s){if(!s.P&&(s.i<4||!rr("ES5").K(s)))return s.t;s.I=!0,r=R1(n,i),s.I=!1}else r=R1(n,i);return di(r,function(o,a){s&&kF(s.t,o)===a||Kb(r,o,e(a))}),i===3?new Set(r):r}(t)}function R1(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Y0(t)}function LF(){function t(i,o){var a=s[i];return a?a.enumerable=o:s[i]=a={configurable:!0,enumerable:o,get:function(){var l=this[Me];return yl.get(l,i)},set:function(l){var c=this[Me];yl.set(c,i,l)}},a}function e(i){for(var o=i.length-1;o>=0;o--){var a=i[o][Me];if(!a.P)switch(a.i){case 5:r(a)&&Kr(a);break;case 4:n(a)&&Kr(a)}}}function n(i){for(var o=i.t,a=i.k,l=no(a),c=l.length-1;c>=0;c--){var u=l[c];if(u!==Me){var f=o[u];if(f===void 0&&!to(o,u))return!0;var p=a[u],m=p&&p[Me];if(m?m.t!==f:!Gb(p,f))return!0}}var y=!!o[Me];return l.length!==no(o).length+(y?0:1)}function r(i){var o=i.k;if(o.length!==i.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var s={};NF("ES5",{J:function(i,o){var a=Array.isArray(i),l=function(u,f){if(u){for(var p=Array(f.length),m=0;m<f.length;m++)Object.defineProperty(p,""+m,t(m,!0));return p}var y=Yb(f);delete y[Me];for(var w=no(y),x=0;x<w.length;x++){var v=w[x];y[v]=t(v,u||!!y[v].enumerable)}return Object.create(Object.getPrototypeOf(f),y)}(a,i),c={i:a?5:4,A:o?o.A:ug(),P:!1,I:!1,R:{},l:o,t:i,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,Me,{value:c,writable:!0}),l},S:function(i,o,a){a?xs(o)&&o[Me].A===i&&e(i.p):(i.u&&function l(c){if(c&&typeof c=="object"){var u=c[Me];if(u){var f=u.t,p=u.k,m=u.R,y=u.i;if(y===4)di(p,function(_){_!==Me&&(f[_]!==void 0||to(f,_)?m[_]||l(p[_]):(m[_]=!0,Kr(u)))}),di(f,function(_){p[_]!==void 0||to(p,_)||(m[_]=!1,Kr(u))});else if(y===5){if(r(u)&&(Kr(u),m.length=!0),p.length<f.length)for(var w=p.length;w<f.length;w++)m[w]=!1;else for(var x=f.length;x<p.length;x++)m[x]=!0;for(var v=Math.min(p.length,f.length),g=0;g<v;g++)p.hasOwnProperty(g)||(m[g]=!0),m[g]===void 0&&l(p[g])}}}}(i.p[0]),e(i.p))},K:function(i){return i.i===4?n(i):r(i)}})}var b1,gl,Z0=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",DF=typeof Map<"u",MF=typeof Set<"u",A1=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Qb=Z0?Symbol.for("immer-nothing"):((b1={})["immer-nothing"]=!0,b1),C1=Z0?Symbol.for("immer-draftable"):"__$immer_draftable",Me=Z0?Symbol.for("immer-state"):"__$immer_state",$F=""+Object.prototype.constructor,no=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,Yb=Object.getOwnPropertyDescriptors||function(t){var e={};return no(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},hg={},yl={get:function(t,e){if(e===Me)return t;var n=Ds(t);if(!to(n,e))return function(s,i,o){var a,l=I1(i,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(s.k):void 0}(t,n,e);var r=n[e];return t.I||!kr(r)?r:r===up(t.t,e)?(dp(t),t.o[e]=fg(t.A.h,r,t)):r},has:function(t,e){return e in Ds(t)},ownKeys:function(t){return Reflect.ownKeys(Ds(t))},set:function(t,e,n){var r=I1(Ds(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var s=up(Ds(t),e),i=s==null?void 0:s[Me];if(i&&i.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(Gb(n,s)&&(n!==void 0||to(t.t,e)))return!0;dp(t),Kr(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return up(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,dp(t),Kr(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Ds(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){Pn(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Pn(12)}},la={};di(yl,function(t,e){la[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),la.deleteProperty=function(t,e){return la.set.call(this,t,e,void 0)},la.set=function(t,e,n){return yl.set.call(this,t[0],e,n,t[0])};var VF=function(){function t(n){var r=this;this.O=A1,this.D=!0,this.produce=function(s,i,o){if(typeof s=="function"&&typeof i!="function"){var a=i;i=s;var l=r;return function(w){var x=this;w===void 0&&(w=a);for(var v=arguments.length,g=Array(v>1?v-1:0),_=1;_<v;_++)g[_-1]=arguments[_];return l.produce(w,function(E){var S;return(S=i).call.apply(S,[x,E].concat(g))})}}var c;if(typeof i!="function"&&Pn(6),o!==void 0&&typeof o!="function"&&Pn(7),kr(s)){var u=S1(r),f=fg(r,s,void 0),p=!0;try{c=i(f),p=!1}finally{p?ad(u):dg(u)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(w){return lp(u,o),cp(w,u)},function(w){throw ad(u),w}):(lp(u,o),cp(c,u))}if(!s||typeof s!="object"){if((c=i(s))===void 0&&(c=s),c===Qb&&(c=void 0),r.D&&J0(c,!0),o){var m=[],y=[];rr("Patches").M(s,c,m,y),o(m,y)}return c}Pn(21,s)},this.produceWithPatches=function(s,i){if(typeof s=="function")return function(c){for(var u=arguments.length,f=Array(u>1?u-1:0),p=1;p<u;p++)f[p-1]=arguments[p];return r.produceWithPatches(c,function(m){return s.apply(void 0,[m].concat(f))})};var o,a,l=r.produce(s,i,function(c,u){o=c,a=u});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){kr(n)||Pn(8),xs(n)&&(n=jF(n));var r=S1(this),s=fg(this,n,void 0);return s[Me].C=!0,dg(r),s},e.finishDraft=function(n,r){var s=n&&n[Me],i=s.A;return lp(i,r),cp(void 0,i)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!A1&&Pn(20),this.O=n},e.applyPatches=function(n,r){var s;for(s=r.length-1;s>=0;s--){var i=r[s];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}s>-1&&(r=r.slice(s+1));var o=rr("Patches").$;return xs(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),ln=new VF,Jb=ln.produce;ln.produceWithPatches.bind(ln);ln.setAutoFreeze.bind(ln);ln.setUseProxies.bind(ln);ln.applyPatches.bind(ln);ln.createDraft.bind(ln);ln.finishDraft.bind(ln);function vl(t){"@babel/helpers - typeof";return vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vl(t)}function FF(t,e){if(vl(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vl(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function UF(t){var e=FF(t,"string");return vl(e)==="symbol"?e:String(e)}function BF(t,e,n){return e=UF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function P1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k1(Object(n),!0).forEach(function(r){BF(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var N1=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),fp=function(){return Math.random().toString(36).substring(7).split("").join(".")},ud={INIT:"@@redux/INIT"+fp(),REPLACE:"@@redux/REPLACE"+fp(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+fp()}};function zF(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Xb(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(bt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(bt(1));return n(Xb)(t,e)}if(typeof t!="function")throw new Error(bt(2));var s=t,i=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function u(){if(l)throw new Error(bt(3));return i}function f(w){if(typeof w!="function")throw new Error(bt(4));if(l)throw new Error(bt(5));var x=!0;return c(),a.push(w),function(){if(x){if(l)throw new Error(bt(6));x=!1,c();var g=a.indexOf(w);a.splice(g,1),o=null}}}function p(w){if(!zF(w))throw new Error(bt(7));if(typeof w.type>"u")throw new Error(bt(8));if(l)throw new Error(bt(9));try{l=!0,i=s(i,w)}finally{l=!1}for(var x=o=a,v=0;v<x.length;v++){var g=x[v];g()}return w}function m(w){if(typeof w!="function")throw new Error(bt(10));s=w,p({type:ud.REPLACE})}function y(){var w,x=f;return w={subscribe:function(g){if(typeof g!="object"||g===null)throw new Error(bt(11));function _(){g.next&&g.next(u())}_();var E=x(_);return{unsubscribe:E}}},w[N1]=function(){return this},w}return p({type:ud.INIT}),r={dispatch:p,subscribe:f,getState:u,replaceReducer:m},r[N1]=y,r}function WF(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:ud.INIT});if(typeof r>"u")throw new Error(bt(12));if(typeof n(void 0,{type:ud.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(bt(13))})}function HF(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var s=e[r];typeof t[s]=="function"&&(n[s]=t[s])}var i=Object.keys(n),o;try{WF(n)}catch(a){o=a}return function(l,c){if(l===void 0&&(l={}),o)throw o;for(var u=!1,f={},p=0;p<i.length;p++){var m=i[p],y=n[m],w=l[m],x=y(w,c);if(typeof x>"u")throw c&&c.type,new Error(bt(14));f[m]=x,u=u||x!==w}return u=u||i.length!==Object.keys(l).length,u?f:l}}function dd(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,s){return function(){return r(s.apply(void 0,arguments))}})}function qF(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var s=r.apply(void 0,arguments),i=function(){throw new Error(bt(15))},o={getState:s.getState,dispatch:function(){return i.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return i=dd.apply(void 0,a)(s.dispatch),P1(P1({},s),{},{dispatch:i})}}}function Zb(t){var e=function(r){var s=r.dispatch,i=r.getState;return function(o){return function(a){return typeof a=="function"?a(s,i,t):o(a)}}};return e}var eA=Zb();eA.withExtraArgument=Zb;const O1=eA;var tA=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),KF=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},xo=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,s=t.length;n<r;n++,s++)t[s]=e[n];return t},GF=Object.defineProperty,QF=Object.defineProperties,YF=Object.getOwnPropertyDescriptors,j1=Object.getOwnPropertySymbols,JF=Object.prototype.hasOwnProperty,XF=Object.prototype.propertyIsEnumerable,L1=function(t,e,n){return e in t?GF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},fs=function(t,e){for(var n in e||(e={}))JF.call(e,n)&&L1(t,n,e[n]);if(j1)for(var r=0,s=j1(e);r<s.length;r++){var n=s[r];XF.call(e,n)&&L1(t,n,e[n])}return t},hp=function(t,e){return QF(t,YF(e))},ZF=function(t,e,n){return new Promise(function(r,s){var i=function(l){try{a(n.next(l))}catch(c){s(c)}},o=function(l){try{a(n.throw(l))}catch(c){s(c)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(i,o)};a((n=n.apply(t,e)).next())})},e9=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?dd:dd.apply(null,arguments)};function t9(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var n9=function(t){tA(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,xo([void 0],n[0].concat(this)))):new(e.bind.apply(e,xo([void 0],n.concat(this))))},e}(Array),r9=function(t){tA(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,xo([void 0],n[0].concat(this)))):new(e.bind.apply(e,xo([void 0],n.concat(this))))},e}(Array);function pg(t){return kr(t)?Jb(t,function(){}):t}function s9(t){return typeof t=="boolean"}function i9(){return function(e){return o9(e)}}function o9(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new n9;return n&&(s9(n)?r.push(O1):r.push(O1.withExtraArgument(n.extraArgument))),r}var a9=!0;function l9(t){var e=i9(),n=t||{},r=n.reducer,s=r===void 0?void 0:r,i=n.middleware,o=i===void 0?e():i,a=n.devTools,l=a===void 0?!0:a,c=n.preloadedState,u=c===void 0?void 0:c,f=n.enhancers,p=f===void 0?void 0:f,m;if(typeof s=="function")m=s;else if(t9(s))m=HF(s);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var y=o;typeof y=="function"&&(y=y(e));var w=qF.apply(void 0,y),x=dd;l&&(x=e9(fs({trace:!a9},typeof l=="object"&&l)));var v=new r9(w),g=v;Array.isArray(p)?g=xo([w],p):typeof p=="function"&&(g=p(v));var _=x.apply(void 0,g);return Xb(m,u,_)}function hs(t,e){function n(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(e){var i=e.apply(void 0,r);if(!i)throw new Error("prepareAction did not return an object");return fs(fs({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function nA(t){var e={},n=[],r,s={addCase:function(i,o){var a=typeof i=="string"?i:i.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,s},addMatcher:function(i,o){return n.push({matcher:i,reducer:o}),s},addDefaultCase:function(i){return r=i,s}};return t(s),[e,n,r]}function c9(t){return typeof t=="function"}function u9(t,e,n,r){n===void 0&&(n=[]);var s=typeof e=="function"?nA(e):[e,n,r],i=s[0],o=s[1],a=s[2],l;if(c9(t))l=function(){return pg(t())};else{var c=pg(t);l=function(){return c}}function u(f,p){f===void 0&&(f=l());var m=xo([i[p.type]],o.filter(function(y){var w=y.matcher;return w(p)}).map(function(y){var w=y.reducer;return w}));return m.filter(function(y){return!!y}).length===0&&(m=[a]),m.reduce(function(y,w){if(w)if(xs(y)){var x=y,v=w(x,p);return v===void 0?y:v}else{if(kr(y))return Jb(y,function(g){return w(g,p)});var v=w(y,p);if(v===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return y},f)}return u.getInitialState=l,u}function d9(t,e){return t+"/"+e}function f9(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:pg(t.initialState),r=t.reducers||{},s=Object.keys(r),i={},o={},a={};s.forEach(function(u){var f=r[u],p=d9(e,u),m,y;"reducer"in f?(m=f.reducer,y=f.prepare):m=f,i[u]=m,o[p]=m,a[u]=y?hs(p,y):hs(p)});function l(){var u=typeof t.extraReducers=="function"?nA(t.extraReducers):[t.extraReducers],f=u[0],p=f===void 0?{}:f,m=u[1],y=m===void 0?[]:m,w=u[2],x=w===void 0?void 0:w,v=fs(fs({},p),o);return u9(n,function(g){for(var _ in v)g.addCase(_,v[_]);for(var E=0,S=y;E<S.length;E++){var T=S[E];g.addMatcher(T.matcher,T.reducer)}x&&g.addDefaultCase(x)})}var c;return{name:e,reducer:function(u,f){return c||(c=l()),c(u,f)},actions:a,caseReducers:i,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var h9="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",p9=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=h9[Math.random()*64|0];return e},m9=["name","message","stack","code"],pp=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),D1=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),g9=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=m9;n<r.length;n++){var s=r[n];typeof t[s]=="string"&&(e[s]=t[s])}return e}return{message:String(t)}};(function(){function t(e,n,r){var s=hs(e+"/fulfilled",function(c,u,f,p){return{payload:c,meta:hp(fs({},p||{}),{arg:f,requestId:u,requestStatus:"fulfilled"})}}),i=hs(e+"/pending",function(c,u,f){return{payload:void 0,meta:hp(fs({},f||{}),{arg:u,requestId:c,requestStatus:"pending"})}}),o=hs(e+"/rejected",function(c,u,f,p,m){return{payload:p,error:(r&&r.serializeError||g9)(c||"Rejected"),meta:hp(fs({},m||{}),{arg:f,requestId:u,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(u,f,p){var m=r!=null&&r.idGenerator?r.idGenerator(c):p9(),y=new a,w;function x(g){w=g,y.abort()}var v=function(){return ZF(this,null,function(){var g,_,E,S,T,I,R;return KF(this,function(C){switch(C.label){case 0:return C.trys.push([0,4,,5]),S=(g=r==null?void 0:r.condition)==null?void 0:g.call(r,c,{getState:f,extra:p}),v9(S)?[4,S]:[3,2];case 1:S=C.sent(),C.label=2;case 2:if(S===!1||y.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(b,A){return y.signal.addEventListener("abort",function(){return A({name:"AbortError",message:w||"Aborted"})})}),u(i(m,c,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:m,arg:c},{getState:f,extra:p}))),[4,Promise.race([T,Promise.resolve(n(c,{dispatch:u,getState:f,extra:p,requestId:m,signal:y.signal,abort:x,rejectWithValue:function(b,A){return new pp(b,A)},fulfillWithValue:function(b,A){return new D1(b,A)}})).then(function(b){if(b instanceof pp)throw b;return b instanceof D1?s(b.payload,m,c,b.meta):s(b,m,c)})])];case 3:return E=C.sent(),[3,5];case 4:return I=C.sent(),E=I instanceof pp?o(null,m,c,I.payload,I.meta):o(I,m,c),[3,5];case 5:return R=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,R||u(E),[2,E]}})})}();return Object.assign(v,{abort:x,requestId:m,arg:c,unwrap:function(){return v.then(y9)}})}}return Object.assign(l,{pending:i,rejected:o,fulfilled:s,typePrefix:e})}return t.withTypes=function(){return t},t})();function y9(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function v9(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var ev="listenerMiddleware";hs(ev+"/add");hs(ev+"/removeAll");hs(ev+"/remove");var M1;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);LF();const $1={song:{id:"",name:"",singer:"",by:"",image_file_path:"",image_url:"",song_file_path:"",song_url:"",duration:0,lyric_id:"",currentIndex:0,song_in:"",in_playlist:[],blurhash_encode:""},playlist:{id:"",name:"",song_ids:[],time:0,count:0,by:"",image_by:"",image_file_path:"",image_url:"",blurhash_encode:""}},rA=f9({name:"song",initialState:$1,reducers:{setSong(t,e){t.song=e.payload?e.payload:$1.song},setPlaylist(t,e){t.playlist={...e.payload}}}}),rt=t=>t.song,{setSong:rn,setPlaylist:Eo}=rA.actions,w9=rA.reducer;var sA={exports:{}},iA={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var So=h;function _9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var x9=typeof Object.is=="function"?Object.is:_9,E9=So.useState,S9=So.useEffect,T9=So.useLayoutEffect,I9=So.useDebugValue;function R9(t,e){var n=e(),r=E9({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return T9(function(){s.value=n,s.getSnapshot=e,mp(s)&&i({inst:s})},[t,n,e]),S9(function(){return mp(s)&&i({inst:s}),t(function(){mp(s)&&i({inst:s})})},[t]),I9(n),n}function mp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!x9(t,n)}catch{return!0}}function b9(t,e){return e()}var A9=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?b9:R9;iA.useSyncExternalStore=So.useSyncExternalStore!==void 0?So.useSyncExternalStore:A9;sA.exports=iA;var C9=sA.exports,oA={exports:{}},aA={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Af=h,k9=C9;function P9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var N9=typeof Object.is=="function"?Object.is:P9,O9=k9.useSyncExternalStore,j9=Af.useRef,L9=Af.useEffect,D9=Af.useMemo,M9=Af.useDebugValue;aA.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=j9(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=D9(function(){function l(m){if(!c){if(c=!0,u=m,m=r(m),s!==void 0&&o.hasValue){var y=o.value;if(s(y,m))return f=y}return f=m}if(y=f,N9(u,m))return y;var w=r(m);return s!==void 0&&s(y,w)?y:(u=m,f=w)}var c=!1,u,f,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,s]);var a=O9(t,i[0],i[1]);return L9(function(){o.hasValue=!0,o.value=a},[a]),M9(a),a};oA.exports=aA;var $9=oA.exports;function V9(t){t()}let lA=V9;const F9=t=>lA=t,U9=()=>lA,V1=Symbol.for("react-redux-context"),F1=typeof globalThis<"u"?globalThis:{};function B9(){var t;if(!h.createContext)return{};const e=(t=F1[V1])!=null?t:F1[V1]=new Map;let n=e.get(h.createContext);return n||(n=h.createContext(null),e.set(h.createContext,n)),n}const Es=B9();function tv(t=Es){return function(){return h.useContext(t)}}const cA=tv(),z9=()=>{throw new Error("uSES not initialized!")};let uA=z9;const W9=t=>{uA=t},H9=(t,e)=>t===e;function q9(t=Es){const e=t===Es?cA:tv(t);return function(r,s={}){const{equalityFn:i=H9,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof s=="function"?{equalityFn:s}:s,{store:l,subscription:c,getServerState:u,stabilityCheck:f,noopCheck:p}=e();h.useRef(!0);const m=h.useCallback({[r.name](w){return r(w)}}[r.name],[r,f,o]),y=uA(c.addNestedSub,l.getState,u||l.getState,m,i);return h.useDebugValue(y),y}}const st=q9();var dA={exports:{}},Ie={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gt=typeof Symbol=="function"&&Symbol.for,nv=gt?Symbol.for("react.element"):60103,rv=gt?Symbol.for("react.portal"):60106,Cf=gt?Symbol.for("react.fragment"):60107,kf=gt?Symbol.for("react.strict_mode"):60108,Pf=gt?Symbol.for("react.profiler"):60114,Nf=gt?Symbol.for("react.provider"):60109,Of=gt?Symbol.for("react.context"):60110,sv=gt?Symbol.for("react.async_mode"):60111,jf=gt?Symbol.for("react.concurrent_mode"):60111,Lf=gt?Symbol.for("react.forward_ref"):60112,Df=gt?Symbol.for("react.suspense"):60113,K9=gt?Symbol.for("react.suspense_list"):60120,Mf=gt?Symbol.for("react.memo"):60115,$f=gt?Symbol.for("react.lazy"):60116,G9=gt?Symbol.for("react.block"):60121,Q9=gt?Symbol.for("react.fundamental"):60117,Y9=gt?Symbol.for("react.responder"):60118,J9=gt?Symbol.for("react.scope"):60119;function hn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case nv:switch(t=t.type,t){case sv:case jf:case Cf:case Pf:case kf:case Df:return t;default:switch(t=t&&t.$$typeof,t){case Of:case Lf:case $f:case Mf:case Nf:return t;default:return e}}case rv:return e}}}function fA(t){return hn(t)===jf}Ie.AsyncMode=sv;Ie.ConcurrentMode=jf;Ie.ContextConsumer=Of;Ie.ContextProvider=Nf;Ie.Element=nv;Ie.ForwardRef=Lf;Ie.Fragment=Cf;Ie.Lazy=$f;Ie.Memo=Mf;Ie.Portal=rv;Ie.Profiler=Pf;Ie.StrictMode=kf;Ie.Suspense=Df;Ie.isAsyncMode=function(t){return fA(t)||hn(t)===sv};Ie.isConcurrentMode=fA;Ie.isContextConsumer=function(t){return hn(t)===Of};Ie.isContextProvider=function(t){return hn(t)===Nf};Ie.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===nv};Ie.isForwardRef=function(t){return hn(t)===Lf};Ie.isFragment=function(t){return hn(t)===Cf};Ie.isLazy=function(t){return hn(t)===$f};Ie.isMemo=function(t){return hn(t)===Mf};Ie.isPortal=function(t){return hn(t)===rv};Ie.isProfiler=function(t){return hn(t)===Pf};Ie.isStrictMode=function(t){return hn(t)===kf};Ie.isSuspense=function(t){return hn(t)===Df};Ie.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Cf||t===jf||t===Pf||t===kf||t===Df||t===K9||typeof t=="object"&&t!==null&&(t.$$typeof===$f||t.$$typeof===Mf||t.$$typeof===Nf||t.$$typeof===Of||t.$$typeof===Lf||t.$$typeof===Q9||t.$$typeof===Y9||t.$$typeof===J9||t.$$typeof===G9)};Ie.typeOf=hn;dA.exports=Ie;var X9=dA.exports,hA=X9,Z9={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},e6={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},pA={};pA[hA.ForwardRef]=Z9;pA[hA.Memo]=e6;var Re={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv=Symbol.for("react.element"),ov=Symbol.for("react.portal"),Vf=Symbol.for("react.fragment"),Ff=Symbol.for("react.strict_mode"),Uf=Symbol.for("react.profiler"),Bf=Symbol.for("react.provider"),zf=Symbol.for("react.context"),t6=Symbol.for("react.server_context"),Wf=Symbol.for("react.forward_ref"),Hf=Symbol.for("react.suspense"),qf=Symbol.for("react.suspense_list"),Kf=Symbol.for("react.memo"),Gf=Symbol.for("react.lazy"),n6=Symbol.for("react.offscreen"),mA;mA=Symbol.for("react.module.reference");function In(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case iv:switch(t=t.type,t){case Vf:case Uf:case Ff:case Hf:case qf:return t;default:switch(t=t&&t.$$typeof,t){case t6:case zf:case Wf:case Gf:case Kf:case Bf:return t;default:return e}}case ov:return e}}}Re.ContextConsumer=zf;Re.ContextProvider=Bf;Re.Element=iv;Re.ForwardRef=Wf;Re.Fragment=Vf;Re.Lazy=Gf;Re.Memo=Kf;Re.Portal=ov;Re.Profiler=Uf;Re.StrictMode=Ff;Re.Suspense=Hf;Re.SuspenseList=qf;Re.isAsyncMode=function(){return!1};Re.isConcurrentMode=function(){return!1};Re.isContextConsumer=function(t){return In(t)===zf};Re.isContextProvider=function(t){return In(t)===Bf};Re.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===iv};Re.isForwardRef=function(t){return In(t)===Wf};Re.isFragment=function(t){return In(t)===Vf};Re.isLazy=function(t){return In(t)===Gf};Re.isMemo=function(t){return In(t)===Kf};Re.isPortal=function(t){return In(t)===ov};Re.isProfiler=function(t){return In(t)===Uf};Re.isStrictMode=function(t){return In(t)===Ff};Re.isSuspense=function(t){return In(t)===Hf};Re.isSuspenseList=function(t){return In(t)===qf};Re.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Vf||t===Uf||t===Ff||t===Hf||t===qf||t===n6||typeof t=="object"&&t!==null&&(t.$$typeof===Gf||t.$$typeof===Kf||t.$$typeof===Bf||t.$$typeof===zf||t.$$typeof===Wf||t.$$typeof===mA||t.getModuleId!==void 0)};Re.typeOf=In;function r6(){const t=U9();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0,i=n={callback:r,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){!s||e===null||(s=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}const U1={notify(){},get:()=>[]};function s6(t,e){let n,r=U1;function s(f){return l(),r.subscribe(f)}function i(){r.notify()}function o(){u.onStateChange&&u.onStateChange()}function a(){return!!n}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=r6())}function c(){n&&(n(),n=void 0,r.clear(),r=U1)}const u={addNestedSub:s,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:c,getListeners:()=>r};return u}const i6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",o6=i6?h.useLayoutEffect:h.useEffect;function a6({store:t,context:e,children:n,serverState:r,stabilityCheck:s="once",noopCheck:i="once"}){const o=h.useMemo(()=>{const c=s6(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:s,noopCheck:i}},[t,r,s,i]),a=h.useMemo(()=>t.getState(),[t]);o6(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||Es;return h.createElement(l.Provider,{value:o},n)}function gA(t=Es){const e=t===Es?cA:tv(t);return function(){const{store:r}=e();return r}}const l6=gA();function c6(t=Es){const e=t===Es?l6:gA(t);return function(){return e().dispatch}}const pn=c6();W9($9.useSyncExternalStoreWithSelector);F9(bl.unstable_batchedUpdates);const u6={actuallySongs:[]},d6={state:u6,setActuallySongs:()=>{}},yA=h.createContext(d6),f6=({children:t})=>{const{adminSongs:e,userSongs:n,initial:r}=fn(),{song:s}=st(rt),[i,o]=h.useState([]),[a,l]=h.useState([]);return h.useEffect(()=>{if(r&&s.name){if(s.song_in.includes("playlist")){console.log("set actually songs"),l(i);return}s.song_in==="admin"?l(e):l(n),console.log("set actually songs")}},[s.song_in,r,i,n]),d.jsx(yA.Provider,{value:{state:{actuallySongs:a},setActuallySongs:o},children:t})},Qf=()=>{const{setActuallySongs:t,state:{actuallySongs:e}}=h.useContext(yA);return{actuallySongs:e,setActuallySongs:t}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function vA(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function wA(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zi=function(){return zi=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},zi.apply(this,arguments)},_A=function(t){return{loading:t==null,value:t}},h6=function(){return function(t,e){switch(e.type){case"error":return zi(zi({},t),{error:e.error,loading:!1,value:void 0});case"reset":return _A(e.defaultValue);case"value":return zi(zi({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},p6=function(t){var e=t?t():void 0,n=h.useReducer(h6(),_A(e)),r=n[0],s=n[1],i=h.useCallback(function(){var l=t?t():void 0;s({type:"reset",defaultValue:l})},[t]),o=h.useCallback(function(l){s({type:"error",error:l})},[]),a=h.useCallback(function(l){s({type:"value",value:l})},[]);return h.useMemo(function(){return{error:r.error,loading:r.loading,reset:i,setError:o,setValue:a,value:r.value}},[r.error,r.loading,i,o,a,r.value])},Zl=function(t,e){var n=p6(function(){return t.currentUser}),r=n.error,s=n.loading,i=n.setError,o=n.setValue,a=n.value;return h.useEffect(function(){var l=o4(t,function(c){return vA(void 0,void 0,void 0,function(){var u;return wA(this,function(f){switch(f.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return f.sent(),[3,4];case 3:return u=f.sent(),i(u),[3,4];case 4:return o(c),[2]}})})},i);return function(){l()}},[t]),[a,s,r]},m6=function(t){var e=h.useCallback(function(n,r){var s=new Bn;return n&&n.forEach(function(i){return s.addScope(i)}),r&&s.setCustomParameters(r),s},[]);return g6(t,e)},g6=function(t,e){var n=h.useState(),r=n[0],s=n[1],i=h.useState(),o=i[0],a=i[1],l=h.useState(!1),c=l[0],u=l[1],f=h.useCallback(function(p,m){return vA(void 0,void 0,void 0,function(){var y,w,x;return wA(this,function(v){switch(v.label){case 0:u(!0),s(void 0),v.label=1;case 1:return v.trys.push([1,3,4,5]),y=e(p,m),[4,A4(t,y)];case 2:return w=v.sent(),a(w),[2,w];case 3:return x=v.sent(),s(x),[3,5];case 4:return u(!1),[7];case 5:return[2]}})})},[t,e]);return[f,o,c,r]};const av={userInfo:{status:"loading",display_name:"",playlist_ids:[],role:"user",song_count:0,song_ids:[],email:"",photoURL:"",latest_seen:new tt(0,0)}},y6=(t,e)=>{switch(e.type){case 0:return console.log("dispatch set user info"),{userInfo:{...t.userInfo,...e.payload.userInfo}};default:return console.log("default case"),{userInfo:t.userInfo}}},v6=()=>{const[t,e]=h.useReducer(y6,av),n=h.useCallback(r=>{e({type:0,payload:{userInfo:r}})},[]);return{userInfo:t.userInfo,setUserInfo:n}},w6={userInfo:av.userInfo,setUserInfo:()=>{}},xA=h.createContext(w6),_6=({children:t})=>{const{userInfo:e,setUserInfo:n}=v6();return d.jsx(xA.Provider,{value:{userInfo:e,setUserInfo:n},children:t})},Rn=()=>{const{userInfo:t,setUserInfo:e}=h.useContext(xA);return{userInfo:t,setUserInfo:e}},lv=()=>{const t=Or(),e=pn(),{setUserInfo:n}=Rn(),{initSongsContext:r}=fn(),[s]=m6(ui);return{logOut:async()=>{await a4(ui),n(av.userInfo),r(Iy),t(Ce.Home)},logIn:async()=>{await s()&&(e(rn()),r({adminSongs:[],adminPlaylists:[]}),n({status:"loading"}),t(Ce.Home))}}};let wl=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");const x6={toasts:[]},E6={state:x6,setToasts:()=>{},setErrorToast:()=>{},setSuccessToast:()=>{}},EA=h.createContext(E6),S6=({children:t})=>{const[e,n]=h.useState([]),r=({message:i="Somethings went wrong"})=>n(o=>[...o,{title:"error",id:wl(4),desc:i}]),s=({message:i="Success"})=>n(o=>[...o,{title:"success",id:wl(4),desc:`${i}`}]);return d.jsx(EA.Provider,{value:{state:{toasts:e},setToasts:n,setErrorToast:r,setSuccessToast:s},children:t})},$n=()=>{const{state:{toasts:t},setToasts:e,setErrorToast:n,setSuccessToast:r}=h.useContext(EA);return{toasts:t,setToasts:e,setErrorToast:n,setSuccessToast:r}};function SA({bgRef:t,songInStore:e}){h.useEffect(()=>{if(e.image_url){const n=t.current;n&&(n.style.backgroundImage=`url(${e.image_url})`)}},[e])}function TA({songInStore:t,audioEle:e}){const[n,r]=h.useState({base:"",real_time:[]}),s=async()=>{const i=(await ml({collection:"lyrics",id:t.lyric_id,msg:">>> api: get lyric doc"})).data();i&&r(i)};return h.useEffect(()=>{if(t.lyric_id)return e&&e.addEventListener("loadeddata",s),()=>{console.log("use get lyric clean up"),e&&e.removeEventListener("loadeddata",s),r({base:"",real_time:[]})}},[t]),n}const mg=(t,e)=>{const[n,r]=h.useState(JSON.parse(localStorage.getItem(t)||JSON.stringify(e)));return h.useEffect(()=>{localStorage.setItem(t,JSON.stringify(n))},[n]),[n,r]};function Yf(){const{setErrorToast:t}=$n(),{userInfo:e,setUserInfo:n}=Rn(),{initial:r,adminSongs:s,initSongsContext:i,userSongs:o}=fn(),[a,l]=h.useState(""),[c,u]=h.useState(!(s.length||o.length)),f=h.useRef(!0),p=Ms(Wn,"songs"),m=Ms(Wn,"playlist"),y=Cs(),w=S=>{u(!1),l(S),t({message:"Use song error"})},x=async()=>{try{const S=Fi(Ms(Wn,"songs"),Ui("by","==","admin")),T=Fi(Ms(Wn,"playlists"),Ui("by","==","admin")),I=await Bi(S),R=await Bi(T),C={adminSongs:[],adminPlaylists:[]};if(I.docs||R.docs){const b=I.docs.map(D=>D.data()),A=R.docs.map(D=>D.data());return C.adminPlaylists=A||[],C.adminSongs=b||[],C}}catch(S){console.log({message:S}),w("GetAdminSongsAndPlaylists error")}},v=async()=>{if(!e.email)return;const S=Ms(Wn,"users"),T=If(S,e==null?void 0:e.email);try{const I=await Ub(T);if(I.exists())return I.data()}catch(I){console.log(I),w("Get userData error")}},g=async()=>{var S;try{const T=Fi(m,Ui("by","==",e==null?void 0:e.email)),I=await Bi(T);if(I.docs.length)return(S=I.docs)==null?void 0:S.map(R=>R.data())}catch(T){console.log("getUserPlaylists",T),w("Get users playlist error")}},_=async()=>{var S,T;try{const I=await v(),R={userSongs:[],userPlaylists:[]};if((S=I==null?void 0:I.song_ids)!=null&&S.length){const C=Fi(p,Ui("by","==",I==null?void 0:I.email)),b=await Bi(C);b.docs.length&&(R.userSongs=b.docs.map(A=>A.data()))}if((T=I==null?void 0:I.playlist_ids)!=null&&T.length){const C=await g();C!=null&&C.length&&(R.userPlaylists=C)}return{userData:R,userInfo:I}}catch(I){console.log({message:I}),w("GetUserSongsAndPlaylists error")}},E=async()=>{try{u(!0);let S;if(S=await x(),!e.email){console.log(">>> run initial, no user"),i({...S,userPlaylists:[],userSongs:[]}),u(!1);return}const T=await _();if(T){console.log(">>> run initial, have user");const{userInfo:I,userData:R}=T;i({...R,...S}),n({latest_seen:I.latest_seen,song_ids:I.song_ids,song_count:I.song_count,playlist_ids:I.playlist_ids,role:I.role})}}catch(S){console.log(S),t({message:"init song error"})}finally{u(!1),f.current=!0}};return h.useEffect(()=>{if(e.status==="loading"){u(!0);return}if(y.pathname==="/mysongs"&&!e.email){console.log(">>> skip init because in /mysongs but no user"),u(!0);return}if(!r&&f.current){f.current=!1,E();return}else{u(!1);return}},[e,r]),{initial:r,loading:c,errorMsg:a}}const cv=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop / Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast  Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Rock/Pop"];function Ue(t,e,n=0,r){let s=e||t.byteLength-n;const i=typeof Buffer<"u";s<0&&(s+=t.byteLength);const o=[],a=n+s;for(let c=n;c<a;c++){const u=t.getUint8(c);if(u===0)break;o.push(u)}if(i)return Buffer.from(o).toString();const l=o.map(c=>String.fromCharCode(c)).join("");return r?l:decodeURIComponent(escape(l))}function Ei(t,e,n=0,r){let s=!1,i=e||t.byteLength-n;const o=[],a=typeof Buffer<"u";if(i<0&&(i+=t.byteLength),n+1>t.byteLength)return"";r&&(t.getUint16(n)===65534&&(s=!0),n+=2,i-=2);const l=n+i;for(let c=n;c<l;c+=2){let u=t.getUint16(c,s);if(c<l-1&&u===0&&t.getUint16(c+1,s)===0)break;u>=0&&u<=55295||u>=57344&&u<=65535?o.push(u):u>=65536&&u<=1114111&&(u-=65536,o.push(((1047552&u)>>10)+55296),o.push((1023&u)+56320))}if(a){const c=Buffer.alloc(o.length*2);for(let u=0;u<o.length;u++){const f=o[u];s?c.writeUInt16LE(f,u*2):c.writeUInt16BE(f,u*2)}return c.toString()}return String.fromCharCode.apply(null,new Uint16Array(o))}function T6(t){let e=0,n=2130706432;for(;n;)e>>=1,e|=t&n,n>>=8;return e}function ou(t,e=0){return T6(t.getUint32(e))}function IA(t,e=0,n){return n?t.getUint8(e)+(t.getUint8(e+1)<<8)+(t.getUint8(e+2)<<16):t.getUint8(e+2)+(t.getUint8(e+1)<<8)+(t.getUint8(e)<<16)}const RA=new Map([["TALB","album"],["TBPM","bpm"],["TCOM","composer"],["TCON","genre"],["TCOP","copyright"],["TDEN","encoding-time"],["TDLY","playlist-delay"],["TDOR","original-release-time"],["TDRC","recording-time"],["TDRL","release-time"],["TDTG","tagging-time"],["TENC","encoder"],["TEXT","writer"],["TFLT","file-type"],["TIPL","involved-people"],["TIT1","content-group"],["TIT2","title"],["TIT3","subtitle"],["TKEY","initial-key"],["TLAN","language"],["TLEN","length"],["TMCL","credits"],["TMED","media-type"],["TMOO","mood"],["TOAL","original-album"],["TOFN","original-filename"],["TOLY","original-writer"],["TOPE","original-artist"],["TOWN","owner"],["TPE1","artist"],["TPE2","band"],["TPE3","conductor"],["TPE4","remixer"],["TPOS","set-part"],["TPRO","produced-notice"],["TPUB","publisher"],["TRCK","track"],["TRSN","radio-name"],["TRSO","radio-owner"],["TSOA","album-sort"],["TSOP","performer-sort"],["TSOT","title-sort"],["TSRC","isrc"],["TSSE","encoder-settings"],["TSST","set-subtitle"],["TAL","album"],["TBP","bpm"],["TCM","composer"],["TCO","genre"],["TCR","copyright"],["TDY","playlist-delay"],["TEN","encoder"],["TFT","file-type"],["TKE","initial-key"],["TLA","language"],["TLE","length"],["TMT","media-type"],["TOA","original-artist"],["TOF","original-filename"],["TOL","original-writer"],["TOT","original-album"],["TP1","artist"],["TP2","band"],["TP3","conductor"],["TP4","remixer"],["TPA","set-part"],["TPB","publisher"],["TRC","isrc"],["TRK","track"],["TSS","encoder-settings"],["TT1","content-group"],["TT2","title"],["TT3","subtitle"],["TXT","writer"],["WCOM","url-commercial"],["WCOP","url-legal"],["WOAF","url-file"],["WOAR","url-artist"],["WOAS","url-source"],["WORS","url-radio"],["WPAY","url-payment"],["WPUB","url-publisher"],["WAF","url-file"],["WAR","url-artist"],["WAS","url-source"],["WCM","url-commercial"],["WCP","url-copyright"],["WPB","url-publisher"],["COMM","comments"],["APIC","image"],["PIC","image"],["PRIV","private"]]),bA=["other","file-icon","icon","cover-front","cover-back","leaflet","media","artist-lead","artist","conductor","band","composer","writer","location","during-recording","during-performance","screen","fish","illustration","logo-band","logo-publisher"];function I6(t){const e={id:null,tag:null,value:null},n=new DataView(t),r={id:Ue(n,3),type:Ue(n,1),size:IA(n,3)},s=RA.get(r.id);if(!s)return null;if(e.id=r.id,e.tag=s,r.type==="T"){let i=Ue(n,-7,7);r.id==="TCO"&&parseInt(i)&&(i=cv[parseInt(i)]),e.value=i}else if(r.type==="W")e.value=Ue(n,-7,7);else if(r.id==="COM"){let i=Ue(n,-10,10);i.indexOf("\0")!==-1&&(i=i.substr(i.indexOf("\0")+1)),e.value=i}else if(r.id==="PIC"){const i={type:null,mime:"image/"+Ue(n,3,7).toLowerCase(),description:null,data:null};i.type=bA[n.getUint8(11)]||"other";const o=11;let a=0;for(let l=o;;l++)if(n.getUint8(l)===0){a=l-o;break}i.description=a===0?null:Ue(n,a,o),i.data=t.slice(o+1),e.value=i}return e.tag?e:null}function R6(t,e,n){e=e||4;const r={id:null,tag:null,value:null},s=new DataView(t);if(e<3)return I6(t);const i={id:Ue(s,4),type:Ue(s,1),size:ou(s,4),flags:[s.getUint8(8),s.getUint8(9)]};if(i.flags[1]!==0)return null;const o=RA.get(i.id);if(!o)return null;if(r.tag=o,r.id=i.id,i.type==="T"){const a=s.getUint8(10);let l=null;a===0||a===3?l=Ue(s,-11,11):a===1?l=Ei(s,-11,11,!0):a===2&&(l=Ei(s,-11,11)),i.id==="TCON"&&l!==null&&parseInt(l)&&(l=cv[parseInt(l)]),r.value=l}else if(i.type==="W")r.value=Ue(s,-10,10);else if(i.id==="PRIV"){let l=0;for(let c=0;;c++)if(s.getUint8(c)===0){l=c-10;break}r.value={identifier:l===0?null:Ue(s,l,10),data:t.slice(l+10+1)}}else if(i.id==="COMM"){const a=s.getUint8(10);let l=14;for(let c=l;;c++)if(a===1||a===2){if(s.getUint16(c)===0){l=c+2;break}c++}else if(s.getUint8(c)===0){l=c+1;break}a===0||a===3?r.value=Ue(s,-1*l,l):a===1?r.value=Ei(s,-1*l,l,!0):a===2&&(r.value=Ei(s,-1*l,l))}else if(i.id==="APIC"){const a=s.getUint8(10),l={type:null,mime:null,description:null,data:null};let c=11,u=0;for(let f=c;;f++)if(s.getUint8(f)===0){u=f-c;break}l.mime=Ue(s,u,c),l.type=bA[s.getUint8(c+u+1)]||"other",c+=u+2,u=0;for(let f=c;;f++)if(s.getUint8(f)===0){u=f-c;break}u!==0&&(a===0||a===3?l.description=Ue(s,u,c):a===1?l.description=Ei(s,u,c,!0):a===2&&(l.description=Ei(s,u,c))),l.data=t.slice(c+1),r.value=l}return r.tag?r:null}async function b6(t){let e=null;const n=await t.read(128,t.size-128),r=new DataView(n);n.byteLength===128&&Ue(r,3,void 0,!0)==="TAG"&&(e={kind:"v1",title:Ue(r,30,3).trim()||null,album:Ue(r,30,63).trim()||null,artist:Ue(r,30,33).trim()||null,year:Ue(r,4,93).trim()||null,genre:null,comment:null,track:null},r.getUint8(125)===0?(e.comment=Ue(r,28,97),e.version=1.1,e.track=r.getUint8(126)):e.comment=Ue(r,30,97),e.genre=cv[r.getUint8(127)]||null);const s=await t.read(14,0),i=new DataView(s);if(s.byteLength===14&&Ue(i,3,void 0,!0)==="ID3"&&i.getUint8(3)<=4){let o=10,a=0;const l=[i.getUint8(3),i.getUint8(4)],c=i.getUint8(5);if(!(c&128)){e={kind:"v2",title:e?e.title:null,album:e?e.album:null,artist:e?e.artist:null,year:e?e.year:null,version:l,frames:[],images:[]},c&64&&(o+=ou(i,11)),a+=ou(i,6);const u=await t.read(a,o),f=new DataView(u);let p=0;for(;p<u.byteLength;){let m,y=!0;for(let x=0;x<3;x++){const v=f.getUint8(p+x);(v<65||v>90)&&(v<48||v>57)&&(y=!1)}if(!y)break;l[0]<3?m=u.slice(p,p+6+IA(f,p+3)):l[0]===3?m=u.slice(p,p+10+f.getUint32(p+4)):m=u.slice(p,p+10+ou(f,p+4));const w=await R6(m,l[0],l[1]);if(w&&w.tag){const x=e;x.frames.push(w),w.tag==="image"?x.images.push(w.value):e[w.tag]=w.value}p+=m.byteLength}}}return e}class A6{constructor(){this.size=0}async close(){}async readBlob(e,n=0,r="application/octet-stream"){const s=await this.read(e,n);return new Blob([s],{type:r})}}class C6 extends A6{constructor(e){super(),this._file=e}async open(){this.size=this._file.size}async read(e,n){const r=this._file.slice(n,n+e);return new Promise((s,i)=>{const o=new FileReader;o.onload=()=>{s(o.result)},o.onerror=()=>{i(new Error("File read failed"))},o.readAsArrayBuffer(r)})}}const k6=typeof window<"u"&&"File"in window&&"FileReader"in window&&typeof ArrayBuffer<"u";async function P6(t){await t.open();const e=await b6(t);return await t.close(),e}function N6(t){if(!k6)throw new Error("Browser does not have support for the File API and/or ArrayBuffers");return P6(new C6(t))}function AA(t,e){return function(){return t.apply(e,arguments)}}const{toString:O6}=Object.prototype,{getPrototypeOf:uv}=Object,Jf=(t=>e=>{const n=O6.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),lr=t=>(t=t.toLowerCase(),e=>Jf(e)===t),Xf=t=>e=>typeof e===t,{isArray:Vo}=Array,_l=Xf("undefined");function j6(t){return t!==null&&!_l(t)&&t.constructor!==null&&!_l(t.constructor)&&xn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const CA=lr("ArrayBuffer");function L6(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&CA(t.buffer),e}const D6=Xf("string"),xn=Xf("function"),kA=Xf("number"),Zf=t=>t!==null&&typeof t=="object",M6=t=>t===!0||t===!1,au=t=>{if(Jf(t)!=="object")return!1;const e=uv(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},$6=lr("Date"),V6=lr("File"),F6=lr("Blob"),U6=lr("FileList"),B6=t=>Zf(t)&&xn(t.pipe),z6=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||xn(t.append)&&((e=Jf(t))==="formdata"||e==="object"&&xn(t.toString)&&t.toString()==="[object FormData]"))},W6=lr("URLSearchParams"),H6=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ec(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Vo(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function PA(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const NA=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),OA=t=>!_l(t)&&t!==NA;function gg(){const{caseless:t}=OA(this)&&this||{},e={},n=(r,s)=>{const i=t&&PA(e,s)||s;au(e[i])&&au(r)?e[i]=gg(e[i],r):au(r)?e[i]=gg({},r):Vo(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&ec(arguments[r],n);return e}const q6=(t,e,n,{allOwnKeys:r}={})=>(ec(e,(s,i)=>{n&&xn(s)?t[i]=AA(s,n):t[i]=s},{allOwnKeys:r}),t),K6=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),G6=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Q6=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&uv(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Y6=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},J6=t=>{if(!t)return null;if(Vo(t))return t;let e=t.length;if(!kA(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},X6=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&uv(Uint8Array)),Z6=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},eU=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},tU=lr("HTMLFormElement"),nU=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),B1=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),rU=lr("RegExp"),jA=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};ec(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},sU=t=>{jA(t,(e,n)=>{if(xn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(xn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},iU=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Vo(t)?r(t):r(String(t).split(e)),n},oU=()=>{},aU=(t,e)=>(t=+t,Number.isFinite(t)?t:e),gp="abcdefghijklmnopqrstuvwxyz",z1="0123456789",LA={DIGIT:z1,ALPHA:gp,ALPHA_DIGIT:gp+gp.toUpperCase()+z1},lU=(t=16,e=LA.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function cU(t){return!!(t&&xn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const uU=t=>{const e=new Array(10),n=(r,s)=>{if(Zf(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Vo(r)?[]:{};return ec(r,(o,a)=>{const l=n(o,s+1);!_l(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},dU=lr("AsyncFunction"),fU=t=>t&&(Zf(t)||xn(t))&&xn(t.then)&&xn(t.catch),N={isArray:Vo,isArrayBuffer:CA,isBuffer:j6,isFormData:z6,isArrayBufferView:L6,isString:D6,isNumber:kA,isBoolean:M6,isObject:Zf,isPlainObject:au,isUndefined:_l,isDate:$6,isFile:V6,isBlob:F6,isRegExp:rU,isFunction:xn,isStream:B6,isURLSearchParams:W6,isTypedArray:X6,isFileList:U6,forEach:ec,merge:gg,extend:q6,trim:H6,stripBOM:K6,inherits:G6,toFlatObject:Q6,kindOf:Jf,kindOfTest:lr,endsWith:Y6,toArray:J6,forEachEntry:Z6,matchAll:eU,isHTMLForm:tU,hasOwnProperty:B1,hasOwnProp:B1,reduceDescriptors:jA,freezeMethods:sU,toObjectSet:iU,toCamelCase:nU,noop:oU,toFiniteNumber:aU,findKey:PA,global:NA,isContextDefined:OA,ALPHABET:LA,generateString:lU,isSpecCompliantForm:cU,toJSONObject:uU,isAsyncFn:dU,isThenable:fU};function we(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}N.inherits(we,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:N.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const DA=we.prototype,MA={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{MA[t]={value:t}});Object.defineProperties(we,MA);Object.defineProperty(DA,"isAxiosError",{value:!0});we.from=(t,e,n,r,s,i)=>{const o=Object.create(DA);return N.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),we.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const hU=null;function yg(t){return N.isPlainObject(t)||N.isArray(t)}function $A(t){return N.endsWith(t,"[]")?t.slice(0,-2):t}function W1(t,e,n){return t?t.concat(e).map(function(s,i){return s=$A(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function pU(t){return N.isArray(t)&&!t.some(yg)}const mU=N.toFlatObject(N,{},null,function(e){return/^is[A-Z]/.test(e)});function eh(t,e,n){if(!N.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=N.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,x){return!N.isUndefined(x[w])});const r=n.metaTokens,s=n.visitor||u,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&N.isSpecCompliantForm(e);if(!N.isFunction(s))throw new TypeError("visitor must be a function");function c(y){if(y===null)return"";if(N.isDate(y))return y.toISOString();if(!l&&N.isBlob(y))throw new we("Blob is not supported. Use a Buffer instead.");return N.isArrayBuffer(y)||N.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function u(y,w,x){let v=y;if(y&&!x&&typeof y=="object"){if(N.endsWith(w,"{}"))w=r?w:w.slice(0,-2),y=JSON.stringify(y);else if(N.isArray(y)&&pU(y)||(N.isFileList(y)||N.endsWith(w,"[]"))&&(v=N.toArray(y)))return w=$A(w),v.forEach(function(_,E){!(N.isUndefined(_)||_===null)&&e.append(o===!0?W1([w],E,i):o===null?w:w+"[]",c(_))}),!1}return yg(y)?!0:(e.append(W1(x,w,i),c(y)),!1)}const f=[],p=Object.assign(mU,{defaultVisitor:u,convertValue:c,isVisitable:yg});function m(y,w){if(!N.isUndefined(y)){if(f.indexOf(y)!==-1)throw Error("Circular reference detected in "+w.join("."));f.push(y),N.forEach(y,function(v,g){(!(N.isUndefined(v)||v===null)&&s.call(e,v,N.isString(g)?g.trim():g,w,p))===!0&&m(v,w?w.concat(g):[g])}),f.pop()}}if(!N.isObject(t))throw new TypeError("data must be an object");return m(t),e}function H1(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function dv(t,e){this._pairs=[],t&&eh(t,this,e)}const VA=dv.prototype;VA.append=function(e,n){this._pairs.push([e,n])};VA.toString=function(e){const n=e?function(r){return e.call(this,r,H1)}:H1;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function gU(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function FA(t,e,n){if(!e)return t;const r=n&&n.encode||gU,s=n&&n.serialize;let i;if(s?i=s(e,n):i=N.isURLSearchParams(e)?e.toString():new dv(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class yU{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){N.forEach(this.handlers,function(r){r!==null&&e(r)})}}const q1=yU,UA={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vU=typeof URLSearchParams<"u"?URLSearchParams:dv,wU=typeof FormData<"u"?FormData:null,_U=typeof Blob<"u"?Blob:null,xU=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),EU=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Qn={isBrowser:!0,classes:{URLSearchParams:vU,FormData:wU,Blob:_U},isStandardBrowserEnv:xU,isStandardBrowserWebWorkerEnv:EU,protocols:["http","https","file","blob","url","data"]};function SU(t,e){return eh(t,new Qn.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return Qn.isNode&&N.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function TU(t){return N.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function IU(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function BA(t){function e(n,r,s,i){let o=n[i++];const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&N.isArray(s)?s.length:o,l?(N.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!N.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&N.isArray(s[o])&&(s[o]=IU(s[o])),!a)}if(N.isFormData(t)&&N.isFunction(t.entries)){const n={};return N.forEachEntry(t,(r,s)=>{e(TU(r),s,n,0)}),n}return null}function RU(t,e,n){if(N.isString(t))try{return(e||JSON.parse)(t),N.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const fv={transitional:UA,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=N.isObject(e);if(i&&N.isHTMLForm(e)&&(e=new FormData(e)),N.isFormData(e))return s&&s?JSON.stringify(BA(e)):e;if(N.isArrayBuffer(e)||N.isBuffer(e)||N.isStream(e)||N.isFile(e)||N.isBlob(e))return e;if(N.isArrayBufferView(e))return e.buffer;if(N.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return SU(e,this.formSerializer).toString();if((a=N.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return eh(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),RU(e)):e}],transformResponse:[function(e){const n=this.transitional||fv.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&N.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?we.from(a,we.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Qn.classes.FormData,Blob:Qn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};N.forEach(["delete","get","head","post","put","patch"],t=>{fv.headers[t]={}});const hv=fv,bU=N.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),AU=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&bU[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},K1=Symbol("internals");function Jo(t){return t&&String(t).trim().toLowerCase()}function lu(t){return t===!1||t==null?t:N.isArray(t)?t.map(lu):String(t)}function CU(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const kU=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function yp(t,e,n,r,s){if(N.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!N.isString(e)){if(N.isString(r))return e.indexOf(r)!==-1;if(N.isRegExp(r))return r.test(e)}}function PU(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function NU(t,e){const n=N.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class th{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,c){const u=Jo(l);if(!u)throw new Error("header name must be a non-empty string");const f=N.findKey(s,u);(!f||s[f]===void 0||c===!0||c===void 0&&s[f]!==!1)&&(s[f||l]=lu(a))}const o=(a,l)=>N.forEach(a,(c,u)=>i(c,u,l));return N.isPlainObject(e)||e instanceof this.constructor?o(e,n):N.isString(e)&&(e=e.trim())&&!kU(e)?o(AU(e),n):e!=null&&i(n,e,r),this}get(e,n){if(e=Jo(e),e){const r=N.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return CU(s);if(N.isFunction(n))return n.call(this,s,r);if(N.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Jo(e),e){const r=N.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||yp(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=Jo(o),o){const a=N.findKey(r,o);a&&(!n||yp(r,r[a],a,n))&&(delete r[a],s=!0)}}return N.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||yp(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return N.forEach(this,(s,i)=>{const o=N.findKey(r,i);if(o){n[o]=lu(s),delete n[i];return}const a=e?PU(i):String(i).trim();a!==i&&delete n[i],n[a]=lu(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return N.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&N.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[K1]=this[K1]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=Jo(o);r[a]||(NU(s,o),r[a]=!0)}return N.isArray(e)?e.forEach(i):i(e),this}}th.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);N.reduceDescriptors(th.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});N.freezeMethods(th);const wr=th;function vp(t,e){const n=this||hv,r=e||n,s=wr.from(r.headers);let i=r.data;return N.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function zA(t){return!!(t&&t.__CANCEL__)}function tc(t,e,n){we.call(this,t??"canceled",we.ERR_CANCELED,e,n),this.name="CanceledError"}N.inherits(tc,we,{__CANCEL__:!0});function OU(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new we("Request failed with status code "+n.status,[we.ERR_BAD_REQUEST,we.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const jU=Qn.isStandardBrowserEnv?function(){return{write:function(n,r,s,i,o,a){const l=[];l.push(n+"="+encodeURIComponent(r)),N.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),N.isString(i)&&l.push("path="+i),N.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function LU(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function DU(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function WA(t,e){return t&&!LU(e)?DU(t,e):e}const MU=Qn.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let o=i;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){const a=N.isString(o)?s(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function $U(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function VU(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[i];o||(o=c),n[s]=l,r[s]=c;let f=i,p=0;for(;f!==s;)p+=n[f++],f=f%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const m=u&&c-u;return m?Math.round(p*1e3/m):void 0}}function G1(t,e){let n=0;const r=VU(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-n,l=r(a),c=i<=o;n=i;const u={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-i)/l:void 0,event:s};u[e?"download":"upload"]=!0,t(u)}}const FU=typeof XMLHttpRequest<"u",UU=FU&&function(t){return new Promise(function(n,r){let s=t.data;const i=wr.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let c;N.isFormData(s)&&(Qn.isStandardBrowserEnv||Qn.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?N.isString(c=i.getContentType())&&i.setContentType(c.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let u=new XMLHttpRequest;if(t.auth){const y=t.auth.username||"",w=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(y+":"+w))}const f=WA(t.baseURL,t.url);u.open(t.method.toUpperCase(),FA(f,t.params,t.paramsSerializer),!0),u.timeout=t.timeout;function p(){if(!u)return;const y=wr.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),x={data:!o||o==="text"||o==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:y,config:t,request:u};OU(function(g){n(g),l()},function(g){r(g),l()},x),u=null}if("onloadend"in u?u.onloadend=p:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(p)},u.onabort=function(){u&&(r(new we("Request aborted",we.ECONNABORTED,t,u)),u=null)},u.onerror=function(){r(new we("Network Error",we.ERR_NETWORK,t,u)),u=null},u.ontimeout=function(){let w=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const x=t.transitional||UA;t.timeoutErrorMessage&&(w=t.timeoutErrorMessage),r(new we(w,x.clarifyTimeoutError?we.ETIMEDOUT:we.ECONNABORTED,t,u)),u=null},Qn.isStandardBrowserEnv){const y=MU(f)&&t.xsrfCookieName&&jU.read(t.xsrfCookieName);y&&i.set(t.xsrfHeaderName,y)}s===void 0&&i.setContentType(null),"setRequestHeader"in u&&N.forEach(i.toJSON(),function(w,x){u.setRequestHeader(x,w)}),N.isUndefined(t.withCredentials)||(u.withCredentials=!!t.withCredentials),o&&o!=="json"&&(u.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&u.addEventListener("progress",G1(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",G1(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=y=>{u&&(r(!y||y.type?new tc(null,t,u):y),u.abort(),u=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const m=$U(f);if(m&&Qn.protocols.indexOf(m)===-1){r(new we("Unsupported protocol "+m+":",we.ERR_BAD_REQUEST,t));return}u.send(s||null)})},vg={http:hU,xhr:UU};N.forEach(vg,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Q1=t=>`- ${t}`,BU=t=>N.isFunction(t)||t===null||t===!1,HA={getAdapter:t=>{t=N.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!BU(n)&&(r=vg[(o=String(n)).toLowerCase()],r===void 0))throw new we(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(Q1).join(`
`):" "+Q1(i[0]):"as no adapter specified";throw new we("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:vg};function wp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new tc(null,t)}function Y1(t){return wp(t),t.headers=wr.from(t.headers),t.data=vp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),HA.getAdapter(t.adapter||hv.adapter)(t).then(function(r){return wp(t),r.data=vp.call(t,t.transformResponse,r),r.headers=wr.from(r.headers),r},function(r){return zA(r)||(wp(t),r&&r.response&&(r.response.data=vp.call(t,t.transformResponse,r.response),r.response.headers=wr.from(r.response.headers))),Promise.reject(r)})}const J1=t=>t instanceof wr?t.toJSON():t;function To(t,e){e=e||{};const n={};function r(c,u,f){return N.isPlainObject(c)&&N.isPlainObject(u)?N.merge.call({caseless:f},c,u):N.isPlainObject(u)?N.merge({},u):N.isArray(u)?u.slice():u}function s(c,u,f){if(N.isUndefined(u)){if(!N.isUndefined(c))return r(void 0,c,f)}else return r(c,u,f)}function i(c,u){if(!N.isUndefined(u))return r(void 0,u)}function o(c,u){if(N.isUndefined(u)){if(!N.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,f){if(f in e)return r(c,u);if(f in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u)=>s(J1(c),J1(u),!0)};return N.forEach(Object.keys(Object.assign({},t,e)),function(u){const f=l[u]||s,p=f(t[u],e[u],u);N.isUndefined(p)&&f!==a||(n[u]=p)}),n}const qA="1.6.0",pv={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{pv[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const X1={};pv.transitional=function(e,n,r){function s(i,o){return"[Axios v"+qA+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new we(s(o," has been removed"+(n?" in "+n:"")),we.ERR_DEPRECATED);return n&&!X1[o]&&(X1[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};function zU(t,e,n){if(typeof t!="object")throw new we("options must be an object",we.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new we("option "+i+" must be "+l,we.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new we("Unknown option "+i,we.ERR_BAD_OPTION)}}const wg={assertOptions:zU,validators:pv},$r=wg.validators;class fd{constructor(e){this.defaults=e,this.interceptors={request:new q1,response:new q1}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=To(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&wg.assertOptions(r,{silentJSONParsing:$r.transitional($r.boolean),forcedJSONParsing:$r.transitional($r.boolean),clarifyTimeoutError:$r.transitional($r.boolean)},!1),s!=null&&(N.isFunction(s)?n.paramsSerializer={serialize:s}:wg.assertOptions(s,{encode:$r.function,serialize:$r.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&N.merge(i.common,i[n.method]);i&&N.forEach(["delete","get","head","post","put","patch","common"],y=>{delete i[y]}),n.headers=wr.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(l=l&&w.synchronous,a.unshift(w.fulfilled,w.rejected))});const c=[];this.interceptors.response.forEach(function(w){c.push(w.fulfilled,w.rejected)});let u,f=0,p;if(!l){const y=[Y1.bind(this),void 0];for(y.unshift.apply(y,a),y.push.apply(y,c),p=y.length,u=Promise.resolve(n);f<p;)u=u.then(y[f++],y[f++]);return u}p=a.length;let m=n;for(f=0;f<p;){const y=a[f++],w=a[f++];try{m=y(m)}catch(x){w.call(this,x);break}}try{u=Y1.call(this,m)}catch(y){return Promise.reject(y)}for(f=0,p=c.length;f<p;)u=u.then(c[f++],c[f++]);return u}getUri(e){e=To(this.defaults,e);const n=WA(e.baseURL,e.url);return FA(n,e.params,e.paramsSerializer)}}N.forEach(["delete","get","head","options"],function(e){fd.prototype[e]=function(n,r){return this.request(To(r||{},{method:e,url:n,data:(r||{}).data}))}});N.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(To(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}fd.prototype[e]=n(),fd.prototype[e+"Form"]=n(!0)});const cu=fd;class mv{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new tc(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new mv(function(s){e=s}),cancel:e}}}const WU=mv;function HU(t){return function(n){return t.apply(null,n)}}function qU(t){return N.isObject(t)&&t.isAxiosError===!0}const _g={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(_g).forEach(([t,e])=>{_g[e]=t});const KU=_g;function KA(t){const e=new cu(t),n=AA(cu.prototype.request,e);return N.extend(n,cu.prototype,e,{allOwnKeys:!0}),N.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return KA(To(t,s))},n}const nt=KA(hv);nt.Axios=cu;nt.CanceledError=tc;nt.CancelToken=WU;nt.isCancel=zA;nt.VERSION=qA;nt.toFormData=eh;nt.AxiosError=we;nt.Cancel=nt.CanceledError;nt.all=function(e){return Promise.all(e)};nt.spread=HU;nt.isAxiosError=qU;nt.mergeConfig=To;nt.AxiosHeaders=wr;nt.formToJSON=t=>BA(N.isHTMLForm(t)?new FormData(t):t);nt.getAdapter=HA.getAdapter;nt.HttpStatusCode=KU;nt.default=nt;const GU=nt,gv=GU.create({baseURL:{}.VITE_ENDPOINT||"https://express-zingmp3-awx6.vercel.app"}),QU=t=>new Date(t.toDate().getTime()).toLocaleString(),GA=t=>(n=>n.toLocaleLowerCase().replace(/||||||||||/g,"a").replace(/||||||||||/g,"e").replace(/||||/g,"i").replace(/||||||||||/g,"o").replace(/||||||||||/g,"u").replace(/||||/g,"y").replace(//g,"d"))(t).toLocaleLowerCase().replaceAll(/[\W_]/g,"")+"_"+wl(4),YU=async t=>{if(!t)return;const e=await N6(t);if(!e)return;const{title:n,artist:r,images:s}=e,i={name:"",singer:"",image:null};return i.name=n||t.name,i.singer=r||"...",s.length&&(i.image=s[0].data),i},QA=async t=>{const e=Date.now(),n=await gv.post("/api/image/encode",t);let r;n&&(r=n.data.encode);const s=(Date.now()-e)/1e3;return console.log(">>> api: get blurHash encode finished after",s),{encode:r}},JU=async t=>{const e=new FormData;e.append("file",t);const n=Date.now(),r=await gv.post("/api/image/optimize",e,{responseType:"blob"});let s;r&&(s=r.data);const i=(Date.now()-n)/1e3;return console.log(">>> api: optimize finished after",i),s},hd=t=>{if(!t)return"";let e=0,n=+t.toFixed(0);for(;n>=60;)n-=60,e++;return e<10?n>=10?`0${e}:${n}`:`0${e}:0${n}`:n>=10?`${e}:${n}`:`${e}:0${n}`},Xr=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);if(n!=-1)return e[n]=t,n},nc=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);n!=-1&&(e[n]=t)},XU=t=>{let e=0,n=[];return t.forEach(r=>{e+=r.duration,n.push(r.id)}),{time:e,ids:n}},_p=({newPlaylistSongs:t,existingPlaylist:e})=>{const{ids:n,time:r}=XU(t);return{...e,time:+r.toFixed(1),song_ids:n,count:n.length}},Z1=({song:t,playlist:e})=>({...e,time:+(e.time+t.duration).toFixed(1),song_ids:[...e.song_ids,t.id],count:e.count+1}),YA=({...t})=>({...{name:"",singer:"",image_url:"",song_url:"",by:"",duration:0,lyric_id:"",image_file_path:"",song_file_path:"",id:"",in_playlist:[],blurhash_encode:""},...t});function ZU({firstTimeRender:t}){const e=pn(),{userInfo:n}=Rn(),{song:r,playlist:s}=st(rt),{loading:i,errorMsg:o,initial:a}=Yf(),{adminSongs:l,userSongs:c,userPlaylists:u,setUserPlaylists:f}=fn(),[p,m]=h.useState(i),[y,w]=h.useState([]),x=h.useRef(!0),v=h.useRef(0),{setErrorToast:g}=$n(),_=Bd(),E=Or(),S=h.useCallback(async()=>{if(!a||!_.id){E(Ce.Home);return}const R=u.find(C=>C.id===_.id);R&&(console.log("set playlist after init"),e(Eo(R)),m(!1))},[_,n]),T=h.useCallback(()=>{console.log("get playlist songs");let R=[],C;if(!s.song_ids.length){w([]);return}if(s.song_ids.some(A=>A.includes("admin")))C=[...l,...c];else switch(s.by){case"admin":C=l;break;default:C=c}if(s.song_ids.forEach(A=>{const D=C.find(L=>A===L.id);D&&R.push(D)}),s.song_ids.length!==R.length){console.log("get playlist song error"),g({});return}w(R),v.current||(v.current=R.length)},[s.song_ids,c]),I=h.useCallback(async R=>{try{await Et({collection:"playlist",id:s.id,data:{newPlaylist:R}})}catch{console.log("error when set playlist image"),g({})}},[]);return h.useEffect(()=>{if(console.log("useEffect 1",t.current),t.current||a){if(!a||o)return;if(s.id===_.id){console.log("already have playlist"),m(!1);return}S()}},[a]),h.useEffect(()=>{if(t.current||s.song_ids){if(!s.name||o||s.id!==_.id)return;T()}},[s.song_ids]),h.useEffect(()=>{if(t.current||y.length){if(!a||!y.length)return;const R=y.find(A=>A.image_url);if(!R||s.image_url&&s.image_url===R.image_url)return;console.log("get playlist feature image");const C={...s,image_url:R.image_url,blurhash_encode:R.blurhash_encode||""};I(C);const b=[...u];nc(C,b),f(b,[]),e(Eo(C)),K0(b,n)}},[y]),h.useEffect(()=>{if(t.current||y.length){if(x.current){console.log("useEffect 3 first run get songs,  do nothing"),x.current=!1;return}if(!r.song_in.includes(s.name)){console.log("useEffect 3 no longer play, do nothing");return}if(console.log("check prev songs length",v.current,y.length),_.id===s.name&&v.current===y.length){console.log("useEffect 3 second times open, do nothing");return}console.log("useEffect 3 "),v.current=y.length,t.current=!1}},[y]),{playlistSongs:y,loading:p}}function eB({containerRef:t,songItemRef:e,isOpenFullScreen:n}){const{song:r}=st(rt),s=()=>{const i=window.innerWidth,o=e==null?void 0:e.current,a=t==null?void 0:t.current;if(!o||!a)return;const c=o.getBoundingClientRect().left,u=i-(c+o.offsetWidth),f=Math.abs(Math.ceil(c-u))/2;if(f===0)return;Math.abs(c)>i||Math.abs(u)>i?a.style.scrollBehavior="auto":a.style.scrollBehavior="smooth";let p=a.scrollLeft;u>c?setTimeout(()=>{a.scrollLeft=p-f},300):u<c&&setTimeout(()=>{a.scrollLeft=p+f},300)};return h.useEffect(()=>{if(n){if(!scroll||!(t!=null&&t.current)||!(e!=null&&e.current)){console.log("lack props");return}r.name&&n&&s()}},[r,n]),{scrollToActiveSong:s}}function tB({text:t,textWrapper:e,autoScroll:n}){const{song:r}=st(rt),{setErrorToast:s}=$n(),i=h.useRef(),o=h.useRef(),a=h.useRef(0),l=h.useRef(""),c=h.useRef(0),[u,f]=h.useState(!1),p=h.useCallback(()=>{if(!t){console.log("lack props");return}const w=t.current;w&&(w.style.transition="none",w.style.transform="translateX(0)",f(!1))},[t]),m=h.useCallback(()=>{if(!t){console.log("lack of prop");return}if(!a.current&&!c.current)return;const w=t.current;w&&(w.innerHTML=l.current+"&nbsp; &nbsp; &nbsp;"+l.current,f(!0),w.style.transition=`transform linear ${a.current}s`,w.style.transform=`translateX(-${c.current}px)`,o.current=setTimeout(()=>{p()},a.current*1e3))},[t,e]),y=h.useCallback(()=>{if(!n||!t||!e||u)return;const w=t.current,x=e.current;w.offsetWidth-x.offsetWidth>0&&(l.current=w.innerText,c.current=w.offsetWidth+20,a.current=+(c.current/35).toFixed(1))},[u,t,e]);h.useEffect(()=>{if(r.name&&(y(),!!c.current))return n&&a.current&&!u&&(setTimeout(()=>{m()},1e3),i.current=setInterval(()=>{m()},a.current*1e3+3e3+1e3)),()=>{i.current?(clearInterval(i.current),console.log("clear timer")):(console.log("No timer id"),s({})),o.current?clearTimeout(o.current):(console.log("No timer id"),s({})),l.current&&(p(),a.current=0,c.current=0)}},[r])}const yv=()=>{const t=pn(),{userPlaylists:e,setUserPlaylists:n,userSongs:r,setUserSongs:s}=fn(),{playlist:i}=st(rt),o=h.useCallback(async({newPlaylist:l})=>{const c=[...e];nc(l,c),i.name===l.name&&t(Eo(l)),await Et({collection:"playlist",data:l,id:l.id}),n(c,[])},[e,i]),a=h.useCallback(async({song:l})=>{let c=[...r];const u=c.indexOf(l);c.splice(u,1);const f=c.map(p=>p.id);if(c.length!==r.length)return s(c),f},[r]);return{setPlaylistDocAndSetUserPlaylists:o,updateAndSetUserSongs:a}};function JA({audioRef:t,admin:e,songs:n,setSongs:r,firstTempSong:s,inputRef:i,testImageRef:o}){const{userInfo:a}=Rn(),{setErrorToast:l,setSuccessToast:c,setToasts:u}=$n(),{setUserSongs:f,userSongs:p}=fn(),[m,y]=h.useState("idle"),[w,x]=h.useState([]),[v,g]=h.useState([]),_=h.useRef([]),E=h.useRef([]),S=h.useRef(!1),T=b=>{const A=i.current;A.value="",y(b)},I=h.useCallback(async b=>{if(!a.email){l({message:"Missing user data"});return}y("uploading");const D=b.target.files;if(!D.length){y("finish");return}let L=YA({by:e?"admin":a.email}),U=[],Y=[];e&&n?Y=n:Y=p;const z=Date.now();try{let ee;for(ee=0;ee<=D.length-1;ee++){const k=D[ee],F=await YU(k);if(!F){l({message:"Error when parser song"});return}let B={...L,name:F.name,singer:F.singer},M;if(F.image){M=new Blob([F.image],{type:"application/octet-stream"});const P=URL.createObjectURL(M);B.image_url=P}if((()=>Y.some(P=>P.singer===B.singer&&P.name===B.name))()){console.log(">>>duplicate"),S.current=!0,_.current.push(B);continue}U.push(B),E.current=[...E.current,ee],Object.assign(k,{for_song_id:U.length-1,imageBlob:M})}if(p.length+E.current.length>20&&a.role!=="admin"){T("finish-error"),l({message:"You have reach the upload limit"});return}if(!U.length){y("finish-error"),T("finish-error"),l({message:"Duplicate song"});return}x(U);for(let k of E.current){let F=D[k],B=GA(U[F.for_song_id].name);e?B+="_admin":B+="_"+a.email.replace("@gmail.com","");const M=F.for_song_id,j={...U[M]};j.image_url&&(console.log("have stock image"),await R(F.imageBlob,B,j));const{filePath:P,fileURL:W}=await Wb({file:F,folder:"/songs/",email:a.email,msg:">>> api: upload song file"});U[M]={...j,id:B,song_file_path:P,song_url:W},console.log("code running...");const J=t.current;J.src=URL.createObjectURL(F),await C(U,M)}}catch{T("finish-error"),l({message:"Error when upload song file"}),x([]);return}try{if(E.current=[],!e){const k=U.map(M=>M.id),B=[...p.map(M=>M.id),...k];await qb({songIds:B,userInfo:a}),f([...p,...U])}x([]),r&&r([...Y,...U]),S.current?(T("finish-error"),u(k=>[...k,{id:wl(4),title:"warning",desc:"Song duplicate"}])):(T("finish"),U.length>1&&c({message:`${U.length} songs uploaded`}));const ee=Date.now();console.log(">>> upload songs finished after",(ee-z)/1e3)}catch(ee){console.log(ee),l({message:"Update user data failed"}),T("finish-error");return}},[a,p,n]),R=async(b,A,D)=>new Promise((L,U)=>{const Y=o.current,z=URL.createObjectURL(b);Y.src=z;const ee=async()=>{try{URL.revokeObjectURL(z);const{encode:F}=await QA(b),{fileURL:B,filePath:M}=await Hb({blob:b,folder:"/images/",songId:A,msg:">>> api: upload song's image blob"});F&&(D.blurhash_encode=F),D.image_url=B,D.image_file_path=M,L()}catch{console.log("[error]: upload image error"),Y.removeEventListener("error",k),U()}finally{Y.removeEventListener("load",ee)}},k=()=>{console.log("[error]: stock image error"),URL.revokeObjectURL(z),D.song_url="",Y.removeEventListener("error",k),L()};Y.addEventListener("load",ee),Y.addEventListener("error",k)}),C=h.useCallback(async(b,A)=>new Promise((D,L)=>{const U=t.current,Y=async()=>{try{let z=b[A];const ee=+U.duration.toFixed(1)||99;z={...z,duration:ee},b[A]=z,await Et({collection:"songs",data:z,id:z.id,msg:">>> api: set song doc"}),x(b),g(k=>[...k,z.id]),URL.revokeObjectURL(U.src),u(k=>[...k,{title:"success",id:wl(4),desc:`'${z.name}' uploaded`}]),D()}catch{console.log("[error]: upload song file error"),L()}finally{U.removeEventListener("loadedmetadata",Y)}};U.addEventListener("loadedmetadata",Y)}),[]);return h.useEffect(()=>{if(!w.length)return;const b=s.current;b&&b.scrollIntoView({behavior:"smooth",block:"center"})},[w]),{tempSongs:w,setTempSongs:x,addedSongIds:v,status:m,handleInputChange:I}}function nB(t,e,n){const[r,s]=h.useState(!1),[i,o]=mg("volume",1),a=c=>{const f=c.target.getBoundingClientRect();if(t.current){let p=+((c.clientX-f.x)/t.current).toFixed(2);p>.9?p=1:p<.05?(p=0,s(!0)):s(!1),o(p)}},l=()=>{s(!r)};return h.useEffect(()=>{e.current&&n&&(e.current.style.width=i*100+"%",n.volume=i)},[i]),h.useEffect(()=>{n&&(r?n.muted=!0:n.muted=!1)},[r]),{volume:i,handleSetVolume:a,isMute:r,handleMute:l}}const rB=/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;function sB({data:t,inputFields:e,localImageURL:n}){const[r,s]=h.useState(!!t.name),[i,o]=h.useState(!!t.singer),[a,l]=h.useState(!1),[c,u]=h.useState(!1),[f,p]=h.useState(!1);return h.useEffect(()=>{e.name?s(!0):s(!1)},[e.name]),h.useEffect(()=>{e.singer?o(!0):o(!1)},[e.singer]),h.useEffect(()=>{if(!e.image_url){l(!0);return}const m=rB.test(e.image_url);l(m)},[e.image_url]),h.useEffect(()=>{(e.name!==t.name||e.singer!==t.singer||e.image_url)&&p(!0)},[e,n]),h.useEffect(()=>{u(r&&i&&a&&f)},[r,i,a,f]),{validName:r,validSinger:i,validURL:a,isAbleToSubmit:c,isChangeInEdit:f,setValidURL:l}}function XA({data:t,setIsOpenModal:e,userSongs:n,setUserSongs:r,theme:s}){const{song:i}=st(rt),{setErrorToast:o,setSuccessToast:a}=$n(),{userInfo:l}=Rn(),c=pn(),[u,f]=h.useState(!1),[p,m]=h.useState(!1),[y,w]=h.useState(t.image_url),[x,v]=h.useState(""),[g,_]=h.useState(),[E,S]=h.useState({name:t.name,singer:t.singer,image_url:""}),T=h.useRef(null),{isAbleToSubmit:I,validName:R,validSinger:C,validURL:b,isChangeInEdit:A,setValidURL:D}=sB({data:t,inputFields:E,localImageURL:x}),L=h.useMemo(()=>{if(x)return x;if(y)return y;if(b)return E.image_url},[E,x,y,t,b]),U=h.useMemo(()=>!!x||!!y,[x,y]),Y=(j,P)=>{S({...E,[j]:P})},z=h.useCallback(()=>{t.image_file_path&&!x?w(""):x?(v(""),_(void 0)):w(""),m(!0);const j=T.current;j&&(j.value="")},[x,t.image_file_path]),ee=h.useCallback(j=>{const W=j.target.files[0];v(URL.createObjectURL(W)),m(!0),_(W)},[]),k=()=>{f(!1),e(!1)},F=j=>{j.stopPropagation(),k(),e(!1)},B=h.useCallback(async()=>{if(!n||!r){o({message:"Lack of props"});return}if(!t.id){o({message:"Edit song wrong data id"});return}try{const j=[...n];let P={...t};if(A){if(console.log("is change in edit"),!E.name||!E.singer){console.log("input invalid"),o({});return}const W=E.image_url&&b?E.image_url:P.image_url;if(f(!0),P={...P,name:E.name,singer:E.singer,image_url:W},P.name!==E.name||P.singer!==E.singer){console.log("input invalid"),o({});return}if(g&&p){const{filePath:J,fileURL:se}=await Wb({file:g,folder:"/images/",email:l.email});P.image_file_path=J,P.image_url=se}else p&&(P.image_file_path="");if(!p&&Xr(P,j)==null){o({message:"New user song Error"});return}}if(p){if(f(!0),console.log("isImpactOnImage"),(!g||g&&t.image_file_path)&&(P.image_file_path="",P.image_url="",await cg({filePath:t.image_file_path,msg:">>> api: delete song's image file"})),g){const J=await JU(g);if(J==null)return;const se=Hb({blob:J,folder:"/images/",songId:P.id}),{encode:ae}=await QA(J);ae&&(P.blurhash_encode=ae,console.log("check encode",ae));const{filePath:Z,fileURL:me}=await se;P.image_file_path=Z,P.image_url=me}if(Xr(P,j)==null){o({message:"New user song Error"});return}}r(j),p&&i.id===P.id&&c(rn({...P,currentIndex:i.currentIndex,song_in:i.song_in})),await Et({collection:"songs",data:P,id:P.id,msg:">>> api: update song doc"}),a({message:`${P.name} edited`}),k()}catch(j){console.log(j),j.response.data?console.log("[error]: ",j.response.data):console.log("[error]: Server error"),o({})}finally{f(!1)}},[E,g,n,t,p]),M={textColor:s.type==="light"?"text-[#333]":"text-[#fff]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${s.alpha} text-[14px] font-[500]`};return d.jsxs("div",{className:"w-[50vw] h-[auto]",children:[d.jsx("input",{ref:T,id:"editImageInput",type:"file",onChange:ee,className:"hidden"}),d.jsx("h1",{className:"text-[20px] font-semibold",children:"Edit"}),d.jsxs("div",{className:"flex mt-[10px]",children:[d.jsxs("div",{children:[d.jsx("div",{className:"w-[130px] h-[130px] flex-shrink-0 rounded-[5px] overflow-hidden",children:d.jsx(or,{classNames:"object-cover object-center w-full h-full",onError:()=>D(!1),src:L,blurHashEncode:t.blurhash_encode})}),d.jsxs("div",{className:"flex items-center gap-[12px] mt-[10px]",children:[d.jsx("label",{htmlFor:"editImageInput",className:`inline-block cursor-pointer hover:brightness-90 px-[20px] py-[5px] bg-${s.alpha} rounded-full text-[14px]`,children:d.jsx(TN,{className:"w-[15px]"})}),U&&d.jsx(te,{onClick:()=>z(),className:`inline-block hover:brightness-90 px-[20px] py-[5px] ${s.content_bg} rounded-full text-[14px]`,children:d.jsx(dr,{className:"w-[15px]"})})]}),d.jsx("p",{className:`text-[12px] ${M.textColor} mt-[10px]`,children:"* Image from URL will not be apply until you remove current image"})]}),d.jsxs("div",{className:"ml-[20px] w-full flex flex-col gap-[10px]",children:[d.jsxs("div",{className:"flex flex-col gap-[5px]",children:[d.jsxs("p",{className:"text-[14px] inline-flex",children:["Name:",R?d.jsx(va,{className:"w-[20px] text-emerald-500 ml-[10px]"}):d.jsx(dr,{className:"w-[20px] text-red-500 ml-[10px]"})]}),d.jsx("input",{className:`${M.input} ${M.textColor}`,value:E.name,type:"text",onChange:j=>Y("name",j.target.value),placeholder:t.name})]}),d.jsxs("div",{className:"flex flex-col gap-[5px]",children:[d.jsxs("p",{className:"inline-flex text-[14px]",children:["Singer:",C?d.jsx(va,{className:"w-[20px] text-emerald-500 ml-[10px]"}):d.jsx(dr,{className:"w-[20px] text-red-500 ml-[10px]"})]}),d.jsx("input",{className:M.input,value:E.singer,onChange:j=>Y("singer",j.target.value),type:"text",placeholder:t.singer})]}),d.jsxs("div",{className:"flex flex-col gap-[5px]",children:[d.jsxs("p",{className:"inline-flex text-[14px]",children:["Image URL:",E.image_url&&d.jsx(d.Fragment,{children:b?d.jsx(va,{className:"w-[20px] text-emerald-500 ml-[10px]"}):d.jsx(dr,{className:"w-[20px] text-red-500 ml-[10px]"})})]}),d.jsx("input",{className:M.input,value:E.image_url,onChange:j=>Y("image_url",j.target.value),type:"text"})]}),d.jsxs("div",{className:"flex gap-[10px] mt-[10px]",children:[d.jsx(te,{onClick:F,className:`bg-${s.alpha} rounded-full text-[14px]`,variant:"primary",children:d.jsx(dr,{className:"w-[20px]"})}),d.jsx(te,{isLoading:u,onClick:()=>B(),className:`${s.content_bg} rounded-full text-[14px] ${I?"":!p&&"pointer-events-none opacity-60"}`,variant:"primary",children:"Save"})]})]})]})]})}function iB({toast:t,theme:e,onClick:n}){const r={icon:"w-[30px] max-[549px]:w-[25px]",container:`text-white px-[20px] py-[10px] rounded-[4px] flex items-center  ${e.bottom_player_bg} border border-${e.alpha}`,text:`font-[500] text-[16px] max-[549px]:text-[14px] ${e.type==="light"?"text-[#333]":""}`};return d.jsxs("div",{onClick:()=>n(t.id),className:`${r.container} animate-[fadeIn_0.3s_linear]`,children:[d.jsxs("span",{className:"mr-[10px]",children:[t.title==="success"&&d.jsx(QS,{className:`${r.icon} text-emerald-500 `}),t.title==="error"&&d.jsx(n5,{className:`${r.icon} text-red-500`}),t.title==="warning"&&d.jsx(ZS,{className:`${r.icon} text-yellow-500`})]}),d.jsx("p",{className:r.text,children:t.desc})]})}function oB({children:t}){const[e,n]=Zl(ui),{setUserInfo:r,userInfo:s}=Rn(),i=h.useRef(!1),o=async()=>{i.current=!0;try{await gv.get("")}catch(l){l.response?console.log(">>> server is running"):console.log(">>> server is offline")}},a=async()=>{try{await Et({collection:"users",data:{email:e==null?void 0:e.email,latest_seen:AF(),photoURL:e==null?void 0:e.photoURL,display_name:e==null?void 0:e.displayName},id:e==null?void 0:e.email}),console.log(">>> auth have user, update status"),r({status:"finish",email:e==null?void 0:e.email,display_name:e==null?void 0:e.displayName,photoURL:e==null?void 0:e.photoURL})}catch(l){console.log(l)}};return h.useEffect(()=>{if(!n){if(!e){s.status!=="finish"&&(console.log(">>> auth no user, update status"),r({status:"finish"}));return}i.current||o(),a()}},[e,n]),t}const ZA="/React-Zingmp3/assets/icon-zing-b16ab47b.svg";function aB({idle:t,audioEle:e,isOpenFullScreen:n,isPlaying:r,isWaiting:s,setIsWaiting:i,setIsPlaying:o,setIsOpenFullScreen:a}){const l=st(rt),{song:c}=l,{theme:u}=ct(),f=h.useRef(),p=h.useRef(null),m=h.useRef(null),y=Cs(),{handleSetVolume:w,isMute:x,handleMute:v}=nB(f,m,e),g=h.useMemo(()=>y.pathname.includes("edit"),[y]);h.useEffect(()=>{var E;f.current=(E=p.current)==null?void 0:E.offsetWidth},[n]);const _={before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]",wrapper:`border-${u.alpha} fixed bottom-0 w-full h-[90px] border-t transition-transform z-50 px-10`,container:"flex flex-row gap-[10px] h-full items-stretch",controlWrapper:"flex max-w-[400px] flex-grow",controlWrapperChild_1:`${n?"max-w-[600px] flex-col-reverse pb-[10px]":"flex-col justify-center"}`,controlWrapperChild_2:`${!c.song_url&&"pointer-events-none opacity-60"}`,volumeWrapper:"volume-control w-1/3 flex items-center justify-end gap-5",volumeLineBase:"ml-3 w-full relative h-[4px] cursor-pointer rounded-3xl bg-gray-200",volumeLineCurrent:"absolute left-0 top-0 h-full w-full rounded-l-full"};return d.jsxs("div",{className:`${_.wrapper} ${n&&"border-transparent"} ${g&&"translate-y-[100%] "} bg-transparent`,children:[d.jsx("div",{className:`absolute inset-0 ${u.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1] ${n?"opacity-0 transition-opacity delay-[.2s]":""}`}),d.jsxs("div",{className:`${_.container} ${n?"justify-center text-white":"justify-between"} ${t&&"transition-opacity duration-[.3s] opacity-0"}`,children:[d.jsx("div",{className:`current-song w-1/3 ${n?"hidden":""}`,children:d.jsxs("div",{className:`flex flex-row items-center h-full origin-center ${n?"hidden":""}`,children:[d.jsx("div",{className:"w-[2.5rem] h-[2.5rem]",children:d.jsx(or,{blurHashEncode:c.blurhash_encode,src:c.image_url||ZA,classNames:"rounded-full"})}),d.jsxs("div",{className:"ml-[10px] flex-grow",children:[d.jsx("div",{className:"h-[24px] w-full mask-image-horizontal",children:h.useMemo(()=>d.jsx(Td,{songInStore:c,autoScroll:!0,classNames:"text-[18px] font-[500]",label:(c==null?void 0:c.name)||"name"}),[c])}),d.jsx("div",{className:"h-[20px] w-full mask-image-horizontal",children:h.useMemo(()=>d.jsx(Td,{songInStore:c,autoScroll:!0,classNames:"text-[14px] opacity-60",label:(c==null?void 0:c.singer)||"singer"}),[c])})]})]})}),d.jsx("div",{className:` ${_.controlWrapper} ${_.controlWrapperChild_1}  ${_.controlWrapperChild_2}`,children:h.useMemo(()=>d.jsx(eC,{audioEle:e,idle:!1,isPlaying:r,isWaiting:s,isOpenFullScreen:n,setIsWaiting:i,setIsPlaying:o}),[r,n,s])}),d.jsxs("div",{className:`${_.volumeWrapper}  ${n?"hidden":""}`,children:[d.jsxs("div",{className:"flex items-center w-[150px]",children:[d.jsx("button",{onClick:()=>v(),children:x?d.jsx(qO,{className:"w-6 h-6"}):d.jsx(zO,{className:"w-6 h-6"})}),d.jsx("div",{onClick:E=>w(E),ref:p,className:`${_.volumeLineBase} ${_.before}`,children:d.jsx("div",{ref:m,className:`${_.volumeLineCurrent} ${u.content_bg}`})})]}),d.jsx(te,{onClick:()=>a(!0),variant:"circle",className:`h-[35px] w-[35px] p-[8px] ${c.name?"":"opacity-20 pointer-events-none"}`,children:d.jsx(QN,{})})]})]})]})}function eC({audioEle:t,isPlaying:e,isOpenFullScreen:n,isWaiting:r,setIsPlaying:s,setIsWaiting:i}){const o=pn(),{theme:a}=ct(),{song:l}=st(rt),{actuallySongs:c}=Qf(),u=Cs(),[f,p]=h.useState(!1),[m,y]=h.useState(!1),[w,x]=mg("repeat",!1),[v,g]=mg("shuffle",!1),_=h.useRef(0),E=h.useRef(),S=h.useRef(null),T=h.useRef(null),I=h.useRef(null),R=h.useRef(null),C=h.useRef(!0),b=h.useRef(!1),A=h.useMemo(()=>u.pathname.includes("edit"),[u]),D=()=>{t==null||t.play()},L=()=>{t==null||t.pause()},U=Z=>c[Z],Y=()=>{e?L():D()},z=()=>{s(!1)},ee=()=>{i(!1),p(!1)},k=()=>{i(!0)},F=h.useCallback(()=>{L(),i(!0),y(!1);const Z=T.current;Z&&I.current&&R.current&&(I.current.innerText="00:00",Z.style.width="0%")},[]),B=h.useCallback(Z=>{const me=Z.target;if(E.current&&_.current){i(!0);const Jt=me.getBoundingClientRect(),ce=T.current,re=(Z.clientX-Jt.left)/E.current,q=re*_.current;t&&ce&&(t.currentTime=+q.toFixed(1),ce.style.width=(re*100).toFixed(1)+"%",e||D())}},[n,l]),M=h.useCallback(()=>{let Z=l.currentIndex+1,me;Z<c.length?me=c[Z]:(me=c[0],Z=0),o(rn({...me,currentIndex:Z,song_in:l.song_in}))},[l,c]),j=h.useCallback(()=>{let Z=l.currentIndex-1,me;Z>=0?me=c[Z]:(me=c[c.length-1],Z=c.length-1),o(rn({...me,currentIndex:Z,song_in:l.song_in}))},[l,c]),P=h.useCallback(()=>{if(!t)return;s(!0);const Z=t==null?void 0:t.currentTime,me=T.current;if(_.current&&Z){const Jt=Z/(_.current/100);me.style.width=Jt.toFixed(1)+"%"}I.current&&(I.current.innerText=hd(Z)||"00:00")},[l,n]),W=h.useCallback(()=>{if(w)return console.log("song repeat"),D();if(v){console.log("song shuffle");let Z=l.currentIndex;for(;Z===l.currentIndex;)Z=Math.floor(Math.random()*c.length);const me=U(Z);return o(rn({...me,currentIndex:Z,song_in:l.song_in}))}return l.currentIndex===c.length-1&&(b.current=!0),M()},[w,v,l,c]),J=h.useCallback(()=>{var Z;if(t){if(y(!0),_.current=t.duration,E.current=(Z=S.current)==null?void 0:Z.offsetWidth,b.current){b.current=!1,i(!1),s(!1);return}if(C.current||A){i(!1),s(!1);return}D()}},[A]),se=h.useCallback(()=>{p(!0),i(!1)},[]);h.useEffect(()=>{if(t)return t.addEventListener("error",se),t.addEventListener("pause",z),t.addEventListener("playing",ee),t.addEventListener("timeupdate",P),t.addEventListener("waiting",k),()=>{t.removeEventListener("error",se),t.removeEventListener("pause",z),t.removeEventListener("playing",ee),t.removeEventListener("timeupdate",P),t.removeEventListener("waiting",k)}},[]),h.useEffect(()=>{if(t)return t.src=l.song_url,()=>{if(C.current){C.current=!1;return}F()}},[l]),h.useEffect(()=>{if(t)return t==null||t.addEventListener("ended",W),()=>t==null?void 0:t.removeEventListener("ended",W)},[w,v,l,c]),h.useEffect(()=>{var Z;E.current=(Z=S.current)==null?void 0:Z.offsetWidth},[n]),h.useEffect(()=>{if(t)return A&&e&&L(),t.addEventListener("loadedmetadata",J),()=>{t.removeEventListener("loadedmetadata",J)}},[A]);const ae={button:`p-[5px] ${c.length<=1&&"opacity-20 pointer-events-none"}`,buttonsContainer:"w-full flex justify-center items-center gap-x-[20px] h-[50px]",processContainer:"flex flex-row items-center h-[30px]",processLineBase:"h-[4px] flex-grow relative cursor-pointer rounded-[99px] bg-gray-200 ",processLineCurrent:`absolute left-0 rounded-l-[99px] top-0 h-full ${a.content_bg}`,currentTime:"text-gray-500 text-[14px] font-semibold",duration:"text-[14px] font-semibold",icon:"w-[30px] max-[549px]:w-[40px]",before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]"};return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:`${ae.buttonsContainer}`,children:[d.jsx("button",{className:`${ae.button} ${w&&a.content_text}`,onClick:()=>x(!w),children:d.jsx(pN,{className:ae.icon})}),d.jsx("button",{className:ae.button,onClick:()=>j(),children:d.jsx(bN,{className:ae.icon})}),d.jsx(C5,{isError:f,isWaiting:r,isPlaying:e,handlePlayPause:Y,songInStore:l}),d.jsx("button",{className:`${ae.button}`,onClick:()=>M(),children:d.jsx(eT,{className:ae.icon})}),d.jsx("button",{className:`${ae.button} ${v&&a.content_text}`,onClick:()=>g(!v),children:d.jsx(xN,{className:ae.icon})})]}),d.jsxs("div",{className:ae.processContainer,children:[d.jsx("div",{className:"w-[45px]",children:t&&d.jsx("span",{ref:I,className:`${ae.currentTime}`,children:"00:00"})}),d.jsx("div",{ref:S,onClick:Z=>B(Z),className:`${ae.processLineBase} ${!m&&"opacity-20 pointer-events-none"}  ${ae.before}`,children:d.jsx("div",{ref:T,className:`${ae.processLineCurrent}`})}),d.jsx("div",{className:"w-[55px] pl-[5px]",children:t&&d.jsx("span",{ref:R,className:ae.duration,children:hd(_.current)||"00:00"})})]})]})}const rc=({loading:t,theme:e,callback:n,label:r,setOpenModal:s,buttonLabel:i,desc:o,className:a})=>d.jsxs("div",{className:a||"w-[30vw] relative",children:[d.jsx("h1",{className:"text-[20px] text-red-500 font-semibold",children:r||"Wait a minute"}),d.jsx("p",{className:" text-[16px]",children:o}),d.jsxs("div",{className:"flex gap-[10px] mt-[20px]",children:[d.jsx(te,{isLoading:t,className:` bg-${e.alpha} hover:bg-red-500 rounded-full text-[14px]`,variant:"primary",onClick:n,children:i||"Yes please"}),d.jsx(te,{onClick:()=>s&&s(!1),className:`${e.content_bg} rounded-full text-[14px]`,variant:"primary",children:"Close"})]})]}),jr=({children:t,setOpenModal:e,theme:n,classNames:r})=>d.jsx(d.Fragment,{children:bl.createPortal(d.jsxs("div",{className:"fixed inset-0 z-[99]",children:[d.jsx("div",{onClick:s=>{s.stopPropagation,e(!1)},className:"absolute bg-black opacity-60 inset-0 z-[90]"}),d.jsx("div",{className:"absolute z-[99] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:d.jsx(Ya,{classNames:r,theme:n,children:t})})]}),document.getElementById("portals"))}),lB=({data:t,theme:e,selectedSongList:n,setSelectedSongList:r,isChecked:s,adminSongs:i,setAdminSongs:o,inProcess:a},l)=>{const[c,u]=h.useState(!1),[f,p]=h.useState(!1),[m,y]=h.useState(),{setErrorToast:w,setSuccessToast:x}=$n(),{song:v}=st(rt),g=R=>{y(R),p(!0)},_=()=>{u(!1),p(!1)},E=async()=>{if(!o||!i){w({message:"Lack of props"});return}try{u(!0);const R=[...i],C=R.indexOf(t);R.splice(C,1),o(R),await bf(t),x({message:`'${t.name}' deleted`})}catch(R){console.log({message:R}),w({})}finally{_()}},S=R=>{if(!n||!r)return;let C=[...n];const b=C.indexOf(R);b===-1?C.push(R):C.splice(b,1),r(C)},T=h.useMemo(()=>rc({loading:c,label:`Delete '${t.name}'`,desc:"This action cannot be undone",theme:e,callback:E,setOpenModal:p}),[c,e,i,v]),I={td:`py-[10px] my-[10px] border-${e.alpha} border-b-[1px]`,th:"py-[5px]"};return d.jsxs(d.Fragment,{children:[d.jsxs("tr",{ref:l,className:"",children:[d.jsx("td",{className:`${I.td} text-center`,children:!a&&d.jsx("input",{checked:s,onChange:()=>S(t),className:"scale-[1.2]",type:"checkbox"})}),d.jsx("td",{className:I.td,children:d.jsx("div",{className:"h-[44px] w-[44px]",children:d.jsx("img",{className:"rounded-[4px]",src:t.image_url})})}),d.jsx("td",{className:I.td,children:t.name}),d.jsx("td",{className:I.td,children:t.singer}),a?d.jsx("td",{className:I.td,children:d.jsx("h1",{children:"...in process"})}):d.jsx("td",{className:I.td,children:d.jsxs("div",{className:"flex items-center gap-[5px]",children:[d.jsx(te,{variant:"circle",onClick:()=>g("confirm"),children:d.jsx(Ty,{className:"w-[20px]"})}),d.jsx(te,{variant:"circle",onClick:()=>g("edit"),children:d.jsx(Sy,{className:"w-[20px]"})}),d.jsx(Tn,{to:`${Ce.Dashboard}/edit/${t.id}`,children:d.jsx(te,{variant:"circle",onClick:()=>g("edit"),children:d.jsx(iO,{className:"w-[20px]"})})})]})})]}),f&&!a&&d.jsxs(jr,{theme:e,setOpenModal:p,children:[m==="edit"&&d.jsx(XA,{setIsOpenModal:p,setUserSongs:o,theme:e,userSongs:i,data:t}),m==="confirm"&&T]})]})},xp=h.forwardRef(lB),xg={isDebug:!1,focusDelay:6e3,scrollSongDelay:5e3};function ex(t,e,n,r){const s=h.useRef(),i=h.useRef(),{song:o}=st(rt),[a,l]=h.useState(0),[c,u]=h.useState(0);return h.useEffect(()=>{if(n)return()=>{i.current&&clearTimeout(i.current)}},[o,n]),h.useEffect(()=>{a&&(s.current=setTimeout(()=>s.current=void 0,r),i.current=setTimeout(()=>{console.log("restore"),e(),window.dispatchEvent(new Event("mousemove"))},xg.scrollSongDelay))},[c,xg]),h.useEffect(()=>(s.current||(t(),u(Math.random())),()=>clearTimeout(i.current)),[a]),()=>l(Math.random())}function cB({isOpenFullScreen:t,setIsOpenFullScreen:e,idle:n,audioEle:r}){const s=pn(),{theme:i}=ct(),{song:o}=st(rt),{actuallySongs:a}=Qf(),[l,c]=h.useState("Lyric"),u=h.useRef(null),f=h.useRef(null),p=h.useRef(null),m=h.useRef(!0),y=Or(),w=TA({songInStore:o,audioEle:r});SA({bgRef:u,songInStore:o});const{scrollToActiveSong:x}=eB({containerRef:f,songItemRef:p,firstTimeRender:m,isOpenFullScreen:t}),v=ex(()=>E("next"),x,t,300),g=ex(()=>E("previous"),x,t,300),_=(C,b)=>{o.id!==C.id&&s(rn({...C,currentIndex:b,song_in:o.song_in}))},E=(C="next")=>{const b=f.current;b.style.scrollBehavior="smooth",C==="next"?b.scrollLeft+=500:C==="previous"&&(b.scrollLeft-=500),window.dispatchEvent(new Event("mousemove"))},S=()=>{e(!1),setTimeout(()=>{y(`/mysongs/edit/${o.id}`)},300)},T={button:`p-[8px] bg-gray-500 bg-opacity-20 text-xl ${i.content_hover_text}`,mainContainer:`fixed inset-0 overflow-hidden text-white bg-zinc-900 ${t?"translate-y-0":"translate-y-full"} transition-[transform] duration-[.5s] linear delay-100`,bg:"-z-10 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background] duration-100",overplay:"bg-zinc-900 bg-opacity-60 bg-blend-multiply",absoluteFull:"absolute h-[100vh] w-[100vw] inset-0",headerWrapper:"py-[20px] px-[40px] w-full h-[75px]",header:"relative flex",headerCta:"absolute h-full flex items-center",contentContainer:"h-[calc(100%-100px)] relative overflow-hidden",songsListTab:" relative h-full no-scrollbar flex items-center flex-row overflow-auto scroll-smooth px-[calc(50%-350px/2)]",absoluteButton:`absolute top-[50%] -translate-y-[50%] p-[8px] bg-[#fff] bg-opacity-[.2] hover:opacity-100 rounded-full ${i.content_hover_text}`,songNameSinger:"relative text-center text-white text-[14px] opacity-80",lyricTabContainer:"px-[40px] h-full w-full flex items-center justify-center flex-row",lyricContainer:"flex-grow ml-[50px] h-full overflow-hidden",songThumbnail:"items-end justify-center flex-shrink-0 w-[350px] h-[350px]",fadeTransition:"opacity-0 transition-opacity duration-[.3s]"},I=h.useMemo(()=>{if(o.id&&a.length)return a.map((C,b)=>{const A=b===o.currentIndex;return A?d.jsx(Ap,{theme:i,ref:p,hasTitle:!0,onClick:()=>_(C,b),active:A,data:C,classNames:T.songThumbnail},b):d.jsx(Ap,{theme:i,classNames:T.songThumbnail,idleClass:`${!A&&n&&T.fadeTransition}`,hasTitle:!0,active:A,data:C,onClick:()=>_(C,b)},b)})},[o,a,n]),R=d.jsxs("div",{className:T.lyricTabContainer,children:[d.jsx(Ap,{theme:i,active:!0,data:o}),d.jsx("div",{className:T.lyricContainer,children:d.jsx(bC,{audioEle:r,songLyric:w})})]});return d.jsxs("div",{className:`${T.mainContainer}`,children:[d.jsx("div",{ref:u,className:`${T.absoluteFull} ${T.bg}`}),d.jsx("div",{className:`${T.absoluteFull} ${T.overplay}`}),d.jsxs("div",{className:"h-[calc(100vh-90px)]",children:[d.jsx("div",{className:T.headerWrapper,children:d.jsxs("div",{className:T.header,children:[n&&l==="Lyric"&&d.jsxs("div",{className:`${T.headerCta} left-0`,children:[d.jsx("img",{className:"h-full mr-[10px]",src:"https://zjs.zmdcdn.me/zmp3-desktop/dev/119956/static/media/icon_zing_mp3_60.f6b51045.svg",alt:""}),d.jsxs("p",{className:`${T.songNameSinger}`,children:[o.name," -"," ",d.jsx("span",{className:"opacity-30",children:o.singer})]})]}),d.jsx(NC,{activeTab:l,setActiveTab:c,className:`${n&&T.fadeTransition}`,tabs:["Songs","Lyric"]}),d.jsxs("div",{className:`${T.headerCta} right-0 gap-[10px] ${n&&T.fadeTransition}`,children:[o.by!="admin"&&l==="Lyric"&&d.jsx(te,{onClick:()=>S(),variant:"circle",size:"normal",className:T.button,children:d.jsx(nO,{className:"w-full"})}),d.jsx(te,{onClick:()=>e(!1),variant:"circle",size:"normal",className:T.button,children:d.jsx(YS,{})})]})]})}),d.jsxs("div",{className:T.contentContainer,children:[d.jsx("div",{ref:f,className:` ${T.songsListTab} ${l!=="Songs"?"opacity-0":"opacity-100"}`,children:I}),l==="Songs"&&!n&&d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>g(),className:`${T.absoluteButton} left-[20px]`,children:d.jsx(Cl,{className:"w-[25px]"})}),d.jsx("button",{onClick:()=>v(),className:`${T.absoluteButton} right-[20px]`,children:d.jsx(JS,{className:"w-[25px]"})})]}),d.jsx("div",{className:`absolute inset-0 z-20 ${l==="Lyric"?"":"hidden"}`,children:R})]}),t&&l==="Lyric"&&!n&&d.jsxs("p",{className:`${T.songNameSinger} ${n&&T.fadeTransition}`,children:[o.name," -"," ",d.jsx("span",{className:"opacity-30",children:o.singer})]})]})]})}const uB=["top","right","bottom","left"],tx=["start","end"],nx=uB.reduce((t,e)=>t.concat(e,e+"-"+tx[0],e+"-"+tx[1]),[]),pd=Math.min,Ys=Math.max,md=Math.round,Mc=Math.floor,Ss=t=>({x:t,y:t}),dB={left:"right",right:"left",bottom:"top",top:"bottom"},fB={start:"end",end:"start"};function rx(t,e,n){return Ys(t,pd(e,n))}function sc(t,e){return typeof t=="function"?t(e):t}function Pr(t){return t.split("-")[0]}function _r(t){return t.split("-")[1]}function tC(t){return t==="x"?"y":"x"}function nC(t){return t==="y"?"height":"width"}function nh(t){return["top","bottom"].includes(Pr(t))?"y":"x"}function rC(t){return tC(nh(t))}function sC(t,e,n){n===void 0&&(n=!1);const r=_r(t),s=rC(t),i=nC(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=yd(o)),[o,yd(o)]}function hB(t){const e=yd(t);return[gd(t),e,gd(e)]}function gd(t){return t.replace(/start|end/g,e=>fB[e])}function pB(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function mB(t,e,n,r){const s=_r(t);let i=pB(Pr(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(gd)))),i}function yd(t){return t.replace(/left|right|bottom|top/g,e=>dB[e])}function gB(t){return{top:0,right:0,bottom:0,left:0,...t}}function yB(t){return typeof t!="number"?gB(t):{top:t,right:t,bottom:t,left:t}}function vd(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function sx(t,e,n){let{reference:r,floating:s}=t;const i=nh(e),o=rC(e),a=nC(o),l=Pr(e),c=i==="y",u=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-s.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-s.width,y:f};break;default:m={x:r.x,y:r.y}}switch(_r(e)){case"start":m[o]-=p*(n&&c?-1:1);break;case"end":m[o]+=p*(n&&c?-1:1);break}return m}const vB=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:f}=sx(c,r,l),p=r,m={},y=0;for(let w=0;w<a.length;w++){const{name:x,fn:v}=a[w],{x:g,y:_,data:E,reset:S}=await v({x:u,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});if(u=g??u,f=_??f,m={...m,[x]:{...m[x],...E}},S&&y<=50){y++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):S.rects),{x:u,y:f}=sx(c,p,l)),w=-1;continue}}return{x:u,y:f,placement:p,strategy:s,middlewareData:m}};async function vv(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=sc(e,t),y=yB(m),x=a[p?f==="floating"?"reference":"floating":f],v=vd(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),g=f==="floating"?{...o.floating,x:r,y:s}:o.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),E=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},S=vd(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:g,offsetParent:_,strategy:l}):g);return{top:(v.top-S.top+y.top)/E.y,bottom:(S.bottom-v.bottom+y.bottom)/E.y,left:(v.left-S.left+y.left)/E.x,right:(S.right-v.right+y.right)/E.x}}function wB(t,e,n){return(t?[...n.filter(s=>_r(s)===t),...n.filter(s=>_r(s)!==t)]:n.filter(s=>Pr(s)===s)).filter(s=>t?_r(s)===t||(e?gd(s)!==s:!1):!0)}const _B=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,r,s;const{rects:i,middlewareData:o,placement:a,platform:l,elements:c}=e,{crossAxis:u=!1,alignment:f,allowedPlacements:p=nx,autoAlignment:m=!0,...y}=sc(t,e),w=f!==void 0||p===nx?wB(f||null,m,p):p,x=await vv(e,y),v=((n=o.autoPlacement)==null?void 0:n.index)||0,g=w[v];if(g==null)return{};const _=sC(g,i,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(a!==g)return{reset:{placement:w[0]}};const E=[x[Pr(g)],x[_[0]],x[_[1]]],S=[...((r=o.autoPlacement)==null?void 0:r.overflows)||[],{placement:g,overflows:E}],T=w[v+1];if(T)return{data:{index:v+1,overflows:S},reset:{placement:T}};const I=S.map(b=>{const A=_r(b.placement);return[b.placement,A&&u?b.overflows.slice(0,2).reduce((D,L)=>D+L,0):b.overflows[0],b.overflows]}).sort((b,A)=>b[1]-A[1]),C=((s=I.filter(b=>b[2].slice(0,_r(b[0])?2:3).every(A=>A<=0))[0])==null?void 0:s[0])||I[0][0];return C!==a?{data:{index:v+1,overflows:S},reset:{placement:C}}:{}}}},xB=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:r,middlewareData:s,rects:i,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:y=!0,...w}=sc(t,e),x=Pr(r),v=Pr(o)===o,g=await(a.isRTL==null?void 0:a.isRTL(l.floating)),_=f||(v||!y?[yd(o)]:hB(o));!f&&m!=="none"&&_.push(...mB(o,y,m,g));const E=[o,..._],S=await vv(e,w),T=[];let I=((n=s.flip)==null?void 0:n.overflows)||[];if(c&&T.push(S[x]),u){const A=sC(r,i,g);T.push(S[A[0]],S[A[1]])}if(I=[...I,{placement:r,overflows:T}],!T.every(A=>A<=0)){var R,C;const A=(((R=s.flip)==null?void 0:R.index)||0)+1,D=E[A];if(D)return{data:{index:A,overflows:I},reset:{placement:D}};let L=(C=I.filter(U=>U.overflows[0]<=0).sort((U,Y)=>U.overflows[1]-Y.overflows[1])[0])==null?void 0:C.placement;if(!L)switch(p){case"bestFit":{var b;const U=(b=I.map(Y=>[Y.placement,Y.overflows.filter(z=>z>0).reduce((z,ee)=>z+ee,0)]).sort((Y,z)=>Y[1]-z[1])[0])==null?void 0:b[0];U&&(L=U);break}case"initialPlacement":L=o;break}if(r!==L)return{reset:{placement:L}}}return{}}}};async function EB(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Pr(n),a=_r(n),l=nh(n)==="y",c=["left","top"].includes(o)?-1:1,u=i&&l?-1:1,f=sc(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof y=="number"&&(m=a==="end"?y*-1:y),l?{x:m*u,y:p*c}:{x:p*c,y:m*u}}const wv=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,s=await EB(e,t);return{x:n+s.x,y:r+s.y,data:s}}}},SB=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:v,y:g}=x;return{x:v,y:g}}},...l}=sc(t,e),c={x:n,y:r},u=await vv(e,l),f=nh(Pr(s)),p=tC(f);let m=c[p],y=c[f];if(i){const x=p==="y"?"top":"left",v=p==="y"?"bottom":"right",g=m+u[x],_=m-u[v];m=rx(g,m,_)}if(o){const x=f==="y"?"top":"left",v=f==="y"?"bottom":"right",g=y+u[x],_=y-u[v];y=rx(g,y,_)}const w=a.fn({...e,[p]:m,[f]:y});return{...w,data:{x:w.x-n,y:w.y-r}}}}};function Ts(t){return iC(t)?(t.nodeName||"").toLowerCase():"#document"}function sn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Lr(t){var e;return(e=(iC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function iC(t){return t instanceof Node||t instanceof sn(t).Node}function ot(t){return t instanceof Element||t instanceof sn(t).Element}function Bt(t){return t instanceof HTMLElement||t instanceof sn(t).HTMLElement}function Eg(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof sn(t).ShadowRoot}function ic(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=cn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function TB(t){return["table","td","th"].includes(Ts(t))}function _v(t){const e=xv(),n=cn(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function IB(t){let e=fi(t);for(;Bt(e)&&!oc(e);){if(_v(e))return e;e=fi(e)}return null}function xv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function oc(t){return["html","body","#document"].includes(Ts(t))}function cn(t){return sn(t).getComputedStyle(t)}function rh(t){return ot(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function fi(t){if(Ts(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Eg(t)&&t.host||Lr(t);return Eg(e)?e.host:e}function oC(t){const e=fi(t);return oc(e)?t.ownerDocument?t.ownerDocument.body:t.body:Bt(e)&&ic(e)?e:oC(e)}function Js(t,e){var n;e===void 0&&(e=[]);const r=oC(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=sn(r);return s?e.concat(i,i.visualViewport||[],ic(r)?r:[]):e.concat(r,Js(r))}function aC(t){const e=cn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Bt(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=md(n)!==i||md(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Ev(t){return ot(t)?t:t.contextElement}function ro(t){const e=Ev(t);if(!Bt(e))return Ss(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=aC(e);let o=(i?md(n.width):n.width)/r,a=(i?md(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const RB=Ss(0);function lC(t){const e=sn(t);return!xv()||!e.visualViewport?RB:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function bB(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==sn(t)?!1:e}function hi(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Ev(t);let o=Ss(1);e&&(r?ot(r)&&(o=ro(r)):o=ro(t));const a=bB(i,n,r)?lC(i):Ss(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,f=s.height/o.y;if(i){const p=sn(i),m=r&&ot(r)?sn(r):r;let y=p.frameElement;for(;y&&r&&m!==p;){const w=ro(y),x=y.getBoundingClientRect(),v=cn(y),g=x.left+(y.clientLeft+parseFloat(v.paddingLeft))*w.x,_=x.top+(y.clientTop+parseFloat(v.paddingTop))*w.y;l*=w.x,c*=w.y,u*=w.x,f*=w.y,l+=g,c+=_,y=sn(y).frameElement}}return vd({width:u,height:f,x:l,y:c})}function AB(t){let{rect:e,offsetParent:n,strategy:r}=t;const s=Bt(n),i=Lr(n);if(n===i)return e;let o={scrollLeft:0,scrollTop:0},a=Ss(1);const l=Ss(0);if((s||!s&&r!=="fixed")&&((Ts(n)!=="body"||ic(i))&&(o=rh(n)),Bt(n))){const c=hi(n);a=ro(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function CB(t){return Array.from(t.getClientRects())}function cC(t){return hi(Lr(t)).left+rh(t).scrollLeft}function kB(t){const e=Lr(t),n=rh(t),r=t.ownerDocument.body,s=Ys(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Ys(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+cC(t);const a=-n.scrollTop;return cn(r).direction==="rtl"&&(o+=Ys(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function PB(t,e){const n=sn(t),r=Lr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=xv();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function NB(t,e){const n=hi(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Bt(t)?ro(t):Ss(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function ix(t,e,n){let r;if(e==="viewport")r=PB(t,n);else if(e==="document")r=kB(Lr(t));else if(ot(e))r=NB(e,n);else{const s=lC(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return vd(r)}function uC(t,e){const n=fi(t);return n===e||!ot(n)||oc(n)?!1:cn(n).position==="fixed"||uC(n,e)}function OB(t,e){const n=e.get(t);if(n)return n;let r=Js(t).filter(a=>ot(a)&&Ts(a)!=="body"),s=null;const i=cn(t).position==="fixed";let o=i?fi(t):t;for(;ot(o)&&!oc(o);){const a=cn(o),l=_v(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||ic(o)&&!l&&uC(t,o))?r=r.filter(u=>u!==o):s=a,o=fi(o)}return e.set(t,r),r}function jB(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?OB(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const f=ix(e,u,s);return c.top=Ys(f.top,c.top),c.right=pd(f.right,c.right),c.bottom=pd(f.bottom,c.bottom),c.left=Ys(f.left,c.left),c},ix(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function LB(t){return aC(t)}function DB(t,e,n){const r=Bt(e),s=Lr(e),i=n==="fixed",o=hi(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Ss(0);if(r||!r&&!i)if((Ts(e)!=="body"||ic(s))&&(a=rh(e)),r){const c=hi(e,!0,i,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else s&&(l.x=cC(s));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function ox(t,e){return!Bt(t)||cn(t).position==="fixed"?null:e?e(t):t.offsetParent}function dC(t,e){const n=sn(t);if(!Bt(t))return n;let r=ox(t,e);for(;r&&TB(r)&&cn(r).position==="static";)r=ox(r,e);return r&&(Ts(r)==="html"||Ts(r)==="body"&&cn(r).position==="static"&&!_v(r))?n:r||IB(t)||n}const MB=async function(t){let{reference:e,floating:n,strategy:r}=t;const s=this.getOffsetParent||dC,i=this.getDimensions;return{reference:DB(e,await s(n),r),floating:{x:0,y:0,...await i(n)}}};function $B(t){return cn(t).direction==="rtl"}const VB={convertOffsetParentRelativeRectToViewportRelativeRect:AB,getDocumentElement:Lr,getClippingRect:jB,getOffsetParent:dC,getElementRects:MB,getClientRects:CB,getDimensions:LB,getScale:ro,isElement:ot,isRTL:$B};function FB(t,e){let n=null,r;const s=Lr(t);function i(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:u,width:f,height:p}=t.getBoundingClientRect();if(a||e(),!f||!p)return;const m=Mc(u),y=Mc(s.clientWidth-(c+f)),w=Mc(s.clientHeight-(u+p)),x=Mc(c),g={rootMargin:-m+"px "+-y+"px "+-w+"px "+-x+"px",threshold:Ys(0,pd(1,l))||1};let _=!0;function E(S){const T=S[0].intersectionRatio;if(T!==l){if(!_)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},100)}_=!1}try{n=new IntersectionObserver(E,{...g,root:s.ownerDocument})}catch{n=new IntersectionObserver(E,g)}n.observe(t)}return o(!0),i}function sh(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Ev(t),u=s||i?[...c?Js(c):[],...Js(e)]:[];u.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const f=c&&a?FB(c,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(v=>{let[g]=v;g&&g.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{m&&m.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let y,w=l?hi(t):null;l&&x();function x(){const v=hi(t);w&&(v.x!==w.x||v.y!==w.y||v.width!==w.width||v.height!==w.height)&&n(),w=v,y=requestAnimationFrame(x)}return n(),()=>{u.forEach(v=>{s&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),f&&f(),m&&m.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const UB=(t,e,n)=>{const r=new Map,s={platform:VB,...n},i={...s.platform,_c:r};return vB(t,e,{...s,platform:i})};var uu=typeof document<"u"?h.useLayoutEffect:h.useEffect;function wd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!wd(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!wd(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function fC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function ax(t,e){const n=fC(t);return Math.round(e*n)/n}function lx(t){const e=h.useRef(t);return uu(()=>{e.current=t}),e}function BB(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,f]=h.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=h.useState(r);wd(p,r)||m(r);const[y,w]=h.useState(null),[x,v]=h.useState(null),g=h.useCallback(z=>{z!=T.current&&(T.current=z,w(z))},[w]),_=h.useCallback(z=>{z!==I.current&&(I.current=z,v(z))},[v]),E=i||y,S=o||x,T=h.useRef(null),I=h.useRef(null),R=h.useRef(u),C=lx(l),b=lx(s),A=h.useCallback(()=>{if(!T.current||!I.current)return;const z={placement:e,strategy:n,middleware:p};b.current&&(z.platform=b.current),UB(T.current,I.current,z).then(ee=>{const k={...ee,isPositioned:!0};D.current&&!wd(R.current,k)&&(R.current=k,bl.flushSync(()=>{f(k)}))})},[p,e,n,b]);uu(()=>{c===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,f(z=>({...z,isPositioned:!1})))},[c]);const D=h.useRef(!1);uu(()=>(D.current=!0,()=>{D.current=!1}),[]),uu(()=>{if(E&&(T.current=E),S&&(I.current=S),E&&S){if(C.current)return C.current(E,S,A);A()}},[E,S,A,C]);const L=h.useMemo(()=>({reference:T,floating:I,setReference:g,setFloating:_}),[g,_]),U=h.useMemo(()=>({reference:E,floating:S}),[E,S]),Y=h.useMemo(()=>{const z={position:n,left:0,top:0};if(!U.floating)return z;const ee=ax(U.floating,u.x),k=ax(U.floating,u.y);return a?{...z,transform:"translate("+ee+"px, "+k+"px)",...fC(U.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ee,top:k}},[n,a,U.floating,u.x,u.y]);return h.useMemo(()=>({...u,update:A,refs:L,elements:U,floatingStyles:Y}),[u,A,L,U,Y])}function Ri(t){let e=t.activeElement;for(;((n=e)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;e=e.shadowRoot.activeElement}return e}function Xt(t,e){if(!t||!e)return!1;const n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Eg(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function zB(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function WB(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function HB(t){if(t.mozInputSource===0&&t.isTrusted)return!0;const e=/Android/i;return(e.test(zB())||e.test(WB()))&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function qB(t){return t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType!=="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0}function KB(){return/apple/i.test(navigator.vendor)}function cx(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function GB(t){return"nativeEvent"in t}function QB(t){return t.matches("html,body")}function Hn(t){return(t==null?void 0:t.ownerDocument)||document}function Ep(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function hC(t){return"composedPath"in t?t.composedPath()[0]:t.target}const YB="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function pC(t){return Bt(t)&&t.matches(YB)}function Sp(t){t.preventDefault(),t.stopPropagation()}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var JB=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Sg=JB.join(","),mC=typeof Element>"u",xl=mC?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,_d=!mC&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},xd=function t(e,n){var r;n===void 0&&(n=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=s===""||s==="true",o=i||n&&e&&t(e.parentNode);return o},XB=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},ZB=function(e,n,r){if(xd(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(Sg));return n&&xl.call(e,Sg)&&s.unshift(e),s=s.filter(r),s},e8=function t(e,n,r){for(var s=[],i=Array.from(e);i.length;){var o=i.shift();if(!xd(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?s.push.apply(s,c):s.push({scopeParent:o,candidates:c})}else{var u=xl.call(o,Sg);u&&r.filter(o)&&(n||!e.includes(o))&&s.push(o);var f=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),p=!xd(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(f&&p){var m=t(f===!0?o.children:f.children,!0,r);r.flatten?s.push.apply(s,m):s.push({scopeParent:o,candidates:m})}else i.unshift.apply(i,o.children)}}return s},gC=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},yC=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||XB(e))&&!gC(e)?0:e.tabIndex},t8=function(e,n){var r=yC(e);return r<0&&n&&!gC(e)?0:r},n8=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},vC=function(e){return e.tagName==="INPUT"},r8=function(e){return vC(e)&&e.type==="hidden"},s8=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},i8=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},o8=function(e){if(!e.name)return!0;var n=e.form||_d(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var i=i8(s,e.form);return!i||i===e},a8=function(e){return vC(e)&&e.type==="radio"},l8=function(e){return a8(e)&&!o8(e)},c8=function(e){var n,r=e&&_d(e),s=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==e){var o,a,l;for(i=!!((o=s)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(s)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!i&&s;){var c,u,f;r=_d(s),s=(c=r)===null||c===void 0?void 0:c.host,i=!!((u=s)!==null&&u!==void 0&&(f=u.ownerDocument)!==null&&f!==void 0&&f.contains(s))}}return i},ux=function(e){var n=e.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},u8=function(e,n){var r=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=xl.call(e,"details>summary:first-of-type"),o=i?e.parentElement:e;if(xl.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var a=e;e;){var l=e.parentElement,c=_d(e);if(l&&!l.shadowRoot&&s(l)===!0)return ux(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(c8(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return ux(e);return!1},d8=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return xl.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},f8=function(e,n){return!(n.disabled||xd(n)||r8(n)||u8(n,e)||s8(n)||d8(n))},dx=function(e,n){return!(l8(n)||yC(n)<0||!f8(e,n))},h8=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},p8=function t(e){var n=[],r=[];return e.forEach(function(s,i){var o=!!s.scopeParent,a=o?s.scopeParent:s,l=t8(a,o),c=o?t(s.candidates):a;l===0?o?n.push.apply(n,c):n.push(a):r.push({documentOrder:i,tabIndex:l,item:s,isScope:o,content:c})}),r.sort(n8).reduce(function(s,i){return i.isScope?s.push.apply(s,i.content):s.push(i.content),s},[]).concat(n)},wC=function(e,n){n=n||{};var r;return n.getShadowRoot?r=e8([e],n.includeContainer,{filter:dx.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:h8}):r=ZB(e,n.includeContainer,dx.bind(null,n)),p8(r)};function Ed(){return Ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ed.apply(this,arguments)}var Zr=typeof document<"u"?h.useLayoutEffect:h.useEffect;let Tp=!1,m8=0;const fx=()=>"floating-ui-"+m8++;function g8(){const[t,e]=h.useState(()=>Tp?fx():void 0);return Zr(()=>{t==null&&e(fx())},[]),h.useEffect(()=>{Tp||(Tp=!0)},[]),t}const y8=Cg["useId".toString()],_C=y8||g8;function v8(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(s=>s(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(s=>s!==n))||[])}}}const w8=h.createContext(null),_8=h.createContext(null),x8=()=>{var t;return((t=h.useContext(w8))==null?void 0:t.id)||null},Sv=()=>h.useContext(_8);function Sd(t){return"data-floating-ui-"+t}function Ip(t){const e=h.useRef(t);return Zr(()=>{e.current=t}),e}let hx=0;function Ns(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:s=!1}=e;r&&cancelAnimationFrame(hx);const i=()=>t==null?void 0:t.focus({preventScroll:n});s?i():hx=requestAnimationFrame(i)}function E8(t,e){var n;let r=[],s=(n=t.find(i=>i.id===e))==null?void 0:n.parentId;for(;s;){const i=t.find(o=>o.id===s);s=i==null?void 0:i.parentId,i&&(r=r.concat(i))}return r}function Aa(t,e){let n=t.filter(s=>{var i;return s.parentId===e&&((i=s.context)==null?void 0:i.open)}),r=n;for(;r.length;)r=t.filter(s=>{var i;return(i=r)==null?void 0:i.some(o=>{var a;return s.parentId===o.id&&((a=s.context)==null?void 0:a.open)})}),n=n.concat(r);return n}let Si=new WeakMap,$c=new WeakSet,Vc={},Rp=0;const S8=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,xC=t=>t&&(t.host||xC(t.parentNode)),T8=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=xC(n);return t.contains(r)?r:null}).filter(n=>n!=null);function I8(t,e,n,r){const s="data-floating-ui-inert",i=r?"inert":n?"aria-hidden":null,o=T8(e,t),a=new Set,l=new Set(o),c=[];Vc[s]||(Vc[s]=new WeakMap);const u=Vc[s];o.forEach(f),p(e),a.clear();function f(m){!m||a.has(m)||(a.add(m),m.parentNode&&f(m.parentNode))}function p(m){!m||l.has(m)||Array.prototype.forEach.call(m.children,y=>{if(a.has(y))p(y);else{const w=i?y.getAttribute(i):null,x=w!==null&&w!=="false",v=(Si.get(y)||0)+1,g=(u.get(y)||0)+1;Si.set(y,v),u.set(y,g),c.push(y),v===1&&x&&$c.add(y),g===1&&y.setAttribute(s,""),!x&&i&&y.setAttribute(i,"true")}})}return Rp++,()=>{c.forEach(m=>{const y=(Si.get(m)||0)-1,w=(u.get(m)||0)-1;Si.set(m,y),u.set(m,w),y||(!$c.has(m)&&i&&m.removeAttribute(i),$c.delete(m)),w||m.removeAttribute(s)}),Rp--,Rp||(Si=new WeakMap,Si=new WeakMap,$c=new WeakSet,Vc={})}}function px(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=Hn(t[0]).body;return I8(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const EC=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function SC(t,e){const n=wC(t,EC());e==="prev"&&n.reverse();const r=n.indexOf(Ri(Hn(t)));return n.slice(r+1)[0]}function R8(){return SC(document.body,"next")}function b8(){return SC(document.body,"prev")}function mx(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!Xt(n,r)}const TC={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let A8;function gx(t){t.key==="Tab"&&(t.target,clearTimeout(A8))}const yx=h.forwardRef(function(e,n){const[r,s]=h.useState();Zr(()=>(KB()&&s("button"),document.addEventListener("keydown",gx),()=>{document.removeEventListener("keydown",gx)}),[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Sd("focus-guard")]:"",style:TC};return h.createElement("span",Ed({},e,i))}),C8=h.createContext(null),k8=()=>h.useContext(C8),P8=h.forwardRef(function(e,n){return h.createElement("button",Ed({},e,{type:"button",ref:n,tabIndex:-1,style:TC}))});function ih(t){const{context:e,children:n,disabled:r=!1,order:s=["content"],guards:i=!0,initialFocus:o=0,returnFocus:a=!0,modal:l=!0,visuallyHiddenDismiss:c=!1,closeOnFocusOut:u=!0}=t,{open:f,refs:p,nodeId:m,onOpenChange:y,events:w,dataRef:x,elements:{domReference:v,floating:g}}=e,_=S8()?i:!0,E=Ip(s),S=Ip(o),T=Ip(a),I=Sv(),R=k8(),C=typeof o=="number"&&o<0,b=h.useRef(null),A=h.useRef(null),D=h.useRef(!1),L=h.useRef(null),U=h.useRef(!1),Y=R!=null,z=v&&v.getAttribute("role")==="combobox"&&pC(v),ee=h.useCallback(function(M){return M===void 0&&(M=g),M?wC(M,EC()):[]},[g]),k=h.useCallback(M=>{const j=ee(M);return E.current.map(P=>v&&P==="reference"?v:g&&P==="floating"?g:j).filter(Boolean).flat()},[v,g,E,ee]);h.useEffect(()=>{if(r||!l)return;function M(P){if(P.key==="Tab"){Xt(g,Ri(Hn(g)))&&ee().length===0&&!z&&Sp(P);const W=k(),J=hC(P);E.current[0]==="reference"&&J===v&&(Sp(P),P.shiftKey?Ns(W[W.length-1]):Ns(W[1])),E.current[1]==="floating"&&J===g&&P.shiftKey&&(Sp(P),Ns(W[0]))}}const j=Hn(g);return j.addEventListener("keydown",M),()=>{j.removeEventListener("keydown",M)}},[r,v,g,l,E,p,z,ee,k]),h.useEffect(()=>{if(r||!u)return;function M(){U.current=!0,setTimeout(()=>{U.current=!1})}function j(P){const W=P.relatedTarget;queueMicrotask(()=>{const J=!(Xt(v,W)||Xt(g,W)||Xt(W,g)||Xt(R==null?void 0:R.portalNode,W)||W!=null&&W.hasAttribute(Sd("focus-guard"))||I&&(Aa(I.nodesRef.current,m).find(se=>{var ae,Z;return Xt((ae=se.context)==null?void 0:ae.elements.floating,W)||Xt((Z=se.context)==null?void 0:Z.elements.domReference,W)})||E8(I.nodesRef.current,m).find(se=>{var ae,Z;return((ae=se.context)==null?void 0:ae.elements.floating)===W||((Z=se.context)==null?void 0:Z.elements.domReference)===W})));W&&J&&!U.current&&W!==L.current&&(D.current=!0,y(!1,P))})}if(g&&Bt(v))return v.addEventListener("focusout",j),v.addEventListener("pointerdown",M),!l&&g.addEventListener("focusout",j),()=>{v.removeEventListener("focusout",j),v.removeEventListener("pointerdown",M),!l&&g.removeEventListener("focusout",j)}},[r,v,g,l,m,I,R,y,u]),h.useEffect(()=>{var M;if(r)return;const j=Array.from((R==null||(M=R.portalNode)==null?void 0:M.querySelectorAll("["+Sd("portal")+"]"))||[]);if(g){const P=[g,...j,b.current,A.current,E.current.includes("reference")||z?v:null].filter(J=>J!=null),W=l?px(P,_,!_):px(P);return()=>{W()}}},[r,v,g,l,E,R,z,_]),Zr(()=>{if(r||!g)return;const M=Hn(g),j=Ri(M);queueMicrotask(()=>{const P=k(g),W=S.current,J=(typeof W=="number"?P[W]:W.current)||g,se=Xt(g,j);!C&&!se&&f&&Ns(J,{preventScroll:J===g})})},[r,f,g,C,k,S]),Zr(()=>{if(r||!g)return;let M=!1;const j=Hn(g),P=Ri(j),W=x.current;L.current=P;function J(se){if(se.type==="escapeKey"&&p.domReference.current&&(L.current=p.domReference.current),["referencePress","escapeKey"].includes(se.type))return;const ae=se.data.returnFocus;typeof ae=="object"?(D.current=!1,M=ae.preventScroll):D.current=!ae}return w.on("dismiss",J),()=>{w.off("dismiss",J);const se=Ri(j);(Xt(g,se)||I&&Aa(I.nodesRef.current,m).some(Z=>{var me;return Xt((me=Z.context)==null?void 0:me.elements.floating,se)})||W.openEvent&&["click","mousedown"].includes(W.openEvent.type))&&p.domReference.current&&(L.current=p.domReference.current),T.current&&Bt(L.current)&&!D.current&&Ns(L.current,{cancelPrevious:!1,preventScroll:M})}},[r,g,T,x,p,w,I,m]),Zr(()=>{if(!(r||!R))return R.setFocusManagerState({modal:l,closeOnFocusOut:u,open:f,onOpenChange:y,refs:p}),()=>{R.setFocusManagerState(null)}},[r,R,l,f,y,p,u]),Zr(()=>{if(!r&&g&&typeof MutationObserver=="function"){const M=()=>{const P=g.getAttribute("tabindex");E.current.includes("floating")||Ri(Hn(g))!==p.domReference.current&&ee().length===0?P!=="0"&&g.setAttribute("tabindex","0"):P!=="-1"&&g.setAttribute("tabindex","-1")};M();const j=new MutationObserver(M);return j.observe(g,{childList:!0,subtree:!0,attributes:!0}),()=>{j.disconnect()}}},[r,g,p,E,ee]);function F(M){return r||!c||!l?null:h.createElement(P8,{ref:M==="start"?b:A,onClick:j=>y(!1,j.nativeEvent)},typeof c=="string"?c:"Dismiss")}const B=!r&&_&&!z&&(Y||l);return h.createElement(h.Fragment,null,B&&h.createElement(yx,{"data-type":"inside",ref:R==null?void 0:R.beforeInsideRef,onFocus:M=>{if(l){const P=k();Ns(s[0]==="reference"?P[0]:P[P.length-1])}else if(R!=null&&R.preserveTabOrder&&R.portalNode)if(D.current=!1,mx(M,R.portalNode)){const P=R8()||v;P==null||P.focus()}else{var j;(j=R.beforeOutsideRef.current)==null||j.focus()}}}),!z&&F("start"),n,F("end"),B&&h.createElement(yx,{"data-type":"inside",ref:R==null?void 0:R.afterInsideRef,onFocus:M=>{if(l)Ns(k()[0]);else if(R!=null&&R.preserveTabOrder&&R.portalNode)if(u&&(D.current=!0),mx(M,R.portalNode)){const P=b8()||v;P==null||P.focus()}else{var j;(j=R.afterOutsideRef.current)==null||j.focus()}}}))}function vx(t){return Bt(t.target)&&t.target.tagName==="BUTTON"}function wx(t){return pC(t)}function oh(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,elements:{domReference:i}}=t,{enabled:o=!0,event:a="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:u=!0}=e,f=h.useRef(),p=h.useRef(!1);return h.useMemo(()=>o?{reference:{onPointerDown(m){f.current=m.pointerType},onMouseDown(m){m.button===0&&(cx(f.current,!0)&&c||a!=="click"&&(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="mousedown")?r(!1,m.nativeEvent):(m.preventDefault(),r(!0,m.nativeEvent))))},onClick(m){if(a==="mousedown"&&f.current){f.current=void 0;return}cx(f.current,!0)&&c||(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="click")?r(!1,m.nativeEvent):r(!0,m.nativeEvent))},onKeyDown(m){f.current=void 0,!(m.defaultPrevented||!u||vx(m))&&(m.key===" "&&!wx(i)&&(m.preventDefault(),p.current=!0),m.key==="Enter"&&r(!(n&&l),m.nativeEvent))},onKeyUp(m){m.defaultPrevented||!u||vx(m)||wx(i)||m.key===" "&&p.current&&(p.current=!1,r(!(n&&l),m.nativeEvent))}}}:{},[o,s,a,c,u,i,l,n,r])}const N8=Cg["useInsertionEffect".toString()],O8=N8||(t=>t());function du(t){const e=h.useRef(()=>{});return O8(()=>{e.current=t}),h.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}const j8={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},L8={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},D8=t=>{var e,n;return{escapeKeyBubbles:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePressBubbles:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function ah(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:s,nodeId:i,elements:{reference:o,domReference:a,floating:l},dataRef:c}=t,{enabled:u=!0,escapeKey:f=!0,outsidePress:p=!0,outsidePressEvent:m="pointerdown",referencePress:y=!1,referencePressEvent:w="pointerdown",ancestorScroll:x=!1,bubbles:v}=e,g=Sv(),_=x8()!=null,E=du(typeof p=="function"?p:()=>!1),S=typeof p=="function"?E:p,T=h.useRef(!1),{escapeKeyBubbles:I,outsidePressBubbles:R}=D8(v),C=du(A=>{if(!n||!u||!f||A.key!=="Escape")return;const D=g?Aa(g.nodesRef.current,i):[];if(!I&&(A.stopPropagation(),D.length>0)){let L=!0;if(D.forEach(U=>{var Y;if((Y=U.context)!=null&&Y.open&&!U.context.dataRef.current.__escapeKeyBubbles){L=!1;return}}),!L)return}s.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1,GB(A)?A.nativeEvent:A)}),b=du(A=>{const D=T.current;if(T.current=!1,D||typeof S=="function"&&!S(A))return;const L=hC(A),U="["+Sd("inert")+"]",Y=Hn(l).querySelectorAll(U);let z=ot(L)?L:null;for(;z&&!oc(z);){const F=fi(z);if(F===Hn(l).body||!ot(F))break;z=F}if(Y.length&&ot(L)&&!QB(L)&&!Xt(L,l)&&Array.from(Y).every(F=>!Xt(z,F)))return;if(Bt(L)&&l){const F=L.clientWidth>0&&L.scrollWidth>L.clientWidth,B=L.clientHeight>0&&L.scrollHeight>L.clientHeight;let M=B&&A.offsetX>L.clientWidth;if(B&&cn(L).direction==="rtl"&&(M=A.offsetX<=L.offsetWidth-L.clientWidth),M||F&&A.offsetY>L.clientHeight)return}const ee=g&&Aa(g.nodesRef.current,i).some(F=>{var B;return Ep(A,(B=F.context)==null?void 0:B.elements.floating)});if(Ep(A,l)||Ep(A,a)||ee)return;const k=g?Aa(g.nodesRef.current,i):[];if(k.length>0){let F=!0;if(k.forEach(B=>{var M;if((M=B.context)!=null&&M.open&&!B.context.dataRef.current.__outsidePressBubbles){F=!1;return}}),!F)return}s.emit("dismiss",{type:"outsidePress",data:{returnFocus:_?{preventScroll:!0}:HB(A)||qB(A)}}),r(!1,A)});return h.useEffect(()=>{if(!n||!u)return;c.current.__escapeKeyBubbles=I,c.current.__outsidePressBubbles=R;function A(U){r(!1,U)}const D=Hn(l);f&&D.addEventListener("keydown",C),S&&D.addEventListener(m,b);let L=[];return x&&(ot(a)&&(L=Js(a)),ot(l)&&(L=L.concat(Js(l))),!ot(o)&&o&&o.contextElement&&(L=L.concat(Js(o.contextElement)))),L=L.filter(U=>{var Y;return U!==((Y=D.defaultView)==null?void 0:Y.visualViewport)}),L.forEach(U=>{U.addEventListener("scroll",A,{passive:!0})}),()=>{f&&D.removeEventListener("keydown",C),S&&D.removeEventListener(m,b),L.forEach(U=>{U.removeEventListener("scroll",A)})}},[c,l,a,o,f,S,m,n,r,x,u,I,R,C,b]),h.useEffect(()=>{T.current=!1},[S,m]),h.useMemo(()=>u?{reference:{onKeyDown:C,[j8[w]]:A=>{y&&(s.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1,A.nativeEvent))}},floating:{onKeyDown:C,[L8[m]]:()=>{T.current=!0}}}:{},[u,s,y,m,w,r,C])}function lh(t){var e;t===void 0&&(t={});const{open:n=!1,onOpenChange:r,nodeId:s}=t,[i,o]=h.useState(null),a=((e=t.elements)==null?void 0:e.reference)||i,l=BB(t),c=Sv(),u=du((E,S)=>{E&&(p.current.openEvent=S),r==null||r(E,S)}),f=h.useRef(null),p=h.useRef({}),m=h.useState(()=>v8())[0],y=_C(),w=h.useCallback(E=>{const S=ot(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;l.refs.setReference(S)},[l.refs]),x=h.useCallback(E=>{(ot(E)||E===null)&&(f.current=E,o(E)),(ot(l.refs.reference.current)||l.refs.reference.current===null||E!==null&&!ot(E))&&l.refs.setReference(E)},[l.refs]),v=h.useMemo(()=>({...l.refs,setReference:x,setPositionReference:w,domReference:f}),[l.refs,x,w]),g=h.useMemo(()=>({...l.elements,domReference:a}),[l.elements,a]),_=h.useMemo(()=>({...l,refs:v,elements:g,dataRef:p,nodeId:s,floatingId:y,events:m,open:n,onOpenChange:u}),[l,s,y,m,n,u,v,g]);return Zr(()=>{const E=c==null?void 0:c.nodesRef.current.find(S=>S.id===s);E&&(E.context=_)}),h.useMemo(()=>({...l,context:_,refs:v,elements:g}),[l,v,g,_])}function bp(t,e,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...t,...e.map(s=>s?s[n]:null).concat(t).reduce((s,i)=>(i&&Object.entries(i).forEach(o=>{let[a,l]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof l=="function"){var c;(c=r.get(a))==null||c.push(l),s[a]=function(){for(var u,f=arguments.length,p=new Array(f),m=0;m<f;m++)p[m]=arguments[m];return(u=r.get(a))==null?void 0:u.map(y=>y(...p)).find(y=>y!==void 0)}}}else s[a]=l}),s),{})}}function ch(t){t===void 0&&(t=[]);const e=t,n=h.useCallback(i=>bp(i,t,"reference"),e),r=h.useCallback(i=>bp(i,t,"floating"),e),s=h.useCallback(i=>bp(i,t,"item"),t.map(i=>i==null?void 0:i.item));return h.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:s}),[n,r,s])}function IC(t,e){e===void 0&&(e={});const{open:n,floatingId:r}=t,{enabled:s=!0,role:i="dialog"}=e,o=_C();return h.useMemo(()=>{const a={id:r,role:i};return s?i==="tooltip"?{reference:{"aria-describedby":n?r:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?r:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:o}},floating:{...a,...i==="menu"&&{"aria-labelledby":o}}}:{}},[s,i,n,r,o])}function RC({audioRef:t,theme:e,song:n,lyric:r}){const s=pn(),{userSongs:i,setUserSongs:o}=fn(),{setSuccessToast:a,setErrorToast:l}=$n(),[c,u]=h.useState(!1),[f,p]=h.useState(!1),[m,y]=h.useState(r?r.base:""),[w,x]=h.useState([]),[v,g]=h.useState(r?r.real_time:[]),[_,E]=h.useState(!1),[S,T]=h.useState(1),[I,R]=h.useState(!1),[C,b]=h.useState(!1),[A,D]=h.useState(v?v.length:0),L=h.useRef(!0),U=h.useRef(null),Y=h.useRef(0),z=h.useRef(0),{refs:ee,floatingStyles:k,context:F}=lh({open:_,onOpenChange:E,placement:"bottom",middleware:[wv(10)],whileElementsMounted:sh}),B=oh(F),M=ah(F),{getReferenceProps:j,getFloatingProps:P}=ch([B,M]),W=h.useMemo(()=>v.length>=w.length,[w,v,f]),J=h.useMemo(()=>v.length===w.length-1,[w,v,f]),se=h.useMemo(()=>f&&!!w.length&&!W,[W,w,f]),ae=h.useMemo(()=>!!w.length,[w]),Z=()=>{const ie=t.current;ie&&(ie.play(),u(!0),p(!0))},me=()=>{const ie=t.current;ie&&(ie.pause(),u(!1))},Jt=ie=>{const Ae=t.current;Ae&&(Ae.playbackRate=ie,T(ie))},ce=()=>{if(!U.current)return;const ie=U.current;y(ie.value),b(!1)},be=ie=>{const Ae=t.current;Ae&&(Ae.currentTime=ie)},re=h.useCallback(()=>{if(!w.length)return;const ie=t.current;if(!ie||W||z.current==+ie.currentTime.toFixed(1))return;J?Y.current=+ie.duration.toFixed(1):Y.current=+ie.currentTime.toFixed(1);const Ae=w[A],ac={start:z.current,text:Ae,end:Y.current};z.current=Y.current,g([...v,ac]),D(A+1)},[w,A]),q=()=>{if(A<=0)return;if(t.current){z.current=v[A-1].start,Y.current=0;const Ae=v.slice(0,A-1);g(Ae),D(A-1)}},Q=async()=>{try{R(!0),me(),await Et({collection:"lyrics",data:{real_time:v,base:m},id:n.id});const ie={...n,lyric_id:n.id},Ae=[...i],ac=Xr(ie,Ae);if(ac==null){l({message:"No song found"}),R(!1);return}o(Ae),await Et({collection:"songs",data:{lyric_id:n.id},id:n.id}),s(rn({...ie,currentIndex:ac,song_in:"user"})),a({message:"Add lyric successful"}),R(!1)}catch(ie){console.log({message:ie})}},he=()=>{me(),re()},De=ie=>{const Ae=t.current;ie==="next"?Ae.currentTime+=2:Ae.currentTime-=2};h.useEffect(()=>{if(m){const ie=m.split(/\r?\n/).filter(Ae=>Ae);x(ie)}w.length&&L.current&&(L.current=!1),console.log("check firstTimeRender",L.current)},[m]),h.useEffect(()=>{const ie=t.current;if(ie){if(v.length){const Ae=v[v.length-1].end;ie&&(ie.currentTime=Ae,z.current=Ae)}return ie.addEventListener("ended",he),()=>{ie.removeEventListener("ended",he)}}},[]);const ut=`${e.type==="light"?"text-[#333]":"text-white"}`,ue={section:`bg-${e.alpha} py-[10px] px-[20px] rounded-[12px] w-full`,row:"flex no-scrollbar justify-between gap-[20px]",col:"flex-grow flex flex-col gap-[20px]",formGroup:"flex flex-col gap-[5px] flex-grow",label:"text-md font-[500]",button:`${e.content_bg} rounded-full text-white text-[14px] px-[10px]`,disable:" opacity-60 pointer-events-none ",icon:"h-[20px] w-[20px]",lyricBox:"list-none h-full max-[549px]:w-[100%] pb-[20%]",listItem:`w-full cursor-pointer py-[2px] ${e.content_hover_text}`},uh=d.jsxs("div",{className:`flex flex-wrap gap-[10px] mb-[20px] ${ut}`,children:[d.jsx("button",{onClick:()=>b(!0),className:ue.button,children:m?"Change lyric":"Add lyric"}),d.jsxs("button",{ref:ee.setReference,...j(),className:ue.button+"  inline-flex items-center hover:brightness-90 px-[20px] py-[5px] rounded-full text-white text-[14px]",children:[S,"x"]}),c?d.jsx(te,{variant:"primary",onClick:me,className:ue.button+(f?"":ue.disable),children:"Pause"}):d.jsx(te,{variant:"primary",onClick:Z,className:ue.button+(c||!ae?ue.disable:""),children:"Play"}),d.jsx(te,{variant:"primary",onClick:re,className:ue.button+(!se&&ue.disable),children:d.jsx(FO,{className:"w-[16px]"})}),d.jsx(te,{variant:"primary",onClick:q,className:ue.button+(!v.length||!w.length?ue.disable:""),children:d.jsx(EO,{className:"w-[16px]"})}),d.jsxs(te,{variant:"primary",onClick:()=>De("prev"),className:ue.button+(!f||!w.length?ue.disable:""),children:[d.jsx(MN,{className:"w-[16px] mr-[5px]"}),"2s"]}),d.jsxs(te,{variant:"primary",onClick:()=>De("next"),className:ue.button+(!f||!w.length?ue.disable:""),children:["2s",d.jsx(FN,{className:"w-[16px] ml-[5px]"})]})]});return d.jsxs(d.Fragment,{children:[uh,d.jsxs("div",{className:`${ue.row} ${ue.section} mb-[0] h-[60vh] pb min-h-[200px] overflow-auto`,children:[d.jsx("div",{className:ue.lyricBox+"min-w-[50%] max-w-[50%] pr-[20px]",children:w.length?d.jsx(d.Fragment,{children:w.map((ie,Ae)=>d.jsx(pT,{firstTimeRender:L,className:"pb-[30px] leading-[1.2]",inUpload:!0,active:Ae===A,done:Ae!=A,children:ie},Ae))}):d.jsx("h1",{children:"Base lyric..."})}),d.jsx("div",{className:ue.lyricBox+" border-none w-[50%]",children:!!(v!=null&&v.length)&&v.map((ie,Ae)=>d.jsxs("div",{className:"pb-[10px]",children:[d.jsx("p",{className:"text-[16px] leading-[1.2] font-bold select-none",children:ie.text}),d.jsxs("div",{className:"flex gap-[10px] h-[20px]",children:[d.jsxs("button",{className:` ${e.content_hover_text}`,onClick:()=>be(ie.start),children:[ie.start,"s"]}),d.jsx("span",{children:" - "}),d.jsxs("button",{className:` ${e.content_hover_text}`,onClick:()=>be(ie.end),children:[ie.end,"s"]})]})]},Ae))})]}),d.jsx(te,{isLoading:I,className:`${e.content_bg} text-[14px] rounded-full mt-[20px]`,variant:"primary",onClick:()=>Q(),children:"Save"}),_&&d.jsx(ih,{context:F,modal:!1,children:d.jsx("div",{className:"z-[99]",ref:ee.setFloating,style:k,...P(),children:d.jsx(Ya,{theme:e,children:d.jsxs("ul",{className:"w-[50px] text-center text-[14px]",children:[d.jsx("li",{onClick:()=>Jt(1),className:`
                  ${S===1&&e.content_text} 
                  ${ue.listItem}`,children:"1x"}),d.jsx("li",{onClick:()=>Jt(1.2),className:`
                  ${S===1.2&&e.content_text}
                  ${ue.listItem}`,children:"1.2x"}),d.jsx("li",{onClick:()=>Jt(1.5),className:`
                  ${S===1.5&&e.content_text}
                  ${ue.listItem}`,children:"1.5x"})]})})})}),C&&d.jsxs(jr,{classNames:"w-[700px]",theme:e,setOpenModal:b,children:[d.jsx("textarea",{ref:U,value:m,onChange:ie=>y(ie.target.value),className:"w-full rounded-[4px] mb-[10px] min-h-[50vh] bg-transparent border p-[10px]"}),d.jsx(te,{variant:"primary",onClick:()=>ce(),className:ue.button,children:"Save"})]})]})}const bC=({audioEle:t,songLyric:e,className:n})=>{const[r,s]=h.useState(0),i=h.useRef(!0),o=h.useRef("instant"),a=h.useRef(null),l=h.useCallback(()=>{s(t.currentTime)},[]),c=()=>e.real_time.map((u,f)=>{const m=r>=u.start-.3&&u.end>r+.3;return d.jsx(pT,{firstTimeRender:i,scrollBehavior:o,containerRef:a,done:!m&&r>u.end,active:m,currentTime:r,className:"mb-[30px]",children:u.text},f)});return h.useEffect(()=>{if(t)return r||l(),t.addEventListener("timeupdate",l),()=>{s(0),i.current=!0;const u=a.current;u&&(u.scrollTop=0),t&&t.removeEventListener("timeupdate",l)}},[]),e.real_time.length?d.jsx("div",{ref:a,className:`${n&&n} overflow-y-auto overflow-x-hidden no-scrollbar h-full pt-[30px] mask-image`,children:c()}):d.jsx("h1",{className:"text-[50px] mt-[30px] text-center",children:"..."})},M8=({audioEle:t,isWaiting:e,setIsOpenFullScreen:n,isOpenFullScreen:r,isPlaying:s})=>{const i=pn(),o=st(rt),{userSongs:a}=fn(),{theme:l}=ct(),{song:c}=o,u=()=>{t==null||t.play()},f=()=>{t==null||t.pause()},p=()=>{s?f():u()},m=()=>{let w=c.currentIndex+1,x;w<a.length?x=a[w]:(x=a[0],w=0),i(rn({...x,currentIndex:w,song_in:c.song_in}))},y={wrapper:`fixed bottom-0 w-full h-[70px] border-t border-${l.alpha} z-40  px-[20px]`,container:`absolute inset-0 ${l.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1]`,songImageWrapper:"flex flex-row items-center flex-grow h-full",image:"w-[40px] h-[40px] flex-shrink-0",cta:"mobile-bottom-player flex items-center h-full pl-[15px] gap-[10px]"};return d.jsxs("div",{className:y.wrapper,children:[d.jsx("div",{className:`${y.container} ${r?"opacity-0 transition-opacity delay-[.3s]":""}`}),d.jsxs("div",{className:"flex flex-row  h-full",children:[d.jsx("div",{onClick:()=>n(!0),className:"mobile-current-song flex-grow",children:d.jsxs("div",{className:y.songImageWrapper,children:[d.jsx("div",{className:y.image,children:d.jsx(or,{src:c.image_url||ZA,classNames:"rounded-full"})}),d.jsx("div",{className:"flex-grow  ml-[10px]",children:c.song_url&&d.jsxs(d.Fragment,{children:[d.jsx("h5",{className:"text-[18px] font-[500] line-clamp-1",children:(c==null?void 0:c.name)||"name"}),d.jsx("p",{className:"text-[14px] font-[400] opacity-60 line-clamp-1",children:(c==null?void 0:c.singer)||"singer"})]})})]})}),d.jsxs("div",{className:`${y.cta} ${!c.name&&"opacity-60 pointer-events-none"}`,children:[d.jsx("button",{className:" p-[4px]",onClick:()=>p(),children:e?d.jsx(ZO,{className:"w-[35px]"}):s?d.jsx(ko,{className:"w-[35px]"}):d.jsx(sT,{className:"w-[35px]"})}),d.jsx("button",{onClick:m,className:" p-[4px]",children:d.jsx(eT,{className:"w-[35px]"})})]})]})]})};function $8({audioEle:t,isPlaying:e,isWaiting:n,isOpenFullScreen:r,setIsPlaying:s,setIsWaiting:i,setIsOpenFullScreen:o}){const a=pn(),{theme:l}=ct(),{song:c}=st(rt),{actuallySongs:u}=Qf(),[f,p]=h.useState("Playing"),[m,y]=h.useState(!1),[w,x]=h.useState(!1),v=h.useRef(null),g=h.useRef(null),_=h.useRef(null);SA({bgRef:v,songInStore:c});const E=TA({songInStore:c,audioEle:t}),S=D=>{let L=0,U=D.parentElement;for(;!U.classList.contains("item-container")&&L<5;)U=U.parentElement,L++;return U},T={opacity:"0"},I=D=>{let L=0,U=D.previousElementSibling;for(;U&&L<100;)Object.assign(U.style,T),L++,U=U.previousElementSibling},R=(D,L,U)=>{const Y=D.target,z=S(Y);I(z),Object.assign(z.style,T),setTimeout(()=>{a(rn({...L,currentIndex:U,song_in:c.song_in}))},250)},C=h.useMemo(()=>d.jsx(d.Fragment,{children:c&&d.jsx(d.Fragment,{children:c.currentIndex===u.length-1?d.jsx("p",{children:"..."}):d.jsx(d.Fragment,{children:u.map((D,L)=>{if(L>c.currentIndex)return d.jsx(kl,{theme:l,data:D,onClick:U=>R(U,D,L),active:D.song_url===c.song_url},L)})})})}),[c,u]),b=h.useMemo(()=>d.jsx(bC,{className:"flex-shrink-0 overflow-auto h-[calc(100vh-60px-65px-130px-20px)]",audioEle:t,songLyric:E}),[E,w]);h.useEffect(()=>{const D=()=>{window.innerWidth>549&&window.innerWidth<800?x(!0):x(!1)};return D(),window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[]);const A={headerWrapper:"h-[65px] p-[15px]",header:"relative w-full",main:"h-[calc(100vh-65px)] relative px-[15px] overflow-hidden",songImage:"flex-shrink-0 transition-[height, width] origin-top-left",nameAndSinger:"flex flex-grow justify-between items-center",scrollText:"h-[30px] mask-image-horizontal",lyricContainer:"absolute top-[calc(60px+16px)] left-[15px] right-[15px]",playerContainer:"absolute bottom-[30px] left-[15px] right-[15px]",bgImage:"absolute inset-0 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background-image] duration-[.3s ]",overlay:"absolute inset-0 bg-zinc-900 bg-opacity-60 bg-blend-multiply",button:"bg-gray-500 bg-opacity-20 inline-flex justify-center items-center rounded-full absolute right-0 top-0 h-full w-[35px]"};return d.jsx(d.Fragment,{children:d.jsxs("div",{className:`fixed inset-0 z-50 bg-zinc-900 text-white overflow-hidden  ${r?"translate-y-0":"translate-y-full"} transition-[transform] duration-[.5s] ease-in-out delay-150  `,children:[d.jsx("div",{ref:v,className:A.bgImage}),d.jsx("div",{className:A.overlay}),d.jsxs("div",{className:"absolute inset-0 z-10",children:[d.jsx("div",{className:A.headerWrapper,children:d.jsxs("div",{className:A.header,children:[d.jsx(NC,{className:"w-fit",setActiveTab:p,activeTab:f,tabs:["Songs","Playing","Lyric"]}),d.jsx("button",{className:`${A.button} p-[6px]`,onClick:()=>o(!1),children:d.jsx(YS,{className:"w-[20px]"})})]})}),d.jsxs("div",{ref:g,className:A.main,children:[d.jsxs("div",{className:`${f!="Playing"&&!m||w?"flex":""}`,children:[h.useMemo(()=>d.jsx(q8,{active:f==="Playing"&&!w,data:c}),[c,e,f,w]),d.jsxs("div",{className:`${A.nameAndSinger} ${f!="Playing"||w?"ml-[10px]":"mt-[15px] min-[549px]:mt-0"}`,children:[d.jsxs("div",{className:"group flex-grow overflow-hidden",children:[d.jsx("div",{className:A.scrollText,children:h.useMemo(()=>d.jsx(Td,{songInStore:c,autoScroll:!0,classNames:`${f==="Playing"||w?"text-[24px] leading-[30px]":"text-[20px]"} font-[500]`,label:c.name||"..."}),[c,f])}),d.jsx("div",{className:A.scrollText,children:h.useMemo(()=>d.jsx(Td,{songInStore:c,autoScroll:!0,classNames:`${f==="Playing"||w?"text-[22px]":"text-[16px] opacity-60"} font-[400]`,label:c.singer||"..."}),[c,f])})]}),d.jsx("div",{className:"pl-[20px]",children:d.jsx("button",{className:"p-[5px]",children:d.jsx(tT,{className:"w-[25px]"})})})]})]}),d.jsx("div",{ref:_,className:`${A.lyricContainer} ${f==="Lyric"?"block":"hidden"}`,children:b}),d.jsx("div",{className:`absolute left-[15px] right-[15px] ${f==="Songs"?"block":"hidden"}`,children:d.jsxs("div",{className:"relative",children:[d.jsx("h3",{className:"text-white text-[16px] my-[10px]",children:"Playing next"}),d.jsx("div",{className:"h-[calc(100vh-170px)] pb-[30px] no-scrollbar overflow-auto",children:C})]})}),d.jsx("div",{className:`${A.playerContainer} ${f==="Songs"&&"opacity-0 pointer-events-none h-[0px] mb-[0px]"}`,children:d.jsx("div",{className:"flex flex-col-reverse justify-between h-[100px]",children:h.useMemo(()=>d.jsx(eC,{audioEle:t,isOpenFullScreen:!1,isPlaying:e,isWaiting:n,setIsWaiting:i,setIsPlaying:s,idle:!1}),[e,n])})})]})]})]})})}function V8(t,e,n){const{song:r}=st(rt),[s,i]=h.useState(!1),[o,a]=h.useState(0),l=h.useRef(),c=()=>{i(!1),a(Math.random())};return h.useEffect(()=>{if(n&&!(e||!r.id))return window.addEventListener("mousemove",c),()=>{window.removeEventListener("mousemove",c),clearTimeout(l.current)}},[n,r]),h.useEffect(()=>(l.current=setTimeout(()=>i(!0),t),()=>clearTimeout(l.current)),[o]),n?s:!1}const F8=()=>{const t=st(rt),{song:e}=t,[n,r]=h.useState(!1),[s,i]=h.useState(!1),[o,a]=h.useState(!1),[l,c]=h.useState(!1),u=h.useRef(null),f=h.useMemo(()=>window.innerWidth<800,[]),p=V8(xg.focusDelay,f,o),m=d.jsxs(d.Fragment,{children:[d.jsx(cB,{audioEle:u.current,idle:p,isPlaying:n,isOpenFullScreen:o,setIsOpenFullScreen:a}),d.jsx(aB,{audioEle:u.current,idle:p&&o,isPlaying:n,isWaiting:s,isOpenFullScreen:o,setIsPlaying:r,setIsWaiting:i,setIsOpenFullScreen:a})]}),y=d.jsxs(d.Fragment,{children:[d.jsx($8,{audioEle:u.current,idle:!1,isPlaying:n,isWaiting:s,isOpenFullScreen:o,setIsPlaying:r,setIsWaiting:i,setIsOpenFullScreen:a}),d.jsx(M8,{audioEle:u.current,idle:!1,isPlaying:n,isOpenFullScreen:o,isWaiting:s,setIsOpenFullScreen:a})]});return h.useEffect(()=>{l||u.current&&c(!0)},[]),d.jsxs("div",{className:"absolute",children:[d.jsx("audio",{ref:u,src:e.song_url,className:"hidden"}),l?f?y:m:""]})},Tg=({data:t,inDetail:e,theme:n,onClick:r})=>{const s={button:`rounded-full text-[#fff] p-[4px] hover:bg-${n==null?void 0:n.alpha}`,imageContainer:"absolute inset-0 overflow-hidden rounded-[6px]",absoluteContainer:"absolute hidden inset-0 group-hover:block",overlay:"absolute inset-0 bg-[#333] opacity-60",buttonContainer:"justify-center items-center h-full relative z-10 relative",buttonWrapper:"flex items-center justify-center z-10 h-full w-full relative"},i=h.useMemo(()=>window.innerWidth<800,[]);return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"group relative pt-[100%]",onClick:()=>i&&r&&r(),children:d.jsxs("div",{className:s.imageContainer,children:[d.jsx(or,{classNames:"",src:t.image_url,blurHashEncode:t.blurhash_encode}),!i&&!e&&d.jsxs("div",{className:s.absoluteContainer,children:[d.jsx("div",{className:s.overlay}),d.jsx("div",{className:s.buttonWrapper,children:d.jsx(Tn,{to:`${Ce.Playlist}/${t.id}`,children:d.jsx(te,{onClick:()=>r&&r(),className:s.button,children:d.jsx(ko,{className:"w-[35px]"})})})})]})]})}),!e&&d.jsx("h5",{className:"text-[20px] font-[500]",children:t.name})]})};function Td({label:t,classNames:e,autoScroll:n}){const r=h.useRef(null),s=h.useRef(null);return tB({text:s,textWrapper:r,autoScroll:n}),d.jsx("div",{ref:r,className:"overflow-hidden scroll-smooth relative h-full",children:d.jsx("div",{ref:s,className:`${e} absolute left-0 whitespace-nowrap line-clamp-1`,children:t||"..."})})}function AC({modalName:t,setIsOpenModal:e,loggedIn:n}){const{theme:r}=ct(),s=i=>{t.current=i,e(!0)};return d.jsx(d.Fragment,{children:d.jsx(Ya,{theme:r,children:d.jsxs("ul",{className:"flex flex-col gap-[12px]",children:[d.jsxs("li",{className:`${r.content_hover_text} flex cursor-pointer`,onClick:()=>s("theme"),children:[d.jsx(rT,{className:"w-6 h-6 mr-2"}),"Themes"]}),n&&d.jsxs("li",{className:`${r.content_hover_text} flex cursor-pointer`,onClick:()=>s("confirm"),children:[d.jsx(GS,{className:"w-6 h-6 mr-2"}),"Log out"]}),d.jsxs("li",{className:`${r.content_hover_text} flex cursor-pointer`,onClick:()=>s("info"),children:[d.jsx(nT,{className:"w-6 h-6 mr-2"}),"Info"]})]})})})}function U8(){const{theme:t}=ct(),{userInfo:e}=Rn(),[n,r]=Zl(ui),[s,i]=h.useState(!1),[o,a]=h.useState(!1),l=h.useRef("theme"),{refs:c,floatingStyles:u,context:f}=lh({open:s,onOpenChange:i,placement:"right-start",middleware:[wv(0)],whileElementsMounted:sh}),p=oh(f),m=ah(f),y=IC(f),{getReferenceProps:w,getFloatingProps:x}=ch([p,m,y]),{logIn:v,logOut:g}=lv(),_=async()=>{try{await v()}catch(R){console.log(R)}finally{a(!1)}},E=async()=>{try{await g()}catch(R){console.log("signOut error",{messsage:R})}finally{a(!1)}},S=[...Array(3).keys()].map(R=>d.jsxs("div",{className:"px-[10px] py-[5px] flex items-center",children:[d.jsx(Ve,{className:"w-[25px] h-[25px] flex-shrink-0"}),d.jsx(Ve,{className:"w-[80px] h-[19px] ml-[5px]"})]},R)),T=d.jsxs("div",{className:"flex items-center",children:[d.jsx(Ve,{className:"w-[36px] h-[36px] flex-shrink-0 rounded-full"}),d.jsx(Ve,{className:"w-[104px] h-[20px] ml-[5px]"})]}),I={container:`pt-[30px] w-[180px] flex-shrink-0 border-r-[1px] h-screen overflow-y-auto ${t.side_bar_bg} border-${t.alpha}`,button:`px-[10px] py-[5px] w-full text-[14px] font-[500] ${t.content_hover_text}`,text:t.type==="light"?"text-[#333]":"text-white",icon:"w-[25px] mr-[5px]",divide:`h-[1px]  w-[calc(100%-20px)] mb-[10px] mt-[20px] mx-auto bg-${t.alpha}`,userName:"text-[16px] font-[500] ml-[8px] line-clamp-1",imageFrame:`w-[36px] h-[36px] flex-shrink-0 rounded-full overflow-hidden ${n!=null&&n.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`,popupWrapper:"w-[700px] max-w-[90vw] max-[549px]:w-[85vw]",themeContainer:"overflow-auto no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap gap-y-[20px]",themeItem:"w-[25%] px-[10px] max-[549px]:w-[50%]"};return d.jsxs("div",{className:`${I.container} ${I.text}`,children:[d.jsx("div",{className:"px-[10px] flex items-center",children:r?T:d.jsxs(d.Fragment,{children:[d.jsx(OC,{}),d.jsx("h3",{className:I.userName,children:(n==null?void 0:n.displayName)||"Guest"})]})}),d.jsx("div",{className:I.divide}),d.jsxs("div",{className:"flex flex-col gap-[15px] items-start",children:[r&&S,!r&&d.jsxs(d.Fragment,{children:[d.jsx(Tn,{className:"w-full",to:Ce.Home,children:d.jsxs(te,{className:I.button,children:[d.jsx(pO,{className:I.icon}),"Discover"]})}),n!=null&&n.email?d.jsx(Tn,{className:"w-full",to:Ce.MySongs,children:d.jsxs(te,{className:I.button,children:[d.jsx(wa,{className:I.icon}),"My songs"]})}):d.jsxs(te,{onClick:_,className:I.button,children:[d.jsx(dN,{className:I.icon}),"Login"]}),d.jsxs("button",{ref:c.setReference,...w(),className:`flex items-center hover:brightness-75 ${I.button} ${s&&t.content_text}`,children:[d.jsx(XS,{className:I.icon}),"Settings"]})]})]}),s&&d.jsx(ih,{context:f,modal:!1,children:d.jsx("div",{className:"z-[99] floating-ui",ref:c.setFloating,style:u,...x(),children:d.jsx(AC,{loggedIn:!!e.email,setIsOpenModal:a,modalName:l})})}),o&&d.jsxs(jr,{theme:t,setOpenModal:a,children:[l.current==="confirm"&&d.jsx(Rv,{callback:E,loading:!1,theme:t}),l.current==="info"&&d.jsx(Tv,{setIsOpenModal:a}),l.current==="theme"&&d.jsx(Iv,{setIsOpenModal:a})]})]})}const CC="data:image/gif;base64,R0lGODlhJAAkAIABAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NmRjOGMyNC03YmYxLTQxZTMtYjQ2Zi1mY2ZhMDk4MDE1YWYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTBDRTc0QzlGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTBDRTc0QzhGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YzBhNGU4OWYtNjc4Yy00NmMyLTg4NmUtYzIxNGE0NTIwZDRjIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODRlMDBjYmEtZjhlNy03YzQ4LWE4MTgtNDc3NTI3MGQ1ZTAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQgAAQAsAAAAACQAJAAAAnKMj5nArQ9jc7HWyax+GOx/dCAojltpWmgqYazqvu0kz1StrHgYp6tO6gWAn59wZKSxkjcTM7MUEk/SY1BpmGqeHhs0W8Vywk3tkPw9iztcBLfNW7Pl9PLcXk/f8Xz9vguWB6h254Y2+Id4aLjH2Kc4UQAAIfkECQgAAQAsAAAAACQAJAAAAnSMj6nL7Q+jnAzYS+XFGW7beV/4fADpmGijrkvrJnA2z1Q9hvhG7lznA+lyBpuMGAieDiYlQulkIpvTKk9KFRatv2RW671uxeHskwv+ptHLsRnbhbLPZHW7vK6r6XF21J33Bngnp2fY98UXuNikSOg3B8dYAAAh+QQJCAABACwAAAAAJAAkAAACfIyPqcvtD6OctNqLKdg8N955C7iJI4mQAKam6NUeMTMHda3cr4EnOugCfnY2Yi8Y4hmXKqHSWYQ2mclodSqllmTY7fOqbSK9VnLXHB6Ludk2Vg1nv+Vo9zT+rc/zK3qf/wNmt8aHV0Z4aHj2l+inFqgXiQjJuKgYRnkJUgAAIfkECQgAAQAsAAAAACQAJAAAAnuMj6nL7Q+jnLTaC7K+T2/eeBkYiiQjAlyKsJh5uJYc0BRtTzgMpbsn8fFqQ4cQGCuWjqok0vA7toZR4fRJxDJHzg+Uur16s+Nt86sFM8VcdDncbZPlZvZ5fq/H82rp3m5XxZe29mfoZnWIF9hH1+gDqKiHOPhWSBlJWQAAIfkECQgAAQAsAAAAACQAJAAAAn6Mj6nL7Q8RmDTaQ+u1eW7efVg4ZqLRARIppqsZpW6pQTIbzPZd57jD6+keQQ/NuAu+esDiEkl0HlUxKerXKFKvsCTvuY0qp2Dw8IzTlslTdNf3VrO5Qiu8Hre78d/5HSpHB5imR5g3Jhi2d7OWaGbIN4j4pwjJ6Lco00gJVgAAIfkECQgAAQAsAAAAACQAJAAAAn2EH6nL7XnQmxRGULO7WHsbfRPHiQ95mRsqqQvbBqUGG29K13eYw3tMqXVAwJFOMcsIf7YeizmsLJE45ZHYtPqoPO2TWzxdZVXpOGneYqPBc7mtJnflsekaCkXry3Z61h/VtzcnyGcYN1jnRnj4dQf2V8g46QiIB0ly+bhWAAAh+QQJCAABACwAAAAAJAAkAAACfYyPqcvtD+MDtMobqt6Y7Q90C8iJCamZJ0qpCNu6Bhwen0S/JZTb+wTTpSK92c9RzBwbyRsx6BvyoEYpkCW0RLVVVDbWBSuxW7EzDPrW0OrzmPs2U+Nrevvnzs/11ib+T8ZWVufXB+g1qHZnyAhX6HhIopg4yAfZKEkpiFYAACH5BAkIAAEALAAAAAAkACQAAAJ7jI+py+0Po5y02ouB3tht3jGfFopjuYwqgK5npCLuJ8XHDEK2gZP3ywMGeqwfzZgb9mTCnRLHPAalz1k06SRefVPsEsmthrXgYnf8PZvFa7J6206z4fBs8w4t08t2at+qF6j2h+YnRxiX9ybIhrg3iOdlqDjH6Fa5qFYAACH5BAkIAAEALAAAAAAkACQAAAJ1jI+py+0Po5y02otzArxr1nmfEnIjWZ5bqh4l0Lqs8WK1HNpzcFs9/9o5fkFhg1gUQZBJWISZlECL0l3ThFMCc1lq10mzXhFT8Db6JYubam7Yffa+teVymz5O6+fyuLm+hgd39ReIxRd0d+inmLjH+GX3+FIAACH5BAUIAAEALAAAAAAkACQAAAJwjI+py+0Po5y0PoCzhVlv12EfGI5NCJgMqi5sm7zwIc9BPeOw3vKqb6oBLyUaqshB3o4diZDpSTaN0FTkWUVgo8sslbtlapXh43hqKJfP4Ko1TY574ehue24XffV0KJuf9xa4tifoZih351f4h9hRAAA7",kC=(t,e)=>{const n=[...e.song_ids],r=n.findIndex(o=>o===t.id);n.splice(r,1);const s=n.length,i={...e,count:s,song_ids:n,time:s===0?0:+(e.time-t.duration).toFixed(1)};return console.log("handle playlist prev",e.name,e.song_ids),i.count<0||i.time<0||i.song_ids.length===e.song_ids.length||i.count===e.count||i.time===e.time?{error:!0,newPlaylist:i}:(console.log("handle playlist current",i.name,i.song_ids),{error:!1,newPlaylist:i})},B8=(t,e,n)=>{let r;for(let s of t.in_playlist){const i=e.findIndex(c=>c.id===s),o=i!==-1;if(o)r=e[i];else{const c=n.find(u=>u.id===s);if(!c)return{error:!0};r=c}const{error:a,newPlaylist:l}=kC(t,r);if(a)return{error:!0};o?(console.log("update to existing list "),nc(l,e)):(console.log("push to existing list "),e.push(l))}return{error:!1}},z8=async(t,e)=>{let n=[];for(let r of t.in_playlist){const s=e.find(a=>a.id===r);if(!s)return{error:!0,playlistsNeedToUpdateDoc:n};const{error:i,newPlaylist:o}=kC(t,s);if(i)return{error:!0,playlistsNeedToUpdateDoc:n};n.push(o)}return{error:!1,playlistsNeedToUpdateDoc:n}},_x=(t,e)=>{let n;if(!t.in_playlist.length)return console.log("No song in playlist"),{error:!0,newSong:n};const r=[...t.in_playlist],s=r.findIndex(i=>i===e.id);return r.splice(s,1),n={...t,in_playlist:r},t.in_playlist.length===r.length?(console.log("song in playlist no change"),{error:!0,newSong:n}):{error:!1,newSong:n}},PC=(t,e)=>{let n;const r=[...t.in_playlist];return r.find(i=>i===e.id)?{error:!0,newSong:n}:(r.push(e.id),n={...t,in_playlist:r},r.length===t.in_playlist.length?{error:!0,newSong:n}:{error:!1,newSong:n})},W8=(t,e)=>{const n=[];if(console.log("delete playlist"),!t)return console.log("no playlist"),{error:!0,songsNeedToUpdate:n};for(let r of e){if(!r.in_playlist.includes(t.id))return console.log("not in playlist"),{error:!0,songsNeedToUpdate:n};const s=[...r.in_playlist],i=s.findIndex(a=>a===t.id);s.splice(i,1);let o={...r,in_playlist:s};if(console.log("check new songs",o),o.in_playlist.length===r.in_playlist.length)return console.log("new song error"),{error:!0,songsNeedToUpdate:n};n.push(o)}return n.length===0?{error:!0,songsNeedToUpdate:n}:{error:!1,songsNeedToUpdate:n}};function Ca({data:t,active:e,onClick:n,theme:r,inProcess:s,inPlaylist:i,userInfo:o,userSongs:a,userPlaylists:l,setUserSongs:c,setUserPlaylists:u,songItemActions:f,deleteFromPlaylist:p,selectedSongList:m,isCheckedSong:y,setSelectedSongList:w,setIsCheckedSong:x,handleOpenParentModal:v}){const g=pn(),{setErrorToast:_,setSuccessToast:E}=$n(),{playlist:S,song:T}=st(rt),[I,R]=h.useState(!1),[C,b]=h.useState(!1),[A,D]=h.useState(!1),[L,U]=h.useState(),{refs:Y,floatingStyles:z,context:ee}=lh({open:C,onOpenChange:b,middleware:[_B()],whileElementsMounted:sh}),k=oh(ee),F=ah(ee),{getReferenceProps:B,getFloatingProps:M}=ch([k,F]),j=h.useMemo(()=>window.innerWidth<800,[]),P=h.useMemo(()=>m?(m==null?void 0:m.indexOf(t))!=-1:!1,[m]),W=re=>{U(re),D(!0)},J=()=>{R(!1),D(!1)},se=h.useCallback(async()=>{if(!o||!a||!l||!c||!u||!f){_({message:"Lack of props"});return}try{R(!0);let re,q;if(t.in_playlist.length){re=[...l];const{error:he,playlistsNeedToUpdateDoc:De}=await z8(t,re);if(he||!De){J(),_({message:"Error when handle playlist"});return}q=De}const Q=await f.updateAndSetUserSongs({song:t});if(!Q){_({message:"Error when handle user songs"}),J();return}if(q&&re){for(let he of q)nc(he,re),he.id===S.id&&g(Eo(he)),await Et({collection:"playlist",data:he,id:he.id,msg:">>> api: update playlist doc"});u(re,[])}if(await bf(t),await Et({collection:"users",data:{song_ids:Q,song_count:Q.length},id:o.email,msg:">>> api: update user doc"}),T.id===t.id){const he=YA({});g(rn({...he,song_in:"user",currentIndex:0}))}console.log("[success]: delete song completed"),E({message:`'${t.name}' deleted`})}catch(re){console.log({message:re}),_({})}finally{J()}},[a,T,t]),ae=h.useCallback(async(re,q)=>{if(!re||!q||!f){_({message:"Lack of props"});return}try{if(t.by==="admin"){console.log("song by admin");const ue=Z1({song:re,playlist:q});if(ue.count<0||ue.time<0||ue.song_ids.length===q.song_ids.length){_({message:"New playlist error"});return}console.log("check new playlist",ue),await f.setPlaylistDocAndSetUserPlaylists({newPlaylist:ue}),E({message:`'${re.name}' added to ${q.name}`});return}if(!a||!c){_({message:"Lack of props"});return}const{error:Q,newSong:he}=PC(re,q);if(Q||!he){_({message:"New song error"});return}const De=[...a];Xr(he,De);const ut=Z1({song:he,playlist:q});if(ut.count<0||ut.time<0||ut.song_ids.length===q.song_ids.length){_({message:"New playlist error"});return}c(De),await Et({collection:"songs",data:he,id:he.id}),await f.setPlaylistDocAndSetUserPlaylists({newPlaylist:ut}),E({message:`'${re.name}' added to ${q.name}`})}catch(Q){console.log(Q),_({})}finally{b(!1)}},[a,t]),Z=h.useCallback(re=>{if(!w||!m||!x){_({message:"Selected lack of props"});return}x(!0);let q=[...m];const Q=q.indexOf(re);Q===-1?q.push(re):q.splice(Q,1),w(q),q.length||x(!1)},[m]),me={textColor:r.type==="light"?"text-[#333]":"text-[#fff]",button:`${r.content_hover_bg} p-[8px] rounded-full`,songListButton:"mr-[10px] text-[inherit]",itemContainer:`w-full border-b border-${r.alpha} last:border-none p-[0px] hover:bg-${r.alpha} ${P&&"bg-"+r.alpha}`,imageFrame:"h-[54px] w-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${r.alpha} text-[14px] font-[500]`},Jt=d.jsxs("div",{className:`flex flex-row ${s?"opacity-60":""}`,children:[d.jsx(d.Fragment,{children:s?d.jsx("button",{className:`${me.songListButton}`,children:d.jsx(wa,{className:"w-[18px]"})}):d.jsx(d.Fragment,{children:y?d.jsx("button",{onClick:()=>Z(t),className:`${me.songListButton} text-[inherit]`,children:P?d.jsx(va,{className:"w-[18px]"}):d.jsx($u,{className:"w-[18px]"})}):d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>Z(t),className:`${me.songListButton} hidden group-hover/main:block`,children:d.jsx($u,{className:"w-[18px] "})}),d.jsx("button",{className:`${me.songListButton} group-hover/main:hidden group-hover/main:mr-[0px]`,children:d.jsx(wa,{className:"w-[18px]"})})]})})}),d.jsxs("div",{className:`${me.imageFrame}`,children:[d.jsx(or,{src:t.image_url,blurHashEncode:t.blurhash_encode}),!s&&d.jsx(d.Fragment,{children:e?d.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center",children:d.jsx("div",{className:"relative h-[18px] w-[18px]",children:d.jsx("img",{src:CC,alt:""})})}):d.jsx("div",{className:`absolute  inset-0 bg-black bg-opacity-60 
songContainers-center justify-center items-center hidden group-hover/image:flex`,children:d.jsx(te,{onClick:n,variant:"default",className:"h-[25px] w-[25px] text-white",children:d.jsx(ko,{})})})})]}),d.jsxs("div",{className:"ml-[10px]",children:[d.jsx("h5",{className:"text-mg line-clamp-1",children:t.name}),d.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:t.singer})]})]}),ce=h.useMemo(()=>d.jsxs("div",{className:"w-[200px]",children:[!j&&d.jsxs(d.Fragment,{children:[d.jsx("h5",{className:"text-mg line-clamp-1",children:t.name}),d.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:t.singer})]}),(o==null?void 0:o.email)&&d.jsx(d.Fragment,{children:i?d.jsx(d.Fragment,{children:!e&&d.jsxs(te,{className:`mt-[15px] ${r.content_hover_text}`,variant:"list",onClick:()=>p&&p(t),children:[d.jsx(wO,{className:"w-[18px] mr-[5px]"}),"Remove from playlist"]})}):d.jsxs(te,{className:`mt-[15px] group relative ${r.content_hover_text} ${me.before}`,variant:"list",children:[d.jsx(Qa,{className:"w-[18px] mr-[5px]"}),"Add to playlist",d.jsx(Ya,{classNames:"w-[100%] absolute right-[calc(100%+5px)] hidden group-hover:block hover:block",theme:r,children:d.jsxs("ul",{className:"w-[150px]",children:[!!(l!=null&&l.length)&&d.jsx(d.Fragment,{children:l.map((re,q)=>{const Q=re.song_ids.includes(t.id);return d.jsxs("li",{onClick:()=>!Q&&ae(t,re),className:`list-none flex rounded-[4px] p-[5px] ${Q&&"opacity-60"} ${!Q&&r.content_hover_text}`,children:[d.jsx(wa,{className:"w-[20px] mr-[5px]"}),d.jsxs("p",{children:[re.name," ",Q&&"(added)"]})]},q)})}),d.jsxs("li",{onClick:()=>v&&v("ADD_PLAYLIST"),className:`list-none flex rounded-[4px] p-[5px] ${r.content_hover_text}`,children:[d.jsx(Qa,{className:"w-[18px] mr-[5px]"}),"Add new playlist"]})]})})]})}),t.by!="admin"&&d.jsxs(d.Fragment,{children:[d.jsxs("a",{target:"_blank",download:!0,href:t.song_url,className:`${r.content_hover_text} text-[14px] inline-flex items-center cursor-pointer`,children:[d.jsx(lN,{className:"w-[18px] mr-[5px]"}),"Download"]}),d.jsxs(te,{onClick:()=>W("edit"),className:`${r.content_hover_text}`,variant:"list",children:[d.jsx(Sy,{className:"w-[18px] mr-[5px]"}),"Edit"]}),t.lyric_id?d.jsx(Tn,{to:`/mysongs/edit/${t.id}`,children:d.jsxs(te,{className:`${r.content_hover_text}`,variant:"list",children:[d.jsx(qw,{className:"w-[18px] mr-[5px]"}),"Edit lyric"]})}):d.jsx(Tn,{to:`/mysongs/edit/${t.id}`,children:d.jsxs(te,{className:`${r.content_hover_text}`,variant:"list",children:[d.jsx(qw,{className:"w-[18px] mr-[5px]"}),"Add lyric"]})}),d.jsxs(te,{onClick:()=>W("confirm"),className:`${r.content_hover_text}`,variant:"list",children:[d.jsx(Ty,{className:"w-[18px] mr-[5px]"}),"Delete"]})]}),d.jsxs("p",{className:"opacity-60 text-center text-[12px] mt-[10px]",children:["uploaded by ",t.by]})]}),[r,e,l,t,ae,p]),be=h.useMemo(()=>rc({loading:I,label:`Delete '${t.name}'`,desc:"This action cannot be undone",theme:r,callback:se,setOpenModal:D}),[I,r,a,t,T]);return d.jsxs("div",{className:`${!s&&"group/main"} flex flex-row rounded justify-between songContainers-center px-[10px] py-[10px] ${me.itemContainer}`,children:[Jt,s?d.jsxs("div",{className:"flex items-center",children:[d.jsx("span",{children:d.jsx(zd,{className:"w-[20px] mr-[10px] animate-spin"})}),d.jsx("p",{className:"text-[14px]",children:"In process..."})]}):d.jsx(d.Fragment,{children:d.jsxs("div",{className:"flex flex-row items-center gap-x-[5px]",children:[d.jsx(te,{className:`${me.button} ${r.type==="light"?"hover:text-[#333]":"hover:text-white"}`,children:d.jsx(tT,{className:"w-[20px]"})}),d.jsxs("div",{className:"w-[80px] flex justify-center songContainers-center",children:[d.jsx("button",{ref:Y.setReference,...B(),className:`group-hover/main:block ${me.button}
            ${C?"block cursor-default":"hidden "}
            ${r.type==="light"?"hover:text-[#333]":"hover:text-white"}
            `,children:d.jsx(kN,{className:"w-[20px]"})}),d.jsx("span",{className:`text-[12px] group-hover/main:hidden ${C&&"hidden"}`,children:hd(t.duration)})]})]})}),C&&!s&&d.jsx(ih,{context:ee,modal:!1,children:d.jsx("div",{className:"z-[99]",ref:Y.setFloating,style:z,...M(),children:d.jsx(Ya,{theme:r,children:ce})})}),A&&!s&&d.jsxs(jr,{theme:r,setOpenModal:D,children:[L==="edit"&&d.jsx(XA,{setIsOpenModal:D,setUserSongs:c,theme:r,userSongs:a,data:t}),L==="confirm"&&be]})]})}const H8=({data:t,active:e,onClick:n,hasTitle:r,classNames:s,theme:i,idleClass:o},a)=>{const l={container:"flex flex-col",imageFrame:"group relative transition-[width] duration-[.3s] origin-center rounded-[6px] overflow-hidden",image:"select-none object-cover object-center rounded w-full",overlay:"absolute inset-0 bg-[#333] bg-opacity-60 items-center justify-center hidden group-hover:flex",playingGifFrame:"absolute h-[30px] w-[30px] bottom-[15px] left-[15px]",title:"text-[22px] text-white mt-[10px] font-bold text-ellipsis line-clamp-1"};if(t)return d.jsxs("div",{ref:a,className:`${l.container} ${o&&o}`,children:[d.jsx("div",{className:`flex ${s&&s}`,children:d.jsxs("div",{className:`${l.imageFrame} ${e?"w-[320px]":"w-[280px]"}`,children:[d.jsx(or,{classNames:"rounded-[6px]",src:t.image_url,blurHashEncode:t.blurhash_encode}),!e&&d.jsx("div",{className:l.overlay,children:d.jsx(te,{onClick:n,variant:"circle",className:`h-[50px] w-[50px] text-white ${i.content_hover_text}`,children:d.jsx(ko,{className:"w-full"})})}),e&&d.jsx("div",{className:l.playingGifFrame,children:d.jsx("img",{src:CC,alt:""})})]})}),r&&d.jsxs("div",{className:"text-center",children:[d.jsx("h2",{className:l.title,children:(t==null?void 0:t.name)||"Some song"}),d.jsx("p",{className:"text-md opacity-50 line-clamp-1",children:(t==null?void 0:t.singer)||"..."})]})]})},Ap=h.forwardRef(H8);function q8({data:t,active:e}){const n={container:"flex flex-col",imageFrame:"rounded-[4px] overflow-hidden",image:"select-none object-cover object-center w-full"};if(t)return d.jsx("div",{className:`${n.container} ${e?"w-full px-[20px]":"w-[60px] h-[60px] flex-shrink-0"}`,children:d.jsx("div",{className:`${n.imageFrame}`,children:d.jsx(or,{src:t.image_url,classNames:"w-full"})})})}const NC=({tabs:t,activeTab:e,setActiveTab:n,className:r})=>d.jsx("ul",{className:`flex py-[4px] h-full px-[4px] items-center mx-auto rounded-full bg-gray-500 bg-opacity-20 ${r&&r}`,children:t.map((s,i)=>d.jsx("li",{onClick:()=>n(s),className:`px-[30px] h-full rounded-full max-[549px]:px-[15px] ${e===s?"bg-gray-400 bg-opacity-20 text-white":""}`,children:d.jsx("span",{className:"leading-[27px] font-bold max-[549px]:font-normal",children:s})},i))}),K8=({time:t=3e3,autoClose:e})=>{const{setToasts:n,toasts:r}=$n(),{theme:s}=ct(),[i,o]=h.useState(""),a=c=>{n(u=>u.filter(f=>f.id!=c))};h.useEffect(()=>{i&&n(c=>c.filter(u=>u.id!=i))},[i]),h.useEffect(()=>{if(!e||!r.length)return;const c=r[r.length-1].id;setTimeout(()=>{o(c)},t)},[r]);const l={container:"toast-portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return d.jsx(d.Fragment,{children:bl.createPortal(d.jsx("div",{className:l.container,children:d.jsx("div",{className:"flex flex-col gap-[10px]",children:!!r.length&&r.map((c,u)=>d.jsx(iB,{onClick:a,theme:s,toast:c},u))})}),document.getElementById("portals"))})};function G8({user:t},e){return e?d.jsx("p",{className:"text-xl mb-4 ml-2",ref:e,children:t.display_name}):d.jsx("p",{className:"text-xl mb-4 ml-2",children:t.display_name})}h.forwardRef(G8);function Q8(){const{theme:t}=ct(),[e]=Zl(ui),[n,r]=h.useState(!1),[s,i]=h.useState(!1),o=h.useRef("confirm"),{logOut:a}=lv(),{refs:l,floatingStyles:c,context:u}=lh({open:n,onOpenChange:r,placement:"bottom-end",middleware:[wv(20),xB(),SB()],whileElementsMounted:sh}),f=oh(u),p=ah(u),m=IC(u),{getReferenceProps:y,getFloatingProps:w}=ch([f,p,m]),x=async()=>{try{await a()}catch(v){console.log("signOut error",{messsage:v})}finally{i(!1)}};return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:`${t.side_bar_bg}`,children:d.jsxs("div",{className:"container mx-auto flex justify-between items-center h-[50px]",children:[d.jsx("h1",{className:"text-[20px] uppercase",children:"Zing dash board"}),d.jsxs("div",{className:"flex items-center",children:[(e==null?void 0:e.displayName)&&d.jsx("p",{className:"text-[14px] mr-[8px]",children:e.displayName}),d.jsx("div",{className:"w-[30px] h-[30px] rounded-full overflow-hidden border-[#ccc] border",children:(e==null?void 0:e.photoURL)&&d.jsx("img",{src:e.photoURL,className:"w-full",alt:""})}),d.jsx("button",{ref:l.setReference,...y(),className:`flex ml-[12px] justify-center rounded-full items-center h-[30px] w-[30px] hover:brightness-75  ${n&&t.content_text} bg-${t.alpha}`,children:d.jsx(XS,{className:"w-[24px]"})})]})]})}),n&&d.jsx(ih,{context:u,modal:!1,children:d.jsx("div",{className:"z-[99]",ref:l.setFloating,style:c,...w(),children:d.jsx(AC,{modalName:o,loggedIn:!!(e!=null&&e.email),setIsOpenModal:i})})}),s&&d.jsxs(jr,{theme:t,setOpenModal:i,children:[o.current==="confirm"&&d.jsx(Rv,{callback:x,loading:!1,theme:t,label:"Log out ?"}),o.current==="info"&&d.jsx(Tv,{setIsOpenModal:i}),o.current==="theme"&&d.jsx(Iv,{setIsOpenModal:i})]})]})}function OC({className:t}){var r;const[e]=Zl(ui),n={imageFrame:`${t||"w-[35px] h-[35px]"} flex-shrink-0 rounded-full overflow-hidden ${e!=null&&e.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`};return d.jsx("div",{className:n.imageFrame,children:e!=null&&e.photoURL?d.jsx(or,{src:e==null?void 0:e.photoURL,classNames:"w-full"}):d.jsx("h1",{className:"text-[20px]",children:e!=null&&e.email?(r=e==null?void 0:e.displayName)==null?void 0:r.charAt(1):"Z"})})}function Y8({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"}))}const J8=h.forwardRef(Y8),X8=J8;function jC({setIsOpenModal:t,title:e}){return d.jsxs("div",{className:"flex justify-between py-[15px]",children:[d.jsx("h1",{className:"text-[26px] font-semibold",children:e}),d.jsx(te,{onClick:()=>t(!1),size:"normal",children:d.jsx(X8,{className:"w-[25px]"})})]})}function Tv({setIsOpenModal:t}){return d.jsxs("div",{className:"w-[400px] max-w-[calc(90vw-40px)]",children:[d.jsx(jC,{setIsOpenModal:t,title:"Zingmp3 Clone"}),d.jsxs("div",{className:"",children:[d.jsx("h5",{className:"text-lg font-bold",children:"Cc cng ngh s dng:"}),d.jsx("ul",{}),d.jsx("a",{href:"asldj",target:"_blank",className:"text-lg font-bold",children:"#Github"})]})]})}function xx({onClick:t,theme:e,active:n}){return d.jsx(d.Fragment,{children:d.jsxs("div",{className:"w-[25%] px-[10px] max-[549px]:w-[50%]",children:[d.jsx("div",{onClick:()=>t(e),className:`relative border pt-[100%] rounded-xl ${e.content_hover_border} ${e.side_bar_bg} ${n?e.content_border:"border-transparent"}`,children:n&&d.jsx("div",{className:"absolute bottom-[10px] right-[10px]",children:d.jsx(QS,{className:`${e.content_text} w-[25px]`})})}),d.jsx("p",{className:"text-[14px] mt-[6px]",children:e.name})]})})}function Iv({setIsOpenModal:t}){const{theme:e,setTheme:n}=ct(),r=a=>{localStorage.setItem("theme",JSON.stringify(a.id)),n(a)},s={songItemContainer:`w-full border-b border-${e.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[400px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-auto no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap gap-y-[20px]",linkItem:`py-[10px] border-b border-${e.alpha} last:border-none`},i=[],o=[];return h.useMemo(()=>{Rm.forEach((a,l)=>{const c=a.id===e.id;if(a.type==="dark")return i.push(d.jsx(xx,{active:c,theme:a,onClick:r},l));o.push(d.jsx(xx,{active:c,theme:a,onClick:r},l))})},[e]),d.jsxs("div",{className:s.popupWrapper,children:[d.jsx(jC,{setIsOpenModal:t,title:"Appearance"}),d.jsxs("div",{className:s.themeContainer,children:[d.jsx("h2",{className:"text-md font-semibold mb-[10px]",children:"Dark"}),d.jsx("div",{className:s.themeList,children:i}),d.jsx("h2",{className:"text-md font-semibold mb-[10px] mt-[30px]",children:"Light"}),d.jsx("div",{className:s.themeList,children:o})]})]})}function Rv({loading:t,theme:e,callback:n,label:r,setOpenModal:s,buttonLabel:i,desc:o,className:a}){return d.jsxs("div",{className:a||"w-[30vw] relative",children:[d.jsx("h1",{className:"text-[20px] text-red-500 font-semibold",children:r||"Wait a minute"}),d.jsx("p",{className:" text-[16px]",children:o}),d.jsxs("div",{className:"flex gap-[10px] mt-[20px]",children:[d.jsx(te,{isLoading:t,className:` bg-${e.alpha} hover:bg-red-500 rounded-full text-[14px]`,variant:"primary",onClick:n,children:i||"Yes please"}),d.jsx(te,{onClick:()=>s&&s(!1),className:`${e.content_bg} rounded-full text-[14px]`,variant:"primary",children:"Close"})]})]})}function Ex({children:t}){const{theme:e}=ct(),n=`${e.type==="light"?"text-[#333]":"text-white"}`;return d.jsxs(d.Fragment,{children:[d.jsx(Q8,{}),d.jsx("div",{className:`${e.container} ${n} min-h-screen`,children:t})]})}function Z8(){const t=pn(),[e,n]=Zl(ui),{theme:r}=ct(),{userInfo:s}=Rn(),{loading:i}=Yf(),{adminSongs:o,userPlaylists:a}=fn(),{song:l}=st(rt),c=yv(),{logIn:u,logOut:f}=lv(),[p,m]=h.useState([]),[y,w]=h.useState(!1),[x,v]=h.useState(!1),g=h.useRef("theme"),_=(b,A)=>{l.id!==b.id&&t(rn({...b,currentIndex:A,song_in:"admin"}))},E=h.useMemo(()=>window.innerWidth<800,[]),S=async()=>{try{await u()}catch(b){console.log(b)}finally{v(!1)}},T=async()=>{try{await f()}catch(b){console.log("signOut error",{messsage:b})}finally{v(!1)}},I=b=>{g.current=b,v(!0)},R={songItemContainer:`w-full border-b border-${r.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[400px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-auto no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap gap-y-[20px]",linkItem:`py-[10px] border-b border-${r.alpha} last:border-none`},C=h.useMemo(()=>o.map((b,A)=>{const D=b.id===l.id&&l.song_in==="admin";return E?d.jsx(kl,{theme:r,onClick:()=>_(b,A),active:D,data:b,isCheckedSong:y,selectedSongList:p,setIsCheckedSong:w,setSelectedSongList:m},A):d.jsx(Ca,{theme:r,onClick:()=>_(b,A),active:D,data:b,userInfo:s,isCheckedSong:y,userPlaylists:a,selectedSongList:p,setIsCheckedSong:w,setSelectedSongList:m,songItemActions:c},A)}),[o,r,l,p,y]);return d.jsxs(d.Fragment,{children:[E&&d.jsx("div",{className:"pb-[20px]",children:d.jsxs("div",{className:"flex flex-col gap-3 items-start ",children:[d.jsx("h1",{className:"text-[24px] font-bold",children:"Library"}),s.status==="loading"?Gw:d.jsx(d.Fragment,{children:s.email?d.jsx(Ic,{className:R.linkItem,to:Ce.MySongs,icon:d.jsx(wa,{className:R.icon+r.content_text}),label:"All songs",arrowIcon:d.jsx(JS,{className:"w-5 h-5 text-gray-500"})}):d.jsx(te,{onClick:S,className:`${r.content_bg} rounded-[4px] px-[40px]`,variant:"primary",children:"Login"})})]})}),d.jsxs("div",{className:"pb-[30px]",children:[d.jsx("h3",{className:"text-[24px] font-bold mb-[10px]",children:"Popular"}),i&&aT,!i&&d.jsx(d.Fragment,{children:o.length?C:"No songs jet..."})]}),E&&d.jsxs("div",{className:"pb-[30px]",children:[d.jsx("h3",{className:"text-[24px] font-bold mb-[10px]",children:"Setting"}),d.jsx(OC,{className:"h-[65px] w-[65px]"}),n?d.jsx(Ve,{className:"my-[8px] h-[27px]"}):d.jsx("p",{className:"text-[18px] font-[500] my-[8px]",children:(e==null?void 0:e.displayName)||"Guest"}),n?[...Array(3).keys()].map(()=>Gw):d.jsxs(d.Fragment,{children:[d.jsx(Ic,{className:R.linkItem,icon:d.jsx(rT,{className:R.icon}),label:"Theme",onClick:()=>I("theme")}),d.jsx(Ic,{className:R.linkItem,icon:d.jsx(nT,{className:R.icon}),label:"Info",onClick:()=>I("info")}),d.jsx(Ic,{className:R.linkItem,icon:d.jsx(GS,{className:R.icon}),label:"Logout",onClick:()=>I("confirm")})]})]}),x&&d.jsxs(jr,{theme:r,setOpenModal:v,children:[g.current==="confirm"&&d.jsx(Rv,{callback:T,loading:!1,theme:r,label:"Log out ?"}),g.current==="info"&&d.jsx(Tv,{setIsOpenModal:v}),g.current==="theme"&&d.jsx(Iv,{setIsOpenModal:v})]})]})}function e7(){const{theme:t}=ct(),{song:e}=st(rt),{userSongs:n}=fn(),[r,s]=h.useState(),[i,o]=h.useState({base:"",real_time:[]}),a=h.useRef(null),[l,c]=h.useState(!1),u=h.useRef(!0),{errorMsg:f,loading:p,initial:m}=Yf(),y=Or(),w=Bd(),x=h.useCallback(async g=>{try{if(g.lyric_id){c(!0);const E=(await ml({collection:"lyrics",id:g.lyric_id,msg:">>> api: get lyric doc"})).data();o(E)}}catch(_){console.log({message:_})}finally{c(!1)}},[]),v=h.useCallback(async()=>{if(console.log("get song"),e.name&&e.id===w.id)e.by==="admin"?y(Ce.Home):(s(e),await x(e));else{const g=n.find(_=>_.id===w.id);g?(s(g),await x(g)):y(Ce.Home)}},[e,n]);return h.useEffect(()=>{m&&u.current&&(r||v(),u.current=!1)},[m]),p||l?d.jsx("h1",{children:d.jsx(zd,{className:"w-[25px] animate-spin"})}):f?d.jsx("h1",{children:f}):d.jsxs("div",{className:"pb-[30px]",children:[d.jsx("audio",{ref:a,src:r==null?void 0:r.song_url,className:"hidden"}),r&&d.jsxs(d.Fragment,{children:[d.jsxs(Tn,{to:Ce.MySongs,className:`inline-flex text-[20px] font-bold mb-[14px] ${t.content_hover_text}`,children:[d.jsx(Cl,{className:"w-[25px]"}),d.jsx("span",{className:"ml-[12px]",children:r.name})]}),d.jsx(RC,{lyric:i,audioRef:a,theme:t,song:r})]})]})}function t7(){const{theme:t}=ct(),{userInfo:e}=Rn(),[n,r]=h.useState([]),[s,i]=h.useState([]),[o,a]=h.useState(!1),[l,c]=h.useState("songs"),[u,f]=h.useState(!1),[p,m]=h.useState(""),[y,w]=h.useState([]),[x,v]=h.useState("setting"),g=h.useRef(null),_=h.useRef(null),E=h.useRef(null),S=h.useRef(null),T=h.useRef(null),I=Or(),{addedSongIds:R,handleInputChange:C,status:b,tempSongs:A}=JA({audioRef:g,admin:!0,songs:n,setSongs:r,firstTempSong:S,testImageRef:T,inputRef:E}),D=h.useMemo(()=>u?0:A.length+n.length,[A,n]),L=async()=>{try{console.log("get songs"),f(!0);const P=Fi(Ms(Wn,"songs"),Ui("by","==","admin")),W=await Bi(P);if(W.docs){const J=W.docs.map(se=>({...se.data(),id:se.id}));r(J)}}catch(P){console.log(P),m("get users list error")}finally{f(!1)}},U=async()=>{console.log("get user");try{f(!0);const P=Fi(Ms(Wn,"users"),Ui("email","!=",e==null?void 0:e.email)),W=await Bi(P);if(W.docs){const J=W.docs.map(se=>se.data());console.log("get user",J),i(J)}}catch(P){console.log(P),m("get users list error")}finally{f(!1)}},Y=()=>y.length?w([]):w(n),z=async()=>{try{const P=[...n];f(!0);for(let W of y){await bf(W);const J=n.findIndex(se=>se.id===W.id);P.splice(J,1)}f(!1),r(P)}catch(P){console.log({message:P})}},ee=P=>{v(P),a(!0)},k=()=>n.map((P,W)=>{const J=y.length?y.some(se=>P.name===se.name):!1;return d.jsx(xp,{inProcess:!1,data:P,adminSongs:n,setAdminSongs:r,isChecked:J,selectedSongList:y,setSelectedSongList:w,theme:t},W)}),F=()=>A.map((P,W)=>{const J=R.some(se=>se===P.id);return W==0?d.jsx(xp,{ref:S,data:P,theme:t,inProcess:!J},W):d.jsx(xp,{data:P,theme:t,inProcess:!J},W)}),B=()=>s.map((P,W)=>d.jsxs("tr",{className:"",children:[d.jsx("td",{className:j.td,children:d.jsx("div",{className:"h-[44px] w-[44px] ml-[20px]",children:d.jsx(or,{classNames:"rounded-[4px]",src:P.photoURL})})}),d.jsx("td",{className:j.td,children:P.display_name}),d.jsx("td",{className:j.td,children:P.email}),d.jsx("td",{className:j.td,children:QU(P==null?void 0:P.latest_seen)})]},W)),M=h.useMemo(()=>rc({loading:u,label:`Delete '${y.length} songs'`,desc:"This action cannot be undone",theme:t,callback:z,setOpenModal:a}),[u,t,y]);h.useEffect(()=>{if(e.status==="loading")return;const P=async()=>{try{if((await ml({collection:"users",id:e==null?void 0:e.email})).data().role!=="admin")return I(Ce.Home)}catch(W){console.log(W)}};if(!e.email)return I(Ce.Home);P()},[e]),h.useEffect(()=>{e.status!=="loading"&&(l==="users"&&!s.length&&U(),l==="songs"&&!n.length&&L())},[l]);const j={inActiveBtn:`bg-${t.alpha}`,activeBtn:`${t.content_bg}`,td:`py-[10px] my-[10px] border-${t.alpha} border-b-[1px]`,th:"py-[5px]",tableContainer:`border border-${t.alpha} rounded-[4px]`,tableHeader:`border-b border-${t.alpha} ${t.side_bar_bg} flex items-center h-[50px] gap-[15px]`};return d.jsxs(d.Fragment,{children:[d.jsx("input",{onChange:C,type:"file",multiple:!0,accept:".mp3",id:"file",className:"hidden",ref:E}),d.jsx("img",{ref:T,className:"hidden"}),d.jsx("audio",{ref:g,className:"hidden"}),e.status!=="loading"&&d.jsxs("div",{className:"container mx-auto pt-[30px] pb-[60px]",children:[d.jsxs("div",{className:"mb-[20px]",children:[d.jsx(te,{onClick:()=>c("songs"),className:`${l==="songs"?j.activeBtn:j.inActiveBtn}  rounded-full`,variant:"primary",children:"Songs"}),d.jsx(te,{onClick:()=>c("users"),className:` ${l==="users"?j.activeBtn:j.inActiveBtn} rounded-full ml-[10px]`,variant:"primary",children:"Users"})]}),p&&d.jsx("p",{children:p}),d.jsxs("div",{className:j.tableContainer,children:[d.jsx("div",{className:j.tableHeader,children:y.length?d.jsxs(d.Fragment,{children:[d.jsxs("h2",{className:"ml-[20px]",children:[y.length," selected"]}),d.jsxs("div",{className:"flex items-stretch gap-[12px]",children:[d.jsx(te,{onClick:()=>ee("confirm"),variant:"primary",className:`${j.activeBtn} rounded-full`,children:"Delete"}),d.jsx(te,{onClick:()=>w([]),variant:"primary",className:`${j.activeBtn} rounded-full`,children:d.jsx(dr,{className:"w-[20px]"})})]})]}):d.jsx("label",{className:`${t.content_bg} ${b==="uploading"?"opacity-60 pointer-events-none":""} rounded-full ml-[auto] mr-[10px] px-[20px] py-[4px] cursor-pointer`,htmlFor:"file",children:"Upload"})}),l==="songs"&&d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:`${t.bottom_player_bg} w-full text-[14px]`,children:d.jsxs("tr",{children:[d.jsx("th",{className:`${j.th} w-[10%]`,children:d.jsx("input",{className:"scale-[1.2]",onChange:()=>Y(),ref:_,checked:n.length?n.length===y.length:!1,type:"checkbox"})}),d.jsx("th",{}),d.jsx("th",{className:`${j.th} text-left`,children:"Name"}),d.jsx("th",{className:`${j.th} text-left`,children:"Singer"}),d.jsx("th",{className:`${j.th} text-left`,children:"Action"})]})}),d.jsx("tbody",{children:D?d.jsxs(d.Fragment,{children:[!!n.length&&k(),!!A.length&&F()]}):u?d.jsx("tr",{children:d.jsx("td",{colSpan:5,className:`${j.td} text-center`,children:d.jsx("p",{children:"...Loading"})})}):d.jsx("tr",{children:d.jsx("td",{colSpan:5,className:`${j.td} text-center`,children:d.jsx("p",{children:"No song jet..."})})})})]}),l==="users"&&d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"text-[14px]",children:d.jsxs("tr",{children:[d.jsx("th",{}),d.jsx("th",{className:"text-left",children:"Name"}),d.jsx("th",{className:"text-left",children:"Email"}),d.jsx("th",{className:"text-left",children:"Latest Seen"})]})}),d.jsx("tbody",{children:B()})]})]})]}),o&&d.jsx(jr,{theme:t,setOpenModal:a,children:x==="confirm"&&M})]})}function n7(){const t=pn(),e=Bd(),{theme:n}=ct(),{userInfo:r}=Rn(),{setSuccessToast:s,setErrorToast:i}=$n(),{setActuallySongs:o}=Qf(),{userSongs:a,userPlaylists:l,setUserPlaylists:c,setUserSongs:u,adminSongs:f}=fn(),{song:p,playlist:m}=st(rt),[y,w]=h.useState(!1),x=h.useRef(!0),v=Or(),{playlistSongs:g,loading:_}=ZU({firstTimeRender:x,playlistInStore:m,songInStore:p}),{setPlaylistDocAndSetUserPlaylists:E}=yv(),[S,T]=h.useState(!1),[I,R]=h.useState(),[C,b]=h.useState([]),[A,D]=h.useState(!1),[L,U]=h.useState(m.name),Y=(ce,be)=>{if(p.id!==ce.id||!p.song_in.includes(m.name)){const re=m.by==="admin"?`admin-playlist-${m.name}`:`user-playlist-${m.name}`;t(rn({...ce,currentIndex:be,song_in:re})),p.song_in.includes(m.name)||o(g)}},z=()=>{const ce=g[0];p.song_in.includes(e.name)||Y(ce,0)},ee=h.useCallback(async ce=>{const be=[...g,...ce],re=[...a],q=[];for(let he of ce){const{error:De,newSong:ut}=PC(he,m);if(De){i({message:"handleSongWhenDeleteFromPlaylist error"});return}else ut&&(q.push(ut),Xr(ut,re))}const Q=_p({newPlaylistSongs:be,existingPlaylist:m});if(Q.count<0||Q.time<0||Q.song_ids.length===m.song_ids.length){i({message:"New playlist data error"});return}u(re),await E({newPlaylist:Q}),q.forEach(async he=>{await Et({collection:"songs",data:he,id:he.id})}),j(),s({message:`${ce.length} songs added`})},[C,S]),k=async ce=>{if(!m.song_ids){console.log("Wrong playlist data"),i({});return}const be=[...a],re=[...g],{error:q,newSong:Q}=_x(ce,m);if(q||!Q){i({message:"Handle song when delete from playlist error"});return}Xr(Q,be);const he=re.findIndex(ut=>ut.id===ce.id);re.splice(he,1);const De=_p({newPlaylistSongs:re,existingPlaylist:m});if(De.count<0||De.time<0||De.song_ids.length===m.song_ids.length){i({message:"New playlist data error"});return}u(be),await Et({collection:"songs",data:Q,id:Q.id}),await E({newPlaylist:De}),s({message:`'${ce.name}' removed`})},F=async()=>{if(!m.song_ids){console.log("Wrong playlist data"),i({});return}if(C.length===1)return k(C[0]);const ce=[...g],be=[...a],re=[];for(let Q of C){const he=ce.findIndex(ue=>ue.id===Q.id);ce.splice(he,1);const{error:De,newSong:ut}=_x(Q,m);De?i({message:"handleSongWhenDeleteFromPlaylist error"}):ut&&(re.push(ut),Xr(ut,be))}const q=_p({newPlaylistSongs:ce,existingPlaylist:m});if(q.count<0||q.time<0||q.song_ids.length===m.song_ids.length){i({message:"New playlist data error"});return}u(be),re.forEach(async Q=>{console.log("update doc",Q.name)}),await E({newPlaylist:q}),s({message:`${C.length} songs removed`})},B=async()=>{try{w(!0);const ce=[...l];let be=[],re=[];if(g.length){re=[...a];const{error:Q,songsNeedToUpdate:he}=W8(m,g);if(Q){j(),console.log("Song error when handle delete playlist"),i({});return}be=he}if(be.length)for(let Q of be)Xr(Q,re),await Et({collection:"songs",data:Q,id:Q.id});const q=ce.findIndex(Q=>Q.id===m.id);ce.splice(q,1),c(ce,[]),be.length&&u(re),await lg({collection:"playlist",id:m.id,msg:">>> api: delete playlist doc"}),await K0(ce,r),w(!1),T(!1),t(Eo({id:"",name:"",song_ids:[],time:0,count:0,by:"",image_by:"",image_file_path:"",image_url:"",blurhash_encode:""})),s({message:`${m.name} deleted`}),v(`${Ce.Playlist}`)}catch(ce){console.log(ce),i({})}},M=ce=>{R(ce),T(!0)},j=()=>{w(!1),T(!1),D(!1),b([])},P=h.useMemo(()=>g.length,[g]),W=h.useMemo(()=>window.innerWidth<800,[]),J={addSongContainer:"pb-[50px] relative",addSongContent:"max-h-[calc(90vh-50px)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full max-[549px]:w-full",editContainer:"w-[700px] max-w-[90vw] max-h-[90vh]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full",button:`${n.content_bg} rounded-full`,playListTop:"w-full flex max-[549px]:flex-col max-[549px]:gap-[12px]",playlistInfoContainer:"ml-[15px] flex flex-col justify-between max-[549px]:ml-0 max-[549px]:mb-[30px] max-[549px]:gap-[12px]",songListContainer:"h-[50px] mb-[10px] flex gap-[20px] max-[549px]:gap-[12px] items-center border-b",countSongText:"text-[14px]] font-semibold text-gray-500 w-[100px]",buttonAddSongContainer:"w-full text-center mt-[30px]"},se=h.useMemo(()=>g.map((ce,be)=>{const re=ce.id===p.id&&p.song_in.includes(m.name);return W?d.jsx("div",{className:"w-full max-[549px]:w-full",children:d.jsx(kl,{theme:n,onClick:()=>Y(ce,be),active:re,data:ce,isCheckedSong:A,selectedSongList:C,setIsCheckedSong:D,setSelectedSongList:b},be)},be):d.jsx("div",{className:"w-full max-[549px]:w-full",children:d.jsx(Ca,{isCheckedSong:A&&!S,setIsCheckedSong:D,selectedSongList:C,setSelectedSongList:b,deleteFromPlaylist:k,userInfo:r,userSongs:a,setUserSongs:u,onClick:()=>Y(ce,be),theme:n,active:re,data:ce,inPlaylist:!0})},be)}),[m.name,p,g,A,C]),ae=d.jsxs("div",{className:J.editContainer,children:[d.jsx("label",{htmlFor:"",className:"text-[18px] font-semibold",children:"Name:"}),d.jsx("input",{value:L,onChange:ce=>U(ce.target.value),type:"text",className:`${J.input} bg-${n.alpha} ${n.type==="light"?"text-[#333]":"text-white"}`}),d.jsx(te,{variant:"primary",className:`${n.content_bg} rounded-full self-end mt-[15px]`,children:"Save"})]}),Z=h.useMemo(()=>rc({loading:y,label:"Delete playlist ?",theme:n,callback:B,setOpenModal:T}),[y,n]),me=d.jsxs("div",{className:"flex max-[549px]:flex-col max-[549px]:gap-[12px]",children:[d.jsx("div",{className:"w-1/4 max-[549px]:w-full max-[549px]:px-[20px]",children:d.jsx(Ve,{className:"pt-[100%] rounded-[8px]"})}),d.jsxs("div",{className:"min-[550px]:ml-[15px] max-[549px]:flex max-[549px]:mb-[30px] justify-between",children:[d.jsx(Ve,{className:"h-[30px]  w-[100px]"}),d.jsx(Ve,{className:"h-[20px] mt-[9px] w-[100px]"}),!W&&d.jsxs(d.Fragment,{children:[d.jsx(Ve,{className:"h-[20px] mt-[9px] w-[100px]"}),d.jsx(Ve,{className:"h-[15px] mt-[9px] w-[200px]"})]})]})]}),Jt=[...Array(4).keys()].map(ce=>d.jsxs("div",{className:"flex p-[10px]",children:[d.jsx(Ve,{className:"h-[54px] w-[54px] ml-[33px] rounded-[4px]"}),d.jsxs("div",{className:"ml-[10px]",children:[d.jsx(Ve,{className:"h-[20px] mb-[5px] w-[150px]"}),d.jsx(Ve,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},ce));return d.jsxs(d.Fragment,{children:[W&&d.jsxs(Tn,{to:Ce.MySongs,className:"inline-flex items-center mb-[30px] hover:opacity-75",children:[d.jsx(Cl,{className:"w-[25px]"}),d.jsx("span",{className:"text-[20px] font-semibold leading-1",children:"My songs"})]}),_&&me,!_&&!!m.name&&d.jsxs("div",{className:J.playListTop,children:[d.jsx("div",{className:"w-1/4 max-[549px]:w-full max-[549px]:px-[20px]",children:d.jsx(Tg,{data:m,inDetail:!0,theme:n})}),d.jsx("div",{className:J.playlistInfoContainer,children:d.jsxs("div",{className:"max-[549px]:flex justify-between items-center gap-[12px]",children:[d.jsxs("h3",{className:"text-[20px] font-semibold max-[549px]:text-[30px] leading-1",children:[m.name,d.jsx("button",{onClick:()=>M("edit"),className:"p-[5px]",children:d.jsx(Sy,{className:"w-[20px]"})})]}),d.jsx("p",{className:"text-[16px]",children:hd(m==null?void 0:m.time)}),d.jsxs("p",{className:"text-[14px] opacity-60 max-[549px]:hidden",children:["create by ",m.by]})]})})]}),d.jsxs("div",{className:"flex items-center mt-[15px] gap-[12px] max-[549px]:justify-center",children:[d.jsxs(te,{onClick:()=>z(),className:`rounded-full px-[20px] py-[6px] ${n.content_bg} ${!m.song_ids.length&&"opacity-60 pointer-events-none"}`,children:["Play",d.jsx(LO,{className:"ml-[5px] w-[25px]"})]}),d.jsx(te,{onClick:()=>M("confirm"),className:`p-[8px] rounded-full ${n.content_hover_bg} bg-${n.alpha}`,children:d.jsx(Ty,{className:"w-[25px]"})})]}),d.jsxs("div",{className:"pb-[50px]",children:[d.jsxs("div",{className:`${J.songListContainer} border-${n.alpha}`,children:[_&&d.jsx(Ve,{className:"h-[20px] w-[150px]"}),A?d.jsx("p",{className:J.countSongText,children:C.length+" selected"}):d.jsx("p",{className:J.countSongText,children:P+" songs"}),A&&a.length&&d.jsxs(d.Fragment,{children:[d.jsx(te,{onClick:()=>b(g),variant:"primary",className:J.button,children:"All"}),d.jsx(te,{onClick:()=>F(),variant:"primary",className:J.button,children:"Remove"}),d.jsx(te,{onClick:()=>{D(!1),b([])},className:"p-[5px]",children:d.jsx(dr,{className:"w-[20px]"})})]})]}),_&&Jt,!_&&!!g.length&&se,(!!a.length||!!f.length)&&d.jsx("div",{className:J.buttonAddSongContainer,children:d.jsxs(te,{onClick:()=>M("addSongs"),className:`${n.content_bg} rounded-full`,variant:"primary",children:[d.jsx(Qa,{className:"w-[30px] mr-[5px]"}),"Add song"]})})]}),S&&d.jsxs(jr,{theme:n,setOpenModal:j,children:[I==="edit"&&ae,I==="confirm"&&Z,I==="addSongs"&&d.jsx(A5,{theme:n,handleAddSongsToPlaylist:ee,playlistSongs:g})]})]})}function r7(){const t=pn(),{theme:e}=ct(),{userInfo:n}=Rn(),{setErrorToast:r,setSuccessToast:s}=$n(),{loading:i,errorMsg:o,initial:a}=Yf(),{song:l,playlist:c}=st(rt),{userPlaylists:u,setUserSongs:f,setUserPlaylists:p,userSongs:m}=fn(),y=yv(),[w,x]=h.useState(!1),[v,g]=h.useState(!1),[_,E]=h.useState("ADD_PLAYLIST"),[S,T]=h.useState(""),I=h.useRef(null),R=h.useRef(null),C=h.useRef(null),[b,A]=h.useState([]),[D,L]=h.useState(!1),U=h.useRef(null),Y=Or(),{tempSongs:z,addedSongIds:ee,status:k,handleInputChange:F}=JA({audioRef:U,firstTempSong:R,testImageRef:C,inputRef:I}),B=q=>{E(q),g(!0)},M=(q,Q)=>{(l.id!==q.id||l.song_in!=="user")&&(console.log("set song"),t(rn({...q,currentIndex:Q,song_in:"user"})))},j=h.useMemo(()=>i||!a?0:z.length+m.length,[z,m,a,i]),P=h.useMemo(()=>window.innerWidth<800,[]),W=()=>{A([]),L(!1)},J=()=>{x(!1),g(!1)},se=async()=>{let q=!1;const Q=[...m],he=[...u];try{x(!0);const De=[];for(let ue of b){if(ue.in_playlist.length){q=!0;const{error:ie}=B8(ue,De,he);if(ie){x(!1),J(),r({message:"Error when handle playlist"});return}}const uh=Q.findIndex(ie=>ie.id===ue.id);Q.splice(uh,1)}for(let ue of De)nc(ue,he),ue.id===c.id&&t(Eo(ue)),await Et({collection:"playlist",data:ue,id:ue.id});q&&p(he,[]),f(Q);for(let ue of b)await bf(ue);const ut=Q.map(ue=>ue.id);qb({songIds:ut,userInfo:n}),W(),J(),s({message:`${b.length} songs deleted`})}catch{r({message:"Catch error"})}},ae=async()=>{const q=GA(S)+n.email.replace("@gmail.com","");if(!q||!S||!n){r({message:"Add playlist lack of props"});return}const Q={id:q,image_by:"",image_file_path:"",image_url:"",by:(n==null?void 0:n.email)||"users",name:S,song_ids:[],count:0,time:0,blurhash_encode:""},he=[...u,Q];try{x(!0),await Et({collection:"playlist",data:Q,id:q}),await K0(he,n),p(he,[]),J(),T(""),s({message:`'${S}' created`})}catch{r({message:"Add playlist catch error"})}},Z={button:`${e.content_bg} rounded-full`,songItemContainer:`w-full border-b border-${e.alpha}`},me=h.useMemo(()=>{if(z.length)return z.map((q,Q)=>{const he=ee.some(De=>De===q.id);return Q==0&&!R.current?d.jsx(Ca,{theme:e,onClick:()=>M(q,Q),inProcess:!he,data:q},Q):d.jsx(Ca,{theme:e,onClick:()=>M(q,Q),inProcess:!he,data:q},Q)})},[z,ee,e]),Jt=h.useMemo(()=>{if(m.length)return m.map((q,Q)=>{const he=q.id===l.id&&l.song_in==="user"&&q.singer===l.singer;return P?d.jsx(kl,{theme:e,onClick:()=>M(q,Q),active:he,data:q,isCheckedSong:D,selectedSongList:b,setIsCheckedSong:L,setSelectedSongList:A},Q):d.jsx("div",{className:Z.songItemContainer,children:d.jsx(Ca,{theme:e,onClick:()=>M(q,Q),active:he,data:q,userInfo:n,userSongs:m,userPlaylists:u,setUserSongs:f,setUserPlaylists:p,isCheckedSong:D,setIsCheckedSong:L,selectedSongList:b,setSelectedSongList:A,handleOpenParentModal:B,songItemActions:y},Q)},Q)})},[e,n,m,l,b,D,u]),ce=h.useMemo(()=>rc({loading:w,label:"Wait a minute",theme:e,callback:se,setOpenModal:g}),[w,e,b]),re={ADD_PLAYLIST:d.jsxs("div",{className:"w-[300px]",children:[d.jsx(te,{className:"absolute top-2 right-2",onClick:()=>g(!1),children:d.jsx(dr,{className:"w-6 h-6"})}),d.jsx("h2",{className:"text-[18px] font-semibold",children:"Add Playlist"}),d.jsx("input",{className:`bg-${e.alpha} px-[20px] rounded-full outline-none mt-[10px] text-[16px]  h-[35px] w-full`,type:"text",placeholder:"name...",value:S,onChange:q=>T(q.target.value)}),d.jsx(te,{isLoading:w,onClick:()=>ae(),variant:"primary",className:`${Z.button} mt-[15px]`,children:"Save"})]}),CONFIRM:ce};return h.useEffect(()=>{n.status!=="loading"&&(n.email||(Y(Ce.Home),console.log(">>> navigate to home")))},[n,a]),o?d.jsx("h1",{children:o}):d.jsxs(d.Fragment,{children:[d.jsx("img",{className:"hidden",ref:C}),d.jsxs("div",{className:"pb-[30px] ",children:[P&&d.jsxs(Tn,{to:Ce.Home,className:"inline-flex items-center mb-[30px] hover:opacity-75",children:[d.jsx(Cl,{className:"w-[25px]"}),d.jsx("span",{className:"text-[20px] font-semibold leading-1",children:"Home"})]}),d.jsx("h3",{className:"text-2xl font-bold mb-[10px]",children:"Playlist"}),d.jsxs("div",{className:"flex flex-row flex-wrap",children:[!!u.length&&!i&&u.map((q,Q)=>d.jsx("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:P?d.jsx(Tn,{to:`${Ce.Playlist}/${q.id}`,children:d.jsx(Tg,{data:q})}):d.jsx(Tg,{theme:e,data:q})},Q)),!i&&d.jsx("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2 mb-[25px]",children:d.jsx(S5,{theme:e,className:"pt-[100%]",onClick:()=>B("ADD_PLAYLIST")})}),i&&d5]})]}),d.jsxs("div",{className:"pb-[30px] max-[549px]:pb-[80px]",children:[d.jsxs("div",{className:"flex justify-between mb-[10px]",children:[d.jsx("h3",{className:"text-2xl font-bold",children:"Songs"}),d.jsx("input",{ref:I,onChange:F,type:"file",multiple:!0,accept:".mp3",id:"file",className:"hidden"}),d.jsx("audio",{ref:U,className:"hidden"}),d.jsx("div",{className:"flex items-center",children:d.jsxs("label",{className:`${e.content_bg} ${k==="uploading"||i?"opacity-60 pointer-events-none":""} rounded-full flex px-[20px] py-[4px] cursor-pointer`,htmlFor:"file",children:[d.jsx(Qa,{className:"w-[20px] mr-[5px]"}),"Upload"]})})]}),d.jsxs("div",{className:`flex gap-[12px] items-center border-b border-${e.alpha} h-[50px] mb-[10px]`,children:[i&&d.jsx(Ve,{className:"h-[20px] w-[150px]"}),!i&&d.jsx(d.Fragment,{children:D?d.jsx("p",{className:"text-[14px]] font-semibold text-gray-500 w-[100px]",children:b.length+" selected"}):d.jsx("p",{className:"text-[14px]] font-semibold text-gray-500 w-[100px]",children:(j||0)+" songs"})}),D&&m.length&&d.jsxs(d.Fragment,{children:[d.jsx(te,{onClick:()=>A(m),variant:"primary",className:Z.button,children:"All"}),d.jsx(te,{onClick:()=>B("CONFIRM"),variant:"primary",className:Z.button,children:"Delete"}),d.jsx(te,{onClick:()=>{L(!1),A([])},className:"px-[5px]",children:d.jsx(dr,{className:"w-[25px]"})})]})]}),d.jsxs("div",{className:"min-h-[50vh]",children:[j&&!i?d.jsxs(d.Fragment,{children:[!!m.length&&Jt,!!z.length&&me]}):!i&&d.jsx("p",{children:"No songs jet..."}),i&&aT]})]}),v&&d.jsx(jr,{theme:e,setOpenModal:g,children:re[_]})]})}function s7(){const{theme:t}=ct(),{userInfo:e}=Rn(),[n,r]=h.useState(),[s,i]=h.useState({base:"",real_time:[]}),o=h.useRef(null),a=Bd(),l=Or();return h.useEffect(()=>{if(e.status==="loading")return;if(!e.email){l(Ce.Home);return}(async()=>{try{const u=await ml({collection:"songs",id:a==null?void 0:a.id,msg:">>> api: get song doc"}),f=u.data();if(f.lyric_id){const m=(await ml({collection:"lyrics",id:f.lyric_id})).data();i(m)}r({...f,id:u.id})}catch(u){console.log({message:u})}})()},[]),d.jsxs("div",{className:"container mx-auto pt-[30px]",children:[d.jsx("audio",{ref:o,src:n&&n.song_url,className:"hidden"}),n&&d.jsxs(d.Fragment,{children:[d.jsxs(Tn,{to:Ce.Dashboard,className:`inline-flex text-[20px] font-bold mb-[14px] ${t.content_hover_text}`,children:[d.jsx(Cl,{className:"w-[25px]"}),d.jsx("span",{className:"ml-[12px]",children:n.name})]}),d.jsx(RC,{lyric:s,audioRef:o,theme:t,song:n})]})]})}const Ce={Home:"/",Dashboard:"/dashboard",DashboardEdit:"/dashboard/edit/:id",MySongs:"/mysongs",MobileMySongs:"/mobile-mysongs",Playlist:"/mysongs/playlist",Edit:"/mysongs/edit/:id"},i7=[{path:Ce.Home,component:Z8,layout:""},{path:Ce.Dashboard,component:t7,layout:Ex},{path:Ce.MySongs,component:r7,layout:""},{path:`${Ce.Playlist}/:id`,component:n7,layout:""},{path:Ce.Edit,component:e7,layout:""},{path:Ce.DashboardEdit,component:s7,layout:Ex}],o7=({children:t})=>{const{theme:e}=ct(),n=Cs(),s={container:`w-full overflow-y-auto overflow-x-hidden ${h.useMemo(()=>n.pathname.includes("edit"),[n])?"h-[100vh]":"h-[calc(100vh)] pb-[90px]"} max-[549px]:h-full max-[549px]:pb-[70px]`,content:"px-[40px] max-[549px]:px-[15px]",page:`min-h-screen flex overflow-hidden ${e.type==="dark"?"text-white":"text-[#333]"} ${e.container}`};return h.useMemo(()=>d.jsxs("div",{className:s.page,children:[window.innerWidth>=800&&d.jsx(U8,{}),d.jsxs("div",{className:s.container,children:[d.jsx("div",{className:"h-[100px]"}),d.jsx("div",{className:s.content,children:t})]}),d.jsx(F8,{})]}),[e,n])};function a7(){return d.jsxs(d.Fragment,{children:[d.jsx(eN,{basename:"React-Zingmp3",children:d.jsx(GP,{children:i7.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=o7,d.jsx(qS,{path:t.path,element:d.jsx(n,{children:d.jsx(r,{})})},e)})})}),d.jsx(K8,{autoClose:!0})]})}const l7=l9({reducer:{song:w9}});Cp.createRoot(document.getElementById("root")).render(d.jsx(Nx.StrictMode,{children:d.jsx(_6,{children:d.jsx(u5,{theme:iT,children:d.jsx(b5,{songsStore:Iy,children:d.jsx(a6,{store:l7,children:d.jsx(S6,{children:d.jsx(f6,{children:d.jsx(oB,{children:d.jsx(a7,{})})})})})})})})}));
