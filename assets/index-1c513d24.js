function tN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Hb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qb={exports:{}},rf={},Gb={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lc=Symbol.for("react.element"),nN=Symbol.for("react.portal"),rN=Symbol.for("react.fragment"),iN=Symbol.for("react.strict_mode"),sN=Symbol.for("react.profiler"),oN=Symbol.for("react.provider"),aN=Symbol.for("react.context"),lN=Symbol.for("react.forward_ref"),cN=Symbol.for("react.suspense"),uN=Symbol.for("react.memo"),dN=Symbol.for("react.lazy"),iw=Symbol.iterator;function hN(t){return t===null||typeof t!="object"?null:(t=iw&&t[iw]||t["@@iterator"],typeof t=="function"?t:null)}var Kb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xb=Object.assign,Qb={};function Da(t,e,n){this.props=t,this.context=e,this.refs=Qb,this.updater=n||Kb}Da.prototype.isReactComponent={};Da.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Da.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Yb(){}Yb.prototype=Da.prototype;function My(t,e,n){this.props=t,this.context=e,this.refs=Qb,this.updater=n||Kb}var Ly=My.prototype=new Yb;Ly.constructor=My;Xb(Ly,Da.prototype);Ly.isPureReactComponent=!0;var sw=Array.isArray,Jb=Object.prototype.hasOwnProperty,Fy={current:null},Zb={key:!0,ref:!0,__self:!0,__source:!0};function ek(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Jb.call(e,r)&&!Zb.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Lc,type:t,key:s,ref:o,props:i,_owner:Fy.current}}function fN(t,e){return{$$typeof:Lc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $y(t){return typeof t=="object"&&t!==null&&t.$$typeof===Lc}function mN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ow=/\/+/g;function Gm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mN(""+t.key):e.toString(36)}function ad(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Lc:case nN:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Gm(o,0):r,sw(i)?(n="",t!=null&&(n=t.replace(ow,"$&/")+"/"),ad(i,e,n,"",function(c){return c})):i!=null&&($y(i)&&(i=fN(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ow,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",sw(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Gm(s,a);o+=ad(s,e,n,l,i)}else if(l=hN(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Gm(s,a++),o+=ad(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function xu(t,e,n){if(t==null)return t;var r=[],i=0;return ad(t,r,"","",function(s){return e.call(n,s,i++)}),r}function pN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rn={current:null},ld={transition:null},gN={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:ld,ReactCurrentOwner:Fy};ve.Children={map:xu,forEach:function(t,e,n){xu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return xu(t,function(){e++}),e},toArray:function(t){return xu(t,function(e){return e})||[]},only:function(t){if(!$y(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=Da;ve.Fragment=rN;ve.Profiler=sN;ve.PureComponent=My;ve.StrictMode=iN;ve.Suspense=cN;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gN;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Xb({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Fy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Jb.call(e,l)&&!Zb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Lc,type:t.type,key:i,ref:s,props:r,_owner:o}};ve.createContext=function(t){return t={$$typeof:aN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:oN,_context:t},t.Consumer=t};ve.createElement=ek;ve.createFactory=function(t){var e=ek.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:lN,render:t}};ve.isValidElement=$y;ve.lazy=function(t){return{$$typeof:dN,_payload:{_status:-1,_result:t},_init:pN}};ve.memo=function(t,e){return{$$typeof:uN,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=ld.transition;ld.transition={};try{t()}finally{ld.transition=e}};ve.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ve.useCallback=function(t,e){return rn.current.useCallback(t,e)};ve.useContext=function(t){return rn.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return rn.current.useDeferredValue(t)};ve.useEffect=function(t,e){return rn.current.useEffect(t,e)};ve.useId=function(){return rn.current.useId()};ve.useImperativeHandle=function(t,e,n){return rn.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return rn.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return rn.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return rn.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return rn.current.useReducer(t,e,n)};ve.useRef=function(t){return rn.current.useRef(t)};ve.useState=function(t){return rn.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return rn.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return rn.current.useTransition()};ve.version="18.2.0";Gb.exports=ve;var f=Gb.exports;const tk=Hb(f),zy=tN({__proto__:null,default:tk},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yN=f,vN=Symbol.for("react.element"),xN=Symbol.for("react.fragment"),wN=Object.prototype.hasOwnProperty,_N=yN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,EN={key:!0,ref:!0,__self:!0,__source:!0};function nk(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)wN.call(e,r)&&!EN.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:vN,type:t,key:s,ref:o,props:i,_owner:_N.current}}rf.Fragment=xN;rf.jsx=nk;rf.jsxs=nk;qb.exports=rf;var u=qb.exports;var kg={},rk={exports:{}},Dn={},ik={exports:{}},sk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(C,$){var q=C.length;C.push($);e:for(;0<q;){var D=q-1>>>1,G=C[D];if(0<i(G,$))C[D]=$,C[q]=G,q=D;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var $=C[0],q=C.pop();if(q!==$){C[0]=q;e:for(var D=0,G=C.length,Z=G>>>1;D<Z;){var ie=2*(D+1)-1,ae=C[ie],ge=ie+1,he=C[ge];if(0>i(ae,q))ge<G&&0>i(he,ae)?(C[D]=he,C[ge]=q,D=ge):(C[D]=ae,C[ie]=q,D=ie);else if(ge<G&&0>i(he,q))C[D]=he,C[ge]=q,D=ge;else break e}}return $}function i(C,$){var q=C.sortIndex-$.sortIndex;return q!==0?q:C.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,m=3,p=!1,y=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(C){for(var $=n(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=C)r(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function E(C){if(x=!1,w(C),!y)if(n(l)!==null)y=!0,K(S);else{var $=n(c);$!==null&&de(E,$.startTime-C)}}function S(C,$){y=!1,x&&(x=!1,v(b),b=-1),p=!0;var q=m;try{for(w($),h=n(l);h!==null&&(!(h.expirationTime>$)||C&&!O());){var D=h.callback;if(typeof D=="function"){h.callback=null,m=h.priorityLevel;var G=D(h.expirationTime<=$);$=t.unstable_now(),typeof G=="function"?h.callback=G:h===n(l)&&r(l),w($)}else r(l);h=n(l)}if(h!==null)var Z=!0;else{var ie=n(c);ie!==null&&de(E,ie.startTime-$),Z=!1}return Z}finally{h=null,m=q,p=!1}}var T=!1,k=null,b=-1,P=5,I=-1;function O(){return!(t.unstable_now()-I<P)}function V(){if(k!==null){var C=t.unstable_now();I=C;var $=!0;try{$=k(!0,C)}finally{$?F():(T=!1,k=null)}}else T=!1}var F;if(typeof g=="function")F=function(){g(V)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,H=z.port2;z.port1.onmessage=V,F=function(){H.postMessage(null)}}else F=function(){_(V,0)};function K(C){k=C,T||(T=!0,F())}function de(C,$){b=_(function(){C(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,K(S))},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(C){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var q=m;m=$;try{return C()}finally{m=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(C,$){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var q=m;m=C;try{return $()}finally{m=q}},t.unstable_scheduleCallback=function(C,$,q){var D=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?D+q:D):q=D,C){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=q+G,C={id:d++,callback:$,priorityLevel:C,startTime:q,expirationTime:G,sortIndex:-1},q>D?(C.sortIndex=q,e(c,C),n(l)===null&&C===n(c)&&(x?(v(b),b=-1):x=!0,de(E,q-D))):(C.sortIndex=G,e(l,C),y||p||(y=!0,K(S))),C},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(C){var $=m;return function(){var q=m;m=$;try{return C.apply(this,arguments)}finally{m=q}}}})(sk);ik.exports=sk;var SN=ik.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ok=f,An=SN;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ak=new Set,Bl={};function co(t,e){ca(t,e),ca(t+"Capture",e)}function ca(t,e){for(Bl[t]=e,t=0;t<e.length;t++)ak.add(e[t])}var ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tg=Object.prototype.hasOwnProperty,bN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,aw={},lw={};function kN(t){return Tg.call(lw,t)?!0:Tg.call(aw,t)?!1:bN.test(t)?lw[t]=!0:(aw[t]=!0,!1)}function TN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function IN(t,e,n,r){if(e===null||typeof e>"u"||TN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Nt[t]=new sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Nt[e]=new sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Nt[t]=new sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Nt[t]=new sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Nt[t]=new sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Nt[t]=new sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Nt[t]=new sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Nt[t]=new sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Nt[t]=new sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var By=/[\-:]([a-z])/g;function Vy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(By,Vy);Nt[e]=new sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(By,Vy);Nt[e]=new sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(By,Vy);Nt[e]=new sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Nt[t]=new sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Nt.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Nt[t]=new sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Uy(t,e,n,r){var i=Nt.hasOwnProperty(e)?Nt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(IN(e,n,i,r)&&(n=null),r||i===null?kN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var mi=ok.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wu=Symbol.for("react.element"),Do=Symbol.for("react.portal"),jo=Symbol.for("react.fragment"),Wy=Symbol.for("react.strict_mode"),Ig=Symbol.for("react.profiler"),lk=Symbol.for("react.provider"),ck=Symbol.for("react.context"),Hy=Symbol.for("react.forward_ref"),Cg=Symbol.for("react.suspense"),Ag=Symbol.for("react.suspense_list"),qy=Symbol.for("react.memo"),bi=Symbol.for("react.lazy"),uk=Symbol.for("react.offscreen"),cw=Symbol.iterator;function Ya(t){return t===null||typeof t!="object"?null:(t=cw&&t[cw]||t["@@iterator"],typeof t=="function"?t:null)}var qe=Object.assign,Km;function dl(t){if(Km===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Km=e&&e[1]||""}return`
`+Km+t}var Xm=!1;function Qm(t,e){if(!t||Xm)return"";Xm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Xm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?dl(t):""}function CN(t){switch(t.tag){case 5:return dl(t.type);case 16:return dl("Lazy");case 13:return dl("Suspense");case 19:return dl("SuspenseList");case 0:case 2:case 15:return t=Qm(t.type,!1),t;case 11:return t=Qm(t.type.render,!1),t;case 1:return t=Qm(t.type,!0),t;default:return""}}function Rg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case jo:return"Fragment";case Do:return"Portal";case Ig:return"Profiler";case Wy:return"StrictMode";case Cg:return"Suspense";case Ag:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ck:return(t.displayName||"Context")+".Consumer";case lk:return(t._context.displayName||"Context")+".Provider";case Hy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qy:return e=t.displayName||null,e!==null?e:Rg(t.type)||"Memo";case bi:e=t._payload,t=t._init;try{return Rg(t(e))}catch{}}return null}function AN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rg(e);case 8:return e===Wy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RN(t){var e=dk(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _u(t){t._valueTracker||(t._valueTracker=RN(t))}function hk(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=dk(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Dd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pg(t,e){var n=e.checked;return qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function uw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fk(t,e){e=e.checked,e!=null&&Uy(t,"checked",e,!1)}function Ng(t,e){fk(t,e);var n=Zi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Dg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Dg(t,e.type,Zi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function dw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Dg(t,e,n){(e!=="number"||Dd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var hl=Array.isArray;function Ko(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function jg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(hl(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zi(n)}}function mk(t,e){var n=Zi(e.value),r=Zi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function fw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function pk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Og(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?pk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Eu,gk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Eu=Eu||document.createElement("div"),Eu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Eu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Vl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var El={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PN=["Webkit","ms","Moz","O"];Object.keys(El).forEach(function(t){PN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),El[e]=El[t]})});function yk(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||El.hasOwnProperty(t)&&El[t]?(""+e).trim():e+"px"}function vk(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=yk(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var NN=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mg(t,e){if(e){if(NN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function Lg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fg=null;function Gy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $g=null,Xo=null,Qo=null;function mw(t){if(t=zc(t)){if(typeof $g!="function")throw Error(M(280));var e=t.stateNode;e&&(e=cf(e),$g(t.stateNode,t.type,e))}}function xk(t){Xo?Qo?Qo.push(t):Qo=[t]:Xo=t}function wk(){if(Xo){var t=Xo,e=Qo;if(Qo=Xo=null,mw(t),e)for(t=0;t<e.length;t++)mw(e[t])}}function _k(t,e){return t(e)}function Ek(){}var Ym=!1;function Sk(t,e,n){if(Ym)return t(e,n);Ym=!0;try{return _k(t,e,n)}finally{Ym=!1,(Xo!==null||Qo!==null)&&(Ek(),wk())}}function Ul(t,e){var n=t.stateNode;if(n===null)return null;var r=cf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var zg=!1;if(ii)try{var Ja={};Object.defineProperty(Ja,"passive",{get:function(){zg=!0}}),window.addEventListener("test",Ja,Ja),window.removeEventListener("test",Ja,Ja)}catch{zg=!1}function DN(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Sl=!1,jd=null,Od=!1,Bg=null,jN={onError:function(t){Sl=!0,jd=t}};function ON(t,e,n,r,i,s,o,a,l){Sl=!1,jd=null,DN.apply(jN,arguments)}function MN(t,e,n,r,i,s,o,a,l){if(ON.apply(this,arguments),Sl){if(Sl){var c=jd;Sl=!1,jd=null}else throw Error(M(198));Od||(Od=!0,Bg=c)}}function uo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function pw(t){if(uo(t)!==t)throw Error(M(188))}function LN(t){var e=t.alternate;if(!e){if(e=uo(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return pw(i),t;if(s===r)return pw(i),e;s=s.sibling}throw Error(M(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function kk(t){return t=LN(t),t!==null?Tk(t):null}function Tk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Tk(t);if(e!==null)return e;t=t.sibling}return null}var Ik=An.unstable_scheduleCallback,gw=An.unstable_cancelCallback,FN=An.unstable_shouldYield,$N=An.unstable_requestPaint,tt=An.unstable_now,zN=An.unstable_getCurrentPriorityLevel,Ky=An.unstable_ImmediatePriority,Ck=An.unstable_UserBlockingPriority,Md=An.unstable_NormalPriority,BN=An.unstable_LowPriority,Ak=An.unstable_IdlePriority,sf=null,Ir=null;function VN(t){if(Ir&&typeof Ir.onCommitFiberRoot=="function")try{Ir.onCommitFiberRoot(sf,t,void 0,(t.current.flags&128)===128)}catch{}}var ar=Math.clz32?Math.clz32:HN,UN=Math.log,WN=Math.LN2;function HN(t){return t>>>=0,t===0?32:31-(UN(t)/WN|0)|0}var Su=64,bu=4194304;function fl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ld(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=fl(a):(s&=o,s!==0&&(r=fl(s)))}else o=n&~i,o!==0?r=fl(o):s!==0&&(r=fl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ar(e),i=1<<n,r|=t[n],e&=~i;return r}function qN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ar(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=qN(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Vg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Rk(){var t=Su;return Su<<=1,!(Su&4194240)&&(Su=64),t}function Jm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ar(e),t[e]=n}function KN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ar(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Xy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ar(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ie=0;function Pk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Nk,Qy,Dk,jk,Ok,Ug=!1,ku=[],$i=null,zi=null,Bi=null,Wl=new Map,Hl=new Map,Ti=[],XN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yw(t,e){switch(t){case"focusin":case"focusout":$i=null;break;case"dragenter":case"dragleave":zi=null;break;case"mouseover":case"mouseout":Bi=null;break;case"pointerover":case"pointerout":Wl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hl.delete(e.pointerId)}}function Za(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=zc(e),e!==null&&Qy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function QN(t,e,n,r,i){switch(e){case"focusin":return $i=Za($i,t,e,n,r,i),!0;case"dragenter":return zi=Za(zi,t,e,n,r,i),!0;case"mouseover":return Bi=Za(Bi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Wl.set(s,Za(Wl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Hl.set(s,Za(Hl.get(s)||null,t,e,n,r,i)),!0}return!1}function Mk(t){var e=Cs(t.target);if(e!==null){var n=uo(e);if(n!==null){if(e=n.tag,e===13){if(e=bk(n),e!==null){t.blockedOn=e,Ok(t.priority,function(){Dk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function cd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Wg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Fg=r,n.target.dispatchEvent(r),Fg=null}else return e=zc(n),e!==null&&Qy(e),t.blockedOn=n,!1;e.shift()}return!0}function vw(t,e,n){cd(t)&&n.delete(e)}function YN(){Ug=!1,$i!==null&&cd($i)&&($i=null),zi!==null&&cd(zi)&&(zi=null),Bi!==null&&cd(Bi)&&(Bi=null),Wl.forEach(vw),Hl.forEach(vw)}function el(t,e){t.blockedOn===e&&(t.blockedOn=null,Ug||(Ug=!0,An.unstable_scheduleCallback(An.unstable_NormalPriority,YN)))}function ql(t){function e(i){return el(i,t)}if(0<ku.length){el(ku[0],t);for(var n=1;n<ku.length;n++){var r=ku[n];r.blockedOn===t&&(r.blockedOn=null)}}for($i!==null&&el($i,t),zi!==null&&el(zi,t),Bi!==null&&el(Bi,t),Wl.forEach(e),Hl.forEach(e),n=0;n<Ti.length;n++)r=Ti[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ti.length&&(n=Ti[0],n.blockedOn===null);)Mk(n),n.blockedOn===null&&Ti.shift()}var Yo=mi.ReactCurrentBatchConfig,Fd=!0;function JN(t,e,n,r){var i=Ie,s=Yo.transition;Yo.transition=null;try{Ie=1,Yy(t,e,n,r)}finally{Ie=i,Yo.transition=s}}function ZN(t,e,n,r){var i=Ie,s=Yo.transition;Yo.transition=null;try{Ie=4,Yy(t,e,n,r)}finally{Ie=i,Yo.transition=s}}function Yy(t,e,n,r){if(Fd){var i=Wg(t,e,n,r);if(i===null)lp(t,e,r,$d,n),yw(t,r);else if(QN(i,t,e,n,r))r.stopPropagation();else if(yw(t,r),e&4&&-1<XN.indexOf(t)){for(;i!==null;){var s=zc(i);if(s!==null&&Nk(s),s=Wg(t,e,n,r),s===null&&lp(t,e,r,$d,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else lp(t,e,r,null,n)}}var $d=null;function Wg(t,e,n,r){if($d=null,t=Gy(r),t=Cs(t),t!==null)if(e=uo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $d=t,null}function Lk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zN()){case Ky:return 1;case Ck:return 4;case Md:case BN:return 16;case Ak:return 536870912;default:return 16}default:return 16}}var ji=null,Jy=null,ud=null;function Fk(){if(ud)return ud;var t,e=Jy,n=e.length,r,i="value"in ji?ji.value:ji.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ud=i.slice(t,1<r?1-r:void 0)}function dd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Tu(){return!0}function xw(){return!1}function jn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Tu:xw,this.isPropagationStopped=xw,this}return qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Tu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Tu)},persist:function(){},isPersistent:Tu}),e}var ja={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zy=jn(ja),$c=qe({},ja,{view:0,detail:0}),e3=jn($c),Zm,ep,tl,of=qe({},$c,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ev,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==tl&&(tl&&t.type==="mousemove"?(Zm=t.screenX-tl.screenX,ep=t.screenY-tl.screenY):ep=Zm=0,tl=t),Zm)},movementY:function(t){return"movementY"in t?t.movementY:ep}}),ww=jn(of),t3=qe({},of,{dataTransfer:0}),n3=jn(t3),r3=qe({},$c,{relatedTarget:0}),tp=jn(r3),i3=qe({},ja,{animationName:0,elapsedTime:0,pseudoElement:0}),s3=jn(i3),o3=qe({},ja,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),a3=jn(o3),l3=qe({},ja,{data:0}),_w=jn(l3),c3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},u3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},d3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h3(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=d3[t])?!!e[t]:!1}function ev(){return h3}var f3=qe({},$c,{key:function(t){if(t.key){var e=c3[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=dd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?u3[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ev,charCode:function(t){return t.type==="keypress"?dd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?dd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),m3=jn(f3),p3=qe({},of,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ew=jn(p3),g3=qe({},$c,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ev}),y3=jn(g3),v3=qe({},ja,{propertyName:0,elapsedTime:0,pseudoElement:0}),x3=jn(v3),w3=qe({},of,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_3=jn(w3),E3=[9,13,27,32],tv=ii&&"CompositionEvent"in window,bl=null;ii&&"documentMode"in document&&(bl=document.documentMode);var S3=ii&&"TextEvent"in window&&!bl,$k=ii&&(!tv||bl&&8<bl&&11>=bl),Sw=String.fromCharCode(32),bw=!1;function zk(t,e){switch(t){case"keyup":return E3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Oo=!1;function b3(t,e){switch(t){case"compositionend":return Bk(e);case"keypress":return e.which!==32?null:(bw=!0,Sw);case"textInput":return t=e.data,t===Sw&&bw?null:t;default:return null}}function k3(t,e){if(Oo)return t==="compositionend"||!tv&&zk(t,e)?(t=Fk(),ud=Jy=ji=null,Oo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $k&&e.locale!=="ko"?null:e.data;default:return null}}var T3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!T3[t.type]:e==="textarea"}function Vk(t,e,n,r){xk(r),e=zd(e,"onChange"),0<e.length&&(n=new Zy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var kl=null,Gl=null;function I3(t){Zk(t,0)}function af(t){var e=Fo(t);if(hk(e))return t}function C3(t,e){if(t==="change")return e}var Uk=!1;if(ii){var np;if(ii){var rp="oninput"in document;if(!rp){var Tw=document.createElement("div");Tw.setAttribute("oninput","return;"),rp=typeof Tw.oninput=="function"}np=rp}else np=!1;Uk=np&&(!document.documentMode||9<document.documentMode)}function Iw(){kl&&(kl.detachEvent("onpropertychange",Wk),Gl=kl=null)}function Wk(t){if(t.propertyName==="value"&&af(Gl)){var e=[];Vk(e,Gl,t,Gy(t)),Sk(I3,e)}}function A3(t,e,n){t==="focusin"?(Iw(),kl=e,Gl=n,kl.attachEvent("onpropertychange",Wk)):t==="focusout"&&Iw()}function R3(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return af(Gl)}function P3(t,e){if(t==="click")return af(e)}function N3(t,e){if(t==="input"||t==="change")return af(e)}function D3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cr=typeof Object.is=="function"?Object.is:D3;function Kl(t,e){if(cr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Tg.call(e,i)||!cr(t[i],e[i]))return!1}return!0}function Cw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Aw(t,e){var n=Cw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Cw(n)}}function Hk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Hk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function qk(){for(var t=window,e=Dd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Dd(t.document)}return e}function nv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function j3(t){var e=qk(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Hk(n.ownerDocument.documentElement,n)){if(r!==null&&nv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Aw(n,s);var o=Aw(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var O3=ii&&"documentMode"in document&&11>=document.documentMode,Mo=null,Hg=null,Tl=null,qg=!1;function Rw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qg||Mo==null||Mo!==Dd(r)||(r=Mo,"selectionStart"in r&&nv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Tl&&Kl(Tl,r)||(Tl=r,r=zd(Hg,"onSelect"),0<r.length&&(e=new Zy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Mo)))}function Iu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Lo={animationend:Iu("Animation","AnimationEnd"),animationiteration:Iu("Animation","AnimationIteration"),animationstart:Iu("Animation","AnimationStart"),transitionend:Iu("Transition","TransitionEnd")},ip={},Gk={};ii&&(Gk=document.createElement("div").style,"AnimationEvent"in window||(delete Lo.animationend.animation,delete Lo.animationiteration.animation,delete Lo.animationstart.animation),"TransitionEvent"in window||delete Lo.transitionend.transition);function lf(t){if(ip[t])return ip[t];if(!Lo[t])return t;var e=Lo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Gk)return ip[t]=e[n];return t}var Kk=lf("animationend"),Xk=lf("animationiteration"),Qk=lf("animationstart"),Yk=lf("transitionend"),Jk=new Map,Pw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hs(t,e){Jk.set(t,e),co(e,[t])}for(var sp=0;sp<Pw.length;sp++){var op=Pw[sp],M3=op.toLowerCase(),L3=op[0].toUpperCase()+op.slice(1);hs(M3,"on"+L3)}hs(Kk,"onAnimationEnd");hs(Xk,"onAnimationIteration");hs(Qk,"onAnimationStart");hs("dblclick","onDoubleClick");hs("focusin","onFocus");hs("focusout","onBlur");hs(Yk,"onTransitionEnd");ca("onMouseEnter",["mouseout","mouseover"]);ca("onMouseLeave",["mouseout","mouseover"]);ca("onPointerEnter",["pointerout","pointerover"]);ca("onPointerLeave",["pointerout","pointerover"]);co("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));co("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));co("onBeforeInput",["compositionend","keypress","textInput","paste"]);co("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));co("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));co("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F3=new Set("cancel close invalid load scroll toggle".split(" ").concat(ml));function Nw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,MN(r,e,void 0,t),t.currentTarget=null}function Zk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Nw(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Nw(i,a,c),s=l}}}if(Od)throw t=Bg,Od=!1,Bg=null,t}function Oe(t,e){var n=e[Yg];n===void 0&&(n=e[Yg]=new Set);var r=t+"__bubble";n.has(r)||(e2(e,t,2,!1),n.add(r))}function ap(t,e,n){var r=0;e&&(r|=4),e2(n,t,r,e)}var Cu="_reactListening"+Math.random().toString(36).slice(2);function Xl(t){if(!t[Cu]){t[Cu]=!0,ak.forEach(function(n){n!=="selectionchange"&&(F3.has(n)||ap(n,!1,t),ap(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Cu]||(e[Cu]=!0,ap("selectionchange",!1,e))}}function e2(t,e,n,r){switch(Lk(e)){case 1:var i=JN;break;case 4:i=ZN;break;default:i=Yy}n=i.bind(null,e,n,t),i=void 0,!zg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function lp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Cs(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Sk(function(){var c=s,d=Gy(n),h=[];e:{var m=Jk.get(t);if(m!==void 0){var p=Zy,y=t;switch(t){case"keypress":if(dd(n)===0)break e;case"keydown":case"keyup":p=m3;break;case"focusin":y="focus",p=tp;break;case"focusout":y="blur",p=tp;break;case"beforeblur":case"afterblur":p=tp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=ww;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=n3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=y3;break;case Kk:case Xk:case Qk:p=s3;break;case Yk:p=x3;break;case"scroll":p=e3;break;case"wheel":p=_3;break;case"copy":case"cut":case"paste":p=a3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Ew}var x=(e&4)!==0,_=!x&&t==="scroll",v=x?m!==null?m+"Capture":null:m;x=[];for(var g=c,w;g!==null;){w=g;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,v!==null&&(E=Ul(g,v),E!=null&&x.push(Ql(g,E,w)))),_)break;g=g.return}0<x.length&&(m=new p(m,y,null,n,d),h.push({event:m,listeners:x}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==Fg&&(y=n.relatedTarget||n.fromElement)&&(Cs(y)||y[si]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=c,y=y?Cs(y):null,y!==null&&(_=uo(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=c),p!==y)){if(x=ww,E="onMouseLeave",v="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(x=Ew,E="onPointerLeave",v="onPointerEnter",g="pointer"),_=p==null?m:Fo(p),w=y==null?m:Fo(y),m=new x(E,g+"leave",p,n,d),m.target=_,m.relatedTarget=w,E=null,Cs(d)===c&&(x=new x(v,g+"enter",y,n,d),x.target=w,x.relatedTarget=_,E=x),_=E,p&&y)t:{for(x=p,v=y,g=0,w=x;w;w=Eo(w))g++;for(w=0,E=v;E;E=Eo(E))w++;for(;0<g-w;)x=Eo(x),g--;for(;0<w-g;)v=Eo(v),w--;for(;g--;){if(x===v||v!==null&&x===v.alternate)break t;x=Eo(x),v=Eo(v)}x=null}else x=null;p!==null&&Dw(h,m,p,x,!1),y!==null&&_!==null&&Dw(h,_,y,x,!0)}}e:{if(m=c?Fo(c):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var S=C3;else if(kw(m))if(Uk)S=N3;else{S=R3;var T=A3}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=P3);if(S&&(S=S(t,c))){Vk(h,S,n,d);break e}T&&T(t,m,c),t==="focusout"&&(T=m._wrapperState)&&T.controlled&&m.type==="number"&&Dg(m,"number",m.value)}switch(T=c?Fo(c):window,t){case"focusin":(kw(T)||T.contentEditable==="true")&&(Mo=T,Hg=c,Tl=null);break;case"focusout":Tl=Hg=Mo=null;break;case"mousedown":qg=!0;break;case"contextmenu":case"mouseup":case"dragend":qg=!1,Rw(h,n,d);break;case"selectionchange":if(O3)break;case"keydown":case"keyup":Rw(h,n,d)}var k;if(tv)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Oo?zk(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&($k&&n.locale!=="ko"&&(Oo||b!=="onCompositionStart"?b==="onCompositionEnd"&&Oo&&(k=Fk()):(ji=d,Jy="value"in ji?ji.value:ji.textContent,Oo=!0)),T=zd(c,b),0<T.length&&(b=new _w(b,t,null,n,d),h.push({event:b,listeners:T}),k?b.data=k:(k=Bk(n),k!==null&&(b.data=k)))),(k=S3?b3(t,n):k3(t,n))&&(c=zd(c,"onBeforeInput"),0<c.length&&(d=new _w("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=k))}Zk(h,e)})}function Ql(t,e,n){return{instance:t,listener:e,currentTarget:n}}function zd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ul(t,n),s!=null&&r.unshift(Ql(t,s,i)),s=Ul(t,e),s!=null&&r.push(Ql(t,s,i))),t=t.return}return r}function Eo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Dw(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ul(n,s),l!=null&&o.unshift(Ql(n,l,a))):i||(l=Ul(n,s),l!=null&&o.push(Ql(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var $3=/\r\n?/g,z3=/\u0000|\uFFFD/g;function jw(t){return(typeof t=="string"?t:""+t).replace($3,`
`).replace(z3,"")}function Au(t,e,n){if(e=jw(e),jw(t)!==e&&n)throw Error(M(425))}function Bd(){}var Gg=null,Kg=null;function Xg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Qg=typeof setTimeout=="function"?setTimeout:void 0,B3=typeof clearTimeout=="function"?clearTimeout:void 0,Ow=typeof Promise=="function"?Promise:void 0,V3=typeof queueMicrotask=="function"?queueMicrotask:typeof Ow<"u"?function(t){return Ow.resolve(null).then(t).catch(U3)}:Qg;function U3(t){setTimeout(function(){throw t})}function cp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ql(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ql(e)}function Vi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Mw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Oa=Math.random().toString(36).slice(2),xr="__reactFiber$"+Oa,Yl="__reactProps$"+Oa,si="__reactContainer$"+Oa,Yg="__reactEvents$"+Oa,W3="__reactListeners$"+Oa,H3="__reactHandles$"+Oa;function Cs(t){var e=t[xr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[si]||n[xr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Mw(t);t!==null;){if(n=t[xr])return n;t=Mw(t)}return e}t=n,n=t.parentNode}return null}function zc(t){return t=t[xr]||t[si],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function cf(t){return t[Yl]||null}var Jg=[],$o=-1;function fs(t){return{current:t}}function Fe(t){0>$o||(t.current=Jg[$o],Jg[$o]=null,$o--)}function je(t,e){$o++,Jg[$o]=t.current,t.current=e}var es={},Wt=fs(es),dn=fs(!1),Us=es;function ua(t,e){var n=t.type.contextTypes;if(!n)return es;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function hn(t){return t=t.childContextTypes,t!=null}function Vd(){Fe(dn),Fe(Wt)}function Lw(t,e,n){if(Wt.current!==es)throw Error(M(168));je(Wt,e),je(dn,n)}function t2(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(M(108,AN(t)||"Unknown",i));return qe({},n,r)}function Ud(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||es,Us=Wt.current,je(Wt,t),je(dn,dn.current),!0}function Fw(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=t2(t,e,Us),r.__reactInternalMemoizedMergedChildContext=t,Fe(dn),Fe(Wt),je(Wt,t)):Fe(dn),je(dn,n)}var Hr=null,uf=!1,up=!1;function n2(t){Hr===null?Hr=[t]:Hr.push(t)}function q3(t){uf=!0,n2(t)}function ms(){if(!up&&Hr!==null){up=!0;var t=0,e=Ie;try{var n=Hr;for(Ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Hr=null,uf=!1}catch(i){throw Hr!==null&&(Hr=Hr.slice(t+1)),Ik(Ky,ms),i}finally{Ie=e,up=!1}}return null}var zo=[],Bo=0,Wd=null,Hd=0,$n=[],zn=0,Ws=null,qr=1,Gr="";function Es(t,e){zo[Bo++]=Hd,zo[Bo++]=Wd,Wd=t,Hd=e}function r2(t,e,n){$n[zn++]=qr,$n[zn++]=Gr,$n[zn++]=Ws,Ws=t;var r=qr;t=Gr;var i=32-ar(r)-1;r&=~(1<<i),n+=1;var s=32-ar(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,qr=1<<32-ar(e)+i|n<<i|r,Gr=s+t}else qr=1<<s|n<<i|r,Gr=t}function rv(t){t.return!==null&&(Es(t,1),r2(t,1,0))}function iv(t){for(;t===Wd;)Wd=zo[--Bo],zo[Bo]=null,Hd=zo[--Bo],zo[Bo]=null;for(;t===Ws;)Ws=$n[--zn],$n[zn]=null,Gr=$n[--zn],$n[zn]=null,qr=$n[--zn],$n[zn]=null}var Tn=null,En=null,Ve=!1,nr=null;function i2(t,e){var n=Un(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $w(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tn=t,En=Vi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tn=t,En=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ws!==null?{id:qr,overflow:Gr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Un(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tn=t,En=null,!0):!1;default:return!1}}function Zg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function e0(t){if(Ve){var e=En;if(e){var n=e;if(!$w(t,e)){if(Zg(t))throw Error(M(418));e=Vi(n.nextSibling);var r=Tn;e&&$w(t,e)?i2(r,n):(t.flags=t.flags&-4097|2,Ve=!1,Tn=t)}}else{if(Zg(t))throw Error(M(418));t.flags=t.flags&-4097|2,Ve=!1,Tn=t}}}function zw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tn=t}function Ru(t){if(t!==Tn)return!1;if(!Ve)return zw(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xg(t.type,t.memoizedProps)),e&&(e=En)){if(Zg(t))throw s2(),Error(M(418));for(;e;)i2(t,e),e=Vi(e.nextSibling)}if(zw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){En=Vi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}En=null}}else En=Tn?Vi(t.stateNode.nextSibling):null;return!0}function s2(){for(var t=En;t;)t=Vi(t.nextSibling)}function da(){En=Tn=null,Ve=!1}function sv(t){nr===null?nr=[t]:nr.push(t)}var G3=mi.ReactCurrentBatchConfig;function Zn(t,e){if(t&&t.defaultProps){e=qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var qd=fs(null),Gd=null,Vo=null,ov=null;function av(){ov=Vo=Gd=null}function lv(t){var e=qd.current;Fe(qd),t._currentValue=e}function t0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Jo(t,e){Gd=t,ov=Vo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(un=!0),t.firstContext=null)}function Gn(t){var e=t._currentValue;if(ov!==t)if(t={context:t,memoizedValue:e,next:null},Vo===null){if(Gd===null)throw Error(M(308));Vo=t,Gd.dependencies={lanes:0,firstContext:t}}else Vo=Vo.next=t;return e}var As=null;function cv(t){As===null?As=[t]:As.push(t)}function o2(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,cv(e)):(n.next=i.next,i.next=n),e.interleaved=n,oi(t,r)}function oi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ki=!1;function uv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function a2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ei(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ui(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,oi(t,n)}return i=r.interleaved,i===null?(e.next=e,cv(r)):(e.next=i.next,i.next=e),r.interleaved=e,oi(t,n)}function hd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xy(t,n)}}function Bw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Kd(t,e,n,r){var i=t.updateQueue;ki=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var m=a.lane,p=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,x=a;switch(m=e,p=n,x.tag){case 1:if(y=x.payload,typeof y=="function"){h=y.call(p,h,m);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,m=typeof y=="function"?y.call(p,h,m):y,m==null)break e;h=qe({},h,m);break e;case 2:ki=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else p={eventTime:p,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);qs|=o,t.lanes=o,t.memoizedState=h}}function Vw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(M(191,i));i.call(r)}}}var l2=new ok.Component().refs;function n0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var df={isMounted:function(t){return(t=t._reactInternals)?uo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=en(),i=Hi(t),s=ei(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ui(t,s,i),e!==null&&(lr(e,t,i,r),hd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=en(),i=Hi(t),s=ei(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ui(t,s,i),e!==null&&(lr(e,t,i,r),hd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=en(),r=Hi(t),i=ei(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ui(t,i,r),e!==null&&(lr(e,t,r,n),hd(e,t,r))}};function Uw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Kl(n,r)||!Kl(i,s):!0}function c2(t,e,n){var r=!1,i=es,s=e.contextType;return typeof s=="object"&&s!==null?s=Gn(s):(i=hn(e)?Us:Wt.current,r=e.contextTypes,s=(r=r!=null)?ua(t,i):es),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=df,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ww(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&df.enqueueReplaceState(e,e.state,null)}function r0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=l2,uv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Gn(s):(s=hn(e)?Us:Wt.current,i.context=ua(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(n0(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&df.enqueueReplaceState(i,i.state,null),Kd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function nl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===l2&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function Pu(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Hw(t){var e=t._init;return e(t._payload)}function u2(t){function e(v,g){if(t){var w=v.deletions;w===null?(v.deletions=[g],v.flags|=16):w.push(g)}}function n(v,g){if(!t)return null;for(;g!==null;)e(v,g),g=g.sibling;return null}function r(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function i(v,g){return v=qi(v,g),v.index=0,v.sibling=null,v}function s(v,g,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<g?(v.flags|=2,g):w):(v.flags|=2,g)):(v.flags|=1048576,g)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,g,w,E){return g===null||g.tag!==6?(g=yp(w,v.mode,E),g.return=v,g):(g=i(g,w),g.return=v,g)}function l(v,g,w,E){var S=w.type;return S===jo?d(v,g,w.props.children,E,w.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===bi&&Hw(S)===g.type)?(E=i(g,w.props),E.ref=nl(v,g,w),E.return=v,E):(E=vd(w.type,w.key,w.props,null,v.mode,E),E.ref=nl(v,g,w),E.return=v,E)}function c(v,g,w,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=vp(w,v.mode,E),g.return=v,g):(g=i(g,w.children||[]),g.return=v,g)}function d(v,g,w,E,S){return g===null||g.tag!==7?(g=Fs(w,v.mode,E,S),g.return=v,g):(g=i(g,w),g.return=v,g)}function h(v,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=yp(""+g,v.mode,w),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case wu:return w=vd(g.type,g.key,g.props,null,v.mode,w),w.ref=nl(v,null,g),w.return=v,w;case Do:return g=vp(g,v.mode,w),g.return=v,g;case bi:var E=g._init;return h(v,E(g._payload),w)}if(hl(g)||Ya(g))return g=Fs(g,v.mode,w,null),g.return=v,g;Pu(v,g)}return null}function m(v,g,w,E){var S=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(v,g,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case wu:return w.key===S?l(v,g,w,E):null;case Do:return w.key===S?c(v,g,w,E):null;case bi:return S=w._init,m(v,g,S(w._payload),E)}if(hl(w)||Ya(w))return S!==null?null:d(v,g,w,E,null);Pu(v,w)}return null}function p(v,g,w,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(w)||null,a(g,v,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case wu:return v=v.get(E.key===null?w:E.key)||null,l(g,v,E,S);case Do:return v=v.get(E.key===null?w:E.key)||null,c(g,v,E,S);case bi:var T=E._init;return p(v,g,w,T(E._payload),S)}if(hl(E)||Ya(E))return v=v.get(w)||null,d(g,v,E,S,null);Pu(g,E)}return null}function y(v,g,w,E){for(var S=null,T=null,k=g,b=g=0,P=null;k!==null&&b<w.length;b++){k.index>b?(P=k,k=null):P=k.sibling;var I=m(v,k,w[b],E);if(I===null){k===null&&(k=P);break}t&&k&&I.alternate===null&&e(v,k),g=s(I,g,b),T===null?S=I:T.sibling=I,T=I,k=P}if(b===w.length)return n(v,k),Ve&&Es(v,b),S;if(k===null){for(;b<w.length;b++)k=h(v,w[b],E),k!==null&&(g=s(k,g,b),T===null?S=k:T.sibling=k,T=k);return Ve&&Es(v,b),S}for(k=r(v,k);b<w.length;b++)P=p(k,v,b,w[b],E),P!==null&&(t&&P.alternate!==null&&k.delete(P.key===null?b:P.key),g=s(P,g,b),T===null?S=P:T.sibling=P,T=P);return t&&k.forEach(function(O){return e(v,O)}),Ve&&Es(v,b),S}function x(v,g,w,E){var S=Ya(w);if(typeof S!="function")throw Error(M(150));if(w=S.call(w),w==null)throw Error(M(151));for(var T=S=null,k=g,b=g=0,P=null,I=w.next();k!==null&&!I.done;b++,I=w.next()){k.index>b?(P=k,k=null):P=k.sibling;var O=m(v,k,I.value,E);if(O===null){k===null&&(k=P);break}t&&k&&O.alternate===null&&e(v,k),g=s(O,g,b),T===null?S=O:T.sibling=O,T=O,k=P}if(I.done)return n(v,k),Ve&&Es(v,b),S;if(k===null){for(;!I.done;b++,I=w.next())I=h(v,I.value,E),I!==null&&(g=s(I,g,b),T===null?S=I:T.sibling=I,T=I);return Ve&&Es(v,b),S}for(k=r(v,k);!I.done;b++,I=w.next())I=p(k,v,b,I.value,E),I!==null&&(t&&I.alternate!==null&&k.delete(I.key===null?b:I.key),g=s(I,g,b),T===null?S=I:T.sibling=I,T=I);return t&&k.forEach(function(V){return e(v,V)}),Ve&&Es(v,b),S}function _(v,g,w,E){if(typeof w=="object"&&w!==null&&w.type===jo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case wu:e:{for(var S=w.key,T=g;T!==null;){if(T.key===S){if(S=w.type,S===jo){if(T.tag===7){n(v,T.sibling),g=i(T,w.props.children),g.return=v,v=g;break e}}else if(T.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===bi&&Hw(S)===T.type){n(v,T.sibling),g=i(T,w.props),g.ref=nl(v,T,w),g.return=v,v=g;break e}n(v,T);break}else e(v,T);T=T.sibling}w.type===jo?(g=Fs(w.props.children,v.mode,E,w.key),g.return=v,v=g):(E=vd(w.type,w.key,w.props,null,v.mode,E),E.ref=nl(v,g,w),E.return=v,v=E)}return o(v);case Do:e:{for(T=w.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(v,g.sibling),g=i(g,w.children||[]),g.return=v,v=g;break e}else{n(v,g);break}else e(v,g);g=g.sibling}g=vp(w,v.mode,E),g.return=v,v=g}return o(v);case bi:return T=w._init,_(v,g,T(w._payload),E)}if(hl(w))return y(v,g,w,E);if(Ya(w))return x(v,g,w,E);Pu(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(v,g.sibling),g=i(g,w),g.return=v,v=g):(n(v,g),g=yp(w,v.mode,E),g.return=v,v=g),o(v)):n(v,g)}return _}var ha=u2(!0),d2=u2(!1),Bc={},Cr=fs(Bc),Jl=fs(Bc),Zl=fs(Bc);function Rs(t){if(t===Bc)throw Error(M(174));return t}function dv(t,e){switch(je(Zl,e),je(Jl,t),je(Cr,Bc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Og(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Og(e,t)}Fe(Cr),je(Cr,e)}function fa(){Fe(Cr),Fe(Jl),Fe(Zl)}function h2(t){Rs(Zl.current);var e=Rs(Cr.current),n=Og(e,t.type);e!==n&&(je(Jl,t),je(Cr,n))}function hv(t){Jl.current===t&&(Fe(Cr),Fe(Jl))}var We=fs(0);function Xd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dp=[];function fv(){for(var t=0;t<dp.length;t++)dp[t]._workInProgressVersionPrimary=null;dp.length=0}var fd=mi.ReactCurrentDispatcher,hp=mi.ReactCurrentBatchConfig,Hs=0,He=null,mt=null,xt=null,Qd=!1,Il=!1,ec=0,K3=0;function Dt(){throw Error(M(321))}function mv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!cr(t[n],e[n]))return!1;return!0}function pv(t,e,n,r,i,s){if(Hs=s,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fd.current=t===null||t.memoizedState===null?J3:Z3,t=n(r,i),Il){s=0;do{if(Il=!1,ec=0,25<=s)throw Error(M(301));s+=1,xt=mt=null,e.updateQueue=null,fd.current=e5,t=n(r,i)}while(Il)}if(fd.current=Yd,e=mt!==null&&mt.next!==null,Hs=0,xt=mt=He=null,Qd=!1,e)throw Error(M(300));return t}function gv(){var t=ec!==0;return ec=0,t}function yr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?He.memoizedState=xt=t:xt=xt.next=t,xt}function Kn(){if(mt===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=mt.next;var e=xt===null?He.memoizedState:xt.next;if(e!==null)xt=e,mt=t;else{if(t===null)throw Error(M(310));mt=t,t={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},xt===null?He.memoizedState=xt=t:xt=xt.next=t}return xt}function tc(t,e){return typeof e=="function"?e(t):e}function fp(t){var e=Kn(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=mt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((Hs&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,He.lanes|=d,qs|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,cr(r,e.memoizedState)||(un=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,He.lanes|=s,qs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function mp(t){var e=Kn(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);cr(s,e.memoizedState)||(un=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function f2(){}function m2(t,e){var n=He,r=Kn(),i=e(),s=!cr(r.memoizedState,i);if(s&&(r.memoizedState=i,un=!0),r=r.queue,yv(y2.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||xt!==null&&xt.memoizedState.tag&1){if(n.flags|=2048,nc(9,g2.bind(null,n,r,i,e),void 0,null),Et===null)throw Error(M(349));Hs&30||p2(n,e,i)}return i}function p2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function g2(t,e,n,r){e.value=n,e.getSnapshot=r,v2(e)&&x2(t)}function y2(t,e,n){return n(function(){v2(e)&&x2(t)})}function v2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!cr(t,n)}catch{return!0}}function x2(t){var e=oi(t,1);e!==null&&lr(e,t,1,-1)}function qw(t){var e=yr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tc,lastRenderedState:t},e.queue=t,t=t.dispatch=Y3.bind(null,He,t),[e.memoizedState,t]}function nc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function w2(){return Kn().memoizedState}function md(t,e,n,r){var i=yr();He.flags|=t,i.memoizedState=nc(1|e,n,void 0,r===void 0?null:r)}function hf(t,e,n,r){var i=Kn();r=r===void 0?null:r;var s=void 0;if(mt!==null){var o=mt.memoizedState;if(s=o.destroy,r!==null&&mv(r,o.deps)){i.memoizedState=nc(e,n,s,r);return}}He.flags|=t,i.memoizedState=nc(1|e,n,s,r)}function Gw(t,e){return md(8390656,8,t,e)}function yv(t,e){return hf(2048,8,t,e)}function _2(t,e){return hf(4,2,t,e)}function E2(t,e){return hf(4,4,t,e)}function S2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function b2(t,e,n){return n=n!=null?n.concat([t]):null,hf(4,4,S2.bind(null,e,t),n)}function vv(){}function k2(t,e){var n=Kn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function T2(t,e){var n=Kn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function I2(t,e,n){return Hs&21?(cr(n,e)||(n=Rk(),He.lanes|=n,qs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,un=!0),t.memoizedState=n)}function X3(t,e){var n=Ie;Ie=n!==0&&4>n?n:4,t(!0);var r=hp.transition;hp.transition={};try{t(!1),e()}finally{Ie=n,hp.transition=r}}function C2(){return Kn().memoizedState}function Q3(t,e,n){var r=Hi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},A2(t))R2(e,n);else if(n=o2(t,e,n,r),n!==null){var i=en();lr(n,t,r,i),P2(n,e,r)}}function Y3(t,e,n){var r=Hi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(A2(t))R2(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,cr(a,o)){var l=e.interleaved;l===null?(i.next=i,cv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=o2(t,e,i,r),n!==null&&(i=en(),lr(n,t,r,i),P2(n,e,r))}}function A2(t){var e=t.alternate;return t===He||e!==null&&e===He}function R2(t,e){Il=Qd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function P2(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xy(t,n)}}var Yd={readContext:Gn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},J3={readContext:Gn,useCallback:function(t,e){return yr().memoizedState=[t,e===void 0?null:e],t},useContext:Gn,useEffect:Gw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,md(4194308,4,S2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return md(4194308,4,t,e)},useInsertionEffect:function(t,e){return md(4,2,t,e)},useMemo:function(t,e){var n=yr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=yr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Q3.bind(null,He,t),[r.memoizedState,t]},useRef:function(t){var e=yr();return t={current:t},e.memoizedState=t},useState:qw,useDebugValue:vv,useDeferredValue:function(t){return yr().memoizedState=t},useTransition:function(){var t=qw(!1),e=t[0];return t=X3.bind(null,t[1]),yr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=He,i=yr();if(Ve){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),Et===null)throw Error(M(349));Hs&30||p2(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Gw(y2.bind(null,r,s,t),[t]),r.flags|=2048,nc(9,g2.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=yr(),e=Et.identifierPrefix;if(Ve){var n=Gr,r=qr;n=(r&~(1<<32-ar(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ec++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=K3++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Z3={readContext:Gn,useCallback:k2,useContext:Gn,useEffect:yv,useImperativeHandle:b2,useInsertionEffect:_2,useLayoutEffect:E2,useMemo:T2,useReducer:fp,useRef:w2,useState:function(){return fp(tc)},useDebugValue:vv,useDeferredValue:function(t){var e=Kn();return I2(e,mt.memoizedState,t)},useTransition:function(){var t=fp(tc)[0],e=Kn().memoizedState;return[t,e]},useMutableSource:f2,useSyncExternalStore:m2,useId:C2,unstable_isNewReconciler:!1},e5={readContext:Gn,useCallback:k2,useContext:Gn,useEffect:yv,useImperativeHandle:b2,useInsertionEffect:_2,useLayoutEffect:E2,useMemo:T2,useReducer:mp,useRef:w2,useState:function(){return mp(tc)},useDebugValue:vv,useDeferredValue:function(t){var e=Kn();return mt===null?e.memoizedState=t:I2(e,mt.memoizedState,t)},useTransition:function(){var t=mp(tc)[0],e=Kn().memoizedState;return[t,e]},useMutableSource:f2,useSyncExternalStore:m2,useId:C2,unstable_isNewReconciler:!1};function ma(t,e){try{var n="",r=e;do n+=CN(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function pp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function i0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var t5=typeof WeakMap=="function"?WeakMap:Map;function N2(t,e,n){n=ei(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Zd||(Zd=!0,m0=r),i0(t,e)},n}function D2(t,e,n){n=ei(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){i0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){i0(t,e),typeof r!="function"&&(Wi===null?Wi=new Set([this]):Wi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Kw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new t5;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=p5.bind(null,t,e,n),e.then(t,t))}function Xw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ei(-1,1),e.tag=2,Ui(n,e,1))),n.lanes|=1),t)}var n5=mi.ReactCurrentOwner,un=!1;function Qt(t,e,n,r){e.child=t===null?d2(e,null,n,r):ha(e,t.child,n,r)}function Yw(t,e,n,r,i){n=n.render;var s=e.ref;return Jo(e,i),r=pv(t,e,n,r,s,i),n=gv(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ai(t,e,i)):(Ve&&n&&rv(e),e.flags|=1,Qt(t,e,r,i),e.child)}function Jw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Tv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,j2(t,e,s,r,i)):(t=vd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Kl,n(o,r)&&t.ref===e.ref)return ai(t,e,i)}return e.flags|=1,t=qi(s,r),t.ref=e.ref,t.return=e,e.child=t}function j2(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Kl(s,r)&&t.ref===e.ref)if(un=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(un=!0);else return e.lanes=t.lanes,ai(t,e,i)}return s0(t,e,n,r,i)}function O2(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(Wo,wn),wn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(Wo,wn),wn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,je(Wo,wn),wn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,je(Wo,wn),wn|=r;return Qt(t,e,i,n),e.child}function M2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function s0(t,e,n,r,i){var s=hn(n)?Us:Wt.current;return s=ua(e,s),Jo(e,i),n=pv(t,e,n,r,s,i),r=gv(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ai(t,e,i)):(Ve&&r&&rv(e),e.flags|=1,Qt(t,e,n,i),e.child)}function Zw(t,e,n,r,i){if(hn(n)){var s=!0;Ud(e)}else s=!1;if(Jo(e,i),e.stateNode===null)pd(t,e),c2(e,n,r),r0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Gn(c):(c=hn(n)?Us:Wt.current,c=ua(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Ww(e,o,r,c),ki=!1;var m=e.memoizedState;o.state=m,Kd(e,r,o,i),l=e.memoizedState,a!==r||m!==l||dn.current||ki?(typeof d=="function"&&(n0(e,n,d,r),l=e.memoizedState),(a=ki||Uw(e,n,a,r,m,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,a2(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Zn(e.type,a),o.props=c,h=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Gn(l):(l=hn(n)?Us:Wt.current,l=ua(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==l)&&Ww(e,o,r,l),ki=!1,m=e.memoizedState,o.state=m,Kd(e,r,o,i);var y=e.memoizedState;a!==h||m!==y||dn.current||ki?(typeof p=="function"&&(n0(e,n,p,r),y=e.memoizedState),(c=ki||Uw(e,n,c,r,m,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return o0(t,e,n,r,s,i)}function o0(t,e,n,r,i,s){M2(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Fw(e,n,!1),ai(t,e,s);r=e.stateNode,n5.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ha(e,t.child,null,s),e.child=ha(e,null,a,s)):Qt(t,e,a,s),e.memoizedState=r.state,i&&Fw(e,n,!0),e.child}function L2(t){var e=t.stateNode;e.pendingContext?Lw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Lw(t,e.context,!1),dv(t,e.containerInfo)}function e_(t,e,n,r,i){return da(),sv(i),e.flags|=256,Qt(t,e,n,r),e.child}var a0={dehydrated:null,treeContext:null,retryLane:0};function l0(t){return{baseLanes:t,cachePool:null,transitions:null}}function F2(t,e,n){var r=e.pendingProps,i=We.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),je(We,i&1),t===null)return e0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=pf(o,r,0,null),t=Fs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=l0(n),e.memoizedState=a0,t):xv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return r5(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=qi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=qi(a,s):(s=Fs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?l0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=a0,r}return s=t.child,t=s.sibling,r=qi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function xv(t,e){return e=pf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Nu(t,e,n,r){return r!==null&&sv(r),ha(e,t.child,null,n),t=xv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function r5(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=pp(Error(M(422))),Nu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=pf({mode:"visible",children:r.children},i,0,null),s=Fs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ha(e,t.child,null,o),e.child.memoizedState=l0(o),e.memoizedState=a0,s);if(!(e.mode&1))return Nu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(M(419)),r=pp(s,r,void 0),Nu(t,e,o,r)}if(a=(o&t.childLanes)!==0,un||a){if(r=Et,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,oi(t,i),lr(r,t,i,-1))}return kv(),r=pp(Error(M(421))),Nu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=g5.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,En=Vi(i.nextSibling),Tn=e,Ve=!0,nr=null,t!==null&&($n[zn++]=qr,$n[zn++]=Gr,$n[zn++]=Ws,qr=t.id,Gr=t.overflow,Ws=e),e=xv(e,r.children),e.flags|=4096,e)}function t_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),t0(t.return,e,n)}function gp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function $2(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Qt(t,e,r.children,n),r=We.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&t_(t,n,e);else if(t.tag===19)t_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(je(We,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Xd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),gp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Xd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}gp(e,!0,n,null,s);break;case"together":gp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ai(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),qs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=qi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=qi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function i5(t,e,n){switch(e.tag){case 3:L2(e),da();break;case 5:h2(e);break;case 1:hn(e.type)&&Ud(e);break;case 4:dv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;je(qd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(je(We,We.current&1),e.flags|=128,null):n&e.child.childLanes?F2(t,e,n):(je(We,We.current&1),t=ai(t,e,n),t!==null?t.sibling:null);je(We,We.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return $2(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),je(We,We.current),r)break;return null;case 22:case 23:return e.lanes=0,O2(t,e,n)}return ai(t,e,n)}var z2,c0,B2,V2;z2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};c0=function(){};B2=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Rs(Cr.current);var s=null;switch(n){case"input":i=Pg(t,i),r=Pg(t,r),s=[];break;case"select":i=qe({},i,{value:void 0}),r=qe({},r,{value:void 0}),s=[];break;case"textarea":i=jg(t,i),r=jg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Bd)}Mg(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Bl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Bl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Oe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};V2=function(t,e,n,r){n!==r&&(e.flags|=4)};function rl(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function s5(t,e,n){var r=e.pendingProps;switch(iv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(e),null;case 1:return hn(e.type)&&Vd(),jt(e),null;case 3:return r=e.stateNode,fa(),Fe(dn),Fe(Wt),fv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ru(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,nr!==null&&(y0(nr),nr=null))),c0(t,e),jt(e),null;case 5:hv(e);var i=Rs(Zl.current);if(n=e.type,t!==null&&e.stateNode!=null)B2(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return jt(e),null}if(t=Rs(Cr.current),Ru(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[xr]=e,r[Yl]=s,t=(e.mode&1)!==0,n){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(i=0;i<ml.length;i++)Oe(ml[i],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":uw(r,s),Oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Oe("invalid",r);break;case"textarea":hw(r,s),Oe("invalid",r)}Mg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Au(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Au(r.textContent,a,t),i=["children",""+a]):Bl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Oe("scroll",r)}switch(n){case"input":_u(r),dw(r,s,!0);break;case"textarea":_u(r),fw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Bd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pk(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[xr]=e,t[Yl]=r,z2(t,e,!1,!1),e.stateNode=t;e:{switch(o=Lg(n,r),n){case"dialog":Oe("cancel",t),Oe("close",t),i=r;break;case"iframe":case"object":case"embed":Oe("load",t),i=r;break;case"video":case"audio":for(i=0;i<ml.length;i++)Oe(ml[i],t);i=r;break;case"source":Oe("error",t),i=r;break;case"img":case"image":case"link":Oe("error",t),Oe("load",t),i=r;break;case"details":Oe("toggle",t),i=r;break;case"input":uw(t,r),i=Pg(t,r),Oe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=qe({},r,{value:void 0}),Oe("invalid",t);break;case"textarea":hw(t,r),i=jg(t,r),Oe("invalid",t);break;default:i=r}Mg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?vk(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&gk(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Vl(t,l):typeof l=="number"&&Vl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Bl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Oe("scroll",t):l!=null&&Uy(t,s,l,o))}switch(n){case"input":_u(t),dw(t,r,!1);break;case"textarea":_u(t),fw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ko(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ko(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Bd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jt(e),null;case 6:if(t&&e.stateNode!=null)V2(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=Rs(Zl.current),Rs(Cr.current),Ru(e)){if(r=e.stateNode,n=e.memoizedProps,r[xr]=e,(s=r.nodeValue!==n)&&(t=Tn,t!==null))switch(t.tag){case 3:Au(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Au(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xr]=e,e.stateNode=r}return jt(e),null;case 13:if(Fe(We),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&En!==null&&e.mode&1&&!(e.flags&128))s2(),da(),e.flags|=98560,s=!1;else if(s=Ru(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(M(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(M(317));s[xr]=e}else da(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;jt(e),s=!1}else nr!==null&&(y0(nr),nr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||We.current&1?pt===0&&(pt=3):kv())),e.updateQueue!==null&&(e.flags|=4),jt(e),null);case 4:return fa(),c0(t,e),t===null&&Xl(e.stateNode.containerInfo),jt(e),null;case 10:return lv(e.type._context),jt(e),null;case 17:return hn(e.type)&&Vd(),jt(e),null;case 19:if(Fe(We),s=e.memoizedState,s===null)return jt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)rl(s,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Xd(t),o!==null){for(e.flags|=128,rl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return je(We,We.current&1|2),e.child}t=t.sibling}s.tail!==null&&tt()>pa&&(e.flags|=128,r=!0,rl(s,!1),e.lanes=4194304)}else{if(!r)if(t=Xd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),rl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ve)return jt(e),null}else 2*tt()-s.renderingStartTime>pa&&n!==1073741824&&(e.flags|=128,r=!0,rl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=tt(),e.sibling=null,n=We.current,je(We,r?n&1|2:n&1),e):(jt(e),null);case 22:case 23:return bv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wn&1073741824&&(jt(e),e.subtreeFlags&6&&(e.flags|=8192)):jt(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function o5(t,e){switch(iv(e),e.tag){case 1:return hn(e.type)&&Vd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return fa(),Fe(dn),Fe(Wt),fv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hv(e),null;case 13:if(Fe(We),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));da()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(We),null;case 4:return fa(),null;case 10:return lv(e.type._context),null;case 22:case 23:return bv(),null;case 24:return null;default:return null}}var Du=!1,Ft=!1,a5=typeof WeakSet=="function"?WeakSet:Set,U=null;function Uo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xe(t,e,r)}else n.current=null}function u0(t,e,n){try{n()}catch(r){Xe(t,e,r)}}var n_=!1;function l5(t,e){if(Gg=Fd,t=qk(),nv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,m=null;t:for(;;){for(var p;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===t)break t;if(m===n&&++c===i&&(a=o),m===s&&++d===r&&(l=o),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kg={focusedElem:t,selectionRange:n},Fd=!1,U=e;U!==null;)if(e=U,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,U=t;else for(;U!==null;){e=U;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,_=y.memoizedState,v=e.stateNode,g=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:Zn(e.type,x),_);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(E){Xe(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}return y=n_,n_=!1,y}function Cl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&u0(e,n,s)}i=i.next}while(i!==r)}}function ff(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function d0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function U2(t){var e=t.alternate;e!==null&&(t.alternate=null,U2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xr],delete e[Yl],delete e[Yg],delete e[W3],delete e[H3])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function W2(t){return t.tag===5||t.tag===3||t.tag===4}function r_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||W2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function h0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Bd));else if(r!==4&&(t=t.child,t!==null))for(h0(t,e,n),t=t.sibling;t!==null;)h0(t,e,n),t=t.sibling}function f0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(f0(t,e,n),t=t.sibling;t!==null;)f0(t,e,n),t=t.sibling}var Tt=null,er=!1;function xi(t,e,n){for(n=n.child;n!==null;)H2(t,e,n),n=n.sibling}function H2(t,e,n){if(Ir&&typeof Ir.onCommitFiberUnmount=="function")try{Ir.onCommitFiberUnmount(sf,n)}catch{}switch(n.tag){case 5:Ft||Uo(n,e);case 6:var r=Tt,i=er;Tt=null,xi(t,e,n),Tt=r,er=i,Tt!==null&&(er?(t=Tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Tt.removeChild(n.stateNode));break;case 18:Tt!==null&&(er?(t=Tt,n=n.stateNode,t.nodeType===8?cp(t.parentNode,n):t.nodeType===1&&cp(t,n),ql(t)):cp(Tt,n.stateNode));break;case 4:r=Tt,i=er,Tt=n.stateNode.containerInfo,er=!0,xi(t,e,n),Tt=r,er=i;break;case 0:case 11:case 14:case 15:if(!Ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&u0(n,e,o),i=i.next}while(i!==r)}xi(t,e,n);break;case 1:if(!Ft&&(Uo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Xe(n,e,a)}xi(t,e,n);break;case 21:xi(t,e,n);break;case 22:n.mode&1?(Ft=(r=Ft)||n.memoizedState!==null,xi(t,e,n),Ft=r):xi(t,e,n);break;default:xi(t,e,n)}}function i_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new a5),e.forEach(function(r){var i=y5.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Yn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Tt=a.stateNode,er=!1;break e;case 3:Tt=a.stateNode.containerInfo,er=!0;break e;case 4:Tt=a.stateNode.containerInfo,er=!0;break e}a=a.return}if(Tt===null)throw Error(M(160));H2(s,o,i),Tt=null,er=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Xe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)q2(e,t),e=e.sibling}function q2(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yn(e,t),mr(t),r&4){try{Cl(3,t,t.return),ff(3,t)}catch(x){Xe(t,t.return,x)}try{Cl(5,t,t.return)}catch(x){Xe(t,t.return,x)}}break;case 1:Yn(e,t),mr(t),r&512&&n!==null&&Uo(n,n.return);break;case 5:if(Yn(e,t),mr(t),r&512&&n!==null&&Uo(n,n.return),t.flags&32){var i=t.stateNode;try{Vl(i,"")}catch(x){Xe(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&fk(i,s),Lg(a,o);var c=Lg(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?vk(i,h):d==="dangerouslySetInnerHTML"?gk(i,h):d==="children"?Vl(i,h):Uy(i,d,h,c)}switch(a){case"input":Ng(i,s);break;case"textarea":mk(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Ko(i,!!s.multiple,p,!1):m!==!!s.multiple&&(s.defaultValue!=null?Ko(i,!!s.multiple,s.defaultValue,!0):Ko(i,!!s.multiple,s.multiple?[]:"",!1))}i[Yl]=s}catch(x){Xe(t,t.return,x)}}break;case 6:if(Yn(e,t),mr(t),r&4){if(t.stateNode===null)throw Error(M(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){Xe(t,t.return,x)}}break;case 3:if(Yn(e,t),mr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ql(e.containerInfo)}catch(x){Xe(t,t.return,x)}break;case 4:Yn(e,t),mr(t);break;case 13:Yn(e,t),mr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ev=tt())),r&4&&i_(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ft=(c=Ft)||d,Yn(e,t),Ft=c):Yn(e,t),mr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(U=t,d=t.child;d!==null;){for(h=U=d;U!==null;){switch(m=U,p=m.child,m.tag){case 0:case 11:case 14:case 15:Cl(4,m,m.return);break;case 1:Uo(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(x){Xe(r,n,x)}}break;case 5:Uo(m,m.return);break;case 22:if(m.memoizedState!==null){o_(h);continue}}p!==null?(p.return=m,U=p):o_(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=yk("display",o))}catch(x){Xe(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(x){Xe(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Yn(e,t),mr(t),r&4&&i_(t);break;case 21:break;default:Yn(e,t),mr(t)}}function mr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(W2(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Vl(i,""),r.flags&=-33);var s=r_(t);f0(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=r_(t);h0(t,a,o);break;default:throw Error(M(161))}}catch(l){Xe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function c5(t,e,n){U=t,G2(t)}function G2(t,e,n){for(var r=(t.mode&1)!==0;U!==null;){var i=U,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Du;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ft;a=Du;var c=Ft;if(Du=o,(Ft=l)&&!c)for(U=i;U!==null;)o=U,l=o.child,o.tag===22&&o.memoizedState!==null?a_(i):l!==null?(l.return=o,U=l):a_(i);for(;s!==null;)U=s,G2(s),s=s.sibling;U=i,Du=a,Ft=c}s_(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,U=s):s_(t)}}function s_(t){for(;U!==null;){var e=U;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ft||ff(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ft)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Zn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Vw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Vw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ql(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Ft||e.flags&512&&d0(e)}catch(m){Xe(e,e.return,m)}}if(e===t){U=null;break}if(n=e.sibling,n!==null){n.return=e.return,U=n;break}U=e.return}}function o_(t){for(;U!==null;){var e=U;if(e===t){U=null;break}var n=e.sibling;if(n!==null){n.return=e.return,U=n;break}U=e.return}}function a_(t){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ff(4,e)}catch(l){Xe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Xe(e,i,l)}}var s=e.return;try{d0(e)}catch(l){Xe(e,s,l)}break;case 5:var o=e.return;try{d0(e)}catch(l){Xe(e,o,l)}}}catch(l){Xe(e,e.return,l)}if(e===t){U=null;break}var a=e.sibling;if(a!==null){a.return=e.return,U=a;break}U=e.return}}var u5=Math.ceil,Jd=mi.ReactCurrentDispatcher,wv=mi.ReactCurrentOwner,Wn=mi.ReactCurrentBatchConfig,Ee=0,Et=null,lt=null,Rt=0,wn=0,Wo=fs(0),pt=0,rc=null,qs=0,mf=0,_v=0,Al=null,ln=null,Ev=0,pa=1/0,Ur=null,Zd=!1,m0=null,Wi=null,ju=!1,Oi=null,eh=0,Rl=0,p0=null,gd=-1,yd=0;function en(){return Ee&6?tt():gd!==-1?gd:gd=tt()}function Hi(t){return t.mode&1?Ee&2&&Rt!==0?Rt&-Rt:G3.transition!==null?(yd===0&&(yd=Rk()),yd):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:Lk(t.type)),t):1}function lr(t,e,n,r){if(50<Rl)throw Rl=0,p0=null,Error(M(185));Fc(t,n,r),(!(Ee&2)||t!==Et)&&(t===Et&&(!(Ee&2)&&(mf|=n),pt===4&&Ii(t,Rt)),fn(t,r),n===1&&Ee===0&&!(e.mode&1)&&(pa=tt()+500,uf&&ms()))}function fn(t,e){var n=t.callbackNode;GN(t,e);var r=Ld(t,t===Et?Rt:0);if(r===0)n!==null&&gw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&gw(n),e===1)t.tag===0?q3(l_.bind(null,t)):n2(l_.bind(null,t)),V3(function(){!(Ee&6)&&ms()}),n=null;else{switch(Pk(r)){case 1:n=Ky;break;case 4:n=Ck;break;case 16:n=Md;break;case 536870912:n=Ak;break;default:n=Md}n=tT(n,K2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function K2(t,e){if(gd=-1,yd=0,Ee&6)throw Error(M(327));var n=t.callbackNode;if(Zo()&&t.callbackNode!==n)return null;var r=Ld(t,t===Et?Rt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=th(t,r);else{e=r;var i=Ee;Ee|=2;var s=Q2();(Et!==t||Rt!==e)&&(Ur=null,pa=tt()+500,Ls(t,e));do try{f5();break}catch(a){X2(t,a)}while(1);av(),Jd.current=s,Ee=i,lt!==null?e=0:(Et=null,Rt=0,e=pt)}if(e!==0){if(e===2&&(i=Vg(t),i!==0&&(r=i,e=g0(t,i))),e===1)throw n=rc,Ls(t,0),Ii(t,r),fn(t,tt()),n;if(e===6)Ii(t,r);else{if(i=t.current.alternate,!(r&30)&&!d5(i)&&(e=th(t,r),e===2&&(s=Vg(t),s!==0&&(r=s,e=g0(t,s))),e===1))throw n=rc,Ls(t,0),Ii(t,r),fn(t,tt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:Ss(t,ln,Ur);break;case 3:if(Ii(t,r),(r&130023424)===r&&(e=Ev+500-tt(),10<e)){if(Ld(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){en(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Qg(Ss.bind(null,t,ln,Ur),e);break}Ss(t,ln,Ur);break;case 4:if(Ii(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ar(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*u5(r/1960))-r,10<r){t.timeoutHandle=Qg(Ss.bind(null,t,ln,Ur),r);break}Ss(t,ln,Ur);break;case 5:Ss(t,ln,Ur);break;default:throw Error(M(329))}}}return fn(t,tt()),t.callbackNode===n?K2.bind(null,t):null}function g0(t,e){var n=Al;return t.current.memoizedState.isDehydrated&&(Ls(t,e).flags|=256),t=th(t,e),t!==2&&(e=ln,ln=n,e!==null&&y0(e)),t}function y0(t){ln===null?ln=t:ln.push.apply(ln,t)}function d5(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!cr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ii(t,e){for(e&=~_v,e&=~mf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ar(e),r=1<<n;t[n]=-1,e&=~r}}function l_(t){if(Ee&6)throw Error(M(327));Zo();var e=Ld(t,0);if(!(e&1))return fn(t,tt()),null;var n=th(t,e);if(t.tag!==0&&n===2){var r=Vg(t);r!==0&&(e=r,n=g0(t,r))}if(n===1)throw n=rc,Ls(t,0),Ii(t,e),fn(t,tt()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ss(t,ln,Ur),fn(t,tt()),null}function Sv(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(pa=tt()+500,uf&&ms())}}function Gs(t){Oi!==null&&Oi.tag===0&&!(Ee&6)&&Zo();var e=Ee;Ee|=1;var n=Wn.transition,r=Ie;try{if(Wn.transition=null,Ie=1,t)return t()}finally{Ie=r,Wn.transition=n,Ee=e,!(Ee&6)&&ms()}}function bv(){wn=Wo.current,Fe(Wo)}function Ls(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,B3(n)),lt!==null)for(n=lt.return;n!==null;){var r=n;switch(iv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vd();break;case 3:fa(),Fe(dn),Fe(Wt),fv();break;case 5:hv(r);break;case 4:fa();break;case 13:Fe(We);break;case 19:Fe(We);break;case 10:lv(r.type._context);break;case 22:case 23:bv()}n=n.return}if(Et=t,lt=t=qi(t.current,null),Rt=wn=e,pt=0,rc=null,_v=mf=qs=0,ln=Al=null,As!==null){for(e=0;e<As.length;e++)if(n=As[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}As=null}return t}function X2(t,e){do{var n=lt;try{if(av(),fd.current=Yd,Qd){for(var r=He.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Qd=!1}if(Hs=0,xt=mt=He=null,Il=!1,ec=0,wv.current=null,n===null||n.return===null){pt=1,rc=e,lt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Rt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Xw(o);if(p!==null){p.flags&=-257,Qw(p,o,a,s,e),p.mode&1&&Kw(s,c,e),e=p,l=c;var y=e.updateQueue;if(y===null){var x=new Set;x.add(l),e.updateQueue=x}else y.add(l);break e}else{if(!(e&1)){Kw(s,c,e),kv();break e}l=Error(M(426))}}else if(Ve&&a.mode&1){var _=Xw(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Qw(_,o,a,s,e),sv(ma(l,a));break e}}s=l=ma(l,a),pt!==4&&(pt=2),Al===null?Al=[s]:Al.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=N2(s,l,e);Bw(s,v);break e;case 1:a=l;var g=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Wi===null||!Wi.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=D2(s,a,e);Bw(s,E);break e}}s=s.return}while(s!==null)}J2(n)}catch(S){e=S,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(1)}function Q2(){var t=Jd.current;return Jd.current=Yd,t===null?Yd:t}function kv(){(pt===0||pt===3||pt===2)&&(pt=4),Et===null||!(qs&268435455)&&!(mf&268435455)||Ii(Et,Rt)}function th(t,e){var n=Ee;Ee|=2;var r=Q2();(Et!==t||Rt!==e)&&(Ur=null,Ls(t,e));do try{h5();break}catch(i){X2(t,i)}while(1);if(av(),Ee=n,Jd.current=r,lt!==null)throw Error(M(261));return Et=null,Rt=0,pt}function h5(){for(;lt!==null;)Y2(lt)}function f5(){for(;lt!==null&&!FN();)Y2(lt)}function Y2(t){var e=eT(t.alternate,t,wn);t.memoizedProps=t.pendingProps,e===null?J2(t):lt=e,wv.current=null}function J2(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=o5(n,e),n!==null){n.flags&=32767,lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,lt=null;return}}else if(n=s5(n,e,wn),n!==null){lt=n;return}if(e=e.sibling,e!==null){lt=e;return}lt=e=t}while(e!==null);pt===0&&(pt=5)}function Ss(t,e,n){var r=Ie,i=Wn.transition;try{Wn.transition=null,Ie=1,m5(t,e,n,r)}finally{Wn.transition=i,Ie=r}return null}function m5(t,e,n,r){do Zo();while(Oi!==null);if(Ee&6)throw Error(M(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(KN(t,s),t===Et&&(lt=Et=null,Rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ju||(ju=!0,tT(Md,function(){return Zo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Wn.transition,Wn.transition=null;var o=Ie;Ie=1;var a=Ee;Ee|=4,wv.current=null,l5(t,n),q2(n,t),j3(Kg),Fd=!!Gg,Kg=Gg=null,t.current=n,c5(n),$N(),Ee=a,Ie=o,Wn.transition=s}else t.current=n;if(ju&&(ju=!1,Oi=t,eh=i),s=t.pendingLanes,s===0&&(Wi=null),VN(n.stateNode),fn(t,tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Zd)throw Zd=!1,t=m0,m0=null,t;return eh&1&&t.tag!==0&&Zo(),s=t.pendingLanes,s&1?t===p0?Rl++:(Rl=0,p0=t):Rl=0,ms(),null}function Zo(){if(Oi!==null){var t=Pk(eh),e=Wn.transition,n=Ie;try{if(Wn.transition=null,Ie=16>t?16:t,Oi===null)var r=!1;else{if(t=Oi,Oi=null,eh=0,Ee&6)throw Error(M(331));var i=Ee;for(Ee|=4,U=t.current;U!==null;){var s=U,o=s.child;if(U.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(U=c;U!==null;){var d=U;switch(d.tag){case 0:case 11:case 15:Cl(8,d,s)}var h=d.child;if(h!==null)h.return=d,U=h;else for(;U!==null;){d=U;var m=d.sibling,p=d.return;if(U2(d),d===c){U=null;break}if(m!==null){m.return=p,U=m;break}U=p}}}var y=s.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}U=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,U=o;else e:for(;U!==null;){if(s=U,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Cl(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,U=v;break e}U=s.return}}var g=t.current;for(U=g;U!==null;){o=U;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,U=w;else e:for(o=g;U!==null;){if(a=U,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ff(9,a)}}catch(S){Xe(a,a.return,S)}if(a===o){U=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,U=E;break e}U=a.return}}if(Ee=i,ms(),Ir&&typeof Ir.onPostCommitFiberRoot=="function")try{Ir.onPostCommitFiberRoot(sf,t)}catch{}r=!0}return r}finally{Ie=n,Wn.transition=e}}return!1}function c_(t,e,n){e=ma(n,e),e=N2(t,e,1),t=Ui(t,e,1),e=en(),t!==null&&(Fc(t,1,e),fn(t,e))}function Xe(t,e,n){if(t.tag===3)c_(t,t,n);else for(;e!==null;){if(e.tag===3){c_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wi===null||!Wi.has(r))){t=ma(n,t),t=D2(e,t,1),e=Ui(e,t,1),t=en(),e!==null&&(Fc(e,1,t),fn(e,t));break}}e=e.return}}function p5(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=en(),t.pingedLanes|=t.suspendedLanes&n,Et===t&&(Rt&n)===n&&(pt===4||pt===3&&(Rt&130023424)===Rt&&500>tt()-Ev?Ls(t,0):_v|=n),fn(t,e)}function Z2(t,e){e===0&&(t.mode&1?(e=bu,bu<<=1,!(bu&130023424)&&(bu=4194304)):e=1);var n=en();t=oi(t,e),t!==null&&(Fc(t,e,n),fn(t,n))}function g5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Z2(t,n)}function y5(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),Z2(t,n)}var eT;eT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||dn.current)un=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return un=!1,i5(t,e,n);un=!!(t.flags&131072)}else un=!1,Ve&&e.flags&1048576&&r2(e,Hd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pd(t,e),t=e.pendingProps;var i=ua(e,Wt.current);Jo(e,n),i=pv(null,e,r,t,i,n);var s=gv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hn(r)?(s=!0,Ud(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,uv(e),i.updater=df,e.stateNode=i,i._reactInternals=e,r0(e,r,t,n),e=o0(null,e,r,!0,s,n)):(e.tag=0,Ve&&s&&rv(e),Qt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(pd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=x5(r),t=Zn(r,t),i){case 0:e=s0(null,e,r,t,n);break e;case 1:e=Zw(null,e,r,t,n);break e;case 11:e=Yw(null,e,r,t,n);break e;case 14:e=Jw(null,e,r,Zn(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),s0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),Zw(t,e,r,i,n);case 3:e:{if(L2(e),t===null)throw Error(M(387));r=e.pendingProps,s=e.memoizedState,i=s.element,a2(t,e),Kd(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ma(Error(M(423)),e),e=e_(t,e,r,n,i);break e}else if(r!==i){i=ma(Error(M(424)),e),e=e_(t,e,r,n,i);break e}else for(En=Vi(e.stateNode.containerInfo.firstChild),Tn=e,Ve=!0,nr=null,n=d2(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(da(),r===i){e=ai(t,e,n);break e}Qt(t,e,r,n)}e=e.child}return e;case 5:return h2(e),t===null&&e0(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Xg(r,i)?o=null:s!==null&&Xg(r,s)&&(e.flags|=32),M2(t,e),Qt(t,e,o,n),e.child;case 6:return t===null&&e0(e),null;case 13:return F2(t,e,n);case 4:return dv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ha(e,null,r,n):Qt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),Yw(t,e,r,i,n);case 7:return Qt(t,e,e.pendingProps,n),e.child;case 8:return Qt(t,e,e.pendingProps.children,n),e.child;case 12:return Qt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,je(qd,r._currentValue),r._currentValue=o,s!==null)if(cr(s.value,o)){if(s.children===i.children&&!dn.current){e=ai(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ei(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),t0(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(M(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),t0(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Qt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Jo(e,n),i=Gn(i),r=r(i),e.flags|=1,Qt(t,e,r,n),e.child;case 14:return r=e.type,i=Zn(r,e.pendingProps),i=Zn(r.type,i),Jw(t,e,r,i,n);case 15:return j2(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),pd(t,e),e.tag=1,hn(r)?(t=!0,Ud(e)):t=!1,Jo(e,n),c2(e,r,i),r0(e,r,i,n),o0(null,e,r,!0,t,n);case 19:return $2(t,e,n);case 22:return O2(t,e,n)}throw Error(M(156,e.tag))};function tT(t,e){return Ik(t,e)}function v5(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(t,e,n,r){return new v5(t,e,n,r)}function Tv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function x5(t){if(typeof t=="function")return Tv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hy)return 11;if(t===qy)return 14}return 2}function qi(t,e){var n=t.alternate;return n===null?(n=Un(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function vd(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Tv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case jo:return Fs(n.children,i,s,e);case Wy:o=8,i|=8;break;case Ig:return t=Un(12,n,e,i|2),t.elementType=Ig,t.lanes=s,t;case Cg:return t=Un(13,n,e,i),t.elementType=Cg,t.lanes=s,t;case Ag:return t=Un(19,n,e,i),t.elementType=Ag,t.lanes=s,t;case uk:return pf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case lk:o=10;break e;case ck:o=9;break e;case Hy:o=11;break e;case qy:o=14;break e;case bi:o=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=Un(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Fs(t,e,n,r){return t=Un(7,t,r,e),t.lanes=n,t}function pf(t,e,n,r){return t=Un(22,t,r,e),t.elementType=uk,t.lanes=n,t.stateNode={isHidden:!1},t}function yp(t,e,n){return t=Un(6,t,null,e),t.lanes=n,t}function vp(t,e,n){return e=Un(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function w5(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jm(0),this.expirationTimes=Jm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Iv(t,e,n,r,i,s,o,a,l){return t=new w5(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Un(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},uv(s),t}function _5(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Do,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function nT(t){if(!t)return es;t=t._reactInternals;e:{if(uo(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(hn(n))return t2(t,n,e)}return e}function rT(t,e,n,r,i,s,o,a,l){return t=Iv(n,r,!0,t,i,s,o,a,l),t.context=nT(null),n=t.current,r=en(),i=Hi(n),s=ei(r,i),s.callback=e??null,Ui(n,s,i),t.current.lanes=i,Fc(t,i,r),fn(t,r),t}function gf(t,e,n,r){var i=e.current,s=en(),o=Hi(i);return n=nT(n),e.context===null?e.context=n:e.pendingContext=n,e=ei(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ui(i,e,o),t!==null&&(lr(t,i,o,s),hd(t,i,o)),o}function nh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function u_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Cv(t,e){u_(t,e),(t=t.alternate)&&u_(t,e)}function E5(){return null}var iT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Av(t){this._internalRoot=t}yf.prototype.render=Av.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));gf(t,e,null,null)};yf.prototype.unmount=Av.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Gs(function(){gf(null,t,null,null)}),e[si]=null}};function yf(t){this._internalRoot=t}yf.prototype.unstable_scheduleHydration=function(t){if(t){var e=jk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ti.length&&e!==0&&e<Ti[n].priority;n++);Ti.splice(n,0,t),n===0&&Mk(t)}};function Rv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function d_(){}function S5(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=nh(o);s.call(c)}}var o=rT(e,r,t,0,null,!1,!1,"",d_);return t._reactRootContainer=o,t[si]=o.current,Xl(t.nodeType===8?t.parentNode:t),Gs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=nh(l);a.call(c)}}var l=Iv(t,0,!1,null,null,!1,!1,"",d_);return t._reactRootContainer=l,t[si]=l.current,Xl(t.nodeType===8?t.parentNode:t),Gs(function(){gf(e,l,n,r)}),l}function xf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=nh(o);a.call(l)}}gf(e,o,t,i)}else o=S5(n,e,t,i,r);return nh(o)}Nk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fl(e.pendingLanes);n!==0&&(Xy(e,n|1),fn(e,tt()),!(Ee&6)&&(pa=tt()+500,ms()))}break;case 13:Gs(function(){var r=oi(t,1);if(r!==null){var i=en();lr(r,t,1,i)}}),Cv(t,1)}};Qy=function(t){if(t.tag===13){var e=oi(t,134217728);if(e!==null){var n=en();lr(e,t,134217728,n)}Cv(t,134217728)}};Dk=function(t){if(t.tag===13){var e=Hi(t),n=oi(t,e);if(n!==null){var r=en();lr(n,t,e,r)}Cv(t,e)}};jk=function(){return Ie};Ok=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}};$g=function(t,e,n){switch(e){case"input":if(Ng(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=cf(r);if(!i)throw Error(M(90));hk(r),Ng(r,i)}}}break;case"textarea":mk(t,n);break;case"select":e=n.value,e!=null&&Ko(t,!!n.multiple,e,!1)}};_k=Sv;Ek=Gs;var b5={usingClientEntryPoint:!1,Events:[zc,Fo,cf,xk,wk,Sv]},il={findFiberByHostInstance:Cs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},k5={bundleType:il.bundleType,version:il.version,rendererPackageName:il.rendererPackageName,rendererConfig:il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=kk(t),t===null?null:t.stateNode},findFiberByHostInstance:il.findFiberByHostInstance||E5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ou.isDisabled&&Ou.supportsFiber)try{sf=Ou.inject(k5),Ir=Ou}catch{}}Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b5;Dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rv(e))throw Error(M(200));return _5(t,e,null,n)};Dn.createRoot=function(t,e){if(!Rv(t))throw Error(M(299));var n=!1,r="",i=iT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Iv(t,1,!1,null,null,n,!1,r,i),t[si]=e.current,Xl(t.nodeType===8?t.parentNode:t),new Av(e)};Dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=kk(e),t=t===null?null:t.stateNode,t};Dn.flushSync=function(t){return Gs(t)};Dn.hydrate=function(t,e,n){if(!vf(e))throw Error(M(200));return xf(null,t,e,!0,n)};Dn.hydrateRoot=function(t,e,n){if(!Rv(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=iT;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=rT(e,null,t,1,n??null,i,!1,s,o),t[si]=e.current,Xl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new yf(e)};Dn.render=function(t,e,n){if(!vf(e))throw Error(M(200));return xf(null,t,e,!1,n)};Dn.unmountComponentAtNode=function(t){if(!vf(t))throw Error(M(40));return t._reactRootContainer?(Gs(function(){xf(null,null,t,!1,function(){t._reactRootContainer=null,t[si]=null})}),!0):!1};Dn.unstable_batchedUpdates=Sv;Dn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!vf(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return xf(t,e,n,!1,r)};Dn.version="18.2.0-next-9e3b772b8-20220608";function sT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sT)}catch(t){console.error(t)}}sT(),rk.exports=Dn;var ho=rk.exports,h_=ho;kg.createRoot=h_.createRoot,kg.hydrateRoot=h_.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ga(){return ga=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ga.apply(this,arguments)}var Mi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Mi||(Mi={}));const f_="popstate";function T5(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=fo(i.location.hash.substr(1));return v0("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:rh(s))}function r(i,s){wf(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return C5(e,n,r,t)}function it(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function I5(){return Math.random().toString(36).substr(2,8)}function m_(t,e){return{usr:t.state,key:t.key,idx:e}}function v0(t,e,n,r){return n===void 0&&(n=null),ga({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?fo(e):e,{state:n,key:e&&e.key||r||I5()})}function rh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function fo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function C5(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Mi.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(ga({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Mi.Pop;let _=d(),v=_==null?null:_-c;c=_,l&&l({action:a,location:x.location,delta:v})}function m(_,v){a=Mi.Push;let g=v0(x.location,_,v);n&&n(g,_),c=d()+1;let w=m_(g,c),E=x.createHref(g);try{o.pushState(w,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(E)}s&&l&&l({action:a,location:x.location,delta:1})}function p(_,v){a=Mi.Replace;let g=v0(x.location,_,v);n&&n(g,_),c=d();let w=m_(g,c),E=x.createHref(g);o.replaceState(w,"",E),s&&l&&l({action:a,location:x.location,delta:0})}function y(_){let v=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof _=="string"?_:rh(_);return it(v,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,v)}let x={get action(){return a},get location(){return t(i,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(f_,h),l=_,()=>{i.removeEventListener(f_,h),l=null}},createHref(_){return e(i,_)},createURL:y,encodeLocation(_){let v=y(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:p,go(_){return o.go(_)}};return x}var p_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(p_||(p_={}));function A5(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?fo(e):e,i=Pv(r.pathname||"/",n);if(i==null)return null;let s=oT(t);R5(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=$5(s[a],V5(i));return o}function oT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(it(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Gi([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(it(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),oT(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:L5(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of aT(s.path))i(s,o,l)}),e}function aT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=aT(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function R5(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:F5(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const P5=/^:\w+$/,N5=3,D5=2,j5=1,O5=10,M5=-2,g_=t=>t==="*";function L5(t,e){let n=t.split("/"),r=n.length;return n.some(g_)&&(r+=M5),e&&(r+=D5),n.filter(i=>!g_(i)).reduce((i,s)=>i+(P5.test(s)?N5:s===""?j5:O5),r)}function F5(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function $5(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",d=z5({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!d)return null;Object.assign(r,d.params);let h=a.route;s.push({params:r,pathname:Gi([i,d.pathname]),pathnameBase:q5(Gi([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=Gi([i,d.pathnameBase]))}return s}function z5(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=B5(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,h)=>{if(d==="*"){let m=a[h]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}return c[d]=U5(a[h]||"",d),c},{}),pathname:s,pathnameBase:o,pattern:t}}function B5(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),wf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function V5(t){try{return decodeURI(t)}catch(e){return wf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function U5(t,e){try{return decodeURIComponent(t)}catch(n){return wf(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Pv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function W5(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?fo(t):t;return{pathname:n?n.startsWith("/")?n:H5(n,e):e,search:G5(r),hash:K5(i)}}function H5(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function xp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Nv(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Dv(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=fo(t):(i=ga({},t),it(!i.pathname||!i.pathname.includes("?"),xp("?","pathname","search",i)),it(!i.pathname||!i.pathname.includes("#"),xp("#","pathname","hash",i)),it(!i.search||!i.search.includes("#"),xp("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let h=e.length-1;if(o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;i.pathname=m.join("/")}a=h>=0?e[h]:"/"}let l=W5(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Gi=t=>t.join("/").replace(/\/\/+/g,"/"),q5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),G5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,K5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,X5=function(e,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let i=new Headers(r.headers);return i.set("Location",e),new Response(null,ga({},r,{headers:i}))};function Q5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const lT=["post","put","patch","delete"];new Set(lT);const Y5=["get",...lT];new Set(Y5);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ih(){return ih=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ih.apply(this,arguments)}const jv=f.createContext(null),J5=f.createContext(null),Ma=f.createContext(null),_f=f.createContext(null),Fr=f.createContext({outlet:null,matches:[],isDataRoute:!1}),cT=f.createContext(null);function Z5(t,e){let{relative:n}=e===void 0?{}:e;La()||it(!1);let{basename:r,navigator:i}=f.useContext(Ma),{hash:s,pathname:o,search:a}=dT(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Gi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function La(){return f.useContext(_f)!=null}function On(){return La()||it(!1),f.useContext(_f).location}function uT(t){f.useContext(Ma).static||f.useLayoutEffect(t)}function pn(){let{isDataRoute:t}=f.useContext(Fr);return t?mD():eD()}function eD(){La()||it(!1);let t=f.useContext(jv),{basename:e,navigator:n}=f.useContext(Ma),{matches:r}=f.useContext(Fr),{pathname:i}=On(),s=JSON.stringify(Nv(r).map(l=>l.pathnameBase)),o=f.useRef(!1);return uT(()=>{o.current=!0}),f.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=Dv(l,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Gi([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,s,i,t])}const tD=f.createContext(null);function nD(t){let e=f.useContext(Fr).outlet;return e&&f.createElement(tD.Provider,{value:t},e)}function Ef(){let{matches:t}=f.useContext(Fr),e=t[t.length-1];return e?e.params:{}}function dT(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=f.useContext(Fr),{pathname:i}=On(),s=JSON.stringify(Nv(r).map(o=>o.pathnameBase));return f.useMemo(()=>Dv(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}function rD(t,e){return iD(t,e)}function iD(t,e,n){La()||it(!1);let{navigator:r}=f.useContext(Ma),{matches:i}=f.useContext(Fr),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=On(),c;if(e){var d;let x=typeof e=="string"?fo(e):e;a==="/"||(d=x.pathname)!=null&&d.startsWith(a)||it(!1),c=x}else c=l;let h=c.pathname||"/",m=a==="/"?h:h.slice(a.length)||"/",p=A5(t,{pathname:m}),y=cD(p&&p.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:Gi([a,r.encodeLocation?r.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?a:Gi([a,r.encodeLocation?r.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,n);return e&&y?f.createElement(_f.Provider,{value:{location:ih({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Mi.Pop}},y):y}function sD(){let t=fD(),e=Q5(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},e),n?f.createElement("pre",{style:i},n):null,s)}const oD=f.createElement(sD,null);class aD extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?f.createElement(Fr.Provider,{value:this.props.routeContext},f.createElement(cT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lD(t){let{routeContext:e,match:n,children:r}=t,i=f.useContext(jv);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(Fr.Provider,{value:e},r)}function cD(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let s=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=s.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||it(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,l,c)=>{let d=l.route.id?o==null?void 0:o[l.route.id]:null,h=null;n&&(h=l.route.errorElement||oD);let m=e.concat(s.slice(0,c+1)),p=()=>{let y;return d?y=h:l.route.Component?y=f.createElement(l.route.Component,null):l.route.element?y=l.route.element:y=a,f.createElement(lD,{match:l,routeContext:{outlet:a,matches:m,isDataRoute:n!=null},children:y})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?f.createElement(aD,{location:n.location,revalidation:n.revalidation,component:h,error:d,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}var x0;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(x0||(x0={}));var ic;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(ic||(ic={}));function uD(t){let e=f.useContext(jv);return e||it(!1),e}function dD(t){let e=f.useContext(J5);return e||it(!1),e}function hD(t){let e=f.useContext(Fr);return e||it(!1),e}function hT(t){let e=hD(),n=e.matches[e.matches.length-1];return n.route.id||it(!1),n.route.id}function fD(){var t;let e=f.useContext(cT),n=dD(ic.UseRouteError),r=hT(ic.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function mD(){let{router:t}=uD(x0.UseNavigateStable),e=hT(ic.UseNavigateStable),n=f.useRef(!1);return uT(()=>{n.current=!0}),f.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ih({fromRouteId:e},s)))},[t,e])}function pD(t){let{to:e,replace:n,state:r,relative:i}=t;La()||it(!1);let{matches:s}=f.useContext(Fr),{pathname:o}=On(),a=pn(),l=Dv(e,Nv(s).map(d=>d.pathnameBase),o,i==="path"),c=JSON.stringify(l);return f.useEffect(()=>a(JSON.parse(c),{replace:n,state:r,relative:i}),[a,c,i,n,r]),null}function fT(t){return nD(t.context)}function Si(t){it(!1)}function gD(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Mi.Pop,navigator:s,static:o=!1}=t;La()&&it(!1);let a=e.replace(/^\/*/,"/"),l=f.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=fo(r));let{pathname:c="/",search:d="",hash:h="",state:m=null,key:p="default"}=r,y=f.useMemo(()=>{let x=Pv(c,a);return x==null?null:{location:{pathname:x,search:d,hash:h,state:m,key:p},navigationType:i}},[a,c,d,h,m,p,i]);return y==null?null:f.createElement(Ma.Provider,{value:l},f.createElement(_f.Provider,{children:n,value:y}))}function yD(t){let{children:e,location:n}=t;return rD(w0(e),n)}var y_;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(y_||(y_={}));new Promise(()=>{});function w0(t,e){e===void 0&&(e=[]);let n=[];return f.Children.forEach(t,(r,i)=>{if(!f.isValidElement(r))return;let s=[...e,i];if(r.type===f.Fragment){n.push.apply(n,w0(r.props.children,s));return}r.type!==Si&&it(!1),!r.props.index||!r.props.children||it(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=w0(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _0(){return _0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_0.apply(this,arguments)}function vD(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function xD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function wD(t,e){return t.button===0&&(!e||e==="_self")&&!xD(t)}const _D=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],ED="startTransition",v_=zy[ED];function SD(t){let{basename:e,children:n,future:r,window:i}=t,s=f.useRef();s.current==null&&(s.current=T5({window:i,v5Compat:!0}));let o=s.current,[a,l]=f.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=f.useCallback(h=>{c&&v_?v_(()=>l(h)):l(h)},[l,c]);return f.useLayoutEffect(()=>o.listen(d),[o,d]),f.createElement(gD,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const bD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kr=f.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d}=e,h=vD(e,_D),{basename:m}=f.useContext(Ma),p,y=!1;if(typeof c=="string"&&kD.test(c)&&(p=c,bD))try{let g=new URL(window.location.href),w=c.startsWith("//")?new URL(g.protocol+c):new URL(c),E=Pv(w.pathname,m);w.origin===g.origin&&E!=null?c=E+w.search+w.hash:y=!0}catch{}let x=Z5(c,{relative:i}),_=TD(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i});function v(g){r&&r(g),g.defaultPrevented||_(g)}return f.createElement("a",_0({},h,{href:p||x,onClick:y||s?r:v,ref:n,target:l}))});var x_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(x_||(x_={}));var w_;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(w_||(w_={}));function TD(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=pn(),l=On(),c=dT(t,{relative:o});return f.useCallback(d=>{if(wD(d,n)){d.preventDefault();let h=r!==void 0?r:rh(l)===rh(c);a(t,{replace:h,state:i,preventScrollReset:s,relative:o})}},[l,a,c,r,i,n,t,s,o])}function mT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=mT(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function ID(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=mT(t))&&(r&&(r+=" "),r+=e);return r}const __=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,E_=ID,pT=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return E_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const d=n==null?void 0:n[c],h=s==null?void 0:s[c];if(d===null)return null;const m=__(d)||__(h);return i[c][m]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,m]=d;return m===void 0||(c[h]=m),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:m,...p}=d;return Object.entries(p).every(y=>{let[x,_]=y;return Array.isArray(_)?_.includes({...s,...a}[x]):{...s,...a}[x]===_})?[...c,h,m]:c},[]);return E_(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function CD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75"}))}const AD=f.forwardRef(CD),gT=AD;function RD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const PD=f.forwardRef(RD),ND=PD;function DD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}))}const jD=f.forwardRef(DD),OD=jD;function MD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3"}))}const LD=f.forwardRef(MD),FD=LD;function $D({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const zD=f.forwardRef($D),Ks=zD;function BD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"}))}const VD=f.forwardRef(BD),Ov=VD;function UD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"}))}const WD=f.forwardRef(UD),HD=WD;function qD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}))}const GD=f.forwardRef(qD),yT=GD;function KD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953l7.108-4.062A1.125 1.125 0 0121 8.688v8.123zM11.25 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953L9.567 7.71a1.125 1.125 0 011.683.977v8.123z"}))}const XD=f.forwardRef(KD),QD=XD;function YD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const JD=f.forwardRef(YD),vT=JD;function ZD({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))}const ej=f.forwardRef(ZD),xd=ej;function tj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"}))}const nj=f.forwardRef(tj),rj=nj;function ij({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"}))}const sj=f.forwardRef(ij),oj=sj;function aj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const lj=f.forwardRef(aj),cj=lj;function uj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}const dj=f.forwardRef(uj),hj=dj;function fj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const mj=f.forwardRef(fj),wp=mj;function pj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"}))}const gj=f.forwardRef(pj),yj=gj;function vj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const xj=f.forwardRef(vj),xT=xj;function wj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const _j=f.forwardRef(wj),wT=_j;function Ej({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25"}))}const Sj=f.forwardRef(Ej),bj=Sj;function kj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const Tj=f.forwardRef(kj),Ij=Tj;function Cj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))}const Aj=f.forwardRef(Cj),Mv=Aj;function Rj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z"}))}const Pj=f.forwardRef(Rj),_T=Pj;function Nj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const Dj=f.forwardRef(Nj),ET=Dj;function jj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const Oj=f.forwardRef(jj),Mj=Oj;function Lj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const Fj=f.forwardRef(Lj),ST=Fj;function $j({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const zj=f.forwardRef($j),S_=zj;function Bj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"}))}const Vj=f.forwardRef(Bj),bT=Vj;function Uj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"}))}const Wj=f.forwardRef(Uj),ya=Wj;function Hj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}))}const qj=f.forwardRef(Hj),kT=qj;function Gj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Kj=f.forwardRef(Gj),Lv=Kj;function Xj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))}const Qj=f.forwardRef(Xj),TT=Qj;function Yj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"}))}const Jj=f.forwardRef(Yj),Fv=Jj;function Zj({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"}))}const eO=f.forwardRef(Zj),b_=eO;function tO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const nO=f.forwardRef(tO),sh=nO;function rO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const iO=f.forwardRef(rO),Li=iO;function sO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"}))}const oO=f.forwardRef(sO),aO=oO;function lO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"}))}const cO=f.forwardRef(lO),uO=cO;function dO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"}))}const hO=f.forwardRef(dO),fO=hO;function mO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75L19.5 12m0 0l2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6l4.72-4.72a.75.75 0 011.28.531V19.94a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.506-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.395C2.806 8.757 3.63 8.25 4.51 8.25H6.75z"}))}const pO=f.forwardRef(mO),gO=pO;function yO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"}))}const vO=f.forwardRef(yO),sc=vO;function xO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const wO=f.forwardRef(xO),oc=wO;function _O({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const EO=f.forwardRef(_O),SO=EO;function bO({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const kO=f.forwardRef(bO),Ps=kO,TO=pT("inline-flex font-[500] items-center ",{variants:{variant:{default:"",circle:"rounded-[99px] justify-center",list:"flex items-center py-[5px] w-full",primary:"px-[16px] py-[4px]",outline:"border rounded-full"},size:{clear:"",half:"w-1/2",full:"w-full",small:"px-[10px] py-[3px]",normal:"px-[16px] py-[4px]",large:"h-[40px] w-[40px]"},hover:{default:"hover:brightness-90",scale:"transition-transform hover:scale-[1.05]",clear:""}},defaultVariants:{variant:"default",size:"normal",hover:"default"}}),Q=({className:t,children:e,variant:n,size:r,disabled:i,isLoading:s,hover:o,onClick:a,...l})=>u.jsxs("button",{type:"button",onClick:c=>a?a(c):"",...l,className:TO({variant:n,size:r,hover:o,className:t}),disabled:s||i,children:[s?u.jsx(Ks,{className:"w-[22px] animate-spin"}):null,!s&&e]}),oh=[{name:"Red",id:"red",type:"dark",bottom_player_bg:"bg-[#3b1113]",side_bar_bg:"bg-[#391b1c]",content_text:"text-[#ca4954]",content_hover_text:"hover:text-[#ca4954]",content_border:"border-[#ca4954]",content_hover_border:"hover:border-[#ca4954]",content_bg:"!bg-[#ca4954]  text-[#fff]",content_code:"#ca4954",content_hover_bg:"hover:!bg-[#ca4954] hover:text-[#fff] ",container:"bg-[#2e0f10]"},{name:"Black",id:"black",type:"dark",bottom_player_bg:"bg-[#181818]",side_bar_bg:"bg-[#242424]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585]  text-[#fff]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff] ",container:"bg-[#1e1e1e]"},{name:"Deep blue",id:"deep_blue",type:"dark",bottom_player_bg:"bg-[#111f3b]",side_bar_bg:"bg-[#1b2639]",content_text:"text-[#0c9e85]",content_hover_text:"hover:text-[#0c9e85]",content_border:"border-[#0c9e85]",content_hover_border:"hover:border-[#0c9e85]",content_bg:"!bg-[#0c9e85]  text-[#fff]",content_code:"#0c9e85",content_hover_bg:"hover:!bg-[#0c9e85] hover:text-[#fff] ",container:"bg-[#0f1a2e]"},{name:"White",id:"white",type:"light",bottom_player_bg:"bg-[#fff]",side_bar_bg:"bg-[#f2f2f2]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585] text-[#fff]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff]",container:"bg-[#fff]"},{name:"Light green",id:"green_light",type:"light",bottom_player_bg:"bg-[#c0d8d8]",side_bar_bg:"bg-[#dde5e5]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585] text-[#fff]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff]",container:"bg-[#ced9d9]"},{name:"Brown",id:"gray",type:"light",bottom_player_bg:"bg-[#dedad1]",side_bar_bg:"bg-[#d9d7d4]",content_text:"text-[#644646]",content_hover_text:"hover:text-[#644646]",content_border:"border-[#644646]",content_hover_border:"hover:border-[#644646]",content_bg:"!bg-[#644646]  text-[#fff]",content_code:"#644646",content_hover_bg:"hover:!bg-[#644646] hover:text-[#fff]",container:"bg-[#e5e3df]"}],IO="End-Of-Stream";class rt extends Error{constructor(){super(IO)}}class CO{constructor(){this.maxStreamReadSize=1*1024*1024,this.endOfStream=!1,this.peekQueue=[]}async peek(e,n,r){const i=await this.read(e,n,r);return this.peekQueue.push(e.subarray(n,n+i)),i}async read(e,n,r){if(r===0)return 0;let i=this.readFromPeekBuffer(e,n,r);if(i+=await this.readRemainderFromStream(e,n+i,r-i),i===0)throw new rt;return i}readFromPeekBuffer(e,n,r){let i=r,s=0;for(;this.peekQueue.length>0&&i>0;){const o=this.peekQueue.pop();if(!o)throw new Error("peekData should be defined");const a=Math.min(o.length,i);e.set(o.subarray(0,a),n+s),s+=a,i-=a,a<o.length&&this.peekQueue.push(o.subarray(a))}return s}async readRemainderFromStream(e,n,r){let i=r,s=0;for(;i>0&&!this.endOfStream;){const o=Math.min(i,this.maxStreamReadSize),a=await this.readFromStream(e,n+s,o);if(a===0)break;s+=a,i-=a}return s}}class AO extends CO{constructor(e){super(),this.reader=e.getReader({mode:"byob"})}async readFromStream(e,n,r){if(this.endOfStream)throw new rt;const i=await this.reader.read(new Uint8Array(r));return i.done&&(this.endOfStream=i.done),i.value?(e.set(i.value,n),i.value.byteLength):0}}class IT{constructor(e){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=(e==null?void 0:e.fileInfo)??{},this.onClose=e==null?void 0:e.onClose}async readToken(e,n=this.position){const r=new Uint8Array(e.len);if(await this.readBuffer(r,{position:n})<e.len)throw new rt;return e.get(r,0)}async peekToken(e,n=this.position){const r=new Uint8Array(e.len);if(await this.peekBuffer(r,{position:n})<e.len)throw new rt;return e.get(r,0)}async readNumber(e){if(await this.readBuffer(this.numBuffer,{length:e.len})<e.len)throw new rt;return e.get(this.numBuffer,0)}async peekNumber(e){if(await this.peekBuffer(this.numBuffer,{length:e.len})<e.len)throw new rt;return e.get(this.numBuffer,0)}async ignore(e){if(this.fileInfo.size!==void 0){const n=this.fileInfo.size-this.position;if(e>n)return this.position+=n,n}return this.position+=e,e}async close(){var e;await((e=this.onClose)==null?void 0:e.call(this))}normalizeOptions(e,n){if(n&&n.position!==void 0&&n.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return n?{mayBeLess:n.mayBeLess===!0,offset:n.offset?n.offset:0,length:n.length?n.length:e.length-(n.offset?n.offset:0),position:n.position?n.position:this.position}:{mayBeLess:!1,offset:0,length:e.length,position:this.position}}}const RO=256e3;class PO extends IT{constructor(e,n){super(n),this.streamReader=e}async readBuffer(e,n){const r=this.normalizeOptions(e,n),i=r.position-this.position;if(i>0)return await this.ignore(i),this.readBuffer(e,n);if(i<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(r.length===0)return 0;const s=await this.streamReader.read(e,r.offset,r.length);if(this.position+=s,(!n||!n.mayBeLess)&&s<r.length)throw new rt;return s}async peekBuffer(e,n){const r=this.normalizeOptions(e,n);let i=0;if(r.position){const s=r.position-this.position;if(s>0){const o=new Uint8Array(r.length+s);return i=await this.peekBuffer(o,{mayBeLess:r.mayBeLess}),e.set(o.subarray(s),r.offset),i-s}if(s<0)throw new Error("Cannot peek from a negative offset in a stream")}if(r.length>0){try{i=await this.streamReader.peek(e,r.offset,r.length)}catch(s){if(n!=null&&n.mayBeLess&&s instanceof rt)return 0;throw s}if(!r.mayBeLess&&i<r.length)throw new rt}return i}async ignore(e){const n=Math.min(RO,e),r=new Uint8Array(n);let i=0;for(;i<e;){const s=e-i,o=await this.readBuffer(r,{length:Math.min(n,s)});if(o<0)return o;i+=o}return i}}class NO extends IT{constructor(e,n){super(n),this.uint8Array=e,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:e.length}async readBuffer(e,n){if(n!=null&&n.position){if(n.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=n.position}const r=await this.peekBuffer(e,n);return this.position+=r,r}async peekBuffer(e,n){const r=this.normalizeOptions(e,n),i=Math.min(this.uint8Array.length-r.position,r.length);if(!r.mayBeLess&&i<r.length)throw new rt;return e.set(this.uint8Array.subarray(r.position,r.position+i),r.offset),i}close(){return super.close()}}function CT(t,e){return new PO(new AO(t),e)}function va(t,e){return new NO(t,e)}/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Sf=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,c=l>>1,d=-7,h=n?i-1:0,m=n?-1:1,p=t[e+h];for(h+=m,s=p&(1<<-d)-1,p>>=-d,d+=a;d>0;s=s*256+t[e+h],h+=m,d-=8);for(o=s&(1<<-d)-1,s>>=-d,d+=r;d>0;o=o*256+t[e+h],h+=m,d-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(p?-1:1)*o*Math.pow(2,s-r)},bf=function(t,e,n,r,i,s){var o,a,l,c=s*8-i-1,d=(1<<c)-1,h=d>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:s-1,y=r?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=m/l:e+=m*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=d?(a=0,o=d):o+h>=1?(a=(e*l-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+p]=a&255,p+=y,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+p]=o&255,p+=y,o/=256,c-=8);t[n+p-y]|=x*128};function fe(t){return new DataView(t.buffer,t.byteOffset)}const pe={len:1,get(t,e){return fe(t).getUint8(e)},put(t,e,n){return fe(t).setUint8(e,n),e+1}},Te={len:2,get(t,e){return fe(t).getUint16(e,!0)},put(t,e,n){return fe(t).setUint16(e,n,!0),e+2}},Re={len:2,get(t,e){return fe(t).getUint16(e)},put(t,e,n){return fe(t).setUint16(e,n),e+2}},ah={len:3,get(t,e){const n=fe(t);return n.getUint8(e)+(n.getUint16(e+1,!0)<<8)},put(t,e,n){const r=fe(t);return r.setUint8(e,n&255),r.setUint16(e+1,n>>8,!0),e+3}},tn={len:3,get(t,e){const n=fe(t);return(n.getUint16(e)<<8)+n.getUint8(e+2)},put(t,e,n){const r=fe(t);return r.setUint16(e,n>>8),r.setUint8(e+2,n&255),e+3}},J={len:4,get(t,e){return fe(t).getUint32(e,!0)},put(t,e,n){return fe(t).setUint32(e,n,!0),e+4}},re={len:4,get(t,e){return fe(t).getUint32(e)},put(t,e,n){return fe(t).setUint32(e,n),e+4}},ac={len:1,get(t,e){return fe(t).getInt8(e)},put(t,e,n){return fe(t).setInt8(e,n),e+1}},Xr={len:2,get(t,e){return fe(t).getInt16(e)},put(t,e,n){return fe(t).setInt16(e,n),e+2}},DO={len:2,get(t,e){return fe(t).getInt16(e,!0)},put(t,e,n){return fe(t).setInt16(e,n,!0),e+2}},jO={len:3,get(t,e){const n=ah.get(t,e);return n>8388607?n-16777216:n},put(t,e,n){const r=fe(t);return r.setUint8(e,n&255),r.setUint16(e+1,n>>8,!0),e+3}},$v={len:3,get(t,e){const n=tn.get(t,e);return n>8388607?n-16777216:n},put(t,e,n){const r=fe(t);return r.setUint16(e,n>>8),r.setUint8(e+2,n&255),e+3}},In={len:4,get(t,e){return fe(t).getInt32(e)},put(t,e,n){return fe(t).setInt32(e,n),e+4}},et={len:4,get(t,e){return fe(t).getInt32(e,!0)},put(t,e,n){return fe(t).setInt32(e,n,!0),e+4}},Yt={len:8,get(t,e){return fe(t).getBigUint64(e,!0)},put(t,e,n){return fe(t).setBigUint64(e,n,!0),e+8}},lh={len:8,get(t,e){return fe(t).getBigInt64(e,!0)},put(t,e,n){return fe(t).setBigInt64(e,n,!0),e+8}},zv={len:8,get(t,e){return fe(t).getBigUint64(e)},put(t,e,n){return fe(t).setBigUint64(e,n),e+8}},AT={len:8,get(t,e){return fe(t).getBigInt64(e)},put(t,e,n){return fe(t).setBigInt64(e,n),e+8}},OO={len:2,get(t,e){return Sf(t,e,!1,10,this.len)},put(t,e,n){return bf(t,n,e,!1,10,this.len),e+this.len}},MO={len:2,get(t,e){return Sf(t,e,!0,10,this.len)},put(t,e,n){return bf(t,n,e,!0,10,this.len),e+this.len}},RT={len:4,get(t,e){return fe(t).getFloat32(e)},put(t,e,n){return fe(t).setFloat32(e,n),e+4}},LO={len:4,get(t,e){return fe(t).getFloat32(e,!0)},put(t,e,n){return fe(t).setFloat32(e,n,!0),e+4}},E0={len:8,get(t,e){return fe(t).getFloat64(e)},put(t,e,n){return fe(t).setFloat64(e,n),e+8}},FO={len:8,get(t,e){return fe(t).getFloat64(e,!0)},put(t,e,n){return fe(t).setFloat64(e,n,!0),e+8}},$O={len:10,get(t,e){return Sf(t,e,!1,63,this.len)},put(t,e,n){return bf(t,n,e,!1,63,this.len),e+this.len}},zO={len:10,get(t,e){return Sf(t,e,!0,63,this.len)},put(t,e,n){return bf(t,n,e,!0,63,this.len),e+this.len}};class BO{constructor(e){this.len=e}get(e,n){}}class on{constructor(e){this.len=e}get(e,n){return e.subarray(n,n+this.len)}}class ne{constructor(e,n){this.len=e,this.encoding=n,this.textDecoder=new TextDecoder(n)}get(e,n){return this.textDecoder.decode(e.subarray(n,n+this.len))}}class VO{constructor(e){this.len=e,this.textDecoder=new TextDecoder("windows-1252")}get(e,n=0){return this.textDecoder.decode(e.subarray(n,n+this.len))}}const UO=Object.freeze(Object.defineProperty({__proto__:null,AnsiStringType:VO,Float16_BE:OO,Float16_LE:MO,Float32_BE:RT,Float32_LE:LO,Float64_BE:E0,Float64_LE:FO,Float80_BE:$O,Float80_LE:zO,INT16_BE:Xr,INT16_LE:DO,INT24_BE:$v,INT24_LE:jO,INT32_BE:In,INT32_LE:et,INT64_BE:AT,INT64_LE:lh,INT8:ac,IgnoreType:BO,StringType:ne,UINT16_BE:Re,UINT16_LE:Te,UINT24_BE:tn,UINT24_LE:ah,UINT32_BE:re,UINT32_LE:J,UINT64_BE:zv,UINT64_LE:Yt,UINT8:pe,Uint8ArrayType:on},Symbol.toStringTag,{value:"Module"})),WO=Object.prototype.toString,HO="[object Uint8Array]",qO="[object ArrayBuffer]";function PT(t,e,n){return t?t.constructor===e?!0:WO.call(t)===n:!1}function NT(t){return PT(t,Uint8Array,HO)}function GO(t){return PT(t,ArrayBuffer,qO)}function KO(t){return NT(t)||GO(t)}function XO(t){if(!NT(t))throw new TypeError(`Expected \`Uint8Array\`, got \`${typeof t}\``)}function QO(t){if(!KO(t))throw new TypeError(`Expected \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof t}\``)}const Mu={utf8:new globalThis.TextDecoder("utf8")};function Bv(t,e="utf8"){return QO(t),Mu[e]??(Mu[e]=new globalThis.TextDecoder(e)),Mu[e].decode(t)}function DT(t){if(typeof t!="string")throw new TypeError(`Expected \`string\`, got \`${typeof t}\``)}const YO=new globalThis.TextEncoder;function JO(t){return DT(t),YO.encode(t)}const ZO=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Vv(t){XO(t);let e="";for(let n=0;n<t.length;n++)e+=ZO[t[n]];return e}const k_={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,A:10,B:11,C:12,D:13,E:14,F:15};function T_(t){if(DT(t),t.length%2!==0)throw new Error("Invalid Hex string length.");const e=t.length/2,n=new Uint8Array(e);for(let r=0;r<e;r++){const i=k_[t[r*2]],s=k_[t[r*2+1]];if(i===void 0||s===void 0)throw new Error(`Invalid Hex character encountered at position ${r*2}`);n[r]=i<<4|s}return n}function I_(t){const{byteLength:e}=t;if(e===6)return t.getUint16(0)*2**32+t.getUint32(2);if(e===5)return t.getUint8(0)*2**32+t.getUint32(1);if(e===4)return t.getUint32(0);if(e===3)return t.getUint8(0)*2**16+t.getUint16(1);if(e===2)return t.getUint16(0);if(e===1)return t.getUint8(0)}function jT(t,e){const n=t.length,r=e.length;if(r===0||r>n)return-1;const i=n-r;for(let s=0;s<=i;s++){let o=!0;for(let a=0;a<r;a++)if(t[s+a]!==e[a]){o=!1;break}if(o)return s}return-1}function eM(t,e){return jT(t,e)!==-1}function tM(t){return[...t].map(e=>e.charCodeAt(0))}function nM(t,e=0){const n=Number.parseInt(new ne(6).get(t,148).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(n))return!1;let r=8*32;for(let i=e;i<e+148;i++)r+=t[i];for(let i=e+156;i<e+512;i++)r+=t[i];return n===r}const rM={get:(t,e)=>t[e+3]&127|t[e+2]<<7|t[e+1]<<14|t[e]<<21,len:4},iM=["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","elf","macho","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","j2c","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf","jls","pst","dwg","parquet","class","arj","cpio","ace","avro","icc","fbx","vsdx"],sM=["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/wav","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-elf","application/x-mach-binary","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/j2c","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd","image/jls","application/vnd.ms-outlook","image/vnd.dwg","application/x-parquet","application/java-vm","application/x-arj","application/x-cpio","application/x-ace-compressed","application/avro","application/vnd.iccprofile","application/x.autodesk.fbx","application/vnd.visio"],C_=4100;async function OT(t){return new oM().fromBuffer(t)}function pr(t,e,n){n={offset:0,...n};for(const[r,i]of e.entries())if(n.mask){if(i!==(n.mask[r]&t[r+n.offset]))return!1}else if(i!==t[r+n.offset])return!1;return!0}class oM{constructor(e){this.detectors=e==null?void 0:e.customDetectors,this.fromTokenizer=this.fromTokenizer.bind(this),this.fromBuffer=this.fromBuffer.bind(this),this.parse=this.parse.bind(this)}async fromTokenizer(e){const n=e.position;for(const r of this.detectors||[]){const i=await r(e);if(i)return i;if(n!==e.position)return}return this.parse(e)}async fromBuffer(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof e}\``);const n=e instanceof Uint8Array?e:new Uint8Array(e);if((n==null?void 0:n.length)>1)return this.fromTokenizer(va(n))}async fromBlob(e){return this.fromStream(e.stream())}async fromStream(e){const n=await CT(e);try{return await this.fromTokenizer(n)}finally{await n.close()}}async toDetectionStream(e,n){const{sampleSize:r=C_}=n;let i,s;const o=e.getReader({mode:"byob"});try{const{value:c,done:d}=await o.read(new Uint8Array(r));if(s=c,!d&&c)try{i=await this.fromBuffer(c.slice(0,r))}catch(h){if(!(h instanceof rt))throw h;i=void 0}s=c}finally{o.releaseLock()}const a=new TransformStream({async start(c){c.enqueue(s)},transform(c,d){d.enqueue(c)}}),l=e.pipeThrough(a);return l.fileType=i,l}check(e,n){return pr(this.buffer,e,n)}checkString(e,n){return this.check(tM(e),n)}async parse(e){if(this.buffer=new Uint8Array(C_),e.fileInfo.size===void 0&&(e.fileInfo.size=Number.MAX_SAFE_INTEGER),this.tokenizer=e,await e.peekBuffer(this.buffer,{length:12,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33]))return await e.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.parse(e);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await e.ignore(6);const n=await e.readToken(rM);return e.position+n>e.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await e.ignore(n),this.fromTokenizer(e))}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((this.buffer[0]===67||this.buffer[0]===70)&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255]))return this.check([247],{offset:3})?{ext:"jls",mime:"image/jls"}:{ext:"jpg",mime:"image/jpeg"};if(this.check([79,98,106,1]))return{ext:"avro",mime:"application/avro"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){try{for(;e.position+30<e.fileInfo.size;){await e.readBuffer(this.buffer,{length:30});const n=new DataView(this.buffer.buffer),r={compressedSize:n.getUint32(18,!0),uncompressedSize:n.getUint32(22,!0),filenameLength:n.getUint16(26,!0),extraFieldLength:n.getUint16(28,!0)};if(r.filename=await e.readToken(new ne(r.filenameLength,"utf-8")),await e.ignore(r.extraFieldLength),r.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(r.filename.endsWith(".rels")||r.filename.endsWith(".xml"))switch(r.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};case"visio":return{ext:"vsdx",mime:"application/vnd.visio"};default:break}if(r.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(r.filename.startsWith("3D/")&&r.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(r.filename==="mimetype"&&r.compressedSize===r.uncompressedSize){let i=await e.readToken(new ne(r.compressedSize,"utf-8"));switch(i=i.trim(),i){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}}if(r.compressedSize===0){let i=-1;for(;i<0&&e.position<e.fileInfo.size;)await e.peekBuffer(this.buffer,{mayBeLess:!0}),i=jT(this.buffer,new Uint8Array([80,75,3,4])),await e.ignore(i>=0?i:this.buffer.length)}else await e.ignore(r.compressedSize)}}catch(n){if(!(n instanceof rt))throw n}return{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await e.ignore(28);const n=new Uint8Array(8);return await e.readBuffer(n),pr(n,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:pr(n,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:pr(n,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:pr(n,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:pr(n,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:pr(n,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(this.buffer[2]===3||this.buffer[2]===5||this.buffer[2]===7)&&(this.buffer[3]===4||this.buffer[3]===6||this.buffer[3]===8))return{ext:"zip",mime:"application/zip"};if(this.checkString("ftyp",{offset:4})&&this.buffer[8]&96){const n=new ne(4,"latin1").get(this.buffer,8).replace("\0"," ").trim();switch(n){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return n.startsWith("3g")?n.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF")){try{await e.ignore(1350);const n=10*1024*1024,r=new Uint8Array(Math.min(n,e.fileInfo.size));if(await e.readBuffer(r,{mayBeLess:!0}),eM(r,new TextEncoder().encode("AIPrivateData")))return{ext:"ai",mime:"application/postscript"}}catch(n){if(!(n instanceof rt))throw n}return{ext:"pdf",mime:"application/pdf"}}if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){const n=await this.readTiffHeader(!1);if(n)return n}if(this.check([77,77])){const n=await this.readTiffHeader(!0);if(n)return n}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function n(){const a=await e.peekNumber(pe);let l=128,c=0;for(;!(a&l)&&l!==0;)++c,l>>=1;const d=new Uint8Array(c+1);return await e.readBuffer(d),d}async function r(){const a=await n(),l=await n();l[0]^=128>>l.length-1;const c=Math.min(6,l.length),d=new DataView(a.buffer),h=new DataView(l.buffer,l.length-c,c);return{id:I_(d),len:I_(h)}}async function i(a){for(;a>0;){const l=await r();if(l.id===17026)return(await e.readToken(new ne(l.len))).replaceAll(/\00.*$/g,"");await e.ignore(l.len),--a}}const s=await r();switch(await i(s.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(this.check([82,73,70,70])){if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/wav"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1"))return{ext:"parquet",mime:"application/x-parquet"};if(this.check([207,250,237,254]))return{ext:"macho",mime:"application/x-mach-binary"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190]))return{ext:"class",mime:"application/java-vm"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(this.buffer[6]===0||this.buffer[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){const n=new ne(4,"latin1").get(this.buffer,2);if(n.match("^d*")&&n>=1e3&&n<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>"))return await e.ignore(8),await e.readToken(new ne(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(this.checkString("**ACE",{offset:7})&&(await e.peekBuffer(this.buffer,{length:14,mayBeLess:!0}),this.checkString("**",{offset:12})))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.check([137,80,78,71,13,10,26,10])){await e.ignore(8);async function n(){return{length:await e.readToken(In),type:await e.readToken(new ne(4,"latin1"))}}do{const r=await n();if(r.length<0)return;switch(r.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await e.ignore(r.length+4)}}while(e.position+8<e.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function n(){const r=new Uint8Array(16);return await e.readBuffer(r),{id:r,size:Number(await e.readToken(Yt))}}for(await e.ignore(30);e.position+24<e.fileInfo.size;){const r=await n();let i=r.size-24;if(pr(r.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const s=new Uint8Array(16);if(i-=await e.readBuffer(s),pr(s,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(pr(s,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await e.ignore(i)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await e.ignore(20),await e.readToken(new ne(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255]))return this.check([0,60,0,63,0,120,0,109,0,108],{offset:2})?{ext:"xml",mime:"application/xml"}:void 0;if(this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await e.peekBuffer(this.buffer,{length:Math.min(256,e.fileInfo.size),mayBeLess:!0}),this.check([97,99,115,112],{offset:36}))return{ext:"icc",mime:"application/vnd.iccprofile"};if(this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){const n=new DataView(this.buffer.buffer).getUint32(12,!0);if(n>12&&this.buffer.length>=n+16)try{const r=new TextDecoder().decode(this.buffer.slice(16,n+16));if(JSON.parse(r).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.checkString("Kaydara FBX Binary  \0"))return{ext:"fbx",mime:"application/x.autodesk.fbx"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await e.peekBuffer(this.buffer,{length:Math.min(512,e.fileInfo.size),mayBeLess:!0}),nM(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254]))return this.check([60,0,63,0,120,0,109,0,108,0],{offset:2})?{ext:"xml",mime:"application/xml"}:this.check([255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0],{offset:2})?{ext:"skp",mime:"application/vnd.sketchup.skp"}:void 0;if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(this.buffer.length>=2&&this.check([255,224],{offset:0,mask:[255,224]})){if(this.check([16],{offset:1,mask:[22]}))return this.check([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(this.check([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}async readTiffTag(e){const n=await this.tokenizer.readToken(e?Re:Te);switch(this.tokenizer.ignore(10),n){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"}}}async readTiffIFD(e){const n=await this.tokenizer.readToken(e?Re:Te);for(let r=0;r<n;++r){const i=await this.readTiffTag(e);if(i)return i}}async readTiffHeader(e){const n=(e?Re:Te).get(this.buffer,2),r=(e?re:J).get(this.buffer,4);if(n===42){if(r>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(r>=8&&(this.check([28,0,254,0],{offset:8})||this.check([31,0,11,0],{offset:8})))return{ext:"nef",mime:"image/x-nikon-nef"}}return await this.tokenizer.ignore(r),await this.readTiffIFD(e)??{ext:"tif",mime:"image/tiff"}}if(n===43)return{ext:"tif",mime:"image/tiff"}}}new Set(iM);new Set(sM);var Uv={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var A_=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,aM=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,MT=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,lM=/\\([\u000b\u0020-\u00ff])/g,cM=/([\\"])/g,LT=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;Uv.format=uM;Uv.parse=dM;function uM(t){if(!t||typeof t!="object")throw new TypeError("argument obj is required");var e=t.parameters,n=t.type;if(!n||!LT.test(n))throw new TypeError("invalid type");var r=n;if(e&&typeof e=="object")for(var i,s=Object.keys(e).sort(),o=0;o<s.length;o++){if(i=s[o],!MT.test(i))throw new TypeError("invalid parameter name");r+="; "+i+"="+fM(e[i])}return r}function dM(t){if(!t)throw new TypeError("argument string is required");var e=typeof t=="object"?hM(t):t;if(typeof e!="string")throw new TypeError("argument string is required to be a string");var n=e.indexOf(";"),r=n!==-1?e.slice(0,n).trim():e.trim();if(!LT.test(r))throw new TypeError("invalid media type");var i=new mM(r.toLowerCase());if(n!==-1){var s,o,a;for(A_.lastIndex=n;o=A_.exec(e);){if(o.index!==n)throw new TypeError("invalid parameter format");n+=o[0].length,s=o[1].toLowerCase(),a=o[2],a.charCodeAt(0)===34&&(a=a.slice(1,-1),a.indexOf("\\")!==-1&&(a=a.replace(lM,"$1"))),i.parameters[s]=a}if(n!==e.length)throw new TypeError("invalid parameter format")}return i}function hM(t){var e;if(typeof t.getHeader=="function"?e=t.getHeader("content-type"):typeof t.headers=="object"&&(e=t.headers&&t.headers["content-type"]),typeof e!="string")throw new TypeError("content-type header is missing from object");return e}function fM(t){var e=String(t);if(MT.test(e))return e;if(e.length>0&&!aM.test(e))throw new TypeError("invalid parameter value");return'"'+e.replace(cM,"\\$1")+'"'}function mM(t){this.parameters=Object.create(null),this.type=t}/*!
 * media-typer
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */var pM=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/,gM=yM;function yM(t){if(!t)throw new TypeError("argument string is required");if(typeof t!="string")throw new TypeError("argument string is required to be a string");var e=pM.exec(t.toLowerCase());if(!e)throw new TypeError("invalid media type");var n=e[1],r=e[2],i,s=r.lastIndexOf("+");return s!==-1&&(i=r.substr(s+1),r=r.substr(0,s)),new vM(n,r,i)}function vM(t,e,n){this.type=t,this.subtype=e,this.suffix=n}var S0={exports:{}},_p,R_;function xM(){if(R_)return _p;R_=1;var t=1e3,e=t*60,n=e*60,r=n*24,i=r*7,s=r*365.25;_p=function(d,h){h=h||{};var m=typeof d;if(m==="string"&&d.length>0)return o(d);if(m==="number"&&isFinite(d))return h.long?l(d):a(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function o(d){if(d=String(d),!(d.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(h){var m=parseFloat(h[1]),p=(h[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return m*s;case"weeks":case"week":case"w":return m*i;case"days":case"day":case"d":return m*r;case"hours":case"hour":case"hrs":case"hr":case"h":return m*n;case"minutes":case"minute":case"mins":case"min":case"m":return m*e;case"seconds":case"second":case"secs":case"sec":case"s":return m*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function a(d){var h=Math.abs(d);return h>=r?Math.round(d/r)+"d":h>=n?Math.round(d/n)+"h":h>=e?Math.round(d/e)+"m":h>=t?Math.round(d/t)+"s":d+"ms"}function l(d){var h=Math.abs(d);return h>=r?c(d,h,r,"day"):h>=n?c(d,h,n,"hour"):h>=e?c(d,h,e,"minute"):h>=t?c(d,h,t,"second"):d+" ms"}function c(d,h,m,p){var y=h>=m*1.5;return Math.round(d/m)+" "+p+(y?"s":"")}return _p}function wM(t){n.debug=n,n.default=n,n.coerce=l,n.disable=s,n.enable=i,n.enabled=o,n.humanize=xM(),n.destroy=c,Object.keys(t).forEach(d=>{n[d]=t[d]}),n.names=[],n.skips=[],n.formatters={};function e(d){let h=0;for(let m=0;m<d.length;m++)h=(h<<5)-h+d.charCodeAt(m),h|=0;return n.colors[Math.abs(h)%n.colors.length]}n.selectColor=e;function n(d){let h,m=null,p,y;function x(..._){if(!x.enabled)return;const v=x,g=Number(new Date),w=g-(h||g);v.diff=w,v.prev=h,v.curr=g,h=g,_[0]=n.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let E=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(T,k)=>{if(T==="%%")return"%";E++;const b=n.formatters[k];if(typeof b=="function"){const P=_[E];T=b.call(v,P),_.splice(E,1),E--}return T}),n.formatArgs.call(v,_),(v.log||n.log).apply(v,_)}return x.namespace=d,x.useColors=n.useColors(),x.color=n.selectColor(d),x.extend=r,x.destroy=n.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(p!==n.namespaces&&(p=n.namespaces,y=n.enabled(d)),y),set:_=>{m=_}}),typeof n.init=="function"&&n.init(x),x}function r(d,h){const m=n(this.namespace+(typeof h>"u"?":":h)+d);return m.log=this.log,m}function i(d){n.save(d),n.namespaces=d,n.names=[],n.skips=[];let h;const m=(typeof d=="string"?d:"").split(/[\s,]+/),p=m.length;for(h=0;h<p;h++)m[h]&&(d=m[h].replace(/\*/g,".*?"),d[0]==="-"?n.skips.push(new RegExp("^"+d.slice(1)+"$")):n.names.push(new RegExp("^"+d+"$")))}function s(){const d=[...n.names.map(a),...n.skips.map(a).map(h=>"-"+h)].join(",");return n.enable(""),d}function o(d){if(d[d.length-1]==="*")return!0;let h,m;for(h=0,m=n.skips.length;h<m;h++)if(n.skips[h].test(d))return!1;for(h=0,m=n.names.length;h<m;h++)if(n.names[h].test(d))return!0;return!1}function a(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function l(d){return d instanceof Error?d.stack||d.message:d}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var _M=wM;(function(t,e){e.formatArgs=r,e.save=i,e.load=s,e.useColors=n,e.storage=o(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;l.splice(1,0,c,"color: inherit");let d=0,h=0;l[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(d++,m==="%c"&&(h=d))}),l.splice(h,0,c)}e.log=console.debug||console.log||(()=>{});function i(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function s(){let l;try{l=e.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l={}.DEBUG),l}function o(){try{return localStorage}catch{}}t.exports=_M(e);const{formatters:a}=t.exports;a.j=function(l){try{return JSON.stringify(l)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}})(S0,S0.exports);var EM=S0.exports;const De=Hb(EM);var b0;(function(t){t[t.shot=10]="shot",t[t.scene=20]="scene",t[t.track=30]="track",t[t.part=40]="part",t[t.album=50]="album",t[t.edition=60]="edition",t[t.collection=70]="collection"})(b0||(b0={}));var Xs;(function(t){t[t.video=1]="video",t[t.audio=2]="audio",t[t.complex=3]="complex",t[t.logo=4]="logo",t[t.subtitle=17]="subtitle",t[t.button=18]="button",t[t.control=32]="control"})(Xs||(Xs={}));function Qe(t,e,n){return(t[e]&1<<n)!==0}function yn(t,e,n,r){let i=e;if(r==="utf-16le"){for(;t[i]!==0||t[i+1]!==0;){if(i>=n)return n;i+=2}return i}for(;t[i]!==0;){if(i>=n)return n;i++}return i}function FT(t){const e=t.indexOf("\0");return e===-1?t:t.substr(0,e)}function SM(t){const e=t.length;if(e&1)throw new Error("Buffer length must be even");for(let n=0;n<e;n+=2){const r=t[n];t[n]=t[n+1],t[n+1]=r}return t}function ft(t,e){if(t[0]===255&&t[1]===254)return ft(t.subarray(2),e);if(e==="utf-16le"&&t[0]===254&&t[1]===255){if(t.length&1)throw new Error("Expected even number of octets for 16-bit unicode string");return ft(SM(t),e)}return new ne(t.length,e).get(t,0)}function Ci(t){return t=t.replace(/^\x00+/g,""),t=t.replace(/\x00+$/g,""),t}function xe(t,e,n,r){const i=e+~~(n/8),s=n%8;let o=t[i];o&=255>>s;const a=8-s,l=r-a;return l<0?o>>=8-s-r:l>0&&(o<<=l,o|=xe(t,e,n+a,l)),o}function _n(t,e,n){return xe(t,e,n,1)===1}function bM(t){const e=[];for(let n=0,r=t.length;n<r;n++){const i=Number(t.charCodeAt(n)).toString(16);e.push(i.length===1?`0${i}`:i)}return e.join(" ")}function kM(t){return 10*Math.log10(t)}function TM(t){return 10**(t/10)}function IM(t){const e=t.split(" ").map(n=>n.trim().toLowerCase());if(e.length>=1){const n=Number.parseFloat(e[0]);return e.length===2&&e[1]==="db"?{dB:n,ratio:TM(n)}:{dB:kM(n),ratio:n}}}var lc;(function(t){t[t.Other=0]="Other",t[t["32x32 pixels 'file icon' (PNG only)"]=1]="32x32 pixels 'file icon' (PNG only)",t[t["Other file icon"]=2]="Other file icon",t[t["Cover (front)"]=3]="Cover (front)",t[t["Cover (back)"]=4]="Cover (back)",t[t["Leaflet page"]=5]="Leaflet page",t[t["Media (e.g. label side of CD)"]=6]="Media (e.g. label side of CD)",t[t["Lead artist/lead performer/soloist"]=7]="Lead artist/lead performer/soloist",t[t["Artist/performer"]=8]="Artist/performer",t[t.Conductor=9]="Conductor",t[t["Band/Orchestra"]=10]="Band/Orchestra",t[t.Composer=11]="Composer",t[t["Lyricist/text writer"]=12]="Lyricist/text writer",t[t["Recording Location"]=13]="Recording Location",t[t["During recording"]=14]="During recording",t[t["During performance"]=15]="During performance",t[t["Movie/video screen capture"]=16]="Movie/video screen capture",t[t["A bright coloured fish"]=17]="A bright coloured fish",t[t.Illustration=18]="Illustration",t[t["Band/artist logotype"]=19]="Band/artist logotype",t[t["Publisher/Studio logotype"]=20]="Publisher/Studio logotype"})(lc||(lc={}));var P_;(function(t){t[t.other=0]="other",t[t.lyrics=1]="lyrics",t[t.text=2]="text",t[t.movement_part=3]="movement_part",t[t.events=4]="events",t[t.chord=5]="chord",t[t.trivia_pop=6]="trivia_pop"})(P_||(P_={}));var N_;(function(t){t[t.notSynchronized0=0]="notSynchronized0",t[t.mpegFrameNumber=1]="mpegFrameNumber",t[t.milliseconds=2]="milliseconds"})(N_||(N_={}));const $T={get:(t,e)=>t[e+3]&127|t[e+2]<<7|t[e+1]<<14|t[e]<<21,len:4},k0={len:10,get:(t,e)=>({fileIdentifier:new ne(3,"ascii").get(t,e),version:{major:ac.get(t,e+3),revision:ac.get(t,e+4)},flags:{unsynchronisation:Qe(t,e+5,7),isExtendedHeader:Qe(t,e+5,6),expIndicator:Qe(t,e+5,5),footer:Qe(t,e+5,4)},size:$T.get(t,e+6)})},D_={len:10,get:(t,e)=>({size:re.get(t,e),extendedFlags:Re.get(t,e+4),sizeOfPadding:re.get(t,e+6),crcDataPresent:Qe(t,e+4,31)})},zT={len:1,get:(t,e)=>{switch(t[e]){case 0:return{encoding:"latin1"};case 1:return{encoding:"utf-16le",bom:!0};case 2:return{encoding:"utf-16le",bom:!1};case 3:return{encoding:"utf8",bom:!1};default:return{encoding:"utf8",bom:!1}}}},T0={len:4,get:(t,e)=>({encoding:zT.get(t,e),language:new ne(3,"latin1").get(t,e+1)})},j_={len:6,get:(t,e)=>{const n=T0.get(t,e);return{encoding:n.encoding,language:n.language,timeStampFormat:pe.get(t,e+4),contentType:pe.get(t,e+5)}}},ch={year:{multiple:!1},track:{multiple:!1},disk:{multiple:!1},title:{multiple:!1},artist:{multiple:!1},artists:{multiple:!0,unique:!0},albumartist:{multiple:!1},album:{multiple:!1},date:{multiple:!1},originaldate:{multiple:!1},originalyear:{multiple:!1},releasedate:{multiple:!1},comment:{multiple:!0,unique:!1},genre:{multiple:!0,unique:!0},picture:{multiple:!0,unique:!0},composer:{multiple:!0,unique:!0},lyrics:{multiple:!0,unique:!1},albumsort:{multiple:!1,unique:!0},titlesort:{multiple:!1,unique:!0},work:{multiple:!1,unique:!0},artistsort:{multiple:!1,unique:!0},albumartistsort:{multiple:!1,unique:!0},composersort:{multiple:!1,unique:!0},lyricist:{multiple:!0,unique:!0},writer:{multiple:!0,unique:!0},conductor:{multiple:!0,unique:!0},remixer:{multiple:!0,unique:!0},arranger:{multiple:!0,unique:!0},engineer:{multiple:!0,unique:!0},producer:{multiple:!0,unique:!0},technician:{multiple:!0,unique:!0},djmixer:{multiple:!0,unique:!0},mixer:{multiple:!0,unique:!0},label:{multiple:!0,unique:!0},grouping:{multiple:!1},subtitle:{multiple:!0},discsubtitle:{multiple:!1},totaltracks:{multiple:!1},totaldiscs:{multiple:!1},compilation:{multiple:!1},rating:{multiple:!0},bpm:{multiple:!1},mood:{multiple:!1},media:{multiple:!1},catalognumber:{multiple:!0,unique:!0},tvShow:{multiple:!1},tvShowSort:{multiple:!1},tvSeason:{multiple:!1},tvEpisode:{multiple:!1},tvEpisodeId:{multiple:!1},tvNetwork:{multiple:!1},podcast:{multiple:!1},podcasturl:{multiple:!1},releasestatus:{multiple:!1},releasetype:{multiple:!0},releasecountry:{multiple:!1},script:{multiple:!1},language:{multiple:!1},copyright:{multiple:!1},license:{multiple:!1},encodedby:{multiple:!1},encodersettings:{multiple:!1},gapless:{multiple:!1},barcode:{multiple:!1},isrc:{multiple:!0},asin:{multiple:!1},musicbrainz_recordingid:{multiple:!1},musicbrainz_trackid:{multiple:!1},musicbrainz_albumid:{multiple:!1},musicbrainz_artistid:{multiple:!0},musicbrainz_albumartistid:{multiple:!0},musicbrainz_releasegroupid:{multiple:!1},musicbrainz_workid:{multiple:!1},musicbrainz_trmid:{multiple:!1},musicbrainz_discid:{multiple:!1},acoustid_id:{multiple:!1},acoustid_fingerprint:{multiple:!1},musicip_puid:{multiple:!1},musicip_fingerprint:{multiple:!1},website:{multiple:!1},"performer:instrument":{multiple:!0,unique:!0},averageLevel:{multiple:!1},peakLevel:{multiple:!1},notes:{multiple:!0,unique:!1},key:{multiple:!1},originalalbum:{multiple:!1},originalartist:{multiple:!1},discogs_artist_id:{multiple:!0,unique:!0},discogs_release_id:{multiple:!1},discogs_label_id:{multiple:!1},discogs_master_release_id:{multiple:!1},discogs_votes:{multiple:!1},discogs_rating:{multiple:!1},replaygain_track_peak:{multiple:!1},replaygain_track_gain:{multiple:!1},replaygain_album_peak:{multiple:!1},replaygain_album_gain:{multiple:!1},replaygain_track_minmax:{multiple:!1},replaygain_album_minmax:{multiple:!1},replaygain_undo:{multiple:!1},description:{multiple:!0},longDescription:{multiple:!1},category:{multiple:!0},hdVideo:{multiple:!1},keywords:{multiple:!0},movement:{multiple:!1},movementIndex:{multiple:!1},movementTotal:{multiple:!1},podcastId:{multiple:!1},showMovement:{multiple:!1},stik:{multiple:!1}};function CM(t){return ch[t]&&!ch[t].multiple}function AM(t){return!ch[t].multiple||ch[t].unique||!1}class Sn{static toIntOrNull(e){const n=Number.parseInt(e,10);return Number.isNaN(n)?null:n}static normalizeTrack(e){const n=e.toString().split("/");return{no:Number.parseInt(n[0],10)||null,of:Number.parseInt(n[1],10)||null}}constructor(e,n){this.tagTypes=e,this.tagMap=n}mapGenericTag(e,n){e={id:e.id,value:e.value},this.postMap(e,n);const r=this.getCommonName(e.id);return r?{id:r,value:e.value}:null}getCommonName(e){return this.tagMap[e]}postMap(e,n){}}Sn.maxRatingScore=1;const RM={title:"title",artist:"artist",album:"album",year:"year",comment:"comment",track:"track",genre:"genre"};class PM extends Sn{constructor(){super(["ID3v1"],RM)}}class Vc extends Sn{constructor(e,n){const r={};for(const i of Object.keys(n))r[i.toUpperCase()]=n[i];super(e,r)}getCommonName(e){return this.tagMap[e.toUpperCase()]}}const NM={TIT2:"title",TPE1:"artist","TXXX:Artists":"artists",TPE2:"albumartist",TALB:"album",TDRV:"date",TORY:"originalyear",TPOS:"disk",TCON:"genre",APIC:"picture",TCOM:"composer",USLT:"lyrics",TSOA:"albumsort",TSOT:"titlesort",TOAL:"originalalbum",TSOP:"artistsort",TSO2:"albumartistsort",TSOC:"composersort",TEXT:"lyricist","TXXX:Writer":"writer",TPE3:"conductor",TPE4:"remixer","IPLS:arranger":"arranger","IPLS:engineer":"engineer","IPLS:producer":"producer","IPLS:DJ-mix":"djmixer","IPLS:mix":"mixer",TPUB:"label",TIT1:"grouping",TIT3:"subtitle",TRCK:"track",TCMP:"compilation",POPM:"rating",TBPM:"bpm",TMED:"media","TXXX:CATALOGNUMBER":"catalognumber","TXXX:MusicBrainz Album Status":"releasestatus","TXXX:MusicBrainz Album Type":"releasetype","TXXX:MusicBrainz Album Release Country":"releasecountry","TXXX:RELEASECOUNTRY":"releasecountry","TXXX:SCRIPT":"script",TLAN:"language",TCOP:"copyright",WCOP:"license",TENC:"encodedby",TSSE:"encodersettings","TXXX:BARCODE":"barcode","TXXX:ISRC":"isrc",TSRC:"isrc","TXXX:ASIN":"asin","TXXX:originalyear":"originalyear","UFID:http://musicbrainz.org":"musicbrainz_recordingid","TXXX:MusicBrainz Release Track Id":"musicbrainz_trackid","TXXX:MusicBrainz Album Id":"musicbrainz_albumid","TXXX:MusicBrainz Artist Id":"musicbrainz_artistid","TXXX:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","TXXX:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","TXXX:MusicBrainz Work Id":"musicbrainz_workid","TXXX:MusicBrainz TRM Id":"musicbrainz_trmid","TXXX:MusicBrainz Disc Id":"musicbrainz_discid","TXXX:ACOUSTID_ID":"acoustid_id","TXXX:Acoustid Id":"acoustid_id","TXXX:Acoustid Fingerprint":"acoustid_fingerprint","TXXX:MusicIP PUID":"musicip_puid","TXXX:MusicMagic Fingerprint":"musicip_fingerprint",WOAR:"website",TDRC:"date",TYER:"year",TDOR:"originaldate","TIPL:arranger":"arranger","TIPL:engineer":"engineer","TIPL:producer":"producer","TIPL:DJ-mix":"djmixer","TIPL:mix":"mixer",TMOO:"mood",SYLT:"lyrics",TSST:"discsubtitle",TKEY:"key",COMM:"comment",TOPE:"originalartist","PRIV:AverageLevel":"averageLevel","PRIV:PeakLevel":"peakLevel","TXXX:DISCOGS_ARTIST_ID":"discogs_artist_id","TXXX:DISCOGS_ARTISTS":"artists","TXXX:DISCOGS_ARTIST_NAME":"artists","TXXX:DISCOGS_ALBUM_ARTISTS":"albumartist","TXXX:DISCOGS_CATALOG":"catalognumber","TXXX:DISCOGS_COUNTRY":"releasecountry","TXXX:DISCOGS_DATE":"originaldate","TXXX:DISCOGS_LABEL":"label","TXXX:DISCOGS_LABEL_ID":"discogs_label_id","TXXX:DISCOGS_MASTER_RELEASE_ID":"discogs_master_release_id","TXXX:DISCOGS_RATING":"discogs_rating","TXXX:DISCOGS_RELEASED":"date","TXXX:DISCOGS_RELEASE_ID":"discogs_release_id","TXXX:DISCOGS_VOTES":"discogs_votes","TXXX:CATALOGID":"catalognumber","TXXX:STYLE":"genre","TXXX:REPLAYGAIN_TRACK_PEAK":"replaygain_track_peak","TXXX:REPLAYGAIN_TRACK_GAIN":"replaygain_track_gain","TXXX:REPLAYGAIN_ALBUM_PEAK":"replaygain_album_peak","TXXX:REPLAYGAIN_ALBUM_GAIN":"replaygain_album_gain","TXXX:MP3GAIN_MINMAX":"replaygain_track_minmax","TXXX:MP3GAIN_ALBUM_MINMAX":"replaygain_album_minmax","TXXX:MP3GAIN_UNDO":"replaygain_undo",MVNM:"movement",MVIN:"movementIndex",PCST:"podcast",TCAT:"category",TDES:"description",TDRL:"releasedate",TGID:"podcastId",TKWD:"keywords",WFED:"podcasturl",GRP1:"grouping"};class Wv extends Vc{static toRating(e){return{source:e.email,rating:e.rating>0?(e.rating-1)/254*Sn.maxRatingScore:void 0}}constructor(){super(["ID3v2.3","ID3v2.4"],NM)}postMap(e,n){switch(e.id){case"UFID":{const r=e.value;r.owner_identifier==="http://musicbrainz.org"&&(e.id+=`:${r.owner_identifier}`,e.value=ft(r.identifier,"latin1"))}break;case"PRIV":{const r=e.value;switch(r.owner_identifier){case"AverageLevel":case"PeakValue":e.id+=`:${r.owner_identifier}`,e.value=r.data.length===4?J.get(r.data,0):null,e.value===null&&n.addWarning("Failed to parse PRIV:PeakValue");break;default:n.addWarning(`Unknown PRIV owner-identifier: ${r.data}`)}}break;case"POPM":e.value=Wv.toRating(e.value);break}}}const DM={Title:"title",Author:"artist","WM/AlbumArtist":"albumartist","WM/AlbumTitle":"album","WM/Year":"date","WM/OriginalReleaseTime":"originaldate","WM/OriginalReleaseYear":"originalyear",Description:"comment","WM/TrackNumber":"track","WM/PartOfSet":"disk","WM/Genre":"genre","WM/Composer":"composer","WM/Lyrics":"lyrics","WM/AlbumSortOrder":"albumsort","WM/TitleSortOrder":"titlesort","WM/ArtistSortOrder":"artistsort","WM/AlbumArtistSortOrder":"albumartistsort","WM/ComposerSortOrder":"composersort","WM/Writer":"lyricist","WM/Conductor":"conductor","WM/ModifiedBy":"remixer","WM/Engineer":"engineer","WM/Producer":"producer","WM/DJMixer":"djmixer","WM/Mixer":"mixer","WM/Publisher":"label","WM/ContentGroupDescription":"grouping","WM/SubTitle":"subtitle","WM/SetSubTitle":"discsubtitle","WM/IsCompilation":"compilation","WM/SharedUserRating":"rating","WM/BeatsPerMinute":"bpm","WM/Mood":"mood","WM/Media":"media","WM/CatalogNo":"catalognumber","MusicBrainz/Album Status":"releasestatus","MusicBrainz/Album Type":"releasetype","MusicBrainz/Album Release Country":"releasecountry","WM/Script":"script","WM/Language":"language",Copyright:"copyright",LICENSE:"license","WM/EncodedBy":"encodedby","WM/EncodingSettings":"encodersettings","WM/Barcode":"barcode","WM/ISRC":"isrc","MusicBrainz/Track Id":"musicbrainz_recordingid","MusicBrainz/Release Track Id":"musicbrainz_trackid","MusicBrainz/Album Id":"musicbrainz_albumid","MusicBrainz/Artist Id":"musicbrainz_artistid","MusicBrainz/Album Artist Id":"musicbrainz_albumartistid","MusicBrainz/Release Group Id":"musicbrainz_releasegroupid","MusicBrainz/Work Id":"musicbrainz_workid","MusicBrainz/TRM Id":"musicbrainz_trmid","MusicBrainz/Disc Id":"musicbrainz_discid","Acoustid/Id":"acoustid_id","Acoustid/Fingerprint":"acoustid_fingerprint","MusicIP/PUID":"musicip_puid","WM/ARTISTS":"artists","WM/InitialKey":"key",ASIN:"asin","WM/Work":"work","WM/AuthorURL":"website","WM/Picture":"picture"};class Hv extends Sn{static toRating(e){return{rating:Number.parseFloat(e+1)/5}}constructor(){super(["asf"],DM)}postMap(e){switch(e.id){case"WM/SharedUserRating":{const n=e.id.split(":");e.value=Hv.toRating(e.value),e.id=n[0];break}}}}const jM={TT2:"title",TP1:"artist",TP2:"albumartist",TAL:"album",TYE:"year",COM:"comment",TRK:"track",TPA:"disk",TCO:"genre",PIC:"picture",TCM:"composer",TOR:"originaldate",TOT:"originalalbum",TXT:"lyricist",TP3:"conductor",TPB:"label",TT1:"grouping",TT3:"subtitle",TLA:"language",TCR:"copyright",WCP:"license",TEN:"encodedby",TSS:"encodersettings",WAR:"website",PCS:"podcast",TCP:"compilation",TDR:"date",TS2:"albumartistsort",TSA:"albumsort",TSC:"composersort",TSP:"artistsort",TST:"titlesort",WFD:"podcasturl",TBP:"bpm"};class OM extends Vc{constructor(){super(["ID3v2.2"],jM)}}const MM={Title:"title",Artist:"artist",Artists:"artists","Album Artist":"albumartist",Album:"album",Year:"date",Originalyear:"originalyear",Originaldate:"originaldate",Releasedate:"releasedate",Comment:"comment",Track:"track",Disc:"disk",DISCNUMBER:"disk",Genre:"genre","Cover Art (Front)":"picture","Cover Art (Back)":"picture",Composer:"composer",Lyrics:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",Lyricist:"lyricist",Writer:"writer",Conductor:"conductor",MixArtist:"remixer",Arranger:"arranger",Engineer:"engineer",Producer:"producer",DJMixer:"djmixer",Mixer:"mixer",Label:"label",Grouping:"grouping",Subtitle:"subtitle",DiscSubtitle:"discsubtitle",Compilation:"compilation",BPM:"bpm",Mood:"mood",Media:"media",CatalogNumber:"catalognumber",MUSICBRAINZ_ALBUMSTATUS:"releasestatus",MUSICBRAINZ_ALBUMTYPE:"releasetype",RELEASECOUNTRY:"releasecountry",Script:"script",Language:"language",Copyright:"copyright",LICENSE:"license",EncodedBy:"encodedby",EncoderSettings:"encodersettings",Barcode:"barcode",ISRC:"isrc",ASIN:"asin",musicbrainz_trackid:"musicbrainz_recordingid",musicbrainz_releasetrackid:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",Acoustid_Id:"acoustid_id",ACOUSTID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",Weblink:"website",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",MP3GAIN_MINMAX:"replaygain_track_minmax",MP3GAIN_UNDO:"replaygain_undo"};class LM extends Vc{constructor(){super(["APEv2"],MM)}}const FM={"©nam":"title","©ART":"artist",aART:"albumartist","----:com.apple.iTunes:Band":"albumartist","©alb":"album","©day":"date","©cmt":"comment","©com":"comment",trkn:"track",disk:"disk","©gen":"genre",covr:"picture","©wrt":"composer","©lyr":"lyrics",soal:"albumsort",sonm:"titlesort",soar:"artistsort",soaa:"albumartistsort",soco:"composersort","----:com.apple.iTunes:LYRICIST":"lyricist","----:com.apple.iTunes:CONDUCTOR":"conductor","----:com.apple.iTunes:REMIXER":"remixer","----:com.apple.iTunes:ENGINEER":"engineer","----:com.apple.iTunes:PRODUCER":"producer","----:com.apple.iTunes:DJMIXER":"djmixer","----:com.apple.iTunes:MIXER":"mixer","----:com.apple.iTunes:LABEL":"label","©grp":"grouping","----:com.apple.iTunes:SUBTITLE":"subtitle","----:com.apple.iTunes:DISCSUBTITLE":"discsubtitle",cpil:"compilation",tmpo:"bpm","----:com.apple.iTunes:MOOD":"mood","----:com.apple.iTunes:MEDIA":"media","----:com.apple.iTunes:CATALOGNUMBER":"catalognumber",tvsh:"tvShow",tvsn:"tvSeason",tves:"tvEpisode",sosn:"tvShowSort",tven:"tvEpisodeId",tvnn:"tvNetwork",pcst:"podcast",purl:"podcasturl","----:com.apple.iTunes:MusicBrainz Album Status":"releasestatus","----:com.apple.iTunes:MusicBrainz Album Type":"releasetype","----:com.apple.iTunes:MusicBrainz Album Release Country":"releasecountry","----:com.apple.iTunes:SCRIPT":"script","----:com.apple.iTunes:LANGUAGE":"language",cprt:"copyright","©cpy":"copyright","----:com.apple.iTunes:LICENSE":"license","©too":"encodedby",pgap:"gapless","----:com.apple.iTunes:BARCODE":"barcode","----:com.apple.iTunes:ISRC":"isrc","----:com.apple.iTunes:ASIN":"asin","----:com.apple.iTunes:NOTES":"comment","----:com.apple.iTunes:MusicBrainz Track Id":"musicbrainz_recordingid","----:com.apple.iTunes:MusicBrainz Release Track Id":"musicbrainz_trackid","----:com.apple.iTunes:MusicBrainz Album Id":"musicbrainz_albumid","----:com.apple.iTunes:MusicBrainz Artist Id":"musicbrainz_artistid","----:com.apple.iTunes:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","----:com.apple.iTunes:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","----:com.apple.iTunes:MusicBrainz Work Id":"musicbrainz_workid","----:com.apple.iTunes:MusicBrainz TRM Id":"musicbrainz_trmid","----:com.apple.iTunes:MusicBrainz Disc Id":"musicbrainz_discid","----:com.apple.iTunes:Acoustid Id":"acoustid_id","----:com.apple.iTunes:Acoustid Fingerprint":"acoustid_fingerprint","----:com.apple.iTunes:MusicIP PUID":"musicip_puid","----:com.apple.iTunes:fingerprint":"musicip_fingerprint","----:com.apple.iTunes:replaygain_track_gain":"replaygain_track_gain","----:com.apple.iTunes:replaygain_track_peak":"replaygain_track_peak","----:com.apple.iTunes:replaygain_album_gain":"replaygain_album_gain","----:com.apple.iTunes:replaygain_album_peak":"replaygain_album_peak","----:com.apple.iTunes:replaygain_track_minmax":"replaygain_track_minmax","----:com.apple.iTunes:replaygain_album_minmax":"replaygain_album_minmax","----:com.apple.iTunes:replaygain_undo":"replaygain_undo",gnre:"genre","----:com.apple.iTunes:ALBUMARTISTSORT":"albumartistsort","----:com.apple.iTunes:ARTISTS":"artists","----:com.apple.iTunes:ORIGINALDATE":"originaldate","----:com.apple.iTunes:ORIGINALYEAR":"originalyear","----:com.apple.iTunes:RELEASEDATE":"releasedate",desc:"description",ldes:"longDescription","©mvn":"movement","©mvi":"movementIndex","©mvc":"movementTotal","©wrk":"work",catg:"category",egid:"podcastId",hdvd:"hdVideo",keyw:"keywords",shwm:"showMovement",stik:"stik",rate:"rating"},$M="iTunes";class O_ extends Vc{constructor(){super([$M],FM)}postMap(e,n){switch(e.id){case"rate":e.value={source:void 0,rating:Number.parseFloat(e.value)/100};break}}}const zM={TITLE:"title",ARTIST:"artist",ARTISTS:"artists",ALBUMARTIST:"albumartist","ALBUM ARTIST":"albumartist",ALBUM:"album",DATE:"date",ORIGINALDATE:"originaldate",ORIGINALYEAR:"originalyear",RELEASEDATE:"releasedate",COMMENT:"comment",TRACKNUMBER:"track",DISCNUMBER:"disk",GENRE:"genre",METADATA_BLOCK_PICTURE:"picture",COMPOSER:"composer",LYRICS:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",LYRICIST:"lyricist",WRITER:"writer",CONDUCTOR:"conductor",REMIXER:"remixer",ARRANGER:"arranger",ENGINEER:"engineer",PRODUCER:"producer",DJMIXER:"djmixer",MIXER:"mixer",LABEL:"label",GROUPING:"grouping",SUBTITLE:"subtitle",DISCSUBTITLE:"discsubtitle",TRACKTOTAL:"totaltracks",DISCTOTAL:"totaldiscs",COMPILATION:"compilation",RATING:"rating",BPM:"bpm",KEY:"key",MOOD:"mood",MEDIA:"media",CATALOGNUMBER:"catalognumber",RELEASESTATUS:"releasestatus",RELEASETYPE:"releasetype",RELEASECOUNTRY:"releasecountry",SCRIPT:"script",LANGUAGE:"language",COPYRIGHT:"copyright",LICENSE:"license",ENCODEDBY:"encodedby",ENCODERSETTINGS:"encodersettings",BARCODE:"barcode",ISRC:"isrc",ASIN:"asin",MUSICBRAINZ_TRACKID:"musicbrainz_recordingid",MUSICBRAINZ_RELEASETRACKID:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",ACOUSTID_ID:"acoustid_id",ACOUSTID_ID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",WEBSITE:"website",NOTES:"notes",TOTALTRACKS:"totaltracks",TOTALDISCS:"totaldiscs",DISCOGS_ARTIST_ID:"discogs_artist_id",DISCOGS_ARTISTS:"artists",DISCOGS_ARTIST_NAME:"artists",DISCOGS_ALBUM_ARTISTS:"albumartist",DISCOGS_CATALOG:"catalognumber",DISCOGS_COUNTRY:"releasecountry",DISCOGS_DATE:"originaldate",DISCOGS_LABEL:"label",DISCOGS_LABEL_ID:"discogs_label_id",DISCOGS_MASTER_RELEASE_ID:"discogs_master_release_id",DISCOGS_RATING:"discogs_rating",DISCOGS_RELEASED:"date",DISCOGS_RELEASE_ID:"discogs_release_id",DISCOGS_VOTES:"discogs_votes",CATALOGID:"catalognumber",STYLE:"genre",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",REPLAYGAIN_ALBUM_GAIN:"replaygain_album_gain",REPLAYGAIN_ALBUM_PEAK:"replaygain_album_peak",REPLAYGAIN_MINMAX:"replaygain_track_minmax",REPLAYGAIN_ALBUM_MINMAX:"replaygain_album_minmax",REPLAYGAIN_UNDO:"replaygain_undo"};class uh extends Sn{static toRating(e,n,r){return{source:e?e.toLowerCase():void 0,rating:Number.parseFloat(n)/r*Sn.maxRatingScore}}constructor(){super(["vorbis"],zM)}postMap(e){if(e.id==="RATING")e.value=uh.toRating(void 0,e.value,100);else if(e.id.indexOf("RATING:")===0){const n=e.id.split(":");e.value=uh.toRating(n[1],e.value,1),e.id=n[0]}}}const BM={IART:"artist",ICRD:"date",INAM:"title",TITL:"title",IPRD:"album",ITRK:"track",IPRT:"track",COMM:"comment",ICMT:"comment",ICNT:"releasecountry",GNRE:"genre",IWRI:"writer",RATE:"rating",YEAR:"year",ISFT:"encodedby",CODE:"encodedby",TURL:"website",IGNR:"genre",IENG:"engineer",ITCH:"technician",IMED:"media",IRPD:"album"};class VM extends Sn{constructor(){super(["exif"],BM)}}const UM={"segment:title":"title","album:ARTIST":"albumartist","album:ARTISTSORT":"albumartistsort","album:TITLE":"album","album:DATE_RECORDED":"originaldate","album:DATE_RELEASED":"releasedate","album:PART_NUMBER":"disk","album:TOTAL_PARTS":"totaltracks","track:ARTIST":"artist","track:ARTISTSORT":"artistsort","track:TITLE":"title","track:PART_NUMBER":"track","track:MUSICBRAINZ_TRACKID":"musicbrainz_recordingid","track:MUSICBRAINZ_ALBUMID":"musicbrainz_albumid","track:MUSICBRAINZ_ARTISTID":"musicbrainz_artistid","track:PUBLISHER":"label","track:GENRE":"genre","track:ENCODER":"encodedby","track:ENCODER_OPTIONS":"encodersettings","edition:TOTAL_PARTS":"totaldiscs",picture:"picture"};class WM extends Vc{constructor(){super(["matroska"],UM)}}const HM={NAME:"title",AUTH:"artist","(c) ":"copyright",ANNO:"comment"};class qM extends Sn{constructor(){super(["AIFF"],HM)}}class GM{constructor(){this.tagMappers={},[new PM,new OM,new Wv,new O_,new O_,new uh,new LM,new Hv,new VM,new WM,new qM].forEach(e=>{this.registerTagMapper(e)})}mapTag(e,n,r){if(this.tagMappers[e])return this.tagMappers[e].mapGenericTag(n,r);throw new Error(`No generic tag mapper defined for tag-format: ${e}`)}registerTagMapper(e){for(const n of e.tagTypes)this.tagMappers[n]=e}}const vs=De("music-metadata:collector"),KM=["matroska","APEv2","vorbis","ID3v2.4","ID3v2.3","ID3v2.2","exif","asf","iTunes","AIFF","ID3v1"];class XM{constructor(e){this.opts=e,this.format={tagTypes:[],trackInfo:[]},this.native={},this.common={track:{no:null,of:null},disk:{no:null,of:null},movementIndex:{no:null,of:null}},this.quality={warnings:[]},this.commonOrigin={},this.originPriority={},this.tagMapper=new GM;let n=1;for(const r of KM)this.originPriority[r]=n++;this.originPriority.artificial=500,this.originPriority.id3v1=600}hasAny(){return Object.keys(this.native).length>0}addStreamInfo(e){vs(`streamInfo: type=${e.type?Xs[e.type]:"?"}, codec=${e.codecName}`),this.format.trackInfo.push(e)}setFormat(e,n){var r;vs(`format: ${e} = ${n}`),this.format[e]=n,(r=this.opts)!=null&&r.observer&&this.opts.observer({metadata:this,tag:{type:"format",id:e,value:n}})}async addTag(e,n,r){vs(`tag ${e}.${n} = ${r}`),this.native[e]||(this.format.tagTypes.push(e),this.native[e]=[]),this.native[e].push({id:n,value:r}),await this.toCommon(e,n,r)}addWarning(e){this.quality.warnings.push({message:e})}async postMap(e,n){switch(n.id){case"artist":if(this.commonOrigin.artist===this.originPriority[e])return this.postMap("artificial",{id:"artists",value:n.value});this.common.artists||this.setGenericTag("artificial",{id:"artists",value:n.value});break;case"artists":if((!this.common.artist||this.commonOrigin.artist===this.originPriority.artificial)&&(!this.common.artists||this.common.artists.indexOf(n.value)===-1)){const r=(this.common.artists||[]).concat([n.value]),s={id:"artist",value:QM(r)};this.setGenericTag("artificial",s)}break;case"picture":return this.postFixPicture(n.value).then(r=>{r!==null&&(n.value=r,this.setGenericTag(e,n))});case"totaltracks":this.common.track.of=Sn.toIntOrNull(n.value);return;case"totaldiscs":this.common.disk.of=Sn.toIntOrNull(n.value);return;case"movementTotal":this.common.movementIndex.of=Sn.toIntOrNull(n.value);return;case"track":case"disk":case"movementIndex":{const r=this.common[n.id].of;this.common[n.id]=Sn.normalizeTrack(n.value),this.common[n.id].of=r??this.common[n.id].of;return}case"bpm":case"year":case"originalyear":n.value=Number.parseInt(n.value,10);break;case"date":{const r=Number.parseInt(n.value.substr(0,4),10);Number.isNaN(r)||(this.common.year=r);break}case"discogs_label_id":case"discogs_release_id":case"discogs_master_release_id":case"discogs_artist_id":case"discogs_votes":n.value=typeof n.value=="string"?Number.parseInt(n.value,10):n.value;break;case"replaygain_track_gain":case"replaygain_track_peak":case"replaygain_album_gain":case"replaygain_album_peak":n.value=IM(n.value);break;case"replaygain_track_minmax":n.value=n.value.split(",").map(r=>Number.parseInt(r,10));break;case"replaygain_undo":{const r=n.value.split(",").map(i=>Number.parseInt(i,10));n.value={leftChannel:r[0],rightChannel:r[1]};break}case"gapless":case"compilation":case"podcast":case"showMovement":n.value=n.value==="1"||n.value===1;break;case"isrc":{const r=this.common[n.id];if(r&&r.indexOf(n.value)!==-1)return;break}case"comment":typeof n.value=="string"&&(n.value={text:n.value}),n.value.descriptor==="iTunPGAP"&&this.setGenericTag(e,{id:"gapless",value:n.value.text==="1"});break}n.value!==null&&this.setGenericTag(e,n)}toCommonMetadata(){return{format:this.format,native:this.native,quality:this.quality,common:this.common}}async postFixPicture(e){if(e.data&&e.data.length>0){if(!e.format){const n=await OT(Uint8Array.from(e.data));if(n)e.format=n.mime;else return null}switch(e.format=e.format.toLocaleLowerCase(),e.format){case"image/jpg":e.format="image/jpeg"}return e}return this.addWarning("Empty picture tag found"),null}async toCommon(e,n,r){const i={id:n,value:r},s=this.tagMapper.mapTag(e,i,this);s&&await this.postMap(e,s)}setGenericTag(e,n){var s;vs(`common.${n.id} = ${n.value}`);const r=this.commonOrigin[n.id]||1e3,i=this.originPriority[e];if(CM(n.id))if(i<=r)this.common[n.id]=n.value,this.commonOrigin[n.id]=i;else return vs(`Ignore native tag (singleton): ${e}.${n.id} = ${n.value}`);else if(i===r)!AM(n.id)||this.common[n.id].indexOf(n.value)===-1?this.common[n.id].push(n.value):vs(`Ignore duplicate value: ${e}.${n.id} = ${n.value}`);else if(i<r)this.common[n.id]=[n.value],this.commonOrigin[n.id]=i;else return vs(`Ignore native tag (list): ${e}.${n.id} = ${n.value}`);(s=this.opts)!=null&&s.observer&&this.opts.observer({metadata:this,tag:{type:"common",id:n.id,value:n.value}})}}function QM(t){return t.length>2?`${t.slice(0,t.length-1).join(", ")} & ${t[t.length-1]}`:t.join(" & ")}class Mn{constructor(){this.metadata=void 0,this.tokenizer=void 0,this.options=void 0}init(e,n,r){return this.metadata=e,this.tokenizer=n,this.options=r,this}}const YM=/^[\x21-\x7e©][\x20-\x7e\x00()]{3}/,Be={len:4,get:(t,e)=>{const n=Bv(t.slice(e,e+Be.len),"latin1");if(!n.match(YM))throw new Error(`FourCC contains invalid characters: ${bM(n)} "${n}"`);return n},put:(t,e,n)=>{const r=JO(n);if(r.length!==4)throw new Error("Invalid length");return t.set(r,e),e+4}};var Ho;(function(t){t[t.text_utf8=0]="text_utf8",t[t.binary=1]="binary",t[t.external_info=2]="external_info",t[t.reserved=3]="reserved"})(Ho||(Ho={}));const M_={len:52,get:(t,e)=>({ID:Be.get(t,e),version:J.get(t,e+4)/1e3,descriptorBytes:J.get(t,e+8),headerBytes:J.get(t,e+12),seekTableBytes:J.get(t,e+16),headerDataBytes:J.get(t,e+20),apeFrameDataBytes:J.get(t,e+24),apeFrameDataBytesHigh:J.get(t,e+28),terminatingDataBytes:J.get(t,e+32),fileMD5:new on(16).get(t,e+36)})},JM={len:24,get:(t,e)=>({compressionLevel:Te.get(t,e),formatFlags:Te.get(t,e+2),blocksPerFrame:J.get(t,e+4),finalFrameBlocks:J.get(t,e+8),totalFrames:J.get(t,e+12),bitsPerSample:Te.get(t,e+16),channel:Te.get(t,e+18),sampleRate:J.get(t,e+20)})},Fn={len:32,get:(t,e)=>({ID:new ne(8,"ascii").get(t,e),version:J.get(t,e+8),size:J.get(t,e+12),fields:J.get(t,e+16),flags:BT(J.get(t,e+20))})},Ep={len:8,get:(t,e)=>({size:J.get(t,e),flags:BT(J.get(t,e+4))})};function BT(t){return{containsHeader:Lu(t,31),containsFooter:Lu(t,30),isHeader:Lu(t,29),readOnly:Lu(t,0),dataType:(t&6)>>1}}function Lu(t,e){return(t&1<<e)!==0}const xs=De("music-metadata:parser:APEv2"),L_="APEv2",F_="APETAGEX";class Er extends Mn{constructor(){super(...arguments),this.ape={}}static tryParseApeHeader(e,n,r){const i=new Er;return i.init(e,n,r),i.tryParseApeHeader()}static calculateDuration(e){let n=e.totalFrames>1?e.blocksPerFrame*(e.totalFrames-1):0;return n+=e.finalFrameBlocks,n/e.sampleRate}static async findApeFooterOffset(e,n){const r=new Uint8Array(Fn.len);await e.randomRead(r,0,Fn.len,n-Fn.len);const i=Fn.get(r,0);if(i.ID==="APETAGEX")return i.flags.isHeader?xs(`APE Header found at offset=${n-Fn.len}`):(xs(`APE Footer found at offset=${n-Fn.len}`),n-=i.size),{footer:i,offset:n}}static parseTagFooter(e,n,r){const i=Fn.get(n,n.length-Fn.len);if(i.ID!==F_)throw new Error("Unexpected APEv2 Footer ID preamble value.");va(n);const s=new Er;return s.init(e,va(n),r),s.parseTags(i)}async tryParseApeHeader(){if(this.tokenizer.fileInfo.size&&this.tokenizer.fileInfo.size-this.tokenizer.position<Fn.len){xs("No APEv2 header found, end-of-file reached");return}const e=await this.tokenizer.peekToken(Fn);if(e.ID===F_)return await this.tokenizer.ignore(Fn.len),this.parseTags(e);if(xs(`APEv2 header not found at offset=${this.tokenizer.position}`),this.tokenizer.fileInfo.size){const n=this.tokenizer.fileInfo.size-this.tokenizer.position,r=new Uint8Array(n);return await this.tokenizer.readBuffer(r),Er.parseTagFooter(this.metadata,r,this.options)}}async parse(){const e=await this.tokenizer.readToken(M_);if(e.ID!=="MAC ")throw new Error("Unexpected descriptor ID");this.ape.descriptor=e;const n=e.descriptorBytes-M_.len,r=await(n>0?this.parseDescriptorExpansion(n):this.parseHeader());return await this.tokenizer.ignore(r.forwardBytes),this.tryParseApeHeader()}async parseTags(e){const n=new Uint8Array(256);let r=e.size-Fn.len;xs(`Parse APE tags at offset=${this.tokenizer.position}, size=${r}`);for(let i=0;i<e.fields;i++){if(r<Ep.len){this.metadata.addWarning(`APEv2 Tag-header: ${e.fields-i} items remaining, but no more tag data to read.`);break}const s=await this.tokenizer.readToken(Ep);r-=Ep.len+s.size,await this.tokenizer.peekBuffer(n,{length:Math.min(n.length,r)});let o=yn(n,0,n.length);const a=await this.tokenizer.readToken(new ne(o,"ascii"));switch(await this.tokenizer.ignore(1),r-=a.length+1,s.flags.dataType){case Ho.text_utf8:{const c=(await this.tokenizer.readToken(new ne(s.size,"utf8"))).split(/\x00/g);await Promise.all(c.map(d=>this.metadata.addTag(L_,a,d)));break}case Ho.binary:if(this.options.skipCovers)await this.tokenizer.ignore(s.size);else{const l=new Uint8Array(s.size);await this.tokenizer.readBuffer(l),o=yn(l,0,l.length);const c=Bv(l.slice(0,o)),d=l.slice(o+1);await this.metadata.addTag(L_,a,{description:c,data:d})}break;case Ho.external_info:xs(`Ignore external info ${a}`),await this.tokenizer.ignore(s.size);break;case Ho.reserved:xs(`Ignore external info ${a}`),this.metadata.addWarning(`APEv2 header declares a reserved datatype for "${a}"`),await this.tokenizer.ignore(s.size);break}}}async parseDescriptorExpansion(e){return await this.tokenizer.ignore(e),this.parseHeader()}async parseHeader(){const e=await this.tokenizer.readToken(JM);if(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("container","Monkey's Audio"),this.metadata.setFormat("bitsPerSample",e.bitsPerSample),this.metadata.setFormat("sampleRate",e.sampleRate),this.metadata.setFormat("numberOfChannels",e.channel),this.metadata.setFormat("duration",Er.calculateDuration(e)),!this.ape.descriptor)throw new Error("Missing APE descriptor");return{forwardBytes:this.ape.descriptor.seekTableBytes+this.ape.descriptor.headerDataBytes+this.ape.descriptor.apeFrameDataBytes+this.ape.descriptor.terminatingDataBytes}}}const Fu=De("music-metadata:parser:ID3v1"),dh=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","Alt. Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast-Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big Beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio Theatre","Neue Deutsche Welle","Podcast","Indie Rock","G-Funk","Dubstep","Garage Rock","Psybient"],$u={len:128,get:(t,e)=>{const n=new So(3).get(t,e);return n==="TAG"?{header:n,title:new So(30).get(t,e+3),artist:new So(30).get(t,e+33),album:new So(30).get(t,e+63),year:new So(4).get(t,e+93),comment:new So(28).get(t,e+97),zeroByte:pe.get(t,e+127),track:pe.get(t,e+126),genre:pe.get(t,e+127)}:null}};class So{constructor(e){this.len=e,this.stringType=new ne(e,"latin1")}get(e,n){let r=this.stringType.get(e,n);return r=FT(r),r=r.trim(),r.length>0?r:void 0}}class qv extends Mn{static getGenre(e){if(e<dh.length)return dh[e]}async parse(){if(!this.tokenizer.fileInfo.size){Fu("Skip checking for ID3v1 because the file-size is unknown");return}if(this.options.apeHeader){this.tokenizer.ignore(this.options.apeHeader.offset-this.tokenizer.position);const r=new Er;r.init(this.metadata,this.tokenizer,this.options),await r.parseTags(this.options.apeHeader.footer)}const e=this.tokenizer.fileInfo.size-$u.len;if(this.tokenizer.position>e){Fu("Already consumed the last 128 bytes");return}const n=await this.tokenizer.readToken($u,e);if(n){Fu("ID3v1 header found at: pos=%s",this.tokenizer.fileInfo.size-$u.len);const r=["title","artist","album","comment","track","year"];for(const s of r)n[s]&&n[s]!==""&&await this.addTag(s,n[s]);const i=qv.getGenre(n.genre);i&&await this.addTag("genre",i)}else Fu("ID3v1 header not found at: pos=%s",this.tokenizer.fileInfo.size-$u.len)}async addTag(e,n){await this.metadata.addTag("ID3v1",e,n)}}const $_=De("music-metadata:id3v2:frame-parser"),Jn="latin1";function ZM(t){const e=[];let n,r="";for(const i of t)if(typeof n=="string")if(i==="("&&n==="")r+="(",n=void 0;else if(i===")"){r!==""&&(e.push(r),r="");const s=z_(n);s&&e.push(s),n=void 0}else n+=i;else i==="("?n="":r+=i;return r&&(e.length===0&&r.match(/^\d*$/)&&(r=z_(r)),r&&e.push(r)),e}function z_(t){if(t==="RX")return"Remix";if(t==="CR")return"Cover";if(t.match(/^\d*$/))return dh[Number.parseInt(t)]}class vn{constructor(e,n){this.major=e,this.warningCollector=n}readData(e,n,r){if(e.length===0){this.warningCollector.addWarning(`id3v2.${this.major} header has empty tag type=${n}`);return}const{encoding:i,bom:s}=zT.get(e,0),o=e.length;let a=0,l=[];const c=vn.getNullTerminatorLength(i);let d;switch($_(`Parsing tag type=${n}, encoding=${i}, bom=${s}`),n!=="TXXX"&&n[0]==="T"?"T*":n){case"T*":case"GRP1":case"IPLS":case"MVIN":case"MVNM":case"PCS":case"PCST":{let h;try{h=ft(e.slice(1),i).replace(/\x00+$/,"")}catch(m){if(m instanceof Error){this.warningCollector.addWarning(`id3v2.${this.major} type=${n} header has invalid string value: ${m.message}`);break}throw m}switch(n){case"TMCL":case"TIPL":case"IPLS":l=vn.functionList(this.splitValue(n,h));break;case"TRK":case"TRCK":case"TPOS":l=h;break;case"TCOM":case"TEXT":case"TOLY":case"TOPE":case"TPE1":case"TSRC":l=this.splitValue(n,h);break;case"TCO":case"TCON":l=this.splitValue(n,h).map(m=>ZM(m)).reduce((m,p)=>m.concat(p),[]);break;case"PCS":case"PCST":l=this.major>=4?this.splitValue(n,h):[h],l=Array.isArray(l)&&l[0]===""?1:0;break;default:l=this.major>=4?this.splitValue(n,h):[h]}break}case"TXXX":{const h=vn.readIdentifierAndData(e,a+1,o,i);l={description:h.id,text:this.splitValue(n,ft(h.data,i).replace(/\x00+$/,""))};break}case"PIC":case"APIC":if(r){const h={};switch(a+=1,this.major){case 2:h.format=ft(e.slice(a,a+3),"latin1"),a+=3;break;case 3:case 4:d=yn(e,a,o,Jn),h.format=ft(e.slice(a,d),Jn),a=d+1;break;default:throw new Error(`Warning: unexpected major versionIndex: ${this.major}`)}h.format=vn.fixPictureMimeType(h.format),h.type=lc[e[a]],a+=1,d=yn(e,a,o,i),h.description=ft(e.slice(a,d),i),a=d+c,h.data=e.slice(a,o),l=h}break;case"CNT":case"PCNT":l=re.get(e,0);break;case"SYLT":{const h=j_.get(e,0);a+=j_.len;const m={descriptor:"",language:h.language,contentType:h.contentType,timeStampFormat:h.timeStampFormat,syncText:[]};let p=!1;for(;a<o;){const y=vn.readNullTerminatedString(e.subarray(a),h.encoding);if(a+=y.len,p){const x=re.get(e,a);a+=re.len,m.syncText.push({text:y.text,timestamp:x})}else m.descriptor=y.text,p=!0}l=m;break}case"ULT":case"USLT":case"COM":case"COMM":{const h=T0.get(e,a);a+=T0.len;const m=vn.readNullTerminatedString(e.subarray(a),h.encoding);a+=m.len;const p=vn.readNullTerminatedString(e.subarray(a),h.encoding);l={language:h.language,descriptor:m.text,text:p.text};break}case"UFID":{const h=vn.readIdentifierAndData(e,a,o,Jn);l={owner_identifier:h.id,identifier:h.data};break}case"PRIV":{const h=vn.readIdentifierAndData(e,a,o,Jn);l={owner_identifier:h.id,data:h.data};break}case"POPM":{d=yn(e,a,o,Jn);const h=ft(e.slice(a,d),Jn);a=d+1;const m=o-a;l={email:h,rating:pe.get(e,a),counter:m>=5?re.get(e,a+1):void 0};break}case"GEOB":{d=yn(e,a+1,o,i);const h=ft(e.slice(a+1,d),Jn);a=d+1,d=yn(e,a,o-a,i);const m=ft(e.slice(a,d),Jn);a=d+1,d=yn(e,a,o-a,i);const p=ft(e.slice(a,d),Jn);l={type:h,filename:m,description:p,data:e.slice(a+1,o)};break}case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":d=yn(e,a+1,o,i),l=ft(e.slice(a,d),Jn);break;case"WXXX":{d=yn(e,a+1,o,i);const h=ft(e.slice(a+1,d),i);a=d+(i==="utf-16le"?2:1),l={description:h,url:ft(e.slice(a,o),Jn)};break}case"WFD":case"WFED":l=ft(e.slice(a+1,yn(e,a+1,o,i)),i);break;case"MCDI":{l=e.slice(0,o);break}default:$_(`Warning: unsupported id3v2-tag-type: ${n}`);break}return l}static readNullTerminatedString(e,n){let r=n.bom?2:0;const i=yn(e,r,e.length,n.encoding),s=e.slice(r,i);return n.encoding==="utf-16le"?r=i+2:r=i+1,{text:ft(s,n.encoding),len:r}}static fixPictureMimeType(e){switch(e=e.toLocaleLowerCase(),e){case"jpg":return"image/jpeg";case"png":return"image/png"}return e}static functionList(e){const n={};for(let r=0;r+1<e.length;r+=2){const i=e[r+1].split(",");n[e[r]]=n[e[r]]?n[e[r]].concat(i):i}return n}splitValue(e,n){let r;return this.major<4?(r=n.split(/\x00/g),r.length>1?this.warningCollector.addWarning(`ID3v2.${this.major} ${e} uses non standard null-separator.`):r=n.split(/\//g)):r=n.split(/\x00/g),vn.trimArray(r)}static trimArray(e){return e.map(n=>n.replace(/\x00+$/,"").trim())}static readIdentifierAndData(e,n,r,i){const s=yn(e,n,r,i),o=ft(e.slice(n,s),i);return n=s+vn.getNullTerminatorLength(i),{id:o,data:e.slice(n,r)}}static getNullTerminatorLength(e){return e==="utf-16le"?2:1}}const B_=new TextDecoder("ascii");class rr{constructor(){this.tokenizer=void 0,this.id3Header=void 0,this.metadata=void 0,this.headerType=void 0,this.options=void 0}static removeUnsyncBytes(e){let n=0,r=0;for(;n<e.length-1;)n!==r&&(e[r]=e[n]),n+=e[n]===255&&e[n+1]===0?2:1,r++;return n<e.length&&(e[r++]=e[n]),e.slice(0,r)}static getFrameHeaderLength(e){switch(e){case 2:return 6;case 3:case 4:return 10;default:throw new Error("header versionIndex is incorrect")}}static readFrameFlags(e){return{status:{tag_alter_preservation:Qe(e,0,6),file_alter_preservation:Qe(e,0,5),read_only:Qe(e,0,4)},format:{grouping_identity:Qe(e,1,7),compression:Qe(e,1,3),encryption:Qe(e,1,2),unsynchronisation:Qe(e,1,1),data_length_indicator:Qe(e,1,0)}}}static readFrameData(e,n,r,i,s){var a,l;const o=new vn(r,s);switch(r){case 2:return o.readData(e,n.id,i);case 3:case 4:return(a=n.flags)!=null&&a.format.unsynchronisation&&(e=rr.removeUnsyncBytes(e)),(l=n.flags)!=null&&l.format.data_length_indicator&&(e=e.slice(4,e.length)),o.readData(e,n.id,i);default:throw new Error(`Unexpected majorVer: ${r}`)}}static makeDescriptionTagName(e,n){return e+(n?`:${n}`:"")}async parse(e,n,r){this.tokenizer=n,this.metadata=e,this.options=r;const i=await this.tokenizer.readToken(k0);if(i.fileIdentifier!=="ID3")throw new Error("expected ID3-header file-identifier 'ID3' was not found");return this.id3Header=i,this.headerType=`ID3v2.${i.version.major}`,i.flags.isExtendedHeader?this.parseExtendedHeader():this.parseId3Data(i.size)}async parseExtendedHeader(){const e=await this.tokenizer.readToken(D_),n=e.size-D_.len;return n>0?this.parseExtendedHeaderData(n,e.size):this.parseId3Data(this.id3Header.size-e.size)}async parseExtendedHeaderData(e,n){return await this.tokenizer.ignore(e),this.parseId3Data(this.id3Header.size-n)}async parseId3Data(e){const n=await this.tokenizer.readToken(new on(e));for(const r of this.parseMetadata(n))switch(r.id){case"TXXX":r.value&&await this.handleTag(r,r.value.text,()=>r.value.description);break;default:await(Array.isArray(r.value)?Promise.all(r.value.map(i=>this.addTag(r.id,i))):this.addTag(r.id,r.value))}}async handleTag(e,n,r,i=s=>s){await Promise.all(n.map(s=>this.addTag(rr.makeDescriptionTagName(e.id,r(s)),i(s))))}async addTag(e,n){await this.metadata.addTag(this.headerType,e,n)}parseMetadata(e){let n=0;const r=[];for(;n!==e.length;){const i=rr.getFrameHeaderLength(this.id3Header.version.major);if(n+i>e.length){this.metadata.addWarning("Illegal ID3v2 tag length");break}const s=e.slice(n,n+i);n+=i;const o=this.readFrameHeader(s,this.id3Header.version.major),a=e.slice(n,n+o.length);n+=o.length;const l=rr.readFrameData(a,o,this.id3Header.version.major,!this.options.skipCovers,this.metadata);l&&r.push({id:o.id,value:l})}return r}readFrameHeader(e,n){let r;switch(n){case 2:r={id:B_.decode(e.slice(0,3)),length:tn.get(e,3)},r.id.match(/[A-Z0-9]{3}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${r.id}`);break;case 3:case 4:r={id:B_.decode(e.slice(0,4)),length:(n===4?$T:re).get(e,4),flags:rr.readFrameFlags(e.slice(8,10))},r.id.match(/[A-Z0-9]{4}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${r.id}`);break;default:throw new Error(`Unexpected majorVer: ${n}`)}return r}}const eL={NONE:"not compressed	PCM	Apple Computer",sowt:"PCM (byte swapped)",fl32:"32-bit floating point IEEE 32-bit float",fl64:"64-bit floating point IEEE 64-bit float	Apple Computer",alaw:"ALaw 2:1	8-bit ITU-T G.711 A-law",ulaw:"µLaw 2:1	8-bit ITU-T G.711 µ-law	Apple Computer",ULAW:"CCITT G.711 u-law 8-bit ITU-T G.711 µ-law",ALAW:"CCITT G.711 A-law 8-bit ITU-T G.711 A-law",FL32:"Float 32	IEEE 32-bit float "};class tL{constructor(e,n){this.isAifc=n;const r=n?22:18;if(e.chunkSize<r)throw new Error(`COMMON CHUNK size should always be at least ${r}`);this.len=e.chunkSize}get(e,n){const r=Re.get(e,n+8)-16398,i=Re.get(e,n+8+2),s={numChannels:Re.get(e,n),numSampleFrames:re.get(e,n+2),sampleSize:Re.get(e,n+6),sampleRate:r<0?i>>Math.abs(r):i<<r};if(this.isAifc){if(s.compressionType=Be.get(e,n+18),this.len>22){const o=pe.get(e,n+22);if(o>0){const a=(o+1)%2;if(23+o+a===this.len)s.compressionName=new ne(o,"latin1").get(e,n+23);else throw new Error("Illegal pstring length")}else s.compressionName=void 0}}else s.compressionName="PCM";return s}}const Sp={len:8,get:(t,e)=>({chunkID:Be.get(t,e),chunkSize:Number(BigInt(re.get(t,e+4)))})},bp=De("music-metadata:parser:aiff");class nL extends Mn{constructor(){super(...arguments),this.isCompressed=null}async parse(){if((await this.tokenizer.readToken(Sp)).chunkID!=="FORM")throw new Error("Invalid Chunk-ID, expected 'FORM'");const n=await this.tokenizer.readToken(Be);switch(n){case"AIFF":this.metadata.setFormat("container",n),this.isCompressed=!1;break;case"AIFC":this.metadata.setFormat("container","AIFF-C"),this.isCompressed=!0;break;default:throw new Error(`Unsupported AIFF type: ${n}`)}this.metadata.setFormat("lossless",!this.isCompressed);try{for(;!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=Sp.len;){bp(`Reading AIFF chunk at offset=${this.tokenizer.position}`);const r=await this.tokenizer.readToken(Sp),i=2*Math.round(r.chunkSize/2),s=await this.readData(r);await this.tokenizer.ignore(i-s)}}catch(r){if(r instanceof rt)bp("End-of-stream");else throw r}}async readData(e){switch(e.chunkID){case"COMM":{if(this.isCompressed===null)throw new Error("Failed to parse AIFF.COMM chunk when compression type is unknown");const n=await this.tokenizer.readToken(new tL(e,this.isCompressed));return this.metadata.setFormat("bitsPerSample",n.sampleSize),this.metadata.setFormat("sampleRate",n.sampleRate),this.metadata.setFormat("numberOfChannels",n.numChannels),this.metadata.setFormat("numberOfSamples",n.numSampleFrames),this.metadata.setFormat("duration",n.numSampleFrames/n.sampleRate),(n.compressionName||n.compressionType)&&this.metadata.setFormat("codec",n.compressionName??eL[n.compressionType]),e.chunkSize}case"ID3 ":{const n=await this.tokenizer.readToken(new on(e.chunkSize)),r=va(n);return await new rr().parse(this.metadata,r,this.options),e.chunkSize}case"SSND":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*e.chunkSize/this.metadata.format.duration),0;case"NAME":case"AUTH":case"(c) ":case"ANNO":return this.readTextChunk(e);default:return bp(`Ignore chunk id=${e.chunkID}, size=${e.chunkSize}`),0}}async readTextChunk(e){const r=(await this.tokenizer.readToken(new ne(e.chunkSize,"ascii"))).split("\0").map(i=>i.trim()).filter(i=>i==null?void 0:i.length);return await Promise.all(r.map(i=>this.metadata.addTag("AIFF",e.chunkID,i))),e.chunkSize}}class A{static fromBin(e,n=0){return new A(A.decode(e,n))}static decode(e,n=0){const r=new DataView(e.buffer,n);return`${r.getUint32(0,!0).toString(16)}-${r.getUint16(4,!0).toString(16)}-${r.getUint16(6,!0).toString(16)}-${r.getUint16(8).toString(16)}-${Vv(e.slice(n+10,n+16))}`.toUpperCase()}static decodeMediaType(e){switch(e.str){case A.AudioMedia.str:return"audio";case A.VideoMedia.str:return"video";case A.CommandMedia.str:return"command";case A.Degradable_JPEG_Media.str:return"degradable-jpeg";case A.FileTransferMedia.str:return"file-transfer";case A.BinaryMedia.str:return"binary"}}static encode(e){const n=new Uint8Array(16),r=new DataView(n.buffer);return r.setUint32(0,Number.parseInt(e.slice(0,8),16),!0),r.setUint16(4,Number.parseInt(e.slice(9,13),16),!0),r.setUint16(6,Number.parseInt(e.slice(14,18),16),!0),n.set(T_(e.slice(19,23)),8),n.set(T_(e.slice(24)),10),n}constructor(e){this.str=e}equals(e){return this.str===e.str}toBin(){return A.encode(this.str)}}A.HeaderObject=new A("75B22630-668E-11CF-A6D9-00AA0062CE6C");A.DataObject=new A("75B22636-668E-11CF-A6D9-00AA0062CE6C");A.SimpleIndexObject=new A("33000890-E5B1-11CF-89F4-00A0C90349CB");A.IndexObject=new A("D6E229D3-35DA-11D1-9034-00A0C90349BE");A.MediaObjectIndexObject=new A("FEB103F8-12AD-4C64-840F-2A1D2F7AD48C");A.TimecodeIndexObject=new A("3CB73FD0-0C4A-4803-953D-EDF7B6228F0C");A.FilePropertiesObject=new A("8CABDCA1-A947-11CF-8EE4-00C00C205365");A.StreamPropertiesObject=new A("B7DC0791-A9B7-11CF-8EE6-00C00C205365");A.HeaderExtensionObject=new A("5FBF03B5-A92E-11CF-8EE3-00C00C205365");A.CodecListObject=new A("86D15240-311D-11D0-A3A4-00A0C90348F6");A.ScriptCommandObject=new A("1EFB1A30-0B62-11D0-A39B-00A0C90348F6");A.MarkerObject=new A("F487CD01-A951-11CF-8EE6-00C00C205365");A.BitrateMutualExclusionObject=new A("D6E229DC-35DA-11D1-9034-00A0C90349BE");A.ErrorCorrectionObject=new A("75B22635-668E-11CF-A6D9-00AA0062CE6C");A.ContentDescriptionObject=new A("75B22633-668E-11CF-A6D9-00AA0062CE6C");A.ExtendedContentDescriptionObject=new A("D2D0A440-E307-11D2-97F0-00A0C95EA850");A.ContentBrandingObject=new A("2211B3FA-BD23-11D2-B4B7-00A0C955FC6E");A.StreamBitratePropertiesObject=new A("7BF875CE-468D-11D1-8D82-006097C9A2B2");A.ContentEncryptionObject=new A("2211B3FB-BD23-11D2-B4B7-00A0C955FC6E");A.ExtendedContentEncryptionObject=new A("298AE614-2622-4C17-B935-DAE07EE9289C");A.DigitalSignatureObject=new A("2211B3FC-BD23-11D2-B4B7-00A0C955FC6E");A.PaddingObject=new A("1806D474-CADF-4509-A4BA-9AABCB96AAE8");A.ExtendedStreamPropertiesObject=new A("14E6A5CB-C672-4332-8399-A96952065B5A");A.AdvancedMutualExclusionObject=new A("A08649CF-4775-4670-8A16-6E35357566CD");A.GroupMutualExclusionObject=new A("D1465A40-5A79-4338-B71B-E36B8FD6C249");A.StreamPrioritizationObject=new A("D4FED15B-88D3-454F-81F0-ED5C45999E24");A.BandwidthSharingObject=new A("A69609E6-517B-11D2-B6AF-00C04FD908E9");A.LanguageListObject=new A("7C4346A9-EFE0-4BFC-B229-393EDE415C85");A.MetadataObject=new A("C5F8CBEA-5BAF-4877-8467-AA8C44FA4CCA");A.MetadataLibraryObject=new A("44231C94-9498-49D1-A141-1D134E457054");A.IndexParametersObject=new A("D6E229DF-35DA-11D1-9034-00A0C90349BE");A.MediaObjectIndexParametersObject=new A("6B203BAD-3F11-48E4-ACA8-D7613DE2CFA7");A.TimecodeIndexParametersObject=new A("F55E496D-9797-4B5D-8C8B-604DFE9BFB24");A.CompatibilityObject=new A("26F18B5D-4584-47EC-9F5F-0E651F0452C9");A.AdvancedContentEncryptionObject=new A("43058533-6981-49E6-9B74-AD12CB86D58C");A.AudioMedia=new A("F8699E40-5B4D-11CF-A8FD-00805F5C442B");A.VideoMedia=new A("BC19EFC0-5B4D-11CF-A8FD-00805F5C442B");A.CommandMedia=new A("59DACFC0-59E6-11D0-A3AC-00A0C90348F6");A.JFIF_Media=new A("B61BE100-5B4E-11CF-A8FD-00805F5C442B");A.Degradable_JPEG_Media=new A("35907DE0-E415-11CF-A917-00805F5C442B");A.FileTransferMedia=new A("91BD222C-F21C-497A-8B6D-5AA86BFC0185");A.BinaryMedia=new A("3AFB65E2-47EF-40F2-AC2C-70A90D71D343");A.ASF_Index_Placeholder_Object=new A("D9AADE20-7C17-4F9C-BC28-8555DD98E2A2");function rL(t){return iL[t]}function kf(t){return Ci(ft(t,"utf-16le"))}const iL=[kf,V_,sL,oL,aL,VT,V_];function V_(t){return new Uint8Array(t)}function sL(t,e=0){return VT(t,e)===1}function oL(t,e=0){return J.get(t,e)}function aL(t,e=0){return Yt.get(t,e)}function VT(t,e=0){return Te.get(t,e)}var U_;(function(t){t[t.UnicodeString=0]="UnicodeString",t[t.ByteArray=1]="ByteArray",t[t.Bool=2]="Bool",t[t.DWord=3]="DWord",t[t.QWord=4]="QWord",t[t.Word=5]="Word"})(U_||(U_={}));const lL={len:30,get:(t,e)=>({objectId:A.fromBin(t,e),objectSize:Number(Yt.get(t,e+16)),numberOfHeaderObjects:J.get(t,e+24)})},bs={len:24,get:(t,e)=>({objectId:A.fromBin(t,e),objectSize:Number(Yt.get(t,e+16))})};class mo{constructor(e){this.len=Number(e.objectSize)-bs.len}postProcessTag(e,n,r,i){if(n==="WM/Picture")e.push({id:n,value:Gv.fromBuffer(i)});else{const s=rL(r);if(!s)throw new Error(`unexpected value headerType: ${r}`);e.push({id:n,value:s(i)})}}}class W_ extends mo{get(e,n){return null}}class I0 extends mo{get(e,n){return{fileId:A.fromBin(e,n),fileSize:Yt.get(e,n+16),creationDate:Yt.get(e,n+24),dataPacketsCount:Yt.get(e,n+32),playDuration:Yt.get(e,n+40),sendDuration:Yt.get(e,n+48),preroll:Yt.get(e,n+56),flags:{broadcast:Qe(e,n+64,24),seekable:Qe(e,n+64,25)},minimumDataPacketSize:J.get(e,n+68),maximumDataPacketSize:J.get(e,n+72),maximumBitrate:J.get(e,n+76)}}}I0.guid=A.FilePropertiesObject;class C0 extends mo{get(e,n){return{streamType:A.decodeMediaType(A.fromBin(e,n)),errorCorrectionType:A.fromBin(e,n+8)}}}C0.guid=A.StreamPropertiesObject;class A0{constructor(){this.len=22}get(e,n){const r=new DataView(e.buffer,n);return{reserved1:A.fromBin(e,n),reserved2:r.getUint16(16,!0),extensionDataSize:r.getUint16(18,!0)}}}A0.guid=A.HeaderExtensionObject;const cL={len:20,get:(t,e)=>({entryCount:new DataView(t.buffer,e).getUint16(16,!0)})};async function H_(t){const e=await t.readNumber(Te);return(await t.readToken(new ne(e*2,"utf-16le"))).replace("\0","")}async function uL(t){const e=await t.readToken(cL),n=[];for(let r=0;r<e.entryCount;++r)n.push(await hL(t));return n}async function dL(t){const e=await t.readNumber(Te),n=new Uint8Array(e);return await t.readBuffer(n),n}async function hL(t){const e=await t.readNumber(Te);return{type:{videoCodec:(e&1)===1,audioCodec:(e&2)===2},codecName:await H_(t),description:await H_(t),information:await dL(t)}}class Qs extends mo{get(e,n){const r=[],i=new DataView(e.buffer,n);let s=10;for(let o=0;o<Qs.contentDescTags.length;++o){const a=i.getUint16(o*2,!0);if(a>0){const l=Qs.contentDescTags[o],c=s+a;r.push({id:l,value:kf(e.slice(n+s,n+c))}),s=c}}return r}}Qs.guid=A.ContentDescriptionObject;Qs.contentDescTags=["Title","Author","Copyright","Description","Rating"];class R0 extends mo{get(e,n){const r=[],i=new DataView(e.buffer,n),s=i.getUint16(0,!0);let o=2;for(let a=0;a<s;a+=1){const l=i.getUint16(o,!0);o+=2;const c=kf(e.slice(n+o,n+o+l));o+=l;const d=i.getUint16(o,!0);o+=2;const h=i.getUint16(o,!0);o+=2;const m=e.slice(n+o,n+o+h);o+=h,this.postProcessTag(r,c,d,m)}return r}}R0.guid=A.ExtendedContentDescriptionObject;class P0 extends mo{get(e,n){const r=new DataView(e.buffer,n);return{startTime:Yt.get(e,n),endTime:Yt.get(e,n+8),dataBitrate:r.getInt32(12,!0),bufferSize:r.getInt32(16,!0),initialBufferFullness:r.getInt32(20,!0),alternateDataBitrate:r.getInt32(24,!0),alternateBufferSize:r.getInt32(28,!0),alternateInitialBufferFullness:r.getInt32(32,!0),maximumObjectSize:r.getInt32(36,!0),flags:{reliableFlag:Qe(e,n+40,0),seekableFlag:Qe(e,n+40,1),resendLiveCleanpointsFlag:Qe(e,n+40,2)},streamNumber:r.getInt16(42,!0),streamLanguageId:r.getInt16(44,!0),averageTimePerFrame:r.getInt32(52,!0),streamNameCount:r.getInt32(54,!0),payloadExtensionSystems:r.getInt32(56,!0),streamNames:[],streamPropertiesObject:null}}}P0.guid=A.ExtendedStreamPropertiesObject;class hh extends mo{get(e,n){const r=[],i=new DataView(e.buffer,n),s=i.getUint16(0,!0);let o=2;for(let a=0;a<s;a+=1){o+=4;const l=i.getUint16(o,!0);o+=2;const c=i.getUint16(o,!0);o+=2;const d=i.getUint32(o,!0);o+=4;const h=kf(e.slice(n+o,n+o+l));o+=l;const m=e.slice(n+o,n+o+d);o+=d,this.postProcessTag(r,h,c,m)}return r}}hh.guid=A.MetadataObject;class N0 extends hh{}N0.guid=A.MetadataLibraryObject;class Gv{static fromBuffer(e){return new Gv(e.length).get(e,0)}constructor(e){this.len=e}get(e,n){const r=new DataView(e.buffer,n),i=r.getUint8(0),s=r.getInt32(1,!0);let o=5;for(;r.getUint16(o)!==0;)o+=2;const a=new ne(o-5,"utf-16le").get(e,5);for(;r.getUint16(o)!==0;)o+=2;const l=new ne(o-5,"utf-16le").get(e,5);return{type:lc[i],format:a,description:l,size:s,data:e.slice(o+4)}}}const zu=De("music-metadata:parser:ASF"),fL="asf";class mL extends Mn{async parse(){const e=await this.tokenizer.readToken(lL);if(!e.objectId.equals(A.HeaderObject))throw new Error(`expected asf header; but was not found; got: ${e.objectId.str}`);try{await this.parseObjectHeader(e.numberOfHeaderObjects)}catch(n){zu("Error while parsing ASF: %s",n)}}async parseObjectHeader(e){let n;do{const r=await this.tokenizer.readToken(bs);switch(zu("header GUID=%s",r.objectId.str),r.objectId.str){case I0.guid.str:{const i=await this.tokenizer.readToken(new I0(r));this.metadata.setFormat("duration",Number(i.playDuration/BigInt(1e3))/1e4-Number(i.preroll)/1e3),this.metadata.setFormat("bitrate",i.maximumBitrate);break}case C0.guid.str:{const i=await this.tokenizer.readToken(new C0(r));this.metadata.setFormat("container",`ASF/${i.streamType}`);break}case A0.guid.str:{const i=await this.tokenizer.readToken(new A0);await this.parseExtensionObject(i.extensionDataSize);break}case Qs.guid.str:n=await this.tokenizer.readToken(new Qs(r)),await this.addTags(n);break;case R0.guid.str:n=await this.tokenizer.readToken(new R0(r)),await this.addTags(n);break;case A.CodecListObject.str:{const i=await uL(this.tokenizer);i.forEach(o=>{this.metadata.addStreamInfo({type:o.type.videoCodec?Xs.video:Xs.audio,codecName:o.codecName})});const s=i.filter(o=>o.type.audioCodec).map(o=>o.codecName).join("/");this.metadata.setFormat("codec",s);break}case A.StreamBitratePropertiesObject.str:await this.tokenizer.ignore(r.objectSize-bs.len);break;case A.PaddingObject.str:zu("Padding: %s bytes",r.objectSize-bs.len),await this.tokenizer.ignore(r.objectSize-bs.len);break;default:this.metadata.addWarning(`Ignore ASF-Object-GUID: ${r.objectId.str}`),zu("Ignore ASF-Object-GUID: %s",r.objectId.str),await this.tokenizer.readToken(new W_(r))}}while(--e)}async addTags(e){await Promise.all(e.map(({id:n,value:r})=>this.metadata.addTag(fL,n,r)))}async parseExtensionObject(e){do{const n=await this.tokenizer.readToken(bs),r=n.objectSize-bs.len;switch(n.objectId.str){case P0.guid.str:await this.tokenizer.readToken(new P0(n));break;case hh.guid.str:{const i=await this.tokenizer.readToken(new hh(n));await this.addTags(i);break}case N0.guid.str:{const i=await this.tokenizer.readToken(new N0(n));await this.addTags(i);break}case A.PaddingObject.str:await this.tokenizer.ignore(r);break;case A.CompatibilityObject.str:this.tokenizer.ignore(r);break;case A.ASF_Index_Placeholder_Object.str:await this.tokenizer.ignore(r);break;default:this.metadata.addWarning(`Ignore ASF-Object-GUID: ${n.objectId.str}`),await this.tokenizer.readToken(new W_(n));break}e-=n.objectSize}while(e>0)}}class cc{static fromBase64(e){return cc.fromBuffer(Uint8Array.from(atob(e),n=>n.charCodeAt(0)))}static fromBuffer(e){return new cc(e.length).get(e,0)}constructor(e){this.len=e}get(e,n){const r=lc[re.get(e,n)];n+=4;const i=re.get(e,n);n+=4;const s=new ne(i,"utf-8").get(e,n);n+=i;const o=re.get(e,n);n+=4;const a=new ne(o,"utf-8").get(e,n);n+=o;const l=re.get(e,n);n+=4;const c=re.get(e,n);n+=4;const d=re.get(e,n);n+=4;const h=re.get(e,n);n+=4;const m=re.get(e,n);n+=4;const p=Uint8Array.from(e.slice(n,n+m));return{type:r,format:s,description:a,width:l,height:c,colour_depth:d,indexed_color:h,data:p}}}const Bu={len:7,get:(t,e)=>({packetType:pe.get(t,e),vorbis:new ne(6,"ascii").get(t,e+1)})},pL={len:23,get:(t,e)=>({version:J.get(t,e+0),channelMode:pe.get(t,e+4),sampleRate:J.get(t,e+5),bitrateMax:J.get(t,e+9),bitrateNominal:J.get(t,e+13),bitrateMin:J.get(t,e+17)})},kp=De("music-metadata:parser:ID3");class Tf extends Mn{constructor(){super(...arguments),this.id3parser=new rr}static async startsWithID3v2Header(e){return(await e.peekToken(k0)).fileIdentifier==="ID3"}async parse(){try{await this.parseID3v2()}catch(e){if(e instanceof rt)kp("End-of-stream");else throw e}}finalize(){}async parseID3v2(){await this.tryReadId3v2Headers(),kp("End of ID3v2 header, go to MPEG-parser: pos=%s",this.tokenizer.position),await this.postId3v2Parse(),this.options.skipPostHeaders&&this.metadata.hasAny()?this.finalize():(await new qv().init(this.metadata,this.tokenizer,this.options).parse(),this.finalize())}async tryReadId3v2Headers(){if((await this.tokenizer.peekToken(k0)).fileIdentifier==="ID3")return kp("Found ID3v2 header, pos=%s",this.tokenizer.position),await this.id3parser.parse(this.metadata,this.tokenizer,this.options),this.tryReadId3v2Headers()}}class UT{constructor(e,n){this.data=e,this.offset=n}readInt32(){const e=J.get(this.data,this.offset);return this.offset+=4,e}readStringUtf8(){const e=this.readInt32(),n=new TextDecoder("utf-8").decode(this.data.subarray(this.offset,this.offset+e));return this.offset+=e,n}parseUserComment(){const e=this.offset,n=this.readStringUtf8(),r=n.indexOf("=");return{key:n.slice(0,r).toUpperCase(),value:n.slice(r+1),len:this.offset-e}}}const bo=De("music-metadata:parser:ogg:vorbis1");class Ys{constructor(e,n){this.metadata=e,this.options=n,this.pageSegments=[]}async parsePage(e,n){if(e.headerType.firstPage)this.parseFirstPage(e,n);else{if(e.headerType.continued){if(this.pageSegments.length===0)throw new Error("Cannot continue on previous page");this.pageSegments.push(n)}if(e.headerType.lastPage||!e.headerType.continued){if(this.pageSegments.length>0){const r=Ys.mergeUint8Arrays(this.pageSegments);await this.parseFullPage(r)}this.pageSegments=e.headerType.lastPage?[]:[n]}}e.headerType.lastPage&&this.calculateDuration(e)}static mergeUint8Arrays(e){const n=e.reduce((i,s)=>i+s.length,0),r=new Uint8Array(n);return e.forEach((i,s,o)=>{const a=o.slice(0,s).reduce((l,c)=>l+c.length,0);r.set(i,a)}),r}async flush(){await this.parseFullPage(Ys.mergeUint8Arrays(this.pageSegments))}async parseUserComment(e,n){const i=new UT(e,n).parseUserComment();return await this.addTag(i.key,i.value),i.len}async addTag(e,n){if(e==="METADATA_BLOCK_PICTURE"&&typeof n=="string"){if(this.options.skipCovers){bo("Ignore picture");return}n=cc.fromBase64(n),bo(`Push picture: id=${e}, format=${n.format}`)}else bo(`Push tag: id=${e}, value=${n}`);await this.metadata.addTag("vorbis",e,n)}calculateDuration(e){this.metadata.format.sampleRate&&e.absoluteGranulePosition>=0&&(this.metadata.setFormat("numberOfSamples",e.absoluteGranulePosition),this.metadata.setFormat("duration",e.absoluteGranulePosition/this.metadata.format.sampleRate))}parseFirstPage(e,n){this.metadata.setFormat("codec","Vorbis I"),bo("Parse first page");const r=Bu.get(n,0);if(r.vorbis!=="vorbis")throw new Error("Metadata does not look like Vorbis");if(r.packetType===1){const i=pL.get(n,Bu.len);this.metadata.setFormat("sampleRate",i.sampleRate),this.metadata.setFormat("bitrate",i.bitrateNominal),this.metadata.setFormat("numberOfChannels",i.channelMode),bo("sample-rate=%s[hz], bitrate=%s[b/s], channel-mode=%s",i.sampleRate,i.bitrateNominal,i.channelMode)}else throw new Error("First Ogg page should be type 1: the identification header")}async parseFullPage(e){const n=Bu.get(e,0);switch(bo("Parse full page: type=%s, byteLength=%s",n.packetType,e.byteLength),n.packetType){case 3:return this.parseUserCommentList(e,Bu.len)}}async parseUserCommentList(e,n){const r=J.get(e,n);n+=4,n+=r;let i=J.get(e,n);for(n+=4;i-- >0;)n+=await this.parseUserComment(e,n)}}const gL=De("music-metadata:parser:FLAC");var Wr;(function(t){t[t.STREAMINFO=0]="STREAMINFO",t[t.PADDING=1]="PADDING",t[t.APPLICATION=2]="APPLICATION",t[t.SEEKTABLE=3]="SEEKTABLE",t[t.VORBIS_COMMENT=4]="VORBIS_COMMENT",t[t.CUESHEET=5]="CUESHEET",t[t.PICTURE=6]="PICTURE"})(Wr||(Wr={}));class yL extends Tf{constructor(){super(...arguments),this.padding=0}init(e,n,r){return super.init(e,n,r),this.vorbisParser=new Ys(e,r),this}async postId3v2Parse(){if((await this.tokenizer.readToken(Be)).toString()!=="fLaC")throw new Error("Invalid FLAC preamble");let n;do n=await this.tokenizer.readToken(vL),await this.parseDataBlock(n);while(!n.lastBlock);if(this.tokenizer.fileInfo.size&&this.metadata.format.duration){const r=this.tokenizer.fileInfo.size-this.tokenizer.position;this.metadata.setFormat("bitrate",8*r/this.metadata.format.duration)}}async parseDataBlock(e){switch(gL(`blockHeader type=${e.type}, length=${e.length}`),e.type){case Wr.STREAMINFO:return this.parseBlockStreamInfo(e.length);case Wr.PADDING:this.padding+=e.length;break;case Wr.APPLICATION:break;case Wr.SEEKTABLE:break;case Wr.VORBIS_COMMENT:return this.parseComment(e.length);case Wr.CUESHEET:break;case Wr.PICTURE:await this.parsePicture(e.length);return;default:this.metadata.addWarning(`Unknown block type: ${e.type}`)}return this.tokenizer.ignore(e.length).then()}async parseBlockStreamInfo(e){if(e!==q_.len)throw new Error("Unexpected block-stream-info length");const n=await this.tokenizer.readToken(q_);this.metadata.setFormat("container","FLAC"),this.metadata.setFormat("codec","FLAC"),this.metadata.setFormat("lossless",!0),this.metadata.setFormat("numberOfChannels",n.channels),this.metadata.setFormat("bitsPerSample",n.bitsPerSample),this.metadata.setFormat("sampleRate",n.sampleRate),n.totalSamples>0&&this.metadata.setFormat("duration",n.totalSamples/n.sampleRate)}async parseComment(e){const n=await this.tokenizer.readToken(new on(e)),r=new UT(n,0);r.readStringUtf8();const i=r.readInt32(),s=new Array(i);for(let o=0;o<i;o++)s[o]=r.parseUserComment();await Promise.all(s.map(o=>this.vorbisParser.addTag(o.key,o.value)))}async parsePicture(e){if(this.options.skipCovers)return this.tokenizer.ignore(e);const n=await this.tokenizer.readToken(new cc(e));this.vorbisParser.addTag("METADATA_BLOCK_PICTURE",n)}}const vL={len:4,get:(t,e)=>({lastBlock:Qe(t,e,7),type:xe(t,e,1,7),length:tn.get(t,e+1)})},q_={len:34,get:(t,e)=>({minimumBlockSize:Re.get(t,e),maximumBlockSize:Re.get(t,e+2)/1e3,minimumFrameSize:tn.get(t,e+4),maximumFrameSize:tn.get(t,e+7),sampleRate:tn.get(t,e+10)>>4,channels:xe(t,e+12,4,3)+1,bitsPerSample:xe(t,e+12,7,5)+1,totalSamples:xe(t,e+13,4,36),fileMD5:new on(16).get(t,e+18)})},WT=De("music-metadata:parser:MP4:atom"),fh={len:8,get:(t,e)=>{const n=re.get(t,e);if(n<0)throw new Error("Invalid atom header length");return{length:BigInt(n),name:new ne(4,"latin1").get(t,e+4)}},put:(t,e,n)=>(re.put(t,e,Number(n.length)),Be.put(t,e+4,n.name))},xL=zv,G_={len:4,get:(t,e)=>({type:new ne(4,"ascii").get(t,e)})};class HT{constructor(e,n,r){if(this.len=e,e<n)throw new Error(`Atom ${r} expected to be ${n}, but specifies ${e} bytes long.`);e>n&&WT(`Warning: atom ${r} expected to be ${n}, but was actually ${e} bytes long.`)}}const xa={len:4,get:(t,e)=>{const n=re.get(t,e)-2082844800;return new Date(n*1e3)}};class wL extends HT{constructor(e){super(e,24,"mdhd"),this.len=e}get(e,n){return{version:pe.get(e,n+0),flags:tn.get(e,n+1),creationTime:xa.get(e,n+4),modificationTime:xa.get(e,n+8),timeScale:re.get(e,n+12),duration:re.get(e,n+16),language:Re.get(e,n+20),quality:Re.get(e,n+22)}}}class _L extends HT{constructor(e){super(e,100,"mvhd"),this.len=e}get(e,n){return{version:pe.get(e,n),flags:tn.get(e,n+1),creationTime:xa.get(e,n+4),modificationTime:xa.get(e,n+8),timeScale:re.get(e,n+12),duration:re.get(e,n+16),preferredRate:re.get(e,n+20),preferredVolume:Re.get(e,n+24),previewTime:re.get(e,n+72),previewDuration:re.get(e,n+76),posterTime:re.get(e,n+80),selectionTime:re.get(e,n+84),selectionDuration:re.get(e,n+88),currentTime:re.get(e,n+92),nextTrackID:re.get(e,n+96)}}}class EL{constructor(e){this.len=e}get(e,n){return{type:{set:pe.get(e,n+0),type:tn.get(e,n+1)},locale:tn.get(e,n+4),value:new on(this.len-8).get(e,n+8)}}}class SL{constructor(e){this.len=e}get(e,n){return{version:pe.get(e,n),flags:tn.get(e,n+1),name:new ne(this.len-4,"utf-8").get(e,n+4)}}}class bL{constructor(e){this.len=e}get(e,n){return{version:pe.get(e,n),flags:tn.get(e,n+1),creationTime:xa.get(e,n+4),modificationTime:xa.get(e,n+8),trackId:re.get(e,n+12),duration:re.get(e,n+20),layer:Re.get(e,n+24),alternateGroup:Re.get(e,n+26),volume:Re.get(e,n+28)}}}const K_={len:8,get:(t,e)=>({version:pe.get(t,e),flags:tn.get(t,e+1),numberOfEntries:re.get(t,e+4)})};class kL{constructor(e){this.len=e}get(e,n){return{dataFormat:Be.get(e,n),dataReferenceIndex:Re.get(e,n+10),description:new on(this.len-12).get(e,n+12)}}}class TL{constructor(e){this.len=e}get(e,n){const r=K_.get(e,n);n+=K_.len;const i=[];for(let s=0;s<r.numberOfEntries;++s){const o=re.get(e,n);n+=re.len,i.push(new kL(o).get(e,n)),n+=o}return{header:r,table:i}}}const X_={len:8,get(t,e){return{version:Xr.get(t,e),revision:Xr.get(t,e+2),vendor:In.get(t,e+4)}}},IL={len:12,get(t,e){return{numAudioChannels:Xr.get(t,e+0),sampleSize:Xr.get(t,e+2),compressionId:Xr.get(t,e+4),packetSize:Xr.get(t,e+6),sampleRate:Re.get(t,e+8)+Re.get(t,e+10)/1e4}}};class Kv{constructor(e,n){this.len=e,this.token=n}get(e,n){const r=In.get(e,n+4);return{version:ac.get(e,n+0),flags:$v.get(e,n+1),numberOfEntries:r,entries:qT(e,this.token,n+8,this.len-8,r)}}}const CL={len:8,get(t,e){return{count:In.get(t,e+0),duration:In.get(t,e+4)}}};class AL extends Kv{constructor(e){super(e,CL),this.len=e}}const RL={len:12,get(t,e){return{firstChunk:In.get(t,e),samplesPerChunk:In.get(t,e+4),sampleDescriptionId:In.get(t,e+8)}}};class PL extends Kv{constructor(e){super(e,RL),this.len=e}}class NL{constructor(e){this.len=e}get(e,n){const r=In.get(e,n+8);return{version:ac.get(e,n),flags:$v.get(e,n+1),sampleSize:In.get(e,n+4),numberOfEntries:r,entries:qT(e,In,n+12,this.len-12,r)}}}class DL extends Kv{constructor(e){super(e,In),this.len=e}}class jL{constructor(e){this.len=e}get(e,n){const r=Xr.get(e,n+0);return new ne(r,"utf-8").get(e,n+2)}}function qT(t,e,n,r,i){if(WT(`remainingLen=${r}, numberOfEntries=${i} * token-len=${e.len}`),r===0)return[];if(r!==i*e.len)throw new Error("mismatch number-of-entries with remaining atom-length");const s=[];for(let o=0;o<i;++o)s.push(e.get(t,n)),n+=e.len;return s}const OL=De("music-metadata:parser:MP4:Atom");class mh{static async readAtom(e,n,r,i){const s=e.position,o=await e.readToken(fh);o.length===BigInt(1)&&(o.length=await e.readToken(xL));const l=new mh(o,o.length===BigInt(1),r),c=l.getPayloadLength(i);return OL(`parse atom name=${l.atomPath}, extended=${l.extended}, offset=${s}, len=${l.header.length}`),await l.readData(e,n,c),l}constructor(e,n,r){this.header=e,this.extended=n,this.parent=r,this.children=[],this.atomPath=(this.parent?`${this.parent.atomPath}.`:"")+this.header.name}getHeaderLength(){return this.extended?16:8}getPayloadLength(e){return(this.header.length===BigInt(0)?e:Number(this.header.length))-this.getHeaderLength()}async readAtoms(e,n,r){for(;r>0;){const i=await mh.readAtom(e,n,this,r);this.children.push(i),r-=i.header.length===BigInt(0)?r:Number(i.header.length)}}async readData(e,n,r){switch(this.header.name){case"moov":case"udta":case"trak":case"mdia":case"minf":case"stbl":case"<id>":case"ilst":case"tref":return this.readAtoms(e,n,this.getPayloadLength(r));case"meta":{const s=(await e.peekToken(fh)).name==="hdlr"?0:4;return await e.ignore(s),this.readAtoms(e,n,this.getPayloadLength(r)-s)}default:return n(this,r)}}}const gr=De("music-metadata:parser:MP4"),ML="iTunes",Q_={raw:{lossy:!1,format:"raw"},MAC3:{lossy:!0,format:"MACE 3:1"},MAC6:{lossy:!0,format:"MACE 6:1"},ima4:{lossy:!0,format:"IMA 4:1"},ulaw:{lossy:!0,format:"uLaw 2:1"},alaw:{lossy:!0,format:"uLaw 2:1"},Qclp:{lossy:!0,format:"QUALCOMM PureVoice"},".mp3":{lossy:!0,format:"MPEG-1 layer 3"},alac:{lossy:!1,format:"ALAC"},"ac-3":{lossy:!0,format:"AC-3"},mp4a:{lossy:!0,format:"MPEG-4/AAC"},mp4s:{lossy:!0,format:"MP4S"},c608:{lossy:!0,format:"CEA-608"},c708:{lossy:!0,format:"CEA-708"}};function Y_(t,e,n){return n.indexOf(t)===e}class ph extends Mn{constructor(){super(...arguments),this.tracks=[],this.atomParsers={mvhd:async e=>{const n=await this.tokenizer.readToken(new _L(e));this.metadata.setFormat("creationTime",n.creationTime),this.metadata.setFormat("modificationTime",n.modificationTime)},mdhd:async e=>{const n=await this.tokenizer.readToken(new wL(e)),r=this.getTrackDescription();r.creationTime=n.creationTime,r.modificationTime=n.modificationTime,r.timeScale=n.timeScale,r.duration=n.duration},chap:async e=>{const n=this.getTrackDescription(),r=[];for(;e>=re.len;)r.push(await this.tokenizer.readNumber(re)),e-=re.len;n.chapterList=r},tkhd:async e=>{const n=await this.tokenizer.readToken(new bL(e));this.tracks.push(n)},mdat:async e=>{if(this.audioLengthInBytes=e,this.calculateBitRate(),this.options.includeChapters){const n=this.tracks.filter(r=>r.chapterList);if(n.length===1){const r=n[0].chapterList,i=this.tracks.filter(s=>r.indexOf(s.trackId)!==-1);if(i.length===1)return this.parseChapterTrack(i[0],n[0],e)}}await this.tokenizer.ignore(e)},ftyp:async e=>{const n=[];for(;e>0;){const i=await this.tokenizer.readToken(G_);e-=G_.len;const s=i.type.replace(/\W/g,"");s.length>0&&n.push(s)}gr(`ftyp: ${n.join("/")}`);const r=n.filter(Y_).join("/");this.metadata.setFormat("container",r)},stsd:async e=>{const n=await this.tokenizer.readToken(new TL(e)),r=this.getTrackDescription();r.soundSampleDescription=n.table.map(i=>this.parseSoundSampleDescription(i))},stsc:async e=>{const n=await this.tokenizer.readToken(new PL(e));this.getTrackDescription().sampleToChunkTable=n.entries},stts:async e=>{const n=await this.tokenizer.readToken(new AL(e));this.getTrackDescription().timeToSampleTable=n.entries},stsz:async e=>{const n=await this.tokenizer.readToken(new NL(e)),r=this.getTrackDescription();r.sampleSize=n.sampleSize,r.sampleSizeTable=n.entries},stco:async e=>{const n=await this.tokenizer.readToken(new DL(e));this.getTrackDescription().chunkOffsetTable=n.entries},date:async e=>{const n=await this.tokenizer.readToken(new ne(e,"utf-8"));await this.addTag("date",n)}}}static read_BE_Integer(e,n){const r=(n?"INT":"UINT")+e.length*8+(e.length>1?"_BE":""),i=UO[r];if(!i)throw new Error(`Token for integer type not found: "${r}"`);return Number(i.get(e,0))}async parse(){this.tracks=[];let e=this.tokenizer.fileInfo.size||0;for(;!this.tokenizer.fileInfo.size||e>0;){try{if((await this.tokenizer.peekToken(fh)).name==="\0\0\0\0"){const o=`Error at offset=${this.tokenizer.position}: box.id=0`;gr(o),this.addWarning(o);break}}catch(s){if(s instanceof Error){const o=`Error at offset=${this.tokenizer.position}: ${s.message}`;gr(o),this.addWarning(o)}else throw s;break}const i=await mh.readAtom(this.tokenizer,(s,o)=>this.handleAtom(s,o),null,e);e-=i.header.length===BigInt(0)?e:Number(i.header.length)}const n=[];this.tracks.forEach(i=>{const s=[];i.soundSampleDescription.forEach(o=>{const a={},l=Q_[o.dataFormat];if(l?(s.push(l.format),a.codecName=l.format):a.codecName=`<${o.dataFormat}>`,o.description){const{description:c}=o;c.sampleRate>0&&(a.type=Xs.audio,a.audio={samplingFrequency:c.sampleRate,bitDepth:c.sampleSize,channels:c.numAudioChannels})}this.metadata.addStreamInfo(a)}),s.length>=1&&n.push(s.join("/"))}),n.length>0&&this.metadata.setFormat("codec",n.filter(Y_).join("+"));const r=this.tracks.filter(i=>i.soundSampleDescription.length>=1&&i.soundSampleDescription[0].description&&i.soundSampleDescription[0].description.numAudioChannels>0);if(r.length>=1){const i=r[0];if(i.timeScale>0){const a=i.duration/i.timeScale;this.metadata.setFormat("duration",a)}const s=i.soundSampleDescription[0];if(s.description&&(this.metadata.setFormat("sampleRate",s.description.sampleRate),this.metadata.setFormat("bitsPerSample",s.description.sampleSize),this.metadata.setFormat("numberOfChannels",s.description.numAudioChannels),i.timeScale===0&&i.timeToSampleTable.length>0)){const l=i.timeToSampleTable.map(c=>c.count*c.duration).reduce((c,d)=>c+d)/s.description.sampleRate;this.metadata.setFormat("duration",l)}const o=Q_[s.dataFormat];o&&this.metadata.setFormat("lossless",!o.lossy),this.calculateBitRate()}}async handleAtom(e,n){if(e.parent)switch(e.parent.header.name){case"ilst":case"<id>":return this.parseMetadataItemData(e)}if(this.atomParsers[e.header.name])return this.atomParsers[e.header.name](n);gr(`No parser for atom path=${e.atomPath}, payload-len=${n}, ignoring atom`),await this.tokenizer.ignore(n)}getTrackDescription(){return this.tracks[this.tracks.length-1]}calculateBitRate(){this.audioLengthInBytes&&this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*this.audioLengthInBytes/this.metadata.format.duration)}async addTag(e,n){await this.metadata.addTag(ML,e,n)}addWarning(e){gr(`Warning: ${e}`),this.metadata.addWarning(e)}parseMetadataItemData(e){let n=e.header.name;return e.readAtoms(this.tokenizer,async(r,i)=>{const s=r.getPayloadLength(i);switch(r.header.name){case"data":return this.parseValueAtom(n,r);case"name":case"mean":case"rate":{const o=await this.tokenizer.readToken(new SL(s));n+=`:${o.name}`;break}default:{const o=await this.tokenizer.readToken(new on(s));this.addWarning(`Unsupported meta-item: ${n}[${r.header.name}] => value=${Vv(o)} ascii=${Bv(o,"ascii")}`)}}},e.getPayloadLength(0))}async parseValueAtom(e,n){const r=await this.tokenizer.readToken(new EL(Number(n.header.length)-fh.len));if(r.type.set!==0)throw new Error(`Unsupported type-set != 0: ${r.type.set}`);switch(r.type.type){case 0:switch(e){case"trkn":case"disk":{const i=pe.get(r.value,3),s=pe.get(r.value,5);await this.addTag(e,`${i}/${s}`);break}case"gnre":{const i=pe.get(r.value,1),s=dh[i-1];await this.addTag(e,s);break}case"rate":{const i=new TextDecoder("ascii").decode(r.value);await this.addTag(e,i);break}default:gr(`unknown proprietary value type for: ${n.atomPath}`)}break;case 1:case 18:await this.addTag(e,new TextDecoder("utf-8").decode(r.value));break;case 13:if(this.options.skipCovers)break;await this.addTag(e,{format:"image/jpeg",data:Uint8Array.from(r.value)});break;case 14:if(this.options.skipCovers)break;await this.addTag(e,{format:"image/png",data:Uint8Array.from(r.value)});break;case 21:await this.addTag(e,ph.read_BE_Integer(r.value,!0));break;case 22:await this.addTag(e,ph.read_BE_Integer(r.value,!1));break;case 65:await this.addTag(e,pe.get(r.value,0));break;case 66:await this.addTag(e,Re.get(r.value,0));break;case 67:await this.addTag(e,re.get(r.value,0));break;default:this.addWarning(`atom key=${e}, has unknown well-known-type (data-type): ${r.type.type}`)}}parseSoundSampleDescription(e){const n={dataFormat:e.dataFormat,dataReferenceIndex:e.dataReferenceIndex};let r=0;const i=X_.get(e.description,r);return r+=X_.len,i.version===0||i.version===1?n.description=IL.get(e.description,r):gr(`Warning: sound-sample-description ${i} not implemented`),n}async parseChapterTrack(e,n,r){if(!e.sampleSize&&e.chunkOffsetTable.length!==e.sampleSizeTable.length)throw new Error("Expected equal chunk-offset-table & sample-size-table length.");const i=[];for(let s=0;s<e.chunkOffsetTable.length&&r>0;++s){const a=e.chunkOffsetTable[s]-this.tokenizer.position,l=e.sampleSize>0?e.sampleSize:e.sampleSizeTable[s];if(r-=a+l,r<0)throw new Error("Chapter chunk exceeding token length");await this.tokenizer.ignore(a);const c=await this.tokenizer.readToken(new jL(l));gr(`Chapter ${s+1}: ${c}`);const d={title:c,sampleOffset:this.findSampleOffset(n,this.tokenizer.position)};gr(`Chapter title=${d.title}, offset=${d.sampleOffset}/${this.tracks[0].duration}`),i.push(d)}this.metadata.setFormat("chapters",i),await this.tokenizer.ignore(r)}findSampleOffset(e,n){let r=0;e.timeToSampleTable.forEach(s=>{r+=s.count*s.duration}),gr(`Total duration=${r}`);let i=0;for(;i<e.chunkOffsetTable.length&&e.chunkOffsetTable[i]<n;)++i;return this.getChunkDuration(i+1,e)}getChunkDuration(e,n){let r=0,i=n.timeToSampleTable[r].count,s=n.timeToSampleTable[r].duration,o=1,a=this.getSamplesPerChunk(o,n.sampleToChunkTable),l=0;for(;o<e;){const c=Math.min(i,a);l+=c*s,i-=c,a-=c,a===0?(++o,a=this.getSamplesPerChunk(o,n.sampleToChunkTable)):(++r,i=n.timeToSampleTable[r].count,s=n.timeToSampleTable[r].duration)}return l}getSamplesPerChunk(e,n){for(let r=0;r<n.length-1;++r)if(e>=n[r].firstChunk&&e<n[r+1].firstChunk)return n[r].samplesPerChunk;return n[n.length-1].samplesPerChunk}}var J_;(function(t){t[t.not_set=0]="not_set",t[t.radio=1]="radio",t[t.audiophile=2]="audiophile"})(J_||(J_={}));var Z_;(function(t){t[t.unspecified=0]="unspecified",t[t.engineer=1]="engineer",t[t.user=2]="user",t[t.automatic=3]="automatic",t[t.rms_average=4]="rms_average"})(Z_||(Z_={}));const eE={len:2,get:(t,e)=>{const n=xe(t,e,0,3),r=xe(t,e,6,1),i=xe(t,e,7,9)/10;if(n>0)return{type:xe(t,e,0,3),origin:xe(t,e,3,3),adjustment:r?-i:i}}},LL={len:27,get:(t,e)=>{const n=re.get(t,e+2);return{revision:xe(t,e,0,4),vbr_method:xe(t,e,4,4),lowpass_filter:100*pe.get(t,e+1),track_peak:n===0?null:n/2**23,track_gain:eE.get(t,6),album_gain:eE.get(t,8),music_length:re.get(t,e+20),music_crc:pe.get(t,e+24),header_crc:Re.get(t,e+24)}}},tE=new ne(4,"ascii"),Tp=new ne(6,"ascii"),FL={len:4,get:(t,e)=>({frames:_n(t,e,31),bytes:_n(t,e,30),toc:_n(t,e,29),vbrScale:_n(t,e,28)})};async function $L(t){const e=await t.readToken(FL),n={numFrames:null,streamSize:null,vbrScale:null};if(e.frames&&(n.numFrames=await t.readToken(re)),e.bytes&&(n.streamSize=await t.readToken(re)),e.toc&&(n.toc=new Uint8Array(100),await t.readBuffer(n.toc)),e.vbrScale&&(n.vbrScale=await t.readToken(re)),await t.peekToken(new ne(4,"ascii"))==="LAME"){await t.ignore(4),n.lame={version:await t.readToken(new ne(5,"ascii"))};const i=n.lame.version.match(/\d+.\d+/g);if(i!==null){const o=i[0].split(".").map(a=>Number.parseInt(a,10));o[0]>=3&&o[1]>=90&&(n.lame.extended=await t.readToken(LL))}}return n}const xn=De("music-metadata:parser:mpeg"),nE=1024,rE={AudioObjectTypes:["AAC Main","AAC LC","AAC SSR","AAC LTP"],SamplingFrequencies:[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,null,null,-1]},zL=[void 0,["front-center"],["front-left","front-right"],["front-center","front-left","front-right"],["front-center","front-left","front-right","back-center"],["front-center","front-left","front-right","back-left","back-right"],["front-center","front-left","front-right","back-left","back-right","LFE-channel"],["front-center","front-left","front-right","side-left","side-right","back-left","back-right","LFE-channel"]];class wt{constructor(e,n){this.bitrateIndex=null,this.sampRateFreqIndex=null,this.padding=null,this.privateBit=null,this.channelModeIndex=null,this.modeExtension=null,this.isOriginalMedia=null,this.version=null,this.bitrate=null,this.samplingRate=null,this.frameLength=0,this.versionIndex=xe(e,n+1,3,2),this.layer=wt.LayerDescription[xe(e,n+1,5,2)],this.versionIndex>1&&this.layer===0?this.parseAdtsHeader(e,n):this.parseMpegHeader(e,n),this.isProtectedByCRC=!_n(e,n+1,7)}calcDuration(e){return this.samplingRate==null?null:e*this.calcSamplesPerFrame()/this.samplingRate}calcSamplesPerFrame(){return wt.samplesInFrameTable[this.version===1?0:1][this.layer]}calculateSideInfoLength(){if(this.layer!==3)return 2;if(this.channelModeIndex===3){if(this.version===1)return 17;if(this.version===2||this.version===2.5)return 9}else{if(this.version===1)return 32;if(this.version===2||this.version===2.5)return 17}return null}calcSlotSize(){return[null,4,1,1][this.layer]}parseMpegHeader(e,n){this.container="MPEG",this.bitrateIndex=xe(e,n+2,0,4),this.sampRateFreqIndex=xe(e,n+2,4,2),this.padding=_n(e,n+2,6),this.privateBit=_n(e,n+2,7),this.channelModeIndex=xe(e,n+3,0,2),this.modeExtension=xe(e,n+3,2,2),this.isCopyrighted=_n(e,n+3,4),this.isOriginalMedia=_n(e,n+3,5),this.emphasis=xe(e,n+3,7,2),this.version=wt.VersionID[this.versionIndex],this.channelMode=wt.ChannelMode[this.channelModeIndex],this.codec=`MPEG ${this.version} Layer ${this.layer}`;const r=this.calcBitrate();if(!r)throw new Error("Cannot determine bit-rate");if(this.bitrate=r*1e3,this.samplingRate=this.calcSamplingRate(),this.samplingRate==null)throw new Error("Cannot determine sampling-rate")}parseAdtsHeader(e,n){xn("layer=0 => ADTS"),this.version=this.versionIndex===2?4:2,this.container=`ADTS/MPEG-${this.version}`;const r=xe(e,n+2,0,2);this.codec="AAC",this.codecProfile=rE.AudioObjectTypes[r],xn(`MPEG-4 audio-codec=${this.codec}`);const i=xe(e,n+2,2,4);this.samplingRate=rE.SamplingFrequencies[i],xn(`sampling-rate=${this.samplingRate}`);const s=xe(e,n+2,7,3);this.mp4ChannelConfig=zL[s],xn(`channel-config=${this.mp4ChannelConfig?this.mp4ChannelConfig.join("+"):"?"}`),this.frameLength=xe(e,n+3,6,2)<<11}calcBitrate(){if(this.bitrateIndex===0||this.bitrateIndex===15)return null;if(this.version&&this.bitrateIndex){const e=10*Math.floor(this.version)+this.layer;return wt.bitrate_index[this.bitrateIndex][e]}return null}calcSamplingRate(){return this.sampRateFreqIndex===3||this.version===null||this.sampRateFreqIndex==null?null:wt.sampling_rate_freq_index[this.version][this.sampRateFreqIndex]}}wt.SyncByte1=255;wt.SyncByte2=224;wt.VersionID=[2.5,null,2,1];wt.LayerDescription=[0,3,2,1];wt.ChannelMode=["stereo","joint_stereo","dual_channel","mono"];wt.bitrate_index={1:{11:32,12:32,13:32,21:32,22:8,23:8},2:{11:64,12:48,13:40,21:48,22:16,23:16},3:{11:96,12:56,13:48,21:56,22:24,23:24},4:{11:128,12:64,13:56,21:64,22:32,23:32},5:{11:160,12:80,13:64,21:80,22:40,23:40},6:{11:192,12:96,13:80,21:96,22:48,23:48},7:{11:224,12:112,13:96,21:112,22:56,23:56},8:{11:256,12:128,13:112,21:128,22:64,23:64},9:{11:288,12:160,13:128,21:144,22:80,23:80},10:{11:320,12:192,13:160,21:160,22:96,23:96},11:{11:352,12:224,13:192,21:176,22:112,23:112},12:{11:384,12:256,13:224,21:192,22:128,23:128},13:{11:416,12:320,13:256,21:224,22:144,23:144},14:{11:448,12:384,13:320,21:256,22:160,23:160}};wt.sampling_rate_freq_index={1:{0:44100,1:48e3,2:32e3},2:{0:22050,1:24e3,2:16e3},2.5:{0:11025,1:12e3,2:8e3}};wt.samplesInFrameTable=[[0,384,1152,1152],[0,384,1152,576]];const iE={len:4,get:(t,e)=>new wt(t,e)};function BL(t){return`V${Math.floor((100-t)/10)}`}class VL extends Tf{constructor(){super(...arguments),this.frameCount=0,this.syncFrameCount=-1,this.countSkipFrameData=0,this.totalDataLength=0,this.bitrates=[],this.offset=0,this.frame_size=0,this.crc=null,this.calculateEofDuration=!1,this.samplesPerFrame=null,this.buf_frame_header=new Uint8Array(4),this.mpegOffset=null,this.syncPeek={buf:new Uint8Array(nE),len:0}}async postId3v2Parse(){this.metadata.setFormat("lossless",!1);try{let e=!1;for(;!e;)await this.sync(),e=await this.parseCommonMpegHeader()}catch(e){if(e instanceof rt){if(xn("End-of-stream"),this.calculateEofDuration&&this.samplesPerFrame!==null){const n=this.frameCount*this.samplesPerFrame;if(this.metadata.setFormat("numberOfSamples",n),this.metadata.format.sampleRate){const r=n/this.metadata.format.sampleRate;xn(`Calculate duration at EOF: ${r} sec.`,r),this.metadata.setFormat("duration",r)}}}else throw e}}finalize(){const e=this.metadata.format,n=!!this.metadata.native.ID3v1;if(this.mpegOffset!==null){if(e.duration&&this.tokenizer.fileInfo.size){const r=this.tokenizer.fileInfo.size-this.mpegOffset-(n?128:0);e.codecProfile&&e.codecProfile[0]==="V"&&this.metadata.setFormat("bitrate",r*8/e.duration)}else if(this.tokenizer.fileInfo.size&&e.codecProfile==="CBR"){const r=this.tokenizer.fileInfo.size-this.mpegOffset-(n?128:0);if(this.frame_size!==null&&this.samplesPerFrame!==null){const i=Math.round(r/this.frame_size)*this.samplesPerFrame;if(this.metadata.setFormat("numberOfSamples",i),e.sampleRate){const s=i/e.sampleRate;xn("Calculate CBR duration based on file size: %s",s),this.metadata.setFormat("duration",s)}}}}}async sync(){let e=!1;for(;;){let n=0;if(this.syncPeek.len=await this.tokenizer.peekBuffer(this.syncPeek.buf,{length:nE,mayBeLess:!0}),this.syncPeek.len<=163)throw new rt;for(;;){if(e&&(this.syncPeek.buf[n]&224)===224){this.buf_frame_header[0]=wt.SyncByte1,this.buf_frame_header[1]=this.syncPeek.buf[n],await this.tokenizer.ignore(n),xn(`Sync at offset=${this.tokenizer.position-1}, frameCount=${this.frameCount}`),this.syncFrameCount===this.frameCount&&(xn(`Re-synced MPEG stream, frameCount=${this.frameCount}`),this.frameCount=0,this.frame_size=0),this.syncFrameCount=this.frameCount;return}if(e=!1,n=this.syncPeek.buf.indexOf(wt.SyncByte1,n),n===-1){if(this.syncPeek.len<this.syncPeek.buf.length)throw new rt;await this.tokenizer.ignore(this.syncPeek.len);break}++n,e=!0}}}async parseCommonMpegHeader(){this.frameCount===0&&(this.mpegOffset=this.tokenizer.position-1),await this.tokenizer.peekBuffer(this.buf_frame_header,{offset:1,length:3});let e;try{e=iE.get(this.buf_frame_header,0)}catch(n){if(await this.tokenizer.ignore(1),n instanceof Error)return this.metadata.addWarning(`Parse error: ${n.message}`),!1;throw n}return await this.tokenizer.ignore(3),this.metadata.setFormat("container",e.container),this.metadata.setFormat("codec",e.codec),this.metadata.setFormat("lossless",!1),this.metadata.setFormat("sampleRate",e.samplingRate),this.frameCount++,e.version!==null&&e.version>=2&&e.layer===0?this.parseAdts(e):this.parseAudioFrameHeader(e)}async parseAudioFrameHeader(e){this.metadata.setFormat("numberOfChannels",e.channelMode==="mono"?1:2),this.metadata.setFormat("bitrate",e.bitrate),this.frameCount<20*1e4&&xn("offset=%s MP%s bitrate=%s sample-rate=%s",this.tokenizer.position-4,e.layer,e.bitrate,e.samplingRate);const n=e.calcSlotSize();if(n===null)throw new Error("invalid slot_size");const r=e.calcSamplesPerFrame();xn(`samples_per_frame=${r}`);const i=r/8;if(e.bitrate!==null&&e.samplingRate!=null){const s=i*e.bitrate/e.samplingRate+(e.padding?n:0);this.frame_size=Math.floor(s)}if(this.audioFrameHeader=e,e.bitrate!==null&&this.bitrates.push(e.bitrate),this.frameCount===1)return this.offset=iE.len,await this.skipSideInformation(),!1;if(this.frameCount===3){if(this.areAllSame(this.bitrates)){if(this.samplesPerFrame=r,this.metadata.setFormat("codecProfile","CBR"),this.tokenizer.fileInfo.size)return!0}else if(this.metadata.format.duration)return!0;if(!this.options.duration)return!0}return this.options.duration&&this.frameCount===4&&(this.samplesPerFrame=r,this.calculateEofDuration=!0),this.offset=4,e.isProtectedByCRC?(await this.parseCrc(),!1):(await this.skipSideInformation(),!1)}async parseAdts(e){const n=new Uint8Array(3);if(await this.tokenizer.readBuffer(n),e.frameLength+=xe(n,0,0,11),this.totalDataLength+=e.frameLength,this.samplesPerFrame=1024,e.samplingRate!==null){const r=e.samplingRate/this.samplesPerFrame,s=8*(this.frameCount===0?0:this.totalDataLength/this.frameCount)*r+.5;this.metadata.setFormat("bitrate",s),xn(`frame-count=${this.frameCount}, size=${e.frameLength} bytes, bit-rate=${s}`)}if(await this.tokenizer.ignore(e.frameLength>7?e.frameLength-7:1),this.frameCount===3)if(this.metadata.setFormat("codecProfile",e.codecProfile),e.mp4ChannelConfig&&this.metadata.setFormat("numberOfChannels",e.mp4ChannelConfig.length),this.options.duration)this.calculateEofDuration=!0;else return!0;return!1}async parseCrc(){return this.crc=await this.tokenizer.readNumber(Xr),this.offset+=2,this.skipSideInformation()}async skipSideInformation(){if(this.audioFrameHeader){const e=this.audioFrameHeader.calculateSideInfoLength();if(e!==null){await this.tokenizer.readToken(new on(e)),this.offset+=e,await this.readXtraInfoHeader();return}}}async readXtraInfoHeader(){const e=await this.tokenizer.readToken(tE);switch(this.offset+=tE.len,e){case"Info":return this.metadata.setFormat("codecProfile","CBR"),this.readXingInfoHeader();case"Xing":{const r=await this.readXingInfoHeader();if(r.vbrScale!==null){const i=BL(r.vbrScale);this.metadata.setFormat("codecProfile",i)}return null}case"Xtra":break;case"LAME":{const r=await this.tokenizer.readToken(Tp);if(this.frame_size!==null&&this.frame_size>=this.offset+Tp.len)return this.offset+=Tp.len,this.metadata.setFormat("tool",`LAME ${r}`),await this.skipFrameData(this.frame_size-this.offset),null;this.metadata.addWarning("Corrupt LAME header");break}}const n=this.frame_size-this.offset;return n<0?this.metadata.addWarning(`Frame ${this.frameCount}corrupt: negative frameDataLeft`):await this.skipFrameData(n),null}async readXingInfoHeader(){const e=this.tokenizer.position,n=await $L(this.tokenizer);if(this.offset+=this.tokenizer.position-e,n.lame&&(this.metadata.setFormat("tool",`LAME ${Ci(n.lame.version)}`),n.lame.extended&&(this.metadata.setFormat("trackPeakLevel",n.lame.extended.track_peak),n.lame.extended.track_gain&&this.metadata.setFormat("trackGain",n.lame.extended.track_gain.adjustment),n.lame.extended.album_gain&&this.metadata.setFormat("albumGain",n.lame.extended.album_gain.adjustment),this.metadata.setFormat("duration",n.lame.extended.music_length/1e3))),n.streamSize&&this.audioFrameHeader&&n.numFrames!==null){const i=this.audioFrameHeader.calcDuration(n.numFrames);return this.metadata.setFormat("duration",i),xn("Get duration from Xing header: %s",this.metadata.format.duration),n}const r=this.frame_size-this.offset;return await this.skipFrameData(r),n}async skipFrameData(e){if(e<0)throw new Error("frame-data-left cannot be negative");await this.tokenizer.ignore(e),this.countSkipFrameData+=e}areAllSame(e){const n=e[0];return e.every(r=>r===n)}}const sE=De("music-metadata:parser:musepack:sv8"),UL=new ne(2,"latin1"),oE={len:5,get:(t,e)=>({crc:J.get(t,e),streamVersion:pe.get(t,e+4)})},aE={len:2,get:(t,e)=>({sampleFrequency:[44100,48e3,37800,32e3][xe(t,e,0,3)],maxUsedBands:xe(t,e,3,5),channelCount:xe(t,e+1,0,4)+1,msUsed:_n(t,e+1,4),audioBlockFrames:xe(t,e+1,5,3)})};class WL{constructor(e){this.tokenizer=e}async readPacketHeader(){const e=await this.tokenizer.readToken(UL),n=await this.readVariableSizeField();return{key:e,payloadLength:n.value-2-n.len}}async readStreamHeader(e){const n={};sE(`Reading SH at offset=${this.tokenizer.position}`);const r=await this.tokenizer.readToken(oE);e-=oE.len,Object.assign(n,r),sE(`SH.streamVersion = ${r.streamVersion}`);const i=await this.readVariableSizeField();e-=i.len,n.sampleCount=i.value;const s=await this.readVariableSizeField();e-=s.len,n.beginningOfSilence=s.value;const o=await this.tokenizer.readToken(aE);return e-=aE.len,Object.assign(n,o),await this.tokenizer.ignore(e),n}async readVariableSizeField(e=1,n=0){let r=await this.tokenizer.readNumber(pe);return r&128?(r&=127,r+=n,this.readVariableSizeField(e+1,r<<7)):{len:e,value:n+r}}}const HL=De("music-metadata:parser:musepack");class qL extends Mn{constructor(){super(...arguments),this.audioLength=0}async parse(){if(await this.tokenizer.readToken(Be)!=="MPCK")throw new Error("Invalid Magic number");return this.metadata.setFormat("container","Musepack, SV8"),this.parsePacket()}async parsePacket(){const e=new WL(this.tokenizer);do{const n=await e.readPacketHeader();switch(HL(`packet-header key=${n.key}, payloadLength=${n.payloadLength}`),n.key){case"SH":{const r=await e.readStreamHeader(n.payloadLength);this.metadata.setFormat("numberOfSamples",r.sampleCount),this.metadata.setFormat("sampleRate",r.sampleFrequency),this.metadata.setFormat("duration",r.sampleCount/r.sampleFrequency),this.metadata.setFormat("numberOfChannels",r.channelCount);break}case"AP":this.audioLength+=n.payloadLength,await this.tokenizer.ignore(n.payloadLength);break;case"RG":case"EI":case"SO":case"ST":case"CT":await this.tokenizer.ignore(n.payloadLength);break;case"SE":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",this.audioLength*8/this.metadata.format.duration),Er.tryParseApeHeader(this.metadata,this.tokenizer,this.options);default:throw new Error(`Unexpected header: ${n.key}`)}}while(!0)}}class GL{constructor(e){this.tokenizer=e,this.pos=0,this.dword=null}async read(e){for(;this.dword===null;)this.dword=await this.tokenizer.readToken(J);let n=this.dword;return this.pos+=e,this.pos<32?(n>>>=32-this.pos,n&(1<<e)-1):(this.pos-=32,this.pos===0?(this.dword=null,n&(1<<e)-1):(this.dword=await this.tokenizer.readToken(J),this.pos&&(n<<=this.pos,n|=this.dword>>>32-this.pos),n&(1<<e)-1))}async ignore(e){if(this.pos>0){const i=32-this.pos;this.dword=null,e-=i,this.pos=0}const n=e%32,r=(e-n)/32;return await this.tokenizer.ignore(r*4),this.read(n)}}const KL={len:6*4,get:(t,e)=>{const n={signature:new TextDecoder("latin1").decode(t.subarray(e,e+3)),streamMinorVersion:xe(t,e+3,0,4),streamMajorVersion:xe(t,e+3,4,4),frameCount:J.get(t,e+4),maxLevel:Te.get(t,e+8),sampleFrequency:[44100,48e3,37800,32e3][xe(t,e+10,0,2)],link:xe(t,e+10,2,2),profile:xe(t,e+10,4,4),maxBand:xe(t,e+11,0,6),intensityStereo:_n(t,e+11,6),midSideStereo:_n(t,e+11,7),titlePeak:Te.get(t,e+12),titleGain:Te.get(t,e+14),albumPeak:Te.get(t,e+16),albumGain:Te.get(t,e+18),lastFrameLength:J.get(t,e+20)>>>20&2047,trueGapless:_n(t,e+23,0)};return n.lastFrameLength=n.trueGapless?J.get(t,20)>>>20&2047:0,n}},lE=De("music-metadata:parser:musepack");class XL extends Mn{constructor(){super(...arguments),this.bitreader=null,this.audioLength=0,this.duration=null}async parse(){const e=await this.tokenizer.readToken(KL);if(e.signature!=="MP+")throw new Error("Unexpected magic number");lE(`stream-version=${e.streamMajorVersion}.${e.streamMinorVersion}`),this.metadata.setFormat("container","Musepack, SV7"),this.metadata.setFormat("sampleRate",e.sampleFrequency);const n=1152*(e.frameCount-1)+e.lastFrameLength;this.metadata.setFormat("numberOfSamples",n),this.duration=n/e.sampleFrequency,this.metadata.setFormat("duration",this.duration),this.bitreader=new GL(this.tokenizer),this.metadata.setFormat("numberOfChannels",e.midSideStereo||e.intensityStereo?2:1);const r=await this.bitreader.read(8);return this.metadata.setFormat("codec",(r/100).toFixed(2)),await this.skipAudioData(e.frameCount),lE(`End of audio stream, switching to APEv2, offset=${this.tokenizer.position}`),Er.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async skipAudioData(e){for(;e-- >0;){const r=await this.bitreader.read(20);this.audioLength+=20+r,await this.bitreader.ignore(r)}const n=await this.bitreader.read(11);this.audioLength+=n,this.duration!==null&&this.metadata.setFormat("bitrate",this.audioLength/this.duration)}}const cE=De("music-metadata:parser:musepack");class QL extends Tf{async postId3v2Parse(){const e=await this.tokenizer.peekToken(new ne(3,"latin1"));let n;switch(e){case"MP+":{cE("Musepack stream-version 7"),n=new XL;break}case"MPC":{cE("Musepack stream-version 8"),n=new qL;break}default:throw new Error("Invalid Musepack signature prefix")}return n.init(this.metadata,this.tokenizer,this.options),n.parse()}}class YL{constructor(e){if(this.len=e,e<19)throw new Error("ID-header-page 0 should be at least 19 bytes long")}get(e,n){return{magicSignature:new ne(8,"ascii").get(e,n+0),version:pe.get(e,n+8),channelCount:pe.get(e,n+9),preSkip:Te.get(e,n+10),inputSampleRate:J.get(e,n+12),outputGain:Te.get(e,n+16),channelMapping:pe.get(e,n+18)}}}class JL extends Ys{constructor(e,n,r){super(e,n),this.tokenizer=r,this.idHeader=null,this.lastPos=-1}parseFirstPage(e,n){if(this.metadata.setFormat("codec","Opus"),this.idHeader=new YL(n.length).get(n,0),this.idHeader.magicSignature!=="OpusHead")throw new Error("Illegal ogg/Opus magic-signature");this.metadata.setFormat("sampleRate",this.idHeader.inputSampleRate),this.metadata.setFormat("numberOfChannels",this.idHeader.channelCount)}async parseFullPage(e){switch(new ne(8,"ascii").get(e,0)){case"OpusTags":await this.parseUserCommentList(e,8),this.lastPos=this.tokenizer.position-e.length;break}}calculateDuration(e){if(this.metadata.format.sampleRate&&e.absoluteGranulePosition>=0){const n=e.absoluteGranulePosition-this.idHeader.preSkip;if(this.metadata.setFormat("numberOfSamples",n),this.metadata.setFormat("duration",n/48e3),this.lastPos!==-1&&this.tokenizer.fileInfo.size&&this.metadata.format.duration){const r=this.tokenizer.fileInfo.size-this.lastPos;this.metadata.setFormat("bitrate",8*r/this.metadata.format.duration)}}}}const ZL={len:80,get:(t,e)=>({speex:new ne(8,"ascii").get(t,e+0),version:FT(new ne(20,"ascii").get(t,e+8)),version_id:et.get(t,e+28),header_size:et.get(t,e+32),rate:et.get(t,e+36),mode:et.get(t,e+40),mode_bitstream_version:et.get(t,e+44),nb_channels:et.get(t,e+48),bitrate:et.get(t,e+52),frame_size:et.get(t,e+56),vbr:et.get(t,e+60),frames_per_packet:et.get(t,e+64),extra_headers:et.get(t,e+68),reserved1:et.get(t,e+72),reserved2:et.get(t,e+76)})},e6=De("music-metadata:parser:ogg:speex");class t6 extends Ys{constructor(e,n,r){super(e,n),this.tokenizer=r}parseFirstPage(e,n){e6("First Ogg/Speex page");const r=ZL.get(n,0);this.metadata.setFormat("codec",`Speex ${r.version}`),this.metadata.setFormat("numberOfChannels",r.nb_channels),this.metadata.setFormat("sampleRate",r.rate),r.bitrate!==-1&&this.metadata.setFormat("bitrate",r.bitrate)}}const n6={len:42,get:(t,e)=>({id:new ne(7,"ascii").get(t,e),vmaj:pe.get(t,e+7),vmin:pe.get(t,e+8),vrev:pe.get(t,e+9),vmbw:Re.get(t,e+10),vmbh:Re.get(t,e+17),nombr:tn.get(t,e+37),nqual:pe.get(t,e+40)})},Ip=De("music-metadata:parser:ogg:theora");class r6{constructor(e,n,r){this.metadata=e,this.tokenizer=r}async parsePage(e,n){e.headerType.firstPage&&await this.parseFirstPage(e,n)}async flush(){Ip("flush")}calculateDuration(e){Ip("duration calculation not implemented")}async parseFirstPage(e,n){Ip("First Ogg/Theora page"),this.metadata.setFormat("codec","Theora");const r=n6.get(n,0);this.metadata.setFormat("bitrate",r.nombr)}}const Vr=De("music-metadata:parser:ogg");class Xv{static sum(e,n,r){const i=new DataView(e.buffer,0);let s=0;for(let o=n;o<n+r;++o)s+=i.getUint8(o);return s}constructor(e){this.len=e.page_segments}get(e,n){return{totalPageSize:Xv.sum(e,n,this.len)}}}class If extends Mn{constructor(){super(...arguments),this.header=null,this.pageNumber=0,this.pageConsumer=null}async parse(){Vr("pos=%s, parsePage()",this.tokenizer.position);try{let e;do{if(e=await this.tokenizer.readToken(If.Header),e.capturePattern!=="OggS")throw new Error("Invalid Ogg capture pattern");this.metadata.setFormat("container","Ogg"),this.header=e,this.pageNumber=e.pageSequenceNo,Vr("page#=%s, Ogg.id=%s",e.pageSequenceNo,e.capturePattern);const n=await this.tokenizer.readToken(new Xv(e));Vr("totalPageSize=%s",n.totalPageSize);const r=await this.tokenizer.readToken(new on(n.totalPageSize));if(Vr("firstPage=%s, lastPage=%s, continued=%s",e.headerType.firstPage,e.headerType.lastPage,e.headerType.continued),e.headerType.firstPage){const i=new TextDecoder("ascii").decode(r.subarray(0,7));switch(i){case"vorbis":Vr("Set page consumer to Ogg/Vorbis"),this.pageConsumer=new Ys(this.metadata,this.options);break;case"OpusHea":Vr("Set page consumer to Ogg/Opus"),this.pageConsumer=new JL(this.metadata,this.options,this.tokenizer);break;case"Speex  ":Vr("Set page consumer to Ogg/Speex"),this.pageConsumer=new t6(this.metadata,this.options,this.tokenizer);break;case"fishead":case"\0theora":Vr("Set page consumer to Ogg/Theora"),this.pageConsumer=new r6(this.metadata,this.options,this.tokenizer);break;default:throw new Error(`gg audio-codec not recognized (id=${i})`)}}await this.pageConsumer.parsePage(e,r)}while(!e.headerType.lastPage)}catch(e){if(e instanceof Error)e instanceof rt?(this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),Vr("End-of-stream"),this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),this.header&&this.pageConsumer.calculateDuration(this.header)):e.message.startsWith("FourCC")&&this.pageNumber>0&&(this.metadata.addWarning("Invalid FourCC ID, maybe last OGG-page is not marked with last-page flag"),await this.pageConsumer.flush());else throw e}}}If.Header={len:27,get:(t,e)=>({capturePattern:Be.get(t,e),version:pe.get(t,e+4),headerType:{continued:Qe(t,e+5,0),firstPage:Qe(t,e+5,1),lastPage:Qe(t,e+5,2)},absoluteGranulePosition:Number(Yt.get(t,e+6)),streamSerialNumber:J.get(t,e+14),pageSequenceNo:J.get(t,e+18),pageChecksum:J.get(t,e+22),page_segments:pe.get(t,e+26)})};const sl={len:8,get:(t,e)=>({chunkID:new ne(4,"latin1").get(t,e),chunkSize:J.get(t,e+4)})};class i6{constructor(e){this.tagHeader=e,this.len=e.chunkSize,this.len+=this.len&1}get(e,n){return new ne(this.tagHeader.chunkSize,"ascii").get(e,n)}}var D0;(function(t){t[t.PCM=1]="PCM",t[t.ADPCM=2]="ADPCM",t[t.IEEE_FLOAT=3]="IEEE_FLOAT",t[t.MPEG_ADTS_AAC=5632]="MPEG_ADTS_AAC",t[t.MPEG_LOAS=5634]="MPEG_LOAS",t[t.RAW_AAC1=255]="RAW_AAC1",t[t.DOLBY_AC3_SPDIF=146]="DOLBY_AC3_SPDIF",t[t.DVM=8192]="DVM",t[t.RAW_SPORT=576]="RAW_SPORT",t[t.ESST_AC3=577]="ESST_AC3",t[t.DRM=9]="DRM",t[t.DTS2=8193]="DTS2",t[t.MPEG=80]="MPEG"})(D0||(D0={}));class s6{constructor(e){if(e.chunkSize<16)throw new Error("Invalid chunk size");this.len=e.chunkSize}get(e,n){return{wFormatTag:Te.get(e,n),nChannels:Te.get(e,n+2),nSamplesPerSec:J.get(e,n+4),nAvgBytesPerSec:J.get(e,n+8),nBlockAlign:Te.get(e,n+12),wBitsPerSample:Te.get(e,n+14)}}}class o6{constructor(e){if(e.chunkSize<4)throw new Error("Invalid fact chunk size.");this.len=e.chunkSize}get(e,n){return{dwSampleLength:J.get(e,n)}}}const uE={len:420,get:(t,e)=>({description:Ci(new ne(256,"ascii").get(t,e)).trim(),originator:Ci(new ne(32,"ascii").get(t,e+256)).trim(),originatorReference:Ci(new ne(32,"ascii").get(t,e+288)).trim(),originationDate:Ci(new ne(10,"ascii").get(t,e+320)).trim(),originationTime:Ci(new ne(8,"ascii").get(t,e+330)).trim(),timeReferenceLow:J.get(t,e+338),timeReferenceHigh:J.get(t,e+342),version:Te.get(t,e+346),umid:new on(64).get(t,e+348),loudnessValue:Te.get(t,e+412),maxTruePeakLevel:Te.get(t,e+414),maxMomentaryLoudness:Te.get(t,e+416),maxShortTermLoudness:Te.get(t,e+418)})},wi=De("music-metadata:parser:RIFF");class a6 extends Mn{constructor(){super(...arguments),this.blockAlign=0}async parse(){const e=await this.tokenizer.readToken(sl);if(wi(`pos=${this.tokenizer.position}, parse: chunkID=${e.chunkID}`),e.chunkID==="RIFF")return this.parseRiffChunk(e.chunkSize).catch(n=>{if(!(n instanceof rt))throw n})}async parseRiffChunk(e){const n=await this.tokenizer.readToken(Be);switch(this.metadata.setFormat("container",n),n){case"WAVE":return this.readWaveChunk(e-Be.len);default:throw new Error(`Unsupported RIFF format: RIFF/${n}`)}}async readWaveChunk(e){for(;e>=sl.len;){const n=await this.tokenizer.readToken(sl);switch(e-=sl.len+n.chunkSize,n.chunkSize>e&&this.metadata.addWarning("Data chunk size exceeds file size"),this.header=n,wi(`pos=${this.tokenizer.position}, readChunk: chunkID=RIFF/WAVE/${n.chunkID}`),n.chunkID){case"LIST":await this.parseListTag(n);break;case"fact":this.metadata.setFormat("lossless",!1),this.fact=await this.tokenizer.readToken(new o6(n));break;case"fmt ":{const r=await this.tokenizer.readToken(new s6(n));let i=D0[r.wFormatTag];i||(wi(`WAVE/non-PCM format=${r.wFormatTag}`),i=`non-PCM (${r.wFormatTag})`),this.metadata.setFormat("codec",i),this.metadata.setFormat("bitsPerSample",r.wBitsPerSample),this.metadata.setFormat("sampleRate",r.nSamplesPerSec),this.metadata.setFormat("numberOfChannels",r.nChannels),this.metadata.setFormat("bitrate",r.nBlockAlign*r.nSamplesPerSec*8),this.blockAlign=r.nBlockAlign;break}case"id3 ":case"ID3 ":{const r=await this.tokenizer.readToken(new on(n.chunkSize)),i=va(r);await new rr().parse(this.metadata,i,this.options);break}case"data":{this.metadata.format.lossless!==!1&&this.metadata.setFormat("lossless",!0);let r=n.chunkSize;if(this.tokenizer.fileInfo.size){const s=this.tokenizer.fileInfo.size-this.tokenizer.position;s<r&&(this.metadata.addWarning("data chunk length exceeding file length"),r=s)}const i=this.fact?this.fact.dwSampleLength:r===4294967295?void 0:r/this.blockAlign;i&&(this.metadata.setFormat("numberOfSamples",i),this.metadata.format.sampleRate&&this.metadata.setFormat("duration",i/this.metadata.format.sampleRate)),this.metadata.format.codec==="ADPCM"?this.metadata.setFormat("bitrate",352e3):this.metadata.format.sampleRate&&this.metadata.setFormat("bitrate",this.blockAlign*this.metadata.format.sampleRate*8),await this.tokenizer.ignore(n.chunkSize);break}case"bext":{const r=await this.tokenizer.readToken(uE);Object.keys(r).forEach(s=>{this.metadata.addTag("exif",`bext.${s}`,r[s])});const i=n.chunkSize-uE.len;await this.tokenizer.ignore(i);break}case"\0\0\0\0":wi(`Ignore padding chunk: RIFF/${n.chunkID} of ${n.chunkSize} bytes`),this.metadata.addWarning(`Ignore chunk: RIFF/${n.chunkID}`),await this.tokenizer.ignore(n.chunkSize);break;default:wi(`Ignore chunk: RIFF/${n.chunkID} of ${n.chunkSize} bytes`),this.metadata.addWarning(`Ignore chunk: RIFF/${n.chunkID}`),await this.tokenizer.ignore(n.chunkSize)}this.header.chunkSize%2===1&&(wi("Read odd padding byte"),await this.tokenizer.ignore(1))}}async parseListTag(e){const n=await this.tokenizer.readToken(new ne(4,"latin1"));switch(wi("pos=%s, parseListTag: chunkID=RIFF/WAVE/LIST/%s",this.tokenizer.position,n),n){case"INFO":return this.parseRiffInfoTags(e.chunkSize-4);default:return this.metadata.addWarning(`Ignore chunk: RIFF/WAVE/LIST/${n}`),wi(`Ignoring chunkID=RIFF/WAVE/LIST/${n}`),this.tokenizer.ignore(e.chunkSize-4).then()}}async parseRiffInfoTags(e){for(;e>=8;){const n=await this.tokenizer.readToken(sl),r=new i6(n),i=await this.tokenizer.readToken(r);this.addTag(n.chunkID,Ci(i)),e-=8+r.len}if(e!==0)throw new Error(`Illegal remaining size: ${e}`)}addTag(e,n){this.metadata.addTag("exif",e,n)}}const l6=[6e3,8e3,9600,11025,12e3,16e3,22050,24e3,32e3,44100,48e3,64e3,88200,96e3,192e3,-1],Vu={len:32,get:(t,e)=>{const n=J.get(t,e+24),r={BlockID:Be.get(t,e),blockSize:J.get(t,e+4),version:Te.get(t,e+8),totalSamples:J.get(t,e+12),blockIndex:J.get(t,e+16),blockSamples:J.get(t,e+20),flags:{bitsPerSample:(1+gh(n,0,2))*8,isMono:vr(n,2),isHybrid:vr(n,3),isJointStereo:vr(n,4),crossChannel:vr(n,5),hybridNoiseShaping:vr(n,6),floatingPoint:vr(n,7),samplingRate:l6[gh(n,23,4)],isDSD:vr(n,31)},crc:new on(4).get(t,e+28)};return r.flags.isDSD&&(r.totalSamples*=8),r}},Cp={len:1,get:(t,e)=>({functionId:gh(t[e],0,6),isOptional:vr(t[e],5),isOddSize:vr(t[e],6),largeBlock:vr(t[e],7)})};function vr(t,e){return gh(t,e,1)===1}function gh(t,e,n){return t>>>e&4294967295>>>32-n}const ws=De("music-metadata:parser:WavPack");class c6 extends Mn{constructor(){super(...arguments),this.audioDataSize=0}async parse(){return this.audioDataSize=0,await this.parseWavPackBlocks(),Er.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async parseWavPackBlocks(){do{if(await this.tokenizer.peekToken(Be)!=="wvpk")break;const n=await this.tokenizer.readToken(Vu);if(n.BlockID!=="wvpk")throw new Error("Invalid WavPack Block-ID");ws(`WavPack header blockIndex=${n.blockIndex}, len=${Vu.len}`),n.blockIndex===0&&!this.metadata.format.container&&(this.metadata.setFormat("container","WavPack"),this.metadata.setFormat("lossless",!n.flags.isHybrid),this.metadata.setFormat("bitsPerSample",n.flags.bitsPerSample),n.flags.isDSD||(this.metadata.setFormat("sampleRate",n.flags.samplingRate),this.metadata.setFormat("duration",n.totalSamples/n.flags.samplingRate)),this.metadata.setFormat("numberOfChannels",n.flags.isMono?1:2),this.metadata.setFormat("numberOfSamples",n.totalSamples),this.metadata.setFormat("codec",n.flags.isDSD?"DSD":"PCM"));const r=n.blockSize-(Vu.len-8);await(n.blockIndex===0?this.parseMetadataSubBlock(n,r):this.tokenizer.ignore(r)),n.blockSamples>0&&(this.audioDataSize+=n.blockSize)}while(!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=Vu.len);this.metadata.format.duration&&this.metadata.setFormat("bitrate",this.audioDataSize*8/this.metadata.format.duration)}async parseMetadataSubBlock(e,n){let r=n;for(;r>Cp.len;){const i=await this.tokenizer.readToken(Cp),s=await this.tokenizer.readNumber(i.largeBlock?ah:pe),o=new Uint8Array(s*2-(i.isOddSize?1:0));switch(await this.tokenizer.readBuffer(o),ws(`Metadata Sub-Blocks functionId=0x${i.functionId.toString(16)}, id.largeBlock=${i.largeBlock},data-size=${o.length}`),i.functionId){case 0:break;case 14:{ws("ID_DSD_BLOCK");const a=1<<pe.get(o,0),l=e.flags.samplingRate*a*8;if(!e.flags.isDSD)throw new Error("Only expect DSD block if DSD-flag is set");this.metadata.setFormat("sampleRate",l),this.metadata.setFormat("duration",e.totalSamples/l);break}case 36:ws("ID_ALT_TRAILER: trailer for non-wav files");break;case 38:this.metadata.setFormat("audioMD5",o);break;case 47:ws(`ID_BLOCK_CHECKSUM: checksum=${Vv(o)}`);break;default:ws(`Ignore unsupported meta-sub-block-id functionId=0x${i.functionId.toString(16)}`);break}r-=Cp.len+(i.largeBlock?ah.len:pe.len)+s*2,ws(`remainingLength=${r}`),i.isOddSize&&this.tokenizer.ignore(1)}if(r!==0)throw new Error("metadata-sub-block should fit it remaining length")}}const Uu={len:12,get:(t,e)=>({id:Be.get(t,e),size:Yt.get(t,e+4)})},u6={len:16,get:(t,e)=>({fileSize:lh.get(t,e),metadataPointer:lh.get(t,e+8)})};var dE;(function(t){t[t.mono=1]="mono",t[t.stereo=2]="stereo",t[t.channels=3]="channels",t[t.quad=4]="quad",t[t["4 channels"]=5]="4 channels",t[t["5 channels"]=6]="5 channels",t[t["5.1 channels"]=7]="5.1 channels"})(dE||(dE={}));const d6={len:40,get:(t,e)=>({formatVersion:et.get(t,e),formatID:et.get(t,e+4),channelType:et.get(t,e+8),channelNum:et.get(t,e+12),samplingFrequency:et.get(t,e+16),bitsPerSample:et.get(t,e+20),sampleCount:lh.get(t,e+24),blockSizePerChannel:et.get(t,e+32)})},Ap=De("music-metadata:parser:DSF");class h6 extends Tf{async postId3v2Parse(){const e=this.tokenizer.position,n=await this.tokenizer.readToken(Uu);if(n.id!=="DSD ")throw new Error("Invalid chunk signature");this.metadata.setFormat("container","DSF"),this.metadata.setFormat("lossless",!0);const r=await this.tokenizer.readToken(u6);if(r.metadataPointer===BigInt(0))Ap("No ID3v2 tag present");else return Ap(`expect ID3v2 at offset=${r.metadataPointer}`),await this.parseChunks(r.fileSize-n.size),await this.tokenizer.ignore(Number(r.metadataPointer)-this.tokenizer.position-e),new rr().parse(this.metadata,this.tokenizer,this.options)}async parseChunks(e){for(;e>=Uu.len;){const n=await this.tokenizer.readToken(Uu);switch(Ap(`Parsing chunk name=${n.id} size=${n.size}`),n.id){case"fmt ":{const r=await this.tokenizer.readToken(d6);this.metadata.setFormat("numberOfChannels",r.channelNum),this.metadata.setFormat("sampleRate",r.samplingFrequency),this.metadata.setFormat("bitsPerSample",r.bitsPerSample),this.metadata.setFormat("numberOfSamples",r.sampleCount),this.metadata.setFormat("duration",Number(r.sampleCount)/r.samplingFrequency);const i=r.bitsPerSample*r.samplingFrequency*r.channelNum;this.metadata.setFormat("bitrate",i);return}default:this.tokenizer.ignore(Number(n.size)-Uu.len);break}e-=n.size}}}const ko={len:12,get:(t,e)=>({chunkID:Be.get(t,e),chunkSize:AT.get(t,e+4)})},Kt=De("music-metadata:parser:aiff");class f6 extends Mn{async parse(){const e=await this.tokenizer.readToken(ko);if(e.chunkID!=="FRM8")throw new Error("Unexpected chunk-ID");const n=(await this.tokenizer.readToken(Be)).trim();switch(n){case"DSD":return this.metadata.setFormat("container",`DSDIFF/${n}`),this.metadata.setFormat("lossless",!0),this.readFmt8Chunks(e.chunkSize-BigInt(Be.len));default:throw new Error(`Unsupported DSDIFF type: ${n}`)}}async readFmt8Chunks(e){for(;e>=ko.len;){const n=await this.tokenizer.readToken(ko);Kt(`Chunk id=${n.chunkID}`),await this.readData(n),e-=BigInt(ko.len)+n.chunkSize}}async readData(e){Kt(`Reading data of chunk[ID=${e.chunkID}, size=${e.chunkSize}]`);const n=this.tokenizer.position;switch(e.chunkID.trim()){case"FVER":{const i=await this.tokenizer.readToken(J);Kt(`DSDIFF version=${i}`);break}case"PROP":{if(await this.tokenizer.readToken(Be)!=="SND ")throw new Error("Unexpected PROP-chunk ID");await this.handleSoundPropertyChunks(e.chunkSize-BigInt(Be.len));break}case"ID3":{const i=await this.tokenizer.readToken(new on(Number(e.chunkSize))),s=va(i);await new rr().parse(this.metadata,s,this.options);break}case"DSD":this.metadata.format.numberOfChannels&&this.metadata.setFormat("numberOfSamples",Number(e.chunkSize*BigInt(8)/BigInt(this.metadata.format.numberOfChannels))),this.metadata.format.numberOfSamples&&this.metadata.format.sampleRate&&this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate);break;default:Kt(`Ignore chunk[ID=${e.chunkID}, size=${e.chunkSize}]`);break}const r=e.chunkSize-BigInt(this.tokenizer.position-n);r>0&&(Kt(`After Parsing chunk, remaining ${r} bytes`),await this.tokenizer.ignore(Number(r)))}async handleSoundPropertyChunks(e){for(Kt(`Parsing sound-property-chunks, remainingSize=${e}`);e>0;){const n=await this.tokenizer.readToken(ko);Kt(`Sound-property-chunk[ID=${n.chunkID}, size=${n.chunkSize}]`);const r=this.tokenizer.position;switch(n.chunkID.trim()){case"FS":{const s=await this.tokenizer.readToken(re);this.metadata.setFormat("sampleRate",s);break}case"CHNL":{const s=await this.tokenizer.readToken(Re);this.metadata.setFormat("numberOfChannels",s),await this.handleChannelChunks(n.chunkSize-BigInt(Re.len));break}case"CMPR":{const s=(await this.tokenizer.readToken(Be)).trim(),o=await this.tokenizer.readToken(pe),a=await this.tokenizer.readToken(new ne(o,"ascii"));s==="DSD"&&(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("bitsPerSample",1)),this.metadata.setFormat("codec",`${s} (${a})`);break}case"ABSS":{const s=await this.tokenizer.readToken(Re),o=await this.tokenizer.readToken(pe),a=await this.tokenizer.readToken(pe),l=await this.tokenizer.readToken(re);Kt(`ABSS ${s}:${o}:${a}.${l}`);break}case"LSCO":{const s=await this.tokenizer.readToken(Re);Kt(`LSCO lsConfig=${s}`);break}default:Kt(`Unknown sound-property-chunk[ID=${n.chunkID}, size=${n.chunkSize}]`),await this.tokenizer.ignore(Number(n.chunkSize))}const i=n.chunkSize-BigInt(this.tokenizer.position-r);i>0&&(Kt(`After Parsing sound-property-chunk ${n.chunkSize}, remaining ${i} bytes`),await this.tokenizer.ignore(Number(i))),e-=BigInt(ko.len)+n.chunkSize,Kt(`Parsing sound-property-chunks, remainingSize=${e}`)}if(this.metadata.format.lossless&&this.metadata.format.sampleRate&&this.metadata.format.numberOfChannels&&this.metadata.format.bitsPerSample){const n=this.metadata.format.sampleRate*this.metadata.format.numberOfChannels*this.metadata.format.bitsPerSample;this.metadata.setFormat("bitrate",n)}}async handleChannelChunks(e){Kt(`Parsing channel-chunks, remainingSize=${e}`);const n=[];for(;e>=Be.len;){const r=await this.tokenizer.readToken(Be);Kt(`Channel[ID=${r}]`),n.push(r),e-=BigInt(Be.len)}return Kt(`Channels: ${n.join(", ")}`),n}}var R;(function(t){t[t.string=0]="string",t[t.uint=1]="uint",t[t.uid=2]="uid",t[t.bool=3]="bool",t[t.binary=4]="binary",t[t.float=5]="float"})(R||(R={}));const m6={name:"dtd",container:{440786851:{name:"ebml",container:{17030:{name:"ebmlVersion",value:R.uint},17143:{name:"ebmlReadVersion",value:R.uint},17138:{name:"ebmlMaxIDWidth",value:R.uint},17139:{name:"ebmlMaxSizeWidth",value:R.uint},17026:{name:"docType",value:R.string},17031:{name:"docTypeVersion",value:R.uint},17029:{name:"docTypeReadVersion",value:R.uint}}},408125543:{name:"segment",container:{290298740:{name:"seekHead",container:{19899:{name:"seek",multiple:!0,container:{21419:{name:"id",value:R.binary},21420:{name:"position",value:R.uint}}}}},357149030:{name:"info",container:{29604:{name:"uid",value:R.uid},29572:{name:"filename",value:R.string},3979555:{name:"prevUID",value:R.uid},3965867:{name:"prevFilename",value:R.string},4110627:{name:"nextUID",value:R.uid},4096955:{name:"nextFilename",value:R.string},2807729:{name:"timecodeScale",value:R.uint},17545:{name:"duration",value:R.float},17505:{name:"dateUTC",value:R.uint},31657:{name:"title",value:R.string},19840:{name:"muxingApp",value:R.string},22337:{name:"writingApp",value:R.string}}},524531317:{name:"cluster",multiple:!0,container:{231:{name:"timecode",value:R.uid},22743:{name:"silentTracks ",multiple:!0},167:{name:"position",value:R.uid},171:{name:"prevSize",value:R.uid},160:{name:"blockGroup"},163:{name:"simpleBlock"}}},374648427:{name:"tracks",container:{174:{name:"entries",multiple:!0,container:{215:{name:"trackNumber",value:R.uint},29637:{name:"uid",value:R.uid},131:{name:"trackType",value:R.uint},185:{name:"flagEnabled",value:R.bool},136:{name:"flagDefault",value:R.bool},21930:{name:"flagForced",value:R.bool},156:{name:"flagLacing",value:R.bool},28135:{name:"minCache",value:R.uint},28136:{name:"maxCache",value:R.uint},2352003:{name:"defaultDuration",value:R.uint},2306383:{name:"timecodeScale",value:R.float},21358:{name:"name",value:R.string},2274716:{name:"language",value:R.string},134:{name:"codecID",value:R.string},25506:{name:"codecPrivate",value:R.binary},2459272:{name:"codecName",value:R.string},3839639:{name:"codecSettings",value:R.string},3883072:{name:"codecInfoUrl",value:R.string},2536e3:{name:"codecDownloadUrl",value:R.string},170:{name:"codecDecodeAll",value:R.bool},28587:{name:"trackOverlay",value:R.uint},224:{name:"video",container:{154:{name:"flagInterlaced",value:R.bool},21432:{name:"stereoMode",value:R.uint},176:{name:"pixelWidth",value:R.uint},186:{name:"pixelHeight",value:R.uint},21680:{name:"displayWidth",value:R.uint},21690:{name:"displayHeight",value:R.uint},21683:{name:"aspectRatioType",value:R.uint},3061028:{name:"colourSpace",value:R.uint},3126563:{name:"gammaValue",value:R.float}}},225:{name:"audio",container:{181:{name:"samplingFrequency",value:R.float},30901:{name:"outputSamplingFrequency",value:R.float},159:{name:"channels",value:R.uint},148:{name:"channels",value:R.uint},32123:{name:"channelPositions",value:R.binary},25188:{name:"bitDepth",value:R.uint}}},28032:{name:"contentEncodings",container:{25152:{name:"contentEncoding",container:{20529:{name:"order",value:R.uint},20530:{name:"scope",value:R.bool},20531:{name:"type",value:R.uint},20532:{name:"contentEncoding",container:{16980:{name:"contentCompAlgo",value:R.uint},16981:{name:"contentCompSettings",value:R.binary}}},20533:{name:"contentEncoding",container:{18401:{name:"contentEncAlgo",value:R.uint},18402:{name:"contentEncKeyID",value:R.binary},18403:{name:"contentSignature ",value:R.binary},18404:{name:"ContentSigKeyID  ",value:R.binary},18405:{name:"contentSigAlgo ",value:R.uint},18406:{name:"contentSigHashAlgo ",value:R.uint}}},25188:{name:"bitDepth",value:R.uint}}}}}}}}},475249515:{name:"cues",container:{187:{name:"cuePoint",container:{179:{name:"cueTime",value:R.uid},183:{name:"positions",container:{247:{name:"track",value:R.uint},241:{name:"clusterPosition",value:R.uint},21368:{name:"blockNumber",value:R.uint},234:{name:"codecState",value:R.uint},219:{name:"reference",container:{150:{name:"time",value:R.uint},151:{name:"cluster",value:R.uint},21343:{name:"number",value:R.uint},235:{name:"codecState",value:R.uint}}},240:{name:"relativePosition",value:R.uint}}}}}}},423732329:{name:"attachments",container:{24999:{name:"attachedFiles",multiple:!0,container:{18046:{name:"description",value:R.string},18030:{name:"name",value:R.string},18016:{name:"mimeType",value:R.string},18012:{name:"data",value:R.binary},18094:{name:"uid",value:R.uid}}}}},272869232:{name:"chapters",container:{17849:{name:"editionEntry",container:{182:{name:"chapterAtom",container:{29636:{name:"uid",value:R.uid},145:{name:"timeStart",value:R.uint},146:{name:"timeEnd",value:R.uid},152:{name:"hidden",value:R.bool},17816:{name:"enabled",value:R.uid},143:{name:"track",container:{137:{name:"trackNumber",value:R.uid},128:{name:"display",container:{133:{name:"string",value:R.string},17276:{name:"language ",value:R.string},17278:{name:"country ",value:R.string}}}}}}}}}}},307544935:{name:"tags",container:{29555:{name:"tag",multiple:!0,container:{25536:{name:"target",container:{25541:{name:"tagTrackUID",value:R.uid},25540:{name:"tagChapterUID",value:R.uint},25542:{name:"tagAttachmentUID",value:R.uid},25546:{name:"targetType",value:R.string},26826:{name:"targetTypeValue",value:R.uint},25545:{name:"tagEditionUID",value:R.uid}}},26568:{name:"simpleTags",multiple:!0,container:{17827:{name:"name",value:R.string},17543:{name:"string",value:R.string},17541:{name:"binary",value:R.binary},17530:{name:"language",value:R.string},17531:{name:"languageIETF",value:R.string},17540:{name:"default",value:R.bool}}}}}}}}}}},To=De("music-metadata:parser:ebml");var ir;(function(t){t[t.ReadNext=0]="ReadNext",t[t.IgnoreElement=2]="IgnoreElement",t[t.SkipSiblings=3]="SkipSiblings",t[t.TerminateParsing=4]="TerminateParsing",t[t.SkipElement=5]="SkipElement"})(ir||(ir={}));class p6{constructor(e){this.tokenizer=e,this.padding=0,this.parserMap=new Map,this.ebmlMaxIDLength=4,this.ebmlMaxSizeLength=8,this.parserMap.set(R.uint,n=>this.readUint(n)),this.parserMap.set(R.string,n=>this.readString(n)),this.parserMap.set(R.binary,n=>this.readBuffer(n)),this.parserMap.set(R.uid,async n=>this.readBuffer(n)),this.parserMap.set(R.bool,n=>this.readFlag(n)),this.parserMap.set(R.float,n=>this.readFloat(n))}async iterate(e,n,r){return this.parseContainer(GT(e),n,r)}async parseContainer(e,n,r){const i={};for(;this.tokenizer.position<n;){let s;const o=this.tokenizer.position;try{s=await this.readElement()}catch(l){if(l instanceof rt)break;throw l}const a=e.container[s.id];if(a)switch(r.startNext(a)){case ir.ReadNext:if(s.id,To(`Read element: name=${ks(a)}{id=0x${s.id.toString(16)}, container=${!!a.container}} at position=${o}`),a.container){const c=await this.parseContainer(a,s.len>=0?this.tokenizer.position+s.len:-1,r);a.multiple?(i[a.name]||(i[a.name]=[]),i[a.name].push(c)):i[a.name]=c,await r.elementValue(a,c,o)}else{const c=this.parserMap.get(a.value);if(typeof c=="function"){const d=await c(s);i[a.name]=d,await r.elementValue(a,d,o)}}break;case ir.SkipElement:To(`Go to next element: name=${ks(a)}, element.id=0x${s.id}, container=${!!a.container} at position=${o}`);break;case ir.IgnoreElement:To(`Ignore element: name=${ks(a)}, element.id=0x${s.id}, container=${!!a.container} at position=${o}`),await this.tokenizer.ignore(s.len);break;case ir.SkipSiblings:To(`Ignore remaining container, at: name=${ks(a)}, element.id=0x${s.id}, container=${!!a.container} at position=${o}`),await this.tokenizer.ignore(n-this.tokenizer.position);break;case ir.TerminateParsing:return To(`Terminate parsing at element: name=${ks(a)}, element.id=0x${s.id}, container=${!!a.container} at position=${o}`),i}else switch(s.id){case 236:this.padding+=s.len,await this.tokenizer.ignore(s.len);break;default:To(`parseEbml: parent=${ks(e)}, unknown child: id=${s.id.toString(16)} at position=${o}`),this.padding+=s.len,await this.tokenizer.ignore(s.len)}}return i}async readVintData(e){const n=await this.tokenizer.peekNumber(pe);let r=128,i=1;for(;!(n&r);){if(i>e)throw new Error("VINT value exceeding maximum size");++i,r>>=1}const s=new Uint8Array(i);return await this.tokenizer.readBuffer(s),s}async readElement(){const e=await this.readVintData(this.ebmlMaxIDLength),n=await this.readVintData(this.ebmlMaxSizeLength);return n[0]^=128>>n.length-1,{id:Rp(e,e.length),len:Rp(n,n.length)}}async readFloat(e){switch(e.len){case 0:return 0;case 4:return this.tokenizer.readNumber(RT);case 8:return this.tokenizer.readNumber(E0);case 10:return this.tokenizer.readNumber(E0);default:throw new Error(`Invalid IEEE-754 float length: ${e.len}`)}}async readFlag(e){return await this.readUint(e)===1}async readUint(e){const n=await this.readBuffer(e);return Rp(n,e.len)}async readString(e){return(await this.tokenizer.readToken(new ne(e.len,"utf-8"))).replace(/\x00.*$/g,"")}async readBuffer(e){const n=new Uint8Array(e.len);return await this.tokenizer.readBuffer(n),n}}function Rp(t,e){return Number(g6(t,e))}function g6(t,e){const n=new Uint8Array(8),r=t.subarray(0,e);try{return n.set(r,8-e),zv.get(n,0)}catch{return BigInt(-1)}}function GT(t){return t.container&&Object.keys(t.container).map(e=>{const n=t.container[e];return n.id=Number.parseInt(e),n}).forEach(e=>{e.parent=t,GT(e)}),t}function ks(t){let e="";return t.parent&&t.parent.name!=="dtd"&&(e+=`${ks(t.parent)}/`),e+t.name}const Wu=De("music-metadata:parser:matroska");class y6 extends Mn{constructor(){super(...arguments),this.seekHeadOffset=0,this.flagUseIndexToSkipClusters=!1}init(e,n,r){return super.init(e,n,r),this.flagUseIndexToSkipClusters=r.mkvUseIndex??!1,this}async parse(){const e=this.tokenizer.fileInfo.size??Number.MAX_SAFE_INTEGER,n=new p6(this.tokenizer);Wu("Initializing DTD end MatroskaIterator"),await n.iterate(m6,e,{startNext:r=>{switch(r.id){case 475249515:return Wu(`Skip element: name=${r.name}, id=0x${r.id.toString(16)}`),ir.IgnoreElement;case 524531317:if(this.flagUseIndexToSkipClusters&&this.seekHead){const i=this.seekHead.seek.find(s=>s.position+this.seekHeadOffset>this.tokenizer.position);if(i){const s=i.position+this.seekHeadOffset-this.tokenizer.position;return Wu(`Use index to go to next position, ignoring ${s} bytes`),this.tokenizer.ignore(s),ir.SkipElement}}return ir.IgnoreElement;default:return ir.ReadNext}},elementValue:async(r,i,s)=>{switch(Wu(`Received: name=${r.name}, value=${i}`),r.id){case 17026:this.metadata.setFormat("container",`EBML/${i}`);break;case 290298740:this.seekHead=i,this.seekHeadOffset=s;break;case 357149030:{const o=i,a=o.timecodeScale?o.timecodeScale:1e6;if(typeof o.duration=="number"){const l=o.duration*a/1e9;await this.addTag("segment:title",o.title),this.metadata.setFormat("duration",Number(l))}}break;case 374648427:{const o=i;if(o!=null&&o.entries){o.entries.forEach(l=>{const c={codecName:l.codecID.replace("A_","").replace("V_",""),codecSettings:l.codecSettings,flagDefault:l.flagDefault,flagLacing:l.flagLacing,flagEnabled:l.flagEnabled,language:l.language,name:l.name,type:l.trackType,audio:l.audio,video:l.video};this.metadata.addStreamInfo(c)});const a=o.entries.filter(l=>l.trackType===Xs.audio).reduce((l,c)=>!l||c.flagDefault&&!l.flagDefault||c.trackNumber<l.trackNumber?c:l,null);a&&(this.metadata.setFormat("codec",a.codecID.replace("A_","")),this.metadata.setFormat("sampleRate",a.audio.samplingFrequency),this.metadata.setFormat("numberOfChannels",a.audio.channels))}}break;case 307544935:{const o=i;await Promise.all(o.tag.map(async a=>{const l=a.target,c=l!=null&&l.targetTypeValue?b0[l.targetTypeValue]:l!=null&&l.targetType?l.targetType:"track";await Promise.all(a.simpleTags.map(async d=>{const h=d.string?d.string:d.binary;await this.addTag(`${c}:${d.name}`,h)}))}))}break;case 423732329:{const o=i;await Promise.all(o.attachedFiles.filter(a=>a.mimeType.startsWith("image/")).map(a=>this.addTag("picture",{data:a.data,format:a.mimeType,description:a.description,name:a.name})))}break}}})}async addTag(e,n){await this.metadata.addTag("matroska",e,n)}}const yh=De("music-metadata:parser:factory");function v6(t){const e=Uv.parse(t),n=gM(e.type);return{type:n.type,subtype:n.subtype,suffix:n.suffix,parameters:e.parameters}}async function x6(t,e){const{mimeType:n,path:r,url:i}=t.fileInfo,s=KT(n)||j0(r)||j0(i);return s||yh(`No parser found for MIME-type / extension: ${n}`),w6(t,s,e)}async function w6(t,e,n){if(!e){yh("Guess parser on content...");const s=new Uint8Array(4100);if(await t.peekBuffer(s,{mayBeLess:!0}),t.fileInfo.path&&(e=j0(t.fileInfo.path)),!e){const o=await OT(s);if(!o)throw new Error("Failed to determine audio format");if(yh(`Guessed file type is mime=${o.mime}, extension=${o.ext}`),e=KT(o.mime),!e)throw new Error(`Guessed MIME-type not supported: ${o.mime}`)}}const r=await _6(e),i=new XM(n);return await r.init(i,t,n??{}).parse(),i.toCommonMetadata()}function j0(t){if(!t)return;switch(E6(t).toLocaleLowerCase()||t){case".mp2":case".mp3":case".m2a":case".aac":return"mpeg";case".ape":return"apev2";case".mp4":case".m4a":case".m4b":case".m4pa":case".m4v":case".m4r":case".3gp":return"mp4";case".wma":case".wmv":case".asf":return"asf";case".flac":return"flac";case".ogg":case".ogv":case".oga":case".ogm":case".ogx":case".opus":case".spx":return"ogg";case".aif":case".aiff":case".aifc":return"aiff";case".wav":case".bwf":return"riff";case".wv":case".wvp":return"wavpack";case".mpc":return"musepack";case".dsf":return"dsf";case".dff":return"dsdiff";case".mka":case".mkv":case".mk3d":case".mks":case".webm":return"matroska"}}async function _6(t){switch(t){case"aiff":return new nL;case"adts":case"mpeg":return new VL;case"apev2":return new Er;case"asf":return new mL;case"dsf":return new h6;case"dsdiff":return new f6;case"flac":return new yL;case"mp4":return new ph;case"musepack":return new QL;case"ogg":return new If;case"riff":return new a6;case"wavpack":return new c6;case"matroska":return new y6;default:throw new Error(`Unknown parser type: ${t}`)}}function E6(t){const e=t.lastIndexOf(".");return e===-1?"":t.slice(e)}function KT(t){let e;if(!t)return;try{e=v6(t)}catch{yh(`Invalid HTTP Content-Type header value: ${t}`);return}const n=e.subtype.indexOf("x-")===0?e.subtype.substring(2):e.subtype;switch(e.type){case"audio":switch(n){case"mp3":case"mpeg":return"mpeg";case"aac":case"aacp":return"adts";case"flac":return"flac";case"ape":case"monkeys-audio":return"apev2";case"mp4":case"m4a":return"mp4";case"ogg":case"opus":case"speex":return"ogg";case"ms-wma":case"ms-wmv":case"ms-asf":return"asf";case"aiff":case"aif":case"aifc":return"aiff";case"vnd.wave":case"wav":case"wave":return"riff";case"wavpack":return"wavpack";case"musepack":return"musepack";case"matroska":case"webm":return"matroska";case"dsf":return"dsf"}break;case"video":switch(n){case"ms-asf":case"ms-wmv":return"asf";case"m4v":case"mp4":return"mp4";case"ogg":return"ogg";case"matroska":case"webm":return"matroska"}break;case"application":switch(n){case"vnd.ms-asf":return"asf";case"ogg":return"ogg"}break}}async function S6(t,e={}){const n={mimeType:t.type,size:t.size};return t instanceof File&&(n.path=t.name),b6(t.stream(),n,e)}function b6(t,e,n={}){return k6(CT(t,{fileInfo:typeof e=="string"?{mimeType:e}:e}),n)}function k6(t,e){return x6(t,e)}let vh=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");function XT(t,e){return function(){return t.apply(e,arguments)}}const{toString:T6}=Object.prototype,{getPrototypeOf:Qv}=Object,Cf=(t=>e=>{const n=T6.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),$r=t=>(t=t.toLowerCase(),e=>Cf(e)===t),Af=t=>e=>typeof e===t,{isArray:Fa}=Array,uc=Af("undefined");function I6(t){return t!==null&&!uc(t)&&t.constructor!==null&&!uc(t.constructor)&&Hn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const QT=$r("ArrayBuffer");function C6(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&QT(t.buffer),e}const A6=Af("string"),Hn=Af("function"),YT=Af("number"),Rf=t=>t!==null&&typeof t=="object",R6=t=>t===!0||t===!1,wd=t=>{if(Cf(t)!=="object")return!1;const e=Qv(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},P6=$r("Date"),N6=$r("File"),D6=$r("Blob"),j6=$r("FileList"),O6=t=>Rf(t)&&Hn(t.pipe),M6=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Hn(t.append)&&((e=Cf(t))==="formdata"||e==="object"&&Hn(t.toString)&&t.toString()==="[object FormData]"))},L6=$r("URLSearchParams"),F6=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Uc(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Fa(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function JT(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const ZT=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),eI=t=>!uc(t)&&t!==ZT;function O0(){const{caseless:t}=eI(this)&&this||{},e={},n=(r,i)=>{const s=t&&JT(e,i)||i;wd(e[s])&&wd(r)?e[s]=O0(e[s],r):wd(r)?e[s]=O0({},r):Fa(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Uc(arguments[r],n);return e}const $6=(t,e,n,{allOwnKeys:r}={})=>(Uc(e,(i,s)=>{n&&Hn(i)?t[s]=XT(i,n):t[s]=i},{allOwnKeys:r}),t),z6=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),B6=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},V6=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Qv(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},U6=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},W6=t=>{if(!t)return null;if(Fa(t))return t;let e=t.length;if(!YT(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},H6=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Qv(Uint8Array)),q6=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},G6=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},K6=$r("HTMLFormElement"),X6=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),hE=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Q6=$r("RegExp"),tI=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Uc(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},Y6=t=>{tI(t,(e,n)=>{if(Hn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Hn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},J6=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Fa(t)?r(t):r(String(t).split(e)),n},Z6=()=>{},eF=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Pp="abcdefghijklmnopqrstuvwxyz",fE="0123456789",nI={DIGIT:fE,ALPHA:Pp,ALPHA_DIGIT:Pp+Pp.toUpperCase()+fE},tF=(t=16,e=nI.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function nF(t){return!!(t&&Hn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const rF=t=>{const e=new Array(10),n=(r,i)=>{if(Rf(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Fa(r)?[]:{};return Uc(r,(o,a)=>{const l=n(o,i+1);!uc(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},iF=$r("AsyncFunction"),sF=t=>t&&(Rf(t)||Hn(t))&&Hn(t.then)&&Hn(t.catch),N={isArray:Fa,isArrayBuffer:QT,isBuffer:I6,isFormData:M6,isArrayBufferView:C6,isString:A6,isNumber:YT,isBoolean:R6,isObject:Rf,isPlainObject:wd,isUndefined:uc,isDate:P6,isFile:N6,isBlob:D6,isRegExp:Q6,isFunction:Hn,isStream:O6,isURLSearchParams:L6,isTypedArray:H6,isFileList:j6,forEach:Uc,merge:O0,extend:$6,trim:F6,stripBOM:z6,inherits:B6,toFlatObject:V6,kindOf:Cf,kindOfTest:$r,endsWith:U6,toArray:W6,forEachEntry:q6,matchAll:G6,isHTMLForm:K6,hasOwnProperty:hE,hasOwnProp:hE,reduceDescriptors:tI,freezeMethods:Y6,toObjectSet:J6,toCamelCase:X6,noop:Z6,toFiniteNumber:eF,findKey:JT,global:ZT,isContextDefined:eI,ALPHABET:nI,generateString:tF,isSpecCompliantForm:nF,toJSONObject:rF,isAsyncFn:iF,isThenable:sF};function _e(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}N.inherits(_e,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:N.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const rI=_e.prototype,iI={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{iI[t]={value:t}});Object.defineProperties(_e,iI);Object.defineProperty(rI,"isAxiosError",{value:!0});_e.from=(t,e,n,r,i,s)=>{const o=Object.create(rI);return N.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),_e.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const oF=null;function M0(t){return N.isPlainObject(t)||N.isArray(t)}function sI(t){return N.endsWith(t,"[]")?t.slice(0,-2):t}function mE(t,e,n){return t?t.concat(e).map(function(i,s){return i=sI(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function aF(t){return N.isArray(t)&&!t.some(M0)}const lF=N.toFlatObject(N,{},null,function(e){return/^is[A-Z]/.test(e)});function Pf(t,e,n){if(!N.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=N.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,_){return!N.isUndefined(_[x])});const r=n.metaTokens,i=n.visitor||d,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&N.isSpecCompliantForm(e);if(!N.isFunction(i))throw new TypeError("visitor must be a function");function c(y){if(y===null)return"";if(N.isDate(y))return y.toISOString();if(!l&&N.isBlob(y))throw new _e("Blob is not supported. Use a Buffer instead.");return N.isArrayBuffer(y)||N.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,x,_){let v=y;if(y&&!_&&typeof y=="object"){if(N.endsWith(x,"{}"))x=r?x:x.slice(0,-2),y=JSON.stringify(y);else if(N.isArray(y)&&aF(y)||(N.isFileList(y)||N.endsWith(x,"[]"))&&(v=N.toArray(y)))return x=sI(x),v.forEach(function(w,E){!(N.isUndefined(w)||w===null)&&e.append(o===!0?mE([x],E,s):o===null?x:x+"[]",c(w))}),!1}return M0(y)?!0:(e.append(mE(_,x,s),c(y)),!1)}const h=[],m=Object.assign(lF,{defaultVisitor:d,convertValue:c,isVisitable:M0});function p(y,x){if(!N.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+x.join("."));h.push(y),N.forEach(y,function(v,g){(!(N.isUndefined(v)||v===null)&&i.call(e,v,N.isString(g)?g.trim():g,x,m))===!0&&p(v,x?x.concat(g):[g])}),h.pop()}}if(!N.isObject(t))throw new TypeError("data must be an object");return p(t),e}function pE(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Yv(t,e){this._pairs=[],t&&Pf(t,this,e)}const oI=Yv.prototype;oI.append=function(e,n){this._pairs.push([e,n])};oI.toString=function(e){const n=e?function(r){return e.call(this,r,pE)}:pE;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function cF(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function aI(t,e,n){if(!e)return t;const r=n&&n.encode||cF,i=n&&n.serialize;let s;if(i?s=i(e,n):s=N.isURLSearchParams(e)?e.toString():new Yv(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class uF{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){N.forEach(this.handlers,function(r){r!==null&&e(r)})}}const gE=uF,lI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dF=typeof URLSearchParams<"u"?URLSearchParams:Yv,hF=typeof FormData<"u"?FormData:null,fF=typeof Blob<"u"?Blob:null,mF=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),pF=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Sr={isBrowser:!0,classes:{URLSearchParams:dF,FormData:hF,Blob:fF},isStandardBrowserEnv:mF,isStandardBrowserWebWorkerEnv:pF,protocols:["http","https","file","blob","url","data"]};function gF(t,e){return Pf(t,new Sr.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Sr.isNode&&N.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function yF(t){return N.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function vF(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function cI(t){function e(n,r,i,s){let o=n[s++];const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&N.isArray(i)?i.length:o,l?(N.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!N.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&N.isArray(i[o])&&(i[o]=vF(i[o])),!a)}if(N.isFormData(t)&&N.isFunction(t.entries)){const n={};return N.forEachEntry(t,(r,i)=>{e(yF(r),i,n,0)}),n}return null}function xF(t,e,n){if(N.isString(t))try{return(e||JSON.parse)(t),N.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Jv={transitional:lI,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=N.isObject(e);if(s&&N.isHTMLForm(e)&&(e=new FormData(e)),N.isFormData(e))return i&&i?JSON.stringify(cI(e)):e;if(N.isArrayBuffer(e)||N.isBuffer(e)||N.isStream(e)||N.isFile(e)||N.isBlob(e))return e;if(N.isArrayBufferView(e))return e.buffer;if(N.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return gF(e,this.formSerializer).toString();if((a=N.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Pf(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),xF(e)):e}],transformResponse:[function(e){const n=this.transitional||Jv.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&N.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?_e.from(a,_e.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Sr.classes.FormData,Blob:Sr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};N.forEach(["delete","get","head","post","put","patch"],t=>{Jv.headers[t]={}});const Zv=Jv,wF=N.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),_F=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&wF[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},yE=Symbol("internals");function ol(t){return t&&String(t).trim().toLowerCase()}function _d(t){return t===!1||t==null?t:N.isArray(t)?t.map(_d):String(t)}function EF(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const SF=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Np(t,e,n,r,i){if(N.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!N.isString(e)){if(N.isString(r))return e.indexOf(r)!==-1;if(N.isRegExp(r))return r.test(e)}}function bF(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function kF(t,e){const n=N.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class Nf{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const d=ol(l);if(!d)throw new Error("header name must be a non-empty string");const h=N.findKey(i,d);(!h||i[h]===void 0||c===!0||c===void 0&&i[h]!==!1)&&(i[h||l]=_d(a))}const o=(a,l)=>N.forEach(a,(c,d)=>s(c,d,l));return N.isPlainObject(e)||e instanceof this.constructor?o(e,n):N.isString(e)&&(e=e.trim())&&!SF(e)?o(_F(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=ol(e),e){const r=N.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return EF(i);if(N.isFunction(n))return n.call(this,i,r);if(N.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ol(e),e){const r=N.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Np(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=ol(o),o){const a=N.findKey(r,o);a&&(!n||Np(r,r[a],a,n))&&(delete r[a],i=!0)}}return N.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||Np(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return N.forEach(this,(i,s)=>{const o=N.findKey(r,s);if(o){n[o]=_d(i),delete n[s];return}const a=e?bF(s):String(s).trim();a!==s&&delete n[s],n[a]=_d(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return N.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&N.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[yE]=this[yE]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=ol(o);r[a]||(kF(i,o),r[a]=!0)}return N.isArray(e)?e.forEach(s):s(e),this}}Nf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);N.reduceDescriptors(Nf.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});N.freezeMethods(Nf);const ti=Nf;function Dp(t,e){const n=this||Zv,r=e||n,i=ti.from(r.headers);let s=r.data;return N.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function uI(t){return!!(t&&t.__CANCEL__)}function Wc(t,e,n){_e.call(this,t??"canceled",_e.ERR_CANCELED,e,n),this.name="CanceledError"}N.inherits(Wc,_e,{__CANCEL__:!0});function TF(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new _e("Request failed with status code "+n.status,[_e.ERR_BAD_REQUEST,_e.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const IF=Sr.isStandardBrowserEnv?function(){return{write:function(n,r,i,s,o,a){const l=[];l.push(n+"="+encodeURIComponent(r)),N.isNumber(i)&&l.push("expires="+new Date(i).toGMTString()),N.isString(s)&&l.push("path="+s),N.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function CF(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function AF(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function dI(t,e){return t&&!CF(e)?AF(t,e):e}const RF=Sr.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const a=N.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function PF(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function NF(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[s];o||(o=c),n[i]=l,r[i]=c;let h=s,m=0;for(;h!==i;)m+=n[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const p=d&&c-d;return p?Math.round(m*1e3/p):void 0}}function vE(t,e){let n=0;const r=NF(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,l=r(a),c=s<=o;n=s;const d={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-s)/l:void 0,event:i};d[e?"download":"upload"]=!0,t(d)}}const DF=typeof XMLHttpRequest<"u",jF=DF&&function(t){return new Promise(function(n,r){let i=t.data;const s=ti.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let c;N.isFormData(i)&&(Sr.isStandardBrowserEnv||Sr.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.getContentType(/^\s*multipart\/form-data/)?N.isString(c=s.getContentType())&&s.setContentType(c.replace(/^\s*(multipart\/form-data);+/,"$1")):s.setContentType("multipart/form-data"));let d=new XMLHttpRequest;if(t.auth){const y=t.auth.username||"",x=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(y+":"+x))}const h=dI(t.baseURL,t.url);d.open(t.method.toUpperCase(),aI(h,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function m(){if(!d)return;const y=ti.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),_={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:y,config:t,request:d};TF(function(g){n(g),l()},function(g){r(g),l()},_),d=null}if("onloadend"in d?d.onloadend=m:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(m)},d.onabort=function(){d&&(r(new _e("Request aborted",_e.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new _e("Network Error",_e.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let x=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const _=t.transitional||lI;t.timeoutErrorMessage&&(x=t.timeoutErrorMessage),r(new _e(x,_.clarifyTimeoutError?_e.ETIMEDOUT:_e.ECONNABORTED,t,d)),d=null},Sr.isStandardBrowserEnv){const y=RF(h)&&t.xsrfCookieName&&IF.read(t.xsrfCookieName);y&&s.set(t.xsrfHeaderName,y)}i===void 0&&s.setContentType(null),"setRequestHeader"in d&&N.forEach(s.toJSON(),function(x,_){d.setRequestHeader(_,x)}),N.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),o&&o!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",vE(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",vE(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=y=>{d&&(r(!y||y.type?new Wc(null,t,d):y),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const p=PF(h);if(p&&Sr.protocols.indexOf(p)===-1){r(new _e("Unsupported protocol "+p+":",_e.ERR_BAD_REQUEST,t));return}d.send(i||null)})},L0={http:oF,xhr:jF};N.forEach(L0,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const xE=t=>`- ${t}`,OF=t=>N.isFunction(t)||t===null||t===!1,hI={getAdapter:t=>{t=N.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!OF(n)&&(r=L0[(o=String(n)).toLowerCase()],r===void 0))throw new _e(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(xE).join(`
`):" "+xE(s[0]):"as no adapter specified";throw new _e("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:L0};function jp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Wc(null,t)}function wE(t){return jp(t),t.headers=ti.from(t.headers),t.data=Dp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),hI.getAdapter(t.adapter||Zv.adapter)(t).then(function(r){return jp(t),r.data=Dp.call(t,t.transformResponse,r),r.headers=ti.from(r.headers),r},function(r){return uI(r)||(jp(t),r&&r.response&&(r.response.data=Dp.call(t,t.transformResponse,r.response),r.response.headers=ti.from(r.response.headers))),Promise.reject(r)})}const _E=t=>t instanceof ti?t.toJSON():t;function wa(t,e){e=e||{};const n={};function r(c,d,h){return N.isPlainObject(c)&&N.isPlainObject(d)?N.merge.call({caseless:h},c,d):N.isPlainObject(d)?N.merge({},d):N.isArray(d)?d.slice():d}function i(c,d,h){if(N.isUndefined(d)){if(!N.isUndefined(c))return r(void 0,c,h)}else return r(c,d,h)}function s(c,d){if(!N.isUndefined(d))return r(void 0,d)}function o(c,d){if(N.isUndefined(d)){if(!N.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,h){if(h in e)return r(c,d);if(h in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d)=>i(_E(c),_E(d),!0)};return N.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=l[d]||i,m=h(t[d],e[d],d);N.isUndefined(m)&&h!==a||(n[d]=m)}),n}const fI="1.6.0",ex={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{ex[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const EE={};ex.transitional=function(e,n,r){function i(s,o){return"[Axios v"+fI+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new _e(i(o," has been removed"+(n?" in "+n:"")),_e.ERR_DEPRECATED);return n&&!EE[o]&&(EE[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function MF(t,e,n){if(typeof t!="object")throw new _e("options must be an object",_e.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new _e("option "+s+" must be "+l,_e.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new _e("Unknown option "+s,_e.ERR_BAD_OPTION)}}const F0={assertOptions:MF,validators:ex},_i=F0.validators;class xh{constructor(e){this.defaults=e,this.interceptors={request:new gE,response:new gE}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=wa(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&F0.assertOptions(r,{silentJSONParsing:_i.transitional(_i.boolean),forcedJSONParsing:_i.transitional(_i.boolean),clarifyTimeoutError:_i.transitional(_i.boolean)},!1),i!=null&&(N.isFunction(i)?n.paramsSerializer={serialize:i}:F0.assertOptions(i,{encode:_i.function,serialize:_i.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&N.merge(s.common,s[n.method]);s&&N.forEach(["delete","get","head","post","put","patch","common"],y=>{delete s[y]}),n.headers=ti.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(n)===!1||(l=l&&x.synchronous,a.unshift(x.fulfilled,x.rejected))});const c=[];this.interceptors.response.forEach(function(x){c.push(x.fulfilled,x.rejected)});let d,h=0,m;if(!l){const y=[wE.bind(this),void 0];for(y.unshift.apply(y,a),y.push.apply(y,c),m=y.length,d=Promise.resolve(n);h<m;)d=d.then(y[h++],y[h++]);return d}m=a.length;let p=n;for(h=0;h<m;){const y=a[h++],x=a[h++];try{p=y(p)}catch(_){x.call(this,_);break}}try{d=wE.call(this,p)}catch(y){return Promise.reject(y)}for(h=0,m=c.length;h<m;)d=d.then(c[h++],c[h++]);return d}getUri(e){e=wa(this.defaults,e);const n=dI(e.baseURL,e.url);return aI(n,e.params,e.paramsSerializer)}}N.forEach(["delete","get","head","options"],function(e){xh.prototype[e]=function(n,r){return this.request(wa(r||{},{method:e,url:n,data:(r||{}).data}))}});N.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(wa(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}xh.prototype[e]=n(),xh.prototype[e+"Form"]=n(!0)});const Ed=xh;class tx{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Wc(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new tx(function(i){e=i}),cancel:e}}}const LF=tx;function FF(t){return function(n){return t.apply(null,n)}}function $F(t){return N.isObject(t)&&t.isAxiosError===!0}const $0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($0).forEach(([t,e])=>{$0[e]=t});const zF=$0;function mI(t){const e=new Ed(t),n=XT(Ed.prototype.request,e);return N.extend(n,Ed.prototype,e,{allOwnKeys:!0}),N.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return mI(wa(t,i))},n}const ut=mI(Zv);ut.Axios=Ed;ut.CanceledError=Wc;ut.CancelToken=LF;ut.isCancel=uI;ut.VERSION=fI;ut.toFormData=Pf;ut.AxiosError=_e;ut.Cancel=ut.CanceledError;ut.all=function(e){return Promise.all(e)};ut.spread=FF;ut.isAxiosError=$F;ut.mergeConfig=wa;ut.AxiosHeaders=ti;ut.formToJSON=t=>cI(N.isHTMLForm(t)?new FormData(t):t);ut.getAdapter=hI.getAdapter;ut.HttpStatusCode=zF;ut.default=ut;const BF=ut,pI=BF.create({baseURL:{}.VITE_ENDPOINT||"https://express-zingmp3-awx6.vercel.app"}),VF=t=>new Date(t.toDate().getTime()).toLocaleString(),ni=()=>JSON.parse(localStorage.getItem("HD-MP3")||"{}"),Jt=(t,e)=>{const n=ni();return n[t]=e,localStorage.setItem("HD-MP3",JSON.stringify(n))},nx=t=>(n=>n.toLocaleLowerCase().replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ/g,"a").replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e").replace(/ì|í|ị|ỉ|ĩ/g,"i").replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ/g,"o").replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u").replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y").replace(/đ/g,"d"))(t).toLocaleLowerCase().replaceAll(/[\W_]/g,"")+"_"+vh(4),UF=async t=>{if(!t)return;const e=await S6(t);if(!e)return;const{common:{title:n,artist:r},format:{duration:i}}=e,s={name:"",singer:"",image:null,duration:0};return s.name=n||t.name,s.singer=r||"...",s.duration=i||0,s},dc=t=>{const e=Math.floor(t/60),n=Math.floor(t%60);return`${e}:${n.toString().padStart(2,"0")}`},WF=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);if(n!=-1)return e[n]=t,n},rx=({...t})=>({...{name:"",singer:"",image_url:"",song_url:"",by:"",duration:0,lyric_id:"",image_file_path:"",song_file_path:"",id:"",song_in:"",blurhash_encode:"",size:0},...t}),ix=({...t})=>({...{id:"",name:"",song_ids:[],by:"",image_url:"",blurhash_encode:""},...t}),wh=async t=>new Promise(e=>setTimeout(e,t));let z0=oh[0];const HF=ni(),SE=HF.theme;SE&&oh.forEach(t=>{t.id===SE&&(z0=t)});const gI={theme:{...z0,alpha:z0.type==="light"?"[#000]/[.1]":"[#fff]/[.1]"},isOnMobile:window.innerWidth<800,isDev:!1},qF=(t,e)=>{switch(e.type){case 0:{const n=e.payload.theme;return{...t,theme:{...n,alpha:n.type==="dark"?"[#fff]/[.1]":"[#000]/[.1]"}}}}},GF=()=>{const[t,e]=f.useReducer(qF,gI),n=f.useCallback(r=>{console.log("set theme"),e({type:0,payload:{theme:r}})},[]);return{state:t,setTheme:n}},KF={state:gI,setTheme:()=>{}},yI=f.createContext(KF),XF=({children:t})=>u.jsx(yI.Provider,{value:GF(),children:t}),te=()=>{const{state:{...t},...e}=f.useContext(yI);return{...t,...e}};function _t({className:t}){const{theme:e}=te();return u.jsx("div",{className:`animate-pulse rounded-[4px] bg-${e.alpha} ${t}`})}const Df=[...Array(4).keys()].map(t=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(_t,{className:"h-[18px] w-[18px]"}),u.jsx(_t,{className:"h-[54px] w-[54px] ml-[10px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(_t,{className:"h-[20px] mb-[5px] w-[150px]"}),u.jsx(_t,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},t)),vI=()=>u.jsx("div",{className:"py-3",children:u.jsx(_t,{className:"w-full h-[28px]"})}),QF=[...Array(2).keys()].map(t=>u.jsxs("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:[u.jsx(_t,{className:"pt-[100%] rounded-[8px]"}),u.jsx(_t,{className:"h-[22px] mt-[6px] w-[50%]"})]},t));var YF=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],pl=t=>{let e=0;for(let n=0;n<t.length;n++){let r=t[n],i=YF.indexOf(r);e=e*83+i}return e},Op=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},Mp=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},JF=t=>t<0?-1:1,Lp=(t,e)=>JF(t)*Math.pow(Math.abs(t),e),bE=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},ZF=t=>{if(!t||t.length<6)throw new bE("The blurhash string must be at least 6 characters");let e=pl(t[0]),n=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*n)throw new bE(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*n}`)},e$=t=>{let e=t>>16,n=t>>8&255,r=t&255;return[Op(e),Op(n),Op(r)]},t$=(t,e)=>{let n=Math.floor(t/361),r=Math.floor(t/19)%19,i=t%19;return[Lp((n-9)/9,2)*e,Lp((r-9)/9,2)*e,Lp((i-9)/9,2)*e]},n$=(t,e,n,r)=>{ZF(t),r=r|1;let i=pl(t[0]),s=Math.floor(i/9)+1,o=i%9+1,a=(pl(t[1])+1)/166,l=new Array(o*s);for(let h=0;h<l.length;h++)if(h===0){let m=pl(t.substring(2,6));l[h]=e$(m)}else{let m=pl(t.substring(4+h*2,6+h*2));l[h]=t$(m,a*r)}let c=e*4,d=new Uint8ClampedArray(c*n);for(let h=0;h<n;h++)for(let m=0;m<e;m++){let p=0,y=0,x=0;for(let w=0;w<s;w++)for(let E=0;E<o;E++){let S=Math.cos(Math.PI*m*E/e)*Math.cos(Math.PI*h*w/n),T=l[E+w*o];p+=T[0]*S,y+=T[1]*S,x+=T[2]*S}let _=Mp(p),v=Mp(y),g=Mp(x);d[4*m+0+h*c]=_,d[4*m+1+h*c]=v,d[4*m+2+h*c]=g,d[4*m+3+h*c]=255}return d},r$=n$,i$=Object.defineProperty,s$=Object.defineProperties,o$=Object.getOwnPropertyDescriptors,_h=Object.getOwnPropertySymbols,xI=Object.prototype.hasOwnProperty,wI=Object.prototype.propertyIsEnumerable,kE=(t,e,n)=>e in t?i$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,B0=(t,e)=>{for(var n in e||(e={}))xI.call(e,n)&&kE(t,n,e[n]);if(_h)for(var n of _h(e))wI.call(e,n)&&kE(t,n,e[n]);return t},V0=(t,e)=>s$(t,o$(e)),_I=(t,e)=>{var n={};for(var r in t)xI.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&_h)for(var r of _h(t))e.indexOf(r)<0&&wI.call(t,r)&&(n[r]=t[r]);return n},EI=class extends f.PureComponent{constructor(){super(...arguments),this.canvas=null,this.handleRef=e=>{this.canvas=e,this.draw()},this.draw=()=>{let{hash:e,height:n,punch:r,width:i}=this.props;if(this.canvas){let s=r$(e,i,n,r),o=this.canvas.getContext("2d"),a=o.createImageData(i,n);a.data.set(s),o.putImageData(a,0,0)}}}componentDidUpdate(){this.draw()}render(){let e=this.props,{hash:n,height:r,width:i}=e,s=_I(e,["hash","height","width"]);return f.createElement("canvas",V0(B0({},s),{height:r,width:i,ref:this.handleRef}))}};EI.defaultProps={height:128,width:128};var a$={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},SI=class extends f.PureComponent{componentDidUpdate(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")}render(){let e=this.props,{hash:n,height:r,width:i,punch:s,resolutionX:o,resolutionY:a,style:l}=e,c=_I(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return f.createElement("div",V0(B0({},c),{style:V0(B0({display:"inline-block",height:r,width:i},l),{position:"relative"})}),f.createElement(EI,{hash:n,height:a,width:o,punch:s,style:a$}))}};SI.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32};const l$="/HD-MP3/assets/logo-17dffbdd.png";function pi({src:t,classNames:e,blurHashEncode:n,onError:r}){const[i,s]=f.useState(!1),o=f.useRef(null),a=()=>{s(!0),t&&t!=null&&t.includes("blob")&&URL.revokeObjectURL(t)},l=()=>{const d=o.current;d.src="https://placehold.co/100",s(!0)},c=()=>{r?(r(),l()):l()};return u.jsxs(u.Fragment,{children:[!i&&u.jsx(u.Fragment,{children:n?u.jsx(SI,{hash:n,height:"100%",width:"100%"}):u.jsx(_t,{className:"w-full h-0"})}),u.jsx("img",{onLoad:a,onError:c,className:`${e||""} w-full ${i?"":"hidden"}`,src:t||l$,ref:o})]})}const c$=({className:t,onClick:e,theme:n})=>u.jsx("div",{className:`w-full rounded-[8px] border ${n.type==="light"?"border-[#333]":"border-[#fff]"} relative`,children:u.jsx("div",{onClick:()=>e(),className:`${n==null?void 0:n.content_hover_text} ${t} cursor-pointer`,children:u.jsx(Q,{className:`absolute top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ${n.type==="light"?"text-[#333]":"text-[#fff]"}`,children:u.jsx(sh,{className:"w-[40px] max-[549px]:w-[30px]"})})})}),u$=pT("",{variants:{p:{3:"p-3",2:"p-2",1:"p-1"},rounded:{xl:"rounded-xl",lg:"rounded-lg",md:"rounded-md",sm:"rounded-sm"}},defaultVariants:{p:3,rounded:"xl"}});function po({children:t,theme:e,className:n,color:r="container",p:i,rounded:s}){const o={black:"bg-[#292929]",container:e.container,sidebar:e.side_bar_bg};return u.jsx("div",{className:`  ${e.type==="light"?"text-[#333]":"text-white"} ${o[r]} border-[1px] border-${e.alpha} ${u$({p:i,rounded:s,className:n})}`,children:t})}function Fp({className:t,icon:e,label:n,to:r,arrowIcon:i,children:s}){return r?u.jsxs(Kr,{className:`w-full flex  justify-between  ${t}`,to:r,children:[u.jsxs("div",{className:"inline-flex items-center ",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]}),s,i&&u.jsx("span",{children:i})]}):u.jsx("p",{children:"No onClick"})}const sx={userSongs:[],userPlaylists:[],adminSongs:[],adminPlaylists:[],initial:!1},d$=(t,e)=>{switch(e.type){case 8:{const n=e.payload;return{...t,...n,initial:!0}}case 2:{const{songs:n}=e.payload,r=[...t.userSongs,...n];return{...t,userSongs:r}}case 3:{const{song:n}=e.payload,r=[...t.userSongs],i=r.findIndex(s=>s.id===n.id);return i===-1?t:(r[i]=n,{...t,userSongs:r})}case 4:{const{playlist:n}=e.payload;return{...t,userPlaylists:[...t.userPlaylists,n]}}case 5:{const{playlist:n}=e.payload,r=[...t.userPlaylists],i=r.findIndex(s=>s.id===n.id);return i===-1?t:(r[i]=n,{...t,userPlaylists:r})}case 9:return sx;case 0:{const{songs:n}=e.payload;return{...t,userSongs:n}}case 6:{const{playlists:n}=e.payload;return{...t,userPlaylists:n}}default:return t}},h$=()=>{const[t,e]=f.useReducer(d$,sx),n=f.useCallback(d=>e({type:0,payload:{songs:d}}),[]),r=f.useCallback(d=>e({type:2,payload:{songs:d}}),[]),i=f.useCallback(d=>e({type:3,payload:{song:d}}),[]),s=f.useCallback(d=>e({type:4,payload:{playlist:d}}),[]),o=f.useCallback(d=>e({type:6,payload:{playlists:d}}),[]),a=f.useCallback(d=>e({type:5,payload:{playlist:d}}),[]),l=f.useCallback(()=>e({type:9}),[]),c=f.useCallback(d=>e({type:8,payload:d}),[]);return{state:t,resetSongPlaylistStore:l,setUserSongs:n,addUserSongs:r,addUserPlaylist:s,updateUserSong:i,updateUserPlaylist:a,initSongsContext:c,setUserPlaylists:o}},f$={state:sx,initSongsContext:()=>{},addUserPlaylist:()=>{},addUserSongs:()=>{},resetSongPlaylistStore:()=>{},setUserSongs:()=>{},updateUserPlaylist:()=>{},updateUserSong:()=>{},setUserPlaylists:()=>{}},bI=f.createContext(f$),m$=({children:t})=>u.jsx(bI.Provider,{value:h$(),children:t}),dt=()=>{const{state:{...t},...e}=f.useContext(bI);return{...t,...e}},kI={isChecked:!1,isSelectAll:!1,selectedSongs:[]},p$=(t,e)=>{switch(e.type){case 0:{const{song:n}=e.payload,r=[...t.selectedSongs],i=r.findIndex(s=>s.id===n.id);return i===-1?r.push(n):r.splice(i,1),{...t,selectedSongs:r,isChecked:!!r.length}}case 2:return kI;case 3:return t;case 4:{const{songs:n}=e.payload;return{...t,selectedSongs:n,isChecked:!0,isSelectAll:!0}}}return t},g$=()=>{const[t,e]=f.useReducer(p$,kI),n=f.useCallback(()=>{e({type:3})},[]),r=f.useCallback(()=>{e({type:2})},[]),i=f.useCallback(o=>{e({type:0,payload:{song:o}})},[]),s=f.useCallback(o=>{e({type:4,payload:{songs:o}})},[]);return{state:t,setChecked:n,selectSong:i,selectAll:s,resetSelect:r}},y$={state:{isChecked:!1,isSelectAll:!1,selectedSongs:[]},resetSelect:()=>{},selectAll:()=>{},selectSong:()=>{},setChecked:()=>{}},TI=f.createContext(y$),Hc=()=>{const t=f.useContext(TI),{state:{...e},...n}=t;return{...e,...n}};function hc({children:t}){return u.jsx(TI.Provider,{value:g$(),children:t})}function II({song:t,theme:e,...n}){const{isChecked:r,selectedSongs:i,selectSong:s}=Hc(),o=d=>{switch(n.variant){case"default":case"playing-next":return n.onClick(d);case"select":return s(t)}},a=f.useMemo(()=>n.variant!=="select"?!1:i.findIndex(d=>d.id===t.id)!=-1,[i]),l={itemContainer:`hover:bg-${e.alpha} items-center justify-between cursor-pointer  border-b 
    last:border-none border-${e.alpha} 
    flex rounded-md p-2 ${r&&"bg-"+e.alpha}`,button:`${e.content_bg} rounded-full`,songListButton:"mr-[10px] px-[5px]",imageFrame:"w-[54px] h-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]"},c=()=>{switch(n.variant){case"select":return r?u.jsx(sc,{className:"w-[18px] "}):u.jsx(u.Fragment,{children:a?u.jsx(xd,{className:"w-[18px]"}):u.jsx(sc,{className:"w-[18px]"})});default:return u.jsx(u.Fragment,{})}};return u.jsx(u.Fragment,{children:u.jsx("div",{onClick:o,className:`target-class opacity-100 transition-[opacity,transform] duration-500 ${l.itemContainer} `,children:u.jsxs("div",{className:"flex flex-row w-[100%]",children:[c(),u.jsxs("div",{className:"flex-grow flex",children:[u.jsx("div",{className:`${l.imageFrame}  `,children:u.jsx(pi,{blurHashEncode:t.blurhash_encode,src:t.image_url})}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx("h5",{className:`text-mg line-clamp-1 ${a&&e.content_text}`,children:t.name}),u.jsx("p",{className:"text-xs opacity-60 bg-blend-lighten line-clamp-1",children:t.singer})]})]})]})})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},v$=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},AI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(m=64)),r.push(n[d],n[h],n[m],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(CI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):v$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new x$;const m=s<<2|a>>4;if(r.push(m),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const y=c<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class x$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const w$=function(t){const e=CI(t);return AI.encodeByteArray(e,!0)},Eh=function(t){return w$(t).replace(/\./g,"")},RI=function(t){try{return AI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E$=()=>_$().__FIREBASE_DEFAULTS__,S$=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},b$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&RI(t[1]);return e&&JSON.parse(e)},jf=()=>{try{return E$()||S$()||b$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},PI=t=>{var e,n;return(n=(e=jf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},NI=t=>{const e=PI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},DI=()=>{var t;return(t=jf())===null||t===void 0?void 0:t.config},jI=t=>{var e;return(e=jf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k${constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Eh(JSON.stringify(n)),Eh(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function T$(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function I$(){var t;const e=(t=jf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function C$(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function A$(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function R$(){const t=Ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function P$(){try{return typeof indexedDB=="object"}catch{return!1}}function N$(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$="FirebaseError";class zr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=D$,Object.setPrototypeOf(this,zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qc.prototype.create)}}class qc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?j$(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new zr(i,a,r)}}function j$(t,e){return t.replace(O$,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const O$=/\{\$([^}]+)}/g;function M$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(TE(s)&&TE(o)){if(!Sh(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function TE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function L$(t,e){const n=new F$(t,e);return n.subscribe.bind(n)}class F${constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");$$(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=$p),i.error===void 0&&(i.error=$p),i.complete===void 0&&(i.complete=$p);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $$(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function $p(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t){return t&&t._delegate?t._delegate:t}class ts{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z$=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new k$;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(V$(e))try{this.getOrInitializeService({instanceIdentifier:Ts})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ts){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ts){return this.instances.has(e)}getOptions(e=Ts){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:B$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ts){return this.component?this.component.multipleInstances?e:Ts:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function B$(t){return t===Ts?void 0:t}function V$(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new z$(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const W$={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},H$=Se.INFO,q$={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},G$=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=q$[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ox{constructor(e){this.name=e,this._logLevel=H$,this._logHandler=G$,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?W$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const K$=(t,e)=>e.some(n=>t instanceof n);let IE,CE;function X$(){return IE||(IE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Q$(){return CE||(CE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const MI=new WeakMap,U0=new WeakMap,LI=new WeakMap,zp=new WeakMap,ax=new WeakMap;function Y$(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ki(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&MI.set(n,t)}).catch(()=>{}),ax.set(e,t),e}function J$(t){if(U0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});U0.set(t,e)}let W0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return U0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||LI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ki(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Z$(t){W0=t(W0)}function e9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Bp(this),e,...n);return LI.set(r,e.sort?e.sort():[e]),Ki(r)}:Q$().includes(t)?function(...e){return t.apply(Bp(this),e),Ki(MI.get(this))}:function(...e){return Ki(t.apply(Bp(this),e))}}function t9(t){return typeof t=="function"?e9(t):(t instanceof IDBTransaction&&J$(t),K$(t,X$())?new Proxy(t,W0):t)}function Ki(t){if(t instanceof IDBRequest)return Y$(t);if(zp.has(t))return zp.get(t);const e=t9(t);return e!==t&&(zp.set(t,e),ax.set(e,t)),e}const Bp=t=>ax.get(t);function n9(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ki(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ki(o.result),l.oldVersion,l.newVersion,Ki(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const r9=["get","getKey","getAll","getAllKeys","count"],i9=["put","add","delete","clear"],Vp=new Map;function AE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vp.get(e))return Vp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=i9.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||r9.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Vp.set(e,s),s}Z$(t=>({...t,get:(e,n,r)=>AE(e,n)||t.get(e,n,r),has:(e,n)=>!!AE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(o9(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function o9(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const H0="@firebase/app",RE="0.9.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=new ox("@firebase/app"),a9="@firebase/app-compat",l9="@firebase/analytics-compat",c9="@firebase/analytics",u9="@firebase/app-check-compat",d9="@firebase/app-check",h9="@firebase/auth",f9="@firebase/auth-compat",m9="@firebase/database",p9="@firebase/database-compat",g9="@firebase/functions",y9="@firebase/functions-compat",v9="@firebase/installations",x9="@firebase/installations-compat",w9="@firebase/messaging",_9="@firebase/messaging-compat",E9="@firebase/performance",S9="@firebase/performance-compat",b9="@firebase/remote-config",k9="@firebase/remote-config-compat",T9="@firebase/storage",I9="@firebase/storage-compat",C9="@firebase/firestore",A9="@firebase/firestore-compat",R9="firebase",P9="10.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="[DEFAULT]",N9={[H0]:"fire-core",[a9]:"fire-core-compat",[c9]:"fire-analytics",[l9]:"fire-analytics-compat",[d9]:"fire-app-check",[u9]:"fire-app-check-compat",[h9]:"fire-auth",[f9]:"fire-auth-compat",[m9]:"fire-rtdb",[p9]:"fire-rtdb-compat",[g9]:"fire-fn",[y9]:"fire-fn-compat",[v9]:"fire-iid",[x9]:"fire-iid-compat",[w9]:"fire-fcm",[_9]:"fire-fcm-compat",[E9]:"fire-perf",[S9]:"fire-perf-compat",[b9]:"fire-rc",[k9]:"fire-rc-compat",[T9]:"fire-gcs",[I9]:"fire-gcs-compat",[C9]:"fire-fst",[A9]:"fire-fst-compat","fire-js":"fire-js",[R9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new Map,G0=new Map;function D9(t,e){try{t.container.addComponent(e)}catch(n){Js.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zs(t){const e=t.name;if(G0.has(e))return Js.debug(`There were multiple attempts to register component ${e}.`),!1;G0.set(e,t);for(const n of bh.values())D9(n,t);return!0}function Of(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Xi=new qc("app","Firebase",j9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=P9;function FI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:q0,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Xi.create("bad-app-name",{appName:String(i)});if(n||(n=DI()),!n)throw Xi.create("no-options");const s=bh.get(i);if(s){if(Sh(n,s.options)&&Sh(r,s.config))return s;throw Xi.create("duplicate-app",{appName:i})}const o=new U$(i);for(const l of G0.values())o.addComponent(l);const a=new O9(n,r,o);return bh.set(i,a),a}function lx(t=q0){const e=bh.get(t);if(!e&&t===q0&&DI())return FI();if(!e)throw Xi.create("no-app",{appName:t});return e}function Ar(t,e,n){var r;let i=(r=N9[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Js.warn(a.join(" "));return}Zs(new ts(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9="firebase-heartbeat-database",L9=1,fc="firebase-heartbeat-store";let Up=null;function $I(){return Up||(Up=n9(M9,L9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(fc)}}}).catch(t=>{throw Xi.create("idb-open",{originalErrorMessage:t.message})})),Up}async function F9(t){try{return await(await $I()).transaction(fc).objectStore(fc).get(zI(t))}catch(e){if(e instanceof zr)Js.warn(e.message);else{const n=Xi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Js.warn(n.message)}}}async function PE(t,e){try{const r=(await $I()).transaction(fc,"readwrite");await r.objectStore(fc).put(e,zI(t)),await r.done}catch(n){if(n instanceof zr)Js.warn(n.message);else{const r=Xi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Js.warn(r.message)}}}function zI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9=1024,z9=30*24*60*60*1e3;class B9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new U9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=NE();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=z9}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=NE(),{heartbeatsToSend:n,unsentEntries:r}=V9(this._heartbeatsCache.heartbeats),i=Eh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function NE(){return new Date().toISOString().substring(0,10)}function V9(t,e=$9){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),DE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),DE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class U9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return P$()?N$().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await F9(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return PE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return PE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function DE(t){return Eh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W9(t){Zs(new ts("platform-logger",e=>new s9(e),"PRIVATE")),Zs(new ts("heartbeat",e=>new B9(e),"PRIVATE")),Ar(H0,RE,t),Ar(H0,RE,"esm2017"),Ar("fire-js","")}W9("");function cx(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function BI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const H9=BI,VI=new qc("auth","Firebase",BI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=new ox("@firebase/auth");function q9(t,...e){kh.logLevel<=Se.WARN&&kh.warn(`Auth (${go}): ${t}`,...e)}function Sd(t,...e){kh.logLevel<=Se.ERROR&&kh.error(`Auth (${go}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(t,...e){throw ux(t,...e)}function Rr(t,...e){return ux(t,...e)}function UI(t,e,n){const r=Object.assign(Object.assign({},H9()),{[e]:n});return new qc("auth","Firebase",r).create(e,{appName:t.name})}function G9(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Or(t,"argument-error"),UI(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ux(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return VI.create(t,...e)}function ue(t,e,...n){if(!t)throw ux(e,...n)}function Qr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Sd(e),new Error(e)}function li(t,e){t||Qr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function K9(){return jE()==="http:"||jE()==="https:"}function jE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(K9()||C$()||"connection"in navigator)?navigator.onLine:!0}function Q9(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n){this.shortDelay=e,this.longDelay=n,li(n>e,"Short delay should be less than long delay!"),this.isMobile=T$()||A$()}get(){return X9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(t,e){li(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J9=new Kc(3e4,6e4);function HI(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Xc(t,e,n,r,i={}){return qI(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Gc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),WI.fetch()(GI(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function qI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Y9),e);try{const i=new ez(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Hu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Hu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Hu(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw UI(t,d,c);Or(t,d)}}catch(i){if(i instanceof zr)throw i;Or(t,"network-request-failed",{message:String(i)})}}async function Z9(t,e,n,r,i={}){const s=await Xc(t,e,n,r,i);return"mfaPendingCredential"in s&&Or(t,"multi-factor-auth-required",{_serverResponse:s}),s}function GI(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?dx(t.config,i):`${t.config.apiScheme}://${i}`}class ez{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Rr(this.auth,"network-request-failed")),J9.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Rr(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tz(t,e){return Xc(t,"POST","/v1/accounts:delete",e)}async function nz(t,e){return Xc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rz(t,e=!1){const n=yt(t),r=await n.getIdToken(e),i=hx(r);ue(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Pl(Wp(i.auth_time)),issuedAtTime:Pl(Wp(i.iat)),expirationTime:Pl(Wp(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Wp(t){return Number(t)*1e3}function hx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Sd("JWT malformed, contained fewer than 3 sections"),null;try{const i=RI(n);return i?JSON.parse(i):(Sd("Failed to decode base64 JWT payload"),null)}catch(i){return Sd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function iz(t){const e=hx(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof zr&&sz(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function sz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pl(this.lastLoginAt),this.creationTime=Pl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Th(t){var e;const n=t.auth,r=await t.getIdToken(),i=await mc(t,nz(n,{idToken:r}));ue(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?cz(s.providerUserInfo):[],a=lz(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new KI(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function az(t){const e=yt(t);await Th(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lz(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function cz(t){return t.map(e=>{var{providerId:n}=e,r=cx(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uz(t,e){const n=await qI(t,{},async()=>{const r=Gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=GI(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",WI.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iz(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ue(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await uz(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new pc;return r&&(ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ue(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ue(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pc,this.toJSON())}_performRefresh(){return Qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class $s{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=cx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new oz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new KI(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await mc(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return rz(this,e)}reload(){return az(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new $s(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Th(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await mc(this,tz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:E,isAnonymous:S,providerData:T,stsTokenManager:k}=n;ue(w&&k,e,"internal-error");const b=pc.fromJSON(this.name,k);ue(typeof w=="string",e,"internal-error"),Ei(h,e.name),Ei(m,e.name),ue(typeof E=="boolean",e,"internal-error"),ue(typeof S=="boolean",e,"internal-error"),Ei(p,e.name),Ei(y,e.name),Ei(x,e.name),Ei(_,e.name),Ei(v,e.name),Ei(g,e.name);const P=new $s({uid:w,auth:e,email:m,emailVerified:E,displayName:h,isAnonymous:S,photoURL:y,phoneNumber:p,tenantId:x,stsTokenManager:b,createdAt:v,lastLoginAt:g});return T&&Array.isArray(T)&&(P.providerData=T.map(I=>Object.assign({},I))),_&&(P._redirectEventId=_),P}static async _fromIdTokenResponse(e,n,r=!1){const i=new pc;i.updateFromServerResponse(n);const s=new $s({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Th(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=new Map;function Yr(t){li(t instanceof Function,"Expected a class definition");let e=OE.get(t);return e?(li(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,OE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}XI.type="NONE";const ME=XI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(t,e,n){return`firebase:${t}:${e}:${n}`}class ea{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=bd(this.userKey,i.apiKey,s),this.fullPersistenceKey=bd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$s._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ea(Yr(ME),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Yr(ME);const o=bd(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=$s._fromJSON(e,d);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ea(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new ea(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eC(e))return"Blackberry";if(tC(e))return"Webos";if(fx(e))return"Safari";if((e.includes("chrome/")||YI(e))&&!e.includes("edge/"))return"Chrome";if(ZI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function QI(t=Ht()){return/firefox\//i.test(t)}function fx(t=Ht()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YI(t=Ht()){return/crios\//i.test(t)}function JI(t=Ht()){return/iemobile/i.test(t)}function ZI(t=Ht()){return/android/i.test(t)}function eC(t=Ht()){return/blackberry/i.test(t)}function tC(t=Ht()){return/webos/i.test(t)}function Mf(t=Ht()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dz(t=Ht()){var e;return Mf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function hz(){return R$()&&document.documentMode===10}function nC(t=Ht()){return Mf(t)||ZI(t)||tC(t)||eC(t)||/windows phone/i.test(t)||JI(t)}function fz(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(t,e=[]){let n;switch(t){case"Browser":n=LE(Ht());break;case"Worker":n=`${LE(Ht())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${go}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pz(t,e={}){return Xc(t,"GET","/v2/passwordPolicy",HI(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gz=6;class yz{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:gz,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new FE(this),this.idTokenSubscription=new FE(this),this.beforeStateQueue=new mz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ea.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Th(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Q9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?yt(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Yr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pz(this),n=new yz(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Yr(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await ea.create(this,[Yr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&q9(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Lf(t){return yt(t)}class FE{constructor(e){this.auth=e,this.observer=null,this.addObserver=L$(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xz(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function wz(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Rr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",xz().appendChild(r)})}function _z(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ez(t,e){const n=Of(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Sh(s,e??{}))return i;Or(i,"already-initialized")}return n.initialize({options:e})}function Sz(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Yr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function bz(t,e,n){const r=Lf(t);ue(r._canInitEmulator,r,"emulator-config-failed"),ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=iC(e),{host:o,port:a}=kz(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Tz()}function iC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function kz(t){const e=iC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:$E(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:$E(o)}}}function $E(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Tz(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qr("not implemented")}_getIdTokenResponse(e){return Qr("not implemented")}_linkToIdToken(e,n){return Qr("not implemented")}_getReauthenticationResolver(e){return Qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(t,e){return Z9(t,"POST","/v1/accounts:signInWithIdp",HI(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iz="http://localhost";class eo extends sC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Or("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=cx(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new eo(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ta(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ta(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ta(e,n)}buildRequest(){const e={requestUri:Iz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Gc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends mx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends Qc{constructor(){super("facebook.com")}static credential(e){return eo._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ai.credential(e.oauthAccessToken)}catch{return null}}}Ai.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ai.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends Qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return eo._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return wr.credential(n,r)}catch{return null}}}wr.GOOGLE_SIGN_IN_METHOD="google.com";wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends Qc{constructor(){super("github.com")}static credential(e){return eo._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ri.credential(e.oauthAccessToken)}catch{return null}}}Ri.GITHUB_SIGN_IN_METHOD="github.com";Ri.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends Qc{constructor(){super("twitter.com")}static credential(e,n){return eo._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Pi.credential(n,r)}catch{return null}}}Pi.TWITTER_SIGN_IN_METHOD="twitter.com";Pi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await $s._fromIdTokenResponse(e,r,i),o=zE(r);return new _a({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=zE(r);return new _a({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function zE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih extends zr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ih.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ih(e,n,r,i)}}function oC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ih._fromErrorAndOperation(t,s,e,r):s})}async function Cz(t,e,n=!1){const r=await mc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return _a._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Az(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await mc(t,oC(r,i,e,t),n);ue(s.idToken,r,"internal-error");const o=hx(s.idToken);ue(o,r,"internal-error");const{sub:a}=o;return ue(t.uid===a,r,"user-mismatch"),_a._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Or(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rz(t,e,n=!1){const r="signIn",i=await oC(t,r,e),s=await _a._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function Pz(t,e,n,r){return yt(t).onIdTokenChanged(e,n,r)}function Nz(t,e,n){return yt(t).beforeAuthStateChanged(e,n)}function Dz(t,e,n,r){return yt(t).onAuthStateChanged(e,n,r)}function aC(t){return yt(t).signOut()}const Ch="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ch,"1"),this.storage.removeItem(Ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jz(){const t=Ht();return fx(t)||Mf(t)}const Oz=1e3,Mz=10;class cC extends lC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=jz()&&fz(),this.fallbackToPolling=nC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);hz()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Mz):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Oz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}cC.type="LOCAL";const Lz=cC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC extends lC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}uC.type="SESSION";const dC=uC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fz(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Ff(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await Fz(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ff.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=px("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const m=h;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(){return window}function zz(t){Pr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(){return typeof Pr().WorkerGlobalScope<"u"&&typeof Pr().importScripts=="function"}async function Bz(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Vz(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Uz(){return hC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="firebaseLocalStorageDb",Wz=1,Ah="firebaseLocalStorage",mC="fbase_key";class Yc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $f(t,e){return t.transaction([Ah],e?"readwrite":"readonly").objectStore(Ah)}function Hz(){const t=indexedDB.deleteDatabase(fC);return new Yc(t).toPromise()}function X0(){const t=indexedDB.open(fC,Wz);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ah,{keyPath:mC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ah)?e(r):(r.close(),await Hz(),e(await X0()))})})}async function BE(t,e,n){const r=$f(t,!0).put({[mC]:e,value:n});return new Yc(r).toPromise()}async function qz(t,e){const n=$f(t,!1).get(e),r=await new Yc(n).toPromise();return r===void 0?null:r.value}function VE(t,e){const n=$f(t,!0).delete(e);return new Yc(n).toPromise()}const Gz=800,Kz=3;class pC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await X0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Kz)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ff._getInstance(Uz()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Bz(),!this.activeServiceWorker)return;this.sender=new $z(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Vz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await X0();return await BE(e,Ch,"1"),await VE(e,Ch),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>BE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>qz(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>VE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=$f(i,!1).getAll();return new Yc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Gz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pC.type="LOCAL";const Xz=pC;new Kc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(t,e){return e?Yr(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx extends sC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ta(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ta(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ta(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Qz(t){return Rz(t.auth,new gx(t),t.bypassAuthState)}function Yz(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),Az(n,new gx(t),t.bypassAuthState)}async function Jz(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),Cz(n,new gx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Qz;case"linkViaPopup":case"linkViaRedirect":return Jz;case"reauthViaPopup":case"reauthViaRedirect":return Yz;default:Or(this.auth,"internal-error")}}resolve(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zz=new Kc(2e3,1e4);async function e8(t,e,n){const r=Lf(t);G9(t,e,mx);const i=gC(r,n);return new Ns(r,"signInViaPopup",e,i).executeNotNull()}class Ns extends yC{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ns.currentPopupAction&&Ns.currentPopupAction.cancel(),Ns.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){li(this.filter.length===1,"Popup operations only handle one event");const e=px();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ns.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Zz.get())};e()}}Ns.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8="pendingRedirect",kd=new Map;class n8 extends yC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=kd.get(this.auth._key());if(!e){try{const r=await r8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}kd.set(this.auth._key(),e)}return this.bypassAuthState||kd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function r8(t,e){const n=o8(e),r=s8(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function i8(t,e){kd.set(t._key(),e)}function s8(t){return Yr(t._redirectPersistence)}function o8(t){return bd(t8,t.config.apiKey,t.name)}async function a8(t,e,n=!1){const r=Lf(t),i=gC(r,e),o=await new n8(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8=10*60*1e3;class c8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!u8(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!vC(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Rr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=l8&&this.cachedEventUids.clear(),this.cachedEventUids.has(UE(e))}saveEventToCache(e){this.cachedEventUids.add(UE(e)),this.lastProcessedEventTime=Date.now()}}function UE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function vC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function u8(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d8(t,e={}){return Xc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,f8=/^https?/;async function m8(t){if(t.config.emulator)return;const{authorizedDomains:e}=await d8(t);for(const n of e)try{if(p8(n))return}catch{}Or(t,"unauthorized-domain")}function p8(t){const e=K0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!f8.test(n))return!1;if(h8.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g8=new Kc(3e4,6e4);function WE(){const t=Pr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function y8(t){return new Promise((e,n)=>{var r,i,s;function o(){WE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{WE(),n(Rr(t,"network-request-failed"))},timeout:g8.get()})}if(!((i=(r=Pr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Pr().gapi)===null||s===void 0)&&s.load)o();else{const a=_z("iframefcb");return Pr()[a]=()=>{gapi.load?o():n(Rr(t,"network-request-failed"))},wz(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Td=null,e})}let Td=null;function v8(t){return Td=Td||y8(t),Td}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x8=new Kc(5e3,15e3),w8="__/auth/iframe",_8="emulator/auth/iframe",E8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},S8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function b8(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?dx(e,_8):`https://${t.config.authDomain}/${w8}`,r={apiKey:e.apiKey,appName:t.name,v:go},i=S8.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Gc(r).slice(1)}`}async function k8(t){const e=await v8(t),n=Pr().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:b8(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:E8,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Rr(t,"network-request-failed"),a=Pr().setTimeout(()=>{s(o)},x8.get());function l(){Pr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},I8=500,C8=600,A8="_blank",R8="http://localhost";class HE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function P8(t,e,n,r=I8,i=C8){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},T8),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Ht().toLowerCase();n&&(a=YI(c)?A8:n),QI(c)&&(e=e||R8,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[p,y])=>`${m}${p}=${y},`,"");if(dz(c)&&a!=="_self")return N8(e||"",a),new HE(null);const h=window.open(e||"",a,d);ue(h,t,"popup-blocked");try{h.focus()}catch{}return new HE(h)}function N8(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D8="__/auth/handler",j8="emulator/auth/handler",O8=encodeURIComponent("fac");async function qE(t,e,n,r,i,s){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:go,eventId:i};if(e instanceof mx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",M$(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))o[d]=h}if(e instanceof Qc){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${O8}=${encodeURIComponent(l)}`:"";return`${M8(t)}?${Gc(a).slice(1)}${c}`}function M8({config:t}){return t.emulator?dx(t,j8):`https://${t.authDomain}/${D8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="webStorageSupport";class L8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dC,this._completeRedirectFn=a8,this._overrideRedirectResult=i8}async _openPopup(e,n,r,i){var s;li((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await qE(e,n,r,K0(),i);return P8(e,o,px())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await qE(e,n,r,K0(),i);return zz(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(li(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await k8(e),r=new c8(e);return n.register("authEvent",i=>(ue(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hp,{type:Hp},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Hp];o!==void 0&&n(!!o),Or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=m8(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return nC()||fx()||Mf()}}const F8=L8;var GE="@firebase/auth",KE="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z8(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function B8(t){Zs(new ts("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rC(t)},c=new vz(r,i,s,l);return Sz(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Zs(new ts("auth-internal",e=>{const n=Lf(e.getProvider("auth").getImmediate());return(r=>new $8(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ar(GE,KE,z8(t)),Ar(GE,KE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8=5*60,U8=jI("authIdTokenMaxAge")||V8;let XE=null;const W8=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>U8)return;const i=n==null?void 0:n.token;XE!==i&&(XE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function H8(t=lx()){const e=Of(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Ez(t,{popupRedirectResolver:F8,persistence:[Xz,Lz,dC]}),r=jI("authTokenSyncURL");if(r){const s=W8(r);Nz(n,s,()=>s(n.currentUser)),Pz(n,o=>s(o))}const i=PI("auth");return i&&bz(n,`http://${i}`),n}B8("Browser");var q8="firebase",G8="10.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ar(q8,G8,"app");var K8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},B,yx=yx||{},le=K8||self;function zf(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Jc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function X8(t){return Object.prototype.hasOwnProperty.call(t,qp)&&t[qp]||(t[qp]=++Q8)}var qp="closure_uid_"+(1e9*Math.random()>>>0),Q8=0;function Y8(t,e,n){return t.call.apply(t.bind,arguments)}function J8(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Bt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Bt=Y8:Bt=J8,Bt.apply(null,arguments)}function qu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function bt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function ps(){this.s=this.s,this.o=this.o}var Z8=0;ps.prototype.s=!1;ps.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Z8!=0)&&X8(this)};ps.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const xC=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function vx(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function QE(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(zf(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Vt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Vt.prototype.h=function(){this.defaultPrevented=!0};var eB=function(){if(!le.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{le.addEventListener("test",()=>{},e),le.removeEventListener("test",()=>{},e)}catch{}return t}();function gc(t){return/^[\s\xa0]*$/.test(t)}function Bf(){var t=le.navigator;return t&&(t=t.userAgent)?t:""}function _r(t){return Bf().indexOf(t)!=-1}function xx(t){return xx[" "](t),t}xx[" "]=function(){};function tB(t,e){var n=GB;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var nB=_r("Opera"),Ea=_r("Trident")||_r("MSIE"),wC=_r("Edge"),Q0=wC||Ea,_C=_r("Gecko")&&!(Bf().toLowerCase().indexOf("webkit")!=-1&&!_r("Edge"))&&!(_r("Trident")||_r("MSIE"))&&!_r("Edge"),rB=Bf().toLowerCase().indexOf("webkit")!=-1&&!_r("Edge");function EC(){var t=le.document;return t?t.documentMode:void 0}var Y0;e:{var Gp="",Kp=function(){var t=Bf();if(_C)return/rv:([^\);]+)(\)|;)/.exec(t);if(wC)return/Edge\/([\d\.]+)/.exec(t);if(Ea)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(rB)return/WebKit\/(\S+)/.exec(t);if(nB)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Kp&&(Gp=Kp?Kp[1]:""),Ea){var Xp=EC();if(Xp!=null&&Xp>parseFloat(Gp)){Y0=String(Xp);break e}}Y0=Gp}var J0;if(le.document&&Ea){var YE=EC();J0=YE||parseInt(Y0,10)||void 0}else J0=void 0;var iB=J0;function yc(t,e){if(Vt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(_C){e:{try{xx(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:sB[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&yc.$.h.call(this)}}bt(yc,Vt);var sB={2:"touch",3:"pen",4:"mouse"};yc.prototype.h=function(){yc.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Zc="closure_listenable_"+(1e6*Math.random()|0),oB=0;function aB(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++oB,this.fa=this.ia=!1}function Vf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function wx(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function lB(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function SC(t){const e={};for(const n in t)e[n]=t[n];return e}const JE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bC(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<JE.length;s++)n=JE[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Uf(t){this.src=t,this.g={},this.h=0}Uf.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=ey(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new aB(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Z0(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=xC(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Vf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function ey(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var _x="closure_lm_"+(1e6*Math.random()|0),Qp={};function kC(t,e,n,r,i){if(r&&r.once)return IC(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)kC(t,e[s],n,r,i);return null}return n=bx(n),t&&t[Zc]?t.O(e,n,Jc(r)?!!r.capture:!!r,i):TC(t,e,n,!1,r,i)}function TC(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Jc(i)?!!i.capture:!!i,a=Sx(t);if(a||(t[_x]=a=new Uf(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=cB(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)eB||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(AC(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function cB(){function t(n){return e.call(t.src,t.listener,n)}const e=uB;return t}function IC(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)IC(t,e[s],n,r,i);return null}return n=bx(n),t&&t[Zc]?t.P(e,n,Jc(r)?!!r.capture:!!r,i):TC(t,e,n,!0,r,i)}function CC(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)CC(t,e[s],n,r,i);else r=Jc(r)?!!r.capture:!!r,n=bx(n),t&&t[Zc]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=ey(s,n,r,i),-1<n&&(Vf(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Sx(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ey(e,n,r,i)),(n=-1<t?e[t]:null)&&Ex(n))}function Ex(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Zc])Z0(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(AC(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Sx(e))?(Z0(n,t),n.h==0&&(n.src=null,e[_x]=null)):Vf(t)}}}function AC(t){return t in Qp?Qp[t]:Qp[t]="on"+t}function uB(t,e){if(t.fa)t=!0;else{e=new yc(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Ex(t),t=n.call(r,e)}return t}function Sx(t){return t=t[_x],t instanceof Uf?t:null}var Yp="__closure_events_fn_"+(1e9*Math.random()>>>0);function bx(t){return typeof t=="function"?t:(t[Yp]||(t[Yp]=function(e){return t.handleEvent(e)}),t[Yp])}function St(){ps.call(this),this.i=new Uf(this),this.S=this,this.J=null}bt(St,ps);St.prototype[Zc]=!0;St.prototype.removeEventListener=function(t,e,n,r){CC(this,t,e,n,r)};function Pt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Vt(e,t);else if(e instanceof Vt)e.target=e.target||t;else{var i=e;e=new Vt(r,t),bC(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Gu(o,r,!0,e)&&i}if(o=e.g=t,i=Gu(o,r,!0,e)&&i,i=Gu(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Gu(o,r,!1,e)&&i}St.prototype.N=function(){if(St.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Vf(n[r]);delete t.g[e],t.h--}}this.J=null};St.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};St.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Gu(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Z0(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var kx=le.JSON.stringify;class dB{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function hB(){var t=Tx;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class fB{constructor(){this.h=this.g=null}add(e,n){const r=RC.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var RC=new dB(()=>new mB,t=>t.reset());class mB{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function pB(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function gB(t){le.setTimeout(()=>{throw t},0)}let vc,xc=!1,Tx=new fB,PC=()=>{const t=le.Promise.resolve(void 0);vc=()=>{t.then(yB)}};var yB=()=>{for(var t;t=hB();){try{t.h.call(t.g)}catch(n){gB(n)}var e=RC;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}xc=!1};function Wf(t,e){St.call(this),this.h=t||1,this.g=e||le,this.j=Bt(this.qb,this),this.l=Date.now()}bt(Wf,St);B=Wf.prototype;B.ga=!1;B.T=null;B.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Pt(this,"tick"),this.ga&&(Ix(this),this.start()))}};B.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Ix(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}B.N=function(){Wf.$.N.call(this),Ix(this),delete this.g};function Cx(t,e,n){if(typeof t=="function")n&&(t=Bt(t,n));else if(t&&typeof t.handleEvent=="function")t=Bt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:le.setTimeout(t,e||0)}function NC(t){t.g=Cx(()=>{t.g=null,t.i&&(t.i=!1,NC(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class vB extends ps{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:NC(this)}N(){super.N(),this.g&&(le.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wc(t){ps.call(this),this.h=t,this.g={}}bt(wc,ps);var ZE=[];function DC(t,e,n,r){Array.isArray(n)||(n&&(ZE[0]=n.toString()),n=ZE);for(var i=0;i<n.length;i++){var s=kC(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function jC(t){wx(t.g,function(e,n){this.g.hasOwnProperty(n)&&Ex(e)},t),t.g={}}wc.prototype.N=function(){wc.$.N.call(this),jC(this)};wc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Hf(){this.g=!0}Hf.prototype.Ea=function(){this.g=!1};function xB(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var d=c[0];c=c[1];var h=d.split("_");o=2<=h.length&&h[1]=="type"?o+(d+"="+c+"&"):o+(d+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function wB(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function qo(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+EB(t,n)+(r?" "+r:"")})}function _B(t,e){t.info(function(){return"TIMEOUT: "+e})}Hf.prototype.info=function(){};function EB(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return kx(n)}catch{return e}}var yo={},eS=null;function qf(){return eS=eS||new St}yo.Ta="serverreachability";function OC(t){Vt.call(this,yo.Ta,t)}bt(OC,Vt);function _c(t){const e=qf();Pt(e,new OC(e))}yo.STAT_EVENT="statevent";function MC(t,e){Vt.call(this,yo.STAT_EVENT,t),this.stat=e}bt(MC,Vt);function Zt(t){const e=qf();Pt(e,new MC(e,t))}yo.Ua="timingevent";function LC(t,e){Vt.call(this,yo.Ua,t),this.size=e}bt(LC,Vt);function eu(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return le.setTimeout(function(){t()},e)}var Gf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},FC={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ax(){}Ax.prototype.h=null;function tS(t){return t.h||(t.h=t.i())}function $C(){}var tu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Rx(){Vt.call(this,"d")}bt(Rx,Vt);function Px(){Vt.call(this,"c")}bt(Px,Vt);var ty;function Kf(){}bt(Kf,Ax);Kf.prototype.g=function(){return new XMLHttpRequest};Kf.prototype.i=function(){return{}};ty=new Kf;function nu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new wc(this),this.P=SB,t=Q0?125:void 0,this.V=new Wf(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new zC}function zC(){this.i=null,this.g="",this.h=!1}var SB=45e3,ny={},Rh={};B=nu.prototype;B.setTimeout=function(t){this.P=t};function ry(t,e,n){t.L=1,t.v=Qf(ci(e)),t.s=n,t.S=!0,BC(t,null)}function BC(t,e){t.G=Date.now(),ru(t),t.A=ci(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),XC(n.i,"t",r),t.C=0,n=t.l.J,t.h=new zC,t.g=gA(t.l,n?e:null,!t.s),0<t.O&&(t.M=new vB(Bt(t.Pa,t,t.g),t.O)),DC(t.U,t.g,"readystatechange",t.nb),e=t.I?SC(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),_c(),xB(t.j,t.u,t.A,t.m,t.W,t.s)}B.nb=function(t){t=t.target;const e=this.M;e&&br(t)==3?e.l():this.Pa(t)};B.Pa=function(t){try{if(t==this.g)e:{const d=br(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>d)&&(d!=3||Q0||this.g&&(this.h.h||this.g.ja()||sS(this.g)))){this.J||d!=4||e==7||(e==8||0>=h?_c(3):_c(2)),Xf(this);var n=this.g.da();this.ca=n;t:if(VC(this)){var r=sS(this.g);t="";var i=r.length,s=br(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ds(this),Nl(this);var o="";break t}this.h.i=new le.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,wB(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!gc(a)){var c=a;break t}}c=null}if(n=c)qo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,iy(this,n);else{this.i=!1,this.o=3,Zt(12),Ds(this),Nl(this);break e}}this.S?(UC(this,d,o),Q0&&this.i&&d==3&&(DC(this.U,this.V,"tick",this.mb),this.V.start())):(qo(this.j,this.m,o,null),iy(this,o)),d==4&&Ds(this),this.i&&!this.J&&(d==4?hA(this.l,this):(this.i=!1,ru(this)))}else WB(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Zt(12)):(this.o=0,Zt(13)),Ds(this),Nl(this)}}}catch{}finally{}};function VC(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function UC(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=bB(t,n),i==Rh){e==4&&(t.o=4,Zt(14),r=!1),qo(t.j,t.m,null,"[Incomplete Response]");break}else if(i==ny){t.o=4,Zt(15),qo(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else qo(t.j,t.m,i,null),iy(t,i);VC(t)&&i!=Rh&&i!=ny&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Zt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Lx(e),e.M=!0,Zt(11))):(qo(t.j,t.m,n,"[Invalid Chunked Response]"),Ds(t),Nl(t))}B.mb=function(){if(this.g){var t=br(this.g),e=this.g.ja();this.C<e.length&&(Xf(this),UC(this,t,e),this.i&&t!=4&&ru(this))}};function bB(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Rh:(n=Number(e.substring(n,r)),isNaN(n)?ny:(r+=1,r+n>e.length?Rh:(e=e.slice(r,r+n),t.C=r+n,e)))}B.cancel=function(){this.J=!0,Ds(this)};function ru(t){t.Y=Date.now()+t.P,WC(t,t.P)}function WC(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=eu(Bt(t.lb,t),e)}function Xf(t){t.B&&(le.clearTimeout(t.B),t.B=null)}B.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(_B(this.j,this.A),this.L!=2&&(_c(),Zt(17)),Ds(this),this.o=2,Nl(this)):WC(this,this.Y-t)};function Nl(t){t.l.H==0||t.J||hA(t.l,t)}function Ds(t){Xf(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Ix(t.V),jC(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function iy(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||sy(n.i,t))){if(!t.K&&sy(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Dh(n),em(n);else break e;Mx(n),Zt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=eu(Bt(n.ib,n),6e3));if(1>=JC(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else js(n,11)}else if((t.K||n.g==t)&&Dh(n),!gc(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const d=c[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const m=c[5];m!=null&&typeof m=="number"&&0<m&&(r=1.5*m,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const p=t.g;if(p){const y=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var s=r.i;s.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Nx(s,s.h),s.h=null))}if(r.F){const x=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;x&&(r.Da=x,Me(r.I,r.F,x))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=pA(r,r.J?r.pa:null,r.Y),o.K){ZC(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Xf(a),ru(a)),r.g=o}else uA(r);0<n.j.length&&tm(n)}else c[0]!="stop"&&c[0]!="close"||js(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?js(n,7):Ox(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}_c(4)}catch{}}function kB(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(zf(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function TB(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(zf(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function HC(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(zf(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=TB(t),r=kB(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var qC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function IB(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function zs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof zs){this.h=t.h,Ph(this,t.j),this.s=t.s,this.g=t.g,Nh(this,t.m),this.l=t.l;var e=t.i,n=new Ec;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),nS(this,n),this.o=t.o}else t&&(e=String(t).match(qC))?(this.h=!1,Ph(this,e[1]||"",!0),this.s=gl(e[2]||""),this.g=gl(e[3]||"",!0),Nh(this,e[4]),this.l=gl(e[5]||"",!0),nS(this,e[6]||"",!0),this.o=gl(e[7]||"")):(this.h=!1,this.i=new Ec(null,this.h))}zs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(yl(e,rS,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(yl(e,rS,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(yl(n,n.charAt(0)=="/"?RB:AB,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",yl(n,NB)),t.join("")};function ci(t){return new zs(t)}function Ph(t,e,n){t.j=n?gl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Nh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function nS(t,e,n){e instanceof Ec?(t.i=e,DB(t.i,t.h)):(n||(e=yl(e,PB)),t.i=new Ec(e,t.h))}function Me(t,e,n){t.i.set(e,n)}function Qf(t){return Me(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function gl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function yl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,CB),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function CB(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var rS=/[#\/\?@]/g,AB=/[#\?:]/g,RB=/[#\?]/g,PB=/[#\?@]/g,NB=/#/g;function Ec(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function gs(t){t.g||(t.g=new Map,t.h=0,t.i&&IB(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}B=Ec.prototype;B.add=function(t,e){gs(this),this.i=null,t=$a(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function GC(t,e){gs(t),e=$a(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function KC(t,e){return gs(t),e=$a(t,e),t.g.has(e)}B.forEach=function(t,e){gs(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};B.ta=function(){gs(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};B.Z=function(t){gs(this);let e=[];if(typeof t=="string")KC(this,t)&&(e=e.concat(this.g.get($a(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};B.set=function(t,e){return gs(this),this.i=null,t=$a(this,t),KC(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};B.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function XC(t,e,n){GC(t,e),0<n.length&&(t.i=null,t.g.set($a(t,e),vx(n)),t.h+=n.length)}B.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function $a(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function DB(t,e){e&&!t.j&&(gs(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(GC(this,r),XC(this,i,n))},t)),t.j=e}var jB=class{constructor(t,e){this.g=t,this.map=e}};function QC(t){this.l=t||OB,le.PerformanceNavigationTiming?(t=le.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(le.g&&le.g.Ka&&le.g.Ka()&&le.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var OB=10;function YC(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function JC(t){return t.h?1:t.g?t.g.size:0}function sy(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Nx(t,e){t.g?t.g.add(e):t.h=e}function ZC(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}QC.prototype.cancel=function(){if(this.i=eA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function eA(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return vx(t.i)}var MB=class{stringify(t){return le.JSON.stringify(t,void 0)}parse(t){return le.JSON.parse(t,void 0)}};function LB(){this.g=new MB}function FB(t,e,n){const r=n||"";try{HC(t,function(i,s){let o=i;Jc(i)&&(o=kx(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function $B(t,e){const n=new Hf;if(le.Image){const r=new Image;r.onload=qu(Ku,n,r,"TestLoadImage: loaded",!0,e),r.onerror=qu(Ku,n,r,"TestLoadImage: error",!1,e),r.onabort=qu(Ku,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=qu(Ku,n,r,"TestLoadImage: timeout",!1,e),le.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Ku(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Yf(t){this.l=t.fc||null,this.j=t.ob||!1}bt(Yf,Ax);Yf.prototype.g=function(){return new Jf(this.l,this.j)};Yf.prototype.i=function(t){return function(){return t}}({});function Jf(t,e){St.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Dx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bt(Jf,St);var Dx=0;B=Jf.prototype;B.open=function(t,e){if(this.readyState!=Dx)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Sc(this)};B.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||le).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};B.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,iu(this)),this.readyState=Dx};B.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Sc(this)),this.g&&(this.readyState=3,Sc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof le.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tA(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function tA(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}B.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?iu(this):Sc(this),this.readyState==3&&tA(this)}};B.Za=function(t){this.g&&(this.response=this.responseText=t,iu(this))};B.Ya=function(t){this.g&&(this.response=t,iu(this))};B.ka=function(){this.g&&iu(this)};function iu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Sc(t)}B.setRequestHeader=function(t,e){this.v.append(t,e)};B.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};B.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Sc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Jf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var zB=le.JSON.parse;function Ye(t){St.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=nA,this.L=this.M=!1}bt(Ye,St);var nA="",BB=/^https?$/i,VB=["POST","PUT"];B=Ye.prototype;B.Oa=function(t){this.M=t};B.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ty.g(),this.C=this.u?tS(this.u):tS(ty),this.g.onreadystatechange=Bt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){iS(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=le.FormData&&t instanceof le.FormData,!(0<=xC(VB,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{sA(this),0<this.B&&((this.L=UB(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Bt(this.ua,this)):this.A=Cx(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){iS(this,s)}};function UB(t){return Ea&&typeof t.timeout=="number"&&t.ontimeout!==void 0}B.ua=function(){typeof yx<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pt(this,"timeout"),this.abort(8))};function iS(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,rA(t),Zf(t)}function rA(t){t.F||(t.F=!0,Pt(t,"complete"),Pt(t,"error"))}B.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Pt(this,"complete"),Pt(this,"abort"),Zf(this))};B.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zf(this,!0)),Ye.$.N.call(this)};B.La=function(){this.s||(this.G||this.v||this.l?iA(this):this.kb())};B.kb=function(){iA(this)};function iA(t){if(t.h&&typeof yx<"u"&&(!t.C[1]||br(t)!=4||t.da()!=2)){if(t.v&&br(t)==4)Cx(t.La,0,t);else if(Pt(t,"readystatechange"),br(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(qC)[1]||null;!i&&le.self&&le.self.location&&(i=le.self.location.protocol.slice(0,-1)),r=!BB.test(i?i.toLowerCase():"")}n=r}if(n)Pt(t,"complete"),Pt(t,"success");else{t.m=6;try{var s=2<br(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",rA(t)}}finally{Zf(t)}}}}function Zf(t,e){if(t.g){sA(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Pt(t,"ready");try{n.onreadystatechange=r}catch{}}}function sA(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(le.clearTimeout(t.A),t.A=null)}B.isActive=function(){return!!this.g};function br(t){return t.g?t.g.readyState:0}B.da=function(){try{return 2<br(this)?this.g.status:-1}catch{return-1}};B.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};B.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),zB(e)}};function sS(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case nA:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function WB(t){const e={};t=(t.g&&2<=br(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(gc(t[r]))continue;var n=pB(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}lB(e,function(r){return r.join(", ")})}B.Ia=function(){return this.m};B.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function oA(t){let e="";return wx(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function jx(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=oA(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Me(t,e,n))}function al(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function aA(t){this.Ga=0,this.j=[],this.l=new Hf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=al("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=al("baseRetryDelayMs",5e3,t),this.hb=al("retryDelaySeedMs",1e4,t),this.eb=al("forwardChannelMaxRetries",2,t),this.xa=al("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new QC(t&&t.concurrentRequestLimit),this.Ja=new LB,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}B=aA.prototype;B.ra=8;B.H=1;function Ox(t){if(lA(t),t.H==3){var e=t.W++,n=ci(t.I);if(Me(n,"SID",t.K),Me(n,"RID",e),Me(n,"TYPE","terminate"),su(t,n),e=new nu(t,t.l,e),e.L=2,e.v=Qf(ci(n)),n=!1,le.navigator&&le.navigator.sendBeacon)try{n=le.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&le.Image&&(new Image().src=e.v,n=!0),n||(e.g=gA(e.l,null),e.g.ha(e.v)),e.G=Date.now(),ru(e)}mA(t)}function em(t){t.g&&(Lx(t),t.g.cancel(),t.g=null)}function lA(t){em(t),t.u&&(le.clearTimeout(t.u),t.u=null),Dh(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&le.clearTimeout(t.m),t.m=null)}function tm(t){if(!YC(t.i)&&!t.m){t.m=!0;var e=t.Na;vc||PC(),xc||(vc(),xc=!0),Tx.add(e,t),t.C=0}}function HB(t,e){return JC(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=eu(Bt(t.Na,t,e),fA(t,t.C)),t.C++,!0)}B.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new nu(this,this.l,t);let s=this.s;if(this.U&&(s?(s=SC(s),bC(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=cA(this,i,e),n=ci(this.I),Me(n,"RID",t),Me(n,"CVER",22),this.F&&Me(n,"X-HTTP-Session-Id",this.F),su(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(oA(s)))+"&"+e:this.o&&jx(n,this.o,s)),Nx(this.i,i),this.bb&&Me(n,"TYPE","init"),this.P?(Me(n,"$req",e),Me(n,"SID","null"),i.aa=!0,ry(i,n,null)):ry(i,n,e),this.H=2}}else this.H==3&&(t?oS(this,t):this.j.length==0||YC(this.i)||oS(this))};function oS(t,e){var n;e?n=e.m:n=t.W++;const r=ci(t.I);Me(r,"SID",t.K),Me(r,"RID",n),Me(r,"AID",t.V),su(t,r),t.o&&t.s&&jx(r,t.o,t.s),n=new nu(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=cA(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Nx(t.i,n),ry(n,r,e)}function su(t,e){t.na&&wx(t.na,function(n,r){Me(e,r,n)}),t.h&&HC({},function(n,r){Me(e,r,n)})}function cA(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Bt(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=i[l].g;const d=i[l].map;if(c-=s,0>c)s=Math.max(0,i[l].g-100),a=!1;else try{FB(d,o,"req"+c+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function uA(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;vc||PC(),xc||(vc(),xc=!0),Tx.add(e,t),t.A=0}}function Mx(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=eu(Bt(t.Ma,t),fA(t,t.A)),t.A++,!0)}B.Ma=function(){if(this.u=null,dA(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=eu(Bt(this.jb,this),t)}};B.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Zt(10),em(this),dA(this))};function Lx(t){t.B!=null&&(le.clearTimeout(t.B),t.B=null)}function dA(t){t.g=new nu(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=ci(t.wa);Me(e,"RID","rpc"),Me(e,"SID",t.K),Me(e,"AID",t.V),Me(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Me(e,"TO",t.qa),Me(e,"TYPE","xmlhttp"),su(t,e),t.o&&t.s&&jx(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Qf(ci(e)),n.s=null,n.S=!0,BC(n,t)}B.ib=function(){this.v!=null&&(this.v=null,em(this),Mx(this),Zt(19))};function Dh(t){t.v!=null&&(le.clearTimeout(t.v),t.v=null)}function hA(t,e){var n=null;if(t.g==e){Dh(t),Lx(t),t.g=null;var r=2}else if(sy(t.i,e))n=e.F,ZC(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=qf(),Pt(r,new LC(r,n)),tm(t)}else uA(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&HB(t,e)||r==2&&Mx(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:js(t,5);break;case 4:js(t,10);break;case 3:js(t,6);break;default:js(t,2)}}}function fA(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function js(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Bt(t.pb,t);n||(n=new zs("//www.google.com/images/cleardot.gif"),le.location&&le.location.protocol=="http"||Ph(n,"https"),Qf(n)),$B(n.toString(),r)}else Zt(2);t.H=0,t.h&&t.h.za(e),mA(t),lA(t)}B.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Zt(2)):(this.l.info("Failed to ping google.com"),Zt(1))};function mA(t){if(t.H=0,t.ma=[],t.h){const e=eA(t.i);(e.length!=0||t.j.length!=0)&&(QE(t.ma,e),QE(t.ma,t.j),t.i.i.length=0,vx(t.j),t.j.length=0),t.h.ya()}}function pA(t,e,n){var r=n instanceof zs?ci(n):new zs(n);if(r.g!="")e&&(r.g=e+"."+r.g),Nh(r,r.m);else{var i=le.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new zs(null);r&&Ph(s,r),e&&(s.g=e),i&&Nh(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Me(r,n,e),Me(r,"VER",t.ra),su(t,r),r}function gA(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Ye(new Yf({ob:!0})):new Ye(t.va),e.Oa(t.J),e}B.isActive=function(){return!!this.h&&this.h.isActive(this)};function yA(){}B=yA.prototype;B.Ba=function(){};B.Aa=function(){};B.za=function(){};B.ya=function(){};B.isActive=function(){return!0};B.Va=function(){};function jh(){if(Ea&&!(10<=Number(iB)))throw Error("Environmental error: no available transport.")}jh.prototype.g=function(t,e){return new Rn(t,e)};function Rn(t,e){St.call(this),this.g=new aA(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!gc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!gc(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new za(this)}bt(Rn,St);Rn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Zt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=pA(t,null,t.Y),tm(t)};Rn.prototype.close=function(){Ox(this.g)};Rn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=kx(t),t=n);e.j.push(new jB(e.fb++,t)),e.H==3&&tm(e)};Rn.prototype.N=function(){this.g.h=null,delete this.j,Ox(this.g),delete this.g,Rn.$.N.call(this)};function vA(t){Rx.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}bt(vA,Rx);function xA(){Px.call(this),this.status=1}bt(xA,Px);function za(t){this.g=t}bt(za,yA);za.prototype.Ba=function(){Pt(this.g,"a")};za.prototype.Aa=function(t){Pt(this.g,new vA(t))};za.prototype.za=function(t){Pt(this.g,new xA)};za.prototype.ya=function(){Pt(this.g,"b")};function qB(){this.blockSize=-1}function ur(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}bt(ur,qB);ur.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Jp(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}ur.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Jp(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Jp(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Jp(this,r),i=0;break}}this.h=i,this.i+=e};ur.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ce(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var GB={};function Fx(t){return-128<=t&&128>t?tB(t,function(e){return new Ce([e|0],0>e?-1:0)}):new Ce([t|0],0>t?-1:0)}function kr(t){if(isNaN(t)||!isFinite(t))return na;if(0>t)return Ct(kr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=oy;return new Ce(e,0)}function wA(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ct(wA(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=kr(Math.pow(e,8)),r=na,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=kr(Math.pow(e,s)),r=r.R(s).add(kr(o))):(r=r.R(n),r=r.add(kr(o)))}return r}var oy=4294967296,na=Fx(0),ay=Fx(1),aS=Fx(16777216);B=Ce.prototype;B.ea=function(){if(Bn(this))return-Ct(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:oy+r)*e,e*=oy}return t};B.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Jr(this))return"0";if(Bn(this))return"-"+Ct(this).toString(t);for(var e=kr(Math.pow(t,6)),n=this,r="";;){var i=Mh(n,e).g;n=Oh(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Jr(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};B.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Jr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Bn(t){return t.h==-1}B.X=function(t){return t=Oh(this,t),Bn(t)?-1:Jr(t)?0:1};function Ct(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ce(n,~t.h).add(ay)}B.abs=function(){return Bn(this)?Ct(this):this};B.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Ce(n,n[n.length-1]&-2147483648?-1:0)};function Oh(t,e){return t.add(Ct(e))}B.R=function(t){if(Jr(this)||Jr(t))return na;if(Bn(this))return Bn(t)?Ct(this).R(Ct(t)):Ct(Ct(this).R(t));if(Bn(t))return Ct(this.R(Ct(t)));if(0>this.X(aS)&&0>t.X(aS))return kr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,Xu(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Xu(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Xu(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Xu(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ce(n,0)};function Xu(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ll(t,e){this.g=t,this.h=e}function Mh(t,e){if(Jr(e))throw Error("division by zero");if(Jr(t))return new ll(na,na);if(Bn(t))return e=Mh(Ct(t),e),new ll(Ct(e.g),Ct(e.h));if(Bn(e))return e=Mh(t,Ct(e)),new ll(Ct(e.g),e.h);if(30<t.g.length){if(Bn(t)||Bn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=ay,r=e;0>=r.X(t);)n=lS(n),r=lS(r);var i=Io(n,1),s=Io(r,1);for(r=Io(r,2),n=Io(n,2);!Jr(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Io(r,1),n=Io(n,1)}return e=Oh(t,i.R(e)),new ll(i,e)}for(i=na;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=kr(n),o=s.R(e);Bn(o)||0<o.X(t);)n-=r,s=kr(n),o=s.R(e);Jr(s)&&(s=ay),i=i.add(s),t=Oh(t,o)}return new ll(i,t)}B.gb=function(t){return Mh(this,t).h};B.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ce(n,this.h&t.h)};B.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ce(n,this.h|t.h)};B.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ce(n,this.h^t.h)};function lS(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ce(n,t.h)}function Io(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Ce(i,t.h)}jh.prototype.createWebChannel=jh.prototype.g;Rn.prototype.send=Rn.prototype.u;Rn.prototype.open=Rn.prototype.m;Rn.prototype.close=Rn.prototype.close;Gf.NO_ERROR=0;Gf.TIMEOUT=8;Gf.HTTP_ERROR=6;FC.COMPLETE="complete";$C.EventType=tu;tu.OPEN="a";tu.CLOSE="b";tu.ERROR="c";tu.MESSAGE="d";St.prototype.listen=St.prototype.O;Ye.prototype.listenOnce=Ye.prototype.P;Ye.prototype.getLastError=Ye.prototype.Sa;Ye.prototype.getLastErrorCode=Ye.prototype.Ia;Ye.prototype.getStatus=Ye.prototype.da;Ye.prototype.getResponseJson=Ye.prototype.Wa;Ye.prototype.getResponseText=Ye.prototype.ja;Ye.prototype.send=Ye.prototype.ha;Ye.prototype.setWithCredentials=Ye.prototype.Oa;ur.prototype.digest=ur.prototype.l;ur.prototype.reset=ur.prototype.reset;ur.prototype.update=ur.prototype.j;Ce.prototype.add=Ce.prototype.add;Ce.prototype.multiply=Ce.prototype.R;Ce.prototype.modulo=Ce.prototype.gb;Ce.prototype.compare=Ce.prototype.X;Ce.prototype.toNumber=Ce.prototype.ea;Ce.prototype.toString=Ce.prototype.toString;Ce.prototype.getBits=Ce.prototype.D;Ce.fromNumber=kr;Ce.fromString=wA;var KB=function(){return new jh},XB=function(){return qf()},Zp=Gf,QB=FC,YB=yo,cS={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Qu=$C,JB=Ye,ZB=ur,ra=Ce;const uS="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ba="10.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=new ox("@firebase/firestore");function dS(){return to.logLevel}function X(t,...e){if(to.logLevel<=Se.DEBUG){const n=e.map($x);to.debug(`Firestore (${Ba}): ${t}`,...n)}}function ui(t,...e){if(to.logLevel<=Se.ERROR){const n=e.map($x);to.error(`Firestore (${Ba}): ${t}`,...n)}}function Sa(t,...e){if(to.logLevel<=Se.WARN){const n=e.map($x);to.warn(`Firestore (${Ba}): ${t}`,...n)}}function $x(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${Ba}) INTERNAL ASSERTION FAILED: `+t;throw ui(e),new Error(e)}function $e(t,e){t||oe()}function me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends zr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Lt.UNAUTHENTICATED))}shutdown(){}}class tV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class nV{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new ri;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ri,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ri)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string"),new _A(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string"),new Lt(e)}}class rV{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class iV{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new rV(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oV{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?($e(typeof n.token=="string"),this.R=n.token,new sV(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=aV(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function be(t,e){return t<e?-1:t>e?1:0}function ba(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new gt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new gt(0,0))}static max(){return new ce(new gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return bc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof bc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Le extends bc{construct(e,n,r){return new Le(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Le(n)}static emptyPath(){return new Le([])}}const lV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends bc{construct(e,n,r){return new zt(e,n,r)}static isValidIdentifier(e){return lV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new zt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new W(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new W(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new W(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new W(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(n)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Le.fromString(e))}static fromName(e){return new ee(Le.fromString(e).popFirst(5))}static empty(){return new ee(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Le(e.slice()))}}function cV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(r===1e9?new gt(n+1,0):new gt(n,r));return new ns(i,ee.empty(),e)}function uV(t){return new ns(t.readTime,t.key,-1)}class ns{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ns(ce.min(),ee.empty(),-1)}static max(){return new ns(ce.max(),ee.empty(),-1)}}function dV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ou(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==hV)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(i=>i?L.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new L((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new L((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function au(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}zx.ae=-1;function nm(t){return t==null}function Lh(t){return t===0&&1/t==-1/0}function mV(t){return typeof t=="number"&&Number.isInteger(t)&&!Lh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Va(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function SA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){this.comparator=e,this.root=n||It.EMPTY}insert(e,n){return new Ge(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,It.BLACK,null,null))}remove(e){return new Ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,It.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yu(this.root,e,this.comparator,!0)}}class Yu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class It{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??It.RED,this.left=i??It.EMPTY,this.right=s??It.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new It(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return It.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return It.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}It.EMPTY=null,It.RED=!0,It.BLACK=!1;It.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new It(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fS(this.data.getIterator())}getIteratorFrom(e){return new fS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ut(this.comparator);return n.data=e,n}}class fS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new or([])}unionWith(e){let n=new Ut(zt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new or(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ba(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new bA("Invalid base64 string: "+s):s}}(e);return new qt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const pV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(t){if($e(!!t),typeof t=="string"){let e=0;const n=pV.exec(t);if($e(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:at(t.seconds),nanos:at(t.nanos)}}function at(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function no(t){return typeof t=="string"?qt.fromBase64String(t):qt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Vx(t){const e=t.mapValue.fields.__previous_value__;return Bx(e)?Vx(e):e}function kc(t){const e=rs(t.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Tc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Tc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Tc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ro(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Bx(t)?4:yV(t)?9007199254740991:10:oe()}function Mr(t,e){if(t===e)return!0;const n=ro(t);if(n!==ro(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return kc(t).isEqual(kc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=rs(i.timestampValue),a=rs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return no(i.bytesValue).isEqual(no(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return at(i.geoPointValue.latitude)===at(s.geoPointValue.latitude)&&at(i.geoPointValue.longitude)===at(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return at(i.integerValue)===at(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=at(i.doubleValue),a=at(s.doubleValue);return o===a?Lh(o)===Lh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ba(t.arrayValue.values||[],e.arrayValue.values||[],Mr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(hS(o)!==hS(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Mr(o[l],a[l])))return!1;return!0}(t,e);default:return oe()}}function Ic(t,e){return(t.values||[]).find(n=>Mr(n,e))!==void 0}function ka(t,e){if(t===e)return 0;const n=ro(t),r=ro(e);if(n!==r)return be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return be(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=at(s.integerValue||s.doubleValue),l=at(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return mS(t.timestampValue,e.timestampValue);case 4:return mS(kc(t),kc(e));case 5:return be(t.stringValue,e.stringValue);case 6:return function(s,o){const a=no(s),l=no(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=be(a[c],l[c]);if(d!==0)return d}return be(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=be(at(s.latitude),at(o.latitude));return a!==0?a:be(at(s.longitude),at(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const d=ka(a[c],l[c]);if(d)return d}return be(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ju.mapValue&&o===Ju.mapValue)return 0;if(s===Ju.mapValue)return 1;if(o===Ju.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const m=be(l[h],d[h]);if(m!==0)return m;const p=ka(a[l[h]],c[d[h]]);if(p!==0)return p}return be(l.length,d.length)}(t.mapValue,e.mapValue);default:throw oe()}}function mS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return be(t,e);const n=rs(t),r=rs(e),i=be(n.seconds,r.seconds);return i!==0?i:be(n.nanos,r.nanos)}function Ta(t){return ly(t)}function ly(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=rs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return no(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=ly(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${ly(n.fields[o])}`;return i+"}"}(t.mapValue):oe()}function pS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function cy(t){return!!t&&"integerValue"in t}function Ux(t){return!!t&&"arrayValue"in t}function gS(t){return!!t&&"nullValue"in t}function yS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Id(t){return!!t&&"mapValue"in t}function Dl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Va(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Dl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Dl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function yV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Id(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dl(n)}setAll(e){let n=zt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Dl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Id(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Id(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Va(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Vn(Dl(this.value))}}function kA(t){const e=[];return Va(t.fields,(n,r)=>{const i=new zt([n]);if(Id(r)){const s=kA(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new or(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new $t(e,0,ce.min(),ce.min(),ce.min(),Vn.empty(),0)}static newFoundDocument(e,n,r,i){return new $t(e,1,n,ce.min(),r,i,0)}static newNoDocument(e,n){return new $t(e,2,n,ce.min(),ce.min(),Vn.empty(),0)}static newUnknownDocument(e,n){return new $t(e,3,n,ce.min(),ce.min(),Vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n){this.position=e,this.inclusive=n}}function vS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),n.key):r=ka(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function xS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n="asc"){this.field=e,this.dir=n}}function vV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{}class ct extends TA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new wV(e,n,r):n==="array-contains"?new SV(e,r):n==="in"?new bV(e,r):n==="not-in"?new kV(e,r):n==="array-contains-any"?new TV(e,r):new ct(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new _V(e,r):new EV(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ka(n,this.value)):n!==null&&ro(this.value)===ro(n)&&this.matchesComparison(ka(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class dr extends TA{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new dr(e,n)}matches(e){return IA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function IA(t){return t.op==="and"}function CA(t){return xV(t)&&IA(t)}function xV(t){for(const e of t.filters)if(e instanceof dr)return!1;return!0}function uy(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+Ta(t.value);if(CA(t))return t.filters.map(e=>uy(e)).join(",");{const e=t.filters.map(n=>uy(n)).join(",");return`${t.op}(${e})`}}function AA(t,e){return t instanceof ct?function(r,i){return i instanceof ct&&r.op===i.op&&r.field.isEqual(i.field)&&Mr(r.value,i.value)}(t,e):t instanceof dr?function(r,i){return i instanceof dr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&AA(o,i.filters[a]),!0):!1}(t,e):void oe()}function RA(t){return t instanceof ct?function(n){return`${n.field.canonicalString()} ${n.op} ${Ta(n.value)}`}(t):t instanceof dr?function(n){return n.op.toString()+" {"+n.getFilters().map(RA).join(" ,")+"}"}(t):"Filter"}class wV extends ct{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class _V extends ct{constructor(e,n){super(e,"in",n),this.keys=PA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class EV extends ct{constructor(e,n){super(e,"not-in",n),this.keys=PA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function PA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class SV extends ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ux(n)&&Ic(n.arrayValue,this.value)}}class bV extends ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ic(this.value.arrayValue,n)}}class kV extends ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ic(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ic(this.value.arrayValue,n)}}class TV extends ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ux(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ic(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.he=null}}function wS(t,e=null,n=[],r=[],i=null,s=null,o=null){return new IV(t,e,n,r,i,s,o)}function Wx(t){const e=me(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>uy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),nm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ta(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ta(r)).join(",")),e.he=n}return e.he}function Hx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!AA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xS(t.startAt,e.startAt)&&xS(t.endAt,e.endAt)}function dy(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function CV(t,e,n,r,i,s,o,a){return new lu(t,e,n,r,i,s,o,a)}function qx(t){return new lu(t)}function _S(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function NA(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Gx(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function DA(t){return t.collectionGroup!==null}function Ol(t){const e=me(t);if(e.Pe===null){e.Pe=[];const n=Gx(e),r=NA(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new jl(n)),e.Pe.push(new jl(zt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new jl(zt.keyField(),s))}}}return e.Pe}function di(t){const e=me(t);return e.Ie||(e.Ie=AV(e,Ol(t))),e.Ie}function AV(t,e){if(t.limitType==="F")return wS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new jl(i.field,s)});const n=t.endAt?new Fh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Fh(t.startAt.position,t.startAt.inclusive):null;return wS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function hy(t,e){e.getFirstInequalityField(),Gx(t);const n=t.filters.concat([e]);return new lu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function fy(t,e,n){return new lu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rm(t,e){return Hx(di(t),di(e))&&t.limitType===e.limitType}function jA(t){return`${Wx(di(t))}|lt:${t.limitType}`}function my(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>RA(i)).join(", ")}]`),nm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ta(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ta(i)).join(",")),`Target(${r})`}(di(t))}; limitType=${t.limitType})`}function im(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ee.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ol(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=vS(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ol(r),i)||r.endAt&&!function(o,a,l){const c=vS(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ol(r),i))}(t,e)}function RV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function OA(t){return(e,n)=>{let r=!1;for(const i of Ol(t)){const s=PV(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function PV(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?ka(l,c):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Va(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return SA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=new Ge(ee.comparator);function hi(){return NV}const MA=new Ge(ee.comparator);function vl(...t){let e=MA;for(const n of t)e=e.insert(n.key,n);return e}function LA(t){let e=MA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Os(){return Ml()}function FA(){return Ml()}function Ml(){return new Ua(t=>t.toString(),(t,e)=>t.isEqual(e))}const DV=new Ge(ee.comparator),jV=new Ut(ee.comparator);function ye(...t){let e=jV;for(const n of t)e=e.add(n);return e}const OV=new Ut(be);function MV(){return OV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lh(e)?"-0":e}}function zA(t){return{integerValue:""+t}}function LV(t,e){return mV(e)?zA(e):$A(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(){this._=void 0}}function FV(t,e,n){return t instanceof $h?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Bx(s)&&(s=Vx(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Cc?VA(t,e):t instanceof Ac?UA(t,e):function(i,s){const o=BA(i,s),a=ES(o)+ES(i.Ee);return cy(o)&&cy(i.Ee)?zA(a):$A(i.serializer,a)}(t,e)}function $V(t,e,n){return t instanceof Cc?VA(t,e):t instanceof Ac?UA(t,e):n}function BA(t,e){return t instanceof zh?function(r){return cy(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class $h extends sm{}class Cc extends sm{constructor(e){super(),this.elements=e}}function VA(t,e){const n=WA(e);for(const r of t.elements)n.some(i=>Mr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ac extends sm{constructor(e){super(),this.elements=e}}function UA(t,e){let n=WA(e);for(const r of t.elements)n=n.filter(i=>!Mr(i,r));return{arrayValue:{values:n}}}class zh extends sm{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function ES(t){return at(t.integerValue||t.doubleValue)}function WA(t){return Ux(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function zV(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Cc&&i instanceof Cc||r instanceof Ac&&i instanceof Ac?ba(r.elements,i.elements,Mr):r instanceof zh&&i instanceof zh?Mr(r.Ee,i.Ee):r instanceof $h&&i instanceof $h}(t.transform,e.transform)}class BV{constructor(e,n){this.version=e,this.transformResults=n}}class Nr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nr}static exists(e){return new Nr(void 0,e)}static updateTime(e){return new Nr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class om{}function HA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Kx(t.key,Nr.none()):new cu(t.key,t.data,Nr.none());{const n=t.data,r=Vn.empty();let i=new Ut(zt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new vo(t.key,r,new or(i.toArray()),Nr.none())}}function VV(t,e,n){t instanceof cu?function(i,s,o){const a=i.value.clone(),l=bS(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof vo?function(i,s,o){if(!Cd(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=bS(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(qA(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ll(t,e,n,r){return t instanceof cu?function(s,o,a,l){if(!Cd(s.precondition,o))return a;const c=s.value.clone(),d=kS(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof vo?function(s,o,a,l){if(!Cd(s.precondition,o))return a;const c=kS(s.fieldTransforms,l,o),d=o.data;return d.setAll(qA(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Cd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function UV(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=BA(r.transform,i||null);s!=null&&(n===null&&(n=Vn.empty()),n.set(r.field,s))}return n||null}function SS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ba(r,i,(s,o)=>zV(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class cu extends om{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class vo extends om{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function qA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function bS(t,e,n){const r=new Map;$e(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,$V(o,a,n[i]))}return r}function kS(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,FV(s,o,e))}return r}class Kx extends om{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WV extends om{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&VV(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ll(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ll(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=FA();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=HA(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&ba(this.mutations,e.mutations,(n,r)=>SS(n,r))&&ba(this.baseMutations,e.baseMutations,(n,r)=>SS(n,r))}}class Xx{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){$e(e.mutations.length===r.length);let i=function(){return DV}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Xx(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,we;function KV(t){switch(t){default:return oe();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function GA(t){if(t===void 0)return ui("GRPC error has no .code"),j.UNKNOWN;switch(t){case ot.OK:return j.OK;case ot.CANCELLED:return j.CANCELLED;case ot.UNKNOWN:return j.UNKNOWN;case ot.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case ot.INTERNAL:return j.INTERNAL;case ot.UNAVAILABLE:return j.UNAVAILABLE;case ot.UNAUTHENTICATED:return j.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case ot.NOT_FOUND:return j.NOT_FOUND;case ot.ALREADY_EXISTS:return j.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return j.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case ot.ABORTED:return j.ABORTED;case ot.OUT_OF_RANGE:return j.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return j.UNIMPLEMENTED;case ot.DATA_LOSS:return j.DATA_LOSS;default:return oe()}}(we=ot||(ot={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV=new ra([4294967295,4294967295],0);function TS(t){const e=XV().encode(t),n=new ZB;return n.update(e),new Uint8Array(n.digest())}function IS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ra([n,r],0),new ra([i,s],0)]}class Qx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new xl(`Invalid padding: ${n}`);if(r<0)throw new xl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new xl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new xl(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=ra.fromNumber(this.Ae)}Ve(e,n,r){let i=e.add(n.multiply(ra.fromNumber(r)));return i.compare(QV)===1&&(i=new ra([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=TS(e),[r,i]=IS(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);if(!this.me(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Qx(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=TS(e),[r,i]=IS(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class xl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,uu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new am(ce.min(),i,new Ge(be),hi(),ye())}}class uu{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new uu(r,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n,r,i){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=i}}class KA{constructor(e,n){this.targetId=e,this.ye=n}}class XA{constructor(e,n,r=qt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class CS{constructor(){this.we=0,this.Se=RS(),this.be=qt.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=ye(),n=ye(),r=ye();return this.Se.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:oe()}}),new uu(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=RS()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class YV{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=hi(),this.Ue=AS(),this.We=new Ge(be)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,i)=>{this.Ye(i)&&n(i)})}Xe(e){const n=e.targetId,r=e.ye.count,i=this.et(n);if(i){const s=i.target;if(dy(s))if(r===0){const o=new ee(s.path);this.je(n,o,$t.newNoDocument(o,ce.min()))}else $e(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),l=a?this.rt(a,e,o):1;if(l!==0){this.Ze(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,c)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=no(r).toUint8Array()}catch(l){if(l instanceof bA)return Sa("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Qx(o,i,s)}catch(l){return Sa(l instanceof xl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.je(n,s,null),i++)}),i}_t(e){const n=new Map;this.Ke.forEach((s,o)=>{const a=this.et(o);if(a){if(s.current&&dy(a.target)){const l=new ee(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,$t.newNoDocument(l,e))}s.Fe&&(n.set(o,s.xe()),s.Oe())}});let r=ye();this.Ue.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.et(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.$e.forEach((s,o)=>o.setReadTime(e));const i=new am(e,n,this.We,this.$e,r);return this.$e=hi(),this.Ue=AS(),this.We=new Ge(be),i}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const i=this.Je(e);this.ut(e,n)?i.Ne(n,1):i.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new CS,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Ut(be),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new CS),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function AS(){return new Ge(ee.comparator)}function RS(){return new Ge(ee.comparator)}const JV=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),ZV=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),eU=(()=>({and:"AND",or:"OR"}))();class tU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function py(t,e){return t.useProto3Json||nm(e)?e:{value:e}}function Bh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nU(t,e){return Bh(t,e.toTimestamp())}function Dr(t){return $e(!!t),ce.fromTimestamp(function(n){const r=rs(n);return new gt(r.seconds,r.nanos)}(t))}function Yx(t,e){return function(r){return new Le(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function YA(t){const e=Le.fromString(t);return $e(tR(e)),e}function gy(t,e){return Yx(t.databaseId,e.path)}function eg(t,e){const n=YA(e);if(n.get(1)!==t.databaseId.projectId)throw new W(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(JA(n))}function yy(t,e){return Yx(t.databaseId,e)}function rU(t){const e=YA(t);return e.length===4?Le.emptyPath():JA(e)}function vy(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JA(t){return $e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function PS(t,e,n){return{name:gy(t,e),fields:n.value.mapValue.fields}}function iU(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?($e(d===void 0||typeof d=="string"),qt.fromBase64String(d||"")):($e(d===void 0||d instanceof Uint8Array),qt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?j.UNKNOWN:GA(c.code);return new W(d,c.message||"")}(o);n=new XA(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=eg(t,r.document.name),s=Dr(r.document.updateTime),o=r.document.createTime?Dr(r.document.createTime):ce.min(),a=new Vn({mapValue:{fields:r.document.fields}}),l=$t.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Ad(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=eg(t,r.document),s=r.readTime?Dr(r.readTime):ce.min(),o=$t.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ad([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=eg(t,r.document),s=r.removedTargetIds||[];n=new Ad([],s,i,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new GV(i,s),a=r.targetId;n=new KA(a,o)}}return n}function sU(t,e){let n;if(e instanceof cu)n={update:PS(t,e.key,e.value)};else if(e instanceof Kx)n={delete:gy(t,e.key)};else if(e instanceof vo)n={update:PS(t,e.key,e.data),updateMask:mU(e.fieldMask)};else{if(!(e instanceof WV))return oe();n={verify:gy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof $h)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Cc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ac)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof zh)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:nU(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:oe()}(t,e.precondition)),n}function oU(t,e){return t&&t.length>0?($e(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Dr(i.updateTime):Dr(s);return o.isEqual(ce.min())&&(o=Dr(s)),new BV(o,i.transformResults||[])}(n,e))):[]}function aU(t,e){return{documents:[yy(t,e.path)]}}function lU(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=yy(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=yy(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return eR(dr.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:Ro(h.field),direction:dU(h.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=py(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function cU(t){let e=rU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){$e(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const m=ZA(h);return m instanceof dr&&CA(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(m=>function(y){return new jl(Po(y.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(h){let m;return m=typeof h=="object"?h.value:h,nm(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(h){const m=!!h.before,p=h.values||[];return new Fh(p,m)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const m=!h.before,p=h.values||[];return new Fh(p,m)}(n.endAt)),CV(e,i,o,s,a,"F",l,c)}function uU(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ZA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Po(n.unaryFilter.field);return ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Po(n.unaryFilter.field);return ct.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Po(n.unaryFilter.field);return ct.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Po(n.unaryFilter.field);return ct.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return ct.create(Po(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return dr.create(n.compositeFilter.filters.map(r=>ZA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function dU(t){return JV[t]}function hU(t){return ZV[t]}function fU(t){return eU[t]}function Ro(t){return{fieldPath:t.canonicalString()}}function Po(t){return zt.fromServerFormat(t.fieldPath)}function eR(t){return t instanceof ct?function(n){if(n.op==="=="){if(yS(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NAN"}};if(gS(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(yS(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NOT_NAN"}};if(gS(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(n.field),op:hU(n.op),value:n.value}}}(t):t instanceof dr?function(n){const r=n.getFilters().map(i=>eR(i));return r.length===1?r[0]:{compositeFilter:{op:fU(n.op),filters:r}}}(t):oe()}function mU(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function tR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n,r,i,s=ce.min(),o=ce.min(),a=qt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e){this.ht=e}}function gU(t){const e=cU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?fy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(){this._n=new vU}addToCollectionParentIndex(e,n){return this._n.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(ns.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(ns.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class vU{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ut(Le.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ut(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Ia(0)}static Bn(){return new Ia(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(){this.changes=new Ua(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ll(r.mutation,i,or.empty(),gt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ye()){const i=Os();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=vl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Os();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ye()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=hi();const o=Ml(),a=function(){return Ml()}();return n.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof vo)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Ll(d.mutation,c,d.mutation.getFieldMask(),gt.now())):o.set(c.key,or.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new wU(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ml();let i=new Ge((o,a)=>o-a),s=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||or.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(i.get(a.batchId)||ye()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=FA();d.forEach(m=>{if(!s.has(m)){const p=HA(n.get(m),r.get(m));p!==null&&h.set(m,p),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):DA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):L.resolve(Os());let a=-1,l=s;return o.next(c=>L.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?L.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ye())).next(d=>({batchId:a,changes:LA(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let i=vl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=vl();return this.indexManager.getCollectionParents(e,i).next(o=>L.forEach(o,a=>{const l=function(d,h){return new lu(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,l)=>{const c=l.getKey();s.get(c)===null&&(s=s.insert(c,$t.newInvalidDocument(c)))});let o=vl();return s.forEach((a,l)=>{const c=i.get(a);c!==void 0&&Ll(c.mutation,l,or.empty(),gt.now()),im(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return L.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Dr(i.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:gU(i.bundledQuery),readTime:Dr(i.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(){this.overlays=new Ge(ee.comparator),this.hr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Os();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.It(e,n,s)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const i=Os(),s=n.length+1,o=new ee(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return L.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ge((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=Os(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Os(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return L.resolve(a)}It(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new qV(n,r));let s=this.hr.get(n);s===void 0&&(s=ye(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(){this.Pr=new Ut(vt.Ir),this.Tr=new Ut(vt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new vt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new vt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new ee(new Le([])),r=new vt(n,e),i=new vt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new ee(new Le([])),r=new vt(n,e),i=new vt(n,e+1);let s=ye();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new vt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class vt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ee.comparator(e.key,n.key)||be(e.pr,n.pr)}static Er(e,n){return be(e.pr,n.pr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ut(vt.Ir)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new HV(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new vt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new vt(n,0),i=new vt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ut(be);return n.forEach(i=>{const s=new vt(i,0),o=new vt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),L.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ee.isDocumentKey(s)||(s=s.child(""));const o=new vt(new ee(s),0);let a=new Ut(be);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),L.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){$e(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return L.forEach(n.mutations,i=>{const s=new vt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new vt(n,0),i=this.wr.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}vr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e){this.Cr=e,this.docs=function(){return new Ge(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():$t.newInvalidDocument(n))}getEntries(e,n){let r=hi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():$t.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=hi();const o=n.path,a=new ee(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||dV(uV(d),r)<=0||(i.has(d.key)||im(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,n,r,i){oe()}Fr(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new TU(this)}getSize(e){return L.resolve(this.size)}}class TU extends xU{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(e){this.persistence=e,this.Mr=new Ua(n=>Wx(n),Hx),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Jx,this.targetCount=0,this.Br=Ia.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),L.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Ia(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.qn(n),L.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(e,n){this.Lr={},this.overlays={},this.kr=new zx(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new IU(this),this.indexManager=new yU,this.remoteDocumentCache=function(i){return new kU(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new pU(n),this.$r=new EU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new bU(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const i=new AU(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return L.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class AU extends fV{constructor(e){super(),this.currentSequenceNumber=e}}class Zx{constructor(e){this.persistence=e,this.zr=new Jx,this.jr=null}static Hr(e){return new Zx(e)}get Jr(){if(this.jr)return this.jr;throw oe()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),L.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Jr,r=>{const i=ee.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,ce.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return L.or([()=>L.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=ye(),i=ye();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new e1(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(){this.$i=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Wi(e,n).next(s=>s||this.Gi(e,n,i,r)).next(s=>s||this.zi(e,n))}Wi(e,n){if(_S(n))return L.resolve(null);let r=di(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=fy(n,null,"F"),r=di(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ye(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ji(n,a);return this.Hi(n,c,o,l.readTime)?this.Wi(e,fy(n,null,"F")):this.Ji(e,c,n,l)}))})))}Gi(e,n,r,i){return _S(n)||i.isEqual(ce.min())?this.zi(e,n):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(n,s);return this.Hi(n,o,r,i)?this.zi(e,n):(dS()<=Se.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),my(n)),this.Ji(e,o,n,cV(i,-1)))})}ji(e,n){let r=new Ut(OA(e));return n.forEach((i,s)=>{im(e,s)&&(r=r.add(s))}),r}Hi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}zi(e,n){return dS()<=Se.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",my(n)),this.Ui.getDocumentsMatchingQuery(e,n,ns.min())}Ji(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e,n,r,i){this.persistence=e,this.Yi=n,this.serializer=i,this.Zi=new Ge(be),this.Xi=new Ua(s=>Wx(s),Hx),this.es=new Map,this.ts=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this.ns(r)}ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _U(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Zi))}}function NU(t,e,n,r){return new PU(t,e,n,r)}async function nR(t,e){const n=me(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ye();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function DU(t,e){const n=me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ts.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,m=h.keys();let p=L.resolve();return m.forEach(y=>{p=p.next(()=>d.getEntry(l,y)).next(x=>{const _=c.docVersions.get(y);$e(_!==null),x.version.compareTo(_)<0&&(h.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),d.addEntry(x)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ye();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function rR(t){const e=me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function jU(t,e){const n=me(t),r=e.snapshotVersion;let i=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ts.newChangeBuffer({trackRemovals:!0});i=n.Zi;const a=[];e.targetChanges.forEach((d,h)=>{const m=i.get(h);if(!m)return;a.push(n.Qr.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,d.addedDocuments,h)));let p=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(qt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),i=i.insert(h,p),function(x,_,v){return x.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(m,p,d)&&a.push(n.Qr.updateTargetData(s,p))});let l=hi(),c=ye();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(OU(s,o,e.documentUpdates).next(d=>{l=d.ss,c=d.os})),!r.isEqual(ce.min())){const d=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return L.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Zi=i,s))}function OU(t,e,n){let r=ye(),i=ye();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=hi();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ce.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):X("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ss:o,os:i}})}function MU(t,e){const n=me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function LU(t,e){const n=me(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Fi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Zi.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(r.targetId,r),n.Xi.set(e,r.targetId)),r})}async function xy(t,e,n){const r=me(t),i=r.Zi.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!au(o))throw o;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Zi=r.Zi.remove(e),r.Xi.delete(i.target)}function NS(t,e,n){const r=me(t);let i=ce.min(),s=ye();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,c,d){const h=me(l),m=h.Xi.get(d);return m!==void 0?L.resolve(h.Zi.get(m)):h.Qr.getTargetData(c,d)}(r,o,di(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Yi.getDocumentsMatchingQuery(o,e,n?i:ce.min(),n?s:ye())).next(a=>(FU(r,RV(e),a),{documents:a,_s:s})))}function FU(t,e,n){let r=t.es.get(e)||ce.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.es.set(e,r)}class DS{constructor(){this.activeTargetIds=MV()}Is(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ts(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ps(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $U{constructor(){this.Ys=new DS,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}updateQueryState(e,n,r){this.Zs[e]=n}removeLocalQueryTarget(e){this.Ys.Ts(e)}isLocalQueryTarget(e){return this.Ys.activeTargetIds.has(e)}clearQueryState(e){delete this.Zs[e]}getAllActiveQueryTargets(){return this.Ys.activeTargetIds}isActiveQueryTarget(e){return this.Ys.activeTargetIds.has(e)}start(){return this.Ys=new DS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{Xs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.eo=()=>this.no(),this.ro=()=>this.io(),this.so=[],this.oo()}Xs(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}oo(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}no(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}io(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zu=null;function tg(){return Zu===null?Zu=function(){return 268435456+Math.round(2147483648*Math.random())}():Zu++,"0x"+Zu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e){this._o=e._o,this.ao=e.ao}uo(e){this.co=e}lo(e){this.ho=e}onMessage(e){this.Po=e}close(){this.ao()}send(e){this._o(e)}Io(){this.co()}To(e){this.ho(e)}Eo(e){this.Po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection";class UU extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ao=r+"://"+n.host,this.Ro=`projects/${i}/databases/${s}`,this.Vo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get mo(){return!1}fo(n,r,i,s,o){const a=tg(),l=this.po(n,r);X("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(c,s,o),this.wo(n,l,c,i).then(d=>(X("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Sa("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}So(n,r,i,s,o,a){return this.fo(n,r,i,s,o)}yo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ba}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}po(n,r){const i=BU[n];return`${this.Ao}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}wo(e,n,r,i){const s=tg();return new Promise((o,a)=>{const l=new JB;l.setWithCredentials(!0),l.listenOnce(QB.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Zp.NO_ERROR:const d=l.getResponseJson();X(Ot,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Zp.TIMEOUT:X(Ot,`RPC '${e}' ${s} timed out`),a(new W(j.DEADLINE_EXCEEDED,"Request time out"));break;case Zp.HTTP_ERROR:const h=l.getStatus();if(X(Ot,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const y=function(_){const v=_.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(v)>=0?v:j.UNKNOWN}(p.status);a(new W(y,p.message))}else a(new W(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new W(j.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{X(Ot,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);X(Ot,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}bo(e,n,r){const i=tg(),s=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=KB(),a=XB(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.yo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");X(Ot,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);let m=!1,p=!1;const y=new VU({_o:_=>{p?X(Ot,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(m||(X(Ot,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),X(Ot,`RPC '${e}' stream ${i} sending:`,_),h.send(_))},ao:()=>h.close()}),x=(_,v,g)=>{_.listen(v,w=>{try{g(w)}catch(E){setTimeout(()=>{throw E},0)}})};return x(h,Qu.EventType.OPEN,()=>{p||X(Ot,`RPC '${e}' stream ${i} transport opened.`)}),x(h,Qu.EventType.CLOSE,()=>{p||(p=!0,X(Ot,`RPC '${e}' stream ${i} transport closed`),y.To())}),x(h,Qu.EventType.ERROR,_=>{p||(p=!0,Sa(Ot,`RPC '${e}' stream ${i} transport errored:`,_),y.To(new W(j.UNAVAILABLE,"The operation could not be completed")))}),x(h,Qu.EventType.MESSAGE,_=>{var v;if(!p){const g=_.data[0];$e(!!g);const w=g,E=w.error||((v=w[0])===null||v===void 0?void 0:v.error);if(E){X(Ot,`RPC '${e}' stream ${i} received error:`,E);const S=E.status;let T=function(P){const I=ot[P];if(I!==void 0)return GA(I)}(S),k=E.message;T===void 0&&(T=j.INTERNAL,k="Unknown error status: "+S+" with message "+E.message),p=!0,y.To(new W(T,k)),h.close()}else X(Ot,`RPC '${e}' stream ${i} received:`,g),y.Eo(g)}}),x(a,YB.STAT_EVENT,_=>{_.stat===cS.PROXY?X(Ot,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===cS.NOPROXY&&X(Ot,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.Io()},0),y}}function ng(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t){return new tU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Do=r,this.vo=i,this.Co=s,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}reset(){this.Fo=0}Oo(){this.Fo=this.Co}No(e){this.cancel();const n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),i=Math.max(0,n-r);i>0&&X("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Fo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Mo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.xo=Date.now(),e())),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}Lo(){this.Mo!==null&&(this.Mo.skipDelay(),this.Mo=null)}cancel(){this.Mo!==null&&(this.Mo.cancel(),this.Mo=null)}Bo(){return(Math.random()-.5)*this.Fo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.ko=r,this.qo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new iR(e,n)}Wo(){return this.state===1||this.state===5||this.Go()}Go(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.zo()}async stop(){this.Wo()&&await this.close(0)}jo(){this.state=0,this.Uo.reset()}Ho(){this.Go()&&this.Ko===null&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,()=>this.Jo()))}Yo(e){this.Zo(),this.stream.send(e)}async Jo(){if(this.Go())return this.close(0)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}Xo(){this.$o&&(this.$o.cancel(),this.$o=null)}async close(e,n){this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,e!==4?this.Uo.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(ui(n.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.e_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.lo(n)}e_(){}auth(){this.state=1;const e=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Qo===n&&this.n_(r,i)},r=>{e(()=>{const i=new W(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.r_(i)})})}n_(e,n){const r=this.t_(this.Qo);this.stream=this.i_(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.$o=this.oi.enqueueAfterDelay(this.qo,1e4,()=>(this.Go()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.lo(i=>{r(()=>this.r_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}zo(){this.state=5,this.Uo.No(async()=>{this.state=0,this.start()})}r_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}t_(e){return n=>{this.oi.enqueueAndForget(()=>this.Qo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WU extends sR{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}i_(e,n){return this.connection.bo("Listen",e,n)}onMessage(e){this.Uo.reset();const n=iU(this.serializer,e),r=function(s){if(!("targetChange"in s))return ce.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?Dr(o.readTime):ce.min()}(e);return this.listener.s_(n,r)}o_(e){const n={};n.database=vy(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=dy(l)?{documents:aU(s,l)}:{query:lU(s,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=QA(s,o.resumeToken);const c=py(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=Bh(s,o.snapshotVersion.toTimestamp());const c=py(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=uU(this.serializer,e);r&&(n.labels=r),this.Yo(n)}__(e){const n={};n.database=vy(this.serializer),n.removeTarget=e,this.Yo(n)}}class HU extends sR{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.a_=!1}get u_(){return this.a_}start(){this.a_=!1,this.lastStreamToken=void 0,super.start()}e_(){this.a_&&this.c_([])}i_(e,n){return this.connection.bo("Write",e,n)}onMessage(e){if($e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();const n=oU(e.writeResults,e.commitTime),r=Dr(e.commitTime);return this.listener.l_(r,n)}return $e(!e.writeResults||e.writeResults.length===0),this.a_=!0,this.listener.h_()}P_(){const e={};e.database=vy(this.serializer),this.Yo(e)}c_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>sU(this.serializer,r))};this.Yo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.I_=!1}T_(){if(this.I_)throw new W(j.FAILED_PRECONDITION,"The client has already been terminated.")}fo(e,n,r){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.fo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new W(j.UNKNOWN,i.toString())})}So(e,n,r,i){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(j.UNKNOWN,s.toString())})}terminate(){this.I_=!0}}class GU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}V_(){this.d_===0&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.A_=null,this.f_("Backend didn't respond within 10 seconds."),this.m_("Offline"),Promise.resolve())))}g_(e){this.state==="Online"?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.m_("Offline")))}set(e){this.p_(),this.d_=0,e==="Online"&&(this.R_=!1),this.m_(e)}m_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}f_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.R_?(ui(n),this.R_=!1):X("OnlineStateTracker",n)}p_(){this.A_!==null&&(this.A_.cancel(),this.A_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=s,this.D_.Xs(o=>{r.enqueueAndForget(async()=>{xo(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=me(l);c.S_.add(4),await du(c),c.v_.set("Unknown"),c.S_.delete(4),await cm(c)}(this))})}),this.v_=new GU(r,i)}}async function cm(t){if(xo(t))for(const e of t.b_)await e(!0)}async function du(t){for(const e of t.b_)await e(!1)}function oR(t,e){const n=me(t);n.w_.has(e.targetId)||(n.w_.set(e.targetId,e),r1(n)?n1(n):Wa(n).Go()&&t1(n,e))}function aR(t,e){const n=me(t),r=Wa(n);n.w_.delete(e),r.Go()&&lR(n,e),n.w_.size===0&&(r.Go()?r.Ho():xo(n)&&n.v_.set("Unknown"))}function t1(t,e){if(t.C_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Wa(t).o_(e)}function lR(t,e){t.C_.Le(e),Wa(t).__(e)}function n1(t){t.C_=new YV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.w_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),Wa(t).start(),t.v_.V_()}function r1(t){return xo(t)&&!Wa(t).Wo()&&t.w_.size>0}function xo(t){return me(t).S_.size===0}function cR(t){t.C_=void 0}async function XU(t){t.w_.forEach((e,n)=>{t1(t,e)})}async function QU(t,e){cR(t),r1(t)?(t.v_.g_(e),n1(t)):t.v_.set("Unknown")}async function YU(t,e,n){if(t.v_.set("Online"),e instanceof XA&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.w_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.w_.delete(a),i.C_.removeTarget(a))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vh(t,r)}else if(e instanceof Ad?t.C_.Ge(e):e instanceof KA?t.C_.Xe(e):t.C_.He(e),!n.isEqual(ce.min()))try{const r=await rR(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.C_._t(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.w_.get(c);d&&s.w_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.w_.get(l);if(!d)return;s.w_.set(l,d.withResumeToken(qt.EMPTY_BYTE_STRING,d.snapshotVersion)),lR(s,l);const h=new Fi(d.target,l,c,d.sequenceNumber);t1(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await Vh(t,r)}}async function Vh(t,e,n){if(!au(e))throw e;t.S_.add(1),await du(t),t.v_.set("Offline"),n||(n=()=>rR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.S_.delete(1),await cm(t)})}function uR(t,e){return e().catch(n=>Vh(t,n,e))}async function um(t){const e=me(t),n=is(e);let r=e.y_.length>0?e.y_[e.y_.length-1].batchId:-1;for(;JU(e);)try{const i=await MU(e.localStore,r);if(i===null){e.y_.length===0&&n.Ho();break}r=i.batchId,ZU(e,i)}catch(i){await Vh(e,i)}dR(e)&&hR(e)}function JU(t){return xo(t)&&t.y_.length<10}function ZU(t,e){t.y_.push(e);const n=is(t);n.Go()&&n.u_&&n.c_(e.mutations)}function dR(t){return xo(t)&&!is(t).Wo()&&t.y_.length>0}function hR(t){is(t).start()}async function e7(t){is(t).P_()}async function t7(t){const e=is(t);for(const n of t.y_)e.c_(n.mutations)}async function n7(t,e,n){const r=t.y_.shift(),i=Xx.from(r,e,n);await uR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await um(t)}async function r7(t,e){e&&is(t).u_&&await async function(r,i){if(function(o){return KV(o)&&o!==j.ABORTED}(i.code)){const s=r.y_.shift();is(r).jo(),await uR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await um(r)}}(t,e),dR(t)&&hR(t)}async function OS(t,e){const n=me(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=xo(n);n.S_.add(3),await du(n),r&&n.v_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.S_.delete(3),await cm(n)}async function i7(t,e){const n=me(t);e?(n.S_.delete(2),await cm(n)):e||(n.S_.add(2),await du(n),n.v_.set("Unknown"))}function Wa(t){return t.F_||(t.F_=function(n,r,i){const s=me(n);return s.T_(),new WU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{uo:XU.bind(null,t),lo:QU.bind(null,t),s_:YU.bind(null,t)}),t.b_.push(async e=>{e?(t.F_.jo(),r1(t)?n1(t):t.v_.set("Unknown")):(await t.F_.stop(),cR(t))})),t.F_}function is(t){return t.M_||(t.M_=function(n,r,i){const s=me(n);return s.T_(),new HU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{uo:e7.bind(null,t),lo:r7.bind(null,t),h_:t7.bind(null,t),l_:n7.bind(null,t)}),t.b_.push(async e=>{e?(t.M_.jo(),await um(t)):(await t.M_.stop(),t.y_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.y_.length} pending writes`),t.y_=[]))})),t.M_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new i1(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function s1(t,e){if(ui("AsyncQueue",`${e}: ${t}`),au(t))return new W(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=vl(),this.sortedSet=new Ge(this.comparator)}static emptySet(e){return new ia(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ia)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ia;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(){this.x_=new Ge(ee.comparator)}track(e){const n=e.doc.key,r=this.x_.get(n);r?e.type!==0&&r.type===3?this.x_=this.x_.insert(n,e):e.type===3&&r.type!==1?this.x_=this.x_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.x_=this.x_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.x_=this.x_.remove(n):e.type===1&&r.type===2?this.x_=this.x_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):oe():this.x_=this.x_.insert(n,e)}O_(){const e=[];return this.x_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ca{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ca(e,n,ia.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(){this.N_=void 0,this.listeners=[]}}class o7{constructor(){this.queries=new Ua(e=>jA(e),rm),this.onlineState="Unknown",this.B_=new Set}}async function fR(t,e){const n=me(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new s7),i)try{s.N_=await n.onListen(r)}catch(o){const a=s1(o,`Initialization of query '${my(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.L_(n.onlineState),s.N_&&e.k_(s.N_)&&o1(n)}async function mR(t,e){const n=me(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function a7(t,e){const n=me(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.k_(i)&&(r=!0);o.N_=i}}r&&o1(n)}function l7(t,e,n){const r=me(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function o1(t){t.B_.forEach(e=>{e.next()})}class pR{constructor(e,n,r){this.query=e,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}k_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ca(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),n=!0):this.W_(e,this.onlineState)&&(this.G_(e),n=!0),this.K_=e,n}onError(e){this.q_.error(e)}L_(e){this.onlineState=e;let n=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),n=!0),n}W_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}U_(e){if(e.docChanges.length>0)return!0;const n=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}G_(e){e=Ca.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.key=e}}class yR{constructor(e){this.key=e}}class c7{constructor(e,n){this.query=e,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=ye(),this.mutatedKeys=ye(),this.ia=OA(e),this.sa=new ia(this.ia)}get oa(){return this.ta}_a(e,n){const r=n?n.aa:new MS,i=n?n.sa:this.sa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const m=i.get(d),p=im(this.query,h)?h:null,y=!!m&&this.mutatedKeys.has(m.key),x=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let _=!1;m&&p?m.data.isEqual(p.data)?y!==x&&(r.track({type:3,doc:p}),_=!0):this.ua(m,p)||(r.track({type:2,doc:p}),_=!0,(l&&this.ia(p,l)>0||c&&this.ia(p,c)<0)&&(a=!0)):!m&&p?(r.track({type:0,doc:p}),_=!0):m&&!p&&(r.track({type:1,doc:m}),_=!0,(l||c)&&(a=!0)),_&&(p?(o=o.add(p),s=x?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{sa:o,aa:r,Hi:a,mutatedKeys:s}}ua(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;const s=e.aa.O_();s.sort((c,d)=>function(m,p){const y=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return y(m)-y(p)}(c.type,d.type)||this.ia(c.doc,d.doc)),this.ca(r);const o=n?this.la():[],a=this.ra.size===0&&this.current?1:0,l=a!==this.na;return this.na=a,s.length!==0||l?{snapshot:new Ca(this.query,e.sa,i,s,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ha:o}:{ha:o}}L_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({sa:this.sa,aa:new MS,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}Pa(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}ca(e){e&&(e.addedDocuments.forEach(n=>this.ta=this.ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ta=this.ta.delete(n)),this.current=e.current)}la(){if(!this.current)return[];const e=this.ra;this.ra=ye(),this.sa.forEach(r=>{this.Pa(r.key)&&(this.ra=this.ra.add(r.key))});const n=[];return e.forEach(r=>{this.ra.has(r)||n.push(new yR(r))}),this.ra.forEach(r=>{e.has(r)||n.push(new gR(r))}),n}Ia(e){this.ta=e._s,this.ra=ye();const n=this._a(e.documents);return this.applyChanges(n,!0)}Ta(){return Ca.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,this.na===0,this.hasCachedResults)}}class u7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class d7{constructor(e){this.key=e,this.Ea=!1}}class h7{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.da={},this.Aa=new Ua(a=>jA(a),rm),this.Ra=new Map,this.Va=new Set,this.ma=new Ge(ee.comparator),this.fa=new Map,this.ga=new Jx,this.pa={},this.ya=new Map,this.wa=Ia.Bn(),this.onlineState="Unknown",this.Sa=void 0}get isPrimaryClient(){return this.Sa===!0}}async function f7(t,e){const n=S7(t);let r,i;const s=n.Aa.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ta();else{const o=await LU(n.localStore,di(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await m7(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&oR(n.remoteStore,o)}return i}async function m7(t,e,n,r,i){t.ba=(h,m,p)=>async function(x,_,v,g){let w=_.view._a(v);w.Hi&&(w=await NS(x.localStore,_.query,!1).then(({documents:T})=>_.view._a(T,w)));const E=g&&g.targetChanges.get(_.targetId),S=_.view.applyChanges(w,x.isPrimaryClient,E);return FS(x,_.targetId,S.ha),S.snapshot}(t,h,m,p);const s=await NS(t.localStore,e,!0),o=new c7(e,s._s),a=o._a(s.documents),l=uu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);FS(t,n,c.ha);const d=new u7(e,n,o);return t.Aa.set(e,d),t.Ra.has(n)?t.Ra.get(n).push(e):t.Ra.set(n,[e]),c.snapshot}async function p7(t,e){const n=me(t),r=n.Aa.get(e),i=n.Ra.get(r.targetId);if(i.length>1)return n.Ra.set(r.targetId,i.filter(s=>!rm(s,e))),void n.Aa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await xy(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),aR(n.remoteStore,r.targetId),wy(n,r.targetId)}).catch(ou)):(wy(n,r.targetId),await xy(n.localStore,r.targetId,!0))}async function g7(t,e,n){const r=b7(t);try{const i=await function(o,a){const l=me(o),c=gt.now(),d=a.reduce((p,y)=>p.add(y.key),ye());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=hi(),x=ye();return l.ts.getEntries(p,d).next(_=>{y=_,y.forEach((v,g)=>{g.isValidDocument()||(x=x.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,y)).next(_=>{h=_;const v=[];for(const g of a){const w=UV(g,h.get(g.key).overlayedDocument);w!=null&&v.push(new vo(g.key,w,kA(w.value.mapValue),Nr.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,v,a)}).next(_=>{m=_;const v=_.applyToLocalDocumentSet(h,x);return l.documentOverlayCache.saveOverlays(p,_.batchId,v)})}).then(()=>({batchId:m.batchId,changes:LA(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.pa[o.currentUser.toKey()];c||(c=new Ge(be)),c=c.insert(a,l),o.pa[o.currentUser.toKey()]=c}(r,i.batchId,n),await hu(r,i.changes),await um(r.remoteStore)}catch(i){const s=s1(i,"Failed to persist write");n.reject(s)}}async function vR(t,e){const n=me(t);try{const r=await jU(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.fa.get(s);o&&($e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ea=!0:i.modifiedDocuments.size>0?$e(o.Ea):i.removedDocuments.size>0&&($e(o.Ea),o.Ea=!1))}),await hu(n,r,e)}catch(r){await ou(r)}}function LS(t,e,n){const r=me(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Aa.forEach((s,o)=>{const a=o.view.L_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=me(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const m of h.listeners)m.L_(a)&&(c=!0)}),c&&o1(l)}(r.eventManager,e),i.length&&r.da.s_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function y7(t,e,n){const r=me(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.fa.get(e),s=i&&i.key;if(s){let o=new Ge(ee.comparator);o=o.insert(s,$t.newNoDocument(s,ce.min()));const a=ye().add(s),l=new am(ce.min(),new Map,new Ge(be),o,a);await vR(r,l),r.ma=r.ma.remove(s),r.fa.delete(e),a1(r)}else await xy(r.localStore,e,!1).then(()=>wy(r,e,n)).catch(ou)}async function v7(t,e){const n=me(t),r=e.batch.batchId;try{const i=await DU(n.localStore,e);wR(n,r,null),xR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await hu(n,i)}catch(i){await ou(i)}}async function x7(t,e,n){const r=me(t);try{const i=await function(o,a){const l=me(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>($e(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);wR(r,e,n),xR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await hu(r,i)}catch(i){await ou(i)}}function xR(t,e){(t.ya.get(e)||[]).forEach(n=>{n.resolve()}),t.ya.delete(e)}function wR(t,e,n){const r=me(t);let i=r.pa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.pa[r.currentUser.toKey()]=i}}function wy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ra.get(e))t.Aa.delete(r),n&&t.da.Da(r,n);t.Ra.delete(e),t.isPrimaryClient&&t.ga.Vr(e).forEach(r=>{t.ga.containsKey(r)||_R(t,r)})}function _R(t,e){t.Va.delete(e.path.canonicalString());const n=t.ma.get(e);n!==null&&(aR(t.remoteStore,n),t.ma=t.ma.remove(e),t.fa.delete(n),a1(t))}function FS(t,e,n){for(const r of n)r instanceof gR?(t.ga.addReference(r.key,e),w7(t,r)):r instanceof yR?(X("SyncEngine","Document no longer in limbo: "+r.key),t.ga.removeReference(r.key,e),t.ga.containsKey(r.key)||_R(t,r.key)):oe()}function w7(t,e){const n=e.key,r=n.path.canonicalString();t.ma.get(n)||t.Va.has(r)||(X("SyncEngine","New document in limbo: "+n),t.Va.add(r),a1(t))}function a1(t){for(;t.Va.size>0&&t.ma.size<t.maxConcurrentLimboResolutions;){const e=t.Va.values().next().value;t.Va.delete(e);const n=new ee(Le.fromString(e)),r=t.wa.next();t.fa.set(r,new d7(n)),t.ma=t.ma.insert(n,r),oR(t.remoteStore,new Fi(di(qx(n.path)),r,"TargetPurposeLimboResolution",zx.ae))}}async function hu(t,e,n){const r=me(t),i=[],s=[],o=[];r.Aa.isEmpty()||(r.Aa.forEach((a,l)=>{o.push(r.ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const d=e1.Ki(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.da.s_(i),await async function(l,c){const d=me(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>L.forEach(c,m=>L.forEach(m.qi,p=>d.persistence.referenceDelegate.addReference(h,m.targetId,p)).next(()=>L.forEach(m.Qi,p=>d.persistence.referenceDelegate.removeReference(h,m.targetId,p)))))}catch(h){if(!au(h))throw h;X("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const m=h.targetId;if(!h.fromCache){const p=d.Zi.get(m),y=p.snapshotVersion,x=p.withLastLimboFreeSnapshotVersion(y);d.Zi=d.Zi.insert(m,x)}}}(r.localStore,s))}async function _7(t,e){const n=me(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await nR(n.localStore,e);n.currentUser=e,function(s,o){s.ya.forEach(a=>{a.forEach(l=>{l.reject(new W(j.CANCELLED,o))})}),s.ya.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await hu(n,r.rs)}}function E7(t,e){const n=me(t),r=n.fa.get(e);if(r&&r.Ea)return ye().add(r.key);{let i=ye();const s=n.Ra.get(e);if(!s)return i;for(const o of s){const a=n.Aa.get(o);i=i.unionWith(a.view.oa)}return i}}function S7(t){const e=me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=E7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=y7.bind(null,e),e.da.s_=a7.bind(null,e.eventManager),e.da.Da=l7.bind(null,e.eventManager),e}function b7(t){const e=me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=v7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=x7.bind(null,e),e}class $S{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=lm(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return NU(this.persistence,new RU,e.initialUser,this.serializer)}createPersistence(e){return new CU(Zx.Hr,this.serializer)}createSharedClientState(e){return new $U}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class k7{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>LS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_7.bind(null,this.syncEngine),await i7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new o7}()}createDatastore(e){const n=lm(e.databaseInfo.databaseId),r=function(s){return new UU(s)}(e.databaseInfo);return function(s,o,a,l){return new qU(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new KU(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>LS(this.syncEngine,n,0),function(){return jS.v()?new jS:new zU}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,d){const h=new h7(i,s,o,a,l,c);return d&&(h.Sa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=me(n);X("RemoteStore","RemoteStore shutting down."),r.S_.add(5),await du(r),r.D_.shutdown(),r.v_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Fa(this.observer.next,e)}error(e){this.observer.error?this.Fa(this.observer.error,e):ui("Uncaught Error in snapshot listener:",e.toString())}Ma(){this.muted=!0}Fa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Lt.UNAUTHENTICATED,this.clientId=EA.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{X("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(X("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new W(j.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=s1(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function rg(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await nR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function zS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await C7(t);X("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>OS(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>OS(e.remoteStore,s)),t._onlineComponents=e}function I7(t){return t.name==="FirebaseError"?t.code===j.FAILED_PRECONDITION||t.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function C7(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await rg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!I7(n))throw n;Sa("Error using user provided cache. Falling back to memory cache: "+n),await rg(t,new $S)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await rg(t,new $S);return t._offlineComponents}async function SR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await zS(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await zS(t,new k7))),t._onlineComponents}function A7(t){return SR(t).then(e=>e.syncEngine)}async function bR(t){const e=await SR(t),n=e.eventManager;return n.onListen=f7.bind(null,e.syncEngine),n.onUnlisten=p7.bind(null,e.syncEngine),n}function R7(t,e,n={}){const r=new ri;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new ER({next:m=>{o.enqueueAndForget(()=>mR(s,h));const p=m.docs.has(a);!p&&m.fromCache?c.reject(new W(j.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&l&&l.source==="server"?c.reject(new W(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new pR(qx(a.path),d,{includeMetadataChanges:!0,z_:!0});return fR(s,h)}(await bR(t),t.asyncQueue,e,n,r)),r.promise}function P7(t,e,n={}){const r=new ri;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new ER({next:m=>{o.enqueueAndForget(()=>mR(s,h)),m.fromCache&&l.source==="server"?c.reject(new W(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new pR(a,d,{includeMetadataChanges:!0,z_:!0});return fR(s,h)}(await bR(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(t,e,n){if(!n)throw new W(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function N7(t,e,n,r){if(e===!0&&r===!0)throw new W(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function VS(t){if(!ee.isDocumentKey(t))throw new W(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function US(t){if(ee.isDocumentKey(t))throw new W(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function ss(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dm(t);throw new W(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}N7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new W(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new W(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new W(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WS({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new W(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new W(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WS(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new eV;switch(r.type){case"firstParty":return new iV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=BS.get(n);r&&(X("ComponentProvider","Removing Datastore"),BS.delete(n),r.terminate())}(this),Promise.resolve()}}function D7(t,e,n,r={}){var i;const s=(t=ss(t,hm))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Sa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Lt.MOCK_USER;else{a=OI(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new W(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Lt(c)}t._authCredentials=new tV(new _A(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ha(this.firestore,e,this._query)}}class mn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}}class Qi extends Ha{constructor(e,n,r){super(e,n,qx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new ee(e))}withConverter(e){return new Qi(this.firestore,e,this._path)}}function fm(t,e,...n){if(t=yt(t),TR("collection","path",e),t instanceof hm){const r=Le.fromString(e,...n);return US(r),new Qi(t,null,r)}{if(!(t instanceof mn||t instanceof Qi))throw new W(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return US(r),new Qi(t.firestore,null,r)}}function l1(t,e,...n){if(t=yt(t),arguments.length===1&&(e=EA.V()),TR("doc","path",e),t instanceof hm){const r=Le.fromString(e,...n);return VS(r),new mn(t,null,new ee(r))}{if(!(t instanceof mn||t instanceof Qi))throw new W(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return VS(r),new mn(t.firestore,t instanceof Qi?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{constructor(){this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new iR(this,"async_queue_retry"),this.tu=()=>{const n=ng();n&&X("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Uo.Lo()};const e=ng();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.tu)}get isShuttingDown(){return this.Ha}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nu(),this.ru(e)}enterRestrictedMode(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;const n=ng();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.tu)}}enqueue(e){if(this.nu(),this.Ha)return new Promise(()=>{});const n=new ri;return this.ru(()=>this.Ha&&this.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ja.push(e),this.iu()))}async iu(){if(this.ja.length!==0){try{await this.ja[0](),this.ja.shift(),this.Uo.reset()}catch(e){if(!au(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.ja.length>0&&this.Uo.No(()=>this.iu())}}ru(e){const n=this.za.then(()=>(this.Za=!0,e().catch(r=>{this.Ya=r,this.Za=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ui("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Za=!1,r))));return this.za=n,n}enqueueAfterDelay(e,n,r){this.nu(),this.eu.indexOf(e)>-1&&(n=0);const i=i1.createAndSchedule(this,e,n,r,s=>this.su(s));return this.Ja.push(i),i}nu(){this.Ya&&oe()}verifyOperationInProgress(){}async ou(){let e;do e=this.za,await e;while(e!==this.za)}_u(e){for(const n of this.Ja)if(n.timerId===e)return!0;return!1}au(e){return this.ou().then(()=>{this.Ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ou()})}uu(e){this.eu.push(e)}su(e){const n=this.Ja.indexOf(e);this.Ja.splice(n,1)}}class fu extends hm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new j7}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||IR(this),this._firestoreClient.terminate()}}function O7(t,e){const n=typeof t=="object"?t:lx(),r=typeof t=="string"?t:e||"(default)",i=Of(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=NI("firestore");s&&D7(i,...s)}return i}function c1(t){return t._firestoreClient||IR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function IR(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,d){return new gV(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,kR(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new T7(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Aa(qt.fromBase64String(e))}catch(n){throw new W(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Aa(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M7=/^__.*__$/;class L7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new vo(e,this.data,this.fieldMask,n,this.fieldTransforms):new cu(e,this.data,n,this.fieldTransforms)}}function AR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class h1{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.cu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get lu(){return this.settings.lu}hu(e){return new h1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.hu({path:r,Iu:!1});return i.Tu(e),i}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.hu({path:r,Iu:!1});return i.cu(),i}du(e){return this.hu({path:void 0,Iu:!0})}Au(e){return Uh(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}cu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}Tu(e){if(e.length===0)throw this.Au("Document fields must not be empty");if(AR(this.lu)&&M7.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}class F7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||lm(e)}mu(e,n,r,i=!1){return new h1({lu:e,methodName:n,Vu:r,path:zt.emptyPath(),Iu:!1,Ru:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function RR(t){const e=t._freezeSettings(),n=lm(t._databaseId);return new F7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $7(t,e,n,r,i,s={}){const o=t.mu(s.merge||s.mergeFields?2:0,e,n,i);DR("Data must be an object, but it was:",o,r);const a=PR(r,o);let l,c;if(s.merge)l=new or(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const m=B7(e,h,n);if(!o.contains(m))throw new W(j.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);U7(d,m)||d.push(m)}l=new or(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new L7(new Vn(a),l,c)}function z7(t,e,n,r=!1){return f1(n,t.mu(r?4:3,e))}function f1(t,e){if(NR(t=yt(t)))return DR("Unsupported field value:",e,t),PR(t,e);if(t instanceof CR)return function(r,i){if(!AR(i.lu))throw i.Au(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Au(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Iu&&e.lu!==4)throw e.Au("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=f1(a,i.du(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return LV(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=gt.fromDate(r);return{timestampValue:Bh(i.serializer,s)}}if(r instanceof gt){const s=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bh(i.serializer,s)}}if(r instanceof d1)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Aa)return{bytesValue:QA(i.serializer,r._byteString)};if(r instanceof mn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Au(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Yx(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Au(`Unsupported field value: ${dm(r)}`)}(t,e)}function PR(t,e){const n={};return SA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Va(t,(r,i)=>{const s=f1(i,e.Pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function NR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof d1||t instanceof Aa||t instanceof mn||t instanceof CR)}function DR(t,e,n){if(!NR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=dm(n);throw r==="an object"?e.Au(t+" a custom object"):e.Au(t+" "+r)}}function B7(t,e,n){if((e=yt(e))instanceof u1)return e._internalPath;if(typeof e=="string")return jR(t,e);throw Uh("Field path arguments must be of type string or ",t,!1,void 0,n)}const V7=new RegExp("[~\\*/\\[\\]]");function jR(t,e,n){if(e.search(V7)>=0)throw Uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new u1(...e.split("."))._internalPath}catch{throw Uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Uh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new W(j.INVALID_ARGUMENT,a+t+l)}function U7(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new W7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(m1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class W7 extends OR{data(){return super.data()}}function m1(t,e){return typeof e=="string"?jR(t,e):e instanceof u1?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class p1{}class q7 extends p1{}function qa(t,e,...n){let r=[];e instanceof p1&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof g1).length,a=s.filter(l=>l instanceof mm).length;if(o>1||o>0&&a>0)throw new W(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class mm extends q7{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new mm(e,n,r)}_apply(e){const n=this._parse(e);return MR(e._query,n),new Ha(e.firestore,e.converter,hy(e._query,n))}_parse(e){const n=RR(e.firestore);return function(s,o,a,l,c,d,h){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new W(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){qS(h,d);const p=[];for(const y of h)p.push(HS(l,s,y));m={arrayValue:{values:p}}}else m=HS(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||qS(h,d),m=z7(a,o,h,d==="in"||d==="not-in");return ct.create(c,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ga(t,e,n){const r=e,i=m1("where",t);return mm._create(i,r,n)}class g1 extends p1{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new g1(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:dr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)MR(o,l),o=hy(o,l)}(e._query,n),new Ha(e.firestore,e.converter,hy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function HS(t,e,n){if(typeof(n=yt(n))=="string"){if(n==="")throw new W(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DA(e)&&n.indexOf("/")!==-1)throw new W(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Le.fromString(n));if(!ee.isDocumentKey(r))throw new W(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pS(t,new ee(r))}if(n instanceof mn)return pS(t,n._key);throw new W(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dm(n)}.`)}function qS(t,e){if(!Array.isArray(t)||t.length===0)throw new W(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MR(t,e){if(e.isInequality()){const r=Gx(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new W(j.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=NA(t);s!==null&&G7(t,i,s)}const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function G7(t,e,n){if(!n.isEqual(e))throw new W(j.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class K7{convertValue(e,n="none"){switch(ro(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(no(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Va(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new d1(at(e.latitude),at(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Vx(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(kc(e));default:return null}}convertTimestamp(e){const n=rs(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Le.fromString(e);$e(tR(r));const i=new Tc(r.get(1),r.get(3)),s=new ee(r.popFirst(5));return i.isEqual(n)||ui(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X7(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class LR extends OR{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(m1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Rd extends LR{data(e={}){return super.data(e)}}class Q7{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new wl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Rd(this._firestore,this._userDataWriter,r.key,r,new wl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Rd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new wl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Rd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new wl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:Y7(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Y7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J7(t){t=ss(t,mn);const e=ss(t.firestore,fu);return R7(c1(e),t._key).then(n=>tW(e,t,n))}class FR extends K7{constructor(e){super(),this.firestore=e}convertBytes(e){return new Aa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,n)}}function Ka(t){t=ss(t,Ha);const e=ss(t.firestore,fu),n=c1(e),r=new FR(e);return H7(t._query),P7(n,t._query).then(i=>new Q7(e,r,t,i))}function Z7(t,e,n){t=ss(t,mn);const r=ss(t.firestore,fu),i=X7(t.converter,e,n);return $R(r,[$7(RR(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Nr.none())])}function eW(t){return $R(ss(t.firestore,fu),[new Kx(t._key,Nr.none())])}function $R(t,e){return function(r,i){const s=new ri;return r.asyncQueue.enqueueAndForget(async()=>g7(await A7(r),i,s)),s.promise}(c1(t),e)}function tW(t,e,n){const r=n.docs.get(e._key),i=new FR(t);return new LR(t,i,e._key,r,new wl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ba=i})(go),Zs(new ts("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new fu(new nV(r.getProvider("auth-internal")),new oV(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new W(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tc(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ar(uS,"4.1.2",e),Ar(uS,"4.1.2","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="firebasestorage.googleapis.com",BR="storageBucket",nW=2*60*1e3,rW=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze extends zr{constructor(e,n,r=0){super(ig(e),`Firebase Storage: ${n} (${ig(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ze.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ig(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Je;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Je||(Je={}));function ig(t){return"storage/"+t}function y1(){const t="An unknown error occurred, please check the error payload for server response.";return new Ze(Je.UNKNOWN,t)}function iW(t){return new Ze(Je.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function sW(t){return new Ze(Je.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function oW(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ze(Je.UNAUTHENTICATED,t)}function aW(){return new Ze(Je.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function lW(t){return new Ze(Je.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function cW(){return new Ze(Je.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function uW(){return new Ze(Je.CANCELED,"User canceled the upload/download.")}function dW(t){return new Ze(Je.INVALID_URL,"Invalid URL '"+t+"'.")}function hW(t){return new Ze(Je.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function fW(){return new Ze(Je.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+BR+"' property when initializing the app?")}function mW(){return new Ze(Je.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function pW(){return new Ze(Je.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function gW(t){return new Ze(Je.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function _y(t){return new Ze(Je.INVALID_ARGUMENT,t)}function VR(){return new Ze(Je.APP_DELETED,"The Firebase app was deleted.")}function yW(t){return new Ze(Je.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Fl(t,e){return new Ze(Je.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function cl(t){throw new Ze(Je.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=bn.makeFromUrl(e,n)}catch{return new bn(e,"")}if(r.path==="")return r;throw hW(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${d}/b/${i}/o${m}`,"i"),y={bucket:1,path:3},x=n===zR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",v=new RegExp(`^https?://${x}/${i}/${_}`,"i"),w=[{regex:a,indices:l,postModify:s},{regex:p,indices:y,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let E=0;E<w.length;E++){const S=w[E],T=S.regex.exec(e);if(T){const k=T[S.indices.bucket];let b=T[S.indices.path];b||(b=""),r=new bn(k,b),S.postModify(r);break}}if(r==null)throw dW(e);return r}}class vW{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xW(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(..._){c||(c=!0,e.apply(null,_))}function h(_){i=setTimeout(()=>{i=null,t(p,l())},_)}function m(){s&&clearTimeout(s)}function p(_,...v){if(c){m();return}if(_){m(),d.call(null,_,...v);return}if(l()||o){m(),d.call(null,_,...v);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,h(w)}let y=!1;function x(_){y||(y=!0,m(),!c&&(i!==null?(_||(a=2),clearTimeout(i),h(0)):_||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,x(!0)},n),x}function wW(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _W(t){return t!==void 0}function EW(t){return typeof t=="object"&&!Array.isArray(t)}function v1(t){return typeof t=="string"||t instanceof String}function GS(t){return x1()&&t instanceof Blob}function x1(){return typeof Blob<"u"&&!I$()}function KS(t,e,n,r){if(r<e)throw _y(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw _y(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function UR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Bs||(Bs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SW(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bW{constructor(e,n,r,i,s,o,a,l,c,d,h,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,y)=>{this.resolve_=p,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new ed(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Bs.NO_ERROR,l=s.getStatus();if(!a||SW(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Bs.ABORT;r(!1,new ed(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new ed(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());_W(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=y1();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?VR():uW();o(l)}else{const l=cW();o(l)}};this.canceled_?n(!1,new ed(!1,null,!0)):this.backoffId_=xW(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&wW(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ed{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function kW(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function TW(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function IW(t,e){e&&(t["X-Firebase-GMPID"]=e)}function CW(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function AW(t,e,n,r,i,s,o=!0){const a=UR(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return IW(c,e),kW(c,n),TW(c,s),CW(c,r),new bW(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RW(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function PW(...t){const e=RW();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(x1())return new Blob(t);throw new Ze(Je.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function NW(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DW(t){if(typeof atob>"u")throw gW("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class sg{constructor(e,n){this.data=e,this.contentType=n||null}}function jW(t,e){switch(t){case Tr.RAW:return new sg(WR(e));case Tr.BASE64:case Tr.BASE64URL:return new sg(HR(t,e));case Tr.DATA_URL:return new sg(MW(e),LW(e))}throw y1()}function WR(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function OW(t){let e;try{e=decodeURIComponent(t)}catch{throw Fl(Tr.DATA_URL,"Malformed data URL.")}return WR(e)}function HR(t,e){switch(t){case Tr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Fl(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Tr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Fl(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=DW(e)}catch(i){throw i.message.includes("polyfill")?i:Fl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class qR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Fl(Tr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=FW(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function MW(t){const e=new qR(t);return e.base64?HR(Tr.BASE64,e.rest):OW(e.rest)}function LW(t){return new qR(t).contentType}function FW(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n){let r=0,i="";GS(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(GS(this.data_)){const r=this.data_,i=NW(r,e,n);return i===null?null:new Ni(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ni(r,!0)}}static getBlob(...e){if(x1()){const n=e.map(r=>r instanceof Ni?r.data_:r);return new Ni(PW.apply(null,n))}else{const n=e.map(o=>v1(o)?jW(Tr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Ni(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(t){let e;try{e=JSON.parse(t)}catch{return null}return EW(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $W(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function zW(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function KR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BW(t,e){return e}class Xt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||BW}}let td=null;function VW(t){return!v1(t)||t.length<2?t:KR(t)}function XR(){if(td)return td;const t=[];t.push(new Xt("bucket")),t.push(new Xt("generation")),t.push(new Xt("metageneration")),t.push(new Xt("name","fullPath",!0));function e(s,o){return VW(o)}const n=new Xt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Xt("size");return i.xform=r,t.push(i),t.push(new Xt("timeCreated")),t.push(new Xt("updated")),t.push(new Xt("md5Hash",null,!0)),t.push(new Xt("cacheControl",null,!0)),t.push(new Xt("contentDisposition",null,!0)),t.push(new Xt("contentEncoding",null,!0)),t.push(new Xt("contentLanguage",null,!0)),t.push(new Xt("contentType",null,!0)),t.push(new Xt("metadata","customMetadata",!0)),td=t,td}function UW(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new bn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function WW(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return UW(r,t),r}function QR(t,e,n){const r=GR(e);return r===null?null:WW(t,r,n)}function HW(t,e,n,r){const i=GR(e);if(i===null||!v1(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const d=t.bucket,h=t.fullPath,m="/b/"+o(d)+"/o/"+o(h),p=pm(m,n,r),y=UR({alt:"media",token:c});return p+y})[0]}function qW(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class w1{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t){if(!t)throw y1()}function GW(t,e){function n(r,i){const s=QR(t,i,e);return YR(s!==null),s}return n}function KW(t,e){function n(r,i){const s=QR(t,i,e);return YR(s!==null),HW(s,i,t.host,t._protocol)}return n}function JR(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=aW():i=oW():n.getStatus()===402?i=sW(t.bucket):n.getStatus()===403?i=lW(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function ZR(t){const e=JR(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=iW(t.path)),s.serverResponse=i.serverResponse,s}return n}function XW(t,e,n){const r=e.fullServerUrl(),i=pm(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new w1(i,s,KW(t,n),o);return a.errorHandler=ZR(e),a}function QW(t,e){const n=e.fullServerUrl(),r=pm(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new w1(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=ZR(e),a}function YW(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function JW(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=YW(null,e)),r}function ZW(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=JW(e,r,i),d=qW(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,m=`\r
--`+l+"--",p=Ni.getBlob(h,r,m);if(p===null)throw mW();const y={name:c.fullPath},x=pm(s,t.host,t._protocol),_="POST",v=t.maxUploadRetryTime,g=new w1(x,_,GW(t,n),v);return g.urlParams=y,g.headers=o,g.body=p.uploadData(),g.errorHandler=JR(e),g}class eH{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Bs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Bs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Bs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw cl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw cl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw cl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw cl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw cl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class tH extends eH{initXhr(){this.xhr_.responseType="text"}}function _1(){return new tH}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n){this._service=e,n instanceof bn?this._location=n:this._location=bn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new io(e,n)}get root(){const e=new bn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return KR(this._location.path)}get storage(){return this._service}get parent(){const e=$W(this._location.path);if(e===null)return null;const n=new bn(this._location.bucket,e);return new io(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw yW(e)}}function nH(t,e,n){t._throwIfRoot("uploadBytes");const r=ZW(t.storage,t._location,XR(),new Ni(e,!0),n);return t.storage.makeRequestWithTokens(r,_1).then(i=>({metadata:i,ref:t}))}function rH(t){t._throwIfRoot("getDownloadURL");const e=XW(t.storage,t._location,XR());return t.storage.makeRequestWithTokens(e,_1).then(n=>{if(n===null)throw pW();return n})}function iH(t){t._throwIfRoot("deleteObject");const e=QW(t.storage,t._location);return t.storage.makeRequestWithTokens(e,_1)}function sH(t,e){const n=zW(t._location.path,e),r=new bn(t._location.bucket,n);return new io(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oH(t){return/^[A-Za-z]+:\/\//.test(t)}function aH(t,e){return new io(t,e)}function eP(t,e){if(t instanceof E1){const n=t;if(n._bucket==null)throw fW();const r=new io(n,n._bucket);return e!=null?eP(r,e):r}else return e!==void 0?sH(t,e):t}function lH(t,e){if(e&&oH(e)){if(t instanceof E1)return aH(t,e);throw _y("To use ref(service, url), the first argument must be a Storage instance.")}else return eP(t,e)}function XS(t,e){const n=e==null?void 0:e[BR];return n==null?null:bn.makeFromBucketSpec(n,t)}function cH(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:OI(i,t.app.options.projectId))}class E1{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=zR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=nW,this._maxUploadRetryTime=rW,this._requests=new Set,i!=null?this._bucket=bn.makeFromBucketSpec(i,this._host):this._bucket=XS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=bn.makeFromBucketSpec(this._url,e):this._bucket=XS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){KS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){KS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new io(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new vW(VR());{const o=AW(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const QS="@firebase/storage",YS="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP="storage";function nP(t,e,n){return t=yt(t),nH(t,e,n)}function rP(t){return t=yt(t),rH(t)}function uH(t){return t=yt(t),iH(t)}function S1(t,e){return t=yt(t),lH(t,e)}function dH(t=lx(),e){t=yt(t);const r=Of(t,tP).getImmediate({identifier:e}),i=NI("storage");return i&&hH(r,...i),r}function hH(t,e,n,r={}){cH(t,e,n,r)}function fH(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new E1(n,r,i,e,go)}function mH(){Zs(new ts(tP,fH,"PUBLIC").setMultipleInstances(!0)),Ar(QS,YS,""),Ar(QS,YS,"esm2017")}mH();const b1=FI({apiKey:"AIzaSyBPNpckpYiu009eSzHz_1YMlwHLtScgVjE",appId:"1:938280289868:web:1b426fc2dba5d03dde96e9",projectId:"zingmp3-clone-61799",storageBucket:"zingmp3-clone-61799.appspot.com",authDomain:"zingmp3-clone-61799.firebaseapp.com",messagingSenderId:"938280289868"}),wo=O7(b1),os=H8(b1);new wr;const k1=dH(b1);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function iP(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function sP(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Go=function(){return Go=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Go.apply(this,arguments)},oP=function(t){return{loading:t==null,value:t}},pH=function(){return function(t,e){switch(e.type){case"error":return Go(Go({},t),{error:e.error,loading:!1,value:void 0});case"reset":return oP(e.defaultValue);case"value":return Go(Go({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},gH=function(t){var e=t?t():void 0,n=f.useReducer(pH(),oP(e)),r=n[0],i=n[1],s=f.useCallback(function(){var l=t?t():void 0;i({type:"reset",defaultValue:l})},[t]),o=f.useCallback(function(l){i({type:"error",error:l})},[]),a=f.useCallback(function(l){i({type:"value",value:l})},[]);return f.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}},[r.error,r.loading,s,o,a,r.value])},mu=function(t,e){var n=gH(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,a=n.value;return f.useEffect(function(){var l=Dz(t,function(c){return iP(void 0,void 0,void 0,function(){var d;return sP(this,function(h){switch(h.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return h.sent(),[3,4];case 3:return d=h.sent(),s(d),[3,4];case 4:return o(c),[2]}})})},s);return function(){l()}},[t]),[a,i,r]},yH=function(t){var e=f.useCallback(function(n,r){var i=new wr;return n&&n.forEach(function(s){return i.addScope(s)}),r&&i.setCustomParameters(r),i},[]);return vH(t,e)},vH=function(t,e){var n=f.useState(),r=n[0],i=n[1],s=f.useState(),o=s[0],a=s[1],l=f.useState(!1),c=l[0],d=l[1],h=f.useCallback(function(m,p){return iP(void 0,void 0,void 0,function(){var y,x,_;return sP(this,function(v){switch(v.label){case 0:d(!0),i(void 0),v.label=1;case 1:return v.trys.push([1,3,4,5]),y=e(m,p),[4,e8(t,y)];case 2:return x=v.sent(),a(x),[2,x];case 3:return _=v.sent(),i(_),[3,5];case 4:return d(!1),[7];case 5:return[2]}})})},[t,e]);return[h,o,c,r]},aP={exports:{}},lP={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ra=f;function xH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wH=typeof Object.is=="function"?Object.is:xH,_H=Ra.useState,EH=Ra.useEffect,SH=Ra.useLayoutEffect,bH=Ra.useDebugValue;function kH(t,e){var n=e(),r=_H({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return SH(function(){i.value=n,i.getSnapshot=e,og(i)&&s({inst:i})},[t,n,e]),EH(function(){return og(i)&&s({inst:i}),t(function(){og(i)&&s({inst:i})})},[t]),bH(n),n}function og(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wH(t,n)}catch{return!0}}function TH(t,e){return e()}var IH=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?TH:kH;lP.useSyncExternalStore=Ra.useSyncExternalStore!==void 0?Ra.useSyncExternalStore:IH;aP.exports=lP;var CH=aP.exports,cP={exports:{}},uP={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gm=f,AH=CH;function RH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var PH=typeof Object.is=="function"?Object.is:RH,NH=AH.useSyncExternalStore,DH=gm.useRef,jH=gm.useEffect,OH=gm.useMemo,MH=gm.useDebugValue;uP.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=DH(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=OH(function(){function l(p){if(!c){if(c=!0,d=p,p=r(p),i!==void 0&&o.hasValue){var y=o.value;if(i(y,p))return h=y}return h=p}if(y=h,PH(d,p))return y;var x=r(p);return i!==void 0&&i(y,x)?y:(d=p,h=x)}var c=!1,d,h,m=n===void 0?null:n;return[function(){return l(e())},m===null?void 0:function(){return l(m())}]},[e,n,r,i]);var a=NH(t,s[0],s[1]);return jH(function(){o.hasValue=!0,o.value=a},[a]),MH(a),a};cP.exports=uP;var LH=cP.exports;function FH(t){t()}let dP=FH;const $H=t=>dP=t,zH=()=>dP,JS=Symbol.for("react-redux-context"),ZS=typeof globalThis<"u"?globalThis:{};function BH(){var t;if(!f.createContext)return{};const e=(t=ZS[JS])!=null?t:ZS[JS]=new Map;let n=e.get(f.createContext);return n||(n=f.createContext(null),e.set(f.createContext,n)),n}const as=BH();function T1(t=as){return function(){return f.useContext(t)}}const hP=T1(),VH=()=>{throw new Error("uSES not initialized!")};let fP=VH;const UH=t=>{fP=t},WH=(t,e)=>t===e;function HH(t=as){const e=t===as?hP:T1(t);return function(r,i={}){const{equalityFn:s=WH,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:l,subscription:c,getServerState:d,stabilityCheck:h,noopCheck:m}=e();f.useRef(!0);const p=f.useCallback({[r.name](x){return r(x)}}[r.name],[r,h,o]),y=fP(c.addNestedSub,l.getState,d||l.getState,p,s);return f.useDebugValue(y),y}}const Y=HH();var mP={exports:{}},Ae={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kt=typeof Symbol=="function"&&Symbol.for,I1=kt?Symbol.for("react.element"):60103,C1=kt?Symbol.for("react.portal"):60106,ym=kt?Symbol.for("react.fragment"):60107,vm=kt?Symbol.for("react.strict_mode"):60108,xm=kt?Symbol.for("react.profiler"):60114,wm=kt?Symbol.for("react.provider"):60109,_m=kt?Symbol.for("react.context"):60110,A1=kt?Symbol.for("react.async_mode"):60111,Em=kt?Symbol.for("react.concurrent_mode"):60111,Sm=kt?Symbol.for("react.forward_ref"):60112,bm=kt?Symbol.for("react.suspense"):60113,qH=kt?Symbol.for("react.suspense_list"):60120,km=kt?Symbol.for("react.memo"):60115,Tm=kt?Symbol.for("react.lazy"):60116,GH=kt?Symbol.for("react.block"):60121,KH=kt?Symbol.for("react.fundamental"):60117,XH=kt?Symbol.for("react.responder"):60118,QH=kt?Symbol.for("react.scope"):60119;function Ln(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case I1:switch(t=t.type,t){case A1:case Em:case ym:case xm:case vm:case bm:return t;default:switch(t=t&&t.$$typeof,t){case _m:case Sm:case Tm:case km:case wm:return t;default:return e}}case C1:return e}}}function pP(t){return Ln(t)===Em}Ae.AsyncMode=A1;Ae.ConcurrentMode=Em;Ae.ContextConsumer=_m;Ae.ContextProvider=wm;Ae.Element=I1;Ae.ForwardRef=Sm;Ae.Fragment=ym;Ae.Lazy=Tm;Ae.Memo=km;Ae.Portal=C1;Ae.Profiler=xm;Ae.StrictMode=vm;Ae.Suspense=bm;Ae.isAsyncMode=function(t){return pP(t)||Ln(t)===A1};Ae.isConcurrentMode=pP;Ae.isContextConsumer=function(t){return Ln(t)===_m};Ae.isContextProvider=function(t){return Ln(t)===wm};Ae.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===I1};Ae.isForwardRef=function(t){return Ln(t)===Sm};Ae.isFragment=function(t){return Ln(t)===ym};Ae.isLazy=function(t){return Ln(t)===Tm};Ae.isMemo=function(t){return Ln(t)===km};Ae.isPortal=function(t){return Ln(t)===C1};Ae.isProfiler=function(t){return Ln(t)===xm};Ae.isStrictMode=function(t){return Ln(t)===vm};Ae.isSuspense=function(t){return Ln(t)===bm};Ae.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===ym||t===Em||t===xm||t===vm||t===bm||t===qH||typeof t=="object"&&t!==null&&(t.$$typeof===Tm||t.$$typeof===km||t.$$typeof===wm||t.$$typeof===_m||t.$$typeof===Sm||t.$$typeof===KH||t.$$typeof===XH||t.$$typeof===QH||t.$$typeof===GH)};Ae.typeOf=Ln;mP.exports=Ae;var YH=mP.exports,gP=YH,JH={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ZH={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},yP={};yP[gP.ForwardRef]=JH;yP[gP.Memo]=ZH;var Pe={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R1=Symbol.for("react.element"),P1=Symbol.for("react.portal"),Im=Symbol.for("react.fragment"),Cm=Symbol.for("react.strict_mode"),Am=Symbol.for("react.profiler"),Rm=Symbol.for("react.provider"),Pm=Symbol.for("react.context"),eq=Symbol.for("react.server_context"),Nm=Symbol.for("react.forward_ref"),Dm=Symbol.for("react.suspense"),jm=Symbol.for("react.suspense_list"),Om=Symbol.for("react.memo"),Mm=Symbol.for("react.lazy"),tq=Symbol.for("react.offscreen"),vP;vP=Symbol.for("react.module.reference");function Qn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case R1:switch(t=t.type,t){case Im:case Am:case Cm:case Dm:case jm:return t;default:switch(t=t&&t.$$typeof,t){case eq:case Pm:case Nm:case Mm:case Om:case Rm:return t;default:return e}}case P1:return e}}}Pe.ContextConsumer=Pm;Pe.ContextProvider=Rm;Pe.Element=R1;Pe.ForwardRef=Nm;Pe.Fragment=Im;Pe.Lazy=Mm;Pe.Memo=Om;Pe.Portal=P1;Pe.Profiler=Am;Pe.StrictMode=Cm;Pe.Suspense=Dm;Pe.SuspenseList=jm;Pe.isAsyncMode=function(){return!1};Pe.isConcurrentMode=function(){return!1};Pe.isContextConsumer=function(t){return Qn(t)===Pm};Pe.isContextProvider=function(t){return Qn(t)===Rm};Pe.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===R1};Pe.isForwardRef=function(t){return Qn(t)===Nm};Pe.isFragment=function(t){return Qn(t)===Im};Pe.isLazy=function(t){return Qn(t)===Mm};Pe.isMemo=function(t){return Qn(t)===Om};Pe.isPortal=function(t){return Qn(t)===P1};Pe.isProfiler=function(t){return Qn(t)===Am};Pe.isStrictMode=function(t){return Qn(t)===Cm};Pe.isSuspense=function(t){return Qn(t)===Dm};Pe.isSuspenseList=function(t){return Qn(t)===jm};Pe.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Im||t===Am||t===Cm||t===Dm||t===jm||t===tq||typeof t=="object"&&t!==null&&(t.$$typeof===Mm||t.$$typeof===Om||t.$$typeof===Rm||t.$$typeof===Pm||t.$$typeof===Nm||t.$$typeof===vP||t.getModuleId!==void 0)};Pe.typeOf=Qn;function nq(){const t=zH();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=e;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:e=s,function(){!i||e===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}const eb={notify(){},get:()=>[]};function rq(t,e){let n,r=eb;function i(h){return l(),r.subscribe(h)}function s(){r.notify()}function o(){d.onStateChange&&d.onStateChange()}function a(){return!!n}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=nq())}function c(){n&&(n(),n=void 0,r.clear(),r=eb)}const d={addNestedSub:i,notifyNestedSubs:s,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:c,getListeners:()=>r};return d}const iq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sq=iq?f.useLayoutEffect:f.useEffect;function oq({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",noopCheck:s="once"}){const o=f.useMemo(()=>{const c=rq(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:s}},[t,r,i,s]),a=f.useMemo(()=>t.getState(),[t]);sq(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||as;return f.createElement(l.Provider,{value:o},n)}function xP(t=as){const e=t===as?hP:T1(t);return function(){const{store:r}=e();return r}}const aq=xP();function lq(t=as){const e=t===as?aq:xP(t);return function(){return e().dispatch}}const Ke=lq();UH(LH.useSyncExternalStoreWithSelector);$H(ho.unstable_batchedUpdates);function sr(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ls(t){return!!t&&!!t[ze]}function fi(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===gq}(t)||Array.isArray(t)||!!t[ab]||!!(!((e=t.constructor)===null||e===void 0)&&e[ab])||N1(t)||D1(t))}function so(t,e,n){n===void 0&&(n=!1),Xa(t)===0?(n?Object.keys:oa)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,i){return e(i,r,t)})}function Xa(t){var e=t[ze];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:N1(t)?2:D1(t)?3:0}function sa(t,e){return Xa(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function cq(t,e){return Xa(t)===2?t.get(e):t[e]}function wP(t,e,n){var r=Xa(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function _P(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function N1(t){return mq&&t instanceof Map}function D1(t){return pq&&t instanceof Set}function Is(t){return t.o||t.t}function j1(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=SP(t);delete e[ze];for(var n=oa(e),r=0;r<n.length;r++){var i=n[r],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function O1(t,e){return e===void 0&&(e=!1),M1(t)||ls(t)||!fi(t)||(Xa(t)>1&&(t.set=t.add=t.clear=t.delete=uq),Object.freeze(t),e&&so(t,function(n,r){return O1(r,!0)},!0)),t}function uq(){sr(2)}function M1(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function jr(t){var e=Ty[t];return e||sr(18,t),e}function dq(t,e){Ty[t]||(Ty[t]=e)}function Ey(){return Rc}function ag(t,e){e&&(jr("Patches"),t.u=[],t.s=[],t.v=e)}function Wh(t){Sy(t),t.p.forEach(hq),t.p=null}function Sy(t){t===Rc&&(Rc=t.l)}function tb(t){return Rc={p:[],l:Rc,h:t,m:!0,_:0}}function hq(t){var e=t[ze];e.i===0||e.i===1?e.j():e.g=!0}function lg(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||jr("ES5").S(e,t,r),r?(n[ze].P&&(Wh(e),sr(4)),fi(t)&&(t=Hh(e,t),e.l||qh(e,t)),e.u&&jr("Patches").M(n[ze].t,t,e.u,e.s)):t=Hh(e,n,[]),Wh(e),e.u&&e.v(e.u,e.s),t!==EP?t:void 0}function Hh(t,e,n){if(M1(e))return e;var r=e[ze];if(!r)return so(e,function(a,l){return nb(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return qh(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=j1(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),so(s,function(a,l){return nb(t,r,i,a,l,n,o)}),qh(t,i,!1),n&&t.u&&jr("Patches").N(r,n,t.u,t.s)}return r.o}function nb(t,e,n,r,i,s,o){if(ls(i)){var a=Hh(t,i,s&&e&&e.i!==3&&!sa(e.R,r)?s.concat(r):void 0);if(wP(n,r,a),!ls(a))return;t.m=!1}else o&&n.add(i);if(fi(i)&&!M1(i)){if(!t.h.D&&t._<1)return;Hh(t,i),e&&e.A.l||qh(t,i)}}function qh(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&O1(e,n)}function cg(t,e){var n=t[ze];return(n?Is(n):t)[e]}function rb(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Di(t){t.P||(t.P=!0,t.l&&Di(t.l))}function ug(t){t.o||(t.o=j1(t.t))}function by(t,e,n){var r=N1(e)?jr("MapSet").F(e,n):D1(e)?jr("MapSet").T(e,n):t.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Ey(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,c=Pc;o&&(l=[a],c=_l);var d=Proxy.revocable(l,c),h=d.revoke,m=d.proxy;return a.k=m,a.j=h,m}(e,n):jr("ES5").J(e,n);return(n?n.A:Ey()).p.push(r),r}function ky(t){return ls(t)||sr(22,t),function e(n){if(!fi(n))return n;var r,i=n[ze],s=Xa(n);if(i){if(!i.P&&(i.i<4||!jr("ES5").K(i)))return i.t;i.I=!0,r=ib(n,s),i.I=!1}else r=ib(n,s);return so(r,function(o,a){i&&cq(i.t,o)===a||wP(r,o,e(a))}),s===3?new Set(r):r}(t)}function ib(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return j1(t)}function fq(){function t(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var l=this[ze];return Pc.get(l,s)},set:function(l){var c=this[ze];Pc.set(c,s,l)}},a}function e(s){for(var o=s.length-1;o>=0;o--){var a=s[o][ze];if(!a.P)switch(a.i){case 5:r(a)&&Di(a);break;case 4:n(a)&&Di(a)}}}function n(s){for(var o=s.t,a=s.k,l=oa(a),c=l.length-1;c>=0;c--){var d=l[c];if(d!==ze){var h=o[d];if(h===void 0&&!sa(o,d))return!0;var m=a[d],p=m&&m[ze];if(p?p.t!==h:!_P(m,h))return!0}}var y=!!o[ze];return l.length!==oa(o).length+(y?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var i={};dq("ES5",{J:function(s,o){var a=Array.isArray(s),l=function(d,h){if(d){for(var m=Array(h.length),p=0;p<h.length;p++)Object.defineProperty(m,""+p,t(p,!0));return m}var y=SP(h);delete y[ze];for(var x=oa(y),_=0;_<x.length;_++){var v=x[_];y[v]=t(v,d||!!y[v].enumerable)}return Object.create(Object.getPrototypeOf(h),y)}(a,s),c={i:a?5:4,A:o?o.A:Ey(),P:!1,I:!1,R:{},l:o,t:s,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,ze,{value:c,writable:!0}),l},S:function(s,o,a){a?ls(o)&&o[ze].A===s&&e(s.p):(s.u&&function l(c){if(c&&typeof c=="object"){var d=c[ze];if(d){var h=d.t,m=d.k,p=d.R,y=d.i;if(y===4)so(m,function(w){w!==ze&&(h[w]!==void 0||sa(h,w)?p[w]||l(m[w]):(p[w]=!0,Di(d)))}),so(h,function(w){m[w]!==void 0||sa(m,w)||(p[w]=!1,Di(d))});else if(y===5){if(r(d)&&(Di(d),p.length=!0),m.length<h.length)for(var x=m.length;x<h.length;x++)p[x]=!1;else for(var _=h.length;_<m.length;_++)p[_]=!0;for(var v=Math.min(m.length,h.length),g=0;g<v;g++)m.hasOwnProperty(g)||(p[g]=!0),p[g]===void 0&&l(m[g])}}}}(s.p[0]),e(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var sb,Rc,L1=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",mq=typeof Map<"u",pq=typeof Set<"u",ob=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",EP=L1?Symbol.for("immer-nothing"):((sb={})["immer-nothing"]=!0,sb),ab=L1?Symbol.for("immer-draftable"):"__$immer_draftable",ze=L1?Symbol.for("immer-state"):"__$immer_state",gq=""+Object.prototype.constructor,oa=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,SP=Object.getOwnPropertyDescriptors||function(t){var e={};return oa(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},Ty={},Pc={get:function(t,e){if(e===ze)return t;var n=Is(t);if(!sa(n,e))return function(i,s,o){var a,l=rb(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(t,n,e);var r=n[e];return t.I||!fi(r)?r:r===cg(t.t,e)?(ug(t),t.o[e]=by(t.A.h,r,t)):r},has:function(t,e){return e in Is(t)},ownKeys:function(t){return Reflect.ownKeys(Is(t))},set:function(t,e,n){var r=rb(Is(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=cg(Is(t),e),s=i==null?void 0:i[ze];if(s&&s.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(_P(n,i)&&(n!==void 0||sa(t.t,e)))return!0;ug(t),Di(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return cg(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,ug(t),Di(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Is(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){sr(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){sr(12)}},_l={};so(Pc,function(t,e){_l[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),_l.deleteProperty=function(t,e){return _l.set.call(this,t,e,void 0)},_l.set=function(t,e,n){return Pc.set.call(this,t[0],e,n,t[0])};var yq=function(){function t(n){var r=this;this.O=ob,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=r;return function(x){var _=this;x===void 0&&(x=a);for(var v=arguments.length,g=Array(v>1?v-1:0),w=1;w<v;w++)g[w-1]=arguments[w];return l.produce(x,function(E){var S;return(S=s).call.apply(S,[_,E].concat(g))})}}var c;if(typeof s!="function"&&sr(6),o!==void 0&&typeof o!="function"&&sr(7),fi(i)){var d=tb(r),h=by(r,i,void 0),m=!0;try{c=s(h),m=!1}finally{m?Wh(d):Sy(d)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(x){return ag(d,o),lg(x,d)},function(x){throw Wh(d),x}):(ag(d,o),lg(c,d))}if(!i||typeof i!="object"){if((c=s(i))===void 0&&(c=i),c===EP&&(c=void 0),r.D&&O1(c,!0),o){var p=[],y=[];jr("Patches").M(i,c,p,y),o(p,y)}return c}sr(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(c){for(var d=arguments.length,h=Array(d>1?d-1:0),m=1;m<d;m++)h[m-1]=arguments[m];return r.produceWithPatches(c,function(p){return i.apply(void 0,[p].concat(h))})};var o,a,l=r.produce(i,s,function(c,d){o=c,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){fi(n)||sr(8),ls(n)&&(n=ky(n));var r=tb(this),i=by(this,n,void 0);return i[ze].C=!0,Sy(r),i},e.finishDraft=function(n,r){var i=n&&n[ze],s=i.A;return ag(s,r),lg(void 0,s)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!ob&&sr(20),this.O=n},e.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=jr("Patches").$;return ls(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),Pn=new yq,bP=Pn.produce;Pn.produceWithPatches.bind(Pn);Pn.setAutoFreeze.bind(Pn);Pn.setUseProxies.bind(Pn);Pn.applyPatches.bind(Pn);Pn.createDraft.bind(Pn);Pn.finishDraft.bind(Pn);function Nc(t){"@babel/helpers - typeof";return Nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nc(t)}function vq(t,e){if(Nc(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Nc(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xq(t){var e=vq(t,"string");return Nc(e)==="symbol"?e:String(e)}function wq(t,e,n){return e=xq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lb(Object(n),!0).forEach(function(r){wq(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var ub=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),dg=function(){return Math.random().toString(36).substring(7).split("").join(".")},Gh={INIT:"@@redux/INIT"+dg(),REPLACE:"@@redux/REPLACE"+dg(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+dg()}};function _q(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function kP(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Mt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Mt(1));return n(kP)(t,e)}if(typeof t!="function")throw new Error(Mt(2));var i=t,s=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function d(){if(l)throw new Error(Mt(3));return s}function h(x){if(typeof x!="function")throw new Error(Mt(4));if(l)throw new Error(Mt(5));var _=!0;return c(),a.push(x),function(){if(_){if(l)throw new Error(Mt(6));_=!1,c();var g=a.indexOf(x);a.splice(g,1),o=null}}}function m(x){if(!_q(x))throw new Error(Mt(7));if(typeof x.type>"u")throw new Error(Mt(8));if(l)throw new Error(Mt(9));try{l=!0,s=i(s,x)}finally{l=!1}for(var _=o=a,v=0;v<_.length;v++){var g=_[v];g()}return x}function p(x){if(typeof x!="function")throw new Error(Mt(10));i=x,m({type:Gh.REPLACE})}function y(){var x,_=h;return x={subscribe:function(g){if(typeof g!="object"||g===null)throw new Error(Mt(11));function w(){g.next&&g.next(d())}w();var E=_(w);return{unsubscribe:E}}},x[ub]=function(){return this},x}return m({type:Gh.INIT}),r={dispatch:m,subscribe:h,getState:d,replaceReducer:p},r[ub]=y,r}function Eq(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:Gh.INIT});if(typeof r>"u")throw new Error(Mt(12));if(typeof n(void 0,{type:Gh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Mt(13))})}function Sq(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];typeof t[i]=="function"&&(n[i]=t[i])}var s=Object.keys(n),o;try{Eq(n)}catch(a){o=a}return function(l,c){if(l===void 0&&(l={}),o)throw o;for(var d=!1,h={},m=0;m<s.length;m++){var p=s[m],y=n[p],x=l[p],_=y(x,c);if(typeof _>"u")throw c&&c.type,new Error(Mt(14));h[p]=_,d=d||_!==x}return d=d||s.length!==Object.keys(l).length,d?h:l}}function Kh(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function bq(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Mt(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return s=Kh.apply(void 0,a)(i.dispatch),cb(cb({},i),{},{dispatch:s})}}}function TP(t){var e=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,t):o(a)}}};return e}var IP=TP();IP.withExtraArgument=TP;const db=IP;var CP=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kq=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Pa=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},Tq=Object.defineProperty,Iq=Object.defineProperties,Cq=Object.getOwnPropertyDescriptors,hb=Object.getOwnPropertySymbols,Aq=Object.prototype.hasOwnProperty,Rq=Object.prototype.propertyIsEnumerable,fb=function(t,e,n){return e in t?Tq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},Yi=function(t,e){for(var n in e||(e={}))Aq.call(e,n)&&fb(t,n,e[n]);if(hb)for(var r=0,i=hb(e);r<i.length;r++){var n=i[r];Rq.call(e,n)&&fb(t,n,e[n])}return t},hg=function(t,e){return Iq(t,Cq(e))},Pq=function(t,e,n){return new Promise(function(r,i){var s=function(l){try{a(n.next(l))}catch(c){i(c)}},o=function(l){try{a(n.throw(l))}catch(c){i(c)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(s,o)};a((n=n.apply(t,e)).next())})},Nq=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Kh:Kh.apply(null,arguments)};function Dq(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var jq=function(t){CP(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Pa([void 0],n[0].concat(this)))):new(e.bind.apply(e,Pa([void 0],n.concat(this))))},e}(Array),Oq=function(t){CP(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Pa([void 0],n[0].concat(this)))):new(e.bind.apply(e,Pa([void 0],n.concat(this))))},e}(Array);function Iy(t){return fi(t)?bP(t,function(){}):t}function Mq(t){return typeof t=="boolean"}function Lq(){return function(e){return Fq(e)}}function Fq(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new jq;return n&&(Mq(n)?r.push(db):r.push(db.withExtraArgument(n.extraArgument))),r}var $q=!0;function zq(t){var e=Lq(),n=t||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?e():s,a=n.devTools,l=a===void 0?!0:a,c=n.preloadedState,d=c===void 0?void 0:c,h=n.enhancers,m=h===void 0?void 0:h,p;if(typeof i=="function")p=i;else if(Dq(i))p=Sq(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var y=o;typeof y=="function"&&(y=y(e));var x=bq.apply(void 0,y),_=Kh;l&&(_=Nq(Yi({trace:!$q},typeof l=="object"&&l)));var v=new Oq(x),g=v;Array.isArray(m)?g=Pa([x],m):typeof m=="function"&&(g=m(v));var w=_.apply(void 0,g);return kP(p,d,w)}function Ji(t,e){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e){var s=e.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return Yi(Yi({type:t,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function AP(t){var e={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return t(i),[e,n,r]}function Bq(t){return typeof t=="function"}function Vq(t,e,n,r){n===void 0&&(n=[]);var i=typeof e=="function"?AP(e):[e,n,r],s=i[0],o=i[1],a=i[2],l;if(Bq(t))l=function(){return Iy(t())};else{var c=Iy(t);l=function(){return c}}function d(h,m){h===void 0&&(h=l());var p=Pa([s[m.type]],o.filter(function(y){var x=y.matcher;return x(m)}).map(function(y){var x=y.reducer;return x}));return p.filter(function(y){return!!y}).length===0&&(p=[a]),p.reduce(function(y,x){if(x)if(ls(y)){var _=y,v=x(_,m);return v===void 0?y:v}else{if(fi(y))return bP(y,function(g){return x(g,m)});var v=x(y,m);if(v===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return y},h)}return d.getInitialState=l,d}function Uq(t,e){return t+"/"+e}function Lm(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:Iy(t.initialState),r=t.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(d){var h=r[d],m=Uq(e,d),p,y;"reducer"in h?(p=h.reducer,y=h.prepare):p=h,s[d]=p,o[m]=p,a[d]=y?Ji(m,y):Ji(m)});function l(){var d=typeof t.extraReducers=="function"?AP(t.extraReducers):[t.extraReducers],h=d[0],m=h===void 0?{}:h,p=d[1],y=p===void 0?[]:p,x=d[2],_=x===void 0?void 0:x,v=Yi(Yi({},m),o);return Vq(n,function(g){for(var w in v)g.addCase(w,v[w]);for(var E=0,S=y;E<S.length;E++){var T=S[E];g.addMatcher(T.matcher,T.reducer)}_&&g.addDefaultCase(_)})}var c;return{name:e,reducer:function(d,h){return c||(c=l()),c(d,h)},actions:a,caseReducers:s,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var Wq="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Hq=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=Wq[Math.random()*64|0];return e},qq=["name","message","stack","code"],fg=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),mb=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),Gq=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=qq;n<r.length;n++){var i=r[n];typeof t[i]=="string"&&(e[i]=t[i])}return e}return{message:String(t)}};(function(){function t(e,n,r){var i=Ji(e+"/fulfilled",function(c,d,h,m){return{payload:c,meta:hg(Yi({},m||{}),{arg:h,requestId:d,requestStatus:"fulfilled"})}}),s=Ji(e+"/pending",function(c,d,h){return{payload:void 0,meta:hg(Yi({},h||{}),{arg:d,requestId:c,requestStatus:"pending"})}}),o=Ji(e+"/rejected",function(c,d,h,m,p){return{payload:m,error:(r&&r.serializeError||Gq)(c||"Rejected"),meta:hg(Yi({},p||{}),{arg:h,requestId:d,rejectedWithValue:!!m,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(d,h,m){var p=r!=null&&r.idGenerator?r.idGenerator(c):Hq(),y=new a,x;function _(g){x=g,y.abort()}var v=function(){return Pq(this,null,function(){var g,w,E,S,T,k,b;return kq(this,function(P){switch(P.label){case 0:return P.trys.push([0,4,,5]),S=(g=r==null?void 0:r.condition)==null?void 0:g.call(r,c,{getState:h,extra:m}),Xq(S)?[4,S]:[3,2];case 1:S=P.sent(),P.label=2;case 2:if(S===!1||y.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(I,O){return y.signal.addEventListener("abort",function(){return O({name:"AbortError",message:x||"Aborted"})})}),d(s(p,c,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:p,arg:c},{getState:h,extra:m}))),[4,Promise.race([T,Promise.resolve(n(c,{dispatch:d,getState:h,extra:m,requestId:p,signal:y.signal,abort:_,rejectWithValue:function(I,O){return new fg(I,O)},fulfillWithValue:function(I,O){return new mb(I,O)}})).then(function(I){if(I instanceof fg)throw I;return I instanceof mb?i(I.payload,p,c,I.meta):i(I,p,c)})])];case 3:return E=P.sent(),[3,5];case 4:return k=P.sent(),E=k instanceof fg?o(null,p,c,k.payload,k.meta):o(k,p,c),[3,5];case 5:return b=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,b||d(E),[2,E]}})})}();return Object.assign(v,{abort:_,requestId:p,arg:c,unwrap:function(){return v.then(Kq)}})}}return Object.assign(l,{pending:s,rejected:o,fulfilled:i,typePrefix:e})}return t.withTypes=function(){return t},t})();function Kq(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function Xq(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var F1="listenerMiddleware";Ji(F1+"/add");Ji(F1+"/removeAll");Ji(F1+"/remove");var pb;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);fq();const Qq=ni();let Yq=Qq.current||{...rx({}),currentIndex:0,song_in:""};const Jq={currentSong:Yq},RP=Lm({name:"currentSong",initialState:Jq,reducers:{setSong(t,e){t.currentSong=e.payload},updateSong:(t,e)=>{const n=e.payload;Object.assign(t.currentSong,n)},resetCurrentSong:t=>{t.currentSong={...rx({}),currentIndex:0,song_in:""}}}}),Ne=t=>t.currentSong,{setSong:Xn,resetCurrentSong:oo,updateSong:eY}=RP.actions,Zq=RP.reducer,eG=ni(),tG={queueSongs:eG.queue||[],from:[]},PP=Lm({name:"songQueue",initialState:tG,reducers:{setQueue:(t,e)=>{const{songs:n}=e.payload;t.queueSongs=n,t.from=[n[0].song_in],Jt("queue",t.queueSongs)},removeSongFromQueue:(t,e)=>{const{index:n}=e.payload;t.queueSongs.splice(n,1),Jt("queue",t.queueSongs);const r=[];t.queueSongs.forEach(i=>{r.includes(i.song_in)||r.push(i.song_in)}),t.from=r},addSongToQueue:(t,e)=>{const{songs:n}=e.payload;t.from.includes(n[0].song_in)||t.from.push(n[0].song_in),t.queueSongs.push(...n),Jt("queue",t.queueSongs)},updateSongInQueue:(t,e)=>{const{song:n}=e.payload,r=t.queueSongs.findIndex(i=>i.id===n.id);Object.assign(t.queueSongs[r],n)},resetSongQueue:t=>{t.queueSongs=[],Jt("queue",[])}}}),gi=t=>t.songQueue,{addSongToQueue:$1,updateSongInQueue:tY,removeSongFromQueue:nG,setQueue:Fm,resetSongQueue:NP}=PP.actions,rG=PP.reducer,DP={user:null,loading:!0},iG=(t,e)=>{switch(e.type){case 0:return{user:e.payload.user,loading:!1};case 1:return{user:null,loading:!0};default:return{user:t.user,loading:t.loading}}},sG={state:{user:DP.user,loading:!0},setUser:()=>{}},jP=f.createContext(sG),oG=()=>{const[t,e]=f.useReducer(iG,DP),n=f.useCallback(r=>{switch(r.type){case"set-user":return console.log("set user"),e({type:0,payload:{user:r.user}});case"reset":return console.log("reset user"),e({type:1,payload:{user:null}})}},[]);return{state:{loading:t.loading,user:t.user},setUser:n}},aG=({children:t})=>{const{state:{loading:e,user:n},setUser:r}=oG();return u.jsx(jP.Provider,{value:{state:{loading:e,user:n},setUser:r},children:t})},ht=()=>{const{state:{loading:t,user:e},setUser:n}=f.useContext(jP);return{loading:t,user:e,setUser:n}},pu=()=>{const t=pn(),e=Ke(),{setUser:n}=ht(),{resetSongPlaylistStore:r}=dt(),[i]=yH(os),s=()=>{document.querySelector(".hd-mp3").pause(),e(oo())};return{logOut:async()=>{await aC(os),n({type:"reset"}),e(NP()),r(),s(),t(At.Home)},logIn:async()=>{await i()&&(e(oo()),r(),n({type:"reset"}))}}},lG={toasts:[]},cG={state:lG,setToasts:()=>{},setErrorToast:()=>{},setSuccessToast:()=>{}},OP=f.createContext(cG),uG=({children:t})=>{const[e,n]=f.useState([]),r=({message:s="Somethings went wrong"})=>n(o=>[...o,{title:"error",id:vh(4),desc:s}]),i=({message:s="Success"})=>n(o=>[...o,{title:"success",id:vh(4),desc:`${s}`}]);return u.jsx(OP.Provider,{value:{state:{toasts:e},setToasts:n,setErrorToast:r,setSuccessToast:i},children:t})},gn=()=>{const{state:{toasts:t},setToasts:e,setErrorToast:n,setSuccessToast:r}=f.useContext(OP);return{toasts:t,setToasts:e,setErrorToast:n,setSuccessToast:r}},MP={tempSongs:[],status:""},dG=(t,e)=>{switch(e.type){case 0:{const{songs:n}=e.payload;return{...t,tempSongs:n,status:"uploading"}}case 1:{const n=[...t.tempSongs];return n.shift(),{...t,tempSongs:n}}case 2:{const{status:n}=e.payload;return{...t,tempSongs:[],status:n}}}},hG=()=>{const[t,e]=f.useReducer(dG,MP),n=f.useCallback(s=>{e({type:0,payload:{songs:s}})},[]),r=f.useCallback(()=>{e({type:1})},[]),i=f.useCallback(s=>{e({type:2,payload:{status:s}})},[]);return{state:t,setTempSongs:n,shiftSong:r,clearTempSongs:i}},fG={state:MP,setTempSongs:()=>{},shiftSong:()=>{},clearTempSongs:()=>{}},LP=f.createContext(fG),mG=({children:t})=>u.jsx(LP.Provider,{value:hG(),children:t}),$m=()=>{const{state:{...t},...e}=f.useContext(LP);return{...e,...t}},Dc=async({collection:t,id:e,msg:n})=>{await eW(l1(wo,t,e))},Na=async({collection:t,id:e,msg:n})=>J7(l1(wo,t,e)),qn=async({collection:t,id:e,data:n,msg:r})=>await Z7(l1(wo,t,e),{...n},{merge:!0}),FP=async({file:t,folder:e,email:n,msg:r})=>{const i=n.replace("@gmail.com","")+"_"+t.name.replaceAll(" ","").toLowerCase(),s=S1(k1,`${e+i}`),o=await nP(s,t);return{fileURL:await rP(o.ref),filePath:o.metadata.fullPath}},pG=async({blob:t,folder:e,songId:n,msg:r})=>{const i=n+"_stock",s=S1(k1,`${e+i}`),o=await nP(s,t);return{fileURL:await rP(o.ref),filePath:o.metadata.fullPath}},Cy=async({filePath:t,msg:e})=>{const n=S1(k1,t);await uH(n)},$P=async t=>{await Dc({collection:"songs",id:t.id,msg:">>> api: delete song doc"}),await Cy({filePath:t.song_file_path,msg:">>> api: delete song file"}),t.lyric_id&&await Dc({collection:"lyrics",id:t.lyric_id,msg:">>> api: delete song lyric doc"}),t.image_file_path&&await Cy({filePath:t.image_file_path,msg:">>> api: delete song's image file"})},gb=async(t,e)=>{const n=t.map(r=>r.id);await qn({collection:"users",data:{playlist_ids:n},id:e.email,msg:">>> api: set user playlist_ids"})},mg={currentPlaylist:ix({}),playlistSongs:[]},zP=Lm({name:"currentPlaylist",initialState:mg,reducers:{setCurrentPlaylist(t,e){const{playlist:n,songs:r}=e.payload;t.currentPlaylist=n,t.playlistSongs=r},updateCurrentPlaylist:(t,e)=>{const n=e.payload;Object.assign(t.currentPlaylist,n)},addSongsAndUpdateCurrent(t,e){const{songs:n}=e.payload,r=n.map(i=>({...i,song_in:`playlist_${t.currentPlaylist.id}`}));console.log("current",ky(t.playlistSongs).map(i=>i.id)),console.log("add playlist songs",n.map(i=>i.id)),t.playlistSongs.push(...r),t.currentPlaylist.song_ids.push(...n.map(i=>i.id))},setPlaylistSongs(t,e){const{songs:n}=e.payload;t.playlistSongs=n},removeSong(t,e){const{index:n}=e.payload;t.playlistSongs.splice(n,1)},setPlaylistSongsAndUpdateCurrent(t,e){const{songs:n}=e.payload;console.log("current",ky(t.playlistSongs).map(r=>r.id)),console.log("set playlist songs",n.map(r=>r.id)),t.playlistSongs=n,t.currentPlaylist.song_ids=n.map(r=>r.id)},resetCurrentPlaylist:t=>{t.currentPlaylist=mg.currentPlaylist,t.playlistSongs=mg.playlistSongs}}}),yi=t=>t.currentPlaylist,{addSongsAndUpdateCurrent:gG,removeSong:nY,setCurrentPlaylist:yG,updateCurrentPlaylist:$l,resetCurrentPlaylist:z1,setPlaylistSongs:yb,setPlaylistSongsAndUpdateCurrent:vb}=zP.actions,vG=zP.reducer;function _o(){const t=Ke(),{user:e}=ht(),{currentPlaylist:n,playlistSongs:r}=Y(yi),{currentSong:i}=Y(Ne),{userPlaylists:s,updateUserPlaylist:o,setUserPlaylists:a}=dt(),[l,c]=f.useState(!1),{setErrorToast:d,setSuccessToast:h}=gn(),m=pn(),p=async S=>{await qn({collection:"playlist",data:S,id:S.id,msg:">>> api: set playlist doc"}),o(S)},y=async S=>{if(!e)throw new Error("user not found");if(!S)throw new Error("playlist name invalid");const T=nx(S),k=ix({id:T,by:e.email,name:S});c(!0);const b=[...s,k];await qn({collection:"playlist",data:k,id:T,msg:">>> api: set playlist doc"}),await gb(b,e),a(b),c(!1)},x=async()=>{if(!e)return;c(!0);const S=s.filter(T=>T.id!==n.id);await Dc({collection:"playlist",id:n.id,msg:">>> api: delete playlist doc"}),await gb(S,e),a(S),t(z1()),i.song_in===`playlist_${n.id}`&&t(oo()),c(!1),m("/mysongs")},_=async S=>{c(!0);const T={...n};if(T.song_ids=[...n.song_ids,...S.map(k=>k.id)],await p(T),console.log(">>> playlist songs",r.length),t(gG({songs:S})),i.song_in===`playlist_${n.id}`){const k=S.map(b=>({...b,song_in:`playlist_${n.id}`}));t($1({songs:k}))}c(!1),h({message:`${S.length} songs added`})},v=async(S,T)=>{try{c(!0);const k={...T,name:S};await p(k),t($l(k)),h({message:"Playlist edited"})}catch(k){throw console.log(k),new Error("Error when edit playlist")}finally{c(!1)}},g=async(S,T)=>{try{c(!0);const k=[...T.song_ids,S.id],b={...T};b.song_ids=k,T.id===n.id&&t($l({song_ids:k})),await p(b)}catch(k){throw console.log({message:k}),new Error("Error when edit playlist")}finally{c(!1)}},w=async S=>{c(!0);const T=r.filter(b=>b.id!==S.id);console.log("delete songs",r.map(b=>b.id),T.map(b=>b.id));const k={...n};k.song_ids=T.map(b=>b.id),await p(k),t(vb({songs:T})),c(!1),h({message:`'${S.name}' removed`})};return{isFetching:l,addPlaylist:y,editPlaylist:v,deletePlaylist:x,addSongsToPlaylist:_,deleteSongsFromPlaylist:async S=>{if(console.log("playlist action deleteManyFromPlaylist"),!n.song_ids)throw console.log("Wrong playlist data"),d({}),new Error("Wrong playlist data");if(S.length===1)return w(S[0]);const T=S.map(P=>P.id),k=r.filter(P=>!T.includes(P.id)),b={...n};return b.song_ids=k.map(P=>P.id),c(!0),await p(b),t(vb({songs:k})),c(!1),h({message:`${S.length} songs removed`}),k},deleteSongFromPlaylist:w,addSongToPlaylistSongItem:g,setPlaylistDocAndUpdateUserPlaylist:p}}function xG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M10 17a.75.75 0 01-.75-.75V5.612L5.29 9.77a.75.75 0 01-1.08-1.04l5.25-5.5a.75.75 0 011.08 0l5.25 5.5a.75.75 0 11-1.08 1.04l-3.96-4.158V16.25A.75.75 0 0110 17z",clipRule:"evenodd"}))}const wG=f.forwardRef(xG),_G=wG;function EG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10zm0 5.25a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75z",clipRule:"evenodd"}))}const SG=f.forwardRef(EG),bG=SG;function kG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z",clipRule:"evenodd"}))}const TG=f.forwardRef(kG),Ay=TG;function IG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"}))}const CG=f.forwardRef(IG),AG=CG;function RG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"}))}const PG=f.forwardRef(RG),BP=PG;function NG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"}))}const DG=f.forwardRef(NG),jG=DG;function OG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M7.84 1.804A1 1 0 018.82 1h2.36a1 1 0 01.98.804l.331 1.652a6.993 6.993 0 011.929 1.115l1.598-.54a1 1 0 011.186.447l1.18 2.044a1 1 0 01-.205 1.251l-1.267 1.113a7.047 7.047 0 010 2.228l1.267 1.113a1 1 0 01.206 1.25l-1.18 2.045a1 1 0 01-1.187.447l-1.598-.54a6.993 6.993 0 01-1.929 1.115l-.33 1.652a1 1 0 01-.98.804H8.82a1 1 0 01-.98-.804l-.331-1.652a6.993 6.993 0 01-1.929-1.115l-1.598.54a1 1 0 01-1.186-.447l-1.18-2.044a1 1 0 01.205-1.251l1.267-1.114a7.05 7.05 0 010-2.227L1.821 7.773a1 1 0 01-.206-1.25l1.18-2.045a1 1 0 011.187-.447l1.598.54A6.993 6.993 0 017.51 3.456l.33-1.652zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"}))}const MG=f.forwardRef(OG),LG=MG;function FG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M4.5 2A1.5 1.5 0 003 3.5v13A1.5 1.5 0 004.5 18h11a1.5 1.5 0 001.5-1.5V7.621a1.5 1.5 0 00-.44-1.06l-4.12-4.122A1.5 1.5 0 0011.378 2H4.5zm2.25 8.5a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5zm0 3a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5z",clipRule:"evenodd"}))}const $G=f.forwardRef(FG),zG=$G;function BG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"}))}const VG=f.forwardRef(BG),UG=VG;function ys({close:t,title:e}){return u.jsxs("div",{className:"flex justify-between mb-3",children:[u.jsx("div",{className:"text-xl leading-[2.2] font-playwriteCU",children:e}),u.jsx("button",{onClick:t,children:u.jsx(UG,{className:"w-7"})})]})}function WG({closeModal:t,playlistSongs:e}){const{theme:n}=te(),{selectedSongs:r}=Hc(),{userSongs:i}=dt(),{addSongsToPlaylist:s,isFetching:o}=_o(),a={addSongContainer:"pb-[40px] relative",addSongContent:"max-h-[calc(60vh)] w-[700px] max-w-[80vw] overflow-auto"},l=f.useMemo(()=>!!r.length,[r]),c=async()=>{try{if(!r.length)return;await s(r)}catch(d){console.log({message:d})}finally{close()}};return u.jsxs("div",{className:a.addSongContainer,children:[u.jsx(ys,{close:t,title:"Add song to playlist"}),u.jsxs("div",{className:a.addSongContent,children:[u.jsxs(Q,{onClick:c,variant:"primary",isLoading:o,className:`rounded-full ${n.content_bg} absolute bottom-0 right-[15px] min-w-[34px] h-[32px] ${!l&&"disable"}`,children:["Add",`${r.length?` (${r.length})`:""}`]}),i.length?i.map((d,h)=>{if(e.findIndex(p=>p.id===d.id)===-1)return u.jsx(II,{song:d,variant:"select",theme:n},h)}):u.jsx("p",{children:"No song jet..."})]})]})}function VP({children:t,active:e,done:n,inUpload:r,className:i,scrollBehavior:s}){const o=f.useRef(null),a=()=>{const l=o.current;l&&(l.scrollIntoView({behavior:s.current,block:"center"}),s.current==="instant"&&(s.current="smooth"))};return f.useEffect(()=>{e&&a()},[e]),u.jsxs("p",{ref:o,className:`lyric ${i&&i} ${r?"text-[16px]":""}  select-none  max-[549px]:text-center font-bold ${n&&"opacity-40"} ${r?"flex":""} ${e&&!r?"text-[#ffed00]":""}`,children:[t,r&&e&&u.jsx("span",{className:"ml-[10px] text-[16px]"})]})}const HG=()=>{const t=ni();return{playStatus:{isError:!1,isPlaying:!1,isWaiting:!1,lyricSize:t.lyricSize||"medium",isLoaded:!0,isRepeat:t.isRepeat||"no",isShuffle:t.isShuffle||!1,isCrossFade:t.isCrossFade||!1,songBackground:t.songBackground||!1,songImage:t.songImage||!1}}},UP=Lm({name:"playStatus",initialState:()=>HG(),reducers:{setPlayStatus(t,e){t.playStatus={...t.playStatus,...e.payload}},togglePlayControl(t,e){const{variant:n}=e.payload;switch(n){default:if(typeof t.playStatus[n]=="boolean"){const r=!t.playStatus[n];t.playStatus[n]=r,Jt(n,r)}}}}}),hr=t=>t.playStatus,{setPlayStatus:tr,togglePlayControl:xb}=UP.actions,qG=UP.reducer;function GG({handlePlayPause:t}){const{playStatus:{isError:e,isPlaying:n,isWaiting:r}}=Y(hr),{currentSong:i}=Y(Ne),s={icon:"w-[50px] sm:w-10"},o=f.useMemo(()=>r?u.jsx(Ks,{className:`${s.icon} animate-spin`}):e&&i.name?u.jsx(Mv,{className:`${s.icon}`}):n?u.jsx(Lv,{className:`${s.icon}`}):u.jsx(Fv,{className:`${s.icon}`}),[r,e,n,i]);return u.jsx(u.Fragment,{children:u.jsx("button",{className:`p-1 ${r&&"pointer-events-none"} inline-flex items-center justify-center`,onClick:()=>t(),children:o})})}const wb=f.memo(GG);function WP({bgRef:t,currentSong:e}){const{playStatus:{songBackground:n}}=Y(hr);f.useEffect(()=>{if(n&&e.image_url){const r=t.current;r&&(r.style.backgroundImage=`url(${e.image_url})`)}},[e,n]),f.useEffect(()=>{if(!n){const r=t.current;r&&(r.style.backgroundImage="none")}},[n])}function KG({audioEle:t,isOpenFullScreen:e}){const{currentSong:n}=Y(Ne),{playStatus:{isError:r}}=Y(hr),[i,s]=f.useState({id:"",base:"",real_time:[]}),[o,a]=f.useState(!1),[l,c]=f.useState(!1),d=f.useRef(),h=async()=>{a(!0);try{const p=await Na({collection:"lyrics",id:n.lyric_id,msg:">>> api: get lyric doc"});if(p.exists()){const y=p.data();s(y)}}catch{console.log("[error] get lyric error")}finally{a(!1)}},m=()=>{clearTimeout(d.current),c(!1),a(!0),s({base:"",real_time:[],id:""})};return f.useEffect(()=>{const p=async()=>{console.log("song loaded"),c(!0)};return t&&t.addEventListener("loadeddata",p),()=>{t&&t.removeEventListener("loadeddata",p)}},[]),f.useEffect(()=>{if(!n.lyric_id&&l){a(!1);return}i.real_time.length||l&&e&&(d.current=setTimeout(()=>{h()},500))},[l,e]),f.useEffect(()=>{if(r){a(!1);return}return()=>{m()}},[n,r]),{songLyric:i,loading:o}}const HP=(t,e)=>{const[n,r]=f.useState(()=>JSON.parse(localStorage.getItem("HD-MP3")||"{}")[t]||e);return f.useEffect(()=>{const i=JSON.parse(localStorage.getItem("HD-MP3")||"{}");i[t]=n,localStorage.setItem("HD-MP3",JSON.stringify(i))},[n]),[n,r]};function XG(){const t=Ke(),{currentPlaylist:e,playlistSongs:n}=Y(yi),r=Ef(),{setErrorToast:i}=gn(),s=f.useRef(!1),[o,a]=f.useState(!0),l=async()=>{if(!r.id)throw new Error("invalid playlist id");const h=await Na({collection:"playlist",id:r.id,msg:">>> api get playlist"});if(h.exists())return h.data()},c=async h=>{if(!h.song_ids.length)return[];console.log(">>> api: get playlist songs",h.song_ids);const m=fm(wo,"songs"),p=qa(m,Ga("id","in",h.song_ids)),y=await Ka(p);return y.docs.length?y.docs.map(_=>({..._.data(),song_in:`playlist_${h.id}`})):(h.song_ids.length&&i({}),[])},d=async()=>{try{if(!r.id)throw new Error("invalid playlist id");let h;const m=e.id===r.id;if(a(!0),m?h=e:h=await l(),!h)throw new Error("playlist not found");const p=await c(h);m||t(yG({playlist:h,songs:p})),t(yb({songs:p}))}catch(h){console.log({message:h}),i({})}finally{a(!1)}};return f.useEffect(()=>{s.current||(s.current=!0,console.log("run init"),d())},[]),{isFetching:o,setPlaylistSongs:yb,playlistSongs:n,currentPlaylist:e}}function QG(){const t=Ke(),{currentPlaylist:e}=Y(yi),{isFetching:n,playlistSongs:r}=XG(),i=async()=>{const o=r.find(l=>l.image_url);if(!o||e.image_url&&e.image_url===o.image_url)return;const a={...e,image_url:o.image_url,blurhash_encode:o.blurhash_encode||""};await qn({collection:"playlist",id:e.id,data:a,msg:">>> api: update playlist doc"}),t($l({image_url:o.image_url}))},s=async()=>{if(console.log(e.song_ids.length,r.length),!e.song_ids.length){if(e.image_url){const l={...e,image_url:"",blurhash_encode:""};await qn({collection:"playlist",id:e.id,data:l,msg:">>> api: update playlist doc"})}t($l({image_url:"",blurhash_encode:""}));return}if(e.song_ids.length===r.length)return;const o=r.map(l=>l.id),a={...e,song_ids:o};await qn({collection:"playlist",id:e.id,data:a,msg:">>> api: update playlist doc"}),t($l({song_ids:o}))};return f.useEffect(()=>{n||!r.length||!e||i()},[r,n]),f.useEffect(()=>{n||e&&s()},[n]),{playlistSongs:r,loading:n}}const qP=()=>{window.dispatchEvent(new Event("mousemove"))},GP=(t,e,n=!1)=>{const r=window.innerWidth;if(!t||!e){console.log("ele not found");return}const s=t.getBoundingClientRect().left,o=r-(s+t.offsetWidth),a=Math.abs(Math.ceil(s-o))/2;if(a<5)return!1;n&&(e.onscroll=()=>{},setTimeout(()=>{e.onscroll=qP},900)),n||Math.abs(s)>r||Math.abs(o)>r?e.style.scrollBehavior="auto":e.style.scrollBehavior="smooth";let l=e.scrollLeft;return o>s?setTimeout(()=>{e.scrollLeft=l-a},300):o<s&&setTimeout(()=>{e.scrollLeft=l+a},300),!0};function YG({containerRef:t,songItemRef:e,isOpenFullScreen:n,idle:r}){const{currentSong:i}=Y(Ne),s=()=>{const o=e==null?void 0:e.current,a=t==null?void 0:t.current;GP(o,a,r)};f.useEffect(()=>{if(n){if(!scroll||!(t!=null&&t.current)||!(e!=null&&e.current)){console.log("lack props");return}i.name&&n&&s()}},[i,n]),f.useEffect(()=>{const o=t==null?void 0:t.current;if(o)return o.onscroll=qP,()=>{o.onscroll=()=>{}}},[])}function JG({textRef:t,textWrapperRef:e,content:n}){const r=f.useRef(),i=f.useRef(),s=f.useRef(!1),o=f.useRef(0),a=f.useRef(0),l=f.useRef(0),c=()=>{t.current&&(t.current.style.transition="none",t.current.style.transform="translateX(0)")},d=()=>{t.current&&(t.current.style.transition=`transform linear ${a.current}s`,t.current.style.transform=`translateX(-${l.current}px)`,i.current=setTimeout(c,a.current*1e3))},h=()=>{!t.current||!e.current||(l.current=t.current.offsetWidth-o.current,a.current=Math.ceil(l.current/35))},m=()=>{!s.current||!t.current||!e.current||(a.current=0,l.current=0,s.current=!1,clearInterval(r.current),clearTimeout(i.current),e.current.classList.remove("mask-image-horizontal"),c())},p=()=>{!t.current||!e.current||!n||!(t.current.offsetWidth>e.current.offsetWidth)||(s.current=!0,e.current.classList.add("mask-image-horizontal"),o.current=t.current.clientWidth,t.current.innerHTML=t.current.innerText+"&nbsp; &nbsp; &nbsp;"+t.current.innerText,h(),setTimeout(d,1e3),r.current=setInterval(d,a.current*1e3+3e3))};f.useEffect(()=>(p(),m),[n])}const ZG=({song:t,closeModal:e,setIsOpenPopup:n})=>{const r=Ke(),{setErrorToast:i,setSuccessToast:s}=gn(),{currentSong:o}=Y(Ne),{userSongs:a,setUserSongs:l}=dt(),[c,d]=f.useState(!1),{addSongToPlaylistSongItem:h,deleteSongFromPlaylist:m}=_o();return{updateAndSetUserSongs:f.useCallback(async({song:g})=>{let w=[...a];const E=w.indexOf(g);w.splice(E,1);const S=w.map(T=>T.id);if(w.length!==a.length)return l(w),S},[a]),handleDeleteSong:async()=>{try{d(!0);let g=[...a];const w=g.indexOf(t);g.splice(w,1),await $P(t),l(g),o.id===t.id&&r(oo()),s({message:`'${t.name}' deleted`})}catch(g){throw console.log({message:g}),new Error("Error when delete song")}finally{d(!1),e()}},handleAddSongToPlaylistMobile:async g=>{try{d(!0),await h(t,g),s({message:`'${t.name}' added to '${g.name}'`})}catch(w){throw console.log(w),new Error("Error when add song to playlist")}finally{d(!1),e()}},handleRemoveSongFromPlaylist:async()=>{try{d(!0),await m(t)}catch(g){throw console.log({message:g}),new Error("Error when remove song from playlist")}finally{d(!1),n(!1)}},handleAddSongToPlaylist:async g=>{if(!t||!g){i({message:"Lack of props"});return}try{d(!0),await h(t,g),s({message:`'${t.name}' added to '${g.name}'`})}catch(w){throw console.log(w),new Error("Error when add song to playlist")}finally{d(!1),n(!1)}},loading:c}},Ms={isDev:!0,focusDelay:3e3,scrollSongDelay:4e3,loadingDuration:200},KP=fm(wo,"songs"),XP=fm(wo,"playlist"),eK=async()=>{const t=qa(KP,Ga("by","==","admin")),e=await Ka(t);if(e.docs)return e.docs.map(r=>({...r.data(),song_in:"admin"}))},tK=async()=>{const t=qa(XP,Ga("by","==","admin")),e=await Ka(t);if(e.docs)return e.docs.map(r=>r.data())},nK=async t=>{const e=qa(XP,Ga("by","==",t.email)),n=await Ka(e);if(n.docs.length)return n.docs.map(i=>i.data())},rK=async t=>{const e=qa(KP,Ga("by","==",t.email)),n=await Ka(e);if(n.docs.length)return n.docs.map(i=>({...i.data(),song_in:"user"}))},iK=async t=>{const e={userSongs:[],userPlaylists:[]},n=await rK(t);n!=null&&n.length&&(e.userSongs=n);const r=await nK(t);return r!=null&&r.length&&(e.userPlaylists=r),e},sK=[{song_file_path:"songs/huudat01234560_cloud9-itrotobu-3522118.mpga",size:4300,song_in:"admin",lyric_id:"",singer:"Itro, Tobu",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fcloud9_5smE_admin_stock?alt=media&token=cd1f3afe-0c29-462f-ad17-b28b95b6e903",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_cloud9-itrotobu-3522118.mpga?alt=media&token=2184079b-1183-4d89-ab40-792ce60f9db5",image_file_path:"images/cloud9_5smE_admin_stock",id:"cloud9_5smE_admin",duration:276,blurhash_encode:"U9L;1{%200t600xaXNxt0JR*?ExZ01R*~AoL",name:"Cloud 9",by:"admin"},{song_in:"admin",blurhash_encode:"UF9QO,sSImR$N+kDjroMDzkEt9oh=}WARka#",duration:172,image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fcreepextended_5T-X_admin_stock?alt=media&token=1aa0e0e5-0371-400e-a3c9-3d091c3e138c",singer:"GAMPER & DADONI",song_file_path:"songs/huudat01234560_creepextended-gamperdadoni-8177347(mp3cut.net).mp3",name:"Creep",id:"creepextended_5T-X_admin",lyric_id:"creepextended_5T-X_admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_creepextended-gamperdadoni-8177347(mp3cut.net).mp3?alt=media&token=afbbff42-29de-4509-84c4-f8c1d8b55c0a",by:"admin",image_file_path:"images/creepextended_5T-X_admin_stock",size:2910},{by:"admin",size:3230,duration:207,image_file_path:"",id:"diviners_exqv_admin",lyric_id:"",name:"Diviners",song_in:"admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_diviners-savannahphillyk-4271809.mpga?alt=media&token=0a2bab43-8fe1-42fe-9991-3d798f4bd46e",song_file_path:"songs/huudat01234560_diviners-savannahphillyk-4271809.mpga",singer:"Savannah, Philly K",image_url:"",blurhash_encode:""},{image_file_path:"",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_gizmo-syncole-6046197.mpga?alt=media&token=eed274e0-5716-47fc-a020-872a14c2fa6d",singer:"Syn Cole",blurhash_encode:"",name:"Gizmo",by:"admin",image_url:"",size:3007,song_file_path:"songs/huudat01234560_gizmo-syncole-6046197.mpga",lyric_id:"",id:"gizmo_VMF2_admin",duration:191,song_in:"admin"},{id:"goodtimeowlcitycarlyraejepsen49b6mpga_vxSV_admin",blurhash_encode:"UID9|+tR%MM{?^-pt7RjyDV@e.WB00IoWBof",song_file_path:"songs/huudat01234560_goodtime-owlcity-carlyraejepsen_49b6.mpga",singer:"OwlCity, CarlyRaeJepsen",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_goodtime-owlcity-carlyraejepsen_49b6.mpga?alt=media&token=0fd9fd15-5f09-4e95-a101-32c648827723",by:"admin",duration:208,image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fgoodtimeowlcitycarlyraejepsen49b6mpga_vxSV_admin_stock?alt=media&token=55478c10-9a5e-4b02-a0e3-d9cf53136f51",song_in:"admin",lyric_id:"goodtimeowlcitycarlyraejepsen49b6mpga_vxSV_admin",image_file_path:"images/goodtimeowlcitycarlyraejepsen49b6mpga_vxSV_admin_stock",size:3235,name:"GoodTime"},{image_file_path:"images/heybrother_-8jG_admin_stock",by:"admin",size:3987,singer:"Avicii",duration:256,lyric_id:"heybrother_-8jG_admin",name:"Hey Brother",song_file_path:"songs/huudat01234560_heybrother-avicii-3044424.mpga",song_in:"admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_heybrother-avicii-3044424.mpga?alt=media&token=dba0759f-6762-47f4-9899-d6494a6fab15",blurhash_encode:"U98#7;X7Ntbb00oyt7oz~qWBoLbG00oLjZof",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fheybrother_-8jG_admin_stock?alt=media&token=bbbc1aa3-7f52-4d60-9773-2f3f7818cd01",id:"heybrother_-8jG_admin"},{song_in:"admin",lyric_id:"",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fhope_AI6Q_admin_stock?alt=media&token=9f282ea4-69c7-42f2-bba3-a232c9e7e194",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_hope-tobu-3117457.mpga?alt=media&token=e1bfc470-a344-4505-b177-4ef96991b3fc",image_file_path:"images/hope_AI6Q_admin_stock",singer:"Tobu",duration:289,name:"Hope",by:"admin",size:4506,song_file_path:"songs/huudat01234560_hope-tobu-3117457.mpga",id:"hope_AI6Q_admin",blurhash_encode:"UEBiHzyG00sVt:VWaioy00Mz^~WVIXtQnhRj"},{duration:220,image_file_path:"images/itaintme_8IYS_admin_stock",lyric_id:"itaintme_8IYS_admin",name:"It Ain't Me",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fitaintme_8IYS_admin_stock?alt=media&token=023ee525-6d9e-44ce-90b7-60b88c08a505",singer:"Kygo,Selena Gomez",size:3664,song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_itaintme-kygoselenagomez-5817724.mpga?alt=media&token=4328f6fc-3b04-490b-a37e-00c9ce8718d8",id:"itaintme_8IYS_admin",by:"admin",song_file_path:"songs/huudat01234560_itaintme-kygoselenagomez-5817724.mpga",blurhash_encode:"U26Qe$KN5i}Y0|IpxH^j0x^P-W0zn7S_OTE2",song_in:"admin"},{id:"lethergo_QrJg_admin",image_file_path:"images/lethergo_QrJg_admin_stock",by:"admin",song_in:"admin",song_file_path:"songs/huudat01234560_lethergo-passenger-3719556.mpga",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Flethergo_QrJg_admin_stock?alt=media&token=11c785b1-534f-4314-882e-9599b0dec8e4",size:3892,duration:250,blurhash_encode:"URBND:-;xZRSt:bxS4ja07E7NItPqtn4nQbb",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_lethergo-passenger-3719556.mpga?alt=media&token=7cbaf060-cc4f-4970-9967-5876943a7ced",lyric_id:"lethergo_QrJg_admin",singer:"Passenger",name:"Let Her Go"},{singer:"Alec Benjamin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_letmedownslowly-alecbenjamin-6360069.mpga?alt=media&token=966e502f-6f95-4615-a961-08a95f5bab43",by:"admin",song_in:"admin",duration:170,image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fletmedownslowly_KFip_admin_stock?alt=media&token=f6c875c3-335b-4195-abea-e8d065c0d50b",blurhash_encode:"UhK,EXv|-VNG}@V@RPbcNZo#I;WqxCWBN{jY",lyric_id:"letmedownslowly_KFip_admin",size:2883,name:"Let Me Down Slowly",id:"letmedownslowly_KFip_admin",song_file_path:"songs/huudat01234560_letmedownslowly-alecbenjamin-6360069.mpga",image_file_path:"images/letmedownslowly_KFip_admin_stock"},{singer:"Lost Sky, ft. Sara Skinner",name:"Dreams ",song_in:"admin",image_file_path:"images/lostskydreamsptiifeatsaraskinner_RXI2_admin_stock",by:"admin",size:3600,blurhash_encode:"UHD%%%JoF^Jm|wNcE#a#J--BNtxF1ubF,Wwd",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Flostskydreamsptiifeatsaraskinner_RXI2_admin_stock?alt=media&token=0dc0a53a-e457-4bda-b4cd-ac71e1852145",song_file_path:"songs/huudat01234560_p4fh9nm1y1.mpga",lyric_id:"",id:"lostskydreamsptiifeatsaraskinner_RXI2_admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_p4fh9nm1y1.mpga?alt=media&token=f7a7ad35-e4d2-4387-8319-2688fabd9282",duration:216},{name:"Perfect",song_in:"admin",blurhash_encode:"UY9,tJRQyZRQn-V[oJWBpKaeROkBbIWBfikB",song_file_path:"songs/huudat01234560_perfect-edsheeran-5208784.mpga",id:"perfectedsheeran5208784mpga_wOSF_admin",duration:264,image_file_path:"images/perfectedsheeran5208784mpga_wOSF_admin_stock",size:4117,song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_perfect-edsheeran-5208784.mpga?alt=media&token=3c953332-727a-4846-aace-93a18882de2b",lyric_id:"perfectedsheeran5208784mpga_wOSF_admin",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fperfectedsheeran5208784mpga_wOSF_admin_stock?alt=media&token=11e8ee8b-5c3e-426c-8301-3ac87451654a",by:"admin",singer:"EdSheeran"},{image_file_path:"images/stealmygirl_nhcW_admin_stock",lyric_id:"stealmygirl_nhcW_admin",song_in:"admin",name:"Steal My Girl",blurhash_encode:"UOHw}rNaVYae_Nt7R+M|^*RjWBoLofofs:WB",singer:"One Direction",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fstealmygirl_nhcW_admin_stock?alt=media&token=c4a6cc9b-c92c-497b-a76f-a557d1647bc7",song_file_path:"songs/huudat01234560_stealmygirl-onedirection-5434790.mpga",size:3772,by:"admin",duration:227,id:"stealmygirl_nhcW_admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_stealmygirl-onedirection-5434790.mpga?alt=media&token=41b6f6b9-5961-42bd-a7e3-d5764ba4dcae"},{song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_sugar--3330663.mpga?alt=media&token=c7fe9b02-a189-4721-9ed9-ebd96618f291",by:"admin",blurhash_encode:"UkE{P7jFNwf6T#WVsTbHxcjZoLjZO=bIWWbH",image_file_path:"images/sugar_H5zA_admin_stock",song_file_path:"songs/huudat01234560_sugar--3330663.mpga",id:"sugar_H5zA_admin",singer:"Maroon 5",lyric_id:"sugar_H5zA_admin",size:3681,name:"Sugar",duration:236,image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fsugar_H5zA_admin_stock?alt=media&token=833833b1-d54d-4c50-8f24-e290de179191",song_in:"admin"},{singer:"Consoul Trainin",image_file_path:"images/takemetoinfinityconsoultrainin_Nkiw_admin_stock",song_in:"admin",song_file_path:"songs/huudat01234560_takemetoinfinity-consoultrainin-4723303.mpga",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Ftakemetoinfinityconsoultrainin_Nkiw_admin_stock?alt=media&token=04ecc734-f3fc-4b0d-b08b-456b29fd4c55",lyric_id:"takemetoinfinityconsoultrainin_Nkiw_admin",duration:208,by:"admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_takemetoinfinity-consoultrainin-4723303.mpga?alt=media&token=045f8984-8de7-4baa-9414-23386de5e0f9",name:"Take Me To Infinity",blurhash_encode:"UBDy@My5yqsE8|OlO9og.ivVm-kpKZWYizaK",size:3248,id:"takemetoinfinityconsoultrainin_Nkiw_admin"},{image_file_path:"images/thecalling_eRwo_admin_stock",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_thecalling-thefatratlaurabrehm-4391253.mpga?alt=media&token=779e3253-e60d-46d3-9a3f-f924752178f4",lyric_id:"",song_file_path:"songs/huudat01234560_thecalling-thefatratlaurabrehm-4391253.mpga",id:"thecalling_eRwo_admin",blurhash_encode:"UKE3b*WrDiMx00n#t7t7~WWCbbo#OHjFRPRj",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fthecalling_eRwo_admin_stock?alt=media&token=97909f54-8b4a-422a-84e9-4a1724ba0bd8",singer:"TheFatRat, Laura Brehm",duration:234,name:"The Calling",song_in:"admin",size:3651,by:"admin"},{image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Ftimber_NNe3_admin_stock?alt=media&token=dd80433d-dd6c-4cab-999b-7a66ac64d907",lyric_id:"timber_NNe3_admin",blurhash_encode:"ULNTg+XT00D*~WE2xat8D*WBIAM|~XxuIUax",id:"timber_NNe3_admin",duration:204,song_in:"admin",image_file_path:"images/timber_NNe3_admin_stock",name:"Timber",size:3265,singer:"Pitbull feat. Ke",by:"admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_timber-pitbullfeatkeha-6629607.mpga?alt=media&token=09e07118-f611-41d1-8ad1-d97a353dd2a8",song_file_path:"songs/huudat01234560_timber-pitbullfeatkeha-6629607.mpga"},{image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fyoui_DhYr_admin_stock?alt=media&token=ae005e9b-21d4-4c40-839d-a75fe81f6504",size:3954,singer:"One Direction",duration:238,song_file_path:"songs/huudat01234560_youi-onedirection-8438574.mpga",song_in:"admin",by:"admin",name:"You & I",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_youi-onedirection-8438574.mpga?alt=media&token=707a3005-6630-4f62-a8ed-96cc0895159f",id:"youi_DhYr_admin",image_file_path:"images/youi_DhYr_admin_stock",lyric_id:"youi_DhYr_admin",blurhash_encode:"UeI;|=M{JPs-?wn%a1WB%hsTs:bHMyt7R*ni"}],oK=[{image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fcloud9_5smE_admin_stock?alt=media&token=cd1f3afe-0c29-462f-ad17-b28b95b6e903",name:"NCS",by:"admin",id:"test_RVt4_admin",blurhash_encode:"U9L;1{%200t600xaXNxt0JR*?ExZ01R*~AoL",song_ids:["hope_AI6Q_admin","thecalling_eRwo_admin","lostskydreamsptiifeatsaraskinner_RXI2_admin","cloud9_5smE_admin","diviners_exqv_admin"]}];function zm({admin:t}){const{setErrorToast:e}=gn(),{user:n,loading:r}=ht(),{initial:i,initSongsContext:s}=dt(),[o,a]=f.useState(""),[l,c]=f.useState(!0),d=m=>{c(!1),a(m),e({message:"Use song error"})},h=async()=>{try{if(Ms.isDev){await wh(Ms.loadingDuration),s({adminSongs:sK,adminPlaylists:oK});return}const m=await eK(),p=await tK();if(console.log("check admin songs",m),console.log("check admin playlists",p),t){s({userSongs:m,userPlaylists:p}),console.log("admin",p,m),c(!1);return}if(!n)await wh(Ms.loadingDuration),s({adminSongs:m,adminPlaylists:p});else{const y=await iK(n);s({...y,adminSongs:m,adminPlaylists:p})}}catch(m){console.log({message:m}),d("init song error")}finally{c(!1)}};return f.useEffect(()=>{if(r)return c(!0);if(i){console.log("Already init"),setTimeout(()=>c(!1),Ms.loadingDuration);return}else{h();return}},[r]),{initial:i,loading:l,errorMsg:o,initSongsAndPlaylists:h}}function aK({admin:t,inputRef:e}){const{user:n}=ht(),{isDev:r}=te(),{userSongs:i,addUserSongs:s}=dt(),{currentSong:o}=Y(Ne),{setTempSongs:a,tempSongs:l,clearTempSongs:c,shiftSong:d,status:h}=$m(),m=f.useRef([]),p=f.useRef([]),y=f.useRef(!1),{setErrorToast:x,setSuccessToast:_,setToasts:v}=gn(),g=E=>{if(!e.current)return;const S=e.current;S&&(S.value="",p.current=[]),c(E)},w=f.useCallback(async E=>{if(!n)return x({message:"Missing user data"});c("uploading");const T=E.target.files;if(!T.length){c("finish");return}let k=rx({by:t?"admin":n.email,song_in:t?"admin":"user"}),b=[];const P=Date.now(),I=O=>i.some(V=>V.singer===O.singer&&V.name===O.name&&V.size===O.size)||b.some(V=>V.singer===O.singer&&V.name===O.name&&V.size===O.size);try{let O;for(O=0;O<=T.length-1;O++){const F=T[O],z=await UF(F);if(!z){x({message:"Error when parser song"}),g("finish-error");return}let H={...k,name:z.name,singer:z.singer,duration:Math.floor(z.duration),size:Math.floor(F.size/1024)};if(I(H)){console.log(">>>duplicate"),y.current=!0,m.current.push(H);continue}b.push(H),p.current=[...p.current,O]}if(i.length+p.current.length>5&&n.role!=="ADMIN"){g("finish-error"),x({message:"You have reach the upload limit"});return}if(!b.length){y.current=!1,g("finish-error"),x({message:"Duplicate song"});return}a(b);for(let F=0;F<p.current.length;F++){const z=p.current[F];let H=nx(b[F].name);t&&(H+="_admin");const K={...b[F]},{filePath:de,fileURL:C}=await FP({file:T[z],folder:"/songs/",email:n.email,msg:">>> api: upload song file"});Object.assign(K,{id:H,song_file_path:de,song_url:C}),await qn({collection:"songs",data:K,id:K.id,msg:">>> api: set song doc"}),s([K]),d(),r&&console.log(K.name,"uploaded")}p.current=[],y.current?(g("finish-error"),v(F=>[...F,{id:vh(4),title:"warning",desc:"Song duplicate"}])):(g("finish"),_({message:`${b.length} songs uploaded`}));const V=Date.now();r&&console.log(">>> upload songs finished after",(V-P)/1e3);return}catch(O){console.log({message:O}),g("finish-error"),x({});return}},[n,i,o.song_in]);return f.useEffect(()=>{const E=document.querySelector(".temp-song");E&&E.scrollIntoView({behavior:"smooth",block:"center"})},[l]),{handleInputChange:w}}function lK(t,e){const{theme:n}=te(),[r,i]=f.useState(!1),[s,o]=HP("volume",1),a=d=>{const m=d.target.getBoundingClientRect(),p=t.current;if(p){let y=+((d.clientX-m.x)/p.clientWidth).toFixed(2);y>.9?y=1:y<.05?(y=0,i(!0)):i(!1),o(y)}},l=d=>{d.preventDefault();const h=.1;let m=s;d.deltaY>0?m-h>0?m-=h:m=0:m+h<1?m+=h:m=1,o(+m.toFixed(2))},c=()=>i(!r);return f.useEffect(()=>{if(t.current&&e){const d=s*100;t.current.style.background=`linear-gradient(to right, ${n.content_code} ${d}%, #e1e1e1 ${d}%, #e1e1e1 100%)`,e.volume=s,i(s===0)}},[s,n]),f.useEffect(()=>{e&&(e.muted=r)},[r]),{volume:s,handleSetVolume:a,isMute:r,handleMute:c,handleWheel:l}}const cK=/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;function uK({data:t,inputFields:e,imageURLFromLocal:n}){const[r,i]=f.useState(!!t.name),[s,o]=f.useState(!!t.singer),[a,l]=f.useState(!1),[c,d]=f.useState(!1),[h,m]=f.useState(!1);return f.useEffect(()=>{e.name?i(!0):i(!1)},[e.name]),f.useEffect(()=>{e.singer?o(!0):o(!1)},[e.singer]),f.useEffect(()=>{if(!e.image_url){l(!0);return}const p=cK.test(e.image_url);l(p)},[e.image_url]),f.useEffect(()=>{(e.name!==t.name||e.singer!==t.singer||e.image_url)&&m(!0)},[e,n]),f.useEffect(()=>{d(r&&s&&a&&h)},[r,s,a,h]),{validName:r,validSinger:s,validURL:a,isAbleToSubmit:c,isChangeInEdit:h,setValidURL:l}}const dK=async t=>{const e=Date.now(),n=await pI.post("/api/image/encode",t);let r;n&&(r=n.data.encode);const i=(Date.now()-e)/1e3;return console.log(">>> api: get blurHash encode finished after",i),{encode:r}},hK=async t=>{const e=new FormData;e.append("file",t);const n=Date.now(),r=await pI.post("/api/image/optimize",e,{responseType:"blob"});let i;r&&(i=r.data);const s=(Date.now()-n)/1e3;return console.log(">>> api: optimize finished after",s),i};function fK({song:t,close:e}){const n=Ke(),{theme:r}=te(),{user:i}=ht(),{setErrorToast:s,setSuccessToast:o}=gn(),{currentSong:a}=Y(Ne),{updateUserSong:l}=dt(),[c,d]=f.useState(!1),[h,m]=f.useState(!1),[p,y]=f.useState(t.image_url),[x,_]=f.useState(""),[v,g]=f.useState(),[w,E]=f.useState({name:t.name,singer:t.singer,image_url:""}),S=f.useRef(null),{isAbleToSubmit:T,validName:k,validSinger:b,validURL:P,isChangeInEdit:I,setValidURL:O}=uK({data:t,inputFields:w,imageURLFromLocal:x}),V=f.useMemo(()=>{if(x)return x;if(p)return p;if(P)return w.image_url},[w,x,p,t,P]),F=f.useMemo(()=>!!x||!!p,[x,p]),z=(D,G)=>{E({...w,[D]:G})},H=f.useCallback(()=>{t.image_file_path&&!x?y(""):x?(_(""),g(void 0)):y(""),m(!0);const D=S.current;D&&(D.value="")},[x,t.image_file_path]),K=f.useCallback(D=>{const Z=D.target.files[0];_(URL.createObjectURL(Z)),m(!0),g(Z)},[]),de=()=>{d(!1),e()},C=D=>{D.stopPropagation(),de()},$=async()=>{if(i){if(!t.id){s({message:"Edit song wrong data id"});return}try{let D={...t};if(I){if(console.log("is change in edit"),!w.name||!w.singer){console.log("input invalid"),s({});return}const G=w.image_url&&P?w.image_url:D.image_url;if(d(!0),D={...D,name:w.name,singer:w.singer,image_url:G},D.name!==w.name||D.singer!==w.singer){console.log("input invalid"),s({});return}if(v&&h){const{filePath:Z,fileURL:ie}=await FP({file:v,folder:"/images/",email:i.email});D.image_file_path=Z,D.image_url=ie}else h&&(D.image_file_path="")}if(h&&(d(!0),console.log("isImpactOnImage"),t.image_file_path&&(D.image_file_path="",D.image_url="",await Cy({filePath:t.image_file_path,msg:">>> api: delete song's image file"})),!p&&!v&&(console.log("remove current image url"),D.image_file_path="",D.image_url=""),v)){console.log("upload new file");const G=await hK(v);if(G==null)return;const Z=pG({blob:G,folder:"/images/",songId:D.id}),{encode:ie}=await dK(G);ie&&(D.blurhash_encode=ie,console.log("check encode",ie));const{filePath:ae,fileURL:ge}=await Z;D.image_file_path=ae,D.image_url=ge}await qn({collection:"songs",data:D,id:D.id,msg:">>> api: update song doc"}),l(D),a.id===D.id&&n(Xn({...D,currentIndex:a.currentIndex,song_in:a.song_in})),o({message:"Song edited"}),de()}catch(D){console.log({message:D}),s({})}finally{d(!1)}}},q={textColor:r.type==="light"?"text-[#333]":"text-[#fff]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${r.alpha} text-[14px] font-[500]`};return u.jsxs("div",{className:`w-[500px] max-w-[calc(90vw-40px)] h-[auto] ${c?"disable":""}`,children:[u.jsx("input",{ref:S,id:"editImageInput",type:"file",accept:"image/*",onChange:K,className:"hidden"}),u.jsx("h1",{className:"text-[20px] font-semibold",children:"Edit"}),u.jsxs("div",{className:"flex gap-[20px] mt-[10px] max-[800px]:flex-col",children:[u.jsxs("div",{className:"w-[30%] max-[800px]:flex max-[800px]:w-full max-[800px]:gap-[12px]",children:[u.jsx("div",{className:"w-full rounded-[5px] overflow-hidden",children:u.jsx(pi,{classNames:"object-cover object-center w-full h-full",onError:()=>O(!1),src:V,blurHashEncode:t.blurhash_encode})}),u.jsxs("div",{className:"md:mt-[10px]",children:[u.jsxs("div",{className:"flex gap-[10px]",children:[u.jsx("label",{htmlFor:"editImageInput",className:`inline-block cursor-pointer hover:brightness-90 px-[20px] py-[5px] bg-${r.alpha} rounded-full text-[14px]`,children:u.jsx(yT,{className:"w-[15px]"})}),F&&u.jsx(Q,{onClick:()=>H(),className:`inline-block hover:brightness-90 px-[20px] py-[5px] ${r.content_bg} rounded-full text-[14px]`,children:u.jsx(Ps,{className:"w-[15px]"})})]}),u.jsx("p",{className:`text-[12px] ${q.textColor} mt-[10px]`,children:"* Image from URL will not be apply until you remove current image"})]})]}),u.jsxs("div",{className:"flex flex-col flex-grow gap-[10px]",children:[u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"text-[14px] inline-flex",children:["Name:",k?u.jsx(xd,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Ps,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:`${q.input} ${q.textColor}`,value:w.name,type:"text",onChange:D=>z("name",D.target.value),placeholder:t.name})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Singer:",b?u.jsx(xd,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Ps,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:q.input,value:w.singer,onChange:D=>z("singer",D.target.value),type:"text",placeholder:t.singer})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Image URL:",w.image_url&&u.jsx(u.Fragment,{children:P?u.jsx(xd,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Ps,{className:"w-[20px] text-red-500 ml-[10px]"})})]}),u.jsx("input",{className:q.input,value:w.image_url,onChange:D=>z("image_url",D.target.value),type:"text"})]}),u.jsxs("div",{className:"flex gap-[10px] mt-[10px]",children:[u.jsx(Q,{isLoading:c,onClick:$,className:`${r.content_bg} rounded-full text-[14px] ${T?"":!h&&"disable"}`,variant:"primary",children:"Save"}),u.jsx(Q,{onClick:C,className:`bg-${r.alpha} rounded-full hover:bg-red-500 hover:text-[#fff] text-[14px]`,variant:"primary",children:"Close"})]})]})]})]})}function mK({toast:t,theme:e,onClick:n}){const r={icon:"w-[30px] max-[549px]:w-[25px]",container:`text-white px-[12px] py-[6px] rounded-[4px] flex items-center  ${e.side_bar_bg} border border-${e.alpha}`,text:`font-[500] text-[14px] max-[549px]:text-[14px] ${e.type==="light"?"text-[#333]":""}`};return u.jsxs("div",{onClick:()=>n?n(t.id):void 0,className:`${r.container} animate-[fadeIn_0.3s_linear]`,children:[t.title&&u.jsxs("span",{className:"mr-[10px]",children:[t.title==="success"&&u.jsx(vT,{className:`${r.icon} text-emerald-500 `}),t.title==="error"&&u.jsx(SO,{className:`${r.icon} text-red-500`}),t.title==="warning"&&u.jsx(Mv,{className:`${r.icon} text-yellow-500`})]}),u.jsx("p",{className:r.text,children:t.desc})]})}function pK({lyric:t,handleSetTime:e,theme:n,realTimeLyrics:r,index:i,setRealTimeLyrics:s}){const[o,a]=f.useState(!1),[l,c]=f.useState(t.text),d=f.useRef(null),h=p=>{p.preventDefault();const y=[...r],x={...y[i],text:l};y[i]=x,console.log("check new lyric ",x),s(y),a(!1)},m={input:`bg-${n.alpha} rounded-[4px] outline-none w-full px-[8px] text-[16px]`};return f.useEffect(()=>{var p;o&&((p=d.current)==null||p.focus())},[o]),u.jsxs("div",{className:"pb-[10px]",children:[!o&&u.jsxs("p",{className:"text-[16px] leading-[1.2] font-bold select-none flex items-center",children:[t.text,u.jsx("button",{onClick:()=>a(!0),className:"ml-[8px]",children:u.jsx(TT,{className:"w-[16px]"})})]}),o&&u.jsx("form",{action:"",onSubmit:h,children:u.jsx("input",{onBlur:()=>a(!1),value:l,onChange:p=>c(p.target.value),ref:d,type:"text",className:m.input})}),u.jsxs("div",{className:"flex gap-[10px] h-[20px]",children:[u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.start),children:[t.start,"s"]}),u.jsx("span",{children:" - "}),u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.end),children:[t.end,"s"]})]})]})}function Ry({cb:t,active:e,className:n,size:r="default"}){const{theme:i}=te(),s={circle:`${r==="default"?"w-[20px] h-[20px]":"w-[16px] h-[16px]"}  absolute bg-white left-[3px] rounded-[50%] transition-transform top-[50%] translate-y-[-50%]`,active:`${r==="default"?"translate-x-[14px]":"translate-x-[18px]"} `,inActive:"translate-x-[0]"};return u.jsx("div",{onClick:t,className:`relative  cursor-pointer ${r==="default"?"h-[24px]":"h-[20px]"} rounded-[99px] w-[40px] ${n||""} 
         ${e?i.content_bg:"bg-"+i.alpha} `,children:u.jsx("div",{className:`${s.circle} ${e?s.active:s.inActive}`})})}function gK({audioEle:t}){const e=f.useRef(!1),{playStatus:{isPlaying:n}}=Y(hr),[r,i]=f.useState(0),[s,o]=f.useState(0),a=f.useRef(),l=c=>{i(0),Jt("timer",0),clearInterval(a.current),c&&o(0)};return f.useEffect(()=>{if(e.current&&(console.log("check cd",s,r,n),!!r)){if(!s)o(r),n||t.play();else if(!n)return;return a.current=setInterval(()=>o(c=>c===1?(t.pause(),l(),0):((c===r||c%5===0)&&Jt("timer",c-1),c-1)),1e3),()=>{clearInterval(a.current)}}},[n,r]),f.useEffect(()=>{if(!e.current){e.current=!0;const c=ni().timer||0;o(c),i(c)}},[]),{countDown:s,isActive:r,handleEndTimer:l,setIsActive:i}}function yK({children:t,className:e="px-2 py-1 text-sm font-[600]",position:n="bottom-[calc(100%+8px)]",isOpen:r=!1,isWrapped:i=!1,content:s,...o},a){const[l,c]=f.useState(!1),{theme:d}=te(),h=f.useRef(null),m=()=>{c(!0)},p=()=>{c(!1)};f.useEffect(()=>{const _=h.current;if(console.log(_),!!_)return _.addEventListener("mouseenter",m),_.addEventListener("mouseleave",p),()=>{_.removeEventListener("mouseenter",m),_.removeEventListener("mouseleave",p)}},[]);const y={container:`${d.type==="dark"?"bg-white text-[#333]":"bg-slate-600 text-white"}`},x=u.jsx(u.Fragment,{children:f.isValidElement(t)&&u.jsxs(u.Fragment,{children:[f.cloneElement(t,{ref:h,...o}),!r&&l&&u.jsx("div",{className:`${y.container} absolute whitespace-nowrap -translate-x-1/2 left-1/2 rounded-md ${n} ${e}`,children:s})]})});if(f.isValidElement(t))return u.jsx(u.Fragment,{children:i?x:u.jsx("div",{className:"relative",children:x})})}const Xh=f.forwardRef(yK);function B1({audioEle:t}){const{theme:e}=te(),n=f.useRef(null),{countDown:r,isActive:i,handleEndTimer:s,setIsActive:o}=gK({audioEle:t}),a=d=>o(d),l=()=>{var d;i?s(!0):(d=n.current)==null||d.toggle()},c={container:"w-[54px] sm:w-[50px] flex justify-center",button:`rounded-[99px]  hover:bg-${e.alpha} p-[5px]`,itemContainer:"flex justify-between items-center min-h-[30px]",text:"text-base text-[#ccc]"};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:c.container,children:i?u.jsx(Xh,{content:"Clear timer",children:u.jsxs("button",{className:"group flex items-center",onClick:l,children:[u.jsx("span",{className:"text-base opacity-70 sm:text-sm group-hover:hidden",children:dc(r)}),u.jsx("span",{className:`hidden group-hover:block ${c.button}`,children:u.jsx(Ps,{className:"w-6"})})]})}):u.jsx(Xh,{content:"Sleep timer",children:u.jsx("button",{onClick:l,className:c.button,children:u.jsx(xT,{className:"w-6"})})})}),u.jsx(Br,{ref:n,variant:"animation",children:u.jsx(TQ,{active:a,close:()=>{var d;return(d=n.current)==null?void 0:d.toggle()}})})]})}const V1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABnCAMAAADBqBfIAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAu5QTFRF+9t4AAAA////+tp4+9t6iWRS/fDGkm1W//35imVT///+imRT/Oah9NN25sRx/eej+91+//78i2ZT+9x7kGtV/vbeiWRS9tZ2+Nd3/fHL+96C/OWd//zz//32/vPS2rlu/vLOjWhU/e/D+9+F//rslXBX/euy/vTXl3NX/vTV+dl3/ems7s10/OGN/vfhlnBQ/Oem/OSa/OKQt5Ri8dB1/N+I/vXaoHta/eu1/vjk/fHJ/vnp/OCK/e26o39b6chyj2lR/e/BimVSiWRS7Mtz/eiqjGdR/eqv//vv/OSYjWdR4b9vzqxp/OOWk21Qi2ZRnXlZ/vnnpoJcv5xl3bxumnNP/OKUimRSimVSkGlRm3ZZimRSq4del3BP1LJrmnJPzKppnXVO2LZtroZMt45Mj2hRqH9MrIJKmXJPqIRdrIhelG1Qn3dPxaNms49hqoJLlG1Qm3NPupFJoXlOnXZPnHVPlG5QlW5QkWtRjmhRjGZSi2ZSn3dOmHFPjWdSnXVOtZJhoXhO/e6948FwvZpk/OGPmXJQqoJJu5djrodFvpVIj2hRl3BPj2lRjGdRsohLkWpRm3NP////jWdRw5lGqIFNpHxPlm9QlG1Qn3dPl3BPsYhNx6Rn0K5qsY5gmHBP//vxkWtR////////zqNJ////////s4pIkGpRl3BQ///+pn1M////ropfmHFQpn5PjmhRmnNPonpOm3VOl3BQxp9JxZlLkmxRwp9lk2xRs4lK////lnBQwplJnXZPkmtQzLqvkmtQ////lW9Q9/Tx+vj2sJN74s+lkmxQ6+Xjo4Rx2c3EspmN2rt4////5sqFwa6k////xZtD5dfDoXhKlnRl////uaCQ+/jy////zKBH////totJ////////4MeV////////1Kc++vfznHdYu5RFn3hOr4dLnXZP8ezp////////vpVD////////mnNP////l3BQkWtRmXJPpH1Np39Q////rINMmnROoHhQyC8s0wAAAPp0Uk5T/wD////3///////9//////////////r///////////////////////////////9o/////////////////////7//4u7//9X////K////iN///////0P/8uyf/+j/Q/8Y/x3/AwKuBg1O//9xDP//C4Q1BRMuK3hWirnn2idLzxf/Cf////86A/8CA7RSqNAIm0v5xQEVFmJqEl0E////WP+kBVcBf7wCkT0VEeP/XgujPCBVfwEClf+OD8pLBTqrwkqTJsneoApf///h6P8d///rAv8E66f//4sCKxNpw/+i1wHWXwIxCyf/sTQKDOoh9G7EZC4NkhEsBY8dBX0AAAe/SURBVHic7ZpnWBNJGMd3E0IIoYQQktACoUZ6C6GDdFEBkd6kSrFixY7KoWfvXRTLnd07z16v9957P73e77z7drshOxOyk82mPPfcPY//j+/svr+Zd2benbIY/i8Iuwf5P0Pe/3Duw0v2REf/dqCh59z3tofcmRO9fkOVUCzhBwergoP5SoE0e2tvZ/Msm0Gubh4qkSo1fU3luQnOMrlc5pwQ4dJyuVslzFk67/bnNoDM6GznSbqaMsMwupzL+1WCkt7FbdZB7uzKF2r2R3ARhGHJXeL5VWt7LlgO2T1lIX8w0yhAp7BxGYKs45Mtg7RGZ0smJphCkOKOrZdmLbYA0jaQJelzZoPQyi9D2rvbXMjymdIyk4EaGTT+ogbzIE8USZqM9zZaCfWC81PNgJypLss1E0E2plG5dQdbyOR54j7UtDAtl9KSAXaQN28JG80NFSXnripUx9AgJx/it1iIICSP550xDZm8QOJiOYPomNXSR7aZgMyo4a+0hkFQJvLWMUO2bVJa1Q5S3D7ebSbI3l3KRmsZRL+czv6aAXKdZ/YURElWu2GjUciyutM2QBDK5F9ZZQTyd3sp+4zILD/pASOQKWKrOx1osHo3ErKjOt5mDCxCdWwVAtJaY7NgkfLjVSAgAzw/GzIwbkbRGhqkrSjDlgwiIyuv0yA94nLbQrjTi84aQCZnddtiGuorVzDfANLDG2tjBoZ1FelBrn37+NFH3/GujFQH2tkSMlYwF0I4Orn5pMbZEiIvvQIhP3OAxqAeTk8qyItxih0fF+kObHZs2jyubjsK4o16FpS6qYGtYJTC398zxV6ngNFarUgPCXcdo6YqkCDsBJAfIcQJBXEDxZHAZs9hkENiuncaSdK0A8gpWJyHgjiA4vuALYUJQspXUeCFXV54g4J8BotC2EI8TUEIudm/IlhMQT6G9nQUxAcB8WcB4XDeffVLCvI2tNqjIIWguBIBCXClFBOeHqBI9nXUxzz5sg5yFNoSUZAJoHg8sCmAzWCs2MUVJLrpUa79MAw5DE2pKIgHKIbTCELoo17kHaXXmj8PaSEfbAEWBxQkFOFwFKJ1ehi9cbHlOy3kxGvQFIh4BQ5XGBoIjkS8gYmSocv3tJBnnoIWVL3SQSmcRhCCqhaGOcGAPaCFdLwAIeG6h9xFXuq0yMpYp5jwEBgaOI0Sgc0dCVE7GEBmvwghCqe8kPQAT0ViVGqhr/4o0SqdDkH24gjIp1rIpLdg2xwdOQyC0wiMuEI0JBb6OTwMyfmGybOeFHRIMhoCh/ipEzrIGywhHnRIKJJRCSP90fBknFT9CWOQoFLBpyqKMiETUVoqeOWLQ8OQ2XUv+SB9Et3qE+ShsAfjtVBEg6DydhxMRM89rctdHdn76UnVN3lUQFJMbBrp1psy+nhRfsBko2cV9xBY5YPPF+sgN/L3jdGrfGpoSlJMZZoX/IoHgjK1IcTNYMLbqQs8YOw94vi/UOuuBfF2ED5BhBnKzldX5gg+KFRAYNsIicaH+x+E1XWzF8kEnRTkUhk3ALYEsSwCPeBtCHHwTElJ8STkrwiNCvLl6CGivN2xXOkcChKtkkXCGRpAh4AqFFCWVA6zHJPzyIiUVy+jIAPKCDuYjA7Sl1SutAqYgES5DodxX/5GCnJX6IfpdX0sDaKm4gCmXpBxgM+oJGo0cOuHwIL7Qkk/Zge/5AoaxJ2qeDIzxDHIPyRWDfOyLDgaruqHNBgWDkaeQxqNMpqqJWVI9FB4BqxIKggnFrDD8h4TpzZM+y5wSYTjZ8QyTAQrt4IGiaWqSrnxErFZDE+rngUhzTl+er3L8aVNFRGZ8ApDV+ShP1HGpFmvtwlqyxokAg+bEk57PNkjKTbQPAKGOQsO6O+05ksSiKaA/FzoZfi8Rbujpuzd+pCTvHFEU8BHwjHJEp+Gkms2XRyxZ1xfS+xL49yM94oFGrGdI3VcSp6rwIyPXN6bqe78r0ZC9i7oDiMGJuh7H/RyyhzlCg232HiFmDx7BMPYgz4hzVV8/lRDyJqtGeRpgXYh55CC3KCaJxflEtwQgjdIyeOCNCIV+o+3xXa+K7+VDmmrqSWPomI8K02+z0booyi8uWoixnKDblrOtTWtKAg+T2zWjQmj+nK240jI8rUa2x10zsfREGK9Omib86hc/jFjR7Y4vo5MYdZLXpo/8kpoBOTIFKUV1xqAMZ3xGB3fO2TdxYZW8bybOBMEX97Ot5ISNo23B2eG4B2/WknpFx540BQEv7qWb8W5qryfF23oEXVxNvWW5ZcosnredVo70FeAxcJ+y64AMzXZFXR/6MvM1meruiy4zOQ2SoqaUQwj17K/L5K0mNsY50Fp73KkN2MXzDtmCrsizGKMU5U8dj/amfH7+Iqlyn7W+ZK7soy36a4xVwyX/n/sWhg8UcaKMbZbnNXTatQT4+8LHb11ktW5phKz3K9MuKECMXDZQXB8WfFCZZcfQ3O4EdNqhUWbZzB6MflLyawl7VXisn2ZiO4JSyhfrRIuKj53xIQPFj/HvN68c0GOOLj+cotLglxXf1nuyv2rNXxhyaWGsyYdsP3NZ81fO2s21PEEAkmwSkX+5SOsKskq7txOu6+2BkJq1uyfbq6Lnjdz5vkpOzfPae64yPrN/9yvV/cgOP4PsP50Fs+e30kAAAAASUVORK5CYII=";function vK({vinylRef:t}){const{playStatus:{isPlaying:e}}=Y(hr);f.useEffect(()=>{const n=t.current;n&&(e?n.style.animationPlayState="running":n.style.animationPlayState="paused")},[e])}function xK({isOpenFullScreen:t,admin:e}){const n=f.useRef(null),{currentSong:r}=Y(Ne);vK({vinylRef:n});const i={songInfoWrapper:`${e?"w-1/4":"w-1/4 "}`,songInfoChild:"flex flex-row"};return u.jsx("div",{className:`${i.songInfoWrapper}  ${t?"hidden":""}`,children:u.jsxs("div",{className:`${i.songInfoChild} ${t?"hidden":""}`,children:[u.jsx("div",{className:e?"w-[46px]":"w-[56px]",children:u.jsx("img",{ref:n,src:r.image_url||V1,className:"rounded-full w-full animate-[spin_8s_linear_infinite]"})}),u.jsxs("div",{className:"ml-2 flex-grow",children:[u.jsx("div",{className:"h-[32px]",children:u.jsx(nf,{className:"leading-[1.5] font-playwriteCU",content:r.name||"Name"})}),u.jsx("div",{className:"h-[20px]",children:u.jsx(nf,{autoScroll:!0,className:"opacity-70 leading-[1.2]",content:r.singer||"..."})})]})]})})}function wK({idle:t,audioEle:e,admin:n,isOpenFullScreen:r,setIsOpenFullScreen:i,isOpenSongQueue:s,setIsOpenSongQueue:o}){const{theme:a}=te(),{currentSong:l}=Y(Ne),c=f.useRef(null),d=On(),{handleSetVolume:h,isMute:m,handleMute:p,handleWheel:y}=lK(c,e),x=f.useMemo(()=>d.pathname.includes("edit"),[d]),_=()=>{s&&o(!1),i(!0)},v={before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]",wrapper:`border-${a.alpha} fixed bottom-0 w-full border-t transition-transform z-50 px-6 ${n?"h-[60px]":"h-[90px]"}`,container:"flex flex-row gap-[10px] h-full items-center",controlWrapper:"flex max-w-[450px] flex-grow",controlWrapperChild_1:`${r?"max-w-[600px] flex-col-reverse pb-[10px]":"flex-col justify-center"}`,controlWrapperChild_2:`${!l.song_url&&"disable"}`,right:`${n?"w-1/4":"w-1/4 "} flex items-center justify-end`,volumeLineBase:"ml-1 w-full relative h-[4px] cursor-pointer rounded-full",volumeLineCurrent:"absolute left-0 top-0 h-full w-full ",blurBg:`bg-opacity-[0.8] backdrop-blur-[15px] z-[-1] absolute inset-0 ${a.bottom_player_bg}`};return u.jsxs("div",{className:`${v.wrapper} ${r&&"border-transparent"} ${x&&"translate-y-[100%] "} bg-transparent`,children:[u.jsx("div",{className:`${v.blurBg} ${r?"opacity-0 transition-opacity delay-[.2s]":""}`}),u.jsxs("div",{className:`${v.container} ${r?"justify-center text-white":"justify-between"} ${t&&"transition-opacity duration-[.3s] opacity-0"}`,children:[u.jsx(xK,{isOpenFullScreen:r,admin:n}),u.jsx("div",{className:` ${v.controlWrapper} ${n?"":v.controlWrapperChild_1}  ${v.controlWrapperChild_2}`,children:f.useMemo(()=>u.jsx(QP,{admin:n,audioEle:e,isOpenFullScreen:r}),[r])}),u.jsxs("div",{className:`${v.right}  ${r?"hidden":""}`,children:[u.jsxs("div",{className:"flex flex-grow items-center max-w-[120px] mr-2",children:[u.jsx("button",{onWheel:y,onClick:()=>p(),children:m?u.jsx(gO,{className:"w-6"}):u.jsx(fO,{className:"w-6"})}),u.jsx("div",{onClick:g=>h(g),ref:c,className:`${v.volumeLineBase} ${v.before}`,style:{background:"#e1e1e1"}})]}),!n&&u.jsxs("div",{className:`flex items-center ${l.name?"":"disable"}`,children:[u.jsx(Xh,{content:"Fullscreen mode",children:u.jsx("button",{onClick:_,className:`rounded-[99px]  hover:bg-${a.alpha}  p-[5px]`,children:u.jsx(yj,{className:"w-6"})})}),u.jsx(Xh,{content:"Queue",children:u.jsx("button",{onClick:()=>o(!s),className:`ml-1 hover:bg-${a.alpha} rounded-md p-[5px]`,children:u.jsx(uO,{className:"w-6"})})}),u.jsx("div",{className:`w-[2px] h-[26px] ml-2 bg-${a.alpha}`}),u.jsx(B1,{audioEle:e})]})]})]})]})}const _K=f.memo(wK);function U1({audioEle:t}){const e=Ke(),{queueSongs:n}=Y(gi),{currentSong:r}=Y(Ne),{playStatus:i}=Y(hr),s=f.useRef(0),{isRepeat:o,isShuffle:a,isPlaying:l}=f.useMemo(()=>i,[i]),c=()=>{try{t==null||t.play()}catch{}},d=()=>{t==null||t.pause()},h=f.useCallback(()=>{l?d():c()},[l]),m=f.useCallback(()=>{let _=s.current+1,v;_<n.length?v=n[_]:(_=0,v=n[0]),e(Xn({...v,currentIndex:_,song_in:r.song_in}))},[r,n]),p=f.useCallback(()=>{let _=s.current-1,v;_>=0?v=n[_]:(v=n[n.length-1],_=n.length-1),e(Xn({...v,currentIndex:_,song_in:r.song_in}))},[r,n]),y=()=>{const _=!a;e(tr({isShuffle:_})),Jt("isShuffle",_)},x=()=>{let _;switch(o){case"no":_="one";break;case"one":_="all";break;case"all":_="no";break;default:_="no"}Jt("isRepeat",_),e(tr({isRepeat:_}))};return f.useEffect(()=>{r.name&&(s.current=r.currentIndex)},[r]),{handleNext:m,handlePrevious:p,play:c,pause:d,handleRepeatSong:x,handleShuffle:y,handlePlayPause:h,playStatus:i,currentSong:r,queueSongs:n}}function EK({audioEle:t,timelineRef:e,currentTimeRef:n,remainingTimeRef:r}){const i=Ke(),{theme:s}=te(),{user:o}=ht(),{queueSongs:a}=Y(gi),{playStatus:{isPlaying:l,isRepeat:c,isShuffle:d,isCrossFade:h}}=Y(hr),{currentSong:m}=Y(Ne),{currentPlaylist:p}=Y(yi),[y,x]=f.useState(0),_=f.useRef(!0),v=f.useRef(0),g=f.useRef(0),w=f.useRef(0),E=f.useRef(s.content_code),S=f.useRef(!1),T=f.useRef(!0),k=f.useRef(),{handleNext:b}=U1({audioEle:t}),P=On(),{setErrorToast:I}=gn(),O=f.useMemo(()=>P.pathname.includes("edit"),[P]),V=()=>{try{if(t.play(),!o)return;T.current&&(h&&(t.volume=0),T.current=!1)}catch{}},F=()=>{t.pause()},z=ae=>a[ae],H=f.useCallback(()=>{l?F():V()},[l]),K=()=>{i(tr({isPlaying:!1})),k.current&&clearInterval(k.current)},de=()=>{_.current=!1,i(tr({isPlaying:!0,isWaiting:!1,isError:!1}))},C=()=>{_.current||Jt("duration",0),e.current&&n.current&&r.current&&(n.current.innerText="0:00",r.current.innerText="0:00",e.current.style.background="#e1e1e1")},$=f.useCallback(ae=>{const ge=ae.target;if(e.current){const he=ge.getBoundingClientRect(),Gt=(ae.clientX-he.left)/e.current.offsetWidth,fr=Math.ceil(Gt*t.duration),Qa=t.currentTime;if(g.current&&Math.abs(Qa-g.current)<1&&Math.abs(fr-g.current)<1){console.log("no seek");return}t.currentTime=fr,g.current=fr}},[]),q=ae=>{const he=ni().volume||1;if(ae<=2){const Ue=ae/2*he;t.volume=Ue}else if(ae<w.current){t.volume!=he&&(t.volume=he);return}if(ae>=w.current){const Ue=(t.duration-ae)/2*he;t.volume=Ue}},D=()=>{const ae=t.currentTime,ge=e.current;if(t.duration&&ae&&ge){const he=ae/(t.duration/100);ge.style.background=`linear-gradient(to right, ${E.current} ${he}%, #e1e1e1 ${he}%, #e1e1e1 100%)`}n.current&&(n.current.innerText=dc(ae)||"00:00"),h&&q(ae)},G=()=>{const ge=ni().volume||1;if(t.volume=ge,c==="one")return V();if(d){let he=v.current;for(;he===v.current;)he=Math.floor(Math.random()*a.length);const Ue=z(he);return i(Xn({...Ue,currentIndex:he,song_in:m.song_in}))}v.current===a.length-1&&(c==="all"?S.current=!1:S.current=!0)},Z=()=>{const ae=r.current,ge=t.duration,he=ni(),Ue=he.current;if(ae.innerText=dc(ge),w.current=ge-3,(!_.current||!Ue)&&Jt("current",m),S.current){S.current=!1,i(tr({isWaiting:!1,isPlaying:!1}));return}if((O||_.current)&&(i(tr({isWaiting:!1,isPlaying:!1})),_.current)){if(_.current=!1,Ue&&Ue.id===m.id){t.currentTime=he.duration||0,D();return}console.log("play"),V()}V()},ie=()=>{x(Math.random())};return f.useEffect(()=>(t.addEventListener("error",ie),t.addEventListener("pause",K),t.addEventListener("playing",de),()=>{t.removeEventListener("error",ie),t.removeEventListener("pause",K),t.removeEventListener("playing",de)}),[]),f.useEffect(()=>{y&&(_.current||m.name&&(a.length>1?(b(),I({message:"Có lỗi do đường truyền mạng"})):i(tr({isWaiting:!1,isError:!0}))))},[y]),f.useEffect(()=>{if(!m.name){i(tr({isWaiting:!1,isPlaying:!1}));return}return F(),i(tr({isWaiting:!0,isError:!1,isPlaying:!1})),t.src=m.song_url,v.current=m.currentIndex,m.name&&(document.title=`${m.name} - ${m.singer}`),()=>{C(),clearInterval(k.current),T.current=!0}},[m.id+m.song_in+m.currentIndex]),f.useEffect(()=>{if(!m.name)return;let ae=`${m.name} - ${m.singer}`;!l&&p.name&&m.song_in.includes(p.id)&&(ae=`${p.name}`),document.title=ae},[l]),f.useEffect(()=>(t.addEventListener("ended",G),()=>t.removeEventListener("ended",G)),[c,d,m.song_in,a]),f.useEffect(()=>(t.addEventListener("timeupdate",D),()=>t.removeEventListener("timeupdate",D)),[h]),f.useEffect(()=>{E.current=s.content_code,l||D()},[s]),f.useEffect(()=>(O&&l&&F(),t.addEventListener("loadedmetadata",Z),()=>{t.removeEventListener("loadedmetadata",Z)}),[O,m.id,h]),f.useEffect(()=>(l&&(k.current=setInterval(()=>{Jt("duration",t.currentTime.toFixed(1))},3e3)),()=>clearInterval(k.current)),[l]),{handleSeek:$,play:V,pause:F,handlePlayPause:H}}function QP({audioEle:t,admin:e,isOpenFullScreen:n}){const{theme:r}=te(),i=f.useRef(null),s=f.useRef(null),o=f.useRef(null),{handleNext:a,handlePrevious:l,handleRepeatSong:c,handleShuffle:d,playStatus:{isRepeat:h,isShuffle:m,isError:p,isWaiting:y},currentSong:x,queueSongs:_}=U1({audioEle:t}),{handleSeek:v,handlePlayPause:g}=EK({audioEle:t,timelineRef:i,currentTimeRef:s,remainingTimeRef:o}),w={button:"p-1",buttonsContainer:"w-full flex justify-center items-center space-x-3",progressContainer:`flex w-full flex-row items-center mb-5 ${n?"mb-0":"sm:mb-2"}  ${e?"h-full":""}`,processLineBase:"h-[6px] sm:h-1 flex-grow relative cursor-pointer rounded-[99px] ",processLineCurrent:`absolute left-0 rounded-l-[99px] top-0 h-full ${r.content_bg}`,currentTime:"opacity-60 text-[14px] font-semibold",icon:"w-[44px] sm:w-7",before:"before:content-[''] before:w-[100%] before:h-[24px] before:absolute before:top-[50%] before:translate-y-[-50%]"};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`${w.buttonsContainer}`,children:!e&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{disabled:_.length<=1,className:`relative ${w.button} ${h!=="no"&&r.content_text}`,onClick:c,children:[u.jsx(FD,{className:w.icon}),u.jsx("span",{className:"absolute font-bold text-[12px] font-playwriteCU top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ",children:x.name&&(h==="one"?"1":h==="all"?"--":"")})]}),u.jsx("button",{disabled:_.length<=1,className:w.button,onClick:()=>l(),children:u.jsx(QD,{className:w.icon})}),u.jsx(wb,{handlePlayPause:g}),u.jsx("button",{disabled:_.length<=1,className:`${w.button}`,onClick:()=>a(),children:u.jsx(_T,{className:w.icon})}),u.jsx("button",{disabled:_.length<=1,className:`${w.button} ${m&&r.content_text}`,onClick:d,children:u.jsx(HD,{className:w.icon})})]})}),u.jsxs("div",{className:`${w.progressContainer} ${p?"disable":""}`,children:[u.jsx("div",{className:"w-[44px] sm:w-[36px]",children:t&&u.jsx("span",{ref:s,className:"text-lg sm:text-sm",children:"0:00"})}),u.jsx("div",{ref:i,style:{background:"#e1e1e1"},onClick:E=>v(E),className:`${w.processLineBase} ${y?"disable":""}  ${w.before}`}),u.jsx("div",{className:"w-[44px] sm:w-[36px] text-right",children:t&&u.jsx("span",{ref:o,className:"text-lg sm:text-sm",children:"0:00"})}),e&&u.jsx("div",{className:"flex items-center",children:u.jsx(wb,{handlePlayPause:g})})]})]})}function _b(t,e){const n=f.useRef(),[r,i]=f.useState(0),[s,o]=f.useState(0);return f.useEffect(()=>{r&&(n.current=setTimeout(()=>n.current=void 0,e))},[s,Ms]),f.useEffect(()=>{n.current||(t(),o(Math.random()*10))},[r]),()=>i(Math.random()*10)}function YP({audioEle:t}){const{theme:e,isOnMobile:n}=te(),r=Ke(),{playStatus:{lyricSize:i,songBackground:s,songImage:o}}=Y(hr),a=c=>{r(tr({lyricSize:c})),Jt("lyricSize",c)},l={disableBtn:"bg-white/10 bg-opacity-20",lyricSizeBtn:`group/text !hover:brightness-100 font-[600] h-[30px] w-[30px] sm:h-[26px] sm:w-[26px] relative ${e.content_hover_bg}`,itemContainer:"flex justify-between items-center min-h-[30px]",text:"text-base text-[#ccc]"};return u.jsx(u.Fragment,{children:u.jsx("div",{className:"w-[240px] sm:w-[220px]",children:u.jsxs(po,{color:"black",className:"space-y-[6px] text-white",theme:e,children:[u.jsxs("div",{className:l.itemContainer,children:[u.jsx("p",{className:l.text,children:"Lyric size"}),u.jsxs("div",{className:"flex space-x-[8px]",children:[u.jsx(Q,{onClick:()=>a("small"),variant:"circle",size:"clear",className:`${i==="small"?e.content_bg:l.disableBtn} ${l.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[11px]",children:"A"})}),u.jsx(Q,{onClick:()=>a("medium"),variant:"circle",size:"clear",className:`${i==="medium"?e.content_bg:l.disableBtn} ${l.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[13px]",children:"A"})}),u.jsx(Q,{onClick:()=>a("large"),variant:"circle",size:"clear",className:`${i==="large"?e.content_bg:l.disableBtn} ${l.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[15px]",children:"A"})})]})]}),u.jsxs("div",{className:`${l.itemContainer}`,children:[u.jsx("p",{className:l.text,children:"Song background"}),u.jsx(Ry,{size:"thin",className:"bg-white/10",active:s,cb:()=>r(xb({variant:"songBackground"}))})]}),!n&&u.jsxs("div",{className:`${l.itemContainer}`,children:[u.jsx("p",{className:l.text,children:"Song image"}),u.jsx(Ry,{size:"thin",className:"bg-white/10",active:o,cb:()=>r(xb({variant:"songImage"}))})]}),u.jsx(B1,{audioEle:t})]})})})}const Py=Math.min,aa=Math.max,Qh=Math.round,nd=Math.floor,cs=t=>({x:t,y:t});function SK(t,e){return typeof t=="function"?t(e):t}function W1(t){return t.split("-")[0]}function JP(t){return t.split("-")[1]}function bK(t){return t==="x"?"y":"x"}function kK(t){return t==="y"?"height":"width"}function H1(t){return["top","bottom"].includes(W1(t))?"y":"x"}function TK(t){return bK(H1(t))}function ZP(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function Eb(t,e,n){let{reference:r,floating:i}=t;const s=H1(e),o=TK(e),a=kK(o),l=W1(e),c=s==="y",d=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,m=r[a]/2-i[a]/2;let p;switch(l){case"top":p={x:d,y:r.y-i.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-i.width,y:h};break;default:p={x:r.x,y:r.y}}switch(JP(e)){case"start":p[o]-=m*(n&&c?-1:1);break;case"end":p[o]+=m*(n&&c?-1:1);break}return p}const IK=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:h}=Eb(c,r,l),m=r,p={},y=0;for(let x=0;x<a.length;x++){const{name:_,fn:v}=a[x],{x:g,y:w,data:E,reset:S}=await v({x:d,y:h,initialPlacement:r,placement:m,strategy:i,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});if(d=g??d,h=w??h,p={...p,[_]:{...p[_],...E}},S&&y<=50){y++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):S.rects),{x:d,y:h}=Eb(c,m,l)),x=-1;continue}}return{x:d,y:h,placement:m,strategy:i,middlewareData:p}};async function CK(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=W1(n),a=JP(n),l=H1(n)==="y",c=["left","top"].includes(o)?-1:1,d=s&&l?-1:1,h=SK(e,t);let{mainAxis:m,crossAxis:p,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof y=="number"&&(p=a==="end"?y*-1:y),l?{x:p*d,y:m*c}:{x:m*c,y:p*d}}const e4=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,i=await CK(e,t);return{x:n+i.x,y:r+i.y,data:i}}}};function us(t){return t4(t)?(t.nodeName||"").toLowerCase():"#document"}function Cn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function vi(t){var e;return(e=(t4(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function t4(t){return t instanceof Node||t instanceof Cn(t).Node}function nt(t){return t instanceof Element||t instanceof Cn(t).Element}function nn(t){return t instanceof HTMLElement||t instanceof Cn(t).HTMLElement}function Ny(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Cn(t).ShadowRoot}function gu(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Nn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function AK(t){return["table","td","th"].includes(us(t))}function q1(t){const e=G1(),n=Nn(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function RK(t){let e=ao(t);for(;nn(e)&&!yu(e);){if(q1(e))return e;e=ao(e)}return null}function G1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function yu(t){return["html","body","#document"].includes(us(t))}function Nn(t){return Cn(t).getComputedStyle(t)}function Bm(t){return nt(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ao(t){if(us(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Ny(t)&&t.host||vi(t);return Ny(e)?e.host:e}function n4(t){const e=ao(t);return yu(e)?t.ownerDocument?t.ownerDocument.body:t.body:nn(e)&&gu(e)?e:n4(e)}function Vs(t,e){var n;e===void 0&&(e=[]);const r=n4(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=Cn(r);return i?e.concat(s,s.visualViewport||[],gu(r)?r:[]):e.concat(r,Vs(r))}function r4(t){const e=Nn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=nn(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Qh(n)!==s||Qh(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function K1(t){return nt(t)?t:t.contextElement}function la(t){const e=K1(t);if(!nn(e))return cs(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=r4(e);let o=(s?Qh(n.width):n.width)/r,a=(s?Qh(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const PK=cs(0);function i4(t){const e=Cn(t);return!G1()||!e.visualViewport?PK:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function NK(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Cn(t)?!1:e}function lo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=K1(t);let o=cs(1);e&&(r?nt(r)&&(o=la(r)):o=la(t));const a=NK(s,n,r)?i4(s):cs(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,d=i.width/o.x,h=i.height/o.y;if(s){const m=Cn(s),p=r&&nt(r)?Cn(r):r;let y=m.frameElement;for(;y&&r&&p!==m;){const x=la(y),_=y.getBoundingClientRect(),v=Nn(y),g=_.left+(y.clientLeft+parseFloat(v.paddingLeft))*x.x,w=_.top+(y.clientTop+parseFloat(v.paddingTop))*x.y;l*=x.x,c*=x.y,d*=x.x,h*=x.y,l+=g,c+=w,y=Cn(y).frameElement}}return ZP({width:d,height:h,x:l,y:c})}function DK(t){let{rect:e,offsetParent:n,strategy:r}=t;const i=nn(n),s=vi(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0},a=cs(1);const l=cs(0);if((i||!i&&r!=="fixed")&&((us(n)!=="body"||gu(s))&&(o=Bm(n)),nn(n))){const c=lo(n);a=la(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function jK(t){return Array.from(t.getClientRects())}function s4(t){return lo(vi(t)).left+Bm(t).scrollLeft}function OK(t){const e=vi(t),n=Bm(t),r=t.ownerDocument.body,i=aa(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=aa(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+s4(t);const a=-n.scrollTop;return Nn(r).direction==="rtl"&&(o+=aa(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function MK(t,e){const n=Cn(t),r=vi(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=G1();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function LK(t,e){const n=lo(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=nn(t)?la(t):cs(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function Sb(t,e,n){let r;if(e==="viewport")r=MK(t,n);else if(e==="document")r=OK(vi(t));else if(nt(e))r=LK(e,n);else{const i=i4(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return ZP(r)}function o4(t,e){const n=ao(t);return n===e||!nt(n)||yu(n)?!1:Nn(n).position==="fixed"||o4(n,e)}function FK(t,e){const n=e.get(t);if(n)return n;let r=Vs(t).filter(a=>nt(a)&&us(a)!=="body"),i=null;const s=Nn(t).position==="fixed";let o=s?ao(t):t;for(;nt(o)&&!yu(o);){const a=Nn(o),l=q1(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||gu(o)&&!l&&o4(t,o))?r=r.filter(d=>d!==o):i=a,o=ao(o)}return e.set(t,r),r}function $K(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?FK(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=Sb(e,d,i);return c.top=aa(h.top,c.top),c.right=Py(h.right,c.right),c.bottom=Py(h.bottom,c.bottom),c.left=aa(h.left,c.left),c},Sb(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function zK(t){return r4(t)}function BK(t,e,n){const r=nn(e),i=vi(e),s=n==="fixed",o=lo(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=cs(0);if(r||!r&&!s)if((us(e)!=="body"||gu(i))&&(a=Bm(e)),r){const c=lo(e,!0,s,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else i&&(l.x=s4(i));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function bb(t,e){return!nn(t)||Nn(t).position==="fixed"?null:e?e(t):t.offsetParent}function a4(t,e){const n=Cn(t);if(!nn(t))return n;let r=bb(t,e);for(;r&&AK(r)&&Nn(r).position==="static";)r=bb(r,e);return r&&(us(r)==="html"||us(r)==="body"&&Nn(r).position==="static"&&!q1(r))?n:r||RK(t)||n}const VK=async function(t){let{reference:e,floating:n,strategy:r}=t;const i=this.getOffsetParent||a4,s=this.getDimensions;return{reference:BK(e,await i(n),r),floating:{x:0,y:0,...await s(n)}}};function UK(t){return Nn(t).direction==="rtl"}const WK={convertOffsetParentRelativeRectToViewportRelativeRect:DK,getDocumentElement:vi,getClippingRect:$K,getOffsetParent:a4,getElementRects:VK,getClientRects:jK,getDimensions:zK,getScale:la,isElement:nt,isRTL:UK};function HK(t,e){let n=null,r;const i=vi(t);function s(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:d,width:h,height:m}=t.getBoundingClientRect();if(a||e(),!h||!m)return;const p=nd(d),y=nd(i.clientWidth-(c+h)),x=nd(i.clientHeight-(d+m)),_=nd(c),g={rootMargin:-p+"px "+-y+"px "+-x+"px "+-_+"px",threshold:aa(0,Py(1,l))||1};let w=!0;function E(S){const T=S[0].intersectionRatio;if(T!==l){if(!w)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},100)}w=!1}try{n=new IntersectionObserver(E,{...g,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,g)}n.observe(t)}return o(!0),s}function l4(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=K1(t),d=i||s?[...c?Vs(c):[],...Vs(e)]:[];d.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const h=c&&a?HK(c,n):null;let m=-1,p=null;o&&(p=new ResizeObserver(v=>{let[g]=v;g&&g.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{p&&p.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let y,x=l?lo(t):null;l&&_();function _(){const v=lo(t);x&&(v.x!==x.x||v.y!==x.y||v.width!==x.width||v.height!==x.height)&&n(),x=v,y=requestAnimationFrame(_)}return n(),()=>{d.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),h&&h(),p&&p.disconnect(),p=null,l&&cancelAnimationFrame(y)}}const qK=(t,e,n)=>{const r=new Map,i={platform:WK,...n},s={...i.platform,_c:r};return IK(t,e,{...i,platform:s})};var Pd=typeof document<"u"?f.useLayoutEffect:f.useEffect;function Yh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Yh(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Yh(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function c4(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function kb(t,e){const n=c4(t);return Math.round(e*n)/n}function Tb(t){const e=f.useRef(t);return Pd(()=>{e.current=t}),e}function GK(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=f.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,p]=f.useState(r);Yh(m,r)||p(r);const[y,x]=f.useState(null),[_,v]=f.useState(null),g=f.useCallback(K=>{K!=T.current&&(T.current=K,x(K))},[x]),w=f.useCallback(K=>{K!==k.current&&(k.current=K,v(K))},[v]),E=s||y,S=o||_,T=f.useRef(null),k=f.useRef(null),b=f.useRef(d),P=Tb(l),I=Tb(i),O=f.useCallback(()=>{if(!T.current||!k.current)return;const K={placement:e,strategy:n,middleware:m};I.current&&(K.platform=I.current),qK(T.current,k.current,K).then(de=>{const C={...de,isPositioned:!0};V.current&&!Yh(b.current,C)&&(b.current=C,ho.flushSync(()=>{h(C)}))})},[m,e,n,I]);Pd(()=>{c===!1&&b.current.isPositioned&&(b.current.isPositioned=!1,h(K=>({...K,isPositioned:!1})))},[c]);const V=f.useRef(!1);Pd(()=>(V.current=!0,()=>{V.current=!1}),[]),Pd(()=>{if(E&&(T.current=E),S&&(k.current=S),E&&S){if(P.current)return P.current(E,S,O);O()}},[E,S,O,P]);const F=f.useMemo(()=>({reference:T,floating:k,setReference:g,setFloating:w}),[g,w]),z=f.useMemo(()=>({reference:E,floating:S}),[E,S]),H=f.useMemo(()=>{const K={position:n,left:0,top:0};if(!z.floating)return K;const de=kb(z.floating,d.x),C=kb(z.floating,d.y);return a?{...K,transform:"translate("+de+"px, "+C+"px)",...c4(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:de,top:C}},[n,a,z.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:O,refs:F,elements:z,floatingStyles:H}),[d,O,F,z,H])}function No(t){let e=t.activeElement;for(;((n=e)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;e=e.shadowRoot.activeElement}return e}function an(t,e){if(!t||!e)return!1;const n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Ny(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function KK(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function XK(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function QK(t){if(t.mozInputSource===0&&t.isTrusted)return!0;const e=/Android/i;return(e.test(KK())||e.test(XK()))&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function YK(t){return t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType!=="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0}function JK(){return/apple/i.test(navigator.vendor)}function Jh(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function ZK(t){return"nativeEvent"in t}function eX(t){return t.matches("html,body")}function cn(t){return(t==null?void 0:t.ownerDocument)||document}function pg(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function u4(t){return"composedPath"in t?t.composedPath()[0]:t.target}const tX="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function d4(t){return nn(t)&&t.matches(tX)}function gg(t){t.preventDefault(),t.stopPropagation()}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var nX=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Dy=nX.join(","),h4=typeof Element>"u",jc=h4?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Zh=!h4&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},ef=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",o=s||n&&e&&t(e.parentNode);return o},rX=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},iX=function(e,n,r){if(ef(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(Dy));return n&&jc.call(e,Dy)&&i.unshift(e),i=i.filter(r),i},sX=function t(e,n,r){for(var i=[],s=Array.from(e);s.length;){var o=s.shift();if(!ef(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?i.push.apply(i,c):i.push({scopeParent:o,candidates:c})}else{var d=jc.call(o,Dy);d&&r.filter(o)&&(n||!e.includes(o))&&i.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),m=!ef(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&m){var p=t(h===!0?o.children:h.children,!0,r);r.flatten?i.push.apply(i,p):i.push({scopeParent:o,candidates:p})}else s.unshift.apply(s,o.children)}}return i},f4=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},m4=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||rX(e))&&!f4(e)?0:e.tabIndex},oX=function(e,n){var r=m4(e);return r<0&&n&&!f4(e)?0:r},aX=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},p4=function(e){return e.tagName==="INPUT"},lX=function(e){return p4(e)&&e.type==="hidden"},cX=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},uX=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},dX=function(e){if(!e.name)return!0;var n=e.form||Zh(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=uX(i,e.form);return!s||s===e},hX=function(e){return p4(e)&&e.type==="radio"},fX=function(e){return hX(e)&&!dX(e)},mX=function(e){var n,r=e&&Zh(e),i=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var o,a,l;for(s=!!((o=i)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(i)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&i;){var c,d,h;r=Zh(i),i=(c=r)===null||c===void 0?void 0:c.host,s=!!((d=i)!==null&&d!==void 0&&(h=d.ownerDocument)!==null&&h!==void 0&&h.contains(i))}}return s},Ib=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},pX=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=jc.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(jc.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=e;e;){var l=e.parentElement,c=Zh(e);if(l&&!l.shadowRoot&&i(l)===!0)return Ib(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(mX(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Ib(e);return!1},gX=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return jc.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},yX=function(e,n){return!(n.disabled||ef(n)||lX(n)||pX(n,e)||cX(n)||gX(n))},Cb=function(e,n){return!(fX(n)||m4(n)<0||!yX(e,n))},vX=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},xX=function t(e){var n=[],r=[];return e.forEach(function(i,s){var o=!!i.scopeParent,a=o?i.scopeParent:i,l=oX(a,o),c=o?t(i.candidates):a;l===0?o?n.push.apply(n,c):n.push(a):r.push({documentOrder:s,tabIndex:l,item:i,isScope:o,content:c})}),r.sort(aX).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(n)},g4=function(e,n){n=n||{};var r;return n.getShadowRoot?r=sX([e],n.includeContainer,{filter:Cb.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:vX}):r=iX(e,n.includeContainer,Cb.bind(null,n)),xX(r)};function tf(){return tf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tf.apply(this,arguments)}var kn=typeof document<"u"?f.useLayoutEffect:f.useEffect;let yg=!1,wX=0;const Ab=()=>"floating-ui-"+wX++;function _X(){const[t,e]=f.useState(()=>yg?Ab():void 0);return kn(()=>{t==null&&e(Ab())},[]),f.useEffect(()=>{yg||(yg=!0)},[]),t}const EX=zy["useId".toString()],y4=EX||_X;function SX(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(i=>i!==n))||[])}}}const bX=f.createContext(null),kX=f.createContext(null),v4=()=>{var t;return((t=f.useContext(bX))==null?void 0:t.id)||null},Vm=()=>f.useContext(kX);function Oc(t){return"data-floating-ui-"+t}function Zr(t){const e=f.useRef(t);return kn(()=>{e.current=t}),e}const Rb=Oc("safe-polygon");function vg(t,e,n){return n&&!Jh(n)?0:typeof t=="number"?t:t==null?void 0:t[e]}function TX(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a},refs:l}=t,{enabled:c=!0,delay:d=0,handleClose:h=null,mouseOnly:m=!1,restMs:p=0,move:y=!0}=e,x=Vm(),_=v4(),v=Zr(h),g=Zr(d),w=f.useRef(),E=f.useRef(),S=f.useRef(),T=f.useRef(),k=f.useRef(!0),b=f.useRef(!1),P=f.useRef(()=>{}),I=f.useCallback(()=>{var z;const H=(z=i.current.openEvent)==null?void 0:z.type;return(H==null?void 0:H.includes("mouse"))&&H!=="mousedown"},[i]);f.useEffect(()=>{if(!c)return;function z(){clearTimeout(E.current),clearTimeout(T.current),k.current=!0}return s.on("dismiss",z),()=>{s.off("dismiss",z)}},[c,s]),f.useEffect(()=>{if(!c||!v.current||!n)return;function z(K){I()&&r(!1,K)}const H=cn(a).documentElement;return H.addEventListener("mouseleave",z),()=>{H.removeEventListener("mouseleave",z)}},[a,n,r,c,v,i,I]);const O=f.useCallback(function(z,H){H===void 0&&(H=!0);const K=vg(g.current,"close",w.current);K&&!S.current?(clearTimeout(E.current),E.current=setTimeout(()=>r(!1,z),K)):H&&(clearTimeout(E.current),r(!1,z))},[g,r]),V=f.useCallback(()=>{P.current(),S.current=void 0},[]),F=f.useCallback(()=>{if(b.current){const z=cn(l.floating.current).body;z.style.pointerEvents="",z.removeAttribute(Rb),b.current=!1}},[l]);return f.useEffect(()=>{if(!c)return;function z(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function H(C){if(clearTimeout(E.current),k.current=!1,m&&!Jh(w.current)||p>0&&vg(g.current,"open")===0)return;const $=vg(g.current,"open",w.current);$?E.current=setTimeout(()=>{r(!0,C)},$):r(!0,C)}function K(C){if(z())return;P.current();const $=cn(a);if(clearTimeout(T.current),v.current){n||clearTimeout(E.current),S.current=v.current({...t,tree:x,x:C.clientX,y:C.clientY,onClose(){F(),V(),O(C)}});const D=S.current;$.addEventListener("mousemove",D),P.current=()=>{$.removeEventListener("mousemove",D)};return}(w.current==="touch"?!an(a,C.relatedTarget):!0)&&O(C)}function de(C){z()||v.current==null||v.current({...t,tree:x,x:C.clientX,y:C.clientY,onClose(){F(),V(),O(C)}})(C)}if(nt(o)){const C=o;return n&&C.addEventListener("mouseleave",de),a==null||a.addEventListener("mouseleave",de),y&&C.addEventListener("mousemove",H,{once:!0}),C.addEventListener("mouseenter",H),C.addEventListener("mouseleave",K),()=>{n&&C.removeEventListener("mouseleave",de),a==null||a.removeEventListener("mouseleave",de),y&&C.removeEventListener("mousemove",H),C.removeEventListener("mouseenter",H),C.removeEventListener("mouseleave",K)}}},[o,a,c,t,m,p,y,O,V,F,r,n,x,g,v,i]),kn(()=>{var z;if(c&&n&&(z=v.current)!=null&&z.__options.blockPointerEvents&&I()){const de=cn(a).body;if(de.setAttribute(Rb,""),de.style.pointerEvents="none",b.current=!0,nt(o)&&a){var H,K;const C=o,$=x==null||(H=x.nodesRef.current.find(q=>q.id===_))==null||(K=H.context)==null?void 0:K.elements.floating;return $&&($.style.pointerEvents=""),C.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{C.style.pointerEvents="",a.style.pointerEvents=""}}}},[c,n,_,a,o,x,v,i,I]),kn(()=>{n||(w.current=void 0,V(),F())},[n,V,F]),f.useEffect(()=>()=>{V(),clearTimeout(E.current),clearTimeout(T.current),F()},[c,o,V,F]),f.useMemo(()=>{if(!c)return{};function z(H){w.current=H.pointerType}return{reference:{onPointerDown:z,onPointerEnter:z,onMouseMove(H){n||p===0||(clearTimeout(T.current),T.current=setTimeout(()=>{k.current||r(!0,H.nativeEvent)},p))}},floating:{onMouseEnter(){clearTimeout(E.current)},onMouseLeave(H){s.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),O(H.nativeEvent,!1)}}}},[s,c,p,n,r,O])}let Pb=0;function _s(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=e;r&&cancelAnimationFrame(Pb);const s=()=>t==null?void 0:t.focus({preventScroll:n});i?s():Pb=requestAnimationFrame(s)}function IX(t,e){var n;let r=[],i=(n=t.find(s=>s.id===e))==null?void 0:n.parentId;for(;i;){const s=t.find(o=>o.id===i);i=s==null?void 0:s.parentId,s&&(r=r.concat(s))}return r}function zl(t,e){let n=t.filter(i=>{var s;return i.parentId===e&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=t.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}let Co=new WeakMap,rd=new WeakSet,id={},xg=0;const CX=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,x4=t=>t&&(t.host||x4(t.parentNode)),AX=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=x4(n);return t.contains(r)?r:null}).filter(n=>n!=null);function RX(t,e,n,r){const i="data-floating-ui-inert",s=r?"inert":n?"aria-hidden":null,o=AX(e,t),a=new Set,l=new Set(o),c=[];id[i]||(id[i]=new WeakMap);const d=id[i];o.forEach(h),m(e),a.clear();function h(p){!p||a.has(p)||(a.add(p),p.parentNode&&h(p.parentNode))}function m(p){!p||l.has(p)||Array.prototype.forEach.call(p.children,y=>{if(a.has(y))m(y);else{const x=s?y.getAttribute(s):null,_=x!==null&&x!=="false",v=(Co.get(y)||0)+1,g=(d.get(y)||0)+1;Co.set(y,v),d.set(y,g),c.push(y),v===1&&_&&rd.add(y),g===1&&y.setAttribute(i,""),!_&&s&&y.setAttribute(s,"true")}})}return xg++,()=>{c.forEach(p=>{const y=(Co.get(p)||0)-1,x=(d.get(p)||0)-1;Co.set(p,y),d.set(p,x),y||(!rd.has(p)&&s&&p.removeAttribute(s),rd.delete(p)),x||p.removeAttribute(i)}),xg--,xg||(Co=new WeakMap,Co=new WeakMap,rd=new WeakSet,id={})}}function Nb(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=cn(t[0]).body;return RX(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const w4=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function _4(t,e){const n=g4(t,w4());e==="prev"&&n.reverse();const r=n.indexOf(No(cn(t)));return n.slice(r+1)[0]}function PX(){return _4(document.body,"next")}function NX(){return _4(document.body,"prev")}function Db(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!an(n,r)}const E4={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let DX;function jb(t){t.key==="Tab"&&(t.target,clearTimeout(DX))}const Ob=f.forwardRef(function(e,n){const[r,i]=f.useState();kn(()=>(JK()&&i("button"),document.addEventListener("keydown",jb),()=>{document.removeEventListener("keydown",jb)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Oc("focus-guard")]:"",style:E4};return f.createElement("span",tf({},e,s))}),jX=f.createContext(null),OX=()=>f.useContext(jX),MX=f.forwardRef(function(e,n){return f.createElement("button",tf({},e,{type:"button",ref:n,tabIndex:-1,style:E4}))});function S4(t){const{context:e,children:n,disabled:r=!1,order:i=["content"],guards:s=!0,initialFocus:o=0,returnFocus:a=!0,modal:l=!0,visuallyHiddenDismiss:c=!1,closeOnFocusOut:d=!0}=t,{open:h,refs:m,nodeId:p,onOpenChange:y,events:x,dataRef:_,elements:{domReference:v,floating:g}}=e,w=CX()?s:!0,E=Zr(i),S=Zr(o),T=Zr(a),k=Vm(),b=OX(),P=typeof o=="number"&&o<0,I=f.useRef(null),O=f.useRef(null),V=f.useRef(!1),F=f.useRef(null),z=f.useRef(!1),H=b!=null,K=v&&v.getAttribute("role")==="combobox"&&d4(v),de=f.useCallback(function(D){return D===void 0&&(D=g),D?g4(D,w4()):[]},[g]),C=f.useCallback(D=>{const G=de(D);return E.current.map(Z=>v&&Z==="reference"?v:g&&Z==="floating"?g:G).filter(Boolean).flat()},[v,g,E,de]);f.useEffect(()=>{if(r||!l)return;function D(Z){if(Z.key==="Tab"){an(g,No(cn(g)))&&de().length===0&&!K&&gg(Z);const ie=C(),ae=u4(Z);E.current[0]==="reference"&&ae===v&&(gg(Z),Z.shiftKey?_s(ie[ie.length-1]):_s(ie[1])),E.current[1]==="floating"&&ae===g&&Z.shiftKey&&(gg(Z),_s(ie[0]))}}const G=cn(g);return G.addEventListener("keydown",D),()=>{G.removeEventListener("keydown",D)}},[r,v,g,l,E,m,K,de,C]),f.useEffect(()=>{if(r||!d)return;function D(){z.current=!0,setTimeout(()=>{z.current=!1})}function G(Z){const ie=Z.relatedTarget;queueMicrotask(()=>{const ae=!(an(v,ie)||an(g,ie)||an(ie,g)||an(b==null?void 0:b.portalNode,ie)||ie!=null&&ie.hasAttribute(Oc("focus-guard"))||k&&(zl(k.nodesRef.current,p).find(ge=>{var he,Ue;return an((he=ge.context)==null?void 0:he.elements.floating,ie)||an((Ue=ge.context)==null?void 0:Ue.elements.domReference,ie)})||IX(k.nodesRef.current,p).find(ge=>{var he,Ue;return((he=ge.context)==null?void 0:he.elements.floating)===ie||((Ue=ge.context)==null?void 0:Ue.elements.domReference)===ie})));ie&&ae&&!z.current&&ie!==F.current&&(V.current=!0,y(!1,Z))})}if(g&&nn(v))return v.addEventListener("focusout",G),v.addEventListener("pointerdown",D),!l&&g.addEventListener("focusout",G),()=>{v.removeEventListener("focusout",G),v.removeEventListener("pointerdown",D),!l&&g.removeEventListener("focusout",G)}},[r,v,g,l,p,k,b,y,d]),f.useEffect(()=>{var D;if(r)return;const G=Array.from((b==null||(D=b.portalNode)==null?void 0:D.querySelectorAll("["+Oc("portal")+"]"))||[]);if(g){const Z=[g,...G,I.current,O.current,E.current.includes("reference")||K?v:null].filter(ae=>ae!=null),ie=l?Nb(Z,w,!w):Nb(Z);return()=>{ie()}}},[r,v,g,l,E,b,K,w]),kn(()=>{if(r||!g)return;const D=cn(g),G=No(D);queueMicrotask(()=>{const Z=C(g),ie=S.current,ae=(typeof ie=="number"?Z[ie]:ie.current)||g,ge=an(g,G);!P&&!ge&&h&&_s(ae,{preventScroll:ae===g})})},[r,h,g,P,C,S]),kn(()=>{if(r||!g)return;let D=!1;const G=cn(g),Z=No(G),ie=_.current;F.current=Z;function ae(ge){if(ge.type==="escapeKey"&&m.domReference.current&&(F.current=m.domReference.current),["referencePress","escapeKey"].includes(ge.type))return;const he=ge.data.returnFocus;typeof he=="object"?(V.current=!1,D=he.preventScroll):V.current=!he}return x.on("dismiss",ae),()=>{x.off("dismiss",ae);const ge=No(G);(an(g,ge)||k&&zl(k.nodesRef.current,p).some(Ue=>{var Gt;return an((Gt=Ue.context)==null?void 0:Gt.elements.floating,ge)})||ie.openEvent&&["click","mousedown"].includes(ie.openEvent.type))&&m.domReference.current&&(F.current=m.domReference.current),T.current&&nn(F.current)&&!V.current&&_s(F.current,{cancelPrevious:!1,preventScroll:D})}},[r,g,T,_,m,x,k,p]),kn(()=>{if(!(r||!b))return b.setFocusManagerState({modal:l,closeOnFocusOut:d,open:h,onOpenChange:y,refs:m}),()=>{b.setFocusManagerState(null)}},[r,b,l,h,y,m,d]),kn(()=>{if(!r&&g&&typeof MutationObserver=="function"){const D=()=>{const Z=g.getAttribute("tabindex");E.current.includes("floating")||No(cn(g))!==m.domReference.current&&de().length===0?Z!=="0"&&g.setAttribute("tabindex","0"):Z!=="-1"&&g.setAttribute("tabindex","-1")};D();const G=new MutationObserver(D);return G.observe(g,{childList:!0,subtree:!0,attributes:!0}),()=>{G.disconnect()}}},[r,g,m,E,de]);function $(D){return r||!c||!l?null:f.createElement(MX,{ref:D==="start"?I:O,onClick:G=>y(!1,G.nativeEvent)},typeof c=="string"?c:"Dismiss")}const q=!r&&w&&!K&&(H||l);return f.createElement(f.Fragment,null,q&&f.createElement(Ob,{"data-type":"inside",ref:b==null?void 0:b.beforeInsideRef,onFocus:D=>{if(l){const Z=C();_s(i[0]==="reference"?Z[0]:Z[Z.length-1])}else if(b!=null&&b.preserveTabOrder&&b.portalNode)if(V.current=!1,Db(D,b.portalNode)){const Z=PX()||v;Z==null||Z.focus()}else{var G;(G=b.beforeOutsideRef.current)==null||G.focus()}}}),!K&&$("start"),n,$("end"),q&&f.createElement(Ob,{"data-type":"inside",ref:b==null?void 0:b.afterInsideRef,onFocus:D=>{if(l)_s(C()[0]);else if(b!=null&&b.preserveTabOrder&&b.portalNode)if(d&&(V.current=!0),Db(D,b.portalNode)){const Z=NX()||v;Z==null||Z.focus()}else{var G;(G=b.afterOutsideRef.current)==null||G.focus()}}}))}function Mb(t){return nn(t.target)&&t.target.tagName==="BUTTON"}function Lb(t){return d4(t)}function LX(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:s}}=t,{enabled:o=!0,event:a="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:d=!0}=e,h=f.useRef(),m=f.useRef(!1);return f.useMemo(()=>o?{reference:{onPointerDown(p){h.current=p.pointerType},onMouseDown(p){p.button===0&&(Jh(h.current,!0)&&c||a!=="click"&&(n&&l&&(!i.current.openEvent||i.current.openEvent.type==="mousedown")?r(!1,p.nativeEvent):(p.preventDefault(),r(!0,p.nativeEvent))))},onClick(p){if(a==="mousedown"&&h.current){h.current=void 0;return}Jh(h.current,!0)&&c||(n&&l&&(!i.current.openEvent||i.current.openEvent.type==="click")?r(!1,p.nativeEvent):r(!0,p.nativeEvent))},onKeyDown(p){h.current=void 0,!(p.defaultPrevented||!d||Mb(p))&&(p.key===" "&&!Lb(s)&&(p.preventDefault(),m.current=!0),p.key==="Enter"&&r(!(n&&l),p.nativeEvent))},onKeyUp(p){p.defaultPrevented||!d||Mb(p)||Lb(s)||p.key===" "&&m.current&&(m.current=!1,r(!(n&&l),p.nativeEvent))}}}:{},[o,i,a,c,d,s,l,n,r])}const FX=zy["useInsertionEffect".toString()],$X=FX||(t=>t());function Nd(t){const e=f.useRef(()=>{});return $X(()=>{e.current=t}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}const zX={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},BX={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},VX=t=>{var e,n;return{escapeKeyBubbles:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePressBubbles:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function b4(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:i,nodeId:s,elements:{reference:o,domReference:a,floating:l},dataRef:c}=t,{enabled:d=!0,escapeKey:h=!0,outsidePress:m=!0,outsidePressEvent:p="pointerdown",referencePress:y=!1,referencePressEvent:x="pointerdown",ancestorScroll:_=!1,bubbles:v}=e,g=Vm(),w=v4()!=null,E=Nd(typeof m=="function"?m:()=>!1),S=typeof m=="function"?E:m,T=f.useRef(!1),{escapeKeyBubbles:k,outsidePressBubbles:b}=VX(v),P=Nd(O=>{if(!n||!d||!h||O.key!=="Escape")return;const V=g?zl(g.nodesRef.current,s):[];if(!k&&(O.stopPropagation(),V.length>0)){let F=!0;if(V.forEach(z=>{var H;if((H=z.context)!=null&&H.open&&!z.context.dataRef.current.__escapeKeyBubbles){F=!1;return}}),!F)return}i.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1,ZK(O)?O.nativeEvent:O)}),I=Nd(O=>{const V=T.current;if(T.current=!1,V||typeof S=="function"&&!S(O))return;const F=u4(O),z="["+Oc("inert")+"]",H=cn(l).querySelectorAll(z);let K=nt(F)?F:null;for(;K&&!yu(K);){const $=ao(K);if($===cn(l).body||!nt($))break;K=$}if(H.length&&nt(F)&&!eX(F)&&!an(F,l)&&Array.from(H).every($=>!an(K,$)))return;if(nn(F)&&l){const $=F.clientWidth>0&&F.scrollWidth>F.clientWidth,q=F.clientHeight>0&&F.scrollHeight>F.clientHeight;let D=q&&O.offsetX>F.clientWidth;if(q&&Nn(F).direction==="rtl"&&(D=O.offsetX<=F.offsetWidth-F.clientWidth),D||$&&O.offsetY>F.clientHeight)return}const de=g&&zl(g.nodesRef.current,s).some($=>{var q;return pg(O,(q=$.context)==null?void 0:q.elements.floating)});if(pg(O,l)||pg(O,a)||de)return;const C=g?zl(g.nodesRef.current,s):[];if(C.length>0){let $=!0;if(C.forEach(q=>{var D;if((D=q.context)!=null&&D.open&&!q.context.dataRef.current.__outsidePressBubbles){$=!1;return}}),!$)return}i.emit("dismiss",{type:"outsidePress",data:{returnFocus:w?{preventScroll:!0}:QK(O)||YK(O)}}),r(!1,O)});return f.useEffect(()=>{if(!n||!d)return;c.current.__escapeKeyBubbles=k,c.current.__outsidePressBubbles=b;function O(z){r(!1,z)}const V=cn(l);h&&V.addEventListener("keydown",P),S&&V.addEventListener(p,I);let F=[];return _&&(nt(a)&&(F=Vs(a)),nt(l)&&(F=F.concat(Vs(l))),!nt(o)&&o&&o.contextElement&&(F=F.concat(Vs(o.contextElement)))),F=F.filter(z=>{var H;return z!==((H=V.defaultView)==null?void 0:H.visualViewport)}),F.forEach(z=>{z.addEventListener("scroll",O,{passive:!0})}),()=>{h&&V.removeEventListener("keydown",P),S&&V.removeEventListener(p,I),F.forEach(z=>{z.removeEventListener("scroll",O)})}},[c,l,a,o,h,S,p,n,r,_,d,k,b,P,I]),f.useEffect(()=>{T.current=!1},[S,p]),f.useMemo(()=>d?{reference:{onKeyDown:P,[zX[x]]:O=>{y&&(i.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1,O.nativeEvent))}},floating:{onKeyDown:P,[BX[p]]:()=>{T.current=!0}}}:{},[d,i,y,p,x,r,P])}function k4(t){var e;t===void 0&&(t={});const{open:n=!1,onOpenChange:r,nodeId:i}=t,[s,o]=f.useState(null),a=((e=t.elements)==null?void 0:e.reference)||s,l=GK(t),c=Vm(),d=Nd((E,S)=>{E&&(m.current.openEvent=S),r==null||r(E,S)}),h=f.useRef(null),m=f.useRef({}),p=f.useState(()=>SX())[0],y=y4(),x=f.useCallback(E=>{const S=nt(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;l.refs.setReference(S)},[l.refs]),_=f.useCallback(E=>{(nt(E)||E===null)&&(h.current=E,o(E)),(nt(l.refs.reference.current)||l.refs.reference.current===null||E!==null&&!nt(E))&&l.refs.setReference(E)},[l.refs]),v=f.useMemo(()=>({...l.refs,setReference:_,setPositionReference:x,domReference:h}),[l.refs,_,x]),g=f.useMemo(()=>({...l.elements,domReference:a}),[l.elements,a]),w=f.useMemo(()=>({...l,refs:v,elements:g,dataRef:m,nodeId:i,floatingId:y,events:p,open:n,onOpenChange:d}),[l,i,y,p,n,d,v,g]);return kn(()=>{const E=c==null?void 0:c.nodesRef.current.find(S=>S.id===i);E&&(E.context=w)}),f.useMemo(()=>({...l,context:w,refs:v,elements:g}),[l,v,g,w])}function wg(t,e,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...t,...e.map(i=>i?i[n]:null).concat(t).reduce((i,s)=>(s&&Object.entries(s).forEach(o=>{let[a,l]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof l=="function"){var c;(c=r.get(a))==null||c.push(l),i[a]=function(){for(var d,h=arguments.length,m=new Array(h),p=0;p<h;p++)m[p]=arguments[p];return(d=r.get(a))==null?void 0:d.map(y=>y(...m)).find(y=>y!==void 0)}}}else i[a]=l}),i),{})}}function T4(t){t===void 0&&(t=[]);const e=t,n=f.useCallback(s=>wg(s,t,"reference"),e),r=f.useCallback(s=>wg(s,t,"floating"),e),i=f.useCallback(s=>wg(s,t,"item"),t.map(s=>s==null?void 0:s.item));return f.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}function I4(t,e){e===void 0&&(e={});const{open:n,floatingId:r}=t,{enabled:i=!0,role:s="dialog"}=e,o=y4();return f.useMemo(()=>{const a={id:r,role:s};return i?s==="tooltip"?{reference:{"aria-describedby":n?r:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":s==="alertdialog"?"dialog":s,"aria-controls":n?r:void 0,...s==="listbox"&&{role:"combobox"},...s==="menu"&&{id:o}},floating:{...a,...s==="menu"&&{"aria-labelledby":o}}}:{}},[i,s,n,r,o])}const Fb=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function Ao(t,e){return typeof t=="function"?t(e):t}function UX(t,e){const[n,r]=f.useState(t);return t&&!n&&r(!0),f.useEffect(()=>{if(!t){const i=setTimeout(()=>r(!1),e);return()=>clearTimeout(i)}},[t,e]),n}function C4(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:i=250}=e,o=(typeof i=="number"?i:i.close)||0,[a,l]=f.useState(!1),[c,d]=f.useState("unmounted"),h=UX(n,o);return kn(()=>{a&&!h&&d("unmounted")},[a,h]),kn(()=>{if(r)if(n){d("initial");const m=requestAnimationFrame(()=>{d("open")});return()=>{cancelAnimationFrame(m)}}else l(!0),d("close")},[n,r]),{isMounted:h,status:c}}function WX(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:i,common:s,duration:o=250}=e,a=t.placement,l=a.split("-")[0],c=f.useMemo(()=>({side:l,placement:a}),[l,a]),d=typeof o=="number",h=(d?o:o.open)||0,m=(d?o:o.close)||0,[p,y]=f.useState(()=>({...Ao(s,c),...Ao(n,c)})),{isMounted:x,status:_}=C4(t,{duration:o}),v=Zr(n),g=Zr(r),w=Zr(i),E=Zr(s);return kn(()=>{const S=Ao(v.current,c),T=Ao(w.current,c),k=Ao(E.current,c),b=Ao(g.current,c)||Object.keys(S).reduce((P,I)=>(P[I]="",P),{});if(_==="initial"&&y(P=>({transitionProperty:P.transitionProperty,...k,...S})),_==="open"&&y({transitionProperty:Object.keys(b).map(Fb).join(","),transitionDuration:h+"ms",...k,...b}),_==="close"){const P=T||S;y({transitionProperty:Object.keys(P).map(Fb).join(","),transitionDuration:m+"ms",...k,...P})}},[m,w,v,g,E,h,_,c]),{isMounted:x,styles:p}}function HX({placement:t="bottom"}={}){const[e,n]=f.useState(!1),{context:r,floatingStyles:i,refs:s}=k4({placement:t,open:e,onOpenChange:n,whileElementsMounted:l4,middleware:[e4(10)]}),o=TX(r,{move:!1}),a=b4(r),l=I4(r,{role:"tooltip"}),{getFloatingProps:c,getReferenceProps:d}=T4([o,a,l]);return{isOpen:e,setIsOpen:n,getFloatingProps:c,getReferenceProps:d,floatingStyles:i,refs:s,context:r}}const A4=f.createContext(null),R4=()=>{const t=f.useContext(A4);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function $b({children:t,...e}){const n=HX({...e});return u.jsx(A4.Provider,{value:n,children:t})}function zb({children:t,...e}){const{getReferenceProps:n,refs:r,isOpen:i}=R4();return u.jsx("button",{ref:r.setReference,"data-state":i?"open":"closed",...n(e),children:t})}function Bb({children:t,className:e,...n}){const{theme:r}=te(),{context:i,refs:s,getFloatingProps:o,floatingStyles:a,isOpen:l}=R4(),c={container:`${r.type==="dark"?"bg-white text-[#333]":"bg-slate-600 text-white"}`};if(l)return u.jsx(S4,{context:i,modal:!1,children:u.jsx("div",{className:`${c.container}  text-[13px] font-semibold px-[6px] py-[3px] rounded-[4px]`,ref:s.setFloating,style:{...a},...o(n),children:t})})}const qX=({appendOnPortal:t})=>{const[e,n]=f.useState(!1),[r,i]=f.useState(!1),s=f.useRef(null),o=f.useRef(null);return{refs:{triggerRef:s,contentRef:o,setTriggerRef:h=>{s.current=h},setContentRef:h=>{o.current=h}},state:{isMounted:r,isOpen:e},setIsMounted:i,setIsOpen:n,appendOnPortal:t,close:()=>{i(!1)},toggle:()=>{r&&i(!1),e||n(!0)}}},P4=f.createContext(null),N4=()=>{const t=f.useContext(P4);if(t==null)throw new Error("Popover components must be parent in <MyPopup />");return t};function Um({children:t,relativeWrap:e=!0,appendOnPortal:n,...r}){return u.jsx(P4.Provider,{value:qX({...r,appendOnPortal:n}),children:n?t:u.jsx("div",{className:"relative",children:t})})}const Wm=f.forwardRef(function({children:t},e){const{refs:n,setIsMounted:r,setIsOpen:i,close:s,toggle:o,state:{isMounted:a,isOpen:l}}=N4();return f.useImperativeHandle(e,()=>({close:s})),f.useEffect(()=>{a||setTimeout(()=>{i(!1)},400)},[a]),f.useEffect(()=>(l&&setTimeout(()=>{r(!0)},100),()=>{l||r(!1)}),[l]),f.useEffect(()=>{if(!l)return;const c=d=>{var h,m;!n.contentRef||!n.triggerRef||(h=n.triggerRef.current)!=null&&h.contains(d.target)||(m=n.contentRef.current)!=null&&m.contains(d.target)||r(!1)};return document.addEventListener("mousedown",c),document.addEventListener("touchstart",c),()=>{document.removeEventListener("mousedown",c),document.removeEventListener("touchstart",c)}},[l]),f.isValidElement(t)?f.cloneElement(t,{ref:n.setTriggerRef,onClick:o,...t.props}):u.jsx(u.Fragment,{})});function Hm({children:t,className:e,animationClassName:n,...r}){const{state:{isMounted:i,isOpen:s},refs:o,close:a,appendOnPortal:l}=N4(),c=f.useRef(null),d=()=>{const y=o.triggerRef.current,x=o.contentRef.current,_=c.current;if(!y||!x)return;const v=y.getBoundingClientRect(),g={top:v.top+y.clientHeight,left:v.left-x.clientWidth};if(r.appendTo==="portal"){const{origin:w="top right",position:E,spacer:S=8}=r;switch(E){case"right-bottom":{g.top=v.top+y.clientHeight+S,g.left=v.left;break}}const T=g.top+x.clientHeight>window.innerHeight-90;if(T&&(g.top=g.top-x.clientHeight-y.clientHeight),_){let k=w;T&&(k="bottom right"),_.style.transformOrigin=k}}x.style.left=`${g.left}px`,x.style.top=`${g.top}px`},h=a,m={unMountedContent:"opacity-0 scale-[.95]",mountedContent:"opacity-100 scale-[1]"},p=u.jsx("div",{ref:o.setContentRef,className:`${l?"fixed z-[99]":"absolute"} ${e||""}`,children:u.jsx("div",{ref:c,className:` transition-[transform,opacity] duration-[.25s] ease-linear ${n||""} ${i?m.mountedContent:m.unMountedContent}`,children:t})});return f.useEffect(()=>{if(!l)return;if(s)d();else return;const y=document.querySelector(".main-container");if(y)return y.addEventListener("wheel",h),()=>{y&&y.removeEventListener("wheel",h)}},[s]),s?u.jsx(u.Fragment,{children:l?ho.createPortal(p,document.getElementById("portals")):p}):u.jsx(u.Fragment,{})}function GX({isOpenFullScreen:t,setIsOpenFullScreen:e,idle:n,audioEle:r}){const i=Ke(),{theme:s}=te(),{currentSong:o}=Y(Ne),{queueSongs:a}=Y(gi),{playStatus:{songImage:l}}=Y(hr),[c,d]=f.useState("Lyric"),h=f.useRef(null),m=f.useRef(null),p=f.useRef(null),y=pn();WP({bgRef:h,currentSong:o}),YG({containerRef:m,songItemRef:p,isOpenFullScreen:t,idle:n});const x=_b(()=>g("next"),200),_=_b(()=>g("previous"),200),v=(k,b)=>{o.id!==k.id&&i(Xn({...k,currentIndex:b,song_in:o.song_in}))},g=(k="next")=>{const b=m.current;b.style.scrollBehavior="smooth",k==="next"?b.scrollLeft+=500:k==="previous"&&(b.scrollLeft-=500)},w=()=>{e(!1),setTimeout(()=>{y(`/mysongs/edit/${o.id}`)},300)},E={button:`h-[35px] w-[35px] bg-white/10 rounded-[99px] hover:scale-[1.05] transition-transform ${s.content_hover_bg}`,wrapper:`fixed inset-0 z-50 overflow-hidden text-white bg-zinc-900
    } transition-transform duration-[.7s] linear delay-100`,bg:"-z-10 bg-no-repeat bg-cover bg-center blur-[50px]",overplay:"bg-zinc-900 bg-opacity-60 bg-blend-multiply",container:"absolute w-full top-0 bottom-[90px] flex flex-col",headerWrapper:"relative flex py-[25px] px-[40px] w-full items-center",content:"flex-grow relative overflow-hidden",songsListTab:" relative h-full no-scrollbar flex items-center flex-row overflow-auto scroll-smooth px-[calc(50%-350px/2)]",absoluteButton:`absolute top-[50%] -translate-y-[50%] p-[8px] bg-white/30 rounded-full ${s.content_hover_bg}`,lyricTabContainer:"px-[40px] min-[1536px]:container min-[1536px]:mx-auto min-[1536px]:px-[200px] h-full flex items-center justify-center flex-row",fadeTransition:"opacity-0 transition-opacity duration-[.3s]",before:"before:content-[''] before:w-[50px] before:h-[10px] before:absolute before:bottom-[-7px] ",logo:"animate-[spin_8s_linear_infinite] w-[46px] mr-1"},S=f.useMemo(()=>{if(o.id&&a.length)return a.map((k,b)=>{const P=b===o.currentIndex;return P?u.jsx(_g,{ref:p,classNames:"active",hasTitle:!0,onClick:()=>v(k,b),active:P,data:k},b):u.jsx(_g,{idleClass:`${!P&&n?E.fadeTransition:""}`,hasTitle:!0,active:P,data:k,onClick:()=>v(k,b)},b)})},[o,a,n]),T=u.jsxs("div",{className:E.lyricTabContainer,children:[l&&u.jsx(_g,{active:!0,data:o}),u.jsx(M4,{className:`w-full ml-[40px] h-full ${!l&&"text-center"}`,audioEle:r,isOpenFullScreen:t&&c==="Lyric",active:c==="Lyric"})]});return u.jsxs("div",{className:`${E.wrapper}  ${t?"translate-y-0":"translate-y-full"}`,children:[u.jsx("div",{ref:h,className:`absolute inset-0 ${E.bg}`}),u.jsx("div",{className:`absolute inset-0 ${E.overplay}`}),u.jsxs("div",{className:E.container,children:[u.jsxs("div",{className:E.headerWrapper,children:[u.jsxs("div",{className:"absolute flex items-center left-4",children:[u.jsx("img",{className:`${E.logo}`,src:V1,alt:""}),c==="Lyric"&&u.jsxs(u.Fragment,{children:[u.jsxs("p",{className:"font-playwriteCU text-sm",children:[o.name," "]}),u.jsxs("p",{className:"opacity-70",children:[" - ",o.singer]})]})]}),u.jsx(z4,{inFullScreen:!0,activeTab:c,setActiveTab:d,className:`${n&&E.fadeTransition}`,tabs:["Songs","Karaoke","Lyric"],render:k=>k}),u.jsxs("div",{className:`absolute flex right-4 space-x-3 ${n&&E.fadeTransition}`,children:[o.by!=="admin"&&c==="Lyric"&&u.jsxs($b,{placement:"bottom",children:[u.jsx(zb,{onClick:()=>w(),className:`p-[8px] ${E.button}`,children:u.jsx(zG,{})}),u.jsx(Bb,{children:"Lyric"})]}),u.jsxs(Um,{children:[u.jsx(Wm,{children:u.jsx("button",{className:`${E.button} p-[8px]`,children:u.jsx(LG,{})})}),u.jsx(Hm,{appendTo:"parent",className:"top-[calc(100%+8px)] right-0 z-[99]",animationClassName:"origin-top-right",children:u.jsx(YP,{audioEle:r})})]}),u.jsxs($b,{placement:"bottom",children:[u.jsx(zb,{onClick:()=>e(!1),className:`p-[4px] ${E.button}`,children:u.jsx(AG,{})}),u.jsx(Bb,{children:"Close"})]})]})]}),u.jsxs("div",{className:E.content,children:[u.jsx("div",{ref:m,className:`song-list-container ${E.songsListTab} ${c!=="Songs"?"opacity-0":"opacity-100"}`,children:S}),c==="Songs"&&!n&&u.jsxs(u.Fragment,{children:[u.jsx(Q,{hover:"scale",size:"clear",onClick:()=>_(),className:`${E.absoluteButton} left-[20px]`,children:u.jsx(BP,{className:"w-[30px]"})}),u.jsx(Q,{hover:"scale",size:"clear",onClick:()=>x(),className:`${E.absoluteButton} right-[20px]`,children:u.jsx(jG,{className:"w-[30px]"})})]}),u.jsx("div",{className:`absolute inset-0 z-20 ${c==="Lyric"?"":"hidden"}`,children:T}),u.jsx("div",{className:`absolute inset-0 z-20 ${c==="Karaoke"?"":"hidden"}`,children:u.jsx("h1",{className:"text-center font-semibold opacity-60 relative top-[50%]",children:"Coming soon..."})})]}),t&&c==="Lyric"&&!n&&u.jsxs("p",{className:`pt-[20px] text-center ${n&&E.fadeTransition}`,children:[o.name,u.jsxs("span",{className:"opacity-70",children:[" - ",o.singer]})]})]})]})}const KX=f.memo(GX),XX="/HD-MP3/assets/tutorial1-1bb11af6.png",QX="/HD-MP3/assets/tutorial2-2363d450.png";function YX({placement:t="bottom",isOpenFromParent:e,setIsOpenFromParent:n}={}){const[r,i]=f.useState(!1),{context:s,floatingStyles:o,refs:a}=k4({placement:t,open:e||r,onOpenChange:n||i,whileElementsMounted:l4,middleware:[e4(6)]}),l=LX(s),c=b4(s,{escapeKey:!1}),d=I4(s),{isMounted:h,styles:m}=WX(s,{duration:150,initial:{opacity:0,transform:"scale(0.8)"},close:{opacity:0,transform:"scale(0.8)"},open:{opacity:1,transform:"scale(1)"},common:({side:x})=>({transformOrigin:{top:"bottom",bottom:"top",left:"right",right:"left"}[x]})}),{getFloatingProps:p,getReferenceProps:y}=T4([l,c,d]);return{isOpen:e||r,setIsOpen:n||i,getFloatingProps:p,getReferenceProps:y,floatingStyles:o,refs:a,context:s,styles:m,isMounted:h}}const D4=f.createContext(null),j4=()=>{const t=f.useContext(D4);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function X1({children:t,...e}){const n=YX({...e});return u.jsx(D4.Provider,{value:n,children:t})}function Q1({children:t,className:e,asChild:n=!1,...r}){const{getReferenceProps:i,refs:s,isOpen:o}=j4();return n&&f.isValidElement(t)?f.cloneElement(t,i({ref:s.setReference,...r,...t.props,"data-state":o?"open":"closed"})):u.jsx("button",{type:"button",ref:s.setReference,"data-state":o?"open":"closed",className:`${e??""}`,...i(r),children:t})}function Y1({children:t,className:e,...n}){const{context:r,refs:i,getFloatingProps:s,floatingStyles:o,styles:a}=j4(),{isMounted:l,status:c}=C4(r);return u.jsx(u.Fragment,{children:l&&u.jsx(S4,{context:r,modal:!1,children:u.jsx("div",{ref:i.setFloating,className:`${e||"z-[20]"}`,style:{...o},...s(n),"data-status":c,children:u.jsx("div",{style:{...a},children:t})})})})}function O4({audioRef:t,theme:e,song:n,admin:r,lyric:i}){const{userSongs:s,setUserSongs:o}=dt(),[a,l]=f.useState(!1),[c,d]=f.useState(!1),[h,m]=f.useState(i?i.base:""),[p,y]=f.useState([]),[x,_]=f.useState(i?i.real_time:[]),[v,g]=f.useState(!1),[w,E]=f.useState(1),[S,T]=f.useState(!1),[k,b]=f.useState(""),[P,I]=f.useState(x?x.length:0),[O,V]=f.useState(h||""),[F,z]=f.useState(!1),H=f.useRef(!0),K=f.useRef(null),de=f.useRef(0),C=f.useRef(0),$=f.useRef("smooth"),q=f.useRef(null),{setSuccessToast:D,setErrorToast:G}=gn(),Z=pn(),ie=f.useMemo(()=>x.length>=p.length,[p,x,c]),ae=f.useMemo(()=>x.length===p.length-1,[p,x,c]),ge=f.useMemo(()=>c&&!!p.length&&!ie,[ie,p,c]),he=()=>{var se;return(se=q.current)==null?void 0:se.toggle()},Ue=f.useMemo(()=>!!p.length,[p]),Gt=()=>{const se=t.current;se&&(se.play(),l(!0),d(!0))},fr=()=>{const se=t.current;se&&(se.pause(),l(!1))},Qa=se=>{const ke=t.current;ke&&(ke.playbackRate=se,E(se)),g(!1)},H4=()=>{m(O),he()},q4=se=>{const ke=t.current;ke&&(ke.currentTime=se)},tw=f.useCallback(()=>{if(!p.length)return;const se=t.current;if(!se||ie||C.current==+se.currentTime.toFixed(1))return;ae?de.current=+se.duration.toFixed(1):de.current=+se.currentTime.toFixed(1);const ke=p[P],vu={start:C.current,text:ke,end:de.current};C.current=de.current,_([...x,vu]),I(P+1)},[p,P]),G4=()=>{if(P<=0)return;if(t.current){C.current=x[P-1].start,de.current=0;const ke=x.slice(0,P-1);_(ke),I(P-1)}},K4=se=>{const ke=[...s],vu=WF(se,ke);if(vu==null){G({message:"No song found"}),T(!1);return}return o(ke),console.log("setActuallySongs"),vu},X4=async()=>{try{T(!0),fr(),await qn({collection:"lyrics",data:{real_time:x,base:h},id:n.id}),await qn({collection:"songs",data:{lyric_id:n.id},id:n.id}),D({message:"Add lyrics successful"}),z(!1)}catch(se){console.log({message:se})}finally{T(!1)}},Q4=async()=>{try{T(!0),await qn({collection:"songs",data:{lyric_id:""},id:n.id}),await Dc({collection:"lyrics",id:n.lyric_id}),D({message:"Delete lyric successful"});const se={...n,lyric_id:""};if(!K4(se))return;qm()}catch(se){console.log(se)}finally{T(!1)}},nw=()=>{fr(),tw()},rw=se=>{const ke=t.current;se==="next"?ke.currentTime+=2:ke.currentTime-=2},Y4=()=>{F?b("confirm-navigate"):qm()},qm=()=>Z(r?"/dashboard":"/mysongs");f.useEffect(()=>{if(h){const se=h.split(/\r?\n/).filter(ke=>ke);y(se)}p.length&&H.current&&(H.current=!1),console.log("check firstTimeRender",H.current)},[h]),f.useEffect(()=>{const se=t.current;if(se){if(x.length){const ke=x[x.length-1].end;se&&(se.currentTime=ke,C.current=ke)}return se.addEventListener("ended",nw),()=>{se.removeEventListener("ended",nw)}}},[]),f.useEffect(()=>{if(!F){if(!i){z(!0);return}(i.real_time!==x||i.base!=h)&&z(!0)}},[h,x]),f.useEffect(()=>{if(!F)return;const se=ke=>{ke.preventDefault()};return window.addEventListener("beforeunload",se),()=>{window.removeEventListener("beforeunload",se)}},[F]);const J4=`${e.type==="light"?"text-[#333]":"text-white"}`,st={section:`bg-${e.alpha} p-[10px] rounded-[12px]`,row:"flex no-scrollbar",col:"flex-grow flex flex-col gap-[10px]",formGroup:"flex flex-col gap-[5px] flex-grow",label:"text-md font-[500]",button:`${e.content_bg} rounded-full font-[500] text-white text-[14px] px-[10px]`,icon:"h-[20px] w-[20px]",lyricBox:"list-none h-full px-[10px] max-[549px]:w-[100%] pb-[20%] ",listItem:"h-[34px] w-[34px] text-[14px]",changeSpeedBtn:"inline-flex items-center hover:brightness-90 px-[20px] py-[5px] rounded-full text-white text-[14px]",ctaContainer:"flex justify-between space-x-[10px] mb-[20px]",getActiveClass:se=>se?e.content_bg:`bg-${e.alpha}`},Z4=f.useMemo(()=>{switch(k){case"":return u.jsx(u.Fragment,{});case"tutorial":return u.jsxs(u.Fragment,{children:[u.jsx(ys,{title:"Tutorial",close:he}),u.jsxs("div",{className:"h-[500px] max-h-[75vh] overflow-y-auto no-scrollbar",children:[u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Phím chắc năng:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:QX,alt:""}),u.jsx("br",{}),u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Cách thêm lời bài hát:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:XX,alt:""})]})]});case"add-base-lyric":return u.jsxs(u.Fragment,{children:[u.jsx("textarea",{ref:K,value:O,onChange:se=>V(se.target.value),className:"w-full rounded-[4px] mb-[10px] min-h-[50vh] bg-transparent border p-[10px]"}),u.jsx(Q,{variant:"primary",onClick:H4,className:st.button,children:"Ok"})]});case"delete-lyric":return u.jsx(Lr,{loading:S,label:"Delete playlist ?",theme:e,callback:Q4,close:he});case"confirm-navigate":return u.jsx(Lr,{loading:S,label:"Your change not save",theme:e,buttonLabel:"Close and don't save",callback:qm,close:he})}},[k,O]),eN=u.jsxs("div",{className:`${st.ctaContainer} ${J4}`,children:[u.jsxs("div",{className:"left flex flex-wrap gap-[10px]",children:[u.jsx("button",{onClick:()=>b("add-base-lyric"),className:st.button,children:h?"Change lyric":"Add lyric"}),u.jsxs(X1,{isOpenFromParent:v,setIsOpenFromParent:g,placement:"bottom-start",children:[u.jsxs(Q1,{className:`${st.button} ${st.changeSpeedBtn}`,children:[w,"x"]}),u.jsx(Y1,{children:u.jsx(po,{theme:e,children:u.jsxs("div",{className:"flex justify-center gap-[8px]",children:[u.jsx(Q,{variant:"circle",onClick:()=>Qa(1),className:`${st.getActiveClass(w===1)} ${st.listItem}`,children:"1x"}),u.jsx(Q,{variant:"circle",onClick:()=>Qa(1.2),className:`${st.getActiveClass(w===1.2)} ${st.listItem}`,children:"1.2x"}),u.jsx(Q,{variant:"circle",onClick:()=>Qa(1.5),className:`${st.getActiveClass(w===1.5)} ${st.listItem}`,children:"1.5x"})]})})})]}),a?u.jsx(Q,{variant:"primary",onClick:fr,className:st.button+(c?"":"disable"),children:"Pause"}):u.jsx(Q,{variant:"primary",onClick:Gt,className:st.button+(a||!Ue?"disable":""),children:"Play"}),u.jsx(Q,{variant:"primary",onClick:tw,className:st.button+(!ge&&"disable"),children:u.jsx(Li,{className:"w-[16px]"})}),u.jsx(Q,{variant:"primary",onClick:G4,className:st.button+(!x.length||!p.length?"disable":""),children:u.jsx(bT,{className:"w-[16px]"})}),u.jsxs(Q,{variant:"primary",onClick:()=>rw("prev"),className:st.button+(!c||!p.length?"disabele":""),children:[u.jsx(rj,{className:"w-[16px] mr-[5px]"}),"2s"]}),u.jsxs(Q,{variant:"primary",onClick:()=>rw("next"),className:st.button+(!c||!p.length?"disabele":""),children:["2s",u.jsx(oj,{className:"w-[16px] ml-[5px]"})]})]}),u.jsx("button",{onClick:()=>b("tutorial"),children:u.jsx(aO,{className:"w-[20px]"})})]});return u.jsxs("div",{className:`${S?"disable":""}`,children:[u.jsxs("button",{onClick:Y4,className:`inline-flex text-[20px] font-bold mb-[14px] ${e.content_hover_text}`,children:[u.jsx(hj,{className:"w-[25px]"}),u.jsx("span",{className:"ml-[12px]",children:n.name})]}),eN,u.jsxs("div",{className:`${st.row} bg-${e.alpha} rounded-[12px] pt-[10px] mb-[0] h-[55vh] min-h-[200px] overflow-auto`,children:[u.jsx("div",{className:st.lyricBox+"w-[50%]",children:p.length?u.jsx(u.Fragment,{children:p.map((se,ke)=>u.jsx(VP,{inUpload:!0,scrollBehavior:$,className:"pb-[30px] leading-[1.2] mr-[24px]",active:ke===P,done:ke!=P,children:se},ke))}):u.jsx("h1",{children:"Base lyric..."})}),u.jsx("div",{className:st.lyricBox+" border-none w-[50%]",children:!!(x!=null&&x.length)&&x.map((se,ke)=>u.jsx(pK,{handleSetTime:q4,lyric:se,theme:e,index:ke,realTimeLyrics:x,setRealTimeLyrics:_},ke))})]}),u.jsx(Q,{className:`${e.content_bg} ${F?"":"disable"} text-[14px] rounded-full mt-[20px]`,variant:"primary",onClick:X4,children:"Save"}),u.jsx(Q,{className:"bg-red-500 text-[#fff] text-[14px] font-bold ml-[12px] rounded-full mt-[20px]",variant:"primary",onClick:()=>b("delete-lyric"),children:"Delete"}),u.jsx(Br,{variant:"animation",className:"w-[700px] max-w-[calc(100vw-40px)]",children:Z4})]})}const M4=({audioEle:t,className:e,isOpenFullScreen:n,active:r})=>{const{playStatus:{lyricSize:i}}=Y(hr),[s,o]=f.useState(0),a=f.useRef("instant"),l=f.useRef(null),{currentSong:c}=Y(Ne),d=f.useRef(0),{loading:h,songLyric:m}=KG({audioEle:t,isOpenFullScreen:n}),p=f.useCallback(()=>{const v=t.currentTime;if(o(v),Math.abs(v-d.current)>5){a.current="instant",d.current=v;return}d.current=v},[]),y={small:"text-[20px] sm:text-[30px]",medium:"text-[25px] sm:text-[35px]",large:"text-[30px] sm:text-[40px]"},x=()=>m.real_time.map((v,g)=>{const E=s>=v.start-.5&&s<v.end-.5;return u.jsx(VP,{done:!E&&s>v.end-.5,active:E,scrollBehavior:a,className:`${y[i||"medium"]} ${E?"active":""} mb-[30px]`,children:v.text},g)});f.useEffect(()=>{if(t)return t.addEventListener("timeupdate",p),()=>{t&&t.removeEventListener("timeupdate",p)}},[]),f.useEffect(()=>{const v=document.querySelector(".active.lyric");v&&v.scrollIntoView({behavior:"instant",block:"center"})},[r]),f.useEffect(()=>{a.current!=="instant"&&(a.current="instant")},[c]);const _={container:"no-scrollbar pt-[20px] mask-image overflow-y-auto overflow-x-hidden",loadingContainer:"flex justify-center items-center h-full w-full",loadingIcon:"opacity-[.6] animate-spin w-[35px] duration-[2s]"};return u.jsxs("div",{ref:l,className:`${_.container} ${e}`,children:[h&&u.jsx("div",{className:_.loadingContainer,children:u.jsx("span",{children:u.jsx(Ks,{className:_.loadingIcon})})}),!h&&u.jsx(u.Fragment,{children:m.real_time.length?x():u.jsx("div",{className:_.loadingContainer,children:u.jsx("h1",{className:"text-[30px] opacity-60",children:"..."})})})]})},JX=({audioEle:t,setIsOpenFullScreen:e,isOpenFullScreen:n})=>{const{theme:r}=te(),{handleNext:i,currentSong:s,handlePlayPause:o,playStatus:{isPlaying:a,isWaiting:l,isError:c}}=U1({audioEle:t}),d=On(),h=f.useMemo(()=>d.pathname.includes("edit"),[d]),m=f.useMemo(()=>l?u.jsx(Ks,{className:"w-10 animate-spin"}):c&&s.name?u.jsx(Mv,{className:"w-10 "}):a?u.jsx(Lv,{className:"w-10 "}):u.jsx(Fv,{className:"w-10"}),[l,c,a]),p={wrapper:`fixed bottom-0 transition-transform w-full h-[80px] border-t border-${r.alpha} z-40  px-4`,container:`absolute inset-0 ${r.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1]`,songImageWrapper:"flex flex-row items-center flex-grow h-full",image:"w-[54px] h-[54px] flex-shrink-0",cta:"pl-2 flex-shrink-0"};return u.jsxs("div",{className:`${p.wrapper} ${h?"translate-y-full":""}`,children:[u.jsx("div",{className:`${p.container} ${n?"opacity-0 transition-opacity delay-[.3s]":""}`}),u.jsxs("div",{className:"flex items-center  h-full",children:[u.jsx("div",{onClick:()=>e(!0),className:"mobile-current-song flex-grow",children:u.jsxs("div",{className:p.songImageWrapper,children:[u.jsx("div",{className:p.image,children:u.jsx(pi,{src:s.image_url||V1,classNames:"rounded-full"})}),u.jsx("div",{className:"flex-grow  ml-[10px]",children:s.song_url&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"h-[30px] relative overflow-hidden",children:u.jsx("div",{className:"absolute left-0 whitespace-nowrap font-playwriteCU leading-[1.5]",children:s.name||"name"})}),u.jsx("p",{className:"opacity-70 line-clamp-1",children:s.singer||"singer"})]})})]})}),u.jsxs("div",{className:`${p.cta} ${!s.name&&"disable"}`,children:[u.jsx("button",{className:"p-[4px]",onClick:()=>o(),children:m}),u.jsx("button",{onClick:i,className:"p-[4px]",children:u.jsx(_T,{className:"w-10"})})]})]})]})};function ZX({isOpenFullScreen:t}){const e=()=>{const n=document.querySelector("body");n&&(t?n.style.overflow="hidden":n.style.overflow="auto")};f.useEffect(()=>{e()},[t])}function eQ(){const[t,e]=f.useState(!1);return f.useEffect(()=>{const n=()=>{window.innerWidth>549&&window.innerWidth<800?e(!0):e(!1)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),{isLandscape:t}}function tQ({audioEle:t,isOpenFullScreen:e,setIsOpenFullScreen:n}){const r=Ke(),{theme:i}=te(),{currentSong:s}=Y(Ne),{playStatus:{isPlaying:o}}=Y(hr),{queueSongs:a}=Y(gi),[l,c]=f.useState("Playing"),[d,h]=f.useState(!1),m=f.useRef(null),p=f.useRef(null),y=f.useRef(null),x=f.useRef(null);ZX({isOpenFullScreen:e}),WP({bgRef:p,currentSong:s});const{isLandscape:_}=eQ(),v=l!="Playing"&&!d||_,g=b=>{let P=0,I=b;for(;!I.classList.contains("target-class")&&P<5;)I=I.parentElement,P++;return I},w={opacity:"0",transform:"translate(-100%, 0)"},E=b=>{let P=0,I=b.previousElementSibling;for(;I&&P<100;)Object.assign(I.style,w),P++,I=I.previousElementSibling},S=(b,P,I)=>{const O=b.target,V=g(O);E(V),Object.assign(V.style,w),x.current&&(x.current.style.opacity="0"),setTimeout(()=>{r(Xn({...P,currentIndex:I,song_in:s.song_in}))},500)},T=f.useMemo(()=>u.jsx(u.Fragment,{children:s&&u.jsx(u.Fragment,{children:s.currentIndex===a.length-1?u.jsx("p",{children:"..."}):a.map((b,P)=>{if(P>s.currentIndex)return u.jsx(II,{variant:"playing-next",theme:i,song:b,onClick:I=>S(I,b,P)},P)})})}),[s,a]);f.useEffect(()=>{x.current&&(x.current.style.opacity="1")},[s]),f.useEffect(()=>{const b=m.current;b&&(e?(b.style.transform="translate(0)",b.style.zIndex="99"):(b.style.transform="translate(0, 100%)",setTimeout(()=>{b.style.zIndex="-10"},500)))},[e]);const k={headerWrapper:"flex mb-4",container:"flex-grow flex flex-col relative overflow-hidden",songImage:"flex-shrink-0 transition-[height, width] origin-top-left",control:"flex flex-col-reverse justify-center",bgImage:"absolute inset-0 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background-image] duration-[.3s ]",overlay:"absolute inset-0 bg-zinc-900 bg-opacity-60 bg-blend-multiply overflow-hidden",button:"flex justify-center items-center rounded-full w-[35px]"};return u.jsx(u.Fragment,{children:u.jsxs("div",{ref:m,style:{transform:"translate(0, 100%)",zIndex:"-10"},className:"fixed inset-0 bg-zinc-900 text-white overflow-hidden transition-[transform] duration-[.3s] ease-linear",children:[u.jsx("div",{ref:p,className:k.bgImage}),u.jsx("div",{className:k.overlay}),u.jsxs("div",{className:"absolute inset-0 z-10 p-4 flex flex-col",children:[u.jsxs("div",{className:k.headerWrapper,children:[u.jsxs(Um,{appendOnPortal:!0,children:[u.jsx(Wm,{children:u.jsx("button",{className:`${k.button} p-[6px] left-0 bg-gray-500 bg-opacity-20`,children:u.jsx(wT,{className:"w-full"})})}),u.jsx(Hm,{appendTo:"portal",position:"right-bottom",origin:"top left",children:u.jsx(YP,{audioEle:t})})]}),u.jsx(z4,{inFullScreen:!0,className:"w-fit font-[500]",setActiveTab:c,activeTab:l,render:b=>b,tabs:["Songs","Playing","Lyric"]}),u.jsx("button",{className:`${k.button} p-[6px] bg-gray-500 bg-opacity-20`,onClick:()=>n(!1),children:u.jsx(cj,{className:"w-full"})})]}),u.jsxs("div",{ref:y,className:k.container,children:[u.jsxs("div",{ref:x,className:`transition-opacity duration-300 ${v?"flex ":""}`,children:[f.useMemo(()=>u.jsx(xQ,{expand:l==="Playing"&&!_,data:s}),[s,o,l,_]),u.jsxs("div",{className:`ml-2 ${v?"block":"hidden"}`,children:[u.jsx("div",{className:"font-playwriteCU",children:s.name}),u.jsx("div",{className:"opacity-70",children:s.singer})]})]}),u.jsxs("div",{className:`mt-3 justify-between items-center ${l!="Playing"?"hidden":"flex"}`,children:[u.jsxs("div",{className:"flex-grow",children:[u.jsx("div",{className:"h-[34px]",children:u.jsx(nf,{autoScroll:!0,className:`${l==="Playing"||_?"text-lg":""} leading-[1.5] font-playwriteCU`,content:s.name||"..."})}),u.jsx("div",{className:"h-[33px]",children:u.jsx(nf,{autoScroll:!0,className:`opacity-60 ${l==="Playing"||_?"text-lg":"text-base"}`,content:s.singer||"..."})})]}),u.jsx(B1,{audioEle:t})]}),f.useMemo(()=>u.jsx(M4,{active:l==="Lyric",className:`${l==="Lyric"?"flex-1 transition-all block":"hidden"}`,audioEle:t,isOpenFullScreen:e&&l==="Lyric"}),[e,l,_]),u.jsx("div",{className:`leading-[2.2] font-playwriteCU my-2 ${l==="Songs"?"":"hidden"}`,children:"Playing next"}),u.jsx("div",{className:`flex-grow no-scrollbar overflow-auto ${l==="Songs"?"":"hidden"}`,children:T}),u.jsx("div",{className:`${k.control} ${l==="Songs"?"opacity-0 pointer-events-none h-[0px]":""} ${l==="Playing"?"flex-grow":""}`,children:f.useMemo(()=>u.jsx(QP,{audioEle:t,isOpenFullScreen:!1}),[e])})]})]})]})})}function nQ(){const{theme:t}=te(),{loading:e,user:n}=ht(),{logIn:r}=pu(),i=async()=>{try{await r()}catch(o){console.log(o)}finally{}},s={icon:"w-7 mr-2 inline",linkItem:`py-3 border-b text-lg border-${t.alpha} last:border-none`,button:`${t.content_bg} rounded-full`};return u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("div",{className:"text-xl font-playwriteCU leading-[2.2] mb-3",children:"Library"}),e?[...Array(3).keys()].map(o=>u.jsx(vI,{},o)):u.jsx(u.Fragment,{children:n?u.jsxs(u.Fragment,{children:[u.jsx(Fp,{className:s.linkItem,to:At.MySongs,icon:u.jsx(ya,{className:s.icon+t.content_text}),label:"All songs",arrowIcon:u.jsx(wp,{className:"w-6"})}),u.jsx(Fp,{className:s.linkItem,to:At.MySongs,icon:u.jsx(ET,{className:s.icon+t.content_text}),label:"Favorite",arrowIcon:u.jsx(wp,{className:"w-6"})}),u.jsx(Fp,{className:s.linkItem,to:At.MySongs,icon:u.jsx(xT,{className:s.icon+t.content_text}),label:"Recent",arrowIcon:u.jsx(wp,{className:"w-6"})})]}):u.jsxs(Q,{onClick:i,className:`${t.content_bg} rounded-md space-x-1 py-1`,children:[u.jsx(Ov,{className:"w-7"}),u.jsx("span",{className:"font-playwriteCU leading-[2.2]",children:"Login"})]})})]})}function rQ(){const{theme:t}=te(),{loading:e,user:n}=ht(),r=f.useRef(null),{logOut:i}=pu(),[s,o]=f.useState(""),a=()=>{var m;return(m=r.current)==null?void 0:m.toggle()},l=m=>{var p;o(m),(p=r.current)==null||p.toggle()},c=async()=>{try{await i()}catch(m){console.log("signOut error",{messsage:m})}finally{a()}},d=f.useMemo(()=>{switch(s){case"theme":return u.jsx(V4,{close:a});case"info":return u.jsx(ew,{close:a});case"logout":return u.jsx(Lr,{close:a,callback:c,loading:!1,theme:t,label:"Log out ?"})}},[s]),h={linkItem:`py-3 text-lg w-full border-b border-${t.alpha} space-x-2 last:border-none flex items-center`,icon:"w-7"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("div",{className:"text-xl font-playwriteCU leading-[2.2] mb-3",children:"Setting"}),n&&u.jsxs("div",{className:`bg-${t.alpha} p-3 rounded-md flex mb-2`,children:[u.jsx(Oy,{className:"h-[65px] w-[65px]"}),u.jsxs("div",{className:"ml-3",children:[u.jsx("p",{className:"text-lg font-[500]",children:n.display_name}),u.jsx("p",{className:"opacity-70 font-[500]",children:"Vip member ❤️"})]})]}),e?[...Array(3).keys()].map(m=>u.jsx(vI,{},m)):u.jsxs("div",{className:"",children:[u.jsxs("button",{className:h.linkItem,onClick:()=>l("theme"),children:[u.jsx(kT,{className:h.icon}),u.jsx("span",{children:"Theme"})]}),u.jsxs("button",{className:h.linkItem,onClick:()=>l("info"),children:[u.jsx(ST,{className:h.icon}),u.jsx("span",{children:"Info"})]}),n&&u.jsxs("button",{className:h.linkItem,onClick:()=>l("logout"),children:[u.jsx(Ov,{className:h.icon}),u.jsx("span",{children:"Logout"})]})]})]}),u.jsx(Br,{ref:r,variant:"animation",children:d})]})}function iQ({children:t,className:e,...n},r){const i=n.variant||"default",{theme:s}=te(),[o,a]=f.useState(i==="default"),[l,c]=f.useState(i==="default"),d=()=>{l&&c(!1),o||a(!0)},h=p=>{p.preventDefault(),p.stopPropagation(),i==="default"&&n.closeModal&&n.closeModal(),i==="animation"&&d()};f.useImperativeHandle(r,()=>({toggle:d})),f.useEffect(()=>{i!=="default"&&(l||setTimeout(()=>{a(!1)},400))},[l]),f.useEffect(()=>{i!=="default"&&o&&setTimeout(()=>{c(!0)},100)},[o]);const m={unMountedContent:"opacity-0 scale-[.95]",mountedContent:"opacity-100 scale-[1]",unMountedLayer:"opacity-0",mountedLayer:"opacity-60"};return u.jsx(u.Fragment,{children:o&&ho.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[99]",children:[u.jsx("div",{onClick:h,className:`transition-opacity duration-300 absolute bg-black inset-0 z-[90]
                             ${l?m.mountedLayer:m.unMountedLayer}
                        `}),u.jsx("div",{className:`absolute duration-300 transition-[transform,opacity] z-[99] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2
                            ${l?m.mountedContent:m.unMountedContent}
                        `,children:u.jsx(po,{className:e||"",theme:s,children:t})})]}),document.getElementById("portals"))})}const Br=f.forwardRef(iQ);function sQ({isOpenSongQueue:t,setIsOpenSongQueue:e}){const n=Ke(),{theme:r}=te(),{user:i}=ht(),{queueSongs:s}=Y(gi),{currentSong:o}=Y(Ne),[a,l]=f.useState("Queue"),c=f.useCallback((m,p)=>{p!==o.currentIndex&&n(Xn({...m,currentIndex:p}))},[o]),d=f.useCallback(()=>{e(!1),n(NP()),n(oo()),Jt("duration",0)},[]);f.useEffect(()=>{i&&(i.email||(e(!1),l("Queue")))},[i]),f.useEffect(()=>{setTimeout(()=>{t||l("Queue")},1e3)},[t]);const h={textColor:`${r.type==="dark"?"text-white":"text-[#333]"} `,mainContainer:`fixed w-[300px] flex flex-col bottom-[80px] right-[0] top-[0] z-20 px-3 pt-4 ${r.container} border-l-[1px] border-${r.alpha} transition-[transform] duration-[.5s] linear delay-100`,songListContainer:"flex-grow overflow-y-auto pb-[10px] overflow-x-hidden no-scrollbar"};return u.jsxs("div",{className:`${h.textColor} ${h.mainContainer} ${t?"translate-x-0---":"translate-x-full"}     `,children:[u.jsx("div",{className:"leading-[2.2] font-playwriteCU mb-2",children:"Song queue"}),u.jsx("div",{className:h.songListContainer,children:a==="Queue"&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"",children:u.jsx(ds,{variant:"queue",songs:s,handleSetSong:c})}),u.jsx("div",{className:"text-center",children:!!s.length&&u.jsxs(Q,{onClick:d,size:"small",className:`${r.content_bg} rounded-full my-5 py-1 space-x-1`,children:[u.jsx(oc,{className:"w-6"}),u.jsx("span",{className:"font-playwriteCU leading-[2.2]",children:"Clear"})]})})]})})]})}const oQ=f.memo(sQ);function aQ(t,e,n){const{currentSong:r}=Y(Ne),[i,s]=f.useState(!1),[o,a]=f.useState(0),l=f.useRef(),c=f.useRef(),d=()=>{s(!1),a(Math.random())},h=()=>{clearTimeout(c.current),clearTimeout(l.current)},m=async()=>{if(!n)return;const p=document.querySelector(".song-thumb.active"),y=document.querySelector(".song-list-container");if(p&&y){const x=GP(p,y,!0);let _=Ms.focusDelay;x||(_=0),l.current=setTimeout(()=>{s(!0)},_)}};return f.useEffect(()=>{if(n&&!(e||!r.id))return setTimeout(()=>{window.addEventListener("mousemove",d),window.dispatchEvent(new Event("mousemove"))},1e3),()=>{window.removeEventListener("mousemove",d),h()}},[n]),f.useEffect(()=>(c.current=setTimeout(()=>{m()},t),()=>{h()}),[o]),n?i:!1}const L4=({admin:t})=>{const{currentSong:e}=Y(Ne),{isOnMobile:n}=te(),[r,i]=f.useState(!1),[s,o]=f.useState(!1),[a,l]=f.useState(!1),c=f.useRef(null),d=aQ(Ms.focusDelay,n,r),h=u.jsxs(u.Fragment,{children:[!t&&u.jsx(KX,{audioEle:c.current,idle:d,isOpenFullScreen:r,setIsOpenFullScreen:i}),u.jsx(oQ,{isOpenSongQueue:s,setIsOpenSongQueue:o}),u.jsx(_K,{admin:t,audioEle:c.current,idle:d&&r,isOpenFullScreen:r,isOpenSongQueue:s,setIsOpenSongQueue:o,setIsOpenFullScreen:i})]}),m=u.jsxs(u.Fragment,{children:[u.jsx(tQ,{audioEle:c.current,isOpenFullScreen:r,setIsOpenFullScreen:i}),u.jsx(JX,{audioEle:c.current,isOpenFullScreen:r,setIsOpenFullScreen:i})]});return f.useEffect(()=>{a||c.current&&l(!0)},[]),u.jsxs("div",{className:"absolute",children:[u.jsx("audio",{ref:c,src:e.song_url,className:"hd-mp3 hidden"}),a?n?m:h:""]})},J1="data:image/gif;base64,R0lGODlhJAAkAIABAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NmRjOGMyNC03YmYxLTQxZTMtYjQ2Zi1mY2ZhMDk4MDE1YWYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTBDRTc0QzlGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTBDRTc0QzhGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YzBhNGU4OWYtNjc4Yy00NmMyLTg4NmUtYzIxNGE0NTIwZDRjIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODRlMDBjYmEtZjhlNy03YzQ4LWE4MTgtNDc3NTI3MGQ1ZTAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQgAAQAsAAAAACQAJAAAAnKMj5nArQ9jc7HWyax+GOx/dCAojltpWmgqYazqvu0kz1StrHgYp6tO6gWAn59wZKSxkjcTM7MUEk/SY1BpmGqeHhs0W8Vywk3tkPw9iztcBLfNW7Pl9PLcXk/f8Xz9vguWB6h254Y2+Id4aLjH2Kc4UQAAIfkECQgAAQAsAAAAACQAJAAAAnSMj6nL7Q+jnAzYS+XFGW7beV/4fADpmGijrkvrJnA2z1Q9hvhG7lznA+lyBpuMGAieDiYlQulkIpvTKk9KFRatv2RW671uxeHskwv+ptHLsRnbhbLPZHW7vK6r6XF21J33Bngnp2fY98UXuNikSOg3B8dYAAAh+QQJCAABACwAAAAAJAAkAAACfIyPqcvtD6OctNqLKdg8N955C7iJI4mQAKam6NUeMTMHda3cr4EnOugCfnY2Yi8Y4hmXKqHSWYQ2mclodSqllmTY7fOqbSK9VnLXHB6Ludk2Vg1nv+Vo9zT+rc/zK3qf/wNmt8aHV0Z4aHj2l+inFqgXiQjJuKgYRnkJUgAAIfkECQgAAQAsAAAAACQAJAAAAnuMj6nL7Q+jnLTaC7K+T2/eeBkYiiQjAlyKsJh5uJYc0BRtTzgMpbsn8fFqQ4cQGCuWjqok0vA7toZR4fRJxDJHzg+Uur16s+Nt86sFM8VcdDncbZPlZvZ5fq/H82rp3m5XxZe29mfoZnWIF9hH1+gDqKiHOPhWSBlJWQAAIfkECQgAAQAsAAAAACQAJAAAAn6Mj6nL7Q8RmDTaQ+u1eW7efVg4ZqLRARIppqsZpW6pQTIbzPZd57jD6+keQQ/NuAu+esDiEkl0HlUxKerXKFKvsCTvuY0qp2Dw8IzTlslTdNf3VrO5Qiu8Hre78d/5HSpHB5imR5g3Jhi2d7OWaGbIN4j4pwjJ6Lco00gJVgAAIfkECQgAAQAsAAAAACQAJAAAAn2EH6nL7XnQmxRGULO7WHsbfRPHiQ95mRsqqQvbBqUGG29K13eYw3tMqXVAwJFOMcsIf7YeizmsLJE45ZHYtPqoPO2TWzxdZVXpOGneYqPBc7mtJnflsekaCkXry3Z61h/VtzcnyGcYN1jnRnj4dQf2V8g46QiIB0ly+bhWAAAh+QQJCAABACwAAAAAJAAkAAACfYyPqcvtD+MDtMobqt6Y7Q90C8iJCamZJ0qpCNu6Bhwen0S/JZTb+wTTpSK92c9RzBwbyRsx6BvyoEYpkCW0RLVVVDbWBSuxW7EzDPrW0OrzmPs2U+Nrevvnzs/11ib+T8ZWVufXB+g1qHZnyAhX6HhIopg4yAfZKEkpiFYAACH5BAkIAAEALAAAAAAkACQAAAJ7jI+py+0Po5y02ouB3tht3jGfFopjuYwqgK5npCLuJ8XHDEK2gZP3ywMGeqwfzZgb9mTCnRLHPAalz1k06SRefVPsEsmthrXgYnf8PZvFa7J6206z4fBs8w4t08t2at+qF6j2h+YnRxiX9ybIhrg3iOdlqDjH6Fa5qFYAACH5BAkIAAEALAAAAAAkACQAAAJ1jI+py+0Po5y02otzArxr1nmfEnIjWZ5bqh4l0Lqs8WK1HNpzcFs9/9o5fkFhg1gUQZBJWISZlECL0l3ThFMCc1lq10mzXhFT8Db6JYubam7Yffa+teVymz5O6+fyuLm+hgd39ReIxRd0d+inmLjH+GX3+FIAACH5BAUIAAEALAAAAAAkACQAAAJwjI+py+0Po5y0PoCzhVlv12EfGI5NCJgMqi5sm7zwIc9BPeOw3vKqb6oBLyUaqshB3o4diZDpSTaN0FTkWUVgo8sslbtlapXh43hqKJfP4Ko1TY574ehue24XffV0KJuf9xa4tifoZih351f4h9hRAAA7",jy=({data:t,inDetail:e,theme:n,active:r,link:i})=>{const s={button:`rounded-full text-[#201f1f] p-[4px] hover:bg-${n==null?void 0:n.alpha}`,imageContainer:"absolute inset-0 overflow-hidden rounded-[6px]",absoluteContainer:"absolute inset-0 opacity-0 group-hover:opacity-100",overlay:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-60 transition-opacity",buttonContainer:"justify-center items-center h-full z-10 relative",buttonWrapper:"flex items-center justify-center z-10 h-full w-full relative"},o=u.jsxs("div",{className:s.imageContainer,children:[u.jsx(pi,{classNames:"group-hover:scale-[1.05] transition-[transform] duration-[.25s]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsxs("div",{className:`${s.absoluteContainer} ${r?"opacity-100":"opacity-0"}`,children:[u.jsx("div",{className:s.overlay}),r&&u.jsx("div",{className:s.buttonWrapper,children:u.jsx("img",{src:J1,alt:"",className:"w-[30px]"})})]})]});return e?u.jsx("div",{className:"group relative pt-[100%] w-full block",children:o}):u.jsxs(u.Fragment,{children:[u.jsx(Kr,{to:`${i||"/playlist/"+t.id}`,className:"group relative pt-[100%] w-full block",children:o}),u.jsx("div",{className:"text-xl font-[500] line-clamp-1 leading-[24px]  mt-[6px]",children:t.name})]})};function lQ({content:t,className:e}){const n=f.useRef(null),r=f.useRef(null);return JG({textRef:r,textWrapperRef:n,content:t}),u.jsx("div",{ref:n,className:"overflow-hidden relative h-full ",children:u.jsx("div",{ref:r,className:`absolute left-0 whitespace-nowrap ${e}`,children:t||"..."})})}const nf=f.memo(lQ);function F4({openModal:t}){const{theme:e}=te(),n=Ke(),r=l=>{t(l)},[i,s]=HP("isCrossFade",!1),o=()=>{s(!i),n(tr({isCrossFade:!i}))},a={menuItem:`${e.content_hover_text} hover:bg-${e.alpha} rounded-md font-[500] w-full px-[10px] text-[14px] h-[40px] inline-flex items-center cursor-pointer`,icon:"w-[25px] mr-[8px]",divide:`h-[1px]  w-[calc(100%-20px)] my-[4px] mx-auto bg-${e.alpha}`};return u.jsx(u.Fragment,{children:u.jsx(po,{color:"sidebar",theme:e,children:u.jsxs("ul",{className:"flex flex-col w-[200px]",children:[u.jsxs("li",{className:`${a.menuItem} justify-between hover:bg-[unset]`,children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(Fv,{className:a.icon}),"Cross fade"]}),u.jsx(Ry,{active:i,cb:o})]}),u.jsxs("li",{className:`${a.menuItem}`,onClick:()=>r("theme"),children:[u.jsx(kT,{className:a.icon}),"Themes"]}),u.jsx("div",{className:a.divide}),u.jsxs("li",{className:`${a.menuItem}`,onClick:()=>r("info"),children:[u.jsx(ST,{className:a.icon}),"Info"]})]})})})}function cQ({className:t}){const[e,n]=f.useState(!1),{theme:r}=te(),i=()=>{const o=document.querySelector(".main-container");if(!o)return;const a=o.scrollTop||0;n(a>100)},s=()=>{const o=document.querySelector(".main-container");o==null||o.scroll({behavior:"smooth",top:0})};return f.useEffect(()=>{const o=document.querySelector(".main-container");if(o)return o.addEventListener("scroll",i),()=>{o.removeEventListener("scroll",i)}},[]),u.jsx(Q,{onClick:s,variant:"circle",size:"clear",className:`absolute p-[8px] hover:scale-[1.05] transition-[opacity,transform] 
         ${t||""} 
         w-[36px] 
         ${r.content_hover_bg} h-[36px] bg-${r.alpha} 
      ${e?"opacity-[1]":"opacity-0 translate-y-[20px]"}`,children:u.jsx(_G,{className:"w-full"})})}function uQ(){const t=Ke(),{theme:e}=te(),{user:n,loading:r}=ht(),{resetSongPlaylistStore:i}=dt(),s=On(),o=pn(),a=()=>{t(oo()),t(z1()),i()},l=()=>{a(),o("/dashboard")},c=[...Array(2).keys()].map(h=>u.jsxs("div",{className:"px-3 w-full h-[51px] flex items-center",children:[u.jsx(_t,{className:"w-[28px] h-[28px] mr-1 flex-shrink-0"}),u.jsx(_t,{className:"w-[100px] h-[30px]"})]},h)),d={container:`w-[180px] relative  flex-shrink-0 border-r-[1px] h-screen ${e.side_bar_bg} border-${e.alpha}`,navItem:`  px-3 py-2 leading-[2.2] font-playwriteCU flex items-center ${e.content_hover_text}`,text:e.type==="light"?"text-[#333]":"text-white",icon:"w-7 mr-1",link:"w-full border-l-[4px]",activeLink:`${e.content_text} ${e.container} ${e.content_border}  `};return u.jsxs("div",{className:`${d.container} ${d.text}`,children:[u.jsx("div",{className:"px-[10px] h-[60px] flex items-center justify-center",children:u.jsxs(Kr,{to:"/",className:"text-[24px] font-bold",children:["HD",u.jsx("span",{className:`${e.content_text} ml-[4px]`,children:"MP3"})]})}),u.jsxs("div",{className:"flex flex-col items-start",children:[r&&c,!r&&u.jsxs(u.Fragment,{children:[u.jsx(Kr,{className:`${d.link} ${s.pathname==="/"?d.activeLink:"border-transparent"}`,to:At.Home,children:u.jsxs("div",{className:d.navItem,children:[u.jsx(Mj,{className:d.icon}),u.jsx("span",{children:"Discover"})]})}),n&&u.jsxs(u.Fragment,{children:[u.jsx(Kr,{className:`${d.link}  ${s.pathname.includes("mysongs")?d.activeLink:"border-transparent"}`,to:At.MySongs,children:u.jsxs("div",{className:d.navItem,children:[u.jsx(ya,{className:d.icon}),u.jsx("span",{children:"My Song"})]})}),n.role==="ADMIN"&&u.jsx(Kr,{to:"/dashboard",className:`${d.link} border-transparent`,children:u.jsxs("div",{onClick:l,className:` ${d.navItem}`,children:[u.jsx(bj,{className:d.icon}),u.jsx("span",{className:"",children:"Dashboard"})]})})]})]})]}),u.jsx(cQ,{className:"left-[50%] translate-x-[-50%] bottom-[80px] md:bottom-[100px]"})]})}function dQ({contentRef:t}){const{theme:e}=te(),[n,r]=f.useState(0),[i,s]=mu(os),[o,a]=f.useState(""),l=f.useRef(null),c=f.useRef(null),{logOut:d,logIn:h}=pu(),m=w=>{var E,S;a(w),(E=c.current)==null||E.toggle(),(S=l.current)==null||S.close()},p=async()=>{var w;try{await d()}catch(E){console.log("signOut error",{messsage:E})}finally{(w=c.current)==null||w.toggle()}},y=async()=>{try{const w=document.querySelector(".login-trigger");await h(),w&&w.click()}catch(w){console.log(w)}},x=()=>{var E;const w=((E=t.current)==null?void 0:E.scrollTop)||0;r(w)},_=u.jsx(_t,{className:"w-[35px] h-[35px] rounded-full"}),v=f.useMemo(()=>{switch(o){case"":return u.jsx(u.Fragment,{});case"theme":return u.jsx(V4,{close:()=>{var w;return(w=c.current)==null?void 0:w.toggle()}});case"info":return u.jsx(ew,{close:()=>{var w;return(w=c.current)==null?void 0:w.toggle()}});case"confirm":return u.jsx(Lr,{close:()=>{var w;return(w=c.current)==null?void 0:w.toggle()},callback:p,loading:!1,label:"Sign out ?",desc:"",theme:e})}},[o]);f.useEffect(()=>{var w;return(w=t.current)==null||w.addEventListener("scroll",x),()=>{document.removeEventListener("scroll",x)}},[]);const g={userName:"text-[16px] font-[500] ml-[8px] line-clamp-1",button:"h-[35px] w-[35px] rounded-full",menuItem:`hover:bg-${e.alpha} ${e.content_hover_text} rounded-[4px] w-full px-[10px] h-[44px] inline-flex items-center font-[500]`,icon:"w-[25px] mr-[5px]",divide:`h-[1px]  w-[calc(100%-20px)] mb-[10px] mt-[20px] mx-auto bg-${e.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`${e.container} ${n?"shadow-lg":""} h-[60px] fixed right-0 ${n?"bg-transparent":""} left-[180px] z-[20]`,children:[u.jsx("div",{className:`${n?"":"hidden "} absolute  inset-0 ${e.container} bg-opacity-[0.9] backdrop-blur-[15px] z-[-1] `}),u.jsxs("div",{className:"px-[40px] flex items-center justify-between h-full",children:[u.jsx("div",{className:""}),u.jsxs("div",{className:"flex gap-[16px]",children:[u.jsxs(Um,{children:[u.jsx(Wm,{ref:l,children:u.jsx("button",{className:`flex px-[6px] items-center ${g.button} bg-${e.alpha} ${e.content_hover_bg}`,children:u.jsx(gT,{className:"w-full"})})}),u.jsx(Hm,{appendTo:"parent",className:"top-[calc(100%+8px)] right-0",animationClassName:"origin-top-right",children:u.jsx(F4,{openModal:m,loggedIn:!1})})]}),u.jsxs(X1,{placement:"bottom-end",children:[u.jsx(Q1,{className:`flex login-trigger items-center hover:brightness-75 ${g.button}`,children:s?_:u.jsx(Oy,{})}),u.jsx(Y1,{children:u.jsx(po,{color:"sidebar",theme:e,children:u.jsxs("div",{className:"w-[250px] max-h-[50vh]",children:[i&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center p-[10px] pb-0",children:[u.jsx(Oy,{className:"login-trigger w-[46px] h-[46px]"}),u.jsx("div",{className:"ml-[12px]",children:u.jsx("h5",{className:"font-semibold line-clamp-1",children:i==null?void 0:i.displayName})})]}),u.jsx("div",{className:g.divide}),u.jsxs("button",{className:`${g.menuItem}`,onClick:()=>a("confirm"),children:[u.jsx(Ov,{className:g.icon}),"Log out"]})]}),!i&&u.jsxs("button",{className:`${g.menuItem}`,onClick:y,children:[u.jsx(OD,{className:g.icon}),"Log in"]})]})})})]})]})]})]}),u.jsx(Br,{variant:"animation",ref:c,children:v})]})}function hQ({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"}))}const fQ=f.forwardRef(hQ),mQ=fQ;function pQ({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z",clipRule:"evenodd"}))}const gQ=f.forwardRef(pQ),yQ=gQ;function sd({song:t,closeMenu:e,...n}){const r=Ke(),{user:i}=ht(),{theme:s,isOnMobile:o}=te(),{setSuccessToast:a}=gn(),{userPlaylists:l}=dt(),c=()=>{r($1({songs:[t]})),e(),a({message:"Song added to queue"})},d={before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]",level2Menu:"w-[100%] absolute right-[calc(100%+5px)] hidden group-hover/add-playlist:block hover:block",menuItem:`hover:bg-${s.alpha} font-[500] ${s.content_hover_text} max-[549px]:!bg-transparent py-1 pl-2 rounded-md`,menuIcon:"w-5 mr-2",overlay:"absolute flex items-center justify-center inset-0 bg-[#000] bg-opacity-[.5]"},h=f.useMemo(()=>{if(!i)return u.jsx(u.Fragment,{});switch(n.variant){case"home":case"my-songs":case"dashboard-songs":return o?u.jsxs(Q,{className:`group relative ${d.menuItem}  ${s.content_hover_text} ${d.before}`,variant:"list",onClick:()=>n.handleOpenModal("add-to-playlist"),children:[u.jsx(sh,{className:d.menuIcon}),"Add to playlist"]}):u.jsxs(Q,{className:`group/add-playlist hover:!brightness-100 relative ${d.menuItem}  ${s.content_hover_text} ${d.before}`,variant:"list",size:"clear",children:[u.jsx(sh,{className:d.menuIcon}),"Add to playlist",u.jsx(po,{className:`${d.level2Menu} z-[99]                  `,color:"sidebar",theme:s,children:u.jsx("ul",{className:"w-full",children:l!=null&&l.length?u.jsx(u.Fragment,{children:l.map((y,x)=>{const _=y.song_ids.includes(t.id);return u.jsxs("li",{onClick:()=>!_&&n.handleAddSongToPlaylist(y),className:`list-none w-full flex rounded-[4px] p-[5px] ${_&&"disable"} ${d.menuItem}`,children:[u.jsx("span",{children:u.jsx(ya,{className:d.menuIcon})}),u.jsxs("p",{className:"line-clamp-1 text-left",children:[y.name," ",_&&"(Added)"]})]},x)})}):u.jsx("p",{children:"No playlist jet..."})})})]})}},[l]),m=f.useMemo(()=>{switch(n.variant){case"home":return u.jsxs(u.Fragment,{children:[u.jsxs(Q,{onClick:c,className:` ${d.menuItem}`,variant:"list",size:"clear",children:[u.jsx(Li,{className:d.menuIcon}),"Add to queue"]}),h]});case"playlist":case"dashboard-playlist":return u.jsx(u.Fragment,{children:u.jsxs(Q,{className:d.menuItem,variant:"list",size:"clear",onClick:n.handleRemoveSongFromPlaylist,children:[u.jsx(S_,{className:d.menuIcon}),"Remove"]})});case"my-songs":case"dashboard-songs":return u.jsxs(u.Fragment,{children:[n.variant!=="dashboard-songs"&&u.jsxs(Q,{onClick:c,className:` ${d.menuItem}`,variant:"list",size:"clear",children:[u.jsx(Li,{className:d.menuIcon}),"Add to queue"]}),h,u.jsxs(Q,{onClick:()=>n.handleOpenModal("edit"),className:` ${d.menuItem} `,variant:"list",size:"clear",children:[u.jsx(gT,{className:d.menuIcon}),"Edit"]}),u.jsx(Kr,{to:`edit/${t.id}`,children:u.jsxs(Q,{className:` ${d.menuItem} `,variant:"list",children:[u.jsx(Ij,{className:d.menuIcon}),t.lyric_id?"Edit lyric":"Add lyric"]})}),u.jsxs(Q,{onClick:()=>n.handleOpenModal("delete"),className:` ${d.menuItem} `,variant:"list",size:"clear",children:[u.jsx(oc,{className:d.menuIcon}),"Delete"]})]});case"queue":return u.jsxs(u.Fragment,{children:[u.jsxs(Q,{onClick:n.handleRemoveSongFromQueue,className:` ${d.menuItem}`,variant:"list",size:"clear",children:[u.jsx(S_,{className:d.menuIcon}),"Remove"]}),h]})}},[n]),p=f.useMemo(()=>{switch(n.variant){case"queue":return u.jsx(u.Fragment,{});default:return u.jsxs("div",{className:`pl-[10px] py-[6px] bg-${s.alpha} rounded-md mb-3`,children:[u.jsx("h5",{className:"line-clamp-1 font-[500] text-lg",children:t.name}),u.jsx("p",{className:"text-base opacity-70 line-clamp-1",children:t.singer})]})}},[t]);return u.jsx(u.Fragment,{children:u.jsxs("div",{className:` ${n.variant==="queue"?"w-[140px]":"w-[200px]"} `,children:[p,m,u.jsxs("a",{target:"_blank",download:!0,href:t.song_url,className:` ${d.menuItem} w-full inline-flex items-center cursor-pointer`,children:[u.jsx(ND,{className:d.menuIcon}),"Download"]}),n.variant!=="queue"&&!o&&u.jsxs("p",{className:"opacity-50 font-[500] text-center text-[13px] mt-[10px]",children:["Uploaded by ",t.by]})]})})}function od({song:t,onClick:e,active:n=!0,index:r,className:i,...s}){const o=Ke(),{theme:a,isOnMobile:l}=te(),{user:c}=ht(),{isChecked:d,selectedSongs:h,selectSong:m}=Hc(),{userPlaylists:p}=dt(),[y,x]=f.useState(!1),[_,v]=f.useState(!1),[g,w]=f.useState(""),E=f.useRef(null),{setErrorToast:S}=gn(),T=()=>{var Gt;return(Gt=E.current)==null?void 0:Gt.toggle()},k=()=>v(!1),{handleDeleteSong:b,handleAddSongToPlaylistMobile:P,handleAddSongToPlaylist:I,handleRemoveSongFromPlaylist:O,loading:V}=ZG({song:t,closeModal:T,setIsOpenPopup:v}),F=Gt=>{var fr;w(Gt),k(),(fr=E.current)==null||fr.toggle()},z=f.useMemo(()=>h?h.indexOf(t)!=-1:!1,[h]),H=f.useMemo(()=>c?c.like_song_ids.includes(t.id):!1,[c==null?void 0:c.like_song_ids,t]),K=()=>{r!==void 0&&o(nG({index:r}))},de=async()=>{if(c)try{}catch(Gt){console.log(Gt),S({message:"Error when liked song"})}finally{x(!1)}},C=Gt=>{d!==void 0&&m(Gt)},$={button:`${a.content_hover_bg} p-[8px] rounded-full`,songListButton:"p-1 mr-1 text-[inherit]",itemContainer:`group/container flex flex-row rounded justify-between px-[10px] py-[10px] w-full border-b border-${a.alpha} last:border-none p-[0px]`,imageFrame:` relative rounded-[4px] overflow-hidden flex-shrink-0 ${s.variant==="queue"?"w-[40px] h-[40px]":"h-[54px] w-[54px]"}`,overlay:"absolute flex items-center justify-center inset-0 bg-black/40",ctaWrapper:"flex items-center justify-end flex-shrink-0",menuBtnWrapper:"w-[50px] flex justify-center "},q=()=>{switch(s.variant){case"queue":return u.jsx(u.Fragment,{});case"uploading":return u.jsx("button",{className:`${$.songListButton}`,children:u.jsx(ya,{className:"w-[18px]"})});default:return l?u.jsx("button",{onClick:()=>C(t),className:`${$.songListButton} text-[inherit]`,children:z?u.jsx(Ay,{className:"w-[18px]"}):u.jsx(sc,{className:"w-[18px]"})}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>C(t),className:`${$.songListButton} ${!z&&"hidden"} group-hover/main:block`,children:z?u.jsx(Ay,{className:"w-[18px]"}):u.jsx(sc,{className:"w-[18px]"})}),u.jsx("button",{className:`${$.songListButton} ${z&&"hidden"} group-hover/main:hidden group-hover/main:mr-[0px]`,children:u.jsx(ya,{className:"w-[18px]"})})]})}},D=f.useMemo(()=>{switch(s.variant){case"uploading":return u.jsx(u.Fragment,{});default:return u.jsx("div",{className:` ${$.overlay} 
               ${n?"":"hidden sm:group-hover/main:flex"}`,children:n?u.jsx("img",{src:J1,alt:"",className:"h-[18px] w-[18px]"}):u.jsx("div",{onClick:e,className:"cursor-pointer w-full h-full flex items-center justify-center",children:u.jsx(yQ,{className:"w-[24px] text-white"})})})}},[n,e]),G=u.jsxs(u.Fragment,{children:[q(),u.jsxs("div",{className:"flex-grow flex",onClick:l&&s.variant!=="uploading"?e:()=>{},children:[u.jsxs("div",{className:`${$.imageFrame}`,children:[u.jsx(pi,{src:t.image_url,blurHashEncode:t.blurhash_encode}),D]}),u.jsxs("div",{className:`ml-[10px]  ${s.variant==="queue",""}`,children:[u.jsx("h5",{className:`line-clamp-1  leading-[1.2] font-medium overflow-hidden ${s.variant==="queue"?"text-sm":"text-lg"}`,children:t.name}),u.jsx("p",{className:`opacity-[.7] line-clamp-1 
               ${s.variant==="queue"?"text-sm":""}
                       `,children:t.singer})]})]})]}),Z=()=>{switch(s.variant){case"uploading":return u.jsx("div",{className:"opacity-[.7]",children:G});case"queue":return G;default:return u.jsx("div",{className:"flex flex-grow",children:G})}},ie=f.useMemo(()=>{if(y)return u.jsx(Ks,{className:"w-[20px] animate-spin"});switch(s.variant){case"dashboard-songs":case"dashboard-playlist":return u.jsx(u.Fragment,{});default:return c?u.jsxs("button",{onClick:de,className:`${$.button} max-[549px]:!bg-transparent group`,children:[u.jsx(mQ,{className:`w-[20px]  ${H?`${a.content_text} block group-hover:hidden`:"text-white hidden group-hover:block"}`}),u.jsx(ET,{className:`w-[20px] ${H?"hidden group-hover:block":"block group-hover:hidden"}`})]}):u.jsx(u.Fragment,{})}},[de,H]),ae=f.useMemo(()=>{switch(s.variant){case"home":case"dashboard-songs":return u.jsx(sd,{closeMenu:k,variant:s.variant,handleAddSongToPlaylist:I,handleOpenModal:F,song:t});case"my-songs":case"favorite":return u.jsx(sd,{closeMenu:k,variant:"my-songs",handleAddSongToPlaylist:I,handleOpenModal:F,song:t});case"my-playlist":case"admin-playlist":case"dashboard-playlist":return u.jsx(sd,{closeMenu:k,variant:"playlist",handleRemoveSongFromPlaylist:O,handleOpenModal:F,song:t});case"queue":return u.jsx(sd,{closeMenu:k,handleRemoveSongFromQueue:K,variant:"queue",handleOpenModal:F,song:t});default:return u.jsx(u.Fragment,{})}},[s.variant,t,_]),ge=f.useMemo(()=>{switch(g){case"":return u.jsx(u.Fragment,{});case"edit":return u.jsx(fK,{close:T,song:t});case"delete":return u.jsx(Lr,{loading:V,label:`Delete '${t.name}' ?`,desc:"This action cannot be undone",theme:a,callback:b,close:T});case"add-to-playlist":return u.jsx(kQ,{loading:V,handleAddSongToPlaylist:P,closeModal:T,song:t,userPlaylists:p})}},[g,V]),he=()=>{switch(s.variant){case"uploading":return u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{children:u.jsx(Ks,{className:"w-[20px] mr-[10px] animate-spin"})}),u.jsx("p",{className:"text-[14px]",children:"In process..."})]});default:return u.jsxs("div",{className:$.ctaWrapper,children:[ie,u.jsxs("div",{className:$.menuBtnWrapper,children:[u.jsxs(Um,{appendOnPortal:!0,children:[u.jsx(Wm,{children:u.jsx("button",{className:`block group-hover/main:block ${$.button} ${_||s.variant==="queue"?"md:block":"md:hidden max-[549px]:!bg-transparent"}`,children:u.jsx(bG,{className:"w-[20px]"})})}),u.jsx(Hm,{appendTo:"portal",children:u.jsxs(po,{className:`${V?"overflow-hidden relative":""}`,p:2,color:"sidebar",theme:a,children:[ae,V&&u.jsx("div",{className:$.overlay,children:u.jsx("div",{className:"h-[25px] w-[25px] border-[2px] border-r-black rounded-[50%] animate-spin"})})]})})]}),u.jsx("span",{className:`text-sm font-[500] hidden  group-hover/main:hidden ${_||s.variant==="queue"?"hidden":"md:block"}`,children:dc(t.duration)})]})]})}},Ue=()=>{switch(s.variant){case"uploading":return u.jsxs("div",{className:`${$.itemContainer} ${i||""} `,children:[Z(),he()]});case"queue":return u.jsxs("div",{className:`${$.itemContainer} group/main py-[6px] ${n?`${a.content_bg} text-white`:`hover:bg-${a.alpha}`}`,children:[Z(),he()]});default:return u.jsxs("div",{className:`${$.itemContainer} ${i||""} group/main ${n||z?`bg-${a.alpha}`:`hover:bg-${a.alpha}`}`,children:[Z(),he()]})}};return u.jsxs(u.Fragment,{children:[Ue(),u.jsx(Br,{ref:E,variant:"animation",children:ge})]})}const vQ=({data:t,active:e,onClick:n,hasTitle:r,classNames:i,idleClass:s},o)=>{const{theme:a}=te(),l={container:"flex flex-col",imageFrame:"group relative transition-[width] duration-[.3s] origin-center rounded-[6px] overflow-hidden",image:"select-none object-cover object-center rounded w-full",overlay:`absolute  ${e?"":"inset-0 hidden bg-opacity-60 bg-[#333] items-center justify-center"}   group-hover:flex`,playingGifFrame:"absolute h-[30px] w-[30px] bottom-[15px] left-[15px] -z-1",title:"text-[22px] text-white mt-[10px] font-bold text-ellipsis line-clamp-1"};if(t)return u.jsxs("div",{ref:o,className:`${l.container} ${s||""}`,children:[u.jsx("div",{className:`song-thumb ${i??""} flex items-end justify-center flex-shrink-0 w-[350px] h-[350px] min-[1536px]:w-[450px] min-[1536px]:h-[450px] `,children:u.jsxs("div",{className:`${l.imageFrame} ${e?"w-[350px] min-[1536px]:w-[450px]":"w-[280px] min-[1536px]:w-[330px]"}`,children:[u.jsx(pi,{classNames:"rounded-[6px]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsx("div",{className:`${l.overlay}`,children:!e&&u.jsx(Q,{onClick:n,variant:"circle",hover:"scale",size:"clear",className:`h-[50px] w-[50px] ${a.content_hover_text}`,children:u.jsx(Lv,{className:"w-full"})})}),e&&u.jsx("div",{className:l.playingGifFrame,children:u.jsx("img",{src:J1,alt:""})})]})}),r&&u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:l.title,children:(t==null?void 0:t.name)||"Some song"}),u.jsx("p",{className:"text-md opacity-50 line-clamp-1",children:(t==null?void 0:t.singer)||"..."})]})]})},_g=f.forwardRef(vQ);function xQ({data:t,expand:e}){if(t)return u.jsx("div",{className:` ${e?"w-full h-auto px-[20px]":"w-[60px] h-[60px] p-0 flex-shrink-0"}`,children:u.jsx(pi,{src:t.image_url,classNames:"w-full rounded-md"})})}function ds({songs:t,...e}){const{theme:n}=te(),{currentSong:r}=Y(Ne),{queueSongs:i}=Y(gi),s=f.useMemo(()=>e.variant!=="uploading"?u.jsx(u.Fragment,{}):t.map((l,c)=>{const d={key:c,onClick:()=>{},song:l};return c==0?u.jsx(od,{variant:"uploading",className:"temp-song",...d}):u.jsx(od,{variant:"uploading",...d})}),[e]),o=u.jsx("p",{className:"text-center my-[60px]",children:"... ¯\\_(ツ)_/¯"}),a=f.useMemo(()=>{if(e.variant==="uploading")return u.jsx(u.Fragment,{});switch(e.variant){case"my-songs":if(!t.length&&!e.tempSongs.length)return o;break;default:if(!t.length)return o}const{handleSetSong:l,activeExtend:c=!0}=e;return t.map((d,h)=>{let m=c&&r.id===d.id;e.variant==="queue"&&(m=m&&r.currentIndex===h);const p=r.currentIndex===i.length-1;return e.variant==="queue"&&m&&!p?u.jsxs("div",{children:[u.jsx(od,{active:m,onClick:()=>l(d,h),variant:e.variant,song:d,index:h}),u.jsx("div",{className:"mt-[12px] mb-[4px]",children:u.jsx("p",{className:`${n.content_text} text-[14px] font-[600]`,children:"Playing next"})})]},d.id+d.name.length+h):u.jsx(od,{active:m,onClick:()=>l(d,h),variant:e.variant,song:d,index:h},d.id+d.name.length+h)})},[r,e,i,n]);return u.jsxs(u.Fragment,{children:[a,s]})}function ul({children:t,...e}){const{isSelectAll:n,resetSelect:r}=Hc();switch(e.variant){case"home":case"dashboard-songs":return u.jsxs(u.Fragment,{children:[t,u.jsx(Q,{onClick:r,className:"px-[5px] flex-shrink-0",children:u.jsx(Ps,{className:"w-[20px]"})})]});case"my-playlist":case"my-songs":case"dashboard-playlist":case"admin-playlist":return u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:e.selectAll,className:"ml-[10px]",children:n?u.jsx(Ay,{className:"w-[20px]"}):u.jsx(sc,{className:"w-[20px]"})}),t,u.jsx(Q,{onClick:r,className:"px-[5px] flex-shrink-0",children:u.jsx(Ps,{className:"w-[20px]"})})]})}}function Mc({children:t,...e}){const n=Ke(),{theme:r}=te(),{user:i}=ht(),{isChecked:s,selectedSongs:o,selectAll:a,resetSelect:l}=Hc(),{playlistSongs:c}=Y(yi),{userSongs:d,setUserSongs:h}=dt(),[m,p]=f.useState(!1),[y,x]=f.useState(""),{setErrorToast:_,setSuccessToast:v}=gn(),{deleteSongsFromPlaylist:g,isFetching:w}=_o(),E=()=>{x("")},S=()=>{o.length<d.length?a(d):l()},T=()=>{o.length<c.length?a(c):l()},k=()=>{n($1({songs:o})),v({message:"songs added to queue"}),l()},b=async()=>{if(i)try{p(!0);const F=o.map(H=>H.id);for(let H of o)await $P(H);const z=d.filter(H=>!F.includes(H.id));h(z),v({message:`${o.length} songs deleted`})}catch(F){console.log({message:F}),_({})}finally{l(),p(!1),E()}},P=async()=>{try{await g(o)}catch(F){console.log(F),_({message:"Error when delete song"})}finally{E(),l()}},I={title:"text-xl leading-[2.2] font-playwriteCU",outlineButton:`border-${r.alpha} ${r.side_bar_bg} space-x-1`,icon:"w-[20px]"},O=f.useMemo(()=>{if(y)switch(y){case"delete-selected-songs":return u.jsx(Lr,{loading:m,label:`Delete ${o.length} songs ?`,theme:r,callback:b,close:E});case"remove-selects-songs":return u.jsx(Lr,{loading:w,label:`Remove ${o.length} songs ?`,theme:r,callback:P,close:E})}},[y,w,m]),V=f.useMemo(()=>{switch(e.variant){case"home":return u.jsxs(u.Fragment,{children:[!s&&u.jsx("h3",{className:`${I.title} !mr-[14px]`,children:"Songs"}),s&&u.jsxs(ul,{variant:e.variant,children:[u.jsx("p",{className:"font-playwriteCU mr-1",children:o.length}),u.jsxs(Q,{onClick:k,variant:"outline",size:"small",className:I.outlineButton,children:[u.jsx(Li,{className:I.icon}),u.jsx("span",{className:"",children:"Add to queue"})]})]})]});case"dashboard-songs":return u.jsxs(u.Fragment,{children:[!s&&t,s&&u.jsxs(ul,{variant:e.variant,children:[u.jsx("div",{className:"font-playwriteCU",children:o.length}),u.jsxs(Q,{variant:"outline",size:"small",onClick:()=>console.log("confirm modal"),className:I.outlineButton,children:[u.jsx(oc,{className:I.icon}),u.jsx("span",{className:"hidden sm:block",children:"Delete"})]})]})]});case"my-songs":return u.jsxs(u.Fragment,{children:[!s&&t,s&&u.jsxs(ul,{selectAll:S,variant:e.variant,children:[u.jsx("div",{className:"font-playwriteCU !mr-[14px]",children:o.length}),u.jsxs(Q,{variant:"outline",size:"small",onClick:k,className:I.outlineButton,children:[u.jsx(Li,{className:I.icon}),u.jsx("span",{className:"hidden sm:block",children:"Add to queue"})]}),u.jsxs(Q,{variant:"outline",size:"small",onClick:()=>x("delete-selected-songs"),className:I.outlineButton,children:[u.jsx(oc,{className:I.icon}),u.jsx("span",{className:"hidden sm:block",children:"Delete"})]})]})]});case"dashboard-playlist":case"my-playlist":return u.jsxs(u.Fragment,{children:[!s&&t,s&&u.jsxs(ul,{selectAll:T,variant:e.variant,children:[u.jsx("p",{className:"font-playwriteCU !mr-[14px]",children:o.length}),e.variant!=="dashboard-playlist"&&u.jsxs(Q,{variant:"outline",size:"small",onClick:k,className:I.outlineButton,children:[u.jsx(Li,{className:I.icon}),"Add to songs queue"]}),u.jsxs(Q,{variant:"outline",size:"small",onClick:()=>x("remove-selects-songs"),className:I.outlineButton,children:[u.jsx(bT,{className:I.icon}),"Remove"]})]})]});case"admin-playlist":return u.jsxs(u.Fragment,{children:[!s&&u.jsx("div",{className:`${I.title} !mr-[14px]`,children:"Songs"}),s&&u.jsxs(ul,{selectAll:T,variant:e.variant,children:[u.jsx("p",{className:"font-[500]",children:o.length}),u.jsxs(Q,{variant:"outline",size:"small",onClick:k,className:I.outlineButton,children:[u.jsx(Li,{className:I.icon}),"Add to songs queue"]})]})]})}},[s,o,e]);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center space-x-2 h-[44px] mb-3",children:V}),u.jsx(Br,{variant:"animation",children:O})]})}function wQ({loading:t}){const e=Ke(),{adminSongs:n}=dt(),{from:r}=Y(gi),{currentSong:i}=Y(Ne),s=(o,a)=>{(i.id!==o.id||i.song_in!=="admin")&&(e(Xn({...o,currentIndex:a})),(r.length>1||r[0]!=o.song_in)&&e(Fm({songs:n})))};return u.jsxs(hc,{children:[u.jsx(Mc,{variant:"home"}),t&&Df,!t&&u.jsx(u.Fragment,{children:n.length?u.jsx(u.Fragment,{children:u.jsx(ds,{variant:"home",handleSetSong:s,activeExtend:i.song_in==="admin"||i.song_in==="favorite",songs:n})}):u.jsx("h1",{className:"text-[22px] text-center",children:"..."})})]})}function $4(){const t=Ke(),{userPlaylists:e,setUserPlaylists:n}=dt(),{currentPlaylist:r}=Y(yi),{currentSong:i}=Y(Ne),[s,o]=f.useState(!1),a=pn(),{setErrorToast:l}=gn();return{isFetching:s,addAdminPlaylist:async h=>{try{if(!h)throw new Error("playlist name invalid");const m=nx(h)+"_admin",p=ix({id:m,by:"admin",name:h});o(!0);const y=[...e,p];await qn({collection:"playlist",data:p,id:m,msg:">>> api: set playlist doc"}),n(y)}catch(m){console.log({message:m}),l({})}finally{o(!1)}},deleteAdminPlaylist:async()=>{o(!0),await Dc({collection:"playlist",id:r.id,msg:">>> api: delete playlist doc"});const h=e.filter(m=>m.id!==r.id);n(h),t(z1()),i.song_in===`playlist_${r.id}`&&t(oo()),o(!1),a("/dashboard")}}}function Z1({playlist:t,loading:e,activeCondition:n=!0,className:r,...i}){const{theme:s}=te(),{currentSong:o}=Y(Ne),a=f.useRef(null),{addPlaylist:l,isFetching:c}=_o(),{addAdminPlaylist:d,isFetching:h}=$4(),m=()=>{var y;return(y=a.current)==null?void 0:y.toggle()},p={playlistItem:"w-1/4 p-[8px] max-[800px]:w-1/2"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`flex flex-row flex-wrap -mx-[8px] ${r}`,children:[e&&QF,!e&&u.jsxs(u.Fragment,{children:[t.length?t.map((y,x)=>{const _=n&&o.song_in.includes(y.id);switch(i.location){case"home":case"my-songs":return u.jsx("div",{className:p.playlistItem,children:u.jsx(jy,{active:_,theme:s,data:y})},x);case"dashboard":return u.jsx("div",{className:p.playlistItem,children:u.jsx(jy,{active:_,theme:s,data:y,link:`/dashboard/playlist/${y.id}`})},x)}}):i.location==="home"&&u.jsx("p",{className:"text-center w-full",children:"..."}),i.location!=="home"&&u.jsx("div",{className:`${p.playlistItem} mb-[25px]`,children:u.jsx(c$,{theme:s,className:"pt-[100%]",onClick:()=>{var y;return(y=a.current)==null?void 0:y.toggle()}})})]})]}),i.location!=="home"&&u.jsxs(Br,{variant:"animation",ref:a,children:[i.location==="my-songs"&&u.jsx(Ub,{addPlaylist:l,isFetching:c,close:m}),i.location==="dashboard"&&u.jsx(Ub,{addPlaylist:d,isFetching:h,close:m})]})]})}function z4({tabs:t,activeTab:e,setActiveTab:n,className:r,render:i,inFullScreen:s}){const{theme:o}=te();return u.jsx("ul",{className:`flex space-x-[4px] py-[4px] h-full px-[4px] items-center ${s?"mx-auto":""} rounded-full ${s?"bg-white/10":o.side_bar_bg} ${r&&r}`,children:t.map((a,l)=>u.jsx("li",{onClick:()=>n(a),className:`${s?"px-[30px]":"px-[20px]"}  cursor-pointer hover:bg-white/20 h-full rounded-full max-[549px]:px-4 ${s?"":o.content_hover_text} ${e===a?s?"bg-white/20":`${o.content_text} ${o.container}`:"opacity-60"}`,children:u.jsx("span",{className:"leading-[27px] font-normal sm:font-semibold",children:i(a)})},l))})}function B4({to:t}){const{theme:e}=te(),n=pn(),r=On(),i=o=>{typeof t=="string"&&X5(t),o==="back"&&n(-1)},s={button:`h-[36px] w-[36px] p-[4px] rounded-full ${e.content_hover_bg} bg-${e.alpha}`};return u.jsx("div",{className:"flex gap-[10px] mb-[30px]",children:u.jsx("button",{onClick:()=>i("back"),className:`${s.button} ${r.pathname==="/"?"disable":""}`,children:u.jsx(BP,{})})})}const _Q=({time:t=6e3,autoClose:e})=>{const{setToasts:n,toasts:r}=gn(),{theme:i}=te(),[s,o]=f.useState(""),a=c=>{n(d=>d.filter(h=>h.id!=c))};f.useEffect(()=>{s&&n(c=>c.filter(d=>d.id!=s))},[s]),f.useEffect(()=>{if(!e||!r.length)return;const c=r[r.length-1].id;setTimeout(()=>{o(c)},t)},[r]);const l={container:"toast-portal fixed z-[199] bottom-[100px] left-[20px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:ho.createPortal(u.jsx("div",{className:l.container,children:u.jsx("div",{className:"flex flex-col gap-[10px]",children:!!r.length&&r.map((c,d)=>u.jsx(mK,{onClick:a,theme:i,toast:c},d))})}),document.getElementById("portals"))})};function EQ({user:t},e){return e?u.jsx("p",{className:"text-xl mb-4 ml-2",ref:e,children:t.display_name}):u.jsx("p",{className:"text-xl mb-4 ml-2",children:t.display_name})}f.forwardRef(EQ);function SQ(){const{theme:t}=te(),[e]=mu(os),[n,r]=f.useState(""),i=f.useRef(null),{logOut:s}=pu(),o=()=>{var h;return(h=i.current)==null?void 0:h.toggle()},a=h=>r(h),l=async()=>{try{await s()}catch(h){console.log("signOut error",{messsage:h})}finally{o()}},c=f.useMemo(()=>{switch(n){case"":return u.jsx(u.Fragment,{});case"logout":return u.jsx(Lr,{callback:l,close:o,loading:!1,theme:t,label:"Log out ?"});case"info":return u.jsx(ew,{close:o});case"theme":return}},[n]),d={header:`${t.side_bar_bg} fixed top-0 z-10 left-0 right-0`,container:"container mx-auto px-[40px] flex justify-between items-center h-[50px]",avatarFrame:"w-[34px] h-[34px] rounded-full",settingBtn:` flex ml-[12px] justify-center items-center hover:brightness-75 bg-${t.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`${d.header}`,children:u.jsxs("div",{className:d.container,children:[u.jsxs(Kr,{to:"/dashboard",className:"text-[24px] font-semibold",children:["HD",u.jsx("span",{className:`${t.content_text} ml-[4px] uppercase`,children:"Dashboard"})]}),u.jsxs("div",{className:"flex items-center",children:[(e==null?void 0:e.displayName)&&u.jsx("p",{className:"text-[14px] mr-[8px]",children:e.displayName}),u.jsx("div",{className:`${d.avatarFrame} overflow-hidden `,children:(e==null?void 0:e.photoURL)&&u.jsx("img",{src:e.photoURL,className:"w-full",alt:""})}),u.jsxs(X1,{placement:"bottom-end",children:[u.jsx(Q1,{className:`${d.avatarFrame} ${d.settingBtn}`,children:u.jsx(wT,{className:"w-[24px]"})}),u.jsx(Y1,{children:u.jsx(F4,{loggedIn:!1,openModal:a})})]})]})]})}),u.jsx(Br,{variant:"animation",ref:i,children:c})]})}const bQ="/HD-MP3/assets/user-default-971f59df.png";function Oy({className:t}){const[e]=mu(os),n={imageFrame:`${t||"w-[35px] h-[35px]"} flex-shrink-0 rounded-full overflow-hidden ${e!=null&&e.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`};return u.jsx("div",{className:n.imageFrame,children:u.jsx(pi,{src:(e==null?void 0:e.photoURL)||bQ,classNames:"w-full"})})}function ew({close:t}){return u.jsxs("div",{className:"w-[400px] max-w-[calc(90vw-40px)]",children:[u.jsx(ys,{close:t,title:"HD MP3"}),u.jsxs("p",{children:[u.jsx("span",{className:"font-[500]",children:"Technologies: "})," React, Tailwind Css, Google firebase"]})]})}function Vb({onClick:t,theme:e,active:n}){return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"w-[25%] px-2 mt-3 max-[549px]:w-[50%]",children:[u.jsx("div",{onClick:()=>t(e),className:`relative border-l-[20px] ${e.content_border} pt-[100%] rounded-xl ${e.side_bar_bg} ${n?e.content_border:""}`,children:n&&u.jsx("div",{className:"absolute bottom-[10px] right-[10px]",children:u.jsx(vT,{className:`${e.content_text} w-[25px]`})})}),u.jsx("p",{className:"text-base font-[500] mt-1",children:e.name})]})})}function V4({close:t}){const{theme:e,setTheme:n}=te(),r=a=>{Jt("theme",a.id),n(a)},i={songItemContainer:`w-full border-b border-${e.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[900px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-y-auto overflow-x-hidden no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-2 -mt-3 flex-wrap",linkItem:`py-[10px] border-b border-${e.alpha} last:border-none`},s=oh.map(a=>{const l=a.id===e.id;if(a.type==="light")return u.jsx(Vb,{active:l,theme:a,onClick:r},a.id)}),o=oh.map(a=>{const l=a.id===e.id;if(a.type==="dark")return u.jsx(Vb,{active:l,theme:a,onClick:r},a.id)});return u.jsxs("div",{className:i.popupWrapper,children:[u.jsx(ys,{close:t,title:"Themes"}),u.jsxs("div",{className:i.themeContainer,children:[u.jsx("h2",{className:"text-lg font-semibold mb-[10px]",children:"Dark"}),u.jsx("div",{className:i.themeList,children:o}),u.jsx("h2",{className:"text-lg font-semibold mb-[10px] mt-[30px]",children:"Light"}),u.jsx("div",{className:i.themeList,children:s})]})]})}function Lr({loading:t,theme:e,callback:n,label:r,close:i,buttonLabel:s,desc:o="This action cannot be undone",className:a}){return u.jsxs("div",{className:`${a||"w-[400px] max-w-[calc(90vw-40px)]"} ${t?"disable":""}`,children:[u.jsx("div",{className:"text-xl font-playwriteCU leading-[2.2] mb-3",children:r||"Wait a minute"}),o&&u.jsx("p",{className:"font-semibold text-lg text-red-500",children:o}),u.jsxs("div",{className:"flex space-x-3 mt-5",children:[u.jsx(Q,{onClick:i,className:`${e.content_bg} rounded-full text-lg`,variant:"primary",children:"Close"}),u.jsx(Q,{isLoading:t,className:" text-[#fff] bg-red-500 rounded-full text-lg",variant:"primary",onClick:n,children:s||"Yes please"})]})]})}function Ub({close:t,addPlaylist:e,isFetching:n}){const{theme:r}=te(),[i,s]=f.useState(""),o=f.useRef(null),a=async l=>{l.preventDefault(),i&&(await e(i),t())};return f.useEffect(()=>{var l;(l=o.current)==null||l.focus()},[]),u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]:",children:[u.jsx(ys,{close:t,title:"Add playlist"}),u.jsxs("form",{action:"",onSubmit:a,children:[u.jsx("input",{ref:o,className:`bg-${r.alpha} px-[20px] rounded-full outline-none mt-[10px] text-[16px]  h-[35px] w-full`,type:"text",placeholder:"name...",value:i,onChange:l=>s(l.target.value)}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(Q,{type:"submit",isLoading:n,variant:"primary",className:`${r.content_bg} rounded-full ${i?"":"disable"}`,children:"Save"})})]})]})}function kQ({closeModal:t,handleAddSongToPlaylist:e,userPlaylists:n,song:r,loading:i}){return u.jsxs("div",{className:`w-[400px] max-w-[calc(90vw-40px)] ${i?"disable":""}`,children:[u.jsx(ys,{close:t,title:"Playlist"}),u.jsx("div",{className:"max-h-[60vh]",children:u.jsx("ul",{className:"",children:n!=null&&n.length?u.jsx(u.Fragment,{children:n.map((s,o)=>{const a=s.song_ids.includes(r.id);return u.jsxs("li",{onClick:()=>!a&&e(s),className:`list-none flex rounded-[4px] p-[5px] ${a&&"opacity-60"}`,children:[u.jsx(ya,{className:"w-[20px] mr-[5px]"}),u.jsxs("p",{children:[s.name," ",a&&"(added)"]})]},o)})}):"No playlist jet..."})})]})}function TQ({close:t,active:e}){const{theme:n}=te(),r={button:`bg-${n.alpha} ${n.content_hover_bg} text-[14px] font-[500] px-[10px]  py-[4px] rounded-[99px]`,input:`bg-${n.alpha} px-[10px] rounded-[4px] outline-none mt-[10px] text-[16px]  h-[35px] w-full`},i=s=>{e(s),t()};return u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]",children:[u.jsx(ys,{close:t,title:"Sleep timer"}),u.jsx("div",{children:u.jsxs("div",{className:"flex space-x-[10px] mb-[12px]",children:[u.jsx("button",{type:"button",onClick:()=>i(15),className:`${r.button} `,children:"15 min"}),u.jsx("button",{type:"button",onClick:()=>i(20),className:`${r.button} `,children:"20 min"}),u.jsx("button",{type:"button",onClick:()=>i(30),className:`${r.button} `,children:"30 min"})]})})]})}function U4({admin:t}){const e=f.useRef(null),n=f.useRef(null),r=f.useRef(null),{handleInputChange:i}=aK({audioRef:e,testImageRef:r,inputRef:n,admin:t}),s={container:"upload portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:ho.createPortal(u.jsxs("div",{className:s.container,children:[u.jsx("audio",{className:"hidden",ref:e}),u.jsx("input",{ref:n,onChange:i,type:"file",multiple:!0,accept:"audio",id:"song_upload",className:"hidden"}),u.jsx("img",{className:"hidden",ref:r})]}),document.getElementById("portals"))})}function Eg({children:t}){const{theme:e}=te();return u.jsx(u.Fragment,{children:u.jsxs("div",{className:`${e.container} min-h-screen ${e.type==="dark"?"text-white":"text-[#333]"}`,children:[u.jsx(SQ,{}),u.jsxs("div",{className:"h-[calc(100vh-50px)] no-scrollbar overflow-auto",children:[u.jsx("div",{className:"h-[100px]"}),u.jsx("div",{className:"container mx-[auto] px-[40px]",children:t})]}),u.jsx(L4,{admin:!0}),u.jsx(U4,{admin:!0})]})})}function IQ(){const{loading:t}=ht(),{adminPlaylists:e}=dt(),{isOnMobile:n}=te(),{loading:r}=zm({});return u.jsxs(u.Fragment,{children:[n&&u.jsx(nQ,{}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-xl leading-[2.2] font-playwriteCU mb-3",children:"Popular"}),u.jsx(Z1,{loading:r||t,playlist:e,location:"home"})]}),u.jsx("div",{className:"pb-[30px]",children:u.jsx(wQ,{loading:r})}),n&&u.jsx(rQ,{})]})}function CQ(){const{theme:t}=te(),{currentSong:e}=Y(Ne),{userSongs:n}=dt(),[r,i]=f.useState(),[s,o]=f.useState({base:"",real_time:[],id:""}),a=f.useRef(null),[l,c]=f.useState(!1),d=f.useRef(!1),{errorMsg:h,loading:m,initial:p}=zm({}),y=pn(),x=Ef(),_=f.useCallback(async g=>{try{if(g.lyric_id){c(!0);const w=await Na({collection:"lyrics",id:g.lyric_id,msg:">>> api: get lyric doc"});if(w.exists()){const E=w.data();o(E)}}}catch(w){console.log({message:w})}finally{c(!1)}},[]),v=f.useCallback(async()=>{if(console.log("get song"),e.name&&e.id===x.id)e.by==="admin"?y(At.Home):(i(e),await _(e));else{const g=n.find(w=>w.id===x.id);g?(i(g),await _(g)):y(At.Home)}},[e,n]);return f.useEffect(()=>{p&&(d.current||(d.current=!0,r||v()))},[p]),m||l?u.jsx("h1",{children:u.jsx(Ks,{className:"w-[25px] animate-spin"})}):h?u.jsx("h1",{children:h}):u.jsxs("div",{className:"",children:[u.jsx("audio",{ref:a,src:r==null?void 0:r.song_url,className:"hidden"}),r&&u.jsx(u.Fragment,{children:u.jsx(O4,{lyric:s,audioRef:a,theme:t,song:r})})]})}function AQ({initialLoading:t}){const e=Ke(),{userSongs:n}=dt(),{currentSong:r}=Y(Ne),{tempSongs:i}=$m(),s=f.useMemo(()=>i.length+n.length,[i,n]),o=(a,l)=>{r.id!==a.id&&e(Xn({...a,currentIndex:l}))};return u.jsxs(hc,{children:[u.jsx(Mc,{variant:"dashboard-songs",children:t?u.jsx(u.Fragment,{children:u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(_t,{className:"h-[20px] w-[90px]"})})}):u.jsxs("p",{className:"font-semibold opacity-[.6]",children:[s," Songs"]})}),u.jsxs("div",{className:"min-h-[50vh]",children:[t&&Df,!t&&u.jsx(u.Fragment,{children:s?u.jsxs(u.Fragment,{children:[u.jsx(ds,{variant:"dashboard-songs",tempSongs:i,activeExtend:!0,songs:n,handleSetSong:o}),u.jsx(ds,{variant:"uploading",songs:i})]}):u.jsx("p",{className:"text-center",children:"¯\\_(ツ)_/¯"})})]})]})}function RQ(){const{theme:t}=te(),{user:e,loading:n}=ht(),{currentSong:r}=Y(Ne),{userPlaylists:i}=dt(),[s,o]=f.useState(!0),[a,l]=f.useState([]),[c,d]=f.useState("userSongs"),{loading:h,errorMsg:m}=zm({admin:!0}),p=async()=>{console.log(">>> api: get user");try{if(!e)return;o(!0);const _=qa(fm(wo,"users"),Ga("email","!=",e.email)),v=await Ka(_);if(v.docs){const g=v.docs.map(w=>w.data());l(g)}}catch(_){console.log(_)}finally{o(!1)}},y=()=>a.map((_,v)=>u.jsxs("tr",{className:"",children:[u.jsx("td",{className:x.td,children:u.jsx("div",{className:"h-[44px] w-[44px] ml-[20px]",children:u.jsx(pi,{classNames:"rounded-[4px]",src:_.photoURL})})}),u.jsx("td",{className:x.td,children:_.display_name}),u.jsx("td",{className:x.td,children:_.email}),u.jsx("td",{className:x.td,children:VF(_==null?void 0:_.latest_seen)})]},v));f.useEffect(()=>{n||c==="users"&&!a.length&&p()},[c]);const x={button:`${t.content_bg} rounded-full`,inActiveBtn:`bg-${t.alpha}`,activeBtn:`${t.content_bg}`,td:`py-[10px] my-[10px] border-${t.alpha} border-b-[1px]`,th:"py-[5px]",tableContainer:`border border-${t.alpha} rounded-[4px]`,tableHeader:`border-b border-${t.alpha} ${t.side_bar_bg} flex items-center h-[50px] gap-[15px]`};return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsxs("div",{className:"mb-[20px]",children:[u.jsx(Q,{onClick:()=>d("userSongs"),className:`${c==="userSongs"?x.activeBtn:x.inActiveBtn}  rounded-full`,variant:"primary",children:"Songs"}),u.jsx(Q,{onClick:()=>d("users"),className:` ${c==="users"?x.activeBtn:x.inActiveBtn} rounded-full ml-[10px]`,variant:"primary",children:"Users"})]}),u.jsxs("div",{className:"mt-[30px]",children:[c==="userSongs"&&u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-2xl font-bold mb-[10px]",children:"Playlist"}),u.jsx(Z1,{activeCondition:!!r.song_in,loading:h,playlist:i,location:"dashboard"}),u.jsxs("div",{className:"mt-[30px] flex justify-between mb-[10px]",children:[u.jsx("h3",{className:"text-2xl font-bold",children:"Songs"}),u.jsx("div",{className:"flex items-center",children:u.jsxs("label",{className:`${t.content_bg} ${status==="uploading"||h?"disable":""} rounded-full flex px-[20px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(sh,{className:"w-[20px] mr-[5px]"}),"Upload"]})})]}),m&&u.jsx("p",{children:"Some thing went wrong"}),!m&&u.jsx(AQ,{initialLoading:h})]}),c==="users"&&u.jsx("div",{className:x.tableContainer,children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:`${t.bottom_player_bg} w-full text-[14px] py-[4px]`,children:u.jsxs("tr",{children:[u.jsx("th",{}),u.jsx("th",{className:"text-left py-[4px]",children:"Name"}),u.jsx("th",{className:"text-left py-[4px]",children:"Email"}),u.jsx("th",{className:"text-left py-[4px]",children:"Latest Seen"})]})}),u.jsx("tbody",{children:y()})]})})]})]})})}function PQ({playlist:t,close:e}){const{theme:n}=te(),r=f.useRef(null),[i,s]=f.useState(""),[o,a]=f.useState(!1),{editPlaylist:l,isFetching:c}=_o(),d=async m=>{if(m.preventDefault(),!!o)try{await l(i,t)}catch(p){console.log(p)}finally{e()}},h={editContainer:"w-[400px] max-w-[calc(90vw-40px)]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full"};return f.useEffect(()=>{const m=r.current;m==null||m.focus(),s(t.name)},[]),f.useEffect(()=>{i.trim()&&i.trim()!==t.name?a(!0):a(!1)},[i]),u.jsxs(u.Fragment,{children:[u.jsx(ys,{close:e,title:"Edit playlist"}),u.jsxs("form",{action:"",onSubmit:d,className:`${h.editContainer} ${c?"disable":""}`,children:[u.jsx("input",{ref:r,value:i,onChange:m=>s(m.target.value),type:"text",className:`${h.input} bg-${n.alpha} ${n.type==="light"?"text-[#333]":"text-white"}`}),u.jsx(Q,{type:"submit",variant:"primary",isLoading:c,className:`${n.content_bg} rounded-full self-end mt-[15px] ${o?"":"disable"}`,children:"Save"})]})]})}function Sg({loading:t,type:e}){const n=Ke(),{theme:r,isOnMobile:i}=te(),{currentSong:s}=Y(Ne),{currentPlaylist:o,playlistSongs:a}=Y(yi),[l,c]=f.useState(""),d=f.useRef(null),h=Ef(),{deletePlaylist:m,isFetching:p}=_o(),{deleteAdminPlaylist:y,isFetching:x}=$4(),_=f.useMemo(()=>a.reduce((I,O)=>I+O.duration,0),[a]),v=I=>{var O;c(I),(O=d.current)==null||O.toggle()},g=()=>{var I;return(I=d.current)==null?void 0:I.toggle()},w=(I,O)=>{const V=`playlist_${o.id}`;(s.id!==I.id||s.song_in!==V)&&(n(Xn({...I,currentIndex:O,song_in:V})),s.song_in!==V&&(n(Fm({songs:a})),console.log("setActuallySongs when playlist list")))},E=()=>{const I=a[0];s.song_in.includes(h.name)||w(I,0)},S=u.jsxs(u.Fragment,{children:[u.jsx(_t,{className:"h-[38px] mb-[6px] w-[200px]"}),u.jsx(_t,{className:"hidden md:block h-[16px] w-[60px]"}),u.jsx(_t,{className:"hidden md:block h-[16px] w-[200px]"})]}),T=f.useMemo(()=>t?S:u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-xl leading-[2.2] font-playwriteCU",children:o.name}),!i&&u.jsx("p",{className:"text-lg leading-[1] font-[500]",children:dc(_)}),u.jsxs("p",{className:"hidden md:block opacity-60 leading-[1]",children:["created by ",o.by]})]}),[t,o]),k=f.useMemo(()=>{if(t)return u.jsx(u.Fragment,{});switch(e){case"my-playlist":case"dashboard-playlist":return u.jsxs(u.Fragment,{children:[u.jsxs(Q,{onClick:E,className:`rounded-full px-[20px] py-[6px] ${r.content_bg} ${!o.song_ids.length&&"disable"}`,children:[u.jsx(b_,{className:"w-[22px]"}),u.jsx("span",{className:"font-playwriteCU",children:"Play"})]}),u.jsx(Q,{onClick:()=>v("delete"),className:`p-[8px] rounded-full ${r.content_hover_bg} bg-${r.alpha}`,children:u.jsx(oc,{className:"w-[22px]"})}),u.jsx(Q,{onClick:()=>v("edit"),className:`p-[8px] rounded-full ${r.content_hover_bg} bg-${r.alpha}`,children:u.jsx(TT,{className:"w-[22px]"})})]});case"admin-playlist":return u.jsxs(Q,{onClick:E,className:`rounded-full px-[20px] space-x-1 py-1 ${r.content_bg} ${!o.song_ids.length&&"disable"}`,children:[u.jsx(b_,{className:"w-7"}),u.jsx("span",{className:"font-playwriteCU leading-[2.2]",children:"Play"})]})}},[t,a]),b=f.useMemo(()=>{switch(l){case"":return u.jsx(u.Fragment,{});case"edit":return u.jsx(PQ,{close:g,playlist:o});case"delete":if(e==="my-playlist")return u.jsx(Lr,{loading:p,label:"Delete playlist ?",theme:r,callback:m,close:g});if(e==="dashboard-playlist")return u.jsx(Lr,{loading:x,label:"Delete playlist ?",theme:r,callback:y,close:g})}},[l,p,x]),P={container:"w-full space-y-[12px] md:space-y-0 md:space-x-[12px] flex flex-col md:flex-row",playlistInfoContainer:"flex flex-col gap-[12px] md:justify-between",infoTop:"flex justify-center items-center gap-[8px] md:flex-col md:items-start",countSongText:"text-[14px]] font-semibold opacity-[.6] leading-[1]",ctaContainer:"flex justify-center space-x-[12px] md:justify-start"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:P.container,children:[u.jsx("div",{className:"w-full px-[20px] md:w-1/4 md:px-0",children:t?u.jsx(_t,{className:"pt-[100%] rounded-[8px]"}):u.jsx(jy,{data:o,active:s.song_in===`playlist_${o.id}`,inDetail:!0,theme:r})}),u.jsxs("div",{className:P.playlistInfoContainer,children:[u.jsx("div",{className:P.infoTop,children:T}),u.jsx("div",{className:`${P.ctaContainer} `,children:k})]})]}),u.jsx(Br,{variant:"animation",ref:d,children:b})]})}function bg({variant:t}){const e=Ke(),{theme:n}=te(),{currentSong:r}=Y(Ne),{from:i,queueSongs:s}=Y(gi),{currentPlaylist:o,playlistSongs:a}=Y(yi),l=f.useRef(null),c=()=>{var _;return(_=l.current)==null?void 0:_.toggle()},{setErrorToast:d}=gn(),{deleteSongFromPlaylist:h}=_o(),m=(_,v)=>{const g=`playlist_${o.id}`;(r.id!==_.id||r.song_in!==g)&&(e(Xn({..._,currentIndex:v,song_in:g})),(i.length>1||i[0]!=g||a.length!==s.length)&&e(Fm({songs:a})))},p=async _=>{try{await h(_)}catch(v){console.log(v),d({})}},y=f.useMemo(()=>{if(!a.length)return u.jsx(u.Fragment,{});switch(t){case"admin-playlist":return u.jsx(Mc,{variant:"admin-playlist",children:u.jsxs("p",{className:"font-[500] opacity-[.5]",children:[a.length," Songs"]})});case"my-playlist":case"dashboard-playlist":return u.jsx(Mc,{variant:"my-playlist",children:u.jsxs("p",{className:"font-[500] opacity-[.5]",children:[a.length," Songs"]})})}},[o,a]),x=f.useMemo(()=>{switch(t){case"admin-playlist":return u.jsx(ds,{variant:"admin-playlist",songs:a,handleSetSong:m,activeExtend:r.song_in.includes(o.id)});case"my-playlist":case"dashboard-playlist":return u.jsxs(u.Fragment,{children:[u.jsx(ds,{variant:t,songs:a,handleSetSong:m,activeExtend:r.song_in.includes(o.id),deleteFromPlaylist:p}),u.jsx("div",{className:"flex justify-center mt-[20px]",children:u.jsxs(Q,{onClick:()=>{var _;return(_=l.current)==null?void 0:_.toggle()},className:`${n.content_bg} rounded-full`,variant:"primary",size:"clear",children:[u.jsx(Li,{className:"w-6 mr-[5px]"}),u.jsx("span",{className:"font-playwriteCU leading-[2.2] text-sm",children:"Add song"})]})})]})}},[o,a,r]);return u.jsxs(u.Fragment,{children:[u.jsxs(hc,{children:[y,x]}),u.jsx(Br,{ref:l,variant:"animation",children:u.jsx(hc,{children:u.jsx(WG,{closeModal:c,playlistSongs:a})})})]})}function W4(){const{currentPlaylist:t}=Y(yi),{loading:e}=QG(),n=On(),r=f.useMemo(()=>n.pathname.includes("/dashboard/playlist"),[n]),i=f.useMemo(()=>r?u.jsx(Sg,{loading:e,type:"dashboard-playlist"}):t.by==="admin"?u.jsx(Sg,{loading:e,type:"admin-playlist"}):u.jsx(Sg,{loading:e,type:"my-playlist"}),[e]),s=f.useMemo(()=>e?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(_t,{className:"h-[20px] w-[90px]"})}),Df]}):r?u.jsx(bg,{variant:"dashboard-playlist"}):t.by==="admin"?u.jsx(bg,{variant:"admin-playlist"}):u.jsx(bg,{variant:"my-playlist"}),[e]);return u.jsxs("div",{className:"min-h-screen",children:[u.jsx(B4,{}),i,u.jsx("div",{className:"pb-[50px] mt-[20px]",children:s})]})}const NQ=["mine","favorite"];function DQ({initialLoading:t}){const e=Ke(),{theme:n}=te(),{user:r}=ht(),{userSongs:i}=dt(),{currentSong:s}=Y(Ne),{from:o,queueSongs:a}=Y(gi),[l,c]=f.useState("mine"),[d,h]=f.useState(!1),{tempSongs:m}=$m(),p=f.useMemo(()=>t?0:m.length+i.length,[m,i,t]),y=async()=>{if(r)return await wh(300),h(!1)},x=async v=>{c(v),h(!0),v==="favorite"?await y():(await wh(300),h(!1))},_=(v,g)=>{(o.length>1||i.length!==a.length||o[0]!="user")&&e(Fm({songs:i})),(s.id!==v.id||s.song_in!=="user")&&e(Xn({...v,currentIndex:g}))};return u.jsxs(u.Fragment,{children:[u.jsx(Mc,{variant:"my-songs",children:t?u.jsx(u.Fragment,{children:u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(_t,{className:"h-[20px] w-[90px]"})})}):u.jsxs("p",{className:"font-[500] opacity-[.5]",children:[p," Songs"]})}),u.jsx("div",{className:"flex items-center space-x-[10px] py-[10px]",children:NQ.map((v,g)=>{const w=l===v;return u.jsx("button",{onClick:()=>x(v),className:`text-[14px] font-[500] px-[10px] 
                        ${n.content_border} border py-[4px] rounded-[99px] ${w?n.content_bg:""}
                    `,children:v==="mine"?"My songs":"Favorite"},g)})}),u.jsxs("div",{className:"min-h-[50vh]",children:[(t||d)&&Df,!t&&!d&&u.jsxs(u.Fragment,{children:[l==="mine"&&!!p&&u.jsxs(u.Fragment,{children:[u.jsx(ds,{variant:"my-songs",handleSetSong:_,activeExtend:s.song_in==="user"||s.song_in==="favorite",songs:i,tempSongs:m}),u.jsx(ds,{songs:m,variant:"uploading"})]}),l==="favorite"&&u.jsx("img",{className:"mx-auto my-5",src:"https://d4t06.github.io/Vue-Mobile/assets/search-empty-ChRLxitn.png",alt:""})]})]})]})}function jQ(){const{theme:t}=te(),{loading:e,user:n}=ht(),{currentSong:r}=Y(Ne),{userPlaylists:i}=dt(),{status:s}=$m(),o=pn(),{loading:a,errorMsg:l,initial:c}=zm({});return f.useEffect(()=>{e||n&&(n.email||(o(At.Home),console.log(">>> navigate to home")))},[e,c]),l?u.jsx("h1",{children:l}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px] ",children:[window.innerWidth<800&&u.jsx(B4,{to:""}),u.jsx("h3",{className:"font-playwriteCU leading-[2.2] mb-3 text-xl",children:"Playlist"}),u.jsx(Z1,{activeCondition:!!r.song_in,loading:a,playlist:i,location:"my-songs"})]}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"font-playwriteCU leading-[2.2] mb-3 text-xl",children:"Songs"}),u.jsxs("label",{className:`${t.content_bg} ${s==="uploading"||a?"disable":""} items-center hover:opacity-60 py-1 rounded-full flex px-4 cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(yT,{className:"w-7 mr-1"}),u.jsx("span",{className:" font-playwriteCU leading-[2.2]",children:"Upload"})]})]}),u.jsxs(hc,{children:[l&&u.jsx("p",{children:"Some thing went wrong"}),!l&&u.jsx(DQ,{initialLoading:a})]})]})]})}function OQ(){const{theme:t}=te(),{user:e,loading:n}=ht(),[r,i]=f.useState(),[s,o]=f.useState({base:"",real_time:[],id:""}),a=f.useRef(null),l=f.useRef(!1),c=Ef(),d=pn(),h=async()=>{try{const m=await Na({collection:"songs",id:c==null?void 0:c.id,msg:">>> api: get song doc"});if(!m.exists()){d("/dashboard");return}const p=m.data();if(p.lyric_id){const y=await Na({collection:"lyrics",id:p.lyric_id});if(y.exists()){const x=y.data();o(x)}}i(p)}catch(m){console.log({message:m})}};return f.useEffect(()=>{if(!n){if(!e)return d(At.Home);l.current||(l.current=!0,h())}},[]),u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsx("audio",{ref:a,src:r&&r.song_url,className:"hidden"}),r&&u.jsx(u.Fragment,{children:u.jsx(O4,{admin:!0,lyric:s,audioRef:a,theme:t,song:r})})]})}function MQ(){const{theme:t}=te();return u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.container} ${t.type==="dark"?"text-white":"text-black"}`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Page Not found"}),u.jsx(Kr,{to:"/",className:`${t.content_bg} font-bold  text-[#fff] mt-[20px] rounded-full flex px-[20px] py-[4px] cursor-pointer`,children:"Go home"})," "]})}function LQ(){const{theme:t}=te(),e=pn(),n=async()=>{await aC(os),e("/login")};return u.jsxs("div",{className:`${t.container} flex flex-col justify-center items-center min-h-screen`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Unauthorized"}),u.jsx(Q,{onClick:n,variant:"primary",size:"normal",className:`${t.content_bg} font-bold text-[20px]  text-[#fff] rounded-full mt-[20px]`,children:"Exit"})]})}function FQ(){var a,l;const[t]=mu(os),{logIn:e}=pu(),{theme:n}=te(),r=pn(),i=On(),s=((l=(a=i==null?void 0:i.state)==null?void 0:a.from)==null?void 0:l.pathname)||"/dashboard",o=async()=>{try{await e()}catch(c){console.log(c)}};return f.useEffect(()=>{if(t!=null&&t.email){r(s,{replace:!0});return}console.log("run effect")},[t]),u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${n.container} ${n.type==="dark"?"text-white":"text-black"}`,children:[u.jsx(Q,{onClick:o,variant:"default",size:"normal",className:`${n.content_bg} font-bold text-[#fff] text-[30px] rounded-full`,children:"Login with google"})," "]})}const At={Home:"/",Dashboard:"/dashboard",DashboardPlaylist:"/dashboard/playlist/:id",DashboardEdit:"/dashboard/edit/:id",MySongs:"/mysongs",Favorite:"/favorite",Playlist:"/playlist/:id",Edit:"/mysongs/edit/:id"},$Q=[{path:At.Home,component:IQ,layout:""},{path:At.MySongs,component:jQ,layout:""},{path:At.Playlist,component:W4,layout:""},{path:At.Edit,component:CQ,layout:""}],zQ=[{path:At.Dashboard,component:RQ,layout:Eg},{path:At.DashboardPlaylist,component:W4,layout:Eg},{path:At.DashboardEdit,component:OQ,layout:Eg}];function BQ(){const t={container:"my-[30px] flex flex-col md:flex-row md:justify-between items-start",icon:"w-[26px] sm:w-[20px] scale-[1] hover:scale-[1.1] transition linear ",copyRightText:"text-[14px]"};return u.jsxs("div",{className:`${t.container}`,children:[u.jsxs("p",{className:t.copyRightText,children:["Make with ❤️ by d4t06 ",u.jsx("br",{})," © All rights no reserved ¯\\_(ツ)_/¯"]}),u.jsxs("div",{className:"flex mt-[20px] md:mt-0 space-x-[10px]",children:[u.jsx("a",{href:"https://facebook.com/DAtdz06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"})})}),u.jsx("a",{href:"https://www.linkedin.com/in/dat-nguyen-9371a926a",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"})})}),u.jsx("a",{href:"https://github.com/d4t06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 496 512",fill:"currentColor",children:u.jsx("path",{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})})})]})]})}const Wb=({children:t})=>{const{theme:e}=te(),n=On(),r=f.useMemo(()=>n.pathname.includes("edit"),[n]),i=f.useRef(null),s={container:` main-container sm:overflow-auto no-scrollbar w-full ${r?"":"min-h-[100vh] pb-[90px]"} max-[549px]:h-full `,content:"px-[40px] max-[549px]:px-4 mt-[60px]",page:`flex min-h-[100vh] sm:h-[100vh] sm:overflow-hidden ${e.type==="dark"?"text-white":"text-[#333]"} ${e.container}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:s.page,children:[window.innerWidth>=800&&u.jsx(uQ,{}),u.jsxs("div",{ref:i,className:s.container,children:[window.innerWidth>=800&&u.jsx(dQ,{contentRef:i}),u.jsxs("div",{className:s.content,children:[t,u.jsx(BQ,{})]})]}),u.jsx(L4,{})]}),u.jsx(U4,{})]})},VQ="/HD-MP3/assets/loading-b1210647.gif";function UQ({allowedRole:t}){const{user:e,loading:n}=ht(),{theme:r}=te();return n?u.jsx("div",{className:`min-h-screen flex flex-col items-center justify-center ${r.container}`,children:u.jsx("img",{className:"w-[150px]",src:VQ,alt:""})}):e&&(t!=null&&t.find(i=>e.role===i))||!t.length?u.jsx(fT,{}):u.jsx(pD,{replace:!0,to:"/login"})}function WQ(){const{setUser:t}=ht(),[e,n]=mu(os);return f.useEffect(()=>{if(n)return;(async()=>{try{if(!e||!e.email)return t({type:"set-user",user:null});const s=(await Na({collection:"users",id:e.email,msg:">>> api: get auth info"})).data();Object.assign(s,{email:e.email,display_name:e.displayName,photoURL:e.photoURL,like_song_ids:s.like_song_ids||[],playlist_ids:s.playlist_ids||[],play_history:s.play_history||[]}),t({type:"set-user",user:s})}catch(i){console.log({message:i})}})()},[n,e]),u.jsx(fT,{})}function HQ(){return u.jsxs(u.Fragment,{children:[u.jsx(SD,{children:u.jsxs(yD,{children:[u.jsx(Si,{path:"/login",element:u.jsx(FQ,{})}),u.jsx(Si,{path:"/unauthorized",element:u.jsx(LQ,{})}),u.jsx(Si,{path:"*",element:u.jsx(MQ,{})}),u.jsxs(Si,{element:u.jsx(WQ,{}),children:[$Q.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=Wb,u.jsx(Si,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)}),u.jsx(Si,{element:u.jsx(UQ,{allowedRole:["ADMIN"]}),children:zQ.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=Wb,u.jsx(Si,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)})})]})]})}),u.jsx(_Q,{autoClose:!0})]})}const qQ=zq({reducer:{currentSong:Zq,currentPlaylist:vG,playStatus:qG,songQueue:rG}});kg.createRoot(document.getElementById("root")).render(u.jsx(tk.StrictMode,{children:u.jsx(aG,{children:u.jsx(XF,{children:u.jsx(m$,{children:u.jsx(uG,{children:u.jsx(mG,{children:u.jsx(oq,{store:qQ,children:u.jsx(HQ,{})})})})})})})}));
