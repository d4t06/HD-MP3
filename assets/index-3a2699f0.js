function jC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function OC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var G_={exports:{}},Kd={},X_={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ql=Symbol.for("react.element"),LC=Symbol.for("react.portal"),DC=Symbol.for("react.fragment"),MC=Symbol.for("react.strict_mode"),$C=Symbol.for("react.profiler"),FC=Symbol.for("react.provider"),VC=Symbol.for("react.context"),UC=Symbol.for("react.forward_ref"),BC=Symbol.for("react.suspense"),zC=Symbol.for("react.memo"),WC=Symbol.for("react.lazy"),Jv=Symbol.iterator;function HC(t){return t===null||typeof t!="object"?null:(t=Jv&&t[Jv]||t["@@iterator"],typeof t=="function"?t:null)}var Y_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J_=Object.assign,Z_={};function Ho(t,e,n){this.props=t,this.context=e,this.refs=Z_,this.updater=n||Y_}Ho.prototype.isReactComponent={};Ho.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ho.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function eE(){}eE.prototype=Ho.prototype;function Wg(t,e,n){this.props=t,this.context=e,this.refs=Z_,this.updater=n||Y_}var Hg=Wg.prototype=new eE;Hg.constructor=Wg;J_(Hg,Ho.prototype);Hg.isPureReactComponent=!0;var Zv=Array.isArray,tE=Object.prototype.hasOwnProperty,qg={current:null},nE={key:!0,ref:!0,__self:!0,__source:!0};function rE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)tE.call(e,r)&&!nE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:ql,type:t,key:i,ref:o,props:s,_owner:qg.current}}function qC(t,e){return{$$typeof:ql,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Kg(t){return typeof t=="object"&&t!==null&&t.$$typeof===ql}function KC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var e1=/\/+/g;function If(t,e){return typeof t=="object"&&t!==null&&t.key!=null?KC(""+t.key):e.toString(36)}function lu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ql:case LC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+If(o,0):r,Zv(s)?(n="",t!=null&&(n=t.replace(e1,"$&/")+"/"),lu(s,e,n,"",function(c){return c})):s!=null&&(Kg(s)&&(s=qC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(e1,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Zv(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+If(i,a);o+=lu(i,e,n,l,s)}else if(l=HC(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+If(i,a++),o+=lu(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function kc(t,e,n){if(t==null)return t;var r=[],s=0;return lu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function QC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Bt={current:null},cu={transition:null},GC={ReactCurrentDispatcher:Bt,ReactCurrentBatchConfig:cu,ReactCurrentOwner:qg};ue.Children={map:kc,forEach:function(t,e,n){kc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return kc(t,function(){e++}),e},toArray:function(t){return kc(t,function(e){return e})||[]},only:function(t){if(!Kg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=Ho;ue.Fragment=DC;ue.Profiler=$C;ue.PureComponent=Wg;ue.StrictMode=MC;ue.Suspense=BC;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GC;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=J_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=qg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)tE.call(e,l)&&!nE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ql,type:t.type,key:s,ref:i,props:r,_owner:o}};ue.createContext=function(t){return t={$$typeof:VC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:FC,_context:t},t.Consumer=t};ue.createElement=rE;ue.createFactory=function(t){var e=rE.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:UC,render:t}};ue.isValidElement=Kg;ue.lazy=function(t){return{$$typeof:WC,_payload:{_status:-1,_result:t},_init:QC}};ue.memo=function(t,e){return{$$typeof:zC,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=cu.transition;cu.transition={};try{t()}finally{cu.transition=e}};ue.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ue.useCallback=function(t,e){return Bt.current.useCallback(t,e)};ue.useContext=function(t){return Bt.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return Bt.current.useDeferredValue(t)};ue.useEffect=function(t,e){return Bt.current.useEffect(t,e)};ue.useId=function(){return Bt.current.useId()};ue.useImperativeHandle=function(t,e,n){return Bt.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Bt.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Bt.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Bt.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return Bt.current.useReducer(t,e,n)};ue.useRef=function(t){return Bt.current.useRef(t)};ue.useState=function(t){return Bt.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Bt.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Bt.current.useTransition()};ue.version="18.2.0";X_.exports=ue;var h=X_.exports;const sE=OC(h),Qg=jC({__proto__:null,default:sE},[h]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XC=h,YC=Symbol.for("react.element"),JC=Symbol.for("react.fragment"),ZC=Object.prototype.hasOwnProperty,ek=XC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tk={key:!0,ref:!0,__self:!0,__source:!0};function iE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)ZC.call(e,r)&&!tk.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:YC,type:t,key:i,ref:o,props:s,_owner:ek.current}}Kd.Fragment=JC;Kd.jsx=iE;Kd.jsxs=iE;G_.exports=Kd;var u=G_.exports;var Qp={},oE={exports:{}},fn={},aE={exports:{}},lE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,M){var B=R.length;R.push(M);e:for(;0<B;){var k=B-1>>>1,W=R[k];if(0<s(W,M))R[k]=M,R[B]=W,B=k;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var M=R[0],B=R.pop();if(B!==M){R[0]=B;e:for(var k=0,W=R.length,X=W>>>1;k<X;){var ee=2*(k+1)-1,Pe=R[ee],le=ee+1,Ve=R[le];if(0>s(Pe,B))le<W&&0>s(Ve,Pe)?(R[k]=Ve,R[le]=B,k=le):(R[k]=Pe,R[ee]=B,k=ee);else if(le<W&&0>s(Ve,B))R[k]=Ve,R[le]=B,k=le;else break e}}return M}function s(R,M){var B=R.sortIndex-M.sortIndex;return B!==0?B:R.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,p=3,m=!1,y=!1,g=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(R){for(var M=n(c);M!==null;){if(M.callback===null)r(c);else if(M.startTime<=R)r(c),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(c)}}function E(R){if(g=!1,w(R),!y)if(n(l)!==null)y=!0,F(S);else{var M=n(c);M!==null&&Q(E,M.startTime-R)}}function S(R,M){y=!1,g&&(g=!1,x(T),T=-1),m=!0;var B=p;try{for(w(M),f=n(l);f!==null&&(!(f.expirationTime>M)||R&&!O());){var k=f.callback;if(typeof k=="function"){f.callback=null,p=f.priorityLevel;var W=k(f.expirationTime<=M);M=t.unstable_now(),typeof W=="function"?f.callback=W:f===n(l)&&r(l),w(M)}else r(l);f=n(l)}if(f!==null)var X=!0;else{var ee=n(c);ee!==null&&Q(E,ee.startTime-M),X=!1}return X}finally{f=null,p=B,m=!1}}var b=!1,I=null,T=-1,A=5,C=-1;function O(){return!(t.unstable_now()-C<A)}function z(){if(I!==null){var R=t.unstable_now();C=R;var M=!0;try{M=I(!0,R)}finally{M?N():(b=!1,I=null)}}else b=!1}var N;if(typeof v=="function")N=function(){v(z)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,V=$.port2;$.port1.onmessage=z,N=function(){V.postMessage(null)}}else N=function(){_(z,0)};function F(R){I=R,b||(b=!0,N())}function Q(R,M){T=_(function(){R(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,F(S))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(R){switch(p){case 1:case 2:case 3:var M=3;break;default:M=p}var B=p;p=M;try{return R()}finally{p=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,M){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var B=p;p=R;try{return M()}finally{p=B}},t.unstable_scheduleCallback=function(R,M,B){var k=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?k+B:k):B=k,R){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=B+W,R={id:d++,callback:M,priorityLevel:R,startTime:B,expirationTime:W,sortIndex:-1},B>k?(R.sortIndex=B,e(c,R),n(l)===null&&R===n(c)&&(g?(x(T),T=-1):g=!0,Q(E,B-k))):(R.sortIndex=W,e(l,R),y||m||(y=!0,F(S))),R},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(R){var M=p;return function(){var B=p;p=M;try{return R.apply(this,arguments)}finally{p=B}}}})(lE);aE.exports=lE;var nk=aE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cE=h,cn=nk;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uE=new Set,tl={};function bi(t,e){Eo(t,e),Eo(t+"Capture",e)}function Eo(t,e){for(tl[t]=e,t=0;t<e.length;t++)uE.add(e[t])}var Er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gp=Object.prototype.hasOwnProperty,rk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,t1={},n1={};function sk(t){return Gp.call(n1,t)?!0:Gp.call(t1,t)?!1:rk.test(t)?n1[t]=!0:(t1[t]=!0,!1)}function ik(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ok(t,e,n,r){if(e===null||typeof e>"u"||ik(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){wt[t]=new zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];wt[e]=new zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){wt[t]=new zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){wt[t]=new zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){wt[t]=new zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){wt[t]=new zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){wt[t]=new zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){wt[t]=new zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){wt[t]=new zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Gg=/[\-:]([a-z])/g;function Xg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Gg,Xg);wt[e]=new zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Gg,Xg);wt[e]=new zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Gg,Xg);wt[e]=new zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){wt[t]=new zt(t,1,!1,t.toLowerCase(),null,!1,!1)});wt.xlinkHref=new zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){wt[t]=new zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yg(t,e,n,r){var s=wt.hasOwnProperty(e)?wt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ok(e,n,s,r)&&(n=null),r||s===null?sk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Or=cE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pc=Symbol.for("react.element"),Ui=Symbol.for("react.portal"),Bi=Symbol.for("react.fragment"),Jg=Symbol.for("react.strict_mode"),Xp=Symbol.for("react.profiler"),dE=Symbol.for("react.provider"),hE=Symbol.for("react.context"),Zg=Symbol.for("react.forward_ref"),Yp=Symbol.for("react.suspense"),Jp=Symbol.for("react.suspense_list"),ey=Symbol.for("react.memo"),zr=Symbol.for("react.lazy"),fE=Symbol.for("react.offscreen"),r1=Symbol.iterator;function fa(t){return t===null||typeof t!="object"?null:(t=r1&&t[r1]||t["@@iterator"],typeof t=="function"?t:null)}var $e=Object.assign,Rf;function Ia(t){if(Rf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rf=e&&e[1]||""}return`
`+Rf+t}var Af=!1;function Cf(t,e){if(!t||Af)return"";Af=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Af=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ia(t):""}function ak(t){switch(t.tag){case 5:return Ia(t.type);case 16:return Ia("Lazy");case 13:return Ia("Suspense");case 19:return Ia("SuspenseList");case 0:case 2:case 15:return t=Cf(t.type,!1),t;case 11:return t=Cf(t.type.render,!1),t;case 1:return t=Cf(t.type,!0),t;default:return""}}function Zp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bi:return"Fragment";case Ui:return"Portal";case Xp:return"Profiler";case Jg:return"StrictMode";case Yp:return"Suspense";case Jp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hE:return(t.displayName||"Context")+".Consumer";case dE:return(t._context.displayName||"Context")+".Provider";case Zg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ey:return e=t.displayName||null,e!==null?e:Zp(t.type)||"Memo";case zr:e=t._payload,t=t._init;try{return Zp(t(e))}catch{}}return null}function lk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zp(e);case 8:return e===Jg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ys(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ck(t){var e=pE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nc(t){t._valueTracker||(t._valueTracker=ck(t))}function mE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=pE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Lu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function em(t,e){var n=e.checked;return $e({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function s1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ys(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gE(t,e){e=e.checked,e!=null&&Yg(t,"checked",e,!1)}function tm(t,e){gE(t,e);var n=ys(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?nm(t,e.type,n):e.hasOwnProperty("defaultValue")&&nm(t,e.type,ys(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function i1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function nm(t,e,n){(e!=="number"||Lu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ra=Array.isArray;function to(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ys(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function rm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return $e({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function o1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(L(92));if(Ra(n)){if(1<n.length)throw Error(L(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ys(n)}}function yE(t,e){var n=ys(e.value),r=ys(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function a1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var jc,xE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(jc=jc||document.createElement("div"),jc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=jc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function nl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ma={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uk=["Webkit","ms","Moz","O"];Object.keys(Ma).forEach(function(t){uk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ma[e]=Ma[t]})});function wE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ma.hasOwnProperty(t)&&Ma[t]?(""+e).trim():e+"px"}function _E(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=wE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var dk=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function im(t,e){if(e){if(dk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function om(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var am=null;function ty(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lm=null,no=null,ro=null;function l1(t){if(t=Gl(t)){if(typeof lm!="function")throw Error(L(280));var e=t.stateNode;e&&(e=Jd(e),lm(t.stateNode,t.type,e))}}function EE(t){no?ro?ro.push(t):ro=[t]:no=t}function SE(){if(no){var t=no,e=ro;if(ro=no=null,l1(t),e)for(t=0;t<e.length;t++)l1(e[t])}}function TE(t,e){return t(e)}function bE(){}var kf=!1;function IE(t,e,n){if(kf)return t(e,n);kf=!0;try{return TE(t,e,n)}finally{kf=!1,(no!==null||ro!==null)&&(bE(),SE())}}function rl(t,e){var n=t.stateNode;if(n===null)return null;var r=Jd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(L(231,e,typeof n));return n}var cm=!1;if(Er)try{var pa={};Object.defineProperty(pa,"passive",{get:function(){cm=!0}}),window.addEventListener("test",pa,pa),window.removeEventListener("test",pa,pa)}catch{cm=!1}function hk(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var $a=!1,Du=null,Mu=!1,um=null,fk={onError:function(t){$a=!0,Du=t}};function pk(t,e,n,r,s,i,o,a,l){$a=!1,Du=null,hk.apply(fk,arguments)}function mk(t,e,n,r,s,i,o,a,l){if(pk.apply(this,arguments),$a){if($a){var c=Du;$a=!1,Du=null}else throw Error(L(198));Mu||(Mu=!0,um=c)}}function Ii(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function RE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function c1(t){if(Ii(t)!==t)throw Error(L(188))}function gk(t){var e=t.alternate;if(!e){if(e=Ii(t),e===null)throw Error(L(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return c1(s),t;if(i===r)return c1(s),e;i=i.sibling}throw Error(L(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?t:e}function AE(t){return t=gk(t),t!==null?CE(t):null}function CE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=CE(t);if(e!==null)return e;t=t.sibling}return null}var kE=cn.unstable_scheduleCallback,u1=cn.unstable_cancelCallback,yk=cn.unstable_shouldYield,vk=cn.unstable_requestPaint,qe=cn.unstable_now,xk=cn.unstable_getCurrentPriorityLevel,ny=cn.unstable_ImmediatePriority,PE=cn.unstable_UserBlockingPriority,$u=cn.unstable_NormalPriority,wk=cn.unstable_LowPriority,NE=cn.unstable_IdlePriority,Qd=null,Gn=null;function _k(t){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(Qd,t,void 0,(t.current.flags&128)===128)}catch{}}var Ln=Math.clz32?Math.clz32:Tk,Ek=Math.log,Sk=Math.LN2;function Tk(t){return t>>>=0,t===0?32:31-(Ek(t)/Sk|0)|0}var Oc=64,Lc=4194304;function Aa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Fu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Aa(a):(i&=o,i!==0&&(r=Aa(i)))}else o=n&~s,o!==0?r=Aa(o):i!==0&&(r=Aa(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ln(e),s=1<<n,r|=t[n],e&=~s;return r}function bk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ik(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ln(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=bk(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function dm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jE(){var t=Oc;return Oc<<=1,!(Oc&4194240)&&(Oc=64),t}function Pf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Kl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ln(e),t[e]=n}function Rk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ln(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ry(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ln(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ve=0;function OE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var LE,sy,DE,ME,$E,hm=!1,Dc=[],ns=null,rs=null,ss=null,sl=new Map,il=new Map,Hr=[],Ak="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function d1(t,e){switch(t){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":ss=null;break;case"pointerover":case"pointerout":sl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":il.delete(e.pointerId)}}function ma(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Gl(e),e!==null&&sy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Ck(t,e,n,r,s){switch(e){case"focusin":return ns=ma(ns,t,e,n,r,s),!0;case"dragenter":return rs=ma(rs,t,e,n,r,s),!0;case"mouseover":return ss=ma(ss,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return sl.set(i,ma(sl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,il.set(i,ma(il.get(i)||null,t,e,n,r,s)),!0}return!1}function FE(t){var e=Ks(t.target);if(e!==null){var n=Ii(e);if(n!==null){if(e=n.tag,e===13){if(e=RE(n),e!==null){t.blockedOn=e,$E(t.priority,function(){DE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function uu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);am=r,n.target.dispatchEvent(r),am=null}else return e=Gl(n),e!==null&&sy(e),t.blockedOn=n,!1;e.shift()}return!0}function h1(t,e,n){uu(t)&&n.delete(e)}function kk(){hm=!1,ns!==null&&uu(ns)&&(ns=null),rs!==null&&uu(rs)&&(rs=null),ss!==null&&uu(ss)&&(ss=null),sl.forEach(h1),il.forEach(h1)}function ga(t,e){t.blockedOn===e&&(t.blockedOn=null,hm||(hm=!0,cn.unstable_scheduleCallback(cn.unstable_NormalPriority,kk)))}function ol(t){function e(s){return ga(s,t)}if(0<Dc.length){ga(Dc[0],t);for(var n=1;n<Dc.length;n++){var r=Dc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ns!==null&&ga(ns,t),rs!==null&&ga(rs,t),ss!==null&&ga(ss,t),sl.forEach(e),il.forEach(e),n=0;n<Hr.length;n++)r=Hr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Hr.length&&(n=Hr[0],n.blockedOn===null);)FE(n),n.blockedOn===null&&Hr.shift()}var so=Or.ReactCurrentBatchConfig,Vu=!0;function Pk(t,e,n,r){var s=ve,i=so.transition;so.transition=null;try{ve=1,iy(t,e,n,r)}finally{ve=s,so.transition=i}}function Nk(t,e,n,r){var s=ve,i=so.transition;so.transition=null;try{ve=4,iy(t,e,n,r)}finally{ve=s,so.transition=i}}function iy(t,e,n,r){if(Vu){var s=fm(t,e,n,r);if(s===null)Uf(t,e,r,Uu,n),d1(t,r);else if(Ck(s,t,e,n,r))r.stopPropagation();else if(d1(t,r),e&4&&-1<Ak.indexOf(t)){for(;s!==null;){var i=Gl(s);if(i!==null&&LE(i),i=fm(t,e,n,r),i===null&&Uf(t,e,r,Uu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Uf(t,e,r,null,n)}}var Uu=null;function fm(t,e,n,r){if(Uu=null,t=ty(r),t=Ks(t),t!==null)if(e=Ii(t),e===null)t=null;else if(n=e.tag,n===13){if(t=RE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Uu=t,null}function VE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xk()){case ny:return 1;case PE:return 4;case $u:case wk:return 16;case NE:return 536870912;default:return 16}default:return 16}}var Jr=null,oy=null,du=null;function UE(){if(du)return du;var t,e=oy,n=e.length,r,s="value"in Jr?Jr.value:Jr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return du=s.slice(t,1<r?1-r:void 0)}function hu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mc(){return!0}function f1(){return!1}function pn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Mc:f1,this.isPropagationStopped=f1,this}return $e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mc)},persist:function(){},isPersistent:Mc}),e}var qo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ay=pn(qo),Ql=$e({},qo,{view:0,detail:0}),jk=pn(Ql),Nf,jf,ya,Gd=$e({},Ql,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ly,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ya&&(ya&&t.type==="mousemove"?(Nf=t.screenX-ya.screenX,jf=t.screenY-ya.screenY):jf=Nf=0,ya=t),Nf)},movementY:function(t){return"movementY"in t?t.movementY:jf}}),p1=pn(Gd),Ok=$e({},Gd,{dataTransfer:0}),Lk=pn(Ok),Dk=$e({},Ql,{relatedTarget:0}),Of=pn(Dk),Mk=$e({},qo,{animationName:0,elapsedTime:0,pseudoElement:0}),$k=pn(Mk),Fk=$e({},qo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Vk=pn(Fk),Uk=$e({},qo,{data:0}),m1=pn(Uk),Bk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Wk[t])?!!e[t]:!1}function ly(){return Hk}var qk=$e({},Ql,{key:function(t){if(t.key){var e=Bk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=hu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ly,charCode:function(t){return t.type==="keypress"?hu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?hu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Kk=pn(qk),Qk=$e({},Gd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),g1=pn(Qk),Gk=$e({},Ql,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ly}),Xk=pn(Gk),Yk=$e({},qo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jk=pn(Yk),Zk=$e({},Gd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),eP=pn(Zk),tP=[9,13,27,32],cy=Er&&"CompositionEvent"in window,Fa=null;Er&&"documentMode"in document&&(Fa=document.documentMode);var nP=Er&&"TextEvent"in window&&!Fa,BE=Er&&(!cy||Fa&&8<Fa&&11>=Fa),y1=String.fromCharCode(32),v1=!1;function zE(t,e){switch(t){case"keyup":return tP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function WE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zi=!1;function rP(t,e){switch(t){case"compositionend":return WE(e);case"keypress":return e.which!==32?null:(v1=!0,y1);case"textInput":return t=e.data,t===y1&&v1?null:t;default:return null}}function sP(t,e){if(zi)return t==="compositionend"||!cy&&zE(t,e)?(t=UE(),du=oy=Jr=null,zi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return BE&&e.locale!=="ko"?null:e.data;default:return null}}var iP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!iP[t.type]:e==="textarea"}function HE(t,e,n,r){EE(r),e=Bu(e,"onChange"),0<e.length&&(n=new ay("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Va=null,al=null;function oP(t){nS(t,0)}function Xd(t){var e=qi(t);if(mE(e))return t}function aP(t,e){if(t==="change")return e}var qE=!1;if(Er){var Lf;if(Er){var Df="oninput"in document;if(!Df){var w1=document.createElement("div");w1.setAttribute("oninput","return;"),Df=typeof w1.oninput=="function"}Lf=Df}else Lf=!1;qE=Lf&&(!document.documentMode||9<document.documentMode)}function _1(){Va&&(Va.detachEvent("onpropertychange",KE),al=Va=null)}function KE(t){if(t.propertyName==="value"&&Xd(al)){var e=[];HE(e,al,t,ty(t)),IE(oP,e)}}function lP(t,e,n){t==="focusin"?(_1(),Va=e,al=n,Va.attachEvent("onpropertychange",KE)):t==="focusout"&&_1()}function cP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xd(al)}function uP(t,e){if(t==="click")return Xd(e)}function dP(t,e){if(t==="input"||t==="change")return Xd(e)}function hP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mn=typeof Object.is=="function"?Object.is:hP;function ll(t,e){if(Mn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Gp.call(e,s)||!Mn(t[s],e[s]))return!1}return!0}function E1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function S1(t,e){var n=E1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=E1(n)}}function QE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?QE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function GE(){for(var t=window,e=Lu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Lu(t.document)}return e}function uy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fP(t){var e=GE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&QE(n.ownerDocument.documentElement,n)){if(r!==null&&uy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=S1(n,i);var o=S1(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pP=Er&&"documentMode"in document&&11>=document.documentMode,Wi=null,pm=null,Ua=null,mm=!1;function T1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mm||Wi==null||Wi!==Lu(r)||(r=Wi,"selectionStart"in r&&uy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ua&&ll(Ua,r)||(Ua=r,r=Bu(pm,"onSelect"),0<r.length&&(e=new ay("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wi)))}function $c(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Hi={animationend:$c("Animation","AnimationEnd"),animationiteration:$c("Animation","AnimationIteration"),animationstart:$c("Animation","AnimationStart"),transitionend:$c("Transition","TransitionEnd")},Mf={},XE={};Er&&(XE=document.createElement("div").style,"AnimationEvent"in window||(delete Hi.animationend.animation,delete Hi.animationiteration.animation,delete Hi.animationstart.animation),"TransitionEvent"in window||delete Hi.transitionend.transition);function Yd(t){if(Mf[t])return Mf[t];if(!Hi[t])return t;var e=Hi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in XE)return Mf[t]=e[n];return t}var YE=Yd("animationend"),JE=Yd("animationiteration"),ZE=Yd("animationstart"),eS=Yd("transitionend"),tS=new Map,b1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ks(t,e){tS.set(t,e),bi(e,[t])}for(var $f=0;$f<b1.length;$f++){var Ff=b1[$f],mP=Ff.toLowerCase(),gP=Ff[0].toUpperCase()+Ff.slice(1);ks(mP,"on"+gP)}ks(YE,"onAnimationEnd");ks(JE,"onAnimationIteration");ks(ZE,"onAnimationStart");ks("dblclick","onDoubleClick");ks("focusin","onFocus");ks("focusout","onBlur");ks(eS,"onTransitionEnd");Eo("onMouseEnter",["mouseout","mouseover"]);Eo("onMouseLeave",["mouseout","mouseover"]);Eo("onPointerEnter",["pointerout","pointerover"]);Eo("onPointerLeave",["pointerout","pointerover"]);bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bi("onBeforeInput",["compositionend","keypress","textInput","paste"]);bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ca));function I1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,mk(r,e,void 0,t),t.currentTarget=null}function nS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;I1(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;I1(s,a,c),i=l}}}if(Mu)throw t=um,Mu=!1,um=null,t}function be(t,e){var n=e[wm];n===void 0&&(n=e[wm]=new Set);var r=t+"__bubble";n.has(r)||(rS(e,t,2,!1),n.add(r))}function Vf(t,e,n){var r=0;e&&(r|=4),rS(n,t,r,e)}var Fc="_reactListening"+Math.random().toString(36).slice(2);function cl(t){if(!t[Fc]){t[Fc]=!0,uE.forEach(function(n){n!=="selectionchange"&&(yP.has(n)||Vf(n,!1,t),Vf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fc]||(e[Fc]=!0,Vf("selectionchange",!1,e))}}function rS(t,e,n,r){switch(VE(e)){case 1:var s=Pk;break;case 4:s=Nk;break;default:s=iy}n=s.bind(null,e,n,t),s=void 0,!cm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Uf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ks(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}IE(function(){var c=i,d=ty(n),f=[];e:{var p=tS.get(t);if(p!==void 0){var m=ay,y=t;switch(t){case"keypress":if(hu(n)===0)break e;case"keydown":case"keyup":m=Kk;break;case"focusin":y="focus",m=Of;break;case"focusout":y="blur",m=Of;break;case"beforeblur":case"afterblur":m=Of;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=p1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Lk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Xk;break;case YE:case JE:case ZE:m=$k;break;case eS:m=Jk;break;case"scroll":m=jk;break;case"wheel":m=eP;break;case"copy":case"cut":case"paste":m=Vk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=g1}var g=(e&4)!==0,_=!g&&t==="scroll",x=g?p!==null?p+"Capture":null:p;g=[];for(var v=c,w;v!==null;){w=v;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,x!==null&&(E=rl(v,x),E!=null&&g.push(ul(v,E,w)))),_)break;v=v.return}0<g.length&&(p=new m(p,y,null,n,d),f.push({event:p,listeners:g}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==am&&(y=n.relatedTarget||n.fromElement)&&(Ks(y)||y[Sr]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=c,y=y?Ks(y):null,y!==null&&(_=Ii(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(g=p1,E="onMouseLeave",x="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=g1,E="onPointerLeave",x="onPointerEnter",v="pointer"),_=m==null?p:qi(m),w=y==null?p:qi(y),p=new g(E,v+"leave",m,n,d),p.target=_,p.relatedTarget=w,E=null,Ks(d)===c&&(g=new g(x,v+"enter",y,n,d),g.target=w,g.relatedTarget=_,E=g),_=E,m&&y)t:{for(g=m,x=y,v=0,w=g;w;w=ji(w))v++;for(w=0,E=x;E;E=ji(E))w++;for(;0<v-w;)g=ji(g),v--;for(;0<w-v;)x=ji(x),w--;for(;v--;){if(g===x||x!==null&&g===x.alternate)break t;g=ji(g),x=ji(x)}g=null}else g=null;m!==null&&R1(f,p,m,g,!1),y!==null&&_!==null&&R1(f,_,y,g,!0)}}e:{if(p=c?qi(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var S=aP;else if(x1(p))if(qE)S=dP;else{S=cP;var b=lP}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=uP);if(S&&(S=S(t,c))){HE(f,S,n,d);break e}b&&b(t,p,c),t==="focusout"&&(b=p._wrapperState)&&b.controlled&&p.type==="number"&&nm(p,"number",p.value)}switch(b=c?qi(c):window,t){case"focusin":(x1(b)||b.contentEditable==="true")&&(Wi=b,pm=c,Ua=null);break;case"focusout":Ua=pm=Wi=null;break;case"mousedown":mm=!0;break;case"contextmenu":case"mouseup":case"dragend":mm=!1,T1(f,n,d);break;case"selectionchange":if(pP)break;case"keydown":case"keyup":T1(f,n,d)}var I;if(cy)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else zi?zE(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(BE&&n.locale!=="ko"&&(zi||T!=="onCompositionStart"?T==="onCompositionEnd"&&zi&&(I=UE()):(Jr=d,oy="value"in Jr?Jr.value:Jr.textContent,zi=!0)),b=Bu(c,T),0<b.length&&(T=new m1(T,t,null,n,d),f.push({event:T,listeners:b}),I?T.data=I:(I=WE(n),I!==null&&(T.data=I)))),(I=nP?rP(t,n):sP(t,n))&&(c=Bu(c,"onBeforeInput"),0<c.length&&(d=new m1("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=I))}nS(f,e)})}function ul(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=rl(t,n),i!=null&&r.unshift(ul(t,i,s)),i=rl(t,e),i!=null&&r.push(ul(t,i,s))),t=t.return}return r}function ji(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function R1(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=rl(n,i),l!=null&&o.unshift(ul(n,l,a))):s||(l=rl(n,i),l!=null&&o.push(ul(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var vP=/\r\n?/g,xP=/\u0000|\uFFFD/g;function A1(t){return(typeof t=="string"?t:""+t).replace(vP,`
`).replace(xP,"")}function Vc(t,e,n){if(e=A1(e),A1(t)!==e&&n)throw Error(L(425))}function zu(){}var gm=null,ym=null;function vm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xm=typeof setTimeout=="function"?setTimeout:void 0,wP=typeof clearTimeout=="function"?clearTimeout:void 0,C1=typeof Promise=="function"?Promise:void 0,_P=typeof queueMicrotask=="function"?queueMicrotask:typeof C1<"u"?function(t){return C1.resolve(null).then(t).catch(EP)}:xm;function EP(t){setTimeout(function(){throw t})}function Bf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ol(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ol(e)}function is(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function k1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ko=Math.random().toString(36).slice(2),Bn="__reactFiber$"+Ko,dl="__reactProps$"+Ko,Sr="__reactContainer$"+Ko,wm="__reactEvents$"+Ko,SP="__reactListeners$"+Ko,TP="__reactHandles$"+Ko;function Ks(t){var e=t[Bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Sr]||n[Bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=k1(t);t!==null;){if(n=t[Bn])return n;t=k1(t)}return e}t=n,n=t.parentNode}return null}function Gl(t){return t=t[Bn]||t[Sr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function Jd(t){return t[dl]||null}var _m=[],Ki=-1;function Ps(t){return{current:t}}function Ae(t){0>Ki||(t.current=_m[Ki],_m[Ki]=null,Ki--)}function Te(t,e){Ki++,_m[Ki]=t.current,t.current=e}var vs={},jt=Ps(vs),Gt=Ps(!1),ai=vs;function So(t,e){var n=t.type.contextTypes;if(!n)return vs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Xt(t){return t=t.childContextTypes,t!=null}function Wu(){Ae(Gt),Ae(jt)}function P1(t,e,n){if(jt.current!==vs)throw Error(L(168));Te(jt,e),Te(Gt,n)}function sS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(L(108,lk(t)||"Unknown",s));return $e({},n,r)}function Hu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vs,ai=jt.current,Te(jt,t),Te(Gt,Gt.current),!0}function N1(t,e,n){var r=t.stateNode;if(!r)throw Error(L(169));n?(t=sS(t,e,ai),r.__reactInternalMemoizedMergedChildContext=t,Ae(Gt),Ae(jt),Te(jt,t)):Ae(Gt),Te(Gt,n)}var hr=null,Zd=!1,zf=!1;function iS(t){hr===null?hr=[t]:hr.push(t)}function bP(t){Zd=!0,iS(t)}function Ns(){if(!zf&&hr!==null){zf=!0;var t=0,e=ve;try{var n=hr;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hr=null,Zd=!1}catch(s){throw hr!==null&&(hr=hr.slice(t+1)),kE(ny,Ns),s}finally{ve=e,zf=!1}}return null}var Qi=[],Gi=0,qu=null,Ku=0,vn=[],xn=0,li=null,fr=1,pr="";function zs(t,e){Qi[Gi++]=Ku,Qi[Gi++]=qu,qu=t,Ku=e}function oS(t,e,n){vn[xn++]=fr,vn[xn++]=pr,vn[xn++]=li,li=t;var r=fr;t=pr;var s=32-Ln(r)-1;r&=~(1<<s),n+=1;var i=32-Ln(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,fr=1<<32-Ln(e)+s|n<<s|r,pr=i+t}else fr=1<<i|n<<s|r,pr=t}function dy(t){t.return!==null&&(zs(t,1),oS(t,1,0))}function hy(t){for(;t===qu;)qu=Qi[--Gi],Qi[Gi]=null,Ku=Qi[--Gi],Qi[Gi]=null;for(;t===li;)li=vn[--xn],vn[xn]=null,pr=vn[--xn],vn[xn]=null,fr=vn[--xn],vn[xn]=null}var an=null,rn=null,je=!1,Nn=null;function aS(t,e){var n=En(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function j1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,an=t,rn=is(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,an=t,rn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=li!==null?{id:fr,overflow:pr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=En(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,an=t,rn=null,!0):!1;default:return!1}}function Em(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sm(t){if(je){var e=rn;if(e){var n=e;if(!j1(t,e)){if(Em(t))throw Error(L(418));e=is(n.nextSibling);var r=an;e&&j1(t,e)?aS(r,n):(t.flags=t.flags&-4097|2,je=!1,an=t)}}else{if(Em(t))throw Error(L(418));t.flags=t.flags&-4097|2,je=!1,an=t}}}function O1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;an=t}function Uc(t){if(t!==an)return!1;if(!je)return O1(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vm(t.type,t.memoizedProps)),e&&(e=rn)){if(Em(t))throw lS(),Error(L(418));for(;e;)aS(t,e),e=is(e.nextSibling)}if(O1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){rn=is(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}rn=null}}else rn=an?is(t.stateNode.nextSibling):null;return!0}function lS(){for(var t=rn;t;)t=is(t.nextSibling)}function To(){rn=an=null,je=!1}function fy(t){Nn===null?Nn=[t]:Nn.push(t)}var IP=Or.ReactCurrentBatchConfig;function kn(t,e){if(t&&t.defaultProps){e=$e({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Qu=Ps(null),Gu=null,Xi=null,py=null;function my(){py=Xi=Gu=null}function gy(t){var e=Qu.current;Ae(Qu),t._currentValue=e}function Tm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function io(t,e){Gu=t,py=Xi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qt=!0),t.firstContext=null)}function In(t){var e=t._currentValue;if(py!==t)if(t={context:t,memoizedValue:e,next:null},Xi===null){if(Gu===null)throw Error(L(308));Xi=t,Gu.dependencies={lanes:0,firstContext:t}}else Xi=Xi.next=t;return e}var Qs=null;function yy(t){Qs===null?Qs=[t]:Qs.push(t)}function cS(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,yy(e)):(n.next=s.next,s.next=n),e.interleaved=n,Tr(t,r)}function Tr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wr=!1;function vy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function os(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Tr(t,n)}return s=r.interleaved,s===null?(e.next=e,yy(r)):(e.next=s.next,s.next=e),r.interleaved=e,Tr(t,n)}function fu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ry(t,n)}}function L1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xu(t,e,n,r){var s=t.updateQueue;Wr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,d=c=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,g=a;switch(p=e,m=n,g.tag){case 1:if(y=g.payload,typeof y=="function"){f=y.call(m,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,p=typeof y=="function"?y.call(m,f,p):y,p==null)break e;f=$e({},f,p);break e;case 2:Wr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=f):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(1);if(d===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ui|=o,t.lanes=o,t.memoizedState=f}}function D1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(L(191,s));s.call(r)}}}var dS=new cE.Component().refs;function bm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:$e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var eh={isMounted:function(t){return(t=t._reactInternals)?Ii(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Vt(),s=ls(t),i=xr(r,s);i.payload=e,n!=null&&(i.callback=n),e=os(t,i,s),e!==null&&(Dn(e,t,s,r),fu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Vt(),s=ls(t),i=xr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=os(t,i,s),e!==null&&(Dn(e,t,s,r),fu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Vt(),r=ls(t),s=xr(n,r);s.tag=2,e!=null&&(s.callback=e),e=os(t,s,r),e!==null&&(Dn(e,t,r,n),fu(e,t,r))}};function M1(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ll(n,r)||!ll(s,i):!0}function hS(t,e,n){var r=!1,s=vs,i=e.contextType;return typeof i=="object"&&i!==null?i=In(i):(s=Xt(e)?ai:jt.current,r=e.contextTypes,i=(r=r!=null)?So(t,s):vs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=eh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function $1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&eh.enqueueReplaceState(e,e.state,null)}function Im(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=dS,vy(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=In(i):(i=Xt(e)?ai:jt.current,s.context=So(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(bm(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&eh.enqueueReplaceState(s,s.state,null),Xu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function va(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===dS&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,t))}return t}function Bc(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function F1(t){var e=t._init;return e(t._payload)}function fS(t){function e(x,v){if(t){var w=x.deletions;w===null?(x.deletions=[v],x.flags|=16):w.push(v)}}function n(x,v){if(!t)return null;for(;v!==null;)e(x,v),v=v.sibling;return null}function r(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function s(x,v){return x=cs(x,v),x.index=0,x.sibling=null,x}function i(x,v,w){return x.index=w,t?(w=x.alternate,w!==null?(w=w.index,w<v?(x.flags|=2,v):w):(x.flags|=2,v)):(x.flags|=1048576,v)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,v,w,E){return v===null||v.tag!==6?(v=Xf(w,x.mode,E),v.return=x,v):(v=s(v,w),v.return=x,v)}function l(x,v,w,E){var S=w.type;return S===Bi?d(x,v,w.props.children,E,w.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===zr&&F1(S)===v.type)?(E=s(v,w.props),E.ref=va(x,v,w),E.return=x,E):(E=xu(w.type,w.key,w.props,null,x.mode,E),E.ref=va(x,v,w),E.return=x,E)}function c(x,v,w,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Yf(w,x.mode,E),v.return=x,v):(v=s(v,w.children||[]),v.return=x,v)}function d(x,v,w,E,S){return v===null||v.tag!==7?(v=ni(w,x.mode,E,S),v.return=x,v):(v=s(v,w),v.return=x,v)}function f(x,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Xf(""+v,x.mode,w),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Pc:return w=xu(v.type,v.key,v.props,null,x.mode,w),w.ref=va(x,null,v),w.return=x,w;case Ui:return v=Yf(v,x.mode,w),v.return=x,v;case zr:var E=v._init;return f(x,E(v._payload),w)}if(Ra(v)||fa(v))return v=ni(v,x.mode,w,null),v.return=x,v;Bc(x,v)}return null}function p(x,v,w,E){var S=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(x,v,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Pc:return w.key===S?l(x,v,w,E):null;case Ui:return w.key===S?c(x,v,w,E):null;case zr:return S=w._init,p(x,v,S(w._payload),E)}if(Ra(w)||fa(w))return S!==null?null:d(x,v,w,E,null);Bc(x,w)}return null}function m(x,v,w,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return x=x.get(w)||null,a(v,x,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Pc:return x=x.get(E.key===null?w:E.key)||null,l(v,x,E,S);case Ui:return x=x.get(E.key===null?w:E.key)||null,c(v,x,E,S);case zr:var b=E._init;return m(x,v,w,b(E._payload),S)}if(Ra(E)||fa(E))return x=x.get(w)||null,d(v,x,E,S,null);Bc(v,E)}return null}function y(x,v,w,E){for(var S=null,b=null,I=v,T=v=0,A=null;I!==null&&T<w.length;T++){I.index>T?(A=I,I=null):A=I.sibling;var C=p(x,I,w[T],E);if(C===null){I===null&&(I=A);break}t&&I&&C.alternate===null&&e(x,I),v=i(C,v,T),b===null?S=C:b.sibling=C,b=C,I=A}if(T===w.length)return n(x,I),je&&zs(x,T),S;if(I===null){for(;T<w.length;T++)I=f(x,w[T],E),I!==null&&(v=i(I,v,T),b===null?S=I:b.sibling=I,b=I);return je&&zs(x,T),S}for(I=r(x,I);T<w.length;T++)A=m(I,x,T,w[T],E),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?T:A.key),v=i(A,v,T),b===null?S=A:b.sibling=A,b=A);return t&&I.forEach(function(O){return e(x,O)}),je&&zs(x,T),S}function g(x,v,w,E){var S=fa(w);if(typeof S!="function")throw Error(L(150));if(w=S.call(w),w==null)throw Error(L(151));for(var b=S=null,I=v,T=v=0,A=null,C=w.next();I!==null&&!C.done;T++,C=w.next()){I.index>T?(A=I,I=null):A=I.sibling;var O=p(x,I,C.value,E);if(O===null){I===null&&(I=A);break}t&&I&&O.alternate===null&&e(x,I),v=i(O,v,T),b===null?S=O:b.sibling=O,b=O,I=A}if(C.done)return n(x,I),je&&zs(x,T),S;if(I===null){for(;!C.done;T++,C=w.next())C=f(x,C.value,E),C!==null&&(v=i(C,v,T),b===null?S=C:b.sibling=C,b=C);return je&&zs(x,T),S}for(I=r(x,I);!C.done;T++,C=w.next())C=m(I,x,T,C.value,E),C!==null&&(t&&C.alternate!==null&&I.delete(C.key===null?T:C.key),v=i(C,v,T),b===null?S=C:b.sibling=C,b=C);return t&&I.forEach(function(z){return e(x,z)}),je&&zs(x,T),S}function _(x,v,w,E){if(typeof w=="object"&&w!==null&&w.type===Bi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Pc:e:{for(var S=w.key,b=v;b!==null;){if(b.key===S){if(S=w.type,S===Bi){if(b.tag===7){n(x,b.sibling),v=s(b,w.props.children),v.return=x,x=v;break e}}else if(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===zr&&F1(S)===b.type){n(x,b.sibling),v=s(b,w.props),v.ref=va(x,b,w),v.return=x,x=v;break e}n(x,b);break}else e(x,b);b=b.sibling}w.type===Bi?(v=ni(w.props.children,x.mode,E,w.key),v.return=x,x=v):(E=xu(w.type,w.key,w.props,null,x.mode,E),E.ref=va(x,v,w),E.return=x,x=E)}return o(x);case Ui:e:{for(b=w.key;v!==null;){if(v.key===b)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(x,v.sibling),v=s(v,w.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else e(x,v);v=v.sibling}v=Yf(w,x.mode,E),v.return=x,x=v}return o(x);case zr:return b=w._init,_(x,v,b(w._payload),E)}if(Ra(w))return y(x,v,w,E);if(fa(w))return g(x,v,w,E);Bc(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(x,v.sibling),v=s(v,w),v.return=x,x=v):(n(x,v),v=Xf(w,x.mode,E),v.return=x,x=v),o(x)):n(x,v)}return _}var bo=fS(!0),pS=fS(!1),Xl={},Xn=Ps(Xl),hl=Ps(Xl),fl=Ps(Xl);function Gs(t){if(t===Xl)throw Error(L(174));return t}function xy(t,e){switch(Te(fl,e),Te(hl,t),Te(Xn,Xl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:sm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=sm(e,t)}Ae(Xn),Te(Xn,e)}function Io(){Ae(Xn),Ae(hl),Ae(fl)}function mS(t){Gs(fl.current);var e=Gs(Xn.current),n=sm(e,t.type);e!==n&&(Te(hl,t),Te(Xn,n))}function wy(t){hl.current===t&&(Ae(Xn),Ae(hl))}var Le=Ps(0);function Yu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wf=[];function _y(){for(var t=0;t<Wf.length;t++)Wf[t]._workInProgressVersionPrimary=null;Wf.length=0}var pu=Or.ReactCurrentDispatcher,Hf=Or.ReactCurrentBatchConfig,ci=0,Me=null,nt=null,at=null,Ju=!1,Ba=!1,pl=0,RP=0;function _t(){throw Error(L(321))}function Ey(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Mn(t[n],e[n]))return!1;return!0}function Sy(t,e,n,r,s,i){if(ci=i,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,pu.current=t===null||t.memoizedState===null?PP:NP,t=n(r,s),Ba){i=0;do{if(Ba=!1,pl=0,25<=i)throw Error(L(301));i+=1,at=nt=null,e.updateQueue=null,pu.current=jP,t=n(r,s)}while(Ba)}if(pu.current=Zu,e=nt!==null&&nt.next!==null,ci=0,at=nt=Me=null,Ju=!1,e)throw Error(L(300));return t}function Ty(){var t=pl!==0;return pl=0,t}function Un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?Me.memoizedState=at=t:at=at.next=t,at}function Rn(){if(nt===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var e=at===null?Me.memoizedState:at.next;if(e!==null)at=e,nt=t;else{if(t===null)throw Error(L(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},at===null?Me.memoizedState=at=t:at=at.next=t}return at}function ml(t,e){return typeof e=="function"?e(t):e}function qf(t){var e=Rn(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=nt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((ci&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Me.lanes|=d,ui|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Mn(r,e.memoizedState)||(Qt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Me.lanes|=i,ui|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Kf(t){var e=Rn(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Mn(i,e.memoizedState)||(Qt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function gS(){}function yS(t,e){var n=Me,r=Rn(),s=e(),i=!Mn(r.memoizedState,s);if(i&&(r.memoizedState=s,Qt=!0),r=r.queue,by(wS.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||at!==null&&at.memoizedState.tag&1){if(n.flags|=2048,gl(9,xS.bind(null,n,r,s,e),void 0,null),lt===null)throw Error(L(349));ci&30||vS(n,e,s)}return s}function vS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xS(t,e,n,r){e.value=n,e.getSnapshot=r,_S(e)&&ES(t)}function wS(t,e,n){return n(function(){_S(e)&&ES(t)})}function _S(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Mn(t,n)}catch{return!0}}function ES(t){var e=Tr(t,1);e!==null&&Dn(e,t,1,-1)}function V1(t){var e=Un();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:t},e.queue=t,t=t.dispatch=kP.bind(null,Me,t),[e.memoizedState,t]}function gl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function SS(){return Rn().memoizedState}function mu(t,e,n,r){var s=Un();Me.flags|=t,s.memoizedState=gl(1|e,n,void 0,r===void 0?null:r)}function th(t,e,n,r){var s=Rn();r=r===void 0?null:r;var i=void 0;if(nt!==null){var o=nt.memoizedState;if(i=o.destroy,r!==null&&Ey(r,o.deps)){s.memoizedState=gl(e,n,i,r);return}}Me.flags|=t,s.memoizedState=gl(1|e,n,i,r)}function U1(t,e){return mu(8390656,8,t,e)}function by(t,e){return th(2048,8,t,e)}function TS(t,e){return th(4,2,t,e)}function bS(t,e){return th(4,4,t,e)}function IS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function RS(t,e,n){return n=n!=null?n.concat([t]):null,th(4,4,IS.bind(null,e,t),n)}function Iy(){}function AS(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ey(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function CS(t,e){var n=Rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ey(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function kS(t,e,n){return ci&21?(Mn(n,e)||(n=jE(),Me.lanes|=n,ui|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=n)}function AP(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=Hf.transition;Hf.transition={};try{t(!1),e()}finally{ve=n,Hf.transition=r}}function PS(){return Rn().memoizedState}function CP(t,e,n){var r=ls(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},NS(t))jS(e,n);else if(n=cS(t,e,n,r),n!==null){var s=Vt();Dn(n,t,r,s),OS(n,e,r)}}function kP(t,e,n){var r=ls(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(NS(t))jS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Mn(a,o)){var l=e.interleaved;l===null?(s.next=s,yy(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=cS(t,e,s,r),n!==null&&(s=Vt(),Dn(n,t,r,s),OS(n,e,r))}}function NS(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function jS(t,e){Ba=Ju=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function OS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ry(t,n)}}var Zu={readContext:In,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useInsertionEffect:_t,useLayoutEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useMutableSource:_t,useSyncExternalStore:_t,useId:_t,unstable_isNewReconciler:!1},PP={readContext:In,useCallback:function(t,e){return Un().memoizedState=[t,e===void 0?null:e],t},useContext:In,useEffect:U1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,mu(4194308,4,IS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return mu(4194308,4,t,e)},useInsertionEffect:function(t,e){return mu(4,2,t,e)},useMemo:function(t,e){var n=Un();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Un();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=CP.bind(null,Me,t),[r.memoizedState,t]},useRef:function(t){var e=Un();return t={current:t},e.memoizedState=t},useState:V1,useDebugValue:Iy,useDeferredValue:function(t){return Un().memoizedState=t},useTransition:function(){var t=V1(!1),e=t[0];return t=AP.bind(null,t[1]),Un().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Me,s=Un();if(je){if(n===void 0)throw Error(L(407));n=n()}else{if(n=e(),lt===null)throw Error(L(349));ci&30||vS(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,U1(wS.bind(null,r,i,t),[t]),r.flags|=2048,gl(9,xS.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Un(),e=lt.identifierPrefix;if(je){var n=pr,r=fr;n=(r&~(1<<32-Ln(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=pl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=RP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},NP={readContext:In,useCallback:AS,useContext:In,useEffect:by,useImperativeHandle:RS,useInsertionEffect:TS,useLayoutEffect:bS,useMemo:CS,useReducer:qf,useRef:SS,useState:function(){return qf(ml)},useDebugValue:Iy,useDeferredValue:function(t){var e=Rn();return kS(e,nt.memoizedState,t)},useTransition:function(){var t=qf(ml)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:gS,useSyncExternalStore:yS,useId:PS,unstable_isNewReconciler:!1},jP={readContext:In,useCallback:AS,useContext:In,useEffect:by,useImperativeHandle:RS,useInsertionEffect:TS,useLayoutEffect:bS,useMemo:CS,useReducer:Kf,useRef:SS,useState:function(){return Kf(ml)},useDebugValue:Iy,useDeferredValue:function(t){var e=Rn();return nt===null?e.memoizedState=t:kS(e,nt.memoizedState,t)},useTransition:function(){var t=Kf(ml)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:gS,useSyncExternalStore:yS,useId:PS,unstable_isNewReconciler:!1};function Ro(t,e){try{var n="",r=e;do n+=ak(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Qf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Rm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var OP=typeof WeakMap=="function"?WeakMap:Map;function LS(t,e,n){n=xr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){td||(td=!0,Mm=r),Rm(t,e)},n}function DS(t,e,n){n=xr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Rm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Rm(t,e),typeof r!="function"&&(as===null?as=new Set([this]):as.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function B1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new OP;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=QP.bind(null,t,e,n),e.then(t,t))}function z1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function W1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xr(-1,1),e.tag=2,os(n,e,1))),n.lanes|=1),t)}var LP=Or.ReactCurrentOwner,Qt=!1;function $t(t,e,n,r){e.child=t===null?pS(e,null,n,r):bo(e,t.child,n,r)}function H1(t,e,n,r,s){n=n.render;var i=e.ref;return io(e,s),r=Sy(t,e,n,r,i,s),n=Ty(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,br(t,e,s)):(je&&n&&dy(e),e.flags|=1,$t(t,e,r,s),e.child)}function q1(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Oy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,MS(t,e,i,r,s)):(t=xu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ll,n(o,r)&&t.ref===e.ref)return br(t,e,s)}return e.flags|=1,t=cs(i,r),t.ref=e.ref,t.return=e,e.child=t}function MS(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ll(i,r)&&t.ref===e.ref)if(Qt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Qt=!0);else return e.lanes=t.lanes,br(t,e,s)}return Am(t,e,n,r,s)}function $S(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Ji,nn),nn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(Ji,nn),nn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(Ji,nn),nn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(Ji,nn),nn|=r;return $t(t,e,s,n),e.child}function FS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Am(t,e,n,r,s){var i=Xt(n)?ai:jt.current;return i=So(e,i),io(e,s),n=Sy(t,e,n,r,i,s),r=Ty(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,br(t,e,s)):(je&&r&&dy(e),e.flags|=1,$t(t,e,n,s),e.child)}function K1(t,e,n,r,s){if(Xt(n)){var i=!0;Hu(e)}else i=!1;if(io(e,s),e.stateNode===null)gu(t,e),hS(e,n,r),Im(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=In(c):(c=Xt(n)?ai:jt.current,c=So(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&$1(e,o,r,c),Wr=!1;var p=e.memoizedState;o.state=p,Xu(e,r,o,s),l=e.memoizedState,a!==r||p!==l||Gt.current||Wr?(typeof d=="function"&&(bm(e,n,d,r),l=e.memoizedState),(a=Wr||M1(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,uS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:kn(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=In(l):(l=Xt(n)?ai:jt.current,l=So(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&$1(e,o,r,l),Wr=!1,p=e.memoizedState,o.state=p,Xu(e,r,o,s);var y=e.memoizedState;a!==f||p!==y||Gt.current||Wr?(typeof m=="function"&&(bm(e,n,m,r),y=e.memoizedState),(c=Wr||M1(e,n,c,r,p,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Cm(t,e,n,r,i,s)}function Cm(t,e,n,r,s,i){FS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&N1(e,n,!1),br(t,e,i);r=e.stateNode,LP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=bo(e,t.child,null,i),e.child=bo(e,null,a,i)):$t(t,e,a,i),e.memoizedState=r.state,s&&N1(e,n,!0),e.child}function VS(t){var e=t.stateNode;e.pendingContext?P1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&P1(t,e.context,!1),xy(t,e.containerInfo)}function Q1(t,e,n,r,s){return To(),fy(s),e.flags|=256,$t(t,e,n,r),e.child}var km={dehydrated:null,treeContext:null,retryLane:0};function Pm(t){return{baseLanes:t,cachePool:null,transitions:null}}function US(t,e,n){var r=e.pendingProps,s=Le.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Te(Le,s&1),t===null)return Sm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=sh(o,r,0,null),t=ni(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Pm(n),e.memoizedState=km,t):Ry(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return DP(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=cs(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=cs(a,i):(i=ni(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Pm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=km,r}return i=t.child,t=i.sibling,r=cs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ry(t,e){return e=sh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zc(t,e,n,r){return r!==null&&fy(r),bo(e,t.child,null,n),t=Ry(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function DP(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Qf(Error(L(422))),zc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=sh({mode:"visible",children:r.children},s,0,null),i=ni(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&bo(e,t.child,null,o),e.child.memoizedState=Pm(o),e.memoizedState=km,i);if(!(e.mode&1))return zc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(L(419)),r=Qf(i,r,void 0),zc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Qt||a){if(r=lt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Tr(t,s),Dn(r,t,s,-1))}return jy(),r=Qf(Error(L(421))),zc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=GP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,rn=is(s.nextSibling),an=e,je=!0,Nn=null,t!==null&&(vn[xn++]=fr,vn[xn++]=pr,vn[xn++]=li,fr=t.id,pr=t.overflow,li=e),e=Ry(e,r.children),e.flags|=4096,e)}function G1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Tm(t.return,e,n)}function Gf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function BS(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if($t(t,e,r.children,n),r=Le.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&G1(t,n,e);else if(t.tag===19)G1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Le,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Yu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Gf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Yu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Gf(e,!0,n,null,i);break;case"together":Gf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function gu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function br(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ui|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,n=cs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=cs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function MP(t,e,n){switch(e.tag){case 3:VS(e),To();break;case 5:mS(e);break;case 1:Xt(e.type)&&Hu(e);break;case 4:xy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Te(Qu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Le,Le.current&1),e.flags|=128,null):n&e.child.childLanes?US(t,e,n):(Te(Le,Le.current&1),t=br(t,e,n),t!==null?t.sibling:null);Te(Le,Le.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return BS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(Le,Le.current),r)break;return null;case 22:case 23:return e.lanes=0,$S(t,e,n)}return br(t,e,n)}var zS,Nm,WS,HS;zS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Nm=function(){};WS=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Gs(Xn.current);var i=null;switch(n){case"input":s=em(t,s),r=em(t,r),i=[];break;case"select":s=$e({},s,{value:void 0}),r=$e({},r,{value:void 0}),i=[];break;case"textarea":s=rm(t,s),r=rm(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=zu)}im(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(tl.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(tl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&be("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};HS=function(t,e,n,r){n!==r&&(e.flags|=4)};function xa(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $P(t,e,n){var r=e.pendingProps;switch(hy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(e),null;case 1:return Xt(e.type)&&Wu(),Et(e),null;case 3:return r=e.stateNode,Io(),Ae(Gt),Ae(jt),_y(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Uc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nn!==null&&(Vm(Nn),Nn=null))),Nm(t,e),Et(e),null;case 5:wy(e);var s=Gs(fl.current);if(n=e.type,t!==null&&e.stateNode!=null)WS(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(L(166));return Et(e),null}if(t=Gs(Xn.current),Uc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Bn]=e,r[dl]=i,t=(e.mode&1)!==0,n){case"dialog":be("cancel",r),be("close",r);break;case"iframe":case"object":case"embed":be("load",r);break;case"video":case"audio":for(s=0;s<Ca.length;s++)be(Ca[s],r);break;case"source":be("error",r);break;case"img":case"image":case"link":be("error",r),be("load",r);break;case"details":be("toggle",r);break;case"input":s1(r,i),be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},be("invalid",r);break;case"textarea":o1(r,i),be("invalid",r)}im(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Vc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Vc(r.textContent,a,t),s=["children",""+a]):tl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&be("scroll",r)}switch(n){case"input":Nc(r),i1(r,i,!0);break;case"textarea":Nc(r),a1(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=zu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Bn]=e,t[dl]=r,zS(t,e,!1,!1),e.stateNode=t;e:{switch(o=om(n,r),n){case"dialog":be("cancel",t),be("close",t),s=r;break;case"iframe":case"object":case"embed":be("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ca.length;s++)be(Ca[s],t);s=r;break;case"source":be("error",t),s=r;break;case"img":case"image":case"link":be("error",t),be("load",t),s=r;break;case"details":be("toggle",t),s=r;break;case"input":s1(t,r),s=em(t,r),be("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=$e({},r,{value:void 0}),be("invalid",t);break;case"textarea":o1(t,r),s=rm(t,r),be("invalid",t);break;default:s=r}im(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?_E(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&xE(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&nl(t,l):typeof l=="number"&&nl(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(tl.hasOwnProperty(i)?l!=null&&i==="onScroll"&&be("scroll",t):l!=null&&Yg(t,i,l,o))}switch(n){case"input":Nc(t),i1(t,r,!1);break;case"textarea":Nc(t),a1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ys(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?to(t,!!r.multiple,i,!1):r.defaultValue!=null&&to(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=zu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Et(e),null;case 6:if(t&&e.stateNode!=null)HS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(L(166));if(n=Gs(fl.current),Gs(Xn.current),Uc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Bn]=e,(i=r.nodeValue!==n)&&(t=an,t!==null))switch(t.tag){case 3:Vc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bn]=e,e.stateNode=r}return Et(e),null;case 13:if(Ae(Le),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&rn!==null&&e.mode&1&&!(e.flags&128))lS(),To(),e.flags|=98560,i=!1;else if(i=Uc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(L(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(L(317));i[Bn]=e}else To(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Et(e),i=!1}else Nn!==null&&(Vm(Nn),Nn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Le.current&1?rt===0&&(rt=3):jy())),e.updateQueue!==null&&(e.flags|=4),Et(e),null);case 4:return Io(),Nm(t,e),t===null&&cl(e.stateNode.containerInfo),Et(e),null;case 10:return gy(e.type._context),Et(e),null;case 17:return Xt(e.type)&&Wu(),Et(e),null;case 19:if(Ae(Le),i=e.memoizedState,i===null)return Et(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)xa(i,!1);else{if(rt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Yu(t),o!==null){for(e.flags|=128,xa(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Le,Le.current&1|2),e.child}t=t.sibling}i.tail!==null&&qe()>Ao&&(e.flags|=128,r=!0,xa(i,!1),e.lanes=4194304)}else{if(!r)if(t=Yu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),xa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!je)return Et(e),null}else 2*qe()-i.renderingStartTime>Ao&&n!==1073741824&&(e.flags|=128,r=!0,xa(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=qe(),e.sibling=null,n=Le.current,Te(Le,r?n&1|2:n&1),e):(Et(e),null);case 22:case 23:return Ny(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?nn&1073741824&&(Et(e),e.subtreeFlags&6&&(e.flags|=8192)):Et(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function FP(t,e){switch(hy(e),e.tag){case 1:return Xt(e.type)&&Wu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Io(),Ae(Gt),Ae(jt),_y(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wy(e),null;case 13:if(Ae(Le),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));To()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Le),null;case 4:return Io(),null;case 10:return gy(e.type._context),null;case 22:case 23:return Ny(),null;case 24:return null;default:return null}}var Wc=!1,Rt=!1,VP=typeof WeakSet=="function"?WeakSet:Set,H=null;function Yi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ue(t,e,r)}else n.current=null}function jm(t,e,n){try{n()}catch(r){Ue(t,e,r)}}var X1=!1;function UP(t,e){if(gm=Vu,t=GE(),uy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,f=t,p=null;t:for(;;){for(var m;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++d===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ym={focusedElem:t,selectionRange:n},Vu=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,_=y.memoizedState,x=e.stateNode,v=x.getSnapshotBeforeUpdate(e.elementType===e.type?g:kn(e.type,g),_);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(E){Ue(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return y=X1,X1=!1,y}function za(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&jm(e,n,i)}s=s.next}while(s!==r)}}function nh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Om(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function qS(t){var e=t.alternate;e!==null&&(t.alternate=null,qS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bn],delete e[dl],delete e[wm],delete e[SP],delete e[TP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function KS(t){return t.tag===5||t.tag===3||t.tag===4}function Y1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||KS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=zu));else if(r!==4&&(t=t.child,t!==null))for(Lm(t,e,n),t=t.sibling;t!==null;)Lm(t,e,n),t=t.sibling}function Dm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Dm(t,e,n),t=t.sibling;t!==null;)Dm(t,e,n),t=t.sibling}var ft=null,Pn=!1;function Fr(t,e,n){for(n=n.child;n!==null;)QS(t,e,n),n=n.sibling}function QS(t,e,n){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(Qd,n)}catch{}switch(n.tag){case 5:Rt||Yi(n,e);case 6:var r=ft,s=Pn;ft=null,Fr(t,e,n),ft=r,Pn=s,ft!==null&&(Pn?(t=ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ft.removeChild(n.stateNode));break;case 18:ft!==null&&(Pn?(t=ft,n=n.stateNode,t.nodeType===8?Bf(t.parentNode,n):t.nodeType===1&&Bf(t,n),ol(t)):Bf(ft,n.stateNode));break;case 4:r=ft,s=Pn,ft=n.stateNode.containerInfo,Pn=!0,Fr(t,e,n),ft=r,Pn=s;break;case 0:case 11:case 14:case 15:if(!Rt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&jm(n,e,o),s=s.next}while(s!==r)}Fr(t,e,n);break;case 1:if(!Rt&&(Yi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ue(n,e,a)}Fr(t,e,n);break;case 21:Fr(t,e,n);break;case 22:n.mode&1?(Rt=(r=Rt)||n.memoizedState!==null,Fr(t,e,n),Rt=r):Fr(t,e,n);break;default:Fr(t,e,n)}}function J1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new VP),e.forEach(function(r){var s=XP.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Cn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ft=a.stateNode,Pn=!1;break e;case 3:ft=a.stateNode.containerInfo,Pn=!0;break e;case 4:ft=a.stateNode.containerInfo,Pn=!0;break e}a=a.return}if(ft===null)throw Error(L(160));QS(i,o,s),ft=null,Pn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Ue(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GS(e,t),e=e.sibling}function GS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cn(e,t),Vn(t),r&4){try{za(3,t,t.return),nh(3,t)}catch(g){Ue(t,t.return,g)}try{za(5,t,t.return)}catch(g){Ue(t,t.return,g)}}break;case 1:Cn(e,t),Vn(t),r&512&&n!==null&&Yi(n,n.return);break;case 5:if(Cn(e,t),Vn(t),r&512&&n!==null&&Yi(n,n.return),t.flags&32){var s=t.stateNode;try{nl(s,"")}catch(g){Ue(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&gE(s,i),om(a,o);var c=om(a,i);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?_E(s,f):d==="dangerouslySetInnerHTML"?xE(s,f):d==="children"?nl(s,f):Yg(s,d,f,c)}switch(a){case"input":tm(s,i);break;case"textarea":yE(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?to(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?to(s,!!i.multiple,i.defaultValue,!0):to(s,!!i.multiple,i.multiple?[]:"",!1))}s[dl]=i}catch(g){Ue(t,t.return,g)}}break;case 6:if(Cn(e,t),Vn(t),r&4){if(t.stateNode===null)throw Error(L(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Ue(t,t.return,g)}}break;case 3:if(Cn(e,t),Vn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ol(e.containerInfo)}catch(g){Ue(t,t.return,g)}break;case 4:Cn(e,t),Vn(t);break;case 13:Cn(e,t),Vn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ky=qe())),r&4&&J1(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Rt=(c=Rt)||d,Cn(e,t),Rt=c):Cn(e,t),Vn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(H=t,d=t.child;d!==null;){for(f=H=d;H!==null;){switch(p=H,m=p.child,p.tag){case 0:case 11:case 14:case 15:za(4,p,p.return);break;case 1:Yi(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){Ue(r,n,g)}}break;case 5:Yi(p,p.return);break;case 22:if(p.memoizedState!==null){ex(f);continue}}m!==null?(m.return=p,H=m):ex(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=wE("display",o))}catch(g){Ue(t,t.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(g){Ue(t,t.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Cn(e,t),Vn(t),r&4&&J1(t);break;case 21:break;default:Cn(e,t),Vn(t)}}function Vn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(KS(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(nl(s,""),r.flags&=-33);var i=Y1(t);Dm(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Y1(t);Lm(t,a,o);break;default:throw Error(L(161))}}catch(l){Ue(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function BP(t,e,n){H=t,XS(t)}function XS(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Wc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Rt;a=Wc;var c=Rt;if(Wc=o,(Rt=l)&&!c)for(H=s;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?tx(s):l!==null?(l.return=o,H=l):tx(s);for(;i!==null;)H=i,XS(i),i=i.sibling;H=s,Wc=a,Rt=c}Z1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):Z1(t)}}function Z1(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Rt||nh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Rt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:kn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&D1(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}D1(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&ol(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}Rt||e.flags&512&&Om(e)}catch(p){Ue(e,e.return,p)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function ex(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function tx(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{nh(4,e)}catch(l){Ue(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Ue(e,s,l)}}var i=e.return;try{Om(e)}catch(l){Ue(e,i,l)}break;case 5:var o=e.return;try{Om(e)}catch(l){Ue(e,o,l)}}}catch(l){Ue(e,e.return,l)}if(e===t){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var zP=Math.ceil,ed=Or.ReactCurrentDispatcher,Ay=Or.ReactCurrentOwner,Sn=Or.ReactCurrentBatchConfig,fe=0,lt=null,Je=null,vt=0,nn=0,Ji=Ps(0),rt=0,yl=null,ui=0,rh=0,Cy=0,Wa=null,qt=null,ky=0,Ao=1/0,dr=null,td=!1,Mm=null,as=null,Hc=!1,Zr=null,nd=0,Ha=0,$m=null,yu=-1,vu=0;function Vt(){return fe&6?qe():yu!==-1?yu:yu=qe()}function ls(t){return t.mode&1?fe&2&&vt!==0?vt&-vt:IP.transition!==null?(vu===0&&(vu=jE()),vu):(t=ve,t!==0||(t=window.event,t=t===void 0?16:VE(t.type)),t):1}function Dn(t,e,n,r){if(50<Ha)throw Ha=0,$m=null,Error(L(185));Kl(t,n,r),(!(fe&2)||t!==lt)&&(t===lt&&(!(fe&2)&&(rh|=n),rt===4&&qr(t,vt)),Yt(t,r),n===1&&fe===0&&!(e.mode&1)&&(Ao=qe()+500,Zd&&Ns()))}function Yt(t,e){var n=t.callbackNode;Ik(t,e);var r=Fu(t,t===lt?vt:0);if(r===0)n!==null&&u1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&u1(n),e===1)t.tag===0?bP(nx.bind(null,t)):iS(nx.bind(null,t)),_P(function(){!(fe&6)&&Ns()}),n=null;else{switch(OE(r)){case 1:n=ny;break;case 4:n=PE;break;case 16:n=$u;break;case 536870912:n=NE;break;default:n=$u}n=sT(n,YS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function YS(t,e){if(yu=-1,vu=0,fe&6)throw Error(L(327));var n=t.callbackNode;if(oo()&&t.callbackNode!==n)return null;var r=Fu(t,t===lt?vt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=rd(t,r);else{e=r;var s=fe;fe|=2;var i=ZS();(lt!==t||vt!==e)&&(dr=null,Ao=qe()+500,ti(t,e));do try{qP();break}catch(a){JS(t,a)}while(1);my(),ed.current=i,fe=s,Je!==null?e=0:(lt=null,vt=0,e=rt)}if(e!==0){if(e===2&&(s=dm(t),s!==0&&(r=s,e=Fm(t,s))),e===1)throw n=yl,ti(t,0),qr(t,r),Yt(t,qe()),n;if(e===6)qr(t,r);else{if(s=t.current.alternate,!(r&30)&&!WP(s)&&(e=rd(t,r),e===2&&(i=dm(t),i!==0&&(r=i,e=Fm(t,i))),e===1))throw n=yl,ti(t,0),qr(t,r),Yt(t,qe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(L(345));case 2:Ws(t,qt,dr);break;case 3:if(qr(t,r),(r&130023424)===r&&(e=ky+500-qe(),10<e)){if(Fu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Vt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=xm(Ws.bind(null,t,qt,dr),e);break}Ws(t,qt,dr);break;case 4:if(qr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ln(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zP(r/1960))-r,10<r){t.timeoutHandle=xm(Ws.bind(null,t,qt,dr),r);break}Ws(t,qt,dr);break;case 5:Ws(t,qt,dr);break;default:throw Error(L(329))}}}return Yt(t,qe()),t.callbackNode===n?YS.bind(null,t):null}function Fm(t,e){var n=Wa;return t.current.memoizedState.isDehydrated&&(ti(t,e).flags|=256),t=rd(t,e),t!==2&&(e=qt,qt=n,e!==null&&Vm(e)),t}function Vm(t){qt===null?qt=t:qt.push.apply(qt,t)}function WP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Mn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qr(t,e){for(e&=~Cy,e&=~rh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ln(e),r=1<<n;t[n]=-1,e&=~r}}function nx(t){if(fe&6)throw Error(L(327));oo();var e=Fu(t,0);if(!(e&1))return Yt(t,qe()),null;var n=rd(t,e);if(t.tag!==0&&n===2){var r=dm(t);r!==0&&(e=r,n=Fm(t,r))}if(n===1)throw n=yl,ti(t,0),qr(t,e),Yt(t,qe()),n;if(n===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ws(t,qt,dr),Yt(t,qe()),null}function Py(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(Ao=qe()+500,Zd&&Ns())}}function di(t){Zr!==null&&Zr.tag===0&&!(fe&6)&&oo();var e=fe;fe|=1;var n=Sn.transition,r=ve;try{if(Sn.transition=null,ve=1,t)return t()}finally{ve=r,Sn.transition=n,fe=e,!(fe&6)&&Ns()}}function Ny(){nn=Ji.current,Ae(Ji)}function ti(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,wP(n)),Je!==null)for(n=Je.return;n!==null;){var r=n;switch(hy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wu();break;case 3:Io(),Ae(Gt),Ae(jt),_y();break;case 5:wy(r);break;case 4:Io();break;case 13:Ae(Le);break;case 19:Ae(Le);break;case 10:gy(r.type._context);break;case 22:case 23:Ny()}n=n.return}if(lt=t,Je=t=cs(t.current,null),vt=nn=e,rt=0,yl=null,Cy=rh=ui=0,qt=Wa=null,Qs!==null){for(e=0;e<Qs.length;e++)if(n=Qs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Qs=null}return t}function JS(t,e){do{var n=Je;try{if(my(),pu.current=Zu,Ju){for(var r=Me.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ju=!1}if(ci=0,at=nt=Me=null,Ba=!1,pl=0,Ay.current=null,n===null||n.return===null){rt=1,yl=e,Je=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=vt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=z1(o);if(m!==null){m.flags&=-257,W1(m,o,a,i,e),m.mode&1&&B1(i,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var g=new Set;g.add(l),e.updateQueue=g}else y.add(l);break e}else{if(!(e&1)){B1(i,c,e),jy();break e}l=Error(L(426))}}else if(je&&a.mode&1){var _=z1(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),W1(_,o,a,i,e),fy(Ro(l,a));break e}}i=l=Ro(l,a),rt!==4&&(rt=2),Wa===null?Wa=[i]:Wa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=LS(i,l,e);L1(i,x);break e;case 1:a=l;var v=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(as===null||!as.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=DS(i,a,e);L1(i,E);break e}}i=i.return}while(i!==null)}tT(n)}catch(S){e=S,Je===n&&n!==null&&(Je=n=n.return);continue}break}while(1)}function ZS(){var t=ed.current;return ed.current=Zu,t===null?Zu:t}function jy(){(rt===0||rt===3||rt===2)&&(rt=4),lt===null||!(ui&268435455)&&!(rh&268435455)||qr(lt,vt)}function rd(t,e){var n=fe;fe|=2;var r=ZS();(lt!==t||vt!==e)&&(dr=null,ti(t,e));do try{HP();break}catch(s){JS(t,s)}while(1);if(my(),fe=n,ed.current=r,Je!==null)throw Error(L(261));return lt=null,vt=0,rt}function HP(){for(;Je!==null;)eT(Je)}function qP(){for(;Je!==null&&!yk();)eT(Je)}function eT(t){var e=rT(t.alternate,t,nn);t.memoizedProps=t.pendingProps,e===null?tT(t):Je=e,Ay.current=null}function tT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=FP(n,e),n!==null){n.flags&=32767,Je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{rt=6,Je=null;return}}else if(n=$P(n,e,nn),n!==null){Je=n;return}if(e=e.sibling,e!==null){Je=e;return}Je=e=t}while(e!==null);rt===0&&(rt=5)}function Ws(t,e,n){var r=ve,s=Sn.transition;try{Sn.transition=null,ve=1,KP(t,e,n,r)}finally{Sn.transition=s,ve=r}return null}function KP(t,e,n,r){do oo();while(Zr!==null);if(fe&6)throw Error(L(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Rk(t,i),t===lt&&(Je=lt=null,vt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hc||(Hc=!0,sT($u,function(){return oo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Sn.transition,Sn.transition=null;var o=ve;ve=1;var a=fe;fe|=4,Ay.current=null,UP(t,n),GS(n,t),fP(ym),Vu=!!gm,ym=gm=null,t.current=n,BP(n),vk(),fe=a,ve=o,Sn.transition=i}else t.current=n;if(Hc&&(Hc=!1,Zr=t,nd=s),i=t.pendingLanes,i===0&&(as=null),_k(n.stateNode),Yt(t,qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(td)throw td=!1,t=Mm,Mm=null,t;return nd&1&&t.tag!==0&&oo(),i=t.pendingLanes,i&1?t===$m?Ha++:(Ha=0,$m=t):Ha=0,Ns(),null}function oo(){if(Zr!==null){var t=OE(nd),e=Sn.transition,n=ve;try{if(Sn.transition=null,ve=16>t?16:t,Zr===null)var r=!1;else{if(t=Zr,Zr=null,nd=0,fe&6)throw Error(L(331));var s=fe;for(fe|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(H=c;H!==null;){var d=H;switch(d.tag){case 0:case 11:case 15:za(8,d,i)}var f=d.child;if(f!==null)f.return=d,H=f;else for(;H!==null;){d=H;var p=d.sibling,m=d.return;if(qS(d),d===c){H=null;break}if(p!==null){p.return=m,H=p;break}H=m}}}var y=i.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var _=g.sibling;g.sibling=null,g=_}while(g!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:za(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,H=x;break e}H=i.return}}var v=t.current;for(H=v;H!==null;){o=H;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,H=w;else e:for(o=v;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:nh(9,a)}}catch(S){Ue(a,a.return,S)}if(a===o){H=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,H=E;break e}H=a.return}}if(fe=s,Ns(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(Qd,t)}catch{}r=!0}return r}finally{ve=n,Sn.transition=e}}return!1}function rx(t,e,n){e=Ro(n,e),e=LS(t,e,1),t=os(t,e,1),e=Vt(),t!==null&&(Kl(t,1,e),Yt(t,e))}function Ue(t,e,n){if(t.tag===3)rx(t,t,n);else for(;e!==null;){if(e.tag===3){rx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(as===null||!as.has(r))){t=Ro(n,t),t=DS(e,t,1),e=os(e,t,1),t=Vt(),e!==null&&(Kl(e,1,t),Yt(e,t));break}}e=e.return}}function QP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Vt(),t.pingedLanes|=t.suspendedLanes&n,lt===t&&(vt&n)===n&&(rt===4||rt===3&&(vt&130023424)===vt&&500>qe()-ky?ti(t,0):Cy|=n),Yt(t,e)}function nT(t,e){e===0&&(t.mode&1?(e=Lc,Lc<<=1,!(Lc&130023424)&&(Lc=4194304)):e=1);var n=Vt();t=Tr(t,e),t!==null&&(Kl(t,e,n),Yt(t,n))}function GP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),nT(t,n)}function XP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(e),nT(t,n)}var rT;rT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Gt.current)Qt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qt=!1,MP(t,e,n);Qt=!!(t.flags&131072)}else Qt=!1,je&&e.flags&1048576&&oS(e,Ku,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;gu(t,e),t=e.pendingProps;var s=So(e,jt.current);io(e,n),s=Sy(null,e,r,t,s,n);var i=Ty();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xt(r)?(i=!0,Hu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,vy(e),s.updater=eh,e.stateNode=s,s._reactInternals=e,Im(e,r,t,n),e=Cm(null,e,r,!0,i,n)):(e.tag=0,je&&i&&dy(e),$t(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(gu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=JP(r),t=kn(r,t),s){case 0:e=Am(null,e,r,t,n);break e;case 1:e=K1(null,e,r,t,n);break e;case 11:e=H1(null,e,r,t,n);break e;case 14:e=q1(null,e,r,kn(r.type,t),n);break e}throw Error(L(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kn(r,s),Am(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kn(r,s),K1(t,e,r,s,n);case 3:e:{if(VS(e),t===null)throw Error(L(387));r=e.pendingProps,i=e.memoizedState,s=i.element,uS(t,e),Xu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ro(Error(L(423)),e),e=Q1(t,e,r,n,s);break e}else if(r!==s){s=Ro(Error(L(424)),e),e=Q1(t,e,r,n,s);break e}else for(rn=is(e.stateNode.containerInfo.firstChild),an=e,je=!0,Nn=null,n=pS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(To(),r===s){e=br(t,e,n);break e}$t(t,e,r,n)}e=e.child}return e;case 5:return mS(e),t===null&&Sm(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,vm(r,s)?o=null:i!==null&&vm(r,i)&&(e.flags|=32),FS(t,e),$t(t,e,o,n),e.child;case 6:return t===null&&Sm(e),null;case 13:return US(t,e,n);case 4:return xy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bo(e,null,r,n):$t(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kn(r,s),H1(t,e,r,s,n);case 7:return $t(t,e,e.pendingProps,n),e.child;case 8:return $t(t,e,e.pendingProps.children,n),e.child;case 12:return $t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Te(Qu,r._currentValue),r._currentValue=o,i!==null)if(Mn(i.value,o)){if(i.children===s.children&&!Gt.current){e=br(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=xr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Tm(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(L(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Tm(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}$t(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,io(e,n),s=In(s),r=r(s),e.flags|=1,$t(t,e,r,n),e.child;case 14:return r=e.type,s=kn(r,e.pendingProps),s=kn(r.type,s),q1(t,e,r,s,n);case 15:return MS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kn(r,s),gu(t,e),e.tag=1,Xt(r)?(t=!0,Hu(e)):t=!1,io(e,n),hS(e,r,s),Im(e,r,s,n),Cm(null,e,r,!0,t,n);case 19:return BS(t,e,n);case 22:return $S(t,e,n)}throw Error(L(156,e.tag))};function sT(t,e){return kE(t,e)}function YP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(t,e,n,r){return new YP(t,e,n,r)}function Oy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function JP(t){if(typeof t=="function")return Oy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zg)return 11;if(t===ey)return 14}return 2}function cs(t,e){var n=t.alternate;return n===null?(n=En(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Oy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bi:return ni(n.children,s,i,e);case Jg:o=8,s|=8;break;case Xp:return t=En(12,n,e,s|2),t.elementType=Xp,t.lanes=i,t;case Yp:return t=En(13,n,e,s),t.elementType=Yp,t.lanes=i,t;case Jp:return t=En(19,n,e,s),t.elementType=Jp,t.lanes=i,t;case fE:return sh(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dE:o=10;break e;case hE:o=9;break e;case Zg:o=11;break e;case ey:o=14;break e;case zr:o=16,r=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=En(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ni(t,e,n,r){return t=En(7,t,r,e),t.lanes=n,t}function sh(t,e,n,r){return t=En(22,t,r,e),t.elementType=fE,t.lanes=n,t.stateNode={isHidden:!1},t}function Xf(t,e,n){return t=En(6,t,null,e),t.lanes=n,t}function Yf(t,e,n){return e=En(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ZP(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pf(0),this.expirationTimes=Pf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ly(t,e,n,r,s,i,o,a,l){return t=new ZP(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=En(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vy(i),t}function eN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ui,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function iT(t){if(!t)return vs;t=t._reactInternals;e:{if(Ii(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var n=t.type;if(Xt(n))return sS(t,n,e)}return e}function oT(t,e,n,r,s,i,o,a,l){return t=Ly(n,r,!0,t,s,i,o,a,l),t.context=iT(null),n=t.current,r=Vt(),s=ls(n),i=xr(r,s),i.callback=e??null,os(n,i,s),t.current.lanes=s,Kl(t,s,r),Yt(t,r),t}function ih(t,e,n,r){var s=e.current,i=Vt(),o=ls(s);return n=iT(n),e.context===null?e.context=n:e.pendingContext=n,e=xr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=os(s,e,o),t!==null&&(Dn(t,s,o,i),fu(t,s,o)),o}function sd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Dy(t,e){sx(t,e),(t=t.alternate)&&sx(t,e)}function tN(){return null}var aT=typeof reportError=="function"?reportError:function(t){console.error(t)};function My(t){this._internalRoot=t}oh.prototype.render=My.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));ih(t,e,null,null)};oh.prototype.unmount=My.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;di(function(){ih(null,t,null,null)}),e[Sr]=null}};function oh(t){this._internalRoot=t}oh.prototype.unstable_scheduleHydration=function(t){if(t){var e=ME();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hr.length&&e!==0&&e<Hr[n].priority;n++);Hr.splice(n,0,t),n===0&&FE(t)}};function $y(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ah(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ix(){}function nN(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=sd(o);i.call(c)}}var o=oT(e,r,t,0,null,!1,!1,"",ix);return t._reactRootContainer=o,t[Sr]=o.current,cl(t.nodeType===8?t.parentNode:t),di(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=sd(l);a.call(c)}}var l=Ly(t,0,!1,null,null,!1,!1,"",ix);return t._reactRootContainer=l,t[Sr]=l.current,cl(t.nodeType===8?t.parentNode:t),di(function(){ih(e,l,n,r)}),l}function lh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=sd(o);a.call(l)}}ih(e,o,t,s)}else o=nN(n,e,t,s,r);return sd(o)}LE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Aa(e.pendingLanes);n!==0&&(ry(e,n|1),Yt(e,qe()),!(fe&6)&&(Ao=qe()+500,Ns()))}break;case 13:di(function(){var r=Tr(t,1);if(r!==null){var s=Vt();Dn(r,t,1,s)}}),Dy(t,1)}};sy=function(t){if(t.tag===13){var e=Tr(t,134217728);if(e!==null){var n=Vt();Dn(e,t,134217728,n)}Dy(t,134217728)}};DE=function(t){if(t.tag===13){var e=ls(t),n=Tr(t,e);if(n!==null){var r=Vt();Dn(n,t,e,r)}Dy(t,e)}};ME=function(){return ve};$E=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};lm=function(t,e,n){switch(e){case"input":if(tm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Jd(r);if(!s)throw Error(L(90));mE(r),tm(r,s)}}}break;case"textarea":yE(t,n);break;case"select":e=n.value,e!=null&&to(t,!!n.multiple,e,!1)}};TE=Py;bE=di;var rN={usingClientEntryPoint:!1,Events:[Gl,qi,Jd,EE,SE,Py]},wa={findFiberByHostInstance:Ks,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},sN={bundleType:wa.bundleType,version:wa.version,rendererPackageName:wa.rendererPackageName,rendererConfig:wa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Or.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=AE(t),t===null?null:t.stateNode},findFiberByHostInstance:wa.findFiberByHostInstance||tN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qc.isDisabled&&qc.supportsFiber)try{Qd=qc.inject(sN),Gn=qc}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rN;fn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$y(e))throw Error(L(200));return eN(t,e,null,n)};fn.createRoot=function(t,e){if(!$y(t))throw Error(L(299));var n=!1,r="",s=aT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ly(t,1,!1,null,null,n,!1,r,s),t[Sr]=e.current,cl(t.nodeType===8?t.parentNode:t),new My(e)};fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=AE(e),t=t===null?null:t.stateNode,t};fn.flushSync=function(t){return di(t)};fn.hydrate=function(t,e,n){if(!ah(e))throw Error(L(200));return lh(null,t,e,!0,n)};fn.hydrateRoot=function(t,e,n){if(!$y(t))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=aT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=oT(e,null,t,1,n??null,s,!1,i,o),t[Sr]=e.current,cl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new oh(e)};fn.render=function(t,e,n){if(!ah(e))throw Error(L(200));return lh(null,t,e,!1,n)};fn.unmountComponentAtNode=function(t){if(!ah(t))throw Error(L(40));return t._reactRootContainer?(di(function(){lh(null,null,t,!1,function(){t._reactRootContainer=null,t[Sr]=null})}),!0):!1};fn.unstable_batchedUpdates=Py;fn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ah(n))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return lh(t,e,n,!1,r)};fn.version="18.2.0-next-9e3b772b8-20220608";function lT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lT)}catch(t){console.error(t)}}lT(),oE.exports=fn;var Qo=oE.exports,ox=Qo;Qp.createRoot=ox.createRoot,Qp.hydrateRoot=ox.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Co(){return Co=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Co.apply(this,arguments)}var es;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(es||(es={}));const ax="popstate";function iN(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Um("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:id(s)}return aN(e,n,null,t)}function Qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Fy(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oN(){return Math.random().toString(36).substr(2,8)}function lx(t,e){return{usr:t.state,key:t.key,idx:e}}function Um(t,e,n,r){return n===void 0&&(n=null),Co({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Go(e):e,{state:n,key:e&&e.key||r||oN()})}function id(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Go(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function aN(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=es.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Co({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function f(){a=es.Pop;let _=d(),x=_==null?null:_-c;c=_,l&&l({action:a,location:g.location,delta:x})}function p(_,x){a=es.Push;let v=Um(g.location,_,x);n&&n(v,_),c=d()+1;let w=lx(v,c),E=g.createHref(v);try{o.pushState(w,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(E)}i&&l&&l({action:a,location:g.location,delta:1})}function m(_,x){a=es.Replace;let v=Um(g.location,_,x);n&&n(v,_),c=d();let w=lx(v,c),E=g.createHref(v);o.replaceState(w,"",E),i&&l&&l({action:a,location:g.location,delta:0})}function y(_){let x=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof _=="string"?_:id(_);return Qe(x,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,x)}let g={get action(){return a},get location(){return t(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(ax,f),l=_,()=>{s.removeEventListener(ax,f),l=null}},createHref(_){return e(s,_)},createURL:y,encodeLocation(_){let x=y(_);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:p,replace:m,go(_){return o.go(_)}};return g}var cx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(cx||(cx={}));function lN(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Go(e):e,s=Vy(r.pathname||"/",n);if(s==null)return null;let i=cT(t);cN(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=vN(i[a],_N(s));return o}function cT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Qe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=us([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Qe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),cT(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:gN(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of uT(i.path))s(i,o,l)}),e}function uT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=uT(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function cN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:yN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const uN=/^:\w+$/,dN=3,hN=2,fN=1,pN=10,mN=-2,ux=t=>t==="*";function gN(t,e){let n=t.split("/"),r=n.length;return n.some(ux)&&(r+=mN),e&&(r+=hN),n.filter(s=>!ux(s)).reduce((s,i)=>s+(uN.test(i)?dN:i===""?fN:pN),r)}function yN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function vN(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=xN({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!d)return null;Object.assign(r,d.params);let f=a.route;i.push({params:r,pathname:us([s,d.pathname]),pathnameBase:bN(us([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=us([s,d.pathnameBase]))}return i}function xN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=wN(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,f)=>{if(d==="*"){let p=a[f]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}return c[d]=EN(a[f]||"",d),c},{}),pathname:i,pathnameBase:o,pattern:t}}function wN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Fy(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function _N(t){try{return decodeURI(t)}catch(e){return Fy(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function EN(t,e){try{return decodeURIComponent(t)}catch(n){return Fy(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Vy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function SN(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Go(t):t;return{pathname:n?n.startsWith("/")?n:TN(n,e):e,search:IN(r),hash:RN(s)}}function TN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Jf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Uy(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function By(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Go(t):(s=Co({},t),Qe(!s.pathname||!s.pathname.includes("?"),Jf("?","pathname","search",s)),Qe(!s.pathname||!s.pathname.includes("#"),Jf("#","pathname","hash",s)),Qe(!s.search||!s.search.includes("#"),Jf("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(r||o==null)a=n;else{let f=e.length-1;if(o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=SN(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const us=t=>t.join("/").replace(/\/\/+/g,"/"),bN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),IN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,RN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,AN=function(e,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let s=new Headers(r.headers);return s.set("Location",e),new Response(null,Co({},r,{headers:s}))};function CN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const dT=["post","put","patch","delete"];new Set(dT);const kN=["get",...dT];new Set(kN);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function od(){return od=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},od.apply(this,arguments)}const zy=h.createContext(null),PN=h.createContext(null),Xo=h.createContext(null),ch=h.createContext(null),ar=h.createContext({outlet:null,matches:[],isDataRoute:!1}),hT=h.createContext(null);function NN(t,e){let{relative:n}=e===void 0?{}:e;Yo()||Qe(!1);let{basename:r,navigator:s}=h.useContext(Xo),{hash:i,pathname:o,search:a}=pT(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:us([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Yo(){return h.useContext(ch)!=null}function mn(){return Yo()||Qe(!1),h.useContext(ch).location}function fT(t){h.useContext(Xo).static||h.useLayoutEffect(t)}function en(){let{isDataRoute:t}=h.useContext(ar);return t?KN():jN()}function jN(){Yo()||Qe(!1);let t=h.useContext(zy),{basename:e,navigator:n}=h.useContext(Xo),{matches:r}=h.useContext(ar),{pathname:s}=mn(),i=JSON.stringify(Uy(r).map(l=>l.pathnameBase)),o=h.useRef(!1);return fT(()=>{o.current=!0}),h.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=By(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:us([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,i,s,t])}const ON=h.createContext(null);function LN(t){let e=h.useContext(ar).outlet;return e&&h.createElement(ON.Provider,{value:t},e)}function uh(){let{matches:t}=h.useContext(ar),e=t[t.length-1];return e?e.params:{}}function pT(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=h.useContext(ar),{pathname:s}=mn(),i=JSON.stringify(Uy(r).map(o=>o.pathnameBase));return h.useMemo(()=>By(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function DN(t,e){return MN(t,e)}function MN(t,e,n){Yo()||Qe(!1);let{navigator:r}=h.useContext(Xo),{matches:s}=h.useContext(ar),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let l=mn(),c;if(e){var d;let g=typeof e=="string"?Go(e):e;a==="/"||(d=g.pathname)!=null&&d.startsWith(a)||Qe(!1),c=g}else c=l;let f=c.pathname||"/",p=a==="/"?f:f.slice(a.length)||"/",m=lN(t,{pathname:p}),y=BN(m&&m.map(g=>Object.assign({},g,{params:Object.assign({},o,g.params),pathname:us([a,r.encodeLocation?r.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?a:us([a,r.encodeLocation?r.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n);return e&&y?h.createElement(ch.Provider,{value:{location:od({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:es.Pop}},y):y}function $N(){let t=qN(),e=CN(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},e),n?h.createElement("pre",{style:s},n):null,i)}const FN=h.createElement($N,null);class VN extends h.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?h.createElement(ar.Provider,{value:this.props.routeContext},h.createElement(hT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function UN(t){let{routeContext:e,match:n,children:r}=t,s=h.useContext(zy);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),h.createElement(ar.Provider,{value:e},r)}function BN(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let i=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=i.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||Qe(!1),i=i.slice(0,Math.min(i.length,a+1))}return i.reduceRight((a,l,c)=>{let d=l.route.id?o==null?void 0:o[l.route.id]:null,f=null;n&&(f=l.route.errorElement||FN);let p=e.concat(i.slice(0,c+1)),m=()=>{let y;return d?y=f:l.route.Component?y=h.createElement(l.route.Component,null):l.route.element?y=l.route.element:y=a,h.createElement(UN,{match:l,routeContext:{outlet:a,matches:p,isDataRoute:n!=null},children:y})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?h.createElement(VN,{location:n.location,revalidation:n.revalidation,component:f,error:d,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var Bm;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(Bm||(Bm={}));var vl;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(vl||(vl={}));function zN(t){let e=h.useContext(zy);return e||Qe(!1),e}function WN(t){let e=h.useContext(PN);return e||Qe(!1),e}function HN(t){let e=h.useContext(ar);return e||Qe(!1),e}function mT(t){let e=HN(),n=e.matches[e.matches.length-1];return n.route.id||Qe(!1),n.route.id}function qN(){var t;let e=h.useContext(hT),n=WN(vl.UseRouteError),r=mT(vl.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function KN(){let{router:t}=zN(Bm.UseNavigateStable),e=mT(vl.UseNavigateStable),n=h.useRef(!1);return fT(()=>{n.current=!0}),h.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,od({fromRouteId:e},i)))},[t,e])}function QN(t){let{to:e,replace:n,state:r,relative:s}=t;Yo()||Qe(!1);let{matches:i}=h.useContext(ar),{pathname:o}=mn(),a=en(),l=By(e,Uy(i).map(d=>d.pathnameBase),o,s==="path"),c=JSON.stringify(l);return h.useEffect(()=>a(JSON.parse(c),{replace:n,state:r,relative:s}),[a,c,s,n,r]),null}function gT(t){return LN(t.context)}function Br(t){Qe(!1)}function GN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=es.Pop,navigator:i,static:o=!1}=t;Yo()&&Qe(!1);let a=e.replace(/^\/*/,"/"),l=h.useMemo(()=>({basename:a,navigator:i,static:o}),[a,i,o]);typeof r=="string"&&(r=Go(r));let{pathname:c="/",search:d="",hash:f="",state:p=null,key:m="default"}=r,y=h.useMemo(()=>{let g=Vy(c,a);return g==null?null:{location:{pathname:g,search:d,hash:f,state:p,key:m},navigationType:s}},[a,c,d,f,p,m,s]);return y==null?null:h.createElement(Xo.Provider,{value:l},h.createElement(ch.Provider,{children:n,value:y}))}function XN(t){let{children:e,location:n}=t;return DN(zm(e),n)}var dx;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(dx||(dx={}));new Promise(()=>{});function zm(t,e){e===void 0&&(e=[]);let n=[];return h.Children.forEach(t,(r,s)=>{if(!h.isValidElement(r))return;let i=[...e,s];if(r.type===h.Fragment){n.push.apply(n,zm(r.props.children,i));return}r.type!==Br&&Qe(!1),!r.props.index||!r.props.children||Qe(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=zm(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wm(){return Wm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wm.apply(this,arguments)}function YN(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function JN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ZN(t,e){return t.button===0&&(!e||e==="_self")&&!JN(t)}const e5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],t5="startTransition",hx=Qg[t5];function n5(t){let{basename:e,children:n,future:r,window:s}=t,i=h.useRef();i.current==null&&(i.current=iN({window:s,v5Compat:!0}));let o=i.current,[a,l]=h.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=h.useCallback(f=>{c&&hx?hx(()=>l(f)):l(f)},[l,c]);return h.useLayoutEffect(()=>o.listen(d),[o,d]),h.createElement(GN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const r5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",s5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ds=h.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d}=e,f=YN(e,e5),{basename:p}=h.useContext(Xo),m,y=!1;if(typeof c=="string"&&s5.test(c)&&(m=c,r5))try{let v=new URL(window.location.href),w=c.startsWith("//")?new URL(v.protocol+c):new URL(c),E=Vy(w.pathname,p);w.origin===v.origin&&E!=null?c=E+w.search+w.hash:y=!0}catch{}let g=NN(c,{relative:s}),_=i5(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s});function x(v){r&&r(v),v.defaultPrevented||_(v)}return h.createElement("a",Wm({},f,{href:m||g,onClick:y||i?r:x,ref:n,target:l}))});var fx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(fx||(fx={}));var px;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(px||(px={}));function i5(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o}=e===void 0?{}:e,a=en(),l=mn(),c=pT(t,{relative:o});return h.useCallback(d=>{if(ZN(d,n)){d.preventDefault();let f=r!==void 0?r:id(l)===id(c);a(t,{replace:f,state:s,preventScrollReset:i,relative:o})}},[l,a,c,r,s,n,t,i,o])}function yT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=yT(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function o5(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=yT(t))&&(r&&(r+=" "),r+=e);return r}const mx=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,gx=o5,vT=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return gx(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],f=i==null?void 0:i[c];if(d===null)return null;const p=mx(d)||mx(f);return s[c][p]}),a=n&&Object.entries(n).reduce((c,d)=>{let[f,p]=d;return p===void 0||(c[f]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:f,className:p,...m}=d;return Object.entries(m).every(y=>{let[g,_]=y;return Array.isArray(_)?_.includes({...i,...a}[g]):{...i,...a}[g]===_})?[...c,f,p]:c},[]);return gx(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function a5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75"}))}const l5=h.forwardRef(a5),xT=l5;function c5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const u5=h.forwardRef(c5),d5=u5;function h5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}))}const f5=h.forwardRef(h5),p5=f5;function m5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3"}))}const g5=h.forwardRef(m5),y5=g5;function v5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const x5=h.forwardRef(v5),Ir=x5;function w5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"}))}const _5=h.forwardRef(w5),wT=_5;function E5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"}))}const S5=h.forwardRef(E5),T5=S5;function b5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}))}const I5=h.forwardRef(b5),R5=I5;function A5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953l7.108-4.062A1.125 1.125 0 0121 8.688v8.123zM11.25 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953L9.567 7.71a1.125 1.125 0 011.683.977v8.123z"}))}const C5=h.forwardRef(A5),k5=C5;function P5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const N5=h.forwardRef(P5),_T=N5;function j5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))}const O5=h.forwardRef(j5),ao=O5;function L5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"}))}const D5=h.forwardRef(L5),M5=D5;function $5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"}))}const F5=h.forwardRef($5),V5=F5;function U5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const B5=h.forwardRef(U5),z5=B5;function W5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}const H5=h.forwardRef(W5),q5=H5;function K5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const Q5=h.forwardRef(K5),Zf=Q5;function G5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"}))}const X5=h.forwardRef(G5),Y5=X5;function J5({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Z5=h.forwardRef(J5),ET=Z5;function ej({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const tj=h.forwardRef(ej),ST=tj;function nj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25"}))}const rj=h.forwardRef(nj),sj=rj;function ij({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const oj=h.forwardRef(ij),aj=oj;function lj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))}const cj=h.forwardRef(lj),Wy=cj;function uj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z"}))}const dj=h.forwardRef(uj),TT=dj;function hj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const fj=h.forwardRef(hj),bT=fj;function pj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const mj=h.forwardRef(pj),gj=mj;function yj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const vj=h.forwardRef(yj),IT=vj;function xj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const wj=h.forwardRef(xj),yx=wj;function _j({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"}))}const Ej=h.forwardRef(_j),Sj=Ej;function Tj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"}))}const bj=h.forwardRef(Tj),ko=bj;function Ij({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}))}const Rj=h.forwardRef(Ij),RT=Rj;function Aj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Cj=h.forwardRef(Aj),dh=Cj;function kj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))}const Pj=h.forwardRef(kj),AT=Pj;function Nj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"}))}const jj=h.forwardRef(Nj),Hy=jj;function Oj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"}))}const Lj=h.forwardRef(Oj),vx=Lj;function Dj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const Mj=h.forwardRef(Dj),ad=Mj;function $j({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Fj=h.forwardRef($j),ld=Fj;function Vj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"}))}const Uj=h.forwardRef(Vj),Bj=Uj;function zj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"}))}const Wj=h.forwardRef(zj),CT=Wj;function Hj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"}))}const qj=h.forwardRef(Hj),Kj=qj;function Qj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75L19.5 12m0 0l2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6l4.72-4.72a.75.75 0 011.28.531V19.94a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.506-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.395C2.806 8.757 3.63 8.25 4.51 8.25H6.75z"}))}const Gj=h.forwardRef(Qj),Xj=Gj;function Yj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"}))}const Jj=h.forwardRef(Yj),xl=Jj;function Zj({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const e4=h.forwardRef(Zj),kT=e4;function t4({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const n4=h.forwardRef(t4),r4=n4;function s4({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const i4=h.forwardRef(s4),Xs=i4,o4=vT("inline-flex items-center hover:brightness-90",{variants:{variant:{default:"",circle:"rounded-[99px] p-[4px] justify-center",list:"flex items-center py-[5px] w-full text-[14px]",primary:"px-[16px] py-[4px] text-[14px]",outline:"border rounded-full"},size:{half:"w-1/2",full:"w-full",small:"text-[13px] px-[10px] py-[3px]",normal:"text-[14px] px-[16px] py-[4px]",large:"h-[40px] w-[40px]"}},defaultVariants:{variant:"default"}}),Y=({className:t,children:e,variant:n,size:r,isLoading:s,onClick:i,...o})=>u.jsxs("button",{type:"button",onClick:a=>i?i(a):"",...o,className:o4({variant:n,size:r,className:t}),disabled:s,children:[s?u.jsx(Ir,{className:"w-[22px] animate-spin"}):null,!s&&e]}),cd=[{name:"Red",id:"red",type:"dark",bottom_player_bg:"bg-[#3b1113]",side_bar_bg:"bg-[#391b1c]",content_text:"text-[#ca4954]",content_hover_text:"hover:text-[#ca4954]",content_border:"border-[#ca4954]",content_hover_border:"hover:border-[#ca4954]",content_bg:"!bg-[#ca4954]  text-[#fff]",content_hover_bg:"hover:!bg-[#ca4954] hover:text-[#fff] ",container:"bg-[#2e0f10]"},{name:"Black",id:"black",type:"dark",bottom_player_bg:"bg-[#181818]",side_bar_bg:"bg-[#242424]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585]  text-[#fff]",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff] ",container:"bg-[#1e1e1e]"},{name:"Deep blue",id:"deep_blue",type:"dark",bottom_player_bg:"bg-[#111f3b]",side_bar_bg:"bg-[#1b2639]",content_text:"text-[#0c9e85]",content_hover_text:"hover:text-[#0c9e85]",content_border:"border-[#0c9e85]",content_hover_border:"hover:border-[#0c9e85]",content_bg:"!bg-[#0c9e85]  text-[#fff]",content_hover_bg:"hover:!bg-[#0c9e85] hover:text-[#fff] ",container:"bg-[#0f1a2e]"},{name:"White",id:"white",type:"light",bottom_player_bg:"bg-[#fff]",side_bar_bg:"bg-[#f2f2f2]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585] text-[#fff]",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff]",container:"bg-[#fff]"},{name:"Light green",id:"green_light",type:"light",bottom_player_bg:"bg-[#c0d8d8]",side_bar_bg:"bg-[#dde5e5]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"!bg-[#198585] text-[#fff]",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff]",container:"bg-[#ced9d9]"},{name:"Brown",id:"gray",type:"light",bottom_player_bg:"bg-[#dedad1]",side_bar_bg:"bg-[#d9d7d4]",content_text:"text-[#644646]",content_hover_text:"hover:text-[#644646]",content_border:"border-[#644646]",content_hover_border:"hover:border-[#644646]",content_bg:"!bg-[#644646]  text-[#fff]",content_hover_bg:"hover:!bg-[#644646] hover:text-[#fff]",container:"bg-[#e5e3df]"}],qy=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop / Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast  Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Rock/Pop"];function De(t,e,n=0,r){let s=e||t.byteLength-n;const i=typeof Buffer<"u";s<0&&(s+=t.byteLength);const o=[],a=n+s;for(let c=n;c<a;c++){const d=t.getUint8(c);if(d===0)break;o.push(d)}if(i)return Buffer.from(o).toString();const l=o.map(c=>String.fromCharCode(c)).join("");return r?l:decodeURIComponent(escape(l))}function Oi(t,e,n=0,r){let s=!1,i=e||t.byteLength-n;const o=[],a=typeof Buffer<"u";if(i<0&&(i+=t.byteLength),n+1>t.byteLength)return"";r&&(t.getUint16(n)===65534&&(s=!0),n+=2,i-=2);const l=n+i;for(let c=n;c<l;c+=2){let d=t.getUint16(c,s);if(c<l-1&&d===0&&t.getUint16(c+1,s)===0)break;d>=0&&d<=55295||d>=57344&&d<=65535?o.push(d):d>=65536&&d<=1114111&&(d-=65536,o.push(((1047552&d)>>10)+55296),o.push((1023&d)+56320))}if(a){const c=Buffer.alloc(o.length*2);for(let d=0;d<o.length;d++){const f=o[d];s?c.writeUInt16LE(f,d*2):c.writeUInt16BE(f,d*2)}return c.toString()}return String.fromCharCode.apply(null,new Uint16Array(o))}function a4(t){let e=0,n=2130706432;for(;n;)e>>=1,e|=t&n,n>>=8;return e}function wu(t,e=0){return a4(t.getUint32(e))}function PT(t,e=0,n){return n?t.getUint8(e)+(t.getUint8(e+1)<<8)+(t.getUint8(e+2)<<16):t.getUint8(e+2)+(t.getUint8(e+1)<<8)+(t.getUint8(e)<<16)}const NT=new Map([["TALB","album"],["TBPM","bpm"],["TCOM","composer"],["TCON","genre"],["TCOP","copyright"],["TDEN","encoding-time"],["TDLY","playlist-delay"],["TDOR","original-release-time"],["TDRC","recording-time"],["TDRL","release-time"],["TDTG","tagging-time"],["TENC","encoder"],["TEXT","writer"],["TFLT","file-type"],["TIPL","involved-people"],["TIT1","content-group"],["TIT2","title"],["TIT3","subtitle"],["TKEY","initial-key"],["TLAN","language"],["TLEN","length"],["TMCL","credits"],["TMED","media-type"],["TMOO","mood"],["TOAL","original-album"],["TOFN","original-filename"],["TOLY","original-writer"],["TOPE","original-artist"],["TOWN","owner"],["TPE1","artist"],["TPE2","band"],["TPE3","conductor"],["TPE4","remixer"],["TPOS","set-part"],["TPRO","produced-notice"],["TPUB","publisher"],["TRCK","track"],["TRSN","radio-name"],["TRSO","radio-owner"],["TSOA","album-sort"],["TSOP","performer-sort"],["TSOT","title-sort"],["TSRC","isrc"],["TSSE","encoder-settings"],["TSST","set-subtitle"],["TAL","album"],["TBP","bpm"],["TCM","composer"],["TCO","genre"],["TCR","copyright"],["TDY","playlist-delay"],["TEN","encoder"],["TFT","file-type"],["TKE","initial-key"],["TLA","language"],["TLE","length"],["TMT","media-type"],["TOA","original-artist"],["TOF","original-filename"],["TOL","original-writer"],["TOT","original-album"],["TP1","artist"],["TP2","band"],["TP3","conductor"],["TP4","remixer"],["TPA","set-part"],["TPB","publisher"],["TRC","isrc"],["TRK","track"],["TSS","encoder-settings"],["TT1","content-group"],["TT2","title"],["TT3","subtitle"],["TXT","writer"],["WCOM","url-commercial"],["WCOP","url-legal"],["WOAF","url-file"],["WOAR","url-artist"],["WOAS","url-source"],["WORS","url-radio"],["WPAY","url-payment"],["WPUB","url-publisher"],["WAF","url-file"],["WAR","url-artist"],["WAS","url-source"],["WCM","url-commercial"],["WCP","url-copyright"],["WPB","url-publisher"],["COMM","comments"],["APIC","image"],["PIC","image"],["PRIV","private"]]),jT=["other","file-icon","icon","cover-front","cover-back","leaflet","media","artist-lead","artist","conductor","band","composer","writer","location","during-recording","during-performance","screen","fish","illustration","logo-band","logo-publisher"];function l4(t){const e={id:null,tag:null,value:null},n=new DataView(t),r={id:De(n,3),type:De(n,1),size:PT(n,3)},s=NT.get(r.id);if(!s)return null;if(e.id=r.id,e.tag=s,r.type==="T"){let i=De(n,-7,7);r.id==="TCO"&&parseInt(i)&&(i=qy[parseInt(i)]),e.value=i}else if(r.type==="W")e.value=De(n,-7,7);else if(r.id==="COM"){let i=De(n,-10,10);i.indexOf("\0")!==-1&&(i=i.substr(i.indexOf("\0")+1)),e.value=i}else if(r.id==="PIC"){const i={type:null,mime:"image/"+De(n,3,7).toLowerCase(),description:null,data:null};i.type=jT[n.getUint8(11)]||"other";const o=11;let a=0;for(let l=o;;l++)if(n.getUint8(l)===0){a=l-o;break}i.description=a===0?null:De(n,a,o),i.data=t.slice(o+1),e.value=i}return e.tag?e:null}function c4(t,e,n){e=e||4;const r={id:null,tag:null,value:null},s=new DataView(t);if(e<3)return l4(t);const i={id:De(s,4),type:De(s,1),size:wu(s,4),flags:[s.getUint8(8),s.getUint8(9)]};if(i.flags[1]!==0)return null;const o=NT.get(i.id);if(!o)return null;if(r.tag=o,r.id=i.id,i.type==="T"){const a=s.getUint8(10);let l=null;a===0||a===3?l=De(s,-11,11):a===1?l=Oi(s,-11,11,!0):a===2&&(l=Oi(s,-11,11)),i.id==="TCON"&&l!==null&&parseInt(l)&&(l=qy[parseInt(l)]),r.value=l}else if(i.type==="W")r.value=De(s,-10,10);else if(i.id==="PRIV"){let l=0;for(let c=0;;c++)if(s.getUint8(c)===0){l=c-10;break}r.value={identifier:l===0?null:De(s,l,10),data:t.slice(l+10+1)}}else if(i.id==="COMM"){const a=s.getUint8(10);let l=14;for(let c=l;;c++)if(a===1||a===2){if(s.getUint16(c)===0){l=c+2;break}c++}else if(s.getUint8(c)===0){l=c+1;break}a===0||a===3?r.value=De(s,-1*l,l):a===1?r.value=Oi(s,-1*l,l,!0):a===2&&(r.value=Oi(s,-1*l,l))}else if(i.id==="APIC"){const a=s.getUint8(10),l={type:null,mime:null,description:null,data:null};let c=11,d=0;for(let f=c;;f++)if(s.getUint8(f)===0){d=f-c;break}l.mime=De(s,d,c),l.type=jT[s.getUint8(c+d+1)]||"other",c+=d+2,d=0;for(let f=c;;f++)if(s.getUint8(f)===0){d=f-c;break}d!==0&&(a===0||a===3?l.description=De(s,d,c):a===1?l.description=Oi(s,d,c,!0):a===2&&(l.description=Oi(s,d,c))),l.data=t.slice(c+1),r.value=l}return r.tag?r:null}async function u4(t){let e=null;const n=await t.read(128,t.size-128),r=new DataView(n);n.byteLength===128&&De(r,3,void 0,!0)==="TAG"&&(e={kind:"v1",title:De(r,30,3).trim()||null,album:De(r,30,63).trim()||null,artist:De(r,30,33).trim()||null,year:De(r,4,93).trim()||null,genre:null,comment:null,track:null},r.getUint8(125)===0?(e.comment=De(r,28,97),e.version=1.1,e.track=r.getUint8(126)):e.comment=De(r,30,97),e.genre=qy[r.getUint8(127)]||null);const s=await t.read(14,0),i=new DataView(s);if(s.byteLength===14&&De(i,3,void 0,!0)==="ID3"&&i.getUint8(3)<=4){let o=10,a=0;const l=[i.getUint8(3),i.getUint8(4)],c=i.getUint8(5);if(!(c&128)){e={kind:"v2",title:e?e.title:null,album:e?e.album:null,artist:e?e.artist:null,year:e?e.year:null,version:l,frames:[],images:[]},c&64&&(o+=wu(i,11)),a+=wu(i,6);const d=await t.read(a,o),f=new DataView(d);let p=0;for(;p<d.byteLength;){let m,y=!0;for(let _=0;_<3;_++){const x=f.getUint8(p+_);(x<65||x>90)&&(x<48||x>57)&&(y=!1)}if(!y)break;l[0]<3?m=d.slice(p,p+6+PT(f,p+3)):l[0]===3?m=d.slice(p,p+10+f.getUint32(p+4)):m=d.slice(p,p+10+wu(f,p+4));const g=await c4(m,l[0],l[1]);if(g&&g.tag){const _=e;_.frames.push(g),g.tag==="image"?_.images.push(g.value):e[g.tag]=g.value}p+=m.byteLength}}}return e}class d4{constructor(){this.size=0}async close(){}async readBlob(e,n=0,r="application/octet-stream"){const s=await this.read(e,n);return new Blob([s],{type:r})}}class h4 extends d4{constructor(e){super(),this._file=e}async open(){this.size=this._file.size}async read(e,n){const r=this._file.slice(n,n+e);return new Promise((s,i)=>{const o=new FileReader;o.onload=()=>{s(o.result)},o.onerror=()=>{i(new Error("File read failed"))},o.readAsArrayBuffer(r)})}}const f4=typeof window<"u"&&"File"in window&&"FileReader"in window&&typeof ArrayBuffer<"u";async function p4(t){await t.open();const e=await u4(t);return await t.close(),e}function m4(t){if(!f4)throw new Error("Browser does not have support for the File API and/or ArrayBuffers");return p4(new h4(t))}let ud=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");function OT(t,e){return function(){return t.apply(e,arguments)}}const{toString:g4}=Object.prototype,{getPrototypeOf:Ky}=Object,hh=(t=>e=>{const n=g4.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),lr=t=>(t=t.toLowerCase(),e=>hh(e)===t),fh=t=>e=>typeof e===t,{isArray:Jo}=Array,wl=fh("undefined");function y4(t){return t!==null&&!wl(t)&&t.constructor!==null&&!wl(t.constructor)&&Tn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const LT=lr("ArrayBuffer");function v4(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&LT(t.buffer),e}const x4=fh("string"),Tn=fh("function"),DT=fh("number"),ph=t=>t!==null&&typeof t=="object",w4=t=>t===!0||t===!1,_u=t=>{if(hh(t)!=="object")return!1;const e=Ky(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},_4=lr("Date"),E4=lr("File"),S4=lr("Blob"),T4=lr("FileList"),b4=t=>ph(t)&&Tn(t.pipe),I4=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Tn(t.append)&&((e=hh(t))==="formdata"||e==="object"&&Tn(t.toString)&&t.toString()==="[object FormData]"))},R4=lr("URLSearchParams"),A4=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Yl(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Jo(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function MT(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const $T=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),FT=t=>!wl(t)&&t!==$T;function Hm(){const{caseless:t}=FT(this)&&this||{},e={},n=(r,s)=>{const i=t&&MT(e,s)||s;_u(e[i])&&_u(r)?e[i]=Hm(e[i],r):_u(r)?e[i]=Hm({},r):Jo(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Yl(arguments[r],n);return e}const C4=(t,e,n,{allOwnKeys:r}={})=>(Yl(e,(s,i)=>{n&&Tn(s)?t[i]=OT(s,n):t[i]=s},{allOwnKeys:r}),t),k4=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),P4=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},N4=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Ky(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},j4=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},O4=t=>{if(!t)return null;if(Jo(t))return t;let e=t.length;if(!DT(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},L4=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Ky(Uint8Array)),D4=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},M4=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},$4=lr("HTMLFormElement"),F4=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),xx=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),V4=lr("RegExp"),VT=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Yl(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},U4=t=>{VT(t,(e,n)=>{if(Tn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Tn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},B4=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Jo(t)?r(t):r(String(t).split(e)),n},z4=()=>{},W4=(t,e)=>(t=+t,Number.isFinite(t)?t:e),ep="abcdefghijklmnopqrstuvwxyz",wx="0123456789",UT={DIGIT:wx,ALPHA:ep,ALPHA_DIGIT:ep+ep.toUpperCase()+wx},H4=(t=16,e=UT.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function q4(t){return!!(t&&Tn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const K4=t=>{const e=new Array(10),n=(r,s)=>{if(ph(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Jo(r)?[]:{};return Yl(r,(o,a)=>{const l=n(o,s+1);!wl(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},Q4=lr("AsyncFunction"),G4=t=>t&&(ph(t)||Tn(t))&&Tn(t.then)&&Tn(t.catch),P={isArray:Jo,isArrayBuffer:LT,isBuffer:y4,isFormData:I4,isArrayBufferView:v4,isString:x4,isNumber:DT,isBoolean:w4,isObject:ph,isPlainObject:_u,isUndefined:wl,isDate:_4,isFile:E4,isBlob:S4,isRegExp:V4,isFunction:Tn,isStream:b4,isURLSearchParams:R4,isTypedArray:L4,isFileList:T4,forEach:Yl,merge:Hm,extend:C4,trim:A4,stripBOM:k4,inherits:P4,toFlatObject:N4,kindOf:hh,kindOfTest:lr,endsWith:j4,toArray:O4,forEachEntry:D4,matchAll:M4,isHTMLForm:$4,hasOwnProperty:xx,hasOwnProp:xx,reduceDescriptors:VT,freezeMethods:U4,toObjectSet:B4,toCamelCase:F4,noop:z4,toFiniteNumber:W4,findKey:MT,global:$T,isContextDefined:FT,ALPHABET:UT,generateString:H4,isSpecCompliantForm:q4,toJSONObject:K4,isAsyncFn:Q4,isThenable:G4};function he(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}P.inherits(he,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:P.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const BT=he.prototype,zT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{zT[t]={value:t}});Object.defineProperties(he,zT);Object.defineProperty(BT,"isAxiosError",{value:!0});he.from=(t,e,n,r,s,i)=>{const o=Object.create(BT);return P.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),he.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const X4=null;function qm(t){return P.isPlainObject(t)||P.isArray(t)}function WT(t){return P.endsWith(t,"[]")?t.slice(0,-2):t}function _x(t,e,n){return t?t.concat(e).map(function(s,i){return s=WT(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function Y4(t){return P.isArray(t)&&!t.some(qm)}const J4=P.toFlatObject(P,{},null,function(e){return/^is[A-Z]/.test(e)});function mh(t,e,n){if(!P.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=P.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,_){return!P.isUndefined(_[g])});const r=n.metaTokens,s=n.visitor||d,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&P.isSpecCompliantForm(e);if(!P.isFunction(s))throw new TypeError("visitor must be a function");function c(y){if(y===null)return"";if(P.isDate(y))return y.toISOString();if(!l&&P.isBlob(y))throw new he("Blob is not supported. Use a Buffer instead.");return P.isArrayBuffer(y)||P.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,g,_){let x=y;if(y&&!_&&typeof y=="object"){if(P.endsWith(g,"{}"))g=r?g:g.slice(0,-2),y=JSON.stringify(y);else if(P.isArray(y)&&Y4(y)||(P.isFileList(y)||P.endsWith(g,"[]"))&&(x=P.toArray(y)))return g=WT(g),x.forEach(function(w,E){!(P.isUndefined(w)||w===null)&&e.append(o===!0?_x([g],E,i):o===null?g:g+"[]",c(w))}),!1}return qm(y)?!0:(e.append(_x(_,g,i),c(y)),!1)}const f=[],p=Object.assign(J4,{defaultVisitor:d,convertValue:c,isVisitable:qm});function m(y,g){if(!P.isUndefined(y)){if(f.indexOf(y)!==-1)throw Error("Circular reference detected in "+g.join("."));f.push(y),P.forEach(y,function(x,v){(!(P.isUndefined(x)||x===null)&&s.call(e,x,P.isString(v)?v.trim():v,g,p))===!0&&m(x,g?g.concat(v):[v])}),f.pop()}}if(!P.isObject(t))throw new TypeError("data must be an object");return m(t),e}function Ex(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Qy(t,e){this._pairs=[],t&&mh(t,this,e)}const HT=Qy.prototype;HT.append=function(e,n){this._pairs.push([e,n])};HT.toString=function(e){const n=e?function(r){return e.call(this,r,Ex)}:Ex;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Z4(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function qT(t,e,n){if(!e)return t;const r=n&&n.encode||Z4,s=n&&n.serialize;let i;if(s?i=s(e,n):i=P.isURLSearchParams(e)?e.toString():new Qy(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class eO{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){P.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Sx=eO,KT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},tO=typeof URLSearchParams<"u"?URLSearchParams:Qy,nO=typeof FormData<"u"?FormData:null,rO=typeof Blob<"u"?Blob:null,sO=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),iO=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Hn={isBrowser:!0,classes:{URLSearchParams:tO,FormData:nO,Blob:rO},isStandardBrowserEnv:sO,isStandardBrowserWebWorkerEnv:iO,protocols:["http","https","file","blob","url","data"]};function oO(t,e){return mh(t,new Hn.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return Hn.isNode&&P.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function aO(t){return P.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function lO(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function QT(t){function e(n,r,s,i){let o=n[i++];const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&P.isArray(s)?s.length:o,l?(P.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!P.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&P.isArray(s[o])&&(s[o]=lO(s[o])),!a)}if(P.isFormData(t)&&P.isFunction(t.entries)){const n={};return P.forEachEntry(t,(r,s)=>{e(aO(r),s,n,0)}),n}return null}function cO(t,e,n){if(P.isString(t))try{return(e||JSON.parse)(t),P.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Gy={transitional:KT,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=P.isObject(e);if(i&&P.isHTMLForm(e)&&(e=new FormData(e)),P.isFormData(e))return s&&s?JSON.stringify(QT(e)):e;if(P.isArrayBuffer(e)||P.isBuffer(e)||P.isStream(e)||P.isFile(e)||P.isBlob(e))return e;if(P.isArrayBufferView(e))return e.buffer;if(P.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return oO(e,this.formSerializer).toString();if((a=P.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return mh(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),cO(e)):e}],transformResponse:[function(e){const n=this.transitional||Gy.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&P.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?he.from(a,he.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Hn.classes.FormData,Blob:Hn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};P.forEach(["delete","get","head","post","put","patch"],t=>{Gy.headers[t]={}});const Xy=Gy,uO=P.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dO=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&uO[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Tx=Symbol("internals");function _a(t){return t&&String(t).trim().toLowerCase()}function Eu(t){return t===!1||t==null?t:P.isArray(t)?t.map(Eu):String(t)}function hO(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const fO=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function tp(t,e,n,r,s){if(P.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!P.isString(e)){if(P.isString(r))return e.indexOf(r)!==-1;if(P.isRegExp(r))return r.test(e)}}function pO(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function mO(t,e){const n=P.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class gh{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,c){const d=_a(l);if(!d)throw new Error("header name must be a non-empty string");const f=P.findKey(s,d);(!f||s[f]===void 0||c===!0||c===void 0&&s[f]!==!1)&&(s[f||l]=Eu(a))}const o=(a,l)=>P.forEach(a,(c,d)=>i(c,d,l));return P.isPlainObject(e)||e instanceof this.constructor?o(e,n):P.isString(e)&&(e=e.trim())&&!fO(e)?o(dO(e),n):e!=null&&i(n,e,r),this}get(e,n){if(e=_a(e),e){const r=P.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return hO(s);if(P.isFunction(n))return n.call(this,s,r);if(P.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=_a(e),e){const r=P.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||tp(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=_a(o),o){const a=P.findKey(r,o);a&&(!n||tp(r,r[a],a,n))&&(delete r[a],s=!0)}}return P.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||tp(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return P.forEach(this,(s,i)=>{const o=P.findKey(r,i);if(o){n[o]=Eu(s),delete n[i];return}const a=e?pO(i):String(i).trim();a!==i&&delete n[i],n[a]=Eu(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return P.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&P.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[Tx]=this[Tx]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=_a(o);r[a]||(mO(s,o),r[a]=!0)}return P.isArray(e)?e.forEach(i):i(e),this}}gh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);P.reduceDescriptors(gh.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});P.freezeMethods(gh);const wr=gh;function np(t,e){const n=this||Xy,r=e||n,s=wr.from(r.headers);let i=r.data;return P.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function GT(t){return!!(t&&t.__CANCEL__)}function Jl(t,e,n){he.call(this,t??"canceled",he.ERR_CANCELED,e,n),this.name="CanceledError"}P.inherits(Jl,he,{__CANCEL__:!0});function gO(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new he("Request failed with status code "+n.status,[he.ERR_BAD_REQUEST,he.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const yO=Hn.isStandardBrowserEnv?function(){return{write:function(n,r,s,i,o,a){const l=[];l.push(n+"="+encodeURIComponent(r)),P.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),P.isString(i)&&l.push("path="+i),P.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function vO(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function xO(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function XT(t,e){return t&&!vO(e)?xO(t,e):e}const wO=Hn.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let o=i;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){const a=P.isString(o)?s(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function _O(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function EO(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[i];o||(o=c),n[s]=l,r[s]=c;let f=i,p=0;for(;f!==s;)p+=n[f++],f=f%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const m=d&&c-d;return m?Math.round(p*1e3/m):void 0}}function bx(t,e){let n=0;const r=EO(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-n,l=r(a),c=i<=o;n=i;const d={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-i)/l:void 0,event:s};d[e?"download":"upload"]=!0,t(d)}}const SO=typeof XMLHttpRequest<"u",TO=SO&&function(t){return new Promise(function(n,r){let s=t.data;const i=wr.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let c;P.isFormData(s)&&(Hn.isStandardBrowserEnv||Hn.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?P.isString(c=i.getContentType())&&i.setContentType(c.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let d=new XMLHttpRequest;if(t.auth){const y=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(y+":"+g))}const f=XT(t.baseURL,t.url);d.open(t.method.toUpperCase(),qT(f,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function p(){if(!d)return;const y=wr.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),_={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:y,config:t,request:d};gO(function(v){n(v),l()},function(v){r(v),l()},_),d=null}if("onloadend"in d?d.onloadend=p:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(p)},d.onabort=function(){d&&(r(new he("Request aborted",he.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new he("Network Error",he.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let g=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const _=t.transitional||KT;t.timeoutErrorMessage&&(g=t.timeoutErrorMessage),r(new he(g,_.clarifyTimeoutError?he.ETIMEDOUT:he.ECONNABORTED,t,d)),d=null},Hn.isStandardBrowserEnv){const y=wO(f)&&t.xsrfCookieName&&yO.read(t.xsrfCookieName);y&&i.set(t.xsrfHeaderName,y)}s===void 0&&i.setContentType(null),"setRequestHeader"in d&&P.forEach(i.toJSON(),function(g,_){d.setRequestHeader(_,g)}),P.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),o&&o!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",bx(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",bx(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=y=>{d&&(r(!y||y.type?new Jl(null,t,d):y),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const m=_O(f);if(m&&Hn.protocols.indexOf(m)===-1){r(new he("Unsupported protocol "+m+":",he.ERR_BAD_REQUEST,t));return}d.send(s||null)})},Km={http:X4,xhr:TO};P.forEach(Km,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Ix=t=>`- ${t}`,bO=t=>P.isFunction(t)||t===null||t===!1,YT={getAdapter:t=>{t=P.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!bO(n)&&(r=Km[(o=String(n)).toLowerCase()],r===void 0))throw new he(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(Ix).join(`
`):" "+Ix(i[0]):"as no adapter specified";throw new he("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Km};function rp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Jl(null,t)}function Rx(t){return rp(t),t.headers=wr.from(t.headers),t.data=np.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),YT.getAdapter(t.adapter||Xy.adapter)(t).then(function(r){return rp(t),r.data=np.call(t,t.transformResponse,r),r.headers=wr.from(r.headers),r},function(r){return GT(r)||(rp(t),r&&r.response&&(r.response.data=np.call(t,t.transformResponse,r.response),r.response.headers=wr.from(r.response.headers))),Promise.reject(r)})}const Ax=t=>t instanceof wr?t.toJSON():t;function Po(t,e){e=e||{};const n={};function r(c,d,f){return P.isPlainObject(c)&&P.isPlainObject(d)?P.merge.call({caseless:f},c,d):P.isPlainObject(d)?P.merge({},d):P.isArray(d)?d.slice():d}function s(c,d,f){if(P.isUndefined(d)){if(!P.isUndefined(c))return r(void 0,c,f)}else return r(c,d,f)}function i(c,d){if(!P.isUndefined(d))return r(void 0,d)}function o(c,d){if(P.isUndefined(d)){if(!P.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,f){if(f in e)return r(c,d);if(f in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d)=>s(Ax(c),Ax(d),!0)};return P.forEach(Object.keys(Object.assign({},t,e)),function(d){const f=l[d]||s,p=f(t[d],e[d],d);P.isUndefined(p)&&f!==a||(n[d]=p)}),n}const JT="1.6.0",Yy={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Yy[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const Cx={};Yy.transitional=function(e,n,r){function s(i,o){return"[Axios v"+JT+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new he(s(o," has been removed"+(n?" in "+n:"")),he.ERR_DEPRECATED);return n&&!Cx[o]&&(Cx[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};function IO(t,e,n){if(typeof t!="object")throw new he("options must be an object",he.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new he("option "+i+" must be "+l,he.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new he("Unknown option "+i,he.ERR_BAD_OPTION)}}const Qm={assertOptions:IO,validators:Yy},Vr=Qm.validators;class dd{constructor(e){this.defaults=e,this.interceptors={request:new Sx,response:new Sx}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Po(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Qm.assertOptions(r,{silentJSONParsing:Vr.transitional(Vr.boolean),forcedJSONParsing:Vr.transitional(Vr.boolean),clarifyTimeoutError:Vr.transitional(Vr.boolean)},!1),s!=null&&(P.isFunction(s)?n.paramsSerializer={serialize:s}:Qm.assertOptions(s,{encode:Vr.function,serialize:Vr.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&P.merge(i.common,i[n.method]);i&&P.forEach(["delete","get","head","post","put","patch","common"],y=>{delete i[y]}),n.headers=wr.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let d,f=0,p;if(!l){const y=[Rx.bind(this),void 0];for(y.unshift.apply(y,a),y.push.apply(y,c),p=y.length,d=Promise.resolve(n);f<p;)d=d.then(y[f++],y[f++]);return d}p=a.length;let m=n;for(f=0;f<p;){const y=a[f++],g=a[f++];try{m=y(m)}catch(_){g.call(this,_);break}}try{d=Rx.call(this,m)}catch(y){return Promise.reject(y)}for(f=0,p=c.length;f<p;)d=d.then(c[f++],c[f++]);return d}getUri(e){e=Po(this.defaults,e);const n=XT(e.baseURL,e.url);return qT(n,e.params,e.paramsSerializer)}}P.forEach(["delete","get","head","options"],function(e){dd.prototype[e]=function(n,r){return this.request(Po(r||{},{method:e,url:n,data:(r||{}).data}))}});P.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(Po(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}dd.prototype[e]=n(),dd.prototype[e+"Form"]=n(!0)});const Su=dd;class Jy{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new Jl(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Jy(function(s){e=s}),cancel:e}}}const RO=Jy;function AO(t){return function(n){return t.apply(null,n)}}function CO(t){return P.isObject(t)&&t.isAxiosError===!0}const Gm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Gm).forEach(([t,e])=>{Gm[e]=t});const kO=Gm;function ZT(t){const e=new Su(t),n=OT(Su.prototype.request,e);return P.extend(n,Su.prototype,e,{allOwnKeys:!0}),P.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return ZT(Po(t,s))},n}const et=ZT(Xy);et.Axios=Su;et.CanceledError=Jl;et.CancelToken=RO;et.isCancel=GT;et.VERSION=JT;et.toFormData=mh;et.AxiosError=he;et.Cancel=et.CanceledError;et.all=function(e){return Promise.all(e)};et.spread=AO;et.isAxiosError=CO;et.mergeConfig=Po;et.AxiosHeaders=wr;et.formToJSON=t=>QT(P.isHTMLForm(t)?new FormData(t):t);et.getAdapter=YT.getAdapter;et.HttpStatusCode=kO;et.default=et;const PO=et,eb=PO.create({baseURL:{}.VITE_ENDPOINT||"https://express-zingmp3-awx6.vercel.app"}),NO=t=>new Date(t.toDate().getTime()).toLocaleString(),Yn=()=>JSON.parse(localStorage.getItem("HD-MP3")||"{}"),gt=(t,e)=>{const n=Yn();return n[t]=e,localStorage.setItem("HD-MP3",JSON.stringify(n))},Zy=t=>(n=>n.toLocaleLowerCase().replace(/||||||||||/g,"a").replace(/||||||||||/g,"e").replace(/||||/g,"i").replace(/||||||||||/g,"o").replace(/||||||||||/g,"u").replace(/||||/g,"y").replace(//g,"d"))(t).toLocaleLowerCase().replaceAll(/[\W_]/g,"")+"_"+ud(4),jO=async t=>{if(!t)return;const e=await m4(t);if(!e)return;const{title:n,artist:r,images:s}=e,i={name:"",singer:"",image:null};return i.name=n||t.name,i.singer=r||"...",s.length&&(i.image=s[0].data),i},tb=async t=>{const e=Date.now(),n=await eb.post("/api/image/encode",t);let r;n&&(r=n.data.encode);const s=(Date.now()-e)/1e3;return console.log(">>> api: get blurHash encode finished after",s),{encode:r}},OO=async t=>{const e=new FormData;e.append("file",t);const n=Date.now(),r=await eb.post("/api/image/optimize",e,{responseType:"blob"});let s;r&&(s=r.data);const i=(Date.now()-n)/1e3;return console.log(">>> api: optimize finished after",i),s},No=t=>{if(!t)return"";let e=0,n=+t.toFixed(0);for(;n>=60;)n-=60,e++;return e<10?n>=10?`0${e}:${n}`:`0${e}:0${n}`:n>=10?`${e}:${n}`:`${e}:0${n}`},LO=(t,e)=>{const n=e.findIndex(r=>r.id===t.id);if(n!=-1)return e[n]=t,n},e0=({...t})=>({...{name:"",singer:"",image_url:"",song_url:"",by:"",duration:0,lyric_id:"",image_file_path:"",song_file_path:"",id:"",song_in:"",blurhash_encode:"",size:0},...t}),t0=({...t})=>({...{id:"",name:"",song_ids:[],by:"",image_url:"",blurhash_encode:""},...t}),n0=async t=>{await new Promise(e=>setTimeout(e,t))},nb=(t,e,n,r,s)=>{if(!s||!r){console.log("song list item lack of props");return}e||n&&n(!0);let i=[...r];const o=i.indexOf(t);o===-1?i.push(t):i.splice(o,1),s(i),i.length||n&&n(!1)};let Xm=cd[0];const DO=Yn(),kx=DO.theme;kx&&cd.forEach(t=>{t.id===kx&&(Xm=t)});const rb={theme:{...Xm,alpha:Xm.type==="light"?"[#000]/[.1]":"[#fff]/[.1]"},isOnMobile:window.innerWidth<800,isDev:!1},MO=(t,e)=>{switch(e.type){case 0:{const n=e.payload.theme;return{...t,theme:{...n,alpha:n.type==="dark"?"[#fff]/[.1]":"[#000]/[.1]"}}}}},$O=()=>{const[t,e]=h.useReducer(MO,rb),n=h.useCallback(r=>{console.log("set theme"),e({type:0,payload:{theme:r}})},[]);return{state:t,setTheme:n}},FO={state:rb,setTheme:()=>{}},sb=h.createContext(FO),VO=({children:t})=>u.jsx(sb.Provider,{value:$O(),children:t}),Z=()=>{const{state:{...t},...e}=h.useContext(sb);return{...t,...e}};function Be({className:t}){const{theme:e}=Z();return u.jsx("div",{className:`animate-pulse rounded-[4px] bg-${e.alpha} ${t}`})}const yh=[...Array(4).keys()].map(t=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Be,{className:"h-[18px] w-[18px]"}),u.jsx(Be,{className:"h-[54px] w-[54px] ml-[10px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Be,{className:"h-[20px] mb-[5px] w-[150px]"}),u.jsx(Be,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},t)),ib=[...Array(1).keys()].map(t=>u.jsx(Be,{className:"w-full h-[40px] mb-[10px]"},t)),UO=[...Array(2).keys()].map(t=>u.jsxs("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:[u.jsx(Be,{className:"pt-[100%] rounded-[8px]"}),u.jsx(Be,{className:"h-[22px] mt-[6px] w-[50%]"})]},t));var BO=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],ka=t=>{let e=0;for(let n=0;n<t.length;n++){let r=t[n],s=BO.indexOf(r);e=e*83+s}return e},sp=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},ip=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},zO=t=>t<0?-1:1,op=(t,e)=>zO(t)*Math.pow(Math.abs(t),e),Px=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},WO=t=>{if(!t||t.length<6)throw new Px("The blurhash string must be at least 6 characters");let e=ka(t[0]),n=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*n)throw new Px(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*n}`)},HO=t=>{let e=t>>16,n=t>>8&255,r=t&255;return[sp(e),sp(n),sp(r)]},qO=(t,e)=>{let n=Math.floor(t/361),r=Math.floor(t/19)%19,s=t%19;return[op((n-9)/9,2)*e,op((r-9)/9,2)*e,op((s-9)/9,2)*e]},KO=(t,e,n,r)=>{WO(t),r=r|1;let s=ka(t[0]),i=Math.floor(s/9)+1,o=s%9+1,a=(ka(t[1])+1)/166,l=new Array(o*i);for(let f=0;f<l.length;f++)if(f===0){let p=ka(t.substring(2,6));l[f]=HO(p)}else{let p=ka(t.substring(4+f*2,6+f*2));l[f]=qO(p,a*r)}let c=e*4,d=new Uint8ClampedArray(c*n);for(let f=0;f<n;f++)for(let p=0;p<e;p++){let m=0,y=0,g=0;for(let w=0;w<i;w++)for(let E=0;E<o;E++){let S=Math.cos(Math.PI*p*E/e)*Math.cos(Math.PI*f*w/n),b=l[E+w*o];m+=b[0]*S,y+=b[1]*S,g+=b[2]*S}let _=ip(m),x=ip(y),v=ip(g);d[4*p+0+f*c]=_,d[4*p+1+f*c]=x,d[4*p+2+f*c]=v,d[4*p+3+f*c]=255}return d},QO=KO,GO=Object.defineProperty,XO=Object.defineProperties,YO=Object.getOwnPropertyDescriptors,hd=Object.getOwnPropertySymbols,ob=Object.prototype.hasOwnProperty,ab=Object.prototype.propertyIsEnumerable,Nx=(t,e,n)=>e in t?GO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ym=(t,e)=>{for(var n in e||(e={}))ob.call(e,n)&&Nx(t,n,e[n]);if(hd)for(var n of hd(e))ab.call(e,n)&&Nx(t,n,e[n]);return t},Jm=(t,e)=>XO(t,YO(e)),lb=(t,e)=>{var n={};for(var r in t)ob.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&hd)for(var r of hd(t))e.indexOf(r)<0&&ab.call(t,r)&&(n[r]=t[r]);return n},cb=class extends h.PureComponent{constructor(){super(...arguments),this.canvas=null,this.handleRef=e=>{this.canvas=e,this.draw()},this.draw=()=>{let{hash:e,height:n,punch:r,width:s}=this.props;if(this.canvas){let i=QO(e,s,n,r),o=this.canvas.getContext("2d"),a=o.createImageData(s,n);a.data.set(i),o.putImageData(a,0,0)}}}componentDidUpdate(){this.draw()}render(){let e=this.props,{hash:n,height:r,width:s}=e,i=lb(e,["hash","height","width"]);return h.createElement("canvas",Jm(Ym({},i),{height:r,width:s,ref:this.handleRef}))}};cb.defaultProps={height:128,width:128};var JO={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},ub=class extends h.PureComponent{componentDidUpdate(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")}render(){let e=this.props,{hash:n,height:r,width:s,punch:i,resolutionX:o,resolutionY:a,style:l}=e,c=lb(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return h.createElement("div",Jm(Ym({},c),{style:Jm(Ym({display:"inline-block",height:r,width:s},l),{position:"relative"})}),h.createElement(cb,{hash:n,height:a,width:o,punch:i,style:JO}))}};ub.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32};const ZO="/HD-MP3/assets/logo-17dffbdd.png";function Lr({src:t,classNames:e,blurHashEncode:n,onError:r}){const[s,i]=h.useState(!1),o=h.useRef(null),a=()=>{i(!0),t&&t!=null&&t.includes("blob")&&URL.revokeObjectURL(t)},l=()=>{const d=o.current;d.src="https://placehold.co/100",i(!0)},c=()=>{r?(r(),l()):l()};return u.jsxs(u.Fragment,{children:[!s&&u.jsx(u.Fragment,{children:n?u.jsx(ub,{hash:n,height:"100%",width:"100%"}):u.jsx(Be,{className:"w-full h-0"})}),u.jsx("img",{onLoad:a,onError:c,className:`${e||""} w-full ${s?"":"hidden"}`,src:t||ZO,ref:o})]})}const eL=({className:t,onClick:e,theme:n})=>u.jsx("div",{className:`w-full rounded-[8px] border ${n.type==="light"?"border-[#333]":"border-[#fff]"} relative`,children:u.jsx("div",{onClick:()=>e(),className:`${n==null?void 0:n.content_hover_text} ${t} cursor-pointer`,children:u.jsx(Y,{className:`absolute top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ${n.type==="light"?"text-[#333]":"text-[#fff]"}`,children:u.jsx(ad,{className:"w-[40px] max-[549px]:w-[30px]"})})})}),tL=vT("",{variants:{variant:{default:"py-[20px] px-[14px]",thin:"p-[6px]"}},defaultVariants:{variant:"default"}});function Ri({children:t,theme:e,className:n,color:r="container",variant:s}){const i={black:"bg-[#292929]",container:e.container,sidebar:e.side_bar_bg};return u.jsx("div",{className:`rounded-[6px]  ${e.type==="light"?"text-[#333]":"text-white"} ${i[r]} border-[1px] border-${e.alpha} ${tL({variant:s,className:n})}`,children:t})}function lo({className:t,icon:e,label:n,to:r,arrowIcon:s,children:i,onClick:o}){return r?u.jsxs(ds,{className:"w-full flex flex-row justify-between items-center "+t,to:r,children:[u.jsxs("div",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]}),i,s&&u.jsx("span",{children:s})]}):o?u.jsx("button",{onClick:o,className:"w-full flex flex-row justify-between items-center "+t,children:u.jsxs("p",{className:"inline-flex",children:[e,u.jsx("span",{className:"text-lg font-medium",children:n})]})}):u.jsx("p",{children:"No onClick"})}const r0={userSongs:[],userPlaylists:[],adminSongs:[],adminPlaylists:[],initial:!1},nL=(t,e)=>{switch(e.type){case 8:{const n=e.payload;return{...t,...n,initial:!0}}case 2:{const{songs:n}=e.payload,r=[...t.userSongs,...n];return{...t,userSongs:r}}case 3:{const{song:n}=e.payload,r=[...t.userSongs],s=r.findIndex(i=>i.id===n.id);return s===-1?t:(r[s]=n,{...t,userSongs:r})}case 4:{const{playlist:n}=e.payload;return{...t,userPlaylists:[...t.userPlaylists,n]}}case 5:{const{playlist:n}=e.payload,r=[...t.userPlaylists],s=r.findIndex(i=>i.id===n.id);return s===-1?t:(r[s]=n,{...t,userPlaylists:r})}case 9:return r0;case 0:{const{songs:n}=e.payload;return{...t,userSongs:n}}case 6:{const{playlists:n}=e.payload;return{...t,userPlaylists:n}}default:return t}},rL=()=>{const[t,e]=h.useReducer(nL,r0),n=h.useCallback(d=>e({type:0,payload:{songs:d}}),[]),r=h.useCallback(d=>e({type:2,payload:{songs:d}}),[]),s=h.useCallback(d=>e({type:3,payload:{song:d}}),[]),i=h.useCallback(d=>e({type:4,payload:{playlist:d}}),[]),o=h.useCallback(d=>e({type:6,payload:{playlists:d}}),[]),a=h.useCallback(d=>e({type:5,payload:{playlist:d}}),[]),l=h.useCallback(()=>e({type:9}),[]),c=h.useCallback(d=>e({type:8,payload:d}),[]);return{state:t,resetSongPlaylistStore:l,setUserSongs:n,addUserSongs:r,addUserPlaylist:i,updateUserSong:s,updateUserPlaylist:a,initSongsContext:c,setUserPlaylists:o}},sL={state:r0,initSongsContext:()=>{},addUserPlaylist:()=>{},addUserSongs:()=>{},resetSongPlaylistStore:()=>{},setUserSongs:()=>{},updateUserPlaylist:()=>{},updateUserSong:()=>{},setUserPlaylists:()=>{}},db=h.createContext(sL),iL=({children:t})=>u.jsx(db.Provider,{value:rL(),children:t}),Ge=()=>{const{state:{...t},...e}=h.useContext(db);return{...t,...e}};function oL({data:t,theme:e,selectedSongs:n,active:r,onClick:s,isChecked:i,setSelectedSongs:o,setIsChecked:a,inProcess:l},c){const d=h.useCallback(()=>n?(n==null?void 0:n.indexOf(t))!=-1:!1,[n]),f=m=>{!o||!n||!a||i!==void 0&&nb(m,i,a,n,o)},p={button:`${e.content_bg} rounded-full`,songListButton:"mr-[10px] px-[5px]",itemContainer:`hover:bg-${e.alpha} item-container cursor-pointer transition-opacity duration-[.3s] border-b last:border-none border-${e.alpha} flex rounded-[4px] justify-between w-[100%] p-[10px] ${d()&&"bg-"+e.alpha}`,imageFrame:"w-[54px] h-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]"};return u.jsx(u.Fragment,{children:u.jsx("div",{ref:c,className:`${p.itemContainer} ${l?"pointer-events-none":""}`,children:u.jsxs("div",{className:"flex flex-row w-[100%]",children:[!l&&u.jsx(u.Fragment,{children:i?u.jsx("button",{onClick:()=>f(t),className:`${p.songListButton} text-[inherit]`,children:d()?u.jsx(ao,{className:"w-[18px]"}):u.jsx(xl,{className:"w-[18px]"})}):u.jsx("button",{onClick:()=>f(t),className:`${p.songListButton} block`,children:u.jsx(xl,{className:"w-[18px] "})})}),u.jsxs("div",{className:"flex-grow flex",onClick:m=>i?f(t):s(m),children:[u.jsxs("div",{className:`${p.imageFrame} ${l?"ml-[28px]":""} `,children:[u.jsx(Lr,{blurHashEncode:t.blurhash_encode,src:t.image_url}),r&&u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex songContainers-center items-center justify-center",children:u.jsx(dh,{className:"w-[28px] text-[#fff]"})})]}),u.jsxs("div",{className:`ml-[10px] ${l?"opacity-60":""}`,children:[u.jsx("h5",{className:`text-mg line-clamp-1 ${r&&e.content_text}`,children:t.name}),u.jsx("p",{className:"text-xs opacity-60 bg-blend-lighten line-clamp-1",children:t.singer})]}),l&&u.jsxs("p",{className:"ml-auto self-center flex",children:[u.jsx(Ir,{className:"w-[20px] animate-spin mr-[4px]"}),"in process..."]})]})]})})})}const hb=h.forwardRef(oL);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},aL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},pb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[d],n[f],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):aL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new lL;const p=i<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),f!==64){const y=c<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cL=function(t){const e=fb(t);return pb.encodeByteArray(e,!0)},fd=function(t){return cL(t).replace(/\./g,"")},mb=function(t){try{return pb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=()=>uL().__FIREBASE_DEFAULTS__,hL=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mb(t[1]);return e&&JSON.parse(e)},vh=()=>{try{return dL()||hL()||fL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gb=t=>{var e,n;return(n=(e=vh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},yb=t=>{const e=gb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},vb=()=>{var t;return(t=vh())===null||t===void 0?void 0:t.config},xb=t=>{var e;return(e=vh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[fd(JSON.stringify(n)),fd(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function gL(){var t;const e=(t=vh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xL(){const t=Ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wL(){try{return typeof indexedDB=="object"}catch{return!1}}function _L(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL="FirebaseError";class cr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=EL,Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zl.prototype.create)}}class Zl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?SL(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new cr(s,a,r)}}function SL(t,e){return t.replace(TL,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const TL=/\{\$([^}]+)}/g;function bL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(jx(i)&&jx(o)){if(!pd(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function jx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function IL(t,e){const n=new RL(t,e);return n.subscribe.bind(n)}class RL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");AL(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ap),s.error===void 0&&(s.error=ap),s.complete===void 0&&(s.complete=ap);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ap(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){return t&&t._delegate?t._delegate:t}class xs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CL=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new pL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PL(e))try{this.getOrInitializeService({instanceIdentifier:Hs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hs){return this.instances.has(e)}getOptions(e=Hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hs){return this.component?this.component.multipleInstances?e:Hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function kL(t){return t===Hs?void 0:t}function PL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const jL={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},OL=pe.INFO,LL={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},DL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=LL[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class s0{constructor(e){this.name=e,this._logLevel=OL,this._logHandler=DL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const ML=(t,e)=>e.some(n=>t instanceof n);let Ox,Lx;function $L(){return Ox||(Ox=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FL(){return Lx||(Lx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _b=new WeakMap,Zm=new WeakMap,Eb=new WeakMap,lp=new WeakMap,i0=new WeakMap;function VL(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(hs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&_b.set(n,t)}).catch(()=>{}),i0.set(e,t),e}function UL(t){if(Zm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Zm.set(t,e)}let eg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Zm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Eb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BL(t){eg=t(eg)}function zL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(cp(this),e,...n);return Eb.set(r,e.sort?e.sort():[e]),hs(r)}:FL().includes(t)?function(...e){return t.apply(cp(this),e),hs(_b.get(this))}:function(...e){return hs(t.apply(cp(this),e))}}function WL(t){return typeof t=="function"?zL(t):(t instanceof IDBTransaction&&UL(t),ML(t,$L())?new Proxy(t,eg):t)}function hs(t){if(t instanceof IDBRequest)return VL(t);if(lp.has(t))return lp.get(t);const e=WL(t);return e!==t&&(lp.set(t,e),i0.set(e,t)),e}const cp=t=>i0.get(t);function HL(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=hs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(hs(o.result),l.oldVersion,l.newVersion,hs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const qL=["get","getKey","getAll","getAllKeys","count"],KL=["put","add","delete","clear"],up=new Map;function Dx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(up.get(e))return up.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=KL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||qL.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return up.set(e,i),i}BL(t=>({...t,get:(e,n,r)=>Dx(e,n)||t.get(e,n,r),has:(e,n)=>!!Dx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const tg="@firebase/app",Mx="0.9.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=new s0("@firebase/app"),XL="@firebase/app-compat",YL="@firebase/analytics-compat",JL="@firebase/analytics",ZL="@firebase/app-check-compat",e3="@firebase/app-check",t3="@firebase/auth",n3="@firebase/auth-compat",r3="@firebase/database",s3="@firebase/database-compat",i3="@firebase/functions",o3="@firebase/functions-compat",a3="@firebase/installations",l3="@firebase/installations-compat",c3="@firebase/messaging",u3="@firebase/messaging-compat",d3="@firebase/performance",h3="@firebase/performance-compat",f3="@firebase/remote-config",p3="@firebase/remote-config-compat",m3="@firebase/storage",g3="@firebase/storage-compat",y3="@firebase/firestore",v3="@firebase/firestore-compat",x3="firebase",w3="10.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="[DEFAULT]",_3={[tg]:"fire-core",[XL]:"fire-core-compat",[JL]:"fire-analytics",[YL]:"fire-analytics-compat",[e3]:"fire-app-check",[ZL]:"fire-app-check-compat",[t3]:"fire-auth",[n3]:"fire-auth-compat",[r3]:"fire-rtdb",[s3]:"fire-rtdb-compat",[i3]:"fire-fn",[o3]:"fire-fn-compat",[a3]:"fire-iid",[l3]:"fire-iid-compat",[c3]:"fire-fcm",[u3]:"fire-fcm-compat",[d3]:"fire-perf",[h3]:"fire-perf-compat",[f3]:"fire-rc",[p3]:"fire-rc-compat",[m3]:"fire-gcs",[g3]:"fire-gcs-compat",[y3]:"fire-fst",[v3]:"fire-fst-compat","fire-js":"fire-js",[x3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md=new Map,rg=new Map;function E3(t,e){try{t.container.addComponent(e)}catch(n){hi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fi(t){const e=t.name;if(rg.has(e))return hi.debug(`There were multiple attempts to register component ${e}.`),!1;rg.set(e,t);for(const n of md.values())E3(n,t);return!0}function xh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},fs=new Zl("app","Firebase",S3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=w3;function Sb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ng,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw fs.create("bad-app-name",{appName:String(s)});if(n||(n=vb()),!n)throw fs.create("no-options");const i=md.get(s);if(i){if(pd(n,i.options)&&pd(r,i.config))return i;throw fs.create("duplicate-app",{appName:s})}const o=new NL(s);for(const l of rg.values())o.addComponent(l);const a=new T3(n,r,o);return md.set(s,a),a}function o0(t=ng){const e=md.get(t);if(!e&&t===ng&&vb())return Sb();if(!e)throw fs.create("no-app",{appName:t});return e}function Jn(t,e,n){var r;let s=(r=_3[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hi.warn(a.join(" "));return}fi(new xs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3="firebase-heartbeat-database",I3=1,_l="firebase-heartbeat-store";let dp=null;function Tb(){return dp||(dp=HL(b3,I3,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(_l)}}}).catch(t=>{throw fs.create("idb-open",{originalErrorMessage:t.message})})),dp}async function R3(t){try{return await(await Tb()).transaction(_l).objectStore(_l).get(bb(t))}catch(e){if(e instanceof cr)hi.warn(e.message);else{const n=fs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hi.warn(n.message)}}}async function $x(t,e){try{const r=(await Tb()).transaction(_l,"readwrite");await r.objectStore(_l).put(e,bb(t)),await r.done}catch(n){if(n instanceof cr)hi.warn(n.message);else{const r=fs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});hi.warn(r.message)}}}function bb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=1024,C3=30*24*60*60*1e3;class k3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new N3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Fx();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=C3}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Fx(),{heartbeatsToSend:n,unsentEntries:r}=P3(this._heartbeatsCache.heartbeats),s=fd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Fx(){return new Date().toISOString().substring(0,10)}function P3(t,e=A3){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Vx(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Vx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class N3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wL()?_L().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await R3(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return $x(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return $x(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Vx(t){return fd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3(t){fi(new xs("platform-logger",e=>new QL(e),"PRIVATE")),fi(new xs("heartbeat",e=>new k3(e),"PRIVATE")),Jn(tg,Mx,t),Jn(tg,Mx,"esm2017"),Jn("fire-js","")}j3("");function a0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Ib(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const O3=Ib,Rb=new Zl("auth","Firebase",Ib());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=new s0("@firebase/auth");function L3(t,...e){gd.logLevel<=pe.WARN&&gd.warn(`Auth (${Ai}): ${t}`,...e)}function Tu(t,...e){gd.logLevel<=pe.ERROR&&gd.error(`Auth (${Ai}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,...e){throw l0(t,...e)}function Zn(t,...e){return l0(t,...e)}function Ab(t,e,n){const r=Object.assign(Object.assign({},O3()),{[e]:n});return new Zl("auth","Firebase",r).create(e,{appName:t.name})}function D3(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&sr(t,"argument-error"),Ab(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function l0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Rb.create(t,...e)}function ie(t,e,...n){if(!t)throw l0(e,...n)}function mr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Tu(e),new Error(e)}function Rr(t,e){t||mr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function M3(){return Ux()==="http:"||Ux()==="https:"}function Ux(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(M3()||yL()||"connection"in navigator)?navigator.onLine:!0}function F3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Rr(n>e,"Short delay should be less than long delay!"),this.isMobile=mL()||vL()}get(){return $3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(t,e){Rr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3=new tc(3e4,6e4);function kb(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function nc(t,e,n,r,s={}){return Pb(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=ec(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),Cb.fetch()(Nb(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function Pb(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},V3),e);try{const s=new z3(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Kc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Kc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Kc(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Ab(t,d,c);sr(t,d)}}catch(s){if(s instanceof cr)throw s;sr(t,"network-request-failed",{message:String(s)})}}async function B3(t,e,n,r,s={}){const i=await nc(t,e,n,r,s);return"mfaPendingCredential"in i&&sr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Nb(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?c0(t.config,s):`${t.config.apiScheme}://${s}`}class z3{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Zn(this.auth,"network-request-failed")),U3.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Zn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W3(t,e){return nc(t,"POST","/v1/accounts:delete",e)}async function H3(t,e){return nc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function q3(t,e=!1){const n=it(t),r=await n.getIdToken(e),s=u0(r);ie(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:qa(hp(s.auth_time)),issuedAtTime:qa(hp(s.iat)),expirationTime:qa(hp(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function hp(t){return Number(t)*1e3}function u0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Tu("JWT malformed, contained fewer than 3 sections"),null;try{const s=mb(n);return s?JSON.parse(s):(Tu("Failed to decode base64 JWT payload"),null)}catch(s){return Tu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function K3(t){const e=u0(t);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cr&&Q3(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Q3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qa(this.lastLoginAt),this.creationTime=qa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yd(t){var e;const n=t.auth,r=await t.getIdToken(),s=await El(t,H3(n,{idToken:r}));ie(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?J3(i.providerUserInfo):[],a=Y3(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new jb(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function X3(t){const e=it(t);await yd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Y3(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function J3(t){return t.map(e=>{var{providerId:n}=e,r=a0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z3(t,e){const n=await Pb(t,{},async()=>{const r=ec({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Nb(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Cb.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):K3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ie(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Z3(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Sl;return r&&(ie(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ie(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ie(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sl,this.toJSON())}_performRefresh(){return mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(t,e){ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ri{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=a0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new G3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new jb(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await El(this,this.stsTokenManager.getToken(this.auth,e));return ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return q3(this,e)}reload(){return X3(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ri(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await yd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await El(this,W3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:E,isAnonymous:S,providerData:b,stsTokenManager:I}=n;ie(w&&I,e,"internal-error");const T=Sl.fromJSON(this.name,I);ie(typeof w=="string",e,"internal-error"),Ur(f,e.name),Ur(p,e.name),ie(typeof E=="boolean",e,"internal-error"),ie(typeof S=="boolean",e,"internal-error"),Ur(m,e.name),Ur(y,e.name),Ur(g,e.name),Ur(_,e.name),Ur(x,e.name),Ur(v,e.name);const A=new ri({uid:w,auth:e,email:p,emailVerified:E,displayName:f,isAnonymous:S,photoURL:y,phoneNumber:m,tenantId:g,stsTokenManager:T,createdAt:x,lastLoginAt:v});return b&&Array.isArray(b)&&(A.providerData=b.map(C=>Object.assign({},C))),_&&(A._redirectEventId=_),A}static async _fromIdTokenResponse(e,n,r=!1){const s=new Sl;s.updateFromServerResponse(n);const i=new ri({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await yd(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=new Map;function gr(t){Rr(t instanceof Function,"Expected a class definition");let e=Bx.get(t);return e?(Rr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Bx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ob.type="NONE";const zx=Ob;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(t,e,n){return`firebase:${t}:${e}:${n}`}class co{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=bu(this.userKey,s.apiKey,i),this.fullPersistenceKey=bu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ri._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new co(gr(zx),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||gr(zx);const o=bu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const f=ri._fromJSON(e,d);c!==i&&(a=f),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new co(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new co(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Mb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Lb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Fb(e))return"Blackberry";if(Vb(e))return"Webos";if(d0(e))return"Safari";if((e.includes("chrome/")||Db(e))&&!e.includes("edge/"))return"Chrome";if($b(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Lb(t=Ot()){return/firefox\//i.test(t)}function d0(t=Ot()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Db(t=Ot()){return/crios\//i.test(t)}function Mb(t=Ot()){return/iemobile/i.test(t)}function $b(t=Ot()){return/android/i.test(t)}function Fb(t=Ot()){return/blackberry/i.test(t)}function Vb(t=Ot()){return/webos/i.test(t)}function wh(t=Ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eD(t=Ot()){var e;return wh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tD(){return xL()&&document.documentMode===10}function Ub(t=Ot()){return wh(t)||$b(t)||Vb(t)||Fb(t)||/windows phone/i.test(t)||Mb(t)}function nD(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(t,e=[]){let n;switch(t){case"Browser":n=Wx(Ot());break;case"Worker":n=`${Wx(Ot())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ai}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(t,e={}){return nc(t,"GET","/v2/passwordPolicy",kb(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=6;class oD{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:iD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hx(this),this.idTokenSubscription=new Hx(this),this.beforeStateQueue=new rD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await co.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await yd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=F3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?it(e):null;return n&&ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sD(this),n=new oD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gr(e)||this._popupRedirectResolver;ie(n,this,"argument-error"),this.redirectPersistenceManager=await co.create(this,[gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Bb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&L3(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function _h(t){return it(t)}class Hx{constructor(e){this.auth=e,this.observer=null,this.addObserver=IL(n=>this.observer=n)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function cD(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Zn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",lD().appendChild(r)})}function uD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(t,e){const n=xh(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(pd(i,e??{}))return s;sr(s,"already-initialized")}return n.initialize({options:e})}function hD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function fD(t,e,n){const r=_h(t);ie(r._canInitEmulator,r,"emulator-config-failed"),ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=zb(e),{host:o,port:a}=pD(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||mD()}function zb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function pD(t){const e=zb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:qx(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:qx(o)}}}function qx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function mD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return mr("not implemented")}_getIdTokenResponse(e){return mr("not implemented")}_linkToIdToken(e,n){return mr("not implemented")}_getReauthenticationResolver(e){return mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(t,e){return B3(t,"POST","/v1/accounts:signInWithIdp",kb(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD="http://localhost";class pi extends Wb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new pi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):sr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=a0(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new pi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return uo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,uo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,uo(e,n)}buildRequest(){const e={requestUri:gD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ec(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc extends h0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends rc{constructor(){super("facebook.com")}static credential(e){return pi._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kr.credential(e.oauthAccessToken)}catch{return null}}}Kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Kr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn extends rc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return pi._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return zn.credential(n,r)}catch{return null}}}zn.GOOGLE_SIGN_IN_METHOD="google.com";zn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends rc{constructor(){super("github.com")}static credential(e){return pi._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qr.credential(e.oauthAccessToken)}catch{return null}}}Qr.GITHUB_SIGN_IN_METHOD="github.com";Qr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends rc{constructor(){super("twitter.com")}static credential(e,n){return pi._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Gr.credential(n,r)}catch{return null}}}Gr.TWITTER_SIGN_IN_METHOD="twitter.com";Gr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ri._fromIdTokenResponse(e,r,s),o=Kx(r);return new jo({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Kx(r);return new jo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Kx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd extends cr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,vd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new vd(e,n,r,s)}}function Hb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?vd._fromErrorAndOperation(t,i,e,r):i})}async function yD(t,e,n=!1){const r=await El(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return jo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vD(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await El(t,Hb(r,s,e,t),n);ie(i.idToken,r,"internal-error");const o=u0(i.idToken);ie(o,r,"internal-error");const{sub:a}=o;return ie(t.uid===a,r,"user-mismatch"),jo._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&sr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xD(t,e,n=!1){const r="signIn",s=await Hb(t,r,e),i=await jo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function wD(t,e,n,r){return it(t).onIdTokenChanged(e,n,r)}function _D(t,e,n){return it(t).beforeAuthStateChanged(e,n)}function ED(t,e,n,r){return it(t).onAuthStateChanged(e,n,r)}function qb(t){return it(t).signOut()}const xd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(xd,"1"),this.storage.removeItem(xd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(){const t=Ot();return d0(t)||wh(t)}const TD=1e3,bD=10;class Qb extends Kb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=SD()&&nD(),this.fallbackToPolling=Ub(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);tD()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,bD):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},TD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Qb.type="LOCAL";const ID=Qb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb extends Kb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Gb.type="SESSION";const Xb=Gb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Eh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await RD(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Eh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=f0("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return window}function CD(t){er().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(){return typeof er().WorkerGlobalScope<"u"&&typeof er().importScripts=="function"}async function kD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function PD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ND(){return Yb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="firebaseLocalStorageDb",jD=1,wd="firebaseLocalStorage",Zb="fbase_key";class sc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sh(t,e){return t.transaction([wd],e?"readwrite":"readonly").objectStore(wd)}function OD(){const t=indexedDB.deleteDatabase(Jb);return new sc(t).toPromise()}function ig(){const t=indexedDB.open(Jb,jD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(wd,{keyPath:Zb})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(wd)?e(r):(r.close(),await OD(),e(await ig()))})})}async function Qx(t,e,n){const r=Sh(t,!0).put({[Zb]:e,value:n});return new sc(r).toPromise()}async function LD(t,e){const n=Sh(t,!1).get(e),r=await new sc(n).toPromise();return r===void 0?null:r.value}function Gx(t,e){const n=Sh(t,!0).delete(e);return new sc(n).toPromise()}const DD=800,MD=3;class eI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ig(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>MD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Yb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Eh._getInstance(ND()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await kD(),!this.activeServiceWorker)return;this.sender=new AD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||PD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ig();return await Qx(e,xd,"1"),await Gx(e,xd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Qx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>LD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Gx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Sh(s,!1).getAll();return new sc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eI.type="LOCAL";const $D=eI;new tc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(t,e){return e?gr(e):(ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0 extends Wb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return uo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return uo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function FD(t){return xD(t.auth,new p0(t),t.bypassAuthState)}function VD(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),vD(n,new p0(t),t.bypassAuthState)}async function UD(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),yD(n,new p0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FD;case"linkViaPopup":case"linkViaRedirect":return UD;case"reauthViaPopup":case"reauthViaRedirect":return VD;default:sr(this.auth,"internal-error")}}resolve(e){Rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=new tc(2e3,1e4);async function zD(t,e,n){const r=_h(t);D3(t,e,h0);const s=tI(r,n);return new Ys(r,"signInViaPopup",e,s).executeNotNull()}class Ys extends nI{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ys.currentPopupAction&&Ys.currentPopupAction.cancel(),Ys.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ie(e,this.auth,"internal-error"),e}async onExecution(){Rr(this.filter.length===1,"Popup operations only handle one event");const e=f0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ys.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BD.get())};e()}}Ys.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD="pendingRedirect",Iu=new Map;class HD extends nI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Iu.get(this.auth._key());if(!e){try{const r=await qD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Iu.set(this.auth._key(),e)}return this.bypassAuthState||Iu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qD(t,e){const n=GD(e),r=QD(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function KD(t,e){Iu.set(t._key(),e)}function QD(t){return gr(t._redirectPersistence)}function GD(t){return bu(WD,t.config.apiKey,t.name)}async function XD(t,e,n=!1){const r=_h(t),s=tI(r,e),o=await new HD(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=10*60*1e3;class JD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!rI(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Zn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xx(e))}saveEventToCache(e){this.cachedEventUids.add(Xx(e)),this.lastProcessedEventTime=Date.now()}}function Xx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function rI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ZD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eM(t,e={}){return nc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nM=/^https?/;async function rM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await eM(t);for(const n of e)try{if(sM(n))return}catch{}sr(t,"unauthorized-domain")}function sM(t){const e=sg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!nM.test(n))return!1;if(tM.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM=new tc(3e4,6e4);function Yx(){const t=er().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function oM(t){return new Promise((e,n)=>{var r,s,i;function o(){Yx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yx(),n(Zn(t,"network-request-failed"))},timeout:iM.get()})}if(!((s=(r=er().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=er().gapi)===null||i===void 0)&&i.load)o();else{const a=uD("iframefcb");return er()[a]=()=>{gapi.load?o():n(Zn(t,"network-request-failed"))},cD(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Ru=null,e})}let Ru=null;function aM(t){return Ru=Ru||oM(t),Ru}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=new tc(5e3,15e3),cM="__/auth/iframe",uM="emulator/auth/iframe",dM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fM(t){const e=t.config;ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?c0(e,uM):`https://${t.config.authDomain}/${cM}`,r={apiKey:e.apiKey,appName:t.name,v:Ai},s=hM.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ec(r).slice(1)}`}async function pM(t){const e=await aM(t),n=er().gapi;return ie(n,t,"internal-error"),e.open({where:document.body,url:fM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dM,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Zn(t,"network-request-failed"),a=er().setTimeout(()=>{i(o)},lM.get());function l(){er().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gM=500,yM=600,vM="_blank",xM="http://localhost";class Jx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wM(t,e,n,r=gM,s=yM){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},mM),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Ot().toLowerCase();n&&(a=Db(c)?vM:n),Lb(c)&&(e=e||xM,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[m,y])=>`${p}${m}=${y},`,"");if(eD(c)&&a!=="_self")return _M(e||"",a),new Jx(null);const f=window.open(e||"",a,d);ie(f,t,"popup-blocked");try{f.focus()}catch{}return new Jx(f)}function _M(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM="__/auth/handler",SM="emulator/auth/handler",TM=encodeURIComponent("fac");async function Zx(t,e,n,r,s,i){ie(t.config.authDomain,t,"auth-domain-config-required"),ie(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ai,eventId:s};if(e instanceof h0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",bL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries(i||{}))o[d]=f}if(e instanceof rc){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${TM}=${encodeURIComponent(l)}`:"";return`${bM(t)}?${ec(a).slice(1)}${c}`}function bM({config:t}){return t.emulator?c0(t,SM):`https://${t.authDomain}/${EM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="webStorageSupport";class IM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xb,this._completeRedirectFn=XD,this._overrideRedirectResult=KD}async _openPopup(e,n,r,s){var i;Rr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Zx(e,n,r,sg(),s);return wM(e,o,f0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Zx(e,n,r,sg(),s);return CD(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Rr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await pM(e),r=new JD(e);return n.register("authEvent",s=>(ie(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fp,{type:fp},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[fp];o!==void 0&&n(!!o),sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ub()||d0()||wh()}}const RM=IM;var ew="@firebase/auth",tw="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function kM(t){fi(new xs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ie(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bb(t)},c=new aD(r,s,i,l);return hD(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),fi(new xs("auth-internal",e=>{const n=_h(e.getProvider("auth").getImmediate());return(r=>new AM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jn(ew,tw,CM(t)),Jn(ew,tw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=5*60,NM=xb("authIdTokenMaxAge")||PM;let nw=null;const jM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>NM)return;const s=n==null?void 0:n.token;nw!==s&&(nw=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function OM(t=o0()){const e=xh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=dD(t,{popupRedirectResolver:RM,persistence:[$D,ID,Xb]}),r=xb("authTokenSyncURL");if(r){const i=jM(r);_D(n,i,()=>i(n.currentUser)),wD(n,o=>i(o))}const s=gb("auth");return s&&fD(n,`http://${s}`),n}kM("Browser");var LM="firebase",DM="10.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jn(LM,DM,"app");var MM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},U,m0=m0||{},re=MM||self;function Th(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ic(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function $M(t){return Object.prototype.hasOwnProperty.call(t,pp)&&t[pp]||(t[pp]=++FM)}var pp="closure_uid_"+(1e9*Math.random()>>>0),FM=0;function VM(t,e,n){return t.call.apply(t.bind,arguments)}function UM(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function kt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?kt=VM:kt=UM,kt.apply(null,arguments)}function Qc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function ut(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function js(){this.s=this.s,this.o=this.o}var BM=0;js.prototype.s=!1;js.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),BM!=0)&&$M(this)};js.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const sI=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function g0(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function rw(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Th(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function Pt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Pt.prototype.h=function(){this.defaultPrevented=!0};var zM=function(){if(!re.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{re.addEventListener("test",()=>{},e),re.removeEventListener("test",()=>{},e)}catch{}return t}();function Tl(t){return/^[\s\xa0]*$/.test(t)}function bh(){var t=re.navigator;return t&&(t=t.userAgent)?t:""}function Wn(t){return bh().indexOf(t)!=-1}function y0(t){return y0[" "](t),t}y0[" "]=function(){};function WM(t,e){var n=D$;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var HM=Wn("Opera"),Oo=Wn("Trident")||Wn("MSIE"),iI=Wn("Edge"),og=iI||Oo,oI=Wn("Gecko")&&!(bh().toLowerCase().indexOf("webkit")!=-1&&!Wn("Edge"))&&!(Wn("Trident")||Wn("MSIE"))&&!Wn("Edge"),qM=bh().toLowerCase().indexOf("webkit")!=-1&&!Wn("Edge");function aI(){var t=re.document;return t?t.documentMode:void 0}var ag;e:{var mp="",gp=function(){var t=bh();if(oI)return/rv:([^\);]+)(\)|;)/.exec(t);if(iI)return/Edge\/([\d\.]+)/.exec(t);if(Oo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(qM)return/WebKit\/(\S+)/.exec(t);if(HM)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(gp&&(mp=gp?gp[1]:""),Oo){var yp=aI();if(yp!=null&&yp>parseFloat(mp)){ag=String(yp);break e}}ag=mp}var lg;if(re.document&&Oo){var sw=aI();lg=sw||parseInt(ag,10)||void 0}else lg=void 0;var KM=lg;function bl(t,e){if(Pt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(oI){e:{try{y0(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:QM[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&bl.$.h.call(this)}}ut(bl,Pt);var QM={2:"touch",3:"pen",4:"mouse"};bl.prototype.h=function(){bl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var oc="closure_listenable_"+(1e6*Math.random()|0),GM=0;function XM(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++GM,this.fa=this.ia=!1}function Ih(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function v0(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function YM(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function lI(t){const e={};for(const n in t)e[n]=t[n];return e}const iw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function cI(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<iw.length;i++)n=iw[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Rh(t){this.src=t,this.g={},this.h=0}Rh.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=ug(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new XM(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function cg(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=sI(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Ih(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function ug(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var x0="closure_lm_"+(1e6*Math.random()|0),vp={};function uI(t,e,n,r,s){if(r&&r.once)return hI(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)uI(t,e[i],n,r,s);return null}return n=E0(n),t&&t[oc]?t.O(e,n,ic(r)?!!r.capture:!!r,s):dI(t,e,n,!1,r,s)}function dI(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=ic(s)?!!s.capture:!!s,a=_0(t);if(a||(t[x0]=a=new Rh(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=JM(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)zM||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(pI(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function JM(){function t(n){return e.call(t.src,t.listener,n)}const e=ZM;return t}function hI(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)hI(t,e[i],n,r,s);return null}return n=E0(n),t&&t[oc]?t.P(e,n,ic(r)?!!r.capture:!!r,s):dI(t,e,n,!0,r,s)}function fI(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)fI(t,e[i],n,r,s);else r=ic(r)?!!r.capture:!!r,n=E0(n),t&&t[oc]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=ug(i,n,r,s),-1<n&&(Ih(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=_0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ug(e,n,r,s)),(n=-1<t?e[t]:null)&&w0(n))}function w0(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[oc])cg(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pI(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=_0(e))?(cg(n,t),n.h==0&&(n.src=null,e[x0]=null)):Ih(t)}}}function pI(t){return t in vp?vp[t]:vp[t]="on"+t}function ZM(t,e){if(t.fa)t=!0;else{e=new bl(e,this);var n=t.listener,r=t.la||t.src;t.ia&&w0(t),t=n.call(r,e)}return t}function _0(t){return t=t[x0],t instanceof Rh?t:null}var xp="__closure_events_fn_"+(1e9*Math.random()>>>0);function E0(t){return typeof t=="function"?t:(t[xp]||(t[xp]=function(e){return t.handleEvent(e)}),t[xp])}function ct(){js.call(this),this.i=new Rh(this),this.S=this,this.J=null}ut(ct,js);ct.prototype[oc]=!0;ct.prototype.removeEventListener=function(t,e,n,r){fI(this,t,e,n,r)};function xt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Pt(e,t);else if(e instanceof Pt)e.target=e.target||t;else{var s=e;e=new Pt(r,t),cI(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=Gc(o,r,!0,e)&&s}if(o=e.g=t,s=Gc(o,r,!0,e)&&s,s=Gc(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=Gc(o,r,!1,e)&&s}ct.prototype.N=function(){if(ct.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ih(n[r]);delete t.g[e],t.h--}}this.J=null};ct.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ct.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Gc(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&cg(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var S0=re.JSON.stringify;class e${constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function t$(){var t=T0;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class n${constructor(){this.h=this.g=null}add(e,n){const r=mI.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var mI=new e$(()=>new r$,t=>t.reset());class r${constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function s$(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function i$(t){re.setTimeout(()=>{throw t},0)}let Il,Rl=!1,T0=new n$,gI=()=>{const t=re.Promise.resolve(void 0);Il=()=>{t.then(o$)}};var o$=()=>{for(var t;t=t$();){try{t.h.call(t.g)}catch(n){i$(n)}var e=mI;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Rl=!1};function Ah(t,e){ct.call(this),this.h=t||1,this.g=e||re,this.j=kt(this.qb,this),this.l=Date.now()}ut(Ah,ct);U=Ah.prototype;U.ga=!1;U.T=null;U.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),xt(this,"tick"),this.ga&&(b0(this),this.start()))}};U.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function b0(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}U.N=function(){Ah.$.N.call(this),b0(this),delete this.g};function I0(t,e,n){if(typeof t=="function")n&&(t=kt(t,n));else if(t&&typeof t.handleEvent=="function")t=kt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:re.setTimeout(t,e||0)}function yI(t){t.g=I0(()=>{t.g=null,t.i&&(t.i=!1,yI(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class a$ extends js{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:yI(this)}N(){super.N(),this.g&&(re.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Al(t){js.call(this),this.h=t,this.g={}}ut(Al,js);var ow=[];function vI(t,e,n,r){Array.isArray(n)||(n&&(ow[0]=n.toString()),n=ow);for(var s=0;s<n.length;s++){var i=uI(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function xI(t){v0(t.g,function(e,n){this.g.hasOwnProperty(n)&&w0(e)},t),t.g={}}Al.prototype.N=function(){Al.$.N.call(this),xI(this)};Al.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Ch(){this.g=!0}Ch.prototype.Ea=function(){this.g=!1};function l$(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var d=c[0];c=c[1];var f=d.split("_");o=2<=f.length&&f[1]=="type"?o+(d+"="+c+"&"):o+(d+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function c$(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function Zi(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+d$(t,n)+(r?" "+r:"")})}function u$(t,e){t.info(function(){return"TIMEOUT: "+e})}Ch.prototype.info=function(){};function d$(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return S0(n)}catch{return e}}var Ci={},aw=null;function kh(){return aw=aw||new ct}Ci.Ta="serverreachability";function wI(t){Pt.call(this,Ci.Ta,t)}ut(wI,Pt);function Cl(t){const e=kh();xt(e,new wI(e))}Ci.STAT_EVENT="statevent";function _I(t,e){Pt.call(this,Ci.STAT_EVENT,t),this.stat=e}ut(_I,Pt);function Ft(t){const e=kh();xt(e,new _I(e,t))}Ci.Ua="timingevent";function EI(t,e){Pt.call(this,Ci.Ua,t),this.size=e}ut(EI,Pt);function ac(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return re.setTimeout(function(){t()},e)}var Ph={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},SI={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function R0(){}R0.prototype.h=null;function lw(t){return t.h||(t.h=t.i())}function TI(){}var lc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function A0(){Pt.call(this,"d")}ut(A0,Pt);function C0(){Pt.call(this,"c")}ut(C0,Pt);var dg;function Nh(){}ut(Nh,R0);Nh.prototype.g=function(){return new XMLHttpRequest};Nh.prototype.i=function(){return{}};dg=new Nh;function cc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Al(this),this.P=h$,t=og?125:void 0,this.V=new Ah(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new bI}function bI(){this.i=null,this.g="",this.h=!1}var h$=45e3,hg={},_d={};U=cc.prototype;U.setTimeout=function(t){this.P=t};function fg(t,e,n){t.L=1,t.v=Oh(Ar(e)),t.s=n,t.S=!0,II(t,null)}function II(t,e){t.G=Date.now(),uc(t),t.A=Ar(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),OI(n.i,"t",r),t.C=0,n=t.l.J,t.h=new bI,t.g=t2(t.l,n?e:null,!t.s),0<t.O&&(t.M=new a$(kt(t.Pa,t,t.g),t.O)),vI(t.U,t.g,"readystatechange",t.nb),e=t.I?lI(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Cl(),l$(t.j,t.u,t.A,t.m,t.W,t.s)}U.nb=function(t){t=t.target;const e=this.M;e&&qn(t)==3?e.l():this.Pa(t)};U.Pa=function(t){try{if(t==this.g)e:{const d=qn(this.g);var e=this.g.Ia();const f=this.g.da();if(!(3>d)&&(d!=3||og||this.g&&(this.h.h||this.g.ja()||hw(this.g)))){this.J||d!=4||e==7||(e==8||0>=f?Cl(3):Cl(2)),jh(this);var n=this.g.da();this.ca=n;t:if(RI(this)){var r=hw(this.g);t="";var s=r.length,i=qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Js(this),Ka(this);var o="";break t}this.h.i=new re.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,c$(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Tl(a)){var c=a;break t}}c=null}if(n=c)Zi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pg(this,n);else{this.i=!1,this.o=3,Ft(12),Js(this),Ka(this);break e}}this.S?(AI(this,d,o),og&&this.i&&d==3&&(vI(this.U,this.V,"tick",this.mb),this.V.start())):(Zi(this.j,this.m,o,null),pg(this,o)),d==4&&Js(this),this.i&&!this.J&&(d==4?YI(this.l,this):(this.i=!1,uc(this)))}else j$(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Ft(12)):(this.o=0,Ft(13)),Js(this),Ka(this)}}}catch{}finally{}};function RI(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function AI(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=f$(t,n),s==_d){e==4&&(t.o=4,Ft(14),r=!1),Zi(t.j,t.m,null,"[Incomplete Response]");break}else if(s==hg){t.o=4,Ft(15),Zi(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Zi(t.j,t.m,s,null),pg(t,s);RI(t)&&s!=_d&&s!=hg&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Ft(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),L0(e),e.M=!0,Ft(11))):(Zi(t.j,t.m,n,"[Invalid Chunked Response]"),Js(t),Ka(t))}U.mb=function(){if(this.g){var t=qn(this.g),e=this.g.ja();this.C<e.length&&(jh(this),AI(this,t,e),this.i&&t!=4&&uc(this))}};function f$(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?_d:(n=Number(e.substring(n,r)),isNaN(n)?hg:(r+=1,r+n>e.length?_d:(e=e.slice(r,r+n),t.C=r+n,e)))}U.cancel=function(){this.J=!0,Js(this)};function uc(t){t.Y=Date.now()+t.P,CI(t,t.P)}function CI(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=ac(kt(t.lb,t),e)}function jh(t){t.B&&(re.clearTimeout(t.B),t.B=null)}U.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(u$(this.j,this.A),this.L!=2&&(Cl(),Ft(17)),Js(this),this.o=2,Ka(this)):CI(this,this.Y-t)};function Ka(t){t.l.H==0||t.J||YI(t.l,t)}function Js(t){jh(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,b0(t.V),xI(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function pg(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||mg(n.i,t))){if(!t.K&&mg(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Td(n),$h(n);else break e;O0(n),Ft(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=ac(kt(n.ib,n),6e3));if(1>=MI(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Zs(n,11)}else if((t.K||n.g==t)&&Td(n),!Tl(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const d=c[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const f=c[4];f!=null&&(n.Ga=f,n.l.info("SVER="+n.Ga));const p=c[5];p!=null&&typeof p=="number"&&0<p&&(r=1.5*p,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const y=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var i=r.i;i.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(k0(i,i.h),i.h=null))}if(r.F){const g=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,Ie(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=e2(r,r.J?r.pa:null,r.Y),o.K){$I(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(jh(a),uc(a)),r.g=o}else GI(r);0<n.j.length&&Fh(n)}else c[0]!="stop"&&c[0]!="close"||Zs(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Zs(n,7):j0(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Cl(4)}catch{}}function p$(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Th(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function m$(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Th(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function kI(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Th(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=m$(t),r=p$(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var PI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function g$(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function si(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof si){this.h=t.h,Ed(this,t.j),this.s=t.s,this.g=t.g,Sd(this,t.m),this.l=t.l;var e=t.i,n=new kl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),cw(this,n),this.o=t.o}else t&&(e=String(t).match(PI))?(this.h=!1,Ed(this,e[1]||"",!0),this.s=Pa(e[2]||""),this.g=Pa(e[3]||"",!0),Sd(this,e[4]),this.l=Pa(e[5]||"",!0),cw(this,e[6]||"",!0),this.o=Pa(e[7]||"")):(this.h=!1,this.i=new kl(null,this.h))}si.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Na(e,uw,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Na(e,uw,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Na(n,n.charAt(0)=="/"?x$:v$,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Na(n,_$)),t.join("")};function Ar(t){return new si(t)}function Ed(t,e,n){t.j=n?Pa(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Sd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function cw(t,e,n){e instanceof kl?(t.i=e,E$(t.i,t.h)):(n||(e=Na(e,w$)),t.i=new kl(e,t.h))}function Ie(t,e,n){t.i.set(e,n)}function Oh(t){return Ie(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Pa(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Na(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,y$),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function y$(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var uw=/[#\/\?@]/g,v$=/[#\?:]/g,x$=/[#\?]/g,w$=/[#\?@]/g,_$=/#/g;function kl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Os(t){t.g||(t.g=new Map,t.h=0,t.i&&g$(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}U=kl.prototype;U.add=function(t,e){Os(this),this.i=null,t=Zo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function NI(t,e){Os(t),e=Zo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function jI(t,e){return Os(t),e=Zo(t,e),t.g.has(e)}U.forEach=function(t,e){Os(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};U.ta=function(){Os(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};U.Z=function(t){Os(this);let e=[];if(typeof t=="string")jI(this,t)&&(e=e.concat(this.g.get(Zo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};U.set=function(t,e){return Os(this),this.i=null,t=Zo(this,t),jI(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};U.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function OI(t,e,n){NI(t,e),0<n.length&&(t.i=null,t.g.set(Zo(t,e),g0(n)),t.h+=n.length)}U.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function Zo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function E$(t,e){e&&!t.j&&(Os(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(NI(this,r),OI(this,s,n))},t)),t.j=e}var S$=class{constructor(t,e){this.g=t,this.map=e}};function LI(t){this.l=t||T$,re.PerformanceNavigationTiming?(t=re.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(re.g&&re.g.Ka&&re.g.Ka()&&re.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var T$=10;function DI(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function MI(t){return t.h?1:t.g?t.g.size:0}function mg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function k0(t,e){t.g?t.g.add(e):t.h=e}function $I(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}LI.prototype.cancel=function(){if(this.i=FI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function FI(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return g0(t.i)}var b$=class{stringify(t){return re.JSON.stringify(t,void 0)}parse(t){return re.JSON.parse(t,void 0)}};function I$(){this.g=new b$}function R$(t,e,n){const r=n||"";try{kI(t,function(s,i){let o=s;ic(s)&&(o=S0(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function A$(t,e){const n=new Ch;if(re.Image){const r=new Image;r.onload=Qc(Xc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Qc(Xc,n,r,"TestLoadImage: error",!1,e),r.onabort=Qc(Xc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Qc(Xc,n,r,"TestLoadImage: timeout",!1,e),re.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Xc(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Lh(t){this.l=t.fc||null,this.j=t.ob||!1}ut(Lh,R0);Lh.prototype.g=function(){return new Dh(this.l,this.j)};Lh.prototype.i=function(t){return function(){return t}}({});function Dh(t,e){ct.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=P0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ut(Dh,ct);var P0=0;U=Dh.prototype;U.open=function(t,e){if(this.readyState!=P0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Pl(this)};U.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||re).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};U.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,dc(this)),this.readyState=P0};U.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Pl(this)),this.g&&(this.readyState=3,Pl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof re.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;VI(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function VI(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}U.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?dc(this):Pl(this),this.readyState==3&&VI(this)}};U.Za=function(t){this.g&&(this.response=this.responseText=t,dc(this))};U.Ya=function(t){this.g&&(this.response=t,dc(this))};U.ka=function(){this.g&&dc(this)};function dc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Pl(t)}U.setRequestHeader=function(t,e){this.v.append(t,e)};U.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};U.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Pl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Dh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var C$=re.JSON.parse;function ze(t){ct.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=UI,this.L=this.M=!1}ut(ze,ct);var UI="",k$=/^https?$/i,P$=["POST","PUT"];U=ze.prototype;U.Oa=function(t){this.M=t};U.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():dg.g(),this.C=this.u?lw(this.u):lw(dg),this.g.onreadystatechange=kt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){dw(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=re.FormData&&t instanceof re.FormData,!(0<=sI(P$,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{WI(this),0<this.B&&((this.L=N$(this.g))?(this.g.timeout=this.B,this.g.ontimeout=kt(this.ua,this)):this.A=I0(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){dw(this,i)}};function N$(t){return Oo&&typeof t.timeout=="number"&&t.ontimeout!==void 0}U.ua=function(){typeof m0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xt(this,"timeout"),this.abort(8))};function dw(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,BI(t),Mh(t)}function BI(t){t.F||(t.F=!0,xt(t,"complete"),xt(t,"error"))}U.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,xt(this,"complete"),xt(this,"abort"),Mh(this))};U.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Mh(this,!0)),ze.$.N.call(this)};U.La=function(){this.s||(this.G||this.v||this.l?zI(this):this.kb())};U.kb=function(){zI(this)};function zI(t){if(t.h&&typeof m0<"u"&&(!t.C[1]||qn(t)!=4||t.da()!=2)){if(t.v&&qn(t)==4)I0(t.La,0,t);else if(xt(t,"readystatechange"),qn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(PI)[1]||null;!s&&re.self&&re.self.location&&(s=re.self.location.protocol.slice(0,-1)),r=!k$.test(s?s.toLowerCase():"")}n=r}if(n)xt(t,"complete"),xt(t,"success");else{t.m=6;try{var i=2<qn(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",BI(t)}}finally{Mh(t)}}}}function Mh(t,e){if(t.g){WI(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||xt(t,"ready");try{n.onreadystatechange=r}catch{}}}function WI(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(re.clearTimeout(t.A),t.A=null)}U.isActive=function(){return!!this.g};function qn(t){return t.g?t.g.readyState:0}U.da=function(){try{return 2<qn(this)?this.g.status:-1}catch{return-1}};U.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};U.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),C$(e)}};function hw(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case UI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function j$(t){const e={};t=(t.g&&2<=qn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Tl(t[r]))continue;var n=s$(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}YM(e,function(r){return r.join(", ")})}U.Ia=function(){return this.m};U.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function HI(t){let e="";return v0(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function N0(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=HI(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ie(t,e,n))}function Ea(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function qI(t){this.Ga=0,this.j=[],this.l=new Ch,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ea("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ea("baseRetryDelayMs",5e3,t),this.hb=Ea("retryDelaySeedMs",1e4,t),this.eb=Ea("forwardChannelMaxRetries",2,t),this.xa=Ea("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new LI(t&&t.concurrentRequestLimit),this.Ja=new I$,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}U=qI.prototype;U.ra=8;U.H=1;function j0(t){if(KI(t),t.H==3){var e=t.W++,n=Ar(t.I);if(Ie(n,"SID",t.K),Ie(n,"RID",e),Ie(n,"TYPE","terminate"),hc(t,n),e=new cc(t,t.l,e),e.L=2,e.v=Oh(Ar(n)),n=!1,re.navigator&&re.navigator.sendBeacon)try{n=re.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&re.Image&&(new Image().src=e.v,n=!0),n||(e.g=t2(e.l,null),e.g.ha(e.v)),e.G=Date.now(),uc(e)}ZI(t)}function $h(t){t.g&&(L0(t),t.g.cancel(),t.g=null)}function KI(t){$h(t),t.u&&(re.clearTimeout(t.u),t.u=null),Td(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&re.clearTimeout(t.m),t.m=null)}function Fh(t){if(!DI(t.i)&&!t.m){t.m=!0;var e=t.Na;Il||gI(),Rl||(Il(),Rl=!0),T0.add(e,t),t.C=0}}function O$(t,e){return MI(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=ac(kt(t.Na,t,e),JI(t,t.C)),t.C++,!0)}U.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new cc(this,this.l,t);let i=this.s;if(this.U&&(i?(i=lI(i),cI(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=QI(this,s,e),n=Ar(this.I),Ie(n,"RID",t),Ie(n,"CVER",22),this.F&&Ie(n,"X-HTTP-Session-Id",this.F),hc(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(HI(i)))+"&"+e:this.o&&N0(n,this.o,i)),k0(this.i,s),this.bb&&Ie(n,"TYPE","init"),this.P?(Ie(n,"$req",e),Ie(n,"SID","null"),s.aa=!0,fg(s,n,null)):fg(s,n,e),this.H=2}}else this.H==3&&(t?fw(this,t):this.j.length==0||DI(this.i)||fw(this))};function fw(t,e){var n;e?n=e.m:n=t.W++;const r=Ar(t.I);Ie(r,"SID",t.K),Ie(r,"RID",n),Ie(r,"AID",t.V),hc(t,r),t.o&&t.s&&N0(r,t.o,t.s),n=new cc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=QI(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),k0(t.i,n),fg(n,r,e)}function hc(t,e){t.na&&v0(t.na,function(n,r){Ie(e,r,n)}),t.h&&kI({},function(n,r){Ie(e,r,n)})}function QI(t,e,n){n=Math.min(t.j.length,n);var r=t.h?kt(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const d=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{R$(d,o,"req"+c+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function GI(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Il||gI(),Rl||(Il(),Rl=!0),T0.add(e,t),t.A=0}}function O0(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=ac(kt(t.Ma,t),JI(t,t.A)),t.A++,!0)}U.Ma=function(){if(this.u=null,XI(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ac(kt(this.jb,this),t)}};U.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ft(10),$h(this),XI(this))};function L0(t){t.B!=null&&(re.clearTimeout(t.B),t.B=null)}function XI(t){t.g=new cc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Ar(t.wa);Ie(e,"RID","rpc"),Ie(e,"SID",t.K),Ie(e,"AID",t.V),Ie(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ie(e,"TO",t.qa),Ie(e,"TYPE","xmlhttp"),hc(t,e),t.o&&t.s&&N0(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Oh(Ar(e)),n.s=null,n.S=!0,II(n,t)}U.ib=function(){this.v!=null&&(this.v=null,$h(this),O0(this),Ft(19))};function Td(t){t.v!=null&&(re.clearTimeout(t.v),t.v=null)}function YI(t,e){var n=null;if(t.g==e){Td(t),L0(t),t.g=null;var r=2}else if(mg(t.i,e))n=e.F,$I(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=kh(),xt(r,new EI(r,n)),Fh(t)}else GI(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&O$(t,e)||r==2&&O0(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Zs(t,5);break;case 4:Zs(t,10);break;case 3:Zs(t,6);break;default:Zs(t,2)}}}function JI(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Zs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=kt(t.pb,t);n||(n=new si("//www.google.com/images/cleardot.gif"),re.location&&re.location.protocol=="http"||Ed(n,"https"),Oh(n)),A$(n.toString(),r)}else Ft(2);t.H=0,t.h&&t.h.za(e),ZI(t),KI(t)}U.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Ft(2)):(this.l.info("Failed to ping google.com"),Ft(1))};function ZI(t){if(t.H=0,t.ma=[],t.h){const e=FI(t.i);(e.length!=0||t.j.length!=0)&&(rw(t.ma,e),rw(t.ma,t.j),t.i.i.length=0,g0(t.j),t.j.length=0),t.h.ya()}}function e2(t,e,n){var r=n instanceof si?Ar(n):new si(n);if(r.g!="")e&&(r.g=e+"."+r.g),Sd(r,r.m);else{var s=re.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new si(null);r&&Ed(i,r),e&&(i.g=e),s&&Sd(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&Ie(r,n,e),Ie(r,"VER",t.ra),hc(t,r),r}function t2(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new ze(new Lh({ob:!0})):new ze(t.va),e.Oa(t.J),e}U.isActive=function(){return!!this.h&&this.h.isActive(this)};function n2(){}U=n2.prototype;U.Ba=function(){};U.Aa=function(){};U.za=function(){};U.ya=function(){};U.isActive=function(){return!0};U.Va=function(){};function bd(){if(Oo&&!(10<=Number(KM)))throw Error("Environmental error: no available transport.")}bd.prototype.g=function(t,e){return new un(t,e)};function un(t,e){ct.call(this),this.g=new qI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Tl(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Tl(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ea(this)}ut(un,ct);un.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Ft(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=e2(t,null,t.Y),Fh(t)};un.prototype.close=function(){j0(this.g)};un.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=S0(t),t=n);e.j.push(new S$(e.fb++,t)),e.H==3&&Fh(e)};un.prototype.N=function(){this.g.h=null,delete this.j,j0(this.g),delete this.g,un.$.N.call(this)};function r2(t){A0.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ut(r2,A0);function s2(){C0.call(this),this.status=1}ut(s2,C0);function ea(t){this.g=t}ut(ea,n2);ea.prototype.Ba=function(){xt(this.g,"a")};ea.prototype.Aa=function(t){xt(this.g,new r2(t))};ea.prototype.za=function(t){xt(this.g,new s2)};ea.prototype.ya=function(){xt(this.g,"b")};function L$(){this.blockSize=-1}function $n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ut($n,L$);$n.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function wp(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}$n.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)wp(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){wp(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){wp(this,r),s=0;break}}this.h=s,this.i+=e};$n.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function xe(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var D$={};function D0(t){return-128<=t&&128>t?WM(t,function(e){return new xe([e|0],0>e?-1:0)}):new xe([t|0],0>t?-1:0)}function Kn(t){if(isNaN(t)||!isFinite(t))return ho;if(0>t)return mt(Kn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=gg;return new xe(e,0)}function i2(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return mt(i2(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Kn(Math.pow(e,8)),r=ho,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=Kn(Math.pow(e,i)),r=r.R(i).add(Kn(o))):(r=r.R(n),r=r.add(Kn(o)))}return r}var gg=4294967296,ho=D0(0),yg=D0(1),pw=D0(16777216);U=xe.prototype;U.ea=function(){if(wn(this))return-mt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:gg+r)*e,e*=gg}return t};U.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(yr(this))return"0";if(wn(this))return"-"+mt(this).toString(t);for(var e=Kn(Math.pow(t,6)),n=this,r="";;){var s=Rd(n,e).g;n=Id(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,yr(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};U.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function yr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function wn(t){return t.h==-1}U.X=function(t){return t=Id(this,t),wn(t)?-1:yr(t)?0:1};function mt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new xe(n,~t.h).add(yg)}U.abs=function(){return wn(this)?mt(this):this};U.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new xe(n,n[n.length-1]&-2147483648?-1:0)};function Id(t,e){return t.add(mt(e))}U.R=function(t){if(yr(this)||yr(t))return ho;if(wn(this))return wn(t)?mt(this).R(mt(t)):mt(mt(this).R(t));if(wn(t))return mt(this.R(mt(t)));if(0>this.X(pw)&&0>t.X(pw))return Kn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,Yc(n,2*r+2*s),n[2*r+2*s+1]+=i*l,Yc(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Yc(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Yc(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new xe(n,0)};function Yc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Sa(t,e){this.g=t,this.h=e}function Rd(t,e){if(yr(e))throw Error("division by zero");if(yr(t))return new Sa(ho,ho);if(wn(t))return e=Rd(mt(t),e),new Sa(mt(e.g),mt(e.h));if(wn(e))return e=Rd(t,mt(e)),new Sa(mt(e.g),e.h);if(30<t.g.length){if(wn(t)||wn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=yg,r=e;0>=r.X(t);)n=mw(n),r=mw(r);var s=Li(n,1),i=Li(r,1);for(r=Li(r,2),n=Li(n,2);!yr(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=Li(r,1),n=Li(n,1)}return e=Id(t,s.R(e)),new Sa(s,e)}for(s=ho;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Kn(n),o=i.R(e);wn(o)||0<o.X(t);)n-=r,i=Kn(n),o=i.R(e);yr(i)&&(i=yg),s=s.add(i),t=Id(t,o)}return new Sa(s,t)}U.gb=function(t){return Rd(this,t).h};U.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new xe(n,this.h&t.h)};U.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new xe(n,this.h|t.h)};U.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new xe(n,this.h^t.h)};function mw(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new xe(n,t.h)}function Li(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new xe(s,t.h)}bd.prototype.createWebChannel=bd.prototype.g;un.prototype.send=un.prototype.u;un.prototype.open=un.prototype.m;un.prototype.close=un.prototype.close;Ph.NO_ERROR=0;Ph.TIMEOUT=8;Ph.HTTP_ERROR=6;SI.COMPLETE="complete";TI.EventType=lc;lc.OPEN="a";lc.CLOSE="b";lc.ERROR="c";lc.MESSAGE="d";ct.prototype.listen=ct.prototype.O;ze.prototype.listenOnce=ze.prototype.P;ze.prototype.getLastError=ze.prototype.Sa;ze.prototype.getLastErrorCode=ze.prototype.Ia;ze.prototype.getStatus=ze.prototype.da;ze.prototype.getResponseJson=ze.prototype.Wa;ze.prototype.getResponseText=ze.prototype.ja;ze.prototype.send=ze.prototype.ha;ze.prototype.setWithCredentials=ze.prototype.Oa;$n.prototype.digest=$n.prototype.l;$n.prototype.reset=$n.prototype.reset;$n.prototype.update=$n.prototype.j;xe.prototype.add=xe.prototype.add;xe.prototype.multiply=xe.prototype.R;xe.prototype.modulo=xe.prototype.gb;xe.prototype.compare=xe.prototype.X;xe.prototype.toNumber=xe.prototype.ea;xe.prototype.toString=xe.prototype.toString;xe.prototype.getBits=xe.prototype.D;xe.fromNumber=Kn;xe.fromString=i2;var M$=function(){return new bd},$$=function(){return kh()},_p=Ph,F$=SI,V$=Ci,gw={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Jc=TI,U$=ze,B$=$n,fo=xe;const yw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ta="10.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=new s0("@firebase/firestore");function vw(){return mi.logLevel}function G(t,...e){if(mi.logLevel<=pe.DEBUG){const n=e.map(M0);mi.debug(`Firestore (${ta}): ${t}`,...n)}}function Cr(t,...e){if(mi.logLevel<=pe.ERROR){const n=e.map(M0);mi.error(`Firestore (${ta}): ${t}`,...n)}}function Lo(t,...e){if(mi.logLevel<=pe.WARN){const n=e.map(M0);mi.warn(`Firestore (${ta}): ${t}`,...n)}}function M0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t="Unexpected state"){const e=`FIRESTORE (${ta}) INTERNAL ASSERTION FAILED: `+t;throw Cr(e),new Error(e)}function Ce(t,e){t||te()}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends cr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class z${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bt.UNAUTHENTICATED))}shutdown(){}}class W${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class H${constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new _r,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new _r)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string"),new o2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string"),new bt(e)}}class q${constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class K${constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new q$(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Q${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class G${constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string"),this.R=n.token,new Q$(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=X$(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function Do(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new st(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new se(e)}static min(){return new se(new st(0,0))}static max(){return new se(new st(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(),r===void 0?r=e.length-n:r>e.length-n&&te(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Nl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Nl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Re extends Nl{construct(e,n,r){return new Re(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Re(n)}static emptyPath(){return new Re([])}}const Y$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends Nl{construct(e,n,r){return new Ct(e,n,r)}static isValidIdentifier(e){return Y$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ct(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new q(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new q(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new q(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(n)}static emptyPath(){return new Ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Re.fromString(e))}static fromName(e){return new J(Re.fromString(e).popFirst(5))}static empty(){return new J(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Re(e.slice()))}}function J$(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=se.fromTimestamp(r===1e9?new st(n+1,0):new st(n,r));return new ws(s,J.empty(),e)}function Z$(t){return new ws(t.readTime,t.key,-1)}class ws{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ws(se.min(),J.empty(),-1)}static max(){return new ws(se.max(),J.empty(),-1)}}function e6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class n6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fc(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==t6)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new D((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof D?n:D.resolve(n)}catch(n){return D.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):D.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):D.reject(n)}static resolve(e){return new D((n,r)=>{n(e)})}static reject(e){return new D((n,r)=>{r(e)})}static waitFor(e){return new D((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=D.resolve(!1);for(const r of e)n=n.next(s=>s?D.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new D((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new D((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function pc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}$0.ae=-1;function Vh(t){return t==null}function Ad(t){return t===0&&1/t==-1/0}function r6(t){return typeof t=="number"&&Number.isInteger(t)&&!Ad(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function na(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function l2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||pt.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pt.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zc(this.root,e,this.comparator,!0)}}class Zc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??pt.RED,this.left=s??pt.EMPTY,this.right=i??pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new pt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return pt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}}pt.EMPTY=null,pt.RED=!0,pt.BLACK=!1;pt.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,n,r,s,i){return this}insert(e,n,r){return new pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ww(this.data.getIterator())}getIteratorFrom(e){return new ww(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Nt(this.comparator);return n.data=e,n}}class ww{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new On([])}unionWith(e){let n=new Nt(Ct.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new On(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Do(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new c2("Invalid base64 string: "+i):i}}(e);return new Lt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const s6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _s(t){if(Ce(!!t),typeof t=="string"){let e=0;const n=s6.exec(t);if(Ce(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gi(t){return typeof t=="string"?Lt.fromBase64String(t):Lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function V0(t){const e=t.mapValue.fields.__previous_value__;return F0(e)?V0(e):e}function jl(t){const e=_s(t.mapValue.fields.__local_write_time__.timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ol{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ol("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ol&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function yi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?F0(t)?4:o6(t)?9007199254740991:10:te()}function ir(t,e){if(t===e)return!0;const n=yi(t);if(n!==yi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jl(t).isEqual(jl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=_s(s.timestampValue),a=_s(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return gi(s.bytesValue).isEqual(gi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ye(s.geoPointValue.latitude)===Ye(i.geoPointValue.latitude)&&Ye(s.geoPointValue.longitude)===Ye(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ye(s.integerValue)===Ye(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ye(s.doubleValue),a=Ye(i.doubleValue);return o===a?Ad(o)===Ad(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Do(t.arrayValue.values||[],e.arrayValue.values||[],ir);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(xw(o)!==xw(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ir(o[l],a[l])))return!1;return!0}(t,e);default:return te()}}function Ll(t,e){return(t.values||[]).find(n=>ir(n,e))!==void 0}function Mo(t,e){if(t===e)return 0;const n=yi(t),r=yi(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ye(i.integerValue||i.doubleValue),l=Ye(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return _w(t.timestampValue,e.timestampValue);case 4:return _w(jl(t),jl(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(i,o){const a=gi(i),l=gi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=me(a[c],l[c]);if(d!==0)return d}return me(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=me(Ye(i.latitude),Ye(o.latitude));return a!==0?a:me(Ye(i.longitude),Ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const d=Mo(a[c],l[c]);if(d)return d}return me(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===eu.mapValue&&o===eu.mapValue)return 0;if(i===eu.mapValue)return 1;if(o===eu.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const p=me(l[f],d[f]);if(p!==0)return p;const m=Mo(a[l[f]],c[d[f]]);if(m!==0)return m}return me(l.length,d.length)}(t.mapValue,e.mapValue);default:throw te()}}function _w(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=_s(t),r=_s(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function $o(t){return vg(t)}function vg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=_s(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return gi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=vg(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${vg(n.fields[o])}`;return s+"}"}(t.mapValue):te()}function Ew(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function xg(t){return!!t&&"integerValue"in t}function U0(t){return!!t&&"arrayValue"in t}function Sw(t){return!!t&&"nullValue"in t}function Tw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Au(t){return!!t&&"mapValue"in t}function Qa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return na(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Qa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Qa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function o6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Au(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qa(n)}setAll(e){let n=Ct.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Qa(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Au(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ir(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Au(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){na(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new _n(Qa(this.value))}}function u2(t){const e=[];return na(t.fields,(n,r)=>{const s=new Ct([n]);if(Au(r)){const i=u2(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new On(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new At(e,0,se.min(),se.min(),se.min(),_n.empty(),0)}static newFoundDocument(e,n,r,s){return new At(e,1,n,se.min(),r,s,0)}static newNoDocument(e,n){return new At(e,2,n,se.min(),se.min(),_n.empty(),0)}static newUnknownDocument(e,n){return new At(e,3,n,se.min(),se.min(),_n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof At&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new At(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n){this.position=e,this.inclusive=n}}function bw(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Mo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Iw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ir(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,n="asc"){this.field=e,this.dir=n}}function a6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{}class Ze extends d2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new c6(e,n,r):n==="array-contains"?new h6(e,r):n==="in"?new f6(e,r):n==="not-in"?new p6(e,r):n==="array-contains-any"?new m6(e,r):new Ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new u6(e,r):new d6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Mo(n,this.value)):n!==null&&yi(this.value)===yi(n)&&this.matchesComparison(Mo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Fn extends d2{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Fn(e,n)}matches(e){return h2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function h2(t){return t.op==="and"}function f2(t){return l6(t)&&h2(t)}function l6(t){for(const e of t.filters)if(e instanceof Fn)return!1;return!0}function wg(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+$o(t.value);if(f2(t))return t.filters.map(e=>wg(e)).join(",");{const e=t.filters.map(n=>wg(n)).join(",");return`${t.op}(${e})`}}function p2(t,e){return t instanceof Ze?function(r,s){return s instanceof Ze&&r.op===s.op&&r.field.isEqual(s.field)&&ir(r.value,s.value)}(t,e):t instanceof Fn?function(r,s){return s instanceof Fn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&p2(o,s.filters[a]),!0):!1}(t,e):void te()}function m2(t){return t instanceof Ze?function(n){return`${n.field.canonicalString()} ${n.op} ${$o(n.value)}`}(t):t instanceof Fn?function(n){return n.op.toString()+" {"+n.getFilters().map(m2).join(" ,")+"}"}(t):"Filter"}class c6 extends Ze{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class u6 extends Ze{constructor(e,n){super(e,"in",n),this.keys=g2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class d6 extends Ze{constructor(e,n){super(e,"not-in",n),this.keys=g2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function g2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class h6 extends Ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return U0(n)&&Ll(n.arrayValue,this.value)}}class f6 extends Ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ll(this.value.arrayValue,n)}}class p6 extends Ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ll(this.value.arrayValue,n)}}class m6 extends Ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!U0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ll(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.he=null}}function Rw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new g6(t,e,n,r,s,i,o)}function B0(t){const e=oe(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>wg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Vh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>$o(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>$o(r)).join(",")),e.he=n}return e.he}function z0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!a6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!p2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Iw(t.startAt,e.startAt)&&Iw(t.endAt,e.endAt)}function _g(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function y6(t,e,n,r,s,i,o,a){return new mc(t,e,n,r,s,i,o,a)}function W0(t){return new mc(t)}function Aw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function y2(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function H0(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function v2(t){return t.collectionGroup!==null}function Xa(t){const e=oe(t);if(e.Pe===null){e.Pe=[];const n=H0(e),r=y2(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new Ga(n)),e.Pe.push(new Ga(Ct.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.Pe.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Ga(Ct.keyField(),i))}}}return e.Pe}function kr(t){const e=oe(t);return e.Ie||(e.Ie=v6(e,Xa(t))),e.Ie}function v6(t,e){if(t.limitType==="F")return Rw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ga(s.field,i)});const n=t.endAt?new Cd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Cd(t.startAt.position,t.startAt.inclusive):null;return Rw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Eg(t,e){e.getFirstInequalityField(),H0(t);const n=t.filters.concat([e]);return new mc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Sg(t,e,n){return new mc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Uh(t,e){return z0(kr(t),kr(e))&&t.limitType===e.limitType}function x2(t){return`${B0(kr(t))}|lt:${t.limitType}`}function Tg(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>m2(s)).join(", ")}]`),Vh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>$o(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>$o(s)).join(",")),`Target(${r})`}(kr(t))}; limitType=${t.limitType})`}function Bh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Xa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=bw(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Xa(r),s)||r.endAt&&!function(o,a,l){const c=bw(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Xa(r),s))}(t,e)}function x6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function w2(t){return(e,n)=>{let r=!1;for(const s of Xa(t)){const i=w6(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function w6(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Mo(l,c):te()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){na(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return l2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6=new Fe(J.comparator);function Pr(){return _6}const _2=new Fe(J.comparator);function ja(...t){let e=_2;for(const n of t)e=e.insert(n.key,n);return e}function E2(t){let e=_2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ei(){return Ya()}function S2(){return Ya()}function Ya(){return new ra(t=>t.toString(),(t,e)=>t.isEqual(e))}const E6=new Fe(J.comparator),S6=new Nt(J.comparator);function ce(...t){let e=S6;for(const n of t)e=e.add(n);return e}const T6=new Nt(me);function b6(){return T6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ad(e)?"-0":e}}function b2(t){return{integerValue:""+t}}function I6(t,e){return r6(e)?b2(e):T2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(){this._=void 0}}function R6(t,e,n){return t instanceof kd?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&F0(i)&&(i=V0(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Dl?R2(t,e):t instanceof Ml?A2(t,e):function(s,i){const o=I2(s,i),a=Cw(o)+Cw(s.Ee);return xg(o)&&xg(s.Ee)?b2(a):T2(s.serializer,a)}(t,e)}function A6(t,e,n){return t instanceof Dl?R2(t,e):t instanceof Ml?A2(t,e):n}function I2(t,e){return t instanceof Pd?function(r){return xg(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class kd extends zh{}class Dl extends zh{constructor(e){super(),this.elements=e}}function R2(t,e){const n=C2(e);for(const r of t.elements)n.some(s=>ir(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ml extends zh{constructor(e){super(),this.elements=e}}function A2(t,e){let n=C2(e);for(const r of t.elements)n=n.filter(s=>!ir(s,r));return{arrayValue:{values:n}}}class Pd extends zh{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Cw(t){return Ye(t.integerValue||t.doubleValue)}function C2(t){return U0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function C6(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Dl&&s instanceof Dl||r instanceof Ml&&s instanceof Ml?Do(r.elements,s.elements,ir):r instanceof Pd&&s instanceof Pd?ir(r.Ee,s.Ee):r instanceof kd&&s instanceof kd}(t.transform,e.transform)}class k6{constructor(e,n){this.version=e,this.transformResults=n}}class tr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new tr}static exists(e){return new tr(void 0,e)}static updateTime(e){return new tr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Wh{}function k2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new q0(t.key,tr.none()):new gc(t.key,t.data,tr.none());{const n=t.data,r=_n.empty();let s=new Nt(Ct.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ki(t.key,r,new On(s.toArray()),tr.none())}}function P6(t,e,n){t instanceof gc?function(s,i,o){const a=s.value.clone(),l=Pw(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ki?function(s,i,o){if(!Cu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Pw(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(P2(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ja(t,e,n,r){return t instanceof gc?function(i,o,a,l){if(!Cu(i.precondition,o))return a;const c=i.value.clone(),d=Nw(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ki?function(i,o,a,l){if(!Cu(i.precondition,o))return a;const c=Nw(i.fieldTransforms,l,o),d=o.data;return d.setAll(P2(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return Cu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function N6(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=I2(r.transform,s||null);i!=null&&(n===null&&(n=_n.empty()),n.set(r.field,i))}return n||null}function kw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Do(r,s,(i,o)=>C6(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class gc extends Wh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ki extends Wh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function P2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Pw(t,e,n){const r=new Map;Ce(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,A6(o,a,n[s]))}return r}function Nw(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,R6(i,o,e))}return r}class q0 extends Wh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class j6 extends Wh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&P6(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ja(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ja(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=S2();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=k2(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Do(this.mutations,e.mutations,(n,r)=>kw(n,r))&&Do(this.baseMutations,e.baseMutations,(n,r)=>kw(n,r))}}class K0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ce(e.mutations.length===r.length);let s=function(){return E6}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new K0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe,de;function M6(t){switch(t){default:return te();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function N2(t){if(t===void 0)return Cr("GRPC error has no .code"),j.UNKNOWN;switch(t){case Xe.OK:return j.OK;case Xe.CANCELLED:return j.CANCELLED;case Xe.UNKNOWN:return j.UNKNOWN;case Xe.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Xe.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Xe.INTERNAL:return j.INTERNAL;case Xe.UNAVAILABLE:return j.UNAVAILABLE;case Xe.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Xe.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Xe.NOT_FOUND:return j.NOT_FOUND;case Xe.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Xe.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Xe.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Xe.ABORTED:return j.ABORTED;case Xe.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Xe.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Xe.DATA_LOSS:return j.DATA_LOSS;default:return te()}}(de=Xe||(Xe={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6=new fo([4294967295,4294967295],0);function jw(t){const e=$6().encode(t),n=new B$;return n.update(e),new Uint8Array(n.digest())}function Ow(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new fo([n,r],0),new fo([s,i],0)]}class Q0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Oa(`Invalid padding: ${n}`);if(r<0)throw new Oa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Oa(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=fo.fromNumber(this.Ae)}Ve(e,n,r){let s=e.add(n.multiply(fo.fromNumber(r)));return s.compare(F6)===1&&(s=new fo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=jw(e),[r,s]=Ow(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);if(!this.me(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Q0(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=jw(e),[r,s]=Ow(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Oa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,yc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Hh(se.min(),s,new Fe(me),Pr(),ce())}}class yc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new yc(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n,r,s){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=s}}class j2{constructor(e,n){this.targetId=e,this.ye=n}}class O2{constructor(e,n,r=Lt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Lw{constructor(){this.we=0,this.Se=Mw(),this.be=Lt.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=ce(),n=ce(),r=ce();return this.Se.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te()}}),new yc(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=Mw()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class V6{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=Pr(),this.Ue=Dw(),this.We=new Fe(me)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,s)=>{this.Ye(s)&&n(s)})}Xe(e){const n=e.targetId,r=e.ye.count,s=this.et(n);if(s){const i=s.target;if(_g(i))if(r===0){const o=new J(i.path);this.je(n,o,At.newNoDocument(o,se.min()))}else Ce(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),l=a?this.rt(a,e,o):1;if(l!==0){this.Ze(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,c)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=gi(r).toUint8Array()}catch(l){if(l instanceof c2)return Lo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Q0(o,s,i)}catch(l){return Lo(l instanceof Oa?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.je(n,i,null),s++)}),s}_t(e){const n=new Map;this.Ke.forEach((i,o)=>{const a=this.et(o);if(a){if(i.current&&_g(a.target)){const l=new J(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,At.newNoDocument(l,e))}i.Fe&&(n.set(o,i.xe()),i.Oe())}});let r=ce();this.Ue.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.et(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.$e.forEach((i,o)=>o.setReadTime(e));const s=new Hh(e,n,this.We,this.$e,r);return this.$e=Pr(),this.Ue=Dw(),this.We=new Fe(me),s}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const s=this.Je(e);this.ut(e,n)?s.Ne(n,1):s.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new Lw,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Nt(me),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new Lw),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function Dw(){return new Fe(J.comparator)}function Mw(){return new Fe(J.comparator)}const U6=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),B6=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),z6=(()=>({and:"AND",or:"OR"}))();class W6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bg(t,e){return t.useProto3Json||Vh(e)?e:{value:e}}function Nd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function L2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function H6(t,e){return Nd(t,e.toTimestamp())}function nr(t){return Ce(!!t),se.fromTimestamp(function(n){const r=_s(n);return new st(r.seconds,r.nanos)}(t))}function G0(t,e){return function(r){return new Re(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function D2(t){const e=Re.fromString(t);return Ce(V2(e)),e}function Ig(t,e){return G0(t.databaseId,e.path)}function Ep(t,e){const n=D2(e);if(n.get(1)!==t.databaseId.projectId)throw new q(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(M2(n))}function Rg(t,e){return G0(t.databaseId,e)}function q6(t){const e=D2(t);return e.length===4?Re.emptyPath():M2(e)}function Ag(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function M2(t){return Ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function $w(t,e,n){return{name:Ig(t,e),fields:n.value.mapValue.fields}}function K6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Ce(d===void 0||typeof d=="string"),Lt.fromBase64String(d||"")):(Ce(d===void 0||d instanceof Uint8Array),Lt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?j.UNKNOWN:N2(c.code);return new q(d,c.message||"")}(o);n=new O2(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ep(t,r.document.name),i=nr(r.document.updateTime),o=r.document.createTime?nr(r.document.createTime):se.min(),a=new _n({mapValue:{fields:r.document.fields}}),l=At.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new ku(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ep(t,r.document),i=r.readTime?nr(r.readTime):se.min(),o=At.newNoDocument(s,i),a=r.removedTargetIds||[];n=new ku([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ep(t,r.document),i=r.removedTargetIds||[];n=new ku([],i,s,null)}else{if(!("filter"in e))return te();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new D6(s,i),a=r.targetId;n=new j2(a,o)}}return n}function Q6(t,e){let n;if(e instanceof gc)n={update:$w(t,e.key,e.value)};else if(e instanceof q0)n={delete:Ig(t,e.key)};else if(e instanceof ki)n={update:$w(t,e.key,e.data),updateMask:rF(e.fieldMask)};else{if(!(e instanceof j6))return te();n={verify:Ig(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof kd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Dl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ml)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Pd)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw te()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:H6(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te()}(t,e.precondition)),n}function G6(t,e){return t&&t.length>0?(Ce(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?nr(s.updateTime):nr(i);return o.isEqual(se.min())&&(o=nr(i)),new k6(o,s.transformResults||[])}(n,e))):[]}function X6(t,e){return{documents:[Rg(t,e.path)]}}function Y6(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Rg(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Rg(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return F2(Fn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(c=>function(f){return{field:$i(f.field),direction:eF(f.dir)}}(c))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=bg(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function J6(t){let e=q6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ce(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(f){const p=$2(f);return p instanceof Fn&&f2(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(y){return new Ga(Fi(y.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Vh(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new Cd(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,m=f.values||[];return new Cd(m,p)}(n.endAt)),y6(e,s,o,i,a,"F",l,c)}function Z6(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Fi(n.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Fi(n.unaryFilter.field);return Ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Fi(n.unaryFilter.field);return Ze.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Fi(n.unaryFilter.field);return Ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(t):t.fieldFilter!==void 0?function(n){return Ze.create(Fi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Fn.create(n.compositeFilter.filters.map(r=>$2(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(t):te()}function eF(t){return U6[t]}function tF(t){return B6[t]}function nF(t){return z6[t]}function $i(t){return{fieldPath:t.canonicalString()}}function Fi(t){return Ct.fromServerFormat(t.fieldPath)}function F2(t){return t instanceof Ze?function(n){if(n.op==="=="){if(Tw(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NAN"}};if(Sw(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Tw(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NOT_NAN"}};if(Sw(n.value))return{unaryFilter:{field:$i(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$i(n.field),op:tF(n.op),value:n.value}}}(t):t instanceof Fn?function(n){const r=n.getFilters().map(s=>F2(s));return r.length===1?r[0]:{compositeFilter:{op:nF(n.op),filters:r}}}(t):te()}function rF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function V2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n,r,s,i=se.min(),o=se.min(),a=Lt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(e){this.ht=e}}function iF(t){const e=J6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(){this._n=new aF}addToCollectionParentIndex(e,n){return this._n.add(n),D.resolve()}getCollectionParents(e,n){return D.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return D.resolve()}deleteFieldIndex(e,n){return D.resolve()}getDocumentsMatchingTarget(e,n){return D.resolve(null)}getIndexType(e,n){return D.resolve(0)}getFieldIndexes(e,n){return D.resolve([])}getNextCollectionGroupToUpdate(e){return D.resolve(null)}getMinOffset(e,n){return D.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,n){return D.resolve(ws.min())}updateCollectionGroup(e,n,r){return D.resolve()}updateIndexEntries(e,n){return D.resolve()}}class aF{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Nt(Re.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Nt(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Fo(0)}static Bn(){return new Fo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(){this.changes=new ra(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,At.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?D.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ja(r.mutation,s,On.empty(),st.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const s=ei();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ja();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ei();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Pr();const o=Ya(),a=function(){return Ya()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof ki)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Ja(d.mutation,c,d.mutation.getFieldMask(),st.now())):o.set(c.key,On.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var f;return a.set(c,new cF(d,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ya();let s=new Fe((o,a)=>o-a),i=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||On.empty();d=a.applyToLocalView(c,d),r.set(l,d);const f=(s.get(a.batchId)||ce()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,f=S2();d.forEach(p=>{if(!i.has(p)){const m=k2(n.get(p),r.get(p));m!==null&&f.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return D.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return J.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):v2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):D.resolve(ei());let a=-1,l=i;return o.next(c=>D.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(d)?D.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,ce())).next(d=>({batchId:a,changes:E2(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=ja();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=ja();return this.indexManager.getCollectionParents(e,s).next(o=>D.forEach(o,a=>{const l=function(d,f){return new mc(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((d,f)=>{i=i.insert(d,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((a,l)=>{const c=l.getKey();i.get(c)===null&&(i=i.insert(c,At.newInvalidDocument(c)))});let o=ja();return i.forEach((a,l)=>{const c=s.get(a);c!==void 0&&Ja(c.mutation,l,On.empty(),st.now()),Bh(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return D.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:nr(s.createTime)}}(n)),D.resolve()}getNamedQuery(e,n){return D.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:iF(s.bundledQuery),readTime:nr(s.readTime)}}(n)),D.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(){this.overlays=new Fe(J.comparator),this.hr=new Map}getOverlay(e,n){return D.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ei();return D.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.It(e,n,i)}),D.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),D.resolve()}getOverlaysForCollection(e,n,r){const s=ei(),i=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return D.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Fe((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=ei(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=ei(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return D.resolve(a)}It(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new L6(n,r));let i=this.hr.get(n);i===void 0&&(i=ce(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(){this.Pr=new Nt(ot.Ir),this.Tr=new Nt(ot.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new ot(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new ot(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new J(new Re([])),r=new ot(n,e),s=new ot(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new J(new Re([])),r=new ot(n,e),s=new ot(n,e+1);let i=ce();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ot(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ot{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return J.comparator(e.key,n.key)||me(e.pr,n.pr)}static Er(e,n){return me(e.pr,n.pr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Nt(ot.Ir)}checkEmpty(e){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new O6(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new ot(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return D.resolve(o)}lookupMutationBatch(e,n){return D.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return D.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ot(n,0),s=new ot(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),D.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Nt(me);return n.forEach(s=>{const i=new ot(s,0),o=new ot(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),D.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new ot(new J(i),0);let a=new Nt(me);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),D.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ce(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return D.forEach(n.mutations,s=>{const i=new ot(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new ot(n,0),s=this.wr.firstAfterOrEqual(r);return D.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,D.resolve()}vr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e){this.Cr=e,this.docs=function(){return new Fe(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return D.resolve(r?r.document.mutableCopy():At.newInvalidDocument(n))}getEntries(e,n){let r=Pr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():At.newInvalidDocument(s))}),D.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Pr();const o=n.path,a=new J(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||e6(Z$(d),r)<=0||(s.has(d.key)||Bh(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return D.resolve(i)}getAllFromCollectionGroup(e,n,r,s){te()}Fr(e,n){return D.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new mF(this)}getSize(e){return D.resolve(this.size)}}class mF extends lF{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),D.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e){this.persistence=e,this.Mr=new ra(n=>B0(n),z0),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Or=0,this.Nr=new X0,this.targetCount=0,this.Br=Fo.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),D.resolve()}getLastRemoteSnapshotVersion(e){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return D.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),D.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Fo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,D.resolve()}updateTargetData(e,n){return this.qn(n),D.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,D.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),D.waitFor(i).next(()=>s)}getTargetCount(e){return D.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return D.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),D.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),D.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),D.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return D.resolve(r)}containsKey(e,n){return D.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(e,n){this.Lr={},this.overlays={},this.kr=new $0(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new gF(this),this.indexManager=new oF,this.remoteDocumentCache=function(s){return new pF(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new sF(n),this.$r=new dF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new hF,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new fF(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new vF(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return D.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class vF extends n6{constructor(e){super(),this.currentSequenceNumber=e}}class Y0{constructor(e){this.persistence=e,this.zr=new X0,this.jr=null}static Hr(e){return new Y0(e)}get Jr(){if(this.jr)return this.jr;throw te()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),D.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),D.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),D.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.Jr,r=>{const s=J.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,se.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return D.or([()=>D.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=ce(),s=ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new J0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(){this.$i=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Wi(e,n).next(i=>i||this.Gi(e,n,s,r)).next(i=>i||this.zi(e,n))}Wi(e,n){if(Aw(n))return D.resolve(null);let r=kr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Sg(n,null,"F"),r=kr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ce(...i);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ji(n,a);return this.Hi(n,c,o,l.readTime)?this.Wi(e,Sg(n,null,"F")):this.Ji(e,c,n,l)}))})))}Gi(e,n,r,s){return Aw(n)||s.isEqual(se.min())?this.zi(e,n):this.Ui.getDocuments(e,r).next(i=>{const o=this.ji(n,i);return this.Hi(n,o,r,s)?this.zi(e,n):(vw()<=pe.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Tg(n)),this.Ji(e,o,n,J$(s,-1)))})}ji(e,n){let r=new Nt(w2(e));return n.forEach((s,i)=>{Bh(e,i)&&(r=r.add(i))}),r}Hi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}zi(e,n){return vw()<=pe.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Tg(n)),this.Ui.getDocumentsMatchingQuery(e,n,ws.min())}Ji(e,n,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(e,n,r,s){this.persistence=e,this.Yi=n,this.serializer=s,this.Zi=new Fe(me),this.Xi=new ra(i=>B0(i),z0),this.es=new Map,this.ts=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this.ns(r)}ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uF(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Zi))}}function _F(t,e,n,r){return new wF(t,e,n,r)}async function U2(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ce();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function EF(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.ts.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const f=c.batch,p=f.keys();let m=D.resolve();return p.forEach(y=>{m=m.next(()=>d.getEntry(l,y)).next(g=>{const _=c.docVersions.get(y);Ce(_!==null),g.version.compareTo(_)<0&&(f.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),d.addEntry(g)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ce();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function B2(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function SF(t,e){const n=oe(t),r=e.snapshotVersion;let s=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ts.newChangeBuffer({trackRemovals:!0});s=n.Zi;const a=[];e.targetChanges.forEach((d,f)=>{const p=s.get(f);if(!p)return;a.push(n.Qr.removeMatchingKeys(i,d.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(i,d.addedDocuments,f)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Lt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(f,m),function(g,_,x){return g.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(p,m,d)&&a.push(n.Qr.updateTargetData(i,m))});let l=Pr(),c=ce();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(TF(i,o,e.documentUpdates).next(d=>{l=d.ss,c=d.os})),!r.isEqual(se.min())){const d=n.Qr.getLastRemoteSnapshotVersion(i).next(f=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return D.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Zi=s,i))}function TF(t,e,n){let r=ce(),s=ce();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Pr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(se.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):G("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ss:o,os:s}})}function bF(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function IF(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,D.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new ts(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Zi.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(r.targetId,r),n.Xi.set(e,r.targetId)),r})}async function Cg(t,e,n){const r=oe(t),s=r.Zi.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!pc(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Zi=r.Zi.remove(e),r.Xi.delete(s.target)}function Fw(t,e,n){const r=oe(t);let s=se.min(),i=ce();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,c,d){const f=oe(l),p=f.Xi.get(d);return p!==void 0?D.resolve(f.Zi.get(p)):f.Qr.getTargetData(c,d)}(r,o,kr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Yi.getDocumentsMatchingQuery(o,e,n?s:se.min(),n?i:ce())).next(a=>(RF(r,x6(e),a),{documents:a,_s:i})))}function RF(t,e,n){let r=t.es.get(e)||se.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.es.set(e,r)}class Vw{constructor(){this.activeTargetIds=b6()}Is(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ts(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ps(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AF{constructor(){this.Ys=new Vw,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}updateQueryState(e,n,r){this.Zs[e]=n}removeLocalQueryTarget(e){this.Ys.Ts(e)}isLocalQueryTarget(e){return this.Ys.activeTargetIds.has(e)}clearQueryState(e){delete this.Zs[e]}getAllActiveQueryTargets(){return this.Ys.activeTargetIds}isActiveQueryTarget(e){return this.Ys.activeTargetIds.has(e)}start(){return this.Ys=new Vw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{Xs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(){this.eo=()=>this.no(),this.ro=()=>this.io(),this.so=[],this.oo()}Xs(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}oo(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}no(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}io(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tu=null;function Sp(){return tu===null?tu=function(){return 268435456+Math.round(2147483648*Math.random())}():tu++,"0x"+tu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e){this._o=e._o,this.ao=e.ao}uo(e){this.co=e}lo(e){this.ho=e}onMessage(e){this.Po=e}close(){this.ao()}send(e){this._o(e)}Io(){this.co()}To(e){this.ho(e)}Eo(e){this.Po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St="WebChannelConnection";class NF extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ao=r+"://"+n.host,this.Ro=`projects/${s}/databases/${i}`,this.Vo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get mo(){return!1}fo(n,r,s,i,o){const a=Sp(),l=this.po(n,r);G("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(c,i,o),this.wo(n,l,c,s).then(d=>(G("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Lo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}So(n,r,s,i,o,a){return this.fo(n,r,s,i,o)}yo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ta}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}po(n,r){const s=kF[n];return`${this.Ao}/v1/${r}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}wo(e,n,r,s){const i=Sp();return new Promise((o,a)=>{const l=new U$;l.setWithCredentials(!0),l.listenOnce(F$.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case _p.NO_ERROR:const d=l.getResponseJson();G(St,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case _p.TIMEOUT:G(St,`RPC '${e}' ${i} timed out`),a(new q(j.DEADLINE_EXCEEDED,"Request time out"));break;case _p.HTTP_ERROR:const f=l.getStatus();if(G(St,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const y=function(_){const x=_.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(x)>=0?x:j.UNKNOWN}(m.status);a(new q(y,m.message))}else a(new q(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new q(j.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{G(St,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);G(St,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}bo(e,n,r){const s=Sp(),i=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=M$(),a=$$(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.yo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");G(St,`Creating RPC '${e}' stream ${s}: ${d}`,l);const f=o.createWebChannel(d,l);let p=!1,m=!1;const y=new PF({_o:_=>{m?G(St,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(p||(G(St,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),G(St,`RPC '${e}' stream ${s} sending:`,_),f.send(_))},ao:()=>f.close()}),g=(_,x,v)=>{_.listen(x,w=>{try{v(w)}catch(E){setTimeout(()=>{throw E},0)}})};return g(f,Jc.EventType.OPEN,()=>{m||G(St,`RPC '${e}' stream ${s} transport opened.`)}),g(f,Jc.EventType.CLOSE,()=>{m||(m=!0,G(St,`RPC '${e}' stream ${s} transport closed`),y.To())}),g(f,Jc.EventType.ERROR,_=>{m||(m=!0,Lo(St,`RPC '${e}' stream ${s} transport errored:`,_),y.To(new q(j.UNAVAILABLE,"The operation could not be completed")))}),g(f,Jc.EventType.MESSAGE,_=>{var x;if(!m){const v=_.data[0];Ce(!!v);const w=v,E=w.error||((x=w[0])===null||x===void 0?void 0:x.error);if(E){G(St,`RPC '${e}' stream ${s} received error:`,E);const S=E.status;let b=function(A){const C=Xe[A];if(C!==void 0)return N2(C)}(S),I=E.message;b===void 0&&(b=j.INTERNAL,I="Unknown error status: "+S+" with message "+E.message),m=!0,y.To(new q(b,I)),f.close()}else G(St,`RPC '${e}' stream ${s} received:`,v),y.Eo(v)}}),g(a,V$.STAT_EVENT,_=>{_.stat===gw.PROXY?G(St,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===gw.NOPROXY&&G(St,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.Io()},0),y}}function Tp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(t){return new W6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Do=r,this.vo=s,this.Co=i,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}reset(){this.Fo=0}Oo(){this.Fo=this.Co}No(e){this.cancel();const n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Fo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Mo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.xo=Date.now(),e())),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}Lo(){this.Mo!==null&&(this.Mo.skipDelay(),this.Mo=null)}cancel(){this.Mo!==null&&(this.Mo.cancel(),this.Mo=null)}Bo(){return(Math.random()-.5)*this.Fo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.ko=r,this.qo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new z2(e,n)}Wo(){return this.state===1||this.state===5||this.Go()}Go(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.zo()}async stop(){this.Wo()&&await this.close(0)}jo(){this.state=0,this.Uo.reset()}Ho(){this.Go()&&this.Ko===null&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,()=>this.Jo()))}Yo(e){this.Zo(),this.stream.send(e)}async Jo(){if(this.Go())return this.close(0)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}Xo(){this.$o&&(this.$o.cancel(),this.$o=null)}async close(e,n){this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,e!==4?this.Uo.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Cr(n.toString()),Cr("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.e_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.lo(n)}e_(){}auth(){this.state=1;const e=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Qo===n&&this.n_(r,s)},r=>{e(()=>{const s=new q(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.r_(s)})})}n_(e,n){const r=this.t_(this.Qo);this.stream=this.i_(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.$o=this.oi.enqueueAfterDelay(this.qo,1e4,()=>(this.Go()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.lo(s=>{r(()=>this.r_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}zo(){this.state=5,this.Uo.No(async()=>{this.state=0,this.start()})}r_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}t_(e){return n=>{this.oi.enqueueAndForget(()=>this.Qo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jF extends W2{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}i_(e,n){return this.connection.bo("Listen",e,n)}onMessage(e){this.Uo.reset();const n=K6(this.serializer,e),r=function(i){if(!("targetChange"in i))return se.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?se.min():o.readTime?nr(o.readTime):se.min()}(e);return this.listener.s_(n,r)}o_(e){const n={};n.database=Ag(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=_g(l)?{documents:X6(i,l)}:{query:Y6(i,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=L2(i,o.resumeToken);const c=bg(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(se.min())>0){a.readTime=Nd(i,o.snapshotVersion.toTimestamp());const c=bg(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Z6(this.serializer,e);r&&(n.labels=r),this.Yo(n)}__(e){const n={};n.database=Ag(this.serializer),n.removeTarget=e,this.Yo(n)}}class OF extends W2{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.a_=!1}get u_(){return this.a_}start(){this.a_=!1,this.lastStreamToken=void 0,super.start()}e_(){this.a_&&this.c_([])}i_(e,n){return this.connection.bo("Write",e,n)}onMessage(e){if(Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();const n=G6(e.writeResults,e.commitTime),r=nr(e.commitTime);return this.listener.l_(r,n)}return Ce(!e.writeResults||e.writeResults.length===0),this.a_=!0,this.listener.h_()}P_(){const e={};e.database=Ag(this.serializer),this.Yo(e)}c_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Q6(this.serializer,r))};this.Yo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.I_=!1}T_(){if(this.I_)throw new q(j.FAILED_PRECONDITION,"The client has already been terminated.")}fo(e,n,r){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.fo(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(j.UNKNOWN,s.toString())})}So(e,n,r,s){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(j.UNKNOWN,i.toString())})}terminate(){this.I_=!0}}class DF{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}V_(){this.d_===0&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.A_=null,this.f_("Backend didn't respond within 10 seconds."),this.m_("Offline"),Promise.resolve())))}g_(e){this.state==="Online"?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.m_("Offline")))}set(e){this.p_(),this.d_=0,e==="Online"&&(this.R_=!1),this.m_(e)}m_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}f_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.R_?(Cr(n),this.R_=!1):G("OnlineStateTracker",n)}p_(){this.A_!==null&&(this.A_.cancel(),this.A_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=i,this.D_.Xs(o=>{r.enqueueAndForget(async()=>{Pi(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=oe(l);c.S_.add(4),await vc(c),c.v_.set("Unknown"),c.S_.delete(4),await Kh(c)}(this))})}),this.v_=new DF(r,s)}}async function Kh(t){if(Pi(t))for(const e of t.b_)await e(!0)}async function vc(t){for(const e of t.b_)await e(!1)}function H2(t,e){const n=oe(t);n.w_.has(e.targetId)||(n.w_.set(e.targetId,e),tv(n)?ev(n):sa(n).Go()&&Z0(n,e))}function q2(t,e){const n=oe(t),r=sa(n);n.w_.delete(e),r.Go()&&K2(n,e),n.w_.size===0&&(r.Go()?r.Ho():Pi(n)&&n.v_.set("Unknown"))}function Z0(t,e){if(t.C_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}sa(t).o_(e)}function K2(t,e){t.C_.Le(e),sa(t).__(e)}function ev(t){t.C_=new V6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.w_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),sa(t).start(),t.v_.V_()}function tv(t){return Pi(t)&&!sa(t).Wo()&&t.w_.size>0}function Pi(t){return oe(t).S_.size===0}function Q2(t){t.C_=void 0}async function $F(t){t.w_.forEach((e,n)=>{Z0(t,e)})}async function FF(t,e){Q2(t),tv(t)?(t.v_.g_(e),ev(t)):t.v_.set("Unknown")}async function VF(t,e,n){if(t.v_.set("Online"),e instanceof O2&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.w_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.w_.delete(a),s.C_.removeTarget(a))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await jd(t,r)}else if(e instanceof ku?t.C_.Ge(e):e instanceof j2?t.C_.Xe(e):t.C_.He(e),!n.isEqual(se.min()))try{const r=await B2(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.C_._t(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.w_.get(c);d&&i.w_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.w_.get(l);if(!d)return;i.w_.set(l,d.withResumeToken(Lt.EMPTY_BYTE_STRING,d.snapshotVersion)),K2(i,l);const f=new ts(d.target,l,c,d.sequenceNumber);Z0(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await jd(t,r)}}async function jd(t,e,n){if(!pc(e))throw e;t.S_.add(1),await vc(t),t.v_.set("Offline"),n||(n=()=>B2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.S_.delete(1),await Kh(t)})}function G2(t,e){return e().catch(n=>jd(t,n,e))}async function Qh(t){const e=oe(t),n=Es(e);let r=e.y_.length>0?e.y_[e.y_.length-1].batchId:-1;for(;UF(e);)try{const s=await bF(e.localStore,r);if(s===null){e.y_.length===0&&n.Ho();break}r=s.batchId,BF(e,s)}catch(s){await jd(e,s)}X2(e)&&Y2(e)}function UF(t){return Pi(t)&&t.y_.length<10}function BF(t,e){t.y_.push(e);const n=Es(t);n.Go()&&n.u_&&n.c_(e.mutations)}function X2(t){return Pi(t)&&!Es(t).Wo()&&t.y_.length>0}function Y2(t){Es(t).start()}async function zF(t){Es(t).P_()}async function WF(t){const e=Es(t);for(const n of t.y_)e.c_(n.mutations)}async function HF(t,e,n){const r=t.y_.shift(),s=K0.from(r,e,n);await G2(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Qh(t)}async function qF(t,e){e&&Es(t).u_&&await async function(r,s){if(function(o){return M6(o)&&o!==j.ABORTED}(s.code)){const i=r.y_.shift();Es(r).jo(),await G2(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Qh(r)}}(t,e),X2(t)&&Y2(t)}async function Bw(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=Pi(n);n.S_.add(3),await vc(n),r&&n.v_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.S_.delete(3),await Kh(n)}async function KF(t,e){const n=oe(t);e?(n.S_.delete(2),await Kh(n)):e||(n.S_.add(2),await vc(n),n.v_.set("Unknown"))}function sa(t){return t.F_||(t.F_=function(n,r,s){const i=oe(n);return i.T_(),new jF(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:$F.bind(null,t),lo:FF.bind(null,t),s_:VF.bind(null,t)}),t.b_.push(async e=>{e?(t.F_.jo(),tv(t)?ev(t):t.v_.set("Unknown")):(await t.F_.stop(),Q2(t))})),t.F_}function Es(t){return t.M_||(t.M_=function(n,r,s){const i=oe(n);return i.T_(),new OF(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:zF.bind(null,t),lo:qF.bind(null,t),h_:WF.bind(null,t),l_:HF.bind(null,t)}),t.b_.push(async e=>{e?(t.M_.jo(),await Qh(t)):(await t.M_.stop(),t.y_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.y_.length} pending writes`),t.y_=[]))})),t.M_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new nv(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rv(t,e){if(Cr("AsyncQueue",`${e}: ${t}`),pc(t))return new q(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=ja(),this.sortedSet=new Fe(this.comparator)}static emptySet(e){return new po(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof po)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new po;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(){this.x_=new Fe(J.comparator)}track(e){const n=e.doc.key,r=this.x_.get(n);r?e.type!==0&&r.type===3?this.x_=this.x_.insert(n,e):e.type===3&&r.type!==1?this.x_=this.x_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.x_=this.x_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.x_=this.x_.remove(n):e.type===1&&r.type===2?this.x_=this.x_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):te():this.x_=this.x_.insert(n,e)}O_(){const e=[];return this.x_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Vo{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Vo(e,n,po.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(){this.N_=void 0,this.listeners=[]}}class GF{constructor(){this.queries=new ra(e=>x2(e),Uh),this.onlineState="Unknown",this.B_=new Set}}async function J2(t,e){const n=oe(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new QF),s)try{i.N_=await n.onListen(r)}catch(o){const a=rv(o,`Initialization of query '${Tg(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.L_(n.onlineState),i.N_&&e.k_(i.N_)&&sv(n)}async function Z2(t,e){const n=oe(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function XF(t,e){const n=oe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.k_(s)&&(r=!0);o.N_=s}}r&&sv(n)}function YF(t,e,n){const r=oe(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function sv(t){t.B_.forEach(e=>{e.next()})}class eR{constructor(e,n,r){this.query=e,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}k_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Vo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),n=!0):this.W_(e,this.onlineState)&&(this.G_(e),n=!0),this.K_=e,n}onError(e){this.q_.error(e)}L_(e){this.onlineState=e;let n=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),n=!0),n}W_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}U_(e){if(e.docChanges.length>0)return!0;const n=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}G_(e){e=Vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.key=e}}class nR{constructor(e){this.key=e}}class JF{constructor(e,n){this.query=e,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=ce(),this.mutatedKeys=ce(),this.ia=w2(e),this.sa=new po(this.ia)}get oa(){return this.ta}_a(e,n){const r=n?n.aa:new zw,s=n?n.sa:this.sa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,f)=>{const p=s.get(d),m=Bh(this.query,f)?f:null,y=!!p&&this.mutatedKeys.has(p.key),g=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let _=!1;p&&m?p.data.isEqual(m.data)?y!==g&&(r.track({type:3,doc:m}),_=!0):this.ua(p,m)||(r.track({type:2,doc:m}),_=!0,(l&&this.ia(m,l)>0||c&&this.ia(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),_=!0):p&&!m&&(r.track({type:1,doc:p}),_=!0,(l||c)&&(a=!0)),_&&(m?(o=o.add(m),i=g?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{sa:o,aa:r,Hi:a,mutatedKeys:i}}ua(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;const i=e.aa.O_();i.sort((c,d)=>function(p,m){const y=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return y(p)-y(m)}(c.type,d.type)||this.ia(c.doc,d.doc)),this.ca(r);const o=n?this.la():[],a=this.ra.size===0&&this.current?1:0,l=a!==this.na;return this.na=a,i.length!==0||l?{snapshot:new Vo(this.query,e.sa,s,i,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ha:o}:{ha:o}}L_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({sa:this.sa,aa:new zw,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}Pa(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}ca(e){e&&(e.addedDocuments.forEach(n=>this.ta=this.ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ta=this.ta.delete(n)),this.current=e.current)}la(){if(!this.current)return[];const e=this.ra;this.ra=ce(),this.sa.forEach(r=>{this.Pa(r.key)&&(this.ra=this.ra.add(r.key))});const n=[];return e.forEach(r=>{this.ra.has(r)||n.push(new nR(r))}),this.ra.forEach(r=>{e.has(r)||n.push(new tR(r))}),n}Ia(e){this.ta=e._s,this.ra=ce();const n=this._a(e.documents);return this.applyChanges(n,!0)}Ta(){return Vo.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,this.na===0,this.hasCachedResults)}}class ZF{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class eV{constructor(e){this.key=e,this.Ea=!1}}class tV{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.da={},this.Aa=new ra(a=>x2(a),Uh),this.Ra=new Map,this.Va=new Set,this.ma=new Fe(J.comparator),this.fa=new Map,this.ga=new X0,this.pa={},this.ya=new Map,this.wa=Fo.Bn(),this.onlineState="Unknown",this.Sa=void 0}get isPrimaryClient(){return this.Sa===!0}}async function nV(t,e){const n=hV(t);let r,s;const i=n.Aa.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Ta();else{const o=await IF(n.localStore,kr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await rV(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&H2(n.remoteStore,o)}return s}async function rV(t,e,n,r,s){t.ba=(f,p,m)=>async function(g,_,x,v){let w=_.view._a(x);w.Hi&&(w=await Fw(g.localStore,_.query,!1).then(({documents:b})=>_.view._a(b,w)));const E=v&&v.targetChanges.get(_.targetId),S=_.view.applyChanges(w,g.isPrimaryClient,E);return Hw(g,_.targetId,S.ha),S.snapshot}(t,f,p,m);const i=await Fw(t.localStore,e,!0),o=new JF(e,i._s),a=o._a(i.documents),l=yc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Hw(t,n,c.ha);const d=new ZF(e,n,o);return t.Aa.set(e,d),t.Ra.has(n)?t.Ra.get(n).push(e):t.Ra.set(n,[e]),c.snapshot}async function sV(t,e){const n=oe(t),r=n.Aa.get(e),s=n.Ra.get(r.targetId);if(s.length>1)return n.Ra.set(r.targetId,s.filter(i=>!Uh(i,e))),void n.Aa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Cg(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),q2(n.remoteStore,r.targetId),kg(n,r.targetId)}).catch(fc)):(kg(n,r.targetId),await Cg(n.localStore,r.targetId,!0))}async function iV(t,e,n){const r=fV(t);try{const s=await function(o,a){const l=oe(o),c=st.now(),d=a.reduce((m,y)=>m.add(y.key),ce());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=Pr(),g=ce();return l.ts.getEntries(m,d).next(_=>{y=_,y.forEach((x,v)=>{v.isValidDocument()||(g=g.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(_=>{f=_;const x=[];for(const v of a){const w=N6(v,f.get(v.key).overlayedDocument);w!=null&&x.push(new ki(v.key,w,u2(w.value.mapValue),tr.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,x,a)}).next(_=>{p=_;const x=_.applyToLocalDocumentSet(f,g);return l.documentOverlayCache.saveOverlays(m,_.batchId,x)})}).then(()=>({batchId:p.batchId,changes:E2(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.pa[o.currentUser.toKey()];c||(c=new Fe(me)),c=c.insert(a,l),o.pa[o.currentUser.toKey()]=c}(r,s.batchId,n),await xc(r,s.changes),await Qh(r.remoteStore)}catch(s){const i=rv(s,"Failed to persist write");n.reject(i)}}async function rR(t,e){const n=oe(t);try{const r=await SF(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.fa.get(i);o&&(Ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ea=!0:s.modifiedDocuments.size>0?Ce(o.Ea):s.removedDocuments.size>0&&(Ce(o.Ea),o.Ea=!1))}),await xc(n,r,e)}catch(r){await fc(r)}}function Ww(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Aa.forEach((i,o)=>{const a=o.view.L_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=oe(o);l.onlineState=a;let c=!1;l.queries.forEach((d,f)=>{for(const p of f.listeners)p.L_(a)&&(c=!0)}),c&&sv(l)}(r.eventManager,e),s.length&&r.da.s_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function oV(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.fa.get(e),i=s&&s.key;if(i){let o=new Fe(J.comparator);o=o.insert(i,At.newNoDocument(i,se.min()));const a=ce().add(i),l=new Hh(se.min(),new Map,new Fe(me),o,a);await rR(r,l),r.ma=r.ma.remove(i),r.fa.delete(e),iv(r)}else await Cg(r.localStore,e,!1).then(()=>kg(r,e,n)).catch(fc)}async function aV(t,e){const n=oe(t),r=e.batch.batchId;try{const s=await EF(n.localStore,e);iR(n,r,null),sR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xc(n,s)}catch(s){await fc(s)}}async function lV(t,e,n){const r=oe(t);try{const s=await function(o,a){const l=oe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Ce(f!==null),d=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);iR(r,e,n),sR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await xc(r,s)}catch(s){await fc(s)}}function sR(t,e){(t.ya.get(e)||[]).forEach(n=>{n.resolve()}),t.ya.delete(e)}function iR(t,e,n){const r=oe(t);let s=r.pa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.pa[r.currentUser.toKey()]=s}}function kg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ra.get(e))t.Aa.delete(r),n&&t.da.Da(r,n);t.Ra.delete(e),t.isPrimaryClient&&t.ga.Vr(e).forEach(r=>{t.ga.containsKey(r)||oR(t,r)})}function oR(t,e){t.Va.delete(e.path.canonicalString());const n=t.ma.get(e);n!==null&&(q2(t.remoteStore,n),t.ma=t.ma.remove(e),t.fa.delete(n),iv(t))}function Hw(t,e,n){for(const r of n)r instanceof tR?(t.ga.addReference(r.key,e),cV(t,r)):r instanceof nR?(G("SyncEngine","Document no longer in limbo: "+r.key),t.ga.removeReference(r.key,e),t.ga.containsKey(r.key)||oR(t,r.key)):te()}function cV(t,e){const n=e.key,r=n.path.canonicalString();t.ma.get(n)||t.Va.has(r)||(G("SyncEngine","New document in limbo: "+n),t.Va.add(r),iv(t))}function iv(t){for(;t.Va.size>0&&t.ma.size<t.maxConcurrentLimboResolutions;){const e=t.Va.values().next().value;t.Va.delete(e);const n=new J(Re.fromString(e)),r=t.wa.next();t.fa.set(r,new eV(n)),t.ma=t.ma.insert(n,r),H2(t.remoteStore,new ts(kr(W0(n.path)),r,"TargetPurposeLimboResolution",$0.ae))}}async function xc(t,e,n){const r=oe(t),s=[],i=[],o=[];r.Aa.isEmpty()||(r.Aa.forEach((a,l)=>{o.push(r.ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const d=J0.Ki(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.da.s_(s),await async function(l,c){const d=oe(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>D.forEach(c,p=>D.forEach(p.qi,m=>d.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>D.forEach(p.Qi,m=>d.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!pc(f))throw f;G("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=d.Zi.get(p),y=m.snapshotVersion,g=m.withLastLimboFreeSnapshotVersion(y);d.Zi=d.Zi.insert(p,g)}}}(r.localStore,i))}async function uV(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await U2(n.localStore,e);n.currentUser=e,function(i,o){i.ya.forEach(a=>{a.forEach(l=>{l.reject(new q(j.CANCELLED,o))})}),i.ya.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xc(n,r.rs)}}function dV(t,e){const n=oe(t),r=n.fa.get(e);if(r&&r.Ea)return ce().add(r.key);{let s=ce();const i=n.Ra.get(e);if(!i)return s;for(const o of i){const a=n.Aa.get(o);s=s.unionWith(a.view.oa)}return s}}function hV(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oV.bind(null,e),e.da.s_=XF.bind(null,e.eventManager),e.da.Da=YF.bind(null,e.eventManager),e}function fV(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lV.bind(null,e),e}class qw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=qh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return _F(this.persistence,new xF,e.initialUser,this.serializer)}createPersistence(e){return new yF(Y0.Hr,this.serializer)}createSharedClientState(e){return new AF}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class pV{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ww(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uV.bind(null,this.syncEngine),await KF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new GF}()}createDatastore(e){const n=qh(e.databaseInfo.databaseId),r=function(i){return new NF(i)}(e.databaseInfo);return function(i,o,a,l){return new LF(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new MF(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Ww(this.syncEngine,n,0),function(){return Uw.v()?new Uw:new CF}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const f=new tV(s,i,o,a,l,c);return d&&(f.Sa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=oe(n);G("RemoteStore","RemoteStore shutting down."),r.S_.add(5),await vc(r),r.D_.shutdown(),r.v_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Fa(this.observer.next,e)}error(e){this.observer.error?this.Fa(this.observer.error,e):Cr("Uncaught Error in snapshot listener:",e.toString())}Ma(){this.muted=!0}Fa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=bt.UNAUTHENTICATED,this.clientId=a2.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{G("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(G("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new q(j.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=rv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function bp(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await U2(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Kw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await yV(t);G("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>Bw(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Bw(e.remoteStore,i)),t._onlineComponents=e}function gV(t){return t.name==="FirebaseError"?t.code===j.FAILED_PRECONDITION||t.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function yV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await bp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!gV(n))throw n;Lo("Error using user provided cache. Falling back to memory cache: "+n),await bp(t,new qw)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await bp(t,new qw);return t._offlineComponents}async function lR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await Kw(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await Kw(t,new pV))),t._onlineComponents}function vV(t){return lR(t).then(e=>e.syncEngine)}async function cR(t){const e=await lR(t),n=e.eventManager;return n.onListen=nV.bind(null,e.syncEngine),n.onUnlisten=sV.bind(null,e.syncEngine),n}function xV(t,e,n={}){const r=new _r;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new aR({next:p=>{o.enqueueAndForget(()=>Z2(i,f));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new q(j.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new q(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new eR(W0(a.path),d,{includeMetadataChanges:!0,z_:!0});return J2(i,f)}(await cR(t),t.asyncQueue,e,n,r)),r.promise}function wV(t,e,n={}){const r=new _r;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new aR({next:p=>{o.enqueueAndForget(()=>Z2(i,f)),p.fromCache&&l.source==="server"?c.reject(new q(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new eR(a,d,{includeMetadataChanges:!0,z_:!0});return J2(i,f)}(await cR(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(t,e,n){if(!n)throw new q(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _V(t,e,n,r){if(e===!0&&r===!0)throw new q(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Gw(t){if(!J.isDocumentKey(t))throw new q(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Xw(t){if(J.isDocumentKey(t))throw new q(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Gh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function Ss(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gh(t);throw new q(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_V("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new q(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new q(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new z$;switch(r.type){case"firstParty":return new K$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Qw.get(n);r&&(G("ComponentProvider","Removing Datastore"),Qw.delete(n),r.terminate())}(this),Promise.resolve()}}function EV(t,e,n,r={}){var s;const i=(t=Ss(t,Xh))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=bt.MOCK_USER;else{a=wb(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new q(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new bt(c)}t._authCredentials=new W$(new o2(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ia(this.firestore,e,this._query)}}class Jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}}class ps extends ia{constructor(e,n,r){super(e,n,W0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new J(e))}withConverter(e){return new ps(this.firestore,e,this._path)}}function oa(t,e,...n){if(t=it(t),dR("collection","path",e),t instanceof Xh){const r=Re.fromString(e,...n);return Xw(r),new ps(t,null,r)}{if(!(t instanceof Jt||t instanceof ps))throw new q(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return Xw(r),new ps(t.firestore,null,r)}}function ov(t,e,...n){if(t=it(t),arguments.length===1&&(e=a2.V()),dR("doc","path",e),t instanceof Xh){const r=Re.fromString(e,...n);return Gw(r),new Jt(t,null,new J(r))}{if(!(t instanceof Jt||t instanceof ps))throw new q(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return Gw(r),new Jt(t.firestore,t instanceof ps?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(){this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new z2(this,"async_queue_retry"),this.tu=()=>{const n=Tp();n&&G("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Uo.Lo()};const e=Tp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.tu)}get isShuttingDown(){return this.Ha}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nu(),this.ru(e)}enterRestrictedMode(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;const n=Tp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.tu)}}enqueue(e){if(this.nu(),this.Ha)return new Promise(()=>{});const n=new _r;return this.ru(()=>this.Ha&&this.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ja.push(e),this.iu()))}async iu(){if(this.ja.length!==0){try{await this.ja[0](),this.ja.shift(),this.Uo.reset()}catch(e){if(!pc(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.ja.length>0&&this.Uo.No(()=>this.iu())}}ru(e){const n=this.za.then(()=>(this.Za=!0,e().catch(r=>{this.Ya=r,this.Za=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Cr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Za=!1,r))));return this.za=n,n}enqueueAfterDelay(e,n,r){this.nu(),this.eu.indexOf(e)>-1&&(n=0);const s=nv.createAndSchedule(this,e,n,r,i=>this.su(i));return this.Ja.push(s),s}nu(){this.Ya&&te()}verifyOperationInProgress(){}async ou(){let e;do e=this.za,await e;while(e!==this.za)}_u(e){for(const n of this.Ja)if(n.timerId===e)return!0;return!1}au(e){return this.ou().then(()=>{this.Ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ou()})}uu(e){this.eu.push(e)}su(e){const n=this.Ja.indexOf(e);this.Ja.splice(n,1)}}class wc extends Xh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new SV}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||hR(this),this._firestoreClient.terminate()}}function TV(t,e){const n=typeof t=="object"?t:o0(),r=typeof t=="string"?t:e||"(default)",s=xh(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=yb("firestore");i&&EV(s,...i)}return s}function av(t){return t._firestoreClient||hR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function hR(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new i6(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,uR(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new mV(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Uo(Lt.fromBase64String(e))}catch(n){throw new q(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Uo(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=/^__.*__$/;class IV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ki(e,this.data,this.fieldMask,n,this.fieldTransforms):new gc(e,this.data,n,this.fieldTransforms)}}function pR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class uv{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.cu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get lu(){return this.settings.lu}hu(e){return new uv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.Tu(e),s}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.cu(),s}du(e){return this.hu({path:void 0,Iu:!0})}Au(e){return Od(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}cu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}Tu(e){if(e.length===0)throw this.Au("Document fields must not be empty");if(pR(this.lu)&&bV.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}class RV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||qh(e)}mu(e,n,r,s=!1){return new uv({lu:e,methodName:n,Vu:r,path:Ct.emptyPath(),Iu:!1,Ru:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mR(t){const e=t._freezeSettings(),n=qh(t._databaseId);return new RV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function AV(t,e,n,r,s,i={}){const o=t.mu(i.merge||i.mergeFields?2:0,e,n,s);vR("Data must be an object, but it was:",o,r);const a=gR(r,o);let l,c;if(i.merge)l=new On(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const p=kV(e,f,n);if(!o.contains(p))throw new q(j.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);NV(d,p)||d.push(p)}l=new On(d),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new IV(new _n(a),l,c)}function CV(t,e,n,r=!1){return dv(n,t.mu(r?4:3,e))}function dv(t,e){if(yR(t=it(t)))return vR("Unsupported field value:",e,t),gR(t,e);if(t instanceof fR)return function(r,s){if(!pR(s.lu))throw s.Au(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Au(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Iu&&e.lu!==4)throw e.Au("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=dv(a,s.du(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=it(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return I6(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=st.fromDate(r);return{timestampValue:Nd(s.serializer,i)}}if(r instanceof st){const i=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nd(s.serializer,i)}}if(r instanceof cv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Uo)return{bytesValue:L2(s.serializer,r._byteString)};if(r instanceof Jt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Au(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:G0(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Au(`Unsupported field value: ${Gh(r)}`)}(t,e)}function gR(t,e){const n={};return l2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):na(t,(r,s)=>{const i=dv(s,e.Pu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function yR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof st||t instanceof cv||t instanceof Uo||t instanceof Jt||t instanceof fR)}function vR(t,e,n){if(!yR(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Gh(n);throw r==="an object"?e.Au(t+" a custom object"):e.Au(t+" "+r)}}function kV(t,e,n){if((e=it(e))instanceof lv)return e._internalPath;if(typeof e=="string")return xR(t,e);throw Od("Field path arguments must be of type string or ",t,!1,void 0,n)}const PV=new RegExp("[~\\*/\\[\\]]");function xR(t,e,n){if(e.search(PV)>=0)throw Od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new lv(...e.split("."))._internalPath}catch{throw Od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Od(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new q(j.INVALID_ARGUMENT,a+t+l)}function NV(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jV extends wR{data(){return super.data()}}function hv(t,e){return typeof e=="string"?xR(t,e):e instanceof lv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fv{}class LV extends fv{}function Ls(t,e,...n){let r=[];e instanceof fv&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof pv).length,a=i.filter(l=>l instanceof Yh).length;if(o>1||o>0&&a>0)throw new q(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Yh extends LV{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Yh(e,n,r)}_apply(e){const n=this._parse(e);return _R(e._query,n),new ia(e.firestore,e.converter,Eg(e._query,n))}_parse(e){const n=mR(e.firestore);return function(i,o,a,l,c,d,f){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new q(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Zw(f,d);const m=[];for(const y of f)m.push(Jw(l,i,y));p={arrayValue:{values:m}}}else p=Jw(l,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Zw(f,d),p=CV(a,o,f,d==="in"||d==="not-in");return Ze.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ds(t,e,n){const r=e,s=hv("where",t);return Yh._create(s,r,n)}class pv extends fv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new pv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Fn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)_R(o,l),o=Eg(o,l)}(e._query,n),new ia(e.firestore,e.converter,Eg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Jw(t,e,n){if(typeof(n=it(n))=="string"){if(n==="")throw new q(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!v2(e)&&n.indexOf("/")!==-1)throw new q(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Re.fromString(n));if(!J.isDocumentKey(r))throw new q(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ew(t,new J(r))}if(n instanceof Jt)return Ew(t,n._key);throw new q(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gh(n)}.`)}function Zw(t,e){if(!Array.isArray(t)||t.length===0)throw new q(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _R(t,e){if(e.isInequality()){const r=H0(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new q(j.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const i=y2(t);i!==null&&DV(t,s,i)}const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function DV(t,e,n){if(!n.isEqual(e))throw new q(j.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class MV{convertValue(e,n="none"){switch(yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return na(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new cv(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=V0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(jl(e));default:return null}}convertTimestamp(e){const n=_s(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Re.fromString(e);Ce(V2(r));const s=new Ol(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||Cr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $V(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ER extends wR{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Pu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(hv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Pu extends ER{data(e={}){return super.data(e)}}class FV{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new La(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Pu(this._firestore,this._userDataWriter,r.key,r,new La(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Pu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new La(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Pu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new La(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:VV(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function VV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(t){t=Ss(t,Jt);const e=Ss(t.firestore,wc);return xV(av(e),t._key).then(n=>WV(e,t,n))}class SR extends MV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,n)}}function Ms(t){t=Ss(t,ia);const e=Ss(t.firestore,wc),n=av(e),r=new SR(e);return OV(t._query),wV(n,t._query).then(s=>new FV(e,r,t,s))}function BV(t,e,n){t=Ss(t,Jt);const r=Ss(t.firestore,wc),s=$V(t.converter,e,n);return TR(r,[AV(mR(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,tr.none())])}function zV(t){return TR(Ss(t.firestore,wc),[new q0(t._key,tr.none())])}function TR(t,e){return function(r,s){const i=new _r;return r.asyncQueue.enqueueAndForget(async()=>iV(await vV(r),s,i)),i.promise}(av(t),e)}function WV(t,e,n){const r=n.docs.get(e._key),s=new SR(t);return new ER(t,s,e._key,r,new La(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){ta=s})(Ai),fi(new xs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new wc(new H$(r.getProvider("auth-internal")),new G$(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new q(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ol(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Jn(yw,"4.1.2",e),Jn(yw,"4.1.2","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR="firebasestorage.googleapis.com",IR="storageBucket",HV=2*60*1e3,qV=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He extends cr{constructor(e,n,r=0){super(Ip(e),`Firebase Storage: ${n} (${Ip(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,He.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ip(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var We;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(We||(We={}));function Ip(t){return"storage/"+t}function mv(){const t="An unknown error occurred, please check the error payload for server response.";return new He(We.UNKNOWN,t)}function KV(t){return new He(We.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function QV(t){return new He(We.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function GV(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new He(We.UNAUTHENTICATED,t)}function XV(){return new He(We.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function YV(t){return new He(We.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function JV(){return new He(We.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ZV(){return new He(We.CANCELED,"User canceled the upload/download.")}function e9(t){return new He(We.INVALID_URL,"Invalid URL '"+t+"'.")}function t9(t){return new He(We.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function n9(){return new He(We.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+IR+"' property when initializing the app?")}function r9(){return new He(We.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function s9(){return new He(We.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function i9(t){return new He(We.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Pg(t){return new He(We.INVALID_ARGUMENT,t)}function RR(){return new He(We.APP_DELETED,"The Firebase app was deleted.")}function o9(t){return new He(We.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Za(t,e){return new He(We.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ta(t){throw new He(We.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=sn.makeFromUrl(e,n)}catch{return new sn(e,"")}if(r.path==="")return r;throw t9(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${d}/b/${s}/o${p}`,"i"),y={bucket:1,path:3},g=n===bR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",x=new RegExp(`^https?://${g}/${s}/${_}`,"i"),w=[{regex:a,indices:l,postModify:i},{regex:m,indices:y,postModify:c},{regex:x,indices:{bucket:1,path:2},postModify:c}];for(let E=0;E<w.length;E++){const S=w[E],b=S.regex.exec(e);if(b){const I=b[S.indices.bucket];let T=b[S.indices.path];T||(T=""),r=new sn(I,T),S.postModify(r);break}}if(r==null)throw e9(e);return r}}class a9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l9(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(..._){c||(c=!0,e.apply(null,_))}function f(_){s=setTimeout(()=>{s=null,t(m,l())},_)}function p(){i&&clearTimeout(i)}function m(_,...x){if(c){p();return}if(_){p(),d.call(null,_,...x);return}if(l()||o){p(),d.call(null,_,...x);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,f(w)}let y=!1;function g(_){y||(y=!0,p(),!c&&(s!==null?(_||(a=2),clearTimeout(s),f(0)):_||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,g(!0)},n),g}function c9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u9(t){return t!==void 0}function d9(t){return typeof t=="object"&&!Array.isArray(t)}function gv(t){return typeof t=="string"||t instanceof String}function e_(t){return yv()&&t instanceof Blob}function yv(){return typeof Blob<"u"&&!gL()}function t_(t,e,n,r){if(r<e)throw Pg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Pg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function AR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ii;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ii||(ii={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h9(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(e,n,r,s,i,o,a,l,c,d,f,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,y)=>{this.resolve_=m,this.reject_=y,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new nu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===ii.NO_ERROR,l=i.getStatus();if(!a||h9(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===ii.ABORT;r(!1,new nu(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new nu(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());u9(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=mv();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?RR():ZV();o(l)}else{const l=JV();o(l)}};this.canceled_?n(!1,new nu(!1,null,!0)):this.backoffId_=l9(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&c9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function p9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function m9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function g9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function y9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function v9(t,e,n,r,s,i,o=!0){const a=AR(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return g9(c,e),p9(c,n),m9(c,i),y9(c,r),new f9(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function w9(...t){const e=x9();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(yv())return new Blob(t);throw new He(We.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function _9(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E9(t){if(typeof atob>"u")throw i9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Rp{constructor(e,n){this.data=e,this.contentType=n||null}}function S9(t,e){switch(t){case Qn.RAW:return new Rp(CR(e));case Qn.BASE64:case Qn.BASE64URL:return new Rp(kR(t,e));case Qn.DATA_URL:return new Rp(b9(e),I9(e))}throw mv()}function CR(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function T9(t){let e;try{e=decodeURIComponent(t)}catch{throw Za(Qn.DATA_URL,"Malformed data URL.")}return CR(e)}function kR(t,e){switch(t){case Qn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Za(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Qn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Za(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=E9(e)}catch(s){throw s.message.includes("polyfill")?s:Za(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class PR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Za(Qn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=R9(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function b9(t){const e=new PR(t);return e.base64?kR(Qn.BASE64,e.rest):T9(e.rest)}function I9(t){return new PR(t).contentType}function R9(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n){let r=0,s="";e_(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(e_(this.data_)){const r=this.data_,s=_9(r,e,n);return s===null?null:new Xr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Xr(r,!0)}}static getBlob(...e){if(yv()){const n=e.map(r=>r instanceof Xr?r.data_:r);return new Xr(w9.apply(null,n))}else{const n=e.map(o=>gv(o)?S9(Qn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Xr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(t){let e;try{e=JSON.parse(t)}catch{return null}return d9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A9(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function C9(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function jR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k9(t,e){return e}class Mt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||k9}}let ru=null;function P9(t){return!gv(t)||t.length<2?t:jR(t)}function OR(){if(ru)return ru;const t=[];t.push(new Mt("bucket")),t.push(new Mt("generation")),t.push(new Mt("metageneration")),t.push(new Mt("name","fullPath",!0));function e(i,o){return P9(o)}const n=new Mt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Mt("size");return s.xform=r,t.push(s),t.push(new Mt("timeCreated")),t.push(new Mt("updated")),t.push(new Mt("md5Hash",null,!0)),t.push(new Mt("cacheControl",null,!0)),t.push(new Mt("contentDisposition",null,!0)),t.push(new Mt("contentEncoding",null,!0)),t.push(new Mt("contentLanguage",null,!0)),t.push(new Mt("contentType",null,!0)),t.push(new Mt("metadata","customMetadata",!0)),ru=t,ru}function N9(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new sn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function j9(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return N9(r,t),r}function LR(t,e,n){const r=NR(e);return r===null?null:j9(t,r,n)}function O9(t,e,n,r){const s=NR(e);if(s===null||!gv(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,f=t.fullPath,p="/b/"+o(d)+"/o/"+o(f),m=Jh(p,n,r),y=AR({alt:"media",token:c});return m+y})[0]}function L9(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class vv{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(t){if(!t)throw mv()}function D9(t,e){function n(r,s){const i=LR(t,s,e);return DR(i!==null),i}return n}function M9(t,e){function n(r,s){const i=LR(t,s,e);return DR(i!==null),O9(i,s,t.host,t._protocol)}return n}function MR(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=XV():s=GV():n.getStatus()===402?s=QV(t.bucket):n.getStatus()===403?s=YV(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function $R(t){const e=MR(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=KV(t.path)),i.serverResponse=s.serverResponse,i}return n}function $9(t,e,n){const r=e.fullServerUrl(),s=Jh(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new vv(s,i,M9(t,n),o);return a.errorHandler=$R(e),a}function F9(t,e){const n=e.fullServerUrl(),r=Jh(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new vv(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=$R(e),a}function V9(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function U9(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=V9(null,e)),r}function B9(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=U9(e,r,s),d=L9(c,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=Xr.getBlob(f,r,p);if(m===null)throw r9();const y={name:c.fullPath},g=Jh(i,t.host,t._protocol),_="POST",x=t.maxUploadRetryTime,v=new vv(g,_,D9(t,n),x);return v.urlParams=y,v.headers=o,v.body=m.uploadData(),v.errorHandler=MR(e),v}class z9{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ii.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ii.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ii.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Ta("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ta("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ta("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ta("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ta("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class W9 extends z9{initXhr(){this.xhr_.responseType="text"}}function xv(){return new W9}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n){this._service=e,n instanceof sn?this._location=n:this._location=sn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new vi(e,n)}get root(){const e=new sn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return jR(this._location.path)}get storage(){return this._service}get parent(){const e=A9(this._location.path);if(e===null)return null;const n=new sn(this._location.bucket,e);return new vi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw o9(e)}}function H9(t,e,n){t._throwIfRoot("uploadBytes");const r=B9(t.storage,t._location,OR(),new Xr(e,!0),n);return t.storage.makeRequestWithTokens(r,xv).then(s=>({metadata:s,ref:t}))}function q9(t){t._throwIfRoot("getDownloadURL");const e=$9(t.storage,t._location,OR());return t.storage.makeRequestWithTokens(e,xv).then(n=>{if(n===null)throw s9();return n})}function K9(t){t._throwIfRoot("deleteObject");const e=F9(t.storage,t._location);return t.storage.makeRequestWithTokens(e,xv)}function Q9(t,e){const n=C9(t._location.path,e),r=new sn(t._location.bucket,n);return new vi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G9(t){return/^[A-Za-z]+:\/\//.test(t)}function X9(t,e){return new vi(t,e)}function FR(t,e){if(t instanceof wv){const n=t;if(n._bucket==null)throw n9();const r=new vi(n,n._bucket);return e!=null?FR(r,e):r}else return e!==void 0?Q9(t,e):t}function Y9(t,e){if(e&&G9(e)){if(t instanceof wv)return X9(t,e);throw Pg("To use ref(service, url), the first argument must be a Storage instance.")}else return FR(t,e)}function n_(t,e){const n=e==null?void 0:e[IR];return n==null?null:sn.makeFromBucketSpec(n,t)}function J9(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:wb(s,t.app.options.projectId))}class wv{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=bR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=HV,this._maxUploadRetryTime=qV,this._requests=new Set,s!=null?this._bucket=sn.makeFromBucketSpec(s,this._host):this._bucket=n_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=sn.makeFromBucketSpec(this._url,e):this._bucket=n_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){t_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){t_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new a9(RR());{const o=v9(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const r_="@firebase/storage",s_="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR="storage";function UR(t,e,n){return t=it(t),H9(t,e,n)}function BR(t){return t=it(t),q9(t)}function Z9(t){return t=it(t),K9(t)}function _v(t,e){return t=it(t),Y9(t,e)}function eU(t=o0(),e){t=it(t);const r=xh(t,VR).getImmediate({identifier:e}),s=yb("storage");return s&&tU(r,...s),r}function tU(t,e,n,r={}){J9(t,e,n,r)}function nU(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new wv(n,r,s,e,Ai)}function rU(){fi(new xs(VR,nU,"PUBLIC").setMultipleInstances(!0)),Jn(r_,s_,""),Jn(r_,s_,"esm2017")}rU();const sU={apiKey:"AIzaSyBPNpckpYiu009eSzHz_1YMlwHLtScgVjE",authDomain:"zingmp3-clone-61799.firebaseapp.com",projectId:"zingmp3-clone-61799",storageBucket:"zingmp3-clone-61799.appspot.com",messagingSenderId:"938280289868",appId:"1:938280289868:web:1b426fc2dba5d03dde96e9"},Ev=Sb(sU),Dr=TV(Ev),Ts=OM(Ev);new zn;const Sv=eU(Ev);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function zR(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function WR(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var eo=function(){return eo=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},eo.apply(this,arguments)},HR=function(t){return{loading:t==null,value:t}},iU=function(){return function(t,e){switch(e.type){case"error":return eo(eo({},t),{error:e.error,loading:!1,value:void 0});case"reset":return HR(e.defaultValue);case"value":return eo(eo({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},oU=function(t){var e=t?t():void 0,n=h.useReducer(iU(),HR(e)),r=n[0],s=n[1],i=h.useCallback(function(){var l=t?t():void 0;s({type:"reset",defaultValue:l})},[t]),o=h.useCallback(function(l){s({type:"error",error:l})},[]),a=h.useCallback(function(l){s({type:"value",value:l})},[]);return h.useMemo(function(){return{error:r.error,loading:r.loading,reset:i,setError:o,setValue:a,value:r.value}},[r.error,r.loading,i,o,a,r.value])},_c=function(t,e){var n=oU(function(){return t.currentUser}),r=n.error,s=n.loading,i=n.setError,o=n.setValue,a=n.value;return h.useEffect(function(){var l=ED(t,function(c){return zR(void 0,void 0,void 0,function(){var d;return WR(this,function(f){switch(f.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return f.sent(),[3,4];case 3:return d=f.sent(),i(d),[3,4];case 4:return o(c),[2]}})})},i);return function(){l()}},[t]),[a,s,r]},aU=function(t){var e=h.useCallback(function(n,r){var s=new zn;return n&&n.forEach(function(i){return s.addScope(i)}),r&&s.setCustomParameters(r),s},[]);return lU(t,e)},lU=function(t,e){var n=h.useState(),r=n[0],s=n[1],i=h.useState(),o=i[0],a=i[1],l=h.useState(!1),c=l[0],d=l[1],f=h.useCallback(function(p,m){return zR(void 0,void 0,void 0,function(){var y,g,_;return WR(this,function(x){switch(x.label){case 0:d(!0),s(void 0),x.label=1;case 1:return x.trys.push([1,3,4,5]),y=e(p,m),[4,zD(t,y)];case 2:return g=x.sent(),a(g),[2,g];case 3:return _=x.sent(),s(_),[3,5];case 4:return d(!1),[7];case 5:return[2]}})})},[t,e]);return[f,o,c,r]},qR={exports:{}},KR={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bo=h;function cU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var uU=typeof Object.is=="function"?Object.is:cU,dU=Bo.useState,hU=Bo.useEffect,fU=Bo.useLayoutEffect,pU=Bo.useDebugValue;function mU(t,e){var n=e(),r=dU({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return fU(function(){s.value=n,s.getSnapshot=e,Ap(s)&&i({inst:s})},[t,n,e]),hU(function(){return Ap(s)&&i({inst:s}),t(function(){Ap(s)&&i({inst:s})})},[t]),pU(n),n}function Ap(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!uU(t,n)}catch{return!0}}function gU(t,e){return e()}var yU=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?gU:mU;KR.useSyncExternalStore=Bo.useSyncExternalStore!==void 0?Bo.useSyncExternalStore:yU;qR.exports=KR;var vU=qR.exports,QR={exports:{}},GR={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zh=h,xU=vU;function wU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _U=typeof Object.is=="function"?Object.is:wU,EU=xU.useSyncExternalStore,SU=Zh.useRef,TU=Zh.useEffect,bU=Zh.useMemo,IU=Zh.useDebugValue;GR.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=SU(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=bU(function(){function l(m){if(!c){if(c=!0,d=m,m=r(m),s!==void 0&&o.hasValue){var y=o.value;if(s(y,m))return f=y}return f=m}if(y=f,_U(d,m))return y;var g=r(m);return s!==void 0&&s(y,g)?y:(d=m,f=g)}var c=!1,d,f,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,s]);var a=EU(t,i[0],i[1]);return TU(function(){o.hasValue=!0,o.value=a},[a]),IU(a),a};QR.exports=GR;var RU=QR.exports;function AU(t){t()}let XR=AU;const CU=t=>XR=t,kU=()=>XR,i_=Symbol.for("react-redux-context"),o_=typeof globalThis<"u"?globalThis:{};function PU(){var t;if(!h.createContext)return{};const e=(t=o_[i_])!=null?t:o_[i_]=new Map;let n=e.get(h.createContext);return n||(n=h.createContext(null),e.set(h.createContext,n)),n}const bs=PU();function Tv(t=bs){return function(){return h.useContext(t)}}const YR=Tv(),NU=()=>{throw new Error("uSES not initialized!")};let JR=NU;const jU=t=>{JR=t},OU=(t,e)=>t===e;function LU(t=bs){const e=t===bs?YR:Tv(t);return function(r,s={}){const{equalityFn:i=OU,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof s=="function"?{equalityFn:s}:s,{store:l,subscription:c,getServerState:d,stabilityCheck:f,noopCheck:p}=e();h.useRef(!0);const m=h.useCallback({[r.name](g){return r(g)}}[r.name],[r,f,o]),y=JR(c.addNestedSub,l.getState,d||l.getState,m,i);return h.useDebugValue(y),y}}const K=LU();var ZR={exports:{}},we={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dt=typeof Symbol=="function"&&Symbol.for,bv=dt?Symbol.for("react.element"):60103,Iv=dt?Symbol.for("react.portal"):60106,ef=dt?Symbol.for("react.fragment"):60107,tf=dt?Symbol.for("react.strict_mode"):60108,nf=dt?Symbol.for("react.profiler"):60114,rf=dt?Symbol.for("react.provider"):60109,sf=dt?Symbol.for("react.context"):60110,Rv=dt?Symbol.for("react.async_mode"):60111,of=dt?Symbol.for("react.concurrent_mode"):60111,af=dt?Symbol.for("react.forward_ref"):60112,lf=dt?Symbol.for("react.suspense"):60113,DU=dt?Symbol.for("react.suspense_list"):60120,cf=dt?Symbol.for("react.memo"):60115,uf=dt?Symbol.for("react.lazy"):60116,MU=dt?Symbol.for("react.block"):60121,$U=dt?Symbol.for("react.fundamental"):60117,FU=dt?Symbol.for("react.responder"):60118,VU=dt?Symbol.for("react.scope"):60119;function gn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case bv:switch(t=t.type,t){case Rv:case of:case ef:case nf:case tf:case lf:return t;default:switch(t=t&&t.$$typeof,t){case sf:case af:case uf:case cf:case rf:return t;default:return e}}case Iv:return e}}}function eA(t){return gn(t)===of}we.AsyncMode=Rv;we.ConcurrentMode=of;we.ContextConsumer=sf;we.ContextProvider=rf;we.Element=bv;we.ForwardRef=af;we.Fragment=ef;we.Lazy=uf;we.Memo=cf;we.Portal=Iv;we.Profiler=nf;we.StrictMode=tf;we.Suspense=lf;we.isAsyncMode=function(t){return eA(t)||gn(t)===Rv};we.isConcurrentMode=eA;we.isContextConsumer=function(t){return gn(t)===sf};we.isContextProvider=function(t){return gn(t)===rf};we.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===bv};we.isForwardRef=function(t){return gn(t)===af};we.isFragment=function(t){return gn(t)===ef};we.isLazy=function(t){return gn(t)===uf};we.isMemo=function(t){return gn(t)===cf};we.isPortal=function(t){return gn(t)===Iv};we.isProfiler=function(t){return gn(t)===nf};we.isStrictMode=function(t){return gn(t)===tf};we.isSuspense=function(t){return gn(t)===lf};we.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===ef||t===of||t===nf||t===tf||t===lf||t===DU||typeof t=="object"&&t!==null&&(t.$$typeof===uf||t.$$typeof===cf||t.$$typeof===rf||t.$$typeof===sf||t.$$typeof===af||t.$$typeof===$U||t.$$typeof===FU||t.$$typeof===VU||t.$$typeof===MU)};we.typeOf=gn;ZR.exports=we;var UU=ZR.exports,tA=UU,BU={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},zU={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},nA={};nA[tA.ForwardRef]=BU;nA[tA.Memo]=zU;var _e={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av=Symbol.for("react.element"),Cv=Symbol.for("react.portal"),df=Symbol.for("react.fragment"),hf=Symbol.for("react.strict_mode"),ff=Symbol.for("react.profiler"),pf=Symbol.for("react.provider"),mf=Symbol.for("react.context"),WU=Symbol.for("react.server_context"),gf=Symbol.for("react.forward_ref"),yf=Symbol.for("react.suspense"),vf=Symbol.for("react.suspense_list"),xf=Symbol.for("react.memo"),wf=Symbol.for("react.lazy"),HU=Symbol.for("react.offscreen"),rA;rA=Symbol.for("react.module.reference");function An(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Av:switch(t=t.type,t){case df:case ff:case hf:case yf:case vf:return t;default:switch(t=t&&t.$$typeof,t){case WU:case mf:case gf:case wf:case xf:case pf:return t;default:return e}}case Cv:return e}}}_e.ContextConsumer=mf;_e.ContextProvider=pf;_e.Element=Av;_e.ForwardRef=gf;_e.Fragment=df;_e.Lazy=wf;_e.Memo=xf;_e.Portal=Cv;_e.Profiler=ff;_e.StrictMode=hf;_e.Suspense=yf;_e.SuspenseList=vf;_e.isAsyncMode=function(){return!1};_e.isConcurrentMode=function(){return!1};_e.isContextConsumer=function(t){return An(t)===mf};_e.isContextProvider=function(t){return An(t)===pf};_e.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Av};_e.isForwardRef=function(t){return An(t)===gf};_e.isFragment=function(t){return An(t)===df};_e.isLazy=function(t){return An(t)===wf};_e.isMemo=function(t){return An(t)===xf};_e.isPortal=function(t){return An(t)===Cv};_e.isProfiler=function(t){return An(t)===ff};_e.isStrictMode=function(t){return An(t)===hf};_e.isSuspense=function(t){return An(t)===yf};_e.isSuspenseList=function(t){return An(t)===vf};_e.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===df||t===ff||t===hf||t===yf||t===vf||t===HU||typeof t=="object"&&t!==null&&(t.$$typeof===wf||t.$$typeof===xf||t.$$typeof===pf||t.$$typeof===mf||t.$$typeof===gf||t.$$typeof===rA||t.getModuleId!==void 0)};_e.typeOf=An;function qU(){const t=kU();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0,i=n={callback:r,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){!s||e===null||(s=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}const a_={notify(){},get:()=>[]};function KU(t,e){let n,r=a_;function s(f){return l(),r.subscribe(f)}function i(){r.notify()}function o(){d.onStateChange&&d.onStateChange()}function a(){return!!n}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=qU())}function c(){n&&(n(),n=void 0,r.clear(),r=a_)}const d={addNestedSub:s,notifyNestedSubs:i,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:c,getListeners:()=>r};return d}const QU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",GU=QU?h.useLayoutEffect:h.useEffect;function XU({store:t,context:e,children:n,serverState:r,stabilityCheck:s="once",noopCheck:i="once"}){const o=h.useMemo(()=>{const c=KU(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:s,noopCheck:i}},[t,r,s,i]),a=h.useMemo(()=>t.getState(),[t]);GU(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||bs;return h.createElement(l.Provider,{value:o},n)}function sA(t=bs){const e=t===bs?YR:Tv(t);return function(){const{store:r}=e();return r}}const YU=sA();function JU(t=bs){const e=t===bs?YU:sA(t);return function(){return e().dispatch}}const ke=JU();jU(RU.useSyncExternalStoreWithSelector);CU(Qo.unstable_batchedUpdates);function jn(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Is(t){return!!t&&!!t[Ne]}function Nr(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var s=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return s===Object||typeof s=="function"&&Function.toString.call(s)===o8}(t)||Array.isArray(t)||!!t[p_]||!!(!((e=t.constructor)===null||e===void 0)&&e[p_])||kv(t)||Pv(t))}function xi(t,e,n){n===void 0&&(n=!1),aa(t)===0?(n?Object.keys:go)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,s){return e(s,r,t)})}function aa(t){var e=t[Ne];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:kv(t)?2:Pv(t)?3:0}function mo(t,e){return aa(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function ZU(t,e){return aa(t)===2?t.get(e):t[e]}function iA(t,e,n){var r=aa(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function oA(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function kv(t){return s8&&t instanceof Map}function Pv(t){return i8&&t instanceof Set}function qs(t){return t.o||t.t}function Nv(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=lA(t);delete e[Ne];for(var n=go(e),r=0;r<n.length;r++){var s=n[r],i=e[s];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[s]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[s]})}return Object.create(Object.getPrototypeOf(t),e)}function jv(t,e){return e===void 0&&(e=!1),Ov(t)||Is(t)||!Nr(t)||(aa(t)>1&&(t.set=t.add=t.clear=t.delete=e8),Object.freeze(t),e&&xi(t,function(n,r){return jv(r,!0)},!0)),t}function e8(){jn(2)}function Ov(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function rr(t){var e=Dg[t];return e||jn(18,t),e}function t8(t,e){Dg[t]||(Dg[t]=e)}function Ng(){return $l}function Cp(t,e){e&&(rr("Patches"),t.u=[],t.s=[],t.v=e)}function Ld(t){jg(t),t.p.forEach(n8),t.p=null}function jg(t){t===$l&&($l=t.l)}function l_(t){return $l={p:[],l:$l,h:t,m:!0,_:0}}function n8(t){var e=t[Ne];e.i===0||e.i===1?e.j():e.g=!0}function kp(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||rr("ES5").S(e,t,r),r?(n[Ne].P&&(Ld(e),jn(4)),Nr(t)&&(t=Dd(e,t),e.l||Md(e,t)),e.u&&rr("Patches").M(n[Ne].t,t,e.u,e.s)):t=Dd(e,n,[]),Ld(e),e.u&&e.v(e.u,e.s),t!==aA?t:void 0}function Dd(t,e,n){if(Ov(e))return e;var r=e[Ne];if(!r)return xi(e,function(a,l){return c_(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return Md(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var s=r.i===4||r.i===5?r.o=Nv(r.k):r.o,i=s,o=!1;r.i===3&&(i=new Set(s),s.clear(),o=!0),xi(i,function(a,l){return c_(t,r,s,a,l,n,o)}),Md(t,s,!1),n&&t.u&&rr("Patches").N(r,n,t.u,t.s)}return r.o}function c_(t,e,n,r,s,i,o){if(Is(s)){var a=Dd(t,s,i&&e&&e.i!==3&&!mo(e.R,r)?i.concat(r):void 0);if(iA(n,r,a),!Is(a))return;t.m=!1}else o&&n.add(s);if(Nr(s)&&!Ov(s)){if(!t.h.D&&t._<1)return;Dd(t,s),e&&e.A.l||Md(t,s)}}function Md(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&jv(e,n)}function Pp(t,e){var n=t[Ne];return(n?qs(n):t)[e]}function u_(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Yr(t){t.P||(t.P=!0,t.l&&Yr(t.l))}function Np(t){t.o||(t.o=Nv(t.t))}function Og(t,e,n){var r=kv(e)?rr("MapSet").F(e,n):Pv(e)?rr("MapSet").T(e,n):t.O?function(s,i){var o=Array.isArray(s),a={i:o?1:0,A:i?i.A:Ng(),P:!1,I:!1,R:{},l:i,t:s,k:null,o:null,j:null,C:!1},l=a,c=Fl;o&&(l=[a],c=Da);var d=Proxy.revocable(l,c),f=d.revoke,p=d.proxy;return a.k=p,a.j=f,p}(e,n):rr("ES5").J(e,n);return(n?n.A:Ng()).p.push(r),r}function Lg(t){return Is(t)||jn(22,t),function e(n){if(!Nr(n))return n;var r,s=n[Ne],i=aa(n);if(s){if(!s.P&&(s.i<4||!rr("ES5").K(s)))return s.t;s.I=!0,r=d_(n,i),s.I=!1}else r=d_(n,i);return xi(r,function(o,a){s&&ZU(s.t,o)===a||iA(r,o,e(a))}),i===3?new Set(r):r}(t)}function d_(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Nv(t)}function r8(){function t(i,o){var a=s[i];return a?a.enumerable=o:s[i]=a={configurable:!0,enumerable:o,get:function(){var l=this[Ne];return Fl.get(l,i)},set:function(l){var c=this[Ne];Fl.set(c,i,l)}},a}function e(i){for(var o=i.length-1;o>=0;o--){var a=i[o][Ne];if(!a.P)switch(a.i){case 5:r(a)&&Yr(a);break;case 4:n(a)&&Yr(a)}}}function n(i){for(var o=i.t,a=i.k,l=go(a),c=l.length-1;c>=0;c--){var d=l[c];if(d!==Ne){var f=o[d];if(f===void 0&&!mo(o,d))return!0;var p=a[d],m=p&&p[Ne];if(m?m.t!==f:!oA(p,f))return!0}}var y=!!o[Ne];return l.length!==go(o).length+(y?0:1)}function r(i){var o=i.k;if(o.length!==i.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var s={};t8("ES5",{J:function(i,o){var a=Array.isArray(i),l=function(d,f){if(d){for(var p=Array(f.length),m=0;m<f.length;m++)Object.defineProperty(p,""+m,t(m,!0));return p}var y=lA(f);delete y[Ne];for(var g=go(y),_=0;_<g.length;_++){var x=g[_];y[x]=t(x,d||!!y[x].enumerable)}return Object.create(Object.getPrototypeOf(f),y)}(a,i),c={i:a?5:4,A:o?o.A:Ng(),P:!1,I:!1,R:{},l:o,t:i,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,Ne,{value:c,writable:!0}),l},S:function(i,o,a){a?Is(o)&&o[Ne].A===i&&e(i.p):(i.u&&function l(c){if(c&&typeof c=="object"){var d=c[Ne];if(d){var f=d.t,p=d.k,m=d.R,y=d.i;if(y===4)xi(p,function(w){w!==Ne&&(f[w]!==void 0||mo(f,w)?m[w]||l(p[w]):(m[w]=!0,Yr(d)))}),xi(f,function(w){p[w]!==void 0||mo(p,w)||(m[w]=!1,Yr(d))});else if(y===5){if(r(d)&&(Yr(d),m.length=!0),p.length<f.length)for(var g=p.length;g<f.length;g++)m[g]=!1;else for(var _=f.length;_<p.length;_++)m[_]=!0;for(var x=Math.min(p.length,f.length),v=0;v<x;v++)p.hasOwnProperty(v)||(m[v]=!0),m[v]===void 0&&l(p[v])}}}}(i.p[0]),e(i.p))},K:function(i){return i.i===4?n(i):r(i)}})}var h_,$l,Lv=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",s8=typeof Map<"u",i8=typeof Set<"u",f_=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",aA=Lv?Symbol.for("immer-nothing"):((h_={})["immer-nothing"]=!0,h_),p_=Lv?Symbol.for("immer-draftable"):"__$immer_draftable",Ne=Lv?Symbol.for("immer-state"):"__$immer_state",o8=""+Object.prototype.constructor,go=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,lA=Object.getOwnPropertyDescriptors||function(t){var e={};return go(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},Dg={},Fl={get:function(t,e){if(e===Ne)return t;var n=qs(t);if(!mo(n,e))return function(s,i,o){var a,l=u_(i,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(s.k):void 0}(t,n,e);var r=n[e];return t.I||!Nr(r)?r:r===Pp(t.t,e)?(Np(t),t.o[e]=Og(t.A.h,r,t)):r},has:function(t,e){return e in qs(t)},ownKeys:function(t){return Reflect.ownKeys(qs(t))},set:function(t,e,n){var r=u_(qs(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var s=Pp(qs(t),e),i=s==null?void 0:s[Ne];if(i&&i.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(oA(n,s)&&(n!==void 0||mo(t.t,e)))return!0;Np(t),Yr(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return Pp(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,Np(t),Yr(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=qs(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){jn(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){jn(12)}},Da={};xi(Fl,function(t,e){Da[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Da.deleteProperty=function(t,e){return Da.set.call(this,t,e,void 0)},Da.set=function(t,e,n){return Fl.set.call(this,t[0],e,n,t[0])};var a8=function(){function t(n){var r=this;this.O=f_,this.D=!0,this.produce=function(s,i,o){if(typeof s=="function"&&typeof i!="function"){var a=i;i=s;var l=r;return function(g){var _=this;g===void 0&&(g=a);for(var x=arguments.length,v=Array(x>1?x-1:0),w=1;w<x;w++)v[w-1]=arguments[w];return l.produce(g,function(E){var S;return(S=i).call.apply(S,[_,E].concat(v))})}}var c;if(typeof i!="function"&&jn(6),o!==void 0&&typeof o!="function"&&jn(7),Nr(s)){var d=l_(r),f=Og(r,s,void 0),p=!0;try{c=i(f),p=!1}finally{p?Ld(d):jg(d)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(g){return Cp(d,o),kp(g,d)},function(g){throw Ld(d),g}):(Cp(d,o),kp(c,d))}if(!s||typeof s!="object"){if((c=i(s))===void 0&&(c=s),c===aA&&(c=void 0),r.D&&jv(c,!0),o){var m=[],y=[];rr("Patches").M(s,c,m,y),o(m,y)}return c}jn(21,s)},this.produceWithPatches=function(s,i){if(typeof s=="function")return function(c){for(var d=arguments.length,f=Array(d>1?d-1:0),p=1;p<d;p++)f[p-1]=arguments[p];return r.produceWithPatches(c,function(m){return s.apply(void 0,[m].concat(f))})};var o,a,l=r.produce(s,i,function(c,d){o=c,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){Nr(n)||jn(8),Is(n)&&(n=Lg(n));var r=l_(this),s=Og(this,n,void 0);return s[Ne].C=!0,jg(r),s},e.finishDraft=function(n,r){var s=n&&n[Ne],i=s.A;return Cp(i,r),kp(void 0,i)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!f_&&jn(20),this.O=n},e.applyPatches=function(n,r){var s;for(s=r.length-1;s>=0;s--){var i=r[s];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}s>-1&&(r=r.slice(s+1));var o=rr("Patches").$;return Is(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),dn=new a8,cA=dn.produce;dn.produceWithPatches.bind(dn);dn.setAutoFreeze.bind(dn);dn.setUseProxies.bind(dn);dn.applyPatches.bind(dn);dn.createDraft.bind(dn);dn.finishDraft.bind(dn);function Vl(t){"@babel/helpers - typeof";return Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vl(t)}function l8(t,e){if(Vl(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vl(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function c8(t){var e=l8(t,"string");return Vl(e)==="symbol"?e:String(e)}function u8(t,e,n){return e=c8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function g_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m_(Object(n),!0).forEach(function(r){u8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var y_=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),jp=function(){return Math.random().toString(36).substring(7).split("").join(".")},$d={INIT:"@@redux/INIT"+jp(),REPLACE:"@@redux/REPLACE"+jp(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+jp()}};function d8(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function uA(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Tt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Tt(1));return n(uA)(t,e)}if(typeof t!="function")throw new Error(Tt(2));var s=t,i=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function d(){if(l)throw new Error(Tt(3));return i}function f(g){if(typeof g!="function")throw new Error(Tt(4));if(l)throw new Error(Tt(5));var _=!0;return c(),a.push(g),function(){if(_){if(l)throw new Error(Tt(6));_=!1,c();var v=a.indexOf(g);a.splice(v,1),o=null}}}function p(g){if(!d8(g))throw new Error(Tt(7));if(typeof g.type>"u")throw new Error(Tt(8));if(l)throw new Error(Tt(9));try{l=!0,i=s(i,g)}finally{l=!1}for(var _=o=a,x=0;x<_.length;x++){var v=_[x];v()}return g}function m(g){if(typeof g!="function")throw new Error(Tt(10));s=g,p({type:$d.REPLACE})}function y(){var g,_=f;return g={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(Tt(11));function w(){v.next&&v.next(d())}w();var E=_(w);return{unsubscribe:E}}},g[y_]=function(){return this},g}return p({type:$d.INIT}),r={dispatch:p,subscribe:f,getState:d,replaceReducer:m},r[y_]=y,r}function h8(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:$d.INIT});if(typeof r>"u")throw new Error(Tt(12));if(typeof n(void 0,{type:$d.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Tt(13))})}function f8(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var s=e[r];typeof t[s]=="function"&&(n[s]=t[s])}var i=Object.keys(n),o;try{h8(n)}catch(a){o=a}return function(l,c){if(l===void 0&&(l={}),o)throw o;for(var d=!1,f={},p=0;p<i.length;p++){var m=i[p],y=n[m],g=l[m],_=y(g,c);if(typeof _>"u")throw c&&c.type,new Error(Tt(14));f[m]=_,d=d||_!==g}return d=d||i.length!==Object.keys(l).length,d?f:l}}function Fd(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,s){return function(){return r(s.apply(void 0,arguments))}})}function p8(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var s=r.apply(void 0,arguments),i=function(){throw new Error(Tt(15))},o={getState:s.getState,dispatch:function(){return i.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return i=Fd.apply(void 0,a)(s.dispatch),g_(g_({},s),{},{dispatch:i})}}}function dA(t){var e=function(r){var s=r.dispatch,i=r.getState;return function(o){return function(a){return typeof a=="function"?a(s,i,t):o(a)}}};return e}var hA=dA();hA.withExtraArgument=dA;const v_=hA;var fA=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),m8=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},zo=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,s=t.length;n<r;n++,s++)t[s]=e[n];return t},g8=Object.defineProperty,y8=Object.defineProperties,v8=Object.getOwnPropertyDescriptors,x_=Object.getOwnPropertySymbols,x8=Object.prototype.hasOwnProperty,w8=Object.prototype.propertyIsEnumerable,w_=function(t,e,n){return e in t?g8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},ms=function(t,e){for(var n in e||(e={}))x8.call(e,n)&&w_(t,n,e[n]);if(x_)for(var r=0,s=x_(e);r<s.length;r++){var n=s[r];w8.call(e,n)&&w_(t,n,e[n])}return t},Op=function(t,e){return y8(t,v8(e))},_8=function(t,e,n){return new Promise(function(r,s){var i=function(l){try{a(n.next(l))}catch(c){s(c)}},o=function(l){try{a(n.throw(l))}catch(c){s(c)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(i,o)};a((n=n.apply(t,e)).next())})},E8=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Fd:Fd.apply(null,arguments)};function S8(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var T8=function(t){fA(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,zo([void 0],n[0].concat(this)))):new(e.bind.apply(e,zo([void 0],n.concat(this))))},e}(Array),b8=function(t){fA(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,zo([void 0],n[0].concat(this)))):new(e.bind.apply(e,zo([void 0],n.concat(this))))},e}(Array);function Mg(t){return Nr(t)?cA(t,function(){}):t}function I8(t){return typeof t=="boolean"}function R8(){return function(e){return A8(e)}}function A8(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new T8;return n&&(I8(n)?r.push(v_):r.push(v_.withExtraArgument(n.extraArgument))),r}var C8=!0;function k8(t){var e=R8(),n=t||{},r=n.reducer,s=r===void 0?void 0:r,i=n.middleware,o=i===void 0?e():i,a=n.devTools,l=a===void 0?!0:a,c=n.preloadedState,d=c===void 0?void 0:c,f=n.enhancers,p=f===void 0?void 0:f,m;if(typeof s=="function")m=s;else if(S8(s))m=f8(s);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var y=o;typeof y=="function"&&(y=y(e));var g=p8.apply(void 0,y),_=Fd;l&&(_=E8(ms({trace:!C8},typeof l=="object"&&l)));var x=new b8(g),v=x;Array.isArray(p)?v=zo([g],p):typeof p=="function"&&(v=p(x));var w=_.apply(void 0,v);return uA(m,d,w)}function gs(t,e){function n(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(e){var i=e.apply(void 0,r);if(!i)throw new Error("prepareAction did not return an object");return ms(ms({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function pA(t){var e={},n=[],r,s={addCase:function(i,o){var a=typeof i=="string"?i:i.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,s},addMatcher:function(i,o){return n.push({matcher:i,reducer:o}),s},addDefaultCase:function(i){return r=i,s}};return t(s),[e,n,r]}function P8(t){return typeof t=="function"}function N8(t,e,n,r){n===void 0&&(n=[]);var s=typeof e=="function"?pA(e):[e,n,r],i=s[0],o=s[1],a=s[2],l;if(P8(t))l=function(){return Mg(t())};else{var c=Mg(t);l=function(){return c}}function d(f,p){f===void 0&&(f=l());var m=zo([i[p.type]],o.filter(function(y){var g=y.matcher;return g(p)}).map(function(y){var g=y.reducer;return g}));return m.filter(function(y){return!!y}).length===0&&(m=[a]),m.reduce(function(y,g){if(g)if(Is(y)){var _=y,x=g(_,p);return x===void 0?y:x}else{if(Nr(y))return cA(y,function(v){return g(v,p)});var x=g(y,p);if(x===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}return y},f)}return d.getInitialState=l,d}function j8(t,e){return t+"/"+e}function _f(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:Mg(t.initialState),r=t.reducers||{},s=Object.keys(r),i={},o={},a={};s.forEach(function(d){var f=r[d],p=j8(e,d),m,y;"reducer"in f?(m=f.reducer,y=f.prepare):m=f,i[d]=m,o[p]=m,a[d]=y?gs(p,y):gs(p)});function l(){var d=typeof t.extraReducers=="function"?pA(t.extraReducers):[t.extraReducers],f=d[0],p=f===void 0?{}:f,m=d[1],y=m===void 0?[]:m,g=d[2],_=g===void 0?void 0:g,x=ms(ms({},p),o);return N8(n,function(v){for(var w in x)v.addCase(w,x[w]);for(var E=0,S=y;E<S.length;E++){var b=S[E];v.addMatcher(b.matcher,b.reducer)}_&&v.addDefaultCase(_)})}var c;return{name:e,reducer:function(d,f){return c||(c=l()),c(d,f)},actions:a,caseReducers:i,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var O8="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",L8=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=O8[Math.random()*64|0];return e},D8=["name","message","stack","code"],Lp=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),__=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),M8=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=D8;n<r.length;n++){var s=r[n];typeof t[s]=="string"&&(e[s]=t[s])}return e}return{message:String(t)}};(function(){function t(e,n,r){var s=gs(e+"/fulfilled",function(c,d,f,p){return{payload:c,meta:Op(ms({},p||{}),{arg:f,requestId:d,requestStatus:"fulfilled"})}}),i=gs(e+"/pending",function(c,d,f){return{payload:void 0,meta:Op(ms({},f||{}),{arg:d,requestId:c,requestStatus:"pending"})}}),o=gs(e+"/rejected",function(c,d,f,p,m){return{payload:p,error:(r&&r.serializeError||M8)(c||"Rejected"),meta:Op(ms({},m||{}),{arg:f,requestId:d,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(d,f,p){var m=r!=null&&r.idGenerator?r.idGenerator(c):L8(),y=new a,g;function _(v){g=v,y.abort()}var x=function(){return _8(this,null,function(){var v,w,E,S,b,I,T;return m8(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),S=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,c,{getState:f,extra:p}),F8(S)?[4,S]:[3,2];case 1:S=A.sent(),A.label=2;case 2:if(S===!1||y.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return b=new Promise(function(C,O){return y.signal.addEventListener("abort",function(){return O({name:"AbortError",message:g||"Aborted"})})}),d(i(m,c,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:m,arg:c},{getState:f,extra:p}))),[4,Promise.race([b,Promise.resolve(n(c,{dispatch:d,getState:f,extra:p,requestId:m,signal:y.signal,abort:_,rejectWithValue:function(C,O){return new Lp(C,O)},fulfillWithValue:function(C,O){return new __(C,O)}})).then(function(C){if(C instanceof Lp)throw C;return C instanceof __?s(C.payload,m,c,C.meta):s(C,m,c)})])];case 3:return E=A.sent(),[3,5];case 4:return I=A.sent(),E=I instanceof Lp?o(null,m,c,I.payload,I.meta):o(I,m,c),[3,5];case 5:return T=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,T||d(E),[2,E]}})})}();return Object.assign(x,{abort:_,requestId:m,arg:c,unwrap:function(){return x.then($8)}})}}return Object.assign(l,{pending:i,rejected:o,fulfilled:s,typePrefix:e})}return t.withTypes=function(){return t},t})();function $8(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function F8(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var Dv="listenerMiddleware";gs(Dv+"/add");gs(Dv+"/removeAll");gs(Dv+"/remove");var E_;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);r8();const V8=Yn();let U8=V8.current||{...e0({}),currentIndex:0,song_in:""};const B8={currentSong:U8},mA=_f({name:"currentSong",initialState:B8,reducers:{setSong(t,e){t.currentSong=e.payload},updateSong:(t,e)=>{const n=e.payload;Object.assign(t.currentSong,n)},resetCurrentSong:t=>{t.currentSong={...e0({}),currentIndex:0,song_in:""}}}}),ge=t=>t.currentSong,{setSong:Zt,resetCurrentSong:Rs,updateSong:LW}=mA.actions,z8=mA.reducer,W8=Yn(),H8={queueSongs:W8.queue||[],from:[]},gA=_f({name:"songQueue",initialState:H8,reducers:{setQueue:(t,e)=>{const{songs:n}=e.payload;t.queueSongs=n,t.from=[n[0].song_in],gt("queue",t.queueSongs)},removeSongFromQueue:(t,e)=>{const{index:n}=e.payload,[r]=t.queueSongs.splice(n,1);gt("queue",t.queueSongs),t.from.findIndex(i=>i===r.song_in)!==-1&&t.from.slice(n,1)},addSongToQueue:(t,e)=>{const{songs:n}=e.payload;t.from.includes(n[0].song_in)||t.from.push(n[0].song_in),t.queueSongs.push(...n),gt("queue",t.queueSongs)},updateSongInQueue:(t,e)=>{const{song:n}=e.payload,r=t.queueSongs.findIndex(s=>s.id===n.id);Object.assign(t.queueSongs[r],n)},resetSongQueue:t=>{t.queueSongs=[],gt("queue",[])}}}),ur=t=>t.songQueue,{addSongToQueue:Ec,updateSongInQueue:q8,removeSongFromQueue:K8,setQueue:Sc,resetSongQueue:yA}=gA.actions,Q8=gA.reducer,vA={user:null,loading:!0},G8=(t,e)=>{switch(e.type){case 0:return{user:e.payload.user,loading:!1};case 1:return{user:null,loading:!0};default:return{user:t.user,loading:t.loading}}},X8={state:{user:vA.user,loading:!0},setUser:()=>{}},xA=h.createContext(X8),Y8=()=>{const[t,e]=h.useReducer(G8,vA),n=h.useCallback(r=>{switch(r.type){case"set-user":return console.log("set user"),e({type:0,payload:{user:r.user}});case"reset":return console.log("reset user"),e({type:1,payload:{user:null}})}},[]);return{state:{loading:t.loading,user:t.user},setUser:n}},J8=({children:t})=>{const{state:{loading:e,user:n},setUser:r}=Y8();return u.jsx(xA.Provider,{value:{state:{loading:e,user:n},setUser:r},children:t})},tt=()=>{const{state:{loading:t,user:e},setUser:n}=h.useContext(xA);return{loading:t,user:e,setUser:n}},Tc=()=>{const t=en(),e=ke(),{setUser:n}=tt(),{resetSongPlaylistStore:r}=Ge(),[s]=aU(Ts),i=()=>{document.querySelector(".hd-mp3").pause(),e(Rs())};return{logOut:async()=>{await qb(Ts),n({type:"reset"}),e(yA()),r(),i(),t(yt.Home)},logIn:async()=>{await s()&&(e(Rs()),r(),n({type:"reset"}))}}},Z8={toasts:[]},e7={state:Z8,setToasts:()=>{},setErrorToast:()=>{},setSuccessToast:()=>{}},wA=h.createContext(e7),t7=({children:t})=>{const[e,n]=h.useState([]),r=({message:i="Somethings went wrong"})=>n(o=>[...o,{title:"error",id:ud(4),desc:i}]),s=({message:i="Success"})=>n(o=>[...o,{title:"success",id:ud(4),desc:`${i}`}]);return u.jsx(wA.Provider,{value:{state:{toasts:e},setToasts:n,setErrorToast:r,setSuccessToast:s},children:t})},tn=()=>{const{state:{toasts:t},setToasts:e,setErrorToast:n,setSuccessToast:r}=h.useContext(wA);return{toasts:t,setToasts:e,setErrorToast:n,setSuccessToast:r}},_A={tempSongs:[],status:""},n7=(t,e)=>{switch(e.type){case 0:{const{songs:n}=e.payload;return{...t,tempSongs:n,status:"uploading"}}case 1:{const n=[...t.tempSongs];return n.shift(),{...t,tempSongs:n}}case 2:{const{status:n}=e.payload;return{...t,tempSongs:[],status:n}}}},r7=()=>{const[t,e]=h.useReducer(n7,_A),n=h.useCallback(i=>{e({type:0,payload:{songs:i}})},[]),r=h.useCallback(()=>{e({type:1})},[]),s=h.useCallback(i=>{e({type:2,payload:{status:i}})},[]);return{state:t,setTempSongs:n,shiftSong:r,clearTempSongs:s}},s7={state:_A,setTempSongs:()=>{},shiftSong:()=>{},clearTempSongs:()=>{}},EA=h.createContext(s7),i7=({children:t})=>u.jsx(EA.Provider,{value:r7(),children:t}),Ef=()=>{const{state:{...t},...e}=h.useContext(EA);return{...e,...t}},Ul=async({collection:t,id:e,msg:n})=>{await zV(ov(Dr,t,e))},Wo=async({collection:t,id:e,msg:n})=>UV(ov(Dr,t,e)),bn=async({collection:t,id:e,data:n,msg:r})=>await BV(ov(Dr,t,e),{...n},{merge:!0}),SA=async({file:t,folder:e,email:n,msg:r})=>{const s=n.replace("@gmail.com","")+"_"+t.name.replaceAll(" ","").toLowerCase(),i=_v(Sv,`${e+s}`),o=await UR(i,t);return{fileURL:await BR(o.ref),filePath:o.metadata.fullPath}},TA=async({blob:t,folder:e,songId:n,msg:r})=>{const s=n+"_stock",i=_v(Sv,`${e+s}`),o=await UR(i,t);return{fileURL:await BR(o.ref),filePath:o.metadata.fullPath}},$g=async({filePath:t,msg:e})=>{const n=_v(Sv,t);await Z9(n)},bA=async t=>{await Ul({collection:"songs",id:t.id,msg:">>> api: delete song doc"}),await $g({filePath:t.song_file_path,msg:">>> api: delete song file"}),t.lyric_id&&await Ul({collection:"lyrics",id:t.lyric_id,msg:">>> api: delete song lyric doc"}),t.image_file_path&&await $g({filePath:t.image_file_path,msg:">>> api: delete song's image file"})},S_=async(t,e)=>{const n=t.map(r=>r.id);await bn({collection:"users",data:{playlist_ids:n},id:e.email,msg:">>> api: set user playlist_ids"})},Dp={currentPlaylist:t0({}),playlistSongs:[]},IA=_f({name:"currentPlaylist",initialState:Dp,reducers:{setCurrentPlaylist(t,e){const{playlist:n,songs:r}=e.payload;t.currentPlaylist=n,t.playlistSongs=r},updateCurrentPlaylist:(t,e)=>{const n=e.payload;Object.assign(t.currentPlaylist,n)},addSongsAndUpdateCurrent(t,e){const{songs:n}=e.payload,r=n.map(s=>({...s,song_in:`playlist_${t.currentPlaylist.id}`}));console.log("current",Lg(t.playlistSongs).map(s=>s.id)),console.log("add playlist songs",n.map(s=>s.id)),t.playlistSongs.push(...r),t.currentPlaylist.song_ids.push(...n.map(s=>s.id))},setPlaylistSongs(t,e){const{songs:n}=e.payload;t.playlistSongs=n},removeSong(t,e){const{index:n}=e.payload;t.playlistSongs.splice(n,1)},setPlaylistSongsAndUpdateCurrent(t,e){const{songs:n}=e.payload;console.log("current",Lg(t.playlistSongs).map(r=>r.id)),console.log("set playlist songs",n.map(r=>r.id)),t.playlistSongs=n,t.currentPlaylist.song_ids=n.map(r=>r.id)},resetCurrentPlaylist:t=>{t.currentPlaylist=Dp.currentPlaylist,t.playlistSongs=Dp.playlistSongs}}}),$s=t=>t.currentPlaylist,{addSongsAndUpdateCurrent:o7,removeSong:DW,setCurrentPlaylist:a7,updateCurrentPlaylist:l7,resetCurrentPlaylist:Mv,setPlaylistSongs:T_,setPlaylistSongsAndUpdateCurrent:b_}=IA.actions,c7=IA.reducer;function Ni(){const t=ke(),{user:e}=tt(),{currentPlaylist:n,playlistSongs:r}=K($s),{currentSong:s}=K(ge),{userPlaylists:i,updateUserPlaylist:o,setUserPlaylists:a}=Ge(),[l,c]=h.useState(!1),{setErrorToast:d,setSuccessToast:f}=tn(),p=en(),m=async S=>{await bn({collection:"playlist",data:S,id:S.id,msg:">>> api: set playlist doc"}),o(S)},y=async S=>{if(!e)throw new Error("user not found");if(!S)throw new Error("playlist name invalid");const b=Zy(S),I=t0({id:b,by:e.email,name:S});c(!0);const T=[...i,I];await bn({collection:"playlist",data:I,id:b,msg:">>> api: set playlist doc"}),await S_(T,e),a(T),c(!1)},g=async()=>{if(!e)return;c(!0);const S=i.filter(b=>b.id!==n.id);await Ul({collection:"playlist",id:n.id,msg:">>> api: delete playlist doc"}),await S_(S,e),a(S),t(Mv()),s.song_in===`playlist_${n.id}`&&t(Rs()),c(!1),p("/mysongs")},_=async S=>{c(!0);const b={...n};if(b.song_ids=[...n.song_ids,...S.map(I=>I.id)],await m(b),console.log(">>> playlist songs",r.length),t(o7({songs:S})),s.song_in===`playlist_${n.id}`){const I=S.map(T=>({...T,song_in:`playlist_${n.id}`}));t(Ec({songs:I}))}c(!1),f({message:`${S.length} songs added`})},x=async(S,b)=>{try{c(!0);const I={...b,name:S};await m(I),t(l7(I)),f({message:"Playlist edited"})}catch(I){throw console.log(I),new Error("Error when edit playlist")}finally{c(!1)}},v=async(S,b)=>{try{c(!0);const I={...b};I.song_ids.push(S.id),await m(I)}catch(I){throw console.log({message:I}),new Error("Error when edit playlist")}finally{c(!1)}},w=async S=>{c(!0);const b=r.filter(T=>T.id!==S.id);console.log("delete songs",r.map(T=>T.id),b.map(T=>T.id));const I={...n};I.song_ids=b.map(T=>T.id),await m(I),t(b_({songs:b})),c(!1),f({message:`'${S.name}' removed`})};return{isFetching:l,addPlaylist:y,editPlaylist:x,deletePlaylist:g,addSongsToPlaylist:_,deleteSongsFromPlaylist:async S=>{if(console.log("playlist action deleteManyFromPlaylist"),!n.song_ids)throw console.log("Wrong playlist data"),d({}),new Error("Wrong playlist data");if(S.length===1)return w(S[0]);const b=S.map(A=>A.id),I=r.filter(A=>!b.includes(A.id)),T={...n};return T.song_ids=I.map(A=>A.id),c(!0),await m(T),t(b_({songs:I})),c(!1),f({message:`${S.length} songs removed`}),I},deleteSongFromPlaylist:w,addSongToPlaylistSongItem:v,setPlaylistDocAndUpdateUserPlaylist:m}}function u7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M10 17a.75.75 0 01-.75-.75V5.612L5.29 9.77a.75.75 0 01-1.08-1.04l5.25-5.5a.75.75 0 011.08 0l5.25 5.5a.75.75 0 11-1.08 1.04l-3.96-4.158V16.25A.75.75 0 0110 17z",clipRule:"evenodd"}))}const d7=h.forwardRef(u7),h7=d7;function f7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10zm0 5.25a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75z",clipRule:"evenodd"}))}const p7=h.forwardRef(f7),m7=p7;function g7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"}))}const y7=h.forwardRef(g7),v7=y7;function x7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"}))}const w7=h.forwardRef(x7),RA=w7;function _7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"}))}const E7=h.forwardRef(_7),S7=E7;function T7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M7.84 1.804A1 1 0 018.82 1h2.36a1 1 0 01.98.804l.331 1.652a6.993 6.993 0 011.929 1.115l1.598-.54a1 1 0 011.186.447l1.18 2.044a1 1 0 01-.205 1.251l-1.267 1.113a7.047 7.047 0 010 2.228l1.267 1.113a1 1 0 01.206 1.25l-1.18 2.045a1 1 0 01-1.187.447l-1.598-.54a6.993 6.993 0 01-1.929 1.115l-.33 1.652a1 1 0 01-.98.804H8.82a1 1 0 01-.98-.804l-.331-1.652a6.993 6.993 0 01-1.929-1.115l-1.598.54a1 1 0 01-1.186-.447l-1.18-2.044a1 1 0 01.205-1.251l1.267-1.114a7.05 7.05 0 010-2.227L1.821 7.773a1 1 0 01-.206-1.25l1.18-2.045a1 1 0 011.187-.447l1.598.54A6.993 6.993 0 017.51 3.456l.33-1.652zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"}))}const b7=h.forwardRef(T7),I7=b7;function R7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M4.5 2A1.5 1.5 0 003 3.5v13A1.5 1.5 0 004.5 18h11a1.5 1.5 0 001.5-1.5V7.621a1.5 1.5 0 00-.44-1.06l-4.12-4.122A1.5 1.5 0 0011.378 2H4.5zm2.25 8.5a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5zm0 3a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5z",clipRule:"evenodd"}))}const A7=h.forwardRef(R7),C7=A7;function k7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"}))}const P7=h.forwardRef(k7),N7=P7;function j7({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"}))}const O7=h.forwardRef(j7),L7=O7;function Fs({close:t,title:e}){return u.jsxs("div",{className:"flex justify-between mb-[15px]",children:[u.jsx("h1",{className:"text-[26px] font-semibold",children:e}),u.jsx("button",{onClick:t,children:u.jsx(L7,{className:"w-[30px]"})})]})}function D7({close:t,playlistSongs:e}){const{theme:n}=Z(),[r,s]=h.useState([]),{userSongs:i}=Ge(),{addSongsToPlaylist:o,isFetching:a}=Ni(),l={addSongContainer:"pb-[40px] relative",addSongContent:"max-h-[calc(60vh)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full max-[549px]:w-full"},c=h.useMemo(()=>!!r.length,[r]),d=async()=>{try{if(!r.length)return;await o(r)}catch(f){console.log({message:f})}finally{t()}};return u.jsxs("div",{className:l.addSongContainer,children:[u.jsx(Fs,{close:t,title:"Add song to playlist"}),u.jsxs("div",{className:l.addSongContent,children:[u.jsxs(Y,{onClick:d,variant:"primary",isLoading:a,className:`rounded-full ${n.content_bg} absolute bottom-0 right-[15px] min-w-[34px] h-[32px] ${!c&&"opacity-60 pointer-events-none"}`,children:["Add",`${r.length?` (${r.length})`:""}`]}),i.map((f,p)=>{if(e.findIndex(y=>y.id===f.id)===-1)return u.jsx("div",{className:l.songItem,children:u.jsx(hb,{isChecked:!0,selectedSongs:r,setSelectedSongs:s,theme:n,data:f,active:!1,onClick:()=>{},setIsChecked:()=>{}})},p)})]})]})}function AA({children:t,active:e,done:n,inUpload:r,className:s,scrollBehavior:i}){const o=h.useRef(null),a=()=>{const l=o.current;l&&(l.scrollIntoView({behavior:i.current,block:"center"}),i.current==="instant"&&(i.current="smooth"))};return h.useEffect(()=>{e&&a()},[e]),u.jsxs("p",{ref:o,className:`lyric ${s&&s} ${r?"text-[16px]":""}  select-none  max-[549px]:text-center font-bold ${n&&"opacity-40"} ${r?"flex":""} ${e&&!r?"text-[#ffed00]":""}`,children:[t,r&&e&&u.jsx("span",{className:"ml-[10px] text-[16px]"})]})}const M7=()=>{const t=Yn();return{playStatus:{isError:!1,isPlaying:!1,isWaiting:!1,lyricSize:t.lyricSize||"medium",isLoaded:!0,isRepeat:t.isRepeat||"no",isShuffle:t.isShuffle||!1,isTimer:t.isTimer||0,isCrossFade:t.isCrossFade||!1,songBackground:t.songBackground||!1,songImage:t.songImage||!1}}},CA=_f({name:"playStatus",initialState:()=>M7(),reducers:{setPlayStatus(t,e){t.playStatus={...t.playStatus,...e.payload}},togglePlayControl(t,e){const{variant:n}=e.payload;switch(n){default:if(typeof t.playStatus[n]=="boolean"){const r=!t.playStatus[n];t.playStatus[n]=r,gt(n,r)}}}}}),Wt=t=>t.playStatus,{setPlayStatus:It,togglePlayControl:I_}=CA.actions,$7=CA.reducer;function F7({handlePlayPause:t}){const{playStatus:{isError:e,isPlaying:n,isWaiting:r}}=K(Wt),{currentSong:s}=K(ge),i=h.useMemo(()=>r?u.jsx(Ir,{className:"w-[36px] max-[549px]:w-[46px] animate-spin"}):e&&s.name?u.jsx(Wy,{className:"w-[30px] max-[549px]:w-[40px]"}):n?u.jsx(dh,{className:"w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]"}):u.jsx(Hy,{className:"w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]"}),[r,e,n,s]);return u.jsx(u.Fragment,{children:u.jsx("button",{className:`p-[5px] ${r&&"pointer-events-none"} inline-flex items-center justify-center w-[50px] max-[549px]:w-[60px] max-[350px]:w-[45px]`,onClick:()=>t(),children:i})})}const R_=h.memo(F7);function kA({bgRef:t,currentSong:e}){const{playStatus:{songBackground:n}}=K(Wt);h.useEffect(()=>{if(n&&e.image_url){const r=t.current;r&&(r.style.backgroundImage=`url(${e.image_url})`)}},[e,n]),h.useEffect(()=>{if(!n){const r=t.current;r&&(r.style.backgroundImage="none")}},[n])}function V7({audioEle:t,isOpenFullScreen:e}){const{currentSong:n}=K(ge),{playStatus:{isError:r}}=K(Wt),[s,i]=h.useState({id:"",base:"",real_time:[]}),[o,a]=h.useState(!1),[l,c]=h.useState(!1),d=h.useRef(),f=async()=>{a(!0);try{const m=await Wo({collection:"lyrics",id:n.lyric_id,msg:">>> api: get lyric doc"});if(m.exists()){const y=m.data();i(y)}}catch{console.log("[error] get lyric error")}finally{a(!1)}},p=()=>{clearTimeout(d.current),c(!1),a(!0),i({base:"",real_time:[],id:""})};return h.useEffect(()=>{const m=async()=>{console.log("song loaded"),c(!0)};return t&&t.addEventListener("loadeddata",m),()=>{t&&t.removeEventListener("loadeddata",m)}},[]),h.useEffect(()=>{if(!n.lyric_id&&l){a(!1);return}s.real_time.length||l&&e&&(d.current=setTimeout(()=>{f()},500))},[l,e]),h.useEffect(()=>{if(r){a(!1);return}return()=>{p()}},[n,r]),{songLyric:s,loading:o}}const $v=(t,e)=>{const[n,r]=h.useState(()=>JSON.parse(localStorage.getItem("HD-MP3")||"{}")[t]||e);return h.useEffect(()=>{const s=JSON.parse(localStorage.getItem("HD-MP3")||"{}");s[t]=n,localStorage.setItem("HD-MP3",JSON.stringify(s))},[n]),[n,r]};function U7(){const t=ke(),{currentPlaylist:e,playlistSongs:n}=K($s),r=uh(),{setErrorToast:s}=tn(),i=h.useRef(!1),[o,a]=h.useState(!0),l=async()=>{if(!r.id)throw new Error("invalid playlist id");const f=await Wo({collection:"playlist",id:r.id,msg:">>> api get playlist"});if(f.exists())return f.data()},c=async f=>{if(!f.song_ids.length)return[];console.log(">>> api: get playlist songs");const p=oa(Dr,"songs"),m=Ls(p,Ds("id","in",f.song_ids)),y=await Ms(m);return y.docs.length?y.docs.map(_=>({..._.data(),song_in:`playlist_${f.id}`})):(f.song_ids.length&&s({}),[])},d=async()=>{try{if(!r.id)throw new Error("invalid playlist id");let f;const p=e.id===r.id;if(a(!0),p?f=e:f=await l(),!f)throw new Error("playlist not found");const m=await c(f);p||t(a7({playlist:f,songs:m})),t(T_({songs:m}))}catch(f){console.log({message:f}),s({})}finally{a(!1)}};return h.useEffect(()=>{i.current||(i.current=!0,console.log("run init"),d())},[]),{isFetching:o,setPlaylistSongs:T_,playlistSongs:n}}function B7(){const[t,e]=h.useState([]),{isFetching:n}=U7();return{playlistSongs:t,loading:n,setPlaylistSongs:e}}const PA=()=>{window.dispatchEvent(new Event("mousemove"))},NA=(t,e,n=!1)=>{const r=window.innerWidth;if(!t||!e){console.log("ele not found");return}const i=t.getBoundingClientRect().left,o=r-(i+t.offsetWidth),a=Math.abs(Math.ceil(i-o))/2;if(a<5)return!1;n&&(e.onscroll=()=>{},setTimeout(()=>{e.onscroll=PA},900)),n||Math.abs(i)>r||Math.abs(o)>r?e.style.scrollBehavior="auto":e.style.scrollBehavior="smooth";let l=e.scrollLeft;return o>i?setTimeout(()=>{e.scrollLeft=l-a},300):o<i&&setTimeout(()=>{e.scrollLeft=l+a},300),!0};function z7({containerRef:t,songItemRef:e,isOpenFullScreen:n,idle:r}){const{currentSong:s}=K(ge),i=()=>{const o=e==null?void 0:e.current,a=t==null?void 0:t.current;NA(o,a,r)};h.useEffect(()=>{if(n){if(!scroll||!(t!=null&&t.current)||!(e!=null&&e.current)){console.log("lack props");return}s.name&&n&&i()}},[s,n]),h.useEffect(()=>{const o=t==null?void 0:t.current;if(o)return o.onscroll=PA,()=>{o.onscroll=()=>{}}},[])}function W7({textRef:t,textWrapperRef:e,autoScroll:n}){const{currentSong:r}=K(ge),{playStatus:{isPlaying:s}}=K(Wt),i=h.useRef(),o=h.useRef(),a=h.useRef(0),l=h.useRef(""),c=h.useRef(0),d=h.useRef(!1),f=h.useCallback(()=>{const g=t==null?void 0:t.current;g&&(g.style.transition="none",g.style.transform="translateX(0)",d.current=!1)},[t]),p=()=>{if(!t){console.log("lack of prop");return}if(!a.current&&!c.current)return;const g=t.current;g&&(console.log("scroll"),g.innerHTML=l.current+"&nbsp; &nbsp; &nbsp;"+l.current,d.current=!0,g.style.transition=`transform linear ${a.current}s`,g.style.transform=`translateX(-${c.current}px)`,o.current=setTimeout(()=>{f(),console.log("call unscroll")},a.current*1e3))},m=()=>{if(!n||!t||!e)return;if(d.current){console.log("reScroll cancel cause is scroll");return}const g=t.current,_=e.current;g.offsetWidth-_.offsetWidth>0&&(l.current=g.innerText,c.current=g.offsetWidth+20,a.current=Math.ceil(c.current/35))},y=()=>{f(),a.current=0,c.current=0};h.useEffect(()=>{if(!(!r.name||!s)&&(m(),!!c.current))return n&&a.current&&!d.current&&(setTimeout(()=>{p()},1e3),i.current=setInterval(()=>{p()},a.current*1e3+3e3+1e3)),()=>{clearInterval(i.current),clearTimeout(o.current),y()}},[r,s])}const H7=({song:t,closeModal:e,setIsOpenPopup:n})=>{const r=ke(),{setErrorToast:s,setSuccessToast:i}=tn(),{currentSong:o}=K(ge),{userSongs:a,setUserSongs:l}=Ge(),[c,d]=h.useState(!1),{addSongToPlaylistSongItem:f,deleteSongFromPlaylist:p}=Ni();return{updateAndSetUserSongs:h.useCallback(async({song:v})=>{let w=[...a];const E=w.indexOf(v);w.splice(E,1);const S=w.map(b=>b.id);if(w.length!==a.length)return l(w),S},[a]),handleDeleteSong:async()=>{try{d(!0);let v=[...a];const w=v.indexOf(t);v.splice(w,1),await bA(t),l(v),o.id===t.id&&r(Rs()),i({message:`'${t.name}' deleted`})}catch(v){throw console.log({message:v}),new Error("Error when delete song")}finally{d(!1),e()}},handleAddSongToPlaylistMobile:async v=>{try{d(!0),await f(t,v),i({message:`'${t.name}' added to '${v.name}'`})}catch(w){throw console.log(w),new Error("Error when add song to playlist")}finally{d(!1),e()}},handleRemoveSongFromPlaylist:async()=>{try{d(!0),await p(t)}catch(v){throw console.log({message:v}),new Error("Error when remove song from playlist")}finally{d(!1),n(!1)}},handleAddSongToPlaylist:async v=>{if(!t||!v){s({message:"Lack of props"});return}try{d(!0),await f(t,v),i({message:`'${t.name}' added to '${v.name}'`})}catch(w){throw console.log(w),new Error("Error when add song to playlist")}finally{d(!1),n(!1)}},loading:c}},Bl={isDebug:!1,focusDelay:3e3,scrollSongDelay:4e3,loadingDuration:200},jA=oa(Dr,"songs"),OA=oa(Dr,"playlist"),q7=async()=>{const t=Ls(jA,Ds("by","==","admin")),e=await Ms(t);if(e.docs)return e.docs.map(r=>({...r.data(),song_in:"admin"}))},K7=async()=>{const t=Ls(OA,Ds("by","==","admin")),e=await Ms(t);if(e.docs)return e.docs.map(r=>r.data())},Q7=async t=>{const e=Ls(OA,Ds("by","==",t.email)),n=await Ms(e);if(n.docs.length)return n.docs.map(s=>s.data())},G7=async t=>{const e=Ls(jA,Ds("by","==",t.email)),n=await Ms(e);if(n.docs.length)return n.docs.map(s=>({...s.data(),song_in:"user"}))},X7=async t=>{const e={userSongs:[],userPlaylists:[]},n=await G7(t);n!=null&&n.length&&(e.userSongs=n);const r=await Q7(t);return r!=null&&r.length&&(e.userPlaylists=r),e};function Sf({admin:t}){const{setErrorToast:e}=tn(),{user:n,loading:r}=tt(),{initial:s,initSongsContext:i}=Ge(),[o,a]=h.useState(""),[l,c]=h.useState(!0),d=p=>{c(!1),a(p),e({message:"Use song error"})},f=async()=>{try{const p=await q7(),m=await K7();if(t){i({userSongs:p,userPlaylists:m}),console.log("admin",m,p),c(!1);return}if(!n)await n0(Bl.loadingDuration),i({adminSongs:p,adminPlaylists:m});else{const y=await X7(n);i({...y,adminSongs:p,adminPlaylists:m})}}catch(p){console.log({message:p}),d("init song error")}finally{c(!1)}};return h.useEffect(()=>{if(r)return c(!0);if(s){console.log("Already init"),setTimeout(()=>c(!1),Bl.loadingDuration);return}else{f();return}},[r]),{initial:s,loading:l,errorMsg:o,initSongsAndPlaylists:f}}function Y7({audioRef:t,admin:e,inputRef:n,testImageRef:r}){const{user:s}=tt(),{isDev:i}=Z(),{userSongs:o,addUserSongs:a}=Ge(),{currentSong:l}=K(ge),{setTempSongs:c,tempSongs:d,clearTempSongs:f,shiftSong:p,status:m}=Ef(),y=h.useRef([]),g=h.useRef([]),_=h.useRef(!1),{setErrorToast:x,setSuccessToast:v,setToasts:w}=tn(),E=T=>{if(!n.current)return;const A=n.current;A&&(A.value="",g.current=[]),f(T)},S=h.useCallback(async T=>{if(!s)return x({message:"Missing user data"});f("uploading");const C=T.target.files;if(!C.length){f("finish");return}let O=e0({by:e?"admin":s.email,song_in:e?"admin":"user"}),z=[];const N=Date.now(),$=V=>o.some(F=>F.singer===V.singer&&F.name===V.name&&F.size===V.size)||z.some(F=>F.singer===V.singer&&F.name===V.name&&F.size===V.size);try{let V;for(V=0;V<=C.length-1;V++){const F=C[V],Q=await jO(F);if(!Q){x({message:"Error when parser song"}),E("finish-error");return}let R={...O,name:Q.name,singer:Q.singer,size:Math.floor(F.size/1024)},M;if(Q.image){M=new Blob([Q.image],{type:"application/octet-stream"});const k=URL.createObjectURL(M);R.image_url=k}if($(R)){console.log(">>>duplicate"),_.current=!0,y.current.push(R);continue}z.push(R),g.current=[...g.current,V],Object.assign(F,{for_song_id:z.length-1,imageBlob:M})}if(o.length+g.current.length>5&&s.role!=="ADMIN"){E("finish-error"),x({message:"You have reach the upload limit"});return}if(!z.length){_.current=!1,E("finish-error"),x({message:"Duplicate song"});return}c(z);for(let F of g.current){let Q=C[F],R=Zy(z[Q.for_song_id].name);e&&(R+="_admin");const M=Q.for_song_id,B={...z[M]};B.image_url&&await b(Q.imageBlob,R,B);const{filePath:k,fileURL:W}=await SA({file:Q,folder:"/songs/",email:s.email,msg:">>> api: upload song file"});Object.assign(B,{id:R,song_file_path:k,song_url:W});const X=t.current;X.src=URL.createObjectURL(Q),await I(B)}}catch(V){console.log({message:V}),E("finish-error"),x({});return}try{g.current=[],_.current?(E("finish-error"),w(F=>[...F,{id:ud(4),title:"warning",desc:"Song duplicate"}])):(E("finish"),v({message:`${z.length} songs uploaded`}));const V=Date.now();i&&console.log(">>> upload songs finished after",(V-N)/1e3)}catch(V){console.log({message:V}),x({}),E("finish-error");return}},[s,o,l.song_in]),b=async(T,A,C)=>new Promise((O,z)=>{const N=r.current,$=URL.createObjectURL(T);N.src=$;const V=async()=>{try{URL.revokeObjectURL($);const{encode:Q}=await tb(T),{fileURL:R,filePath:M}=await TA({blob:T,folder:"/images/",songId:A,msg:">>> api: upload song's image blob"});Q&&(C.blurhash_encode=Q),C.image_url=R,C.image_file_path=M,O(),N.removeEventListener("error",F),z()}finally{N.removeEventListener("load",V)}},F=()=>{URL.revokeObjectURL($),C.image_url="",N.removeEventListener("error",F),O()};N.addEventListener("load",V),N.addEventListener("error",F)}),I=async T=>new Promise((A,C)=>{const O=t.current,z=async()=>{try{const N=Math.ceil(O.duration);Object.assign(T,{duration:N}),await bn({collection:"songs",data:T,id:T.id,msg:">>> api: set song doc"}),a([T]),p(),(e||l.song_in==="user")&&Ec({songs:[{...T}]}),URL.revokeObjectURL(O.src),i&&console.log(T,"uploaded"),A()}catch{C()}finally{O.removeEventListener("loadedmetadata",z)}};O.addEventListener("loadedmetadata",z)});return h.useEffect(()=>{const T=document.querySelector(".temp-song");T&&T.scrollIntoView({behavior:"smooth",block:"center"})},[d]),{handleInputChange:S}}function J7(t,e,n){const[r,s]=h.useState(!1),[i,o]=$v("volume",1),a=c=>{const f=c.target.getBoundingClientRect();if(t.current){let p=+((c.clientX-f.x)/t.current).toFixed(2);p>.9?p=1:p<.05?(p=0,s(!0)):s(!1),o(p)}},l=()=>{s(!r)};return h.useEffect(()=>{e.current&&n&&(e.current.style.width=i*100+"%",n.volume=i)},[i]),h.useEffect(()=>{n&&(r?n.muted=!0:n.muted=!1)},[r]),{volume:i,handleSetVolume:a,isMute:r,handleMute:l}}const Z7=/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;function eB({data:t,inputFields:e,imageURLFromLocal:n}){const[r,s]=h.useState(!!t.name),[i,o]=h.useState(!!t.singer),[a,l]=h.useState(!1),[c,d]=h.useState(!1),[f,p]=h.useState(!1);return h.useEffect(()=>{e.name?s(!0):s(!1)},[e.name]),h.useEffect(()=>{e.singer?o(!0):o(!1)},[e.singer]),h.useEffect(()=>{if(!e.image_url){l(!0);return}const m=Z7.test(e.image_url);l(m)},[e.image_url]),h.useEffect(()=>{(e.name!==t.name||e.singer!==t.singer||e.image_url)&&p(!0)},[e,n]),h.useEffect(()=>{d(r&&i&&a&&f)},[r,i,a,f]),{validName:r,validSinger:i,validURL:a,isAbleToSubmit:c,isChangeInEdit:f,setValidURL:l}}function tB({song:t,close:e}){const n=ke(),{theme:r}=Z(),{user:s}=tt(),{setErrorToast:i,setSuccessToast:o}=tn(),{currentSong:a}=K(ge),{updateUserSong:l}=Ge(),[c,d]=h.useState(!1),[f,p]=h.useState(!1),[m,y]=h.useState(t.image_url),[g,_]=h.useState(""),[x,v]=h.useState(),[w,E]=h.useState({name:t.name,singer:t.singer,image_url:""}),S=h.useRef(null),{isAbleToSubmit:b,validName:I,validSinger:T,validURL:A,isChangeInEdit:C,setValidURL:O}=eB({data:t,inputFields:w,imageURLFromLocal:g}),z=h.useMemo(()=>{if(g)return g;if(m)return m;if(A)return w.image_url},[w,g,m,t,A]),N=h.useMemo(()=>!!g||!!m,[g,m]),$=(k,W)=>{E({...w,[k]:W})},V=h.useCallback(()=>{t.image_file_path&&!g?y(""):g?(_(""),v(void 0)):y(""),p(!0);const k=S.current;k&&(k.value="")},[g,t.image_file_path]),F=h.useCallback(k=>{const X=k.target.files[0];_(URL.createObjectURL(X)),p(!0),v(X)},[]),Q=()=>{d(!1),e()},R=k=>{k.stopPropagation(),Q()},M=async()=>{if(s){if(!t.id){i({message:"Edit song wrong data id"});return}try{let k={...t};if(C){if(console.log("is change in edit"),!w.name||!w.singer){console.log("input invalid"),i({});return}const W=w.image_url&&A?w.image_url:k.image_url;if(d(!0),k={...k,name:w.name,singer:w.singer,image_url:W},k.name!==w.name||k.singer!==w.singer){console.log("input invalid"),i({});return}if(x&&f){const{filePath:X,fileURL:ee}=await SA({file:x,folder:"/images/",email:s.email});k.image_file_path=X,k.image_url=ee}else f&&(k.image_file_path="");f||l(k)}if(f&&(d(!0),console.log("isImpactOnImage"),t.image_file_path&&(k.image_file_path="",k.image_url="",await $g({filePath:t.image_file_path,msg:">>> api: delete song's image file"})),!m&&!x&&(console.log("remove current image url"),k.image_file_path="",k.image_url=""),x)){console.log("upload new file");const W=await OO(x);if(W==null)return;const X=TA({blob:W,folder:"/images/",songId:k.id}),{encode:ee}=await tb(W);ee&&(k.blurhash_encode=ee,console.log("check encode",ee));const{filePath:Pe,fileURL:le}=await X;k.image_file_path=Pe,k.image_url=le}await bn({collection:"songs",data:k,id:k.id,msg:">>> api: update song doc"}),l(k),n(q8({song:k})),a.id===k.id&&n(Zt({...k,currentIndex:a.currentIndex,song_in:a.song_in})),o({message:"Song edited"}),Q()}catch(k){console.log({message:k}),i({})}finally{d(!1)}}},B={textColor:r.type==="light"?"text-[#333]":"text-[#fff]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${r.alpha} text-[14px] font-[500]`};return u.jsxs("div",{className:`w-[500px] max-w-[calc(90vw-40px)] h-[auto] ${c?"opacity-60 pointer-events-none":""}`,children:[u.jsx("input",{ref:S,id:"editImageInput",type:"file",accept:"image/*",onChange:F,className:"hidden"}),u.jsx("h1",{className:"text-[20px] font-semibold",children:"Edit"}),u.jsxs("div",{className:"flex gap-[20px] mt-[10px] max-[800px]:flex-col",children:[u.jsxs("div",{className:"w-[30%] max-[800px]:flex max-[800px]:w-full max-[800px]:gap-[12px]",children:[u.jsx("div",{className:"w-full rounded-[5px] overflow-hidden",children:u.jsx(Lr,{classNames:"object-cover object-center w-full h-full",onError:()=>O(!1),src:z,blurHashEncode:t.blurhash_encode})}),u.jsxs("div",{className:"md:mt-[10px]",children:[u.jsxs("div",{className:"flex gap-[10px]",children:[u.jsx("label",{htmlFor:"editImageInput",className:`inline-block cursor-pointer hover:brightness-90 px-[20px] py-[5px] bg-${r.alpha} rounded-full text-[14px]`,children:u.jsx(R5,{className:"w-[15px]"})}),N&&u.jsx(Y,{onClick:()=>V(),className:`inline-block hover:brightness-90 px-[20px] py-[5px] ${r.content_bg} rounded-full text-[14px]`,children:u.jsx(Xs,{className:"w-[15px]"})})]}),u.jsx("p",{className:`text-[12px] ${B.textColor} mt-[10px]`,children:"* Image from URL will not be apply until you remove current image"})]})]}),u.jsxs("div",{className:"flex flex-col flex-grow gap-[10px]",children:[u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"text-[14px] inline-flex",children:["Name:",I?u.jsx(ao,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Xs,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:`${B.input} ${B.textColor}`,value:w.name,type:"text",onChange:k=>$("name",k.target.value),placeholder:t.name})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Singer:",T?u.jsx(ao,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Xs,{className:"w-[20px] text-red-500 ml-[10px]"})]}),u.jsx("input",{className:B.input,value:w.singer,onChange:k=>$("singer",k.target.value),type:"text",placeholder:t.singer})]}),u.jsxs("div",{className:"flex flex-col gap-[5px]",children:[u.jsxs("p",{className:"inline-flex text-[14px]",children:["Image URL:",w.image_url&&u.jsx(u.Fragment,{children:A?u.jsx(ao,{className:"w-[20px] text-emerald-500 ml-[10px]"}):u.jsx(Xs,{className:"w-[20px] text-red-500 ml-[10px]"})})]}),u.jsx("input",{className:B.input,value:w.image_url,onChange:k=>$("image_url",k.target.value),type:"text"})]}),u.jsxs("div",{className:"flex gap-[10px] mt-[10px]",children:[u.jsx(Y,{isLoading:c,onClick:M,className:`${r.content_bg} rounded-full text-[14px] ${b?"":!f&&"pointer-events-none opacity-60"}`,variant:"primary",children:"Save"}),u.jsx(Y,{onClick:R,className:`bg-${r.alpha} rounded-full hover:bg-red-500 hover:text-[#fff] text-[14px]`,variant:"primary",children:"Close"})]})]})]})]})}function nB({toast:t,theme:e,onClick:n}){const r={icon:"w-[30px] max-[549px]:w-[25px]",container:`text-white px-[12px] py-[6px] rounded-[4px] flex items-center  ${e.side_bar_bg} border border-${e.alpha}`,text:`font-[500] text-[14px] max-[549px]:text-[14px] ${e.type==="light"?"text-[#333]":""}`};return u.jsxs("div",{onClick:()=>n?n(t.id):void 0,className:`${r.container} animate-[fadeIn_0.3s_linear]`,children:[t.title&&u.jsxs("span",{className:"mr-[10px]",children:[t.title==="success"&&u.jsx(_T,{className:`${r.icon} text-emerald-500 `}),t.title==="error"&&u.jsx(r4,{className:`${r.icon} text-red-500`}),t.title==="warning"&&u.jsx(Wy,{className:`${r.icon} text-yellow-500`})]}),u.jsx("p",{className:r.text,children:t.desc})]})}function rB({lyric:t,handleSetTime:e,theme:n,realTimeLyrics:r,index:s,setRealTimeLyrics:i}){const[o,a]=h.useState(!1),[l,c]=h.useState(t.text),d=h.useRef(null),f=m=>{m.preventDefault();const y=[...r],g={...y[s],text:l};y[s]=g,console.log("check new lyric ",g),i(y),a(!1)},p={input:`bg-${n.alpha} rounded-[4px] outline-none w-full px-[8px] text-[16px]`};return h.useEffect(()=>{var m;o&&((m=d.current)==null||m.focus())},[o]),u.jsxs("div",{className:"pb-[10px]",children:[!o&&u.jsxs("p",{className:"text-[16px] leading-[1.2] font-bold select-none flex items-center",children:[t.text,u.jsx("button",{onClick:()=>a(!0),className:"ml-[8px]",children:u.jsx(AT,{className:"w-[16px]"})})]}),o&&u.jsx("form",{action:"",onSubmit:f,children:u.jsx("input",{onBlur:()=>a(!1),value:l,onChange:m=>c(m.target.value),ref:d,type:"text",className:p.input})}),u.jsxs("div",{className:"flex gap-[10px] h-[20px]",children:[u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.start),children:[t.start,"s"]}),u.jsx("span",{children:" - "}),u.jsxs("button",{className:` ${n.content_hover_text}`,onClick:()=>e(t.end),children:[t.end,"s"]})]})]})}function Nu({cb:t,active:e,className:n,size:r="default"}){const{theme:s}=Z(),i={circle:`${r==="default"?"w-[20px] h-[20px]":"w-[16px] h-[16px]"}  absolute bg-white left-[3px] rounded-[50%] transition-transform top-[50%] translate-y-[-50%]`,active:`${r==="default"?"translate-x-[14px]":"translate-x-[18px]"} `,inActive:"translate-x-[0]"};return u.jsx("div",{onClick:t,className:`relative  cursor-pointer ${r==="default"?"h-[24px]":"h-[20px]"} rounded-[99px] w-[40px] ${n||""} 
         ${e?s.content_bg:"bg-"+s.alpha} `,children:u.jsx("div",{className:`${i.circle} ${e?i.active:i.inActive}`})})}const Fg=Math.min,yo=Math.max,Vd=Math.round,su=Math.floor,As=t=>({x:t,y:t});function sB(t,e){return typeof t=="function"?t(e):t}function Fv(t){return t.split("-")[0]}function LA(t){return t.split("-")[1]}function iB(t){return t==="x"?"y":"x"}function oB(t){return t==="y"?"height":"width"}function Vv(t){return["top","bottom"].includes(Fv(t))?"y":"x"}function aB(t){return iB(Vv(t))}function DA(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function A_(t,e,n){let{reference:r,floating:s}=t;const i=Vv(e),o=aB(e),a=oB(o),l=Fv(e),c=i==="y",d=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-s.width,y:f};break;default:m={x:r.x,y:r.y}}switch(LA(e)){case"start":m[o]-=p*(n&&c?-1:1);break;case"end":m[o]+=p*(n&&c?-1:1);break}return m}const lB=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:f}=A_(c,r,l),p=r,m={},y=0;for(let g=0;g<a.length;g++){const{name:_,fn:x}=a[g],{x:v,y:w,data:E,reset:S}=await x({x:d,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});if(d=v??d,f=w??f,m={...m,[_]:{...m[_],...E}},S&&y<=50){y++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):S.rects),{x:d,y:f}=A_(c,p,l)),g=-1;continue}}return{x:d,y:f,placement:p,strategy:s,middlewareData:m}};async function cB(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Fv(n),a=LA(n),l=Vv(n)==="y",c=["left","top"].includes(o)?-1:1,d=i&&l?-1:1,f=sB(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof y=="number"&&(m=a==="end"?y*-1:y),l?{x:m*d,y:p*c}:{x:p*c,y:m*d}}const MA=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,s=await cB(e,t);return{x:n+s.x,y:r+s.y,data:s}}}};function Cs(t){return $A(t)?(t.nodeName||"").toLowerCase():"#document"}function ln(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Mr(t){var e;return(e=($A(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function $A(t){return t instanceof Node||t instanceof ln(t).Node}function Ke(t){return t instanceof Element||t instanceof ln(t).Element}function Ut(t){return t instanceof HTMLElement||t instanceof ln(t).HTMLElement}function Vg(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ln(t).ShadowRoot}function bc(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=hn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function uB(t){return["table","td","th"].includes(Cs(t))}function Uv(t){const e=Bv(),n=hn(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function dB(t){let e=wi(t);for(;Ut(e)&&!Ic(e);){if(Uv(e))return e;e=wi(e)}return null}function Bv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ic(t){return["html","body","#document"].includes(Cs(t))}function hn(t){return ln(t).getComputedStyle(t)}function Tf(t){return Ke(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function wi(t){if(Cs(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Vg(t)&&t.host||Mr(t);return Vg(e)?e.host:e}function FA(t){const e=wi(t);return Ic(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ut(e)&&bc(e)?e:FA(e)}function oi(t,e){var n;e===void 0&&(e=[]);const r=FA(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=ln(r);return s?e.concat(i,i.visualViewport||[],bc(r)?r:[]):e.concat(r,oi(r))}function VA(t){const e=hn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ut(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Vd(n)!==i||Vd(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function zv(t){return Ke(t)?t:t.contextElement}function vo(t){const e=zv(t);if(!Ut(e))return As(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=VA(e);let o=(i?Vd(n.width):n.width)/r,a=(i?Vd(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const hB=As(0);function UA(t){const e=ln(t);return!Bv()||!e.visualViewport?hB:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function fB(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ln(t)?!1:e}function _i(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=zv(t);let o=As(1);e&&(r?Ke(r)&&(o=vo(r)):o=vo(t));const a=fB(i,n,r)?UA(i):As(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,f=s.height/o.y;if(i){const p=ln(i),m=r&&Ke(r)?ln(r):r;let y=p.frameElement;for(;y&&r&&m!==p;){const g=vo(y),_=y.getBoundingClientRect(),x=hn(y),v=_.left+(y.clientLeft+parseFloat(x.paddingLeft))*g.x,w=_.top+(y.clientTop+parseFloat(x.paddingTop))*g.y;l*=g.x,c*=g.y,d*=g.x,f*=g.y,l+=v,c+=w,y=ln(y).frameElement}}return DA({width:d,height:f,x:l,y:c})}function pB(t){let{rect:e,offsetParent:n,strategy:r}=t;const s=Ut(n),i=Mr(n);if(n===i)return e;let o={scrollLeft:0,scrollTop:0},a=As(1);const l=As(0);if((s||!s&&r!=="fixed")&&((Cs(n)!=="body"||bc(i))&&(o=Tf(n)),Ut(n))){const c=_i(n);a=vo(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function mB(t){return Array.from(t.getClientRects())}function BA(t){return _i(Mr(t)).left+Tf(t).scrollLeft}function gB(t){const e=Mr(t),n=Tf(t),r=t.ownerDocument.body,s=yo(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=yo(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+BA(t);const a=-n.scrollTop;return hn(r).direction==="rtl"&&(o+=yo(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function yB(t,e){const n=ln(t),r=Mr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Bv();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function vB(t,e){const n=_i(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Ut(t)?vo(t):As(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function C_(t,e,n){let r;if(e==="viewport")r=yB(t,n);else if(e==="document")r=gB(Mr(t));else if(Ke(e))r=vB(e,n);else{const s=UA(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return DA(r)}function zA(t,e){const n=wi(t);return n===e||!Ke(n)||Ic(n)?!1:hn(n).position==="fixed"||zA(n,e)}function xB(t,e){const n=e.get(t);if(n)return n;let r=oi(t).filter(a=>Ke(a)&&Cs(a)!=="body"),s=null;const i=hn(t).position==="fixed";let o=i?wi(t):t;for(;Ke(o)&&!Ic(o);){const a=hn(o),l=Uv(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||bc(o)&&!l&&zA(t,o))?r=r.filter(d=>d!==o):s=a,o=wi(o)}return e.set(t,r),r}function wB(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?xB(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const f=C_(e,d,s);return c.top=yo(f.top,c.top),c.right=Fg(f.right,c.right),c.bottom=Fg(f.bottom,c.bottom),c.left=yo(f.left,c.left),c},C_(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function _B(t){return VA(t)}function EB(t,e,n){const r=Ut(e),s=Mr(e),i=n==="fixed",o=_i(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=As(0);if(r||!r&&!i)if((Cs(e)!=="body"||bc(s))&&(a=Tf(e)),r){const c=_i(e,!0,i,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else s&&(l.x=BA(s));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function k_(t,e){return!Ut(t)||hn(t).position==="fixed"?null:e?e(t):t.offsetParent}function WA(t,e){const n=ln(t);if(!Ut(t))return n;let r=k_(t,e);for(;r&&uB(r)&&hn(r).position==="static";)r=k_(r,e);return r&&(Cs(r)==="html"||Cs(r)==="body"&&hn(r).position==="static"&&!Uv(r))?n:r||dB(t)||n}const SB=async function(t){let{reference:e,floating:n,strategy:r}=t;const s=this.getOffsetParent||WA,i=this.getDimensions;return{reference:EB(e,await s(n),r),floating:{x:0,y:0,...await i(n)}}};function TB(t){return hn(t).direction==="rtl"}const bB={convertOffsetParentRelativeRectToViewportRelativeRect:pB,getDocumentElement:Mr,getClippingRect:wB,getOffsetParent:WA,getElementRects:SB,getClientRects:mB,getDimensions:_B,getScale:vo,isElement:Ke,isRTL:TB};function IB(t,e){let n=null,r;const s=Mr(t);function i(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:d,width:f,height:p}=t.getBoundingClientRect();if(a||e(),!f||!p)return;const m=su(d),y=su(s.clientWidth-(c+f)),g=su(s.clientHeight-(d+p)),_=su(c),v={rootMargin:-m+"px "+-y+"px "+-g+"px "+-_+"px",threshold:yo(0,Fg(1,l))||1};let w=!0;function E(S){const b=S[0].intersectionRatio;if(b!==l){if(!w)return o();b?o(!1,b):r=setTimeout(()=>{o(!1,1e-7)},100)}w=!1}try{n=new IntersectionObserver(E,{...v,root:s.ownerDocument})}catch{n=new IntersectionObserver(E,v)}n.observe(t)}return o(!0),i}function HA(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=zv(t),d=s||i?[...c?oi(c):[],...oi(e)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const f=c&&a?IB(c,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(x=>{let[v]=x;v&&v.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{m&&m.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let y,g=l?_i(t):null;l&&_();function _(){const x=_i(t);g&&(x.x!==g.x||x.y!==g.y||x.width!==g.width||x.height!==g.height)&&n(),g=x,y=requestAnimationFrame(_)}return n(),()=>{d.forEach(x=>{s&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),f&&f(),m&&m.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const RB=(t,e,n)=>{const r=new Map,s={platform:bB,...n},i={...s.platform,_c:r};return lB(t,e,{...s,platform:i})};var ju=typeof document<"u"?h.useLayoutEffect:h.useEffect;function Ud(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Ud(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Ud(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function qA(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function P_(t,e){const n=qA(t);return Math.round(e*n)/n}function N_(t){const e=h.useRef(t);return ju(()=>{e.current=t}),e}function AB(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,f]=h.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=h.useState(r);Ud(p,r)||m(r);const[y,g]=h.useState(null),[_,x]=h.useState(null),v=h.useCallback(F=>{F!=b.current&&(b.current=F,g(F))},[g]),w=h.useCallback(F=>{F!==I.current&&(I.current=F,x(F))},[x]),E=i||y,S=o||_,b=h.useRef(null),I=h.useRef(null),T=h.useRef(d),A=N_(l),C=N_(s),O=h.useCallback(()=>{if(!b.current||!I.current)return;const F={placement:e,strategy:n,middleware:p};C.current&&(F.platform=C.current),RB(b.current,I.current,F).then(Q=>{const R={...Q,isPositioned:!0};z.current&&!Ud(T.current,R)&&(T.current=R,Qo.flushSync(()=>{f(R)}))})},[p,e,n,C]);ju(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,f(F=>({...F,isPositioned:!1})))},[c]);const z=h.useRef(!1);ju(()=>(z.current=!0,()=>{z.current=!1}),[]),ju(()=>{if(E&&(b.current=E),S&&(I.current=S),E&&S){if(A.current)return A.current(E,S,O);O()}},[E,S,O,A]);const N=h.useMemo(()=>({reference:b,floating:I,setReference:v,setFloating:w}),[v,w]),$=h.useMemo(()=>({reference:E,floating:S}),[E,S]),V=h.useMemo(()=>{const F={position:n,left:0,top:0};if(!$.floating)return F;const Q=P_($.floating,d.x),R=P_($.floating,d.y);return a?{...F,transform:"translate("+Q+"px, "+R+"px)",...qA($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Q,top:R}},[n,a,$.floating,d.x,d.y]);return h.useMemo(()=>({...d,update:O,refs:N,elements:$,floatingStyles:V}),[d,O,N,$,V])}function Vi(t){let e=t.activeElement;for(;((n=e)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;e=e.shadowRoot.activeElement}return e}function Ht(t,e){if(!t||!e)return!1;const n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Vg(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function CB(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function kB(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function PB(t){if(t.mozInputSource===0&&t.isTrusted)return!0;const e=/Android/i;return(e.test(CB())||e.test(kB()))&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function NB(t){return t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType!=="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0}function jB(){return/apple/i.test(navigator.vendor)}function Bd(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function OB(t){return"nativeEvent"in t}function LB(t){return t.matches("html,body")}function Kt(t){return(t==null?void 0:t.ownerDocument)||document}function Mp(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function KA(t){return"composedPath"in t?t.composedPath()[0]:t.target}const DB="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function QA(t){return Ut(t)&&t.matches(DB)}function $p(t){t.preventDefault(),t.stopPropagation()}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var MB=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ug=MB.join(","),GA=typeof Element>"u",zl=GA?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,zd=!GA&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Wd=function t(e,n){var r;n===void 0&&(n=!0);var s=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=s===""||s==="true",o=i||n&&e&&t(e.parentNode);return o},$B=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},FB=function(e,n,r){if(Wd(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(Ug));return n&&zl.call(e,Ug)&&s.unshift(e),s=s.filter(r),s},VB=function t(e,n,r){for(var s=[],i=Array.from(e);i.length;){var o=i.shift();if(!Wd(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?s.push.apply(s,c):s.push({scopeParent:o,candidates:c})}else{var d=zl.call(o,Ug);d&&r.filter(o)&&(n||!e.includes(o))&&s.push(o);var f=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),p=!Wd(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(f&&p){var m=t(f===!0?o.children:f.children,!0,r);r.flatten?s.push.apply(s,m):s.push({scopeParent:o,candidates:m})}else i.unshift.apply(i,o.children)}}return s},XA=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},YA=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||$B(e))&&!XA(e)?0:e.tabIndex},UB=function(e,n){var r=YA(e);return r<0&&n&&!XA(e)?0:r},BB=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},JA=function(e){return e.tagName==="INPUT"},zB=function(e){return JA(e)&&e.type==="hidden"},WB=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},HB=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},qB=function(e){if(!e.name)return!0;var n=e.form||zd(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(e.name));else try{s=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var i=HB(s,e.form);return!i||i===e},KB=function(e){return JA(e)&&e.type==="radio"},QB=function(e){return KB(e)&&!qB(e)},GB=function(e){var n,r=e&&zd(e),s=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==e){var o,a,l;for(i=!!((o=s)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(s)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!i&&s;){var c,d,f;r=zd(s),s=(c=r)===null||c===void 0?void 0:c.host,i=!!((d=s)!==null&&d!==void 0&&(f=d.ownerDocument)!==null&&f!==void 0&&f.contains(s))}}return i},j_=function(e){var n=e.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},XB=function(e,n){var r=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=zl.call(e,"details>summary:first-of-type"),o=i?e.parentElement:e;if(zl.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var a=e;e;){var l=e.parentElement,c=zd(e);if(l&&!l.shadowRoot&&s(l)===!0)return j_(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(GB(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return j_(e);return!1},YB=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return zl.call(n,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}n=n.parentElement}return!1},JB=function(e,n){return!(n.disabled||Wd(n)||zB(n)||XB(n,e)||WB(n)||YB(n))},O_=function(e,n){return!(QB(n)||YA(n)<0||!JB(e,n))},ZB=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},ez=function t(e){var n=[],r=[];return e.forEach(function(s,i){var o=!!s.scopeParent,a=o?s.scopeParent:s,l=UB(a,o),c=o?t(s.candidates):a;l===0?o?n.push.apply(n,c):n.push(a):r.push({documentOrder:i,tabIndex:l,item:s,isScope:o,content:c})}),r.sort(BB).reduce(function(s,i){return i.isScope?s.push.apply(s,i.content):s.push(i.content),s},[]).concat(n)},ZA=function(e,n){n=n||{};var r;return n.getShadowRoot?r=VB([e],n.includeContainer,{filter:O_.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:ZB}):r=FB(e,n.includeContainer,O_.bind(null,n)),ez(r)};function Hd(){return Hd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hd.apply(this,arguments)}var on=typeof document<"u"?h.useLayoutEffect:h.useEffect;let Fp=!1,tz=0;const L_=()=>"floating-ui-"+tz++;function nz(){const[t,e]=h.useState(()=>Fp?L_():void 0);return on(()=>{t==null&&e(L_())},[]),h.useEffect(()=>{Fp||(Fp=!0)},[]),t}const rz=Qg["useId".toString()],eC=rz||nz;function sz(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(s=>s(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(s=>s!==n))||[])}}}const iz=h.createContext(null),oz=h.createContext(null),tC=()=>{var t;return((t=h.useContext(iz))==null?void 0:t.id)||null},bf=()=>h.useContext(oz);function Wl(t){return"data-floating-ui-"+t}function vr(t){const e=h.useRef(t);return on(()=>{e.current=t}),e}const D_=Wl("safe-polygon");function Vp(t,e,n){return n&&!Bd(n)?0:typeof t=="number"?t:t==null?void 0:t[e]}function az(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,events:i,elements:{domReference:o,floating:a},refs:l}=t,{enabled:c=!0,delay:d=0,handleClose:f=null,mouseOnly:p=!1,restMs:m=0,move:y=!0}=e,g=bf(),_=tC(),x=vr(f),v=vr(d),w=h.useRef(),E=h.useRef(),S=h.useRef(),b=h.useRef(),I=h.useRef(!0),T=h.useRef(!1),A=h.useRef(()=>{}),C=h.useCallback(()=>{var $;const V=($=s.current.openEvent)==null?void 0:$.type;return(V==null?void 0:V.includes("mouse"))&&V!=="mousedown"},[s]);h.useEffect(()=>{if(!c)return;function $(){clearTimeout(E.current),clearTimeout(b.current),I.current=!0}return i.on("dismiss",$),()=>{i.off("dismiss",$)}},[c,i]),h.useEffect(()=>{if(!c||!x.current||!n)return;function $(F){C()&&r(!1,F)}const V=Kt(a).documentElement;return V.addEventListener("mouseleave",$),()=>{V.removeEventListener("mouseleave",$)}},[a,n,r,c,x,s,C]);const O=h.useCallback(function($,V){V===void 0&&(V=!0);const F=Vp(v.current,"close",w.current);F&&!S.current?(clearTimeout(E.current),E.current=setTimeout(()=>r(!1,$),F)):V&&(clearTimeout(E.current),r(!1,$))},[v,r]),z=h.useCallback(()=>{A.current(),S.current=void 0},[]),N=h.useCallback(()=>{if(T.current){const $=Kt(l.floating.current).body;$.style.pointerEvents="",$.removeAttribute(D_),T.current=!1}},[l]);return h.useEffect(()=>{if(!c)return;function $(){return s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1}function V(R){if(clearTimeout(E.current),I.current=!1,p&&!Bd(w.current)||m>0&&Vp(v.current,"open")===0)return;const M=Vp(v.current,"open",w.current);M?E.current=setTimeout(()=>{r(!0,R)},M):r(!0,R)}function F(R){if($())return;A.current();const M=Kt(a);if(clearTimeout(b.current),x.current){n||clearTimeout(E.current),S.current=x.current({...t,tree:g,x:R.clientX,y:R.clientY,onClose(){N(),z(),O(R)}});const k=S.current;M.addEventListener("mousemove",k),A.current=()=>{M.removeEventListener("mousemove",k)};return}(w.current==="touch"?!Ht(a,R.relatedTarget):!0)&&O(R)}function Q(R){$()||x.current==null||x.current({...t,tree:g,x:R.clientX,y:R.clientY,onClose(){N(),z(),O(R)}})(R)}if(Ke(o)){const R=o;return n&&R.addEventListener("mouseleave",Q),a==null||a.addEventListener("mouseleave",Q),y&&R.addEventListener("mousemove",V,{once:!0}),R.addEventListener("mouseenter",V),R.addEventListener("mouseleave",F),()=>{n&&R.removeEventListener("mouseleave",Q),a==null||a.removeEventListener("mouseleave",Q),y&&R.removeEventListener("mousemove",V),R.removeEventListener("mouseenter",V),R.removeEventListener("mouseleave",F)}}},[o,a,c,t,p,m,y,O,z,N,r,n,g,v,x,s]),on(()=>{var $;if(c&&n&&($=x.current)!=null&&$.__options.blockPointerEvents&&C()){const Q=Kt(a).body;if(Q.setAttribute(D_,""),Q.style.pointerEvents="none",T.current=!0,Ke(o)&&a){var V,F;const R=o,M=g==null||(V=g.nodesRef.current.find(B=>B.id===_))==null||(F=V.context)==null?void 0:F.elements.floating;return M&&(M.style.pointerEvents=""),R.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{R.style.pointerEvents="",a.style.pointerEvents=""}}}},[c,n,_,a,o,g,x,s,C]),on(()=>{n||(w.current=void 0,z(),N())},[n,z,N]),h.useEffect(()=>()=>{z(),clearTimeout(E.current),clearTimeout(b.current),N()},[c,o,z,N]),h.useMemo(()=>{if(!c)return{};function $(V){w.current=V.pointerType}return{reference:{onPointerDown:$,onPointerEnter:$,onMouseMove(V){n||m===0||(clearTimeout(b.current),b.current=setTimeout(()=>{I.current||r(!0,V.nativeEvent)},m))}},floating:{onMouseEnter(){clearTimeout(E.current)},onMouseLeave(V){i.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),O(V.nativeEvent,!1)}}}},[i,c,m,n,r,O])}let M_=0;function Us(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:s=!1}=e;r&&cancelAnimationFrame(M_);const i=()=>t==null?void 0:t.focus({preventScroll:n});s?i():M_=requestAnimationFrame(i)}function lz(t,e){var n;let r=[],s=(n=t.find(i=>i.id===e))==null?void 0:n.parentId;for(;s;){const i=t.find(o=>o.id===s);s=i==null?void 0:i.parentId,i&&(r=r.concat(i))}return r}function el(t,e){let n=t.filter(s=>{var i;return s.parentId===e&&((i=s.context)==null?void 0:i.open)}),r=n;for(;r.length;)r=t.filter(s=>{var i;return(i=r)==null?void 0:i.some(o=>{var a;return s.parentId===o.id&&((a=s.context)==null?void 0:a.open)})}),n=n.concat(r);return n}let Di=new WeakMap,iu=new WeakSet,ou={},Up=0;const cz=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,nC=t=>t&&(t.host||nC(t.parentNode)),uz=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=nC(n);return t.contains(r)?r:null}).filter(n=>n!=null);function dz(t,e,n,r){const s="data-floating-ui-inert",i=r?"inert":n?"aria-hidden":null,o=uz(e,t),a=new Set,l=new Set(o),c=[];ou[s]||(ou[s]=new WeakMap);const d=ou[s];o.forEach(f),p(e),a.clear();function f(m){!m||a.has(m)||(a.add(m),m.parentNode&&f(m.parentNode))}function p(m){!m||l.has(m)||Array.prototype.forEach.call(m.children,y=>{if(a.has(y))p(y);else{const g=i?y.getAttribute(i):null,_=g!==null&&g!=="false",x=(Di.get(y)||0)+1,v=(d.get(y)||0)+1;Di.set(y,x),d.set(y,v),c.push(y),x===1&&_&&iu.add(y),v===1&&y.setAttribute(s,""),!_&&i&&y.setAttribute(i,"true")}})}return Up++,()=>{c.forEach(m=>{const y=(Di.get(m)||0)-1,g=(d.get(m)||0)-1;Di.set(m,y),d.set(m,g),y||(!iu.has(m)&&i&&m.removeAttribute(i),iu.delete(m)),g||m.removeAttribute(s)}),Up--,Up||(Di=new WeakMap,Di=new WeakMap,iu=new WeakSet,ou={})}}function $_(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=Kt(t[0]).body;return dz(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const rC=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function sC(t,e){const n=ZA(t,rC());e==="prev"&&n.reverse();const r=n.indexOf(Vi(Kt(t)));return n.slice(r+1)[0]}function hz(){return sC(document.body,"next")}function fz(){return sC(document.body,"prev")}function F_(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!Ht(n,r)}const iC={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let pz;function V_(t){t.key==="Tab"&&(t.target,clearTimeout(pz))}const U_=h.forwardRef(function(e,n){const[r,s]=h.useState();on(()=>(jB()&&s("button"),document.addEventListener("keydown",V_),()=>{document.removeEventListener("keydown",V_)}),[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Wl("focus-guard")]:"",style:iC};return h.createElement("span",Hd({},e,i))}),mz=h.createContext(null),gz=()=>h.useContext(mz),yz=h.forwardRef(function(e,n){return h.createElement("button",Hd({},e,{type:"button",ref:n,tabIndex:-1,style:iC}))});function oC(t){const{context:e,children:n,disabled:r=!1,order:s=["content"],guards:i=!0,initialFocus:o=0,returnFocus:a=!0,modal:l=!0,visuallyHiddenDismiss:c=!1,closeOnFocusOut:d=!0}=t,{open:f,refs:p,nodeId:m,onOpenChange:y,events:g,dataRef:_,elements:{domReference:x,floating:v}}=e,w=cz()?i:!0,E=vr(s),S=vr(o),b=vr(a),I=bf(),T=gz(),A=typeof o=="number"&&o<0,C=h.useRef(null),O=h.useRef(null),z=h.useRef(!1),N=h.useRef(null),$=h.useRef(!1),V=T!=null,F=x&&x.getAttribute("role")==="combobox"&&QA(x),Q=h.useCallback(function(k){return k===void 0&&(k=v),k?ZA(k,rC()):[]},[v]),R=h.useCallback(k=>{const W=Q(k);return E.current.map(X=>x&&X==="reference"?x:v&&X==="floating"?v:W).filter(Boolean).flat()},[x,v,E,Q]);h.useEffect(()=>{if(r||!l)return;function k(X){if(X.key==="Tab"){Ht(v,Vi(Kt(v)))&&Q().length===0&&!F&&$p(X);const ee=R(),Pe=KA(X);E.current[0]==="reference"&&Pe===x&&($p(X),X.shiftKey?Us(ee[ee.length-1]):Us(ee[1])),E.current[1]==="floating"&&Pe===v&&X.shiftKey&&($p(X),Us(ee[0]))}}const W=Kt(v);return W.addEventListener("keydown",k),()=>{W.removeEventListener("keydown",k)}},[r,x,v,l,E,p,F,Q,R]),h.useEffect(()=>{if(r||!d)return;function k(){$.current=!0,setTimeout(()=>{$.current=!1})}function W(X){const ee=X.relatedTarget;queueMicrotask(()=>{const Pe=!(Ht(x,ee)||Ht(v,ee)||Ht(ee,v)||Ht(T==null?void 0:T.portalNode,ee)||ee!=null&&ee.hasAttribute(Wl("focus-guard"))||I&&(el(I.nodesRef.current,m).find(le=>{var Ve,ht;return Ht((Ve=le.context)==null?void 0:Ve.elements.floating,ee)||Ht((ht=le.context)==null?void 0:ht.elements.domReference,ee)})||lz(I.nodesRef.current,m).find(le=>{var Ve,ht;return((Ve=le.context)==null?void 0:Ve.elements.floating)===ee||((ht=le.context)==null?void 0:ht.elements.domReference)===ee})));ee&&Pe&&!$.current&&ee!==N.current&&(z.current=!0,y(!1,X))})}if(v&&Ut(x))return x.addEventListener("focusout",W),x.addEventListener("pointerdown",k),!l&&v.addEventListener("focusout",W),()=>{x.removeEventListener("focusout",W),x.removeEventListener("pointerdown",k),!l&&v.removeEventListener("focusout",W)}},[r,x,v,l,m,I,T,y,d]),h.useEffect(()=>{var k;if(r)return;const W=Array.from((T==null||(k=T.portalNode)==null?void 0:k.querySelectorAll("["+Wl("portal")+"]"))||[]);if(v){const X=[v,...W,C.current,O.current,E.current.includes("reference")||F?x:null].filter(Pe=>Pe!=null),ee=l?$_(X,w,!w):$_(X);return()=>{ee()}}},[r,x,v,l,E,T,F,w]),on(()=>{if(r||!v)return;const k=Kt(v),W=Vi(k);queueMicrotask(()=>{const X=R(v),ee=S.current,Pe=(typeof ee=="number"?X[ee]:ee.current)||v,le=Ht(v,W);!A&&!le&&f&&Us(Pe,{preventScroll:Pe===v})})},[r,f,v,A,R,S]),on(()=>{if(r||!v)return;let k=!1;const W=Kt(v),X=Vi(W),ee=_.current;N.current=X;function Pe(le){if(le.type==="escapeKey"&&p.domReference.current&&(N.current=p.domReference.current),["referencePress","escapeKey"].includes(le.type))return;const Ve=le.data.returnFocus;typeof Ve=="object"?(z.current=!1,k=Ve.preventScroll):z.current=!Ve}return g.on("dismiss",Pe),()=>{g.off("dismiss",Pe);const le=Vi(W);(Ht(v,le)||I&&el(I.nodesRef.current,m).some(ht=>{var $r;return Ht(($r=ht.context)==null?void 0:$r.elements.floating,le)})||ee.openEvent&&["click","mousedown"].includes(ee.openEvent.type))&&p.domReference.current&&(N.current=p.domReference.current),b.current&&Ut(N.current)&&!z.current&&Us(N.current,{cancelPrevious:!1,preventScroll:k})}},[r,v,b,_,p,g,I,m]),on(()=>{if(!(r||!T))return T.setFocusManagerState({modal:l,closeOnFocusOut:d,open:f,onOpenChange:y,refs:p}),()=>{T.setFocusManagerState(null)}},[r,T,l,f,y,p,d]),on(()=>{if(!r&&v&&typeof MutationObserver=="function"){const k=()=>{const X=v.getAttribute("tabindex");E.current.includes("floating")||Vi(Kt(v))!==p.domReference.current&&Q().length===0?X!=="0"&&v.setAttribute("tabindex","0"):X!=="-1"&&v.setAttribute("tabindex","-1")};k();const W=new MutationObserver(k);return W.observe(v,{childList:!0,subtree:!0,attributes:!0}),()=>{W.disconnect()}}},[r,v,p,E,Q]);function M(k){return r||!c||!l?null:h.createElement(yz,{ref:k==="start"?C:O,onClick:W=>y(!1,W.nativeEvent)},typeof c=="string"?c:"Dismiss")}const B=!r&&w&&!F&&(V||l);return h.createElement(h.Fragment,null,B&&h.createElement(U_,{"data-type":"inside",ref:T==null?void 0:T.beforeInsideRef,onFocus:k=>{if(l){const X=R();Us(s[0]==="reference"?X[0]:X[X.length-1])}else if(T!=null&&T.preserveTabOrder&&T.portalNode)if(z.current=!1,F_(k,T.portalNode)){const X=hz()||x;X==null||X.focus()}else{var W;(W=T.beforeOutsideRef.current)==null||W.focus()}}}),!F&&M("start"),n,M("end"),B&&h.createElement(U_,{"data-type":"inside",ref:T==null?void 0:T.afterInsideRef,onFocus:k=>{if(l)Us(R()[0]);else if(T!=null&&T.preserveTabOrder&&T.portalNode)if(d&&(z.current=!0),F_(k,T.portalNode)){const X=fz()||x;X==null||X.focus()}else{var W;(W=T.afterOutsideRef.current)==null||W.focus()}}}))}function B_(t){return Ut(t.target)&&t.target.tagName==="BUTTON"}function z_(t){return QA(t)}function vz(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:s,elements:{domReference:i}}=t,{enabled:o=!0,event:a="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:d=!0}=e,f=h.useRef(),p=h.useRef(!1);return h.useMemo(()=>o?{reference:{onPointerDown(m){f.current=m.pointerType},onMouseDown(m){m.button===0&&(Bd(f.current,!0)&&c||a!=="click"&&(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="mousedown")?r(!1,m.nativeEvent):(m.preventDefault(),r(!0,m.nativeEvent))))},onClick(m){if(a==="mousedown"&&f.current){f.current=void 0;return}Bd(f.current,!0)&&c||(n&&l&&(!s.current.openEvent||s.current.openEvent.type==="click")?r(!1,m.nativeEvent):r(!0,m.nativeEvent))},onKeyDown(m){f.current=void 0,!(m.defaultPrevented||!d||B_(m))&&(m.key===" "&&!z_(i)&&(m.preventDefault(),p.current=!0),m.key==="Enter"&&r(!(n&&l),m.nativeEvent))},onKeyUp(m){m.defaultPrevented||!d||B_(m)||z_(i)||m.key===" "&&p.current&&(p.current=!1,r(!(n&&l),m.nativeEvent))}}}:{},[o,s,a,c,d,i,l,n,r])}const xz=Qg["useInsertionEffect".toString()],wz=xz||(t=>t());function Ou(t){const e=h.useRef(()=>{});return wz(()=>{e.current=t}),h.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}const _z={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Ez={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Sz=t=>{var e,n;return{escapeKeyBubbles:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePressBubbles:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function aC(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:s,nodeId:i,elements:{reference:o,domReference:a,floating:l},dataRef:c}=t,{enabled:d=!0,escapeKey:f=!0,outsidePress:p=!0,outsidePressEvent:m="pointerdown",referencePress:y=!1,referencePressEvent:g="pointerdown",ancestorScroll:_=!1,bubbles:x}=e,v=bf(),w=tC()!=null,E=Ou(typeof p=="function"?p:()=>!1),S=typeof p=="function"?E:p,b=h.useRef(!1),{escapeKeyBubbles:I,outsidePressBubbles:T}=Sz(x),A=Ou(O=>{if(!n||!d||!f||O.key!=="Escape")return;const z=v?el(v.nodesRef.current,i):[];if(!I&&(O.stopPropagation(),z.length>0)){let N=!0;if(z.forEach($=>{var V;if((V=$.context)!=null&&V.open&&!$.context.dataRef.current.__escapeKeyBubbles){N=!1;return}}),!N)return}s.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1,OB(O)?O.nativeEvent:O)}),C=Ou(O=>{const z=b.current;if(b.current=!1,z||typeof S=="function"&&!S(O))return;const N=KA(O),$="["+Wl("inert")+"]",V=Kt(l).querySelectorAll($);let F=Ke(N)?N:null;for(;F&&!Ic(F);){const M=wi(F);if(M===Kt(l).body||!Ke(M))break;F=M}if(V.length&&Ke(N)&&!LB(N)&&!Ht(N,l)&&Array.from(V).every(M=>!Ht(F,M)))return;if(Ut(N)&&l){const M=N.clientWidth>0&&N.scrollWidth>N.clientWidth,B=N.clientHeight>0&&N.scrollHeight>N.clientHeight;let k=B&&O.offsetX>N.clientWidth;if(B&&hn(N).direction==="rtl"&&(k=O.offsetX<=N.offsetWidth-N.clientWidth),k||M&&O.offsetY>N.clientHeight)return}const Q=v&&el(v.nodesRef.current,i).some(M=>{var B;return Mp(O,(B=M.context)==null?void 0:B.elements.floating)});if(Mp(O,l)||Mp(O,a)||Q)return;const R=v?el(v.nodesRef.current,i):[];if(R.length>0){let M=!0;if(R.forEach(B=>{var k;if((k=B.context)!=null&&k.open&&!B.context.dataRef.current.__outsidePressBubbles){M=!1;return}}),!M)return}s.emit("dismiss",{type:"outsidePress",data:{returnFocus:w?{preventScroll:!0}:PB(O)||NB(O)}}),r(!1,O)});return h.useEffect(()=>{if(!n||!d)return;c.current.__escapeKeyBubbles=I,c.current.__outsidePressBubbles=T;function O($){r(!1,$)}const z=Kt(l);f&&z.addEventListener("keydown",A),S&&z.addEventListener(m,C);let N=[];return _&&(Ke(a)&&(N=oi(a)),Ke(l)&&(N=N.concat(oi(l))),!Ke(o)&&o&&o.contextElement&&(N=N.concat(oi(o.contextElement)))),N=N.filter($=>{var V;return $!==((V=z.defaultView)==null?void 0:V.visualViewport)}),N.forEach($=>{$.addEventListener("scroll",O,{passive:!0})}),()=>{f&&z.removeEventListener("keydown",A),S&&z.removeEventListener(m,C),N.forEach($=>{$.removeEventListener("scroll",O)})}},[c,l,a,o,f,S,m,n,r,_,d,I,T,A,C]),h.useEffect(()=>{b.current=!1},[S,m]),h.useMemo(()=>d?{reference:{onKeyDown:A,[_z[g]]:O=>{y&&(s.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1,O.nativeEvent))}},floating:{onKeyDown:A,[Ez[m]]:()=>{b.current=!0}}}:{},[d,s,y,m,g,r,A])}function lC(t){var e;t===void 0&&(t={});const{open:n=!1,onOpenChange:r,nodeId:s}=t,[i,o]=h.useState(null),a=((e=t.elements)==null?void 0:e.reference)||i,l=AB(t),c=bf(),d=Ou((E,S)=>{E&&(p.current.openEvent=S),r==null||r(E,S)}),f=h.useRef(null),p=h.useRef({}),m=h.useState(()=>sz())[0],y=eC(),g=h.useCallback(E=>{const S=Ke(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;l.refs.setReference(S)},[l.refs]),_=h.useCallback(E=>{(Ke(E)||E===null)&&(f.current=E,o(E)),(Ke(l.refs.reference.current)||l.refs.reference.current===null||E!==null&&!Ke(E))&&l.refs.setReference(E)},[l.refs]),x=h.useMemo(()=>({...l.refs,setReference:_,setPositionReference:g,domReference:f}),[l.refs,_,g]),v=h.useMemo(()=>({...l.elements,domReference:a}),[l.elements,a]),w=h.useMemo(()=>({...l,refs:x,elements:v,dataRef:p,nodeId:s,floatingId:y,events:m,open:n,onOpenChange:d}),[l,s,y,m,n,d,x,v]);return on(()=>{const E=c==null?void 0:c.nodesRef.current.find(S=>S.id===s);E&&(E.context=w)}),h.useMemo(()=>({...l,context:w,refs:x,elements:v}),[l,x,v,w])}function Bp(t,e,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...t,...e.map(s=>s?s[n]:null).concat(t).reduce((s,i)=>(i&&Object.entries(i).forEach(o=>{let[a,l]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof l=="function"){var c;(c=r.get(a))==null||c.push(l),s[a]=function(){for(var d,f=arguments.length,p=new Array(f),m=0;m<f;m++)p[m]=arguments[m];return(d=r.get(a))==null?void 0:d.map(y=>y(...p)).find(y=>y!==void 0)}}}else s[a]=l}),s),{})}}function cC(t){t===void 0&&(t=[]);const e=t,n=h.useCallback(i=>Bp(i,t,"reference"),e),r=h.useCallback(i=>Bp(i,t,"floating"),e),s=h.useCallback(i=>Bp(i,t,"item"),t.map(i=>i==null?void 0:i.item));return h.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:s}),[n,r,s])}function uC(t,e){e===void 0&&(e={});const{open:n,floatingId:r}=t,{enabled:s=!0,role:i="dialog"}=e,o=eC();return h.useMemo(()=>{const a={id:r,role:i};return s?i==="tooltip"?{reference:{"aria-describedby":n?r:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?r:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:o}},floating:{...a,...i==="menu"&&{"aria-labelledby":o}}}:{}},[s,i,n,r,o])}const W_=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function Mi(t,e){return typeof t=="function"?t(e):t}function Tz(t,e){const[n,r]=h.useState(t);return t&&!n&&r(!0),h.useEffect(()=>{if(!t){const s=setTimeout(()=>r(!1),e);return()=>clearTimeout(s)}},[t,e]),n}function dC(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:s=250}=e,o=(typeof s=="number"?s:s.close)||0,[a,l]=h.useState(!1),[c,d]=h.useState("unmounted"),f=Tz(n,o);return on(()=>{a&&!f&&d("unmounted")},[a,f]),on(()=>{if(r)if(n){d("initial");const p=requestAnimationFrame(()=>{d("open")});return()=>{cancelAnimationFrame(p)}}else l(!0),d("close")},[n,r]),{isMounted:f,status:c}}function bz(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:s,common:i,duration:o=250}=e,a=t.placement,l=a.split("-")[0],c=h.useMemo(()=>({side:l,placement:a}),[l,a]),d=typeof o=="number",f=(d?o:o.open)||0,p=(d?o:o.close)||0,[m,y]=h.useState(()=>({...Mi(i,c),...Mi(n,c)})),{isMounted:g,status:_}=dC(t,{duration:o}),x=vr(n),v=vr(r),w=vr(s),E=vr(i);return on(()=>{const S=Mi(x.current,c),b=Mi(w.current,c),I=Mi(E.current,c),T=Mi(v.current,c)||Object.keys(S).reduce((A,C)=>(A[C]="",A),{});if(_==="initial"&&y(A=>({transitionProperty:A.transitionProperty,...I,...S})),_==="open"&&y({transitionProperty:Object.keys(T).map(W_).join(","),transitionDuration:f+"ms",...I,...T}),_==="close"){const A=b||S;y({transitionProperty:Object.keys(A).map(W_).join(","),transitionDuration:p+"ms",...I,...A})}},[p,w,x,v,E,f,_,c]),{isMounted:g,styles:m}}function Iz({placement:t="bottom"}={}){const[e,n]=h.useState(!1),{context:r,floatingStyles:s,refs:i}=lC({placement:t,open:e,onOpenChange:n,whileElementsMounted:HA,middleware:[MA(10)]}),o=az(r,{move:!1}),a=aC(r),l=uC(r,{role:"tooltip"}),{getFloatingProps:c,getReferenceProps:d}=cC([o,a,l]);return{isOpen:e,setIsOpen:n,getFloatingProps:c,getReferenceProps:d,floatingStyles:s,refs:i,context:r}}const hC=h.createContext(null),fC=()=>{const t=h.useContext(hC);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function xo({children:t,...e}){const n=Iz({...e});return u.jsx(hC.Provider,{value:n,children:t})}function wo({children:t,...e}){const{getReferenceProps:n,refs:r,isOpen:s}=fC();return u.jsx("button",{ref:r.setReference,"data-state":s?"open":"closed",...n(e),children:t})}function _o({children:t,className:e,...n}){const{theme:r}=Z(),{context:s,refs:i,getFloatingProps:o,floatingStyles:a,isOpen:l}=fC(),c={container:`${r.type==="dark"?"bg-white/70 text-[#333]":"bg-black/70 text-white"}`};if(l)return u.jsx(oC,{context:s,modal:!1,children:u.jsx("div",{className:`${c.container}  text-[12px] font-semibold px-[6px] py-[3px] rounded-[4px]`,ref:i.setFloating,style:{...a},...o(n),children:t})})}function pC(t,e){h.useEffect(()=>{if(t)return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[...e])}const Wv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABnCAMAAADBqBfIAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAu5QTFRF+9t4AAAA////+tp4+9t6iWRS/fDGkm1W//35imVT///+imRT/Oah9NN25sRx/eej+91+//78i2ZT+9x7kGtV/vbeiWRS9tZ2+Nd3/fHL+96C/OWd//zz//32/vPS2rlu/vLOjWhU/e/D+9+F//rslXBX/euy/vTXl3NX/vTV+dl3/ems7s10/OGN/vfhlnBQ/Oem/OSa/OKQt5Ri8dB1/N+I/vXaoHta/eu1/vjk/fHJ/vnp/OCK/e26o39b6chyj2lR/e/BimVSiWRS7Mtz/eiqjGdR/eqv//vv/OSYjWdR4b9vzqxp/OOWk21Qi2ZRnXlZ/vnnpoJcv5xl3bxumnNP/OKUimRSimVSkGlRm3ZZimRSq4del3BP1LJrmnJPzKppnXVO2LZtroZMt45Mj2hRqH9MrIJKmXJPqIRdrIhelG1Qn3dPxaNms49hqoJLlG1Qm3NPupFJoXlOnXZPnHVPlG5QlW5QkWtRjmhRjGZSi2ZSn3dOmHFPjWdSnXVOtZJhoXhO/e6948FwvZpk/OGPmXJQqoJJu5djrodFvpVIj2hRl3BPj2lRjGdRsohLkWpRm3NP////jWdRw5lGqIFNpHxPlm9QlG1Qn3dPl3BPsYhNx6Rn0K5qsY5gmHBP//vxkWtR////////zqNJ////////s4pIkGpRl3BQ///+pn1M////ropfmHFQpn5PjmhRmnNPonpOm3VOl3BQxp9JxZlLkmxRwp9lk2xRs4lK////lnBQwplJnXZPkmtQzLqvkmtQ////lW9Q9/Tx+vj2sJN74s+lkmxQ6+Xjo4Rx2c3EspmN2rt4////5sqFwa6k////xZtD5dfDoXhKlnRl////uaCQ+/jy////zKBH////totJ////////4MeV////////1Kc++vfznHdYu5RFn3hOr4dLnXZP8ezp////////vpVD////////mnNP////l3BQkWtRmXJPpH1Np39Q////rINMmnROoHhQyC8s0wAAAPp0Uk5T/wD////3///////9//////////////r///////////////////////////////9o/////////////////////7//4u7//9X////K////iN///////0P/8uyf/+j/Q/8Y/x3/AwKuBg1O//9xDP//C4Q1BRMuK3hWirnn2idLzxf/Cf////86A/8CA7RSqNAIm0v5xQEVFmJqEl0E////WP+kBVcBf7wCkT0VEeP/XgujPCBVfwEClf+OD8pLBTqrwkqTJsneoApf///h6P8d///rAv8E66f//4sCKxNpw/+i1wHWXwIxCyf/sTQKDOoh9G7EZC4NkhEsBY8dBX0AAAe/SURBVHic7ZpnWBNJGMd3E0IIoYQQktACoUZ6C6GDdFEBkd6kSrFixY7KoWfvXRTLnd07z16v9957P73e77z7drshOxOyk82mPPfcPY//j+/svr+Zd2benbIY/i8Iuwf5P0Pe/3Duw0v2REf/dqCh59z3tofcmRO9fkOVUCzhBwergoP5SoE0e2tvZ/Msm0Gubh4qkSo1fU3luQnOMrlc5pwQ4dJyuVslzFk67/bnNoDM6GznSbqaMsMwupzL+1WCkt7FbdZB7uzKF2r2R3ARhGHJXeL5VWt7LlgO2T1lIX8w0yhAp7BxGYKs45Mtg7RGZ0smJphCkOKOrZdmLbYA0jaQJelzZoPQyi9D2rvbXMjymdIyk4EaGTT+ogbzIE8USZqM9zZaCfWC81PNgJypLss1E0E2plG5dQdbyOR54j7UtDAtl9KSAXaQN28JG80NFSXnripUx9AgJx/it1iIICSP550xDZm8QOJiOYPomNXSR7aZgMyo4a+0hkFQJvLWMUO2bVJa1Q5S3D7ebSbI3l3KRmsZRL+czv6aAXKdZ/YURElWu2GjUciyutM2QBDK5F9ZZQTyd3sp+4zILD/pASOQKWKrOx1osHo3ErKjOt5mDCxCdWwVAtJaY7NgkfLjVSAgAzw/GzIwbkbRGhqkrSjDlgwiIyuv0yA94nLbQrjTi84aQCZnddtiGuorVzDfANLDG2tjBoZ1FelBrn37+NFH3/GujFQH2tkSMlYwF0I4Orn5pMbZEiIvvQIhP3OAxqAeTk8qyItxih0fF+kObHZs2jyubjsK4o16FpS6qYGtYJTC398zxV6ngNFarUgPCXcdo6YqkCDsBJAfIcQJBXEDxZHAZs9hkENiuncaSdK0A8gpWJyHgjiA4vuALYUJQspXUeCFXV54g4J8BotC2EI8TUEIudm/IlhMQT6G9nQUxAcB8WcB4XDeffVLCvI2tNqjIIWguBIBCXClFBOeHqBI9nXUxzz5sg5yFNoSUZAJoHg8sCmAzWCs2MUVJLrpUa79MAw5DE2pKIgHKIbTCELoo17kHaXXmj8PaSEfbAEWBxQkFOFwFKJ1ehi9cbHlOy3kxGvQFIh4BQ5XGBoIjkS8gYmSocv3tJBnnoIWVL3SQSmcRhCCqhaGOcGAPaCFdLwAIeG6h9xFXuq0yMpYp5jwEBgaOI0Sgc0dCVE7GEBmvwghCqe8kPQAT0ViVGqhr/4o0SqdDkH24gjIp1rIpLdg2xwdOQyC0wiMuEI0JBb6OTwMyfmGybOeFHRIMhoCh/ipEzrIGywhHnRIKJJRCSP90fBknFT9CWOQoFLBpyqKMiETUVoqeOWLQ8OQ2XUv+SB9Et3qE+ShsAfjtVBEg6DydhxMRM89rctdHdn76UnVN3lUQFJMbBrp1psy+nhRfsBko2cV9xBY5YPPF+sgN/L3jdGrfGpoSlJMZZoX/IoHgjK1IcTNYMLbqQs8YOw94vi/UOuuBfF2ED5BhBnKzldX5gg+KFRAYNsIicaH+x+E1XWzF8kEnRTkUhk3ALYEsSwCPeBtCHHwTElJ8STkrwiNCvLl6CGivN2xXOkcChKtkkXCGRpAh4AqFFCWVA6zHJPzyIiUVy+jIAPKCDuYjA7Sl1SutAqYgES5DodxX/5GCnJX6IfpdX0sDaKm4gCmXpBxgM+oJGo0cOuHwIL7Qkk/Zge/5AoaxJ2qeDIzxDHIPyRWDfOyLDgaruqHNBgWDkaeQxqNMpqqJWVI9FB4BqxIKggnFrDD8h4TpzZM+y5wSYTjZ8QyTAQrt4IGiaWqSrnxErFZDE+rngUhzTl+er3L8aVNFRGZ8ApDV+ShP1HGpFmvtwlqyxokAg+bEk57PNkjKTbQPAKGOQsO6O+05ksSiKaA/FzoZfi8Rbujpuzd+pCTvHFEU8BHwjHJEp+Gkms2XRyxZ1xfS+xL49yM94oFGrGdI3VcSp6rwIyPXN6bqe78r0ZC9i7oDiMGJuh7H/RyyhzlCg232HiFmDx7BMPYgz4hzVV8/lRDyJqtGeRpgXYh55CC3KCaJxflEtwQgjdIyeOCNCIV+o+3xXa+K7+VDmmrqSWPomI8K02+z0booyi8uWoixnKDblrOtTWtKAg+T2zWjQmj+nK240jI8rUa2x10zsfREGK9Omib86hc/jFjR7Y4vo5MYdZLXpo/8kpoBOTIFKUV1xqAMZ3xGB3fO2TdxYZW8bybOBMEX97Ot5ISNo23B2eG4B2/WknpFx540BQEv7qWb8W5qryfF23oEXVxNvWW5ZcosnredVo70FeAxcJ+y64AMzXZFXR/6MvM1meruiy4zOQ2SoqaUQwj17K/L5K0mNsY50Fp73KkN2MXzDtmCrsizGKMU5U8dj/amfH7+Iqlyn7W+ZK7soy36a4xVwyX/n/sWhg8UcaKMbZbnNXTatQT4+8LHb11ktW5phKz3K9MuKECMXDZQXB8WfFCZZcfQ3O4EdNqhUWbZzB6MflLyawl7VXisn2ZiO4JSyhfrRIuKj53xIQPFj/HvN68c0GOOLj+cotLglxXf1nuyv2rNXxhyaWGsyYdsP3NZ81fO2s21PEEAkmwSkX+5SOsKskq7txOu6+2BkJq1uyfbq6Lnjdz5vkpOzfPae64yPrN/9yvV/cgOP4PsP50Fs+e30kAAAAASUVORK5CYII=";function Rz({vinylRef:t}){const{playStatus:{isPlaying:e}}=K(Wt);h.useEffect(()=>{const n=t.current;n&&(e?n.style.animationPlayState="running":n.style.animationPlayState="paused")},[e])}function Az({isOpenFullScreen:t,admin:e}){const n=h.useRef(null),{currentSong:r}=K(ge);Rz({vinylRef:n});const s={songInfoWrapper:`${e?"w-1/4":"w-1/4 "}`,songInfoChild:"flex flex-row items-center h-full origin-center"};return u.jsx("div",{className:`${s.songInfoWrapper}  ${t?"hidden":""}`,children:u.jsxs("div",{className:`${s.songInfoChild} ${t?"hidden":""}`,children:[u.jsx("div",{className:e?"w-[36px]":"w-[46px]",children:u.jsx("img",{ref:n,src:r.image_url||Wv,className:"rounded-full w-full animate-[spin_8s_linear_infinite]"})}),u.jsxs("div",{className:"ml-[10px] flex-grow",children:[u.jsx("div",{className:"h-[24px] w-full mask-image-horizontal",children:u.jsx(qd,{autoScroll:!0,classNames:"text-[18px] font-[500]",label:r.name||"name"})}),u.jsx("div",{className:"h-[20px] w-full mask-image-horizontal",children:u.jsx(qd,{autoScroll:!0,classNames:"text-[14px] opacity-60",label:r.singer||"singer"})})]})]})})}function Cz({idle:t,audioEle:e,admin:n,isOpenFullScreen:r,setIsOpenFullScreen:s,isOpenSongQueue:i,setIsOpenSongQueue:o}){const{theme:a}=Z(),{currentSong:l}=K(ge),{playStatus:{isPlaying:c,isWaiting:d}}=K(Wt),f=h.useRef(),p=h.useRef(null),m=h.useRef(null),y=mn(),{handleSetVolume:g,isMute:_,handleMute:x}=J7(f,m,e);pC(()=>{var b;f.current=(b=p.current)==null?void 0:b.offsetWidth},[]);const w=h.useMemo(()=>y.pathname.includes("edit"),[y]),E=()=>{i&&o(!1),s(!0)};h.useEffect(()=>{var b;f.current=(b=p.current)==null?void 0:b.offsetWidth},[r]);const S={before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]",wrapper:`border-${a.alpha} fixed bottom-0 w-full border-t transition-transform z-50 px-10 ${n?"h-[60px]":"h-[90px]"}`,container:"flex flex-row gap-[10px] h-full items-stretch",controlWrapper:"flex max-w-[450px] flex-grow",controlWrapperChild_1:`${r?"max-w-[600px] flex-col-reverse pb-[10px]":"flex-col justify-center"}`,controlWrapperChild_2:`${!l.song_url&&"pointer-events-none opacity-60"}`,volumeWrapper:`volume-control ${n?"w-1/4":"w-1/4 "} flex items-center justify-end gap-[8px]`,volumeLineBase:"ml-3 w-full relative h-[4px] cursor-pointer rounded-3xl bg-gray-200",volumeLineCurrent:"absolute left-0 top-0 h-full w-full rounded-l-full",blurBg:`bg-opacity-[0.8] backdrop-blur-[15px] z-[-1] absolute inset-0 ${a.bottom_player_bg}`};return u.jsxs("div",{className:`${S.wrapper} ${r&&"border-transparent"} ${w&&"translate-y-[100%] "} bg-transparent`,children:[u.jsx("div",{className:`${S.blurBg} ${r?"opacity-0 transition-opacity delay-[.2s]":""}`}),u.jsxs("div",{className:`${S.container} ${r?"justify-center text-white":"justify-between"} ${t&&"transition-opacity duration-[.3s] opacity-0"}`,children:[u.jsx(Az,{isOpenFullScreen:r,admin:n}),u.jsx("div",{className:` ${S.controlWrapper} ${n?"":S.controlWrapperChild_1}  ${S.controlWrapperChild_2}`,children:h.useMemo(()=>u.jsx(mC,{admin:n,audioEle:e,idle:!1,isOpenFullScreen:r}),[c,r,d])}),u.jsxs("div",{className:`${S.volumeWrapper}  ${r?"hidden":""}`,children:[u.jsxs("div",{className:"flex flex-grow items-center max-w-[150px]",children:[u.jsx("button",{onClick:()=>x(),children:_?u.jsx(Xj,{className:"w-[24px]"}):u.jsx(Kj,{className:"w-[24px]"})}),u.jsx("div",{onClick:b=>g(b),ref:p,className:`${S.volumeLineBase} ${S.before}`,children:u.jsx("div",{ref:m,className:`${S.volumeLineCurrent} ${a.content_bg}`})})]}),!n&&u.jsxs(u.Fragment,{children:[u.jsxs(xo,{placement:"top",children:[u.jsx(wo,{onClick:E,className:`h-[35px] w-[35px] rounded-[99px] ${a.side_bar_bg}  ${a.content_hover_bg} p-[7px] ${l.name?"":"opacity-20 pointer-events-none"}`,children:u.jsx(Y5,{})}),u.jsx(_o,{children:"Fullscreen mode"})]}),u.jsxs(xo,{placement:"top",children:[u.jsx(wo,{onClick:()=>o(!i),className:`${a.content_hover_bg} h-[35px] w-[35px] p-[8px] rounded-[4px] ${l.name?"":"opacity-20 pointer-events-none"} ${i?a.content_bg:a.side_bar_bg}`,children:u.jsx(CT,{})}),u.jsx(_o,{children:"Queue"})]})]})]})]})]})}function kz({audioEle:t,admin:e,isOpenFullScreen:n,durationLineRef:r,timeProcessLine:s,currentTimeRef:i,remainingTimeRef:o}){const a=ke(),{user:l}=tt(),{queueSongs:c}=K(ur),{playStatus:{isPlaying:d,isRepeat:f,isShuffle:p,isCrossFade:m}}=K(Wt),{currentSong:y}=K(ge),{currentPlaylist:g}=K($s),[_,x]=h.useState(!1),[v,w]=h.useState(0),[E,S]=h.useState(0),b=h.useRef(!0),I=h.useRef(0),T=h.useRef(0),A=h.useRef(),C=h.useRef(0),O=h.useRef(0),z=h.useRef(0),N=h.useRef(!1),$=h.useRef(!0),V=h.useRef(),F=mn(),Q=h.useMemo(()=>F.pathname.includes("edit"),[F]);pC(()=>{var ae;A.current=(ae=r.current)==null?void 0:ae.offsetWidth},[n]);const M=async()=>{if(e||!l||!y.id)return;const Oe=Yn().play_history||[];let Ee=[];Oe.length&&(Ee=[...Oe],Ee.find(ca=>ca===y.id))||(Ee.push(y.id),Ee.length>5&&(Ee=Ee.slice(1)),gt("playHistory",Ee),await bn({collection:"users",data:{play_history:Ee},id:l.email,msg:">>> api: set play history"}))},B=()=>{try{if(t==null||t.play(),!l)return;$.current&&(m&&(t.volume=0),$.current=!1,S(Math.floor(Math.random()*10)))}catch{}},k=()=>{t==null||t.pause()},W=ae=>c[ae],X=()=>{a(It({isPlaying:!1})),V.current&&clearInterval(V.current)},ee=()=>{b.current=!1,a(It({isPlaying:!0,isWaiting:!1,isError:!1}))},Pe=()=>{const ae=s.current;x(!1),ae&&i.current&&o.current&&(i.current.innerText="00:00",o.current.innerText="00:00",ae.style.width="0%")},le=h.useCallback(ae=>{const Oe=ae.target;if(A.current&&T.current){const Ee=Oe.getBoundingClientRect(),Dt=s.current,ua=(ae.clientX-Ee.left)/A.current,da=Math.ceil(ua*T.current);if(t&&Dt){const ha=t.currentTime;if(C.current&&Math.abs(ha-C.current)<1&&Math.abs(da-C.current)<1){console.log("no seek");return}t.currentTime=da,C.current=da,Dt.style.width=(ua*100).toFixed(1)+"%"}}},[n,y,d]),Ve=h.useCallback(()=>{let ae=I.current+1,Oe;ae<c.length?Oe=c[ae]:(ae=0,Oe=c[0]),a(Zt({...Oe,currentIndex:ae,song_in:y.song_in}))},[y,c]),ht=h.useCallback(()=>{let ae=I.current-1,Oe;ae>=0?Oe=c[ae]:(Oe=c[c.length-1],ae=c.length-1),a(Zt({...Oe,currentIndex:ae,song_in:y.song_in}))},[y,c]),$r=ae=>{const Ee=Yn().volume||1;if(ae<=2){const Dt=ae/2*Ee;t.volume=Dt}else if(ae<O.current){t.volume!=Ee&&(t.volume=Ee);return}if(ae>=O.current){const Dt=(T.current-ae)/2*Ee;t.volume=Dt}},Vs=()=>{if(!t){console.log("auto ele is undefined when update time");return}const ae=t==null?void 0:t.currentTime,Oe=s.current;if(T.current&&ae){const Ee=ae/(T.current/100);Oe.style.width=Ee.toFixed(1)+"%"}i.current&&(i.current.innerText=No(ae)||"00:00"),m&&$r(ae)},Rc=()=>{const Oe=Yn().volume||1;if(t.volume=Oe,f==="one")return B();if(p){let Ee=I.current;for(;Ee===I.current;)Ee=Math.floor(Math.random()*c.length);const Dt=W(Ee);return a(Zt({...Dt,currentIndex:Ee,song_in:y.song_in}))}return I.current===c.length-1&&(f==="all"?N.current=!1:N.current=!0),Ve()},Ac=()=>{var Ee;if(!t)return;const ae=o.current,Oe=t.duration;if(x(!0),T.current=Oe,ae.innerText=No(Oe),A.current=(Ee=r.current)==null?void 0:Ee.offsetWidth,O.current=Oe-3,b.current||gt("current",y),N.current){N.current=!1,a(It({isWaiting:!1,isPlaying:!1}));return}if(Q||b.current){a(It({isWaiting:!1,isPlaying:!1}));const Dt=0;b.current&&Dt&&(t.currentTime=Dt,Vs()),b.current=!1;return}B()},la=()=>{w(Math.random())};return h.useEffect(()=>{if(!t){console.log("Audio element is undefined in use control");return}return t.addEventListener("error",la),t.addEventListener("pause",X),t.addEventListener("playing",ee),()=>{t.removeEventListener("error",la),t.removeEventListener("pause",X),t.removeEventListener("playing",ee)}},[]),h.useEffect(()=>{v&&y.name&&a(It({isWaiting:!1,isError:!0}))},[v]),h.useEffect(()=>{if(!t||!y.name){a(It({isWaiting:!1,isPlaying:!1}));return}return k(),a(It({isWaiting:!0,isError:!1,isPlaying:!1})),t.src=y.song_url,I.current=y.currentIndex,y.name&&(document.title=`${y.name} - ${y.singer}`),()=>{Pe(),clearInterval(V.current),$.current=!0}},[y]),h.useEffect(()=>{if(!y.name)return;let ae=`${y.name} - ${y.singer}`;!d&&g.name&&y.song_in.includes(g.id)&&(ae=`${g.name}`),document.title=ae},[d]),h.useEffect(()=>{if(t)return t==null||t.addEventListener("ended",Rc),()=>t==null?void 0:t.removeEventListener("ended",Rc)},[f,p,y.song_in,c]),h.useEffect(()=>(t.addEventListener("timeupdate",Vs),()=>t.removeEventListener("timeupdate",Vs)),[m]),h.useEffect(()=>{if(t)return Q&&d&&k(),t.addEventListener("loadedmetadata",Ac),()=>{t.removeEventListener("loadedmetadata",Ac)}},[Q,y.id,m]),h.useEffect(()=>{v&&M()},[E]),h.useEffect(()=>(z.current=t.volume,d&&(V.current=setInterval(()=>{gt("duration",t.currentTime.toFixed(1))},3e3)),()=>clearInterval(V.current)),[d]),{handleNext:Ve,handlePrevious:ht,handleSeek:le,play:B,pause:k,isLoaded:_}}function mC({audioEle:t,admin:e,isOpenFullScreen:n,className:r}){const s=ke(),{theme:i}=Z(),{queueSongs:o}=K(ur),{playStatus:{isPlaying:a,isRepeat:l,isShuffle:c,isError:d}}=K(Wt),{currentSong:f}=K(ge),p=h.useRef(null),m=h.useRef(null),y=h.useRef(null),g=h.useRef(null),{handleNext:_,handlePrevious:x,handleSeek:v,play:w,pause:E,isLoaded:S}=kz({audioEle:t,isOpenFullScreen:n,admin:e,durationLineRef:p,timeProcessLine:m,currentTimeRef:y,remainingTimeRef:g}),b=h.useCallback(()=>{a?E():w()},[a]),I=()=>{let C;switch(l){case"no":C="one";break;case"one":C="all";break;case"all":C="no";break;default:C="no"}gt("isRepeat",C),s(It({isRepeat:C}))},T=()=>{const C=!c;s(It({isShuffle:C})),gt("isShuffle",C)},A={button:`p-[5px] ${o.length<=1&&"opacity-20 pointer-events-none"}`,buttonsContainer:`w-full flex justify-between sm:justify-center items-center gap-x-[20px] ${e?"":"h-[50px]"}`,processContainer:`flex w-full flex-row items-center h-[30px] ${e?"h-full":""}`,processLineBase:"h-[4px] flex-grow relative cursor-pointer rounded-[99px] bg-gray-200 ",processLineCurrent:`absolute left-0 rounded-l-[99px] top-0 h-full ${i.content_bg}`,currentTime:"opacity-60 text-[14px] font-semibold",duration:"text-[14px] font-semibold",icon:"w-[35px] max-[350px]:w-[25px]",before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]"};return u.jsxs("div",{className:`relative h-full w-full ${r||""}`,children:[u.jsx("div",{className:`${A.buttonsContainer}`,children:!e&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{className:`relative ${A.button} ${l!=="no"&&i.content_text}`,onClick:I,children:[u.jsx(y5,{className:A.icon}),u.jsx("span",{className:"absolute font-bold text-[12px] top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ",children:f.name&&(l==="one"?"1":l==="all"?"--":"")})]}),u.jsx("button",{className:A.button,onClick:()=>x(),children:u.jsx(k5,{className:A.icon})}),u.jsx(R_,{handlePlayPause:b}),u.jsx("button",{className:`${A.button}`,onClick:()=>_(),children:u.jsx(TT,{className:A.icon})}),u.jsx("button",{className:`${A.button} ${c&&i.content_text}`,onClick:T,children:u.jsx(T5,{className:A.icon})})]})}),u.jsxs("div",{className:`${A.processContainer} ${d?"opacity-[.6] pointer-events-none":""}`,children:[u.jsx("div",{className:"w-[45px]",children:t&&u.jsx("span",{ref:y,className:`${A.currentTime}`,children:"00:00"})}),u.jsx("div",{ref:p,onClick:C=>v(C),className:`${A.processLineBase} ${!S&&"pointer-events-none"}  ${A.before}`,children:u.jsx("div",{ref:m,className:`${A.processLineCurrent}`})}),u.jsx("div",{className:"w-[46px] pl-[5px]",children:t&&u.jsx("span",{ref:g,className:A.duration,children:"00:00"})}),e&&u.jsx("div",{className:"flex items-center",children:u.jsx(R_,{handlePlayPause:b})})]}),!e&&u.jsx(rW,{isOpenFullScreen:n,cb:E,play:w,isPlaying:a})]})}function H_(t,e){const n=h.useRef(),[r,s]=h.useState(0),[i,o]=h.useState(0);return h.useEffect(()=>{r&&(n.current=setTimeout(()=>n.current=void 0,e))},[i,Bl]),h.useEffect(()=>{n.current||(t(),o(Math.random()*10))},[r]),()=>s(Math.random()*10)}function Pz({placement:t="bottom",isOpenFromParent:e,setIsOpenFromParent:n}={}){const[r,s]=h.useState(!1),{context:i,floatingStyles:o,refs:a}=lC({placement:t,open:e||r,onOpenChange:n||s,whileElementsMounted:HA,middleware:[MA(6)]}),l=vz(i),c=aC(i,{escapeKey:!1}),d=uC(i),{isMounted:f,styles:p}=bz(i,{duration:150,initial:{opacity:0,transform:"scale(0.8)"},close:{opacity:0,transform:"scale(0.8)"},open:{opacity:1,transform:"scale(1)"},common:({side:g})=>({transformOrigin:{top:"bottom",bottom:"top",left:"right",right:"left"}[g]})}),{getFloatingProps:m,getReferenceProps:y}=cC([l,c,d]);return{isOpen:e||r,setIsOpen:n||s,getFloatingProps:m,getReferenceProps:y,floatingStyles:o,refs:a,context:i,styles:p,isMounted:f}}const gC=h.createContext(null),yC=()=>{const t=h.useContext(gC);if(t==null)throw new Error("Popover components must be wrapped in <Popover />");return t};function Ei({children:t,...e}){const n=Pz({...e});return u.jsx(gC.Provider,{value:n,children:t})}function Si({children:t,className:e,asChild:n=!1,...r}){const{getReferenceProps:s,refs:i,isOpen:o}=yC();return n&&h.isValidElement(t)?h.cloneElement(t,s({ref:i.setReference,...r,...t.props,"data-state":o?"open":"closed"})):u.jsx("button",{type:"button",ref:i.setReference,"data-state":o?"open":"closed",className:`${e??""}`,...s(r),children:t})}function Ti({children:t,className:e,...n}){const{context:r,refs:s,getFloatingProps:i,floatingStyles:o,styles:a}=yC(),{isMounted:l,status:c}=dC(r);return u.jsx(u.Fragment,{children:l&&u.jsx(oC,{context:r,modal:!1,children:u.jsx("div",{ref:s.setFloating,className:`z-[20] ${e}`,style:{...o},...i(n),"data-status":c,children:u.jsx("div",{style:{...a},children:t})})})})}function vC(){const{theme:t,isOnMobile:e}=Z(),n=ke(),{playStatus:{isTimer:r,lyricSize:s,songBackground:i,songImage:o}}=K(Wt),[a,l]=h.useState(),c=()=>{l("")},d=m=>{n(It({lyricSize:m})),gt("lyricSize",m)},f=()=>{if(r)return n(It({isTimer:0}));l("")},p={disableBtn:"bg-white/10 bg-opacity-20",lyricSizeBtn:`group/text !hover:brightness-100 font-[600] h-[30px] w-[30px] sm:h-[26px] sm:w-[26px] relative ${t.content_hover_bg}`,itemContainer:"flex justify-between items-center min-h-[30px]",text:" font-[500] sm:text-[14px] text-[#ccc]"};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-[240px] sm:w-[220px]",children:u.jsxs(Ri,{variant:"default",color:"black",className:"space-y-[6px] text-white",theme:t,children:[u.jsxs("div",{className:p.itemContainer,children:[u.jsx("p",{className:p.text,children:"Lyric size"}),u.jsxs("div",{className:"flex space-x-[8px]",children:[u.jsx(Y,{onClick:()=>d("small"),variant:"circle",className:`${s==="small"?t.content_bg:p.disableBtn} ${p.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[11px]",children:"A"})}),u.jsx(Y,{onClick:()=>d("medium"),variant:"circle",className:`${s==="medium"?t.content_bg:p.disableBtn} ${p.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[13px]",children:"A"})}),u.jsx(Y,{onClick:()=>d("large"),variant:"circle",className:`${s==="large"?t.content_bg:p.disableBtn} ${p.lyricSizeBtn}`,children:u.jsx("h1",{className:"leading-[1] text-[15px]",children:"A"})})]})]}),u.jsxs("div",{className:`${p.itemContainer}`,children:[u.jsx("p",{className:p.text,children:"Song background"}),u.jsx(Nu,{size:"thin",className:"bg-white/10",active:i,cb:()=>n(I_({variant:"songBackground"}))})]}),!e&&u.jsxs("div",{className:`${p.itemContainer}`,children:[u.jsx("p",{className:p.text,children:"Song image"}),u.jsx(Nu,{size:"thin",className:"bg-white/10",active:o,cb:()=>n(I_({variant:"songImage"}))})]}),u.jsxs("div",{className:`${p.itemContainer}`,children:[u.jsx("p",{className:p.text,children:"Sleep timer"}),u.jsx(Nu,{className:"bg-white/10",size:"thin",active:!!r,cb:f})]})]})}),a&&u.jsx(yn,{classNames:"z-[999]",closeModal:c,children:u.jsx(Xv,{close:c})})]})}function Nz({isOpenFullScreen:t,setIsOpenFullScreen:e,idle:n,audioEle:r}){const s=ke(),{theme:i}=Z(),{currentSong:o}=K(ge),{queueSongs:a}=K(ur),{playStatus:{songImage:l}}=K(Wt),[c,d]=h.useState("Lyric"),f=h.useRef(null),p=h.useRef(null),m=h.useRef(null),y=en();kA({bgRef:f,currentSong:o}),z7({containerRef:p,songItemRef:m,isOpenFullScreen:t,idle:n});const g=H_(()=>v("next"),200),_=H_(()=>v("previous"),200),x=(I,T)=>{o.id!==I.id&&s(Zt({...I,currentIndex:T,song_in:o.song_in}))},v=(I="next")=>{const T=p.current;T.style.scrollBehavior="smooth",I==="next"?T.scrollLeft+=500:I==="previous"&&(T.scrollLeft-=500)},w=()=>{e(!1),setTimeout(()=>{y(`/mysongs/edit/${o.id}`)},300)},E={button:`h-[35px] w-[35px] bg-white/10 rounded-[99px] hover:scale-[1.05] transition-transform ${i.content_hover_bg}`,mainContainer:`fixed inset-0 z-50 overflow-hidden text-white bg-zinc-900
    } transition-transform duration-[.7s] linear delay-100`,bg:"-z-10 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background] duration-100",overplay:"bg-zinc-900 bg-opacity-60 bg-blend-multiply",absoluteFull:"absolute h-[100vh] w-[100vw] inset-0",headerWrapper:"py-[20px] px-[40px] w-full",header:"relative flex",headerCta:"absolute h-full flex items-center",contentContainer:"h-[calc(100%-120px)] relative overflow-hidden",songsListTab:" relative h-full no-scrollbar flex items-center flex-row overflow-auto scroll-smooth px-[calc(50%-350px/2)]",absoluteButton:`absolute top-[50%] -translate-y-[50%] p-[8px] bg-white/30 hover:bg-white hover:scale-[1.05] transition-transform rounded-full ${i.content_hover_text}`,songNameSinger:"relative text-center text-white text-[14px] opacity-80",lyricTabContainer:"px-[40px] min-[1536px]:container min-[1536px]:mx-auto min-[1536px]:px-[200px] h-full flex items-center justify-center flex-row",fadeTransition:"opacity-0 transition-opacity duration-[.3s]",before:"before:content-[''] before:w-[50px] before:h-[10px] before:absolute before:bottom-[-7px] ",logo:"animate-[spin_8s_linear_infinite] w-[46px] mr-[10px]"},S=h.useMemo(()=>{if(o.id&&a.length)return a.map((I,T)=>{const A=T===o.currentIndex;return A?u.jsx(Wp,{theme:i,ref:m,classNames:"active",hasTitle:!0,onClick:()=>x(I,T),active:A,data:I},T):u.jsx(Wp,{theme:i,idleClass:`${!A&&n?E.fadeTransition:""}`,hasTitle:!0,active:A,data:I,onClick:()=>x(I,T)},T)})},[o,a,n]),b=u.jsxs("div",{className:E.lyricTabContainer,children:[l&&u.jsx(Wp,{theme:i,active:!0,data:o}),u.jsx(wC,{className:`w-full ml-[40px] h-full ${!l&&"text-center"}`,audioEle:r,isOpenFullScreen:t&&c==="Lyric",active:c==="Lyric"})]});return u.jsxs("div",{className:`${E.mainContainer}  ${t?"translate-y-0":"translate-y-full"}`,children:[u.jsx("div",{ref:f,className:`${E.absoluteFull} ${E.bg}`}),u.jsx("div",{className:`${E.absoluteFull} ${E.overplay}`}),u.jsxs("div",{className:"h-[calc(100vh-90px)]",children:[u.jsx("div",{className:E.headerWrapper,children:u.jsxs("div",{className:E.header,children:[n&&u.jsxs("div",{className:`${E.headerCta} left-0`,children:[u.jsx("img",{className:`${E.logo}`,src:Wv,alt:""}),c==="Lyric"&&u.jsxs("p",{className:`${E.songNameSinger}`,children:[o.name," -"," ",u.jsx("span",{className:"opacity-30",children:o.singer})]})]}),u.jsx(Qv,{inFullScreen:!0,activeTab:c,setActiveTab:d,className:`${n&&E.fadeTransition}`,tabs:["Songs","Karaoke","Lyric"],render:I=>I}),u.jsxs("div",{className:`${E.headerCta} right-0 gap-[10px] ${n&&E.fadeTransition}`,children:[o.by!=="admin"&&c==="Lyric"&&u.jsxs(xo,{placement:"bottom",children:[u.jsx(wo,{onClick:()=>w(),className:`p-[8px] ${E.button}`,children:u.jsx(C7,{})}),u.jsx(_o,{children:"Lyric"})]}),u.jsx(xo,{placement:"bottom",children:u.jsxs(Ei,{placement:"bottom-end",children:[u.jsx(wo,{children:u.jsx(Si,{className:`${E.button} p-[8px]`,children:u.jsx(I7,{})})}),u.jsx(Ti,{className:"z-[99]",children:u.jsx(vC,{})}),u.jsx(_o,{children:"Setting"})]})}),u.jsxs(xo,{placement:"bottom",children:[u.jsx(wo,{onClick:()=>e(!1),className:`p-[4px] ${E.button}`,children:u.jsx(v7,{})}),u.jsx(_o,{children:"Close"})]})]})]})}),u.jsxs("div",{className:E.contentContainer,children:[u.jsx("div",{ref:p,className:`${E.songsListTab} ${c!=="Songs"?"opacity-0":"opacity-100"}`,children:S}),c==="Songs"&&!n&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>_(),className:`${E.absoluteButton} left-[20px]`,children:u.jsx(RA,{className:"w-[30px]"})}),u.jsx("button",{onClick:()=>g(),className:`${E.absoluteButton} right-[20px]`,children:u.jsx(S7,{className:"w-[30px]"})})]}),u.jsx("div",{className:`absolute inset-0 z-20 ${c==="Lyric"?"":"hidden"}`,children:b}),u.jsx("div",{className:`absolute inset-0 z-20 ${c==="Karaoke"?"":"hidden"}`,children:u.jsx("h1",{className:"text-center font-semibold opacity-60 relative top-[50%]",children:"Coming soon..."})})]}),t&&c==="Lyric"&&!n&&u.jsxs("p",{className:`pt-[20px] ${E.songNameSinger} ${n&&E.fadeTransition}`,children:[o.name," -"," ",u.jsx("span",{className:"opacity-50",children:o.singer})]})]})]})}const jz="/HD-MP3/assets/tutorial1-1bb11af6.png",Oz="/HD-MP3/assets/tutorial2-2363d450.png";function xC({audioRef:t,theme:e,song:n,admin:r,lyric:s}){const{userSongs:i,setUserSongs:o}=Ge(),[a,l]=h.useState(!1),[c,d]=h.useState(!1),[f,p]=h.useState(s?s.base:""),[m,y]=h.useState([]),[g,_]=h.useState(s?s.real_time:[]),[x,v]=h.useState(!1),[w,E]=h.useState(1),[S,b]=h.useState(!1),[I,T]=h.useState(""),[A,C]=h.useState(g?g.length:0),[O,z]=h.useState(f||""),[N,$]=h.useState(!1),V=h.useRef(!0),F=h.useRef(null),Q=h.useRef(0),R=h.useRef(0),M=h.useRef("smooth"),{setSuccessToast:B,setErrorToast:k}=tn(),W=en(),X=h.useMemo(()=>g.length>=m.length,[m,g,c]),ee=h.useMemo(()=>g.length===m.length-1,[m,g,c]),Pe=h.useMemo(()=>c&&!!m.length&&!X,[X,m,c]),le=()=>T(""),Ve=h.useMemo(()=>!!m.length,[m]),ht=()=>{const ne=t.current;ne&&(ne.play(),l(!0),d(!0))},$r=()=>{const ne=t.current;ne&&(ne.pause(),l(!1))},Vs=ne=>{const ye=t.current;ye&&(ye.playbackRate=ne,E(ne)),v(!1)},Rc=()=>{p(O),le()},Ac=ne=>{const ye=t.current;ye&&(ye.currentTime=ne)},la=h.useCallback(()=>{if(!m.length)return;const ne=t.current;if(!ne||X||R.current==+ne.currentTime.toFixed(1))return;ee?Q.current=+ne.duration.toFixed(1):Q.current=+ne.currentTime.toFixed(1);const ye=m[A],Cc={start:R.current,text:ye,end:Q.current};R.current=Q.current,_([...g,Cc]),C(A+1)},[m,A]),ae=()=>{if(A<=0)return;if(t.current){R.current=g[A-1].start,Q.current=0;const ye=g.slice(0,A-1);_(ye),C(A-1)}},Oe=ne=>{const ye=[...i],Cc=LO(ne,ye);if(Cc==null){k({message:"No song found"}),b(!1);return}return o(ye),console.log("setActuallySongs"),Cc},Ee=async()=>{try{b(!0),$r(),await bn({collection:"lyrics",data:{real_time:g,base:f},id:n.id}),await bn({collection:"songs",data:{lyric_id:n.id},id:n.id}),B({message:"Add lyrics successful"}),$(!1)}catch(ne){console.log({message:ne})}finally{b(!1)}},Dt=async()=>{try{b(!0),await bn({collection:"songs",data:{lyric_id:""},id:n.id}),await Ul({collection:"lyrics",id:n.lyric_id}),B({message:"Delete lyric successful"});const ne={...n,lyric_id:""};if(!Oe(ne))return;ha()}catch(ne){console.log(ne)}finally{b(!1)}},ca=()=>{$r(),la()},ua=ne=>{const ye=t.current;ne==="next"?ye.currentTime+=2:ye.currentTime-=2},da=()=>{N?T("confirm-navigate"):ha()},ha=()=>W(r?"/dashboard":"/mysongs");h.useEffect(()=>{if(f){const ne=f.split(/\r?\n/).filter(ye=>ye);y(ne)}m.length&&V.current&&(V.current=!1),console.log("check firstTimeRender",V.current)},[f]),h.useEffect(()=>{const ne=t.current;if(ne){if(g.length){const ye=g[g.length-1].end;ne&&(ne.currentTime=ye,R.current=ye)}return ne.addEventListener("ended",ca),()=>{ne.removeEventListener("ended",ca)}}},[]),h.useEffect(()=>{if(!N){if(!s){$(!0);return}(s.real_time!==g||s.base!=f)&&$(!0)}},[f,g]),h.useEffect(()=>{if(!N)return;const ne=ye=>{ye.preventDefault()};return window.addEventListener("beforeunload",ne),()=>{window.removeEventListener("beforeunload",ne)}},[N]);const kC=`${e.type==="light"?"text-[#333]":"text-white"}`,Se={section:`bg-${e.alpha} p-[10px] rounded-[12px]`,row:"flex no-scrollbar",col:"flex-grow flex flex-col gap-[10px]",formGroup:"flex flex-col gap-[5px] flex-grow",label:"text-md font-[500]",button:`${e.content_bg} rounded-full font-[500] text-white text-[14px] px-[10px]`,disable:" opacity-60 pointer-events-none ",icon:"h-[20px] w-[20px]",lyricBox:"list-none h-full px-[10px] max-[549px]:w-[100%] pb-[20%] ",listItem:"h-[34px] w-[34px] text-[14px]",changeSpeedBtn:"inline-flex items-center hover:brightness-90 px-[20px] py-[5px] rounded-full text-white text-[14px]",ctaContainer:"flex justify-between space-x-[10px] mb-[20px]",getActiveClass:ne=>ne?e.content_bg:`bg-${e.alpha}`},PC=h.useMemo(()=>{switch(I){case"":return u.jsx(u.Fragment,{});case"tutorial":return u.jsxs(u.Fragment,{children:[u.jsx(Fs,{title:"Tutorial",close:le}),u.jsxs("div",{className:"h-[500px] max-h-[75vh] overflow-y-auto no-scrollbar",children:[u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Phm chc nng:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:Oz,alt:""}),u.jsx("br",{}),u.jsx("h1",{className:"font-semibold mb-[12px]",children:"Cch thm li bi ht:"}),u.jsx("img",{className:"w-full border rounded-[16px]",src:jz,alt:""})]})]});case"add-base-lyric":return u.jsxs(u.Fragment,{children:[u.jsx("textarea",{ref:F,value:O,onChange:ne=>z(ne.target.value),className:"w-full rounded-[4px] mb-[10px] min-h-[50vh] bg-transparent border p-[10px]"}),u.jsx(Y,{variant:"primary",onClick:Rc,className:Se.button,children:"Ok"})]});case"delete-lyric":return u.jsx(or,{loading:S,label:"Delete playlist ?",theme:e,callback:Dt,close:le});case"confirm-navigate":return u.jsx(or,{loading:S,label:"Your change not save",theme:e,buttonLabel:"Close and don't save",callback:ha,close:le})}},[I,O]),NC=u.jsxs("div",{className:`${Se.ctaContainer} ${kC}`,children:[u.jsxs("div",{className:"left flex flex-wrap gap-[10px]",children:[u.jsx("button",{onClick:()=>T("add-base-lyric"),className:Se.button,children:f?"Change lyric":"Add lyric"}),u.jsxs(Ei,{isOpenFromParent:x,setIsOpenFromParent:v,placement:"bottom-start",children:[u.jsxs(Si,{className:`${Se.button} ${Se.changeSpeedBtn}`,children:[w,"x"]}),u.jsx(Ti,{children:u.jsx(Ri,{variant:"thin",theme:e,children:u.jsxs("div",{className:"flex justify-center gap-[8px]",children:[u.jsx(Y,{variant:"circle",onClick:()=>Vs(1),className:`${Se.getActiveClass(w===1)} ${Se.listItem}`,children:"1x"}),u.jsx(Y,{variant:"circle",onClick:()=>Vs(1.2),className:`${Se.getActiveClass(w===1.2)} ${Se.listItem}`,children:"1.2x"}),u.jsx(Y,{variant:"circle",onClick:()=>Vs(1.5),className:`${Se.getActiveClass(w===1.5)} ${Se.listItem}`,children:"1.5x"})]})})})]}),a?u.jsx(Y,{variant:"primary",onClick:$r,className:Se.button+(c?"":Se.disable),children:"Pause"}):u.jsx(Y,{variant:"primary",onClick:ht,className:Se.button+(a||!Ve?Se.disable:""),children:"Play"}),u.jsx(Y,{variant:"primary",onClick:la,className:Se.button+(!Pe&&Se.disable),children:u.jsx(ld,{className:"w-[16px]"})}),u.jsx(Y,{variant:"primary",onClick:ae,className:Se.button+(!g.length||!m.length?Se.disable:""),children:u.jsx(Sj,{className:"w-[16px]"})}),u.jsxs(Y,{variant:"primary",onClick:()=>ua("prev"),className:Se.button+(!c||!m.length?Se.disable:""),children:[u.jsx(M5,{className:"w-[16px] mr-[5px]"}),"2s"]}),u.jsxs(Y,{variant:"primary",onClick:()=>ua("next"),className:Se.button+(!c||!m.length?Se.disable:""),children:["2s",u.jsx(V5,{className:"w-[16px] ml-[5px]"})]})]}),u.jsx("button",{onClick:()=>T("tutorial"),children:u.jsx(Bj,{className:"w-[20px]"})})]});return u.jsxs("div",{className:`${S?"opacity-[0.6] pointer-events-none":""}`,children:[u.jsxs("button",{onClick:da,className:`inline-flex text-[20px] font-bold mb-[14px] ${e.content_hover_text}`,children:[u.jsx(q5,{className:"w-[25px]"}),u.jsx("span",{className:"ml-[12px]",children:n.name})]}),NC,u.jsxs("div",{className:`${Se.row} bg-${e.alpha} rounded-[12px] pt-[10px] mb-[0] h-[55vh] min-h-[200px] overflow-auto`,children:[u.jsx("div",{className:Se.lyricBox+"w-[50%]",children:m.length?u.jsx(u.Fragment,{children:m.map((ne,ye)=>u.jsx(AA,{inUpload:!0,scrollBehavior:M,className:"pb-[30px] leading-[1.2] mr-[24px]",active:ye===A,done:ye!=A,children:ne},ye))}):u.jsx("h1",{children:"Base lyric..."})}),u.jsx("div",{className:Se.lyricBox+" border-none w-[50%]",children:!!(g!=null&&g.length)&&g.map((ne,ye)=>u.jsx(rB,{handleSetTime:Ac,lyric:ne,theme:e,index:ye,realTimeLyrics:g,setRealTimeLyrics:_},ye))})]}),u.jsx(Y,{className:`${e.content_bg} ${N?"":"opacity-[.6] pointer-events-none"} text-[14px] rounded-full mt-[20px]`,variant:"primary",onClick:Ee,children:"Save"}),u.jsx(Y,{className:"bg-red-500 text-[#fff] text-[14px] font-bold ml-[12px] rounded-full mt-[20px]",variant:"primary",onClick:()=>T("delete-lyric"),children:"Delete"}),!!I&&u.jsx(yn,{closeModal:le,classNames:"w-[700px] max-w-[calc(100vw-40px)]",children:PC})]})}const wC=({audioEle:t,className:e,isOpenFullScreen:n,active:r})=>{const{playStatus:{lyricSize:s}}=K(Wt),[i,o]=h.useState(0),a=h.useRef("instant"),l=h.useRef(null),{currentSong:c}=K(ge),d=h.useRef(0),{loading:f,songLyric:p}=V7({audioEle:t,isOpenFullScreen:n}),m=h.useCallback(()=>{const x=t.currentTime;if(o(x),Math.abs(x-d.current)>5){a.current="instant",d.current=x;return}d.current=x},[]),y={small:"text-[20px] sm:text-[30px]",medium:"text-[25px] sm:text-[35px]",large:"text-[30px] sm:text-[40px]"},g=()=>p.real_time.map((x,v)=>{const E=i>=x.start-.3&&i<x.end-.3;return u.jsx(AA,{done:!E&&i>x.end-.3,active:E,scrollBehavior:a,className:`${y[s||"medium"]} ${E?"active":""} mb-[30px]`,children:x.text},v)});h.useEffect(()=>{if(t)return t.addEventListener("timeupdate",m),()=>{t&&t.removeEventListener("timeupdate",m)}},[]),h.useEffect(()=>{const x=document.querySelector(".active.lyric");x&&x.scrollIntoView({behavior:"instant",block:"center"})},[r]),h.useEffect(()=>{a.current!=="instant"&&(a.current="instant")},[c]);const _={container:"overflow-y-auto overflow-x-hidden no-scrollbar pt-[20px] mask-image",loadingContainer:"flex justify-center items-center h-full w-full",loadingIcon:"opacity-[.6] animate-spin w-[35px] duration-[2s]"};return u.jsxs("div",{ref:l,className:`${_.container} ${e||""}`,children:[f&&u.jsx("div",{className:_.loadingContainer,children:u.jsx("span",{children:u.jsx(Ir,{className:_.loadingIcon})})}),!f&&u.jsx(u.Fragment,{children:p.real_time.length?g():u.jsx("div",{className:_.loadingContainer,children:u.jsx("h1",{className:"text-[30px] opacity-60",children:"..."})})})]})},Lz=({audioEle:t,setIsOpenFullScreen:e,isOpenFullScreen:n})=>{const r=ke(),{currentSong:s}=K(ge),{playStatus:{isPlaying:i,isError:o,isWaiting:a}}=K(Wt),{userSongs:l}=Ge(),{theme:c}=Z(),d=mn(),f=h.useMemo(()=>d.pathname.includes("edit"),[d]),p=()=>{t==null||t.play()},m=()=>{t==null||t.pause()},y=()=>{i?m():p()},g=()=>{let v=s.currentIndex+1,w;v<l.length?w=l[v]:(w=l[0],v=0),r(Zt({...w,currentIndex:v,song_in:s.song_in}))},_=h.useMemo(()=>a?u.jsx(Ir,{className:"w-[36px] animate-spin"}):o&&s.name?u.jsx(Wy,{className:"w-[36px] "}):i?u.jsx(dh,{className:"w-[36px] "}):u.jsx(Hy,{className:"w-[36px]"}),[a,o,i]),x={wrapper:`fixed bottom-0 transition-transform w-full h-[70px] border-t border-${c.alpha} z-40  px-[20px]`,container:`absolute inset-0 ${c.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1]`,songImageWrapper:"flex flex-row items-center flex-grow h-full",image:"w-[40px] h-[40px] flex-shrink-0",cta:"mobile-bottom-player flex items-center h-full pl-[15px] gap-[10px]"};return u.jsxs("div",{className:`${x.wrapper} ${f?"translate-y-full":""}`,children:[u.jsx("div",{className:`${x.container} ${n?"opacity-0 transition-opacity delay-[.3s]":""}`}),u.jsxs("div",{className:"flex flex-row  h-full",children:[u.jsx("div",{onClick:()=>e(!0),className:"mobile-current-song flex-grow",children:u.jsxs("div",{className:x.songImageWrapper,children:[u.jsx("div",{className:x.image,children:u.jsx(Lr,{src:s.image_url||Wv,classNames:"rounded-full"})}),u.jsx("div",{className:"flex-grow  ml-[10px]",children:s.song_url&&u.jsxs(u.Fragment,{children:[u.jsx("h5",{className:"text-[18px] font-[500] line-clamp-1",children:s.name||"name"}),u.jsx("p",{className:"text-[14px] font-[400] opacity-60 line-clamp-1",children:s.singer||"singer"})]})})]})}),u.jsxs("div",{className:`${x.cta} ${!s.name&&"opacity-60 pointer-events-none"}`,children:[u.jsx("button",{className:" p-[4px]",onClick:()=>y(),children:_}),u.jsx("button",{onClick:g,className:" p-[4px]",children:u.jsx(TT,{className:"w-[35px]"})})]})]})]})};function Dz({isOpenFullScreen:t}){const e=()=>{const n=document.querySelector("body");n&&(t?n.style.overflow="hidden":n.style.overflow="auto")};h.useEffect(()=>{e()},[t])}function Mz(){const[t,e]=h.useState(!1);return h.useEffect(()=>{const n=()=>{window.innerWidth>549&&window.innerWidth<800?e(!0):e(!1)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),{isLandscape:t}}function $z({audioEle:t,isOpenFullScreen:e,setIsOpenFullScreen:n}){const r=ke(),{theme:s}=Z(),{currentSong:i}=K(ge),{playStatus:{isPlaying:o}}=K(Wt),{queueSongs:a}=K(ur),[l,c]=h.useState("Playing"),[d,f]=h.useState(!1),[p,m]=h.useState(""),y=h.useRef(null),g=h.useRef(null),_=h.useRef(null);Dz({isOpenFullScreen:e}),kA({bgRef:y,currentSong:i});const{isLandscape:x}=Mz(),v=()=>m(""),w=A=>{let C=0,O=A.parentElement;for(;!O.classList.contains("item-container")&&C<5;)O=O.parentElement,C++;return O},E={opacity:"0"},S=A=>{let C=0,O=A.previousElementSibling;for(;O&&C<100;)Object.assign(O.style,E),C++,O=O.previousElementSibling},b=(A,C,O)=>{const z=A.target,N=w(z);S(N),Object.assign(N.style,E),setTimeout(()=>{r(Zt({...C,currentIndex:O,song_in:i.song_in}))},250)},I=h.useMemo(()=>u.jsx(u.Fragment,{children:i&&u.jsx(u.Fragment,{children:i.currentIndex===a.length-1?u.jsx("p",{children:"..."}):u.jsx(u.Fragment,{children:a.map((A,C)=>{if(C>i.currentIndex)return u.jsx(hb,{theme:s,data:A,onClick:O=>b(O,A,C),active:!1},C)})})})}),[i,a]),T={headerWrapper:"h-[65px] p-[15px]",header:"relative w-full",main:"h-[calc(100%-65px)] relative px-[15px] overflow-hidden",songImage:"flex-shrink-0 transition-[height, width] origin-top-left",nameAndSinger:"flex flex-grow justify-between items-center",scrollText:"h-[30px] mask-image-horizontal",control:"absolute bottom-0 left-[15px] right-[15px]",lyricContainer:"absolute top-[65px] bottom-[120px] py-[16px] left-[15px] right-[15px]",bgImage:"absolute inset-0 bg-no-repeat bg-cover bg-center blur-[50px] transition-[background-image] duration-[.3s ]",overlay:"absolute inset-0 bg-zinc-900 bg-opacity-60 bg-blend-multiply overflow-hidden",button:"inline-flex justify-center items-center rounded-full absolute top-0 h-full w-[35px]"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`fixed inset-0 z-50 bg-zinc-900 text-white overflow-hidden  ${e?"translate-y-0":"translate-y-full"} transition-[transform] duration-[.5s] ease-in-out delay-150  `,children:[u.jsx("div",{ref:y,className:T.bgImage}),u.jsx("div",{className:T.overlay}),u.jsxs("div",{className:"absolute inset-0 z-10",children:[u.jsx("div",{className:T.headerWrapper,children:u.jsxs("div",{className:T.header,children:[u.jsxs(Ei,{placement:"bottom-start",children:[u.jsx(Si,{className:`${T.button} p-[6px] left-0 bg-gray-500 bg-opacity-20`,children:u.jsx(ST,{className:"w-[20px]"})}),u.jsx(Ti,{children:u.jsx(vC,{})})]}),u.jsx(Qv,{inFullScreen:!0,className:"w-fit",setActiveTab:c,activeTab:l,render:A=>A,tabs:["Songs","Playing","Lyric"]}),u.jsx("button",{className:`${T.button} p-[6px] right-0 bg-gray-500 bg-opacity-20`,onClick:()=>n(!1),children:u.jsx(z5,{className:"w-[20px]"})})]})}),u.jsxs("div",{ref:g,className:T.main,children:[u.jsxs("div",{className:`${l!="Playing"&&!d||x?"flex":""}`,children:[h.useMemo(()=>u.jsx(Jz,{active:l==="Playing"&&!x,data:i}),[i,o,l,x]),u.jsx("div",{className:`${T.nameAndSinger} ${l!="Playing"||x?"ml-[10px]":"mt-[15px] min-[549px]:mt-0"}`,children:u.jsxs("div",{className:"group flex-grow overflow-hidden",children:[u.jsx("div",{className:T.scrollText,children:h.useMemo(()=>u.jsx(qd,{autoScroll:!0,classNames:`${l==="Playing"||x?"text-[24px] leading-[30px]":"text-[20px]"} font-[500]`,label:i.name||"..."}),[i,l])}),u.jsx("div",{className:T.scrollText,children:h.useMemo(()=>u.jsx(qd,{autoScroll:!0,classNames:`${l==="Playing"||x?"text-[22px]":"text-[16px] opacity-60"} font-[400]`,label:i.singer||"..."}),[i,l])})]})})]}),u.jsx("div",{ref:_,className:`${T.lyricContainer} ${l==="Lyric"?"block":"hidden"}`,children:h.useMemo(()=>u.jsx(wC,{active:l==="Lyric",className:"h-[100%]",audioEle:t,isOpenFullScreen:e&&l==="Lyric"}),[e,l,x])}),u.jsx("div",{className:`absolute left-[15px] right-[15px] ${l==="Songs"?"block":"hidden"}`,children:u.jsxs("div",{className:"relative",children:[u.jsx("h3",{className:"text-white text-[16px] my-[10px]",children:"Playing next"}),u.jsx("div",{className:"h-[calc(100vh-170px)] pb-[30px] no-scrollbar overflow-auto",children:I})]})}),u.jsx("div",{className:`${T.control} ${l==="Songs"&&"opacity-0 pointer-events-none h-[0px] mb-[0px]"}`,children:u.jsx("div",{className:"h-[120px]",children:h.useMemo(()=>u.jsx(mC,{className:"flex flex-col-reverse justify-between pb-[24px]",audioEle:t,isOpenFullScreen:!0,idle:!1}),[e])})})]})]})]}),!!p&&u.jsx(yn,{closeModal:v,children:u.jsx(Xv,{close:v})})]})}const yn=({children:t,closeModal:e,classNames:n})=>{const{theme:r}=Z();return u.jsx(u.Fragment,{children:Qo.createPortal(u.jsxs("div",{className:"fixed inset-0 z-[99]",children:[u.jsx("div",{onClick:s=>{s.preventDefault(),s.stopPropagation(),e()},className:"absolute bg-black opacity-60 inset-0 z-[90]"}),u.jsx("div",{className:"absolute z-[99] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:u.jsx(Ri,{className:n||"",theme:r,children:t})})]}),document.getElementById("portals"))})};function Fz({isOpenSongQueue:t,setIsOpenSongQueue:e}){const n=ke(),{theme:r}=Z(),{user:s}=tt(),{queueSongs:i}=K(ur),{playStatus:{isTimer:o}}=K(Wt),{currentSong:a}=K(ge),[l,c]=h.useState(""),[d,f]=h.useState("Queue"),[p,m]=h.useState([]),[y,g]=h.useState(!1),[_,x]=$v("play_history",[]),[v,w]=h.useState(!1),E=()=>c(""),S=h.useCallback((N,$)=>{$!==a.currentIndex&&n(Zt({...N,currentIndex:$}))},[a]),b=(N,$)=>{$!==a.currentIndex&&(n(Ec({songs:[N]})),n(Zt({...N,currentIndex:i.length-1+1})),f("Queue"))},I=()=>{if(o)return n(It({isTimer:0}));c("timer")},T=h.useCallback(()=>{e(!1),n(yA()),n(Rs()),gt("duration",0)},[]),A=async()=>{try{if(!s)return;w(!0),await bn({collection:"users",data:{play_history:[]},id:s.email}),m([]),x([])}catch(N){console.log(N)}finally{w(!1),f("Queue")}},C=async()=>{try{const $=Yn().play_history||[];if(await n0(500),!$.length){g(!1);return}const V=Ls(oa(Dr,"songs"),Ds("id","in",$)),Q=(await Ms(V)).docs.map(R=>{const M=R.data();return{...M,song_in:M.by==="admin"?"admin":"user"}});m(Q)}catch(N){console.log(N)}finally{g(!1)}};h.useEffect(()=>{if(s)return d==="Recent"&&C(),()=>{g(!0)}},[d]),h.useEffect(()=>{s&&(s.email||(e(!1),f("Queue")))},[s]),h.useEffect(()=>{setTimeout(()=>{t||f("Queue")},1e3)},[t]);const O=[...Array(4).keys()].map(N=>u.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[u.jsx(Be,{className:"h-[40px] w-[40px] rounded-[4px]"}),u.jsxs("div",{className:"ml-[10px]",children:[u.jsx(Be,{className:"h-[20px] mb-[5px] w-[120px]"}),u.jsx(Be,{className:"h-[12px] mt-[5px] w-[60px]"})]})]},N)),z={textColor:`${r.type==="dark"?"text-white":"text-[#333]"} `,mainContainer:`fixed w-[300px] bottom-[0] right-[0] top-[0] z-20 px-[15px] ${r.container} border-l-[1px] border-${r.alpha} transition-[transform] duration-[.5s] linear delay-100`};return u.jsxs("div",{className:`${z.textColor} ${z.mainContainer} ${t?"translate-x-0---":"translate-x-full"}     `,children:[u.jsxs("div",{className:"flex items-center justify-between my-[10px]",children:[u.jsx(Qv,{className:`text-[13px] ${s!=null&&s.email?"":"opacity-[.6] pointer-events-none"}`,activeTab:d,setActiveTab:s!=null&&s.email?f:()=>{},tabs:["Queue","Recent"],render:N=>N}),u.jsxs(xo,{placement:"bottom",children:[u.jsx(wo,{onClick:I,className:`p-[8px] rounded-[50%] ${r.content_hover_bg} ${o?r.content_bg:r.side_bar_bg}`,children:u.jsx(ET,{className:"w-[20px]"})}),u.jsx(_o,{children:"Add timer"})]})]}),u.jsxs("div",{className:"h-[calc(100vh-146px)] pb-[30px] overflow-y-auto overflow-x-hidden no-scrollbar",children:[d==="Queue"&&u.jsxs(u.Fragment,{children:[u.jsx(jr,{variant:"queue",songs:i,handleSetSong:S}),u.jsx("div",{className:"text-center",children:!!i.length&&u.jsx(Y,{onClick:T,size:"small",className:`${r.content_bg} rounded-full mt-[24px]`,children:"Clear"})})]}),d==="Recent"&&u.jsx(u.Fragment,{children:y?O:u.jsxs(u.Fragment,{children:[u.jsx(jr,{variant:"queue",songs:p,handleSetSong:b}),!!p.length&&u.jsx("p",{className:"text-center",children:u.jsx(Y,{onClick:A,size:"small",className:`${r.content_bg} rounded-full mt-[24px]`,children:v?u.jsx(Ir,{className:"w-[20px] animate-spin"}):"Clear"})})]})})]}),!!l&&u.jsx(yn,{closeModal:E,children:u.jsx(Xv,{close:E})})]})}function Vz(t,e,n){const{currentSong:r}=K(ge),[s,i]=h.useState(!1),[o,a]=h.useState(0),l=h.useRef(),c=h.useRef(),d=()=>{i(!1),a(Math.random())},f=()=>{clearTimeout(c.current),clearTimeout(l.current)},p=async()=>{if(!n)return;const m=document.querySelector(".song-thumb.active"),y=document.querySelector(".song-list-container");if(m&&y){const g=NA(m,y,!0);console.log("check isScroll",g);let _=Bl.focusDelay;g||(_=0),l.current=setTimeout(()=>{i(!0)},_)}};return h.useEffect(()=>{if(n&&!(e||!r.id))return setTimeout(()=>{window.addEventListener("mousemove",d),window.dispatchEvent(new Event("mousemove"))},1e3),()=>{window.removeEventListener("mousemove",d),f()}},[n]),h.useEffect(()=>(c.current=setTimeout(()=>{p()},t),()=>{f()}),[o]),n?s:!1}const _C=({admin:t})=>{const{currentSong:e}=K(ge),{isOnMobile:n}=Z(),[r,s]=h.useState(!1),[i,o]=h.useState(!1),[a,l]=h.useState(!1),c=h.useRef(null),d=Vz(Bl.scrollSongDelay,n,r),f=u.jsxs(u.Fragment,{children:[!t&&u.jsx(Nz,{audioEle:c.current,idle:d,isOpenFullScreen:r,setIsOpenFullScreen:s}),u.jsx(Fz,{isOpenSongQueue:i,setIsOpenSongQueue:o}),u.jsx(Cz,{admin:t,audioEle:c.current,idle:d&&r,isOpenFullScreen:r,isOpenSongQueue:i,setIsOpenSongQueue:o,setIsOpenFullScreen:s})]}),p=u.jsxs(u.Fragment,{children:[u.jsx($z,{audioEle:c.current,isOpenFullScreen:r,setIsOpenFullScreen:s}),u.jsx(Lz,{audioEle:c.current,idle:d&&r,isOpenFullScreen:r,setIsOpenFullScreen:s})]});return h.useEffect(()=>{a||c.current&&l(!0)},[]),u.jsxs("div",{className:"absolute",children:[u.jsx("audio",{ref:c,src:e.song_url,className:"hd-mp3 hidden"}),a?n?p:f:""]})},Hv="data:image/gif;base64,R0lGODlhJAAkAIABAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NmRjOGMyNC03YmYxLTQxZTMtYjQ2Zi1mY2ZhMDk4MDE1YWYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTBDRTc0QzlGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTBDRTc0QzhGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YzBhNGU4OWYtNjc4Yy00NmMyLTg4NmUtYzIxNGE0NTIwZDRjIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODRlMDBjYmEtZjhlNy03YzQ4LWE4MTgtNDc3NTI3MGQ1ZTAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQgAAQAsAAAAACQAJAAAAnKMj5nArQ9jc7HWyax+GOx/dCAojltpWmgqYazqvu0kz1StrHgYp6tO6gWAn59wZKSxkjcTM7MUEk/SY1BpmGqeHhs0W8Vywk3tkPw9iztcBLfNW7Pl9PLcXk/f8Xz9vguWB6h254Y2+Id4aLjH2Kc4UQAAIfkECQgAAQAsAAAAACQAJAAAAnSMj6nL7Q+jnAzYS+XFGW7beV/4fADpmGijrkvrJnA2z1Q9hvhG7lznA+lyBpuMGAieDiYlQulkIpvTKk9KFRatv2RW671uxeHskwv+ptHLsRnbhbLPZHW7vK6r6XF21J33Bngnp2fY98UXuNikSOg3B8dYAAAh+QQJCAABACwAAAAAJAAkAAACfIyPqcvtD6OctNqLKdg8N955C7iJI4mQAKam6NUeMTMHda3cr4EnOugCfnY2Yi8Y4hmXKqHSWYQ2mclodSqllmTY7fOqbSK9VnLXHB6Ludk2Vg1nv+Vo9zT+rc/zK3qf/wNmt8aHV0Z4aHj2l+inFqgXiQjJuKgYRnkJUgAAIfkECQgAAQAsAAAAACQAJAAAAnuMj6nL7Q+jnLTaC7K+T2/eeBkYiiQjAlyKsJh5uJYc0BRtTzgMpbsn8fFqQ4cQGCuWjqok0vA7toZR4fRJxDJHzg+Uur16s+Nt86sFM8VcdDncbZPlZvZ5fq/H82rp3m5XxZe29mfoZnWIF9hH1+gDqKiHOPhWSBlJWQAAIfkECQgAAQAsAAAAACQAJAAAAn6Mj6nL7Q8RmDTaQ+u1eW7efVg4ZqLRARIppqsZpW6pQTIbzPZd57jD6+keQQ/NuAu+esDiEkl0HlUxKerXKFKvsCTvuY0qp2Dw8IzTlslTdNf3VrO5Qiu8Hre78d/5HSpHB5imR5g3Jhi2d7OWaGbIN4j4pwjJ6Lco00gJVgAAIfkECQgAAQAsAAAAACQAJAAAAn2EH6nL7XnQmxRGULO7WHsbfRPHiQ95mRsqqQvbBqUGG29K13eYw3tMqXVAwJFOMcsIf7YeizmsLJE45ZHYtPqoPO2TWzxdZVXpOGneYqPBc7mtJnflsekaCkXry3Z61h/VtzcnyGcYN1jnRnj4dQf2V8g46QiIB0ly+bhWAAAh+QQJCAABACwAAAAAJAAkAAACfYyPqcvtD+MDtMobqt6Y7Q90C8iJCamZJ0qpCNu6Bhwen0S/JZTb+wTTpSK92c9RzBwbyRsx6BvyoEYpkCW0RLVVVDbWBSuxW7EzDPrW0OrzmPs2U+Nrevvnzs/11ib+T8ZWVufXB+g1qHZnyAhX6HhIopg4yAfZKEkpiFYAACH5BAkIAAEALAAAAAAkACQAAAJ7jI+py+0Po5y02ouB3tht3jGfFopjuYwqgK5npCLuJ8XHDEK2gZP3ywMGeqwfzZgb9mTCnRLHPAalz1k06SRefVPsEsmthrXgYnf8PZvFa7J6206z4fBs8w4t08t2at+qF6j2h+YnRxiX9ybIhrg3iOdlqDjH6Fa5qFYAACH5BAkIAAEALAAAAAAkACQAAAJ1jI+py+0Po5y02otzArxr1nmfEnIjWZ5bqh4l0Lqs8WK1HNpzcFs9/9o5fkFhg1gUQZBJWISZlECL0l3ThFMCc1lq10mzXhFT8Db6JYubam7Yffa+teVymz5O6+fyuLm+hgd39ReIxRd0d+inmLjH+GX3+FIAACH5BAUIAAEALAAAAAAkACQAAAJwjI+py+0Po5y0PoCzhVlv12EfGI5NCJgMqi5sm7zwIc9BPeOw3vKqb6oBLyUaqshB3o4diZDpSTaN0FTkWUVgo8sslbtlapXh43hqKJfP4Ko1TY574ehue24XffV0KJuf9xa4tifoZih351f4h9hRAAA7",Bg=({data:t,inDetail:e,theme:n,active:r,link:s})=>{const i={button:`rounded-full text-[#201f1f] p-[4px] hover:bg-${n==null?void 0:n.alpha}`,imageContainer:"absolute inset-0 overflow-hidden rounded-[6px]",absoluteContainer:"absolute inset-0 group-hover:block",overlay:"absolute inset-0 bg-[#000] opacity-[.5]",buttonContainer:"justify-center items-center h-full z-10 relative",buttonWrapper:"flex items-center justify-center z-10 h-full w-full relative"},o=u.jsxs("div",{className:i.imageContainer,children:[u.jsx(Lr,{classNames:"group-hover:scale-[1.1] transition duration-[.3s]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsxs("div",{className:`${i.absoluteContainer} ${r?"block":"hidden"}`,children:[u.jsx("div",{className:i.overlay}),r&&u.jsx("div",{className:i.buttonWrapper,children:u.jsx("img",{src:Hv,alt:"",className:"w-[30px]"})})]})]});return e?u.jsx("div",{className:"group relative pt-[100%] w-full block",children:o}):u.jsxs(u.Fragment,{children:[u.jsx(ds,{to:`${s||"/playlist/"+t.id}`,className:"group relative pt-[100%] w-full block",children:o}),u.jsx("h5",{className:"text-[18px] line-clamp-1 leading-[22px] font-[500] mt-[6px]",children:t.name})]})};function qd({label:t,classNames:e,autoScroll:n}){const r=h.useRef(null),s=h.useRef(null);return W7({textRef:s,textWrapperRef:r,autoScroll:n}),u.jsx("div",{ref:r,className:"overflow-hidden scroll-smooth relative h-full",children:u.jsx("div",{ref:s,className:`${e} absolute left-0 whitespace-nowrap line-clamp-1`,children:t||"..."})})}function EC({setIsOpenModal:t}){const{theme:e}=Z(),n=ke(),r=l=>{t(l)},[s,i]=$v("isCrossFade",!1),o=()=>{i(!s),n(It({isCrossFade:!s}))},a={menuItem:`${e.content_hover_text} hover:bg-${e.alpha} rounded-[4px] font-[500] w-full px-[10px] text-[14px] h-[40px] inline-flex items-center cursor-pointer`,icon:"w-[25px] mr-[8px]",divide:`h-[1px]  w-[calc(100%-20px)] my-[4px] mx-auto bg-${e.alpha}`,disable:"opacity-[.6] pointer-events-none"};return u.jsx(u.Fragment,{children:u.jsx(Ri,{variant:"thin",color:"sidebar",theme:e,children:u.jsxs("ul",{className:"flex flex-col w-[200px]",children:[u.jsxs("li",{className:`${a.menuItem} justify-between hover:bg-[unset]`,children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(Hy,{className:a.icon}),"Cross fade"]}),u.jsx(Nu,{active:s,cb:o})]}),u.jsxs("li",{className:`${a.menuItem}`,onClick:()=>r("theme"),children:[u.jsx(RT,{className:a.icon}),"Themes"]}),u.jsx("div",{className:a.divide}),u.jsxs("li",{className:`${a.menuItem}`,onClick:()=>r("info"),children:[u.jsx(IT,{className:a.icon}),"Info"]})]})})})}function Uz({className:t}){const[e,n]=h.useState(!1),{theme:r}=Z(),s=()=>{const o=document.querySelector(".main-container");if(!o)return;const a=o.scrollTop||0;n(a>100)},i=()=>{const o=document.querySelector(".main-container");o==null||o.scroll({behavior:"smooth",top:0})};return h.useEffect(()=>{const o=document.querySelector(".main-container");if(o)return o.addEventListener("scroll",s),()=>{o.removeEventListener("scroll",s)}},[]),u.jsx(Y,{onClick:i,variant:"circle",className:`absolute p-[8px] hover:scale-[1.05] transition-[opacity,transform] ${t||""} w-[36px] ${r.content_hover_bg} h-[36px] bg-${r.alpha} 
      ${e?"opacity-[1]":"opacity-0 translate-y-[20px]"}`,children:u.jsx(h7,{})})}function Bz(){const t=ke(),{theme:e}=Z(),{user:n,loading:r}=tt(),{resetSongPlaylistStore:s}=Ge(),i=mn(),o=en(),a=()=>{t(Rs()),t(Mv()),s()},l=()=>{a(),o("/dashboard")},c=[...Array(2).keys()].map(f=>u.jsxs("div",{className:"pl-[14px] h-[44px] flex items-center",children:[u.jsx(Be,{className:"w-[25px] h-[25px] flex-shrink-0"}),u.jsx(Be,{className:"w-[80px] h-[19px] ml-[5px]"})]},f)),d={container:`w-[180px] relative  flex-shrink-0 border-r-[1px] h-screen ${e.side_bar_bg} border-${e.alpha}`,button:`w-full text-[14px] font-[600] ${e.content_hover_text}`,text:e.type==="light"?"text-[#333]":"text-white",icon:"w-[25px] mr-[5px]",menuItem:"w-full  border-l-[4px] pl-[10px] h-[44px] inline-flex items-center",activeMenu:`${e.content_text} ${e.container} ${e.content_border}`};return u.jsxs("div",{className:`${d.container} ${d.text}`,children:[u.jsx("div",{className:"px-[10px] h-[60px] flex items-center",children:u.jsxs(ds,{to:"/",className:"text-[24px] font-semibold",children:["HD",u.jsx("span",{className:`${e.content_text} ml-[4px]`,children:"MP3"})]})}),u.jsxs("div",{className:"flex flex-col items-start",children:[r&&c,!r&&u.jsxs(u.Fragment,{children:[u.jsx(ds,{className:`${d.menuItem} ${i.pathname==="/"?d.activeMenu:"border-transparent"}`,to:yt.Home,children:u.jsxs(Y,{className:d.button,children:[u.jsx(gj,{className:d.icon}),"Discover"]})}),n&&u.jsxs(u.Fragment,{children:[u.jsx(ds,{className:`${d.menuItem}  ${i.pathname.includes("mysongs")?d.activeMenu:"border-transparent"}`,to:yt.MySongs,children:u.jsxs(Y,{className:d.button,children:[u.jsx(ko,{className:d.icon}),"My Song"]})}),n.role==="ADMIN"&&u.jsxs(Y,{onClick:l,className:`${d.menuItem} ${d.button} border-transparent`,children:[u.jsx(sj,{className:d.icon}),"Dashboard"]})]})]})]}),u.jsx(Uz,{className:"left-[50%] translate-x-[-50%] bottom-[80px] md:bottom-[100px]"})]})}function zz({contentRef:t}){const{theme:e}=Z(),[n,r]=h.useState(0),[s,i]=_c(Ts),[o,a]=h.useState(""),{logOut:l,logIn:c}=Tc(),d=()=>a(""),f=async()=>{try{await l()}catch(x){console.log("signOut error",{messsage:x})}finally{d()}},p=async()=>{try{const x=document.querySelector(".login-trigger");await c(),x&&x.click()}catch(x){console.log(x)}},m=()=>{var v;const x=((v=t.current)==null?void 0:v.scrollTop)||0;r(x)},y=u.jsx(Be,{className:"w-[35px] h-[35px] rounded-full"}),g=h.useMemo(()=>{switch(o){case"":return u.jsx(u.Fragment,{});case"theme":return u.jsx(bC,{close:d});case"info":return u.jsx(Gv,{close:d});case"confirm":return u.jsx(or,{close:d,callback:f,loading:!1,label:"Sign out ?",desc:"",theme:e})}},[o]);h.useEffect(()=>{var x;return(x=t.current)==null||x.addEventListener("scroll",m),()=>{document.removeEventListener("scroll",m)}},[]);const _={userName:"text-[16px] font-[500] ml-[8px] line-clamp-1",button:"h-[35px] w-[35px] rounded-full",menuItem:`hover:bg-${e.alpha} ${e.content_hover_text} rounded-[4px] w-full px-[10px] h-[44px] inline-flex items-center font-[500]`,icon:"w-[25px] mr-[5px]",divide:`h-[1px]  w-[calc(100%-20px)] mb-[10px] mt-[20px] mx-auto bg-${e.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`${e.container} ${n?"shadow-lg":""} h-[60px] fixed right-0 ${n?"bg-transparent":""} left-[180px] z-[20]`,children:[u.jsx("div",{className:`${n?"":"hidden "} absolute  inset-0 ${e.container} bg-opacity-[0.9] backdrop-blur-[15px] z-[-1] `}),u.jsxs("div",{className:"px-[40px] flex items-center justify-between h-full",children:[u.jsx("div",{className:""}),u.jsxs("div",{className:"flex gap-[16px]",children:[u.jsxs(Ei,{placement:"bottom-end",children:[u.jsx(Si,{className:`flex px-[6px] items-center ${_.button} bg-${e.alpha} ${e.content_hover_bg}`,children:u.jsx(xT,{})}),u.jsx(Ti,{children:u.jsx(EC,{setIsOpenModal:a,loggedIn:!1})})]}),u.jsxs(Ei,{placement:"bottom-end",children:[u.jsx(Si,{className:`flex login-trigger items-center hover:brightness-75 ${_.button}`,children:i?y:u.jsx(zg,{})}),u.jsx(Ti,{children:u.jsx(Ri,{color:"sidebar",variant:"thin",theme:e,children:u.jsxs("div",{className:"w-[250px] max-h-[50vh]",children:[s&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center p-[10px] pb-0",children:[u.jsx(zg,{className:"login-trigger w-[46px] h-[46px]"}),u.jsx("div",{className:"ml-[12px]",children:u.jsx("h5",{className:"font-semibold line-clamp-1",children:s==null?void 0:s.displayName})})]}),u.jsx("div",{className:_.divide}),u.jsxs("button",{className:`${_.menuItem}`,onClick:()=>a("confirm"),children:[u.jsx(wT,{className:_.icon}),"Log out"]})]}),!s&&u.jsxs("button",{className:`${_.menuItem}`,onClick:p,children:[u.jsx(p5,{className:_.icon}),"Log in"]})]})})})]})]})]})]}),o&&u.jsx(yn,{closeModal:d,children:g})]})}function Wz({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"}))}const Hz=h.forwardRef(Wz),qz=Hz;function Kz({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z",clipRule:"evenodd"}))}const Qz=h.forwardRef(Kz),Gz=Qz;function au({song:t,...e}){const n=ke(),{user:r}=tt(),{theme:s,isOnMobile:i}=Z(),{setSuccessToast:o}=tn(),{userPlaylists:a}=Ge(),l=()=>{n(Ec({songs:[t]})),o({message:"Song added to queue"})},c={before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]",level2Menu:"w-[100%] absolute right-[calc(100%+5px)] hidden group-hover/add-playlist:block hover:block",menuItem:`hover:bg-${s.alpha} font-[500] ${s.content_hover_text} max-[549px]:!bg-transparent pl-[8px] rounded-[4px]`,menuIcon:"w-[18px] mr-[10px]",overlay:"absolute flex items-center justify-center inset-0 bg-[#000] bg-opacity-[.5]"},d=h.useMemo(()=>{if(!r)return u.jsx(u.Fragment,{});switch(e.variant){case"home":case"my-songs":case"dashboard-songs":return i?u.jsxs(Y,{className:`group relative ${c.menuItem}  ${s.content_hover_text} ${c.before}`,variant:"list",onClick:()=>e.handleOpenModal("add-to-playlist"),children:[u.jsx(ad,{className:c.menuIcon}),"Add to playlist"]}):u.jsxs(Y,{className:`group/add-playlist hover:!brightness-100 relative ${c.menuItem}  ${s.content_hover_text} ${c.before}`,variant:"list",children:[u.jsx(ad,{className:c.menuIcon}),"Add to playlist",u.jsx(Ri,{variant:"thin",className:`${c.level2Menu} z-[99] 
                  
                     `,color:"sidebar",theme:s,children:u.jsx("ul",{className:"w-full",children:!!(a!=null&&a.length)&&u.jsx(u.Fragment,{children:a.map((m,y)=>{const g=m.song_ids.includes(t.id);return u.jsxs("li",{onClick:()=>!g&&e.handleAddSongToPlaylist(m),className:`list-none w-full flex rounded-[4px] p-[5px] ${g&&"opacity-60 pointer-events-none"} ${c.menuItem}`,children:[u.jsx("span",{children:u.jsx(ko,{className:c.menuIcon})}),u.jsxs("p",{className:"line-clamp-1 text-left",children:[m.name," ",g&&"(Added)"]})]},y)})})})})]})}},[a]),f=h.useMemo(()=>{switch(e.variant){case"home":return u.jsxs(u.Fragment,{children:[u.jsxs(Y,{onClick:l,className:` ${c.menuItem}`,variant:"list",children:[u.jsx(ld,{className:c.menuIcon}),"Add to queue"]}),d]});case"playlist":case"dashboard-playlist":return u.jsx(u.Fragment,{children:u.jsxs(Y,{className:c.menuItem,variant:"list",onClick:e.handleRemoveSongFromPlaylist,children:[u.jsx(yx,{className:c.menuIcon}),"Remove"]})});case"my-songs":case"dashboard-songs":return u.jsxs(u.Fragment,{children:[e.variant!=="dashboard-songs"&&u.jsxs(Y,{onClick:l,className:` ${c.menuItem}`,variant:"list",children:[u.jsx(ld,{className:c.menuIcon}),"Add to queue"]}),d,u.jsxs(Y,{onClick:()=>e.handleOpenModal("edit"),className:` ${c.menuItem} `,variant:"list",children:[u.jsx(xT,{className:c.menuIcon}),"Edit"]}),u.jsx(ds,{to:`edit/${t.id}`,children:u.jsxs(Y,{className:` ${c.menuItem} `,variant:"list",children:[u.jsx(aj,{className:c.menuIcon}),t.lyric_id?"Edit lyric":"Add lyric"]})}),u.jsxs(Y,{onClick:()=>e.handleOpenModal("delete"),className:` ${c.menuItem} `,variant:"list",children:[u.jsx(kT,{className:c.menuIcon}),"Delete"]})]});case"queue":return u.jsxs(u.Fragment,{children:[u.jsxs(Y,{onClick:e.handleRemoveSongFromQueue,className:` ${c.menuItem}`,variant:"list",children:[u.jsx(yx,{className:c.menuIcon}),"Remove"]}),d]})}},[e]),p=h.useMemo(()=>{switch(e.variant){case"queue":return u.jsx(u.Fragment,{});default:return u.jsxs("div",{className:"pl-[10px] py-[6px]",children:[u.jsx("h5",{className:"line-clamp-1 font-[500]",children:t.name}),u.jsx("p",{className:"text-[14px] opacity-50 line-clamp-1",children:t.singer})]})}},[t]);return u.jsx(u.Fragment,{children:u.jsxs("div",{className:` ${e.variant==="queue"?"w-[140px]":"w-[200px]"} `,children:[p,f,u.jsxs("a",{target:"_blank",download:!0,href:t.song_url,className:` ${c.menuItem} w-full py-[5px] text-[14px] inline-flex items-center cursor-pointer`,children:[u.jsx(d5,{className:"w-[18px] mr-[10px]"}),"Download"]}),e.variant!=="queue"&&!i&&u.jsxs("p",{className:"opacity-50 font-[500] text-center text-[13px] mt-[10px]",children:["Uploaded by ",t.by]})]})})}const Xz=(t,e,n,r)=>h.useMemo(()=>({isChecked:t,setIsChecked:n,selectedSongs:e,setSelectedSongs:r}),[t,e]),SC=h.createContext(void 0),qv=()=>{const t=h.useContext(SC);if(t===void 0)return{isChecked:!1,setIsChecked:()=>{},selectedSongs:[],setSelectedSongs:()=>{},reset:()=>{}};const{setSelectedSongs:e,setIsChecked:n,...r}=t;return{...r,setSelectedSongs:e,setIsChecked:n,reset:()=>{e([]),n(!1)}}},Kv=({children:t,isChecked:e,selectedSongs:n,setIsChecked:r,setSelectedSongs:s})=>{const i=Xz(e,n,r,s);return u.jsx(SC.Provider,{value:i,children:t})};function zp({song:t,onClick:e,active:n=!0,index:r,className:s,...i}){const o=ke(),{theme:a,isOnMobile:l}=Z(),{user:c}=tt(),{isChecked:d,selectedSongs:f,setIsChecked:p,setSelectedSongs:m}=qv(),{userPlaylists:y}=Ge(),[g,_]=h.useState(!1),[x,v]=h.useState(!1),[w,E]=h.useState(""),{setErrorToast:S}=tn(),b=()=>E(""),{handleDeleteSong:I,handleAddSongToPlaylistMobile:T,handleAddSongToPlaylist:A,handleRemoveSongFromPlaylist:C,loading:O}=H7({song:t,closeModal:b,setIsOpenPopup:v}),z=ht=>{E(ht)},N=h.useMemo(()=>f?f.indexOf(t)!=-1:!1,[f]),$=h.useMemo(()=>c?c.like_song_ids.includes(t.id):!1,[c==null?void 0:c.like_song_ids,t]),V=()=>{r!==void 0&&o(K8({index:r}))},F=async()=>{if(c)try{}catch(ht){console.log(ht),S({message:"Error when liked song"})}finally{_(!1)}},Q=ht=>{if(!m||!f||!p){S({message:"Selected lack of props"});return}d!==void 0&&nb(ht,d,p,f,m)},R={button:`${a.content_hover_bg} p-[8px] rounded-full`,songListButton:"mr-[10px] text-[inherit]",itemContainer:`group/container flex flex-row rounded justify-between px-[10px] py-[10px] w-full border-b 
    border-${a.alpha} last:border-none p-[0px]`,imageFrame:` relative rounded-[4px] overflow-hidden flex-shrink-0 ${i.variant==="queue"?"w-[40px] h-[40px]":"h-[54px] w-[54px]"}`,overlay:"absolute flex items-center justify-center inset-0 bg-black/40",ctaWrapper:"flex items-center justify-end min-w-[86px] flex-shrink-0",menuBtnWrapper:"w-[50px] flex justify-center "},M=()=>{switch(i.variant){case"queue":return u.jsx(u.Fragment,{});case"uploading":return u.jsx("button",{className:`${R.songListButton}`,children:u.jsx(ko,{className:"w-[18px]"})});default:return l?u.jsx("button",{onClick:()=>Q(t),className:`${R.songListButton} text-[inherit]`,children:N?u.jsx(ao,{className:"w-[18px]"}):u.jsx(xl,{className:"w-[18px]"})}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>Q(t),className:`${R.songListButton} ${!N&&"hidden"} ${p&&m?"group-hover/main:block":""}`,children:N?u.jsx(ao,{className:"w-[18px]"}):u.jsx(xl,{className:"w-[18px]"})}),u.jsx("button",{className:`${R.songListButton} ${p&&m?"group-hover/main:hidden group-hover/main:mr-[0px]":""} ${N&&"hidden"}`,children:u.jsx(ko,{className:"w-[18px]"})})]})}},B=h.useMemo(()=>{switch(i.variant){case"uploading":return u.jsx(u.Fragment,{});default:return u.jsx("div",{className:`${R.overlay} 
               ${n?"":"hidden group-hover/main:flex"}`,children:n?u.jsx("img",{src:Hv,alt:"",className:"h-[18px] w-[18px]"}):u.jsx("div",{onClick:e,className:"cursor-pointer w-full h-full flex items-center justify-center",children:u.jsx(Gz,{className:"w-[24px] text-white"})})})}},[n,e]),k=u.jsxs("div",{className:"flex flex-row flex-grow props",children:[M(),u.jsxs("div",{className:"flex flex-grow ",onClick:l&&i.variant!=="uploading"?e:()=>{},children:[u.jsxs("div",{className:`${R.imageFrame}`,children:[u.jsx(Lr,{src:t.image_url,blurHashEncode:t.blurhash_encode}),B]}),u.jsxs("div",{className:`ml-[10px] ${i.variant==="queue"?"max-w-[96px]":""}`,children:[u.jsx("h5",{className:`font-[500] line-clamp-1 overflow-hidden ${i.variant==="queue"?"text-[13px]":""}`,children:t.name}),u.jsx("p",{className:"text-[13px] opacity-[.6] line-clamp-1",children:t.singer})]})]})]}),W=()=>{switch(i.variant){case"uploading":return u.jsx("div",{className:"opacity-[.6]",children:k});default:return k}},X=h.useMemo(()=>{if(g)return u.jsx(Ir,{className:"w-[20px] animate-spin"});switch(i.variant){case"dashboard-songs":case"dashboard-playlist":return u.jsx(u.Fragment,{});default:return c?u.jsxs("button",{onClick:F,className:`${R.button} max-[549px]:!bg-transparent group`,children:[u.jsx(qz,{className:`w-[20px]  ${$?`${a.content_text} block group-hover:hidden`:"text-white hidden group-hover:block"}`}),u.jsx(bT,{className:`w-[20px] ${$?"hidden group-hover:block":"block group-hover:hidden"}`})]}):u.jsx(u.Fragment,{})}},[F,$]),ee=h.useMemo(()=>{switch(i.variant){case"home":case"dashboard-songs":return u.jsx(au,{variant:i.variant,handleAddSongToPlaylist:A,handleOpenModal:z,song:t});case"my-songs":case"favorite":return u.jsx(au,{variant:"my-songs",handleAddSongToPlaylist:A,handleOpenModal:z,song:t});case"my-playlist":case"admin-playlist":case"dashboard-playlist":return u.jsx(au,{variant:"playlist",handleRemoveSongFromPlaylist:C,handleOpenModal:z,song:t});case"queue":return u.jsx(au,{handleRemoveSongFromQueue:V,variant:"queue",handleOpenModal:z,song:t});default:return u.jsx(u.Fragment,{})}},[i.variant,t,x]),Pe=h.useMemo(()=>{switch(w){case"":return u.jsx(u.Fragment,{});case"edit":return u.jsx(tB,{close:b,song:t});case"delete":return u.jsx(or,{loading:O,label:`Delete '${t.name}' ?`,desc:"This action cannot be undone",theme:a,callback:I,close:b});case"add-to-playlist":return u.jsx(sW,{loading:O,handleAddSongToPlaylist:T,close,song:t,userPlaylists:y})}},[w,O]),le=()=>{switch(i.variant){case"uploading":return u.jsxs("div",{className:"flex items-center",children:[u.jsx("span",{children:u.jsx(Ir,{className:"w-[20px] mr-[10px] animate-spin"})}),u.jsx("p",{className:"text-[14px]",children:"In process..."})]});default:return u.jsxs("div",{className:R.ctaWrapper,children:[X,u.jsxs("div",{className:R.menuBtnWrapper,children:[u.jsxs(Ei,{isOpenFromParent:x,setIsOpenFromParent:v,placement:i.variant==="queue"?"bottom-end":"left",children:[u.jsx(Si,{asChild:!0,children:u.jsx("button",{className:`block group-hover/main:block ${R.button} ${x||i.variant==="queue"?"md:block":"md:hidden max-[549px]:!bg-transparent"}`,children:u.jsx(m7,{className:"w-[20px]"})})}),u.jsx(Ti,{children:u.jsxs(Ri,{className:`${O?"overflow-hidden relative":""}`,variant:"thin",color:"sidebar",theme:a,children:[ee,O&&u.jsx("div",{className:R.overlay,children:u.jsx("div",{className:"h-[25px] w-[25px] border-[2px] border-r-black rounded-[50%] animate-spin"})})]})})]}),u.jsx("span",{className:`text-[12px] font-[500] hidden  group-hover/main:hidden ${x||i.variant==="queue"?"hidden":"md:block"}`,children:No(t.duration)})]})]})}},Ve=()=>{switch(i.variant){case"uploading":return u.jsxs("div",{className:`${R.itemContainer} ${s||""} `,children:[W(),le()]});case"queue":return u.jsxs("div",{className:`${R.itemContainer} group/main py-[6px] ${n?`${a.content_bg} text-white`:`hover:bg-${a.alpha}`}`,children:[W(),le()]});default:return u.jsxs("div",{className:`${R.itemContainer} ${s||""} 
               group/main ${n||N?`bg-${a.alpha}`:`hover:bg-${a.alpha}`}
               `,children:[W(),le()]})}};return u.jsxs(u.Fragment,{children:[Ve(),w&&u.jsx(yn,{closeModal:b,children:Pe})]})}const Yz=({data:t,active:e,onClick:n,hasTitle:r,classNames:s,theme:i,idleClass:o},a)=>{const l={container:"flex flex-col",imageFrame:"group relative transition-[width] duration-[.3s] origin-center rounded-[6px] overflow-hidden",image:"select-none object-cover object-center rounded w-full",overlay:`absolute  ${e?"":"inset-0 hidden bg-opacity-60 bg-[#333] items-center justify-center"}   group-hover:flex`,playingGifFrame:"absolute h-[30px] w-[30px] bottom-[15px] left-[15px] -z-1",title:"text-[22px] text-white mt-[10px] font-bold text-ellipsis line-clamp-1"};if(t)return u.jsxs("div",{ref:a,className:`${l.container} ${o||""}`,children:[u.jsx("div",{className:`song-thumb ${s??""} flex items-end justify-center flex-shrink-0 w-[350px] h-[350px] min-[1536px]:w-[450px] min-[1536px]:h-[450px] `,children:u.jsxs("div",{className:`${l.imageFrame} ${e?"w-[350px] min-[1536px]:w-[450px]":"w-[280px] min-[1536px]:w-[330px]"}`,children:[u.jsx(Lr,{classNames:"rounded-[6px]",src:t.image_url,blurHashEncode:t.blurhash_encode}),u.jsx("div",{className:`${l.overlay}`,children:!e&&u.jsx(Y,{onClick:n,variant:"circle",className:`h-[50px] w-[50px] text-white ${i.content_hover_text}`,children:u.jsx(dh,{className:"w-full"})})}),e&&u.jsx("div",{className:l.playingGifFrame,children:u.jsx("img",{src:Hv,alt:""})})]})}),r&&u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:l.title,children:(t==null?void 0:t.name)||"Some song"}),u.jsx("p",{className:"text-md opacity-50 line-clamp-1",children:(t==null?void 0:t.singer)||"..."})]})]})},Wp=h.forwardRef(Yz);function Jz({data:t,active:e}){const n={container:"flex flex-col",imageFrame:"rounded-[4px] overflow-hidden",image:"select-none object-cover object-center w-full"};if(t)return u.jsx("div",{className:`${n.container} ${e?"w-full px-[20px]":"w-[60px] h-[60px] flex-shrink-0"}`,children:u.jsx("div",{className:`${n.imageFrame}`,children:u.jsx(Lr,{src:t.image_url,classNames:"w-full"})})})}function jr({songs:t,...e}){const{theme:n}=Z(),{currentSong:r}=K(ge),{queueSongs:s}=K(ur),i=h.useMemo(()=>e.variant!=="uploading"?u.jsx(u.Fragment,{}):t.map((l,c)=>{const d={key:c,onClick:()=>{},song:l};return c==0?u.jsx(zp,{variant:"uploading",className:"temp-song",...d}):u.jsx(zp,{variant:"uploading",...d})}),[e]),o=u.jsx("p",{className:"text-center my-[60px]",children:"... \\_()_/"}),a=h.useMemo(()=>{if(e.variant==="uploading")return u.jsx(u.Fragment,{});switch(e.variant){case"my-songs":if(!t.length&&!e.tempSongs.length)return o;break;default:if(!t.length)return o}const{handleSetSong:l,activeExtend:c=!0}=e;return t.map((d,f)=>{let p=c&&r.id===d.id;e.variant==="queue"&&(p=p&&r.currentIndex===f);const m=r.currentIndex===s.length-1;return u.jsxs("div",{children:[u.jsx(zp,{active:p,onClick:()=>l(d,f),variant:e.variant,song:d,index:f}),e.variant==="queue"&&p&&!m&&u.jsx("div",{className:"mt-[12px] mb-[4px]",children:u.jsx("p",{className:`${n.content_text} text-[14px] font-[600]`,children:"Playing next"})})]},d.id+d.name.length+f)})},[r,e,s,n]);return u.jsxs(u.Fragment,{children:[a,i]})}function Qv({tabs:t,activeTab:e,setActiveTab:n,className:r,render:s,inFullScreen:i}){const{theme:o}=Z();return u.jsx("ul",{className:`flex space-x-[4px] py-[4px] h-full px-[4px] items-center ${i?"mx-auto":""} rounded-full ${i?"bg-white/10":o.side_bar_bg} ${r&&r}`,children:t.map((a,l)=>u.jsx("li",{onClick:()=>n(a),className:`${i?"px-[30px]":"px-[20px]"}  cursor-pointer hover:bg-white/20 h-full rounded-full max-[549px]:px-[15px] ${i?"":o.content_hover_text} ${e===a?i?"bg-white/20":`${o.content_text} ${o.container}`:"opacity-60"}`,children:u.jsx("span",{className:"leading-[27px] font-semibold max-[549px]:font-normal",children:s(a)})},l))})}function TC({to:t}){const{theme:e}=Z(),n=en(),r=mn(),s=o=>{typeof t=="string"&&AN(t),o==="back"&&n(-1)},i={button:`h-[36px] w-[36px] p-[4px] rounded-full ${e.content_hover_bg} bg-${e.alpha}`};return u.jsx("div",{className:"flex gap-[10px] mb-[30px]",children:u.jsx("button",{onClick:()=>s("back"),className:`${i.button} ${r.pathname==="/"?"opacity-60 pointer-events-none":""}`,children:u.jsx(RA,{})})})}const Zz=({time:t=6e3,autoClose:e})=>{const{setToasts:n,toasts:r}=tn(),{theme:s}=Z(),[i,o]=h.useState(""),a=c=>{n(d=>d.filter(f=>f.id!=c))};h.useEffect(()=>{i&&n(c=>c.filter(d=>d.id!=i))},[i]),h.useEffect(()=>{if(!e||!r.length)return;const c=r[r.length-1].id;setTimeout(()=>{o(c)},t)},[r]);const l={container:"toast-portal fixed z-[199] bottom-[100px] left-[20px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:Qo.createPortal(u.jsx("div",{className:l.container,children:u.jsx("div",{className:"flex flex-col gap-[10px]",children:!!r.length&&r.map((c,d)=>u.jsx(nB,{onClick:a,theme:s,toast:c},d))})}),document.getElementById("portals"))})};function eW({user:t},e){return e?u.jsx("p",{className:"text-xl mb-4 ml-2",ref:e,children:t.display_name}):u.jsx("p",{className:"text-xl mb-4 ml-2",children:t.display_name})}h.forwardRef(eW);function tW(){const{theme:t}=Z(),[e]=_c(Ts),[n,r]=h.useState(""),{logOut:s}=Tc(),i=()=>r(""),o=async()=>{try{await s()}catch(c){console.log("signOut error",{messsage:c})}finally{i()}},a=h.useMemo(()=>{switch(n){case"":return u.jsx(u.Fragment,{});case"logout":return u.jsx(or,{callback:o,close:i,loading:!1,theme:t,label:"Log out ?"});case"info":return u.jsx(Gv,{close:i});case"theme":return}},[n]),l={header:`${t.side_bar_bg} fixed top-0 z-10 left-0 right-0`,container:"container mx-auto px-[40px] flex justify-between items-center h-[50px]",avatarFrame:"w-[34px] h-[34px] rounded-full",settingBtn:` flex ml-[12px] justify-center items-center hover:brightness-75 bg-${t.alpha}`};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`${l.header}`,children:u.jsxs("div",{className:l.container,children:[u.jsxs(ds,{to:"/dashboard",className:"text-[24px] font-semibold",children:["HD",u.jsx("span",{className:`${t.content_text} ml-[4px] uppercase`,children:"Dashboard"})]}),u.jsxs("div",{className:"flex items-center",children:[(e==null?void 0:e.displayName)&&u.jsx("p",{className:"text-[14px] mr-[8px]",children:e.displayName}),u.jsx("div",{className:`${l.avatarFrame} overflow-hidden `,children:(e==null?void 0:e.photoURL)&&u.jsx("img",{src:e.photoURL,className:"w-full",alt:""})}),u.jsxs(Ei,{placement:"bottom-end",children:[u.jsx(Si,{className:`${l.avatarFrame} ${l.settingBtn}`,children:u.jsx(ST,{className:"w-[24px]"})}),u.jsx(Ti,{children:u.jsx(EC,{loggedIn:!1,setIsOpenModal:()=>{}})})]})]})]})}),!!n&&u.jsx(yn,{closeModal:i,children:a})]})}const nW="/HD-MP3/assets/user-default-971f59df.png";function zg({className:t}){const[e]=_c(Ts),n={imageFrame:`${t||"w-[35px] h-[35px]"} flex-shrink-0 rounded-full overflow-hidden ${e!=null&&e.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`};return u.jsx("div",{className:n.imageFrame,children:u.jsx(Lr,{src:(e==null?void 0:e.photoURL)||nW,classNames:"w-full"})})}function rW({cb:t,isPlaying:e,play:n,isOpenFullScreen:r}){const s=ke(),{theme:i}=Z(),{playStatus:{isTimer:o}}=K(Wt),[a,l]=h.useState(()=>Yn().isTimer||0),[c,d]=h.useState(0),[f,p]=h.useState(!1),m=h.useRef(),y=h.useRef(0),g=h.useRef(0),_=h.useRef(!1),x=()=>{g.current=0,p(!1),n()},v=()=>p(!1),w=()=>{v(),g.current=0},E=()=>{s(It({isTimer:0})),l(0),gt("isTimer",0)};return h.useEffect(()=>{if(c){if(a===1){console.log("pause"),t(),l(0),s(It({isTimer:0})),gt("isTimer",0),p(!0);return}l(a-1)}},[c]),h.useEffect(()=>{if(o){if(console.log("check sec",a,g.current),!e&&a===g.current)_.current=!0,n();else if(!e)return;return a||(l(o),g.current=o),m.current=setInterval(()=>{d(Math.random())},1e3),()=>{clearInterval(m.current),d(0)}}},[o,e]),h.useEffect(()=>()=>{_.current=!1,a&&(g.current=0)},[o]),h.useEffect(()=>{a&&(y.current+=1,y.current===5&&(gt("isTimer",a),y.current=0))},[a]),u.jsxs(u.Fragment,{children:[!!a&&!r&&u.jsx("div",{className:"absolute bottom-[100%] w-[70%] left-[50%] translate-x-[-50%]",children:u.jsxs("div",{className:`${i.content_bg} flex justify-center gap-[10px] py-[2px] text-[13px] px-[20px] rounded-tl-[4px] rounded-tr-[4px]`,children:[u.jsxs("p",{className:" text-[13px]",children:["Song stop in ",No(a)]}),u.jsx("button",{onClick:E,children:u.jsx(Xs,{className:"w-[18px]"})})]})}),f&&u.jsx(yn,{closeModal:v,children:u.jsxs("div",{className:"w-[500px] max-w-[calc(100vw-40px)]",children:[u.jsxs("h1",{className:"text-[22px]",children:["You have been listened music in ",No(g.current)]}),u.jsxs("div",{className:"flex gap-[10px] mt-[30px]",children:[u.jsx(Y,{onClick:()=>x(),size:"normal",className:`${i.content_bg} rounded-[99px]`,children:"Continue playing"}),u.jsx(Y,{onClick:w,size:"normal",className:`bg-${i.alpha} rounded-[99px]`,children:"Close"})]})]})})]})}function Gv({close:t}){return u.jsxs("div",{className:"w-[400px] max-w-[calc(90vw-40px)]",children:[u.jsx(Fs,{close:t,title:"HD Player"}),u.jsxs("div",{className:"",children:[u.jsx("h5",{className:"text-lg font-bold",children:"Cc cng ngh s dng:"}),u.jsxs("ul",{children:[u.jsx("li",{className:"text-lg my-[10px]  ml-[20px]",children:"React - TS"}),u.jsx("li",{className:"text-lg my-[10px]  ml-[20px]",children:"Google firebase"})]}),u.jsx("a",{href:"asldj",target:"_blank",className:"text-lg font-bold",children:"#Github"})]})]})}function q_({onClick:t,theme:e,active:n}){return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"w-[25%] px-[10px] max-[549px]:w-[50%]",children:[u.jsx("div",{onClick:()=>t(e),className:`relative border-l-[20px] ${e.content_border} pt-[100%] rounded-xl ${e.side_bar_bg} ${n?e.content_border:""}`,children:n&&u.jsx("div",{className:"absolute bottom-[10px] right-[10px]",children:u.jsx(_T,{className:`${e.content_text} w-[25px]`})})}),u.jsx("p",{className:"text-[14px] mt-[6px]",children:e.name})]})})}function bC({close:t}){const{theme:e,setTheme:n}=Z(),r=a=>{gt("theme",a.id),n(a)},s={songItemContainer:`w-full border-b border-${e.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[900px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-y-auto overflow-x-hidden no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap",linkItem:`py-[10px] border-b border-${e.alpha} last:border-none`},i=cd.map(a=>{const l=a.id===e.id;if(a.type==="light")return u.jsx(q_,{active:l,theme:a,onClick:r},a.id)}),o=cd.map(a=>{const l=a.id===e.id;if(a.type==="dark")return u.jsx(q_,{active:l,theme:a,onClick:r},a.id)});return u.jsxs("div",{className:s.popupWrapper,children:[u.jsx(Fs,{close:t,title:"Themes"}),u.jsxs("div",{className:s.themeContainer,children:[u.jsx("h2",{className:"text-md font-semibold mb-[10px]",children:"Dark"}),u.jsx("div",{className:s.themeList,children:o}),u.jsx("h2",{className:"text-md font-semibold mb-[10px] mt-[30px]",children:"Light"}),u.jsx("div",{className:s.themeList,children:i})]})]})}function or({loading:t,theme:e,callback:n,label:r,close:s,buttonLabel:i,desc:o="This action cannot be undone",className:a}){return u.jsxs("div",{className:`${a||"w-[400px] max-w-[calc(90vw-40px)]"} ${t?"opacity-60 pointer-events-none":""}`,children:[u.jsx("h1",{className:"text-[20px] font-semibold",children:r||"Wait a minute"}),o&&u.jsx("p",{className:" text-[16px] font-semibold text-red-500",children:o}),u.jsxs("div",{className:"flex gap-[10px] mt-[20px]",children:[u.jsx(Y,{onClick:s,className:`${e.content_bg} rounded-full text-[14px]`,variant:"primary",children:"Close"}),u.jsx(Y,{isLoading:t,className:" text-[#fff] bg-red-500 rounded-full text-[14px] font-bold",variant:"primary",onClick:n,children:i||"Yes please"})]})]})}function K_({close:t,addPlaylist:e,isFetching:n}){const{theme:r}=Z(),[s,i]=h.useState(""),o=h.useRef(null),a=async l=>{l.preventDefault(),s&&(await e(s),t())};return h.useEffect(()=>{var l;(l=o.current)==null||l.focus()},[]),u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]:",children:[u.jsx(Fs,{close:t,title:"Add playlist"}),u.jsxs("form",{action:"",onSubmit:a,children:[u.jsx("input",{ref:o,className:`bg-${r.alpha} px-[20px] rounded-full outline-none mt-[10px] text-[16px]  h-[35px] w-full`,type:"text",placeholder:"name...",value:s,onChange:l=>i(l.target.value)}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(Y,{type:"submit",isLoading:n,variant:"primary",className:`${r.content_bg} rounded-full ${s?"":"opacity-[.6] pointer-events-none"}`,children:"Save"})})]})]})}function sW({close:t,handleAddSongToPlaylist:e,userPlaylists:n,song:r,loading:s}){return u.jsxs("div",{className:`w-[400px] max-w-[calc(90vw-40px)] ${s?"opacity-60 pointer-events-none":""}`,children:[u.jsx(Fs,{close:t,title:"Playlist"}),u.jsx("div",{className:"max-h-[60vh]",children:u.jsx("ul",{className:"",children:!!(n!=null&&n.length)&&u.jsx(u.Fragment,{children:n.map((i,o)=>{const a=i.song_ids.includes(r.id);return u.jsxs("li",{onClick:()=>!a&&e(i),className:`list-none flex rounded-[4px] p-[5px] ${a&&"opacity-60"}`,children:[u.jsx(ko,{className:"w-[20px] mr-[5px]"}),u.jsxs("p",{children:[i.name," ",a&&"(added)"]})]},o)})})})})]})}function Xv({close:t}){const e=ke(),{theme:n}=Z(),[r,s]=h.useState(),[i,o]=h.useState(""),[a,l]=h.useState(""),{setSuccessToast:c}=tn(),d={button:"text-[14px] font-[500] px-[10px]  py-[4px] rounded-[99px]",input:`bg-${n.alpha} px-[10px] rounded-[4px] outline-none mt-[10px] text-[16px]  h-[35px] w-full`},f=(g,_)=>{console.log("handleSelect",g),_.stopPropagation(),_.preventDefault(),l(""),o(""),s(g)},p=(g,_)=>{s(""),g=="minute"?o(_):l(_)},m=()=>{let g;r?g=+r:g=+a*60+ +i,e(It({isTimer:g})),gt("isTimer",g),c({message:"Timer added"}),t()},y=r||a||i;return u.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]",children:[u.jsx(Fs,{close:t,title:"Sleep timer"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex space-x-[10px] mb-[12px]",children:[u.jsx("button",{type:"button",onClick:g=>f("5",g),className:`${d.button} ${r==="5"?n.content_bg:`${n.content_border} border`}`,children:"5 min"}),u.jsx("button",{type:"button",onClick:g=>f("15",g),className:`${d.button} ${r==="15"?n.content_bg:`${n.content_border} border`}`,children:"15 min"}),u.jsx("button",{type:"button",onClick:g=>f("30",g),className:`${d.button} ${r==="30"?n.content_bg:`${n.content_border} border`}`,children:"30 min"})]}),u.jsxs("div",{className:"flex mx-[-10px]",children:[u.jsxs("div",{className:"flex flex-col w-[50%] px-[10px]",children:[u.jsx("label",{htmlFor:"hour_input",children:"Hour"}),u.jsxs("select",{value:a,onChange:g=>p("hour",g.target.value),id:"hour_input",className:d.input,children:[u.jsx("option",{value:"0",children:"---"}),u.jsx("option",{value:"1",children:"1"}),u.jsx("option",{value:"2",children:"2"}),u.jsx("option",{value:"3",children:"3"})]})]}),u.jsxs("div",{className:"flex flex-col w-[50%] px-[10px]",children:[u.jsx("label",{htmlFor:"minute_input",children:"Minute"}),u.jsxs("select",{value:i,onChange:g=>p("minute",g.target.value),className:d.input,id:"minute_input",children:[u.jsx("option",{className:d.input,value:"0",children:"---"}),u.jsx("option",{value:"15",children:"15"}),u.jsx("option",{value:"30",children:"30"}),u.jsx("option",{value:"45",children:"45"})]})]})]}),u.jsx("p",{className:"text-right mt-[20px]",children:u.jsx(Y,{onClick:m,variant:"primary",className:`${n.content_bg} rounded-full ${y?"":"opacity-60 pointer-events-none"}`,children:"Ok"})})]})]})}function IC({admin:t}){const e=h.useRef(null),n=h.useRef(null),r=h.useRef(null),{handleInputChange:s}=Y7({audioRef:e,testImageRef:r,inputRef:n,admin:t}),i={container:"upload portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return u.jsx(u.Fragment,{children:Qo.createPortal(u.jsxs("div",{className:i.container,children:[u.jsx("audio",{className:"hidden",ref:e}),u.jsx("input",{ref:n,onChange:s,type:"file",multiple:!0,accept:"audio",id:"song_upload",className:"hidden"}),u.jsx("img",{className:"hidden",ref:r})]}),document.getElementById("portals"))})}function Hp({children:t}){const{theme:e}=Z();return u.jsx(u.Fragment,{children:u.jsxs("div",{className:`${e.container} min-h-screen ${e.type==="dark"?"text-white":"text-[#333]"}`,children:[u.jsx(tW,{}),u.jsxs("div",{className:"h-[calc(100vh-50px)] no-scrollbar overflow-auto",children:[u.jsx("div",{className:"h-[100px]"}),u.jsx("div",{className:"container mx-[auto] px-[40px]",children:t})]}),u.jsx(_C,{admin:!0}),u.jsx(IC,{admin:!0})]})})}function RC(){const t=ke(),{userPlaylists:e,setUserPlaylists:n}=Ge(),{currentPlaylist:r}=K($s),{currentSong:s}=K(ge),[i,o]=h.useState(!1),a=en(),{setErrorToast:l}=tn();return{isFetching:i,addAdminPlaylist:async f=>{try{if(!f)throw new Error("playlist name invalid");const p=Zy(f)+"_admin",m=t0({id:p,by:"admin",name:f});o(!0);const y=[...e,m];await bn({collection:"playlist",data:m,id:p,msg:">>> api: set playlist doc"}),n(y)}catch(p){console.log({message:p}),l({})}finally{o(!1)}},deleteAdminPlaylist:async()=>{o(!0),await Ul({collection:"playlist",id:r.id,msg:">>> api: delete playlist doc"});const f=e.filter(p=>p.id!==r.id);n(f),t(Mv()),s.song_in===`playlist_${r.id}`&&t(Rs()),o(!1),a("/dashboard")}}}function Yv({playlist:t,loading:e,activeCondition:n=!0,className:r,...s}){const{theme:i}=Z(),{currentSong:o}=K(ge),[a,l]=h.useState(!1),{addPlaylist:c,isFetching:d}=Ni(),{addAdminPlaylist:f,isFetching:p}=RC(),m=()=>l(!1),y={playlistItem:"w-1/4 p-[8px] max-[800px]:w-1/2"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`flex flex-row flex-wrap -mx-[8px] ${r}`,children:[e&&UO,!e&&u.jsxs(u.Fragment,{children:[t.length?t.map((g,_)=>{const x=n&&o.song_in.includes(g.id);switch(s.location){case"home":case"my-songs":return u.jsx("div",{className:y.playlistItem,children:u.jsx(Bg,{active:x,theme:i,data:g})},_);case"dashboard":return u.jsx("div",{className:y.playlistItem,children:u.jsx(Bg,{active:x,theme:i,data:g,link:`/dashboard/playlist/${g.id}`})},_)}}):s.location==="home"&&u.jsx("p",{className:"text-center w-full",children:"..."}),s.location!=="home"&&u.jsx("div",{className:`${y.playlistItem} mb-[25px]`,children:u.jsx(eL,{theme:i,className:"pt-[100%]",onClick:()=>l(!0)})})]})]}),s.location!=="home"&&a&&u.jsxs(yn,{closeModal:m,children:[s.location==="my-songs"&&u.jsx(K_,{addPlaylist:c,isFetching:d,close:m}),s.location==="dashboard"&&u.jsx(K_,{addPlaylist:f,isFetching:p,close:m})]})]})}function iW(){const{theme:t}=Z(),{loading:e,user:n}=tt(),{logIn:r}=Tc(),s=async()=>{try{await r()}catch(o){console.log(o)}finally{}},i={icon:"w-6 h-6 mr-2 inline",linkItem:`py-[10px] border-b border-${t.alpha} last:border-none`,button:`${t.content_bg} rounded-full`};return u.jsx("div",{className:"pb-[20px]",children:u.jsxs("div",{className:"flex flex-col gap-3 items-start ",children:[u.jsx("h1",{className:"text-[24px] font-bold",children:"Library"}),e?[...Array(3).keys()].map(()=>ib):u.jsx(u.Fragment,{children:n?u.jsxs(u.Fragment,{children:[u.jsx(lo,{className:i.linkItem,to:yt.MySongs,icon:u.jsx(ko,{className:i.icon+t.content_text}),label:"All songs",arrowIcon:u.jsx(Zf,{className:"w-5 h-5 text-gray-500"})}),u.jsx(lo,{className:i.linkItem,to:yt.MySongs,icon:u.jsx(bT,{className:i.icon+t.content_text}),label:"Favorite",arrowIcon:u.jsx(Zf,{className:"w-5 h-5 text-gray-500"})}),u.jsx(lo,{className:i.linkItem,to:yt.MySongs,icon:u.jsx(ET,{className:i.icon+t.content_text}),label:"Recent",arrowIcon:u.jsx(Zf,{className:"w-5 h-5 text-gray-500"})})]}):u.jsx(Y,{onClick:s,className:`${t.content_bg} rounded-[4px] px-[40px]`,variant:"primary",children:"Login"})})]})})}function oW(){const{theme:t}=Z(),{loading:e,user:n}=tt(),{logOut:r}=Tc(),[s,i]=h.useState(""),o=()=>i(""),a=async()=>{try{await r()}catch(d){console.log("signOut error",{messsage:d})}finally{o()}},l=h.useMemo(()=>{switch(s){case"theme":return u.jsx(bC,{close:o});case"info":return u.jsx(Gv,{close:o});case"logout":return u.jsx(or,{close:o,callback:a,loading:!1,theme:t,label:"Log out ?"})}},[s]),c={linkItem:`py-[10px] border-b border-${t.alpha} last:border-none`,button:`${t.content_bg} rounded-full`,icon:"w-[24px] mr-2"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[10px]",children:"Setting"}),u.jsx(zg,{className:"h-[65px] w-[65px]"}),e?u.jsx(Be,{className:"my-[8px] h-[27px]"}):u.jsx("p",{className:"text-[18px] font-[500] my-[8px]",children:n?n.display_name:"Guest"}),e?[...Array(3).keys()].map(()=>ib):u.jsxs(u.Fragment,{children:[u.jsx(lo,{className:c.linkItem,icon:u.jsx(RT,{className:c.icon}),label:"Theme",onClick:()=>i("theme")}),u.jsx(lo,{className:c.linkItem,icon:u.jsx(IT,{className:c.icon}),label:"Info",onClick:()=>i("info")}),n&&u.jsx(lo,{className:c.linkItem,icon:u.jsx(wT,{className:c.icon}),label:"Logout",onClick:()=>i("logout")})]})]}),s&&u.jsx(yn,{closeModal:o,children:l})]})}function ba({children:t,reset:e,...n}){switch(n.location){case"home":case"dashboard-songs":return u.jsxs(u.Fragment,{children:[t,u.jsx(Y,{onClick:e,className:"px-[5px] flex-shrink-0",children:u.jsx(Xs,{className:"w-[20px]"})})]});case"my-playlist":case"my-songs":case"dashboard-playlist":case"admin-playlist":return u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:n.selectAll,className:"ml-[10px]",children:u.jsx(xl,{className:"w-[18px]"})}),t,u.jsx(Y,{onClick:e,className:"px-[5px] flex-shrink-0",children:u.jsx(Xs,{className:"w-[20px]"})})]})}}const Bs=({children:t,onClick:e,className:n})=>u.jsx(Y,{onClick:e,variant:"outline",size:"small",className:n,children:t});function Hl({children:t,...e}){const n=ke(),{theme:r}=Z(),{user:s}=tt(),{isChecked:i,selectedSongs:o,setIsChecked:a,setSelectedSongs:l,reset:c}=qv(),{currentSong:d}=K(ge),{queueSongs:f}=K(ur),{playlistSongs:p}=K($s),{userSongs:m,setUserSongs:y}=Ge(),[g,_]=h.useState(!1),[x,v]=h.useState(""),{setErrorToast:w,setSuccessToast:E}=tn(),{deleteSongsFromPlaylist:S,isFetching:b}=Ni(),I=()=>{v("")},T=()=>{o.length<m.length?l(m):c()},A=()=>{o.length<p.length?l(p):c()},C=()=>{n(Ec({songs:o})),E({message:"songs added to queue"}),c()},O=async()=>{if(s)try{_(!0);const F=o.map(R=>R.id);for(let R of o)await bA(R);const Q=m.filter(R=>!F.includes(R.id));if(d.song_in==="user"){const R=f.filter(M=>!F.includes(M.id));R.length!==f.length&&n(Sc({songs:R}))}F.includes(d.id)&&n(Rs()),y(Q),E({message:`${o.length} songs deleted`})}catch(F){console.log({message:F}),w({})}finally{c(),_(!1),I()}},z=async()=>{try{await S(o)}catch(F){console.log(F),w({message:"Error when delete song"})}finally{I(),a(!1),l([])}},N={outlineButton:`border-${r.alpha} ${r.side_bar_bg}`},$=h.useMemo(()=>{if(x)switch(x){case"delete-selected-songs":return u.jsx(or,{loading:g,label:`Delete ${o.length} songs ?`,theme:r,callback:O,close:I});case"remove-selects-songs":return u.jsx(or,{loading:b,label:`Remove ${o.length} songs ?`,theme:r,callback:z,close:I})}},[x,b,g]),V=h.useMemo(()=>{switch(e.location){case"home":return u.jsxs(u.Fragment,{children:[!i&&u.jsx("h3",{className:"text-2xl font-bold mr-[14px]",children:"Songs"}),i&&u.jsxs(ba,{location:e.location,reset:()=>{},children:[u.jsx("p",{className:"font-semibold opacity-[.6]",children:o.length}),u.jsxs(Bs,{onClick:C,className:N.outlineButton,children:[u.jsx(CT,{className:"w-[20px] mr-[4px]"}),"Add to songs queue"]})]})]});case"dashboard-songs":return u.jsxs(u.Fragment,{children:[!i&&t,i&&u.jsxs(ba,{location:e.location,reset:c,children:[u.jsx("p",{className:"font-semibold opacity-[.6]",children:o.length}),u.jsx(Bs,{onClick:()=>console.log("confirm modal"),className:N.outlineButton,children:"Delete"})]})]});case"my-songs":return u.jsxs(u.Fragment,{children:[!i&&t,i&&u.jsxs(ba,{selectAll:T,location:e.location,reset:c,children:[u.jsx("p",{className:"font-semibold opacity-[.6]",children:o.length}),u.jsx(Bs,{onClick:C,className:N.outlineButton,children:"Add to songs queue"}),u.jsx(Bs,{onClick:()=>v("delete-selected-songs"),className:N.outlineButton,children:"Delete"})]})]});case"dashboard-playlist":case"my-playlist":return u.jsxs(u.Fragment,{children:[!i&&t,i&&u.jsxs(ba,{selectAll:A,location:e.location,reset:c,children:[u.jsx("p",{className:"font-semibold opacity-[.6]",children:o.length}),e.location!=="dashboard-playlist"&&u.jsx(Bs,{onClick:C,className:N.outlineButton,children:"Add to songs queue"}),u.jsx(Bs,{onClick:()=>v("remove-selects-songs"),className:N.outlineButton,children:"Remove"})]})]});case"admin-playlist":return u.jsxs(u.Fragment,{children:[!i&&u.jsx("h3",{className:"text-2xl font-bold mr-[14px]",children:"Songs"}),i&&u.jsxs(ba,{selectAll:A,location:e.location,reset:c,children:[u.jsx("p",{className:"font-semibold opacity-[.6]",children:o.length}),u.jsx(Bs,{onClick:C,className:N.outlineButton,children:"Add to songs queue"})]})]})}},[i,o,e]);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center space-x-[8px]",children:V}),x&&u.jsx(yn,{closeModal:I,children:$})]})}function aW({loading:t}){const e=ke(),{adminSongs:n}=Ge(),{from:r}=K(ur),{currentSong:s}=K(ge),[i,o]=h.useState(!1),[a,l]=h.useState([]),c=(d,f)=>{(s.id!==d.id||s.song_in!=="admin")&&(e(Zt({...d,currentIndex:f})),(r.length>1||r[0]!=d.song_in)&&e(Sc({songs:n})))};return u.jsxs(Kv,{isChecked:i,setIsChecked:o,selectedSongs:a,setSelectedSongs:l,children:[u.jsx(Hl,{location:"home"}),t&&yh,!t&&u.jsx(u.Fragment,{children:n.length?u.jsx(u.Fragment,{children:u.jsx(jr,{variant:"home",handleSetSong:c,activeExtend:s.song_in==="admin"||s.song_in==="favorite",songs:n})}):u.jsx("h1",{className:"text-[22px] text-center",children:"..."})})]})}function lW(){const{loading:t}=tt(),{adminPlaylists:e}=Ge(),{isOnMobile:n}=Z(),{loading:r}=Sf({});return u.jsxs(u.Fragment,{children:[n&&u.jsx(iW,{}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsx("h3",{className:"text-[24px] font-bold mb-[14px]",children:"Popular"}),u.jsx(Yv,{loading:r||t,playlist:e,location:"home"})]}),u.jsx("div",{className:"pb-[30px]",children:u.jsx(aW,{loading:r})}),n&&u.jsx(oW,{})]})}function cW(){const{theme:t}=Z(),{currentSong:e}=K(ge),{userSongs:n}=Ge(),[r,s]=h.useState(),[i,o]=h.useState({base:"",real_time:[],id:""}),a=h.useRef(null),[l,c]=h.useState(!1),d=h.useRef(!1),{errorMsg:f,loading:p,initial:m}=Sf({}),y=en(),g=uh(),_=h.useCallback(async v=>{try{if(v.lyric_id){c(!0);const w=await Wo({collection:"lyrics",id:v.lyric_id,msg:">>> api: get lyric doc"});if(w.exists()){const E=w.data();o(E)}}}catch(w){console.log({message:w})}finally{c(!1)}},[]),x=h.useCallback(async()=>{if(console.log("get song"),e.name&&e.id===g.id)e.by==="admin"?y(yt.Home):(s(e),await _(e));else{const v=n.find(w=>w.id===g.id);v?(s(v),await _(v)):y(yt.Home)}},[e,n]);return h.useEffect(()=>{m&&(d.current||(d.current=!0,r||x()))},[m]),p||l?u.jsx("h1",{children:u.jsx(Ir,{className:"w-[25px] animate-spin"})}):f?u.jsx("h1",{children:f}):u.jsxs("div",{className:"",children:[u.jsx("audio",{ref:a,src:r==null?void 0:r.song_url,className:"hidden"}),r&&u.jsx(u.Fragment,{children:u.jsx(xC,{lyric:i,audioRef:a,theme:t,song:r})})]})}function uW({initialLoading:t}){const e=ke(),{userSongs:n}=Ge(),{currentSong:r}=K(ge),[s,i]=h.useState(!1),[o,a]=h.useState([]),{tempSongs:l}=Ef(),c=h.useMemo(()=>l.length+n.length,[l,n]),d=(f,p)=>{r.id!==f.id&&e(Zt({...f,currentIndex:p}))};return u.jsxs(Kv,{isChecked:s,setIsChecked:i,selectedSongs:o,setSelectedSongs:a,children:[u.jsx(Hl,{location:"dashboard-songs",children:t?u.jsx(u.Fragment,{children:u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(Be,{className:"h-[20px] w-[90px]"})})}):u.jsxs("p",{className:"font-semibold opacity-[.6]",children:[c," Songs"]})}),u.jsxs("div",{className:"min-h-[50vh]",children:[t&&yh,!t&&u.jsx(u.Fragment,{children:c?u.jsxs(u.Fragment,{children:[u.jsx(jr,{variant:"dashboard-songs",tempSongs:l,activeExtend:!0,songs:n,handleSetSong:d}),u.jsx(jr,{variant:"uploading",songs:l})]}):u.jsx("p",{className:"text-center",children:"\\_()_/"})})]})]})}function dW(){const{theme:t}=Z(),{user:e,loading:n}=tt(),{currentSong:r}=K(ge),{userPlaylists:s}=Ge(),[i,o]=h.useState(!0),[a,l]=h.useState([]),[c,d]=h.useState("userSongs"),{loading:f,errorMsg:p}=Sf({admin:!0}),m=async()=>{console.log(">>> api: get user");try{if(!e)return;o(!0);const _=Ls(oa(Dr,"users"),Ds("email","!=",e.email)),x=await Ms(_);if(x.docs){const v=x.docs.map(w=>w.data());l(v)}}catch(_){console.log(_)}finally{o(!1)}},y=()=>a.map((_,x)=>u.jsxs("tr",{className:"",children:[u.jsx("td",{className:g.td,children:u.jsx("div",{className:"h-[44px] w-[44px] ml-[20px]",children:u.jsx(Lr,{classNames:"rounded-[4px]",src:_.photoURL})})}),u.jsx("td",{className:g.td,children:_.display_name}),u.jsx("td",{className:g.td,children:_.email}),u.jsx("td",{className:g.td,children:NO(_==null?void 0:_.latest_seen)})]},x));h.useEffect(()=>{n||c==="users"&&!a.length&&m()},[c]);const g={button:`${t.content_bg} rounded-full`,inActiveBtn:`bg-${t.alpha}`,activeBtn:`${t.content_bg}`,td:`py-[10px] my-[10px] border-${t.alpha} border-b-[1px]`,th:"py-[5px]",tableContainer:`border border-${t.alpha} rounded-[4px]`,tableHeader:`border-b border-${t.alpha} ${t.side_bar_bg} flex items-center h-[50px] gap-[15px]`};return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsxs("div",{className:"mb-[20px]",children:[u.jsx(Y,{onClick:()=>d("userSongs"),className:`${c==="userSongs"?g.activeBtn:g.inActiveBtn}  rounded-full`,variant:"primary",children:"Songs"}),u.jsx(Y,{onClick:()=>d("users"),className:` ${c==="users"?g.activeBtn:g.inActiveBtn} rounded-full ml-[10px]`,variant:"primary",children:"Users"})]}),u.jsxs("div",{className:"mt-[30px]",children:[c==="userSongs"&&u.jsxs(u.Fragment,{children:[u.jsx("h3",{className:"text-2xl font-bold mb-[10px]",children:"Playlist"}),u.jsx(Yv,{activeCondition:!!r.song_in,loading:f,playlist:s,location:"dashboard"}),u.jsxs("div",{className:"mt-[30px] flex justify-between mb-[10px]",children:[u.jsx("h3",{className:"text-2xl font-bold",children:"Songs"}),u.jsx("div",{className:"flex items-center",children:u.jsxs("label",{className:`${t.content_bg} ${status==="uploading"||f?"opacity-60 pointer-events-none":""} rounded-full flex px-[20px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(ad,{className:"w-[20px] mr-[5px]"}),"Upload"]})})]}),p&&u.jsx("p",{children:"Some thing went wrong"}),!p&&u.jsx(uW,{initialLoading:f})]}),c==="users"&&u.jsx("div",{className:g.tableContainer,children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:`${t.bottom_player_bg} w-full text-[14px] py-[4px]`,children:u.jsxs("tr",{children:[u.jsx("th",{}),u.jsx("th",{className:"text-left py-[4px]",children:"Name"}),u.jsx("th",{className:"text-left py-[4px]",children:"Email"}),u.jsx("th",{className:"text-left py-[4px]",children:"Latest Seen"})]})}),u.jsx("tbody",{children:y()})]})})]})]})})}function hW({playlist:t,close:e}){const{theme:n}=Z(),r=h.useRef(null),[s,i]=h.useState(""),[o,a]=h.useState(!1),{editPlaylist:l,isFetching:c}=Ni(),d=async p=>{if(p.preventDefault(),!!o)try{await l(s,t)}catch(m){console.log(m)}finally{e()}},f={editContainer:"w-[400px] max-w-[calc(90vw-40px)]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full"};return h.useEffect(()=>{const p=r.current;p==null||p.focus(),i(t.name)},[]),h.useEffect(()=>{s.trim()&&s.trim()!==t.name?a(!0):a(!1)},[s]),u.jsxs(u.Fragment,{children:[u.jsx(Fs,{close:e,title:"Edit playlist"}),u.jsxs("form",{action:"",onSubmit:d,className:`${f.editContainer} ${c?"opacity-60 pointer-events-none":""}`,children:[u.jsx("input",{ref:r,value:s,onChange:p=>i(p.target.value),type:"text",className:`${f.input} bg-${n.alpha} ${n.type==="light"?"text-[#333]":"text-white"}`}),u.jsx(Y,{type:"submit",variant:"primary",isLoading:c,className:`${n.content_bg} rounded-full self-end mt-[15px] ${o?"":"opacity-60 pointer-events-none"}`,children:"Save"})]})]})}function qp({loading:t,type:e}){const n=ke(),{theme:r,isOnMobile:s}=Z(),{currentSong:i}=K(ge),{currentPlaylist:o,playlistSongs:a}=K($s),[l,c]=h.useState(""),d=uh(),{deletePlaylist:f,isFetching:p}=Ni(),{deleteAdminPlaylist:m,isFetching:y}=RC(),g=h.useMemo(()=>a.reduce((T,A)=>T+A.duration,0),[a]),_=()=>c(""),x=(T,A)=>{const C=`playlist_${o.id}`;(i.id!==T.id||i.song_in!==C)&&(n(Zt({...T,currentIndex:A,song_in:C})),i.song_in!==C&&(n(Sc({songs:a})),console.log("setActuallySongs when playlist list")))},v=()=>{const T=a[0];i.song_in.includes(d.name)||x(T,0)},w=u.jsxs(u.Fragment,{children:[u.jsx(Be,{className:"h-[30px]  w-[200px]"}),u.jsx(Be,{className:"hidden md:block h-[16px] w-[60px]"}),u.jsx(Be,{className:"hidden md:block h-[16px] w-[200px]"})]}),E=h.useMemo(()=>t?w:u.jsxs(u.Fragment,{children:[u.jsx("h1",{className:"text-[30px] font-semibold leading-[1]",children:o.name}),!s&&u.jsx("p",{className:"text-[16px] leading-[1] font-[500]",children:No(g)}),u.jsxs("p",{className:"hidden md:block opacity-60 leading-[1]",children:["created by ",o.by]})]}),[t,o]),S=h.useMemo(()=>{if(t)return u.jsx(u.Fragment,{});switch(e){case"my-playlist":case"dashboard-playlist":return u.jsxs(u.Fragment,{children:[u.jsxs(Y,{onClick:v,className:`rounded-full px-[20px] py-[6px] ${r.content_bg} ${!o.song_ids.length&&"opacity-60 pointer-events-none"}`,children:[u.jsx(vx,{className:"mr-[5px] w-[22px]"}),"Play"]}),u.jsx(Y,{onClick:()=>c("delete"),className:`p-[8px] rounded-full ${r.content_hover_bg} bg-${r.alpha}`,children:u.jsx(kT,{className:"w-[22px]"})}),u.jsx(Y,{onClick:()=>c("edit"),className:`p-[8px] rounded-full ${r.content_hover_bg} bg-${r.alpha}`,children:u.jsx(AT,{className:"w-[22px]"})})]});case"admin-playlist":return u.jsxs(Y,{onClick:v,className:`rounded-full px-[20px] py-[6px] ${r.content_bg} ${!o.song_ids.length&&"opacity-60 pointer-events-none"}`,children:[u.jsx(vx,{className:"mr-[5px] w-[22px]"}),"Play"]})}},[t,a]),b=h.useMemo(()=>{switch(l){case"":return u.jsx(u.Fragment,{});case"edit":return u.jsx(hW,{close:_,playlist:o});case"delete":if(e==="my-playlist")return u.jsx(or,{loading:p,label:"Delete playlist ?",theme:r,callback:f,close:_});if(e==="dashboard-playlist")return u.jsx(or,{loading:y,label:"Delete playlist ?",theme:r,callback:m,close:_})}},[l,p,y]),I={container:"w-full space-y-[12px] md:space-y-0 md:space-x-[12px] flex flex-col md:flex-row",playlistInfoContainer:"flex flex-col gap-[12px] md:justify-between",infoTop:"flex justify-center items-center gap-[8px] md:flex-col md:items-start",countSongText:"text-[14px]] font-semibold opacity-[.6] leading-[1]",ctaContainer:"flex justify-center space-x-[12px] md:justify-start"};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:I.container,children:[u.jsx("div",{className:"w-full px-[20px] md:w-1/4 md:px-0",children:t?u.jsx(Be,{className:"pt-[100%] rounded-[8px]"}):u.jsx(Bg,{data:o,active:i.song_in===`playlist_${o.id}`,inDetail:!0,theme:r})}),u.jsxs("div",{className:I.playlistInfoContainer,children:[u.jsx("div",{className:I.infoTop,children:E}),u.jsx("div",{className:`${I.ctaContainer} `,children:S})]})]}),!!l&&u.jsx(yn,{closeModal:_,children:b})]})}function Kp({location:t}){const e=ke(),{theme:n}=Z(),{currentSong:r}=K(ge),{from:s}=K(ur),{currentPlaylist:i,playlistSongs:o}=K($s),[a,l]=h.useState(""),{setErrorToast:c}=tn(),{deleteSongFromPlaylist:d}=Ni(),f=()=>l(""),p=(x,v)=>{const w=`playlist_${i.id}`;(r.id!==x.id||r.song_in!==w)&&(e(Zt({...x,currentIndex:v,song_in:w})),(s.length>1||s[0]!=w)&&e(Sc({songs:o})))},m=async x=>{try{await d(x)}catch(v){console.log(v),c({})}},y=h.useMemo(()=>{if(!o.length)return u.jsx(u.Fragment,{});switch(t){case"admin-playlist":return u.jsx(Hl,{location:"admin-playlist",children:u.jsxs("p",{className:"font-semibold opacity-[.6]",children:[o.length," Songs"]})});case"my-playlist":case"dashboard-playlist":return u.jsx(Hl,{location:"my-playlist",children:u.jsxs("p",{className:"font-semibold opacity-[.6]",children:[o.length," Songs"]})})}},[i,o]),g=h.useMemo(()=>{switch(t){case"admin-playlist":return u.jsx(jr,{variant:"admin-playlist",songs:o,handleSetSong:p,activeExtend:r.song_in.includes(i.id)});case"my-playlist":case"dashboard-playlist":return u.jsxs(u.Fragment,{children:[u.jsx(jr,{variant:t,songs:o,handleSetSong:p,activeExtend:r.song_in.includes(i.id),deleteFromPlaylist:m}),u.jsx("div",{className:"flex justify-center mt-[20px]",children:u.jsxs(Y,{onClick:()=>l("add-song"),className:`${n.content_bg} rounded-full`,variant:"primary",children:[u.jsx(ld,{className:"w-[24px] mr-[5px]"}),"Add song"]})})]})}},[i,o,r]),_=h.useMemo(()=>{switch(a){case"":return u.jsx(u.Fragment,{});case"add-song":return u.jsx(D7,{close:f,playlistSongs:o})}},[a,o,i]);return u.jsxs(u.Fragment,{children:[y,g,!!a&&u.jsx(yn,{closeModal:f,children:_})]})}function AC({children:t}){const[e,n]=h.useState(!1),[r,s]=h.useState([]);return u.jsx(u.Fragment,{children:u.jsx(Kv,{isChecked:e,setIsChecked:n,selectedSongs:r,setSelectedSongs:s,children:t})})}function CC(){const{currentPlaylist:t}=K($s),{loading:e}=B7(),n=mn(),r=h.useMemo(()=>n.pathname.includes("/dashboard/playlist"),[n]),s=h.useMemo(()=>r?u.jsx(qp,{loading:e,type:"dashboard-playlist"}):t.by==="admin"?u.jsx(qp,{loading:e,type:"admin-playlist"}):u.jsx(qp,{loading:e,type:"my-playlist"}),[e]),i=h.useMemo(()=>e?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(Be,{className:"h-[20px] w-[90px]"})}),yh]}):r?u.jsx(Kp,{location:"dashboard-playlist"}):t.by==="admin"?u.jsx(Kp,{location:"admin-playlist"}):u.jsx(Kp,{location:"my-playlist"}),[e]);return u.jsxs("div",{className:"min-h-screen",children:[u.jsx(TC,{}),s,u.jsx("div",{className:"pb-[50px] mt-[30px]",children:u.jsx(AC,{children:i})})]})}const fW=["mine","favorite"];function pW({initialLoading:t}){const e=ke(),{theme:n}=Z(),{user:r}=tt(),{userSongs:s}=Ge(),{currentSong:i}=K(ge),{from:o}=K(ur),{setSelectedSongs:a,setIsChecked:l}=qv(),[c,d]=h.useState("mine"),[f,p]=h.useState([]),[m,y]=h.useState(!1),{tempSongs:g}=Ef(),_=h.useMemo(()=>t?0:g.length+s.length,[g,s,t]),x=()=>{a([]),l(!1)},v=async()=>{if(r){if(!r.like_song_ids.length)return p([]);try{const S=Ls(oa(Dr,"songs"),Ds("id","in",r.like_song_ids)),b=await Ms(S);let I=!1,T=[];if(b.docs.length){const A=b.docs.map(C=>({...C.data(),song_in:"favorite"}));if(p(A),f.length<r.like_song_ids.length){const C=A.map(O=>O.id);I=!0,T=C}}else r.like_song_ids&&(I=!0,T=[]);I&&await bn({collection:"users",data:{like_song_ids:T},id:r.email,msg:">>> api: update user like song ids"})}catch{console.log("error")}finally{y(!1)}}},w=async S=>{d(S),y(!0),x(),S==="favorite"?await v():(await n0(300),y(!1))},E=(S,b)=>{(o.length>1||o[0]!=S.song_in)&&e(Sc({songs:s})),(i.id!==S.id||i.song_in!=="user")&&e(Zt({...S,currentIndex:b}))};return u.jsxs(u.Fragment,{children:[u.jsx(Hl,{location:"my-songs",children:t?u.jsx(u.Fragment,{children:u.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:u.jsx(Be,{className:"h-[20px] w-[90px]"})})}):u.jsxs("p",{className:"font-semibold opacity-[.6]",children:[_," Songs"]})}),u.jsx("div",{className:"flex items-center space-x-[10px] my-[10px]",children:fW.map((S,b)=>{const I=c===S;return u.jsx("button",{onClick:()=>w(S),className:`text-[14px] font-[500] px-[10px] 
                        ${n.content_border} border py-[4px] rounded-[99px] ${I?n.content_bg:""}
                    `,children:S==="mine"?"My songs":"Favorite"},b)})}),u.jsxs("div",{className:"min-h-[50vh]",children:[(t||m)&&yh,!t&&!m&&u.jsx(u.Fragment,{children:c==="mine"&&!!_&&u.jsxs(u.Fragment,{children:[u.jsx(jr,{variant:"my-songs",handleSetSong:E,activeExtend:i.song_in==="user"||i.song_in==="favorite",songs:s,tempSongs:g}),u.jsx(jr,{songs:g,variant:"uploading"})]})})]})]})}function mW(){const{theme:t}=Z(),{loading:e,user:n}=tt(),{currentSong:r}=K(ge),{userPlaylists:s}=Ge(),{status:i}=Ef(),o=en(),{loading:a,errorMsg:l,initial:c}=Sf({});return h.useEffect(()=>{e||n&&(n.email||(o(yt.Home),console.log(">>> navigate to home")))},[e,c]),l?u.jsx("h1",{children:l}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"pb-[30px] ",children:[window.innerWidth<800&&u.jsx(TC,{to:""}),u.jsx("h3",{className:"text-[24px] font-bold mb-[14px]",children:"Playlist"}),u.jsx(Yv,{activeCondition:!!r.song_in,loading:a,playlist:s,location:"my-songs"})]}),u.jsxs("div",{className:"pb-[30px]",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-[24px] font-bold",children:"Songs"}),u.jsxs("label",{className:`${t.content_bg} ${i==="uploading"||a?"opacity-60 pointer-events-none":""} items-center hover:opacity-60 rounded-full flex px-[16px] py-[4px] cursor-pointer`,htmlFor:"song_upload",children:[u.jsx(N7,{className:"w-[20px] mr-[5px]"}),"Upload"]})]}),u.jsxs(AC,{children:[l&&u.jsx("p",{children:"Some thing went wrong"}),!l&&u.jsx(pW,{initialLoading:a})]})]})]})}function gW(){const{theme:t}=Z(),{user:e,loading:n}=tt(),[r,s]=h.useState(),[i,o]=h.useState({base:"",real_time:[],id:""}),a=h.useRef(null),l=h.useRef(!1),c=uh(),d=en(),f=async()=>{try{const p=await Wo({collection:"songs",id:c==null?void 0:c.id,msg:">>> api: get song doc"});if(!p.exists()){d("/dashboard");return}const m=p.data();if(m.lyric_id){const y=await Wo({collection:"lyrics",id:m.lyric_id});if(y.exists()){const g=y.data();o(g)}}s(m)}catch(p){console.log({message:p})}};return h.useEffect(()=>{if(!n){if(!e)return d(yt.Home);l.current||(l.current=!0,f())}},[]),u.jsxs("div",{className:"container mx-auto pb-[60px]",children:[u.jsx("audio",{ref:a,src:r&&r.song_url,className:"hidden"}),r&&u.jsx(u.Fragment,{children:u.jsx(xC,{admin:!0,lyric:i,audioRef:a,theme:t,song:r})})]})}function yW(){const{theme:t}=Z();return u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.container} ${t.type==="dark"?"text-white":"text-black"}`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Page Not found"}),u.jsx(ds,{to:"/",className:`${t.content_bg} font-bold  text-[#fff] mt-[20px] rounded-full flex px-[20px] py-[4px] cursor-pointer`,children:"Go home"})," "]})}function vW(){const{theme:t}=Z(),e=en(),n=async()=>{await qb(Ts),e("/login")};return u.jsxs("div",{className:`${t.container} flex flex-col justify-center items-center min-h-screen`,children:[u.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.type==="light"?"text-[#333]":"text-white"}`,children:"Unauthorized"}),u.jsx(Y,{onClick:n,variant:"primary",size:"normal",className:`${t.content_bg} font-bold text-[20px]  text-[#fff] rounded-full mt-[20px]`,children:"Exit"})]})}function xW(){var a,l;const[t]=_c(Ts),{logIn:e}=Tc(),{theme:n}=Z(),r=en(),s=mn(),i=((l=(a=s==null?void 0:s.state)==null?void 0:a.from)==null?void 0:l.pathname)||"/dashboard",o=async()=>{try{await e()}catch(c){console.log(c)}};return h.useEffect(()=>{if(t!=null&&t.email){r(i,{replace:!0});return}console.log("run effect")},[t]),u.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${n.container} ${n.type==="dark"?"text-white":"text-black"}`,children:[u.jsx(Y,{onClick:o,variant:"default",size:"normal",className:`${n.content_bg} font-bold text-[#fff] text-[30px] rounded-full`,children:"Login with google"})," "]})}const yt={Home:"/",Dashboard:"/dashboard",DashboardPlaylist:"/dashboard/playlist/:id",DashboardEdit:"/dashboard/edit/:id",MySongs:"/mysongs",Favorite:"/favorite",Playlist:"/playlist/:id",Edit:"/mysongs/edit/:id"},wW=[{path:yt.Home,component:lW,layout:""},{path:yt.MySongs,component:mW,layout:""},{path:yt.Playlist,component:CC,layout:""},{path:yt.Edit,component:cW,layout:""}],_W=[{path:yt.Dashboard,component:dW,layout:Hp},{path:yt.DashboardPlaylist,component:CC,layout:Hp},{path:yt.DashboardEdit,component:gW,layout:Hp}];function EW(){const t={container:"my-[30px] flex flex-col md:flex-row md:justify-between items-start",icon:"w-[26px] sm:w-[20px] scale-[1] hover:scale-[1.1] transition linear ",copyRightText:"text-[14px]"};return u.jsxs("div",{className:`${t.container}`,children:[u.jsxs("p",{className:t.copyRightText,children:["Make with Make with  by datnh ",u.jsx("br",{}),"  All rights no reserved \\_()_/"]}),u.jsxs("div",{className:"flex mt-[20px] md:mt-0 space-x-[10px]",children:[u.jsx("a",{href:"https://facebook.com/DAtdz06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"})})}),u.jsx("a",{href:"https://www.linkedin.com/in/dat-nguyen-9371a926a",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:u.jsx("path",{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"})})}),u.jsx("a",{href:"https://github.com/d4t06",target:"_blank",children:u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 496 512",fill:"currentColor",children:u.jsx("path",{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})})})]})]})}const Q_=({children:t})=>{const{theme:e}=Z(),n=mn(),r=h.useMemo(()=>n.pathname.includes("edit"),[n]),s=h.useRef(null),i={container:` main-container sm:overflow-auto no-scrollbar main-content w-full ${r?"":"min-h-[100vh] pb-[90px]"} max-[549px]:h-full `,content:"px-[40px] max-[549px]:px-[15px] mt-[60px]",page:`flex min-h-[100vh] sm:h-[100vh] sm:overflow-hidden ${e.type==="dark"?"text-white":"text-[#333]"} ${e.container}`};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:i.page,children:[window.innerWidth>=800&&u.jsx(Bz,{}),u.jsxs("div",{ref:s,className:i.container,children:[window.innerWidth>=800&&u.jsx(zz,{contentRef:s}),u.jsxs("div",{className:i.content,children:[t,u.jsx(EW,{})]})]}),u.jsx(_C,{})]}),u.jsx(IC,{})]})},SW="/HD-MP3/assets/loading-b1210647.gif";function TW({allowedRole:t}){const{user:e,loading:n}=tt(),{theme:r}=Z();return n?u.jsx("div",{className:`min-h-screen flex flex-col items-center justify-center ${r.container}`,children:u.jsx("img",{className:"w-[150px]",src:SW,alt:""})}):e&&(t!=null&&t.find(s=>e.role===s))||!t.length?u.jsx(gT,{}):u.jsx(QN,{replace:!0,to:"/login"})}function bW(){const{setUser:t}=tt(),[e,n]=_c(Ts);return h.useEffect(()=>{if(n)return;(async()=>{try{if(!e||!e.email)return t({type:"set-user",user:null});const i=(await Wo({collection:"users",id:e.email,msg:">>> api: get auth info"})).data();Object.assign(i,{email:e.email,display_name:e.displayName,photoURL:e.photoURL,like_song_ids:i.like_song_ids||[],playlist_ids:i.playlist_ids||[],play_history:i.play_history||[]}),t({type:"set-user",user:i})}catch(s){console.log({message:s})}})()},[n,e]),u.jsx(gT,{})}function IW(){return u.jsxs(u.Fragment,{children:[u.jsx(n5,{basename:"HD-MP3",children:u.jsxs(XN,{children:[u.jsx(Br,{path:"/login",element:u.jsx(xW,{})}),u.jsx(Br,{path:"/unauthorized",element:u.jsx(vW,{})}),u.jsx(Br,{path:"*",element:u.jsx(yW,{})}),u.jsxs(Br,{element:u.jsx(bW,{}),children:[wW.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=Q_,u.jsx(Br,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)}),u.jsx(Br,{element:u.jsx(TW,{allowedRole:["ADMIN"]}),children:_W.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=Q_,u.jsx(Br,{path:t.path,element:u.jsx(n,{children:u.jsx(r,{})})},e)})})]})]})}),u.jsx(Zz,{autoClose:!0})]})}const RW=k8({reducer:{currentSong:z8,currentPlaylist:c7,playStatus:$7,songQueue:Q8}});Qp.createRoot(document.getElementById("root")).render(u.jsx(sE.StrictMode,{children:u.jsx(J8,{children:u.jsx(VO,{children:u.jsx(iL,{children:u.jsx(t7,{children:u.jsx(i7,{children:u.jsx(XU,{store:RW,children:u.jsx(IW,{})})})})})})})}));
