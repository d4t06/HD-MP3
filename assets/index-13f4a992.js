function MP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function e2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var t2={exports:{}},Fh={},n2={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bc=Symbol.for("react.element"),$P=Symbol.for("react.portal"),zP=Symbol.for("react.fragment"),BP=Symbol.for("react.strict_mode"),UP=Symbol.for("react.profiler"),VP=Symbol.for("react.provider"),WP=Symbol.for("react.context"),HP=Symbol.for("react.forward_ref"),qP=Symbol.for("react.suspense"),GP=Symbol.for("react.memo"),KP=Symbol.for("react.lazy"),N1=Symbol.iterator;function QP(t){return t===null||typeof t!="object"?null:(t=N1&&t[N1]||t["@@iterator"],typeof t=="function"?t:null)}var r2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},s2=Object.assign,i2={};function Eo(t,e,n){this.props=t,this.context=e,this.refs=i2,this.updater=n||r2}Eo.prototype.isReactComponent={};Eo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Eo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function a2(){}a2.prototype=Eo.prototype;function iy(t,e,n){this.props=t,this.context=e,this.refs=i2,this.updater=n||r2}var ay=iy.prototype=new a2;ay.constructor=iy;s2(ay,Eo.prototype);ay.isPureReactComponent=!0;var j1=Array.isArray,o2=Object.prototype.hasOwnProperty,oy={current:null},l2={key:!0,ref:!0,__self:!0,__source:!0};function c2(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)o2.call(e,r)&&!l2.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:bc,type:t,key:i,ref:a,props:s,_owner:oy.current}}function XP(t,e){return{$$typeof:bc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ly(t){return typeof t=="object"&&t!==null&&t.$$typeof===bc}function YP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var D1=/\/+/g;function Sm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?YP(""+t.key):e.toString(36)}function Vu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case bc:case $P:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Sm(a,0):r,j1(s)?(n="",t!=null&&(n=t.replace(D1,"$&/")+"/"),Vu(s,e,n,"",function(u){return u})):s!=null&&(ly(s)&&(s=XP(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(D1,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",j1(t))for(var o=0;o<t.length;o++){i=t[o];var c=r+Sm(i,o);a+=Vu(i,e,n,c,s)}else if(c=QP(t),typeof c=="function")for(t=c.call(t),o=0;!(i=t.next()).done;)i=i.value,c=r+Sm(i,o++),a+=Vu(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function iu(t,e,n){if(t==null)return t;var r=[],s=0;return Vu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function JP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tn={current:null},Wu={transition:null},ZP={ReactCurrentDispatcher:tn,ReactCurrentBatchConfig:Wu,ReactCurrentOwner:oy};ue.Children={map:iu,forEach:function(t,e,n){iu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return iu(t,function(){e++}),e},toArray:function(t){return iu(t,function(e){return e})||[]},only:function(t){if(!ly(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=Eo;ue.Fragment=zP;ue.Profiler=UP;ue.PureComponent=iy;ue.StrictMode=BP;ue.Suspense=qP;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZP;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=s2({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=oy.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)o2.call(e,c)&&!l2.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:bc,type:t.type,key:s,ref:i,props:r,_owner:a}};ue.createContext=function(t){return t={$$typeof:WP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:VP,_context:t},t.Consumer=t};ue.createElement=c2;ue.createFactory=function(t){var e=c2.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:HP,render:t}};ue.isValidElement=ly;ue.lazy=function(t){return{$$typeof:KP,_payload:{_status:-1,_result:t},_init:JP}};ue.memo=function(t,e){return{$$typeof:GP,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=Wu.transition;Wu.transition={};try{t()}finally{Wu.transition=e}};ue.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ue.useCallback=function(t,e){return tn.current.useCallback(t,e)};ue.useContext=function(t){return tn.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return tn.current.useDeferredValue(t)};ue.useEffect=function(t,e){return tn.current.useEffect(t,e)};ue.useId=function(){return tn.current.useId()};ue.useImperativeHandle=function(t,e,n){return tn.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return tn.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return tn.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return tn.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return tn.current.useReducer(t,e,n)};ue.useRef=function(t){return tn.current.useRef(t)};ue.useState=function(t){return tn.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return tn.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return tn.current.useTransition()};ue.version="18.2.0";n2.exports=ue;var f=n2.exports;const u2=e2(f),eN=MP({__proto__:null,default:u2},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tN=f,nN=Symbol.for("react.element"),rN=Symbol.for("react.fragment"),sN=Object.prototype.hasOwnProperty,iN=tN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aN={key:!0,ref:!0,__self:!0,__source:!0};function d2(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)sN.call(e,r)&&!aN.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:nN,type:t,key:i,ref:a,props:s,_owner:iN.current}}Fh.Fragment=rN;Fh.jsx=d2;Fh.jsxs=d2;t2.exports=Fh;var l=t2.exports;var Qp={},h2={exports:{}},Rn={},f2={exports:{}},m2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,H){var te=F.length;F.push(H);e:for(;0<te;){var ke=te-1>>>1,Pe=F[ke];if(0<s(Pe,H))F[ke]=H,F[te]=Pe,te=ke;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var H=F[0],te=F.pop();if(te!==H){F[0]=te;e:for(var ke=0,Pe=F.length,pr=Pe>>>1;ke<pr;){var le=2*(ke+1)-1,ut=F[le],_t=le+1,Xe=F[_t];if(0>s(ut,te))_t<Pe&&0>s(Xe,ut)?(F[ke]=Xe,F[_t]=te,ke=_t):(F[ke]=ut,F[le]=te,ke=le);else if(_t<Pe&&0>s(Xe,te))F[ke]=Xe,F[_t]=te,ke=_t;else break e}}return H}function s(F,H){var te=F.sortIndex-H.sortIndex;return te!==0?te:F.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],u=[],d=1,h=null,m=3,p=!1,g=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var H=n(u);H!==null;){if(H.callback===null)r(u);else if(H.startTime<=F)r(u),H.sortIndex=H.expirationTime,e(c,H);else break;H=n(u)}}function E(F){if(x=!1,w(F),!g)if(n(c)!==null)g=!0,We(S);else{var H=n(u);H!==null&&Qe(E,H.startTime-F)}}function S(F,H){g=!1,x&&(x=!1,v(T),T=-1),p=!0;var te=m;try{for(w(H),h=n(c);h!==null&&(!(h.expirationTime>H)||F&&!ee());){var ke=h.callback;if(typeof ke=="function"){h.callback=null,m=h.priorityLevel;var Pe=ke(h.expirationTime<=H);H=t.unstable_now(),typeof Pe=="function"?h.callback=Pe:h===n(c)&&r(c),w(H)}else r(c);h=n(c)}if(h!==null)var pr=!0;else{var le=n(u);le!==null&&Qe(E,le.startTime-H),pr=!1}return pr}finally{h=null,m=te,p=!1}}var b=!1,k=null,T=-1,N=5,D=-1;function ee(){return!(t.unstable_now()-D<N)}function K(){if(k!==null){var F=t.unstable_now();D=F;var H=!0;try{H=k(!0,F)}finally{H?ie():(b=!1,k=null)}}else b=!1}var ie;if(typeof y=="function")ie=function(){y(K)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,oe=V.port2;V.port1.onmessage=K,ie=function(){oe.postMessage(null)}}else ie=function(){_(K,0)};function We(F){k=F,b||(b=!0,ie())}function Qe(F,H){T=_(function(){F(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,We(S))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(F){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var te=m;m=H;try{return F()}finally{m=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,H){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var te=m;m=F;try{return H()}finally{m=te}},t.unstable_scheduleCallback=function(F,H,te){var ke=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ke+te:ke):te=ke,F){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=te+Pe,F={id:d++,callback:H,priorityLevel:F,startTime:te,expirationTime:Pe,sortIndex:-1},te>ke?(F.sortIndex=te,e(u,F),n(c)===null&&F===n(u)&&(x?(v(T),T=-1):x=!0,Qe(E,te-ke))):(F.sortIndex=Pe,e(c,F),g||p||(g=!0,We(S))),F},t.unstable_shouldYield=ee,t.unstable_wrapCallback=function(F){var H=m;return function(){var te=m;m=H;try{return F.apply(this,arguments)}finally{m=te}}}})(m2);f2.exports=m2;var oN=f2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p2=f,Tn=oN;function P(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g2=new Set,Pl={};function ia(t,e){Za(t,e),Za(t+"Capture",e)}function Za(t,e){for(Pl[t]=e,t=0;t<e.length;t++)g2.add(e[t])}var ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xp=Object.prototype.hasOwnProperty,lN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O1={},F1={};function cN(t){return Xp.call(F1,t)?!0:Xp.call(O1,t)?!1:lN.test(t)?F1[t]=!0:(O1[t]=!0,!1)}function uN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function dN(t,e,n,r){if(e===null||typeof e>"u"||uN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nn(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ct[t]=new nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ct[e]=new nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ct[t]=new nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ct[t]=new nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ct[t]=new nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ct[t]=new nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ct[t]=new nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ct[t]=new nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ct[t]=new nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var cy=/[\-:]([a-z])/g;function uy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cy,uy);Ct[e]=new nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cy,uy);Ct[e]=new nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cy,uy);Ct[e]=new nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ct[t]=new nn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ct.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ct[t]=new nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function dy(t,e,n,r){var s=Ct.hasOwnProperty(e)?Ct[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dN(e,n,s,r)&&(n=null),r||s===null?cN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ps=p2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,au=Symbol.for("react.element"),ka=Symbol.for("react.portal"),Ta=Symbol.for("react.fragment"),hy=Symbol.for("react.strict_mode"),Yp=Symbol.for("react.profiler"),y2=Symbol.for("react.provider"),v2=Symbol.for("react.context"),fy=Symbol.for("react.forward_ref"),Jp=Symbol.for("react.suspense"),Zp=Symbol.for("react.suspense_list"),my=Symbol.for("react.memo"),Ts=Symbol.for("react.lazy"),x2=Symbol.for("react.offscreen"),L1=Symbol.iterator;function $o(t){return t===null||typeof t!="object"?null:(t=L1&&t[L1]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,bm;function rl(t){if(bm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bm=e&&e[1]||""}return`
`+bm+t}var km=!1;function Tm(t,e){if(!t||km)return"";km=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=o);break}}}finally{km=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?rl(t):""}function hN(t){switch(t.tag){case 5:return rl(t.type);case 16:return rl("Lazy");case 13:return rl("Suspense");case 19:return rl("SuspenseList");case 0:case 2:case 15:return t=Tm(t.type,!1),t;case 11:return t=Tm(t.type.render,!1),t;case 1:return t=Tm(t.type,!0),t;default:return""}}function eg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ta:return"Fragment";case ka:return"Portal";case Yp:return"Profiler";case hy:return"StrictMode";case Jp:return"Suspense";case Zp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case v2:return(t.displayName||"Context")+".Consumer";case y2:return(t._context.displayName||"Context")+".Provider";case fy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case my:return e=t.displayName||null,e!==null?e:eg(t.type)||"Memo";case Ts:e=t._payload,t=t._init;try{return eg(t(e))}catch{}}return null}function fN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return eg(e);case 8:return e===hy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ei(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function w2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function mN(t){var e=w2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ou(t){t._valueTracker||(t._valueTracker=mN(t))}function _2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=w2(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function pd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function tg(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function M1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ei(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function E2(t,e){e=e.checked,e!=null&&dy(t,"checked",e,!1)}function ng(t,e){E2(t,e);var n=ei(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rg(t,e.type,n):e.hasOwnProperty("defaultValue")&&rg(t,e.type,ei(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function rg(t,e,n){(e!=="number"||pd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sl=Array.isArray;function za(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ei(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function sg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(P(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function z1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(P(92));if(sl(n)){if(1<n.length)throw Error(P(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ei(n)}}function S2(t,e){var n=ei(e.value),r=ei(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function B1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function b2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ig(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?b2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var lu,k2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(lu=lu||document.createElement("div"),lu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Nl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ml={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pN=["Webkit","ms","Moz","O"];Object.keys(ml).forEach(function(t){pN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ml[e]=ml[t]})});function T2(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ml.hasOwnProperty(t)&&ml[t]?(""+e).trim():e+"px"}function I2(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=T2(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var gN=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ag(t,e){if(e){if(gN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(P(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(P(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(P(61))}if(e.style!=null&&typeof e.style!="object")throw Error(P(62))}}function og(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lg=null;function py(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cg=null,Ba=null,Ua=null;function U1(t){if(t=Ic(t)){if(typeof cg!="function")throw Error(P(280));var e=t.stateNode;e&&(e=Bh(e),cg(t.stateNode,t.type,e))}}function C2(t){Ba?Ua?Ua.push(t):Ua=[t]:Ba=t}function A2(){if(Ba){var t=Ba,e=Ua;if(Ua=Ba=null,U1(t),e)for(t=0;t<e.length;t++)U1(e[t])}}function R2(t,e){return t(e)}function P2(){}var Im=!1;function N2(t,e,n){if(Im)return t(e,n);Im=!0;try{return R2(t,e,n)}finally{Im=!1,(Ba!==null||Ua!==null)&&(P2(),A2())}}function jl(t,e){var n=t.stateNode;if(n===null)return null;var r=Bh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(P(231,e,typeof n));return n}var ug=!1;if(ss)try{var zo={};Object.defineProperty(zo,"passive",{get:function(){ug=!0}}),window.addEventListener("test",zo,zo),window.removeEventListener("test",zo,zo)}catch{ug=!1}function yN(t,e,n,r,s,i,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var pl=!1,gd=null,yd=!1,dg=null,vN={onError:function(t){pl=!0,gd=t}};function xN(t,e,n,r,s,i,a,o,c){pl=!1,gd=null,yN.apply(vN,arguments)}function wN(t,e,n,r,s,i,a,o,c){if(xN.apply(this,arguments),pl){if(pl){var u=gd;pl=!1,gd=null}else throw Error(P(198));yd||(yd=!0,dg=u)}}function aa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function j2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function V1(t){if(aa(t)!==t)throw Error(P(188))}function _N(t){var e=t.alternate;if(!e){if(e=aa(t),e===null)throw Error(P(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return V1(s),t;if(i===r)return V1(s),e;i=i.sibling}throw Error(P(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a)throw Error(P(189))}}if(n.alternate!==r)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?t:e}function D2(t){return t=_N(t),t!==null?O2(t):null}function O2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=O2(t);if(e!==null)return e;t=t.sibling}return null}var F2=Tn.unstable_scheduleCallback,W1=Tn.unstable_cancelCallback,EN=Tn.unstable_shouldYield,SN=Tn.unstable_requestPaint,Ge=Tn.unstable_now,bN=Tn.unstable_getCurrentPriorityLevel,gy=Tn.unstable_ImmediatePriority,L2=Tn.unstable_UserBlockingPriority,vd=Tn.unstable_NormalPriority,kN=Tn.unstable_LowPriority,M2=Tn.unstable_IdlePriority,Lh=null,Ar=null;function TN(t){if(Ar&&typeof Ar.onCommitFiberRoot=="function")try{Ar.onCommitFiberRoot(Lh,t,void 0,(t.current.flags&128)===128)}catch{}}var ar=Math.clz32?Math.clz32:AN,IN=Math.log,CN=Math.LN2;function AN(t){return t>>>=0,t===0?32:31-(IN(t)/CN|0)|0}var cu=64,uu=4194304;function il(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~s;o!==0?r=il(o):(i&=a,i!==0&&(r=il(i)))}else a=n&~s,a!==0?r=il(a):i!==0&&(r=il(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ar(e),s=1<<n,r|=t[n],e&=~s;return r}function RN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-ar(i),o=1<<a,c=s[a];c===-1?(!(o&n)||o&r)&&(s[a]=RN(o,e)):c<=e&&(t.expiredLanes|=o),i&=~o}}function hg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $2(){var t=cu;return cu<<=1,!(cu&4194240)&&(cu=64),t}function Cm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function kc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ar(e),t[e]=n}function NN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ar(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function yy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ar(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ve=0;function z2(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var B2,vy,U2,V2,W2,fg=!1,du=[],zs=null,Bs=null,Us=null,Dl=new Map,Ol=new Map,Cs=[],jN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function H1(t,e){switch(t){case"focusin":case"focusout":zs=null;break;case"dragenter":case"dragleave":Bs=null;break;case"mouseover":case"mouseout":Us=null;break;case"pointerover":case"pointerout":Dl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(e.pointerId)}}function Bo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ic(e),e!==null&&vy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function DN(t,e,n,r,s){switch(e){case"focusin":return zs=Bo(zs,t,e,n,r,s),!0;case"dragenter":return Bs=Bo(Bs,t,e,n,r,s),!0;case"mouseover":return Us=Bo(Us,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Dl.set(i,Bo(Dl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ol.set(i,Bo(Ol.get(i)||null,t,e,n,r,s)),!0}return!1}function H2(t){var e=Ci(t.target);if(e!==null){var n=aa(e);if(n!==null){if(e=n.tag,e===13){if(e=j2(n),e!==null){t.blockedOn=e,W2(t.priority,function(){U2(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=mg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);lg=r,n.target.dispatchEvent(r),lg=null}else return e=Ic(n),e!==null&&vy(e),t.blockedOn=n,!1;e.shift()}return!0}function q1(t,e,n){Hu(t)&&n.delete(e)}function ON(){fg=!1,zs!==null&&Hu(zs)&&(zs=null),Bs!==null&&Hu(Bs)&&(Bs=null),Us!==null&&Hu(Us)&&(Us=null),Dl.forEach(q1),Ol.forEach(q1)}function Uo(t,e){t.blockedOn===e&&(t.blockedOn=null,fg||(fg=!0,Tn.unstable_scheduleCallback(Tn.unstable_NormalPriority,ON)))}function Fl(t){function e(s){return Uo(s,t)}if(0<du.length){Uo(du[0],t);for(var n=1;n<du.length;n++){var r=du[n];r.blockedOn===t&&(r.blockedOn=null)}}for(zs!==null&&Uo(zs,t),Bs!==null&&Uo(Bs,t),Us!==null&&Uo(Us,t),Dl.forEach(e),Ol.forEach(e),n=0;n<Cs.length;n++)r=Cs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Cs.length&&(n=Cs[0],n.blockedOn===null);)H2(n),n.blockedOn===null&&Cs.shift()}var Va=ps.ReactCurrentBatchConfig,wd=!0;function FN(t,e,n,r){var s=ve,i=Va.transition;Va.transition=null;try{ve=1,xy(t,e,n,r)}finally{ve=s,Va.transition=i}}function LN(t,e,n,r){var s=ve,i=Va.transition;Va.transition=null;try{ve=4,xy(t,e,n,r)}finally{ve=s,Va.transition=i}}function xy(t,e,n,r){if(wd){var s=mg(t,e,n,r);if(s===null)Mm(t,e,r,_d,n),H1(t,r);else if(DN(s,t,e,n,r))r.stopPropagation();else if(H1(t,r),e&4&&-1<jN.indexOf(t)){for(;s!==null;){var i=Ic(s);if(i!==null&&B2(i),i=mg(t,e,n,r),i===null&&Mm(t,e,r,_d,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Mm(t,e,r,null,n)}}var _d=null;function mg(t,e,n,r){if(_d=null,t=py(r),t=Ci(t),t!==null)if(e=aa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=j2(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _d=t,null}function q2(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bN()){case gy:return 1;case L2:return 4;case vd:case kN:return 16;case M2:return 536870912;default:return 16}default:return 16}}var Fs=null,wy=null,qu=null;function G2(){if(qu)return qu;var t,e=wy,n=e.length,r,s="value"in Fs?Fs.value:Fs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return qu=s.slice(t,1<r?1-r:void 0)}function Gu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hu(){return!0}function G1(){return!1}function Pn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?hu:G1,this.isPropagationStopped=G1,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hu)},persist:function(){},isPersistent:hu}),e}var So={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_y=Pn(So),Tc=Le({},So,{view:0,detail:0}),MN=Pn(Tc),Am,Rm,Vo,Mh=Le({},Tc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ey,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vo&&(Vo&&t.type==="mousemove"?(Am=t.screenX-Vo.screenX,Rm=t.screenY-Vo.screenY):Rm=Am=0,Vo=t),Am)},movementY:function(t){return"movementY"in t?t.movementY:Rm}}),K1=Pn(Mh),$N=Le({},Mh,{dataTransfer:0}),zN=Pn($N),BN=Le({},Tc,{relatedTarget:0}),Pm=Pn(BN),UN=Le({},So,{animationName:0,elapsedTime:0,pseudoElement:0}),VN=Pn(UN),WN=Le({},So,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),HN=Pn(WN),qN=Le({},So,{data:0}),Q1=Pn(qN),GN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=QN[t])?!!e[t]:!1}function Ey(){return XN}var YN=Le({},Tc,{key:function(t){if(t.key){var e=GN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?KN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ey,charCode:function(t){return t.type==="keypress"?Gu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),JN=Pn(YN),ZN=Le({},Mh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),X1=Pn(ZN),e4=Le({},Tc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ey}),t4=Pn(e4),n4=Le({},So,{propertyName:0,elapsedTime:0,pseudoElement:0}),r4=Pn(n4),s4=Le({},Mh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),i4=Pn(s4),a4=[9,13,27,32],Sy=ss&&"CompositionEvent"in window,gl=null;ss&&"documentMode"in document&&(gl=document.documentMode);var o4=ss&&"TextEvent"in window&&!gl,K2=ss&&(!Sy||gl&&8<gl&&11>=gl),Y1=String.fromCharCode(32),J1=!1;function Q2(t,e){switch(t){case"keyup":return a4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function X2(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ia=!1;function l4(t,e){switch(t){case"compositionend":return X2(e);case"keypress":return e.which!==32?null:(J1=!0,Y1);case"textInput":return t=e.data,t===Y1&&J1?null:t;default:return null}}function c4(t,e){if(Ia)return t==="compositionend"||!Sy&&Q2(t,e)?(t=G2(),qu=wy=Fs=null,Ia=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return K2&&e.locale!=="ko"?null:e.data;default:return null}}var u4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!u4[t.type]:e==="textarea"}function Y2(t,e,n,r){C2(r),e=Ed(e,"onChange"),0<e.length&&(n=new _y("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var yl=null,Ll=null;function d4(t){lb(t,0)}function $h(t){var e=Ra(t);if(_2(e))return t}function h4(t,e){if(t==="change")return e}var J2=!1;if(ss){var Nm;if(ss){var jm="oninput"in document;if(!jm){var ew=document.createElement("div");ew.setAttribute("oninput","return;"),jm=typeof ew.oninput=="function"}Nm=jm}else Nm=!1;J2=Nm&&(!document.documentMode||9<document.documentMode)}function tw(){yl&&(yl.detachEvent("onpropertychange",Z2),Ll=yl=null)}function Z2(t){if(t.propertyName==="value"&&$h(Ll)){var e=[];Y2(e,Ll,t,py(t)),N2(d4,e)}}function f4(t,e,n){t==="focusin"?(tw(),yl=e,Ll=n,yl.attachEvent("onpropertychange",Z2)):t==="focusout"&&tw()}function m4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $h(Ll)}function p4(t,e){if(t==="click")return $h(e)}function g4(t,e){if(t==="input"||t==="change")return $h(e)}function y4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var lr=typeof Object.is=="function"?Object.is:y4;function Ml(t,e){if(lr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Xp.call(e,s)||!lr(t[s],e[s]))return!1}return!0}function nw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function rw(t,e){var n=nw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nw(n)}}function eb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?eb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tb(){for(var t=window,e=pd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=pd(t.document)}return e}function by(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function v4(t){var e=tb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&eb(n.ownerDocument.documentElement,n)){if(r!==null&&by(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=rw(n,i);var a=rw(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var x4=ss&&"documentMode"in document&&11>=document.documentMode,Ca=null,pg=null,vl=null,gg=!1;function sw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gg||Ca==null||Ca!==pd(r)||(r=Ca,"selectionStart"in r&&by(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vl&&Ml(vl,r)||(vl=r,r=Ed(pg,"onSelect"),0<r.length&&(e=new _y("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ca)))}function fu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Aa={animationend:fu("Animation","AnimationEnd"),animationiteration:fu("Animation","AnimationIteration"),animationstart:fu("Animation","AnimationStart"),transitionend:fu("Transition","TransitionEnd")},Dm={},nb={};ss&&(nb=document.createElement("div").style,"AnimationEvent"in window||(delete Aa.animationend.animation,delete Aa.animationiteration.animation,delete Aa.animationstart.animation),"TransitionEvent"in window||delete Aa.transitionend.transition);function zh(t){if(Dm[t])return Dm[t];if(!Aa[t])return t;var e=Aa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nb)return Dm[t]=e[n];return t}var rb=zh("animationend"),sb=zh("animationiteration"),ib=zh("animationstart"),ab=zh("transitionend"),ob=new Map,iw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function di(t,e){ob.set(t,e),ia(e,[t])}for(var Om=0;Om<iw.length;Om++){var Fm=iw[Om],w4=Fm.toLowerCase(),_4=Fm[0].toUpperCase()+Fm.slice(1);di(w4,"on"+_4)}di(rb,"onAnimationEnd");di(sb,"onAnimationIteration");di(ib,"onAnimationStart");di("dblclick","onDoubleClick");di("focusin","onFocus");di("focusout","onBlur");di(ab,"onTransitionEnd");Za("onMouseEnter",["mouseout","mouseover"]);Za("onMouseLeave",["mouseout","mouseover"]);Za("onPointerEnter",["pointerout","pointerover"]);Za("onPointerLeave",["pointerout","pointerover"]);ia("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ia("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ia("onBeforeInput",["compositionend","keypress","textInput","paste"]);ia("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ia("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ia("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E4=new Set("cancel close invalid load scroll toggle".split(" ").concat(al));function aw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,wN(r,e,void 0,t),t.currentTarget=null}function lb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==i&&s.isPropagationStopped())break e;aw(s,o,u),i=c}else for(a=0;a<r.length;a++){if(o=r[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==i&&s.isPropagationStopped())break e;aw(s,o,u),i=c}}}if(yd)throw t=dg,yd=!1,dg=null,t}function Te(t,e){var n=e[_g];n===void 0&&(n=e[_g]=new Set);var r=t+"__bubble";n.has(r)||(cb(e,t,2,!1),n.add(r))}function Lm(t,e,n){var r=0;e&&(r|=4),cb(n,t,r,e)}var mu="_reactListening"+Math.random().toString(36).slice(2);function $l(t){if(!t[mu]){t[mu]=!0,g2.forEach(function(n){n!=="selectionchange"&&(E4.has(n)||Lm(n,!1,t),Lm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[mu]||(e[mu]=!0,Lm("selectionchange",!1,e))}}function cb(t,e,n,r){switch(q2(e)){case 1:var s=FN;break;case 4:s=LN;break;default:s=xy}n=s.bind(null,e,n,t),s=void 0,!ug||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Mm(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;o!==null;){if(a=Ci(o),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}o=o.parentNode}}r=r.return}N2(function(){var u=i,d=py(n),h=[];e:{var m=ob.get(t);if(m!==void 0){var p=_y,g=t;switch(t){case"keypress":if(Gu(n)===0)break e;case"keydown":case"keyup":p=JN;break;case"focusin":g="focus",p=Pm;break;case"focusout":g="blur",p=Pm;break;case"beforeblur":case"afterblur":p=Pm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=K1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=zN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=t4;break;case rb:case sb:case ib:p=VN;break;case ab:p=r4;break;case"scroll":p=MN;break;case"wheel":p=i4;break;case"copy":case"cut":case"paste":p=HN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=X1}var x=(e&4)!==0,_=!x&&t==="scroll",v=x?m!==null?m+"Capture":null:m;x=[];for(var y=u,w;y!==null;){w=y;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,v!==null&&(E=jl(y,v),E!=null&&x.push(zl(y,E,w)))),_)break;y=y.return}0<x.length&&(m=new p(m,g,null,n,d),h.push({event:m,listeners:x}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==lg&&(g=n.relatedTarget||n.fromElement)&&(Ci(g)||g[is]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=u,g=g?Ci(g):null,g!==null&&(_=aa(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(x=K1,E="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(x=X1,E="onPointerLeave",v="onPointerEnter",y="pointer"),_=p==null?m:Ra(p),w=g==null?m:Ra(g),m=new x(E,y+"leave",p,n,d),m.target=_,m.relatedTarget=w,E=null,Ci(d)===u&&(x=new x(v,y+"enter",g,n,d),x.target=w,x.relatedTarget=_,E=x),_=E,p&&g)t:{for(x=p,v=g,y=0,w=x;w;w=ya(w))y++;for(w=0,E=v;E;E=ya(E))w++;for(;0<y-w;)x=ya(x),y--;for(;0<w-y;)v=ya(v),w--;for(;y--;){if(x===v||v!==null&&x===v.alternate)break t;x=ya(x),v=ya(v)}x=null}else x=null;p!==null&&ow(h,m,p,x,!1),g!==null&&_!==null&&ow(h,_,g,x,!0)}}e:{if(m=u?Ra(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var S=h4;else if(Z1(m))if(J2)S=g4;else{S=m4;var b=f4}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=p4);if(S&&(S=S(t,u))){Y2(h,S,n,d);break e}b&&b(t,m,u),t==="focusout"&&(b=m._wrapperState)&&b.controlled&&m.type==="number"&&rg(m,"number",m.value)}switch(b=u?Ra(u):window,t){case"focusin":(Z1(b)||b.contentEditable==="true")&&(Ca=b,pg=u,vl=null);break;case"focusout":vl=pg=Ca=null;break;case"mousedown":gg=!0;break;case"contextmenu":case"mouseup":case"dragend":gg=!1,sw(h,n,d);break;case"selectionchange":if(x4)break;case"keydown":case"keyup":sw(h,n,d)}var k;if(Sy)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ia?Q2(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(K2&&n.locale!=="ko"&&(Ia||T!=="onCompositionStart"?T==="onCompositionEnd"&&Ia&&(k=G2()):(Fs=d,wy="value"in Fs?Fs.value:Fs.textContent,Ia=!0)),b=Ed(u,T),0<b.length&&(T=new Q1(T,t,null,n,d),h.push({event:T,listeners:b}),k?T.data=k:(k=X2(n),k!==null&&(T.data=k)))),(k=o4?l4(t,n):c4(t,n))&&(u=Ed(u,"onBeforeInput"),0<u.length&&(d=new Q1("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=k))}lb(h,e)})}function zl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ed(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=jl(t,n),i!=null&&r.unshift(zl(t,i,s)),i=jl(t,e),i!=null&&r.push(zl(t,i,s))),t=t.return}return r}function ya(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ow(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var o=n,c=o.alternate,u=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&u!==null&&(o=u,s?(c=jl(n,i),c!=null&&a.unshift(zl(n,c,o))):s||(c=jl(n,i),c!=null&&a.push(zl(n,c,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var S4=/\r\n?/g,b4=/\u0000|\uFFFD/g;function lw(t){return(typeof t=="string"?t:""+t).replace(S4,`
`).replace(b4,"")}function pu(t,e,n){if(e=lw(e),lw(t)!==e&&n)throw Error(P(425))}function Sd(){}var yg=null,vg=null;function xg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wg=typeof setTimeout=="function"?setTimeout:void 0,k4=typeof clearTimeout=="function"?clearTimeout:void 0,cw=typeof Promise=="function"?Promise:void 0,T4=typeof queueMicrotask=="function"?queueMicrotask:typeof cw<"u"?function(t){return cw.resolve(null).then(t).catch(I4)}:wg;function I4(t){setTimeout(function(){throw t})}function $m(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Fl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Fl(e)}function Vs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var bo=Math.random().toString(36).slice(2),_r="__reactFiber$"+bo,Bl="__reactProps$"+bo,is="__reactContainer$"+bo,_g="__reactEvents$"+bo,C4="__reactListeners$"+bo,A4="__reactHandles$"+bo;function Ci(t){var e=t[_r];if(e)return e;for(var n=t.parentNode;n;){if(e=n[is]||n[_r]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=uw(t);t!==null;){if(n=t[_r])return n;t=uw(t)}return e}t=n,n=t.parentNode}return null}function Ic(t){return t=t[_r]||t[is],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ra(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(P(33))}function Bh(t){return t[Bl]||null}var Eg=[],Pa=-1;function hi(t){return{current:t}}function Ae(t){0>Pa||(t.current=Eg[Pa],Eg[Pa]=null,Pa--)}function be(t,e){Pa++,Eg[Pa]=t.current,t.current=e}var ti={},Ut=hi(ti),un=hi(!1),zi=ti;function eo(t,e){var n=t.type.contextTypes;if(!n)return ti;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function dn(t){return t=t.childContextTypes,t!=null}function bd(){Ae(un),Ae(Ut)}function dw(t,e,n){if(Ut.current!==ti)throw Error(P(168));be(Ut,e),be(un,n)}function ub(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(P(108,fN(t)||"Unknown",s));return Le({},n,r)}function kd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ti,zi=Ut.current,be(Ut,t),be(un,un.current),!0}function hw(t,e,n){var r=t.stateNode;if(!r)throw Error(P(169));n?(t=ub(t,e,zi),r.__reactInternalMemoizedMergedChildContext=t,Ae(un),Ae(Ut),be(Ut,t)):Ae(un),be(un,n)}var qr=null,Uh=!1,zm=!1;function db(t){qr===null?qr=[t]:qr.push(t)}function R4(t){Uh=!0,db(t)}function fi(){if(!zm&&qr!==null){zm=!0;var t=0,e=ve;try{var n=qr;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}qr=null,Uh=!1}catch(s){throw qr!==null&&(qr=qr.slice(t+1)),F2(gy,fi),s}finally{ve=e,zm=!1}}return null}var Na=[],ja=0,Td=null,Id=0,On=[],Fn=0,Bi=null,Gr=1,Kr="";function _i(t,e){Na[ja++]=Id,Na[ja++]=Td,Td=t,Id=e}function hb(t,e,n){On[Fn++]=Gr,On[Fn++]=Kr,On[Fn++]=Bi,Bi=t;var r=Gr;t=Kr;var s=32-ar(r)-1;r&=~(1<<s),n+=1;var i=32-ar(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Gr=1<<32-ar(e)+s|n<<s|r,Kr=i+t}else Gr=1<<i|n<<s|r,Kr=t}function ky(t){t.return!==null&&(_i(t,1),hb(t,1,0))}function Ty(t){for(;t===Td;)Td=Na[--ja],Na[ja]=null,Id=Na[--ja],Na[ja]=null;for(;t===Bi;)Bi=On[--Fn],On[Fn]=null,Kr=On[--Fn],On[Fn]=null,Gr=On[--Fn],On[Fn]=null}var bn=null,_n=null,De=!1,er=null;function fb(t,e){var n=$n(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bn=t,_n=Vs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bn=t,_n=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Bi!==null?{id:Gr,overflow:Kr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=$n(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bn=t,_n=null,!0):!1;default:return!1}}function Sg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function bg(t){if(De){var e=_n;if(e){var n=e;if(!fw(t,e)){if(Sg(t))throw Error(P(418));e=Vs(n.nextSibling);var r=bn;e&&fw(t,e)?fb(r,n):(t.flags=t.flags&-4097|2,De=!1,bn=t)}}else{if(Sg(t))throw Error(P(418));t.flags=t.flags&-4097|2,De=!1,bn=t}}}function mw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bn=t}function gu(t){if(t!==bn)return!1;if(!De)return mw(t),De=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xg(t.type,t.memoizedProps)),e&&(e=_n)){if(Sg(t))throw mb(),Error(P(418));for(;e;)fb(t,e),e=Vs(e.nextSibling)}if(mw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_n=Vs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_n=null}}else _n=bn?Vs(t.stateNode.nextSibling):null;return!0}function mb(){for(var t=_n;t;)t=Vs(t.nextSibling)}function to(){_n=bn=null,De=!1}function Iy(t){er===null?er=[t]:er.push(t)}var P4=ps.ReactCurrentBatchConfig;function Jn(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Cd=hi(null),Ad=null,Da=null,Cy=null;function Ay(){Cy=Da=Ad=null}function Ry(t){var e=Cd.current;Ae(Cd),t._currentValue=e}function kg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Wa(t,e){Ad=t,Cy=Da=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ln=!0),t.firstContext=null)}function Vn(t){var e=t._currentValue;if(Cy!==t)if(t={context:t,memoizedValue:e,next:null},Da===null){if(Ad===null)throw Error(P(308));Da=t,Ad.dependencies={lanes:0,firstContext:t}}else Da=Da.next=t;return e}var Ai=null;function Py(t){Ai===null?Ai=[t]:Ai.push(t)}function pb(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Py(e)):(n.next=s.next,s.next=n),e.interleaved=n,as(t,r)}function as(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Is=!1;function Ny(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ws(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,as(t,n)}return s=r.interleaved,s===null?(e.next=e,Py(r)):(e.next=s.next,s.next=e),r.interleaved=e,as(t,n)}function Ku(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yy(t,n)}}function pw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Rd(t,e,n,r){var s=t.updateQueue;Is=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;a=0,d=u=c=null,o=i;do{var m=o.lane,p=o.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,x=o;switch(m=e,p=n,x.tag){case 1:if(g=x.payload,typeof g=="function"){h=g.call(p,h,m);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,m=typeof g=="function"?g.call(p,h,m):g,m==null)break e;h=Le({},h,m);break e;case 2:Is=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[o]:m.push(o))}else p={eventTime:p,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,a|=m;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;m=o,o=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(1);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Vi|=a,t.lanes=a,t.memoizedState=h}}function gw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(P(191,s));s.call(r)}}}var yb=new p2.Component().refs;function Tg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vh={isMounted:function(t){return(t=t._reactInternals)?aa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Jt(),s=qs(t),i=Zr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ws(t,i,s),e!==null&&(or(e,t,s,r),Ku(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Jt(),s=qs(t),i=Zr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ws(t,i,s),e!==null&&(or(e,t,s,r),Ku(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),r=qs(t),s=Zr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ws(t,s,r),e!==null&&(or(e,t,r,n),Ku(e,t,r))}};function yw(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Ml(n,r)||!Ml(s,i):!0}function vb(t,e,n){var r=!1,s=ti,i=e.contextType;return typeof i=="object"&&i!==null?i=Vn(i):(s=dn(e)?zi:Ut.current,r=e.contextTypes,i=(r=r!=null)?eo(t,s):ti),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function vw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Vh.enqueueReplaceState(e,e.state,null)}function Ig(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=yb,Ny(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Vn(i):(i=dn(e)?zi:Ut.current,s.context=eo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Tg(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Vh.enqueueReplaceState(s,s.state,null),Rd(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Wo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(P(309));var r=n.stateNode}if(!r)throw Error(P(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;o===yb&&(o=s.refs={}),a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(P(284));if(!n._owner)throw Error(P(290,t))}return t}function yu(t,e){throw t=Object.prototype.toString.call(e),Error(P(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xw(t){var e=t._init;return e(t._payload)}function xb(t){function e(v,y){if(t){var w=v.deletions;w===null?(v.deletions=[y],v.flags|=16):w.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function s(v,y){return v=Gs(v,y),v.index=0,v.sibling=null,v}function i(v,y,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<y?(v.flags|=2,y):w):(v.flags|=2,y)):(v.flags|=1048576,y)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function o(v,y,w,E){return y===null||y.tag!==6?(y=Gm(w,v.mode,E),y.return=v,y):(y=s(y,w),y.return=v,y)}function c(v,y,w,E){var S=w.type;return S===Ta?d(v,y,w.props.children,E,w.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ts&&xw(S)===y.type)?(E=s(y,w.props),E.ref=Wo(v,y,w),E.return=v,E):(E=ed(w.type,w.key,w.props,null,v.mode,E),E.ref=Wo(v,y,w),E.return=v,E)}function u(v,y,w,E){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=Km(w,v.mode,E),y.return=v,y):(y=s(y,w.children||[]),y.return=v,y)}function d(v,y,w,E,S){return y===null||y.tag!==7?(y=Fi(w,v.mode,E,S),y.return=v,y):(y=s(y,w),y.return=v,y)}function h(v,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Gm(""+y,v.mode,w),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case au:return w=ed(y.type,y.key,y.props,null,v.mode,w),w.ref=Wo(v,null,y),w.return=v,w;case ka:return y=Km(y,v.mode,w),y.return=v,y;case Ts:var E=y._init;return h(v,E(y._payload),w)}if(sl(y)||$o(y))return y=Fi(y,v.mode,w,null),y.return=v,y;yu(v,y)}return null}function m(v,y,w,E){var S=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:o(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case au:return w.key===S?c(v,y,w,E):null;case ka:return w.key===S?u(v,y,w,E):null;case Ts:return S=w._init,m(v,y,S(w._payload),E)}if(sl(w)||$o(w))return S!==null?null:d(v,y,w,E,null);yu(v,w)}return null}function p(v,y,w,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(w)||null,o(y,v,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case au:return v=v.get(E.key===null?w:E.key)||null,c(y,v,E,S);case ka:return v=v.get(E.key===null?w:E.key)||null,u(y,v,E,S);case Ts:var b=E._init;return p(v,y,w,b(E._payload),S)}if(sl(E)||$o(E))return v=v.get(w)||null,d(y,v,E,S,null);yu(y,E)}return null}function g(v,y,w,E){for(var S=null,b=null,k=y,T=y=0,N=null;k!==null&&T<w.length;T++){k.index>T?(N=k,k=null):N=k.sibling;var D=m(v,k,w[T],E);if(D===null){k===null&&(k=N);break}t&&k&&D.alternate===null&&e(v,k),y=i(D,y,T),b===null?S=D:b.sibling=D,b=D,k=N}if(T===w.length)return n(v,k),De&&_i(v,T),S;if(k===null){for(;T<w.length;T++)k=h(v,w[T],E),k!==null&&(y=i(k,y,T),b===null?S=k:b.sibling=k,b=k);return De&&_i(v,T),S}for(k=r(v,k);T<w.length;T++)N=p(k,v,T,w[T],E),N!==null&&(t&&N.alternate!==null&&k.delete(N.key===null?T:N.key),y=i(N,y,T),b===null?S=N:b.sibling=N,b=N);return t&&k.forEach(function(ee){return e(v,ee)}),De&&_i(v,T),S}function x(v,y,w,E){var S=$o(w);if(typeof S!="function")throw Error(P(150));if(w=S.call(w),w==null)throw Error(P(151));for(var b=S=null,k=y,T=y=0,N=null,D=w.next();k!==null&&!D.done;T++,D=w.next()){k.index>T?(N=k,k=null):N=k.sibling;var ee=m(v,k,D.value,E);if(ee===null){k===null&&(k=N);break}t&&k&&ee.alternate===null&&e(v,k),y=i(ee,y,T),b===null?S=ee:b.sibling=ee,b=ee,k=N}if(D.done)return n(v,k),De&&_i(v,T),S;if(k===null){for(;!D.done;T++,D=w.next())D=h(v,D.value,E),D!==null&&(y=i(D,y,T),b===null?S=D:b.sibling=D,b=D);return De&&_i(v,T),S}for(k=r(v,k);!D.done;T++,D=w.next())D=p(k,v,T,D.value,E),D!==null&&(t&&D.alternate!==null&&k.delete(D.key===null?T:D.key),y=i(D,y,T),b===null?S=D:b.sibling=D,b=D);return t&&k.forEach(function(K){return e(v,K)}),De&&_i(v,T),S}function _(v,y,w,E){if(typeof w=="object"&&w!==null&&w.type===Ta&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case au:e:{for(var S=w.key,b=y;b!==null;){if(b.key===S){if(S=w.type,S===Ta){if(b.tag===7){n(v,b.sibling),y=s(b,w.props.children),y.return=v,v=y;break e}}else if(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ts&&xw(S)===b.type){n(v,b.sibling),y=s(b,w.props),y.ref=Wo(v,b,w),y.return=v,v=y;break e}n(v,b);break}else e(v,b);b=b.sibling}w.type===Ta?(y=Fi(w.props.children,v.mode,E,w.key),y.return=v,v=y):(E=ed(w.type,w.key,w.props,null,v.mode,E),E.ref=Wo(v,y,w),E.return=v,v=E)}return a(v);case ka:e:{for(b=w.key;y!==null;){if(y.key===b)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(v,y.sibling),y=s(y,w.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=Km(w,v.mode,E),y.return=v,v=y}return a(v);case Ts:return b=w._init,_(v,y,b(w._payload),E)}if(sl(w))return g(v,y,w,E);if($o(w))return x(v,y,w,E);yu(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(v,y.sibling),y=s(y,w),y.return=v,v=y):(n(v,y),y=Gm(w,v.mode,E),y.return=v,v=y),a(v)):n(v,y)}return _}var no=xb(!0),wb=xb(!1),Cc={},Rr=hi(Cc),Ul=hi(Cc),Vl=hi(Cc);function Ri(t){if(t===Cc)throw Error(P(174));return t}function jy(t,e){switch(be(Vl,e),be(Ul,t),be(Rr,Cc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ig(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ig(e,t)}Ae(Rr),be(Rr,e)}function ro(){Ae(Rr),Ae(Ul),Ae(Vl)}function _b(t){Ri(Vl.current);var e=Ri(Rr.current),n=ig(e,t.type);e!==n&&(be(Ul,t),be(Rr,n))}function Dy(t){Ul.current===t&&(Ae(Rr),Ae(Ul))}var Oe=hi(0);function Pd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bm=[];function Oy(){for(var t=0;t<Bm.length;t++)Bm[t]._workInProgressVersionPrimary=null;Bm.length=0}var Qu=ps.ReactCurrentDispatcher,Um=ps.ReactCurrentBatchConfig,Ui=0,Fe=null,it=null,ft=null,Nd=!1,xl=!1,Wl=0,N4=0;function Rt(){throw Error(P(321))}function Fy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!lr(t[n],e[n]))return!1;return!0}function Ly(t,e,n,r,s,i){if(Ui=i,Fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qu.current=t===null||t.memoizedState===null?F4:L4,t=n(r,s),xl){i=0;do{if(xl=!1,Wl=0,25<=i)throw Error(P(301));i+=1,ft=it=null,e.updateQueue=null,Qu.current=M4,t=n(r,s)}while(xl)}if(Qu.current=jd,e=it!==null&&it.next!==null,Ui=0,ft=it=Fe=null,Nd=!1,e)throw Error(P(300));return t}function My(){var t=Wl!==0;return Wl=0,t}function xr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Fe.memoizedState=ft=t:ft=ft.next=t,ft}function Wn(){if(it===null){var t=Fe.alternate;t=t!==null?t.memoizedState:null}else t=it.next;var e=ft===null?Fe.memoizedState:ft.next;if(e!==null)ft=e,it=t;else{if(t===null)throw Error(P(310));it=t,t={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},ft===null?Fe.memoizedState=ft=t:ft=ft.next=t}return ft}function Hl(t,e){return typeof e=="function"?e(t):e}function Vm(t){var e=Wn(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var r=it,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=a=null,c=null,u=i;do{var d=u.lane;if((Ui&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=h,a=r):c=c.next=h,Fe.lanes|=d,Vi|=d}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=o,lr(r,e.memoizedState)||(ln=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Fe.lanes|=i,Vi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Wm(t){var e=Wn(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);lr(i,e.memoizedState)||(ln=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Eb(){}function Sb(t,e){var n=Fe,r=Wn(),s=e(),i=!lr(r.memoizedState,s);if(i&&(r.memoizedState=s,ln=!0),r=r.queue,$y(Tb.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ft!==null&&ft.memoizedState.tag&1){if(n.flags|=2048,ql(9,kb.bind(null,n,r,s,e),void 0,null),gt===null)throw Error(P(349));Ui&30||bb(n,e,s)}return s}function bb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kb(t,e,n,r){e.value=n,e.getSnapshot=r,Ib(e)&&Cb(t)}function Tb(t,e,n){return n(function(){Ib(e)&&Cb(t)})}function Ib(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!lr(t,n)}catch{return!0}}function Cb(t){var e=as(t,1);e!==null&&or(e,t,1,-1)}function ww(t){var e=xr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hl,lastRenderedState:t},e.queue=t,t=t.dispatch=O4.bind(null,Fe,t),[e.memoizedState,t]}function ql(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ab(){return Wn().memoizedState}function Xu(t,e,n,r){var s=xr();Fe.flags|=t,s.memoizedState=ql(1|e,n,void 0,r===void 0?null:r)}function Wh(t,e,n,r){var s=Wn();r=r===void 0?null:r;var i=void 0;if(it!==null){var a=it.memoizedState;if(i=a.destroy,r!==null&&Fy(r,a.deps)){s.memoizedState=ql(e,n,i,r);return}}Fe.flags|=t,s.memoizedState=ql(1|e,n,i,r)}function _w(t,e){return Xu(8390656,8,t,e)}function $y(t,e){return Wh(2048,8,t,e)}function Rb(t,e){return Wh(4,2,t,e)}function Pb(t,e){return Wh(4,4,t,e)}function Nb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function jb(t,e,n){return n=n!=null?n.concat([t]):null,Wh(4,4,Nb.bind(null,e,t),n)}function zy(){}function Db(t,e){var n=Wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ob(t,e){var n=Wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Fb(t,e,n){return Ui&21?(lr(n,e)||(n=$2(),Fe.lanes|=n,Vi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ln=!0),t.memoizedState=n)}function j4(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=Um.transition;Um.transition={};try{t(!1),e()}finally{ve=n,Um.transition=r}}function Lb(){return Wn().memoizedState}function D4(t,e,n){var r=qs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Mb(t))$b(e,n);else if(n=pb(t,e,n,r),n!==null){var s=Jt();or(n,t,r,s),zb(n,e,r)}}function O4(t,e,n){var r=qs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Mb(t))$b(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,lr(o,a)){var c=e.interleaved;c===null?(s.next=s,Py(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=pb(t,e,s,r),n!==null&&(s=Jt(),or(n,t,r,s),zb(n,e,r))}}function Mb(t){var e=t.alternate;return t===Fe||e!==null&&e===Fe}function $b(t,e){xl=Nd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function zb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yy(t,n)}}var jd={readContext:Vn,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},F4={readContext:Vn,useCallback:function(t,e){return xr().memoizedState=[t,e===void 0?null:e],t},useContext:Vn,useEffect:_w,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xu(4194308,4,Nb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xu(4,2,t,e)},useMemo:function(t,e){var n=xr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=xr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=D4.bind(null,Fe,t),[r.memoizedState,t]},useRef:function(t){var e=xr();return t={current:t},e.memoizedState=t},useState:ww,useDebugValue:zy,useDeferredValue:function(t){return xr().memoizedState=t},useTransition:function(){var t=ww(!1),e=t[0];return t=j4.bind(null,t[1]),xr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Fe,s=xr();if(De){if(n===void 0)throw Error(P(407));n=n()}else{if(n=e(),gt===null)throw Error(P(349));Ui&30||bb(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,_w(Tb.bind(null,r,i,t),[t]),r.flags|=2048,ql(9,kb.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=xr(),e=gt.identifierPrefix;if(De){var n=Kr,r=Gr;n=(r&~(1<<32-ar(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=N4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},L4={readContext:Vn,useCallback:Db,useContext:Vn,useEffect:$y,useImperativeHandle:jb,useInsertionEffect:Rb,useLayoutEffect:Pb,useMemo:Ob,useReducer:Vm,useRef:Ab,useState:function(){return Vm(Hl)},useDebugValue:zy,useDeferredValue:function(t){var e=Wn();return Fb(e,it.memoizedState,t)},useTransition:function(){var t=Vm(Hl)[0],e=Wn().memoizedState;return[t,e]},useMutableSource:Eb,useSyncExternalStore:Sb,useId:Lb,unstable_isNewReconciler:!1},M4={readContext:Vn,useCallback:Db,useContext:Vn,useEffect:$y,useImperativeHandle:jb,useInsertionEffect:Rb,useLayoutEffect:Pb,useMemo:Ob,useReducer:Wm,useRef:Ab,useState:function(){return Wm(Hl)},useDebugValue:zy,useDeferredValue:function(t){var e=Wn();return it===null?e.memoizedState=t:Fb(e,it.memoizedState,t)},useTransition:function(){var t=Wm(Hl)[0],e=Wn().memoizedState;return[t,e]},useMutableSource:Eb,useSyncExternalStore:Sb,useId:Lb,unstable_isNewReconciler:!1};function so(t,e){try{var n="",r=e;do n+=hN(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Hm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Cg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var $4=typeof WeakMap=="function"?WeakMap:Map;function Bb(t,e,n){n=Zr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Od||(Od=!0,Mg=r),Cg(t,e)},n}function Ub(t,e,n){n=Zr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Cg(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Cg(t,e),typeof r!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Ew(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new $4;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Z4.bind(null,t,e,n),e.then(t,t))}function Sw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bw(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zr(-1,1),e.tag=2,Ws(n,e,1))),n.lanes|=1),t)}var z4=ps.ReactCurrentOwner,ln=!1;function Kt(t,e,n,r){e.child=t===null?wb(e,null,n,r):no(e,t.child,n,r)}function kw(t,e,n,r,s){n=n.render;var i=e.ref;return Wa(e,s),r=Ly(t,e,n,r,i,s),n=My(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,os(t,e,s)):(De&&n&&ky(e),e.flags|=1,Kt(t,e,r,s),e.child)}function Tw(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ky(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Vb(t,e,i,r,s)):(t=ed(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ml,n(a,r)&&t.ref===e.ref)return os(t,e,s)}return e.flags|=1,t=Gs(i,r),t.ref=e.ref,t.return=e,e.child=t}function Vb(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ml(i,r)&&t.ref===e.ref)if(ln=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(ln=!0);else return e.lanes=t.lanes,os(t,e,s)}return Ag(t,e,n,r,s)}function Wb(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(Fa,xn),xn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,be(Fa,xn),xn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,be(Fa,xn),xn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,be(Fa,xn),xn|=r;return Kt(t,e,s,n),e.child}function Hb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ag(t,e,n,r,s){var i=dn(n)?zi:Ut.current;return i=eo(e,i),Wa(e,s),n=Ly(t,e,n,r,i,s),r=My(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,os(t,e,s)):(De&&r&&ky(e),e.flags|=1,Kt(t,e,n,s),e.child)}function Iw(t,e,n,r,s){if(dn(n)){var i=!0;kd(e)}else i=!1;if(Wa(e,s),e.stateNode===null)Yu(t,e),vb(e,n,r),Ig(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Vn(u):(u=dn(n)?zi:Ut.current,u=eo(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||c!==u)&&vw(e,a,r,u),Is=!1;var m=e.memoizedState;a.state=m,Rd(e,r,a,s),c=e.memoizedState,o!==r||m!==c||un.current||Is?(typeof d=="function"&&(Tg(e,n,d,r),c=e.memoizedState),(o=Is||yw(e,n,o,r,m,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,gb(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Jn(e.type,o),a.props=u,h=e.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Vn(c):(c=dn(n)?zi:Ut.current,c=eo(e,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||m!==c)&&vw(e,a,r,c),Is=!1,m=e.memoizedState,a.state=m,Rd(e,r,a,s);var g=e.memoizedState;o!==h||m!==g||un.current||Is?(typeof p=="function"&&(Tg(e,n,p,r),g=e.memoizedState),(u=Is||yw(e,n,u,r,m,g,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),a.props=r,a.state=g,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Rg(t,e,n,r,i,s)}function Rg(t,e,n,r,s,i){Hb(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&hw(e,n,!1),os(t,e,i);r=e.stateNode,z4.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=no(e,t.child,null,i),e.child=no(e,null,o,i)):Kt(t,e,o,i),e.memoizedState=r.state,s&&hw(e,n,!0),e.child}function qb(t){var e=t.stateNode;e.pendingContext?dw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dw(t,e.context,!1),jy(t,e.containerInfo)}function Cw(t,e,n,r,s){return to(),Iy(s),e.flags|=256,Kt(t,e,n,r),e.child}var Pg={dehydrated:null,treeContext:null,retryLane:0};function Ng(t){return{baseLanes:t,cachePool:null,transitions:null}}function Gb(t,e,n){var r=e.pendingProps,s=Oe.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),be(Oe,s&1),t===null)return bg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Gh(a,r,0,null),t=Fi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ng(n),e.memoizedState=Pg,t):By(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return B4(t,e,a,r,o,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,o=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Gs(s,c),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=Gs(o,i):(i=Fi(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Ng(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Pg,r}return i=t.child,t=i.sibling,r=Gs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function By(t,e){return e=Gh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vu(t,e,n,r){return r!==null&&Iy(r),no(e,t.child,null,n),t=By(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function B4(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Hm(Error(P(422))),vu(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Gh({mode:"visible",children:r.children},s,0,null),i=Fi(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&no(e,t.child,null,a),e.child.memoizedState=Ng(a),e.memoizedState=Pg,i);if(!(e.mode&1))return vu(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(P(419)),r=Hm(i,r,void 0),vu(t,e,a,r)}if(o=(a&t.childLanes)!==0,ln||o){if(r=gt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,as(t,s),or(r,t,s,-1))}return Gy(),r=Hm(Error(P(421))),vu(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=e5.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,_n=Vs(s.nextSibling),bn=e,De=!0,er=null,t!==null&&(On[Fn++]=Gr,On[Fn++]=Kr,On[Fn++]=Bi,Gr=t.id,Kr=t.overflow,Bi=e),e=By(e,r.children),e.flags|=4096,e)}function Aw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),kg(t.return,e,n)}function qm(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Kb(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Kt(t,e,r.children,n),r=Oe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Aw(t,n,e);else if(t.tag===19)Aw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(be(Oe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Pd(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),qm(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Pd(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}qm(e,!0,n,null,i);break;case"together":qm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function os(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(P(153));if(e.child!==null){for(t=e.child,n=Gs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Gs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function U4(t,e,n){switch(e.tag){case 3:qb(e),to();break;case 5:_b(e);break;case 1:dn(e.type)&&kd(e);break;case 4:jy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;be(Cd,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(be(Oe,Oe.current&1),e.flags|=128,null):n&e.child.childLanes?Gb(t,e,n):(be(Oe,Oe.current&1),t=os(t,e,n),t!==null?t.sibling:null);be(Oe,Oe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Kb(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),be(Oe,Oe.current),r)break;return null;case 22:case 23:return e.lanes=0,Wb(t,e,n)}return os(t,e,n)}var Qb,jg,Xb,Yb;Qb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jg=function(){};Xb=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ri(Rr.current);var i=null;switch(n){case"input":s=tg(t,s),r=tg(t,r),i=[];break;case"select":s=Le({},s,{value:void 0}),r=Le({},r,{value:void 0}),i=[];break;case"textarea":s=sg(t,s),r=sg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Sd)}ag(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Pl.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(o=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Pl.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Te("scroll",t),i||o===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Yb=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ho(t,e){if(!De)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function V4(t,e,n){var r=e.pendingProps;switch(Ty(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(e),null;case 1:return dn(e.type)&&bd(),Pt(e),null;case 3:return r=e.stateNode,ro(),Ae(un),Ae(Ut),Oy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(gu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,er!==null&&(Bg(er),er=null))),jg(t,e),Pt(e),null;case 5:Dy(e);var s=Ri(Vl.current);if(n=e.type,t!==null&&e.stateNode!=null)Xb(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(P(166));return Pt(e),null}if(t=Ri(Rr.current),gu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[_r]=e,r[Bl]=i,t=(e.mode&1)!==0,n){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(s=0;s<al.length;s++)Te(al[s],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":M1(r,i),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Te("invalid",r);break;case"textarea":z1(r,i),Te("invalid",r)}ag(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&pu(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&pu(r.textContent,o,t),s=["children",""+o]):Pl.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Te("scroll",r)}switch(n){case"input":ou(r),$1(r,i,!0);break;case"textarea":ou(r),B1(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Sd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=b2(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[_r]=e,t[Bl]=r,Qb(t,e,!1,!1),e.stateNode=t;e:{switch(a=og(n,r),n){case"dialog":Te("cancel",t),Te("close",t),s=r;break;case"iframe":case"object":case"embed":Te("load",t),s=r;break;case"video":case"audio":for(s=0;s<al.length;s++)Te(al[s],t);s=r;break;case"source":Te("error",t),s=r;break;case"img":case"image":case"link":Te("error",t),Te("load",t),s=r;break;case"details":Te("toggle",t),s=r;break;case"input":M1(t,r),s=tg(t,r),Te("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Le({},r,{value:void 0}),Te("invalid",t);break;case"textarea":z1(t,r),s=sg(t,r),Te("invalid",t);break;default:s=r}ag(n,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?I2(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&k2(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Nl(t,c):typeof c=="number"&&Nl(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Pl.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Te("scroll",t):c!=null&&dy(t,i,c,a))}switch(n){case"input":ou(t),$1(t,r,!1);break;case"textarea":ou(t),B1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ei(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?za(t,!!r.multiple,i,!1):r.defaultValue!=null&&za(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Sd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pt(e),null;case 6:if(t&&e.stateNode!=null)Yb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(P(166));if(n=Ri(Vl.current),Ri(Rr.current),gu(e)){if(r=e.stateNode,n=e.memoizedProps,r[_r]=e,(i=r.nodeValue!==n)&&(t=bn,t!==null))switch(t.tag){case 3:pu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&pu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_r]=e,e.stateNode=r}return Pt(e),null;case 13:if(Ae(Oe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(De&&_n!==null&&e.mode&1&&!(e.flags&128))mb(),to(),e.flags|=98560,i=!1;else if(i=gu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(P(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(P(317));i[_r]=e}else to(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pt(e),i=!1}else er!==null&&(Bg(er),er=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Oe.current&1?at===0&&(at=3):Gy())),e.updateQueue!==null&&(e.flags|=4),Pt(e),null);case 4:return ro(),jg(t,e),t===null&&$l(e.stateNode.containerInfo),Pt(e),null;case 10:return Ry(e.type._context),Pt(e),null;case 17:return dn(e.type)&&bd(),Pt(e),null;case 19:if(Ae(Oe),i=e.memoizedState,i===null)return Pt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Ho(i,!1);else{if(at!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Pd(t),a!==null){for(e.flags|=128,Ho(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return be(Oe,Oe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ge()>io&&(e.flags|=128,r=!0,Ho(i,!1),e.lanes=4194304)}else{if(!r)if(t=Pd(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ho(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!De)return Pt(e),null}else 2*Ge()-i.renderingStartTime>io&&n!==1073741824&&(e.flags|=128,r=!0,Ho(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ge(),e.sibling=null,n=Oe.current,be(Oe,r?n&1|2:n&1),e):(Pt(e),null);case 22:case 23:return qy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xn&1073741824&&(Pt(e),e.subtreeFlags&6&&(e.flags|=8192)):Pt(e),null;case 24:return null;case 25:return null}throw Error(P(156,e.tag))}function W4(t,e){switch(Ty(e),e.tag){case 1:return dn(e.type)&&bd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ro(),Ae(un),Ae(Ut),Oy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Dy(e),null;case 13:if(Ae(Oe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(P(340));to()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Oe),null;case 4:return ro(),null;case 10:return Ry(e.type._context),null;case 22:case 23:return qy(),null;case 24:return null;default:return null}}var xu=!1,Ot=!1,H4=typeof WeakSet=="function"?WeakSet:Set,$=null;function Oa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$e(t,e,r)}else n.current=null}function Dg(t,e,n){try{n()}catch(r){$e(t,e,r)}}var Rw=!1;function q4(t,e){if(yg=wd,t=tb(),by(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,c=-1,u=0,d=0,h=t,m=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(o=a+s),h!==i||r!==0&&h.nodeType!==3||(c=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===t)break t;if(m===n&&++u===s&&(o=a),m===i&&++d===r&&(c=a),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(vg={focusedElem:t,selectionRange:n},wd=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,_=g.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:Jn(e.type,x),_);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(E){$e(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return g=Rw,Rw=!1,g}function wl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Dg(e,n,i)}s=s.next}while(s!==r)}}function Hh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Og(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Jb(t){var e=t.alternate;e!==null&&(t.alternate=null,Jb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_r],delete e[Bl],delete e[_g],delete e[C4],delete e[A4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zb(t){return t.tag===5||t.tag===3||t.tag===4}function Pw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Sd));else if(r!==4&&(t=t.child,t!==null))for(Fg(t,e,n),t=t.sibling;t!==null;)Fg(t,e,n),t=t.sibling}function Lg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Lg(t,e,n),t=t.sibling;t!==null;)Lg(t,e,n),t=t.sibling}var Et=null,Zn=!1;function Es(t,e,n){for(n=n.child;n!==null;)ek(t,e,n),n=n.sibling}function ek(t,e,n){if(Ar&&typeof Ar.onCommitFiberUnmount=="function")try{Ar.onCommitFiberUnmount(Lh,n)}catch{}switch(n.tag){case 5:Ot||Oa(n,e);case 6:var r=Et,s=Zn;Et=null,Es(t,e,n),Et=r,Zn=s,Et!==null&&(Zn?(t=Et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Et.removeChild(n.stateNode));break;case 18:Et!==null&&(Zn?(t=Et,n=n.stateNode,t.nodeType===8?$m(t.parentNode,n):t.nodeType===1&&$m(t,n),Fl(t)):$m(Et,n.stateNode));break;case 4:r=Et,s=Zn,Et=n.stateNode.containerInfo,Zn=!0,Es(t,e,n),Et=r,Zn=s;break;case 0:case 11:case 14:case 15:if(!Ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Dg(n,e,a),s=s.next}while(s!==r)}Es(t,e,n);break;case 1:if(!Ot&&(Oa(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){$e(n,e,o)}Es(t,e,n);break;case 21:Es(t,e,n);break;case 22:n.mode&1?(Ot=(r=Ot)||n.memoizedState!==null,Es(t,e,n),Ot=r):Es(t,e,n);break;default:Es(t,e,n)}}function Nw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new H4),e.forEach(function(r){var s=t5.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Xn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Et=o.stateNode,Zn=!1;break e;case 3:Et=o.stateNode.containerInfo,Zn=!0;break e;case 4:Et=o.stateNode.containerInfo,Zn=!0;break e}o=o.return}if(Et===null)throw Error(P(160));ek(i,a,s),Et=null,Zn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){$e(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tk(e,t),e=e.sibling}function tk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xn(e,t),gr(t),r&4){try{wl(3,t,t.return),Hh(3,t)}catch(x){$e(t,t.return,x)}try{wl(5,t,t.return)}catch(x){$e(t,t.return,x)}}break;case 1:Xn(e,t),gr(t),r&512&&n!==null&&Oa(n,n.return);break;case 5:if(Xn(e,t),gr(t),r&512&&n!==null&&Oa(n,n.return),t.flags&32){var s=t.stateNode;try{Nl(s,"")}catch(x){$e(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&E2(s,i),og(o,a);var u=og(o,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?I2(s,h):d==="dangerouslySetInnerHTML"?k2(s,h):d==="children"?Nl(s,h):dy(s,d,h,u)}switch(o){case"input":ng(s,i);break;case"textarea":S2(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?za(s,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?za(s,!!i.multiple,i.defaultValue,!0):za(s,!!i.multiple,i.multiple?[]:"",!1))}s[Bl]=i}catch(x){$e(t,t.return,x)}}break;case 6:if(Xn(e,t),gr(t),r&4){if(t.stateNode===null)throw Error(P(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){$e(t,t.return,x)}}break;case 3:if(Xn(e,t),gr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fl(e.containerInfo)}catch(x){$e(t,t.return,x)}break;case 4:Xn(e,t),gr(t);break;case 13:Xn(e,t),gr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Wy=Ge())),r&4&&Nw(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(u=Ot)||d,Xn(e,t),Ot=u):Xn(e,t),gr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for($=t,d=t.child;d!==null;){for(h=$=d;$!==null;){switch(m=$,p=m.child,m.tag){case 0:case 11:case 14:case 15:wl(4,m,m.return);break;case 1:Oa(m,m.return);var g=m.stateNode;if(typeof g.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(x){$e(r,n,x)}}break;case 5:Oa(m,m.return);break;case 22:if(m.memoizedState!==null){Dw(h);continue}}p!==null?(p.return=m,$=p):Dw(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=T2("display",a))}catch(x){$e(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(x){$e(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Xn(e,t),gr(t),r&4&&Nw(t);break;case 21:break;default:Xn(e,t),gr(t)}}function gr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Zb(n)){var r=n;break e}n=n.return}throw Error(P(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Nl(s,""),r.flags&=-33);var i=Pw(t);Lg(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=Pw(t);Fg(t,o,a);break;default:throw Error(P(161))}}catch(c){$e(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function G4(t,e,n){$=t,nk(t)}function nk(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var s=$,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||xu;if(!a){var o=s.alternate,c=o!==null&&o.memoizedState!==null||Ot;o=xu;var u=Ot;if(xu=a,(Ot=c)&&!u)for($=s;$!==null;)a=$,c=a.child,a.tag===22&&a.memoizedState!==null?Ow(s):c!==null?(c.return=a,$=c):Ow(s);for(;i!==null;)$=i,nk(i),i=i.sibling;$=s,xu=o,Ot=u}jw(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$=i):jw(t)}}function jw(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||Hh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ot)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Jn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&gw(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gw(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Fl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}Ot||e.flags&512&&Og(e)}catch(m){$e(e,e.return,m)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function Dw(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function Ow(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Hh(4,e)}catch(c){$e(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){$e(e,s,c)}}var i=e.return;try{Og(e)}catch(c){$e(e,i,c)}break;case 5:var a=e.return;try{Og(e)}catch(c){$e(e,a,c)}}}catch(c){$e(e,e.return,c)}if(e===t){$=null;break}var o=e.sibling;if(o!==null){o.return=e.return,$=o;break}$=e.return}}var K4=Math.ceil,Dd=ps.ReactCurrentDispatcher,Uy=ps.ReactCurrentOwner,Bn=ps.ReactCurrentBatchConfig,me=0,gt=null,Ze=null,kt=0,xn=0,Fa=hi(0),at=0,Gl=null,Vi=0,qh=0,Vy=0,_l=null,on=null,Wy=0,io=1/0,Wr=null,Od=!1,Mg=null,Hs=null,wu=!1,Ls=null,Fd=0,El=0,$g=null,Ju=-1,Zu=0;function Jt(){return me&6?Ge():Ju!==-1?Ju:Ju=Ge()}function qs(t){return t.mode&1?me&2&&kt!==0?kt&-kt:P4.transition!==null?(Zu===0&&(Zu=$2()),Zu):(t=ve,t!==0||(t=window.event,t=t===void 0?16:q2(t.type)),t):1}function or(t,e,n,r){if(50<El)throw El=0,$g=null,Error(P(185));kc(t,n,r),(!(me&2)||t!==gt)&&(t===gt&&(!(me&2)&&(qh|=n),at===4&&As(t,kt)),hn(t,r),n===1&&me===0&&!(e.mode&1)&&(io=Ge()+500,Uh&&fi()))}function hn(t,e){var n=t.callbackNode;PN(t,e);var r=xd(t,t===gt?kt:0);if(r===0)n!==null&&W1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&W1(n),e===1)t.tag===0?R4(Fw.bind(null,t)):db(Fw.bind(null,t)),T4(function(){!(me&6)&&fi()}),n=null;else{switch(z2(r)){case 1:n=gy;break;case 4:n=L2;break;case 16:n=vd;break;case 536870912:n=M2;break;default:n=vd}n=uk(n,rk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rk(t,e){if(Ju=-1,Zu=0,me&6)throw Error(P(327));var n=t.callbackNode;if(Ha()&&t.callbackNode!==n)return null;var r=xd(t,t===gt?kt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ld(t,r);else{e=r;var s=me;me|=2;var i=ik();(gt!==t||kt!==e)&&(Wr=null,io=Ge()+500,Oi(t,e));do try{Y4();break}catch(o){sk(t,o)}while(1);Ay(),Dd.current=i,me=s,Ze!==null?e=0:(gt=null,kt=0,e=at)}if(e!==0){if(e===2&&(s=hg(t),s!==0&&(r=s,e=zg(t,s))),e===1)throw n=Gl,Oi(t,0),As(t,r),hn(t,Ge()),n;if(e===6)As(t,r);else{if(s=t.current.alternate,!(r&30)&&!Q4(s)&&(e=Ld(t,r),e===2&&(i=hg(t),i!==0&&(r=i,e=zg(t,i))),e===1))throw n=Gl,Oi(t,0),As(t,r),hn(t,Ge()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(P(345));case 2:Ei(t,on,Wr);break;case 3:if(As(t,r),(r&130023424)===r&&(e=Wy+500-Ge(),10<e)){if(xd(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Jt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=wg(Ei.bind(null,t,on,Wr),e);break}Ei(t,on,Wr);break;case 4:if(As(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-ar(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*K4(r/1960))-r,10<r){t.timeoutHandle=wg(Ei.bind(null,t,on,Wr),r);break}Ei(t,on,Wr);break;case 5:Ei(t,on,Wr);break;default:throw Error(P(329))}}}return hn(t,Ge()),t.callbackNode===n?rk.bind(null,t):null}function zg(t,e){var n=_l;return t.current.memoizedState.isDehydrated&&(Oi(t,e).flags|=256),t=Ld(t,e),t!==2&&(e=on,on=n,e!==null&&Bg(e)),t}function Bg(t){on===null?on=t:on.push.apply(on,t)}function Q4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!lr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function As(t,e){for(e&=~Vy,e&=~qh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ar(e),r=1<<n;t[n]=-1,e&=~r}}function Fw(t){if(me&6)throw Error(P(327));Ha();var e=xd(t,0);if(!(e&1))return hn(t,Ge()),null;var n=Ld(t,e);if(t.tag!==0&&n===2){var r=hg(t);r!==0&&(e=r,n=zg(t,r))}if(n===1)throw n=Gl,Oi(t,0),As(t,e),hn(t,Ge()),n;if(n===6)throw Error(P(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ei(t,on,Wr),hn(t,Ge()),null}function Hy(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(io=Ge()+500,Uh&&fi())}}function Wi(t){Ls!==null&&Ls.tag===0&&!(me&6)&&Ha();var e=me;me|=1;var n=Bn.transition,r=ve;try{if(Bn.transition=null,ve=1,t)return t()}finally{ve=r,Bn.transition=n,me=e,!(me&6)&&fi()}}function qy(){xn=Fa.current,Ae(Fa)}function Oi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,k4(n)),Ze!==null)for(n=Ze.return;n!==null;){var r=n;switch(Ty(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bd();break;case 3:ro(),Ae(un),Ae(Ut),Oy();break;case 5:Dy(r);break;case 4:ro();break;case 13:Ae(Oe);break;case 19:Ae(Oe);break;case 10:Ry(r.type._context);break;case 22:case 23:qy()}n=n.return}if(gt=t,Ze=t=Gs(t.current,null),kt=xn=e,at=0,Gl=null,Vy=qh=Vi=0,on=_l=null,Ai!==null){for(e=0;e<Ai.length;e++)if(n=Ai[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Ai=null}return t}function sk(t,e){do{var n=Ze;try{if(Ay(),Qu.current=jd,Nd){for(var r=Fe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Nd=!1}if(Ui=0,ft=it=Fe=null,xl=!1,Wl=0,Uy.current=null,n===null||n.return===null){at=1,Gl=e,Ze=null;break}e:{var i=t,a=n.return,o=n,c=e;if(e=kt,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Sw(a);if(p!==null){p.flags&=-257,bw(p,a,o,i,e),p.mode&1&&Ew(i,u,e),e=p,c=u;var g=e.updateQueue;if(g===null){var x=new Set;x.add(c),e.updateQueue=x}else g.add(c);break e}else{if(!(e&1)){Ew(i,u,e),Gy();break e}c=Error(P(426))}}else if(De&&o.mode&1){var _=Sw(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),bw(_,a,o,i,e),Iy(so(c,o));break e}}i=c=so(c,o),at!==4&&(at=2),_l===null?_l=[i]:_l.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=Bb(i,c,e);pw(i,v);break e;case 1:o=c;var y=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Hs===null||!Hs.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=Ub(i,o,e);pw(i,E);break e}}i=i.return}while(i!==null)}ok(n)}catch(S){e=S,Ze===n&&n!==null&&(Ze=n=n.return);continue}break}while(1)}function ik(){var t=Dd.current;return Dd.current=jd,t===null?jd:t}function Gy(){(at===0||at===3||at===2)&&(at=4),gt===null||!(Vi&268435455)&&!(qh&268435455)||As(gt,kt)}function Ld(t,e){var n=me;me|=2;var r=ik();(gt!==t||kt!==e)&&(Wr=null,Oi(t,e));do try{X4();break}catch(s){sk(t,s)}while(1);if(Ay(),me=n,Dd.current=r,Ze!==null)throw Error(P(261));return gt=null,kt=0,at}function X4(){for(;Ze!==null;)ak(Ze)}function Y4(){for(;Ze!==null&&!EN();)ak(Ze)}function ak(t){var e=ck(t.alternate,t,xn);t.memoizedProps=t.pendingProps,e===null?ok(t):Ze=e,Uy.current=null}function ok(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=W4(n,e),n!==null){n.flags&=32767,Ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{at=6,Ze=null;return}}else if(n=V4(n,e,xn),n!==null){Ze=n;return}if(e=e.sibling,e!==null){Ze=e;return}Ze=e=t}while(e!==null);at===0&&(at=5)}function Ei(t,e,n){var r=ve,s=Bn.transition;try{Bn.transition=null,ve=1,J4(t,e,n,r)}finally{Bn.transition=s,ve=r}return null}function J4(t,e,n,r){do Ha();while(Ls!==null);if(me&6)throw Error(P(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(P(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(NN(t,i),t===gt&&(Ze=gt=null,kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wu||(wu=!0,uk(vd,function(){return Ha(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Bn.transition,Bn.transition=null;var a=ve;ve=1;var o=me;me|=4,Uy.current=null,q4(t,n),tk(n,t),v4(vg),wd=!!yg,vg=yg=null,t.current=n,G4(n),SN(),me=o,ve=a,Bn.transition=i}else t.current=n;if(wu&&(wu=!1,Ls=t,Fd=s),i=t.pendingLanes,i===0&&(Hs=null),TN(n.stateNode),hn(t,Ge()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Od)throw Od=!1,t=Mg,Mg=null,t;return Fd&1&&t.tag!==0&&Ha(),i=t.pendingLanes,i&1?t===$g?El++:(El=0,$g=t):El=0,fi(),null}function Ha(){if(Ls!==null){var t=z2(Fd),e=Bn.transition,n=ve;try{if(Bn.transition=null,ve=16>t?16:t,Ls===null)var r=!1;else{if(t=Ls,Ls=null,Fd=0,me&6)throw Error(P(331));var s=me;for(me|=4,$=t.current;$!==null;){var i=$,a=i.child;if($.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for($=u;$!==null;){var d=$;switch(d.tag){case 0:case 11:case 15:wl(8,d,i)}var h=d.child;if(h!==null)h.return=d,$=h;else for(;$!==null;){d=$;var m=d.sibling,p=d.return;if(Jb(d),d===u){$=null;break}if(m!==null){m.return=p,$=m;break}$=p}}}var g=i.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}$=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,$=a;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:wl(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,$=v;break e}$=i.return}}var y=t.current;for($=y;$!==null;){a=$;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,$=w;else e:for(a=y;$!==null;){if(o=$,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Hh(9,o)}}catch(S){$e(o,o.return,S)}if(o===a){$=null;break e}var E=o.sibling;if(E!==null){E.return=o.return,$=E;break e}$=o.return}}if(me=s,fi(),Ar&&typeof Ar.onPostCommitFiberRoot=="function")try{Ar.onPostCommitFiberRoot(Lh,t)}catch{}r=!0}return r}finally{ve=n,Bn.transition=e}}return!1}function Lw(t,e,n){e=so(n,e),e=Bb(t,e,1),t=Ws(t,e,1),e=Jt(),t!==null&&(kc(t,1,e),hn(t,e))}function $e(t,e,n){if(t.tag===3)Lw(t,t,n);else for(;e!==null;){if(e.tag===3){Lw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Hs===null||!Hs.has(r))){t=so(n,t),t=Ub(e,t,1),e=Ws(e,t,1),t=Jt(),e!==null&&(kc(e,1,t),hn(e,t));break}}e=e.return}}function Z4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Jt(),t.pingedLanes|=t.suspendedLanes&n,gt===t&&(kt&n)===n&&(at===4||at===3&&(kt&130023424)===kt&&500>Ge()-Wy?Oi(t,0):Vy|=n),hn(t,e)}function lk(t,e){e===0&&(t.mode&1?(e=uu,uu<<=1,!(uu&130023424)&&(uu=4194304)):e=1);var n=Jt();t=as(t,e),t!==null&&(kc(t,e,n),hn(t,n))}function e5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lk(t,n)}function t5(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(P(314))}r!==null&&r.delete(e),lk(t,n)}var ck;ck=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||un.current)ln=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ln=!1,U4(t,e,n);ln=!!(t.flags&131072)}else ln=!1,De&&e.flags&1048576&&hb(e,Id,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Yu(t,e),t=e.pendingProps;var s=eo(e,Ut.current);Wa(e,n),s=Ly(null,e,r,t,s,n);var i=My();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dn(r)?(i=!0,kd(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ny(e),s.updater=Vh,e.stateNode=s,s._reactInternals=e,Ig(e,r,t,n),e=Rg(null,e,r,!0,i,n)):(e.tag=0,De&&i&&ky(e),Kt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Yu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=r5(r),t=Jn(r,t),s){case 0:e=Ag(null,e,r,t,n);break e;case 1:e=Iw(null,e,r,t,n);break e;case 11:e=kw(null,e,r,t,n);break e;case 14:e=Tw(null,e,r,Jn(r.type,t),n);break e}throw Error(P(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jn(r,s),Ag(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jn(r,s),Iw(t,e,r,s,n);case 3:e:{if(qb(e),t===null)throw Error(P(387));r=e.pendingProps,i=e.memoizedState,s=i.element,gb(t,e),Rd(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=so(Error(P(423)),e),e=Cw(t,e,r,n,s);break e}else if(r!==s){s=so(Error(P(424)),e),e=Cw(t,e,r,n,s);break e}else for(_n=Vs(e.stateNode.containerInfo.firstChild),bn=e,De=!0,er=null,n=wb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(to(),r===s){e=os(t,e,n);break e}Kt(t,e,r,n)}e=e.child}return e;case 5:return _b(e),t===null&&bg(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,xg(r,s)?a=null:i!==null&&xg(r,i)&&(e.flags|=32),Hb(t,e),Kt(t,e,a,n),e.child;case 6:return t===null&&bg(e),null;case 13:return Gb(t,e,n);case 4:return jy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=no(e,null,r,n):Kt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jn(r,s),kw(t,e,r,s,n);case 7:return Kt(t,e,e.pendingProps,n),e.child;case 8:return Kt(t,e,e.pendingProps.children,n),e.child;case 12:return Kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,be(Cd,r._currentValue),r._currentValue=a,i!==null)if(lr(i.value,a)){if(i.children===s.children&&!un.current){e=os(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Zr(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),kg(i.return,n,e),o.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(P(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),kg(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Kt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Wa(e,n),s=Vn(s),r=r(s),e.flags|=1,Kt(t,e,r,n),e.child;case 14:return r=e.type,s=Jn(r,e.pendingProps),s=Jn(r.type,s),Tw(t,e,r,s,n);case 15:return Vb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jn(r,s),Yu(t,e),e.tag=1,dn(r)?(t=!0,kd(e)):t=!1,Wa(e,n),vb(e,r,s),Ig(e,r,s,n),Rg(null,e,r,!0,t,n);case 19:return Kb(t,e,n);case 22:return Wb(t,e,n)}throw Error(P(156,e.tag))};function uk(t,e){return F2(t,e)}function n5(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(t,e,n,r){return new n5(t,e,n,r)}function Ky(t){return t=t.prototype,!(!t||!t.isReactComponent)}function r5(t){if(typeof t=="function")return Ky(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fy)return 11;if(t===my)return 14}return 2}function Gs(t,e){var n=t.alternate;return n===null?(n=$n(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ed(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Ky(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ta:return Fi(n.children,s,i,e);case hy:a=8,s|=8;break;case Yp:return t=$n(12,n,e,s|2),t.elementType=Yp,t.lanes=i,t;case Jp:return t=$n(13,n,e,s),t.elementType=Jp,t.lanes=i,t;case Zp:return t=$n(19,n,e,s),t.elementType=Zp,t.lanes=i,t;case x2:return Gh(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case y2:a=10;break e;case v2:a=9;break e;case fy:a=11;break e;case my:a=14;break e;case Ts:a=16,r=null;break e}throw Error(P(130,t==null?t:typeof t,""))}return e=$n(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Fi(t,e,n,r){return t=$n(7,t,r,e),t.lanes=n,t}function Gh(t,e,n,r){return t=$n(22,t,r,e),t.elementType=x2,t.lanes=n,t.stateNode={isHidden:!1},t}function Gm(t,e,n){return t=$n(6,t,null,e),t.lanes=n,t}function Km(t,e,n){return e=$n(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function s5(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cm(0),this.expirationTimes=Cm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cm(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Qy(t,e,n,r,s,i,a,o,c){return t=new s5(t,e,n,o,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=$n(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ny(i),t}function i5(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ka,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function dk(t){if(!t)return ti;t=t._reactInternals;e:{if(aa(t)!==t||t.tag!==1)throw Error(P(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(P(171))}if(t.tag===1){var n=t.type;if(dn(n))return ub(t,n,e)}return e}function hk(t,e,n,r,s,i,a,o,c){return t=Qy(n,r,!0,t,s,i,a,o,c),t.context=dk(null),n=t.current,r=Jt(),s=qs(n),i=Zr(r,s),i.callback=e??null,Ws(n,i,s),t.current.lanes=s,kc(t,s,r),hn(t,r),t}function Kh(t,e,n,r){var s=e.current,i=Jt(),a=qs(s);return n=dk(n),e.context===null?e.context=n:e.pendingContext=n,e=Zr(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ws(s,e,a),t!==null&&(or(t,s,a,i),Ku(t,s,a)),a}function Md(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xy(t,e){Mw(t,e),(t=t.alternate)&&Mw(t,e)}function a5(){return null}var fk=typeof reportError=="function"?reportError:function(t){console.error(t)};function Yy(t){this._internalRoot=t}Qh.prototype.render=Yy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(P(409));Kh(t,e,null,null)};Qh.prototype.unmount=Yy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wi(function(){Kh(null,t,null,null)}),e[is]=null}};function Qh(t){this._internalRoot=t}Qh.prototype.unstable_scheduleHydration=function(t){if(t){var e=V2();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cs.length&&e!==0&&e<Cs[n].priority;n++);Cs.splice(n,0,t),n===0&&H2(t)}};function Jy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $w(){}function o5(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Md(a);i.call(u)}}var a=hk(e,r,t,0,null,!1,!1,"",$w);return t._reactRootContainer=a,t[is]=a.current,$l(t.nodeType===8?t.parentNode:t),Wi(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var u=Md(c);o.call(u)}}var c=Qy(t,0,!1,null,null,!1,!1,"",$w);return t._reactRootContainer=c,t[is]=c.current,$l(t.nodeType===8?t.parentNode:t),Wi(function(){Kh(e,c,n,r)}),c}function Yh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var c=Md(a);o.call(c)}}Kh(e,a,t,s)}else a=o5(n,e,t,s,r);return Md(a)}B2=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=il(e.pendingLanes);n!==0&&(yy(e,n|1),hn(e,Ge()),!(me&6)&&(io=Ge()+500,fi()))}break;case 13:Wi(function(){var r=as(t,1);if(r!==null){var s=Jt();or(r,t,1,s)}}),Xy(t,1)}};vy=function(t){if(t.tag===13){var e=as(t,134217728);if(e!==null){var n=Jt();or(e,t,134217728,n)}Xy(t,134217728)}};U2=function(t){if(t.tag===13){var e=qs(t),n=as(t,e);if(n!==null){var r=Jt();or(n,t,e,r)}Xy(t,e)}};V2=function(){return ve};W2=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};cg=function(t,e,n){switch(e){case"input":if(ng(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Bh(r);if(!s)throw Error(P(90));_2(r),ng(r,s)}}}break;case"textarea":S2(t,n);break;case"select":e=n.value,e!=null&&za(t,!!n.multiple,e,!1)}};R2=Hy;P2=Wi;var l5={usingClientEntryPoint:!1,Events:[Ic,Ra,Bh,C2,A2,Hy]},qo={findFiberByHostInstance:Ci,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},c5={bundleType:qo.bundleType,version:qo.version,rendererPackageName:qo.rendererPackageName,rendererConfig:qo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ps.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=D2(t),t===null?null:t.stateNode},findFiberByHostInstance:qo.findFiberByHostInstance||a5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_u.isDisabled&&_u.supportsFiber)try{Lh=_u.inject(c5),Ar=_u}catch{}}Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l5;Rn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jy(e))throw Error(P(200));return i5(t,e,null,n)};Rn.createRoot=function(t,e){if(!Jy(t))throw Error(P(299));var n=!1,r="",s=fk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Qy(t,1,!1,null,null,n,!1,r,s),t[is]=e.current,$l(t.nodeType===8?t.parentNode:t),new Yy(e)};Rn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(P(188)):(t=Object.keys(t).join(","),Error(P(268,t)));return t=D2(e),t=t===null?null:t.stateNode,t};Rn.flushSync=function(t){return Wi(t)};Rn.hydrate=function(t,e,n){if(!Xh(e))throw Error(P(200));return Yh(null,t,e,!0,n)};Rn.hydrateRoot=function(t,e,n){if(!Jy(t))throw Error(P(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=fk;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=hk(e,null,t,1,n??null,s,!1,i,a),t[is]=e.current,$l(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Qh(e)};Rn.render=function(t,e,n){if(!Xh(e))throw Error(P(200));return Yh(null,t,e,!1,n)};Rn.unmountComponentAtNode=function(t){if(!Xh(t))throw Error(P(40));return t._reactRootContainer?(Wi(function(){Yh(null,null,t,!1,function(){t._reactRootContainer=null,t[is]=null})}),!0):!1};Rn.unstable_batchedUpdates=Hy;Rn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Xh(n))throw Error(P(200));if(t==null||t._reactInternals===void 0)throw Error(P(38));return Yh(t,e,n,!1,r)};Rn.version="18.2.0-next-9e3b772b8-20220608";function mk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mk)}catch(t){console.error(t)}}mk(),h2.exports=Rn;var oa=h2.exports,zw=oa;Qp.createRoot=zw.createRoot,Qp.hydrateRoot=zw.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kl(){return Kl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kl.apply(this,arguments)}var Ms;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ms||(Ms={}));const Bw="popstate";function u5(t){t===void 0&&(t={});function e(s,i){let{pathname:a="/",search:o="",hash:c=""}=la(s.location.hash.substr(1));return Ug("",{pathname:a,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let a=s.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof i=="string"?i:$d(i))}function r(s,i){Jh(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return h5(e,n,r,t)}function tt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Jh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function d5(){return Math.random().toString(36).substr(2,8)}function Uw(t,e){return{usr:t.state,key:t.key,idx:e}}function Ug(t,e,n,r){return n===void 0&&(n=null),Kl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?la(e):e,{state:n,key:e&&e.key||r||d5()})}function $d(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function la(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function h5(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,o=Ms.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(Kl({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){o=Ms.Pop;let _=d(),v=_==null?null:_-u;u=_,c&&c({action:o,location:x.location,delta:v})}function m(_,v){o=Ms.Push;let y=Ug(x.location,_,v);n&&n(y,_),u=d()+1;let w=Uw(y,u),E=x.createHref(y);try{a.pushState(w,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(E)}i&&c&&c({action:o,location:x.location,delta:1})}function p(_,v){o=Ms.Replace;let y=Ug(x.location,_,v);n&&n(y,_),u=d();let w=Uw(y,u),E=x.createHref(y);a.replaceState(w,"",E),i&&c&&c({action:o,location:x.location,delta:0})}function g(_){let v=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof _=="string"?_:$d(_);return tt(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let x={get action(){return o},get location(){return t(s,a)},listen(_){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Bw,h),c=_,()=>{s.removeEventListener(Bw,h),c=null}},createHref(_){return e(s,_)},createURL:g,encodeLocation(_){let v=g(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:p,go(_){return a.go(_)}};return x}var Vw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Vw||(Vw={}));function f5(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?la(e):e,s=Zy(r.pathname||"/",n);if(s==null)return null;let i=pk(t);m5(i);let a=null;for(let o=0;a==null&&o<i.length;++o)a=S5(i[o],T5(s));return a}function pk(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(tt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Ks([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(tt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),pk(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:_5(u,i.index),routesMeta:d})};return t.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let c of gk(i.path))s(i,a,c)}),e}function gk(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=gk(r.join("/")),o=[];return o.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&o.push(...a),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function m5(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:E5(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const p5=/^:\w+$/,g5=3,y5=2,v5=1,x5=10,w5=-2,Ww=t=>t==="*";function _5(t,e){let n=t.split("/"),r=n.length;return n.some(Ww)&&(r+=w5),e&&(r+=y5),n.filter(s=>!Ww(s)).reduce((s,i)=>s+(p5.test(i)?g5:i===""?v5:x5),r)}function E5(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function S5(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let a=0;a<n.length;++a){let o=n[a],c=a===n.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=b5({path:o.relativePath,caseSensitive:o.caseSensitive,end:c},u);if(!d)return null;Object.assign(r,d.params);let h=o.route;i.push({params:r,pathname:Ks([s,d.pathname]),pathnameBase:R5(Ks([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=Ks([s,d.pathnameBase]))}return i}function b5(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=k5(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((u,d,h)=>{if(d==="*"){let m=o[h]||"";a=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}return u[d]=I5(o[h]||"",d),u},{}),pathname:i,pathnameBase:a,pattern:t}}function k5(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Jh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(a,o)=>(r.push(o),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function T5(t){try{return decodeURI(t)}catch(e){return Jh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function I5(t,e){try{return decodeURIComponent(t)}catch(n){return Jh(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Zy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function C5(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?la(t):t;return{pathname:n?n.startsWith("/")?n:A5(n,e):e,search:P5(r),hash:N5(s)}}function A5(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Qm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function vk(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=la(t):(s=Kl({},t),tt(!s.pathname||!s.pathname.includes("?"),Qm("?","pathname","search",s)),tt(!s.pathname||!s.pathname.includes("#"),Qm("#","pathname","hash",s)),tt(!s.search||!s.search.includes("#"),Qm("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(r||a==null)o=n;else{let h=e.length-1;if(a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}o=h>=0?e[h]:"/"}let c=C5(s,o),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Ks=t=>t.join("/").replace(/\/\/+/g,"/"),R5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),P5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,N5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function j5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const xk=["post","put","patch","delete"];new Set(xk);const D5=["get",...xk];new Set(D5);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zd(){return zd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zd.apply(this,arguments)}const ev=f.createContext(null),O5=f.createContext(null),ko=f.createContext(null),Zh=f.createContext(null),gs=f.createContext({outlet:null,matches:[],isDataRoute:!1}),wk=f.createContext(null);function F5(t,e){let{relative:n}=e===void 0?{}:e;Ac()||tt(!1);let{basename:r,navigator:s}=f.useContext(ko),{hash:i,pathname:a,search:o}=Ek(t,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Ks([r,a])),s.createHref({pathname:c,search:o,hash:i})}function Ac(){return f.useContext(Zh)!=null}function hr(){return Ac()||tt(!1),f.useContext(Zh).location}function _k(t){f.useContext(ko).static||f.useLayoutEffect(t)}function Hn(){let{isDataRoute:t}=f.useContext(gs);return t?Y5():L5()}function L5(){Ac()||tt(!1);let t=f.useContext(ev),{basename:e,navigator:n}=f.useContext(ko),{matches:r}=f.useContext(gs),{pathname:s}=hr(),i=JSON.stringify(yk(r).map(c=>c.pathnameBase)),a=f.useRef(!1);return _k(()=>{a.current=!0}),f.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let d=vk(c,JSON.parse(i),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ks([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,i,s,t])}const M5=f.createContext(null);function $5(t){let e=f.useContext(gs).outlet;return e&&f.createElement(M5.Provider,{value:t},e)}function tv(){let{matches:t}=f.useContext(gs),e=t[t.length-1];return e?e.params:{}}function Ek(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=f.useContext(gs),{pathname:s}=hr(),i=JSON.stringify(yk(r).map(a=>a.pathnameBase));return f.useMemo(()=>vk(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function z5(t,e){return B5(t,e)}function B5(t,e,n){Ac()||tt(!1);let{navigator:r}=f.useContext(ko),{matches:s}=f.useContext(gs),i=s[s.length-1],a=i?i.params:{};i&&i.pathname;let o=i?i.pathnameBase:"/";i&&i.route;let c=hr(),u;if(e){var d;let x=typeof e=="string"?la(e):e;o==="/"||(d=x.pathname)!=null&&d.startsWith(o)||tt(!1),u=x}else u=c;let h=u.pathname||"/",m=o==="/"?h:h.slice(o.length)||"/",p=f5(t,{pathname:m}),g=q5(p&&p.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:Ks([o,r.encodeLocation?r.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?o:Ks([o,r.encodeLocation?r.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n);return e&&g?f.createElement(Zh.Provider,{value:{location:zd({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ms.Pop}},g):g}function U5(){let t=X5(),e=j5(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},e),n?f.createElement("pre",{style:s},n):null,i)}const V5=f.createElement(U5,null);class W5 extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?f.createElement(gs.Provider,{value:this.props.routeContext},f.createElement(wk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function H5(t){let{routeContext:e,match:n,children:r}=t,s=f.useContext(ev);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(gs.Provider,{value:e},r)}function q5(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let i=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let o=i.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id]));o>=0||tt(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((o,c,u)=>{let d=c.route.id?a==null?void 0:a[c.route.id]:null,h=null;n&&(h=c.route.errorElement||V5);let m=e.concat(i.slice(0,u+1)),p=()=>{let g;return d?g=h:c.route.Component?g=f.createElement(c.route.Component,null):c.route.element?g=c.route.element:g=o,f.createElement(H5,{match:c,routeContext:{outlet:o,matches:m,isDataRoute:n!=null},children:g})};return n&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?f.createElement(W5,{location:n.location,revalidation:n.revalidation,component:h,error:d,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}var Vg;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(Vg||(Vg={}));var Ql;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(Ql||(Ql={}));function G5(t){let e=f.useContext(ev);return e||tt(!1),e}function K5(t){let e=f.useContext(O5);return e||tt(!1),e}function Q5(t){let e=f.useContext(gs);return e||tt(!1),e}function Sk(t){let e=Q5(),n=e.matches[e.matches.length-1];return n.route.id||tt(!1),n.route.id}function X5(){var t;let e=f.useContext(wk),n=K5(Ql.UseRouteError),r=Sk(Ql.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function Y5(){let{router:t}=G5(Vg.UseNavigateStable),e=Sk(Ql.UseNavigateStable),n=f.useRef(!1);return _k(()=>{n.current=!0}),f.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,zd({fromRouteId:e},i)))},[t,e])}function J5(t){return $5(t.context)}function Si(t){tt(!1)}function Z5(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ms.Pop,navigator:i,static:a=!1}=t;Ac()&&tt(!1);let o=e.replace(/^\/*/,"/"),c=f.useMemo(()=>({basename:o,navigator:i,static:a}),[o,i,a]);typeof r=="string"&&(r=la(r));let{pathname:u="/",search:d="",hash:h="",state:m=null,key:p="default"}=r,g=f.useMemo(()=>{let x=Zy(u,o);return x==null?null:{location:{pathname:x,search:d,hash:h,state:m,key:p},navigationType:s}},[o,u,d,h,m,p,s]);return g==null?null:f.createElement(ko.Provider,{value:c},f.createElement(Zh.Provider,{children:n,value:g}))}function e3(t){let{children:e,location:n}=t;return z5(Wg(e),n)}var Hw;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(Hw||(Hw={}));new Promise(()=>{});function Wg(t,e){e===void 0&&(e=[]);let n=[];return f.Children.forEach(t,(r,s)=>{if(!f.isValidElement(r))return;let i=[...e,s];if(r.type===f.Fragment){n.push.apply(n,Wg(r.props.children,i));return}r.type!==Si&&tt(!1),!r.props.index||!r.props.children||tt(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Wg(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hg(){return Hg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hg.apply(this,arguments)}function t3(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function n3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function r3(t,e){return t.button===0&&(!e||e==="_self")&&!n3(t)}function qg(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function s3(t,e){let n=qg(t);if(e)for(let r of e.keys())n.has(r)||e.getAll(r).forEach(s=>{n.append(r,s)});return n}const i3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],a3="startTransition",qw=eN[a3];function o3(t){let{basename:e,children:n,future:r,window:s}=t,i=f.useRef();i.current==null&&(i.current=u5({window:s,v5Compat:!0}));let a=i.current,[o,c]=f.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},d=f.useCallback(h=>{u&&qw?qw(()=>c(h)):c(h)},[c,u]);return f.useLayoutEffect(()=>a.listen(d),[a,d]),f.createElement(Z5,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a})}const l3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",c3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cn=f.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:o,target:c,to:u,preventScrollReset:d}=e,h=t3(e,i3),{basename:m}=f.useContext(ko),p,g=!1;if(typeof u=="string"&&c3.test(u)&&(p=u,l3))try{let y=new URL(window.location.href),w=u.startsWith("//")?new URL(y.protocol+u):new URL(u),E=Zy(w.pathname,m);w.origin===y.origin&&E!=null?u=E+w.search+w.hash:g=!0}catch{}let x=F5(u,{relative:s}),_=u3(u,{replace:a,state:o,target:c,preventScrollReset:d,relative:s});function v(y){r&&r(y),y.defaultPrevented||_(y)}return f.createElement("a",Hg({},h,{href:p||x,onClick:g||i?r:v,ref:n,target:c}))});var Gw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(Gw||(Gw={}));var Kw;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Kw||(Kw={}));function u3(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a}=e===void 0?{}:e,o=Hn(),c=hr(),u=Ek(t,{relative:a});return f.useCallback(d=>{if(r3(d,n)){d.preventDefault();let h=r!==void 0?r:$d(c)===$d(u);o(t,{replace:h,state:s,preventScrollReset:i,relative:a})}},[c,o,u,r,s,n,t,i,a])}function bk(t){let e=f.useRef(qg(t)),n=f.useRef(!1),r=hr(),s=f.useMemo(()=>s3(r.search,n.current?null:e.current),[r.search]),i=Hn(),a=f.useCallback((o,c)=>{const u=qg(typeof o=="function"?o(s):o);n.current=!0,i("?"+u,c)},[i,s]);return[s,a]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},d3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],o=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Tk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=i>>2,h=(i&3)<<4|o>>4;let m=(o&15)<<2|u>>6,p=u&63;c||(p=64,a||(m=64)),r.push(n[d],n[h],n[m],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):d3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],o=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||o==null||u==null||h==null)throw new h3;const m=i<<2|o>>4;if(r.push(m),u!==64){const p=o<<4&240|u>>2;if(r.push(p),h!==64){const g=u<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class h3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const f3=function(t){const e=kk(t);return Tk.encodeByteArray(e,!0)},Bd=function(t){return f3(t).replace(/\./g,"")},Ik=function(t){try{return Tk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3=()=>m3().__FIREBASE_DEFAULTS__,g3=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},y3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ik(t[1]);return e&&JSON.parse(e)},ef=()=>{try{return p3()||g3()||y3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ck=t=>{var e,n;return(n=(e=ef())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Ak=t=>{const e=Ck(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Rk=()=>{var t;return(t=ef())===null||t===void 0?void 0:t.config},Pk=t=>{var e;return(e=ef())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),o="";return[Bd(JSON.stringify(n)),Bd(JSON.stringify(a)),o].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function x3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}function w3(){var t;const e=(t=ef())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function E3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function S3(){const t=Vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function b3(){try{return typeof indexedDB=="object"}catch{return!1}}function k3(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3="FirebaseError";class Br extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=T3,Object.setPrototypeOf(this,Br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rc.prototype.create)}}class Rc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?I3(i,r):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new Br(s,o,r)}}function I3(t,e){return t.replace(C3,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const C3=/\{\$([^}]+)}/g;function A3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ud(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Qw(i)&&Qw(a)){if(!Ud(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Qw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function R3(t,e){const n=new P3(t,e);return n.subscribe.bind(n)}class P3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");N3(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Xm),s.error===void 0&&(s.error=Xm),s.complete===void 0&&(s.complete=Xm);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function N3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Xm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t){return t&&t._delegate?t._delegate:t}class ni{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j3=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new v3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(O3(e))try{this.getOrInitializeService({instanceIdentifier:bi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bi){return this.instances.has(e)}getOptions(e=bi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);r===o&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:D3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bi){return this.component?this.component.multipleInstances?e:bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function D3(t){return t===bi?void 0:t}function O3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new j3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const L3={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},M3=pe.INFO,$3={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},z3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=$3[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nv{constructor(e){this.name=e,this._logLevel=M3,this._logHandler=z3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?L3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const B3=(t,e)=>e.some(n=>t instanceof n);let Xw,Yw;function U3(){return Xw||(Xw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V3(){return Yw||(Yw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jk=new WeakMap,Gg=new WeakMap,Dk=new WeakMap,Ym=new WeakMap,rv=new WeakMap;function W3(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Qs(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&jk.set(n,t)}).catch(()=>{}),rv.set(e,t),e}function H3(t){if(Gg.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Gg.set(t,e)}let Kg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Dk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function q3(t){Kg=t(Kg)}function G3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Jm(this),e,...n);return Dk.set(r,e.sort?e.sort():[e]),Qs(r)}:V3().includes(t)?function(...e){return t.apply(Jm(this),e),Qs(jk.get(this))}:function(...e){return Qs(t.apply(Jm(this),e))}}function K3(t){return typeof t=="function"?G3(t):(t instanceof IDBTransaction&&H3(t),B3(t,U3())?new Proxy(t,Kg):t)}function Qs(t){if(t instanceof IDBRequest)return W3(t);if(Ym.has(t))return Ym.get(t);const e=K3(t);return e!==t&&(Ym.set(t,e),rv.set(e,t)),e}const Jm=t=>rv.get(t);function Q3(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=Qs(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Qs(a.result),c.oldVersion,c.newVersion,Qs(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const X3=["get","getKey","getAll","getAllKeys","count"],Y3=["put","add","delete","clear"],Zm=new Map;function Jw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Zm.get(e))return Zm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Y3.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||X3.includes(n)))return;const i=async function(a,...o){const c=this.transaction(a,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),s&&c.done]))[0]};return Zm.set(e,i),i}q3(t=>({...t,get:(e,n,r)=>Jw(e,n)||t.get(e,n,r),has:(e,n)=>!!Jw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Z3(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Z3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qg="@firebase/app",Zw="0.9.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi=new nv("@firebase/app"),ej="@firebase/app-compat",tj="@firebase/analytics-compat",nj="@firebase/analytics",rj="@firebase/app-check-compat",sj="@firebase/app-check",ij="@firebase/auth",aj="@firebase/auth-compat",oj="@firebase/database",lj="@firebase/database-compat",cj="@firebase/functions",uj="@firebase/functions-compat",dj="@firebase/installations",hj="@firebase/installations-compat",fj="@firebase/messaging",mj="@firebase/messaging-compat",pj="@firebase/performance",gj="@firebase/performance-compat",yj="@firebase/remote-config",vj="@firebase/remote-config-compat",xj="@firebase/storage",wj="@firebase/storage-compat",_j="@firebase/firestore",Ej="@firebase/firestore-compat",Sj="firebase",bj="10.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg="[DEFAULT]",kj={[Qg]:"fire-core",[ej]:"fire-core-compat",[nj]:"fire-analytics",[tj]:"fire-analytics-compat",[sj]:"fire-app-check",[rj]:"fire-app-check-compat",[ij]:"fire-auth",[aj]:"fire-auth-compat",[oj]:"fire-rtdb",[lj]:"fire-rtdb-compat",[cj]:"fire-fn",[uj]:"fire-fn-compat",[dj]:"fire-iid",[hj]:"fire-iid-compat",[fj]:"fire-fcm",[mj]:"fire-fcm-compat",[pj]:"fire-perf",[gj]:"fire-perf-compat",[yj]:"fire-rc",[vj]:"fire-rc-compat",[xj]:"fire-gcs",[wj]:"fire-gcs-compat",[_j]:"fire-fst",[Ej]:"fire-fst-compat","fire-js":"fire-js",[Sj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd=new Map,Yg=new Map;function Tj(t,e){try{t.container.addComponent(e)}catch(n){Hi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qi(t){const e=t.name;if(Yg.has(e))return Hi.debug(`There were multiple attempts to register component ${e}.`),!1;Yg.set(e,t);for(const n of Vd.values())Tj(n,t);return!0}function tf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Xs=new Rc("app","Firebase",Ij);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ni("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca=bj;function Ok(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Xg,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Xs.create("bad-app-name",{appName:String(s)});if(n||(n=Rk()),!n)throw Xs.create("no-options");const i=Vd.get(s);if(i){if(Ud(n,i.options)&&Ud(r,i.config))return i;throw Xs.create("duplicate-app",{appName:s})}const a=new F3(s);for(const c of Yg.values())a.addComponent(c);const o=new Cj(n,r,a);return Vd.set(s,o),o}function sv(t=Xg){const e=Vd.get(t);if(!e&&t===Xg&&Rk())return Ok();if(!e)throw Xs.create("no-app",{appName:t});return e}function Pr(t,e,n){var r;let s=(r=kj[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hi.warn(o.join(" "));return}qi(new ni(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj="firebase-heartbeat-database",Rj=1,Xl="firebase-heartbeat-store";let ep=null;function Fk(){return ep||(ep=Q3(Aj,Rj,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Xl)}}}).catch(t=>{throw Xs.create("idb-open",{originalErrorMessage:t.message})})),ep}async function Pj(t){try{return await(await Fk()).transaction(Xl).objectStore(Xl).get(Lk(t))}catch(e){if(e instanceof Br)Hi.warn(e.message);else{const n=Xs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hi.warn(n.message)}}}async function e_(t,e){try{const r=(await Fk()).transaction(Xl,"readwrite");await r.objectStore(Xl).put(e,Lk(t)),await r.done}catch(n){if(n instanceof Br)Hi.warn(n.message);else{const r=Xs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hi.warn(r.message)}}}function Lk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj=1024,jj=30*24*60*60*1e3;class Dj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Fj(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=t_();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=jj}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=t_(),{heartbeatsToSend:n,unsentEntries:r}=Oj(this._heartbeatsCache.heartbeats),s=Bd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function t_(){return new Date().toISOString().substring(0,10)}function Oj(t,e=Nj){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),n_(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),n_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Fj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return b3()?k3().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Pj(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return e_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return e_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function n_(t){return Bd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(t){qi(new ni("platform-logger",e=>new J3(e),"PRIVATE")),qi(new ni("heartbeat",e=>new Dj(e),"PRIVATE")),Pr(Qg,Zw,t),Pr(Qg,Zw,"esm2017"),Pr("fire-js","")}Lj("");function iv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Mk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Mj=Mk,$k=new Rc("auth","Firebase",Mk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd=new nv("@firebase/auth");function $j(t,...e){Wd.logLevel<=pe.WARN&&Wd.warn(`Auth (${ca}): ${t}`,...e)}function td(t,...e){Wd.logLevel<=pe.ERROR&&Wd.error(`Auth (${ca}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(t,...e){throw av(t,...e)}function Nr(t,...e){return av(t,...e)}function zk(t,e,n){const r=Object.assign(Object.assign({},Mj()),{[e]:n});return new Rc("auth","Firebase",r).create(e,{appName:t.name})}function zj(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Lr(t,"argument-error"),zk(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function av(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return $k.create(t,...e)}function J(t,e,...n){if(!t)throw av(e,...n)}function Qr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw td(e),new Error(e)}function ls(t,e){t||Qr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Bj(){return r_()==="http:"||r_()==="https:"}function r_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Bj()||_3()||"connection"in navigator)?navigator.onLine:!0}function Vj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n){this.shortDelay=e,this.longDelay=n,ls(n>e,"Short delay should be less than long delay!"),this.isMobile=x3()||E3()}get(){return Uj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(t,e){ls(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj=new Nc(3e4,6e4);function Uk(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function jc(t,e,n,r,s={}){return Vk(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const o=Pc(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),Bk.fetch()(Wk(t,t.config.apiHost,n,o),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},i))})}async function Vk(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Wj),e);try{const s=new Gj(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Eu(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eu(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Eu(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Eu(t,"user-disabled",a);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw zk(t,d,u);Lr(t,d)}}catch(s){if(s instanceof Br)throw s;Lr(t,"network-request-failed",{message:String(s)})}}async function qj(t,e,n,r,s={}){const i=await jc(t,e,n,r,s);return"mfaPendingCredential"in i&&Lr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Wk(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?ov(t.config,s):`${t.config.apiScheme}://${s}`}class Gj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Nr(this.auth,"network-request-failed")),Hj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Eu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Nr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kj(t,e){return jc(t,"POST","/v1/accounts:delete",e)}async function Qj(t,e){return jc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Xj(t,e=!1){const n=lt(t),r=await n.getIdToken(e),s=lv(r);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Sl(tp(s.auth_time)),issuedAtTime:Sl(tp(s.iat)),expirationTime:Sl(tp(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function tp(t){return Number(t)*1e3}function lv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return td("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ik(n);return s?JSON.parse(s):(td("Failed to decode base64 JWT payload"),null)}catch(s){return td("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Yj(t){const e=lv(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Br&&Jj(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Jj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sl(this.lastLoginAt),this.creationTime=Sl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hd(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Yl(t,Qj(n,{idToken:r}));J(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?n6(i.providerUserInfo):[],o=t6(t.providerData,a),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=c?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Hk(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function e6(t){const e=lt(t);await Hd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function t6(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function n6(t){return t.map(e=>{var{providerId:n}=e,r=iv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r6(t,e){const n=await Vk(t,{},async()=>{const r=Pc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=Wk(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Bk.fetch()(a,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Yj(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return J(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await r6(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new Jl;return r&&(J(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(J(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(J(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jl,this.toJSON())}_performRefresh(){return Qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Li{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=iv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Hk(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Yl(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Xj(this,e)}reload(){return e6(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Li(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Hd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Yl(this,Kj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,a,o,c,u,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,g=(a=n.photoURL)!==null&&a!==void 0?a:void 0,x=(o=n.tenantId)!==null&&o!==void 0?o:void 0,_=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,v=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:E,isAnonymous:S,providerData:b,stsTokenManager:k}=n;J(w&&k,e,"internal-error");const T=Jl.fromJSON(this.name,k);J(typeof w=="string",e,"internal-error"),Ss(h,e.name),Ss(m,e.name),J(typeof E=="boolean",e,"internal-error"),J(typeof S=="boolean",e,"internal-error"),Ss(p,e.name),Ss(g,e.name),Ss(x,e.name),Ss(_,e.name),Ss(v,e.name),Ss(y,e.name);const N=new Li({uid:w,auth:e,email:m,emailVerified:E,displayName:h,isAnonymous:S,photoURL:g,phoneNumber:p,tenantId:x,stsTokenManager:T,createdAt:v,lastLoginAt:y});return b&&Array.isArray(b)&&(N.providerData=b.map(D=>Object.assign({},D))),_&&(N._redirectEventId=_),N}static async _fromIdTokenResponse(e,n,r=!1){const s=new Jl;s.updateFromServerResponse(n);const i=new Li({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Hd(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_=new Map;function Xr(t){ls(t instanceof Function,"Expected a class definition");let e=s_.get(t);return e?(ls(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,s_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}qk.type="NONE";const i_=qk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(t,e,n){return`firebase:${t}:${e}:${n}`}class qa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=nd(this.userKey,s.apiKey,i),this.fullPersistenceKey=nd("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Li._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new qa(Xr(i_),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Xr(i_);const a=nd(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const d=await u._get(a);if(d){const h=Li._fromJSON(e,d);u!==i&&(o=h),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new qa(i,e,r):(i=c[0],o&&await i._set(a,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(a)}catch{}})),new qa(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Qk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Gk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Yk(e))return"Blackberry";if(Jk(e))return"Webos";if(cv(e))return"Safari";if((e.includes("chrome/")||Kk(e))&&!e.includes("edge/"))return"Chrome";if(Xk(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Gk(t=Vt()){return/firefox\//i.test(t)}function cv(t=Vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Kk(t=Vt()){return/crios\//i.test(t)}function Qk(t=Vt()){return/iemobile/i.test(t)}function Xk(t=Vt()){return/android/i.test(t)}function Yk(t=Vt()){return/blackberry/i.test(t)}function Jk(t=Vt()){return/webos/i.test(t)}function nf(t=Vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function s6(t=Vt()){var e;return nf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function i6(){return S3()&&document.documentMode===10}function Zk(t=Vt()){return nf(t)||Xk(t)||Jk(t)||Yk(t)||/windows phone/i.test(t)||Qk(t)}function a6(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(t,e=[]){let n;switch(t){case"Browser":n=a_(Vt());break;case"Worker":n=`${a_(Vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ca}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,o)=>{try{const c=e(i);a(c)}catch(c){o(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l6(t,e={}){return jc(t,"GET","/v2/passwordPolicy",Uk(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=6;class u6{constructor(e){var n,r,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:c6,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,a,o;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(o=c.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new o_(this),this.idTokenSubscription=new o_(this),this.beforeStateQueue=new o6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$k,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await qa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Vj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?lt(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await l6(this),n=new u6(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Rc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xr(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await qa.create(this,[Xr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&$j(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function rf(t){return lt(t)}class o_{constructor(e){this.auth=e,this.observer=null,this.addObserver=R3(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function f6(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Nr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",h6().appendChild(r)})}function m6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(t,e){const n=tf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ud(i,e??{}))return s;Lr(s,"already-initialized")}return n.initialize({options:e})}function g6(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function y6(t,e,n){const r=rf(t);J(r._canInitEmulator,r,"emulator-config-failed"),J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=tT(e),{host:a,port:o}=v6(e),c=o===null?"":`:${o}`;r.config.emulator={url:`${i}//${a}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||x6()}function tT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function v6(t){const e=tT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:l_(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:l_(a)}}}function l_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function x6(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qr("not implemented")}_getIdTokenResponse(e){return Qr("not implemented")}_linkToIdToken(e,n){return Qr("not implemented")}_getReauthenticationResolver(e){return Qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(t,e){return qj(t,"POST","/v1/accounts:signInWithIdp",Uk(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6="http://localhost";class Gi extends nT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Gi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Lr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=iv(n,["providerId","signInMethod"]);if(!r||!s)return null;const a=new Gi(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Ga(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ga(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ga(e,n)}buildRequest(){const e={requestUri:w6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Pc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc extends uv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends Dc{constructor(){super("facebook.com")}static credential(e){return Gi._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rs.credential(e.oauthAccessToken)}catch{return null}}}Rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Dc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Gi._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Er.credential(n,r)}catch{return null}}}Er.GOOGLE_SIGN_IN_METHOD="google.com";Er.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Dc{constructor(){super("github.com")}static credential(e){return Gi._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.GITHUB_SIGN_IN_METHOD="github.com";Ps.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends Dc{constructor(){super("twitter.com")}static credential(e,n){return Gi._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ns.credential(n,r)}catch{return null}}}Ns.TWITTER_SIGN_IN_METHOD="twitter.com";Ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Li._fromIdTokenResponse(e,r,s),a=c_(r);return new ao({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=c_(r);return new ao({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function c_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd extends Br{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,qd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new qd(e,n,r,s)}}function rT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?qd._fromErrorAndOperation(t,i,e,r):i})}async function _6(t,e,n=!1){const r=await Yl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ao._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E6(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await Yl(t,rT(r,s,e,t),n);J(i.idToken,r,"internal-error");const a=lv(i.idToken);J(a,r,"internal-error");const{sub:o}=a;return J(t.uid===o,r,"user-mismatch"),ao._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Lr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S6(t,e,n=!1){const r="signIn",s=await rT(t,r,e),i=await ao._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function b6(t,e,n,r){return lt(t).onIdTokenChanged(e,n,r)}function k6(t,e,n){return lt(t).beforeAuthStateChanged(e,n)}function T6(t,e,n,r){return lt(t).onAuthStateChanged(e,n,r)}function sT(t){return lt(t).signOut()}const Gd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gd,"1"),this.storage.removeItem(Gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(){const t=Vt();return cv(t)||nf(t)}const C6=1e3,A6=10;class aT extends iT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=I6()&&a6(),this.fallbackToPolling=Zk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,c)=>{this.notifyListeners(a,c)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(r);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);i6()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,A6):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},C6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}aT.type="LOCAL";const R6=aT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT extends iT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}oT.type="SESSION";const lT=oT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new sf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const o=Array.from(a).map(async u=>u(n.origin,i)),c=await P6(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,c)=>{const u=dv("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(h){const m=h;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(m.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(){return window}function j6(t){jr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(){return typeof jr().WorkerGlobalScope<"u"&&typeof jr().importScripts=="function"}async function D6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function O6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function F6(){return cT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="firebaseLocalStorageDb",L6=1,Kd="firebaseLocalStorage",dT="fbase_key";class Oc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function af(t,e){return t.transaction([Kd],e?"readwrite":"readonly").objectStore(Kd)}function M6(){const t=indexedDB.deleteDatabase(uT);return new Oc(t).toPromise()}function Zg(){const t=indexedDB.open(uT,L6);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Kd,{keyPath:dT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Kd)?e(r):(r.close(),await M6(),e(await Zg()))})})}async function u_(t,e,n){const r=af(t,!0).put({[dT]:e,value:n});return new Oc(r).toPromise()}async function $6(t,e){const n=af(t,!1).get(e),r=await new Oc(n).toPromise();return r===void 0?null:r.value}function d_(t,e){const n=af(t,!0).delete(e);return new Oc(n).toPromise()}const z6=800,B6=3;class hT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>B6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sf._getInstance(F6()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await D6(),!this.activeServiceWorker)return;this.sender=new N6(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||O6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zg();return await u_(e,Gd,"1"),await d_(e,Gd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>u_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$6(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>d_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=af(s,!1).getAll();return new Oc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),z6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hT.type="LOCAL";const U6=hT;new Nc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t,e){return e?Xr(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv extends nT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ga(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ga(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ga(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function V6(t){return S6(t.auth,new hv(t),t.bypassAuthState)}function W6(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),E6(n,new hv(t),t.bypassAuthState)}async function H6(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),_6(n,new hv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return V6;case"linkViaPopup":case"linkViaRedirect":return H6;case"reauthViaPopup":case"reauthViaRedirect":return W6;default:Lr(this.auth,"internal-error")}}resolve(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6=new Nc(2e3,1e4);async function G6(t,e,n){const r=rf(t);zj(t,e,uv);const s=fT(r,n);return new Pi(r,"signInViaPopup",e,s).executeNotNull()}class Pi extends mT{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Pi.currentPopupAction&&Pi.currentPopupAction.cancel(),Pi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){ls(this.filter.length===1,"Popup operations only handle one event");const e=dv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,q6.get())};e()}}Pi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6="pendingRedirect",rd=new Map;class Q6 extends mT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=rd.get(this.auth._key());if(!e){try{const r=await X6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}rd.set(this.auth._key(),e)}return this.bypassAuthState||rd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function X6(t,e){const n=Z6(e),r=J6(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Y6(t,e){rd.set(t._key(),e)}function J6(t){return Xr(t._redirectPersistence)}function Z6(t){return nd(K6,t.config.apiKey,t.name)}async function eD(t,e,n=!1){const r=rf(t),s=fT(r,e),a=await new Q6(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=10*60*1e3;class nD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!pT(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Nr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tD&&this.cachedEventUids.clear(),this.cachedEventUids.has(h_(e))}saveEventToCache(e){this.cachedEventUids.add(h_(e)),this.lastProcessedEventTime=Date.now()}}function h_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function pT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(t,e={}){return jc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aD=/^https?/;async function oD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await sD(t);for(const n of e)try{if(lD(n))return}catch{}Lr(t,"unauthorized-domain")}function lD(t){const e=Jg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!aD.test(n))return!1;if(iD.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=new Nc(3e4,6e4);function f_(){const t=jr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function uD(t){return new Promise((e,n)=>{var r,s,i;function a(){f_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{f_(),n(Nr(t,"network-request-failed"))},timeout:cD.get()})}if(!((s=(r=jr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=jr().gapi)===null||i===void 0)&&i.load)a();else{const o=m6("iframefcb");return jr()[o]=()=>{gapi.load?a():n(Nr(t,"network-request-failed"))},f6(`https://apis.google.com/js/api.js?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw sd=null,e})}let sd=null;function dD(t){return sd=sd||uD(t),sd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=new Nc(5e3,15e3),fD="__/auth/iframe",mD="emulator/auth/iframe",pD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yD(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ov(e,mD):`https://${t.config.authDomain}/${fD}`,r={apiKey:e.apiKey,appName:t.name,v:ca},s=gD.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Pc(r).slice(1)}`}async function vD(t){const e=await dD(t),n=jr().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:yD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pD,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=Nr(t,"network-request-failed"),o=jr().setTimeout(()=>{i(a)},hD.get());function c(){jr().clearTimeout(o),s(r)}r.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wD=500,_D=600,ED="_blank",SD="http://localhost";class m_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bD(t,e,n,r=wD,s=_D){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c=Object.assign(Object.assign({},xD),{width:r.toString(),height:s.toString(),top:i,left:a}),u=Vt().toLowerCase();n&&(o=Kk(u)?ED:n),Gk(u)&&(e=e||SD,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[p,g])=>`${m}${p}=${g},`,"");if(s6(u)&&o!=="_self")return kD(e||"",o),new m_(null);const h=window.open(e||"",o,d);J(h,t,"popup-blocked");try{h.focus()}catch{}return new m_(h)}function kD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD="__/auth/handler",ID="emulator/auth/handler",CD=encodeURIComponent("fac");async function p_(t,e,n,r,s,i){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ca,eventId:s};if(e instanceof uv){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",A3(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(i||{}))a[d]=h}if(e instanceof Dc){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const c=await t._getAppCheckToken(),u=c?`#${CD}=${encodeURIComponent(c)}`:"";return`${AD(t)}?${Pc(o).slice(1)}${u}`}function AD({config:t}){return t.emulator?ov(t,ID):`https://${t.authDomain}/${TD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="webStorageSupport";class RD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lT,this._completeRedirectFn=eD,this._overrideRedirectResult=Y6}async _openPopup(e,n,r,s){var i;ls((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await p_(e,n,r,Jg(),s);return bD(e,a,dv())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await p_(e,n,r,Jg(),s);return j6(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ls(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vD(e),r=new nD(e);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(np,{type:np},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[np];a!==void 0&&n(!!a),Lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Zk()||cv()||nf()}}const PD=RD;var g_="@firebase/auth",y_="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function DD(t){qi(new ni("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;J(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eT(t)},u=new d6(r,s,i,c);return g6(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qi(new ni("auth-internal",e=>{const n=rf(e.getProvider("auth").getImmediate());return(r=>new ND(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pr(g_,y_,jD(t)),Pr(g_,y_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=5*60,FD=Pk("authIdTokenMaxAge")||OD;let v_=null;const LD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>FD)return;const s=n==null?void 0:n.token;v_!==s&&(v_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function MD(t=sv()){const e=tf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=p6(t,{popupRedirectResolver:PD,persistence:[U6,R6,lT]}),r=Pk("authTokenSyncURL");if(r){const i=LD(r);k6(n,i,()=>i(n.currentUser)),b6(n,a=>i(a))}const s=Ck("auth");return s&&y6(n,`http://${s}`),n}DD("Browser");var $D="firebase",zD="10.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr($D,zD,"app");var BD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},O,fv=fv||{},X=BD||self;function of(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Fc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function UD(t){return Object.prototype.hasOwnProperty.call(t,rp)&&t[rp]||(t[rp]=++VD)}var rp="closure_uid_"+(1e9*Math.random()>>>0),VD=0;function WD(t,e,n){return t.call.apply(t.bind,arguments)}function HD(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function $t(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?$t=WD:$t=HD,$t.apply(null,arguments)}function Su(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function vt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var a=Array(arguments.length-2),o=2;o<arguments.length;o++)a[o-2]=arguments[o];return e.prototype[s].apply(r,a)}}function mi(){this.s=this.s,this.o=this.o}var qD=0;mi.prototype.s=!1;mi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),qD!=0)&&UD(this)};mi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const gT=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function mv(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function x_(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(of(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let a=0;a<i;a++)t[s+a]=r[a]}else t.push(r)}}function zt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}zt.prototype.h=function(){this.defaultPrevented=!0};var GD=function(){if(!X.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{X.addEventListener("test",()=>{},e),X.removeEventListener("test",()=>{},e)}catch{}return t}();function Zl(t){return/^[\s\xa0]*$/.test(t)}function lf(){var t=X.navigator;return t&&(t=t.userAgent)?t:""}function Sr(t){return lf().indexOf(t)!=-1}function pv(t){return pv[" "](t),t}pv[" "]=function(){};function KD(t,e){var n=zO;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var QD=Sr("Opera"),oo=Sr("Trident")||Sr("MSIE"),yT=Sr("Edge"),e0=yT||oo,vT=Sr("Gecko")&&!(lf().toLowerCase().indexOf("webkit")!=-1&&!Sr("Edge"))&&!(Sr("Trident")||Sr("MSIE"))&&!Sr("Edge"),XD=lf().toLowerCase().indexOf("webkit")!=-1&&!Sr("Edge");function xT(){var t=X.document;return t?t.documentMode:void 0}var t0;e:{var sp="",ip=function(){var t=lf();if(vT)return/rv:([^\);]+)(\)|;)/.exec(t);if(yT)return/Edge\/([\d\.]+)/.exec(t);if(oo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(XD)return/WebKit\/(\S+)/.exec(t);if(QD)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(ip&&(sp=ip?ip[1]:""),oo){var ap=xT();if(ap!=null&&ap>parseFloat(sp)){t0=String(ap);break e}}t0=sp}var n0;if(X.document&&oo){var w_=xT();n0=w_||parseInt(t0,10)||void 0}else n0=void 0;var YD=n0;function ec(t,e){if(zt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(vT){e:{try{pv(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:JD[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ec.$.h.call(this)}}vt(ec,zt);var JD={2:"touch",3:"pen",4:"mouse"};ec.prototype.h=function(){ec.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Lc="closure_listenable_"+(1e6*Math.random()|0),ZD=0;function eO(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++ZD,this.fa=this.ia=!1}function cf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function gv(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function tO(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function wT(t){const e={};for(const n in t)e[n]=t[n];return e}const __="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _T(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<__.length;i++)n=__[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function uf(t){this.src=t,this.g={},this.h=0}uf.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var a=s0(t,e,r,s);return-1<a?(e=t[a],n||(e.ia=!1)):(e=new eO(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function r0(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=gT(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(cf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function s0(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var yv="closure_lm_"+(1e6*Math.random()|0),op={};function ET(t,e,n,r,s){if(r&&r.once)return bT(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)ET(t,e[i],n,r,s);return null}return n=wv(n),t&&t[Lc]?t.O(e,n,Fc(r)?!!r.capture:!!r,s):ST(t,e,n,!1,r,s)}function ST(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var a=Fc(s)?!!s.capture:!!s,o=xv(t);if(o||(t[yv]=o=new uf(t)),n=o.add(e,n,r,a,i),n.proxy)return n;if(r=nO(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)GD||(s=a),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(TT(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function nO(){function t(n){return e.call(t.src,t.listener,n)}const e=rO;return t}function bT(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)bT(t,e[i],n,r,s);return null}return n=wv(n),t&&t[Lc]?t.P(e,n,Fc(r)?!!r.capture:!!r,s):ST(t,e,n,!0,r,s)}function kT(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)kT(t,e[i],n,r,s);else r=Fc(r)?!!r.capture:!!r,n=wv(n),t&&t[Lc]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=s0(i,n,r,s),-1<n&&(cf(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=xv(t))&&(e=t.g[e.toString()],t=-1,e&&(t=s0(e,n,r,s)),(n=-1<t?e[t]:null)&&vv(n))}function vv(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Lc])r0(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(TT(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=xv(e))?(r0(n,t),n.h==0&&(n.src=null,e[yv]=null)):cf(t)}}}function TT(t){return t in op?op[t]:op[t]="on"+t}function rO(t,e){if(t.fa)t=!0;else{e=new ec(e,this);var n=t.listener,r=t.la||t.src;t.ia&&vv(t),t=n.call(r,e)}return t}function xv(t){return t=t[yv],t instanceof uf?t:null}var lp="__closure_events_fn_"+(1e9*Math.random()>>>0);function wv(t){return typeof t=="function"?t:(t[lp]||(t[lp]=function(e){return t.handleEvent(e)}),t[lp])}function yt(){mi.call(this),this.i=new uf(this),this.S=this,this.J=null}vt(yt,mi);yt.prototype[Lc]=!0;yt.prototype.removeEventListener=function(t,e,n,r){kT(this,t,e,n,r)};function Tt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new zt(e,t);else if(e instanceof zt)e.target=e.target||t;else{var s=e;e=new zt(r,t),_T(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=e.g=n[i];s=bu(a,r,!0,e)&&s}if(a=e.g=t,s=bu(a,r,!0,e)&&s,s=bu(a,r,!1,e)&&s,n)for(i=0;i<n.length;i++)a=e.g=n[i],s=bu(a,r,!1,e)&&s}yt.prototype.N=function(){if(yt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)cf(n[r]);delete t.g[e],t.h--}}this.J=null};yt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};yt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function bu(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var a=e[i];if(a&&!a.fa&&a.capture==n){var o=a.listener,c=a.la||a.src;a.ia&&r0(t.i,a),s=o.call(c,r)!==!1&&s}}return s&&!r.defaultPrevented}var _v=X.JSON.stringify;class sO{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function iO(){var t=Ev;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class aO{constructor(){this.h=this.g=null}add(e,n){const r=IT.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var IT=new sO(()=>new oO,t=>t.reset());class oO{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function lO(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function cO(t){X.setTimeout(()=>{throw t},0)}let tc,nc=!1,Ev=new aO,CT=()=>{const t=X.Promise.resolve(void 0);tc=()=>{t.then(uO)}};var uO=()=>{for(var t;t=iO();){try{t.h.call(t.g)}catch(n){cO(n)}var e=IT;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}nc=!1};function df(t,e){yt.call(this),this.h=t||1,this.g=e||X,this.j=$t(this.qb,this),this.l=Date.now()}vt(df,yt);O=df.prototype;O.ga=!1;O.T=null;O.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Tt(this,"tick"),this.ga&&(Sv(this),this.start()))}};O.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Sv(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}O.N=function(){df.$.N.call(this),Sv(this),delete this.g};function bv(t,e,n){if(typeof t=="function")n&&(t=$t(t,n));else if(t&&typeof t.handleEvent=="function")t=$t(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:X.setTimeout(t,e||0)}function AT(t){t.g=bv(()=>{t.g=null,t.i&&(t.i=!1,AT(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class dO extends mi{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:AT(this)}N(){super.N(),this.g&&(X.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rc(t){mi.call(this),this.h=t,this.g={}}vt(rc,mi);var E_=[];function RT(t,e,n,r){Array.isArray(n)||(n&&(E_[0]=n.toString()),n=E_);for(var s=0;s<n.length;s++){var i=ET(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function PT(t){gv(t.g,function(e,n){this.g.hasOwnProperty(n)&&vv(e)},t),t.g={}}rc.prototype.N=function(){rc.$.N.call(this),PT(this)};rc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function hf(){this.g=!0}hf.prototype.Ea=function(){this.g=!1};function hO(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var a="",o=i.split("&"),c=0;c<o.length;c++){var u=o[c].split("=");if(1<u.length){var d=u[0];u=u[1];var h=d.split("_");a=2<=h.length&&h[1]=="type"?a+(d+"="+u+"&"):a+(d+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+a})}function fO(t,e,n,r,s,i,a){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+a})}function La(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+pO(t,n)+(r?" "+r:"")})}function mO(t,e){t.info(function(){return"TIMEOUT: "+e})}hf.prototype.info=function(){};function pO(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var a=1;a<s.length;a++)s[a]=""}}}}return _v(n)}catch{return e}}var ua={},S_=null;function ff(){return S_=S_||new yt}ua.Ta="serverreachability";function NT(t){zt.call(this,ua.Ta,t)}vt(NT,zt);function sc(t){const e=ff();Tt(e,new NT(e))}ua.STAT_EVENT="statevent";function jT(t,e){zt.call(this,ua.STAT_EVENT,t),this.stat=e}vt(jT,zt);function Xt(t){const e=ff();Tt(e,new jT(e,t))}ua.Ua="timingevent";function DT(t,e){zt.call(this,ua.Ua,t),this.size=e}vt(DT,zt);function Mc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return X.setTimeout(function(){t()},e)}var mf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},OT={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function kv(){}kv.prototype.h=null;function b_(t){return t.h||(t.h=t.i())}function FT(){}var $c={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Tv(){zt.call(this,"d")}vt(Tv,zt);function Iv(){zt.call(this,"c")}vt(Iv,zt);var i0;function pf(){}vt(pf,kv);pf.prototype.g=function(){return new XMLHttpRequest};pf.prototype.i=function(){return{}};i0=new pf;function zc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new rc(this),this.P=gO,t=e0?125:void 0,this.V=new df(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new LT}function LT(){this.i=null,this.g="",this.h=!1}var gO=45e3,a0={},Qd={};O=zc.prototype;O.setTimeout=function(t){this.P=t};function o0(t,e,n){t.L=1,t.v=yf(cs(e)),t.s=n,t.S=!0,MT(t,null)}function MT(t,e){t.G=Date.now(),Bc(t),t.A=cs(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),qT(n.i,"t",r),t.C=0,n=t.l.J,t.h=new LT,t.g=fI(t.l,n?e:null,!t.s),0<t.O&&(t.M=new dO($t(t.Pa,t,t.g),t.O)),RT(t.U,t.g,"readystatechange",t.nb),e=t.I?wT(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),sc(),hO(t.j,t.u,t.A,t.m,t.W,t.s)}O.nb=function(t){t=t.target;const e=this.M;e&&br(t)==3?e.l():this.Pa(t)};O.Pa=function(t){try{if(t==this.g)e:{const d=br(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>d)&&(d!=3||e0||this.g&&(this.h.h||this.g.ja()||C_(this.g)))){this.J||d!=4||e==7||(e==8||0>=h?sc(3):sc(2)),gf(this);var n=this.g.da();this.ca=n;t:if($T(this)){var r=C_(this.g);t="";var s=r.length,i=br(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ni(this),bl(this);var a="";break t}this.h.i=new X.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=n==200,fO(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var o,c=this.g;if((o=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zl(o)){var u=o;break t}}u=null}if(n=u)La(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,l0(this,n);else{this.i=!1,this.o=3,Xt(12),Ni(this),bl(this);break e}}this.S?(zT(this,d,a),e0&&this.i&&d==3&&(RT(this.U,this.V,"tick",this.mb),this.V.start())):(La(this.j,this.m,a,null),l0(this,a)),d==4&&Ni(this),this.i&&!this.J&&(d==4?cI(this.l,this):(this.i=!1,Bc(this)))}else LO(this.g),n==400&&0<a.indexOf("Unknown SID")?(this.o=3,Xt(12)):(this.o=0,Xt(13)),Ni(this),bl(this)}}}catch{}finally{}};function $T(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function zT(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=yO(t,n),s==Qd){e==4&&(t.o=4,Xt(14),r=!1),La(t.j,t.m,null,"[Incomplete Response]");break}else if(s==a0){t.o=4,Xt(15),La(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else La(t.j,t.m,s,null),l0(t,s);$T(t)&&s!=Qd&&s!=a0&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Xt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),jv(e),e.M=!0,Xt(11))):(La(t.j,t.m,n,"[Invalid Chunked Response]"),Ni(t),bl(t))}O.mb=function(){if(this.g){var t=br(this.g),e=this.g.ja();this.C<e.length&&(gf(this),zT(this,t,e),this.i&&t!=4&&Bc(this))}};function yO(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Qd:(n=Number(e.substring(n,r)),isNaN(n)?a0:(r+=1,r+n>e.length?Qd:(e=e.slice(r,r+n),t.C=r+n,e)))}O.cancel=function(){this.J=!0,Ni(this)};function Bc(t){t.Y=Date.now()+t.P,BT(t,t.P)}function BT(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Mc($t(t.lb,t),e)}function gf(t){t.B&&(X.clearTimeout(t.B),t.B=null)}O.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(mO(this.j,this.A),this.L!=2&&(sc(),Xt(17)),Ni(this),this.o=2,bl(this)):BT(this,this.Y-t)};function bl(t){t.l.H==0||t.J||cI(t.l,t)}function Ni(t){gf(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Sv(t.V),PT(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function l0(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||c0(n.i,t))){if(!t.K&&c0(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Jd(n),_f(n);else break e;Nv(n),Xt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=Mc($t(n.ib,n),6e3));if(1>=QT(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ji(n,11)}else if((t.K||n.g==t)&&Jd(n),!Zl(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let u=s[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const d=u[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const h=u[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const m=u[5];m!=null&&typeof m=="number"&&0<m&&(r=1.5*m,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const p=t.g;if(p){const g=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var i=r.i;i.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Cv(i,i.h),i.h=null))}if(r.F){const x=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;x&&(r.Da=x,Ie(r.I,r.F,x))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var a=t;if(r.wa=hI(r,r.J?r.pa:null,r.Y),a.K){XT(r.i,a);var o=a,c=r.L;c&&o.setTimeout(c),o.B&&(gf(o),Bc(o)),r.g=a}else oI(r);0<n.j.length&&Ef(n)}else u[0]!="stop"&&u[0]!="close"||ji(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?ji(n,7):Pv(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}sc(4)}catch{}}function vO(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(of(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function xO(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(of(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function UT(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(of(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=xO(t),r=vO(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var VT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wO(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Mi(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Mi){this.h=t.h,Xd(this,t.j),this.s=t.s,this.g=t.g,Yd(this,t.m),this.l=t.l;var e=t.i,n=new ic;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),k_(this,n),this.o=t.o}else t&&(e=String(t).match(VT))?(this.h=!1,Xd(this,e[1]||"",!0),this.s=ol(e[2]||""),this.g=ol(e[3]||"",!0),Yd(this,e[4]),this.l=ol(e[5]||"",!0),k_(this,e[6]||"",!0),this.o=ol(e[7]||"")):(this.h=!1,this.i=new ic(null,this.h))}Mi.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ll(e,T_,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(ll(e,T_,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(ll(n,n.charAt(0)=="/"?SO:EO,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ll(n,kO)),t.join("")};function cs(t){return new Mi(t)}function Xd(t,e,n){t.j=n?ol(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Yd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function k_(t,e,n){e instanceof ic?(t.i=e,TO(t.i,t.h)):(n||(e=ll(e,bO)),t.i=new ic(e,t.h))}function Ie(t,e,n){t.i.set(e,n)}function yf(t){return Ie(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ol(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ll(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,_O),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function _O(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var T_=/[#\/\?@]/g,EO=/[#\?:]/g,SO=/[#\?]/g,bO=/[#\?@]/g,kO=/#/g;function ic(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function pi(t){t.g||(t.g=new Map,t.h=0,t.i&&wO(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}O=ic.prototype;O.add=function(t,e){pi(this),this.i=null,t=To(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function WT(t,e){pi(t),e=To(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function HT(t,e){return pi(t),e=To(t,e),t.g.has(e)}O.forEach=function(t,e){pi(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};O.ta=function(){pi(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};O.Z=function(t){pi(this);let e=[];if(typeof t=="string")HT(this,t)&&(e=e.concat(this.g.get(To(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};O.set=function(t,e){return pi(this),this.i=null,t=To(this,t),HT(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};O.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function qT(t,e,n){WT(t,e),0<n.length&&(t.i=null,t.g.set(To(t,e),mv(n)),t.h+=n.length)}O.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var s=i;a[r]!==""&&(s+="="+encodeURIComponent(String(a[r]))),t.push(s)}}return this.i=t.join("&")};function To(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function TO(t,e){e&&!t.j&&(pi(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(WT(this,r),qT(this,s,n))},t)),t.j=e}var IO=class{constructor(t,e){this.g=t,this.map=e}};function GT(t){this.l=t||CO,X.PerformanceNavigationTiming?(t=X.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(X.g&&X.g.Ka&&X.g.Ka()&&X.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var CO=10;function KT(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function QT(t){return t.h?1:t.g?t.g.size:0}function c0(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Cv(t,e){t.g?t.g.add(e):t.h=e}function XT(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}GT.prototype.cancel=function(){if(this.i=YT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function YT(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return mv(t.i)}var AO=class{stringify(t){return X.JSON.stringify(t,void 0)}parse(t){return X.JSON.parse(t,void 0)}};function RO(){this.g=new AO}function PO(t,e,n){const r=n||"";try{UT(t,function(s,i){let a=s;Fc(s)&&(a=_v(s)),e.push(r+i+"="+encodeURIComponent(a))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function NO(t,e){const n=new hf;if(X.Image){const r=new Image;r.onload=Su(ku,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Su(ku,n,r,"TestLoadImage: error",!1,e),r.onabort=Su(ku,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Su(ku,n,r,"TestLoadImage: timeout",!1,e),X.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function ku(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function vf(t){this.l=t.fc||null,this.j=t.ob||!1}vt(vf,kv);vf.prototype.g=function(){return new xf(this.l,this.j)};vf.prototype.i=function(t){return function(){return t}}({});function xf(t,e){yt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Av,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}vt(xf,yt);var Av=0;O=xf.prototype;O.open=function(t,e){if(this.readyState!=Av)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ac(this)};O.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||X).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};O.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Uc(this)),this.readyState=Av};O.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ac(this)),this.g&&(this.readyState=3,ac(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof X.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;JT(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function JT(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}O.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Uc(this):ac(this),this.readyState==3&&JT(this)}};O.Za=function(t){this.g&&(this.response=this.responseText=t,Uc(this))};O.Ya=function(t){this.g&&(this.response=t,Uc(this))};O.ka=function(){this.g&&Uc(this)};function Uc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ac(t)}O.setRequestHeader=function(t,e){this.v.append(t,e)};O.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};O.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function ac(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(xf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var jO=X.JSON.parse;function Be(t){yt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ZT,this.L=this.M=!1}vt(Be,yt);var ZT="",DO=/^https?$/i,OO=["POST","PUT"];O=Be.prototype;O.Oa=function(t){this.M=t};O.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():i0.g(),this.C=this.u?b_(this.u):b_(i0),this.g.onreadystatechange=$t(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){I_(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=X.FormData&&t instanceof X.FormData,!(0<=gT(OO,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{nI(this),0<this.B&&((this.L=FO(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$t(this.ua,this)):this.A=bv(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){I_(this,i)}};function FO(t){return oo&&typeof t.timeout=="number"&&t.ontimeout!==void 0}O.ua=function(){typeof fv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Tt(this,"timeout"),this.abort(8))};function I_(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,eI(t),wf(t)}function eI(t){t.F||(t.F=!0,Tt(t,"complete"),Tt(t,"error"))}O.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Tt(this,"complete"),Tt(this,"abort"),wf(this))};O.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wf(this,!0)),Be.$.N.call(this)};O.La=function(){this.s||(this.G||this.v||this.l?tI(this):this.kb())};O.kb=function(){tI(this)};function tI(t){if(t.h&&typeof fv<"u"&&(!t.C[1]||br(t)!=4||t.da()!=2)){if(t.v&&br(t)==4)bv(t.La,0,t);else if(Tt(t,"readystatechange"),br(t)==4){t.h=!1;try{const a=t.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var s=String(t.I).match(VT)[1]||null;!s&&X.self&&X.self.location&&(s=X.self.location.protocol.slice(0,-1)),r=!DO.test(s?s.toLowerCase():"")}n=r}if(n)Tt(t,"complete"),Tt(t,"success");else{t.m=6;try{var i=2<br(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",eI(t)}}finally{wf(t)}}}}function wf(t,e){if(t.g){nI(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Tt(t,"ready");try{n.onreadystatechange=r}catch{}}}function nI(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(X.clearTimeout(t.A),t.A=null)}O.isActive=function(){return!!this.g};function br(t){return t.g?t.g.readyState:0}O.da=function(){try{return 2<br(this)?this.g.status:-1}catch{return-1}};O.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};O.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),jO(e)}};function C_(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case ZT:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function LO(t){const e={};t=(t.g&&2<=br(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Zl(t[r]))continue;var n=lO(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}tO(e,function(r){return r.join(", ")})}O.Ia=function(){return this.m};O.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function rI(t){let e="";return gv(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Rv(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=rI(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ie(t,e,n))}function Go(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function sI(t){this.Ga=0,this.j=[],this.l=new hf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Go("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Go("baseRetryDelayMs",5e3,t),this.hb=Go("retryDelaySeedMs",1e4,t),this.eb=Go("forwardChannelMaxRetries",2,t),this.xa=Go("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new GT(t&&t.concurrentRequestLimit),this.Ja=new RO,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}O=sI.prototype;O.ra=8;O.H=1;function Pv(t){if(iI(t),t.H==3){var e=t.W++,n=cs(t.I);if(Ie(n,"SID",t.K),Ie(n,"RID",e),Ie(n,"TYPE","terminate"),Vc(t,n),e=new zc(t,t.l,e),e.L=2,e.v=yf(cs(n)),n=!1,X.navigator&&X.navigator.sendBeacon)try{n=X.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&X.Image&&(new Image().src=e.v,n=!0),n||(e.g=fI(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Bc(e)}dI(t)}function _f(t){t.g&&(jv(t),t.g.cancel(),t.g=null)}function iI(t){_f(t),t.u&&(X.clearTimeout(t.u),t.u=null),Jd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&X.clearTimeout(t.m),t.m=null)}function Ef(t){if(!KT(t.i)&&!t.m){t.m=!0;var e=t.Na;tc||CT(),nc||(tc(),nc=!0),Ev.add(e,t),t.C=0}}function MO(t,e){return QT(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Mc($t(t.Na,t,e),uI(t,t.C)),t.C++,!0)}O.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new zc(this,this.l,t);let i=this.s;if(this.U&&(i?(i=wT(i),_T(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=aI(this,s,e),n=cs(this.I),Ie(n,"RID",t),Ie(n,"CVER",22),this.F&&Ie(n,"X-HTTP-Session-Id",this.F),Vc(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(rI(i)))+"&"+e:this.o&&Rv(n,this.o,i)),Cv(this.i,s),this.bb&&Ie(n,"TYPE","init"),this.P?(Ie(n,"$req",e),Ie(n,"SID","null"),s.aa=!0,o0(s,n,null)):o0(s,n,e),this.H=2}}else this.H==3&&(t?A_(this,t):this.j.length==0||KT(this.i)||A_(this))};function A_(t,e){var n;e?n=e.m:n=t.W++;const r=cs(t.I);Ie(r,"SID",t.K),Ie(r,"RID",n),Ie(r,"AID",t.V),Vc(t,r),t.o&&t.s&&Rv(r,t.o,t.s),n=new zc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=aI(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Cv(t.i,n),o0(n,r,e)}function Vc(t,e){t.na&&gv(t.na,function(n,r){Ie(e,r,n)}),t.h&&UT({},function(n,r){Ie(e,r,n)})}function aI(t,e,n){n=Math.min(t.j.length,n);var r=t.h?$t(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const a=["count="+n];i==-1?0<n?(i=s[0].g,a.push("ofs="+i)):i=0:a.push("ofs="+i);let o=!0;for(let c=0;c<n;c++){let u=s[c].g;const d=s[c].map;if(u-=i,0>u)i=Math.max(0,s[c].g-100),o=!1;else try{PO(d,a,"req"+u+"_")}catch{r&&r(d)}}if(o){r=a.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function oI(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;tc||CT(),nc||(tc(),nc=!0),Ev.add(e,t),t.A=0}}function Nv(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Mc($t(t.Ma,t),uI(t,t.A)),t.A++,!0)}O.Ma=function(){if(this.u=null,lI(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Mc($t(this.jb,this),t)}};O.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Xt(10),_f(this),lI(this))};function jv(t){t.B!=null&&(X.clearTimeout(t.B),t.B=null)}function lI(t){t.g=new zc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=cs(t.wa);Ie(e,"RID","rpc"),Ie(e,"SID",t.K),Ie(e,"AID",t.V),Ie(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ie(e,"TO",t.qa),Ie(e,"TYPE","xmlhttp"),Vc(t,e),t.o&&t.s&&Rv(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=yf(cs(e)),n.s=null,n.S=!0,MT(n,t)}O.ib=function(){this.v!=null&&(this.v=null,_f(this),Nv(this),Xt(19))};function Jd(t){t.v!=null&&(X.clearTimeout(t.v),t.v=null)}function cI(t,e){var n=null;if(t.g==e){Jd(t),jv(t),t.g=null;var r=2}else if(c0(t.i,e))n=e.F,XT(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=ff(),Tt(r,new DT(r,n)),Ef(t)}else oI(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&MO(t,e)||r==2&&Nv(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:ji(t,5);break;case 4:ji(t,10);break;case 3:ji(t,6);break;default:ji(t,2)}}}function uI(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ji(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=$t(t.pb,t);n||(n=new Mi("//www.google.com/images/cleardot.gif"),X.location&&X.location.protocol=="http"||Xd(n,"https"),yf(n)),NO(n.toString(),r)}else Xt(2);t.H=0,t.h&&t.h.za(e),dI(t),iI(t)}O.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Xt(2)):(this.l.info("Failed to ping google.com"),Xt(1))};function dI(t){if(t.H=0,t.ma=[],t.h){const e=YT(t.i);(e.length!=0||t.j.length!=0)&&(x_(t.ma,e),x_(t.ma,t.j),t.i.i.length=0,mv(t.j),t.j.length=0),t.h.ya()}}function hI(t,e,n){var r=n instanceof Mi?cs(n):new Mi(n);if(r.g!="")e&&(r.g=e+"."+r.g),Yd(r,r.m);else{var s=X.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new Mi(null);r&&Xd(i,r),e&&(i.g=e),s&&Yd(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&Ie(r,n,e),Ie(r,"VER",t.ra),Vc(t,r),r}function fI(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Be(new vf({ob:!0})):new Be(t.va),e.Oa(t.J),e}O.isActive=function(){return!!this.h&&this.h.isActive(this)};function mI(){}O=mI.prototype;O.Ba=function(){};O.Aa=function(){};O.za=function(){};O.ya=function(){};O.isActive=function(){return!0};O.Va=function(){};function Zd(){if(oo&&!(10<=Number(YD)))throw Error("Environmental error: no available transport.")}Zd.prototype.g=function(t,e){return new In(t,e)};function In(t,e){yt.call(this),this.g=new sI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Zl(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Zl(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Io(this)}vt(In,yt);In.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Xt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=hI(t,null,t.Y),Ef(t)};In.prototype.close=function(){Pv(this.g)};In.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=_v(t),t=n);e.j.push(new IO(e.fb++,t)),e.H==3&&Ef(e)};In.prototype.N=function(){this.g.h=null,delete this.j,Pv(this.g),delete this.g,In.$.N.call(this)};function pI(t){Tv.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}vt(pI,Tv);function gI(){Iv.call(this),this.status=1}vt(gI,Iv);function Io(t){this.g=t}vt(Io,mI);Io.prototype.Ba=function(){Tt(this.g,"a")};Io.prototype.Aa=function(t){Tt(this.g,new pI(t))};Io.prototype.za=function(t){Tt(this.g,new gI)};Io.prototype.ya=function(){Tt(this.g,"b")};function $O(){this.blockSize=-1}function cr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}vt(cr,$O);cr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function cp(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],a=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(a<<7&4294967295|a>>>25),a=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(a<<12&4294967295|a>>>20),a=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(a<<17&4294967295|a>>>15),a=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(a<<22&4294967295|a>>>10),a=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(a<<7&4294967295|a>>>25),a=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(a<<12&4294967295|a>>>20),a=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(a<<17&4294967295|a>>>15),a=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(a<<22&4294967295|a>>>10),a=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(a<<7&4294967295|a>>>25),a=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(a<<12&4294967295|a>>>20),a=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(a<<17&4294967295|a>>>15),a=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(a<<22&4294967295|a>>>10),a=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(a<<7&4294967295|a>>>25),a=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(a<<12&4294967295|a>>>20),a=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(a<<17&4294967295|a>>>15),a=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(a<<22&4294967295|a>>>10),a=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(a<<5&4294967295|a>>>27),a=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(a<<9&4294967295|a>>>23),a=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(a<<14&4294967295|a>>>18),a=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(a<<20&4294967295|a>>>12),a=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(a<<5&4294967295|a>>>27),a=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(a<<9&4294967295|a>>>23),a=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(a<<14&4294967295|a>>>18),a=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(a<<20&4294967295|a>>>12),a=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(a<<5&4294967295|a>>>27),a=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(a<<9&4294967295|a>>>23),a=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(a<<14&4294967295|a>>>18),a=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(a<<20&4294967295|a>>>12),a=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(a<<5&4294967295|a>>>27),a=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(a<<9&4294967295|a>>>23),a=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(a<<14&4294967295|a>>>18),a=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(a<<20&4294967295|a>>>12),a=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(a<<4&4294967295|a>>>28),a=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(a<<11&4294967295|a>>>21),a=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(a<<16&4294967295|a>>>16),a=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(a<<23&4294967295|a>>>9),a=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(a<<4&4294967295|a>>>28),a=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(a<<11&4294967295|a>>>21),a=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(a<<16&4294967295|a>>>16),a=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(a<<23&4294967295|a>>>9),a=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(a<<4&4294967295|a>>>28),a=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(a<<11&4294967295|a>>>21),a=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(a<<16&4294967295|a>>>16),a=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(a<<23&4294967295|a>>>9),a=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(a<<4&4294967295|a>>>28),a=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(a<<11&4294967295|a>>>21),a=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(a<<16&4294967295|a>>>16),a=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(a<<23&4294967295|a>>>9),a=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(a<<6&4294967295|a>>>26),a=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(a<<10&4294967295|a>>>22),a=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(a<<15&4294967295|a>>>17),a=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(a<<21&4294967295|a>>>11),a=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(a<<6&4294967295|a>>>26),a=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(a<<10&4294967295|a>>>22),a=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(a<<15&4294967295|a>>>17),a=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(a<<21&4294967295|a>>>11),a=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(a<<6&4294967295|a>>>26),a=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(a<<10&4294967295|a>>>22),a=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(a<<15&4294967295|a>>>17),a=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(a<<21&4294967295|a>>>11),a=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(a<<6&4294967295|a>>>26),a=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(a<<10&4294967295|a>>>22),a=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(a<<15&4294967295|a>>>17),a=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}cr.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)cp(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){cp(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){cp(this,r),s=0;break}}this.h=s,this.i+=e};cr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function xe(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var zO={};function Dv(t){return-128<=t&&128>t?KD(t,function(e){return new xe([e|0],0>e?-1:0)}):new xe([t|0],0>t?-1:0)}function kr(t){if(isNaN(t)||!isFinite(t))return Ka;if(0>t)return bt(kr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=u0;return new xe(e,0)}function yI(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return bt(yI(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=kr(Math.pow(e,8)),r=Ka,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+i),e);8>i?(i=kr(Math.pow(e,i)),r=r.R(i).add(kr(a))):(r=r.R(n),r=r.add(kr(a)))}return r}var u0=4294967296,Ka=Dv(0),d0=Dv(1),R_=Dv(16777216);O=xe.prototype;O.ea=function(){if(Ln(this))return-bt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:u0+r)*e,e*=u0}return t};O.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Yr(this))return"0";if(Ln(this))return"-"+bt(this).toString(t);for(var e=kr(Math.pow(t,6)),n=this,r="";;){var s=th(n,e).g;n=eh(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,Yr(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};O.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Yr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Ln(t){return t.h==-1}O.X=function(t){return t=eh(this,t),Ln(t)?-1:Yr(t)?0:1};function bt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new xe(n,~t.h).add(d0)}O.abs=function(){return Ln(this)?bt(this):this};O.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),a=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=a>>>16,i&=65535,a&=65535,n[s]=a<<16|i}return new xe(n,n[n.length-1]&-2147483648?-1:0)};function eh(t,e){return t.add(bt(e))}O.R=function(t){if(Yr(this)||Yr(t))return Ka;if(Ln(this))return Ln(t)?bt(this).R(bt(t)):bt(bt(this).R(t));if(Ln(t))return bt(this.R(bt(t)));if(0>this.X(R_)&&0>t.X(R_))return kr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,a=this.D(r)&65535,o=t.D(s)>>>16,c=t.D(s)&65535;n[2*r+2*s]+=a*c,Tu(n,2*r+2*s),n[2*r+2*s+1]+=i*c,Tu(n,2*r+2*s+1),n[2*r+2*s+1]+=a*o,Tu(n,2*r+2*s+1),n[2*r+2*s+2]+=i*o,Tu(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new xe(n,0)};function Tu(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ko(t,e){this.g=t,this.h=e}function th(t,e){if(Yr(e))throw Error("division by zero");if(Yr(t))return new Ko(Ka,Ka);if(Ln(t))return e=th(bt(t),e),new Ko(bt(e.g),bt(e.h));if(Ln(e))return e=th(t,bt(e)),new Ko(bt(e.g),e.h);if(30<t.g.length){if(Ln(t)||Ln(e))throw Error("slowDivide_ only works with positive integers.");for(var n=d0,r=e;0>=r.X(t);)n=P_(n),r=P_(r);var s=va(n,1),i=va(r,1);for(r=va(r,2),n=va(n,2);!Yr(r);){var a=i.add(r);0>=a.X(t)&&(s=s.add(n),i=a),r=va(r,1),n=va(n,1)}return e=eh(t,s.R(e)),new Ko(s,e)}for(s=Ka;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=kr(n),a=i.R(e);Ln(a)||0<a.X(t);)n-=r,i=kr(n),a=i.R(e);Yr(i)&&(i=d0),s=s.add(i),t=eh(t,a)}return new Ko(s,t)}O.gb=function(t){return th(this,t).h};O.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new xe(n,this.h&t.h)};O.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new xe(n,this.h|t.h)};O.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new xe(n,this.h^t.h)};function P_(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new xe(n,t.h)}function va(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new xe(s,t.h)}Zd.prototype.createWebChannel=Zd.prototype.g;In.prototype.send=In.prototype.u;In.prototype.open=In.prototype.m;In.prototype.close=In.prototype.close;mf.NO_ERROR=0;mf.TIMEOUT=8;mf.HTTP_ERROR=6;OT.COMPLETE="complete";FT.EventType=$c;$c.OPEN="a";$c.CLOSE="b";$c.ERROR="c";$c.MESSAGE="d";yt.prototype.listen=yt.prototype.O;Be.prototype.listenOnce=Be.prototype.P;Be.prototype.getLastError=Be.prototype.Sa;Be.prototype.getLastErrorCode=Be.prototype.Ia;Be.prototype.getStatus=Be.prototype.da;Be.prototype.getResponseJson=Be.prototype.Wa;Be.prototype.getResponseText=Be.prototype.ja;Be.prototype.send=Be.prototype.ha;Be.prototype.setWithCredentials=Be.prototype.Oa;cr.prototype.digest=cr.prototype.l;cr.prototype.reset=cr.prototype.reset;cr.prototype.update=cr.prototype.j;xe.prototype.add=xe.prototype.add;xe.prototype.multiply=xe.prototype.R;xe.prototype.modulo=xe.prototype.gb;xe.prototype.compare=xe.prototype.X;xe.prototype.toNumber=xe.prototype.ea;xe.prototype.toString=xe.prototype.toString;xe.prototype.getBits=xe.prototype.D;xe.fromNumber=kr;xe.fromString=yI;var BO=function(){return new Zd},UO=function(){return ff()},up=mf,VO=OT,WO=ua,N_={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Iu=FT,HO=Be,qO=cr,Qa=xe;const j_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Co="10.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new nv("@firebase/firestore");function D_(){return Ki.logLevel}function z(t,...e){if(Ki.logLevel<=pe.DEBUG){const n=e.map(Ov);Ki.debug(`Firestore (${Co}): ${t}`,...n)}}function us(t,...e){if(Ki.logLevel<=pe.ERROR){const n=e.map(Ov);Ki.error(`Firestore (${Co}): ${t}`,...n)}}function lo(t,...e){if(Ki.logLevel<=pe.WARN){const n=e.map(Ov);Ki.warn(`Firestore (${Co}): ${t}`,...n)}}function Ov(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t="Unexpected state"){const e=`FIRESTORE (${Co}) INTERNAL ASSERTION FAILED: `+t;throw us(e),new Error(e)}function Re(t,e){t||Q()}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class M extends Br{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Dt.UNAUTHENTICATED))}shutdown(){}}class KO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class QO{constructor(e){this.t=e,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new es;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new es,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},o=c=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new es)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string"),new vI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string"),new Dt(e)}}class XO{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class YO{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new XO(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class JO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,z("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Re(typeof n.token=="string"),this.R=n.token,new JO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=eF(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function co(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new M(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new M(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new M(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new M(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ot(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Y(e)}static min(){return new Y(new ot(0,0))}static max(){return new Y(new ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(),r===void 0?r=e.length-n:r>e.length-n&&Q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return oc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof oc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ce extends oc{construct(e,n,r){return new Ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new M(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ce(n)}static emptyPath(){return new Ce([])}}const tF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends oc{construct(e,n,r){return new Lt(e,n,r)}static isValidIdentifier(e){return tF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Lt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new M(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new M(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new M(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(r+=o,s++):(i(),s++)}if(i(),a)throw new M(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(n)}static emptyPath(){return new Lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(Ce.fromString(e))}static fromName(e){return new W(Ce.fromString(e).popFirst(5))}static empty(){return new W(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new Ce(e.slice()))}}function nF(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Y.fromTimestamp(r===1e9?new ot(n+1,0):new ot(n,r));return new ri(s,W.empty(),e)}function rF(t){return new ri(t.readTime,t.key,-1)}class ri{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ri(Y.min(),W.empty(),-1)}static max(){return new ri(Y.max(),W.empty(),-1)}}function sF(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wc(t){if(t.code!==R.FAILED_PRECONDITION||t.message!==iF)throw t;z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(s=>s?j.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new j((r,s)=>{const i=e.length,a=new Array(i);let o=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(d=>{a[u]=d,++o,o===i&&r(a)},d=>s(d))}})}static doWhile(e,n){return new j((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Hc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Fv.ae=-1;function Sf(t){return t==null}function nh(t){return t===0&&1/t==-1/0}function oF(t){return typeof t=="number"&&Number.isInteger(t)&&!nh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ao(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n){this.comparator=e,this.root=n||St.EMPTY}insert(e,n){return new Me(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,St.BLACK,null,null))}remove(e){return new Me(this.comparator,this.root.remove(e,this.comparator).copy(null,null,St.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cu(this.root,e,this.comparator,!0)}}class Cu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class St{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??St.RED,this.left=s??St.EMPTY,this.right=i??St.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new St(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return St.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return St.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();const e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}}St.EMPTY=null,St.RED=!0,St.BLACK=!1;St.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,n,r,s,i){return this}insert(e,n,r){return new St(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new F_(this.data.getIterator())}getIteratorFrom(e){return new F_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Bt(this.comparator);return n.data=e,n}}class F_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new sr([])}unionWith(e){let n=new Bt(Lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new sr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return co(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new _I("Invalid base64 string: "+i):i}}(e);return new Wt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const lF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function si(t){if(Re(!!t),typeof t=="string"){let e=0;const n=lF.exec(t);if(Re(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Je(t.seconds),nanos:Je(t.nanos)}}function Je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qi(t){return typeof t=="string"?Wt.fromBase64String(t):Wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Mv(t){const e=t.mapValue.fields.__previous_value__;return Lv(e)?Mv(e):e}function lc(t){const e=si(t.mapValue.fields.__local_write_time__.timestampValue);return new ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(e,n,r,s,i,a,o,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u}}class cc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new cc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof cc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Xi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lv(t)?4:uF(t)?9007199254740991:10:Q()}function Mr(t,e){if(t===e)return!0;const n=Xi(t);if(n!==Xi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lc(t).isEqual(lc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=si(s.timestampValue),o=si(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Qi(s.bytesValue).isEqual(Qi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Je(s.geoPointValue.latitude)===Je(i.geoPointValue.latitude)&&Je(s.geoPointValue.longitude)===Je(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Je(s.integerValue)===Je(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Je(s.doubleValue),o=Je(i.doubleValue);return a===o?nh(a)===nh(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return co(t.arrayValue.values||[],e.arrayValue.values||[],Mr);case 10:return function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(O_(a)!==O_(o))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(o[c]===void 0||!Mr(a[c],o[c])))return!1;return!0}(t,e);default:return Q()}}function uc(t,e){return(t.values||[]).find(n=>Mr(n,e))!==void 0}function uo(t,e){if(t===e)return 0;const n=Xi(t),r=Xi(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=Je(i.integerValue||i.doubleValue),c=Je(a.integerValue||a.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(t,e);case 3:return L_(t.timestampValue,e.timestampValue);case 4:return L_(lc(t),lc(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(i,a){const o=Qi(i),c=Qi(a);return o.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),c=a.split("/");for(let u=0;u<o.length&&u<c.length;u++){const d=ge(o[u],c[u]);if(d!==0)return d}return ge(o.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=ge(Je(i.latitude),Je(a.latitude));return o!==0?o:ge(Je(i.longitude),Je(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,a){const o=i.values||[],c=a.values||[];for(let u=0;u<o.length&&u<c.length;++u){const d=uo(o[u],c[u]);if(d)return d}return ge(o.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Au.mapValue&&a===Au.mapValue)return 0;if(i===Au.mapValue)return 1;if(a===Au.mapValue)return-1;const o=i.fields||{},c=Object.keys(o),u=a.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const m=ge(c[h],d[h]);if(m!==0)return m;const p=uo(o[c[h]],u[d[h]]);if(p!==0)return p}return ge(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Q()}}function L_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=si(t),r=si(e),s=ge(n.seconds,r.seconds);return s!==0?s:ge(n.nanos,r.nanos)}function ho(t){return h0(t)}function h0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=si(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Qi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=h0(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${h0(n.fields[a])}`;return s+"}"}(t.mapValue):Q()}function M_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function f0(t){return!!t&&"integerValue"in t}function $v(t){return!!t&&"arrayValue"in t}function $_(t){return!!t&&"nullValue"in t}function z_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function id(t){return!!t&&"mapValue"in t}function kl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ao(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=kl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=kl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function uF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.value=e}static empty(){return new Mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!id(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=kl(n)}setAll(e){let n=Lt.emptyPath(),r={},s=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=o.popLast()}a?r[o.lastSegment()]=kl(a):s.push(o.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());id(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];id(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ao(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Mn(kl(this.value))}}function EI(t){const e=[];return Ao(t.fields,(n,r)=>{const s=new Lt([n]);if(id(r)){const i=EI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new sr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n,r,s,i,a,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Ft(e,0,Y.min(),Y.min(),Y.min(),Mn.empty(),0)}static newFoundDocument(e,n,r,s){return new Ft(e,1,n,Y.min(),r,s,0)}static newNoDocument(e,n){return new Ft(e,2,n,Y.min(),Y.min(),Mn.empty(),0)}static newUnknownDocument(e,n){return new Ft(e,3,n,Y.min(),Y.min(),Mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,n){this.position=e,this.inclusive=n}}function B_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=W.comparator(W.fromName(a.referenceValue),n.key):r=uo(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function U_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n="asc"){this.field=e,this.dir=n}}function dF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{}class et extends SI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new fF(e,n,r):n==="array-contains"?new gF(e,r):n==="in"?new yF(e,r):n==="not-in"?new vF(e,r):n==="array-contains-any"?new xF(e,r):new et(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new mF(e,r):new pF(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(uo(n,this.value)):n!==null&&Xi(this.value)===Xi(n)&&this.matchesComparison(uo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ur extends SI{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new ur(e,n)}matches(e){return bI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function bI(t){return t.op==="and"}function kI(t){return hF(t)&&bI(t)}function hF(t){for(const e of t.filters)if(e instanceof ur)return!1;return!0}function m0(t){if(t instanceof et)return t.field.canonicalString()+t.op.toString()+ho(t.value);if(kI(t))return t.filters.map(e=>m0(e)).join(",");{const e=t.filters.map(n=>m0(n)).join(",");return`${t.op}(${e})`}}function TI(t,e){return t instanceof et?function(r,s){return s instanceof et&&r.op===s.op&&r.field.isEqual(s.field)&&Mr(r.value,s.value)}(t,e):t instanceof ur?function(r,s){return s instanceof ur&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,o)=>i&&TI(a,s.filters[o]),!0):!1}(t,e):void Q()}function II(t){return t instanceof et?function(n){return`${n.field.canonicalString()} ${n.op} ${ho(n.value)}`}(t):t instanceof ur?function(n){return n.op.toString()+" {"+n.getFilters().map(II).join(" ,")+"}"}(t):"Filter"}class fF extends et{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class mF extends et{constructor(e,n){super(e,"in",n),this.keys=CI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class pF extends et{constructor(e,n){super(e,"not-in",n),this.keys=CI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function CI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class gF extends et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return $v(n)&&uc(n.arrayValue,this.value)}}class yF extends et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&uc(this.value.arrayValue,n)}}class vF extends et{constructor(e,n){super(e,"not-in",n)}matches(e){if(uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!uc(this.value.arrayValue,n)}}class xF extends et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!$v(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>uc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(e,n=null,r=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.he=null}}function V_(t,e=null,n=[],r=[],s=null,i=null,a=null){return new wF(t,e,n,r,s,i,a)}function zv(t){const e=ne(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>m0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Sf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ho(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ho(r)).join(",")),e.he=n}return e.he}function Bv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!dF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!TI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!U_(t.startAt,e.startAt)&&U_(t.endAt,e.endAt)}function p0(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n=null,r=[],s=[],i=null,a="F",o=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=c,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function _F(t,e,n,r,s,i,a,o){return new qc(t,e,n,r,s,i,a,o)}function Uv(t){return new qc(t)}function W_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function AI(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Vv(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function RI(t){return t.collectionGroup!==null}function Il(t){const e=ne(t);if(e.Pe===null){e.Pe=[];const n=Vv(e),r=AI(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new Tl(n)),e.Pe.push(new Tl(Lt.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.Pe.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Tl(Lt.keyField(),i))}}}return e.Pe}function ds(t){const e=ne(t);return e.Ie||(e.Ie=EF(e,Il(t))),e.Ie}function EF(t,e){if(t.limitType==="F")return V_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Tl(s.field,i)});const n=t.endAt?new rh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rh(t.startAt.position,t.startAt.inclusive):null;return V_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function g0(t,e){e.getFirstInequalityField(),Vv(t);const n=t.filters.concat([e]);return new qc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sh(t,e,n){return new qc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bf(t,e){return Bv(ds(t),ds(e))&&t.limitType===e.limitType}function PI(t){return`${zv(ds(t))}|lt:${t.limitType}`}function y0(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>II(s)).join(", ")}]`),Sf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ho(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ho(s)).join(",")),`Target(${r})`}(ds(t))}; limitType=${t.limitType})`}function kf(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):W.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Il(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,o,c){const u=B_(a,o,c);return a.inclusive?u<=0:u<0}(r.startAt,Il(r),s)||r.endAt&&!function(a,o,c){const u=B_(a,o,c);return a.inclusive?u>=0:u>0}(r.endAt,Il(r),s))}(t,e)}function SF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function NI(t){return(e,n)=>{let r=!1;for(const s of Il(t)){const i=bF(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function bF(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(i,a,o){const c=a.data.field(i),u=o.data.field(i);return c!==null&&u!==null?uo(c,u):Q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ao(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return wI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF=new Me(W.comparator);function hs(){return kF}const jI=new Me(W.comparator);function cl(...t){let e=jI;for(const n of t)e=e.insert(n.key,n);return e}function DI(t){let e=jI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Di(){return Cl()}function OI(){return Cl()}function Cl(){return new Ro(t=>t.toString(),(t,e)=>t.isEqual(e))}const TF=new Me(W.comparator),IF=new Bt(W.comparator);function ce(...t){let e=IF;for(const n of t)e=e.add(n);return e}const CF=new Bt(ge);function AF(){return CF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nh(e)?"-0":e}}function LI(t){return{integerValue:""+t}}function RF(t,e){return oF(e)?LI(e):FI(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(){this._=void 0}}function PF(t,e,n){return t instanceof ih?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Lv(i)&&(i=Mv(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof dc?$I(t,e):t instanceof hc?zI(t,e):function(s,i){const a=MI(s,i),o=H_(a)+H_(s.Ee);return f0(a)&&f0(s.Ee)?LI(o):FI(s.serializer,o)}(t,e)}function NF(t,e,n){return t instanceof dc?$I(t,e):t instanceof hc?zI(t,e):n}function MI(t,e){return t instanceof ah?function(r){return f0(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ih extends Tf{}class dc extends Tf{constructor(e){super(),this.elements=e}}function $I(t,e){const n=BI(e);for(const r of t.elements)n.some(s=>Mr(s,r))||n.push(r);return{arrayValue:{values:n}}}class hc extends Tf{constructor(e){super(),this.elements=e}}function zI(t,e){let n=BI(e);for(const r of t.elements)n=n.filter(s=>!Mr(s,r));return{arrayValue:{values:n}}}class ah extends Tf{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function H_(t){return Je(t.integerValue||t.doubleValue)}function BI(t){return $v(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function jF(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof dc&&s instanceof dc||r instanceof hc&&s instanceof hc?co(r.elements,s.elements,Mr):r instanceof ah&&s instanceof ah?Mr(r.Ee,s.Ee):r instanceof ih&&s instanceof ih}(t.transform,e.transform)}class DF{constructor(e,n){this.version=e,this.transformResults=n}}class Dr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dr}static exists(e){return new Dr(void 0,e)}static updateTime(e){return new Dr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ad(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class If{}function UI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wv(t.key,Dr.none()):new Gc(t.key,t.data,Dr.none());{const n=t.data,r=Mn.empty();let s=new Bt(Lt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new da(t.key,r,new sr(s.toArray()),Dr.none())}}function OF(t,e,n){t instanceof Gc?function(s,i,a){const o=s.value.clone(),c=G_(s.fieldTransforms,i,a.transformResults);o.setAll(c),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof da?function(s,i,a){if(!ad(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=G_(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(VI(s)),c.setAll(o),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Al(t,e,n,r){return t instanceof Gc?function(i,a,o,c){if(!ad(i.precondition,a))return o;const u=i.value.clone(),d=K_(i.fieldTransforms,c,a);return u.setAll(d),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof da?function(i,a,o,c){if(!ad(i.precondition,a))return o;const u=K_(i.fieldTransforms,c,a),d=a.data;return d.setAll(VI(i)),d.setAll(u),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,a,o){return ad(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function FF(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=MI(r.transform,s||null);i!=null&&(n===null&&(n=Mn.empty()),n.set(r.field,i))}return n||null}function q_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&co(r,s,(i,a)=>jF(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Gc extends If{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class da extends If{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function VI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function G_(t,e,n){const r=new Map;Re(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);r.set(i.field,NF(a,o,n[s]))}return r}function K_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,PF(i,a,e))}return r}class Wv extends If{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LF extends If{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&OF(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Al(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Al(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=OI();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=n.has(s.key)?null:o;const c=UI(a,o);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&co(this.mutations,e.mutations,(n,r)=>q_(n,r))&&co(this.baseMutations,e.baseMutations,(n,r)=>q_(n,r))}}class Hv{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Re(e.mutations.length===r.length);let s=function(){return TF}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Hv(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye,he;function BF(t){switch(t){default:return Q();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function WI(t){if(t===void 0)return us("GRPC error has no .code"),R.UNKNOWN;switch(t){case Ye.OK:return R.OK;case Ye.CANCELLED:return R.CANCELLED;case Ye.UNKNOWN:return R.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return R.INTERNAL;case Ye.UNAVAILABLE:return R.UNAVAILABLE;case Ye.UNAUTHENTICATED:return R.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case Ye.NOT_FOUND:return R.NOT_FOUND;case Ye.ALREADY_EXISTS:return R.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return R.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case Ye.ABORTED:return R.ABORTED;case Ye.OUT_OF_RANGE:return R.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return R.UNIMPLEMENTED;case Ye.DATA_LOSS:return R.DATA_LOSS;default:return Q()}}(he=Ye||(Ye={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VF=new Qa([4294967295,4294967295],0);function Q_(t){const e=UF().encode(t),n=new qO;return n.update(e),new Uint8Array(n.digest())}function X_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Qa([n,r],0),new Qa([s,i],0)]}class qv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ul(`Invalid padding: ${n}`);if(r<0)throw new ul(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ul(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ul(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=Qa.fromNumber(this.Ae)}Ve(e,n,r){let s=e.add(n.multiply(Qa.fromNumber(r)));return s.compare(VF)===1&&(s=new Qa([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=Q_(e),[r,s]=X_(n);for(let i=0;i<this.hashCount;i++){const a=this.Ve(r,s,i);if(!this.me(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new qv(i,s,n);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.Ae===0)return;const n=Q_(e),[r,s]=X_(n);for(let i=0;i<this.hashCount;i++){const a=this.Ve(r,s,i);this.fe(a)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ul extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Kc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Cf(Y.min(),s,new Me(ge),hs(),ce())}}class Kc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Kc(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n,r,s){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=s}}class HI{constructor(e,n){this.targetId=e,this.ye=n}}class qI{constructor(e,n,r=Wt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Y_{constructor(){this.we=0,this.Se=Z_(),this.be=Wt.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=ce(),n=ce(),r=ce();return this.Se.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Q()}}),new Kc(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=Z_()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class WF{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=hs(),this.Ue=J_(),this.We=new Me(ge)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:Q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,s)=>{this.Ye(s)&&n(s)})}Xe(e){const n=e.targetId,r=e.ye.count,s=this.et(n);if(s){const i=s.target;if(p0(i))if(r===0){const a=new W(i.path);this.je(n,a,Ft.newNoDocument(a,Y.min()))}else Re(r===1);else{const a=this.tt(n);if(a!==r){const o=this.nt(e),c=o?this.rt(o,e,a):1;if(c!==0){this.Ze(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,u)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,o;try{a=Qi(r).toUint8Array()}catch(c){if(c instanceof _I)return lo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new qv(a,s,i)}catch(c){return lo(c instanceof ul?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.Ae===0?null:o}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Qe.st(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.je(n,i,null),s++)}),s}_t(e){const n=new Map;this.Ke.forEach((i,a)=>{const o=this.et(a);if(o){if(i.current&&p0(o.target)){const c=new W(o.target.path);this.$e.get(c)!==null||this.ut(a,c)||this.je(a,c,Ft.newNoDocument(c,e))}i.Fe&&(n.set(a,i.xe()),i.Oe())}});let r=ce();this.Ue.forEach((i,a)=>{let o=!0;a.forEachWhile(c=>{const u=this.et(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(i))}),this.$e.forEach((i,a)=>a.setReadTime(e));const s=new Cf(e,n,this.We,this.$e,r);return this.$e=hs(),this.Ue=J_(),this.We=new Me(ge),s}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const s=this.Je(e);this.ut(e,n)?s.Ne(n,1):s.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new Y_,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Bt(ge),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||z("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new Y_),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function J_(){return new Me(W.comparator)}function Z_(){return new Me(W.comparator)}const HF=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),qF=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),GF=(()=>({and:"AND",or:"OR"}))();class KF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function v0(t,e){return t.useProto3Json||Sf(e)?e:{value:e}}function oh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function QF(t,e){return oh(t,e.toTimestamp())}function Or(t){return Re(!!t),Y.fromTimestamp(function(n){const r=si(n);return new ot(r.seconds,r.nanos)}(t))}function Gv(t,e){return function(r){return new Ce(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function KI(t){const e=Ce.fromString(t);return Re(JI(e)),e}function x0(t,e){return Gv(t.databaseId,e.path)}function dp(t,e){const n=KI(e);if(n.get(1)!==t.databaseId.projectId)throw new M(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new M(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(QI(n))}function w0(t,e){return Gv(t.databaseId,e)}function XF(t){const e=KI(t);return e.length===4?Ce.emptyPath():QI(e)}function _0(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function QI(t){return Re(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function eE(t,e,n){return{name:x0(t,e),fields:n.value.mapValue.fields}}function YF(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(Re(d===void 0||typeof d=="string"),Wt.fromBase64String(d||"")):(Re(d===void 0||d instanceof Uint8Array),Wt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(u){const d=u.code===void 0?R.UNKNOWN:WI(u.code);return new M(d,u.message||"")}(a);n=new qI(r,s,i,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=dp(t,r.document.name),i=Or(r.document.updateTime),a=r.document.createTime?Or(r.document.createTime):Y.min(),o=new Mn({mapValue:{fields:r.document.fields}}),c=Ft.newFoundDocument(s,i,a,o),u=r.targetIds||[],d=r.removedTargetIds||[];n=new od(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=dp(t,r.document),i=r.readTime?Or(r.readTime):Y.min(),a=Ft.newNoDocument(s,i),o=r.removedTargetIds||[];n=new od([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=dp(t,r.document),i=r.removedTargetIds||[];n=new od([],i,s,null)}else{if(!("filter"in e))return Q();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new zF(s,i),o=r.targetId;n=new HI(o,a)}}return n}function JF(t,e){let n;if(e instanceof Gc)n={update:eE(t,e.key,e.value)};else if(e instanceof Wv)n={delete:x0(t,e.key)};else if(e instanceof da)n={update:eE(t,e.key,e.data),updateMask:oL(e.fieldMask)};else{if(!(e instanceof LF))return Q();n={verify:x0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const o=a.transform;if(o instanceof ih)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof dc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof hc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof ah)return{fieldPath:a.field.canonicalString(),increment:o.Ee};throw Q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:QF(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Q()}(t,e.precondition)),n}function ZF(t,e){return t&&t.length>0?(Re(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?Or(s.updateTime):Or(i);return a.isEqual(Y.min())&&(a=Or(i)),new DF(a,s.transformResults||[])}(n,e))):[]}function eL(t,e){return{documents:[w0(t,e.path)]}}function tL(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=w0(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=w0(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(c){if(c.length!==0)return YI(ur.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:Sa(h.field),direction:sL(h.dir)}}(u))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const a=v0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function nL(t){let e=XF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Re(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const m=XI(h);return m instanceof ur&&kI(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(h){return h.map(m=>function(g){return new Tl(ba(g.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(m))}(n.orderBy));let o=null;n.limit&&(o=function(h){let m;return m=typeof h=="object"?h.value:h,Sf(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(h){const m=!!h.before,p=h.values||[];return new rh(p,m)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const m=!h.before,p=h.values||[];return new rh(p,m)}(n.endAt)),_F(e,s,a,i,o,"F",c,u)}function rL(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function XI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ba(n.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ba(n.unaryFilter.field);return et.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ba(n.unaryFilter.field);return et.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ba(n.unaryFilter.field);return et.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(t):t.fieldFilter!==void 0?function(n){return et.create(ba(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ur.create(n.compositeFilter.filters.map(r=>XI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Q()}}(n.compositeFilter.op))}(t):Q()}function sL(t){return HF[t]}function iL(t){return qF[t]}function aL(t){return GF[t]}function Sa(t){return{fieldPath:t.canonicalString()}}function ba(t){return Lt.fromServerFormat(t.fieldPath)}function YI(t){return t instanceof et?function(n){if(n.op==="=="){if(z_(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NAN"}};if($_(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(z_(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NOT_NAN"}};if($_(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sa(n.field),op:iL(n.op),value:n.value}}}(t):t instanceof ur?function(n){const r=n.getFilters().map(s=>YI(s));return r.length===1?r[0]:{compositeFilter:{op:aL(n.op),filters:r}}}(t):Q()}function oL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function JI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n,r,s,i=Y.min(),a=Y.min(),o=Wt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new $s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e){this.ht=e}}function cL(t){const e=nL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(){this._n=new dL}addToCollectionParentIndex(e,n){return this._n.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(ri.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(ri.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class dL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Bt(Ce.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Bt(Ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new fo(0)}static Bn(){return new fo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(){this.changes=new Ro(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Al(r.mutation,s,sr.empty(),ot.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const s=Di();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=cl();return i.forEach((o,c)=>{a=a.insert(o,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Di();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,r,s){let i=hs();const a=Cl(),o=function(){return Cl()}();return n.forEach((c,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof da)?i=i.insert(u.key,u):d!==void 0?(a.set(u.key,d.mutation.getFieldMask()),Al(d.mutation,u,d.mutation.getFieldMask(),ot.now())):a.set(u.key,sr.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,d)=>a.set(u,d)),n.forEach((u,d)=>{var h;return o.set(u,new fL(d,(h=a.get(u))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(e,n){const r=Cl();let s=new Me((a,o)=>a-o),i=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||sr.empty();d=o.applyToLocalView(u,d),r.set(c,d);const h=(s.get(o.batchId)||ce()).add(c);s=s.insert(o.batchId,h)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,d=c.value,h=OI();d.forEach(m=>{if(!i.has(m)){const p=UI(n.get(m),r.get(m));p!==null&&h.set(m,p),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,h))}return j.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return W.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):RI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):j.resolve(Di());let o=-1,c=i;return a.next(u=>j.forEach(u,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),i.get(d)?j.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,ce())).next(d=>({batchId:o,changes:DI(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let s=cl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=cl();return this.indexManager.getCollectionParents(e,s).next(a=>j.forEach(a,o=>{const c=function(d,h){return new qc(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,o.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r).next(u=>{u.forEach((d,h)=>{i=i.insert(d,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s))).next(i=>{s.forEach((o,c)=>{const u=c.getKey();i.get(u)===null&&(i=i.insert(u,Ft.newInvalidDocument(u)))});let a=cl();return i.forEach((o,c)=>{const u=s.get(o);u!==void 0&&Al(u.mutation,c,sr.empty(),ot.now()),kf(n,c)&&(a=a.insert(o,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return j.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Or(s.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:cL(s.bundledQuery),readTime:Or(s.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(){this.overlays=new Me(W.comparator),this.hr=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Di();return j.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.It(e,n,i)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const s=Di(),i=n.length+1,a=new W(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return j.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Me((u,d)=>u-d);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=i.get(u.largestBatchId);d===null&&(d=Di(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=Di(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=s)););return j.resolve(o)}It(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new $F(n,r));let i=this.hr.get(n);i===void 0&&(i=ce(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(){this.Pr=new Bt(ht.Ir),this.Tr=new Bt(ht.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new ht(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new ht(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new W(new Ce([])),r=new ht(n,e),s=new ht(n,e+1),i=[];return this.Tr.forEachInRange([r,s],a=>{this.Ar(a),i.push(a.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new W(new Ce([])),r=new ht(n,e),s=new ht(n,e+1);let i=ce();return this.Tr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new ht(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ht{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return W.comparator(e.key,n.key)||ge(e.pr,n.pr)}static Er(e,n){return ge(e.pr,n.pr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Bt(ht.Ir)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new MF(i,n,r,s);this.mutationQueue.push(a);for(const o of s)this.wr=this.wr.add(new ht(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return j.resolve(a)}lookupMutationBatch(e,n){return j.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return j.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ht(n,0),s=new ht(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],a=>{const o=this.Sr(a.pr);i.push(o)}),j.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Bt(ge);return n.forEach(s=>{const i=new ht(s,0),a=new ht(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,a],o=>{r=r.add(o.pr)})}),j.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;W.isDocumentKey(i)||(i=i.child(""));const a=new ht(new W(i),0);let o=new Bt(ge);return this.wr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(o=o.add(c.pr)),!0)},a),j.resolve(this.Dr(o))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Re(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return j.forEach(n.mutations,s=>{const i=new ht(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new ht(n,0),s=this.wr.firstAfterOrEqual(r);return j.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}vr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e){this.Cr=e,this.docs=function(){return new Me(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():Ft.newInvalidDocument(n))}getEntries(e,n){let r=hs();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ft.newInvalidDocument(s))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=hs();const a=n.path,o=new W(a.child("")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||sF(rF(d),r)<=0||(s.has(d.key)||kf(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return j.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Q()}Fr(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new xL(this)}getSize(e){return j.resolve(this.size)}}class xL extends hL{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e){this.persistence=e,this.Mr=new Ro(n=>zv(n),Bv),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Kv,this.targetCount=0,this.Br=fo.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),j.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new fo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.qn(n),j.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((a,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Mr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),j.waitFor(i).next(()=>s)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),j.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e,n){this.Lr={},this.overlays={},this.kr=new Fv(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new wL(this),this.indexManager=new uL,this.remoteDocumentCache=function(s){return new vL(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new lL(n),this.$r=new pL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new yL(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){z("MemoryPersistence","Starting transaction:",e);const s=new EL(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return j.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class EL extends aF{constructor(e){super(),this.currentSequenceNumber=e}}class Qv{constructor(e){this.persistence=e,this.zr=new Kv,this.jr=null}static Hr(e){return new Qv(e)}get Jr(){if(this.jr)return this.jr;throw Q()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),j.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Jr,r=>{const s=W.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,Y.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return j.or([()=>j.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=ce(),s=ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Xv(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(){this.$i=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){return this.Wi(e,n).next(i=>i||this.Gi(e,n,s,r)).next(i=>i||this.zi(e,n))}Wi(e,n){if(W_(n))return j.resolve(null);let r=ds(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=sh(n,null,"F"),r=ds(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=ce(...i);return this.Ui.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ji(n,o);return this.Hi(n,u,a,c.readTime)?this.Wi(e,sh(n,null,"F")):this.Ji(e,u,n,c)}))})))}Gi(e,n,r,s){return W_(n)||s.isEqual(Y.min())?this.zi(e,n):this.Ui.getDocuments(e,r).next(i=>{const a=this.ji(n,i);return this.Hi(n,a,r,s)?this.zi(e,n):(D_()<=pe.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),y0(n)),this.Ji(e,a,n,nF(s,-1)))})}ji(e,n){let r=new Bt(NI(e));return n.forEach((s,i)=>{kf(e,i)&&(r=r.add(i))}),r}Hi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}zi(e,n){return D_()<=pe.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",y0(n)),this.Ui.getDocumentsMatchingQuery(e,n,ri.min())}Ji(e,n,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,n,r,s){this.persistence=e,this.Yi=n,this.serializer=s,this.Zi=new Me(ge),this.Xi=new Ro(i=>zv(i),Bv),this.es=new Map,this.ts=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this.ns(r)}ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mL(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Zi))}}function kL(t,e,n,r){return new bL(t,e,n,r)}async function ZI(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ns(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],o=[];let c=ce();for(const u of s){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of i){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({rs:u,removedBatchIds:a,addedBatchIds:o}))})})}function TL(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.ts.newChangeBuffer({trackRemovals:!0});return function(o,c,u,d){const h=u.batch,m=h.keys();let p=j.resolve();return m.forEach(g=>{p=p.next(()=>d.getEntry(c,g)).next(x=>{const _=u.docVersions.get(g);Re(_!==null),x.version.compareTo(_)<0&&(h.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(c,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let c=ce();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function eC(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function IL(t,e){const n=ne(t),r=e.snapshotVersion;let s=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.ts.newChangeBuffer({trackRemovals:!0});s=n.Zi;const o=[];e.targetChanges.forEach((d,h)=>{const m=s.get(h);if(!m)return;o.push(n.Qr.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(i,d.addedDocuments,h)));let p=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(Wt.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),s=s.insert(h,p),function(x,_,v){return x.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(m,p,d)&&o.push(n.Qr.updateTargetData(i,p))});let c=hs(),u=ce();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),o.push(CL(i,a,e.documentUpdates).next(d=>{c=d.ss,u=d.os})),!r.isEqual(Y.min())){const d=n.Qr.getLastRemoteSnapshotVersion(i).next(h=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));o.push(d)}return j.waitFor(o).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Zi=s,i))}function CL(t,e,n){let r=ce(),s=ce();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=hs();return n.forEach((o,c)=>{const u=i.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(o)),c.isNoDocument()&&c.version.isEqual(Y.min())?(e.removeEntry(o,c.readTime),a=a.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(o,c)):z("LocalStore","Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)}),{ss:a,os:s}})}function AL(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function RL(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,j.resolve(s)):n.Qr.allocateTargetId(r).next(a=>(s=new $s(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Zi.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(r.targetId,r),n.Xi.set(e,r.targetId)),r})}async function E0(t,e,n){const r=ne(t),s=r.Zi.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Hc(a))throw a;z("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.Zi=r.Zi.remove(e),r.Xi.delete(s.target)}function tE(t,e,n){const r=ne(t);let s=Y.min(),i=ce();return r.persistence.runTransaction("Execute query","readonly",a=>function(c,u,d){const h=ne(c),m=h.Xi.get(d);return m!==void 0?j.resolve(h.Zi.get(m)):h.Qr.getTargetData(u,d)}(r,a,ds(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(a,o.targetId).next(c=>{i=c})}).next(()=>r.Yi.getDocumentsMatchingQuery(a,e,n?s:Y.min(),n?i:ce())).next(o=>(PL(r,SF(e),o),{documents:o,_s:i})))}function PL(t,e,n){let r=t.es.get(e)||Y.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.es.set(e,r)}class nE{constructor(){this.activeTargetIds=AF()}Is(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ts(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ps(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NL{constructor(){this.Ys=new nE,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}updateQueryState(e,n,r){this.Zs[e]=n}removeLocalQueryTarget(e){this.Ys.Ts(e)}isLocalQueryTarget(e){return this.Ys.activeTargetIds.has(e)}clearQueryState(e){delete this.Zs[e]}getAllActiveQueryTargets(){return this.Ys.activeTargetIds}isActiveQueryTarget(e){return this.Ys.activeTargetIds.has(e)}start(){return this.Ys=new nE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{Xs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(){this.eo=()=>this.no(),this.ro=()=>this.io(),this.so=[],this.oo()}Xs(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}oo(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}no(){z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}io(){z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ru=null;function hp(){return Ru===null?Ru=function(){return 268435456+Math.round(2147483648*Math.random())}():Ru++,"0x"+Ru.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e){this._o=e._o,this.ao=e.ao}uo(e){this.co=e}lo(e){this.ho=e}onMessage(e){this.Po=e}close(){this.ao()}send(e){this._o(e)}Io(){this.co()}To(e){this.ho(e)}Eo(e){this.Po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="WebChannelConnection";class FL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ao=r+"://"+n.host,this.Ro=`projects/${s}/databases/${i}`,this.Vo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get mo(){return!1}fo(n,r,s,i,a){const o=hp(),c=this.po(n,r);z("RestConnection",`Sending RPC '${n}' ${o}:`,c,s);const u={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(u,i,a),this.wo(n,c,u,s).then(d=>(z("RestConnection",`Received RPC '${n}' ${o}: `,d),d),d=>{throw lo("RestConnection",`RPC '${n}' ${o} failed with error: `,d,"url: ",c,"request:",s),d})}So(n,r,s,i,a,o){return this.fo(n,r,s,i,a)}yo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Co}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}po(n,r){const s=DL[n];return`${this.Ao}/v1/${r}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}wo(e,n,r,s){const i=hp();return new Promise((a,o)=>{const c=new HO;c.setWithCredentials(!0),c.listenOnce(VO.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case up.NO_ERROR:const d=c.getResponseJson();z(Nt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),a(d);break;case up.TIMEOUT:z(Nt,`RPC '${e}' ${i} timed out`),o(new M(R.DEADLINE_EXCEEDED,"Request time out"));break;case up.HTTP_ERROR:const h=c.getStatus();if(z(Nt,`RPC '${e}' ${i} failed with status:`,h,"response text:",c.getResponseText()),h>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const g=function(_){const v=_.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(v)>=0?v:R.UNKNOWN}(p.status);o(new M(g,p.message))}else o(new M(R.UNKNOWN,"Server responded with status "+c.getStatus()))}else o(new M(R.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{z(Nt,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);z(Nt,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",u,r,15)})}bo(e,n,r){const s=hp(),i=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=BO(),o=UO(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.yo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=i.join("");z(Nt,`Creating RPC '${e}' stream ${s}: ${d}`,c);const h=a.createWebChannel(d,c);let m=!1,p=!1;const g=new OL({_o:_=>{p?z(Nt,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(m||(z(Nt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),m=!0),z(Nt,`RPC '${e}' stream ${s} sending:`,_),h.send(_))},ao:()=>h.close()}),x=(_,v,y)=>{_.listen(v,w=>{try{y(w)}catch(E){setTimeout(()=>{throw E},0)}})};return x(h,Iu.EventType.OPEN,()=>{p||z(Nt,`RPC '${e}' stream ${s} transport opened.`)}),x(h,Iu.EventType.CLOSE,()=>{p||(p=!0,z(Nt,`RPC '${e}' stream ${s} transport closed`),g.To())}),x(h,Iu.EventType.ERROR,_=>{p||(p=!0,lo(Nt,`RPC '${e}' stream ${s} transport errored:`,_),g.To(new M(R.UNAVAILABLE,"The operation could not be completed")))}),x(h,Iu.EventType.MESSAGE,_=>{var v;if(!p){const y=_.data[0];Re(!!y);const w=y,E=w.error||((v=w[0])===null||v===void 0?void 0:v.error);if(E){z(Nt,`RPC '${e}' stream ${s} received error:`,E);const S=E.status;let b=function(N){const D=Ye[N];if(D!==void 0)return WI(D)}(S),k=E.message;b===void 0&&(b=R.INTERNAL,k="Unknown error status: "+S+" with message "+E.message),p=!0,g.To(new M(b,k)),h.close()}else z(Nt,`RPC '${e}' stream ${s} received:`,y),g.Eo(y)}}),x(o,WO.STAT_EVENT,_=>{_.stat===N_.PROXY?z(Nt,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===N_.NOPROXY&&z(Nt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{g.Io()},0),g}}function fp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t){return new KF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Do=r,this.vo=s,this.Co=i,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}reset(){this.Fo=0}Oo(){this.Fo=this.Co}No(e){this.cancel();const n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),s=Math.max(0,n-r);s>0&&z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Fo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Mo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.xo=Date.now(),e())),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}Lo(){this.Mo!==null&&(this.Mo.skipDelay(),this.Mo=null)}cancel(){this.Mo!==null&&(this.Mo.cancel(),this.Mo=null)}Bo(){return(Math.random()-.5)*this.Fo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,n,r,s,i,a,o,c){this.oi=e,this.ko=r,this.qo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new tC(e,n)}Wo(){return this.state===1||this.state===5||this.Go()}Go(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.zo()}async stop(){this.Wo()&&await this.close(0)}jo(){this.state=0,this.Uo.reset()}Ho(){this.Go()&&this.Ko===null&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,()=>this.Jo()))}Yo(e){this.Zo(),this.stream.send(e)}async Jo(){if(this.Go())return this.close(0)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}Xo(){this.$o&&(this.$o.cancel(),this.$o=null)}async close(e,n){this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,e!==4?this.Uo.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(us(n.toString()),us("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.e_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.lo(n)}e_(){}auth(){this.state=1;const e=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Qo===n&&this.n_(r,s)},r=>{e(()=>{const s=new M(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.r_(s)})})}n_(e,n){const r=this.t_(this.Qo);this.stream=this.i_(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.$o=this.oi.enqueueAfterDelay(this.qo,1e4,()=>(this.Go()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.lo(s=>{r(()=>this.r_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}zo(){this.state=5,this.Uo.No(async()=>{this.state=0,this.start()})}r_(e){return z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}t_(e){return n=>{this.oi.enqueueAndForget(()=>this.Qo===e?n():(z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LL extends nC{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}i_(e,n){return this.connection.bo("Listen",e,n)}onMessage(e){this.Uo.reset();const n=YF(this.serializer,e),r=function(i){if(!("targetChange"in i))return Y.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Y.min():a.readTime?Or(a.readTime):Y.min()}(e);return this.listener.s_(n,r)}o_(e){const n={};n.database=_0(this.serializer),n.addTarget=function(i,a){let o;const c=a.target;if(o=p0(c)?{documents:eL(i,c)}:{query:tL(i,c)},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=GI(i,a.resumeToken);const u=v0(i,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(Y.min())>0){o.readTime=oh(i,a.snapshotVersion.toTimestamp());const u=v0(i,a.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const r=rL(this.serializer,e);r&&(n.labels=r),this.Yo(n)}__(e){const n={};n.database=_0(this.serializer),n.removeTarget=e,this.Yo(n)}}class ML extends nC{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i,this.a_=!1}get u_(){return this.a_}start(){this.a_=!1,this.lastStreamToken=void 0,super.start()}e_(){this.a_&&this.c_([])}i_(e,n){return this.connection.bo("Write",e,n)}onMessage(e){if(Re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();const n=ZF(e.writeResults,e.commitTime),r=Or(e.commitTime);return this.listener.l_(r,n)}return Re(!e.writeResults||e.writeResults.length===0),this.a_=!0,this.listener.h_()}P_(){const e={};e.database=_0(this.serializer),this.Yo(e)}c_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>JF(this.serializer,r))};this.Yo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.I_=!1}T_(){if(this.I_)throw new M(R.FAILED_PRECONDITION,"The client has already been terminated.")}fo(e,n,r){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.fo(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new M(R.UNKNOWN,s.toString())})}So(e,n,r,s){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.So(e,n,r,i,a,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new M(R.UNKNOWN,i.toString())})}terminate(){this.I_=!0}}class zL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}V_(){this.d_===0&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.A_=null,this.f_("Backend didn't respond within 10 seconds."),this.m_("Offline"),Promise.resolve())))}g_(e){this.state==="Online"?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.m_("Offline")))}set(e){this.p_(),this.d_=0,e==="Online"&&(this.R_=!1),this.m_(e)}m_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}f_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.R_?(us(n),this.R_=!1):z("OnlineStateTracker",n)}p_(){this.A_!==null&&(this.A_.cancel(),this.A_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=i,this.D_.Xs(a=>{r.enqueueAndForget(async()=>{ha(this)&&(z("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=ne(c);u.S_.add(4),await Qc(u),u.v_.set("Unknown"),u.S_.delete(4),await Rf(u)}(this))})}),this.v_=new zL(r,s)}}async function Rf(t){if(ha(t))for(const e of t.b_)await e(!0)}async function Qc(t){for(const e of t.b_)await e(!1)}function rC(t,e){const n=ne(t);n.w_.has(e.targetId)||(n.w_.set(e.targetId,e),Zv(n)?Jv(n):Po(n).Go()&&Yv(n,e))}function sC(t,e){const n=ne(t),r=Po(n);n.w_.delete(e),r.Go()&&iC(n,e),n.w_.size===0&&(r.Go()?r.Ho():ha(n)&&n.v_.set("Unknown"))}function Yv(t,e){if(t.C_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Po(t).o_(e)}function iC(t,e){t.C_.Le(e),Po(t).__(e)}function Jv(t){t.C_=new WF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.w_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),Po(t).start(),t.v_.V_()}function Zv(t){return ha(t)&&!Po(t).Wo()&&t.w_.size>0}function ha(t){return ne(t).S_.size===0}function aC(t){t.C_=void 0}async function UL(t){t.w_.forEach((e,n)=>{Yv(t,e)})}async function VL(t,e){aC(t),Zv(t)?(t.v_.g_(e),Jv(t)):t.v_.set("Unknown")}async function WL(t,e,n){if(t.v_.set("Online"),e instanceof qI&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const o of i.targetIds)s.w_.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.w_.delete(o),s.C_.removeTarget(o))}(t,e)}catch(r){z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lh(t,r)}else if(e instanceof od?t.C_.Ge(e):e instanceof HI?t.C_.Xe(e):t.C_.He(e),!n.isEqual(Y.min()))try{const r=await eC(t.localStore);n.compareTo(r)>=0&&await function(i,a){const o=i.C_._t(a);return o.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.w_.get(u);d&&i.w_.set(u,d.withResumeToken(c.resumeToken,a))}}),o.targetMismatches.forEach((c,u)=>{const d=i.w_.get(c);if(!d)return;i.w_.set(c,d.withResumeToken(Wt.EMPTY_BYTE_STRING,d.snapshotVersion)),iC(i,c);const h=new $s(d.target,c,u,d.sequenceNumber);Yv(i,h)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){z("RemoteStore","Failed to raise snapshot:",r),await lh(t,r)}}async function lh(t,e,n){if(!Hc(e))throw e;t.S_.add(1),await Qc(t),t.v_.set("Offline"),n||(n=()=>eC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{z("RemoteStore","Retrying IndexedDB access"),await n(),t.S_.delete(1),await Rf(t)})}function oC(t,e){return e().catch(n=>lh(t,n,e))}async function Pf(t){const e=ne(t),n=ii(e);let r=e.y_.length>0?e.y_[e.y_.length-1].batchId:-1;for(;HL(e);)try{const s=await AL(e.localStore,r);if(s===null){e.y_.length===0&&n.Ho();break}r=s.batchId,qL(e,s)}catch(s){await lh(e,s)}lC(e)&&cC(e)}function HL(t){return ha(t)&&t.y_.length<10}function qL(t,e){t.y_.push(e);const n=ii(t);n.Go()&&n.u_&&n.c_(e.mutations)}function lC(t){return ha(t)&&!ii(t).Wo()&&t.y_.length>0}function cC(t){ii(t).start()}async function GL(t){ii(t).P_()}async function KL(t){const e=ii(t);for(const n of t.y_)e.c_(n.mutations)}async function QL(t,e,n){const r=t.y_.shift(),s=Hv.from(r,e,n);await oC(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Pf(t)}async function XL(t,e){e&&ii(t).u_&&await async function(r,s){if(function(a){return BF(a)&&a!==R.ABORTED}(s.code)){const i=r.y_.shift();ii(r).jo(),await oC(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Pf(r)}}(t,e),lC(t)&&cC(t)}async function sE(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),z("RemoteStore","RemoteStore received new credentials");const r=ha(n);n.S_.add(3),await Qc(n),r&&n.v_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.S_.delete(3),await Rf(n)}async function YL(t,e){const n=ne(t);e?(n.S_.delete(2),await Rf(n)):e||(n.S_.add(2),await Qc(n),n.v_.set("Unknown"))}function Po(t){return t.F_||(t.F_=function(n,r,s){const i=ne(n);return i.T_(),new LL(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:UL.bind(null,t),lo:VL.bind(null,t),s_:WL.bind(null,t)}),t.b_.push(async e=>{e?(t.F_.jo(),Zv(t)?Jv(t):t.v_.set("Unknown")):(await t.F_.stop(),aC(t))})),t.F_}function ii(t){return t.M_||(t.M_=function(n,r,s){const i=ne(n);return i.T_(),new ML(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{uo:GL.bind(null,t),lo:XL.bind(null,t),h_:KL.bind(null,t),l_:QL.bind(null,t)}),t.b_.push(async e=>{e?(t.M_.jo(),await Pf(t)):(await t.M_.stop(),t.y_.length>0&&(z("RemoteStore",`Stopping write stream with ${t.y_.length} pending writes`),t.y_=[]))})),t.M_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,o=new ex(e,n,a,s,i);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new M(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tx(t,e){if(us("AsyncQueue",`${e}: ${t}`),Hc(t))return new M(R.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=cl(),this.sortedSet=new Me(this.comparator)}static emptySet(e){return new Xa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Xa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(){this.x_=new Me(W.comparator)}track(e){const n=e.doc.key,r=this.x_.get(n);r?e.type!==0&&r.type===3?this.x_=this.x_.insert(n,e):e.type===3&&r.type!==1?this.x_=this.x_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.x_=this.x_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.x_=this.x_.remove(n):e.type===1&&r.type===2?this.x_=this.x_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):Q():this.x_=this.x_.insert(n,e)}O_(){const e=[];return this.x_.inorderTraversal((n,r)=>{e.push(r)}),e}}class mo{constructor(e,n,r,s,i,a,o,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new mo(e,n,Xa.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(){this.N_=void 0,this.listeners=[]}}class ZL{constructor(){this.queries=new Ro(e=>PI(e),bf),this.onlineState="Unknown",this.B_=new Set}}async function uC(t,e){const n=ne(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new JL),s)try{i.N_=await n.onListen(r)}catch(a){const o=tx(a,`Initialization of query '${y0(e.query)}' failed`);return void e.onError(o)}n.queries.set(r,i),i.listeners.push(e),e.L_(n.onlineState),i.N_&&e.k_(i.N_)&&nx(n)}async function dC(t,e){const n=ne(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const a=i.listeners.indexOf(e);a>=0&&(i.listeners.splice(a,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function eM(t,e){const n=ne(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const o of a.listeners)o.k_(s)&&(r=!0);a.N_=s}}r&&nx(n)}function tM(t,e,n){const r=ne(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function nx(t){t.B_.forEach(e=>{e.next()})}class hC{constructor(e,n,r){this.query=e,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}k_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new mo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),n=!0):this.W_(e,this.onlineState)&&(this.G_(e),n=!0),this.K_=e,n}onError(e){this.q_.error(e)}L_(e){this.onlineState=e;let n=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),n=!0),n}W_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}U_(e){if(e.docChanges.length>0)return!0;const n=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}G_(e){e=mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e){this.key=e}}class mC{constructor(e){this.key=e}}class nM{constructor(e,n){this.query=e,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=ce(),this.mutatedKeys=ce(),this.ia=NI(e),this.sa=new Xa(this.ia)}get oa(){return this.ta}_a(e,n){const r=n?n.aa:new iE,s=n?n.sa:this.sa;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,o=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const m=s.get(d),p=kf(this.query,h)?h:null,g=!!m&&this.mutatedKeys.has(m.key),x=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let _=!1;m&&p?m.data.isEqual(p.data)?g!==x&&(r.track({type:3,doc:p}),_=!0):this.ua(m,p)||(r.track({type:2,doc:p}),_=!0,(c&&this.ia(p,c)>0||u&&this.ia(p,u)<0)&&(o=!0)):!m&&p?(r.track({type:0,doc:p}),_=!0):m&&!p&&(r.track({type:1,doc:m}),_=!0,(c||u)&&(o=!0)),_&&(p?(a=a.add(p),i=x?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{sa:a,aa:r,Hi:o,mutatedKeys:i}}ua(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;const i=e.aa.O_();i.sort((u,d)=>function(m,p){const g=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return g(m)-g(p)}(u.type,d.type)||this.ia(u.doc,d.doc)),this.ca(r);const a=n?this.la():[],o=this.ra.size===0&&this.current?1:0,c=o!==this.na;return this.na=o,i.length!==0||c?{snapshot:new mo(this.query,e.sa,s,i,e.mutatedKeys,o===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ha:a}:{ha:a}}L_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({sa:this.sa,aa:new iE,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}Pa(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}ca(e){e&&(e.addedDocuments.forEach(n=>this.ta=this.ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ta=this.ta.delete(n)),this.current=e.current)}la(){if(!this.current)return[];const e=this.ra;this.ra=ce(),this.sa.forEach(r=>{this.Pa(r.key)&&(this.ra=this.ra.add(r.key))});const n=[];return e.forEach(r=>{this.ra.has(r)||n.push(new mC(r))}),this.ra.forEach(r=>{e.has(r)||n.push(new fC(r))}),n}Ia(e){this.ta=e._s,this.ra=ce();const n=this._a(e.documents);return this.applyChanges(n,!0)}Ta(){return mo.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,this.na===0,this.hasCachedResults)}}class rM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class sM{constructor(e){this.key=e,this.Ea=!1}}class iM{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.da={},this.Aa=new Ro(o=>PI(o),bf),this.Ra=new Map,this.Va=new Set,this.ma=new Me(W.comparator),this.fa=new Map,this.ga=new Kv,this.pa={},this.ya=new Map,this.wa=fo.Bn(),this.onlineState="Unknown",this.Sa=void 0}get isPrimaryClient(){return this.Sa===!0}}async function aM(t,e){const n=gM(t);let r,s;const i=n.Aa.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Ta();else{const a=await RL(n.localStore,ds(e)),o=n.sharedClientState.addLocalQueryTarget(a.targetId);r=a.targetId,s=await oM(n,e,r,o==="current",a.resumeToken),n.isPrimaryClient&&rC(n.remoteStore,a)}return s}async function oM(t,e,n,r,s){t.ba=(h,m,p)=>async function(x,_,v,y){let w=_.view._a(v);w.Hi&&(w=await tE(x.localStore,_.query,!1).then(({documents:b})=>_.view._a(b,w)));const E=y&&y.targetChanges.get(_.targetId),S=_.view.applyChanges(w,x.isPrimaryClient,E);return oE(x,_.targetId,S.ha),S.snapshot}(t,h,m,p);const i=await tE(t.localStore,e,!0),a=new nM(e,i._s),o=a._a(i.documents),c=Kc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=a.applyChanges(o,t.isPrimaryClient,c);oE(t,n,u.ha);const d=new rM(e,n,a);return t.Aa.set(e,d),t.Ra.has(n)?t.Ra.get(n).push(e):t.Ra.set(n,[e]),u.snapshot}async function lM(t,e){const n=ne(t),r=n.Aa.get(e),s=n.Ra.get(r.targetId);if(s.length>1)return n.Ra.set(r.targetId,s.filter(i=>!bf(i,e))),void n.Aa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await E0(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),sC(n.remoteStore,r.targetId),S0(n,r.targetId)}).catch(Wc)):(S0(n,r.targetId),await E0(n.localStore,r.targetId,!0))}async function cM(t,e,n){const r=yM(t);try{const s=await function(a,o){const c=ne(a),u=ot.now(),d=o.reduce((p,g)=>p.add(g.key),ce());let h,m;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=hs(),x=ce();return c.ts.getEntries(p,d).next(_=>{g=_,g.forEach((v,y)=>{y.isValidDocument()||(x=x.add(v))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,g)).next(_=>{h=_;const v=[];for(const y of o){const w=FF(y,h.get(y.key).overlayedDocument);w!=null&&v.push(new da(y.key,w,EI(w.value.mapValue),Dr.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,v,o)}).next(_=>{m=_;const v=_.applyToLocalDocumentSet(h,x);return c.documentOverlayCache.saveOverlays(p,_.batchId,v)})}).then(()=>({batchId:m.batchId,changes:DI(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,o,c){let u=a.pa[a.currentUser.toKey()];u||(u=new Me(ge)),u=u.insert(o,c),a.pa[a.currentUser.toKey()]=u}(r,s.batchId,n),await Xc(r,s.changes),await Pf(r.remoteStore)}catch(s){const i=tx(s,"Failed to persist write");n.reject(i)}}async function pC(t,e){const n=ne(t);try{const r=await IL(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.fa.get(i);a&&(Re(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.Ea=!0:s.modifiedDocuments.size>0?Re(a.Ea):s.removedDocuments.size>0&&(Re(a.Ea),a.Ea=!1))}),await Xc(n,r,e)}catch(r){await Wc(r)}}function aE(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Aa.forEach((i,a)=>{const o=a.view.L_(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const c=ne(a);c.onlineState=o;let u=!1;c.queries.forEach((d,h)=>{for(const m of h.listeners)m.L_(o)&&(u=!0)}),u&&nx(c)}(r.eventManager,e),s.length&&r.da.s_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function uM(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.fa.get(e),i=s&&s.key;if(i){let a=new Me(W.comparator);a=a.insert(i,Ft.newNoDocument(i,Y.min()));const o=ce().add(i),c=new Cf(Y.min(),new Map,new Me(ge),a,o);await pC(r,c),r.ma=r.ma.remove(i),r.fa.delete(e),rx(r)}else await E0(r.localStore,e,!1).then(()=>S0(r,e,n)).catch(Wc)}async function dM(t,e){const n=ne(t),r=e.batch.batchId;try{const s=await TL(n.localStore,e);yC(n,r,null),gC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Xc(n,s)}catch(s){await Wc(s)}}async function hM(t,e,n){const r=ne(t);try{const s=await function(a,o){const c=ne(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,o).next(h=>(Re(h!==null),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);yC(r,e,n),gC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Xc(r,s)}catch(s){await Wc(s)}}function gC(t,e){(t.ya.get(e)||[]).forEach(n=>{n.resolve()}),t.ya.delete(e)}function yC(t,e,n){const r=ne(t);let s=r.pa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.pa[r.currentUser.toKey()]=s}}function S0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ra.get(e))t.Aa.delete(r),n&&t.da.Da(r,n);t.Ra.delete(e),t.isPrimaryClient&&t.ga.Vr(e).forEach(r=>{t.ga.containsKey(r)||vC(t,r)})}function vC(t,e){t.Va.delete(e.path.canonicalString());const n=t.ma.get(e);n!==null&&(sC(t.remoteStore,n),t.ma=t.ma.remove(e),t.fa.delete(n),rx(t))}function oE(t,e,n){for(const r of n)r instanceof fC?(t.ga.addReference(r.key,e),fM(t,r)):r instanceof mC?(z("SyncEngine","Document no longer in limbo: "+r.key),t.ga.removeReference(r.key,e),t.ga.containsKey(r.key)||vC(t,r.key)):Q()}function fM(t,e){const n=e.key,r=n.path.canonicalString();t.ma.get(n)||t.Va.has(r)||(z("SyncEngine","New document in limbo: "+n),t.Va.add(r),rx(t))}function rx(t){for(;t.Va.size>0&&t.ma.size<t.maxConcurrentLimboResolutions;){const e=t.Va.values().next().value;t.Va.delete(e);const n=new W(Ce.fromString(e)),r=t.wa.next();t.fa.set(r,new sM(n)),t.ma=t.ma.insert(n,r),rC(t.remoteStore,new $s(ds(Uv(n.path)),r,"TargetPurposeLimboResolution",Fv.ae))}}async function Xc(t,e,n){const r=ne(t),s=[],i=[],a=[];r.Aa.isEmpty()||(r.Aa.forEach((o,c)=>{a.push(r.ba(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u!=null&&u.fromCache?"not-current":"current"),u){s.push(u);const d=Xv.Ki(c.targetId,u);i.push(d)}}))}),await Promise.all(a),r.da.s_(s),await async function(c,u){const d=ne(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>j.forEach(u,m=>j.forEach(m.qi,p=>d.persistence.referenceDelegate.addReference(h,m.targetId,p)).next(()=>j.forEach(m.Qi,p=>d.persistence.referenceDelegate.removeReference(h,m.targetId,p)))))}catch(h){if(!Hc(h))throw h;z("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const m=h.targetId;if(!h.fromCache){const p=d.Zi.get(m),g=p.snapshotVersion,x=p.withLastLimboFreeSnapshotVersion(g);d.Zi=d.Zi.insert(m,x)}}}(r.localStore,i))}async function mM(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){z("SyncEngine","User change. New user:",e.toKey());const r=await ZI(n.localStore,e);n.currentUser=e,function(i,a){i.ya.forEach(o=>{o.forEach(c=>{c.reject(new M(R.CANCELLED,a))})}),i.ya.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Xc(n,r.rs)}}function pM(t,e){const n=ne(t),r=n.fa.get(e);if(r&&r.Ea)return ce().add(r.key);{let s=ce();const i=n.Ra.get(e);if(!i)return s;for(const a of i){const o=n.Aa.get(a);s=s.unionWith(o.view.oa)}return s}}function gM(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=pC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uM.bind(null,e),e.da.s_=eM.bind(null,e.eventManager),e.da.Da=tM.bind(null,e.eventManager),e}function yM(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hM.bind(null,e),e}class lE{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Af(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return kL(this.persistence,new SL,e.initialUser,this.serializer)}createPersistence(e){return new _L(Qv.Hr,this.serializer)}createSharedClientState(e){return new NL}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class vM{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>aE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=mM.bind(null,this.syncEngine),await YL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ZL}()}createDatastore(e){const n=Af(e.databaseInfo.databaseId),r=function(i){return new FL(i)}(e.databaseInfo);return function(i,a,o,c){return new $L(i,a,o,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,o){return new BL(r,s,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>aE(this.syncEngine,n,0),function(){return rE.v()?new rE:new jL}())}createSyncEngine(e,n){return function(s,i,a,o,c,u,d){const h=new iM(s,i,a,o,c,u);return d&&(h.Sa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=ne(n);z("RemoteStore","RemoteStore shutting down."),r.S_.add(5),await Qc(r),r.D_.shutdown(),r.v_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Fa(this.observer.next,e)}error(e){this.observer.error?this.Fa(this.observer.error,e):us("Uncaught Error in snapshot listener:",e.toString())}Ma(){this.muted=!0}Fa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Dt.UNAUTHENTICATED,this.clientId=xI.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{z("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(z("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new M(R.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=tx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function mp(t,e){t.asyncQueue.verifyOperationInProgress(),z("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await ZI(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await _M(t);z("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>sE(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>sE(e.remoteStore,i)),t._onlineComponents=e}function wM(t){return t.name==="FirebaseError"?t.code===R.FAILED_PRECONDITION||t.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function _M(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){z("FirestoreClient","Using user provided OfflineComponentProvider");try{await mp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!wM(n))throw n;lo("Error using user provided cache. Falling back to memory cache: "+n),await mp(t,new lE)}}else z("FirestoreClient","Using default OfflineComponentProvider"),await mp(t,new lE);return t._offlineComponents}async function wC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(z("FirestoreClient","Using user provided OnlineComponentProvider"),await cE(t,t._uninitializedComponentsProvider._online)):(z("FirestoreClient","Using default OnlineComponentProvider"),await cE(t,new vM))),t._onlineComponents}function EM(t){return wC(t).then(e=>e.syncEngine)}async function _C(t){const e=await wC(t),n=e.eventManager;return n.onListen=aM.bind(null,e.syncEngine),n.onUnlisten=lM.bind(null,e.syncEngine),n}function SM(t,e,n={}){const r=new es;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,c,u){const d=new xC({next:m=>{a.enqueueAndForget(()=>dC(i,h));const p=m.docs.has(o);!p&&m.fromCache?u.reject(new M(R.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&c&&c.source==="server"?u.reject(new M(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new hC(Uv(o.path),d,{includeMetadataChanges:!0,z_:!0});return uC(i,h)}(await _C(t),t.asyncQueue,e,n,r)),r.promise}function bM(t,e,n={}){const r=new es;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,c,u){const d=new xC({next:m=>{a.enqueueAndForget(()=>dC(i,h)),m.fromCache&&c.source==="server"?u.reject(new M(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new hC(o,d,{includeMetadataChanges:!0,z_:!0});return uC(i,h)}(await _C(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(t,e,n){if(!n)throw new M(R.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kM(t,e,n,r){if(e===!0&&r===!0)throw new M(R.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dE(t){if(!W.isDocumentKey(t))throw new M(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hE(t){if(W.isDocumentKey(t))throw new M(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Nf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q()}function ai(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new M(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nf(t);throw new M(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function TM(t,e){if(e<=0)throw new M(R.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new M(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new M(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=EC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new M(R.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new M(R.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new M(R.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fE({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new M(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new M(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new GO;switch(r.type){case"firstParty":return new YO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new M(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=uE.get(n);r&&(z("ComponentProvider","Removing Datastore"),uE.delete(n),r.terminate())}(this),Promise.resolve()}}function IM(t,e,n,r={}){var s;const i=(t=ai(t,jf))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let o,c;if(typeof r.mockUserToken=="string")o=r.mockUserToken,c=Dt.MOCK_USER;else{o=Nk(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new M(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Dt(u)}t._authCredentials=new KO(new vI(o,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fa(this.firestore,e,this._query)}}class fn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fn(this.firestore,e,this._key)}}class Ys extends fa{constructor(e,n,r){super(e,n,Uv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fn(this.firestore,null,new W(e))}withConverter(e){return new Ys(this.firestore,e,this._path)}}function No(t,e,...n){if(t=lt(t),SC("collection","path",e),t instanceof jf){const r=Ce.fromString(e,...n);return hE(r),new Ys(t,null,r)}{if(!(t instanceof fn||t instanceof Ys))throw new M(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return hE(r),new Ys(t.firestore,null,r)}}function sx(t,e,...n){if(t=lt(t),arguments.length===1&&(e=xI.V()),SC("doc","path",e),t instanceof jf){const r=Ce.fromString(e,...n);return dE(r),new fn(t,null,new W(r))}{if(!(t instanceof fn||t instanceof Ys))throw new M(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return dE(r),new fn(t.firestore,t instanceof Ys?t.converter:null,new W(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(){this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new tC(this,"async_queue_retry"),this.tu=()=>{const n=fp();n&&z("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Uo.Lo()};const e=fp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.tu)}get isShuttingDown(){return this.Ha}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nu(),this.ru(e)}enterRestrictedMode(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;const n=fp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.tu)}}enqueue(e){if(this.nu(),this.Ha)return new Promise(()=>{});const n=new es;return this.ru(()=>this.Ha&&this.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ja.push(e),this.iu()))}async iu(){if(this.ja.length!==0){try{await this.ja[0](),this.ja.shift(),this.Uo.reset()}catch(e){if(!Hc(e))throw e;z("AsyncQueue","Operation failed with retryable error: "+e)}this.ja.length>0&&this.Uo.No(()=>this.iu())}}ru(e){const n=this.za.then(()=>(this.Za=!0,e().catch(r=>{this.Ya=r,this.Za=!1;const s=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(r);throw us("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Za=!1,r))));return this.za=n,n}enqueueAfterDelay(e,n,r){this.nu(),this.eu.indexOf(e)>-1&&(n=0);const s=ex.createAndSchedule(this,e,n,r,i=>this.su(i));return this.Ja.push(s),s}nu(){this.Ya&&Q()}verifyOperationInProgress(){}async ou(){let e;do e=this.za,await e;while(e!==this.za)}_u(e){for(const n of this.Ja)if(n.timerId===e)return!0;return!1}au(e){return this.ou().then(()=>{this.Ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ou()})}uu(e){this.eu.push(e)}su(e){const n=this.Ja.indexOf(e);this.Ja.splice(n,1)}}class Yc extends jf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new CM}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||bC(this),this._firestoreClient.terminate()}}function AM(t,e){const n=typeof t=="object"?t:sv(),r=typeof t=="string"?t:e||"(default)",s=tf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Ak("firestore");i&&IM(s,...i)}return s}function ix(t){return t._firestoreClient||bC(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function bC(t){var e,n,r;const s=t._freezeSettings(),i=function(o,c,u,d){return new cF(o,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,EC(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new xM(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this._byteString=e}static fromBase64String(e){try{return new po(Wt.fromBase64String(e))}catch(n){throw new M(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new po(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new M(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new M(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new M(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=/^__.*__$/;class PM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new da(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gc(e,this.data,n,this.fieldTransforms)}}function TC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}class lx{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.cu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get lu(){return this.settings.lu}hu(e){return new lx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.Tu(e),s}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.hu({path:r,Iu:!1});return s.cu(),s}du(e){return this.hu({path:void 0,Iu:!0})}Au(e){return ch(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}cu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}Tu(e){if(e.length===0)throw this.Au("Document fields must not be empty");if(TC(this.lu)&&RM.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}class NM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Af(e)}mu(e,n,r,s=!1){return new lx({lu:e,methodName:n,Vu:r,path:Lt.emptyPath(),Iu:!1,Ru:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function IC(t){const e=t._freezeSettings(),n=Af(t._databaseId);return new NM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jM(t,e,n,r,s,i={}){const a=t.mu(i.merge||i.mergeFields?2:0,e,n,s);RC("Data must be an object, but it was:",a,r);const o=CC(r,a);let c,u;if(i.merge)c=new sr(a.fieldMask),u=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const m=OM(e,h,n);if(!a.contains(m))throw new M(R.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);LM(d,m)||d.push(m)}c=new sr(d),u=a.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=a.fieldTransforms;return new PM(new Mn(o),c,u)}function DM(t,e,n,r=!1){return cx(n,t.mu(r?4:3,e))}function cx(t,e){if(AC(t=lt(t)))return RC("Unsupported field value:",e,t),CC(t,e);if(t instanceof kC)return function(r,s){if(!TC(s.lu))throw s.Au(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Au(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Iu&&e.lu!==4)throw e.Au("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const o of r){let c=cx(o,s.du(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return RF(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ot.fromDate(r);return{timestampValue:oh(s.serializer,i)}}if(r instanceof ot){const i=new ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:oh(s.serializer,i)}}if(r instanceof ox)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof po)return{bytesValue:GI(s.serializer,r._byteString)};if(r instanceof fn){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Au(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Gv(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Au(`Unsupported field value: ${Nf(r)}`)}(t,e)}function CC(t,e){const n={};return wI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ao(t,(r,s)=>{const i=cx(s,e.Pu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function AC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ot||t instanceof ox||t instanceof po||t instanceof fn||t instanceof kC)}function RC(t,e,n){if(!AC(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Nf(n);throw r==="an object"?e.Au(t+" a custom object"):e.Au(t+" "+r)}}function OM(t,e,n){if((e=lt(e))instanceof ax)return e._internalPath;if(typeof e=="string")return PC(t,e);throw ch("Field path arguments must be of type string or ",t,!1,void 0,n)}const FM=new RegExp("[~\\*/\\[\\]]");function PC(t,e,n){if(e.search(FM)>=0)throw ch(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ax(...e.split("."))._internalPath}catch{throw ch(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ch(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new M(R.INVALID_ARGUMENT,o+t+c)}function LM(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ux("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class MM extends NC{data(){return super.data()}}function ux(t,e){return typeof e=="string"?PC(t,e):e instanceof ax?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new M(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dx{}class jC extends dx{}function ts(t,e,...n){let r=[];e instanceof dx&&r.push(e),r=r.concat(n),function(i){const a=i.filter(c=>c instanceof hx).length,o=i.filter(c=>c instanceof Df).length;if(a>1||a>0&&o>0)throw new M(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Df extends jC{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Df(e,n,r)}_apply(e){const n=this._parse(e);return DC(e._query,n),new fa(e.firestore,e.converter,g0(e._query,n))}_parse(e){const n=IC(e.firestore);return function(i,a,o,c,u,d,h){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new M(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){pE(h,d);const p=[];for(const g of h)p.push(mE(c,i,g));m={arrayValue:{values:p}}}else m=mE(c,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||pE(h,d),m=DM(o,a,h,d==="in"||d==="not-in");return et.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Zt(t,e,n){const r=e,s=ux("where",t);return Df._create(s,r,n)}class hx extends dx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hx(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ur.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const o=i.getFlattenedFilters();for(const c of o)DC(a,c),a=g0(a,c)}(e._query,n),new fa(e.firestore,e.converter,g0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fx extends jC{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new fx(e,n,r)}_apply(e){return new fa(e.firestore,e.converter,sh(e._query,this._limit,this._limitType))}}function ld(t){return TM("limit",t),fx._create("limit",t,"F")}function mE(t,e,n){if(typeof(n=lt(n))=="string"){if(n==="")throw new M(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RI(e)&&n.indexOf("/")!==-1)throw new M(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ce.fromString(n));if(!W.isDocumentKey(r))throw new M(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return M_(t,new W(r))}if(n instanceof fn)return M_(t,n._key);throw new M(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nf(n)}.`)}function pE(t,e){if(!Array.isArray(t)||t.length===0)throw new M(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function DC(t,e){if(e.isInequality()){const r=Vv(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new M(R.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const i=AI(t);i!==null&&zM(t,s,i)}const n=function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new M(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new M(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function zM(t,e,n){if(!n.isEqual(e))throw new M(R.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class BM{convertValue(e,n="none"){switch(Xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ao(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new ox(Je(e.latitude),Je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Mv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(lc(e));default:return null}}convertTimestamp(e){const n=si(e);return new ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ce.fromString(e);Re(JI(r));const s=new cc(r.get(1),r.get(3)),i=new W(r.popFirst(5));return s.isEqual(n)||us(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class OC extends NC{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new cd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ux("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class cd extends OC{data(e={}){return super.data(e)}}class VM{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new dl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new cd(this._firestore,this._userDataWriter,r.key,r,new dl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new M(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const c=new cd(s._firestore,s._userDataWriter,o.doc.key,o.doc,new dl(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const c=new cd(s._firestore,s._userDataWriter,o.doc.key,o.doc,new dl(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),d=a.indexOf(o.doc.key)),{type:WM(o.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function WM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HM(t){t=ai(t,fn);const e=ai(t.firestore,Yc);return SM(ix(e),t._key).then(n=>KM(e,t,n))}class FC extends BM{constructor(e){super(),this.firestore=e}convertBytes(e){return new po(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new fn(this.firestore,null,n)}}function jo(t){t=ai(t,fa);const e=ai(t.firestore,Yc),n=ix(e),r=new FC(e);return $M(t._query),bM(n,t._query).then(s=>new VM(e,r,t,s))}function qM(t,e,n){t=ai(t,fn);const r=ai(t.firestore,Yc),s=UM(t.converter,e,n);return LC(r,[jM(IC(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Dr.none())])}function GM(t){return LC(ai(t.firestore,Yc),[new Wv(t._key,Dr.none())])}function LC(t,e){return function(r,s){const i=new es;return r.asyncQueue.enqueueAndForget(async()=>cM(await EM(r),s,i)),i.promise}(ix(t),e)}function KM(t,e,n){const r=n.docs.get(e._key),s=new FC(t);return new OC(t,s,e._key,r,new dl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Co=s})(ca),qi(new ni("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),o=new Yc(new QO(r.getProvider("auth-internal")),new ZO(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new M(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cc(u.options.projectId,d)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Pr(j_,"4.1.2",e),Pr(j_,"4.1.2","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="firebasestorage.googleapis.com",$C="storageBucket",QM=2*60*1e3,XM=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve extends Br{constructor(e,n,r=0){super(pp(e),`Firebase Storage: ${n} (${pp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ve.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return pp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ue;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ue||(Ue={}));function pp(t){return"storage/"+t}function mx(){const t="An unknown error occurred, please check the error payload for server response.";return new Ve(Ue.UNKNOWN,t)}function YM(t){return new Ve(Ue.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function JM(t){return new Ve(Ue.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ZM(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ve(Ue.UNAUTHENTICATED,t)}function e$(){return new Ve(Ue.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function t$(t){return new Ve(Ue.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function n$(){return new Ve(Ue.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function r$(){return new Ve(Ue.CANCELED,"User canceled the upload/download.")}function s$(t){return new Ve(Ue.INVALID_URL,"Invalid URL '"+t+"'.")}function i$(t){return new Ve(Ue.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function a$(){return new Ve(Ue.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+$C+"' property when initializing the app?")}function o$(){return new Ve(Ue.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function l$(){return new Ve(Ue.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function c$(t){return new Ve(Ue.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function b0(t){return new Ve(Ue.INVALID_ARGUMENT,t)}function zC(){return new Ve(Ue.APP_DELETED,"The Firebase app was deleted.")}function u$(t){return new Ve(Ue.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Rl(t,e){return new Ve(Ue.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Qo(t){throw new Ve(Ue.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=En.makeFromUrl(e,n)}catch{return new En(e,"")}if(r.path==="")return r;throw i$(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+s+a,"i"),c={bucket:1,path:3};function u(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${d}/b/${s}/o${m}`,"i"),g={bucket:1,path:3},x=n===MC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",v=new RegExp(`^https?://${x}/${s}/${_}`,"i"),w=[{regex:o,indices:c,postModify:i},{regex:p,indices:g,postModify:u},{regex:v,indices:{bucket:1,path:2},postModify:u}];for(let E=0;E<w.length;E++){const S=w[E],b=S.regex.exec(e);if(b){const k=b[S.indices.bucket];let T=b[S.indices.path];T||(T=""),r=new En(k,T),S.postModify(r);break}}if(r==null)throw s$(e);return r}}class d${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h$(t,e,n){let r=1,s=null,i=null,a=!1,o=0;function c(){return o===2}let u=!1;function d(..._){u||(u=!0,e.apply(null,_))}function h(_){s=setTimeout(()=>{s=null,t(p,c())},_)}function m(){i&&clearTimeout(i)}function p(_,...v){if(u){m();return}if(_){m(),d.call(null,_,...v);return}if(c()||a){m(),d.call(null,_,...v);return}r<64&&(r*=2);let w;o===1?(o=2,w=0):w=(r+Math.random())*1e3,h(w)}let g=!1;function x(_){g||(g=!0,m(),!u&&(s!==null?(_||(o=2),clearTimeout(s),h(0)):_||(o=1)))}return h(0),i=setTimeout(()=>{a=!0,x(!0)},n),x}function f$(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m$(t){return t!==void 0}function p$(t){return typeof t=="object"&&!Array.isArray(t)}function px(t){return typeof t=="string"||t instanceof String}function gE(t){return gx()&&t instanceof Blob}function gx(){return typeof Blob<"u"&&!w3()}function yE(t,e,n,r){if(r<e)throw b0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw b0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function BC(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $i;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})($i||($i={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g$(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y${constructor(e,n,r,s,i,a,o,c,u,d,h,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,g)=>{this.resolve_=p,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Pu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=o=>{const c=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const o=i.getErrorCode()===$i.NO_ERROR,c=i.getStatus();if(!o||g$(c,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===$i.ABORT;r(!1,new Pu(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new Pu(u,i))})},n=(r,s)=>{const i=this.resolve_,a=this.reject_,o=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(o,o.getResponse());m$(c)?i(c):i()}catch(c){a(c)}else if(o!==null){const c=mx();c.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,c)):a(c)}else if(s.canceled){const c=this.appDelete_?zC():r$();a(c)}else{const c=n$();a(c)}};this.canceled_?n(!1,new Pu(!1,null,!0)):this.backoffId_=h$(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&f$(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Pu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function v$(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function x$(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function w$(t,e){e&&(t["X-Firebase-GMPID"]=e)}function _$(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function E$(t,e,n,r,s,i,a=!0){const o=BC(t.urlParams),c=t.url+o,u=Object.assign({},t.headers);return w$(u,e),v$(u,n),x$(u,i),_$(u,r),new y$(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S$(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function b$(...t){const e=S$();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(gx())return new Blob(t);throw new Ve(Ue.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function k$(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T$(t){if(typeof atob>"u")throw c$("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class gp{constructor(e,n){this.data=e,this.contentType=n||null}}function I$(t,e){switch(t){case Tr.RAW:return new gp(UC(e));case Tr.BASE64:case Tr.BASE64URL:return new gp(VC(t,e));case Tr.DATA_URL:return new gp(A$(e),R$(e))}throw mx()}function UC(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,a=t.charCodeAt(++n);r=65536|(i&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function C$(t){let e;try{e=decodeURIComponent(t)}catch{throw Rl(Tr.DATA_URL,"Malformed data URL.")}return UC(e)}function VC(t,e){switch(t){case Tr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Rl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Tr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Rl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=T$(e)}catch(s){throw s.message.includes("polyfill")?s:Rl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class WC{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Rl(Tr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=P$(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function A$(t){const e=new WC(t);return e.base64?VC(Tr.BASE64,e.rest):C$(e.rest)}function R$(t){return new WC(t).contentType}function P$(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n){let r=0,s="";gE(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(gE(this.data_)){const r=this.data_,s=k$(r,e,n);return s===null?null:new js(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new js(r,!0)}}static getBlob(...e){if(gx()){const n=e.map(r=>r instanceof js?r.data_:r);return new js(b$.apply(null,n))}else{const n=e.map(a=>px(a)?I$(Tr.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(a=>{for(let o=0;o<a.length;o++)s[i++]=a[o]}),new js(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(t){let e;try{e=JSON.parse(t)}catch{return null}return p$(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N$(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function j$(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function qC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D$(t,e){return e}class qt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||D$}}let Nu=null;function O$(t){return!px(t)||t.length<2?t:qC(t)}function GC(){if(Nu)return Nu;const t=[];t.push(new qt("bucket")),t.push(new qt("generation")),t.push(new qt("metageneration")),t.push(new qt("name","fullPath",!0));function e(i,a){return O$(a)}const n=new qt("name");n.xform=e,t.push(n);function r(i,a){return a!==void 0?Number(a):a}const s=new qt("size");return s.xform=r,t.push(s),t.push(new qt("timeCreated")),t.push(new qt("updated")),t.push(new qt("md5Hash",null,!0)),t.push(new qt("cacheControl",null,!0)),t.push(new qt("contentDisposition",null,!0)),t.push(new qt("contentEncoding",null,!0)),t.push(new qt("contentLanguage",null,!0)),t.push(new qt("contentType",null,!0)),t.push(new qt("metadata","customMetadata",!0)),Nu=t,Nu}function F$(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new En(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function L$(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const a=n[i];r[a.local]=a.xform(r,e[a.server])}return F$(r,t),r}function KC(t,e,n){const r=HC(e);return r===null?null:L$(t,r,n)}function M$(t,e,n,r){const s=HC(e);if(s===null||!px(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(u=>{const d=t.bucket,h=t.fullPath,m="/b/"+a(d)+"/o/"+a(h),p=Of(m,n,r),g=BC({alt:"media",token:u});return p+g})[0]}function $$(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class yx{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(t){if(!t)throw mx()}function z$(t,e){function n(r,s){const i=KC(t,s,e);return QC(i!==null),i}return n}function B$(t,e){function n(r,s){const i=KC(t,s,e);return QC(i!==null),M$(i,s,t.host,t._protocol)}return n}function XC(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=e$():s=ZM():n.getStatus()===402?s=JM(t.bucket):n.getStatus()===403?s=t$(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function YC(t){const e=XC(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=YM(t.path)),i.serverResponse=s.serverResponse,i}return n}function U$(t,e,n){const r=e.fullServerUrl(),s=Of(r,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,o=new yx(s,i,B$(t,n),a);return o.errorHandler=YC(e),o}function V$(t,e){const n=e.fullServerUrl(),r=Of(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function a(c,u){}const o=new yx(r,s,a,i);return o.successCodes=[200,204],o.errorHandler=YC(e),o}function W$(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function H$(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=W$(null,e)),r}function q$(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const c=o();a["Content-Type"]="multipart/related; boundary="+c;const u=H$(e,r,s),d=$$(u,n),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+c+"--",p=js.getBlob(h,r,m);if(p===null)throw o$();const g={name:u.fullPath},x=Of(i,t.host,t._protocol),_="POST",v=t.maxUploadRetryTime,y=new yx(x,_,z$(t,n),v);return y.urlParams=g,y.headers=a,y.body=p.uploadData(),y.errorHandler=XC(e),y}class G${constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$i.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$i.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$i.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Qo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Qo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Qo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Qo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Qo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class K$ extends G${initXhr(){this.xhr_.responseType="text"}}function vx(){return new K$}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n){this._service=e,n instanceof En?this._location=n:this._location=En.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Yi(e,n)}get root(){const e=new En(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qC(this._location.path)}get storage(){return this._service}get parent(){const e=N$(this._location.path);if(e===null)return null;const n=new En(this._location.bucket,e);return new Yi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw u$(e)}}function Q$(t,e,n){t._throwIfRoot("uploadBytes");const r=q$(t.storage,t._location,GC(),new js(e,!0),n);return t.storage.makeRequestWithTokens(r,vx).then(s=>({metadata:s,ref:t}))}function X$(t){t._throwIfRoot("getDownloadURL");const e=U$(t.storage,t._location,GC());return t.storage.makeRequestWithTokens(e,vx).then(n=>{if(n===null)throw l$();return n})}function Y$(t){t._throwIfRoot("deleteObject");const e=V$(t.storage,t._location);return t.storage.makeRequestWithTokens(e,vx)}function J$(t,e){const n=j$(t._location.path,e),r=new En(t._location.bucket,n);return new Yi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z$(t){return/^[A-Za-z]+:\/\//.test(t)}function e9(t,e){return new Yi(t,e)}function JC(t,e){if(t instanceof xx){const n=t;if(n._bucket==null)throw a$();const r=new Yi(n,n._bucket);return e!=null?JC(r,e):r}else return e!==void 0?J$(t,e):t}function t9(t,e){if(e&&Z$(e)){if(t instanceof xx)return e9(t,e);throw b0("To use ref(service, url), the first argument must be a Storage instance.")}else return JC(t,e)}function vE(t,e){const n=e==null?void 0:e[$C];return n==null?null:En.makeFromBucketSpec(n,t)}function n9(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Nk(s,t.app.options.projectId))}class xx{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=MC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=QM,this._maxUploadRetryTime=XM,this._requests=new Set,s!=null?this._bucket=En.makeFromBucketSpec(s,this._host):this._bucket=vE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=En.makeFromBucketSpec(this._url,e):this._bucket=vE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){yE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){yE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new d$(zC());{const a=E$(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const xE="@firebase/storage",wE="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="storage";function eA(t,e,n){return t=lt(t),Q$(t,e,n)}function tA(t){return t=lt(t),X$(t)}function r9(t){return t=lt(t),Y$(t)}function wx(t,e){return t=lt(t),t9(t,e)}function s9(t=sv(),e){t=lt(t);const r=tf(t,ZC).getImmediate({identifier:e}),s=Ak("storage");return s&&i9(r,...s),r}function i9(t,e,n,r={}){n9(t,e,n,r)}function a9(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new xx(n,r,s,e,ca)}function o9(){qi(new ni(ZC,a9,"PUBLIC").setMultipleInstances(!0)),Pr(xE,wE,""),Pr(xE,wE,"esm2017")}o9();const _x=Ok({apiKey:"AIzaSyBPNpckpYiu009eSzHz_1YMlwHLtScgVjE",appId:"1:938280289868:web:1b426fc2dba5d03dde96e9",projectId:"zingmp3-clone-61799",storageBucket:"zingmp3-clone-61799.appspot.com",authDomain:"zingmp3-clone-61799.firebaseapp.com",messagingSenderId:"938280289868"}),ys=AM(_x),Ji=MD(_x);new Er;const Ex=s9(_x);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function nA(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(h){a(h)}}function c(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,c)}u((r=r.apply(t,e||[])).next())})}function rA(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(u){return function(d){return c([u,d])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ma=function(){return Ma=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ma.apply(this,arguments)},sA=function(t){return{loading:t==null,value:t}},l9=function(){return function(t,e){switch(e.type){case"error":return Ma(Ma({},t),{error:e.error,loading:!1,value:void 0});case"reset":return sA(e.defaultValue);case"value":return Ma(Ma({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},c9=function(t){var e=t?t():void 0,n=f.useReducer(l9(),sA(e)),r=n[0],s=n[1],i=f.useCallback(function(){var c=t?t():void 0;s({type:"reset",defaultValue:c})},[t]),a=f.useCallback(function(c){s({type:"error",error:c})},[]),o=f.useCallback(function(c){s({type:"value",value:c})},[]);return f.useMemo(function(){return{error:r.error,loading:r.loading,reset:i,setError:a,setValue:o,value:r.value}},[r.error,r.loading,i,a,o,r.value])},Ff=function(t,e){var n=c9(function(){return t.currentUser}),r=n.error,s=n.loading,i=n.setError,a=n.setValue,o=n.value;return f.useEffect(function(){var c=T6(t,function(u){return nA(void 0,void 0,void 0,function(){var d;return rA(this,function(h){switch(h.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,e.onUserChanged(u)];case 2:return h.sent(),[3,4];case 3:return d=h.sent(),i(d),[3,4];case 4:return a(u),[2]}})})},i);return function(){c()}},[t]),[o,s,r]},u9=function(t){var e=f.useCallback(function(n,r){var s=new Er;return n&&n.forEach(function(i){return s.addScope(i)}),r&&s.setCustomParameters(r),s},[]);return d9(t,e)},d9=function(t,e){var n=f.useState(),r=n[0],s=n[1],i=f.useState(),a=i[0],o=i[1],c=f.useState(!1),u=c[0],d=c[1],h=f.useCallback(function(m,p){return nA(void 0,void 0,void 0,function(){var g,x,_;return rA(this,function(v){switch(v.label){case 0:d(!0),s(void 0),v.label=1;case 1:return v.trys.push([1,3,4,5]),g=e(m,p),[4,G6(t,g)];case 2:return x=v.sent(),o(x),[2,x];case 3:return _=v.sent(),s(_),[3,5];case 4:return d(!1),[7];case 5:return[2]}})})},[t,e]);return[h,a,u,r]};const iA={user:null,loading:!0},h9=(t,e)=>{switch(e.type){case 0:return{user:e.payload.user,loading:!1};case 1:return{user:null,loading:!0};default:return{user:t.user,loading:t.loading}}},f9={state:{user:iA.user,loading:!0},setUser:()=>{}},aA=f.createContext(f9),m9=()=>{const[t,e]=f.useReducer(h9,iA),n=f.useCallback(r=>{switch(r.type){case"set-user":return console.log("set user"),e({type:0,payload:{user:r.user}});case"reset":return console.log("reset user"),e({type:1,payload:{user:null}})}},[]);return{state:{loading:t.loading,user:t.user},setUser:n}},p9=({children:t})=>{const{state:{loading:e,user:n},setUser:r}=m9();return l.jsx(aA.Provider,{value:{state:{loading:e,user:n},setUser:r},children:t})},qn=()=>{const{state:{loading:t,user:e},setUser:n}=f.useContext(aA);return{loading:t,user:e,setUser:n}},Lf=()=>{const[t]=u9(Ji);return{logOut:async()=>{await sT(Ji),location.reload()},logIn:()=>{t()}}};function g9(){const[t,e]=f.useState({songs:[],playlists:[]}),[n,r]=f.useState([]),[s,i]=f.useState([]),a=f.useRef(!1);return{songs:n,ranGetSong:a,setSongs:r,playlists:s,setPlaylists:i,sysSongPlaylist:t,setSysSongPlaylist:e,updateSong:c=>{const u=[...n],d=u.findIndex(h=>h.id===c.id);if(d!==-1){const h={...u[d]};Object.assign(h,c.song),u[d]=h,r(u)}}}}const oA=f.createContext(null);function y9({children:t}){return l.jsx(oA.Provider,{value:g9(),children:t})}const At=()=>{const t=f.useContext(oA);if(!t)throw new Error("SongContext not provided");return t},uh=[{name:"Red",id:"red",type:"dark",bottom_player_bg:"bg-[#3b1113]",side_bar_bg:"bg-[#391b1c]",content_text:"text-[#ca4954]",content_hover_text:"hover:text-[#ca4954]",content_border:"border-[#ca4954]",content_hover_border:"hover:border-[#ca4954]",content_bg:"bg-[#ca4954] text-[#fff]",modal_bg:"bg-[#4f171c]",content_code:"#ca4954",content_hover_bg:"hover:!bg-[#ca4954] hover:text-[#fff] ",container:"bg-[#2e0f10]",container_code:"#2e0f10",text_color:""},{name:"Black",id:"black",type:"dark",bottom_player_bg:"bg-[#181818]",side_bar_bg:"bg-[#242424]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"bg-[#198585]  text-[#fff]",modal_bg:"bg-[#333]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff] ",container:"bg-[#1e1e1e]",container_code:"#1e1e1e",text_color:""},{name:"Deep blue",id:"deep_blue",type:"dark",bottom_player_bg:"bg-[#111f3b]",side_bar_bg:"bg-[#1b2639]",content_text:"text-[#0c9e85]",content_hover_text:"hover:text-[#0c9e85]",content_border:"border-[#0c9e85]",content_hover_border:"hover:border-[#0c9e85]",content_bg:"bg-[#0c9e85]  text-[#fff]",modal_bg:"bg-[#05473c]",content_code:"#0c9e85",content_hover_bg:"hover:!bg-[#0c9e85] hover:text-[#fff] ",container:"bg-[#0f1a2e]",container_code:"#0f1a2e",text_color:""},{name:"White",id:"white",type:"light",bottom_player_bg:"bg-[#fff]",side_bar_bg:"bg-[#f2f2f2]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"bg-[#198585] text-[#fff]",modal_bg:"bg-[#105656]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff]",container:"bg-[#fff]",container_code:"#fff",text_color:""},{name:"Light green",id:"green_light",type:"light",bottom_player_bg:"bg-[#c0d8d8]",side_bar_bg:"bg-[#dde5e5]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"bg-[#198585] text-[#fff]",modal_bg:"bg-[#105656]",content_code:"#198585",content_hover_bg:"hover:!bg-[#198585] hover:text-[#fff]",container:"bg-[#ced9d9]",container_code:"#ced9d9",text_color:""},{name:"Brown",id:"gray",type:"light",bottom_player_bg:"bg-[#dedad1]",side_bar_bg:"bg-[#d9d7d4]",content_text:"text-[#644646]",content_hover_text:"hover:text-[#644646]",content_border:"border-[#644646]",content_hover_border:"hover:border-[#644646]",content_bg:"bg-[#644646]  text-[#fff]",modal_bg:"bg-[#3c2a2a]",content_code:"#644646",content_hover_bg:"hover:!bg-[#644646] hover:text-[#fff]",container:"bg-[#e5e3df]",container_code:"#e5e3df",text_color:""}],lA=[{name:"Tet",id:"tet",type:"light",bottom_player_bg:"bg-[#fdf6e3]",side_bar_bg:"bg-[#fdf6e3]",content_text:"text-[#644646]",content_hover_text:"hover:text-[#644646]",content_border:"border-[#644646]",content_hover_border:"hover:border-[#644646]",content_bg:"bg-[#644646]  text-[#fff]",modal_bg:"bg-[#3c2a2a]",content_code:"#644646",content_hover_bg:"hover:!bg-[#644646] hover:text-[#fff]",container:"bg-[#f7f0de]",container_code:"#fdf6e3",text_color:"",image:"tet_theme_image.png"}];let ma=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");function cA(t,e){return function(){return t.apply(e,arguments)}}const{toString:v9}=Object.prototype,{getPrototypeOf:Sx}=Object,Mf=(t=>e=>{const n=v9.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ur=t=>(t=t.toLowerCase(),e=>Mf(e)===t),$f=t=>e=>typeof e===t,{isArray:Do}=Array,fc=$f("undefined");function x9(t){return t!==null&&!fc(t)&&t.constructor!==null&&!fc(t.constructor)&&Un(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const uA=Ur("ArrayBuffer");function w9(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&uA(t.buffer),e}const _9=$f("string"),Un=$f("function"),dA=$f("number"),zf=t=>t!==null&&typeof t=="object",E9=t=>t===!0||t===!1,ud=t=>{if(Mf(t)!=="object")return!1;const e=Sx(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},S9=Ur("Date"),b9=Ur("File"),k9=Ur("Blob"),T9=Ur("FileList"),I9=t=>zf(t)&&Un(t.pipe),C9=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Un(t.append)&&((e=Mf(t))==="formdata"||e==="object"&&Un(t.toString)&&t.toString()==="[object FormData]"))},A9=Ur("URLSearchParams"),R9=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Jc(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Do(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),a=i.length;let o;for(r=0;r<a;r++)o=i[r],e.call(null,t[o],o,t)}}function hA(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const fA=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),mA=t=>!fc(t)&&t!==fA;function k0(){const{caseless:t}=mA(this)&&this||{},e={},n=(r,s)=>{const i=t&&hA(e,s)||s;ud(e[i])&&ud(r)?e[i]=k0(e[i],r):ud(r)?e[i]=k0({},r):Do(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Jc(arguments[r],n);return e}const P9=(t,e,n,{allOwnKeys:r}={})=>(Jc(e,(s,i)=>{n&&Un(s)?t[i]=cA(s,n):t[i]=s},{allOwnKeys:r}),t),N9=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),j9=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},D9=(t,e,n,r)=>{let s,i,a;const o={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)a=s[i],(!r||r(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=n!==!1&&Sx(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},O9=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},F9=t=>{if(!t)return null;if(Do(t))return t;let e=t.length;if(!dA(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},L9=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Sx(Uint8Array)),M9=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},$9=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},z9=Ur("HTMLFormElement"),B9=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),_E=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),U9=Ur("RegExp"),pA=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Jc(n,(s,i)=>{let a;(a=e(s,i,t))!==!1&&(r[i]=a||s)}),Object.defineProperties(t,r)},V9=t=>{pA(t,(e,n)=>{if(Un(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Un(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},W9=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Do(t)?r(t):r(String(t).split(e)),n},H9=()=>{},q9=(t,e)=>(t=+t,Number.isFinite(t)?t:e),yp="abcdefghijklmnopqrstuvwxyz",EE="0123456789",gA={DIGIT:EE,ALPHA:yp,ALPHA_DIGIT:yp+yp.toUpperCase()+EE},G9=(t=16,e=gA.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function K9(t){return!!(t&&Un(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Q9=t=>{const e=new Array(10),n=(r,s)=>{if(zf(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Do(r)?[]:{};return Jc(r,(a,o)=>{const c=n(a,s+1);!fc(c)&&(i[o]=c)}),e[s]=void 0,i}}return r};return n(t,0)},X9=Ur("AsyncFunction"),Y9=t=>t&&(zf(t)||Un(t))&&Un(t.then)&&Un(t.catch),A={isArray:Do,isArrayBuffer:uA,isBuffer:x9,isFormData:C9,isArrayBufferView:w9,isString:_9,isNumber:dA,isBoolean:E9,isObject:zf,isPlainObject:ud,isUndefined:fc,isDate:S9,isFile:b9,isBlob:k9,isRegExp:U9,isFunction:Un,isStream:I9,isURLSearchParams:A9,isTypedArray:L9,isFileList:T9,forEach:Jc,merge:k0,extend:P9,trim:R9,stripBOM:N9,inherits:j9,toFlatObject:D9,kindOf:Mf,kindOfTest:Ur,endsWith:O9,toArray:F9,forEachEntry:M9,matchAll:$9,isHTMLForm:z9,hasOwnProperty:_E,hasOwnProp:_E,reduceDescriptors:pA,freezeMethods:V9,toObjectSet:W9,toCamelCase:B9,noop:H9,toFiniteNumber:q9,findKey:hA,global:fA,isContextDefined:mA,ALPHABET:gA,generateString:G9,isSpecCompliantForm:K9,toJSONObject:Q9,isAsyncFn:X9,isThenable:Y9};function fe(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}A.inherits(fe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:A.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const yA=fe.prototype,vA={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{vA[t]={value:t}});Object.defineProperties(fe,vA);Object.defineProperty(yA,"isAxiosError",{value:!0});fe.from=(t,e,n,r,s,i)=>{const a=Object.create(yA);return A.toFlatObject(t,a,function(c){return c!==Error.prototype},o=>o!=="isAxiosError"),fe.call(a,t.message,e,n,r,s),a.cause=t,a.name=t.name,i&&Object.assign(a,i),a};const J9=null;function T0(t){return A.isPlainObject(t)||A.isArray(t)}function xA(t){return A.endsWith(t,"[]")?t.slice(0,-2):t}function SE(t,e,n){return t?t.concat(e).map(function(s,i){return s=xA(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function Z9(t){return A.isArray(t)&&!t.some(T0)}const ez=A.toFlatObject(A,{},null,function(e){return/^is[A-Z]/.test(e)});function Bf(t,e,n){if(!A.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=A.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,_){return!A.isUndefined(_[x])});const r=n.metaTokens,s=n.visitor||d,i=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&A.isSpecCompliantForm(e);if(!A.isFunction(s))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(A.isDate(g))return g.toISOString();if(!c&&A.isBlob(g))throw new fe("Blob is not supported. Use a Buffer instead.");return A.isArrayBuffer(g)||A.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function d(g,x,_){let v=g;if(g&&!_&&typeof g=="object"){if(A.endsWith(x,"{}"))x=r?x:x.slice(0,-2),g=JSON.stringify(g);else if(A.isArray(g)&&Z9(g)||(A.isFileList(g)||A.endsWith(x,"[]"))&&(v=A.toArray(g)))return x=xA(x),v.forEach(function(w,E){!(A.isUndefined(w)||w===null)&&e.append(a===!0?SE([x],E,i):a===null?x:x+"[]",u(w))}),!1}return T0(g)?!0:(e.append(SE(_,x,i),u(g)),!1)}const h=[],m=Object.assign(ez,{defaultVisitor:d,convertValue:u,isVisitable:T0});function p(g,x){if(!A.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+x.join("."));h.push(g),A.forEach(g,function(v,y){(!(A.isUndefined(v)||v===null)&&s.call(e,v,A.isString(y)?y.trim():y,x,m))===!0&&p(v,x?x.concat(y):[y])}),h.pop()}}if(!A.isObject(t))throw new TypeError("data must be an object");return p(t),e}function bE(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function bx(t,e){this._pairs=[],t&&Bf(t,this,e)}const wA=bx.prototype;wA.append=function(e,n){this._pairs.push([e,n])};wA.toString=function(e){const n=e?function(r){return e.call(this,r,bE)}:bE;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function tz(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function _A(t,e,n){if(!e)return t;const r=n&&n.encode||tz,s=n&&n.serialize;let i;if(s?i=s(e,n):i=A.isURLSearchParams(e)?e.toString():new bx(e,n).toString(r),i){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class nz{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){A.forEach(this.handlers,function(r){r!==null&&e(r)})}}const kE=nz,EA={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},rz=typeof URLSearchParams<"u"?URLSearchParams:bx,sz=typeof FormData<"u"?FormData:null,iz=typeof Blob<"u"?Blob:null,az=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),oz=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Ir={isBrowser:!0,classes:{URLSearchParams:rz,FormData:sz,Blob:iz},isStandardBrowserEnv:az,isStandardBrowserWebWorkerEnv:oz,protocols:["http","https","file","blob","url","data"]};function lz(t,e){return Bf(t,new Ir.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return Ir.isNode&&A.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function cz(t){return A.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function uz(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function SA(t){function e(n,r,s,i){let a=n[i++];const o=Number.isFinite(+a),c=i>=n.length;return a=!a&&A.isArray(s)?s.length:a,c?(A.hasOwnProp(s,a)?s[a]=[s[a],r]:s[a]=r,!o):((!s[a]||!A.isObject(s[a]))&&(s[a]=[]),e(n,r,s[a],i)&&A.isArray(s[a])&&(s[a]=uz(s[a])),!o)}if(A.isFormData(t)&&A.isFunction(t.entries)){const n={};return A.forEachEntry(t,(r,s)=>{e(cz(r),s,n,0)}),n}return null}function dz(t,e,n){if(A.isString(t))try{return(e||JSON.parse)(t),A.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const kx={transitional:EA,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=A.isObject(e);if(i&&A.isHTMLForm(e)&&(e=new FormData(e)),A.isFormData(e))return s&&s?JSON.stringify(SA(e)):e;if(A.isArrayBuffer(e)||A.isBuffer(e)||A.isStream(e)||A.isFile(e)||A.isBlob(e))return e;if(A.isArrayBufferView(e))return e.buffer;if(A.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return lz(e,this.formSerializer).toString();if((o=A.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Bf(o?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),dz(e)):e}],transformResponse:[function(e){const n=this.transitional||kx.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&A.isString(e)&&(r&&!this.responseType||s)){const a=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?fe.from(o,fe.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ir.classes.FormData,Blob:Ir.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};A.forEach(["delete","get","head","post","put","patch"],t=>{kx.headers[t]={}});const Tx=kx,hz=A.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),fz=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(a){s=a.indexOf(":"),n=a.substring(0,s).trim().toLowerCase(),r=a.substring(s+1).trim(),!(!n||e[n]&&hz[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},TE=Symbol("internals");function Xo(t){return t&&String(t).trim().toLowerCase()}function dd(t){return t===!1||t==null?t:A.isArray(t)?t.map(dd):String(t)}function mz(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const pz=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function vp(t,e,n,r,s){if(A.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!A.isString(e)){if(A.isString(r))return e.indexOf(r)!==-1;if(A.isRegExp(r))return r.test(e)}}function gz(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function yz(t,e){const n=A.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,a){return this[r].call(this,e,s,i,a)},configurable:!0})})}class Uf{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(o,c,u){const d=Xo(c);if(!d)throw new Error("header name must be a non-empty string");const h=A.findKey(s,d);(!h||s[h]===void 0||u===!0||u===void 0&&s[h]!==!1)&&(s[h||c]=dd(o))}const a=(o,c)=>A.forEach(o,(u,d)=>i(u,d,c));return A.isPlainObject(e)||e instanceof this.constructor?a(e,n):A.isString(e)&&(e=e.trim())&&!pz(e)?a(fz(e),n):e!=null&&i(n,e,r),this}get(e,n){if(e=Xo(e),e){const r=A.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return mz(s);if(A.isFunction(n))return n.call(this,s,r);if(A.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Xo(e),e){const r=A.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||vp(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(a){if(a=Xo(a),a){const o=A.findKey(r,a);o&&(!n||vp(r,r[o],o,n))&&(delete r[o],s=!0)}}return A.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||vp(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return A.forEach(this,(s,i)=>{const a=A.findKey(r,i);if(a){n[a]=dd(s),delete n[i];return}const o=e?gz(i):String(i).trim();o!==i&&delete n[i],n[o]=dd(s),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return A.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&A.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[TE]=this[TE]={accessors:{}}).accessors,s=this.prototype;function i(a){const o=Xo(a);r[o]||(yz(s,a),r[o]=!0)}return A.isArray(e)?e.forEach(i):i(e),this}}Uf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);A.reduceDescriptors(Uf.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});A.freezeMethods(Uf);const ns=Uf;function xp(t,e){const n=this||Tx,r=e||n,s=ns.from(r.headers);let i=r.data;return A.forEach(t,function(o){i=o.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function bA(t){return!!(t&&t.__CANCEL__)}function Zc(t,e,n){fe.call(this,t??"canceled",fe.ERR_CANCELED,e,n),this.name="CanceledError"}A.inherits(Zc,fe,{__CANCEL__:!0});function vz(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new fe("Request failed with status code "+n.status,[fe.ERR_BAD_REQUEST,fe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const xz=Ir.isStandardBrowserEnv?function(){return{write:function(n,r,s,i,a,o){const c=[];c.push(n+"="+encodeURIComponent(r)),A.isNumber(s)&&c.push("expires="+new Date(s).toGMTString()),A.isString(i)&&c.push("path="+i),A.isString(a)&&c.push("domain="+a),o===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function wz(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function _z(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function kA(t,e){return t&&!wz(e)?_z(t,e):e}const Ez=Ir.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let a=i;return e&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(a){const o=A.isString(a)?s(a):a;return o.protocol===r.protocol&&o.host===r.host}}():function(){return function(){return!0}}();function Sz(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function bz(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,a;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),d=r[i];a||(a=u),n[s]=c,r[s]=u;let h=i,m=0;for(;h!==s;)m+=n[h++],h=h%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),u-a<e)return;const p=d&&u-d;return p?Math.round(m*1e3/p):void 0}}function IE(t,e){let n=0;const r=bz(50,250);return s=>{const i=s.loaded,a=s.lengthComputable?s.total:void 0,o=i-n,c=r(o),u=i<=a;n=i;const d={loaded:i,total:a,progress:a?i/a:void 0,bytes:o,rate:c||void 0,estimated:c&&a&&u?(a-i)/c:void 0,event:s};d[e?"download":"upload"]=!0,t(d)}}const kz=typeof XMLHttpRequest<"u",Tz=kz&&function(t){return new Promise(function(n,r){let s=t.data;const i=ns.from(t.headers).normalize(),a=t.responseType;let o;function c(){t.cancelToken&&t.cancelToken.unsubscribe(o),t.signal&&t.signal.removeEventListener("abort",o)}let u;A.isFormData(s)&&(Ir.isStandardBrowserEnv||Ir.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?A.isString(u=i.getContentType())&&i.setContentType(u.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let d=new XMLHttpRequest;if(t.auth){const g=t.auth.username||"",x=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(g+":"+x))}const h=kA(t.baseURL,t.url);d.open(t.method.toUpperCase(),_A(h,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function m(){if(!d)return;const g=ns.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),_={data:!a||a==="text"||a==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:g,config:t,request:d};vz(function(y){n(y),c()},function(y){r(y),c()},_),d=null}if("onloadend"in d?d.onloadend=m:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(m)},d.onabort=function(){d&&(r(new fe("Request aborted",fe.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new fe("Network Error",fe.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let x=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const _=t.transitional||EA;t.timeoutErrorMessage&&(x=t.timeoutErrorMessage),r(new fe(x,_.clarifyTimeoutError?fe.ETIMEDOUT:fe.ECONNABORTED,t,d)),d=null},Ir.isStandardBrowserEnv){const g=Ez(h)&&t.xsrfCookieName&&xz.read(t.xsrfCookieName);g&&i.set(t.xsrfHeaderName,g)}s===void 0&&i.setContentType(null),"setRequestHeader"in d&&A.forEach(i.toJSON(),function(x,_){d.setRequestHeader(_,x)}),A.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),a&&a!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",IE(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",IE(t.onUploadProgress)),(t.cancelToken||t.signal)&&(o=g=>{d&&(r(!g||g.type?new Zc(null,t,d):g),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(o),t.signal&&(t.signal.aborted?o():t.signal.addEventListener("abort",o)));const p=Sz(h);if(p&&Ir.protocols.indexOf(p)===-1){r(new fe("Unsupported protocol "+p+":",fe.ERR_BAD_REQUEST,t));return}d.send(s||null)})},I0={http:J9,xhr:Tz};A.forEach(I0,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const CE=t=>`- ${t}`,Iz=t=>A.isFunction(t)||t===null||t===!1,TA={getAdapter:t=>{t=A.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let a;if(r=n,!Iz(n)&&(r=I0[(a=String(n)).toLowerCase()],r===void 0))throw new fe(`Unknown adapter '${a}'`);if(r)break;s[a||"#"+i]=r}if(!r){const i=Object.entries(s).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=e?i.length>1?`since :
`+i.map(CE).join(`
`):" "+CE(i[0]):"as no adapter specified";throw new fe("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:I0};function wp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Zc(null,t)}function AE(t){return wp(t),t.headers=ns.from(t.headers),t.data=xp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),TA.getAdapter(t.adapter||Tx.adapter)(t).then(function(r){return wp(t),r.data=xp.call(t,t.transformResponse,r),r.headers=ns.from(r.headers),r},function(r){return bA(r)||(wp(t),r&&r.response&&(r.response.data=xp.call(t,t.transformResponse,r.response),r.response.headers=ns.from(r.response.headers))),Promise.reject(r)})}const RE=t=>t instanceof ns?t.toJSON():t;function go(t,e){e=e||{};const n={};function r(u,d,h){return A.isPlainObject(u)&&A.isPlainObject(d)?A.merge.call({caseless:h},u,d):A.isPlainObject(d)?A.merge({},d):A.isArray(d)?d.slice():d}function s(u,d,h){if(A.isUndefined(d)){if(!A.isUndefined(u))return r(void 0,u,h)}else return r(u,d,h)}function i(u,d){if(!A.isUndefined(d))return r(void 0,d)}function a(u,d){if(A.isUndefined(d)){if(!A.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function o(u,d,h){if(h in e)return r(u,d);if(h in t)return r(void 0,u)}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(u,d)=>s(RE(u),RE(d),!0)};return A.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=c[d]||s,m=h(t[d],e[d],d);A.isUndefined(m)&&h!==o||(n[d]=m)}),n}const IA="1.6.0",Ix={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Ix[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const PE={};Ix.transitional=function(e,n,r){function s(i,a){return"[Axios v"+IA+"] Transitional option '"+i+"'"+a+(r?". "+r:"")}return(i,a,o)=>{if(e===!1)throw new fe(s(a," has been removed"+(n?" in "+n:"")),fe.ERR_DEPRECATED);return n&&!PE[a]&&(PE[a]=!0,console.warn(s(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,a,o):!0}};function Cz(t,e,n){if(typeof t!="object")throw new fe("options must be an object",fe.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],a=e[i];if(a){const o=t[i],c=o===void 0||a(o,i,t);if(c!==!0)throw new fe("option "+i+" must be "+c,fe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new fe("Unknown option "+i,fe.ERR_BAD_OPTION)}}const C0={assertOptions:Cz,validators:Ix},bs=C0.validators;class dh{constructor(e){this.defaults=e,this.interceptors={request:new kE,response:new kE}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=go(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&C0.assertOptions(r,{silentJSONParsing:bs.transitional(bs.boolean),forcedJSONParsing:bs.transitional(bs.boolean),clarifyTimeoutError:bs.transitional(bs.boolean)},!1),s!=null&&(A.isFunction(s)?n.paramsSerializer={serialize:s}:C0.assertOptions(s,{encode:bs.function,serialize:bs.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=i&&A.merge(i.common,i[n.method]);i&&A.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),n.headers=ns.concat(a,i);const o=[];let c=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(n)===!1||(c=c&&x.synchronous,o.unshift(x.fulfilled,x.rejected))});const u=[];this.interceptors.response.forEach(function(x){u.push(x.fulfilled,x.rejected)});let d,h=0,m;if(!c){const g=[AE.bind(this),void 0];for(g.unshift.apply(g,o),g.push.apply(g,u),m=g.length,d=Promise.resolve(n);h<m;)d=d.then(g[h++],g[h++]);return d}m=o.length;let p=n;for(h=0;h<m;){const g=o[h++],x=o[h++];try{p=g(p)}catch(_){x.call(this,_);break}}try{d=AE.call(this,p)}catch(g){return Promise.reject(g)}for(h=0,m=u.length;h<m;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=go(this.defaults,e);const n=kA(e.baseURL,e.url);return _A(n,e.params,e.paramsSerializer)}}A.forEach(["delete","get","head","options"],function(e){dh.prototype[e]=function(n,r){return this.request(go(r||{},{method:e,url:n,data:(r||{}).data}))}});A.forEach(["post","put","patch"],function(e){function n(r){return function(i,a,o){return this.request(go(o||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}dh.prototype[e]=n(),dh.prototype[e+"Form"]=n(!0)});const hd=dh;class Cx{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(o=>{r.subscribe(o),i=o}).then(s);return a.cancel=function(){r.unsubscribe(i)},a},e(function(i,a,o){r.reason||(r.reason=new Zc(i,a,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Cx(function(s){e=s}),cancel:e}}}const Az=Cx;function Rz(t){return function(n){return t.apply(null,n)}}function Pz(t){return A.isObject(t)&&t.isAxiosError===!0}const A0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(A0).forEach(([t,e])=>{A0[e]=t});const Nz=A0;function CA(t){const e=new hd(t),n=cA(hd.prototype.request,e);return A.extend(n,hd.prototype,e,{allOwnKeys:!0}),A.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return CA(go(t,s))},n}const nt=CA(Tx);nt.Axios=hd;nt.CanceledError=Zc;nt.CancelToken=Az;nt.isCancel=bA;nt.VERSION=IA;nt.toFormData=Bf;nt.AxiosError=fe;nt.Cancel=nt.CanceledError;nt.all=function(e){return Promise.all(e)};nt.spread=Rz;nt.isAxiosError=Pz;nt.mergeConfig=go;nt.AxiosHeaders=ns;nt.formToJSON=t=>SA(A.isHTMLForm(t)?new FormData(t):t);nt.getAdapter=TA.getAdapter;nt.HttpStatusCode=Nz;nt.default=nt;const jz=nt,AA=jz.create({baseURL:{}.VITE_ENDPOINT||"https://express-zingmp3-awx6.vercel.app"}),ir=()=>JSON.parse(localStorage.getItem("HD-MP3")||"{}"),It=(t,e)=>{const n=ir();return n[t]=e,localStorage.setItem("HD-MP3",JSON.stringify(n))},eu=t=>(n=>n.toLocaleLowerCase().replace(/||||||||||/g,"a").replace(/||||||||||/g,"e").replace(/||||/g,"i").replace(/||||||||||/g,"o").replace(/||||||||||/g,"u").replace(/||||/g,"y").replace(//g,"d"))(t).toLocaleLowerCase().replaceAll(/[\W_]/g,"")+"_"+ma(4),yo=t=>{const e=Math.floor(t/60),n=Math.round(t%60);return`${e}:${n.toString().padStart(2,"0")}`},RA=({...t})=>({...{name:"",singer:"",image_url:"",song_url:"",by:"",duration:0,lyric_id:"",image_file_path:"",song_file_path:"",id:"",song_in:"",blurhash_encode:"",size:0,queue_id:""},...t}),Ax=({...t})=>({...{id:"",name:"",song_ids:[],by:"",image_url:"",blurhash_encode:""},...t}),tu=async t=>new Promise(e=>setTimeout(e,t)),PA=(t,e)=>{t.scrollIntoView({behavior:e||"smooth",block:"center"})},mc=t=>t?"disable":"",pc=t=>t?"hidden":"";let fd=uh[3];const Dz=ir(),NE=Dz.theme;NE&&[...uh,...lA].forEach(t=>{t.id===NE&&(fd=t)});const NA={theme:{...fd,alpha:fd.type==="light"?"[#000]/5":"[#fff]/5",text_color:fd.type==="light"?"text-[#333]":"text-[#fff]"},isOnMobile:window.innerWidth<800,isDev:!1},Oz=(t,e)=>{switch(e.type){case 0:{const n=e.payload.theme;return{...t,theme:{...n,alpha:n.type==="dark"?"[#fff]/5":"[#000]/5",text_color:n.type==="light"?"text-[#333]":"text-[#fff]"}}}}},Fz=()=>{const[t,e]=f.useReducer(Oz,NA),n=f.useCallback(r=>{console.log("set theme"),e({type:0,payload:{theme:r}})},[]);return{state:t,setTheme:n}},Lz={state:NA,setTheme:()=>{}},jA=f.createContext(Lz),Mz=({children:t})=>l.jsx(jA.Provider,{value:Fz(),children:t}),L=()=>{const{state:{...t},...e}=f.useContext(jA);return{...t,...e}},$z=()=>{const[t,e]=f.useState([]);return{toasts:t,setErrorToast:s=>e(i=>[...i,{variant:"error",id:Date.now()+"",desc:s||"Somethings went wrong"}]),setSuccessToast:s=>e(i=>[...i,{variant:"success",id:Date.now()+"",desc:s||"Successful"}]),setToasts:e}},DA=f.createContext(null);function zz({children:t}){return l.jsx(DA.Provider,{value:$z(),children:t})}const xt=()=>{const t=f.useContext(DA);if(!t)throw new Error("Toast Context not provided");return t},Bz=()=>{const[t,e]=f.useState(!1),[n,r]=f.useState(!1),[s,i]=f.useState([]);return{isChecked:t,setIsChecked:e,isSelectAll:n,setIsSelectAll:r,setSelectedSongs:i,selectedSongs:s,selectAllSong:u=>{e(!0),r(!0),i(u)},selectSong:u=>{const d=[...s],h=d.findIndex(m=>m.id===u.id);h===-1?d.push(u):d.splice(h,1),e(!!d.length),i(d)},resetSelect:()=>{e(!1),r(!1),i([])}}},OA=f.createContext(null);function gi({children:t}){return l.jsx(OA.Provider,{value:Bz(),children:t})}const Oo=()=>{const t=f.useContext(OA);if(!t)throw new Error("SelectSongContext not provided");return t},FA={tempSongs:[],status:""},Uz=(t,e)=>{switch(e.type){case 0:{const{songs:n}=e.payload;return{...t,tempSongs:n,status:"uploading"}}case 1:{const n=[...t.tempSongs];return n.shift(),{...t,tempSongs:n}}case 2:{const{status:n}=e.payload;return{...t,tempSongs:[],status:n}}}},Vz=()=>{const[t,e]=f.useReducer(Uz,FA),n=f.useCallback(i=>{e({type:0,payload:{songs:i}})},[]),r=f.useCallback(()=>{e({type:1})},[]),s=f.useCallback(i=>{e({type:2,payload:{status:i}})},[]);return{state:t,setTempSongs:n,shiftSong:r,clearTempSongs:s}},Wz={state:FA,setTempSongs:()=>{},shiftSong:()=>{},clearTempSongs:()=>{}},LA=f.createContext(Wz),Hz=({children:t})=>l.jsx(LA.Provider,{value:Vz(),children:t}),Rx=()=>{const{state:{...t},...e}=f.useContext(LA);return{...e,...t}};function qz(){const[t,e]=f.useState(!1),[n,r]=f.useState(!1),[s,i]=f.useState(!1),[a,o]=f.useState("Lyric"),[c,u]=f.useState(!1),d=f.useRef(null),h=f.useRef(null);return{audioRef:d,controlRef:h,isOpenFullScreen:t,isOpenSongQueue:n,idle:c,setIdle:u,setIsOpenFullScreen:e,setIsOpenSongQueue:r,setIsHasAudioEle:i,activeTab:a,setActiveTab:o}}const MA=f.createContext(null);function Gz({children:t}){return l.jsx(MA.Provider,{value:qz(),children:t})}function Ht(){const t=f.useContext(MA);if(!t)throw new Error("Player Context not provided");return t}const Kz=()=>{const[t,e]=f.useState([]),[n,r]=f.useState(!1),s=f.useRef(!1);return{songLyrics:t,setSongLyrics:e,loading:n,setLoading:r,ranGetLyric:s}},$A=f.createContext(null);function zA({children:t}){return l.jsx($A.Provider,{value:Kz(),children:t})}const Qz=()=>{const t=f.useContext($A);if(!t)throw new Error("Lyric context not found");return t};function Xz({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75"}))}const Yz=f.forwardRef(Xz),nu=Yz;function Jz({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const Zz=f.forwardRef(Jz),Px=Zz;function e8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}))}const t8=f.forwardRef(e8),n8=t8;function r8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"}))}const s8=f.forwardRef(r8),i8=s8;function a8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3"}))}const o8=f.forwardRef(a8),l8=o8;function c8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const u8=f.forwardRef(c8),mn=u8;function d8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"}))}const h8=f.forwardRef(d8),Nx=h8;function f8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"}))}const m8=f.forwardRef(f8),p8=m8;function g8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"}))}const y8=f.forwardRef(g8),BA=y8;function v8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}))}const x8=f.forwardRef(v8),jx=x8;function w8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953l7.108-4.062A1.125 1.125 0 0121 8.688v8.123zM11.25 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953L9.567 7.71a1.125 1.125 0 011.683.977v8.123z"}))}const _8=f.forwardRef(w8),Dx=_8;function E8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const S8=f.forwardRef(E8),UA=S8;function b8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const k8=f.forwardRef(b8),T8=k8;function I8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))}const C8=f.forwardRef(I8),Vf=C8;function A8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const R8=f.forwardRef(A8),VA=R8;function P8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}const N8=f.forwardRef(P8),j8=N8;function D8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const O8=f.forwardRef(D8),md=O8;function F8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"}))}const L8=f.forwardRef(F8),M8=L8;function $8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const z8=f.forwardRef($8),WA=z8;function B8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const U8=f.forwardRef(B8),Ox=U8;function V8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25"}))}const W8=f.forwardRef(V8),HA=W8;function H8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const q8=f.forwardRef(H8),Wf=q8;function G8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))}const K8=f.forwardRef(G8),Fx=K8;function Q8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z"}))}const X8=f.forwardRef(Q8),Hf=X8;function Y8({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const J8=f.forwardRef(Y8),Z8=J8;function e7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const t7=f.forwardRef(e7),qA=t7;function n7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const r7=f.forwardRef(n7),R0=r7;function s7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"}))}const i7=f.forwardRef(s7),Lx=i7;function a7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const o7=f.forwardRef(a7),l7=o7;function c7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"}))}const u7=f.forwardRef(c7),GA=u7;function d7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"}))}const h7=f.forwardRef(d7),Zi=h7;function f7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 01-2.25 2.25M16.5 7.5V18a2.25 2.25 0 002.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 002.25 2.25h13.5M6 7.5h3v3H6v-3z"}))}const m7=f.forwardRef(f7),p7=m7;function g7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}))}const y7=f.forwardRef(g7),P0=y7;function v7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const x7=f.forwardRef(v7),Mx=x7;function w7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"}))}const _7=f.forwardRef(w7),$x=_7;function E7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))}const S7=f.forwardRef(E7),b7=S7;function k7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"}))}const T7=f.forwardRef(k7),KA=T7;function I7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"}))}const C7=f.forwardRef(I7),A7=C7;function R7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"}))}const P7=f.forwardRef(R7),zx=P7;function N7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"}))}const j7=f.forwardRef(N7),hh=j7;function D7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const O7=f.forwardRef(D7),zn=O7;function F7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"}))}const L7=f.forwardRef(F7),M7=L7;function $7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"}))}const z7=f.forwardRef($7),B7=z7;function U7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 7.125C2.25 6.504 2.754 6 3.375 6h6c.621 0 1.125.504 1.125 1.125v3.75c0 .621-.504 1.125-1.125 1.125h-6a1.125 1.125 0 01-1.125-1.125v-3.75zM14.25 8.625c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v8.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 01-1.125-1.125v-8.25zM3.75 16.125c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v2.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 01-1.125-1.125v-2.25z"}))}const V7=f.forwardRef(U7),W7=V7;function H7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"}))}const q7=f.forwardRef(H7),G7=q7;function K7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75L19.5 12m0 0l2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6l4.72-4.72a.75.75 0 011.28.531V19.94a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.506-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.395C2.806 8.757 3.63 8.25 4.51 8.25H6.75z"}))}const Q7=f.forwardRef(K7),X7=Q7;function Y7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"}))}const J7=f.forwardRef(Y7),fh=J7;function Z7({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const eB=f.forwardRef(Z7),oi=eB;function tB({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"}))}const nB=f.forwardRef(tB),rB=nB;function sB({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const iB=f.forwardRef(sB),dr=iB;function aB({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z",clipRule:"evenodd"}))}const oB=f.forwardRef(aB),lB=oB;function cB({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M16.28 11.47a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 011.06-1.06l7.5 7.5z",clipRule:"evenodd"}))}const uB=f.forwardRef(cB),dB=uB;function hB({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z",clipRule:"evenodd"}))}const fB=f.forwardRef(hB),mB=fB;function pB({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z",clipRule:"evenodd"}))}const gB=f.forwardRef(pB),yB=gB,vB=[{path:"/dashboard",title:"Dashboard",icon:l.jsx(HA,{className:"w-5 flex-shrink-0"})},{path:"/dashboard/songs",title:"Songs",icon:l.jsx(Zi,{className:"w-5 flex-shrink-0"})},{path:"/dashboard/playlists",title:"Playlists",icon:l.jsx(p7,{className:"w-5 flex-shrink-0"})},{path:"/dashboard",title:"Singers",icon:l.jsx(rB,{className:"w-5 flex-shrink-0"})},{path:"/dashboard",title:"Genres",icon:l.jsx(W7,{className:"w-5 flex-shrink-0"})}];function xB(){const{theme:t}=L(),[e,n]=f.useState(!1),r="",s={container:`${t.side_bar_bg} ${t.text_color} border-r border-${t.alpha} transition-[width] max-h-[100vh] relative flex-shrink-0 w-[50px] sm:w-[70px]`,containerExpand:"!w-[180px]",head:"h-[60px] flex items-center justify-center",logoText:"text-[22px] font-[500] whitespace-nowrap tracking-[-1px]",logoImage:"max-w-[50px] p-[4px]",item:"flex whitespace-nowrap space-x-2 items-center justify-center p-2.5  hover:bg-white/10",itemActive:"text-[#cd1818] bg-[#f1f1f1]",icon:"w-[24px] flex-shrink-0"};return l.jsxs("div",{className:`${s.container} ${e?s.containerExpand:""}`,children:[l.jsxs("div",{className:"md:mt-[60px]",children:[vB.map((i,a)=>l.jsxs(cn,{className:`${s.item} ${e?"!justify-start":""}
                  ${r===i.path?s.itemActive:""}`,to:i.path,children:[i.icon,e&&l.jsx("span",{children:i.title})]},a)),l.jsxs(cn,{to:"/",target:"_blank",className:`${s.item} ${e?"!justify-start":""}
               
               `,children:[l.jsx(qA,{className:s.icon}),e&&l.jsx("span",{children:"Home"})]})]}),l.jsx("button",{onClick:()=>n(i=>!i),className:`${t.content_bg} rounded-md p-2 absolute bottom-[20px] right-0 translate-x-[50%] z-[10]`,children:e?l.jsx(lB,{className:"w-5 "}):l.jsx(dB,{className:"w-5"})})]})}const wB=()=>{const[t,e]=f.useState([]),[n,r]=f.useState([]);return{ahead:t,behind:n,setAhead:e,setBehind:r}},QA=f.createContext(null);function XA({children:t}){return l.jsx(QA.Provider,{value:wB(),children:t})}const _B=()=>{const t=f.useContext(QA);if(!t)throw new Error("Navigation context not provided");return t};function EB(){const{behind:t,ahead:e,setBehind:n,setAhead:r}=_B(),s=hr(),i=Hn(),a=f.useRef(!0),o=f.useRef(!0),c=f.useMemo(()=>s.pathname+s.search,[s]),u=()=>{const h=[...t],m=h.pop();m&&(a.current=!1,r(p=>[...p,c]),n(h),i(m))},d=()=>{const h=[...e],m=h.pop();m&&(a.current=!1,n(p=>[...p,c]),r(h),i(m))};return f.useEffect(()=>{if(o.current){o.current=!1;return}return()=>{a.current?(e.length&&r([]),n(h=>[...h,c])):a.current=!0}},[s.pathname]),{ahead:e,behind:t,backward:u,forward:d}}function YA({className:t=""}){const{behind:e,ahead:n,backward:r,forward:s}=EB();return l.jsxs("div",{className:`"flex space-x-3 [&>button]:p-1 ${t}`,children:[l.jsx("button",{onClick:r,className:`relative ${mc(!e.length)}`,children:l.jsx(i8,{className:"w-5"})}),l.jsx("button",{onClick:s,className:`relative ${mc(!n.length)}`,children:l.jsx(p8,{className:"w-5"})})]})}const SB=({appendOnPortal:t})=>{const[e,n]=f.useState(!1),[r,s]=f.useState(!1),i=f.useRef(null),a=f.useRef(null);return{refs:{triggerRef:i,contentRef:a},setTriggerRef:h=>{i.current=h},setContentRef:h=>{a.current=h},state:{isMounted:r,isOpen:e},setIsMounted:s,setIsOpen:n,appendOnPortal:t,close:()=>{s(!1)},toggle:()=>{r&&s(!1),e||n(!0)}}},JA=f.createContext(null),vs=()=>{const t=f.useContext(JA);return t||{}};function $r({children:t,relativeWrap:e=!0,appendOnPortal:n,...r}){return l.jsx(JA.Provider,{value:SB({...r,appendOnPortal:n}),children:n?t:l.jsx("div",{className:"relative",children:t})})}const zr=f.forwardRef(function({children:t,needButton:e,setIsOpenParent:n},r){const{refs:s,setIsMounted:i,setIsOpen:a,close:o,toggle:c,state:{isMounted:u,isOpen:d}}=vs();return f.useImperativeHandle(r,()=>({close:o})),f.useEffect(()=>{u||(n&&n(!1),setTimeout(()=>{a(!1)},400))},[u]),f.useEffect(()=>(d&&(n&&n(!0),setTimeout(()=>{i(!0)},100)),()=>{d||i(!1)}),[d]),f.useEffect(()=>{if(!d)return;const h=m=>{var p,g;!s.contentRef||!s.triggerRef||(p=s.triggerRef.current)!=null&&p.contains(m.target)||(g=s.contentRef.current)!=null&&g.contains(m.target)||i(!1)};return document.addEventListener("mousedown",h),document.addEventListener("touchstart",h),()=>{document.removeEventListener("mousedown",h),document.removeEventListener("touchstart",h)}},[d]),!e&&f.isValidElement(t)?f.cloneElement(t,{onClick:c,ref:s.triggerRef}):l.jsx("button",{ref:s.triggerRef,onClick:c,children:t})});function Cn({children:t,className:e,animationClassName:n,...r}){const{state:{isMounted:s,isOpen:i},refs:a,close:o,appendOnPortal:c,setContentRef:u}=vs(),d=f.useRef(null),h=()=>{const x=a.triggerRef.current,_=a.contentRef.current,v=d.current;if(!x||!_)return;const y=x.getBoundingClientRect(),w={top:y.top+x.clientHeight,left:y.left-_.clientWidth};if(r.appendTo==="portal"){const{origin:E="top right",position:S,spacer:b=8}=r;switch(S){case"right-bottom":{w.top=y.top+x.clientHeight+b,w.left=y.left;break}}const k=w.top+_.clientHeight>window.innerHeight-90;if(k){let T=w.top-_.clientHeight-x.clientHeight;T-60<0&&(T=60),w.top=T}if(v){let T=E;k&&(T="bottom right"),v.style.transformOrigin=T}}_.style.left=`${w.left}px`,_.style.top=`${w.top}px`},m=o,p={unMountedContent:"opacity-0 scale-[.95]",mountedContent:"opacity-100 scale-[1]"},g=l.jsx("div",{ref:u,className:`popup-content ${c?"fixed z-[99]":"absolute"} ${e||""}`,children:l.jsx("div",{ref:d,className:` transition-[transform,opacity] duration-[.25s] ease-linear ${n||""} ${s?p.mountedContent:p.unMountedContent}`,children:t})});return f.useEffect(()=>{if(c)return i&&(h(),document.addEventListener("wheel",m)),()=>{document.removeEventListener("wheel",m)}},[i]),i?l.jsx(l.Fragment,{children:c?oa.createPortal(g,document.getElementById("portals")):g}):l.jsx(l.Fragment,{})}function ZA(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=ZA(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function bB(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=ZA(t))&&(r&&(r+=" "),r+=e);return r}const jE=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,DE=bB,eR=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return DE(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const m=jE(d)||jE(h);return s[u][m]}),o=n&&Object.entries(n).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:m,...p}=d;return Object.entries(p).every(g=>{let[x,_]=g;return Array.isArray(_)?_.includes({...i,...o}[x]):{...i,...o}[x]===_})?[...u,h,m]:u},[]);return DE(t,a,c,n==null?void 0:n.class,n==null?void 0:n.className)},kB=eR("inline-flex font-[500] items-center ",{variants:{variant:{default:"",circle:"rounded-full",list:"flex items-center py-[5px] w-full",outline:"border rounded-full",primary:""},size:{primary:"px-4 py-[6px]",small:"px-2 py-1",half:"w-1/2",full:"w-full",clear:""},hover:{default:"hover:brightness-90",scale:"transition-transform hover:scale-[1.05]",clear:""}},defaultVariants:{variant:"default",size:"primary",hover:"default"}});function TB({className:t,children:e,variant:n,size:r,disabled:s,isLoading:i,hover:a,onClick:o,...c},u){return l.jsxs("button",{ref:u,type:"button",onClick:d=>o?o(d):"",...c,className:kB({variant:n,size:r,hover:a,className:t}),disabled:i||s,children:[i?l.jsx(mn,{className:"w-6 animate-spin"}):null,!i&&e]})}const B=f.forwardRef(TB);function Yt({className:t}){const{theme:e}=L();return l.jsx("div",{className:`animate-pulse rounded-[4px] bg-${e.alpha} ${t}`})}const qf=[...Array(4).keys()].map(t=>l.jsxs("div",{className:"flex items-center p-[10px] border-b-[1px] border-transparent",children:[l.jsx(Yt,{className:"h-[18px] w-[18px]"}),l.jsx(Yt,{className:"h-[54px] w-[54px] ml-[10px] rounded-[4px]"}),l.jsxs("div",{className:"ml-[10px]",children:[l.jsx(Yt,{className:"h-[20px] mb-[5px] w-[150px]"}),l.jsx(Yt,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},t)),tR=()=>l.jsx("div",{className:"py-3",children:l.jsx(Yt,{className:"w-full h-[28px]"})}),nR=[...Array(2).keys()].map(t=>l.jsxs("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:[l.jsx(Yt,{className:"pt-[100%] rounded-[8px]"}),l.jsx(Yt,{className:"h-[22px] mt-[6px] w-[50%]"})]},t));var IB=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],hl=t=>{let e=0;for(let n=0;n<t.length;n++){let r=t[n],s=IB.indexOf(r);e=e*83+s}return e},_p=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},Ep=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},CB=t=>t<0?-1:1,Sp=(t,e)=>CB(t)*Math.pow(Math.abs(t),e),OE=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},AB=t=>{if(!t||t.length<6)throw new OE("The blurhash string must be at least 6 characters");let e=hl(t[0]),n=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*n)throw new OE(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*n}`)},RB=t=>{let e=t>>16,n=t>>8&255,r=t&255;return[_p(e),_p(n),_p(r)]},PB=(t,e)=>{let n=Math.floor(t/361),r=Math.floor(t/19)%19,s=t%19;return[Sp((n-9)/9,2)*e,Sp((r-9)/9,2)*e,Sp((s-9)/9,2)*e]},NB=(t,e,n,r)=>{AB(t),r=r|1;let s=hl(t[0]),i=Math.floor(s/9)+1,a=s%9+1,o=(hl(t[1])+1)/166,c=new Array(a*i);for(let h=0;h<c.length;h++)if(h===0){let m=hl(t.substring(2,6));c[h]=RB(m)}else{let m=hl(t.substring(4+h*2,6+h*2));c[h]=PB(m,o*r)}let u=e*4,d=new Uint8ClampedArray(u*n);for(let h=0;h<n;h++)for(let m=0;m<e;m++){let p=0,g=0,x=0;for(let w=0;w<i;w++)for(let E=0;E<a;E++){let S=Math.cos(Math.PI*m*E/e)*Math.cos(Math.PI*h*w/n),b=c[E+w*a];p+=b[0]*S,g+=b[1]*S,x+=b[2]*S}let _=Ep(p),v=Ep(g),y=Ep(x);d[4*m+0+h*u]=_,d[4*m+1+h*u]=v,d[4*m+2+h*u]=y,d[4*m+3+h*u]=255}return d},jB=NB,DB=Object.defineProperty,OB=Object.defineProperties,FB=Object.getOwnPropertyDescriptors,mh=Object.getOwnPropertySymbols,rR=Object.prototype.hasOwnProperty,sR=Object.prototype.propertyIsEnumerable,FE=(t,e,n)=>e in t?DB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,N0=(t,e)=>{for(var n in e||(e={}))rR.call(e,n)&&FE(t,n,e[n]);if(mh)for(var n of mh(e))sR.call(e,n)&&FE(t,n,e[n]);return t},j0=(t,e)=>OB(t,FB(e)),iR=(t,e)=>{var n={};for(var r in t)rR.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&mh)for(var r of mh(t))e.indexOf(r)<0&&sR.call(t,r)&&(n[r]=t[r]);return n},aR=class extends f.PureComponent{constructor(){super(...arguments),this.canvas=null,this.handleRef=e=>{this.canvas=e,this.draw()},this.draw=()=>{let{hash:e,height:n,punch:r,width:s}=this.props;if(this.canvas){let i=jB(e,s,n,r),a=this.canvas.getContext("2d"),o=a.createImageData(s,n);o.data.set(i),a.putImageData(o,0,0)}}}componentDidUpdate(){this.draw()}render(){let e=this.props,{hash:n,height:r,width:s}=e,i=iR(e,["hash","height","width"]);return f.createElement("canvas",j0(N0({},i),{height:r,width:s,ref:this.handleRef}))}};aR.defaultProps={height:128,width:128};var LB={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},Gf=class extends f.PureComponent{componentDidUpdate(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")}render(){let e=this.props,{hash:n,height:r,width:s,punch:i,resolutionX:a,resolutionY:o,style:c}=e,u=iR(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return f.createElement("div",j0(N0({},u),{style:j0(N0({display:"inline-block",height:r,width:s},c),{position:"relative"})}),f.createElement(aR,{hash:n,height:o,width:a,punch:i,style:LB}))}};Gf.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32};const oR="USRKy:SK%|R*}@r@MxoeY$kWmnafBUR*oybu",LE="https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fy2matecomlienkhucxuan2012hd720pmp3_uqok_admin_stock?alt=media&token=c7869d1b-cd2a-407a-a2e6-988881f0362a";function xs({src:t,className:e,blurHashEncode:n,onError:r}){const[s,i]=f.useState(!1),a=f.useRef(null),o=()=>{i(!0),t&&t!=null&&t.includes("blob")&&URL.revokeObjectURL(t)},c=()=>{const d=a.current;d.src=LE,i(!0)},u=()=>{r?(r(),c()):c()};return l.jsxs(l.Fragment,{children:[!s&&l.jsx(l.Fragment,{children:n?l.jsx(Gf,{hash:n,height:"100%",width:"100%"}):l.jsx(Yt,{className:"w-full h-0"})}),l.jsx("img",{onLoad:o,onError:u,className:`${e||""} w-full ${s?"":"hidden"}`,src:t||LE,ref:a})]})}const lR=({className:t,onClick:e,theme:n,children:r})=>l.jsx("div",{className:`w-full hover:brightness-[90%] rounded-[8px] overflow-hidden cursor-pointer border ${n.side_bar_bg} border-${n.alpha}  ${t}`,children:l.jsx("div",{onClick:()=>e&&e(),className:`${n==null?void 0:n.content_hover_text} pt-[100%] relative`,children:r||l.jsx(B,{className:`!absolute top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ${n.text_color}`,children:l.jsx(zn,{className:"w-7 md:w-10"})})})}),MB=eR("",{variants:{p:{3:"p-3",2:"p-2",1:"p-1",clear:""},rounded:{xl:"rounded-xl",lg:"rounded-lg",md:"rounded-md",sm:"rounded-sm"}},defaultVariants:{p:3,rounded:"xl"}});function Gn({children:t,bg:e="primary",theme:n,className:r,p:s,rounded:i}){return l.jsx("div",{className:` ${e==="primary"?n.modal_bg:""} text-white border-[#fff]/5 border-[1px]  ${MB({p:s,rounded:i,className:r})}`,children:t})}function bp({className:t,icon:e,label:n,to:r,arrowIcon:s,children:i}){return r?l.jsxs(cn,{className:`w-full flex  justify-between  ${t}`,to:r,children:[l.jsxs("div",{className:"inline-flex items-center ",children:[e,l.jsx("span",{className:"text-lg font-medium",children:n})]}),i,s&&l.jsx("span",{children:s})]}):l.jsx("p",{children:"No onClick"})}function $B({text:t,className:e="",status:n,activeColor:r},s){const i=()=>{switch(n){case"coming":return"";case"active":return`${r||"text-[#ffed00]"} active-lyric`;case"done":return"disable"}};return f.useEffect(()=>{n==="active"&&scroll()},[n]),l.jsx("p",{ref:s,className:`${e} select-none  font-[700] ${i()}`,children:t})}const cR=f.forwardRef($B);function ME({handlePlayPause:t,playStatus:e}){const n={icon:"w-[50px] sm:w-10"},r=()=>{switch(e){case"playing":return l.jsx(Mx,{className:`${n.icon}`});case"error":return l.jsx(Fx,{className:`${n.icon}`});case"loading":case"waiting":return l.jsx(mn,{className:`${n.icon} animate-spin`});case"paused":return l.jsx(zx,{className:`${n.icon}`})}};return l.jsx(l.Fragment,{children:l.jsx("button",{className:"p-1  inline-flex items-center justify-center",onClick:()=>t(),children:r()})})}function tr(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function li(t){return!!t&&!!t[Ne]}function fs(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var s=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return s===Object||typeof s=="function"&&Function.toString.call(s)===KB}(t)||Array.isArray(t)||!!t[HE]||!!(!((e=t.constructor)===null||e===void 0)&&e[HE])||Bx(t)||Ux(t))}function ea(t,e,n){n===void 0&&(n=!1),Fo(t)===0?(n?Object.keys:Ja)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,s){return e(s,r,t)})}function Fo(t){var e=t[Ne];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Bx(t)?2:Ux(t)?3:0}function Ya(t,e){return Fo(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function zB(t,e){return Fo(t)===2?t.get(e):t[e]}function uR(t,e,n){var r=Fo(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function dR(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function Bx(t){return qB&&t instanceof Map}function Ux(t){return GB&&t instanceof Set}function ki(t){return t.o||t.t}function Vx(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=fR(t);delete e[Ne];for(var n=Ja(e),r=0;r<n.length;r++){var s=n[r],i=e[s];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[s]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[s]})}return Object.create(Object.getPrototypeOf(t),e)}function Wx(t,e){return e===void 0&&(e=!1),Hx(t)||li(t)||!fs(t)||(Fo(t)>1&&(t.set=t.add=t.clear=t.delete=BB),Object.freeze(t),e&&ea(t,function(n,r){return Wx(r,!0)},!0)),t}function BB(){tr(2)}function Hx(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function Fr(t){var e=L0[t];return e||tr(18,t),e}function UB(t,e){L0[t]||(L0[t]=e)}function D0(){return gc}function kp(t,e){e&&(Fr("Patches"),t.u=[],t.s=[],t.v=e)}function ph(t){O0(t),t.p.forEach(VB),t.p=null}function O0(t){t===gc&&(gc=t.l)}function $E(t){return gc={p:[],l:gc,h:t,m:!0,_:0}}function VB(t){var e=t[Ne];e.i===0||e.i===1?e.j():e.g=!0}function Tp(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||Fr("ES5").S(e,t,r),r?(n[Ne].P&&(ph(e),tr(4)),fs(t)&&(t=gh(e,t),e.l||yh(e,t)),e.u&&Fr("Patches").M(n[Ne].t,t,e.u,e.s)):t=gh(e,n,[]),ph(e),e.u&&e.v(e.u,e.s),t!==hR?t:void 0}function gh(t,e,n){if(Hx(e))return e;var r=e[Ne];if(!r)return ea(e,function(o,c){return zE(t,r,e,o,c,n)},!0),e;if(r.A!==t)return e;if(!r.P)return yh(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var s=r.i===4||r.i===5?r.o=Vx(r.k):r.o,i=s,a=!1;r.i===3&&(i=new Set(s),s.clear(),a=!0),ea(i,function(o,c){return zE(t,r,s,o,c,n,a)}),yh(t,s,!1),n&&t.u&&Fr("Patches").N(r,n,t.u,t.s)}return r.o}function zE(t,e,n,r,s,i,a){if(li(s)){var o=gh(t,s,i&&e&&e.i!==3&&!Ya(e.R,r)?i.concat(r):void 0);if(uR(n,r,o),!li(o))return;t.m=!1}else a&&n.add(s);if(fs(s)&&!Hx(s)){if(!t.h.D&&t._<1)return;gh(t,s),e&&e.A.l||yh(t,s)}}function yh(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&Wx(e,n)}function Ip(t,e){var n=t[Ne];return(n?ki(n):t)[e]}function BE(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Ds(t){t.P||(t.P=!0,t.l&&Ds(t.l))}function Cp(t){t.o||(t.o=Vx(t.t))}function F0(t,e,n){var r=Bx(e)?Fr("MapSet").F(e,n):Ux(e)?Fr("MapSet").T(e,n):t.O?function(s,i){var a=Array.isArray(s),o={i:a?1:0,A:i?i.A:D0(),P:!1,I:!1,R:{},l:i,t:s,k:null,o:null,j:null,C:!1},c=o,u=yc;a&&(c=[o],u=fl);var d=Proxy.revocable(c,u),h=d.revoke,m=d.proxy;return o.k=m,o.j=h,m}(e,n):Fr("ES5").J(e,n);return(n?n.A:D0()).p.push(r),r}function WB(t){return li(t)||tr(22,t),function e(n){if(!fs(n))return n;var r,s=n[Ne],i=Fo(n);if(s){if(!s.P&&(s.i<4||!Fr("ES5").K(s)))return s.t;s.I=!0,r=UE(n,i),s.I=!1}else r=UE(n,i);return ea(r,function(a,o){s&&zB(s.t,a)===o||uR(r,a,e(o))}),i===3?new Set(r):r}(t)}function UE(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Vx(t)}function HB(){function t(i,a){var o=s[i];return o?o.enumerable=a:s[i]=o={configurable:!0,enumerable:a,get:function(){var c=this[Ne];return yc.get(c,i)},set:function(c){var u=this[Ne];yc.set(u,i,c)}},o}function e(i){for(var a=i.length-1;a>=0;a--){var o=i[a][Ne];if(!o.P)switch(o.i){case 5:r(o)&&Ds(o);break;case 4:n(o)&&Ds(o)}}}function n(i){for(var a=i.t,o=i.k,c=Ja(o),u=c.length-1;u>=0;u--){var d=c[u];if(d!==Ne){var h=a[d];if(h===void 0&&!Ya(a,d))return!0;var m=o[d],p=m&&m[Ne];if(p?p.t!==h:!dR(m,h))return!0}}var g=!!a[Ne];return c.length!==Ja(a).length+(g?0:1)}function r(i){var a=i.k;if(a.length!==i.t.length)return!0;var o=Object.getOwnPropertyDescriptor(a,a.length-1);if(o&&!o.get)return!0;for(var c=0;c<a.length;c++)if(!a.hasOwnProperty(c))return!0;return!1}var s={};UB("ES5",{J:function(i,a){var o=Array.isArray(i),c=function(d,h){if(d){for(var m=Array(h.length),p=0;p<h.length;p++)Object.defineProperty(m,""+p,t(p,!0));return m}var g=fR(h);delete g[Ne];for(var x=Ja(g),_=0;_<x.length;_++){var v=x[_];g[v]=t(v,d||!!g[v].enumerable)}return Object.create(Object.getPrototypeOf(h),g)}(o,i),u={i:o?5:4,A:a?a.A:D0(),P:!1,I:!1,R:{},l:a,t:i,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,Ne,{value:u,writable:!0}),c},S:function(i,a,o){o?li(a)&&a[Ne].A===i&&e(i.p):(i.u&&function c(u){if(u&&typeof u=="object"){var d=u[Ne];if(d){var h=d.t,m=d.k,p=d.R,g=d.i;if(g===4)ea(m,function(w){w!==Ne&&(h[w]!==void 0||Ya(h,w)?p[w]||c(m[w]):(p[w]=!0,Ds(d)))}),ea(h,function(w){m[w]!==void 0||Ya(m,w)||(p[w]=!1,Ds(d))});else if(g===5){if(r(d)&&(Ds(d),p.length=!0),m.length<h.length)for(var x=m.length;x<h.length;x++)p[x]=!1;else for(var _=h.length;_<m.length;_++)p[_]=!0;for(var v=Math.min(m.length,h.length),y=0;y<v;y++)m.hasOwnProperty(y)||(p[y]=!0),p[y]===void 0&&c(m[y])}}}}(i.p[0]),e(i.p))},K:function(i){return i.i===4?n(i):r(i)}})}var VE,gc,qx=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",qB=typeof Map<"u",GB=typeof Set<"u",WE=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",hR=qx?Symbol.for("immer-nothing"):((VE={})["immer-nothing"]=!0,VE),HE=qx?Symbol.for("immer-draftable"):"__$immer_draftable",Ne=qx?Symbol.for("immer-state"):"__$immer_state",KB=""+Object.prototype.constructor,Ja=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,fR=Object.getOwnPropertyDescriptors||function(t){var e={};return Ja(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},L0={},yc={get:function(t,e){if(e===Ne)return t;var n=ki(t);if(!Ya(n,e))return function(s,i,a){var o,c=BE(i,a);return c?"value"in c?c.value:(o=c.get)===null||o===void 0?void 0:o.call(s.k):void 0}(t,n,e);var r=n[e];return t.I||!fs(r)?r:r===Ip(t.t,e)?(Cp(t),t.o[e]=F0(t.A.h,r,t)):r},has:function(t,e){return e in ki(t)},ownKeys:function(t){return Reflect.ownKeys(ki(t))},set:function(t,e,n){var r=BE(ki(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var s=Ip(ki(t),e),i=s==null?void 0:s[Ne];if(i&&i.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(dR(n,s)&&(n!==void 0||Ya(t.t,e)))return!0;Cp(t),Ds(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return Ip(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,Cp(t),Ds(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=ki(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){tr(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){tr(12)}},fl={};ea(yc,function(t,e){fl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),fl.deleteProperty=function(t,e){return fl.set.call(this,t,e,void 0)},fl.set=function(t,e,n){return yc.set.call(this,t[0],e,n,t[0])};var QB=function(){function t(n){var r=this;this.O=WE,this.D=!0,this.produce=function(s,i,a){if(typeof s=="function"&&typeof i!="function"){var o=i;i=s;var c=r;return function(x){var _=this;x===void 0&&(x=o);for(var v=arguments.length,y=Array(v>1?v-1:0),w=1;w<v;w++)y[w-1]=arguments[w];return c.produce(x,function(E){var S;return(S=i).call.apply(S,[_,E].concat(y))})}}var u;if(typeof i!="function"&&tr(6),a!==void 0&&typeof a!="function"&&tr(7),fs(s)){var d=$E(r),h=F0(r,s,void 0),m=!0;try{u=i(h),m=!1}finally{m?ph(d):O0(d)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(x){return kp(d,a),Tp(x,d)},function(x){throw ph(d),x}):(kp(d,a),Tp(u,d))}if(!s||typeof s!="object"){if((u=i(s))===void 0&&(u=s),u===hR&&(u=void 0),r.D&&Wx(u,!0),a){var p=[],g=[];Fr("Patches").M(s,u,p,g),a(p,g)}return u}tr(21,s)},this.produceWithPatches=function(s,i){if(typeof s=="function")return function(u){for(var d=arguments.length,h=Array(d>1?d-1:0),m=1;m<d;m++)h[m-1]=arguments[m];return r.produceWithPatches(u,function(p){return s.apply(void 0,[p].concat(h))})};var a,o,c=r.produce(s,i,function(u,d){a=u,o=d});return typeof Promise<"u"&&c instanceof Promise?c.then(function(u){return[u,a,o]}):[c,a,o]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){fs(n)||tr(8),li(n)&&(n=WB(n));var r=$E(this),s=F0(this,n,void 0);return s[Ne].C=!0,O0(r),s},e.finishDraft=function(n,r){var s=n&&n[Ne],i=s.A;return kp(i,r),Tp(void 0,i)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!WE&&tr(20),this.O=n},e.applyPatches=function(n,r){var s;for(s=r.length-1;s>=0;s--){var i=r[s];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}s>-1&&(r=r.slice(s+1));var a=Fr("Patches").$;return li(n)?a(n,r):this.produce(n,function(o){return a(o,r)})},t}(),An=new QB,mR=An.produce;An.produceWithPatches.bind(An);An.setAutoFreeze.bind(An);An.setUseProxies.bind(An);An.applyPatches.bind(An);An.createDraft.bind(An);An.finishDraft.bind(An);function vc(t){"@babel/helpers - typeof";return vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vc(t)}function XB(t,e){if(vc(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vc(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YB(t){var e=XB(t,"string");return vc(e)==="symbol"?e:String(e)}function JB(t,e,n){return e=YB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function GE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qE(Object(n),!0).forEach(function(r){JB(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var KE=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Ap=function(){return Math.random().toString(36).substring(7).split("").join(".")},vh={INIT:"@@redux/INIT"+Ap(),REPLACE:"@@redux/REPLACE"+Ap(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Ap()}};function ZB(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function pR(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(jt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(jt(1));return n(pR)(t,e)}if(typeof t!="function")throw new Error(jt(2));var s=t,i=e,a=[],o=a,c=!1;function u(){o===a&&(o=a.slice())}function d(){if(c)throw new Error(jt(3));return i}function h(x){if(typeof x!="function")throw new Error(jt(4));if(c)throw new Error(jt(5));var _=!0;return u(),o.push(x),function(){if(_){if(c)throw new Error(jt(6));_=!1,u();var y=o.indexOf(x);o.splice(y,1),a=null}}}function m(x){if(!ZB(x))throw new Error(jt(7));if(typeof x.type>"u")throw new Error(jt(8));if(c)throw new Error(jt(9));try{c=!0,i=s(i,x)}finally{c=!1}for(var _=a=o,v=0;v<_.length;v++){var y=_[v];y()}return x}function p(x){if(typeof x!="function")throw new Error(jt(10));s=x,m({type:vh.REPLACE})}function g(){var x,_=h;return x={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(jt(11));function w(){y.next&&y.next(d())}w();var E=_(w);return{unsubscribe:E}}},x[KE]=function(){return this},x}return m({type:vh.INIT}),r={dispatch:m,subscribe:h,getState:d,replaceReducer:p},r[KE]=g,r}function eU(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:vh.INIT});if(typeof r>"u")throw new Error(jt(12));if(typeof n(void 0,{type:vh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(jt(13))})}function tU(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var s=e[r];typeof t[s]=="function"&&(n[s]=t[s])}var i=Object.keys(n),a;try{eU(n)}catch(o){a=o}return function(c,u){if(c===void 0&&(c={}),a)throw a;for(var d=!1,h={},m=0;m<i.length;m++){var p=i[m],g=n[p],x=c[p],_=g(x,u);if(typeof _>"u")throw u&&u.type,new Error(jt(14));h[p]=_,d=d||_!==x}return d=d||i.length!==Object.keys(c).length,d?h:c}}function xh(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,s){return function(){return r(s.apply(void 0,arguments))}})}function nU(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var s=r.apply(void 0,arguments),i=function(){throw new Error(jt(15))},a={getState:s.getState,dispatch:function(){return i.apply(void 0,arguments)}},o=e.map(function(c){return c(a)});return i=xh.apply(void 0,o)(s.dispatch),GE(GE({},s),{},{dispatch:i})}}}function gR(t){var e=function(r){var s=r.dispatch,i=r.getState;return function(a){return function(o){return typeof o=="function"?o(s,i,t):a(o)}}};return e}var yR=gR();yR.withExtraArgument=gR;const QE=yR;var vR=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),rU=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(u){return function(d){return c([u,d])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},vo=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,s=t.length;n<r;n++,s++)t[s]=e[n];return t},sU=Object.defineProperty,iU=Object.defineProperties,aU=Object.getOwnPropertyDescriptors,XE=Object.getOwnPropertySymbols,oU=Object.prototype.hasOwnProperty,lU=Object.prototype.propertyIsEnumerable,YE=function(t,e,n){return e in t?sU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},Js=function(t,e){for(var n in e||(e={}))oU.call(e,n)&&YE(t,n,e[n]);if(XE)for(var r=0,s=XE(e);r<s.length;r++){var n=s[r];lU.call(e,n)&&YE(t,n,e[n])}return t},Rp=function(t,e){return iU(t,aU(e))},cU=function(t,e,n){return new Promise(function(r,s){var i=function(c){try{o(n.next(c))}catch(u){s(u)}},a=function(c){try{o(n.throw(c))}catch(u){s(u)}},o=function(c){return c.done?r(c.value):Promise.resolve(c.value).then(i,a)};o((n=n.apply(t,e)).next())})},uU=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?xh:xh.apply(null,arguments)};function dU(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var hU=function(t){vR(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,vo([void 0],n[0].concat(this)))):new(e.bind.apply(e,vo([void 0],n.concat(this))))},e}(Array),fU=function(t){vR(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,vo([void 0],n[0].concat(this)))):new(e.bind.apply(e,vo([void 0],n.concat(this))))},e}(Array);function M0(t){return fs(t)?mR(t,function(){}):t}function mU(t){return typeof t=="boolean"}function pU(){return function(e){return gU(e)}}function gU(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new hU;return n&&(mU(n)?r.push(QE):r.push(QE.withExtraArgument(n.extraArgument))),r}var yU=!0;function vU(t){var e=pU(),n=t||{},r=n.reducer,s=r===void 0?void 0:r,i=n.middleware,a=i===void 0?e():i,o=n.devTools,c=o===void 0?!0:o,u=n.preloadedState,d=u===void 0?void 0:u,h=n.enhancers,m=h===void 0?void 0:h,p;if(typeof s=="function")p=s;else if(dU(s))p=tU(s);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var g=a;typeof g=="function"&&(g=g(e));var x=nU.apply(void 0,g),_=xh;c&&(_=uU(Js({trace:!yU},typeof c=="object"&&c)));var v=new fU(x),y=v;Array.isArray(m)?y=vo([x],m):typeof m=="function"&&(y=m(v));var w=_.apply(void 0,y);return pR(p,d,w)}function Zs(t,e){function n(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(e){var i=e.apply(void 0,r);if(!i)throw new Error("prepareAction did not return an object");return Js(Js({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function xR(t){var e={},n=[],r,s={addCase:function(i,a){var o=typeof i=="string"?i:i.type;if(o in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[o]=a,s},addMatcher:function(i,a){return n.push({matcher:i,reducer:a}),s},addDefaultCase:function(i){return r=i,s}};return t(s),[e,n,r]}function xU(t){return typeof t=="function"}function wU(t,e,n,r){n===void 0&&(n=[]);var s=typeof e=="function"?xR(e):[e,n,r],i=s[0],a=s[1],o=s[2],c;if(xU(t))c=function(){return M0(t())};else{var u=M0(t);c=function(){return u}}function d(h,m){h===void 0&&(h=c());var p=vo([i[m.type]],a.filter(function(g){var x=g.matcher;return x(m)}).map(function(g){var x=g.reducer;return x}));return p.filter(function(g){return!!g}).length===0&&(p=[o]),p.reduce(function(g,x){if(x)if(li(g)){var _=g,v=x(_,m);return v===void 0?g:v}else{if(fs(g))return mR(g,function(y){return x(y,m)});var v=x(g,m);if(v===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return g},h)}return d.getInitialState=c,d}function _U(t,e){return t+"/"+e}function Gx(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:M0(t.initialState),r=t.reducers||{},s=Object.keys(r),i={},a={},o={};s.forEach(function(d){var h=r[d],m=_U(e,d),p,g;"reducer"in h?(p=h.reducer,g=h.prepare):p=h,i[d]=p,a[m]=p,o[d]=g?Zs(m,g):Zs(m)});function c(){var d=typeof t.extraReducers=="function"?xR(t.extraReducers):[t.extraReducers],h=d[0],m=h===void 0?{}:h,p=d[1],g=p===void 0?[]:p,x=d[2],_=x===void 0?void 0:x,v=Js(Js({},m),a);return wU(n,function(y){for(var w in v)y.addCase(w,v[w]);for(var E=0,S=g;E<S.length;E++){var b=S[E];y.addMatcher(b.matcher,b.reducer)}_&&y.addDefaultCase(_)})}var u;return{name:e,reducer:function(d,h){return u||(u=c()),u(d,h)},actions:o,caseReducers:i,getInitialState:function(){return u||(u=c()),u.getInitialState()}}}var EU="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",SU=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=EU[Math.random()*64|0];return e},bU=["name","message","stack","code"],Pp=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),JE=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),kU=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=bU;n<r.length;n++){var s=r[n];typeof t[s]=="string"&&(e[s]=t[s])}return e}return{message:String(t)}};(function(){function t(e,n,r){var s=Zs(e+"/fulfilled",function(u,d,h,m){return{payload:u,meta:Rp(Js({},m||{}),{arg:h,requestId:d,requestStatus:"fulfilled"})}}),i=Zs(e+"/pending",function(u,d,h){return{payload:void 0,meta:Rp(Js({},h||{}),{arg:d,requestId:u,requestStatus:"pending"})}}),a=Zs(e+"/rejected",function(u,d,h,m,p){return{payload:m,error:(r&&r.serializeError||kU)(u||"Rejected"),meta:Rp(Js({},p||{}),{arg:h,requestId:d,rejectedWithValue:!!m,requestStatus:"rejected",aborted:(u==null?void 0:u.name)==="AbortError",condition:(u==null?void 0:u.name)==="ConditionError"})}}),o=typeof AbortController<"u"?AbortController:function(){function u(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return u.prototype.abort=function(){},u}();function c(u){return function(d,h,m){var p=r!=null&&r.idGenerator?r.idGenerator(u):SU(),g=new o,x;function _(y){x=y,g.abort()}var v=function(){return cU(this,null,function(){var y,w,E,S,b,k,T;return rU(this,function(N){switch(N.label){case 0:return N.trys.push([0,4,,5]),S=(y=r==null?void 0:r.condition)==null?void 0:y.call(r,u,{getState:h,extra:m}),IU(S)?[4,S]:[3,2];case 1:S=N.sent(),N.label=2;case 2:if(S===!1||g.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return b=new Promise(function(D,ee){return g.signal.addEventListener("abort",function(){return ee({name:"AbortError",message:x||"Aborted"})})}),d(i(p,u,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:p,arg:u},{getState:h,extra:m}))),[4,Promise.race([b,Promise.resolve(n(u,{dispatch:d,getState:h,extra:m,requestId:p,signal:g.signal,abort:_,rejectWithValue:function(D,ee){return new Pp(D,ee)},fulfillWithValue:function(D,ee){return new JE(D,ee)}})).then(function(D){if(D instanceof Pp)throw D;return D instanceof JE?s(D.payload,p,u,D.meta):s(D,p,u)})])];case 3:return E=N.sent(),[3,5];case 4:return k=N.sent(),E=k instanceof Pp?a(null,p,u,k.payload,k.meta):a(k,p,u),[3,5];case 5:return T=r&&!r.dispatchConditionRejection&&a.match(E)&&E.meta.condition,T||d(E),[2,E]}})})}();return Object.assign(v,{abort:_,requestId:p,arg:u,unwrap:function(){return v.then(TU)}})}}return Object.assign(c,{pending:i,rejected:a,fulfilled:s,typePrefix:e})}return t.withTypes=function(){return t},t})();function TU(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function IU(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var Kx="listenerMiddleware";Zs(Kx+"/add");Zs(Kx+"/removeAll");Zs(Kx+"/remove");var ZE;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);HB();const CU=()=>{const t=ir();return{playStatus:"paused",triggerPlayStatus:"",lyricSize:t.lyricSize||"medium",isLoaded:!0,isRepeat:t.isRepeat||"no",isShuffle:t.isShuffle||!1,isCrossFade:t.isCrossFade||!1,songBackground:t.songBackground||!0}},wR=Gx({name:"playStatus",initialState:()=>CU(),reducers:{setPlayStatus(t,e){Object.assign(t,e.payload)},togglePlayControl(t,e){const{variant:n}=e.payload;switch(n){default:if(typeof t[n]=="boolean"){const r=!t[n];t[n]=r,It(n,r)}}}}}),pn=t=>t.playStatus,{setPlayStatus:st,togglePlayControl:AU}=wR.actions,RU=wR.reducer;var _R={exports:{}},ER={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xo=f;function PU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var NU=typeof Object.is=="function"?Object.is:PU,jU=xo.useState,DU=xo.useEffect,OU=xo.useLayoutEffect,FU=xo.useDebugValue;function LU(t,e){var n=e(),r=jU({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return OU(function(){s.value=n,s.getSnapshot=e,Np(s)&&i({inst:s})},[t,n,e]),DU(function(){return Np(s)&&i({inst:s}),t(function(){Np(s)&&i({inst:s})})},[t]),FU(n),n}function Np(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!NU(t,n)}catch{return!0}}function MU(t,e){return e()}var $U=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?MU:LU;ER.useSyncExternalStore=xo.useSyncExternalStore!==void 0?xo.useSyncExternalStore:$U;_R.exports=ER;var zU=_R.exports,SR={exports:{}},bR={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kf=f,BU=zU;function UU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var VU=typeof Object.is=="function"?Object.is:UU,WU=BU.useSyncExternalStore,HU=Kf.useRef,qU=Kf.useEffect,GU=Kf.useMemo,KU=Kf.useDebugValue;bR.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=HU(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=GU(function(){function c(p){if(!u){if(u=!0,d=p,p=r(p),s!==void 0&&a.hasValue){var g=a.value;if(s(g,p))return h=g}return h=p}if(g=h,VU(d,p))return g;var x=r(p);return s!==void 0&&s(g,x)?g:(d=p,h=x)}var u=!1,d,h,m=n===void 0?null:n;return[function(){return c(e())},m===null?void 0:function(){return c(m())}]},[e,n,r,s]);var o=WU(t,i[0],i[1]);return qU(function(){a.hasValue=!0,a.value=o},[o]),KU(o),o};SR.exports=bR;var QU=SR.exports;function XU(t){t()}let kR=XU;const YU=t=>kR=t,JU=()=>kR,eS=Symbol.for("react-redux-context"),tS=typeof globalThis<"u"?globalThis:{};function ZU(){var t;if(!f.createContext)return{};const e=(t=tS[eS])!=null?t:tS[eS]=new Map;let n=e.get(f.createContext);return n||(n=f.createContext(null),e.set(f.createContext,n)),n}const ci=ZU();function Qx(t=ci){return function(){return f.useContext(t)}}const TR=Qx(),eV=()=>{throw new Error("uSES not initialized!")};let IR=eV;const tV=t=>{IR=t},nV=(t,e)=>t===e;function rV(t=ci){const e=t===ci?TR:Qx(t);return function(r,s={}){const{equalityFn:i=nV,stabilityCheck:a=void 0,noopCheck:o=void 0}=typeof s=="function"?{equalityFn:s}:s,{store:c,subscription:u,getServerState:d,stabilityCheck:h,noopCheck:m}=e();f.useRef(!0);const p=f.useCallback({[r.name](x){return r(x)}}[r.name],[r,h,a]),g=IR(u.addNestedSub,c.getState,d||c.getState,p,i);return f.useDebugValue(g),g}}const Z=rV();var CR={exports:{}},we={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wt=typeof Symbol=="function"&&Symbol.for,Xx=wt?Symbol.for("react.element"):60103,Yx=wt?Symbol.for("react.portal"):60106,Qf=wt?Symbol.for("react.fragment"):60107,Xf=wt?Symbol.for("react.strict_mode"):60108,Yf=wt?Symbol.for("react.profiler"):60114,Jf=wt?Symbol.for("react.provider"):60109,Zf=wt?Symbol.for("react.context"):60110,Jx=wt?Symbol.for("react.async_mode"):60111,em=wt?Symbol.for("react.concurrent_mode"):60111,tm=wt?Symbol.for("react.forward_ref"):60112,nm=wt?Symbol.for("react.suspense"):60113,sV=wt?Symbol.for("react.suspense_list"):60120,rm=wt?Symbol.for("react.memo"):60115,sm=wt?Symbol.for("react.lazy"):60116,iV=wt?Symbol.for("react.block"):60121,aV=wt?Symbol.for("react.fundamental"):60117,oV=wt?Symbol.for("react.responder"):60118,lV=wt?Symbol.for("react.scope"):60119;function Nn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Xx:switch(t=t.type,t){case Jx:case em:case Qf:case Yf:case Xf:case nm:return t;default:switch(t=t&&t.$$typeof,t){case Zf:case tm:case sm:case rm:case Jf:return t;default:return e}}case Yx:return e}}}function AR(t){return Nn(t)===em}we.AsyncMode=Jx;we.ConcurrentMode=em;we.ContextConsumer=Zf;we.ContextProvider=Jf;we.Element=Xx;we.ForwardRef=tm;we.Fragment=Qf;we.Lazy=sm;we.Memo=rm;we.Portal=Yx;we.Profiler=Yf;we.StrictMode=Xf;we.Suspense=nm;we.isAsyncMode=function(t){return AR(t)||Nn(t)===Jx};we.isConcurrentMode=AR;we.isContextConsumer=function(t){return Nn(t)===Zf};we.isContextProvider=function(t){return Nn(t)===Jf};we.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xx};we.isForwardRef=function(t){return Nn(t)===tm};we.isFragment=function(t){return Nn(t)===Qf};we.isLazy=function(t){return Nn(t)===sm};we.isMemo=function(t){return Nn(t)===rm};we.isPortal=function(t){return Nn(t)===Yx};we.isProfiler=function(t){return Nn(t)===Yf};we.isStrictMode=function(t){return Nn(t)===Xf};we.isSuspense=function(t){return Nn(t)===nm};we.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Qf||t===em||t===Yf||t===Xf||t===nm||t===sV||typeof t=="object"&&t!==null&&(t.$$typeof===sm||t.$$typeof===rm||t.$$typeof===Jf||t.$$typeof===Zf||t.$$typeof===tm||t.$$typeof===aV||t.$$typeof===oV||t.$$typeof===lV||t.$$typeof===iV)};we.typeOf=Nn;CR.exports=we;var cV=CR.exports,RR=cV,uV={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},dV={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},PR={};PR[RR.ForwardRef]=uV;PR[RR.Memo]=dV;var Ee={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zx=Symbol.for("react.element"),e1=Symbol.for("react.portal"),im=Symbol.for("react.fragment"),am=Symbol.for("react.strict_mode"),om=Symbol.for("react.profiler"),lm=Symbol.for("react.provider"),cm=Symbol.for("react.context"),hV=Symbol.for("react.server_context"),um=Symbol.for("react.forward_ref"),dm=Symbol.for("react.suspense"),hm=Symbol.for("react.suspense_list"),fm=Symbol.for("react.memo"),mm=Symbol.for("react.lazy"),fV=Symbol.for("react.offscreen"),NR;NR=Symbol.for("react.module.reference");function Kn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Zx:switch(t=t.type,t){case im:case om:case am:case dm:case hm:return t;default:switch(t=t&&t.$$typeof,t){case hV:case cm:case um:case mm:case fm:case lm:return t;default:return e}}case e1:return e}}}Ee.ContextConsumer=cm;Ee.ContextProvider=lm;Ee.Element=Zx;Ee.ForwardRef=um;Ee.Fragment=im;Ee.Lazy=mm;Ee.Memo=fm;Ee.Portal=e1;Ee.Profiler=om;Ee.StrictMode=am;Ee.Suspense=dm;Ee.SuspenseList=hm;Ee.isAsyncMode=function(){return!1};Ee.isConcurrentMode=function(){return!1};Ee.isContextConsumer=function(t){return Kn(t)===cm};Ee.isContextProvider=function(t){return Kn(t)===lm};Ee.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zx};Ee.isForwardRef=function(t){return Kn(t)===um};Ee.isFragment=function(t){return Kn(t)===im};Ee.isLazy=function(t){return Kn(t)===mm};Ee.isMemo=function(t){return Kn(t)===fm};Ee.isPortal=function(t){return Kn(t)===e1};Ee.isProfiler=function(t){return Kn(t)===om};Ee.isStrictMode=function(t){return Kn(t)===am};Ee.isSuspense=function(t){return Kn(t)===dm};Ee.isSuspenseList=function(t){return Kn(t)===hm};Ee.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===im||t===om||t===am||t===dm||t===hm||t===fV||typeof t=="object"&&t!==null&&(t.$$typeof===mm||t.$$typeof===fm||t.$$typeof===lm||t.$$typeof===cm||t.$$typeof===um||t.$$typeof===NR||t.getModuleId!==void 0)};Ee.typeOf=Kn;function mV(){const t=JU();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0,i=n={callback:r,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){!s||e===null||(s=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}const nS={notify(){},get:()=>[]};function pV(t,e){let n,r=nS;function s(h){return c(),r.subscribe(h)}function i(){r.notify()}function a(){d.onStateChange&&d.onStateChange()}function o(){return!!n}function c(){n||(n=e?e.addNestedSub(a):t.subscribe(a),r=mV())}function u(){n&&(n(),n=void 0,r.clear(),r=nS)}const d={addNestedSub:s,notifyNestedSubs:i,handleChangeWrapper:a,isSubscribed:o,trySubscribe:c,tryUnsubscribe:u,getListeners:()=>r};return d}const gV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yV=gV?f.useLayoutEffect:f.useEffect;function vV({store:t,context:e,children:n,serverState:r,stabilityCheck:s="once",noopCheck:i="once"}){const a=f.useMemo(()=>{const u=pV(t);return{store:t,subscription:u,getServerState:r?()=>r:void 0,stabilityCheck:s,noopCheck:i}},[t,r,s,i]),o=f.useMemo(()=>t.getState(),[t]);yV(()=>{const{subscription:u}=a;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==t.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[a,o]);const c=e||ci;return f.createElement(c.Provider,{value:a},n)}function jR(t=ci){const e=t===ci?TR:Qx(t);return function(){const{store:r}=e();return r}}const xV=jR();function wV(t=ci){const e=t===ci?xV:jR(t);return function(){return e().dispatch}}const rn=wV();tV(QU.useSyncExternalStoreWithSelector);YU(oa.unstable_batchedUpdates);const wh=async({collection:t,id:e,msg:n})=>{await GM(sx(ys,t,e))},xc=async({collection:t,id:e,msg:n})=>HM(sx(ys,t,e)),pt=async({collection:t,id:e,data:n,msg:r})=>await qM(sx(ys,t,e),{...n},{merge:!0}),t1=async({file:t,folder:e,namePrefix:n,msg:r})=>{const s=n.replace("@gmail.com","")+"_"+t.name.replaceAll(" ","").toLowerCase(),i=wx(Ex,`${e+s}`),a=await eA(i,t);return{fileURL:await tA(a.ref),filePath:a.metadata.fullPath}},_V=async({blob:t,folder:e,songId:n,msg:r})=>{const s=n+"_stock",i=wx(Ex,`${e+s}`),a=await eA(i,t);return{fileURL:await tA(a.ref),filePath:a.metadata.fullPath}},$0=async({filePath:t,msg:e})=>{const n=wx(Ex,t);await r9(n)},n1=async t=>{await wh({collection:"songs",id:t.id,msg:">>> api: delete song doc"}),await $0({filePath:t.song_file_path,msg:">>> api: delete song file"}),t.lyric_id&&await wh({collection:"lyrics",id:t.lyric_id,msg:">>> api: delete song lyric doc"}),t.image_file_path&&await $0({filePath:t.image_file_path,msg:">>> api: delete song's image file"})},rS=async(t,e)=>{const n=t.map(r=>r.id);await pt({collection:"users",data:{playlist_ids:n},id:e.email,msg:">>> api: set user playlist_ids"})},EV=ir().queue||[],sS={queueSongs:EV,currentQueueId:null,currentSongData:null};function jp(t){for(let e=0;e<t.queueSongs.length;e++){const n=t.queueSongs[e];if(n.queue_id===t.currentQueueId){t.currentSongData={song:n,index:e};return}}t.currentSongData=null}const DR=Gx({name:"songQueue",initialState:sS,reducers:{setQueue(t,e){const n=e.payload.songs;t.queueSongs=n,jp(t),It("queue",n)},setCurrentQueueId(t,e){const n=e.payload;t.currentQueueId=n,jp(t)},removeSongFromQueue(t,e){const{index:n}=e.payload;t.queueSongs.splice(n,1),It("queue",t.queueSongs),t.currentSongData&&n<=t.currentSongData.index&&jp(t)},addSongToQueue:(t,e)=>{const n=e.payload.songs.map(r=>({...r,queue_id:ma(4)}));t.queueSongs.push(...n),It("queue",t.queueSongs)},resetSongQueue:t=>{Object.assign(t,sS)}}}),ct=t=>t.songQueue,{addSongToQueue:OR,setCurrentQueueId:ms,removeSongFromQueue:SV,setQueue:bV,resetSongQueue:kV}=DR.actions,TV=DR.reducer;function FR({active:t}){const{audioRef:e}=Ht();if(!e.current)throw new Error("useSongLyric !audioRef.current");const{playStatus:n}=Z(pn),{currentSongData:r}=Z(ct),{setLoading:s,setSongLyrics:i,songLyrics:a,loading:o,ranGetLyric:c}=Qz(),[u,d]=f.useState(!1),h=f.useRef(),m=async()=>{try{if(!r)return s(!1);s(!0);const g=await xc({collection:"lyrics",id:r.song.id,msg:">>> api: get lyric doc"});if(g.exists()){const x=g.data();typeof x.real_time=="string"?i(JSON.parse(x.real_time||"[]")):i(x.real_time)}}catch(g){console.log({message:g})}finally{s(!1)}},p=()=>{clearTimeout(h.current),d(!1),s(!0),i([]),c.current=!1};return f.useEffect(()=>{const g=async()=>{d(!0)};return e.current.addEventListener("loadeddata",g),()=>{var x;(x=e.current)==null||x.removeEventListener("loadeddata",g)}},[]),f.useEffect(()=>{a.length||u&&t&&(c.current||(c.current=!0,h.current=setTimeout(()=>{m()},500)))},[u,t]),f.useEffect(()=>{if(n==="error"){s(!1);return}return()=>{p()}},[r,n==="error"]),{songLyrics:a,loading:o,playStatus:n}}const LR=(t,e)=>{const[n,r]=f.useState(()=>JSON.parse(localStorage.getItem("HD-MP3")||"{}")[t]||e);return f.useEffect(()=>{const s=JSON.parse(localStorage.getItem("HD-MP3")||"{}");s[t]=n,localStorage.setItem("HD-MP3",JSON.stringify(s))},[n]),[n,r]},Dp={currentPlaylist:null,playlistSongs:[]},MR=Gx({name:"currentPlaylist",initialState:Dp,reducers:{setCurrentPlaylist(t,e){const{playlist:n,songs:r}=e.payload;t.currentPlaylist=n,t.playlistSongs=r},updateCurrentPlaylist:(t,e)=>{if(!t.currentPlaylist)return t;Object.assign(t.currentPlaylist,e.payload)},addSongsToPlaylist(t,e){if(!t.currentPlaylist)return t;const n=e.payload.map(r=>({...r,song_in:`playlist_${t.currentPlaylist.id}`,queue_id:ma(4)}));t.playlistSongs.push(...n)},setPlaylistSong(t,e){t.playlistSongs=e.payload},removeSong(t,e){const{index:n}=e.payload;t.playlistSongs.splice(n,1)},resetCurrentPlaylist:t=>{t.currentPlaylist=Dp.currentPlaylist,t.playlistSongs=Dp.playlistSongs}}}),fr=t=>t.currentPlaylist,{addSongsToPlaylist:IV,removeSong:lQ,setCurrentPlaylist:CV,updateCurrentPlaylist:z0,resetCurrentPlaylist:AV,setPlaylistSong:$R}=MR.actions,RV=MR.reducer;function PV(){const{currentPlaylist:t,playlistSongs:e}=Z(fr),n=f.useRef(!1),r=async()=>{if(!t||t.by==="admin")return;if(t.image_url){if(!e[0].image_url&&!n.current)return n.current=!0,await pt({collection:"playlist",id:t.id,data:{blurhash_encode:"",image_url:""},msg:">>> api: clear playlist image"});if(t.image_url===e[0].image_url)return}if(!e[0].image_url)return;const s={image_url:e[0].image_url,blurhash_encode:e[0].blurhash_encode||""};await pt({collection:"playlist",id:t.id,data:s,msg:">>> api: update playlist image"})};f.useEffect(()=>{!e.length||!t||r()},[e])}const zR=()=>{window.dispatchEvent(new Event("mousemove"))},B0=(t,e,n=!1)=>{const r=window.innerWidth,i=t.getBoundingClientRect().left,a=r-(i+t.offsetWidth),o=Math.abs(Math.ceil(i-a))/2;if(o<5)return!1;n&&(e.onscroll=()=>{},setTimeout(()=>{e.onscroll=zR},900)),n||Math.abs(i)>r||Math.abs(a)>r?e.style.scrollBehavior="auto":e.style.scrollBehavior="smooth";let c=e.scrollLeft;return a>i?setTimeout(()=>{e.scrollLeft=c-o},300):a<i&&setTimeout(()=>{e.scrollLeft=c+o},300),!0};function NV(){const t=rn(),{isOpenFullScreen:e,idle:n}=Ht(),{currentQueueId:r}=Z(ct),{playStatus:s}=Z(pn),i=f.useRef(null),a=f.useRef(null),o=f.useRef("paused"),c=()=>{!(a!=null&&a.current)||!(i!=null&&i.current)||B0(a.current,i.current,n)},u=m=>{let p=document.querySelector(".song-thumb.centered");if(!p)if(a.current)p=a.current;else return;let g;switch(m){case"ArrowRight":g=p.nextElementSibling;break;case"ArrowLeft":g=p.previousElementSibling;break}g&&i.current&&(p.classList.remove("centered"),g.classList.add("centered"),B0(g,i.current))},d=()=>{if(!a.current)return;const m=document.querySelector(".song-thumb.centered");if(!m||m.getAttribute("queue-id")===r)switch(console.log("go here"),o.current){case"playing":return t(st({triggerPlayStatus:"paused"}));case"paused":return t(st({triggerPlayStatus:"playing"}))}const p=m==null?void 0:m.getAttribute("queue-id");p&&t(ms(p))},h=m=>{if(m.key==="ArrowRight"||m.key==="ArrowLeft")return m.preventDefault(),u(m.key);m.key==="Enter"&&(m.preventDefault(),d())};return f.useEffect(()=>{e&&c()},[r,e]),f.useEffect(()=>{if(e)return document.addEventListener("keydown",h),()=>{var m;document.removeEventListener("keydown",h),(m=document.querySelector(".song-thumb.centered"))==null||m.classList.remove("centered")}},[r,e]),f.useEffect(()=>{const m=i==null?void 0:i.current;if(m)return m.onscroll=zR,()=>{m.onscroll=()=>{}}},[]),f.useEffect(()=>{o.current=s},[s]),{activeSongRef:a,containerRef:i}}function jV({textRef:t,textWrapperRef:e,content:n}){const r=f.useRef(),s=f.useRef(),i=f.useRef(!1),a=f.useRef(0),o=f.useRef(0),c=f.useRef(0),u=()=>{t.current&&(t.current.style.transition="none",t.current.style.transform="translateX(0)")},d=()=>{t.current&&(t.current.style.transition=`transform linear ${o.current}s`,t.current.style.transform=`translateX(-${c.current}px)`,s.current=setTimeout(u,o.current*1e3))},h=()=>{!t.current||!e.current||(c.current=t.current.offsetWidth-a.current,o.current=Math.ceil(c.current/35))},m=()=>{!i.current||!t.current||!e.current||(o.current=0,c.current=0,i.current=!1,clearInterval(r.current),clearTimeout(s.current),e.current.classList.remove("mask-image-horizontal"),u())},p=()=>{!t.current||!e.current||!n||!(t.current.offsetWidth>e.current.offsetWidth)||(i.current=!0,e.current.classList.add("mask-image-horizontal"),a.current=t.current.clientWidth,t.current.innerHTML=t.current.innerText+"&nbsp; &nbsp; &nbsp;"+t.current.innerText,h(),setTimeout(d,1e3),r.current=setInterval(d,o.current*1e3+3e3))};f.useEffect(()=>(p(),m),[n])}function DV(){const{setErrorToast:t,setSuccessToast:e}=xt(),{songs:n,setSongs:r}=At(),[s,i]=f.useState(!1);return{loading:s,action:async o=>{try{switch(i(!0),o.variant){case"delete":const c=n.filter(u=>u.id!==o.song.id);await n1(o.song),r(c),e(`'${o.song.name}' deleted`);break}}catch(c){console.log({message:c}),t()}finally{i(!1)}}}}const OV="End-Of-Stream";class Ke extends Error{constructor(){super(OV)}}class FV{constructor(){this.maxStreamReadSize=1*1024*1024,this.endOfStream=!1,this.peekQueue=[]}async peek(e,n,r){const s=await this.read(e,n,r);return this.peekQueue.push(e.subarray(n,n+s)),s}async read(e,n,r){if(r===0)return 0;let s=this.readFromPeekBuffer(e,n,r);if(s+=await this.readRemainderFromStream(e,n+s,r-s),s===0)throw new Ke;return s}readFromPeekBuffer(e,n,r){let s=r,i=0;for(;this.peekQueue.length>0&&s>0;){const a=this.peekQueue.pop();if(!a)throw new Error("peekData should be defined");const o=Math.min(a.length,s);e.set(a.subarray(0,o),n+i),i+=o,s-=o,o<a.length&&this.peekQueue.push(a.subarray(o))}return i}async readRemainderFromStream(e,n,r){let s=r,i=0;for(;s>0&&!this.endOfStream;){const a=Math.min(s,this.maxStreamReadSize),o=await this.readFromStream(e,n+i,a);if(o===0)break;i+=o,s-=o}return i}}class LV extends FV{constructor(e){super(),this.reader=e.getReader({mode:"byob"})}async readFromStream(e,n,r){if(this.endOfStream)throw new Ke;const s=await this.reader.read(new Uint8Array(r));return s.done&&(this.endOfStream=s.done),s.value?(e.set(s.value,n),s.value.byteLength):0}}class BR{constructor(e){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=(e==null?void 0:e.fileInfo)??{},this.onClose=e==null?void 0:e.onClose}async readToken(e,n=this.position){const r=new Uint8Array(e.len);if(await this.readBuffer(r,{position:n})<e.len)throw new Ke;return e.get(r,0)}async peekToken(e,n=this.position){const r=new Uint8Array(e.len);if(await this.peekBuffer(r,{position:n})<e.len)throw new Ke;return e.get(r,0)}async readNumber(e){if(await this.readBuffer(this.numBuffer,{length:e.len})<e.len)throw new Ke;return e.get(this.numBuffer,0)}async peekNumber(e){if(await this.peekBuffer(this.numBuffer,{length:e.len})<e.len)throw new Ke;return e.get(this.numBuffer,0)}async ignore(e){if(this.fileInfo.size!==void 0){const n=this.fileInfo.size-this.position;if(e>n)return this.position+=n,n}return this.position+=e,e}async close(){var e;await((e=this.onClose)==null?void 0:e.call(this))}normalizeOptions(e,n){if(n&&n.position!==void 0&&n.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return n?{mayBeLess:n.mayBeLess===!0,offset:n.offset?n.offset:0,length:n.length?n.length:e.length-(n.offset?n.offset:0),position:n.position?n.position:this.position}:{mayBeLess:!1,offset:0,length:e.length,position:this.position}}}const MV=256e3;class $V extends BR{constructor(e,n){super(n),this.streamReader=e}async readBuffer(e,n){const r=this.normalizeOptions(e,n),s=r.position-this.position;if(s>0)return await this.ignore(s),this.readBuffer(e,n);if(s<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(r.length===0)return 0;const i=await this.streamReader.read(e,r.offset,r.length);if(this.position+=i,(!n||!n.mayBeLess)&&i<r.length)throw new Ke;return i}async peekBuffer(e,n){const r=this.normalizeOptions(e,n);let s=0;if(r.position){const i=r.position-this.position;if(i>0){const a=new Uint8Array(r.length+i);return s=await this.peekBuffer(a,{mayBeLess:r.mayBeLess}),e.set(a.subarray(i),r.offset),s-i}if(i<0)throw new Error("Cannot peek from a negative offset in a stream")}if(r.length>0){try{s=await this.streamReader.peek(e,r.offset,r.length)}catch(i){if(n!=null&&n.mayBeLess&&i instanceof Ke)return 0;throw i}if(!r.mayBeLess&&s<r.length)throw new Ke}return s}async ignore(e){const n=Math.min(MV,e),r=new Uint8Array(n);let s=0;for(;s<e;){const i=e-s,a=await this.readBuffer(r,{length:Math.min(n,i)});if(a<0)return a;s+=a}return s}}class zV extends BR{constructor(e,n){super(n),this.uint8Array=e,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:e.length}async readBuffer(e,n){if(n!=null&&n.position){if(n.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=n.position}const r=await this.peekBuffer(e,n);return this.position+=r,r}async peekBuffer(e,n){const r=this.normalizeOptions(e,n),s=Math.min(this.uint8Array.length-r.position,r.length);if(!r.mayBeLess&&s<r.length)throw new Ke;return e.set(this.uint8Array.subarray(r.position,r.position+s),r.offset),s}close(){return super.close()}}function UR(t,e){return new $V(new LV(t),e)}function wo(t,e){return new zV(t,e)}/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var pm=function(t,e,n,r,s){var i,a,o=s*8-r-1,c=(1<<o)-1,u=c>>1,d=-7,h=n?s-1:0,m=n?-1:1,p=t[e+h];for(h+=m,i=p&(1<<-d)-1,p>>=-d,d+=o;d>0;i=i*256+t[e+h],h+=m,d-=8);for(a=i&(1<<-d)-1,i>>=-d,d+=r;d>0;a=a*256+t[e+h],h+=m,d-=8);if(i===0)i=1-u;else{if(i===c)return a?NaN:(p?-1:1)*(1/0);a=a+Math.pow(2,r),i=i-u}return(p?-1:1)*a*Math.pow(2,i-r)},gm=function(t,e,n,r,s,i){var a,o,c,u=i*8-s-1,d=(1<<u)-1,h=d>>1,m=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,g=r?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=d):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+h>=1?e+=m/c:e+=m*Math.pow(2,1-h),e*c>=2&&(a++,c/=2),a+h>=d?(o=0,a=d):a+h>=1?(o=(e*c-1)*Math.pow(2,s),a=a+h):(o=e*Math.pow(2,h-1)*Math.pow(2,s),a=0));s>=8;t[n+p]=o&255,p+=g,o/=256,s-=8);for(a=a<<s|o,u+=s;u>0;t[n+p]=a&255,p+=g,a/=256,u-=8);t[n+p-g]|=x*128};function re(t){return new DataView(t.buffer,t.byteOffset)}const se={len:1,get(t,e){return re(t).getUint8(e)},put(t,e,n){return re(t).setUint8(e,n),e+1}},ye={len:2,get(t,e){return re(t).getUint16(e,!0)},put(t,e,n){return re(t).setUint16(e,n,!0),e+2}},_e={len:2,get(t,e){return re(t).getUint16(e)},put(t,e,n){return re(t).setUint16(e,n),e+2}},_h={len:3,get(t,e){const n=re(t);return n.getUint8(e)+(n.getUint16(e+1,!0)<<8)},put(t,e,n){const r=re(t);return r.setUint8(e,n&255),r.setUint16(e+1,n>>8,!0),e+3}},en={len:3,get(t,e){const n=re(t);return(n.getUint16(e)<<8)+n.getUint8(e+2)},put(t,e,n){const r=re(t);return r.setUint16(e,n>>8),r.setUint8(e+2,n&255),e+3}},U={len:4,get(t,e){return re(t).getUint32(e,!0)},put(t,e,n){return re(t).setUint32(e,n,!0),e+4}},G={len:4,get(t,e){return re(t).getUint32(e)},put(t,e,n){return re(t).setUint32(e,n),e+4}},wc={len:1,get(t,e){return re(t).getInt8(e)},put(t,e,n){return re(t).setInt8(e,n),e+1}},Jr={len:2,get(t,e){return re(t).getInt16(e)},put(t,e,n){return re(t).setInt16(e,n),e+2}},BV={len:2,get(t,e){return re(t).getInt16(e,!0)},put(t,e,n){return re(t).setInt16(e,n,!0),e+2}},UV={len:3,get(t,e){const n=_h.get(t,e);return n>8388607?n-16777216:n},put(t,e,n){const r=re(t);return r.setUint8(e,n&255),r.setUint16(e+1,n>>8,!0),e+3}},r1={len:3,get(t,e){const n=en.get(t,e);return n>8388607?n-16777216:n},put(t,e,n){const r=re(t);return r.setUint16(e,n>>8),r.setUint8(e+2,n&255),e+3}},kn={len:4,get(t,e){return re(t).getInt32(e)},put(t,e,n){return re(t).setInt32(e,n),e+4}},qe={len:4,get(t,e){return re(t).getInt32(e,!0)},put(t,e,n){return re(t).setInt32(e,n,!0),e+4}},Qt={len:8,get(t,e){return re(t).getBigUint64(e,!0)},put(t,e,n){return re(t).setBigUint64(e,n,!0),e+8}},Eh={len:8,get(t,e){return re(t).getBigInt64(e,!0)},put(t,e,n){return re(t).setBigInt64(e,n,!0),e+8}},s1={len:8,get(t,e){return re(t).getBigUint64(e)},put(t,e,n){return re(t).setBigUint64(e,n),e+8}},VR={len:8,get(t,e){return re(t).getBigInt64(e)},put(t,e,n){return re(t).setBigInt64(e,n),e+8}},VV={len:2,get(t,e){return pm(t,e,!1,10,this.len)},put(t,e,n){return gm(t,n,e,!1,10,this.len),e+this.len}},WV={len:2,get(t,e){return pm(t,e,!0,10,this.len)},put(t,e,n){return gm(t,n,e,!0,10,this.len),e+this.len}},WR={len:4,get(t,e){return re(t).getFloat32(e)},put(t,e,n){return re(t).setFloat32(e,n),e+4}},HV={len:4,get(t,e){return re(t).getFloat32(e,!0)},put(t,e,n){return re(t).setFloat32(e,n,!0),e+4}},U0={len:8,get(t,e){return re(t).getFloat64(e)},put(t,e,n){return re(t).setFloat64(e,n),e+8}},qV={len:8,get(t,e){return re(t).getFloat64(e,!0)},put(t,e,n){return re(t).setFloat64(e,n,!0),e+8}},GV={len:10,get(t,e){return pm(t,e,!1,63,this.len)},put(t,e,n){return gm(t,n,e,!1,63,this.len),e+this.len}},KV={len:10,get(t,e){return pm(t,e,!0,63,this.len)},put(t,e,n){return gm(t,n,e,!0,63,this.len),e+this.len}};class QV{constructor(e){this.len=e}get(e,n){}}class sn{constructor(e){this.len=e}get(e,n){return e.subarray(n,n+this.len)}}class q{constructor(e,n){this.len=e,this.encoding=n,this.textDecoder=new TextDecoder(n)}get(e,n){return this.textDecoder.decode(e.subarray(n,n+this.len))}}class XV{constructor(e){this.len=e,this.textDecoder=new TextDecoder("windows-1252")}get(e,n=0){return this.textDecoder.decode(e.subarray(n,n+this.len))}}const YV=Object.freeze(Object.defineProperty({__proto__:null,AnsiStringType:XV,Float16_BE:VV,Float16_LE:WV,Float32_BE:WR,Float32_LE:HV,Float64_BE:U0,Float64_LE:qV,Float80_BE:GV,Float80_LE:KV,INT16_BE:Jr,INT16_LE:BV,INT24_BE:r1,INT24_LE:UV,INT32_BE:kn,INT32_LE:qe,INT64_BE:VR,INT64_LE:Eh,INT8:wc,IgnoreType:QV,StringType:q,UINT16_BE:_e,UINT16_LE:ye,UINT24_BE:en,UINT24_LE:_h,UINT32_BE:G,UINT32_LE:U,UINT64_BE:s1,UINT64_LE:Qt,UINT8:se,Uint8ArrayType:sn},Symbol.toStringTag,{value:"Module"})),JV=Object.prototype.toString,ZV="[object Uint8Array]",eW="[object ArrayBuffer]";function HR(t,e,n){return t?t.constructor===e?!0:JV.call(t)===n:!1}function qR(t){return HR(t,Uint8Array,ZV)}function tW(t){return HR(t,ArrayBuffer,eW)}function nW(t){return qR(t)||tW(t)}function rW(t){if(!qR(t))throw new TypeError(`Expected \`Uint8Array\`, got \`${typeof t}\``)}function sW(t){if(!nW(t))throw new TypeError(`Expected \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof t}\``)}const ju={utf8:new globalThis.TextDecoder("utf8")};function i1(t,e="utf8"){return sW(t),ju[e]??(ju[e]=new globalThis.TextDecoder(e)),ju[e].decode(t)}function GR(t){if(typeof t!="string")throw new TypeError(`Expected \`string\`, got \`${typeof t}\``)}const iW=new globalThis.TextEncoder;function aW(t){return GR(t),iW.encode(t)}const oW=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function a1(t){rW(t);let e="";for(let n=0;n<t.length;n++)e+=oW[t[n]];return e}const iS={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,A:10,B:11,C:12,D:13,E:14,F:15};function aS(t){if(GR(t),t.length%2!==0)throw new Error("Invalid Hex string length.");const e=t.length/2,n=new Uint8Array(e);for(let r=0;r<e;r++){const s=iS[t[r*2]],i=iS[t[r*2+1]];if(s===void 0||i===void 0)throw new Error(`Invalid Hex character encountered at position ${r*2}`);n[r]=s<<4|i}return n}function oS(t){const{byteLength:e}=t;if(e===6)return t.getUint16(0)*2**32+t.getUint32(2);if(e===5)return t.getUint8(0)*2**32+t.getUint32(1);if(e===4)return t.getUint32(0);if(e===3)return t.getUint8(0)*2**16+t.getUint16(1);if(e===2)return t.getUint16(0);if(e===1)return t.getUint8(0)}function KR(t,e){const n=t.length,r=e.length;if(r===0||r>n)return-1;const s=n-r;for(let i=0;i<=s;i++){let a=!0;for(let o=0;o<r;o++)if(t[i+o]!==e[o]){a=!1;break}if(a)return i}return-1}function lW(t,e){return KR(t,e)!==-1}function cW(t){return[...t].map(e=>e.charCodeAt(0))}function uW(t,e=0){const n=Number.parseInt(new q(6).get(t,148).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(n))return!1;let r=8*32;for(let s=e;s<e+148;s++)r+=t[s];for(let s=e+156;s<e+512;s++)r+=t[s];return n===r}const dW={get:(t,e)=>t[e+3]&127|t[e+2]<<7|t[e+1]<<14|t[e]<<21,len:4},hW=["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","elf","macho","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","j2c","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf","jls","pst","dwg","parquet","class","arj","cpio","ace","avro","icc","fbx","vsdx"],fW=["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/wav","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-elf","application/x-mach-binary","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/j2c","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd","image/jls","application/vnd.ms-outlook","image/vnd.dwg","application/x-parquet","application/java-vm","application/x-arj","application/x-cpio","application/x-ace-compressed","application/avro","application/vnd.iccprofile","application/x.autodesk.fbx","application/vnd.visio"],lS=4100;async function QR(t){return new mW().fromBuffer(t)}function yr(t,e,n){n={offset:0,...n};for(const[r,s]of e.entries())if(n.mask){if(s!==(n.mask[r]&t[r+n.offset]))return!1}else if(s!==t[r+n.offset])return!1;return!0}class mW{constructor(e){this.detectors=e==null?void 0:e.customDetectors,this.fromTokenizer=this.fromTokenizer.bind(this),this.fromBuffer=this.fromBuffer.bind(this),this.parse=this.parse.bind(this)}async fromTokenizer(e){const n=e.position;for(const r of this.detectors||[]){const s=await r(e);if(s)return s;if(n!==e.position)return}return this.parse(e)}async fromBuffer(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof e}\``);const n=e instanceof Uint8Array?e:new Uint8Array(e);if((n==null?void 0:n.length)>1)return this.fromTokenizer(wo(n))}async fromBlob(e){return this.fromStream(e.stream())}async fromStream(e){const n=await UR(e);try{return await this.fromTokenizer(n)}finally{await n.close()}}async toDetectionStream(e,n){const{sampleSize:r=lS}=n;let s,i;const a=e.getReader({mode:"byob"});try{const{value:u,done:d}=await a.read(new Uint8Array(r));if(i=u,!d&&u)try{s=await this.fromBuffer(u.slice(0,r))}catch(h){if(!(h instanceof Ke))throw h;s=void 0}i=u}finally{a.releaseLock()}const o=new TransformStream({async start(u){u.enqueue(i)},transform(u,d){d.enqueue(u)}}),c=e.pipeThrough(o);return c.fileType=s,c}check(e,n){return yr(this.buffer,e,n)}checkString(e,n){return this.check(cW(e),n)}async parse(e){if(this.buffer=new Uint8Array(lS),e.fileInfo.size===void 0&&(e.fileInfo.size=Number.MAX_SAFE_INTEGER),this.tokenizer=e,await e.peekBuffer(this.buffer,{length:12,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33]))return await e.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.parse(e);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await e.ignore(6);const n=await e.readToken(dW);return e.position+n>e.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await e.ignore(n),this.fromTokenizer(e))}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((this.buffer[0]===67||this.buffer[0]===70)&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255]))return this.check([247],{offset:3})?{ext:"jls",mime:"image/jls"}:{ext:"jpg",mime:"image/jpeg"};if(this.check([79,98,106,1]))return{ext:"avro",mime:"application/avro"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){try{for(;e.position+30<e.fileInfo.size;){await e.readBuffer(this.buffer,{length:30});const n=new DataView(this.buffer.buffer),r={compressedSize:n.getUint32(18,!0),uncompressedSize:n.getUint32(22,!0),filenameLength:n.getUint16(26,!0),extraFieldLength:n.getUint16(28,!0)};if(r.filename=await e.readToken(new q(r.filenameLength,"utf-8")),await e.ignore(r.extraFieldLength),r.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(r.filename.endsWith(".rels")||r.filename.endsWith(".xml"))switch(r.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};case"visio":return{ext:"vsdx",mime:"application/vnd.visio"};default:break}if(r.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(r.filename.startsWith("3D/")&&r.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(r.filename==="mimetype"&&r.compressedSize===r.uncompressedSize){let s=await e.readToken(new q(r.compressedSize,"utf-8"));switch(s=s.trim(),s){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}}if(r.compressedSize===0){let s=-1;for(;s<0&&e.position<e.fileInfo.size;)await e.peekBuffer(this.buffer,{mayBeLess:!0}),s=KR(this.buffer,new Uint8Array([80,75,3,4])),await e.ignore(s>=0?s:this.buffer.length)}else await e.ignore(r.compressedSize)}}catch(n){if(!(n instanceof Ke))throw n}return{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await e.ignore(28);const n=new Uint8Array(8);return await e.readBuffer(n),yr(n,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:yr(n,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:yr(n,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:yr(n,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:yr(n,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:yr(n,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(this.buffer[2]===3||this.buffer[2]===5||this.buffer[2]===7)&&(this.buffer[3]===4||this.buffer[3]===6||this.buffer[3]===8))return{ext:"zip",mime:"application/zip"};if(this.checkString("ftyp",{offset:4})&&this.buffer[8]&96){const n=new q(4,"latin1").get(this.buffer,8).replace("\0"," ").trim();switch(n){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return n.startsWith("3g")?n.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF")){try{await e.ignore(1350);const n=10*1024*1024,r=new Uint8Array(Math.min(n,e.fileInfo.size));if(await e.readBuffer(r,{mayBeLess:!0}),lW(r,new TextEncoder().encode("AIPrivateData")))return{ext:"ai",mime:"application/postscript"}}catch(n){if(!(n instanceof Ke))throw n}return{ext:"pdf",mime:"application/pdf"}}if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){const n=await this.readTiffHeader(!1);if(n)return n}if(this.check([77,77])){const n=await this.readTiffHeader(!0);if(n)return n}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function n(){const o=await e.peekNumber(se);let c=128,u=0;for(;!(o&c)&&c!==0;)++u,c>>=1;const d=new Uint8Array(u+1);return await e.readBuffer(d),d}async function r(){const o=await n(),c=await n();c[0]^=128>>c.length-1;const u=Math.min(6,c.length),d=new DataView(o.buffer),h=new DataView(c.buffer,c.length-u,u);return{id:oS(d),len:oS(h)}}async function s(o){for(;o>0;){const c=await r();if(c.id===17026)return(await e.readToken(new q(c.len))).replaceAll(/\00.*$/g,"");await e.ignore(c.len),--o}}const i=await r();switch(await s(i.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(this.check([82,73,70,70])){if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/wav"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1"))return{ext:"parquet",mime:"application/x-parquet"};if(this.check([207,250,237,254]))return{ext:"macho",mime:"application/x-mach-binary"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190]))return{ext:"class",mime:"application/java-vm"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(this.buffer[6]===0||this.buffer[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){const n=new q(4,"latin1").get(this.buffer,2);if(n.match("^d*")&&n>=1e3&&n<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>"))return await e.ignore(8),await e.readToken(new q(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(this.checkString("**ACE",{offset:7})&&(await e.peekBuffer(this.buffer,{length:14,mayBeLess:!0}),this.checkString("**",{offset:12})))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.check([137,80,78,71,13,10,26,10])){await e.ignore(8);async function n(){return{length:await e.readToken(kn),type:await e.readToken(new q(4,"latin1"))}}do{const r=await n();if(r.length<0)return;switch(r.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await e.ignore(r.length+4)}}while(e.position+8<e.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function n(){const r=new Uint8Array(16);return await e.readBuffer(r),{id:r,size:Number(await e.readToken(Qt))}}for(await e.ignore(30);e.position+24<e.fileInfo.size;){const r=await n();let s=r.size-24;if(yr(r.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const i=new Uint8Array(16);if(s-=await e.readBuffer(i),yr(i,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(yr(i,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await e.ignore(s)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await e.ignore(20),await e.readToken(new q(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255]))return this.check([0,60,0,63,0,120,0,109,0,108],{offset:2})?{ext:"xml",mime:"application/xml"}:void 0;if(this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await e.peekBuffer(this.buffer,{length:Math.min(256,e.fileInfo.size),mayBeLess:!0}),this.check([97,99,115,112],{offset:36}))return{ext:"icc",mime:"application/vnd.iccprofile"};if(this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){const n=new DataView(this.buffer.buffer).getUint32(12,!0);if(n>12&&this.buffer.length>=n+16)try{const r=new TextDecoder().decode(this.buffer.slice(16,n+16));if(JSON.parse(r).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.checkString("Kaydara FBX Binary  \0"))return{ext:"fbx",mime:"application/x.autodesk.fbx"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await e.peekBuffer(this.buffer,{length:Math.min(512,e.fileInfo.size),mayBeLess:!0}),uW(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254]))return this.check([60,0,63,0,120,0,109,0,108,0],{offset:2})?{ext:"xml",mime:"application/xml"}:this.check([255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0],{offset:2})?{ext:"skp",mime:"application/vnd.sketchup.skp"}:void 0;if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(this.buffer.length>=2&&this.check([255,224],{offset:0,mask:[255,224]})){if(this.check([16],{offset:1,mask:[22]}))return this.check([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(this.check([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}async readTiffTag(e){const n=await this.tokenizer.readToken(e?_e:ye);switch(this.tokenizer.ignore(10),n){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"}}}async readTiffIFD(e){const n=await this.tokenizer.readToken(e?_e:ye);for(let r=0;r<n;++r){const s=await this.readTiffTag(e);if(s)return s}}async readTiffHeader(e){const n=(e?_e:ye).get(this.buffer,2),r=(e?G:U).get(this.buffer,4);if(n===42){if(r>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(r>=8&&(this.check([28,0,254,0],{offset:8})||this.check([31,0,11,0],{offset:8})))return{ext:"nef",mime:"image/x-nikon-nef"}}return await this.tokenizer.ignore(r),await this.readTiffIFD(e)??{ext:"tif",mime:"image/tiff"}}if(n===43)return{ext:"tif",mime:"image/tiff"}}}new Set(hW);new Set(fW);var o1={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var cS=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,pW=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,XR=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,gW=/\\([\u000b\u0020-\u00ff])/g,yW=/([\\"])/g,YR=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;o1.format=vW;o1.parse=xW;function vW(t){if(!t||typeof t!="object")throw new TypeError("argument obj is required");var e=t.parameters,n=t.type;if(!n||!YR.test(n))throw new TypeError("invalid type");var r=n;if(e&&typeof e=="object")for(var s,i=Object.keys(e).sort(),a=0;a<i.length;a++){if(s=i[a],!XR.test(s))throw new TypeError("invalid parameter name");r+="; "+s+"="+_W(e[s])}return r}function xW(t){if(!t)throw new TypeError("argument string is required");var e=typeof t=="object"?wW(t):t;if(typeof e!="string")throw new TypeError("argument string is required to be a string");var n=e.indexOf(";"),r=n!==-1?e.slice(0,n).trim():e.trim();if(!YR.test(r))throw new TypeError("invalid media type");var s=new EW(r.toLowerCase());if(n!==-1){var i,a,o;for(cS.lastIndex=n;a=cS.exec(e);){if(a.index!==n)throw new TypeError("invalid parameter format");n+=a[0].length,i=a[1].toLowerCase(),o=a[2],o.charCodeAt(0)===34&&(o=o.slice(1,-1),o.indexOf("\\")!==-1&&(o=o.replace(gW,"$1"))),s.parameters[i]=o}if(n!==e.length)throw new TypeError("invalid parameter format")}return s}function wW(t){var e;if(typeof t.getHeader=="function"?e=t.getHeader("content-type"):typeof t.headers=="object"&&(e=t.headers&&t.headers["content-type"]),typeof e!="string")throw new TypeError("content-type header is missing from object");return e}function _W(t){var e=String(t);if(XR.test(e))return e;if(e.length>0&&!pW.test(e))throw new TypeError("invalid parameter value");return'"'+e.replace(yW,"\\$1")+'"'}function EW(t){this.parameters=Object.create(null),this.type=t}/*!
 * media-typer
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */var SW=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/,bW=kW;function kW(t){if(!t)throw new TypeError("argument string is required");if(typeof t!="string")throw new TypeError("argument string is required to be a string");var e=SW.exec(t.toLowerCase());if(!e)throw new TypeError("invalid media type");var n=e[1],r=e[2],s,i=r.lastIndexOf("+");return i!==-1&&(s=r.substr(i+1),r=r.substr(0,i)),new TW(n,r,s)}function TW(t,e,n){this.type=t,this.subtype=e,this.suffix=n}var V0={exports:{}},Op,uS;function IW(){if(uS)return Op;uS=1;var t=1e3,e=t*60,n=e*60,r=n*24,s=r*7,i=r*365.25;Op=function(d,h){h=h||{};var m=typeof d;if(m==="string"&&d.length>0)return a(d);if(m==="number"&&isFinite(d))return h.long?c(d):o(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function a(d){if(d=String(d),!(d.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(h){var m=parseFloat(h[1]),p=(h[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return m*i;case"weeks":case"week":case"w":return m*s;case"days":case"day":case"d":return m*r;case"hours":case"hour":case"hrs":case"hr":case"h":return m*n;case"minutes":case"minute":case"mins":case"min":case"m":return m*e;case"seconds":case"second":case"secs":case"sec":case"s":return m*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function o(d){var h=Math.abs(d);return h>=r?Math.round(d/r)+"d":h>=n?Math.round(d/n)+"h":h>=e?Math.round(d/e)+"m":h>=t?Math.round(d/t)+"s":d+"ms"}function c(d){var h=Math.abs(d);return h>=r?u(d,h,r,"day"):h>=n?u(d,h,n,"hour"):h>=e?u(d,h,e,"minute"):h>=t?u(d,h,t,"second"):d+" ms"}function u(d,h,m,p){var g=h>=m*1.5;return Math.round(d/m)+" "+p+(g?"s":"")}return Op}function CW(t){n.debug=n,n.default=n,n.coerce=c,n.disable=i,n.enable=s,n.enabled=a,n.humanize=IW(),n.destroy=u,Object.keys(t).forEach(d=>{n[d]=t[d]}),n.names=[],n.skips=[],n.formatters={};function e(d){let h=0;for(let m=0;m<d.length;m++)h=(h<<5)-h+d.charCodeAt(m),h|=0;return n.colors[Math.abs(h)%n.colors.length]}n.selectColor=e;function n(d){let h,m=null,p,g;function x(..._){if(!x.enabled)return;const v=x,y=Number(new Date),w=y-(h||y);v.diff=w,v.prev=h,v.curr=y,h=y,_[0]=n.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let E=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(b,k)=>{if(b==="%%")return"%";E++;const T=n.formatters[k];if(typeof T=="function"){const N=_[E];b=T.call(v,N),_.splice(E,1),E--}return b}),n.formatArgs.call(v,_),(v.log||n.log).apply(v,_)}return x.namespace=d,x.useColors=n.useColors(),x.color=n.selectColor(d),x.extend=r,x.destroy=n.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(p!==n.namespaces&&(p=n.namespaces,g=n.enabled(d)),g),set:_=>{m=_}}),typeof n.init=="function"&&n.init(x),x}function r(d,h){const m=n(this.namespace+(typeof h>"u"?":":h)+d);return m.log=this.log,m}function s(d){n.save(d),n.namespaces=d,n.names=[],n.skips=[];let h;const m=(typeof d=="string"?d:"").split(/[\s,]+/),p=m.length;for(h=0;h<p;h++)m[h]&&(d=m[h].replace(/\*/g,".*?"),d[0]==="-"?n.skips.push(new RegExp("^"+d.slice(1)+"$")):n.names.push(new RegExp("^"+d+"$")))}function i(){const d=[...n.names.map(o),...n.skips.map(o).map(h=>"-"+h)].join(",");return n.enable(""),d}function a(d){if(d[d.length-1]==="*")return!0;let h,m;for(h=0,m=n.skips.length;h<m;h++)if(n.skips[h].test(d))return!1;for(h=0,m=n.names.length;h<m;h++)if(n.names[h].test(d))return!0;return!1}function o(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function c(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var AW=CW;(function(t,e){e.formatArgs=r,e.save=s,e.load=i,e.useColors=n,e.storage=a(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let d=0,h=0;c[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(d++,m==="%c"&&(h=d))}),c.splice(h,0,u)}e.log=console.debug||console.log||(()=>{});function s(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function i(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c={}.DEBUG),c}function a(){try{return localStorage}catch{}}t.exports=AW(e);const{formatters:o}=t.exports;o.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(V0,V0.exports);var RW=V0.exports;const Se=e2(RW);var W0;(function(t){t[t.shot=10]="shot",t[t.scene=20]="scene",t[t.track=30]="track",t[t.part=40]="part",t[t.album=50]="album",t[t.edition=60]="edition",t[t.collection=70]="collection"})(W0||(W0={}));var ta;(function(t){t[t.video=1]="video",t[t.audio=2]="audio",t[t.complex=3]="complex",t[t.logo=4]="logo",t[t.subtitle=17]="subtitle",t[t.button=18]="button",t[t.control=32]="control"})(ta||(ta={}));function ze(t,e,n){return(t[e]&1<<n)!==0}function gn(t,e,n,r){let s=e;if(r==="utf-16le"){for(;t[s]!==0||t[s+1]!==0;){if(s>=n)return n;s+=2}return s}for(;t[s]!==0;){if(s>=n)return n;s++}return s}function JR(t){const e=t.indexOf("\0");return e===-1?t:t.substr(0,e)}function PW(t){const e=t.length;if(e&1)throw new Error("Buffer length must be even");for(let n=0;n<e;n+=2){const r=t[n];t[n]=t[n+1],t[n+1]=r}return t}function rt(t,e){if(t[0]===255&&t[1]===254)return rt(t.subarray(2),e);if(e==="utf-16le"&&t[0]===254&&t[1]===255){if(t.length&1)throw new Error("Expected even number of octets for 16-bit unicode string");return rt(PW(t),e)}return new q(t.length,e).get(t,0)}function Os(t){return t=t.replace(/^\x00+/g,""),t=t.replace(/\x00+$/g,""),t}function de(t,e,n,r){const s=e+~~(n/8),i=n%8;let a=t[s];a&=255>>i;const o=8-i,c=r-o;return c<0?a>>=8-i-r:c>0&&(a<<=c,a|=de(t,e,n+o,c)),a}function wn(t,e,n){return de(t,e,n,1)===1}function NW(t){const e=[];for(let n=0,r=t.length;n<r;n++){const s=Number(t.charCodeAt(n)).toString(16);e.push(s.length===1?`0${s}`:s)}return e.join(" ")}function jW(t){return 10*Math.log10(t)}function DW(t){return 10**(t/10)}function OW(t){const e=t.split(" ").map(n=>n.trim().toLowerCase());if(e.length>=1){const n=Number.parseFloat(e[0]);return e.length===2&&e[1]==="db"?{dB:n,ratio:DW(n)}:{dB:jW(n),ratio:n}}}var _c;(function(t){t[t.Other=0]="Other",t[t["32x32 pixels 'file icon' (PNG only)"]=1]="32x32 pixels 'file icon' (PNG only)",t[t["Other file icon"]=2]="Other file icon",t[t["Cover (front)"]=3]="Cover (front)",t[t["Cover (back)"]=4]="Cover (back)",t[t["Leaflet page"]=5]="Leaflet page",t[t["Media (e.g. label side of CD)"]=6]="Media (e.g. label side of CD)",t[t["Lead artist/lead performer/soloist"]=7]="Lead artist/lead performer/soloist",t[t["Artist/performer"]=8]="Artist/performer",t[t.Conductor=9]="Conductor",t[t["Band/Orchestra"]=10]="Band/Orchestra",t[t.Composer=11]="Composer",t[t["Lyricist/text writer"]=12]="Lyricist/text writer",t[t["Recording Location"]=13]="Recording Location",t[t["During recording"]=14]="During recording",t[t["During performance"]=15]="During performance",t[t["Movie/video screen capture"]=16]="Movie/video screen capture",t[t["A bright coloured fish"]=17]="A bright coloured fish",t[t.Illustration=18]="Illustration",t[t["Band/artist logotype"]=19]="Band/artist logotype",t[t["Publisher/Studio logotype"]=20]="Publisher/Studio logotype"})(_c||(_c={}));var dS;(function(t){t[t.other=0]="other",t[t.lyrics=1]="lyrics",t[t.text=2]="text",t[t.movement_part=3]="movement_part",t[t.events=4]="events",t[t.chord=5]="chord",t[t.trivia_pop=6]="trivia_pop"})(dS||(dS={}));var hS;(function(t){t[t.notSynchronized0=0]="notSynchronized0",t[t.mpegFrameNumber=1]="mpegFrameNumber",t[t.milliseconds=2]="milliseconds"})(hS||(hS={}));const ZR={get:(t,e)=>t[e+3]&127|t[e+2]<<7|t[e+1]<<14|t[e]<<21,len:4},H0={len:10,get:(t,e)=>({fileIdentifier:new q(3,"ascii").get(t,e),version:{major:wc.get(t,e+3),revision:wc.get(t,e+4)},flags:{unsynchronisation:ze(t,e+5,7),isExtendedHeader:ze(t,e+5,6),expIndicator:ze(t,e+5,5),footer:ze(t,e+5,4)},size:ZR.get(t,e+6)})},fS={len:10,get:(t,e)=>({size:G.get(t,e),extendedFlags:_e.get(t,e+4),sizeOfPadding:G.get(t,e+6),crcDataPresent:ze(t,e+4,31)})},eP={len:1,get:(t,e)=>{switch(t[e]){case 0:return{encoding:"latin1"};case 1:return{encoding:"utf-16le",bom:!0};case 2:return{encoding:"utf-16le",bom:!1};case 3:return{encoding:"utf8",bom:!1};default:return{encoding:"utf8",bom:!1}}}},q0={len:4,get:(t,e)=>({encoding:eP.get(t,e),language:new q(3,"latin1").get(t,e+1)})},mS={len:6,get:(t,e)=>{const n=q0.get(t,e);return{encoding:n.encoding,language:n.language,timeStampFormat:se.get(t,e+4),contentType:se.get(t,e+5)}}},Sh={year:{multiple:!1},track:{multiple:!1},disk:{multiple:!1},title:{multiple:!1},artist:{multiple:!1},artists:{multiple:!0,unique:!0},albumartist:{multiple:!1},album:{multiple:!1},date:{multiple:!1},originaldate:{multiple:!1},originalyear:{multiple:!1},releasedate:{multiple:!1},comment:{multiple:!0,unique:!1},genre:{multiple:!0,unique:!0},picture:{multiple:!0,unique:!0},composer:{multiple:!0,unique:!0},lyrics:{multiple:!0,unique:!1},albumsort:{multiple:!1,unique:!0},titlesort:{multiple:!1,unique:!0},work:{multiple:!1,unique:!0},artistsort:{multiple:!1,unique:!0},albumartistsort:{multiple:!1,unique:!0},composersort:{multiple:!1,unique:!0},lyricist:{multiple:!0,unique:!0},writer:{multiple:!0,unique:!0},conductor:{multiple:!0,unique:!0},remixer:{multiple:!0,unique:!0},arranger:{multiple:!0,unique:!0},engineer:{multiple:!0,unique:!0},producer:{multiple:!0,unique:!0},technician:{multiple:!0,unique:!0},djmixer:{multiple:!0,unique:!0},mixer:{multiple:!0,unique:!0},label:{multiple:!0,unique:!0},grouping:{multiple:!1},subtitle:{multiple:!0},discsubtitle:{multiple:!1},totaltracks:{multiple:!1},totaldiscs:{multiple:!1},compilation:{multiple:!1},rating:{multiple:!0},bpm:{multiple:!1},mood:{multiple:!1},media:{multiple:!1},catalognumber:{multiple:!0,unique:!0},tvShow:{multiple:!1},tvShowSort:{multiple:!1},tvSeason:{multiple:!1},tvEpisode:{multiple:!1},tvEpisodeId:{multiple:!1},tvNetwork:{multiple:!1},podcast:{multiple:!1},podcasturl:{multiple:!1},releasestatus:{multiple:!1},releasetype:{multiple:!0},releasecountry:{multiple:!1},script:{multiple:!1},language:{multiple:!1},copyright:{multiple:!1},license:{multiple:!1},encodedby:{multiple:!1},encodersettings:{multiple:!1},gapless:{multiple:!1},barcode:{multiple:!1},isrc:{multiple:!0},asin:{multiple:!1},musicbrainz_recordingid:{multiple:!1},musicbrainz_trackid:{multiple:!1},musicbrainz_albumid:{multiple:!1},musicbrainz_artistid:{multiple:!0},musicbrainz_albumartistid:{multiple:!0},musicbrainz_releasegroupid:{multiple:!1},musicbrainz_workid:{multiple:!1},musicbrainz_trmid:{multiple:!1},musicbrainz_discid:{multiple:!1},acoustid_id:{multiple:!1},acoustid_fingerprint:{multiple:!1},musicip_puid:{multiple:!1},musicip_fingerprint:{multiple:!1},website:{multiple:!1},"performer:instrument":{multiple:!0,unique:!0},averageLevel:{multiple:!1},peakLevel:{multiple:!1},notes:{multiple:!0,unique:!1},key:{multiple:!1},originalalbum:{multiple:!1},originalartist:{multiple:!1},discogs_artist_id:{multiple:!0,unique:!0},discogs_release_id:{multiple:!1},discogs_label_id:{multiple:!1},discogs_master_release_id:{multiple:!1},discogs_votes:{multiple:!1},discogs_rating:{multiple:!1},replaygain_track_peak:{multiple:!1},replaygain_track_gain:{multiple:!1},replaygain_album_peak:{multiple:!1},replaygain_album_gain:{multiple:!1},replaygain_track_minmax:{multiple:!1},replaygain_album_minmax:{multiple:!1},replaygain_undo:{multiple:!1},description:{multiple:!0},longDescription:{multiple:!1},category:{multiple:!0},hdVideo:{multiple:!1},keywords:{multiple:!0},movement:{multiple:!1},movementIndex:{multiple:!1},movementTotal:{multiple:!1},podcastId:{multiple:!1},showMovement:{multiple:!1},stik:{multiple:!1}};function FW(t){return Sh[t]&&!Sh[t].multiple}function LW(t){return!Sh[t].multiple||Sh[t].unique||!1}class Sn{static toIntOrNull(e){const n=Number.parseInt(e,10);return Number.isNaN(n)?null:n}static normalizeTrack(e){const n=e.toString().split("/");return{no:Number.parseInt(n[0],10)||null,of:Number.parseInt(n[1],10)||null}}constructor(e,n){this.tagTypes=e,this.tagMap=n}mapGenericTag(e,n){e={id:e.id,value:e.value},this.postMap(e,n);const r=this.getCommonName(e.id);return r?{id:r,value:e.value}:null}getCommonName(e){return this.tagMap[e]}postMap(e,n){}}Sn.maxRatingScore=1;const MW={title:"title",artist:"artist",album:"album",year:"year",comment:"comment",track:"track",genre:"genre"};class $W extends Sn{constructor(){super(["ID3v1"],MW)}}class ru extends Sn{constructor(e,n){const r={};for(const s of Object.keys(n))r[s.toUpperCase()]=n[s];super(e,r)}getCommonName(e){return this.tagMap[e.toUpperCase()]}}const zW={TIT2:"title",TPE1:"artist","TXXX:Artists":"artists",TPE2:"albumartist",TALB:"album",TDRV:"date",TORY:"originalyear",TPOS:"disk",TCON:"genre",APIC:"picture",TCOM:"composer",USLT:"lyrics",TSOA:"albumsort",TSOT:"titlesort",TOAL:"originalalbum",TSOP:"artistsort",TSO2:"albumartistsort",TSOC:"composersort",TEXT:"lyricist","TXXX:Writer":"writer",TPE3:"conductor",TPE4:"remixer","IPLS:arranger":"arranger","IPLS:engineer":"engineer","IPLS:producer":"producer","IPLS:DJ-mix":"djmixer","IPLS:mix":"mixer",TPUB:"label",TIT1:"grouping",TIT3:"subtitle",TRCK:"track",TCMP:"compilation",POPM:"rating",TBPM:"bpm",TMED:"media","TXXX:CATALOGNUMBER":"catalognumber","TXXX:MusicBrainz Album Status":"releasestatus","TXXX:MusicBrainz Album Type":"releasetype","TXXX:MusicBrainz Album Release Country":"releasecountry","TXXX:RELEASECOUNTRY":"releasecountry","TXXX:SCRIPT":"script",TLAN:"language",TCOP:"copyright",WCOP:"license",TENC:"encodedby",TSSE:"encodersettings","TXXX:BARCODE":"barcode","TXXX:ISRC":"isrc",TSRC:"isrc","TXXX:ASIN":"asin","TXXX:originalyear":"originalyear","UFID:http://musicbrainz.org":"musicbrainz_recordingid","TXXX:MusicBrainz Release Track Id":"musicbrainz_trackid","TXXX:MusicBrainz Album Id":"musicbrainz_albumid","TXXX:MusicBrainz Artist Id":"musicbrainz_artistid","TXXX:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","TXXX:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","TXXX:MusicBrainz Work Id":"musicbrainz_workid","TXXX:MusicBrainz TRM Id":"musicbrainz_trmid","TXXX:MusicBrainz Disc Id":"musicbrainz_discid","TXXX:ACOUSTID_ID":"acoustid_id","TXXX:Acoustid Id":"acoustid_id","TXXX:Acoustid Fingerprint":"acoustid_fingerprint","TXXX:MusicIP PUID":"musicip_puid","TXXX:MusicMagic Fingerprint":"musicip_fingerprint",WOAR:"website",TDRC:"date",TYER:"year",TDOR:"originaldate","TIPL:arranger":"arranger","TIPL:engineer":"engineer","TIPL:producer":"producer","TIPL:DJ-mix":"djmixer","TIPL:mix":"mixer",TMOO:"mood",SYLT:"lyrics",TSST:"discsubtitle",TKEY:"key",COMM:"comment",TOPE:"originalartist","PRIV:AverageLevel":"averageLevel","PRIV:PeakLevel":"peakLevel","TXXX:DISCOGS_ARTIST_ID":"discogs_artist_id","TXXX:DISCOGS_ARTISTS":"artists","TXXX:DISCOGS_ARTIST_NAME":"artists","TXXX:DISCOGS_ALBUM_ARTISTS":"albumartist","TXXX:DISCOGS_CATALOG":"catalognumber","TXXX:DISCOGS_COUNTRY":"releasecountry","TXXX:DISCOGS_DATE":"originaldate","TXXX:DISCOGS_LABEL":"label","TXXX:DISCOGS_LABEL_ID":"discogs_label_id","TXXX:DISCOGS_MASTER_RELEASE_ID":"discogs_master_release_id","TXXX:DISCOGS_RATING":"discogs_rating","TXXX:DISCOGS_RELEASED":"date","TXXX:DISCOGS_RELEASE_ID":"discogs_release_id","TXXX:DISCOGS_VOTES":"discogs_votes","TXXX:CATALOGID":"catalognumber","TXXX:STYLE":"genre","TXXX:REPLAYGAIN_TRACK_PEAK":"replaygain_track_peak","TXXX:REPLAYGAIN_TRACK_GAIN":"replaygain_track_gain","TXXX:REPLAYGAIN_ALBUM_PEAK":"replaygain_album_peak","TXXX:REPLAYGAIN_ALBUM_GAIN":"replaygain_album_gain","TXXX:MP3GAIN_MINMAX":"replaygain_track_minmax","TXXX:MP3GAIN_ALBUM_MINMAX":"replaygain_album_minmax","TXXX:MP3GAIN_UNDO":"replaygain_undo",MVNM:"movement",MVIN:"movementIndex",PCST:"podcast",TCAT:"category",TDES:"description",TDRL:"releasedate",TGID:"podcastId",TKWD:"keywords",WFED:"podcasturl",GRP1:"grouping"};class l1 extends ru{static toRating(e){return{source:e.email,rating:e.rating>0?(e.rating-1)/254*Sn.maxRatingScore:void 0}}constructor(){super(["ID3v2.3","ID3v2.4"],zW)}postMap(e,n){switch(e.id){case"UFID":{const r=e.value;r.owner_identifier==="http://musicbrainz.org"&&(e.id+=`:${r.owner_identifier}`,e.value=rt(r.identifier,"latin1"))}break;case"PRIV":{const r=e.value;switch(r.owner_identifier){case"AverageLevel":case"PeakValue":e.id+=`:${r.owner_identifier}`,e.value=r.data.length===4?U.get(r.data,0):null,e.value===null&&n.addWarning("Failed to parse PRIV:PeakValue");break;default:n.addWarning(`Unknown PRIV owner-identifier: ${r.data}`)}}break;case"POPM":e.value=l1.toRating(e.value);break}}}const BW={Title:"title",Author:"artist","WM/AlbumArtist":"albumartist","WM/AlbumTitle":"album","WM/Year":"date","WM/OriginalReleaseTime":"originaldate","WM/OriginalReleaseYear":"originalyear",Description:"comment","WM/TrackNumber":"track","WM/PartOfSet":"disk","WM/Genre":"genre","WM/Composer":"composer","WM/Lyrics":"lyrics","WM/AlbumSortOrder":"albumsort","WM/TitleSortOrder":"titlesort","WM/ArtistSortOrder":"artistsort","WM/AlbumArtistSortOrder":"albumartistsort","WM/ComposerSortOrder":"composersort","WM/Writer":"lyricist","WM/Conductor":"conductor","WM/ModifiedBy":"remixer","WM/Engineer":"engineer","WM/Producer":"producer","WM/DJMixer":"djmixer","WM/Mixer":"mixer","WM/Publisher":"label","WM/ContentGroupDescription":"grouping","WM/SubTitle":"subtitle","WM/SetSubTitle":"discsubtitle","WM/IsCompilation":"compilation","WM/SharedUserRating":"rating","WM/BeatsPerMinute":"bpm","WM/Mood":"mood","WM/Media":"media","WM/CatalogNo":"catalognumber","MusicBrainz/Album Status":"releasestatus","MusicBrainz/Album Type":"releasetype","MusicBrainz/Album Release Country":"releasecountry","WM/Script":"script","WM/Language":"language",Copyright:"copyright",LICENSE:"license","WM/EncodedBy":"encodedby","WM/EncodingSettings":"encodersettings","WM/Barcode":"barcode","WM/ISRC":"isrc","MusicBrainz/Track Id":"musicbrainz_recordingid","MusicBrainz/Release Track Id":"musicbrainz_trackid","MusicBrainz/Album Id":"musicbrainz_albumid","MusicBrainz/Artist Id":"musicbrainz_artistid","MusicBrainz/Album Artist Id":"musicbrainz_albumartistid","MusicBrainz/Release Group Id":"musicbrainz_releasegroupid","MusicBrainz/Work Id":"musicbrainz_workid","MusicBrainz/TRM Id":"musicbrainz_trmid","MusicBrainz/Disc Id":"musicbrainz_discid","Acoustid/Id":"acoustid_id","Acoustid/Fingerprint":"acoustid_fingerprint","MusicIP/PUID":"musicip_puid","WM/ARTISTS":"artists","WM/InitialKey":"key",ASIN:"asin","WM/Work":"work","WM/AuthorURL":"website","WM/Picture":"picture"};class c1 extends Sn{static toRating(e){return{rating:Number.parseFloat(e+1)/5}}constructor(){super(["asf"],BW)}postMap(e){switch(e.id){case"WM/SharedUserRating":{const n=e.id.split(":");e.value=c1.toRating(e.value),e.id=n[0];break}}}}const UW={TT2:"title",TP1:"artist",TP2:"albumartist",TAL:"album",TYE:"year",COM:"comment",TRK:"track",TPA:"disk",TCO:"genre",PIC:"picture",TCM:"composer",TOR:"originaldate",TOT:"originalalbum",TXT:"lyricist",TP3:"conductor",TPB:"label",TT1:"grouping",TT3:"subtitle",TLA:"language",TCR:"copyright",WCP:"license",TEN:"encodedby",TSS:"encodersettings",WAR:"website",PCS:"podcast",TCP:"compilation",TDR:"date",TS2:"albumartistsort",TSA:"albumsort",TSC:"composersort",TSP:"artistsort",TST:"titlesort",WFD:"podcasturl",TBP:"bpm"};class VW extends ru{constructor(){super(["ID3v2.2"],UW)}}const WW={Title:"title",Artist:"artist",Artists:"artists","Album Artist":"albumartist",Album:"album",Year:"date",Originalyear:"originalyear",Originaldate:"originaldate",Releasedate:"releasedate",Comment:"comment",Track:"track",Disc:"disk",DISCNUMBER:"disk",Genre:"genre","Cover Art (Front)":"picture","Cover Art (Back)":"picture",Composer:"composer",Lyrics:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",Lyricist:"lyricist",Writer:"writer",Conductor:"conductor",MixArtist:"remixer",Arranger:"arranger",Engineer:"engineer",Producer:"producer",DJMixer:"djmixer",Mixer:"mixer",Label:"label",Grouping:"grouping",Subtitle:"subtitle",DiscSubtitle:"discsubtitle",Compilation:"compilation",BPM:"bpm",Mood:"mood",Media:"media",CatalogNumber:"catalognumber",MUSICBRAINZ_ALBUMSTATUS:"releasestatus",MUSICBRAINZ_ALBUMTYPE:"releasetype",RELEASECOUNTRY:"releasecountry",Script:"script",Language:"language",Copyright:"copyright",LICENSE:"license",EncodedBy:"encodedby",EncoderSettings:"encodersettings",Barcode:"barcode",ISRC:"isrc",ASIN:"asin",musicbrainz_trackid:"musicbrainz_recordingid",musicbrainz_releasetrackid:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",Acoustid_Id:"acoustid_id",ACOUSTID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",Weblink:"website",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",MP3GAIN_MINMAX:"replaygain_track_minmax",MP3GAIN_UNDO:"replaygain_undo"};class HW extends ru{constructor(){super(["APEv2"],WW)}}const qW={"nam":"title","ART":"artist",aART:"albumartist","----:com.apple.iTunes:Band":"albumartist","alb":"album","day":"date","cmt":"comment","com":"comment",trkn:"track",disk:"disk","gen":"genre",covr:"picture","wrt":"composer","lyr":"lyrics",soal:"albumsort",sonm:"titlesort",soar:"artistsort",soaa:"albumartistsort",soco:"composersort","----:com.apple.iTunes:LYRICIST":"lyricist","----:com.apple.iTunes:CONDUCTOR":"conductor","----:com.apple.iTunes:REMIXER":"remixer","----:com.apple.iTunes:ENGINEER":"engineer","----:com.apple.iTunes:PRODUCER":"producer","----:com.apple.iTunes:DJMIXER":"djmixer","----:com.apple.iTunes:MIXER":"mixer","----:com.apple.iTunes:LABEL":"label","grp":"grouping","----:com.apple.iTunes:SUBTITLE":"subtitle","----:com.apple.iTunes:DISCSUBTITLE":"discsubtitle",cpil:"compilation",tmpo:"bpm","----:com.apple.iTunes:MOOD":"mood","----:com.apple.iTunes:MEDIA":"media","----:com.apple.iTunes:CATALOGNUMBER":"catalognumber",tvsh:"tvShow",tvsn:"tvSeason",tves:"tvEpisode",sosn:"tvShowSort",tven:"tvEpisodeId",tvnn:"tvNetwork",pcst:"podcast",purl:"podcasturl","----:com.apple.iTunes:MusicBrainz Album Status":"releasestatus","----:com.apple.iTunes:MusicBrainz Album Type":"releasetype","----:com.apple.iTunes:MusicBrainz Album Release Country":"releasecountry","----:com.apple.iTunes:SCRIPT":"script","----:com.apple.iTunes:LANGUAGE":"language",cprt:"copyright","cpy":"copyright","----:com.apple.iTunes:LICENSE":"license","too":"encodedby",pgap:"gapless","----:com.apple.iTunes:BARCODE":"barcode","----:com.apple.iTunes:ISRC":"isrc","----:com.apple.iTunes:ASIN":"asin","----:com.apple.iTunes:NOTES":"comment","----:com.apple.iTunes:MusicBrainz Track Id":"musicbrainz_recordingid","----:com.apple.iTunes:MusicBrainz Release Track Id":"musicbrainz_trackid","----:com.apple.iTunes:MusicBrainz Album Id":"musicbrainz_albumid","----:com.apple.iTunes:MusicBrainz Artist Id":"musicbrainz_artistid","----:com.apple.iTunes:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","----:com.apple.iTunes:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","----:com.apple.iTunes:MusicBrainz Work Id":"musicbrainz_workid","----:com.apple.iTunes:MusicBrainz TRM Id":"musicbrainz_trmid","----:com.apple.iTunes:MusicBrainz Disc Id":"musicbrainz_discid","----:com.apple.iTunes:Acoustid Id":"acoustid_id","----:com.apple.iTunes:Acoustid Fingerprint":"acoustid_fingerprint","----:com.apple.iTunes:MusicIP PUID":"musicip_puid","----:com.apple.iTunes:fingerprint":"musicip_fingerprint","----:com.apple.iTunes:replaygain_track_gain":"replaygain_track_gain","----:com.apple.iTunes:replaygain_track_peak":"replaygain_track_peak","----:com.apple.iTunes:replaygain_album_gain":"replaygain_album_gain","----:com.apple.iTunes:replaygain_album_peak":"replaygain_album_peak","----:com.apple.iTunes:replaygain_track_minmax":"replaygain_track_minmax","----:com.apple.iTunes:replaygain_album_minmax":"replaygain_album_minmax","----:com.apple.iTunes:replaygain_undo":"replaygain_undo",gnre:"genre","----:com.apple.iTunes:ALBUMARTISTSORT":"albumartistsort","----:com.apple.iTunes:ARTISTS":"artists","----:com.apple.iTunes:ORIGINALDATE":"originaldate","----:com.apple.iTunes:ORIGINALYEAR":"originalyear","----:com.apple.iTunes:RELEASEDATE":"releasedate",desc:"description",ldes:"longDescription","mvn":"movement","mvi":"movementIndex","mvc":"movementTotal","wrk":"work",catg:"category",egid:"podcastId",hdvd:"hdVideo",keyw:"keywords",shwm:"showMovement",stik:"stik",rate:"rating"},GW="iTunes";class pS extends ru{constructor(){super([GW],qW)}postMap(e,n){switch(e.id){case"rate":e.value={source:void 0,rating:Number.parseFloat(e.value)/100};break}}}const KW={TITLE:"title",ARTIST:"artist",ARTISTS:"artists",ALBUMARTIST:"albumartist","ALBUM ARTIST":"albumartist",ALBUM:"album",DATE:"date",ORIGINALDATE:"originaldate",ORIGINALYEAR:"originalyear",RELEASEDATE:"releasedate",COMMENT:"comment",TRACKNUMBER:"track",DISCNUMBER:"disk",GENRE:"genre",METADATA_BLOCK_PICTURE:"picture",COMPOSER:"composer",LYRICS:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",LYRICIST:"lyricist",WRITER:"writer",CONDUCTOR:"conductor",REMIXER:"remixer",ARRANGER:"arranger",ENGINEER:"engineer",PRODUCER:"producer",DJMIXER:"djmixer",MIXER:"mixer",LABEL:"label",GROUPING:"grouping",SUBTITLE:"subtitle",DISCSUBTITLE:"discsubtitle",TRACKTOTAL:"totaltracks",DISCTOTAL:"totaldiscs",COMPILATION:"compilation",RATING:"rating",BPM:"bpm",KEY:"key",MOOD:"mood",MEDIA:"media",CATALOGNUMBER:"catalognumber",RELEASESTATUS:"releasestatus",RELEASETYPE:"releasetype",RELEASECOUNTRY:"releasecountry",SCRIPT:"script",LANGUAGE:"language",COPYRIGHT:"copyright",LICENSE:"license",ENCODEDBY:"encodedby",ENCODERSETTINGS:"encodersettings",BARCODE:"barcode",ISRC:"isrc",ASIN:"asin",MUSICBRAINZ_TRACKID:"musicbrainz_recordingid",MUSICBRAINZ_RELEASETRACKID:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",ACOUSTID_ID:"acoustid_id",ACOUSTID_ID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",WEBSITE:"website",NOTES:"notes",TOTALTRACKS:"totaltracks",TOTALDISCS:"totaldiscs",DISCOGS_ARTIST_ID:"discogs_artist_id",DISCOGS_ARTISTS:"artists",DISCOGS_ARTIST_NAME:"artists",DISCOGS_ALBUM_ARTISTS:"albumartist",DISCOGS_CATALOG:"catalognumber",DISCOGS_COUNTRY:"releasecountry",DISCOGS_DATE:"originaldate",DISCOGS_LABEL:"label",DISCOGS_LABEL_ID:"discogs_label_id",DISCOGS_MASTER_RELEASE_ID:"discogs_master_release_id",DISCOGS_RATING:"discogs_rating",DISCOGS_RELEASED:"date",DISCOGS_RELEASE_ID:"discogs_release_id",DISCOGS_VOTES:"discogs_votes",CATALOGID:"catalognumber",STYLE:"genre",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",REPLAYGAIN_ALBUM_GAIN:"replaygain_album_gain",REPLAYGAIN_ALBUM_PEAK:"replaygain_album_peak",REPLAYGAIN_MINMAX:"replaygain_track_minmax",REPLAYGAIN_ALBUM_MINMAX:"replaygain_album_minmax",REPLAYGAIN_UNDO:"replaygain_undo"};class bh extends Sn{static toRating(e,n,r){return{source:e?e.toLowerCase():void 0,rating:Number.parseFloat(n)/r*Sn.maxRatingScore}}constructor(){super(["vorbis"],KW)}postMap(e){if(e.id==="RATING")e.value=bh.toRating(void 0,e.value,100);else if(e.id.indexOf("RATING:")===0){const n=e.id.split(":");e.value=bh.toRating(n[1],e.value,1),e.id=n[0]}}}const QW={IART:"artist",ICRD:"date",INAM:"title",TITL:"title",IPRD:"album",ITRK:"track",IPRT:"track",COMM:"comment",ICMT:"comment",ICNT:"releasecountry",GNRE:"genre",IWRI:"writer",RATE:"rating",YEAR:"year",ISFT:"encodedby",CODE:"encodedby",TURL:"website",IGNR:"genre",IENG:"engineer",ITCH:"technician",IMED:"media",IRPD:"album"};class XW extends Sn{constructor(){super(["exif"],QW)}}const YW={"segment:title":"title","album:ARTIST":"albumartist","album:ARTISTSORT":"albumartistsort","album:TITLE":"album","album:DATE_RECORDED":"originaldate","album:DATE_RELEASED":"releasedate","album:PART_NUMBER":"disk","album:TOTAL_PARTS":"totaltracks","track:ARTIST":"artist","track:ARTISTSORT":"artistsort","track:TITLE":"title","track:PART_NUMBER":"track","track:MUSICBRAINZ_TRACKID":"musicbrainz_recordingid","track:MUSICBRAINZ_ALBUMID":"musicbrainz_albumid","track:MUSICBRAINZ_ARTISTID":"musicbrainz_artistid","track:PUBLISHER":"label","track:GENRE":"genre","track:ENCODER":"encodedby","track:ENCODER_OPTIONS":"encodersettings","edition:TOTAL_PARTS":"totaldiscs",picture:"picture"};class JW extends ru{constructor(){super(["matroska"],YW)}}const ZW={NAME:"title",AUTH:"artist","(c) ":"copyright",ANNO:"comment"};class eH extends Sn{constructor(){super(["AIFF"],ZW)}}class tH{constructor(){this.tagMappers={},[new $W,new VW,new l1,new pS,new pS,new bh,new HW,new c1,new XW,new JW,new eH].forEach(e=>{this.registerTagMapper(e)})}mapTag(e,n,r){if(this.tagMappers[e])return this.tagMappers[e].mapGenericTag(n,r);throw new Error(`No generic tag mapper defined for tag-format: ${e}`)}registerTagMapper(e){for(const n of e.tagTypes)this.tagMappers[n]=e}}const vi=Se("music-metadata:collector"),nH=["matroska","APEv2","vorbis","ID3v2.4","ID3v2.3","ID3v2.2","exif","asf","iTunes","AIFF","ID3v1"];class rH{constructor(e){this.opts=e,this.format={tagTypes:[],trackInfo:[]},this.native={},this.common={track:{no:null,of:null},disk:{no:null,of:null},movementIndex:{no:null,of:null}},this.quality={warnings:[]},this.commonOrigin={},this.originPriority={},this.tagMapper=new tH;let n=1;for(const r of nH)this.originPriority[r]=n++;this.originPriority.artificial=500,this.originPriority.id3v1=600}hasAny(){return Object.keys(this.native).length>0}addStreamInfo(e){vi(`streamInfo: type=${e.type?ta[e.type]:"?"}, codec=${e.codecName}`),this.format.trackInfo.push(e)}setFormat(e,n){var r;vi(`format: ${e} = ${n}`),this.format[e]=n,(r=this.opts)!=null&&r.observer&&this.opts.observer({metadata:this,tag:{type:"format",id:e,value:n}})}async addTag(e,n,r){vi(`tag ${e}.${n} = ${r}`),this.native[e]||(this.format.tagTypes.push(e),this.native[e]=[]),this.native[e].push({id:n,value:r}),await this.toCommon(e,n,r)}addWarning(e){this.quality.warnings.push({message:e})}async postMap(e,n){switch(n.id){case"artist":if(this.commonOrigin.artist===this.originPriority[e])return this.postMap("artificial",{id:"artists",value:n.value});this.common.artists||this.setGenericTag("artificial",{id:"artists",value:n.value});break;case"artists":if((!this.common.artist||this.commonOrigin.artist===this.originPriority.artificial)&&(!this.common.artists||this.common.artists.indexOf(n.value)===-1)){const r=(this.common.artists||[]).concat([n.value]),i={id:"artist",value:sH(r)};this.setGenericTag("artificial",i)}break;case"picture":return this.postFixPicture(n.value).then(r=>{r!==null&&(n.value=r,this.setGenericTag(e,n))});case"totaltracks":this.common.track.of=Sn.toIntOrNull(n.value);return;case"totaldiscs":this.common.disk.of=Sn.toIntOrNull(n.value);return;case"movementTotal":this.common.movementIndex.of=Sn.toIntOrNull(n.value);return;case"track":case"disk":case"movementIndex":{const r=this.common[n.id].of;this.common[n.id]=Sn.normalizeTrack(n.value),this.common[n.id].of=r??this.common[n.id].of;return}case"bpm":case"year":case"originalyear":n.value=Number.parseInt(n.value,10);break;case"date":{const r=Number.parseInt(n.value.substr(0,4),10);Number.isNaN(r)||(this.common.year=r);break}case"discogs_label_id":case"discogs_release_id":case"discogs_master_release_id":case"discogs_artist_id":case"discogs_votes":n.value=typeof n.value=="string"?Number.parseInt(n.value,10):n.value;break;case"replaygain_track_gain":case"replaygain_track_peak":case"replaygain_album_gain":case"replaygain_album_peak":n.value=OW(n.value);break;case"replaygain_track_minmax":n.value=n.value.split(",").map(r=>Number.parseInt(r,10));break;case"replaygain_undo":{const r=n.value.split(",").map(s=>Number.parseInt(s,10));n.value={leftChannel:r[0],rightChannel:r[1]};break}case"gapless":case"compilation":case"podcast":case"showMovement":n.value=n.value==="1"||n.value===1;break;case"isrc":{const r=this.common[n.id];if(r&&r.indexOf(n.value)!==-1)return;break}case"comment":typeof n.value=="string"&&(n.value={text:n.value}),n.value.descriptor==="iTunPGAP"&&this.setGenericTag(e,{id:"gapless",value:n.value.text==="1"});break}n.value!==null&&this.setGenericTag(e,n)}toCommonMetadata(){return{format:this.format,native:this.native,quality:this.quality,common:this.common}}async postFixPicture(e){if(e.data&&e.data.length>0){if(!e.format){const n=await QR(Uint8Array.from(e.data));if(n)e.format=n.mime;else return null}switch(e.format=e.format.toLocaleLowerCase(),e.format){case"image/jpg":e.format="image/jpeg"}return e}return this.addWarning("Empty picture tag found"),null}async toCommon(e,n,r){const s={id:n,value:r},i=this.tagMapper.mapTag(e,s,this);i&&await this.postMap(e,i)}setGenericTag(e,n){var i;vi(`common.${n.id} = ${n.value}`);const r=this.commonOrigin[n.id]||1e3,s=this.originPriority[e];if(FW(n.id))if(s<=r)this.common[n.id]=n.value,this.commonOrigin[n.id]=s;else return vi(`Ignore native tag (singleton): ${e}.${n.id} = ${n.value}`);else if(s===r)!LW(n.id)||this.common[n.id].indexOf(n.value)===-1?this.common[n.id].push(n.value):vi(`Ignore duplicate value: ${e}.${n.id} = ${n.value}`);else if(s<r)this.common[n.id]=[n.value],this.commonOrigin[n.id]=s;else return vi(`Ignore native tag (list): ${e}.${n.id} = ${n.value}`);(i=this.opts)!=null&&i.observer&&this.opts.observer({metadata:this,tag:{type:"common",id:n.id,value:n.value}})}}function sH(t){return t.length>2?`${t.slice(0,t.length-1).join(", ")} & ${t[t.length-1]}`:t.join(" & ")}class jn{constructor(){this.metadata=void 0,this.tokenizer=void 0,this.options=void 0}init(e,n,r){return this.metadata=e,this.tokenizer=n,this.options=r,this}}const iH=/^[\x21-\x7e][\x20-\x7e\x00()]{3}/,je={len:4,get:(t,e)=>{const n=i1(t.slice(e,e+je.len),"latin1");if(!n.match(iH))throw new Error(`FourCC contains invalid characters: ${NW(n)} "${n}"`);return n},put:(t,e,n)=>{const r=aW(n);if(r.length!==4)throw new Error("Invalid length");return t.set(r,e),e+4}};var $a;(function(t){t[t.text_utf8=0]="text_utf8",t[t.binary=1]="binary",t[t.external_info=2]="external_info",t[t.reserved=3]="reserved"})($a||($a={}));const gS={len:52,get:(t,e)=>({ID:je.get(t,e),version:U.get(t,e+4)/1e3,descriptorBytes:U.get(t,e+8),headerBytes:U.get(t,e+12),seekTableBytes:U.get(t,e+16),headerDataBytes:U.get(t,e+20),apeFrameDataBytes:U.get(t,e+24),apeFrameDataBytesHigh:U.get(t,e+28),terminatingDataBytes:U.get(t,e+32),fileMD5:new sn(16).get(t,e+36)})},aH={len:24,get:(t,e)=>({compressionLevel:ye.get(t,e),formatFlags:ye.get(t,e+2),blocksPerFrame:U.get(t,e+4),finalFrameBlocks:U.get(t,e+8),totalFrames:U.get(t,e+12),bitsPerSample:ye.get(t,e+16),channel:ye.get(t,e+18),sampleRate:U.get(t,e+20)})},Dn={len:32,get:(t,e)=>({ID:new q(8,"ascii").get(t,e),version:U.get(t,e+8),size:U.get(t,e+12),fields:U.get(t,e+16),flags:tP(U.get(t,e+20))})},Fp={len:8,get:(t,e)=>({size:U.get(t,e),flags:tP(U.get(t,e+4))})};function tP(t){return{containsHeader:Du(t,31),containsFooter:Du(t,30),isHeader:Du(t,29),readOnly:Du(t,0),dataType:(t&6)>>1}}function Du(t,e){return(t&1<<e)!==0}const xi=Se("music-metadata:parser:APEv2"),yS="APEv2",vS="APETAGEX";class Cr extends jn{constructor(){super(...arguments),this.ape={}}static tryParseApeHeader(e,n,r){const s=new Cr;return s.init(e,n,r),s.tryParseApeHeader()}static calculateDuration(e){let n=e.totalFrames>1?e.blocksPerFrame*(e.totalFrames-1):0;return n+=e.finalFrameBlocks,n/e.sampleRate}static async findApeFooterOffset(e,n){const r=new Uint8Array(Dn.len);await e.randomRead(r,0,Dn.len,n-Dn.len);const s=Dn.get(r,0);if(s.ID==="APETAGEX")return s.flags.isHeader?xi(`APE Header found at offset=${n-Dn.len}`):(xi(`APE Footer found at offset=${n-Dn.len}`),n-=s.size),{footer:s,offset:n}}static parseTagFooter(e,n,r){const s=Dn.get(n,n.length-Dn.len);if(s.ID!==vS)throw new Error("Unexpected APEv2 Footer ID preamble value.");wo(n);const i=new Cr;return i.init(e,wo(n),r),i.parseTags(s)}async tryParseApeHeader(){if(this.tokenizer.fileInfo.size&&this.tokenizer.fileInfo.size-this.tokenizer.position<Dn.len){xi("No APEv2 header found, end-of-file reached");return}const e=await this.tokenizer.peekToken(Dn);if(e.ID===vS)return await this.tokenizer.ignore(Dn.len),this.parseTags(e);if(xi(`APEv2 header not found at offset=${this.tokenizer.position}`),this.tokenizer.fileInfo.size){const n=this.tokenizer.fileInfo.size-this.tokenizer.position,r=new Uint8Array(n);return await this.tokenizer.readBuffer(r),Cr.parseTagFooter(this.metadata,r,this.options)}}async parse(){const e=await this.tokenizer.readToken(gS);if(e.ID!=="MAC ")throw new Error("Unexpected descriptor ID");this.ape.descriptor=e;const n=e.descriptorBytes-gS.len,r=await(n>0?this.parseDescriptorExpansion(n):this.parseHeader());return await this.tokenizer.ignore(r.forwardBytes),this.tryParseApeHeader()}async parseTags(e){const n=new Uint8Array(256);let r=e.size-Dn.len;xi(`Parse APE tags at offset=${this.tokenizer.position}, size=${r}`);for(let s=0;s<e.fields;s++){if(r<Fp.len){this.metadata.addWarning(`APEv2 Tag-header: ${e.fields-s} items remaining, but no more tag data to read.`);break}const i=await this.tokenizer.readToken(Fp);r-=Fp.len+i.size,await this.tokenizer.peekBuffer(n,{length:Math.min(n.length,r)});let a=gn(n,0,n.length);const o=await this.tokenizer.readToken(new q(a,"ascii"));switch(await this.tokenizer.ignore(1),r-=o.length+1,i.flags.dataType){case $a.text_utf8:{const u=(await this.tokenizer.readToken(new q(i.size,"utf8"))).split(/\x00/g);await Promise.all(u.map(d=>this.metadata.addTag(yS,o,d)));break}case $a.binary:if(this.options.skipCovers)await this.tokenizer.ignore(i.size);else{const c=new Uint8Array(i.size);await this.tokenizer.readBuffer(c),a=gn(c,0,c.length);const u=i1(c.slice(0,a)),d=c.slice(a+1);await this.metadata.addTag(yS,o,{description:u,data:d})}break;case $a.external_info:xi(`Ignore external info ${o}`),await this.tokenizer.ignore(i.size);break;case $a.reserved:xi(`Ignore external info ${o}`),this.metadata.addWarning(`APEv2 header declares a reserved datatype for "${o}"`),await this.tokenizer.ignore(i.size);break}}}async parseDescriptorExpansion(e){return await this.tokenizer.ignore(e),this.parseHeader()}async parseHeader(){const e=await this.tokenizer.readToken(aH);if(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("container","Monkey's Audio"),this.metadata.setFormat("bitsPerSample",e.bitsPerSample),this.metadata.setFormat("sampleRate",e.sampleRate),this.metadata.setFormat("numberOfChannels",e.channel),this.metadata.setFormat("duration",Cr.calculateDuration(e)),!this.ape.descriptor)throw new Error("Missing APE descriptor");return{forwardBytes:this.ape.descriptor.seekTableBytes+this.ape.descriptor.headerDataBytes+this.ape.descriptor.apeFrameDataBytes+this.ape.descriptor.terminatingDataBytes}}}const Ou=Se("music-metadata:parser:ID3v1"),kh=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","Alt. Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast-Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big Beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio Theatre","Neue Deutsche Welle","Podcast","Indie Rock","G-Funk","Dubstep","Garage Rock","Psybient"],Fu={len:128,get:(t,e)=>{const n=new xa(3).get(t,e);return n==="TAG"?{header:n,title:new xa(30).get(t,e+3),artist:new xa(30).get(t,e+33),album:new xa(30).get(t,e+63),year:new xa(4).get(t,e+93),comment:new xa(28).get(t,e+97),zeroByte:se.get(t,e+127),track:se.get(t,e+126),genre:se.get(t,e+127)}:null}};class xa{constructor(e){this.len=e,this.stringType=new q(e,"latin1")}get(e,n){let r=this.stringType.get(e,n);return r=JR(r),r=r.trim(),r.length>0?r:void 0}}class u1 extends jn{static getGenre(e){if(e<kh.length)return kh[e]}async parse(){if(!this.tokenizer.fileInfo.size){Ou("Skip checking for ID3v1 because the file-size is unknown");return}if(this.options.apeHeader){this.tokenizer.ignore(this.options.apeHeader.offset-this.tokenizer.position);const r=new Cr;r.init(this.metadata,this.tokenizer,this.options),await r.parseTags(this.options.apeHeader.footer)}const e=this.tokenizer.fileInfo.size-Fu.len;if(this.tokenizer.position>e){Ou("Already consumed the last 128 bytes");return}const n=await this.tokenizer.readToken(Fu,e);if(n){Ou("ID3v1 header found at: pos=%s",this.tokenizer.fileInfo.size-Fu.len);const r=["title","artist","album","comment","track","year"];for(const i of r)n[i]&&n[i]!==""&&await this.addTag(i,n[i]);const s=u1.getGenre(n.genre);s&&await this.addTag("genre",s)}else Ou("ID3v1 header not found at: pos=%s",this.tokenizer.fileInfo.size-Fu.len)}async addTag(e,n){await this.metadata.addTag("ID3v1",e,n)}}const xS=Se("music-metadata:id3v2:frame-parser"),Yn="latin1";function oH(t){const e=[];let n,r="";for(const s of t)if(typeof n=="string")if(s==="("&&n==="")r+="(",n=void 0;else if(s===")"){r!==""&&(e.push(r),r="");const i=wS(n);i&&e.push(i),n=void 0}else n+=s;else s==="("?n="":r+=s;return r&&(e.length===0&&r.match(/^\d*$/)&&(r=wS(r)),r&&e.push(r)),e}function wS(t){if(t==="RX")return"Remix";if(t==="CR")return"Cover";if(t.match(/^\d*$/))return kh[Number.parseInt(t)]}class yn{constructor(e,n){this.major=e,this.warningCollector=n}readData(e,n,r){if(e.length===0){this.warningCollector.addWarning(`id3v2.${this.major} header has empty tag type=${n}`);return}const{encoding:s,bom:i}=eP.get(e,0),a=e.length;let o=0,c=[];const u=yn.getNullTerminatorLength(s);let d;switch(xS(`Parsing tag type=${n}, encoding=${s}, bom=${i}`),n!=="TXXX"&&n[0]==="T"?"T*":n){case"T*":case"GRP1":case"IPLS":case"MVIN":case"MVNM":case"PCS":case"PCST":{let h;try{h=rt(e.slice(1),s).replace(/\x00+$/,"")}catch(m){if(m instanceof Error){this.warningCollector.addWarning(`id3v2.${this.major} type=${n} header has invalid string value: ${m.message}`);break}throw m}switch(n){case"TMCL":case"TIPL":case"IPLS":c=yn.functionList(this.splitValue(n,h));break;case"TRK":case"TRCK":case"TPOS":c=h;break;case"TCOM":case"TEXT":case"TOLY":case"TOPE":case"TPE1":case"TSRC":c=this.splitValue(n,h);break;case"TCO":case"TCON":c=this.splitValue(n,h).map(m=>oH(m)).reduce((m,p)=>m.concat(p),[]);break;case"PCS":case"PCST":c=this.major>=4?this.splitValue(n,h):[h],c=Array.isArray(c)&&c[0]===""?1:0;break;default:c=this.major>=4?this.splitValue(n,h):[h]}break}case"TXXX":{const h=yn.readIdentifierAndData(e,o+1,a,s);c={description:h.id,text:this.splitValue(n,rt(h.data,s).replace(/\x00+$/,""))};break}case"PIC":case"APIC":if(r){const h={};switch(o+=1,this.major){case 2:h.format=rt(e.slice(o,o+3),"latin1"),o+=3;break;case 3:case 4:d=gn(e,o,a,Yn),h.format=rt(e.slice(o,d),Yn),o=d+1;break;default:throw new Error(`Warning: unexpected major versionIndex: ${this.major}`)}h.format=yn.fixPictureMimeType(h.format),h.type=_c[e[o]],o+=1,d=gn(e,o,a,s),h.description=rt(e.slice(o,d),s),o=d+u,h.data=e.slice(o,a),c=h}break;case"CNT":case"PCNT":c=G.get(e,0);break;case"SYLT":{const h=mS.get(e,0);o+=mS.len;const m={descriptor:"",language:h.language,contentType:h.contentType,timeStampFormat:h.timeStampFormat,syncText:[]};let p=!1;for(;o<a;){const g=yn.readNullTerminatedString(e.subarray(o),h.encoding);if(o+=g.len,p){const x=G.get(e,o);o+=G.len,m.syncText.push({text:g.text,timestamp:x})}else m.descriptor=g.text,p=!0}c=m;break}case"ULT":case"USLT":case"COM":case"COMM":{const h=q0.get(e,o);o+=q0.len;const m=yn.readNullTerminatedString(e.subarray(o),h.encoding);o+=m.len;const p=yn.readNullTerminatedString(e.subarray(o),h.encoding);c={language:h.language,descriptor:m.text,text:p.text};break}case"UFID":{const h=yn.readIdentifierAndData(e,o,a,Yn);c={owner_identifier:h.id,identifier:h.data};break}case"PRIV":{const h=yn.readIdentifierAndData(e,o,a,Yn);c={owner_identifier:h.id,data:h.data};break}case"POPM":{d=gn(e,o,a,Yn);const h=rt(e.slice(o,d),Yn);o=d+1;const m=a-o;c={email:h,rating:se.get(e,o),counter:m>=5?G.get(e,o+1):void 0};break}case"GEOB":{d=gn(e,o+1,a,s);const h=rt(e.slice(o+1,d),Yn);o=d+1,d=gn(e,o,a-o,s);const m=rt(e.slice(o,d),Yn);o=d+1,d=gn(e,o,a-o,s);const p=rt(e.slice(o,d),Yn);c={type:h,filename:m,description:p,data:e.slice(o+1,a)};break}case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":d=gn(e,o+1,a,s),c=rt(e.slice(o,d),Yn);break;case"WXXX":{d=gn(e,o+1,a,s);const h=rt(e.slice(o+1,d),s);o=d+(s==="utf-16le"?2:1),c={description:h,url:rt(e.slice(o,a),Yn)};break}case"WFD":case"WFED":c=rt(e.slice(o+1,gn(e,o+1,a,s)),s);break;case"MCDI":{c=e.slice(0,a);break}default:xS(`Warning: unsupported id3v2-tag-type: ${n}`);break}return c}static readNullTerminatedString(e,n){let r=n.bom?2:0;const s=gn(e,r,e.length,n.encoding),i=e.slice(r,s);return n.encoding==="utf-16le"?r=s+2:r=s+1,{text:rt(i,n.encoding),len:r}}static fixPictureMimeType(e){switch(e=e.toLocaleLowerCase(),e){case"jpg":return"image/jpeg";case"png":return"image/png"}return e}static functionList(e){const n={};for(let r=0;r+1<e.length;r+=2){const s=e[r+1].split(",");n[e[r]]=n[e[r]]?n[e[r]].concat(s):s}return n}splitValue(e,n){let r;return this.major<4?(r=n.split(/\x00/g),r.length>1?this.warningCollector.addWarning(`ID3v2.${this.major} ${e} uses non standard null-separator.`):r=n.split(/\//g)):r=n.split(/\x00/g),yn.trimArray(r)}static trimArray(e){return e.map(n=>n.replace(/\x00+$/,"").trim())}static readIdentifierAndData(e,n,r,s){const i=gn(e,n,r,s),a=rt(e.slice(n,i),s);return n=i+yn.getNullTerminatorLength(s),{id:a,data:e.slice(n,r)}}static getNullTerminatorLength(e){return e==="utf-16le"?2:1}}const _S=new TextDecoder("ascii");class nr{constructor(){this.tokenizer=void 0,this.id3Header=void 0,this.metadata=void 0,this.headerType=void 0,this.options=void 0}static removeUnsyncBytes(e){let n=0,r=0;for(;n<e.length-1;)n!==r&&(e[r]=e[n]),n+=e[n]===255&&e[n+1]===0?2:1,r++;return n<e.length&&(e[r++]=e[n]),e.slice(0,r)}static getFrameHeaderLength(e){switch(e){case 2:return 6;case 3:case 4:return 10;default:throw new Error("header versionIndex is incorrect")}}static readFrameFlags(e){return{status:{tag_alter_preservation:ze(e,0,6),file_alter_preservation:ze(e,0,5),read_only:ze(e,0,4)},format:{grouping_identity:ze(e,1,7),compression:ze(e,1,3),encryption:ze(e,1,2),unsynchronisation:ze(e,1,1),data_length_indicator:ze(e,1,0)}}}static readFrameData(e,n,r,s,i){var o,c;const a=new yn(r,i);switch(r){case 2:return a.readData(e,n.id,s);case 3:case 4:return(o=n.flags)!=null&&o.format.unsynchronisation&&(e=nr.removeUnsyncBytes(e)),(c=n.flags)!=null&&c.format.data_length_indicator&&(e=e.slice(4,e.length)),a.readData(e,n.id,s);default:throw new Error(`Unexpected majorVer: ${r}`)}}static makeDescriptionTagName(e,n){return e+(n?`:${n}`:"")}async parse(e,n,r){this.tokenizer=n,this.metadata=e,this.options=r;const s=await this.tokenizer.readToken(H0);if(s.fileIdentifier!=="ID3")throw new Error("expected ID3-header file-identifier 'ID3' was not found");return this.id3Header=s,this.headerType=`ID3v2.${s.version.major}`,s.flags.isExtendedHeader?this.parseExtendedHeader():this.parseId3Data(s.size)}async parseExtendedHeader(){const e=await this.tokenizer.readToken(fS),n=e.size-fS.len;return n>0?this.parseExtendedHeaderData(n,e.size):this.parseId3Data(this.id3Header.size-e.size)}async parseExtendedHeaderData(e,n){return await this.tokenizer.ignore(e),this.parseId3Data(this.id3Header.size-n)}async parseId3Data(e){const n=await this.tokenizer.readToken(new sn(e));for(const r of this.parseMetadata(n))switch(r.id){case"TXXX":r.value&&await this.handleTag(r,r.value.text,()=>r.value.description);break;default:await(Array.isArray(r.value)?Promise.all(r.value.map(s=>this.addTag(r.id,s))):this.addTag(r.id,r.value))}}async handleTag(e,n,r,s=i=>i){await Promise.all(n.map(i=>this.addTag(nr.makeDescriptionTagName(e.id,r(i)),s(i))))}async addTag(e,n){await this.metadata.addTag(this.headerType,e,n)}parseMetadata(e){let n=0;const r=[];for(;n!==e.length;){const s=nr.getFrameHeaderLength(this.id3Header.version.major);if(n+s>e.length){this.metadata.addWarning("Illegal ID3v2 tag length");break}const i=e.slice(n,n+s);n+=s;const a=this.readFrameHeader(i,this.id3Header.version.major),o=e.slice(n,n+a.length);n+=a.length;const c=nr.readFrameData(o,a,this.id3Header.version.major,!this.options.skipCovers,this.metadata);c&&r.push({id:a.id,value:c})}return r}readFrameHeader(e,n){let r;switch(n){case 2:r={id:_S.decode(e.slice(0,3)),length:en.get(e,3)},r.id.match(/[A-Z0-9]{3}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${r.id}`);break;case 3:case 4:r={id:_S.decode(e.slice(0,4)),length:(n===4?ZR:G).get(e,4),flags:nr.readFrameFlags(e.slice(8,10))},r.id.match(/[A-Z0-9]{4}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${r.id}`);break;default:throw new Error(`Unexpected majorVer: ${n}`)}return r}}const lH={NONE:"not compressed	PCM	Apple Computer",sowt:"PCM (byte swapped)",fl32:"32-bit floating point IEEE 32-bit float",fl64:"64-bit floating point IEEE 64-bit float	Apple Computer",alaw:"ALaw 2:1	8-bit ITU-T G.711 A-law",ulaw:"Law 2:1	8-bit ITU-T G.711 -law	Apple Computer",ULAW:"CCITT G.711 u-law 8-bit ITU-T G.711 -law",ALAW:"CCITT G.711 A-law 8-bit ITU-T G.711 A-law",FL32:"Float 32	IEEE 32-bit float "};class cH{constructor(e,n){this.isAifc=n;const r=n?22:18;if(e.chunkSize<r)throw new Error(`COMMON CHUNK size should always be at least ${r}`);this.len=e.chunkSize}get(e,n){const r=_e.get(e,n+8)-16398,s=_e.get(e,n+8+2),i={numChannels:_e.get(e,n),numSampleFrames:G.get(e,n+2),sampleSize:_e.get(e,n+6),sampleRate:r<0?s>>Math.abs(r):s<<r};if(this.isAifc){if(i.compressionType=je.get(e,n+18),this.len>22){const a=se.get(e,n+22);if(a>0){const o=(a+1)%2;if(23+a+o===this.len)i.compressionName=new q(a,"latin1").get(e,n+23);else throw new Error("Illegal pstring length")}else i.compressionName=void 0}}else i.compressionName="PCM";return i}}const Lp={len:8,get:(t,e)=>({chunkID:je.get(t,e),chunkSize:Number(BigInt(G.get(t,e+4)))})},Mp=Se("music-metadata:parser:aiff");class uH extends jn{constructor(){super(...arguments),this.isCompressed=null}async parse(){if((await this.tokenizer.readToken(Lp)).chunkID!=="FORM")throw new Error("Invalid Chunk-ID, expected 'FORM'");const n=await this.tokenizer.readToken(je);switch(n){case"AIFF":this.metadata.setFormat("container",n),this.isCompressed=!1;break;case"AIFC":this.metadata.setFormat("container","AIFF-C"),this.isCompressed=!0;break;default:throw new Error(`Unsupported AIFF type: ${n}`)}this.metadata.setFormat("lossless",!this.isCompressed);try{for(;!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=Lp.len;){Mp(`Reading AIFF chunk at offset=${this.tokenizer.position}`);const r=await this.tokenizer.readToken(Lp),s=2*Math.round(r.chunkSize/2),i=await this.readData(r);await this.tokenizer.ignore(s-i)}}catch(r){if(r instanceof Ke)Mp("End-of-stream");else throw r}}async readData(e){switch(e.chunkID){case"COMM":{if(this.isCompressed===null)throw new Error("Failed to parse AIFF.COMM chunk when compression type is unknown");const n=await this.tokenizer.readToken(new cH(e,this.isCompressed));return this.metadata.setFormat("bitsPerSample",n.sampleSize),this.metadata.setFormat("sampleRate",n.sampleRate),this.metadata.setFormat("numberOfChannels",n.numChannels),this.metadata.setFormat("numberOfSamples",n.numSampleFrames),this.metadata.setFormat("duration",n.numSampleFrames/n.sampleRate),(n.compressionName||n.compressionType)&&this.metadata.setFormat("codec",n.compressionName??lH[n.compressionType]),e.chunkSize}case"ID3 ":{const n=await this.tokenizer.readToken(new sn(e.chunkSize)),r=wo(n);return await new nr().parse(this.metadata,r,this.options),e.chunkSize}case"SSND":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*e.chunkSize/this.metadata.format.duration),0;case"NAME":case"AUTH":case"(c) ":case"ANNO":return this.readTextChunk(e);default:return Mp(`Ignore chunk id=${e.chunkID}, size=${e.chunkSize}`),0}}async readTextChunk(e){const r=(await this.tokenizer.readToken(new q(e.chunkSize,"ascii"))).split("\0").map(s=>s.trim()).filter(s=>s==null?void 0:s.length);return await Promise.all(r.map(s=>this.metadata.addTag("AIFF",e.chunkID,s))),e.chunkSize}}class I{static fromBin(e,n=0){return new I(I.decode(e,n))}static decode(e,n=0){const r=new DataView(e.buffer,n);return`${r.getUint32(0,!0).toString(16)}-${r.getUint16(4,!0).toString(16)}-${r.getUint16(6,!0).toString(16)}-${r.getUint16(8).toString(16)}-${a1(e.slice(n+10,n+16))}`.toUpperCase()}static decodeMediaType(e){switch(e.str){case I.AudioMedia.str:return"audio";case I.VideoMedia.str:return"video";case I.CommandMedia.str:return"command";case I.Degradable_JPEG_Media.str:return"degradable-jpeg";case I.FileTransferMedia.str:return"file-transfer";case I.BinaryMedia.str:return"binary"}}static encode(e){const n=new Uint8Array(16),r=new DataView(n.buffer);return r.setUint32(0,Number.parseInt(e.slice(0,8),16),!0),r.setUint16(4,Number.parseInt(e.slice(9,13),16),!0),r.setUint16(6,Number.parseInt(e.slice(14,18),16),!0),n.set(aS(e.slice(19,23)),8),n.set(aS(e.slice(24)),10),n}constructor(e){this.str=e}equals(e){return this.str===e.str}toBin(){return I.encode(this.str)}}I.HeaderObject=new I("75B22630-668E-11CF-A6D9-00AA0062CE6C");I.DataObject=new I("75B22636-668E-11CF-A6D9-00AA0062CE6C");I.SimpleIndexObject=new I("33000890-E5B1-11CF-89F4-00A0C90349CB");I.IndexObject=new I("D6E229D3-35DA-11D1-9034-00A0C90349BE");I.MediaObjectIndexObject=new I("FEB103F8-12AD-4C64-840F-2A1D2F7AD48C");I.TimecodeIndexObject=new I("3CB73FD0-0C4A-4803-953D-EDF7B6228F0C");I.FilePropertiesObject=new I("8CABDCA1-A947-11CF-8EE4-00C00C205365");I.StreamPropertiesObject=new I("B7DC0791-A9B7-11CF-8EE6-00C00C205365");I.HeaderExtensionObject=new I("5FBF03B5-A92E-11CF-8EE3-00C00C205365");I.CodecListObject=new I("86D15240-311D-11D0-A3A4-00A0C90348F6");I.ScriptCommandObject=new I("1EFB1A30-0B62-11D0-A39B-00A0C90348F6");I.MarkerObject=new I("F487CD01-A951-11CF-8EE6-00C00C205365");I.BitrateMutualExclusionObject=new I("D6E229DC-35DA-11D1-9034-00A0C90349BE");I.ErrorCorrectionObject=new I("75B22635-668E-11CF-A6D9-00AA0062CE6C");I.ContentDescriptionObject=new I("75B22633-668E-11CF-A6D9-00AA0062CE6C");I.ExtendedContentDescriptionObject=new I("D2D0A440-E307-11D2-97F0-00A0C95EA850");I.ContentBrandingObject=new I("2211B3FA-BD23-11D2-B4B7-00A0C955FC6E");I.StreamBitratePropertiesObject=new I("7BF875CE-468D-11D1-8D82-006097C9A2B2");I.ContentEncryptionObject=new I("2211B3FB-BD23-11D2-B4B7-00A0C955FC6E");I.ExtendedContentEncryptionObject=new I("298AE614-2622-4C17-B935-DAE07EE9289C");I.DigitalSignatureObject=new I("2211B3FC-BD23-11D2-B4B7-00A0C955FC6E");I.PaddingObject=new I("1806D474-CADF-4509-A4BA-9AABCB96AAE8");I.ExtendedStreamPropertiesObject=new I("14E6A5CB-C672-4332-8399-A96952065B5A");I.AdvancedMutualExclusionObject=new I("A08649CF-4775-4670-8A16-6E35357566CD");I.GroupMutualExclusionObject=new I("D1465A40-5A79-4338-B71B-E36B8FD6C249");I.StreamPrioritizationObject=new I("D4FED15B-88D3-454F-81F0-ED5C45999E24");I.BandwidthSharingObject=new I("A69609E6-517B-11D2-B6AF-00C04FD908E9");I.LanguageListObject=new I("7C4346A9-EFE0-4BFC-B229-393EDE415C85");I.MetadataObject=new I("C5F8CBEA-5BAF-4877-8467-AA8C44FA4CCA");I.MetadataLibraryObject=new I("44231C94-9498-49D1-A141-1D134E457054");I.IndexParametersObject=new I("D6E229DF-35DA-11D1-9034-00A0C90349BE");I.MediaObjectIndexParametersObject=new I("6B203BAD-3F11-48E4-ACA8-D7613DE2CFA7");I.TimecodeIndexParametersObject=new I("F55E496D-9797-4B5D-8C8B-604DFE9BFB24");I.CompatibilityObject=new I("26F18B5D-4584-47EC-9F5F-0E651F0452C9");I.AdvancedContentEncryptionObject=new I("43058533-6981-49E6-9B74-AD12CB86D58C");I.AudioMedia=new I("F8699E40-5B4D-11CF-A8FD-00805F5C442B");I.VideoMedia=new I("BC19EFC0-5B4D-11CF-A8FD-00805F5C442B");I.CommandMedia=new I("59DACFC0-59E6-11D0-A3AC-00A0C90348F6");I.JFIF_Media=new I("B61BE100-5B4E-11CF-A8FD-00805F5C442B");I.Degradable_JPEG_Media=new I("35907DE0-E415-11CF-A917-00805F5C442B");I.FileTransferMedia=new I("91BD222C-F21C-497A-8B6D-5AA86BFC0185");I.BinaryMedia=new I("3AFB65E2-47EF-40F2-AC2C-70A90D71D343");I.ASF_Index_Placeholder_Object=new I("D9AADE20-7C17-4F9C-BC28-8555DD98E2A2");function dH(t){return hH[t]}function ym(t){return Os(rt(t,"utf-16le"))}const hH=[ym,ES,fH,mH,pH,nP,ES];function ES(t){return new Uint8Array(t)}function fH(t,e=0){return nP(t,e)===1}function mH(t,e=0){return U.get(t,e)}function pH(t,e=0){return Qt.get(t,e)}function nP(t,e=0){return ye.get(t,e)}var SS;(function(t){t[t.UnicodeString=0]="UnicodeString",t[t.ByteArray=1]="ByteArray",t[t.Bool=2]="Bool",t[t.DWord=3]="DWord",t[t.QWord=4]="QWord",t[t.Word=5]="Word"})(SS||(SS={}));const gH={len:30,get:(t,e)=>({objectId:I.fromBin(t,e),objectSize:Number(Qt.get(t,e+16)),numberOfHeaderObjects:U.get(t,e+24)})},Ti={len:24,get:(t,e)=>({objectId:I.fromBin(t,e),objectSize:Number(Qt.get(t,e+16))})};class pa{constructor(e){this.len=Number(e.objectSize)-Ti.len}postProcessTag(e,n,r,s){if(n==="WM/Picture")e.push({id:n,value:d1.fromBuffer(s)});else{const i=dH(r);if(!i)throw new Error(`unexpected value headerType: ${r}`);e.push({id:n,value:i(s)})}}}class bS extends pa{get(e,n){return null}}class G0 extends pa{get(e,n){return{fileId:I.fromBin(e,n),fileSize:Qt.get(e,n+16),creationDate:Qt.get(e,n+24),dataPacketsCount:Qt.get(e,n+32),playDuration:Qt.get(e,n+40),sendDuration:Qt.get(e,n+48),preroll:Qt.get(e,n+56),flags:{broadcast:ze(e,n+64,24),seekable:ze(e,n+64,25)},minimumDataPacketSize:U.get(e,n+68),maximumDataPacketSize:U.get(e,n+72),maximumBitrate:U.get(e,n+76)}}}G0.guid=I.FilePropertiesObject;class K0 extends pa{get(e,n){return{streamType:I.decodeMediaType(I.fromBin(e,n)),errorCorrectionType:I.fromBin(e,n+8)}}}K0.guid=I.StreamPropertiesObject;class Q0{constructor(){this.len=22}get(e,n){const r=new DataView(e.buffer,n);return{reserved1:I.fromBin(e,n),reserved2:r.getUint16(16,!0),extensionDataSize:r.getUint16(18,!0)}}}Q0.guid=I.HeaderExtensionObject;const yH={len:20,get:(t,e)=>({entryCount:new DataView(t.buffer,e).getUint16(16,!0)})};async function kS(t){const e=await t.readNumber(ye);return(await t.readToken(new q(e*2,"utf-16le"))).replace("\0","")}async function vH(t){const e=await t.readToken(yH),n=[];for(let r=0;r<e.entryCount;++r)n.push(await wH(t));return n}async function xH(t){const e=await t.readNumber(ye),n=new Uint8Array(e);return await t.readBuffer(n),n}async function wH(t){const e=await t.readNumber(ye);return{type:{videoCodec:(e&1)===1,audioCodec:(e&2)===2},codecName:await kS(t),description:await kS(t),information:await xH(t)}}class na extends pa{get(e,n){const r=[],s=new DataView(e.buffer,n);let i=10;for(let a=0;a<na.contentDescTags.length;++a){const o=s.getUint16(a*2,!0);if(o>0){const c=na.contentDescTags[a],u=i+o;r.push({id:c,value:ym(e.slice(n+i,n+u))}),i=u}}return r}}na.guid=I.ContentDescriptionObject;na.contentDescTags=["Title","Author","Copyright","Description","Rating"];class X0 extends pa{get(e,n){const r=[],s=new DataView(e.buffer,n),i=s.getUint16(0,!0);let a=2;for(let o=0;o<i;o+=1){const c=s.getUint16(a,!0);a+=2;const u=ym(e.slice(n+a,n+a+c));a+=c;const d=s.getUint16(a,!0);a+=2;const h=s.getUint16(a,!0);a+=2;const m=e.slice(n+a,n+a+h);a+=h,this.postProcessTag(r,u,d,m)}return r}}X0.guid=I.ExtendedContentDescriptionObject;class Y0 extends pa{get(e,n){const r=new DataView(e.buffer,n);return{startTime:Qt.get(e,n),endTime:Qt.get(e,n+8),dataBitrate:r.getInt32(12,!0),bufferSize:r.getInt32(16,!0),initialBufferFullness:r.getInt32(20,!0),alternateDataBitrate:r.getInt32(24,!0),alternateBufferSize:r.getInt32(28,!0),alternateInitialBufferFullness:r.getInt32(32,!0),maximumObjectSize:r.getInt32(36,!0),flags:{reliableFlag:ze(e,n+40,0),seekableFlag:ze(e,n+40,1),resendLiveCleanpointsFlag:ze(e,n+40,2)},streamNumber:r.getInt16(42,!0),streamLanguageId:r.getInt16(44,!0),averageTimePerFrame:r.getInt32(52,!0),streamNameCount:r.getInt32(54,!0),payloadExtensionSystems:r.getInt32(56,!0),streamNames:[],streamPropertiesObject:null}}}Y0.guid=I.ExtendedStreamPropertiesObject;class Th extends pa{get(e,n){const r=[],s=new DataView(e.buffer,n),i=s.getUint16(0,!0);let a=2;for(let o=0;o<i;o+=1){a+=4;const c=s.getUint16(a,!0);a+=2;const u=s.getUint16(a,!0);a+=2;const d=s.getUint32(a,!0);a+=4;const h=ym(e.slice(n+a,n+a+c));a+=c;const m=e.slice(n+a,n+a+d);a+=d,this.postProcessTag(r,h,u,m)}return r}}Th.guid=I.MetadataObject;class J0 extends Th{}J0.guid=I.MetadataLibraryObject;class d1{static fromBuffer(e){return new d1(e.length).get(e,0)}constructor(e){this.len=e}get(e,n){const r=new DataView(e.buffer,n),s=r.getUint8(0),i=r.getInt32(1,!0);let a=5;for(;r.getUint16(a)!==0;)a+=2;const o=new q(a-5,"utf-16le").get(e,5);for(;r.getUint16(a)!==0;)a+=2;const c=new q(a-5,"utf-16le").get(e,5);return{type:_c[s],format:o,description:c,size:i,data:e.slice(a+4)}}}const Lu=Se("music-metadata:parser:ASF"),_H="asf";class EH extends jn{async parse(){const e=await this.tokenizer.readToken(gH);if(!e.objectId.equals(I.HeaderObject))throw new Error(`expected asf header; but was not found; got: ${e.objectId.str}`);try{await this.parseObjectHeader(e.numberOfHeaderObjects)}catch(n){Lu("Error while parsing ASF: %s",n)}}async parseObjectHeader(e){let n;do{const r=await this.tokenizer.readToken(Ti);switch(Lu("header GUID=%s",r.objectId.str),r.objectId.str){case G0.guid.str:{const s=await this.tokenizer.readToken(new G0(r));this.metadata.setFormat("duration",Number(s.playDuration/BigInt(1e3))/1e4-Number(s.preroll)/1e3),this.metadata.setFormat("bitrate",s.maximumBitrate);break}case K0.guid.str:{const s=await this.tokenizer.readToken(new K0(r));this.metadata.setFormat("container",`ASF/${s.streamType}`);break}case Q0.guid.str:{const s=await this.tokenizer.readToken(new Q0);await this.parseExtensionObject(s.extensionDataSize);break}case na.guid.str:n=await this.tokenizer.readToken(new na(r)),await this.addTags(n);break;case X0.guid.str:n=await this.tokenizer.readToken(new X0(r)),await this.addTags(n);break;case I.CodecListObject.str:{const s=await vH(this.tokenizer);s.forEach(a=>{this.metadata.addStreamInfo({type:a.type.videoCodec?ta.video:ta.audio,codecName:a.codecName})});const i=s.filter(a=>a.type.audioCodec).map(a=>a.codecName).join("/");this.metadata.setFormat("codec",i);break}case I.StreamBitratePropertiesObject.str:await this.tokenizer.ignore(r.objectSize-Ti.len);break;case I.PaddingObject.str:Lu("Padding: %s bytes",r.objectSize-Ti.len),await this.tokenizer.ignore(r.objectSize-Ti.len);break;default:this.metadata.addWarning(`Ignore ASF-Object-GUID: ${r.objectId.str}`),Lu("Ignore ASF-Object-GUID: %s",r.objectId.str),await this.tokenizer.readToken(new bS(r))}}while(--e)}async addTags(e){await Promise.all(e.map(({id:n,value:r})=>this.metadata.addTag(_H,n,r)))}async parseExtensionObject(e){do{const n=await this.tokenizer.readToken(Ti),r=n.objectSize-Ti.len;switch(n.objectId.str){case Y0.guid.str:await this.tokenizer.readToken(new Y0(n));break;case Th.guid.str:{const s=await this.tokenizer.readToken(new Th(n));await this.addTags(s);break}case J0.guid.str:{const s=await this.tokenizer.readToken(new J0(n));await this.addTags(s);break}case I.PaddingObject.str:await this.tokenizer.ignore(r);break;case I.CompatibilityObject.str:this.tokenizer.ignore(r);break;case I.ASF_Index_Placeholder_Object.str:await this.tokenizer.ignore(r);break;default:this.metadata.addWarning(`Ignore ASF-Object-GUID: ${n.objectId.str}`),await this.tokenizer.readToken(new bS(n));break}e-=n.objectSize}while(e>0)}}class Ec{static fromBase64(e){return Ec.fromBuffer(Uint8Array.from(atob(e),n=>n.charCodeAt(0)))}static fromBuffer(e){return new Ec(e.length).get(e,0)}constructor(e){this.len=e}get(e,n){const r=_c[G.get(e,n)];n+=4;const s=G.get(e,n);n+=4;const i=new q(s,"utf-8").get(e,n);n+=s;const a=G.get(e,n);n+=4;const o=new q(a,"utf-8").get(e,n);n+=a;const c=G.get(e,n);n+=4;const u=G.get(e,n);n+=4;const d=G.get(e,n);n+=4;const h=G.get(e,n);n+=4;const m=G.get(e,n);n+=4;const p=Uint8Array.from(e.slice(n,n+m));return{type:r,format:i,description:o,width:c,height:u,colour_depth:d,indexed_color:h,data:p}}}const Mu={len:7,get:(t,e)=>({packetType:se.get(t,e),vorbis:new q(6,"ascii").get(t,e+1)})},SH={len:23,get:(t,e)=>({version:U.get(t,e+0),channelMode:se.get(t,e+4),sampleRate:U.get(t,e+5),bitrateMax:U.get(t,e+9),bitrateNominal:U.get(t,e+13),bitrateMin:U.get(t,e+17)})},$p=Se("music-metadata:parser:ID3");class vm extends jn{constructor(){super(...arguments),this.id3parser=new nr}static async startsWithID3v2Header(e){return(await e.peekToken(H0)).fileIdentifier==="ID3"}async parse(){try{await this.parseID3v2()}catch(e){if(e instanceof Ke)$p("End-of-stream");else throw e}}finalize(){}async parseID3v2(){await this.tryReadId3v2Headers(),$p("End of ID3v2 header, go to MPEG-parser: pos=%s",this.tokenizer.position),await this.postId3v2Parse(),this.options.skipPostHeaders&&this.metadata.hasAny()?this.finalize():(await new u1().init(this.metadata,this.tokenizer,this.options).parse(),this.finalize())}async tryReadId3v2Headers(){if((await this.tokenizer.peekToken(H0)).fileIdentifier==="ID3")return $p("Found ID3v2 header, pos=%s",this.tokenizer.position),await this.id3parser.parse(this.metadata,this.tokenizer,this.options),this.tryReadId3v2Headers()}}class rP{constructor(e,n){this.data=e,this.offset=n}readInt32(){const e=U.get(this.data,this.offset);return this.offset+=4,e}readStringUtf8(){const e=this.readInt32(),n=new TextDecoder("utf-8").decode(this.data.subarray(this.offset,this.offset+e));return this.offset+=e,n}parseUserComment(){const e=this.offset,n=this.readStringUtf8(),r=n.indexOf("=");return{key:n.slice(0,r).toUpperCase(),value:n.slice(r+1),len:this.offset-e}}}const wa=Se("music-metadata:parser:ogg:vorbis1");class ra{constructor(e,n){this.metadata=e,this.options=n,this.pageSegments=[]}async parsePage(e,n){if(e.headerType.firstPage)this.parseFirstPage(e,n);else{if(e.headerType.continued){if(this.pageSegments.length===0)throw new Error("Cannot continue on previous page");this.pageSegments.push(n)}if(e.headerType.lastPage||!e.headerType.continued){if(this.pageSegments.length>0){const r=ra.mergeUint8Arrays(this.pageSegments);await this.parseFullPage(r)}this.pageSegments=e.headerType.lastPage?[]:[n]}}e.headerType.lastPage&&this.calculateDuration(e)}static mergeUint8Arrays(e){const n=e.reduce((s,i)=>s+i.length,0),r=new Uint8Array(n);return e.forEach((s,i,a)=>{const o=a.slice(0,i).reduce((c,u)=>c+u.length,0);r.set(s,o)}),r}async flush(){await this.parseFullPage(ra.mergeUint8Arrays(this.pageSegments))}async parseUserComment(e,n){const s=new rP(e,n).parseUserComment();return await this.addTag(s.key,s.value),s.len}async addTag(e,n){if(e==="METADATA_BLOCK_PICTURE"&&typeof n=="string"){if(this.options.skipCovers){wa("Ignore picture");return}n=Ec.fromBase64(n),wa(`Push picture: id=${e}, format=${n.format}`)}else wa(`Push tag: id=${e}, value=${n}`);await this.metadata.addTag("vorbis",e,n)}calculateDuration(e){this.metadata.format.sampleRate&&e.absoluteGranulePosition>=0&&(this.metadata.setFormat("numberOfSamples",e.absoluteGranulePosition),this.metadata.setFormat("duration",e.absoluteGranulePosition/this.metadata.format.sampleRate))}parseFirstPage(e,n){this.metadata.setFormat("codec","Vorbis I"),wa("Parse first page");const r=Mu.get(n,0);if(r.vorbis!=="vorbis")throw new Error("Metadata does not look like Vorbis");if(r.packetType===1){const s=SH.get(n,Mu.len);this.metadata.setFormat("sampleRate",s.sampleRate),this.metadata.setFormat("bitrate",s.bitrateNominal),this.metadata.setFormat("numberOfChannels",s.channelMode),wa("sample-rate=%s[hz], bitrate=%s[b/s], channel-mode=%s",s.sampleRate,s.bitrateNominal,s.channelMode)}else throw new Error("First Ogg page should be type 1: the identification header")}async parseFullPage(e){const n=Mu.get(e,0);switch(wa("Parse full page: type=%s, byteLength=%s",n.packetType,e.byteLength),n.packetType){case 3:return this.parseUserCommentList(e,Mu.len)}}async parseUserCommentList(e,n){const r=U.get(e,n);n+=4,n+=r;let s=U.get(e,n);for(n+=4;s-- >0;)n+=await this.parseUserComment(e,n)}}const bH=Se("music-metadata:parser:FLAC");var Hr;(function(t){t[t.STREAMINFO=0]="STREAMINFO",t[t.PADDING=1]="PADDING",t[t.APPLICATION=2]="APPLICATION",t[t.SEEKTABLE=3]="SEEKTABLE",t[t.VORBIS_COMMENT=4]="VORBIS_COMMENT",t[t.CUESHEET=5]="CUESHEET",t[t.PICTURE=6]="PICTURE"})(Hr||(Hr={}));class kH extends vm{constructor(){super(...arguments),this.padding=0}init(e,n,r){return super.init(e,n,r),this.vorbisParser=new ra(e,r),this}async postId3v2Parse(){if((await this.tokenizer.readToken(je)).toString()!=="fLaC")throw new Error("Invalid FLAC preamble");let n;do n=await this.tokenizer.readToken(TH),await this.parseDataBlock(n);while(!n.lastBlock);if(this.tokenizer.fileInfo.size&&this.metadata.format.duration){const r=this.tokenizer.fileInfo.size-this.tokenizer.position;this.metadata.setFormat("bitrate",8*r/this.metadata.format.duration)}}async parseDataBlock(e){switch(bH(`blockHeader type=${e.type}, length=${e.length}`),e.type){case Hr.STREAMINFO:return this.parseBlockStreamInfo(e.length);case Hr.PADDING:this.padding+=e.length;break;case Hr.APPLICATION:break;case Hr.SEEKTABLE:break;case Hr.VORBIS_COMMENT:return this.parseComment(e.length);case Hr.CUESHEET:break;case Hr.PICTURE:await this.parsePicture(e.length);return;default:this.metadata.addWarning(`Unknown block type: ${e.type}`)}return this.tokenizer.ignore(e.length).then()}async parseBlockStreamInfo(e){if(e!==TS.len)throw new Error("Unexpected block-stream-info length");const n=await this.tokenizer.readToken(TS);this.metadata.setFormat("container","FLAC"),this.metadata.setFormat("codec","FLAC"),this.metadata.setFormat("lossless",!0),this.metadata.setFormat("numberOfChannels",n.channels),this.metadata.setFormat("bitsPerSample",n.bitsPerSample),this.metadata.setFormat("sampleRate",n.sampleRate),n.totalSamples>0&&this.metadata.setFormat("duration",n.totalSamples/n.sampleRate)}async parseComment(e){const n=await this.tokenizer.readToken(new sn(e)),r=new rP(n,0);r.readStringUtf8();const s=r.readInt32(),i=new Array(s);for(let a=0;a<s;a++)i[a]=r.parseUserComment();await Promise.all(i.map(a=>this.vorbisParser.addTag(a.key,a.value)))}async parsePicture(e){if(this.options.skipCovers)return this.tokenizer.ignore(e);const n=await this.tokenizer.readToken(new Ec(e));this.vorbisParser.addTag("METADATA_BLOCK_PICTURE",n)}}const TH={len:4,get:(t,e)=>({lastBlock:ze(t,e,7),type:de(t,e,1,7),length:en.get(t,e+1)})},TS={len:34,get:(t,e)=>({minimumBlockSize:_e.get(t,e),maximumBlockSize:_e.get(t,e+2)/1e3,minimumFrameSize:en.get(t,e+4),maximumFrameSize:en.get(t,e+7),sampleRate:en.get(t,e+10)>>4,channels:de(t,e+12,4,3)+1,bitsPerSample:de(t,e+12,7,5)+1,totalSamples:de(t,e+13,4,36),fileMD5:new sn(16).get(t,e+18)})},sP=Se("music-metadata:parser:MP4:atom"),Ih={len:8,get:(t,e)=>{const n=G.get(t,e);if(n<0)throw new Error("Invalid atom header length");return{length:BigInt(n),name:new q(4,"latin1").get(t,e+4)}},put:(t,e,n)=>(G.put(t,e,Number(n.length)),je.put(t,e+4,n.name))},IH=s1,IS={len:4,get:(t,e)=>({type:new q(4,"ascii").get(t,e)})};class iP{constructor(e,n,r){if(this.len=e,e<n)throw new Error(`Atom ${r} expected to be ${n}, but specifies ${e} bytes long.`);e>n&&sP(`Warning: atom ${r} expected to be ${n}, but was actually ${e} bytes long.`)}}const _o={len:4,get:(t,e)=>{const n=G.get(t,e)-2082844800;return new Date(n*1e3)}};class CH extends iP{constructor(e){super(e,24,"mdhd"),this.len=e}get(e,n){return{version:se.get(e,n+0),flags:en.get(e,n+1),creationTime:_o.get(e,n+4),modificationTime:_o.get(e,n+8),timeScale:G.get(e,n+12),duration:G.get(e,n+16),language:_e.get(e,n+20),quality:_e.get(e,n+22)}}}class AH extends iP{constructor(e){super(e,100,"mvhd"),this.len=e}get(e,n){return{version:se.get(e,n),flags:en.get(e,n+1),creationTime:_o.get(e,n+4),modificationTime:_o.get(e,n+8),timeScale:G.get(e,n+12),duration:G.get(e,n+16),preferredRate:G.get(e,n+20),preferredVolume:_e.get(e,n+24),previewTime:G.get(e,n+72),previewDuration:G.get(e,n+76),posterTime:G.get(e,n+80),selectionTime:G.get(e,n+84),selectionDuration:G.get(e,n+88),currentTime:G.get(e,n+92),nextTrackID:G.get(e,n+96)}}}class RH{constructor(e){this.len=e}get(e,n){return{type:{set:se.get(e,n+0),type:en.get(e,n+1)},locale:en.get(e,n+4),value:new sn(this.len-8).get(e,n+8)}}}class PH{constructor(e){this.len=e}get(e,n){return{version:se.get(e,n),flags:en.get(e,n+1),name:new q(this.len-4,"utf-8").get(e,n+4)}}}class NH{constructor(e){this.len=e}get(e,n){return{version:se.get(e,n),flags:en.get(e,n+1),creationTime:_o.get(e,n+4),modificationTime:_o.get(e,n+8),trackId:G.get(e,n+12),duration:G.get(e,n+20),layer:_e.get(e,n+24),alternateGroup:_e.get(e,n+26),volume:_e.get(e,n+28)}}}const CS={len:8,get:(t,e)=>({version:se.get(t,e),flags:en.get(t,e+1),numberOfEntries:G.get(t,e+4)})};class jH{constructor(e){this.len=e}get(e,n){return{dataFormat:je.get(e,n),dataReferenceIndex:_e.get(e,n+10),description:new sn(this.len-12).get(e,n+12)}}}class DH{constructor(e){this.len=e}get(e,n){const r=CS.get(e,n);n+=CS.len;const s=[];for(let i=0;i<r.numberOfEntries;++i){const a=G.get(e,n);n+=G.len,s.push(new jH(a).get(e,n)),n+=a}return{header:r,table:s}}}const AS={len:8,get(t,e){return{version:Jr.get(t,e),revision:Jr.get(t,e+2),vendor:kn.get(t,e+4)}}},OH={len:12,get(t,e){return{numAudioChannels:Jr.get(t,e+0),sampleSize:Jr.get(t,e+2),compressionId:Jr.get(t,e+4),packetSize:Jr.get(t,e+6),sampleRate:_e.get(t,e+8)+_e.get(t,e+10)/1e4}}};class h1{constructor(e,n){this.len=e,this.token=n}get(e,n){const r=kn.get(e,n+4);return{version:wc.get(e,n+0),flags:r1.get(e,n+1),numberOfEntries:r,entries:aP(e,this.token,n+8,this.len-8,r)}}}const FH={len:8,get(t,e){return{count:kn.get(t,e+0),duration:kn.get(t,e+4)}}};class LH extends h1{constructor(e){super(e,FH),this.len=e}}const MH={len:12,get(t,e){return{firstChunk:kn.get(t,e),samplesPerChunk:kn.get(t,e+4),sampleDescriptionId:kn.get(t,e+8)}}};class $H extends h1{constructor(e){super(e,MH),this.len=e}}class zH{constructor(e){this.len=e}get(e,n){const r=kn.get(e,n+8);return{version:wc.get(e,n),flags:r1.get(e,n+1),sampleSize:kn.get(e,n+4),numberOfEntries:r,entries:aP(e,kn,n+12,this.len-12,r)}}}class BH extends h1{constructor(e){super(e,kn),this.len=e}}class UH{constructor(e){this.len=e}get(e,n){const r=Jr.get(e,n+0);return new q(r,"utf-8").get(e,n+2)}}function aP(t,e,n,r,s){if(sP(`remainingLen=${r}, numberOfEntries=${s} * token-len=${e.len}`),r===0)return[];if(r!==s*e.len)throw new Error("mismatch number-of-entries with remaining atom-length");const i=[];for(let a=0;a<s;++a)i.push(e.get(t,n)),n+=e.len;return i}const VH=Se("music-metadata:parser:MP4:Atom");class Ch{static async readAtom(e,n,r,s){const i=e.position,a=await e.readToken(Ih);a.length===BigInt(1)&&(a.length=await e.readToken(IH));const c=new Ch(a,a.length===BigInt(1),r),u=c.getPayloadLength(s);return VH(`parse atom name=${c.atomPath}, extended=${c.extended}, offset=${i}, len=${c.header.length}`),await c.readData(e,n,u),c}constructor(e,n,r){this.header=e,this.extended=n,this.parent=r,this.children=[],this.atomPath=(this.parent?`${this.parent.atomPath}.`:"")+this.header.name}getHeaderLength(){return this.extended?16:8}getPayloadLength(e){return(this.header.length===BigInt(0)?e:Number(this.header.length))-this.getHeaderLength()}async readAtoms(e,n,r){for(;r>0;){const s=await Ch.readAtom(e,n,this,r);this.children.push(s),r-=s.header.length===BigInt(0)?r:Number(s.header.length)}}async readData(e,n,r){switch(this.header.name){case"moov":case"udta":case"trak":case"mdia":case"minf":case"stbl":case"<id>":case"ilst":case"tref":return this.readAtoms(e,n,this.getPayloadLength(r));case"meta":{const i=(await e.peekToken(Ih)).name==="hdlr"?0:4;return await e.ignore(i),this.readAtoms(e,n,this.getPayloadLength(r)-i)}default:return n(this,r)}}}const vr=Se("music-metadata:parser:MP4"),WH="iTunes",RS={raw:{lossy:!1,format:"raw"},MAC3:{lossy:!0,format:"MACE 3:1"},MAC6:{lossy:!0,format:"MACE 6:1"},ima4:{lossy:!0,format:"IMA 4:1"},ulaw:{lossy:!0,format:"uLaw 2:1"},alaw:{lossy:!0,format:"uLaw 2:1"},Qclp:{lossy:!0,format:"QUALCOMM PureVoice"},".mp3":{lossy:!0,format:"MPEG-1 layer 3"},alac:{lossy:!1,format:"ALAC"},"ac-3":{lossy:!0,format:"AC-3"},mp4a:{lossy:!0,format:"MPEG-4/AAC"},mp4s:{lossy:!0,format:"MP4S"},c608:{lossy:!0,format:"CEA-608"},c708:{lossy:!0,format:"CEA-708"}};function PS(t,e,n){return n.indexOf(t)===e}class Ah extends jn{constructor(){super(...arguments),this.tracks=[],this.atomParsers={mvhd:async e=>{const n=await this.tokenizer.readToken(new AH(e));this.metadata.setFormat("creationTime",n.creationTime),this.metadata.setFormat("modificationTime",n.modificationTime)},mdhd:async e=>{const n=await this.tokenizer.readToken(new CH(e)),r=this.getTrackDescription();r.creationTime=n.creationTime,r.modificationTime=n.modificationTime,r.timeScale=n.timeScale,r.duration=n.duration},chap:async e=>{const n=this.getTrackDescription(),r=[];for(;e>=G.len;)r.push(await this.tokenizer.readNumber(G)),e-=G.len;n.chapterList=r},tkhd:async e=>{const n=await this.tokenizer.readToken(new NH(e));this.tracks.push(n)},mdat:async e=>{if(this.audioLengthInBytes=e,this.calculateBitRate(),this.options.includeChapters){const n=this.tracks.filter(r=>r.chapterList);if(n.length===1){const r=n[0].chapterList,s=this.tracks.filter(i=>r.indexOf(i.trackId)!==-1);if(s.length===1)return this.parseChapterTrack(s[0],n[0],e)}}await this.tokenizer.ignore(e)},ftyp:async e=>{const n=[];for(;e>0;){const s=await this.tokenizer.readToken(IS);e-=IS.len;const i=s.type.replace(/\W/g,"");i.length>0&&n.push(i)}vr(`ftyp: ${n.join("/")}`);const r=n.filter(PS).join("/");this.metadata.setFormat("container",r)},stsd:async e=>{const n=await this.tokenizer.readToken(new DH(e)),r=this.getTrackDescription();r.soundSampleDescription=n.table.map(s=>this.parseSoundSampleDescription(s))},stsc:async e=>{const n=await this.tokenizer.readToken(new $H(e));this.getTrackDescription().sampleToChunkTable=n.entries},stts:async e=>{const n=await this.tokenizer.readToken(new LH(e));this.getTrackDescription().timeToSampleTable=n.entries},stsz:async e=>{const n=await this.tokenizer.readToken(new zH(e)),r=this.getTrackDescription();r.sampleSize=n.sampleSize,r.sampleSizeTable=n.entries},stco:async e=>{const n=await this.tokenizer.readToken(new BH(e));this.getTrackDescription().chunkOffsetTable=n.entries},date:async e=>{const n=await this.tokenizer.readToken(new q(e,"utf-8"));await this.addTag("date",n)}}}static read_BE_Integer(e,n){const r=(n?"INT":"UINT")+e.length*8+(e.length>1?"_BE":""),s=YV[r];if(!s)throw new Error(`Token for integer type not found: "${r}"`);return Number(s.get(e,0))}async parse(){this.tracks=[];let e=this.tokenizer.fileInfo.size||0;for(;!this.tokenizer.fileInfo.size||e>0;){try{if((await this.tokenizer.peekToken(Ih)).name==="\0\0\0\0"){const a=`Error at offset=${this.tokenizer.position}: box.id=0`;vr(a),this.addWarning(a);break}}catch(i){if(i instanceof Error){const a=`Error at offset=${this.tokenizer.position}: ${i.message}`;vr(a),this.addWarning(a)}else throw i;break}const s=await Ch.readAtom(this.tokenizer,(i,a)=>this.handleAtom(i,a),null,e);e-=s.header.length===BigInt(0)?e:Number(s.header.length)}const n=[];this.tracks.forEach(s=>{const i=[];s.soundSampleDescription.forEach(a=>{const o={},c=RS[a.dataFormat];if(c?(i.push(c.format),o.codecName=c.format):o.codecName=`<${a.dataFormat}>`,a.description){const{description:u}=a;u.sampleRate>0&&(o.type=ta.audio,o.audio={samplingFrequency:u.sampleRate,bitDepth:u.sampleSize,channels:u.numAudioChannels})}this.metadata.addStreamInfo(o)}),i.length>=1&&n.push(i.join("/"))}),n.length>0&&this.metadata.setFormat("codec",n.filter(PS).join("+"));const r=this.tracks.filter(s=>s.soundSampleDescription.length>=1&&s.soundSampleDescription[0].description&&s.soundSampleDescription[0].description.numAudioChannels>0);if(r.length>=1){const s=r[0];if(s.timeScale>0){const o=s.duration/s.timeScale;this.metadata.setFormat("duration",o)}const i=s.soundSampleDescription[0];if(i.description&&(this.metadata.setFormat("sampleRate",i.description.sampleRate),this.metadata.setFormat("bitsPerSample",i.description.sampleSize),this.metadata.setFormat("numberOfChannels",i.description.numAudioChannels),s.timeScale===0&&s.timeToSampleTable.length>0)){const c=s.timeToSampleTable.map(u=>u.count*u.duration).reduce((u,d)=>u+d)/i.description.sampleRate;this.metadata.setFormat("duration",c)}const a=RS[i.dataFormat];a&&this.metadata.setFormat("lossless",!a.lossy),this.calculateBitRate()}}async handleAtom(e,n){if(e.parent)switch(e.parent.header.name){case"ilst":case"<id>":return this.parseMetadataItemData(e)}if(this.atomParsers[e.header.name])return this.atomParsers[e.header.name](n);vr(`No parser for atom path=${e.atomPath}, payload-len=${n}, ignoring atom`),await this.tokenizer.ignore(n)}getTrackDescription(){return this.tracks[this.tracks.length-1]}calculateBitRate(){this.audioLengthInBytes&&this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*this.audioLengthInBytes/this.metadata.format.duration)}async addTag(e,n){await this.metadata.addTag(WH,e,n)}addWarning(e){vr(`Warning: ${e}`),this.metadata.addWarning(e)}parseMetadataItemData(e){let n=e.header.name;return e.readAtoms(this.tokenizer,async(r,s)=>{const i=r.getPayloadLength(s);switch(r.header.name){case"data":return this.parseValueAtom(n,r);case"name":case"mean":case"rate":{const a=await this.tokenizer.readToken(new PH(i));n+=`:${a.name}`;break}default:{const a=await this.tokenizer.readToken(new sn(i));this.addWarning(`Unsupported meta-item: ${n}[${r.header.name}] => value=${a1(a)} ascii=${i1(a,"ascii")}`)}}},e.getPayloadLength(0))}async parseValueAtom(e,n){const r=await this.tokenizer.readToken(new RH(Number(n.header.length)-Ih.len));if(r.type.set!==0)throw new Error(`Unsupported type-set != 0: ${r.type.set}`);switch(r.type.type){case 0:switch(e){case"trkn":case"disk":{const s=se.get(r.value,3),i=se.get(r.value,5);await this.addTag(e,`${s}/${i}`);break}case"gnre":{const s=se.get(r.value,1),i=kh[s-1];await this.addTag(e,i);break}case"rate":{const s=new TextDecoder("ascii").decode(r.value);await this.addTag(e,s);break}default:vr(`unknown proprietary value type for: ${n.atomPath}`)}break;case 1:case 18:await this.addTag(e,new TextDecoder("utf-8").decode(r.value));break;case 13:if(this.options.skipCovers)break;await this.addTag(e,{format:"image/jpeg",data:Uint8Array.from(r.value)});break;case 14:if(this.options.skipCovers)break;await this.addTag(e,{format:"image/png",data:Uint8Array.from(r.value)});break;case 21:await this.addTag(e,Ah.read_BE_Integer(r.value,!0));break;case 22:await this.addTag(e,Ah.read_BE_Integer(r.value,!1));break;case 65:await this.addTag(e,se.get(r.value,0));break;case 66:await this.addTag(e,_e.get(r.value,0));break;case 67:await this.addTag(e,G.get(r.value,0));break;default:this.addWarning(`atom key=${e}, has unknown well-known-type (data-type): ${r.type.type}`)}}parseSoundSampleDescription(e){const n={dataFormat:e.dataFormat,dataReferenceIndex:e.dataReferenceIndex};let r=0;const s=AS.get(e.description,r);return r+=AS.len,s.version===0||s.version===1?n.description=OH.get(e.description,r):vr(`Warning: sound-sample-description ${s} not implemented`),n}async parseChapterTrack(e,n,r){if(!e.sampleSize&&e.chunkOffsetTable.length!==e.sampleSizeTable.length)throw new Error("Expected equal chunk-offset-table & sample-size-table length.");const s=[];for(let i=0;i<e.chunkOffsetTable.length&&r>0;++i){const o=e.chunkOffsetTable[i]-this.tokenizer.position,c=e.sampleSize>0?e.sampleSize:e.sampleSizeTable[i];if(r-=o+c,r<0)throw new Error("Chapter chunk exceeding token length");await this.tokenizer.ignore(o);const u=await this.tokenizer.readToken(new UH(c));vr(`Chapter ${i+1}: ${u}`);const d={title:u,sampleOffset:this.findSampleOffset(n,this.tokenizer.position)};vr(`Chapter title=${d.title}, offset=${d.sampleOffset}/${this.tracks[0].duration}`),s.push(d)}this.metadata.setFormat("chapters",s),await this.tokenizer.ignore(r)}findSampleOffset(e,n){let r=0;e.timeToSampleTable.forEach(i=>{r+=i.count*i.duration}),vr(`Total duration=${r}`);let s=0;for(;s<e.chunkOffsetTable.length&&e.chunkOffsetTable[s]<n;)++s;return this.getChunkDuration(s+1,e)}getChunkDuration(e,n){let r=0,s=n.timeToSampleTable[r].count,i=n.timeToSampleTable[r].duration,a=1,o=this.getSamplesPerChunk(a,n.sampleToChunkTable),c=0;for(;a<e;){const u=Math.min(s,o);c+=u*i,s-=u,o-=u,o===0?(++a,o=this.getSamplesPerChunk(a,n.sampleToChunkTable)):(++r,s=n.timeToSampleTable[r].count,i=n.timeToSampleTable[r].duration)}return c}getSamplesPerChunk(e,n){for(let r=0;r<n.length-1;++r)if(e>=n[r].firstChunk&&e<n[r+1].firstChunk)return n[r].samplesPerChunk;return n[n.length-1].samplesPerChunk}}var NS;(function(t){t[t.not_set=0]="not_set",t[t.radio=1]="radio",t[t.audiophile=2]="audiophile"})(NS||(NS={}));var jS;(function(t){t[t.unspecified=0]="unspecified",t[t.engineer=1]="engineer",t[t.user=2]="user",t[t.automatic=3]="automatic",t[t.rms_average=4]="rms_average"})(jS||(jS={}));const DS={len:2,get:(t,e)=>{const n=de(t,e,0,3),r=de(t,e,6,1),s=de(t,e,7,9)/10;if(n>0)return{type:de(t,e,0,3),origin:de(t,e,3,3),adjustment:r?-s:s}}},HH={len:27,get:(t,e)=>{const n=G.get(t,e+2);return{revision:de(t,e,0,4),vbr_method:de(t,e,4,4),lowpass_filter:100*se.get(t,e+1),track_peak:n===0?null:n/2**23,track_gain:DS.get(t,6),album_gain:DS.get(t,8),music_length:G.get(t,e+20),music_crc:se.get(t,e+24),header_crc:_e.get(t,e+24)}}},OS=new q(4,"ascii"),zp=new q(6,"ascii"),qH={len:4,get:(t,e)=>({frames:wn(t,e,31),bytes:wn(t,e,30),toc:wn(t,e,29),vbrScale:wn(t,e,28)})};async function GH(t){const e=await t.readToken(qH),n={numFrames:null,streamSize:null,vbrScale:null};if(e.frames&&(n.numFrames=await t.readToken(G)),e.bytes&&(n.streamSize=await t.readToken(G)),e.toc&&(n.toc=new Uint8Array(100),await t.readBuffer(n.toc)),e.vbrScale&&(n.vbrScale=await t.readToken(G)),await t.peekToken(new q(4,"ascii"))==="LAME"){await t.ignore(4),n.lame={version:await t.readToken(new q(5,"ascii"))};const s=n.lame.version.match(/\d+.\d+/g);if(s!==null){const a=s[0].split(".").map(o=>Number.parseInt(o,10));a[0]>=3&&a[1]>=90&&(n.lame.extended=await t.readToken(HH))}}return n}const vn=Se("music-metadata:parser:mpeg"),FS=1024,LS={AudioObjectTypes:["AAC Main","AAC LC","AAC SSR","AAC LTP"],SamplingFrequencies:[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,null,null,-1]},KH=[void 0,["front-center"],["front-left","front-right"],["front-center","front-left","front-right"],["front-center","front-left","front-right","back-center"],["front-center","front-left","front-right","back-left","back-right"],["front-center","front-left","front-right","back-left","back-right","LFE-channel"],["front-center","front-left","front-right","side-left","side-right","back-left","back-right","LFE-channel"]];class mt{constructor(e,n){this.bitrateIndex=null,this.sampRateFreqIndex=null,this.padding=null,this.privateBit=null,this.channelModeIndex=null,this.modeExtension=null,this.isOriginalMedia=null,this.version=null,this.bitrate=null,this.samplingRate=null,this.frameLength=0,this.versionIndex=de(e,n+1,3,2),this.layer=mt.LayerDescription[de(e,n+1,5,2)],this.versionIndex>1&&this.layer===0?this.parseAdtsHeader(e,n):this.parseMpegHeader(e,n),this.isProtectedByCRC=!wn(e,n+1,7)}calcDuration(e){return this.samplingRate==null?null:e*this.calcSamplesPerFrame()/this.samplingRate}calcSamplesPerFrame(){return mt.samplesInFrameTable[this.version===1?0:1][this.layer]}calculateSideInfoLength(){if(this.layer!==3)return 2;if(this.channelModeIndex===3){if(this.version===1)return 17;if(this.version===2||this.version===2.5)return 9}else{if(this.version===1)return 32;if(this.version===2||this.version===2.5)return 17}return null}calcSlotSize(){return[null,4,1,1][this.layer]}parseMpegHeader(e,n){this.container="MPEG",this.bitrateIndex=de(e,n+2,0,4),this.sampRateFreqIndex=de(e,n+2,4,2),this.padding=wn(e,n+2,6),this.privateBit=wn(e,n+2,7),this.channelModeIndex=de(e,n+3,0,2),this.modeExtension=de(e,n+3,2,2),this.isCopyrighted=wn(e,n+3,4),this.isOriginalMedia=wn(e,n+3,5),this.emphasis=de(e,n+3,7,2),this.version=mt.VersionID[this.versionIndex],this.channelMode=mt.ChannelMode[this.channelModeIndex],this.codec=`MPEG ${this.version} Layer ${this.layer}`;const r=this.calcBitrate();if(!r)throw new Error("Cannot determine bit-rate");if(this.bitrate=r*1e3,this.samplingRate=this.calcSamplingRate(),this.samplingRate==null)throw new Error("Cannot determine sampling-rate")}parseAdtsHeader(e,n){vn("layer=0 => ADTS"),this.version=this.versionIndex===2?4:2,this.container=`ADTS/MPEG-${this.version}`;const r=de(e,n+2,0,2);this.codec="AAC",this.codecProfile=LS.AudioObjectTypes[r],vn(`MPEG-4 audio-codec=${this.codec}`);const s=de(e,n+2,2,4);this.samplingRate=LS.SamplingFrequencies[s],vn(`sampling-rate=${this.samplingRate}`);const i=de(e,n+2,7,3);this.mp4ChannelConfig=KH[i],vn(`channel-config=${this.mp4ChannelConfig?this.mp4ChannelConfig.join("+"):"?"}`),this.frameLength=de(e,n+3,6,2)<<11}calcBitrate(){if(this.bitrateIndex===0||this.bitrateIndex===15)return null;if(this.version&&this.bitrateIndex){const e=10*Math.floor(this.version)+this.layer;return mt.bitrate_index[this.bitrateIndex][e]}return null}calcSamplingRate(){return this.sampRateFreqIndex===3||this.version===null||this.sampRateFreqIndex==null?null:mt.sampling_rate_freq_index[this.version][this.sampRateFreqIndex]}}mt.SyncByte1=255;mt.SyncByte2=224;mt.VersionID=[2.5,null,2,1];mt.LayerDescription=[0,3,2,1];mt.ChannelMode=["stereo","joint_stereo","dual_channel","mono"];mt.bitrate_index={1:{11:32,12:32,13:32,21:32,22:8,23:8},2:{11:64,12:48,13:40,21:48,22:16,23:16},3:{11:96,12:56,13:48,21:56,22:24,23:24},4:{11:128,12:64,13:56,21:64,22:32,23:32},5:{11:160,12:80,13:64,21:80,22:40,23:40},6:{11:192,12:96,13:80,21:96,22:48,23:48},7:{11:224,12:112,13:96,21:112,22:56,23:56},8:{11:256,12:128,13:112,21:128,22:64,23:64},9:{11:288,12:160,13:128,21:144,22:80,23:80},10:{11:320,12:192,13:160,21:160,22:96,23:96},11:{11:352,12:224,13:192,21:176,22:112,23:112},12:{11:384,12:256,13:224,21:192,22:128,23:128},13:{11:416,12:320,13:256,21:224,22:144,23:144},14:{11:448,12:384,13:320,21:256,22:160,23:160}};mt.sampling_rate_freq_index={1:{0:44100,1:48e3,2:32e3},2:{0:22050,1:24e3,2:16e3},2.5:{0:11025,1:12e3,2:8e3}};mt.samplesInFrameTable=[[0,384,1152,1152],[0,384,1152,576]];const MS={len:4,get:(t,e)=>new mt(t,e)};function QH(t){return`V${Math.floor((100-t)/10)}`}class XH extends vm{constructor(){super(...arguments),this.frameCount=0,this.syncFrameCount=-1,this.countSkipFrameData=0,this.totalDataLength=0,this.bitrates=[],this.offset=0,this.frame_size=0,this.crc=null,this.calculateEofDuration=!1,this.samplesPerFrame=null,this.buf_frame_header=new Uint8Array(4),this.mpegOffset=null,this.syncPeek={buf:new Uint8Array(FS),len:0}}async postId3v2Parse(){this.metadata.setFormat("lossless",!1);try{let e=!1;for(;!e;)await this.sync(),e=await this.parseCommonMpegHeader()}catch(e){if(e instanceof Ke){if(vn("End-of-stream"),this.calculateEofDuration&&this.samplesPerFrame!==null){const n=this.frameCount*this.samplesPerFrame;if(this.metadata.setFormat("numberOfSamples",n),this.metadata.format.sampleRate){const r=n/this.metadata.format.sampleRate;vn(`Calculate duration at EOF: ${r} sec.`,r),this.metadata.setFormat("duration",r)}}}else throw e}}finalize(){const e=this.metadata.format,n=!!this.metadata.native.ID3v1;if(this.mpegOffset!==null){if(e.duration&&this.tokenizer.fileInfo.size){const r=this.tokenizer.fileInfo.size-this.mpegOffset-(n?128:0);e.codecProfile&&e.codecProfile[0]==="V"&&this.metadata.setFormat("bitrate",r*8/e.duration)}else if(this.tokenizer.fileInfo.size&&e.codecProfile==="CBR"){const r=this.tokenizer.fileInfo.size-this.mpegOffset-(n?128:0);if(this.frame_size!==null&&this.samplesPerFrame!==null){const s=Math.round(r/this.frame_size)*this.samplesPerFrame;if(this.metadata.setFormat("numberOfSamples",s),e.sampleRate){const i=s/e.sampleRate;vn("Calculate CBR duration based on file size: %s",i),this.metadata.setFormat("duration",i)}}}}}async sync(){let e=!1;for(;;){let n=0;if(this.syncPeek.len=await this.tokenizer.peekBuffer(this.syncPeek.buf,{length:FS,mayBeLess:!0}),this.syncPeek.len<=163)throw new Ke;for(;;){if(e&&(this.syncPeek.buf[n]&224)===224){this.buf_frame_header[0]=mt.SyncByte1,this.buf_frame_header[1]=this.syncPeek.buf[n],await this.tokenizer.ignore(n),vn(`Sync at offset=${this.tokenizer.position-1}, frameCount=${this.frameCount}`),this.syncFrameCount===this.frameCount&&(vn(`Re-synced MPEG stream, frameCount=${this.frameCount}`),this.frameCount=0,this.frame_size=0),this.syncFrameCount=this.frameCount;return}if(e=!1,n=this.syncPeek.buf.indexOf(mt.SyncByte1,n),n===-1){if(this.syncPeek.len<this.syncPeek.buf.length)throw new Ke;await this.tokenizer.ignore(this.syncPeek.len);break}++n,e=!0}}}async parseCommonMpegHeader(){this.frameCount===0&&(this.mpegOffset=this.tokenizer.position-1),await this.tokenizer.peekBuffer(this.buf_frame_header,{offset:1,length:3});let e;try{e=MS.get(this.buf_frame_header,0)}catch(n){if(await this.tokenizer.ignore(1),n instanceof Error)return this.metadata.addWarning(`Parse error: ${n.message}`),!1;throw n}return await this.tokenizer.ignore(3),this.metadata.setFormat("container",e.container),this.metadata.setFormat("codec",e.codec),this.metadata.setFormat("lossless",!1),this.metadata.setFormat("sampleRate",e.samplingRate),this.frameCount++,e.version!==null&&e.version>=2&&e.layer===0?this.parseAdts(e):this.parseAudioFrameHeader(e)}async parseAudioFrameHeader(e){this.metadata.setFormat("numberOfChannels",e.channelMode==="mono"?1:2),this.metadata.setFormat("bitrate",e.bitrate),this.frameCount<20*1e4&&vn("offset=%s MP%s bitrate=%s sample-rate=%s",this.tokenizer.position-4,e.layer,e.bitrate,e.samplingRate);const n=e.calcSlotSize();if(n===null)throw new Error("invalid slot_size");const r=e.calcSamplesPerFrame();vn(`samples_per_frame=${r}`);const s=r/8;if(e.bitrate!==null&&e.samplingRate!=null){const i=s*e.bitrate/e.samplingRate+(e.padding?n:0);this.frame_size=Math.floor(i)}if(this.audioFrameHeader=e,e.bitrate!==null&&this.bitrates.push(e.bitrate),this.frameCount===1)return this.offset=MS.len,await this.skipSideInformation(),!1;if(this.frameCount===3){if(this.areAllSame(this.bitrates)){if(this.samplesPerFrame=r,this.metadata.setFormat("codecProfile","CBR"),this.tokenizer.fileInfo.size)return!0}else if(this.metadata.format.duration)return!0;if(!this.options.duration)return!0}return this.options.duration&&this.frameCount===4&&(this.samplesPerFrame=r,this.calculateEofDuration=!0),this.offset=4,e.isProtectedByCRC?(await this.parseCrc(),!1):(await this.skipSideInformation(),!1)}async parseAdts(e){const n=new Uint8Array(3);if(await this.tokenizer.readBuffer(n),e.frameLength+=de(n,0,0,11),this.totalDataLength+=e.frameLength,this.samplesPerFrame=1024,e.samplingRate!==null){const r=e.samplingRate/this.samplesPerFrame,i=8*(this.frameCount===0?0:this.totalDataLength/this.frameCount)*r+.5;this.metadata.setFormat("bitrate",i),vn(`frame-count=${this.frameCount}, size=${e.frameLength} bytes, bit-rate=${i}`)}if(await this.tokenizer.ignore(e.frameLength>7?e.frameLength-7:1),this.frameCount===3)if(this.metadata.setFormat("codecProfile",e.codecProfile),e.mp4ChannelConfig&&this.metadata.setFormat("numberOfChannels",e.mp4ChannelConfig.length),this.options.duration)this.calculateEofDuration=!0;else return!0;return!1}async parseCrc(){return this.crc=await this.tokenizer.readNumber(Jr),this.offset+=2,this.skipSideInformation()}async skipSideInformation(){if(this.audioFrameHeader){const e=this.audioFrameHeader.calculateSideInfoLength();if(e!==null){await this.tokenizer.readToken(new sn(e)),this.offset+=e,await this.readXtraInfoHeader();return}}}async readXtraInfoHeader(){const e=await this.tokenizer.readToken(OS);switch(this.offset+=OS.len,e){case"Info":return this.metadata.setFormat("codecProfile","CBR"),this.readXingInfoHeader();case"Xing":{const r=await this.readXingInfoHeader();if(r.vbrScale!==null){const s=QH(r.vbrScale);this.metadata.setFormat("codecProfile",s)}return null}case"Xtra":break;case"LAME":{const r=await this.tokenizer.readToken(zp);if(this.frame_size!==null&&this.frame_size>=this.offset+zp.len)return this.offset+=zp.len,this.metadata.setFormat("tool",`LAME ${r}`),await this.skipFrameData(this.frame_size-this.offset),null;this.metadata.addWarning("Corrupt LAME header");break}}const n=this.frame_size-this.offset;return n<0?this.metadata.addWarning(`Frame ${this.frameCount}corrupt: negative frameDataLeft`):await this.skipFrameData(n),null}async readXingInfoHeader(){const e=this.tokenizer.position,n=await GH(this.tokenizer);if(this.offset+=this.tokenizer.position-e,n.lame&&(this.metadata.setFormat("tool",`LAME ${Os(n.lame.version)}`),n.lame.extended&&(this.metadata.setFormat("trackPeakLevel",n.lame.extended.track_peak),n.lame.extended.track_gain&&this.metadata.setFormat("trackGain",n.lame.extended.track_gain.adjustment),n.lame.extended.album_gain&&this.metadata.setFormat("albumGain",n.lame.extended.album_gain.adjustment),this.metadata.setFormat("duration",n.lame.extended.music_length/1e3))),n.streamSize&&this.audioFrameHeader&&n.numFrames!==null){const s=this.audioFrameHeader.calcDuration(n.numFrames);return this.metadata.setFormat("duration",s),vn("Get duration from Xing header: %s",this.metadata.format.duration),n}const r=this.frame_size-this.offset;return await this.skipFrameData(r),n}async skipFrameData(e){if(e<0)throw new Error("frame-data-left cannot be negative");await this.tokenizer.ignore(e),this.countSkipFrameData+=e}areAllSame(e){const n=e[0];return e.every(r=>r===n)}}const $S=Se("music-metadata:parser:musepack:sv8"),YH=new q(2,"latin1"),zS={len:5,get:(t,e)=>({crc:U.get(t,e),streamVersion:se.get(t,e+4)})},BS={len:2,get:(t,e)=>({sampleFrequency:[44100,48e3,37800,32e3][de(t,e,0,3)],maxUsedBands:de(t,e,3,5),channelCount:de(t,e+1,0,4)+1,msUsed:wn(t,e+1,4),audioBlockFrames:de(t,e+1,5,3)})};class JH{constructor(e){this.tokenizer=e}async readPacketHeader(){const e=await this.tokenizer.readToken(YH),n=await this.readVariableSizeField();return{key:e,payloadLength:n.value-2-n.len}}async readStreamHeader(e){const n={};$S(`Reading SH at offset=${this.tokenizer.position}`);const r=await this.tokenizer.readToken(zS);e-=zS.len,Object.assign(n,r),$S(`SH.streamVersion = ${r.streamVersion}`);const s=await this.readVariableSizeField();e-=s.len,n.sampleCount=s.value;const i=await this.readVariableSizeField();e-=i.len,n.beginningOfSilence=i.value;const a=await this.tokenizer.readToken(BS);return e-=BS.len,Object.assign(n,a),await this.tokenizer.ignore(e),n}async readVariableSizeField(e=1,n=0){let r=await this.tokenizer.readNumber(se);return r&128?(r&=127,r+=n,this.readVariableSizeField(e+1,r<<7)):{len:e,value:n+r}}}const ZH=Se("music-metadata:parser:musepack");class eq extends jn{constructor(){super(...arguments),this.audioLength=0}async parse(){if(await this.tokenizer.readToken(je)!=="MPCK")throw new Error("Invalid Magic number");return this.metadata.setFormat("container","Musepack, SV8"),this.parsePacket()}async parsePacket(){const e=new JH(this.tokenizer);do{const n=await e.readPacketHeader();switch(ZH(`packet-header key=${n.key}, payloadLength=${n.payloadLength}`),n.key){case"SH":{const r=await e.readStreamHeader(n.payloadLength);this.metadata.setFormat("numberOfSamples",r.sampleCount),this.metadata.setFormat("sampleRate",r.sampleFrequency),this.metadata.setFormat("duration",r.sampleCount/r.sampleFrequency),this.metadata.setFormat("numberOfChannels",r.channelCount);break}case"AP":this.audioLength+=n.payloadLength,await this.tokenizer.ignore(n.payloadLength);break;case"RG":case"EI":case"SO":case"ST":case"CT":await this.tokenizer.ignore(n.payloadLength);break;case"SE":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",this.audioLength*8/this.metadata.format.duration),Cr.tryParseApeHeader(this.metadata,this.tokenizer,this.options);default:throw new Error(`Unexpected header: ${n.key}`)}}while(!0)}}class tq{constructor(e){this.tokenizer=e,this.pos=0,this.dword=null}async read(e){for(;this.dword===null;)this.dword=await this.tokenizer.readToken(U);let n=this.dword;return this.pos+=e,this.pos<32?(n>>>=32-this.pos,n&(1<<e)-1):(this.pos-=32,this.pos===0?(this.dword=null,n&(1<<e)-1):(this.dword=await this.tokenizer.readToken(U),this.pos&&(n<<=this.pos,n|=this.dword>>>32-this.pos),n&(1<<e)-1))}async ignore(e){if(this.pos>0){const s=32-this.pos;this.dword=null,e-=s,this.pos=0}const n=e%32,r=(e-n)/32;return await this.tokenizer.ignore(r*4),this.read(n)}}const nq={len:6*4,get:(t,e)=>{const n={signature:new TextDecoder("latin1").decode(t.subarray(e,e+3)),streamMinorVersion:de(t,e+3,0,4),streamMajorVersion:de(t,e+3,4,4),frameCount:U.get(t,e+4),maxLevel:ye.get(t,e+8),sampleFrequency:[44100,48e3,37800,32e3][de(t,e+10,0,2)],link:de(t,e+10,2,2),profile:de(t,e+10,4,4),maxBand:de(t,e+11,0,6),intensityStereo:wn(t,e+11,6),midSideStereo:wn(t,e+11,7),titlePeak:ye.get(t,e+12),titleGain:ye.get(t,e+14),albumPeak:ye.get(t,e+16),albumGain:ye.get(t,e+18),lastFrameLength:U.get(t,e+20)>>>20&2047,trueGapless:wn(t,e+23,0)};return n.lastFrameLength=n.trueGapless?U.get(t,20)>>>20&2047:0,n}},US=Se("music-metadata:parser:musepack");class rq extends jn{constructor(){super(...arguments),this.bitreader=null,this.audioLength=0,this.duration=null}async parse(){const e=await this.tokenizer.readToken(nq);if(e.signature!=="MP+")throw new Error("Unexpected magic number");US(`stream-version=${e.streamMajorVersion}.${e.streamMinorVersion}`),this.metadata.setFormat("container","Musepack, SV7"),this.metadata.setFormat("sampleRate",e.sampleFrequency);const n=1152*(e.frameCount-1)+e.lastFrameLength;this.metadata.setFormat("numberOfSamples",n),this.duration=n/e.sampleFrequency,this.metadata.setFormat("duration",this.duration),this.bitreader=new tq(this.tokenizer),this.metadata.setFormat("numberOfChannels",e.midSideStereo||e.intensityStereo?2:1);const r=await this.bitreader.read(8);return this.metadata.setFormat("codec",(r/100).toFixed(2)),await this.skipAudioData(e.frameCount),US(`End of audio stream, switching to APEv2, offset=${this.tokenizer.position}`),Cr.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async skipAudioData(e){for(;e-- >0;){const r=await this.bitreader.read(20);this.audioLength+=20+r,await this.bitreader.ignore(r)}const n=await this.bitreader.read(11);this.audioLength+=n,this.duration!==null&&this.metadata.setFormat("bitrate",this.audioLength/this.duration)}}const VS=Se("music-metadata:parser:musepack");class sq extends vm{async postId3v2Parse(){const e=await this.tokenizer.peekToken(new q(3,"latin1"));let n;switch(e){case"MP+":{VS("Musepack stream-version 7"),n=new rq;break}case"MPC":{VS("Musepack stream-version 8"),n=new eq;break}default:throw new Error("Invalid Musepack signature prefix")}return n.init(this.metadata,this.tokenizer,this.options),n.parse()}}class iq{constructor(e){if(this.len=e,e<19)throw new Error("ID-header-page 0 should be at least 19 bytes long")}get(e,n){return{magicSignature:new q(8,"ascii").get(e,n+0),version:se.get(e,n+8),channelCount:se.get(e,n+9),preSkip:ye.get(e,n+10),inputSampleRate:U.get(e,n+12),outputGain:ye.get(e,n+16),channelMapping:se.get(e,n+18)}}}class aq extends ra{constructor(e,n,r){super(e,n),this.tokenizer=r,this.idHeader=null,this.lastPos=-1}parseFirstPage(e,n){if(this.metadata.setFormat("codec","Opus"),this.idHeader=new iq(n.length).get(n,0),this.idHeader.magicSignature!=="OpusHead")throw new Error("Illegal ogg/Opus magic-signature");this.metadata.setFormat("sampleRate",this.idHeader.inputSampleRate),this.metadata.setFormat("numberOfChannels",this.idHeader.channelCount)}async parseFullPage(e){switch(new q(8,"ascii").get(e,0)){case"OpusTags":await this.parseUserCommentList(e,8),this.lastPos=this.tokenizer.position-e.length;break}}calculateDuration(e){if(this.metadata.format.sampleRate&&e.absoluteGranulePosition>=0){const n=e.absoluteGranulePosition-this.idHeader.preSkip;if(this.metadata.setFormat("numberOfSamples",n),this.metadata.setFormat("duration",n/48e3),this.lastPos!==-1&&this.tokenizer.fileInfo.size&&this.metadata.format.duration){const r=this.tokenizer.fileInfo.size-this.lastPos;this.metadata.setFormat("bitrate",8*r/this.metadata.format.duration)}}}}const oq={len:80,get:(t,e)=>({speex:new q(8,"ascii").get(t,e+0),version:JR(new q(20,"ascii").get(t,e+8)),version_id:qe.get(t,e+28),header_size:qe.get(t,e+32),rate:qe.get(t,e+36),mode:qe.get(t,e+40),mode_bitstream_version:qe.get(t,e+44),nb_channels:qe.get(t,e+48),bitrate:qe.get(t,e+52),frame_size:qe.get(t,e+56),vbr:qe.get(t,e+60),frames_per_packet:qe.get(t,e+64),extra_headers:qe.get(t,e+68),reserved1:qe.get(t,e+72),reserved2:qe.get(t,e+76)})},lq=Se("music-metadata:parser:ogg:speex");class cq extends ra{constructor(e,n,r){super(e,n),this.tokenizer=r}parseFirstPage(e,n){lq("First Ogg/Speex page");const r=oq.get(n,0);this.metadata.setFormat("codec",`Speex ${r.version}`),this.metadata.setFormat("numberOfChannels",r.nb_channels),this.metadata.setFormat("sampleRate",r.rate),r.bitrate!==-1&&this.metadata.setFormat("bitrate",r.bitrate)}}const uq={len:42,get:(t,e)=>({id:new q(7,"ascii").get(t,e),vmaj:se.get(t,e+7),vmin:se.get(t,e+8),vrev:se.get(t,e+9),vmbw:_e.get(t,e+10),vmbh:_e.get(t,e+17),nombr:en.get(t,e+37),nqual:se.get(t,e+40)})},Bp=Se("music-metadata:parser:ogg:theora");class dq{constructor(e,n,r){this.metadata=e,this.tokenizer=r}async parsePage(e,n){e.headerType.firstPage&&await this.parseFirstPage(e,n)}async flush(){Bp("flush")}calculateDuration(e){Bp("duration calculation not implemented")}async parseFirstPage(e,n){Bp("First Ogg/Theora page"),this.metadata.setFormat("codec","Theora");const r=uq.get(n,0);this.metadata.setFormat("bitrate",r.nombr)}}const Vr=Se("music-metadata:parser:ogg");class f1{static sum(e,n,r){const s=new DataView(e.buffer,0);let i=0;for(let a=n;a<n+r;++a)i+=s.getUint8(a);return i}constructor(e){this.len=e.page_segments}get(e,n){return{totalPageSize:f1.sum(e,n,this.len)}}}class xm extends jn{constructor(){super(...arguments),this.header=null,this.pageNumber=0,this.pageConsumer=null}async parse(){Vr("pos=%s, parsePage()",this.tokenizer.position);try{let e;do{if(e=await this.tokenizer.readToken(xm.Header),e.capturePattern!=="OggS")throw new Error("Invalid Ogg capture pattern");this.metadata.setFormat("container","Ogg"),this.header=e,this.pageNumber=e.pageSequenceNo,Vr("page#=%s, Ogg.id=%s",e.pageSequenceNo,e.capturePattern);const n=await this.tokenizer.readToken(new f1(e));Vr("totalPageSize=%s",n.totalPageSize);const r=await this.tokenizer.readToken(new sn(n.totalPageSize));if(Vr("firstPage=%s, lastPage=%s, continued=%s",e.headerType.firstPage,e.headerType.lastPage,e.headerType.continued),e.headerType.firstPage){const s=new TextDecoder("ascii").decode(r.subarray(0,7));switch(s){case"vorbis":Vr("Set page consumer to Ogg/Vorbis"),this.pageConsumer=new ra(this.metadata,this.options);break;case"OpusHea":Vr("Set page consumer to Ogg/Opus"),this.pageConsumer=new aq(this.metadata,this.options,this.tokenizer);break;case"Speex  ":Vr("Set page consumer to Ogg/Speex"),this.pageConsumer=new cq(this.metadata,this.options,this.tokenizer);break;case"fishead":case"\0theora":Vr("Set page consumer to Ogg/Theora"),this.pageConsumer=new dq(this.metadata,this.options,this.tokenizer);break;default:throw new Error(`gg audio-codec not recognized (id=${s})`)}}await this.pageConsumer.parsePage(e,r)}while(!e.headerType.lastPage)}catch(e){if(e instanceof Error)e instanceof Ke?(this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),Vr("End-of-stream"),this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),this.header&&this.pageConsumer.calculateDuration(this.header)):e.message.startsWith("FourCC")&&this.pageNumber>0&&(this.metadata.addWarning("Invalid FourCC ID, maybe last OGG-page is not marked with last-page flag"),await this.pageConsumer.flush());else throw e}}}xm.Header={len:27,get:(t,e)=>({capturePattern:je.get(t,e),version:se.get(t,e+4),headerType:{continued:ze(t,e+5,0),firstPage:ze(t,e+5,1),lastPage:ze(t,e+5,2)},absoluteGranulePosition:Number(Qt.get(t,e+6)),streamSerialNumber:U.get(t,e+14),pageSequenceNo:U.get(t,e+18),pageChecksum:U.get(t,e+22),page_segments:se.get(t,e+26)})};const Yo={len:8,get:(t,e)=>({chunkID:new q(4,"latin1").get(t,e),chunkSize:U.get(t,e+4)})};class hq{constructor(e){this.tagHeader=e,this.len=e.chunkSize,this.len+=this.len&1}get(e,n){return new q(this.tagHeader.chunkSize,"ascii").get(e,n)}}var Z0;(function(t){t[t.PCM=1]="PCM",t[t.ADPCM=2]="ADPCM",t[t.IEEE_FLOAT=3]="IEEE_FLOAT",t[t.MPEG_ADTS_AAC=5632]="MPEG_ADTS_AAC",t[t.MPEG_LOAS=5634]="MPEG_LOAS",t[t.RAW_AAC1=255]="RAW_AAC1",t[t.DOLBY_AC3_SPDIF=146]="DOLBY_AC3_SPDIF",t[t.DVM=8192]="DVM",t[t.RAW_SPORT=576]="RAW_SPORT",t[t.ESST_AC3=577]="ESST_AC3",t[t.DRM=9]="DRM",t[t.DTS2=8193]="DTS2",t[t.MPEG=80]="MPEG"})(Z0||(Z0={}));class fq{constructor(e){if(e.chunkSize<16)throw new Error("Invalid chunk size");this.len=e.chunkSize}get(e,n){return{wFormatTag:ye.get(e,n),nChannels:ye.get(e,n+2),nSamplesPerSec:U.get(e,n+4),nAvgBytesPerSec:U.get(e,n+8),nBlockAlign:ye.get(e,n+12),wBitsPerSample:ye.get(e,n+14)}}}class mq{constructor(e){if(e.chunkSize<4)throw new Error("Invalid fact chunk size.");this.len=e.chunkSize}get(e,n){return{dwSampleLength:U.get(e,n)}}}const WS={len:420,get:(t,e)=>({description:Os(new q(256,"ascii").get(t,e)).trim(),originator:Os(new q(32,"ascii").get(t,e+256)).trim(),originatorReference:Os(new q(32,"ascii").get(t,e+288)).trim(),originationDate:Os(new q(10,"ascii").get(t,e+320)).trim(),originationTime:Os(new q(8,"ascii").get(t,e+330)).trim(),timeReferenceLow:U.get(t,e+338),timeReferenceHigh:U.get(t,e+342),version:ye.get(t,e+346),umid:new sn(64).get(t,e+348),loudnessValue:ye.get(t,e+412),maxTruePeakLevel:ye.get(t,e+414),maxMomentaryLoudness:ye.get(t,e+416),maxShortTermLoudness:ye.get(t,e+418)})},ks=Se("music-metadata:parser:RIFF");class pq extends jn{constructor(){super(...arguments),this.blockAlign=0}async parse(){const e=await this.tokenizer.readToken(Yo);if(ks(`pos=${this.tokenizer.position}, parse: chunkID=${e.chunkID}`),e.chunkID==="RIFF")return this.parseRiffChunk(e.chunkSize).catch(n=>{if(!(n instanceof Ke))throw n})}async parseRiffChunk(e){const n=await this.tokenizer.readToken(je);switch(this.metadata.setFormat("container",n),n){case"WAVE":return this.readWaveChunk(e-je.len);default:throw new Error(`Unsupported RIFF format: RIFF/${n}`)}}async readWaveChunk(e){for(;e>=Yo.len;){const n=await this.tokenizer.readToken(Yo);switch(e-=Yo.len+n.chunkSize,n.chunkSize>e&&this.metadata.addWarning("Data chunk size exceeds file size"),this.header=n,ks(`pos=${this.tokenizer.position}, readChunk: chunkID=RIFF/WAVE/${n.chunkID}`),n.chunkID){case"LIST":await this.parseListTag(n);break;case"fact":this.metadata.setFormat("lossless",!1),this.fact=await this.tokenizer.readToken(new mq(n));break;case"fmt ":{const r=await this.tokenizer.readToken(new fq(n));let s=Z0[r.wFormatTag];s||(ks(`WAVE/non-PCM format=${r.wFormatTag}`),s=`non-PCM (${r.wFormatTag})`),this.metadata.setFormat("codec",s),this.metadata.setFormat("bitsPerSample",r.wBitsPerSample),this.metadata.setFormat("sampleRate",r.nSamplesPerSec),this.metadata.setFormat("numberOfChannels",r.nChannels),this.metadata.setFormat("bitrate",r.nBlockAlign*r.nSamplesPerSec*8),this.blockAlign=r.nBlockAlign;break}case"id3 ":case"ID3 ":{const r=await this.tokenizer.readToken(new sn(n.chunkSize)),s=wo(r);await new nr().parse(this.metadata,s,this.options);break}case"data":{this.metadata.format.lossless!==!1&&this.metadata.setFormat("lossless",!0);let r=n.chunkSize;if(this.tokenizer.fileInfo.size){const i=this.tokenizer.fileInfo.size-this.tokenizer.position;i<r&&(this.metadata.addWarning("data chunk length exceeding file length"),r=i)}const s=this.fact?this.fact.dwSampleLength:r===4294967295?void 0:r/this.blockAlign;s&&(this.metadata.setFormat("numberOfSamples",s),this.metadata.format.sampleRate&&this.metadata.setFormat("duration",s/this.metadata.format.sampleRate)),this.metadata.format.codec==="ADPCM"?this.metadata.setFormat("bitrate",352e3):this.metadata.format.sampleRate&&this.metadata.setFormat("bitrate",this.blockAlign*this.metadata.format.sampleRate*8),await this.tokenizer.ignore(n.chunkSize);break}case"bext":{const r=await this.tokenizer.readToken(WS);Object.keys(r).forEach(i=>{this.metadata.addTag("exif",`bext.${i}`,r[i])});const s=n.chunkSize-WS.len;await this.tokenizer.ignore(s);break}case"\0\0\0\0":ks(`Ignore padding chunk: RIFF/${n.chunkID} of ${n.chunkSize} bytes`),this.metadata.addWarning(`Ignore chunk: RIFF/${n.chunkID}`),await this.tokenizer.ignore(n.chunkSize);break;default:ks(`Ignore chunk: RIFF/${n.chunkID} of ${n.chunkSize} bytes`),this.metadata.addWarning(`Ignore chunk: RIFF/${n.chunkID}`),await this.tokenizer.ignore(n.chunkSize)}this.header.chunkSize%2===1&&(ks("Read odd padding byte"),await this.tokenizer.ignore(1))}}async parseListTag(e){const n=await this.tokenizer.readToken(new q(4,"latin1"));switch(ks("pos=%s, parseListTag: chunkID=RIFF/WAVE/LIST/%s",this.tokenizer.position,n),n){case"INFO":return this.parseRiffInfoTags(e.chunkSize-4);default:return this.metadata.addWarning(`Ignore chunk: RIFF/WAVE/LIST/${n}`),ks(`Ignoring chunkID=RIFF/WAVE/LIST/${n}`),this.tokenizer.ignore(e.chunkSize-4).then()}}async parseRiffInfoTags(e){for(;e>=8;){const n=await this.tokenizer.readToken(Yo),r=new hq(n),s=await this.tokenizer.readToken(r);this.addTag(n.chunkID,Os(s)),e-=8+r.len}if(e!==0)throw new Error(`Illegal remaining size: ${e}`)}addTag(e,n){this.metadata.addTag("exif",e,n)}}const gq=[6e3,8e3,9600,11025,12e3,16e3,22050,24e3,32e3,44100,48e3,64e3,88200,96e3,192e3,-1],$u={len:32,get:(t,e)=>{const n=U.get(t,e+24),r={BlockID:je.get(t,e),blockSize:U.get(t,e+4),version:ye.get(t,e+8),totalSamples:U.get(t,e+12),blockIndex:U.get(t,e+16),blockSamples:U.get(t,e+20),flags:{bitsPerSample:(1+Rh(n,0,2))*8,isMono:wr(n,2),isHybrid:wr(n,3),isJointStereo:wr(n,4),crossChannel:wr(n,5),hybridNoiseShaping:wr(n,6),floatingPoint:wr(n,7),samplingRate:gq[Rh(n,23,4)],isDSD:wr(n,31)},crc:new sn(4).get(t,e+28)};return r.flags.isDSD&&(r.totalSamples*=8),r}},Up={len:1,get:(t,e)=>({functionId:Rh(t[e],0,6),isOptional:wr(t[e],5),isOddSize:wr(t[e],6),largeBlock:wr(t[e],7)})};function wr(t,e){return Rh(t,e,1)===1}function Rh(t,e,n){return t>>>e&4294967295>>>32-n}const wi=Se("music-metadata:parser:WavPack");class yq extends jn{constructor(){super(...arguments),this.audioDataSize=0}async parse(){return this.audioDataSize=0,await this.parseWavPackBlocks(),Cr.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async parseWavPackBlocks(){do{if(await this.tokenizer.peekToken(je)!=="wvpk")break;const n=await this.tokenizer.readToken($u);if(n.BlockID!=="wvpk")throw new Error("Invalid WavPack Block-ID");wi(`WavPack header blockIndex=${n.blockIndex}, len=${$u.len}`),n.blockIndex===0&&!this.metadata.format.container&&(this.metadata.setFormat("container","WavPack"),this.metadata.setFormat("lossless",!n.flags.isHybrid),this.metadata.setFormat("bitsPerSample",n.flags.bitsPerSample),n.flags.isDSD||(this.metadata.setFormat("sampleRate",n.flags.samplingRate),this.metadata.setFormat("duration",n.totalSamples/n.flags.samplingRate)),this.metadata.setFormat("numberOfChannels",n.flags.isMono?1:2),this.metadata.setFormat("numberOfSamples",n.totalSamples),this.metadata.setFormat("codec",n.flags.isDSD?"DSD":"PCM"));const r=n.blockSize-($u.len-8);await(n.blockIndex===0?this.parseMetadataSubBlock(n,r):this.tokenizer.ignore(r)),n.blockSamples>0&&(this.audioDataSize+=n.blockSize)}while(!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=$u.len);this.metadata.format.duration&&this.metadata.setFormat("bitrate",this.audioDataSize*8/this.metadata.format.duration)}async parseMetadataSubBlock(e,n){let r=n;for(;r>Up.len;){const s=await this.tokenizer.readToken(Up),i=await this.tokenizer.readNumber(s.largeBlock?_h:se),a=new Uint8Array(i*2-(s.isOddSize?1:0));switch(await this.tokenizer.readBuffer(a),wi(`Metadata Sub-Blocks functionId=0x${s.functionId.toString(16)}, id.largeBlock=${s.largeBlock},data-size=${a.length}`),s.functionId){case 0:break;case 14:{wi("ID_DSD_BLOCK");const o=1<<se.get(a,0),c=e.flags.samplingRate*o*8;if(!e.flags.isDSD)throw new Error("Only expect DSD block if DSD-flag is set");this.metadata.setFormat("sampleRate",c),this.metadata.setFormat("duration",e.totalSamples/c);break}case 36:wi("ID_ALT_TRAILER: trailer for non-wav files");break;case 38:this.metadata.setFormat("audioMD5",a);break;case 47:wi(`ID_BLOCK_CHECKSUM: checksum=${a1(a)}`);break;default:wi(`Ignore unsupported meta-sub-block-id functionId=0x${s.functionId.toString(16)}`);break}r-=Up.len+(s.largeBlock?_h.len:se.len)+i*2,wi(`remainingLength=${r}`),s.isOddSize&&this.tokenizer.ignore(1)}if(r!==0)throw new Error("metadata-sub-block should fit it remaining length")}}const zu={len:12,get:(t,e)=>({id:je.get(t,e),size:Qt.get(t,e+4)})},vq={len:16,get:(t,e)=>({fileSize:Eh.get(t,e),metadataPointer:Eh.get(t,e+8)})};var HS;(function(t){t[t.mono=1]="mono",t[t.stereo=2]="stereo",t[t.channels=3]="channels",t[t.quad=4]="quad",t[t["4 channels"]=5]="4 channels",t[t["5 channels"]=6]="5 channels",t[t["5.1 channels"]=7]="5.1 channels"})(HS||(HS={}));const xq={len:40,get:(t,e)=>({formatVersion:qe.get(t,e),formatID:qe.get(t,e+4),channelType:qe.get(t,e+8),channelNum:qe.get(t,e+12),samplingFrequency:qe.get(t,e+16),bitsPerSample:qe.get(t,e+20),sampleCount:Eh.get(t,e+24),blockSizePerChannel:qe.get(t,e+32)})},Vp=Se("music-metadata:parser:DSF");class wq extends vm{async postId3v2Parse(){const e=this.tokenizer.position,n=await this.tokenizer.readToken(zu);if(n.id!=="DSD ")throw new Error("Invalid chunk signature");this.metadata.setFormat("container","DSF"),this.metadata.setFormat("lossless",!0);const r=await this.tokenizer.readToken(vq);if(r.metadataPointer===BigInt(0))Vp("No ID3v2 tag present");else return Vp(`expect ID3v2 at offset=${r.metadataPointer}`),await this.parseChunks(r.fileSize-n.size),await this.tokenizer.ignore(Number(r.metadataPointer)-this.tokenizer.position-e),new nr().parse(this.metadata,this.tokenizer,this.options)}async parseChunks(e){for(;e>=zu.len;){const n=await this.tokenizer.readToken(zu);switch(Vp(`Parsing chunk name=${n.id} size=${n.size}`),n.id){case"fmt ":{const r=await this.tokenizer.readToken(xq);this.metadata.setFormat("numberOfChannels",r.channelNum),this.metadata.setFormat("sampleRate",r.samplingFrequency),this.metadata.setFormat("bitsPerSample",r.bitsPerSample),this.metadata.setFormat("numberOfSamples",r.sampleCount),this.metadata.setFormat("duration",Number(r.sampleCount)/r.samplingFrequency);const s=r.bitsPerSample*r.samplingFrequency*r.channelNum;this.metadata.setFormat("bitrate",s);return}default:this.tokenizer.ignore(Number(n.size)-zu.len);break}e-=n.size}}}const _a={len:12,get:(t,e)=>({chunkID:je.get(t,e),chunkSize:VR.get(t,e+4)})},Gt=Se("music-metadata:parser:aiff");class _q extends jn{async parse(){const e=await this.tokenizer.readToken(_a);if(e.chunkID!=="FRM8")throw new Error("Unexpected chunk-ID");const n=(await this.tokenizer.readToken(je)).trim();switch(n){case"DSD":return this.metadata.setFormat("container",`DSDIFF/${n}`),this.metadata.setFormat("lossless",!0),this.readFmt8Chunks(e.chunkSize-BigInt(je.len));default:throw new Error(`Unsupported DSDIFF type: ${n}`)}}async readFmt8Chunks(e){for(;e>=_a.len;){const n=await this.tokenizer.readToken(_a);Gt(`Chunk id=${n.chunkID}`),await this.readData(n),e-=BigInt(_a.len)+n.chunkSize}}async readData(e){Gt(`Reading data of chunk[ID=${e.chunkID}, size=${e.chunkSize}]`);const n=this.tokenizer.position;switch(e.chunkID.trim()){case"FVER":{const s=await this.tokenizer.readToken(U);Gt(`DSDIFF version=${s}`);break}case"PROP":{if(await this.tokenizer.readToken(je)!=="SND ")throw new Error("Unexpected PROP-chunk ID");await this.handleSoundPropertyChunks(e.chunkSize-BigInt(je.len));break}case"ID3":{const s=await this.tokenizer.readToken(new sn(Number(e.chunkSize))),i=wo(s);await new nr().parse(this.metadata,i,this.options);break}case"DSD":this.metadata.format.numberOfChannels&&this.metadata.setFormat("numberOfSamples",Number(e.chunkSize*BigInt(8)/BigInt(this.metadata.format.numberOfChannels))),this.metadata.format.numberOfSamples&&this.metadata.format.sampleRate&&this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate);break;default:Gt(`Ignore chunk[ID=${e.chunkID}, size=${e.chunkSize}]`);break}const r=e.chunkSize-BigInt(this.tokenizer.position-n);r>0&&(Gt(`After Parsing chunk, remaining ${r} bytes`),await this.tokenizer.ignore(Number(r)))}async handleSoundPropertyChunks(e){for(Gt(`Parsing sound-property-chunks, remainingSize=${e}`);e>0;){const n=await this.tokenizer.readToken(_a);Gt(`Sound-property-chunk[ID=${n.chunkID}, size=${n.chunkSize}]`);const r=this.tokenizer.position;switch(n.chunkID.trim()){case"FS":{const i=await this.tokenizer.readToken(G);this.metadata.setFormat("sampleRate",i);break}case"CHNL":{const i=await this.tokenizer.readToken(_e);this.metadata.setFormat("numberOfChannels",i),await this.handleChannelChunks(n.chunkSize-BigInt(_e.len));break}case"CMPR":{const i=(await this.tokenizer.readToken(je)).trim(),a=await this.tokenizer.readToken(se),o=await this.tokenizer.readToken(new q(a,"ascii"));i==="DSD"&&(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("bitsPerSample",1)),this.metadata.setFormat("codec",`${i} (${o})`);break}case"ABSS":{const i=await this.tokenizer.readToken(_e),a=await this.tokenizer.readToken(se),o=await this.tokenizer.readToken(se),c=await this.tokenizer.readToken(G);Gt(`ABSS ${i}:${a}:${o}.${c}`);break}case"LSCO":{const i=await this.tokenizer.readToken(_e);Gt(`LSCO lsConfig=${i}`);break}default:Gt(`Unknown sound-property-chunk[ID=${n.chunkID}, size=${n.chunkSize}]`),await this.tokenizer.ignore(Number(n.chunkSize))}const s=n.chunkSize-BigInt(this.tokenizer.position-r);s>0&&(Gt(`After Parsing sound-property-chunk ${n.chunkSize}, remaining ${s} bytes`),await this.tokenizer.ignore(Number(s))),e-=BigInt(_a.len)+n.chunkSize,Gt(`Parsing sound-property-chunks, remainingSize=${e}`)}if(this.metadata.format.lossless&&this.metadata.format.sampleRate&&this.metadata.format.numberOfChannels&&this.metadata.format.bitsPerSample){const n=this.metadata.format.sampleRate*this.metadata.format.numberOfChannels*this.metadata.format.bitsPerSample;this.metadata.setFormat("bitrate",n)}}async handleChannelChunks(e){Gt(`Parsing channel-chunks, remainingSize=${e}`);const n=[];for(;e>=je.len;){const r=await this.tokenizer.readToken(je);Gt(`Channel[ID=${r}]`),n.push(r),e-=BigInt(je.len)}return Gt(`Channels: ${n.join(", ")}`),n}}var C;(function(t){t[t.string=0]="string",t[t.uint=1]="uint",t[t.uid=2]="uid",t[t.bool=3]="bool",t[t.binary=4]="binary",t[t.float=5]="float"})(C||(C={}));const Eq={name:"dtd",container:{440786851:{name:"ebml",container:{17030:{name:"ebmlVersion",value:C.uint},17143:{name:"ebmlReadVersion",value:C.uint},17138:{name:"ebmlMaxIDWidth",value:C.uint},17139:{name:"ebmlMaxSizeWidth",value:C.uint},17026:{name:"docType",value:C.string},17031:{name:"docTypeVersion",value:C.uint},17029:{name:"docTypeReadVersion",value:C.uint}}},408125543:{name:"segment",container:{290298740:{name:"seekHead",container:{19899:{name:"seek",multiple:!0,container:{21419:{name:"id",value:C.binary},21420:{name:"position",value:C.uint}}}}},357149030:{name:"info",container:{29604:{name:"uid",value:C.uid},29572:{name:"filename",value:C.string},3979555:{name:"prevUID",value:C.uid},3965867:{name:"prevFilename",value:C.string},4110627:{name:"nextUID",value:C.uid},4096955:{name:"nextFilename",value:C.string},2807729:{name:"timecodeScale",value:C.uint},17545:{name:"duration",value:C.float},17505:{name:"dateUTC",value:C.uint},31657:{name:"title",value:C.string},19840:{name:"muxingApp",value:C.string},22337:{name:"writingApp",value:C.string}}},524531317:{name:"cluster",multiple:!0,container:{231:{name:"timecode",value:C.uid},22743:{name:"silentTracks ",multiple:!0},167:{name:"position",value:C.uid},171:{name:"prevSize",value:C.uid},160:{name:"blockGroup"},163:{name:"simpleBlock"}}},374648427:{name:"tracks",container:{174:{name:"entries",multiple:!0,container:{215:{name:"trackNumber",value:C.uint},29637:{name:"uid",value:C.uid},131:{name:"trackType",value:C.uint},185:{name:"flagEnabled",value:C.bool},136:{name:"flagDefault",value:C.bool},21930:{name:"flagForced",value:C.bool},156:{name:"flagLacing",value:C.bool},28135:{name:"minCache",value:C.uint},28136:{name:"maxCache",value:C.uint},2352003:{name:"defaultDuration",value:C.uint},2306383:{name:"timecodeScale",value:C.float},21358:{name:"name",value:C.string},2274716:{name:"language",value:C.string},134:{name:"codecID",value:C.string},25506:{name:"codecPrivate",value:C.binary},2459272:{name:"codecName",value:C.string},3839639:{name:"codecSettings",value:C.string},3883072:{name:"codecInfoUrl",value:C.string},2536e3:{name:"codecDownloadUrl",value:C.string},170:{name:"codecDecodeAll",value:C.bool},28587:{name:"trackOverlay",value:C.uint},224:{name:"video",container:{154:{name:"flagInterlaced",value:C.bool},21432:{name:"stereoMode",value:C.uint},176:{name:"pixelWidth",value:C.uint},186:{name:"pixelHeight",value:C.uint},21680:{name:"displayWidth",value:C.uint},21690:{name:"displayHeight",value:C.uint},21683:{name:"aspectRatioType",value:C.uint},3061028:{name:"colourSpace",value:C.uint},3126563:{name:"gammaValue",value:C.float}}},225:{name:"audio",container:{181:{name:"samplingFrequency",value:C.float},30901:{name:"outputSamplingFrequency",value:C.float},159:{name:"channels",value:C.uint},148:{name:"channels",value:C.uint},32123:{name:"channelPositions",value:C.binary},25188:{name:"bitDepth",value:C.uint}}},28032:{name:"contentEncodings",container:{25152:{name:"contentEncoding",container:{20529:{name:"order",value:C.uint},20530:{name:"scope",value:C.bool},20531:{name:"type",value:C.uint},20532:{name:"contentEncoding",container:{16980:{name:"contentCompAlgo",value:C.uint},16981:{name:"contentCompSettings",value:C.binary}}},20533:{name:"contentEncoding",container:{18401:{name:"contentEncAlgo",value:C.uint},18402:{name:"contentEncKeyID",value:C.binary},18403:{name:"contentSignature ",value:C.binary},18404:{name:"ContentSigKeyID  ",value:C.binary},18405:{name:"contentSigAlgo ",value:C.uint},18406:{name:"contentSigHashAlgo ",value:C.uint}}},25188:{name:"bitDepth",value:C.uint}}}}}}}}},475249515:{name:"cues",container:{187:{name:"cuePoint",container:{179:{name:"cueTime",value:C.uid},183:{name:"positions",container:{247:{name:"track",value:C.uint},241:{name:"clusterPosition",value:C.uint},21368:{name:"blockNumber",value:C.uint},234:{name:"codecState",value:C.uint},219:{name:"reference",container:{150:{name:"time",value:C.uint},151:{name:"cluster",value:C.uint},21343:{name:"number",value:C.uint},235:{name:"codecState",value:C.uint}}},240:{name:"relativePosition",value:C.uint}}}}}}},423732329:{name:"attachments",container:{24999:{name:"attachedFiles",multiple:!0,container:{18046:{name:"description",value:C.string},18030:{name:"name",value:C.string},18016:{name:"mimeType",value:C.string},18012:{name:"data",value:C.binary},18094:{name:"uid",value:C.uid}}}}},272869232:{name:"chapters",container:{17849:{name:"editionEntry",container:{182:{name:"chapterAtom",container:{29636:{name:"uid",value:C.uid},145:{name:"timeStart",value:C.uint},146:{name:"timeEnd",value:C.uid},152:{name:"hidden",value:C.bool},17816:{name:"enabled",value:C.uid},143:{name:"track",container:{137:{name:"trackNumber",value:C.uid},128:{name:"display",container:{133:{name:"string",value:C.string},17276:{name:"language ",value:C.string},17278:{name:"country ",value:C.string}}}}}}}}}}},307544935:{name:"tags",container:{29555:{name:"tag",multiple:!0,container:{25536:{name:"target",container:{25541:{name:"tagTrackUID",value:C.uid},25540:{name:"tagChapterUID",value:C.uint},25542:{name:"tagAttachmentUID",value:C.uid},25546:{name:"targetType",value:C.string},26826:{name:"targetTypeValue",value:C.uint},25545:{name:"tagEditionUID",value:C.uid}}},26568:{name:"simpleTags",multiple:!0,container:{17827:{name:"name",value:C.string},17543:{name:"string",value:C.string},17541:{name:"binary",value:C.binary},17530:{name:"language",value:C.string},17531:{name:"languageIETF",value:C.string},17540:{name:"default",value:C.bool}}}}}}}}}}},Ea=Se("music-metadata:parser:ebml");var rr;(function(t){t[t.ReadNext=0]="ReadNext",t[t.IgnoreElement=2]="IgnoreElement",t[t.SkipSiblings=3]="SkipSiblings",t[t.TerminateParsing=4]="TerminateParsing",t[t.SkipElement=5]="SkipElement"})(rr||(rr={}));class Sq{constructor(e){this.tokenizer=e,this.padding=0,this.parserMap=new Map,this.ebmlMaxIDLength=4,this.ebmlMaxSizeLength=8,this.parserMap.set(C.uint,n=>this.readUint(n)),this.parserMap.set(C.string,n=>this.readString(n)),this.parserMap.set(C.binary,n=>this.readBuffer(n)),this.parserMap.set(C.uid,async n=>this.readBuffer(n)),this.parserMap.set(C.bool,n=>this.readFlag(n)),this.parserMap.set(C.float,n=>this.readFloat(n))}async iterate(e,n,r){return this.parseContainer(oP(e),n,r)}async parseContainer(e,n,r){const s={};for(;this.tokenizer.position<n;){let i;const a=this.tokenizer.position;try{i=await this.readElement()}catch(c){if(c instanceof Ke)break;throw c}const o=e.container[i.id];if(o)switch(r.startNext(o)){case rr.ReadNext:if(i.id,Ea(`Read element: name=${Ii(o)}{id=0x${i.id.toString(16)}, container=${!!o.container}} at position=${a}`),o.container){const u=await this.parseContainer(o,i.len>=0?this.tokenizer.position+i.len:-1,r);o.multiple?(s[o.name]||(s[o.name]=[]),s[o.name].push(u)):s[o.name]=u,await r.elementValue(o,u,a)}else{const u=this.parserMap.get(o.value);if(typeof u=="function"){const d=await u(i);s[o.name]=d,await r.elementValue(o,d,a)}}break;case rr.SkipElement:Ea(`Go to next element: name=${Ii(o)}, element.id=0x${i.id}, container=${!!o.container} at position=${a}`);break;case rr.IgnoreElement:Ea(`Ignore element: name=${Ii(o)}, element.id=0x${i.id}, container=${!!o.container} at position=${a}`),await this.tokenizer.ignore(i.len);break;case rr.SkipSiblings:Ea(`Ignore remaining container, at: name=${Ii(o)}, element.id=0x${i.id}, container=${!!o.container} at position=${a}`),await this.tokenizer.ignore(n-this.tokenizer.position);break;case rr.TerminateParsing:return Ea(`Terminate parsing at element: name=${Ii(o)}, element.id=0x${i.id}, container=${!!o.container} at position=${a}`),s}else switch(i.id){case 236:this.padding+=i.len,await this.tokenizer.ignore(i.len);break;default:Ea(`parseEbml: parent=${Ii(e)}, unknown child: id=${i.id.toString(16)} at position=${a}`),this.padding+=i.len,await this.tokenizer.ignore(i.len)}}return s}async readVintData(e){const n=await this.tokenizer.peekNumber(se);let r=128,s=1;for(;!(n&r);){if(s>e)throw new Error("VINT value exceeding maximum size");++s,r>>=1}const i=new Uint8Array(s);return await this.tokenizer.readBuffer(i),i}async readElement(){const e=await this.readVintData(this.ebmlMaxIDLength),n=await this.readVintData(this.ebmlMaxSizeLength);return n[0]^=128>>n.length-1,{id:Wp(e,e.length),len:Wp(n,n.length)}}async readFloat(e){switch(e.len){case 0:return 0;case 4:return this.tokenizer.readNumber(WR);case 8:return this.tokenizer.readNumber(U0);case 10:return this.tokenizer.readNumber(U0);default:throw new Error(`Invalid IEEE-754 float length: ${e.len}`)}}async readFlag(e){return await this.readUint(e)===1}async readUint(e){const n=await this.readBuffer(e);return Wp(n,e.len)}async readString(e){return(await this.tokenizer.readToken(new q(e.len,"utf-8"))).replace(/\x00.*$/g,"")}async readBuffer(e){const n=new Uint8Array(e.len);return await this.tokenizer.readBuffer(n),n}}function Wp(t,e){return Number(bq(t,e))}function bq(t,e){const n=new Uint8Array(8),r=t.subarray(0,e);try{return n.set(r,8-e),s1.get(n,0)}catch{return BigInt(-1)}}function oP(t){return t.container&&Object.keys(t.container).map(e=>{const n=t.container[e];return n.id=Number.parseInt(e),n}).forEach(e=>{e.parent=t,oP(e)}),t}function Ii(t){let e="";return t.parent&&t.parent.name!=="dtd"&&(e+=`${Ii(t.parent)}/`),e+t.name}const Bu=Se("music-metadata:parser:matroska");class kq extends jn{constructor(){super(...arguments),this.seekHeadOffset=0,this.flagUseIndexToSkipClusters=!1}init(e,n,r){return super.init(e,n,r),this.flagUseIndexToSkipClusters=r.mkvUseIndex??!1,this}async parse(){const e=this.tokenizer.fileInfo.size??Number.MAX_SAFE_INTEGER,n=new Sq(this.tokenizer);Bu("Initializing DTD end MatroskaIterator"),await n.iterate(Eq,e,{startNext:r=>{switch(r.id){case 475249515:return Bu(`Skip element: name=${r.name}, id=0x${r.id.toString(16)}`),rr.IgnoreElement;case 524531317:if(this.flagUseIndexToSkipClusters&&this.seekHead){const s=this.seekHead.seek.find(i=>i.position+this.seekHeadOffset>this.tokenizer.position);if(s){const i=s.position+this.seekHeadOffset-this.tokenizer.position;return Bu(`Use index to go to next position, ignoring ${i} bytes`),this.tokenizer.ignore(i),rr.SkipElement}}return rr.IgnoreElement;default:return rr.ReadNext}},elementValue:async(r,s,i)=>{switch(Bu(`Received: name=${r.name}, value=${s}`),r.id){case 17026:this.metadata.setFormat("container",`EBML/${s}`);break;case 290298740:this.seekHead=s,this.seekHeadOffset=i;break;case 357149030:{const a=s,o=a.timecodeScale?a.timecodeScale:1e6;if(typeof a.duration=="number"){const c=a.duration*o/1e9;await this.addTag("segment:title",a.title),this.metadata.setFormat("duration",Number(c))}}break;case 374648427:{const a=s;if(a!=null&&a.entries){a.entries.forEach(c=>{const u={codecName:c.codecID.replace("A_","").replace("V_",""),codecSettings:c.codecSettings,flagDefault:c.flagDefault,flagLacing:c.flagLacing,flagEnabled:c.flagEnabled,language:c.language,name:c.name,type:c.trackType,audio:c.audio,video:c.video};this.metadata.addStreamInfo(u)});const o=a.entries.filter(c=>c.trackType===ta.audio).reduce((c,u)=>!c||u.flagDefault&&!c.flagDefault||u.trackNumber<c.trackNumber?u:c,null);o&&(this.metadata.setFormat("codec",o.codecID.replace("A_","")),this.metadata.setFormat("sampleRate",o.audio.samplingFrequency),this.metadata.setFormat("numberOfChannels",o.audio.channels))}}break;case 307544935:{const a=s;await Promise.all(a.tag.map(async o=>{const c=o.target,u=c!=null&&c.targetTypeValue?W0[c.targetTypeValue]:c!=null&&c.targetType?c.targetType:"track";await Promise.all(o.simpleTags.map(async d=>{const h=d.string?d.string:d.binary;await this.addTag(`${u}:${d.name}`,h)}))}))}break;case 423732329:{const a=s;await Promise.all(a.attachedFiles.filter(o=>o.mimeType.startsWith("image/")).map(o=>this.addTag("picture",{data:o.data,format:o.mimeType,description:o.description,name:o.name})))}break}}})}async addTag(e,n){await this.metadata.addTag("matroska",e,n)}}const Ph=Se("music-metadata:parser:factory");function Tq(t){const e=o1.parse(t),n=bW(e.type);return{type:n.type,subtype:n.subtype,suffix:n.suffix,parameters:e.parameters}}async function Iq(t,e){const{mimeType:n,path:r,url:s}=t.fileInfo,i=lP(n)||ey(r)||ey(s);return i||Ph(`No parser found for MIME-type / extension: ${n}`),Cq(t,i,e)}async function Cq(t,e,n){if(!e){Ph("Guess parser on content...");const i=new Uint8Array(4100);if(await t.peekBuffer(i,{mayBeLess:!0}),t.fileInfo.path&&(e=ey(t.fileInfo.path)),!e){const a=await QR(i);if(!a)throw new Error("Failed to determine audio format");if(Ph(`Guessed file type is mime=${a.mime}, extension=${a.ext}`),e=lP(a.mime),!e)throw new Error(`Guessed MIME-type not supported: ${a.mime}`)}}const r=await Aq(e),s=new rH(n);return await r.init(s,t,n??{}).parse(),s.toCommonMetadata()}function ey(t){if(!t)return;switch(Rq(t).toLocaleLowerCase()||t){case".mp2":case".mp3":case".m2a":case".aac":return"mpeg";case".ape":return"apev2";case".mp4":case".m4a":case".m4b":case".m4pa":case".m4v":case".m4r":case".3gp":return"mp4";case".wma":case".wmv":case".asf":return"asf";case".flac":return"flac";case".ogg":case".ogv":case".oga":case".ogm":case".ogx":case".opus":case".spx":return"ogg";case".aif":case".aiff":case".aifc":return"aiff";case".wav":case".bwf":return"riff";case".wv":case".wvp":return"wavpack";case".mpc":return"musepack";case".dsf":return"dsf";case".dff":return"dsdiff";case".mka":case".mkv":case".mk3d":case".mks":case".webm":return"matroska"}}async function Aq(t){switch(t){case"aiff":return new uH;case"adts":case"mpeg":return new XH;case"apev2":return new Cr;case"asf":return new EH;case"dsf":return new wq;case"dsdiff":return new _q;case"flac":return new kH;case"mp4":return new Ah;case"musepack":return new sq;case"ogg":return new xm;case"riff":return new pq;case"wavpack":return new yq;case"matroska":return new kq;default:throw new Error(`Unknown parser type: ${t}`)}}function Rq(t){const e=t.lastIndexOf(".");return e===-1?"":t.slice(e)}function lP(t){let e;if(!t)return;try{e=Tq(t)}catch{Ph(`Invalid HTTP Content-Type header value: ${t}`);return}const n=e.subtype.indexOf("x-")===0?e.subtype.substring(2):e.subtype;switch(e.type){case"audio":switch(n){case"mp3":case"mpeg":return"mpeg";case"aac":case"aacp":return"adts";case"flac":return"flac";case"ape":case"monkeys-audio":return"apev2";case"mp4":case"m4a":return"mp4";case"ogg":case"opus":case"speex":return"ogg";case"ms-wma":case"ms-wmv":case"ms-asf":return"asf";case"aiff":case"aif":case"aifc":return"aiff";case"vnd.wave":case"wav":case"wave":return"riff";case"wavpack":return"wavpack";case"musepack":return"musepack";case"matroska":case"webm":return"matroska";case"dsf":return"dsf"}break;case"video":switch(n){case"ms-asf":case"ms-wmv":return"asf";case"m4v":case"mp4":return"mp4";case"ogg":return"ogg";case"matroska":case"webm":return"matroska"}break;case"application":switch(n){case"vnd.ms-asf":return"asf";case"ogg":return"ogg"}break}}async function Pq(t,e={}){const n={mimeType:t.type,size:t.size};return t instanceof File&&(n.path=t.name),Nq(t.stream(),n,e)}function Nq(t,e,n={}){return jq(UR(t,{fileInfo:typeof e=="string"?{mimeType:e}:e}),n)}function jq(t,e){return Iq(t,e)}const cP=async t=>{if(!t)return;const e=await Pq(t);if(!e)return;const{common:{title:n,artist:r},format:{duration:s}}=e;return Object.assign({},{name:n||t.name,singer:r||"...",duration:s||0})};function Dq(){const{user:t}=qn(),{isDev:e}=L(),{songs:n,setSongs:r}=At(),{setTempSongs:s,tempSongs:i,clearTempSongs:a,shiftSong:o,status:c}=Rx(),u=f.useRef([]),d=f.useRef([]),h=f.useRef(!1),m=f.useRef(null),{setErrorToast:p,setSuccessToast:g}=xt(),x=v=>{if(!m.current)return;const y=m.current;y&&(y.value="",d.current=[]),a(v)},_=f.useCallback(async v=>{if(!t)return p("Missing user data");a("uploading");const w=v.target.files;if(!w.length){a("finish");return}let E=RA({by:t.email}),S=[];const b=Date.now(),k=T=>n.some(N=>N.singer===T.singer&&N.name===T.name&&N.size===T.size)||S.some(N=>N.singer===T.singer&&N.name===T.name&&N.size===T.size);try{let T;for(T=0;T<=w.length-1;T++){const D=w[T],ee=await cP(D);if(!ee){p("Error when parser song"),x("finish-error");return}let K={...E,name:ee.name,singer:ee.singer,duration:Math.floor(ee.duration),size:Math.floor(D.size/1024)};if(k(K)){console.log(">>>duplicate"),h.current=!0,u.current.push(K);continue}S.push(K),d.current=[...d.current,T]}if(n.length+d.current.length>5&&t.role!=="ADMIN"){x("finish-error"),p("You have reach the upload limit");return}if(!S.length){h.current=!1,x("finish-error"),p("Duplicate song");return}s(S);for(let D=0;D<d.current.length;D++){const ee=d.current[D],K=eu(S[D].name),ie={...S[D]},{filePath:V,fileURL:oe}=await t1({file:w[ee],folder:"/songs/",namePrefix:t.email,msg:">>> api: upload song file"});Object.assign(ie,{id:K,song_file_path:V,song_url:oe}),await pt({collection:"songs",data:ie,id:ie.id,msg:">>> api: set song doc"}),r(We=>[...We,{...ie,queue_id:ma(4)}]),o(),e&&console.log(ie.name,"uploaded")}d.current=[],h.current?(x("finish-error"),g()):(x("finish"),g(`${S.length} songs uploaded`));const N=Date.now();e&&console.log(">>> upload songs finished after",(N-b)/1e3);return}catch(T){console.log({message:T}),x("finish-error"),p()}},[t,n]);return f.useEffect(()=>{const v=document.querySelector(".temp-song");v&&v.scrollIntoView({behavior:"smooth",block:"center"})},[i]),{handleInputChange:_,inputRef:m}}const m1=(t,e)=>`linear-gradient(to right, ${t} ${e}%, rgba(255,255,255,.15) ${e}%, rgba(255,255,255,.15) 100%)`;function Oq({audioEle:t,volumeLineRef:e}){const{theme:n}=L(),[r,s]=f.useState(!1),[i,a]=LR("volume",1),o=d=>{const m=d.target.getBoundingClientRect(),p=e.current;if(p){let g=+((d.clientX-m.x)/p.clientWidth).toFixed(2);g>.9?g=1:g<.05?(g=0,s(!0)):s(!1),a(g)}},c=d=>{d.preventDefault();const h=.1;let m=i;d.deltaY>0?m-h>0?m-=h:m=0:m+h<1?m+=h:m=1,a(+m.toFixed(2))},u=()=>s(!r);return f.useEffect(()=>{if(e.current&&t){const d=i*100;e.current.style.background=m1(n.content_code,d),t.volume=i,s(i===0)}},[i,n]),f.useEffect(()=>{t&&(t.muted=r)},[r]),{volume:i,handleSetVolume:o,isMute:r,handleMute:u,handleWheel:c}}const Fq=async t=>{const e=Date.now(),n=await AA.post("/api/image/encode",t);let r;n&&(r=n.data.encode);const s=(Date.now()-e)/1e3;return console.log(">>> api: get blurHash encode finished after",s),{encode:r}},Lq=async t=>{const e=new FormData;e.append("file",t);const n=Date.now(),r=await AA.post("/api/image/optimize",e,{responseType:"blob"});let s;r&&(s=r.data);const i=(Date.now()-n)/1e3;return console.log(">>> api: optimize finished after",i),s},Mq=/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;function $q({song:t,inputFields:e,modalRef:n}){const{user:r}=qn(),{updateSong:s}=At(),[i,a]=f.useState(!!t.name),[o,c]=f.useState(!!t.singer),[u,d]=f.useState(!1),[h,m]=f.useState(!1),[p,g]=f.useState(!1),[x,_]=f.useState(!1),[v,y]=f.useState(!1),[w,E]=f.useState(t.image_url),[S,b]=f.useState(""),[k,T]=f.useState(),{setErrorToast:N,setSuccessToast:D}=xt(),ee=async()=>{var K,ie;if(r){if(!t.id){N("Edit song wrong song id");return}try{_(!0),(K=n.current)==null||K.setModalPersist(!0);let V={name:t.name,singer:t.singer,image_url:t.image_url,image_file_path:t.image_file_path,blurhash_encode:t.blurhash_encode};if(p){if(console.log("is change in edit"),!e.name||!e.singer){console.log("input invalid"),N("");return}const oe=e.image_url&&u?e.image_url:t.image_url;if(await tu(1e3),Object.assign(V,{name:e.name,singer:e.singer,image_url:oe}),V.name!==e.name||V.singer!==e.singer){console.log("input invalid"),N();return}if(k&&v){const{filePath:We,fileURL:Qe}=await t1({file:k,folder:"/images/",namePrefix:r.email});V.image_file_path=We,V.image_url=Qe}else v&&(V.image_file_path="")}if(v&&(_(!0),console.log("isImpactOnImage"),t.image_file_path&&(V.image_file_path="",V.image_url="",await $0({filePath:t.image_file_path,msg:">>> api: delete song's image file"})),!w&&!k&&(console.log("remove current image url"),V.image_file_path="",V.image_url=""),k)){console.log("upload new file");const oe=await Lq(k);if(oe==null)return;const We=_V({blob:oe,folder:"/images/",songId:t.id}),{encode:Qe}=await Fq(oe);Qe&&(V.blurhash_encode=Qe,console.log("check encode",Qe));const{filePath:F,fileURL:H}=await We;V.image_file_path=F,V.image_url=H}await pt({collection:"songs",data:V,id:t.id,msg:">>> api: update song doc"}),s({id:t.id,song:V}),D("Song edited"),(ie=n.current)==null||ie.close()}catch(V){console.log({message:V}),N()}finally{_(!1)}}};return f.useEffect(()=>{e.name?a(!0):a(!1)},[e.name]),f.useEffect(()=>{e.singer?c(!0):c(!1)},[e.singer]),f.useEffect(()=>{if(!e.image_url){d(!0);return}const K=Mq.test(e.image_url);d(K)},[e.image_url]),f.useEffect(()=>{(e.name!==t.name||e.singer!==t.singer||e.image_url)&&g(!0)},[e,S]),f.useEffect(()=>{m(i&&o&&u&&p)},[i,o,u,p]),{isFetching:x,validName:i,validSinger:o,validURL:u,isAbleToSubmit:h,isChangeInEdit:p,setValidURL:d,handleSubmit:ee,setIsImpactOnImage:y,setStockImageURL:E,setImageURLFromLocal:b,setImageFileFromLocal:T,isImpactOnImage:v,stockImageURL:w,imageURLFromLocal:S,imageFileFromLocal:k}}function zq(){const t=rn(),{queueSongs:e,currentQueueId:n,currentSongData:r}=Z(ct),{isRepeat:s,isShuffle:i,playStatus:a}=Z(pn),o=f.useCallback(()=>{if(!r)return;let h=r.index+1,m;h<e.length?m=e[h]:(h=0,m=e[0]),t(ms(m.queue_id))},[r,e]),c=f.useCallback(()=>{if(!r)return;let h=r.index-1,m;h>=0?m=e[h]:(m=e[e.length-1],h=e.length-1),t(ms(m.queue_id))},[r,e]);return{handleNext:o,handlePrevious:c,handleRepeatSong:()=>{let h;switch(s){case"no":h="one";break;case"one":h="all";break;case"all":h="no";break;default:h="no"}It("isRepeat",h),t(st({isRepeat:h}))},handleShuffle:()=>{const h=!i;t(st({isShuffle:h})),It("isShuffle",h)},playStatus:a,queueSongs:e,currentQueueId:n}}function Bq(){const{isOpenFullScreen:t,audioRef:e}=Ht();if(!e.current)throw new Error("Use Control audioRef.current is undefined");const n=rn(),{theme:r}=L(),{user:s}=qn(),{queueSongs:i,currentSongData:a}=Z(ct),{playStatus:o,triggerPlayStatus:c,isRepeat:u,isShuffle:d,isCrossFade:h}=Z(pn),{currentPlaylist:m}=Z(fr),p=f.useRef(!0),g=f.useRef(),x=f.useRef(0),_=f.useRef(0),v=f.useRef(r.content_code),y=f.useRef(!1),w=f.useRef(!0),E=f.useRef(!1),S=f.useRef(!1),b=f.useRef(null),k=f.useRef(null),T=f.useRef("paused"),N=hr(),{setErrorToast:D}=xt(),{currentQueueId:ee,handleNext:K,handlePrevious:ie,handleRepeatSong:V,handleShuffle:oe}=zq(),We=f.useMemo(()=>N.pathname.includes("edit"),[N]),Qe=f.useMemo(()=>ir(),[]),F=async ae=>{try{if(p.current&&(p.current=!1,ae)){const He=ir().current_time||0;e.current.currentTime=He}if(await e.current.play(),S.current=!1,E.current=!1,!s)return;w.current&&(h&&(e.current.volume=0),w.current=!1)}catch{}},H=()=>{e.current.pause()},te=ae=>i[ae],ke=()=>{o==="playing"&&H(),o==="paused"&&F(!0)},Pe=()=>{n(st({playStatus:"paused"}))},pr=()=>{o!=="playing"&&n(st({playStatus:"playing"}))},le=()=>{b.current&&k.current&&(k.current.innerText="0:00",b.current.style.background="rgba(255, 255, 255, 0.15)")},ut=ae=>{const dt=ae.target;if(b.current){const He=dt.getBoundingClientRect(),ws=(ae.clientX-He.left)/b.current.offsetWidth,_s=Math.round(ws*e.current.duration),LP=e.current.currentTime;if(x.current&&Math.abs(LP-x.current)<1&&Math.abs(_s-x.current)<1)return;Xe(_s),p.current?It("current_time",_s):e.current.currentTime=_s,x.current=_s}},_t=ae=>{const dt=ir().volume||1;if(ae<=2){const He=ae/2*dt;e.current.volume=He}else if(ae<_.current){e.current.volume!=dt&&(e.current.volume=dt);return}if(ae>=_.current){const He=(e.current.duration-ae)/2*dt;e.current.volume=He}},Xe=ae=>{const dt=b.current,He=k.current,Qn=ae||e.current.currentTime;if(e.current.duration&&dt){const ws=Qn/(e.current.duration/100);dt.style.background=m1(v.current,+ws.toFixed(1))}He&&(He.innerText=yo(Qn)||"0:00")},Mo=()=>{const ae=e.current.currentTime;T.current!=="paused"&&n(st({playStatus:"playing"})),Xe(ae),h&&_t(ae),ae&&Math.round(ae)%3===0&&It("current_time",Math.round(ae))},I1=()=>{if(!g.current)return;const ae=ir(),dt=ae.volume||1,He=ae.timer;if(u==="one"&&He&&He!==1)return F();if(e.current.volume=dt,E.current=!0,d){let Qn=g.current.index;for(;Qn===g.current.index;)Qn=Math.round(Math.random()*i.length-1);const ws=te(Qn);return n(ms(ws.queue_id))}return He===1?y.current=!0:g.current.index===i.length-1&&(u==="all"?y.current=!1:y.current=!0),K()},C1=()=>{g.current&&n(st({playStatus:"loading"}))},A1=()=>{var He;if(!g.current)return;const ae=e.current.duration,dt=Qe.current_queue_id;if(_.current=ae-3,It("current_queue_id",g.current.song.queue_id),y.current)return y.current=!1,n(st({playStatus:"paused"}));if((We||p.current)&&(n(st({playStatus:"paused"})),p.current&&dt===((He=g.current)==null?void 0:He.song.queue_id))){Xe(Qe.current_time||0);return}F()},R1=()=>{n(st({playStatus:"waiting"}))},P1=()=>{if(g.current){if(S.current||(S.current=!0,D("Found internet error")),!E.current)return n(st({playStatus:"error"}));if(i.length>1){if(g.current.index===i.length-1){n(st({playStatus:"error"}));return}K()}else n(st({playStatus:"error"}))}};return f.useEffect(()=>{const ae=Qe.current_queue_id||null;ae&&i.length?n(ms(ae)):p.current=!1},[]),f.useEffect(()=>(e.current.addEventListener("error",P1),e.current.addEventListener("pause",Pe),e.current.addEventListener("play",pr),e.current.addEventListener("loadstart",C1),e.current.addEventListener("loadedmetadata",A1),e.current.addEventListener("waiting",R1),()=>{var ae,dt,He,Qn,ws,_s;(ae=e.current)==null||ae.removeEventListener("error",P1),(dt=e.current)==null||dt.removeEventListener("pause",Pe),(He=e.current)==null||He.removeEventListener("play",pr),(Qn=e.current)==null||Qn.removeEventListener("loadstart",C1),(ws=e.current)==null||ws.removeEventListener("loadedmetadata",A1),(_s=e.current)==null||_s.addEventListener("waiting",R1)}),[]),f.useEffect(()=>{if(!a||!ee){T.current="paused",H();return}return e.current.src=a.song.song_url,g.current=a,()=>{le(),w.current=!0}},[a==null?void 0:a.song]),f.useEffect(()=>{if(!a){o==="paused"&&le();return}let ae=`${a.song.name} - ${a.song.singer}`;o==="paused"&&m&&a.song.song_in.includes(m.id)&&(ae=`${m.name}`),document.title=ae,T.current=o},[o]),f.useEffect(()=>{if(!(!c||c===o))switch(console.log("triggerPlayStatus",c),c){case"playing":F();break;case"paused":H();break;default:console.log("no trigger action")}},[c]),f.useEffect(()=>(e.current.addEventListener("ended",I1),()=>{var ae;return(ae=e.current)==null?void 0:ae.removeEventListener("ended",I1)}),[u,d,ee,i]),f.useEffect(()=>(e.current.addEventListener("timeupdate",Mo),()=>{var ae;(ae=e.current)==null||ae.removeEventListener("timeupdate",Mo)}),[h]),f.useEffect(()=>{g.current&&(t?v.current="#fff":v.current=r.content_code,Xe(p.current?Qe.current_time:0))},[r,t]),f.useEffect(()=>{We&&o==="playing"&&H()},[We]),{isOpenFullScreen:t,timelineEleRef:b,currentTimeEleRef:k,handleSeek:ut,playStatus:o,currentSongData:a,play:F,pause:H,handlePlayPause:ke,isRepeat:u,isShuffle:d,isCrossFade:h,handlePrevious:ie,handleRepeatSong:V,handleShuffle:oe,queueSongs:i,resetForNewSong:le,handleNext:K}}function Uq({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M10 17a.75.75 0 01-.75-.75V5.612L5.29 9.77a.75.75 0 01-1.08-1.04l5.25-5.5a.75.75 0 011.08 0l5.25 5.5a.75.75 0 11-1.08 1.04l-3.96-4.158V16.25A.75.75 0 0110 17z",clipRule:"evenodd"}))}const Vq=f.forwardRef(Uq),Wq=Vq;function Hq({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z",clipRule:"evenodd"}))}const qq=f.forwardRef(Hq),ty=qq;function Gq({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z",clipRule:"evenodd"}))}const Kq=f.forwardRef(Gq),Qq=Kq;function Xq({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z"}),f.createElement("path",{d:"M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z"}))}const Yq=f.forwardRef(Xq),Jq=Yq;function Zq({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"}))}const eG=f.forwardRef(Zq),ny=eG;function tG({title:t,titleId:e,...n},r){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"}))}const nG=f.forwardRef(tG),rG=nG;function mr({close:t,title:e}){return l.jsxs("div",{className:"flex justify-between mb-3",children:[l.jsx("div",{className:"text-xl leading-[2.2] font-playwriteCU",children:e}),l.jsx("button",{onClick:t,children:l.jsx(rG,{className:"w-7"})})]})}function uP(t,e){const[n,r]=f.useState(t);return f.useEffect(()=>{if(!t){r("");return}const s=setTimeout(()=>{r(t)},e);return()=>{clearTimeout(s)}},[t]),n}function sG(){const[t,e]=f.useState(""),[n,r]=f.useState(!1),[s,i]=f.useState([]),a=f.useRef(!1),o=uP(t,700),c=new AbortController;return f.useEffect(()=>{if(!o.trim()){r(!1),i([]);return}return(async()=>{try{r(!0),await tu(1e3),a.current=!0,i([])}catch(d){console.log(d)}finally{r(!1)}})(),()=>{console.log("abort"),c.abort()}},[o]),f.useEffect(()=>()=>{a.current=!1},[t]),{isFetching:n,searchResult:s,value:t,setValue:e,isEmpty:a}}function iG({children:t,className:e="py-2"}){const{theme:n}=L();return l.jsx("div",{className:`rounded-md ${n.modal_bg} text-white ${e}`,children:t})}function yi({children:t,className:e=""}){const n={container:"[&>*]:px-3 [&>*]:w-full [&>*]:py-2 [&>*]:w-full [&>*]:space-x-1 [&>*]:text-sm [&>*]:flex [&>*]:items-center hover:[&>*:not(div.absolute)]:bg-white/5"};return l.jsx("div",{className:`${n.container} ${e}`,children:t})}function aG({setSinger:t}){const{theme:e}=L(),{isFetching:n,isEmpty:r,searchResult:s,value:i,setValue:a}=sG(),o=f.useRef(null),c=()=>{var u;t(i),(u=o.current)==null||u.close()};return l.jsx(l.Fragment,{children:l.jsxs($r,{appendOnPortal:!0,children:[l.jsx(zr,{ref:o,children:l.jsx("button",{className:`ml-2 ${e.content_bg} rounded-full`,children:l.jsx(ny,{className:"w-5"})})}),l.jsx(Cn,{appendTo:"portal",children:l.jsx(Gn,{bg:"clear",className:`${e.content_bg}`,theme:e,children:l.jsxs("div",{className:"w-[200px] max-h-[50vh] flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"rounded-md overflow-hidden text-white bg-black/10 flex items-center p-1.5 pl-2",children:[l.jsx("input",{value:i,onChange:u=>a(u.target.value.trim()),placeholder:"name...",className:"bg-transparent min-w-[0] outline-none text-sm placeholder:text-white"}),l.jsx(mn,{className:`w-5 animate-spin ${n?"opacity-100":"opacity-0"}`})]}),l.jsx(yi,{className:"mt-2",children:s.length?s.map((u,d)=>l.jsx("button",{children:u},d)):r.current&&l.jsxs("button",{onClick:c,className:"inline-flex items-center space-x-1 rounded-md",children:[l.jsx(ny,{className:"w-5"}),l.jsxs("span",{children:["Add singer '",i,"'"]})]})})]})})})]})})}function dP({song:t,admin:e,modalRef:n}){const{theme:r}=L(),[s,i]=f.useState({name:t.name,singer:t.singer,image_url:""}),a=f.useRef(null),{isAbleToSubmit:o,validName:c,validSinger:u,validURL:d,imageURLFromLocal:h,isImpactOnImage:m,setImageFileFromLocal:p,setImageURLFromLocal:g,setStockImageURL:x,setIsImpactOnImage:_,stockImageURL:v,setValidURL:y,isFetching:w,handleSubmit:E}=$q({song:t,inputFields:s,modalRef:n}),S=f.useMemo(()=>{if(h)return h;if(v)return v;if(d)return s.image_url},[s,h,v,t,d]),b=f.useMemo(()=>!!h||!!v,[h,v]),k=(oe,We)=>{i({...s,[oe]:We})},T=f.useCallback(()=>{t.image_file_path&&!h?x(""):h?(g(""),p(void 0)):x(""),_(!0);const oe=a.current;oe&&(oe.value="")},[h,t.image_file_path]),N=f.useCallback(oe=>{const Qe=oe.target.files[0];g(URL.createObjectURL(Qe)),_(!0),p(Qe)},[]),D=oe=>{var We;oe.stopPropagation(),(We=n.current)==null||We.close()},ee=oe=>oe?l.jsx(Vf,{className:"w-6 text-emerald-500 ml-2"}):l.jsx(dr,{className:"w-6 text-red-500 ml-2"}),K={input:"px-2 py-1 outline-none rounded-[4px] bg-[#fff]/5 font-[500]",label:"text-lg inline-flex"},ie=()=>l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-col gap-[5px]",children:[l.jsxs("label",{htmlFor:"name",className:K.label,children:["Name",ee(c)]}),l.jsx("input",{className:`${K.input} `,value:s.name,type:"text",id:"name",onChange:oe=>k("name",oe.target.value),placeholder:t.name})]}),!e&&l.jsxs("div",{className:"flex flex-col gap-[5px]",children:[l.jsxs("label",{htmlFor:"singer",className:K.label,children:["Singer",ee(u)]}),l.jsx("input",{className:K.input,value:s.singer,onChange:oe=>k("singer",oe.target.value),type:"text",id:"singer",placeholder:t.singer})]}),l.jsxs("div",{className:"flex flex-col gap-[5px]",children:[l.jsxs("label",{htmlFor:"image-url",className:K.label,children:["Image URL",s.image_url&&l.jsx(l.Fragment,{children:ee(d)})]}),l.jsx("input",{id:"image-url",className:K.input,value:s.image_url,onChange:oe=>k("image_url",oe.target.value),type:"text"})]})]}),V=()=>l.jsxs(l.Fragment,{children:[ie(),l.jsxs("div",{className:"flex flex-col gap-[5px]",children:[l.jsxs("div",{className:`${K.label} items-center`,children:[l.jsx("span",{children:"Singer"}),l.jsx(aG,{setSinger:oe=>k("singer",oe)})]}),l.jsx("div",{className:"bg-white/5 rounded-md p-2",children:s.singer})]}),l.jsxs("div",{className:"flex flex-col gap-[5px]",children:[l.jsx("label",{htmlFor:"image-url",className:K.label,children:"Genre"}),l.jsx("select",{className:K.input,children:l.jsx("option",{value:"",children:"Other"})})]})]});return l.jsxs("div",{className:`${mc(w)} w-[600px] max-h-[80vh] max-w-[90vw] text-white flex flex-col`,children:[l.jsx("input",{ref:a,id:"editImageInput",type:"file",accept:"image/*",onChange:N,className:"hidden"}),l.jsx(mr,{title:"Edit song",close:()=>{var oe;return(oe=n.current)==null?void 0:oe.close()}}),l.jsxs("div",{className:"flex flex-col flex-grow overflow-auto md:overflow-hidden md:flex-row mt-5",children:[l.jsxs("div",{className:"w-full md:w-[30%]",children:[l.jsx("div",{className:"w-[70%] mx-auto md:w-full",children:l.jsx("div",{className:"pt-[100%] relative",children:l.jsx("div",{className:"absolute inset-0",children:l.jsx(xs,{className:"object-cover rounded-md object-center w-full h-full",onError:()=>y(!1),src:S,blurHashEncode:t.blurhash_encode})})})}),l.jsxs("div",{className:"mt-3",children:[l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("label",{htmlFor:"editImageInput",className:`inline-block cursor-pointer hover:brightness-90 px-[20px] py-[5px] bg-${r.alpha} rounded-full text-[14px]`,children:l.jsx(jx,{className:"w-5"})}),b&&l.jsx(B,{onClick:()=>T(),className:`inline-block hover:brightness-90 px-[20px] py-[5px] ${r.content_bg} rounded-full text-[14px]`,children:l.jsx(dr,{className:"w-5"})})]}),l.jsx("p",{className:"text-sm  mt-[10px]",children:"* Image from URL will not be apply until you remove current image"})]})]}),l.jsx("div",{className:"pt-5 md:pt-0 md:pl-5 flex flex-col md:flex-grow space-y-3",children:e?V():ie()})]}),l.jsxs("div",{className:"flex mt-5 space-x-2 justify-end",children:[l.jsx(B,{onClick:D,className:`bg-${r.alpha} rounded-full`,variant:"primary",children:"Close"}),l.jsx(B,{isLoading:w,onClick:E,className:`${r.content_bg} rounded-full ${o?"":!m&&"disable"}`,variant:"primary",children:"Save"})]})]})}function oG({lyric:t,openModal:e,seek:n,theme:r,isLast:s}){return l.jsx(l.Fragment,{children:l.jsxs("div",{className:"pt-[10px] last:mb-[30vh]",children:[l.jsx("button",{className:`text-[18px] ${r.content_hover_text}`,onClick:()=>n(t.start),children:yo(+t.start)}),l.jsxs("p",{className:"font-[700] select-none flex items-center",children:[t.text,l.jsx("button",{onClick:e,className:"ml-1",children:l.jsx(Jq,{className:"w-5"})})]}),s&&l.jsx("button",{className:`${r.content_hover_text}`,onClick:()=>n(t.start),children:yo(t.end)})]})})}function hP({cb:t,active:e,className:n,size:r="default"}){const{theme:s}=L(),i={circle:`${r==="default"?"w-[20px] h-[20px]":"w-[16px] h-[16px]"}  absolute bg-white left-[3px] rounded-[50%] transition-transform top-[50%] translate-y-[-50%]`,active:`${r==="default"?"translate-x-[14px]":"translate-x-[18px]"} `,inActive:"translate-x-[0]"};return l.jsx("div",{onClick:t,className:`relative  cursor-pointer ${r==="default"?"h-[24px]":"h-[20px]"} rounded-[99px] w-[40px] ${n||""} 
         ${e?s.content_bg:"bg-"+s.alpha} `,children:l.jsx("div",{className:`${i.circle} ${e?i.active:i.inActive}`})})}function lG(){const{audioRef:t,controlRef:e}=Ht();if(!t.current)throw new Error("useCountDown audioRef.current is undefined");const{playStatus:n}=Z(pn),[r,s]=f.useState(0),[i,a]=f.useState(0),o=f.useRef(!1),c=d=>{It("timer",0),s(0),o.current=!0,d&&a(0)},u=()=>{a(d=>d-1>0?(It("timer",d-1),d-1):(c(),0))};return f.useEffect(()=>{const d=ir().timer||0;s(d),a(d)},[]),f.useEffect(()=>{if(r)return t.current.addEventListener("ended",u),()=>{t.current.removeEventListener("ended",u)}},[r]),f.useEffect(()=>{var d;r&&(i||(a(r),It("timer",r),n==="paused"&&((d=e.current)==null||d.handlePlayPause())))},[r]),{countDown:i,clearTimer:c,setCountDown:a,setIsActive:s,isActive:r}}function cG({children:t,className:e="px-2 py-1 text-sm font-[500]",position:n="bottom-[calc(100%+8px)]",content:r,isWrapped:s,...i},a){const[o,c]=f.useState(!1),{theme:u}=L(),{setTriggerRef:d,state:h}=vs(),{onClick:m}=i,p=f.useRef(null),g=()=>{"ontouchstart"in document.documentElement||c(!0)},x=()=>{c(!1)};f.useEffect(()=>{const y=p.current;if(y)return d&&d(y),y.addEventListener("mouseenter",g),y.addEventListener("mouseleave",x),()=>{y.removeEventListener("mouseenter",g),y.removeEventListener("mouseleave",x)}},[]);const _={container:`${u.modal_bg} text-white`},v=l.jsx(l.Fragment,{children:f.isValidElement(t)&&l.jsxs(l.Fragment,{children:[Object.keys(i).length?f.cloneElement(t,{ref:p,onClick:m}):f.cloneElement(t,{ref:p}),!(h!=null&&h.isOpen)&&o&&l.jsx("div",{className:`${_.container} absolute whitespace-nowrap -translate-x-1/2 left-1/2 rounded-md ${n} ${e}`,children:r})]})});if(f.isValidElement(t))return l.jsx(l.Fragment,{children:s?v:l.jsx("div",{className:"relative",children:v})})}const rs=f.forwardRef(cG);function fP(){const{theme:t}=L(),e=f.useRef(null),{countDown:n,isActive:r,clearTimer:s,setIsActive:i}=lG(),a=u=>i(u),o=()=>{var u;r?s(!0):(u=e.current)==null||u.open()},c={container:"w-[54px] sm:w-[50px] flex justify-center",button:`rounded-[99px]  hover:bg-${t.alpha} p-[5px]`,itemContainer:"flex justify-between items-center min-h-[30px]",text:"text-base text-[#ccc]"};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:c.container,children:r?l.jsx(rs,{content:"Clear timer",children:l.jsxs("button",{className:"group flex items-center",onClick:o,children:[l.jsx("span",{className:"text-base opacity-70 sm:text-sm group-hover:hidden",children:n.toString().padStart(2,"0")}),l.jsx("span",{className:`hidden group-hover:block ${c.button}`,children:l.jsx(dr,{className:"w-8 sm:w-6"})})]})}):l.jsx(rs,{content:"Sleep timer",children:l.jsx("button",{onClick:o,className:c.button,children:l.jsx(WA,{className:"w-8 sm:w-6"})})})}),l.jsx(an,{ref:e,variant:"animation",children:l.jsx(tK,{active:a,closeModal:()=>{var u;return(u=e.current)==null?void 0:u.close()}})})]})}function uG({vinylRef:t}){const{playStatus:e}=Z(pn);f.useEffect(()=>{const n=t.current;n&&(e==="playing"?n.style.animationPlayState="running":n.style.animationPlayState="paused")},[e])}function dG({isOpenFullScreen:t,admin:e,song:n}){const r=f.useRef(null);uG({vinylRef:r});const s={songInfoWrapper:`${e?"w-1/4":"w-1/4 "}`,songInfoChild:"flex flex-row"};return l.jsx("div",{className:`${s.songInfoWrapper}  ${pc(t)}`,children:l.jsxs("div",{className:`${s.songInfoChild} ${pc(t)}`,children:[l.jsx("div",{ref:r,className:`${e?"w-[46px]":"w-[56px]"}  animate-[spin_8s_linear_infinite]`,children:l.jsx(xs,{src:n==null?void 0:n.image_url,className:"rounded-full w-full"})}),l.jsxs("div",{className:"ml-2 flex-grow",children:[l.jsx("div",{className:"h-[32px]",children:l.jsx(jh,{className:"leading-[1.5] font-playwriteCU",content:(n==null?void 0:n.name)||"Name"})}),l.jsx("div",{className:"h-[20px]",children:l.jsx(jh,{autoScroll:!0,className:"opacity-70 leading-[1.2]",content:(n==null?void 0:n.singer)||"..."})})]})]})})}function hG({audioEle:t}){const e=f.useRef(null),{handleMute:n,handleWheel:r,handleSetVolume:s,isMute:i}=Oq({audioEle:t,volumeLineRef:e}),a={before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]",volumeLineBase:"ml-1 w-full relative h-[4px] cursor-pointer rounded-full shadow-[2px_2px_10px_rgba(0,0,0,.15)]"};return l.jsxs("div",{className:"flex flex-grow items-center max-w-[120px] mr-2",children:[l.jsx("button",{onWheel:r,onClick:()=>n(),children:i?l.jsx(X7,{className:"w-6"}):l.jsx(G7,{className:"w-6"})}),l.jsx("div",{onClick:o=>s(o),ref:e,className:`${a.volumeLineBase} ${a.before}`,style:{background:"#e1e1e1"}})]})}function fG(){const{theme:t}=L(),e=f.useRef(null);return f.useEffect(()=>{if(e.current){if(!t.image){e.current.style.backgroundImage="";return}e.current.style.backgroundImage=`url(${t.image})`}},[t]),{containerRef:e}}function mG(){const{audioRef:t,idle:e}=Ht();if(!t.current)throw new Error("BottomPlayer !audioRef.current");const{theme:n}=L(),{isOpenFullScreen:r,controlRef:s,isOpenSongQueue:i,setIsOpenFullScreen:a,setIsOpenSongQueue:o}=Ht(),{currentQueueId:c,currentSongData:u}=Z(ct),{containerRef:d}=fG(),h=hr(),m=f.useMemo(()=>h.pathname.includes("edit"),[h]),p=()=>{i&&o(!1),a(!0)},g={wrapper:`border-${n.alpha} fixed bottom-0 w-full border-t transition-transform z-50 px-6 h-[90px]`,container:"flex flex-row gap-[10px] h-full items-center",controlWrapper:`flex max-w-[420px] flex-grow ${r?"max-w-[600px] flex-col-reverse pb-[10px]":"flex-col justify-center"}`,right:"w-1/4 flex items-center justify-end",blurBg:`bg-opacity-[0.8] backdrop-blur-[15px] z-[-1] absolute inset-0 ${n.bottom_player_bg}`};return l.jsxs("div",{ref:d,className:`${g.wrapper} ${r?"border-transparent":n.image?n.bottom_player_bg:""} ${m&&"translate-y-[100%] "} `,children:[!n.image&&l.jsx("div",{className:`${g.blurBg} ${r?"opacity-0 transition-opacity delay-[.2s]":""}`}),l.jsxs("div",{className:`${g.container} ${r?"justify-center text-white":"justify-between"} ${e&&"transition-opacity duration-[.3s] opacity-0"}`,children:[l.jsx(dG,{song:u==null?void 0:u.song,isOpenFullScreen:r}),l.jsx("div",{className:` ${g.controlWrapper} ${mc(c===null)}`,children:l.jsx(mP,{variant:"desktop",ref:s})}),l.jsxs("div",{className:`${g.right}  ${r?"hidden":""}`,children:[l.jsx(hG,{audioEle:t.current}),l.jsxs("div",{className:`flex items-center ${c?"":"disable"}`,children:[l.jsx(rs,{content:"Fullscreen mode",children:l.jsx("button",{onClick:p,className:`rounded-[99px]  hover:bg-${n.alpha}  p-[5px]`,children:l.jsx(M8,{className:"w-6"})})}),l.jsx(rs,{content:"Queue",children:l.jsx("button",{onClick:()=>o(!i),className:`ml-1 hover:bg-${n.alpha} rounded-md p-[5px]`,children:l.jsx(B7,{className:"w-6"})})}),l.jsx("div",{className:`w-[2px] h-[26px] ml-2 bg-${n.alpha}`}),l.jsx(fP,{})]})]})]})]})}function pG({admin:t,variant:e},n){var S;const{theme:r}=L(),{isOpenFullScreen:s,currentSongData:i,handleSeek:a,handlePlayPause:o,handleNext:c,handlePrevious:u,handleRepeatSong:d,handleShuffle:h,isRepeat:m,isShuffle:p,playStatus:g,queueSongs:x,currentTimeEleRef:_,timelineEleRef:v,resetForNewSong:y,pause:w}=Bq();f.useImperativeHandle(n,()=>({handlePlayPause:o,handleNext:c,pause:w,resetForNewSong:y}));const E={button:"p-1 rounded-full md:bg-transparent ",buttonsContainer:`w-full flex justify-center items-center mb-3 sm:mb-0 space-x-3 ${t?"hidden":""}`,progressContainer:`flex w-full flex-row items-center   ${t?"h-full":""}`,processLineBase:"h-[6px] sm:h-1 flex-grow relative cursor-pointer rounded-[99px] shadow-[2px_2px_10px_rgba(0,0,0,.15)] ",icon:"w-[44px] sm:w-7",before:"before:content-[''] before:w-[100%] before:h-[24px] before:absolute before:top-[50%] before:translate-y-[-50%]"};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`${E.buttonsContainer}`,children:!t&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{disabled:x.length<=1,className:`relative ${E.button} ${m!=="no"&&r.content_text}`,onClick:d,children:[l.jsx(l8,{className:E.icon}),l.jsx("span",{className:"absolute font-bold text-[12px] top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ",children:m==="one"?"1":m==="all"?"-":""})]}),l.jsx("button",{disabled:x.length<=1,className:E.button,onClick:()=>u(),children:l.jsx(Dx,{className:E.icon})}),l.jsx(ME,{playStatus:g,handlePlayPause:o}),l.jsx("button",{disabled:x.length<=1,className:`${E.button}`,onClick:()=>c(),children:l.jsx(Hf,{className:E.icon})}),l.jsx("button",{disabled:x.length<=1,className:`${E.button} ${p&&r.content_text}`,onClick:h,children:l.jsx(BA,{className:E.icon})})]})}),l.jsxs("div",{className:`${E.progressContainer} ${e==="desktop"&&s?"mb-0":"mb-5 sm:mb-2"} ${g==="error"||g==="loading"?"disable":""}`,children:[l.jsx("div",{className:"w-[44px] sm:w-9",children:l.jsx("span",{ref:_,className:"text-lg sm:text-sm",children:"0:00"})}),l.jsx("div",{ref:v,style:{background:"rgba(255, 255, 255, 0.3)"},onClick:b=>a(b),className:`${E.processLineBase}  ${E.before}`}),l.jsx("div",{className:"w-[44px] sm:w-9 text-right",children:l.jsx("span",{className:"text-lg sm:text-sm",children:i!=null&&i.song?yo((S=i.song)==null?void 0:S.duration):"0:00"})}),t&&l.jsx("div",{className:"flex items-center ml-3",children:l.jsx(ME,{playStatus:g,handlePlayPause:o})})]})]})}const mP=f.forwardRef(pG);function pP(){const{theme:t}=L(),e=rn(),{lyricSize:n,songBackground:r}=Z(pn),s=a=>{e(st({lyricSize:a})),It("lyricSize",a)},i={disableBtn:"bg-white/10 bg-opacity-20",lyricSizeBtn:`group/text justify-center !hover:brightness-100 font-[600] h-[30px] w-[30px] sm:h-[26px] sm:w-[26px] relative ${t.content_hover_bg}`,itemContainer:"flex justify-between  px-3 py-2 items-center min-h-[30px] hover:bg-[#fff]/5",text:"text-sm"};return l.jsx(l.Fragment,{children:l.jsx("div",{className:"w-[240px] sm:w-[220px]",children:l.jsxs(Gn,{p:"clear",className:"space-y-[6px] text-white py-3",theme:t,children:[l.jsxs("div",{className:`${i.itemContainer}`,children:[l.jsx("p",{className:i.text,children:"Lyric size"}),l.jsxs("div",{className:"flex space-x-[8px]",children:[l.jsx(B,{onClick:()=>s("small"),variant:"circle",size:"clear",className:`${n==="small"?t.content_bg:i.disableBtn} ${i.lyricSizeBtn}`,children:l.jsx("span",{className:"leading-[1] text-[11px]",children:"A"})}),l.jsx(B,{onClick:()=>s("medium"),variant:"circle",size:"clear",className:`${n==="medium"?t.content_bg:i.disableBtn} ${i.lyricSizeBtn}`,children:l.jsx("span",{className:"leading-[1] text-[13px]",children:"A"})}),l.jsx(B,{onClick:()=>s("large"),variant:"circle",size:"clear",className:`${n==="large"?t.content_bg:i.disableBtn} ${i.lyricSizeBtn}`,children:l.jsx("span",{className:"leading-[1] text-[15px]",children:"A"})})]})]}),l.jsxs("div",{className:`${i.itemContainer}`,children:[l.jsx("p",{className:i.text,children:"Song background"}),l.jsx(hP,{size:"thin",className:"bg-white/10",active:r,cb:()=>e(AU({variant:"songBackground"}))})]})]})})})}function gG(){var u,d,h;const{theme:t}=L(),{activeTab:e,setActiveTab:n,idle:r,setIsOpenFullScreen:s}=Ht(),{currentSongData:i}=Z(ct),a=Hn(),o=()=>{i!=null&&i.song&&(s(!1),setTimeout(()=>{a(`/mysongs/edit/${i==null?void 0:i.song.id}`)},300))},c={button:`w-[38px] h-[38px] bg-white/10 rounded-[99px] transition-transform ${t.content_hover_bg}`,headerWrapper:"relative flex py-[25px] px-[40px] w-full items-center",fadeTransition:"opacity-0 transition-opacity duration-[.3s]"};return l.jsxs("div",{className:c.headerWrapper,children:[r&&l.jsx("div",{className:"absolute flex left-4",children:e!=="Songs"&&l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:"font-playwriteCU text-sm",children:[((u=i==null?void 0:i.song)==null?void 0:u.name)||"..."," "]}),l.jsxs("p",{className:"opacity-70",children:["- ",((d=i==null?void 0:i.song)==null?void 0:d.singer)||"..."]})]})}),l.jsx(su,{inFullScreen:!0,activeTab:e,setActiveTab:n,className:`${r&&c.fadeTransition}`,tabs:["Songs","Karaoke","Lyric"],render:m=>m}),l.jsxs("div",{className:`absolute flex right-4 space-x-3 ${r&&c.fadeTransition}`,children:[((h=i==null?void 0:i.song)==null?void 0:h.by)!=="admin"&&e==="Lyric"&&l.jsx(rs,{position:"top-[calc(100%+8px)]",content:"Edit lyric",children:l.jsx("button",{onClick:()=>o(),className:`p-2 ${c.button}`,children:l.jsx(Wf,{})})}),l.jsxs($r,{children:[l.jsx(zr,{children:l.jsx(rs,{position:"top-[calc(100%+8px)]",content:"Setting",children:l.jsx("button",{className:`${c.button} p-2`,children:l.jsx(Ox,{})})})}),l.jsx(Cn,{appendTo:"parent",className:"top-[calc(100%+8px)] right-0 z-[99]",animationClassName:"origin-top-right",children:l.jsx(pP,{})})]}),l.jsx(rs,{position:"top-[calc(100%+8px)]",content:"Close",children:l.jsx("button",{onClick:()=>s(!1),className:`p-2 ${c.button}`,children:l.jsx(VA,{})})})]})]})}const Sc={isDev:!1,focusDelay:3e3,scrollSongDelay:4e3,loadingDuration:200};function qS(t,e){const n=f.useRef(),[r,s]=f.useState(0),[i,a]=f.useState(0);return f.useEffect(()=>{r&&(n.current=setTimeout(()=>n.current=void 0,e))},[i,Sc]),f.useEffect(()=>{n.current||(t(),a(Math.random()*10))},[r]),()=>s(Math.random()*10)}function gP(t,e){const n=`lyric_${ma(4)}`,r=document.querySelector("style");if(!r)return n;let s=`@keyframes ${n}{0%{width:0%}`;if(!t.length)return s+="100%{width:100%}}",r.innerText=s,n;let i=t.reduce((u,d)=>u+d,0);const a=[];let o=0,c=0;for(let u=0;u<e.length-1;u++){const d=e[u],h=t[u];c+=d,o+=h,a.push({progress:Math.round(o/i*100),width:c})}for(const u of a)s+=`${u.progress}%{width:${u.width}%}`;return s+="100%{width:100%}}",r.innerText=s,n}const yP=t=>{const e=t.clientWidth,n=[];return t.childNodes.forEach(r=>{n.push(Math.round(r.clientWidth/e*100))}),n},Jo=.3,GS=t=>t%2!==0;function yG({active:t}){const{audioRef:e}=Ht();if(!e.current)throw new Error("useKaraoke !audioRef.current");const[n,r]=f.useState(0),s=f.useRef(null),i=f.useRef(null),a=f.useRef(null),o=f.useRef(null),c=f.useRef(0),u=f.useRef(0),d=f.useRef("paused"),h=f.useRef(!1),{songLyrics:m,loading:p,playStatus:g}=FR({active:t}),x=f.useMemo(()=>{if(m.length){if(n<0)return{odd:"",even:""};const w=GS(n);if(!m[n+1])return{odd:"",even:""};const E=w?[n,n+1]:[n+1,n],S=m[E[0]].text.trim(),b=m[E[1]].text.trim();return{odd:S,even:b}}else return{odd:"",even:""}},[n,m]),_=w=>{w.style.animation="none"},v=(w,E,S,b)=>{var N,D;let k="running";d.current==="paused"&&(k="paused"),S.style.animation=`${w} ${(((N=E==null?void 0:E.tune)==null?void 0:N.end)||E.end)-(((D=E==null?void 0:E.tune)==null?void 0:D.start)||E.start)}s linear ${k} forwards`;const T=+b.toFixed(1);Math.abs(T)>.2&&(S.style.animationDelay=`${T}s`)},y=()=>{var S;if(!m.length)return;const w=e.current.currentTime>=c.current?"forward":"backward";c.current=e.current.currentTime;let E=u.current;switch(w){case"forward":for(;E<m.length&&m[E+1]&&m[E+1].start-Jo<c.current+Jo;)E+=1;break;case"backward":for(;E>0&&m[E-1]&&m[E-1].end-Jo>c.current+Jo;)E-=1;break}if(E!==u.current||h.current||d.current==="paused"||d.current==="waiting"){if(h.current=!1,u.current=E,r(E),!s.current||!i.current||!o.current||!a.current)return;const b=GS(E),k=m[E],{tune:T={grow:"",end:k.end}}=k,N=c.current+Jo-(((S=k==null?void 0:k.tune)==null?void 0:S.start)||k.start),D=T.grow.split("_").filter(V=>V).map(V=>+V),ee=yP(b?o.current:a.current),K=b?[s.current,i.current]:[i.current,s.current],ie=gP(D,ee);v(ie,k,K[0],-N),_(K[1])}};return f.useEffect(()=>{d.current==="waiting"?setTimeout(()=>{d.current=g},300):d.current=g},[g]),f.useEffect(()=>{t&&(h.current=!0,g==="paused"&&y())},[t]),f.useEffect(()=>{if(!(!m.length||!t))return e.current.addEventListener("timeupdate",y),()=>{e.current.removeEventListener("timeupdate",y)}},[m,t]),f.useEffect(()=>()=>{c.current=0,u.current=-1,r(0)},[m]),{loading:p,currentIndexRef:u,oddOverlay:s,evenOverlay:i,currentIndex:n,textData:x,tempEventText:a,tempOddText:o}}function KS({text:t,overlayRef:e}){const{playStatus:n}=Z(pn),[r,s]=f.useState(t),[i,a]=f.useState(!1),o=f.useRef(!0);f.useEffect(()=>{t&&a(!1)},[t]),f.useEffect(()=>{if(i)return;const u=()=>{s(t),a(!0)};o.current?setTimeout(u,300):(o.current=!0,u())},[i]),f.useEffect(()=>{n==="waiting"&&(o.current=!1),e.current&&(n==="playing"?e.current.style.animationPlayState="running":e.current.style.animationPlayState="paused")},[n]);const c={lyric:"relative duration-300 text-[44px] font-[700] pointer-none whitespace-nowrap"};return l.jsxs("div",{className:`${c.lyric} ${o.current?"transition-opacity":""} ${i?"opacity-[1]":"opacity-0"}`,children:[r||"...",l.jsx("p",{ref:e,className:"absolute whitespace-nowrap w-0 overflow-hidden text-[#ffed00] left-0 top-0 h-full",children:r||"..."})]})}function Nh({children:t}){return l.jsx("span",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:t})}function vG({active:t}){const{loading:e,evenOverlay:n,oddOverlay:r,tempEventText:s,tempOddText:i,textData:a}=yG({active:t});return e?l.jsx(Nh,{children:l.jsx(mn,{className:"w-7 animate-spin"})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{ref:s,className:"inline-flex h-0 opacity-0",children:a.even.split(" ").map((o,c)=>l.jsx("span",{className:"leading-1",children:o},c))}),l.jsx("div",{ref:i,className:"inline-flex h-0 opacity-0",children:a.odd.split(" ").map((o,c)=>l.jsx("span",{className:"k leading-1",children:o},c))}),l.jsx(KS,{overlayRef:n,text:a.even}),l.jsx("div",{className:"mt-8"}),l.jsx(KS,{overlayRef:r,text:a.odd})]})}function xG(){const t=rn(),{activeTab:e,isOpenFullScreen:n,idle:r}=Ht(),{theme:s}=L(),{currentSongData:i}=Z(ct),{queueSongs:a,currentQueueId:o}=Z(ct),{activeSongRef:c,containerRef:u}=NV(),d=_=>{o!==_&&t(ms(_))},h=qS(()=>p("next"),200),m=qS(()=>p("previous"),200),p=(_="next")=>{const v=u.current;v.style.scrollBehavior="smooth",_==="next"?v.scrollLeft+=500:_==="previous"&&(v.scrollLeft-=500)},g={songsListTab:" relative h-full no-scrollbar flex items-center flex-row overflow-auto scroll-smooth px-[calc(50%-350px/2)]",absoluteButton:`absolute top-[50%] -translate-y-[50%] p-[8px] bg-white/30 rounded-full ${s.content_hover_bg}`,lyricTabContainer:"px-[40px] min-[1536px]:container  min-[1536px]:px-[200px] h-full flex items-center justify-center flex-row",fadeTransition:"opacity-0 transition-opacity duration-[.3s]"},x=f.useMemo(()=>{if(i!=null&&i.song&&a.length)return a.map((_,v)=>_.queue_id===o?l.jsx(Hp,{ref:c,hasTitle:!0,onClick:()=>d(_.queue_id),active:!0,data:_},v):l.jsx(Hp,{idleClass:`${r?g.fadeTransition:""}`,hasTitle:!0,active:!1,data:_,onClick:()=>d(_.queue_id)},v))},[i==null?void 0:i.song,a,r]);return l.jsxs(l.Fragment,{children:[l.jsx("div",{ref:u,className:`song-list-container ${g.songsListTab} ${e!=="Songs"?"opacity-0":"opacity-100"}`,children:x}),e==="Songs"&&!r&&l.jsxs(l.Fragment,{children:[l.jsx(B,{hover:"scale",size:"clear",onClick:()=>m(),className:`${g.absoluteButton} left-[20px]`,children:l.jsx(j8,{className:"w-[30px]"})}),l.jsx(B,{hover:"scale",size:"clear",onClick:()=>h(),className:`${g.absoluteButton} right-[20px]`,children:l.jsx(md,{className:"w-[30px]"})})]}),l.jsxs(zA,{children:[l.jsx("div",{className:`absolute inset-0 z-20 ${e==="Lyric"?"":"hidden"}`,children:l.jsxs("div",{className:g.lyricTabContainer,children:[l.jsx(Hp,{active:!0,data:i==null?void 0:i.song}),l.jsx(SP,{className:"w-full ml-[40px] h-full",active:n&&e==="Lyric"})]})}),l.jsx("div",{className:`absolute inset-0 z-20 flex flex-col items-center justify-center ${e==="Karaoke"?"":"hidden"}`,children:l.jsx(vG,{active:n&&e==="Karaoke"})})]})]})}function wG(){var a,o,c;const{isOpenFullScreen:t,idle:e,activeTab:n}=Ht(),{currentSongData:r}=Z(ct),{songBackground:s}=Z(pn),i={wrapper:`fixed inset-0 z-50 overflow-hidden text-white bg-zinc-900
    } transition-transform duration-[.7s] linear delay-100`,bg:"absolute inset-0 -z-10 brightness-[70%]",container:"absolute w-full top-0 bottom-[90px] flex flex-col",content:"flex-grow relative overflow-hidden",fadeTransition:"opacity-0 transition-opacity duration-[.3s]"};return l.jsxs("div",{className:`${i.wrapper}  ${t?"translate-y-0":"translate-y-full"}`,children:[l.jsx("div",{className:` ${i.bg}`,children:s&&l.jsx(Gf,{radioGroup:"",height:"100%",width:"100%",hash:((a=r==null?void 0:r.song)==null?void 0:a.blurhash_encode)||oR})}),l.jsxs("div",{className:i.container,children:[l.jsx(gG,{}),l.jsx("div",{className:i.content,children:l.jsx(xG,{})}),n!=="Songs"&&l.jsxs("p",{className:`text-center ${e&&i.fadeTransition}`,children:[((o=r==null?void 0:r.song)==null?void 0:o.name)||"...",l.jsxs("span",{className:"opacity-70",children:["- ",((c=r==null?void 0:r.song)==null?void 0:c.singer)||"..."]})]})]})]})}function vP({audioEle:t,progressLineRef:e}){const{theme:n}=L(),[r,s]=f.useState("paused"),[i,a]=f.useState(!1),o=f.useRef(""),c=f.useRef(r),u=()=>{try{t.play(),a(!0)}catch{}},d=()=>{t==null||t.pause(),p()},h=()=>{r==="playing"?d():r==="paused"&&u()},m=()=>{s("playing")},p=()=>{s("paused")},g=E=>{if(!t)return;const S=+(E||t.currentTime/t.duration*100).toFixed(1);e!=null&&e.current&&(e.current.style.background=m1(o.current,S))},x=()=>{const S=t.currentTime/(t.duration/100);g(+S.toFixed(1))},_=()=>{console.log("error"),s("error")},v=E=>{t.currentTime=E,g(),r!=="playing"&&u()},y=E=>{t.currentTime=t.currentTime+E},w=E=>{t.currentTime=t.currentTime-E};return f.useEffect(()=>{if(t)return t.addEventListener("error",_),t.addEventListener("pause",p),t.addEventListener("playing",m),e!=null&&e.current&&t.addEventListener("timeupdate",x),()=>{t.removeEventListener("error",_),t.removeEventListener("pause",p),t.removeEventListener("playing",m),e!=null&&e.current&&t.removeEventListener("timeupdate",x)}},[t]),f.useEffect(()=>{o.current=n.content_code,r!=="playing"&&g()},[n]),f.useEffect(()=>{c.current=r},[r]),{play:u,pause:d,seek:v,handlePlayPause:h,status:r,forward:y,backward:w,isClickPlay:i,statusRef:c}}const _G=()=>{const[t,e]=f.useState(),[n,r]=f.useState(""),[s,i]=f.useState([]),[a,o]=f.useState([]),[c,u]=f.useState(!1),[d,h]=f.useState(!1),[m,p]=f.useState(),g=f.useRef(0);return{song:t,setSong:e,baseLyric:n,setBaseLyric:r,baseLyricArr:s,setBaseLyricArr:i,lyrics:a,setLyrics:o,updateLyric:(_,v)=>{o(y=>{const w={...y[_],...v};return y[_]=w,[...y]})},isFetching:c,setIsFetching:u,isChanged:d,setIsChanged:h,start:g,selectLyricIndex:m,setSelectLyricIndex:p}},xP=f.createContext(null);function wP({children:t}){return l.jsx(xP.Provider,{value:_G(),children:t})}const ga=()=>{const t=f.useContext(xP);if(!t)throw new Error("Edit lyric context not found");return t};function EG({audioEle:t,isClickPlay:e,song:n}){const{start:r,baseLyricArr:s,lyrics:i,setLyrics:a,setIsChanged:o,setIsFetching:c,baseLyric:u}=ga(),{setErrorToast:d,setSuccessToast:h}=xt(),m=i.length>=s.length,p=e&&!!s.length&&!m;return{addLyric:()=>{if(!t||!s.length||m)return;const v=+t.currentTime.toFixed(1);if(r.current===v)return;const y=s[i.length],w={start:r.current,text:y,end:v};r.current=v,a(E=>[...E,w]),o(!0)},removeLyric:()=>{if(i.length&&t){const v=i[i.length-1].start;r.current=v,t.currentTime=v,a(y=>y.slice(0,-1)),o(!0)}},isEnableAddBtn:p,submit:async()=>{try{if(c(!0),!n)return;const v={real_time:JSON.stringify(i),base:u};await pt({collection:"lyrics",data:v,id:n.id}).catch(()=>{throw{...v,id:n.id}}),h("Add lyric successful"),o(!1),It("temp-lyric","")}catch(v){It("temp-lyric",{...v,real_time:JSON.stringify(v.real_time)}),d()}finally{c(!1)}}}}function SG({submit:t,title:e,initValue:n,loading:r,variant:s="input",children:i}){const{theme:a}=L(),[o,c]=f.useState(n||""),u=f.useRef(null);f.useEffect(()=>{var m;(m=u.current)==null||m.focus()},[]);const d=m=>{m.preventDefault(),t(o)},h={input:`bg-${a.alpha} w-full py-2 text-lg rounded-lg outline-none px-2 mt-3`};return l.jsxs("div",{className:"w-[500px] max-w-[85vw]",children:[l.jsx("h1",{className:"text-xl font-medium ",children:e||"Title"}),l.jsxs("form",{action:"",onSubmit:d,children:[s==="input"&&l.jsx("input",{className:"w-full",ref:u,placeholder:"name...",value:o,onChange:m=>c(m.target.value)}),s==="text-area"&&l.jsx("textarea",{ref:u,className:`${h.input} min-h-[50vh] no-scrollbar`,value:o,onChange:m=>c(m.target.value)}),i,l.jsx("div",{className:"flex space-x-2 mt-5",children:l.jsx(B,{className:`${a.content_bg} rounded-full`,isLoading:r,type:"submit",children:"Save"})})]})]})}const bG="/assets/tutorial1-1bb11af6.png";function QS(t,e){const[n,r]=f.useState(t),s=f.useRef(!1);return f.useEffect(()=>{const i=ir()[e]||t;r(i)},[]),f.useEffect(()=>{if(!s.current){s.current=!0;return}It(e,n)},[n]),[n,r]}function kG({audioEle:t,postLocalStorageKey:e}){const[n,r]=QS(1,`audio_speed_${e}`),[s,i]=QS(100,`audio_volume_${e}`);return f.useEffect(()=>{t.volume=s/100,t.playbackRate=n},[s,n]),{speed:n,setSpeed:r,volume:s,setVolume:i}}function _P({className:t,...e}){const{theme:n}=L(),{speed:r,volume:s,setVolume:i,setSpeed:a}=kG(e);return console.log("render"),l.jsxs($r,{children:[l.jsx(zr,{children:l.jsx(B,{className:`${n.content_bg} rounded-full ${t||""}`,children:l.jsx(Ox,{className:"w-6"})})}),l.jsx(Cn,{className:"top-[calc(100%+8px)] left-0 z-[9]",appendTo:"parent",children:l.jsx(Gn,{className:"w-[240px]",theme:n,children:l.jsxs("div",{className:"space-y-[6px]",children:[l.jsxs("div",{className:"flex space-x-1",children:[l.jsxs("div",{className:"w-[110px] flex-shrink-0",children:["Speed ",r,"x"]}),l.jsx("input",{className:"w-full",type:"range",step:.1,min:1,max:1.5,value:r,onChange:o=>a(+o.target.value)})]}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsxs("div",{className:"w-[110px] flex-shrink-0",children:["Volume ",s,"%"]}),l.jsx("input",{className:"w-full",type:"range",step:1,min:1,max:100,value:s,onChange:o=>i(+o.target.value)})]})]})})})]})}function TG({audioEle:t},e){const{theme:n}=L(),{baseLyric:r,setBaseLyric:s,setIsChanged:i,song:a,lyrics:o}=ga(),[c,u]=f.useState(""),d=f.useRef(null),h=f.useRef(null),{backward:m,forward:p,handlePlayPause:g,pause:x,seek:_,status:v,isClickPlay:y}=vP({audioEle:t,progressLineRef:h}),{addLyric:w,removeLyric:E,isEnableAddBtn:S,submit:b}=EG({audioEle:t,isClickPlay:y,song:a});f.useImperativeHandle(e,()=>({seek:_,pause:x,submit:b}));const k=()=>{if(!y&&o.length){const V=o[o.length-1].end;t.currentTime=V}g()},T=()=>{var V;return(V=d.current)==null?void 0:V.toggle()},N=V=>{var oe;u(V),(oe=d.current)==null||oe.toggle()},D=()=>{if(c)switch(c){case"base-lyric":return l.jsx(SG,{variant:"text-area",title:"Edit lyric",initValue:r,submit:ee});case"tutorial":return l.jsxs("div",{className:"w-[500px] max-w-[90vw]",children:[l.jsx(mr,{title:"Tutorial",close:T}),l.jsx("div",{className:"h-[500px] max-h-[75vh] overflow-y-auto no-scrollbar",children:l.jsx("img",{className:"w-full border rounded-[16px]",src:bG,alt:""})})]})}},ee=V=>{s(V),i(!0),T()},K={button:`mt-2 ml-2 space-x-1 ${n.content_bg} rounded-full`,icon:"w-6",arrow:"before:content-[''] before:absolute before:-translate-x-1/2 before:left-[27px]  before:bottom-[calc(100%-1px)] before:z-[-1] before:border-8 before:border-transparent before:border-b-amber-800"},ie=()=>{switch(v){case"error":return l.jsx(Fx,{className:"w-6"});case"playing":return l.jsx($x,{className:"w-6"});case"paused":return l.jsx(hh,{className:"w-6"});case"waiting":return l.jsx(mn,{className:"w-6 animate-spin"})}};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-start flex-wrap -mt-2 -ml-2",children:[l.jsx(_P,{className:"mt-2 ml-2",audioEle:t,postLocalStorageKey:"edit_lyric"}),l.jsx(B,{className:K.button,onClick:k,children:ie()}),l.jsxs(B,{disabled:!S,onClick:w,className:K.button,children:[l.jsx(zn,{className:"w-6"}),l.jsx("span",{children:"Add"})]}),l.jsxs(B,{disabled:!o.length,onClick:E,className:K.button,children:[l.jsx(GA,{className:"w-6"}),l.jsx("span",{children:"Remove"})]}),l.jsxs(B,{onClick:()=>m(2),className:K.button,children:[l.jsx(Dx,{className:"w-6"}),l.jsx("span",{children:"2s"})]}),l.jsxs(B,{onClick:()=>p(2),className:K.button,children:[l.jsx("span",{children:"2s"}),l.jsx(Hf,{className:"w-6"})]}),l.jsxs(B,{onClick:()=>N("base-lyric"),className:K.button,children:[l.jsx(Wf,{className:"w-6"}),l.jsx("span",{children:"Edit lyric"})]}),l.jsx("button",{onClick:()=>N("tutorial"),className:"self-center ml-auto mt-2",children:l.jsx(M7,{className:"w-6"})})]}),l.jsx("div",{ref:h,style:{backgroundColor:"rgba(255,255,255,.3)"},className:"h-1 rounded-full mt-3 w-full"}),l.jsx(an,{variant:"animation",ref:d,children:D()})]})}const IG=f.forwardRef(TG);function CG(){const{lyrics:t}=ga(),e=f.useRef(null);return f.useEffect(()=>{e.current&&PA(e.current)},[t.length]),{activeLyricRef:e}}function AG({controlRef:t,modalRef:e}){const{theme:n}=L(),{baseLyricArr:r,lyrics:s,setSelectLyricIndex:i,song:a}=ga(),{activeLyricRef:o}=CG(),c=d=>{var h;(h=t.current)==null||h.seek(d)},u=d=>{var h;typeof d=="number"&&(i(d),(h=e.current)==null||h.open())};return l.jsx(l.Fragment,{children:l.jsxs("div",{className:`flex flex-grow overflow-auto no-scrollbar text-[18px] rounded-xl pt-3 mt-3 ${n.side_bar_bg}`,children:[l.jsx("div",{className:"w-1/2 px-2",children:r.length?l.jsx(l.Fragment,{children:r.map((d,h)=>{let m=h===s.length?"active":h<s.length-1?"done":"coming";return h===r.length-1&&(m="active"),l.jsx(cR,{ref:m==="active"?o:null,activeColor:n.type==="light"?n.content_text:"",className:"pt-[37px] mr-[24px]",status:m,text:d},h)})}):l.jsx("p",{children:"..."})}),l.jsx("div",{className:"w-1/2 px-2 ",children:!!(s!=null&&s.length)&&a&&s.map((d,h)=>l.jsx(oG,{openModal:()=>u(h),seek:c,lyric:d,isLast:h===s.length-1&&h!==r.length-1,theme:n},h))})]})})}function RG({audioRef:t,admin:e}){const{user:n}=qn(),{baseLyric:r,setSong:s,song:i,setBaseLyricArr:a,setBaseLyric:o,setLyrics:c,isChanged:u,setIsChanged:d,isFetching:h,start:m}=ga(),[p,g]=f.useState(),[x,_]=f.useState(!0),v=f.useRef(!1),y=tv(),w=Hn(),E=async()=>{try{const S=await xc({collection:"songs",id:y==null?void 0:y.id});if(!S.exists())return w(e?"/dashboard":"/");const b=S.data();if(b){const k=await xc({collection:"lyrics",id:b.id});if(k.exists()){const T=k.data(),N=typeof T.real_time=="string"?JSON.parse(T.real_time):T.real_time;g({base:T.base,id:T.id,real_time:N})}}s(b)}catch(S){console.log({message:S})}finally{_(!1)}};return f.useEffect(()=>{n&&(v.current||(v.current=!0,E()))},[n]),f.useEffect(()=>{const S=ir()["temp-lyric"]||null;if(S&&S.id===(i==null?void 0:i.id))try{const b={...S,real_time:JSON.parse(S.real_time)};(i==null?void 0:i.id)===b.id&&(g(b),d(!0));return}catch(b){console.log({message:b})}},[i]),f.useEffect(()=>{if(p){const{base:S,real_time:b}=p;if(o(S),c(b),!b.length)return;const k=b.length-1;if(t.current){const T=b[k].end;m.current=T}}},[p]),f.useEffect(()=>{if(!r)return;const S=r.split(/\r?\n/).filter(b=>b);a(S)},[r]),f.useEffect(()=>{if(!u)return;const S=b=>{b.preventDefault()};return window.addEventListener("beforeunload",S),()=>{window.removeEventListener("beforeunload",S)}},[u]),{isFetching:x,song:i,isChanged:u,isSubmitting:h}}function PG(){const{updateLyric:t,setIsChanged:e,lyrics:n,selectLyricIndex:r}=ga();if(r===void 0)throw new Error("");const[s,i]=f.useState([]),[a,o]=f.useState([]),[c,u]=f.useState(!1),[d,h]=f.useState(!1),m=f.useRef(null),p=f.useRef(null),g=f.useRef(null),x=f.useRef(null),_=f.useRef(null),v=f.useRef(0),y=f.useRef(0),w=f.useRef(null),E=f.useRef(null),S=f.useRef(null),b=f.useRef([]),k=f.useRef([]),T=f.useRef(!1),N=f.useMemo(()=>n[r],[r,n]),{play:D,pause:ee,status:K,statusRef:ie}=vP({audioEle:g.current}),V=le=>{r&&(le.preventDefault(),m.current&&t(r,{text:m.current.value}))},oe=()=>{console.log("update tune");const le={start:y.current,end:v.current,grow:a.join("_")};t(r,{tune:le}),e(!0)},We=le=>{le.variant==="range"&&le.value<1||(T.current=!0,o(ut=>{const _t=[...ut];let Xe=_t[le.index];switch(le.variant){case"range":Xe=le.value;break;case"button":Xe=+(le.action==="minus"?Xe-.2:Xe+.2).toFixed(1)}return _t[le.index]=Xe,_t}))},Qe=()=>{ee(),p.current&&(p.current.style.animation="none")},F=()=>{if(!g.current||!p.current)return;const le=g.current;le.currentTime=y.current-.3;const ut=gP(k.current,b.current);p.current.style.animation=`${ut} ${((v.current-y.current)/g.current.playbackRate).toFixed(1)}s linear`,D()},H=()=>{ie.current==="paused"?F():Qe()},te=le=>{const ut=+le.toFixed(1);T.current=!0,v.current=ut,E.current&&(E.current.textContent=`${ut} / ${N.end}`)},ke=le=>{const ut=+le.toFixed(1);T.current=!0,y.current=ut,w.current&&(w.current.textContent=`${N.start} / ${ut}`)},Pe=()=>{if(g.current&&+g.current.currentTime.toFixed(1)>=v.current)return Qe()},pr=le=>{le.key===" "&&(le.preventDefault(),H())};return f.useEffect(()=>(window.addEventListener("keydown",pr),()=>{window.removeEventListener("keydown",pr)}),[d]),f.useEffect(()=>{h(!0)},[]),f.useEffect(()=>{if(!s.length||!S.current)return;const le=yP(S.current);b.current=le},[s]),f.useEffect(()=>{k.current=a},[a]),f.useEffect(()=>{if(g.current)return g.current.addEventListener("timeupdate",Pe),g.current.playbackRate=1.2,()=>{var le;(le=g.current)==null||le.removeEventListener("timeupdate",Pe)}},[d]),f.useEffect(()=>{const ut=N.text.trim().split(" ").filter(Xe=>Xe);i(ut);const _t=N!=null&&N.tune?N.tune.grow.split("_").map(Xe=>+Xe):[];ut.forEach((Xe,Mo)=>{typeof _t[Mo]!="number"&&(_t[Mo]=1)}),o(_t),E.current&&w.current&&_.current&&x.current&&(y.current=N!=null&&N.tune?N.tune.start:N.start,w.current.innerText=`${N.start} / ${y.current}`,_.current.max=N.end+"",_.current.value=y.current+"",v.current=N!=null&&N.tune?N.tune.end:N.end,E.current.innerText=`${v.current} / ${N.end}`,x.current.max=N.end+"",x.current.value=v.current+"")},[r]),{refs:{overlayRef:p,tempWordRef:S,textRef:m,endTimeRangeRef:x,startTimeRangeRef:_,startRefText:w,endRefText:E,audioRef:g,isChanged:T},pause:ee,setStartPoint:ke,words:s,isEdit:c,setIsEdit:u,handlePlayPause:H,growList:a,handleGrowWord:We,setEndPoint:te,handleUpdateLyricText:V,status:K,updateLyricTune:oe,currentLyric:N}}function NG({closeModal:t}){const{theme:e}=L(),{setSelectLyricIndex:n,selectLyricIndex:r,lyrics:s,song:i}=ga(),[a,o]=f.useState(0),c=f.useRef(null),{handlePlayPause:u,status:d,pause:h,setStartPoint:m,refs:p,isEdit:g,setIsEdit:x,setEndPoint:_,growList:v,words:y,handleGrowWord:w,handleUpdateLyricText:E,updateLyricTune:S,currentLyric:b}=PG(),k=()=>{S(),t()},T=ie=>{var V;o(ie),(V=c.current)==null||V.focus()},N=ie=>{if(typeof r=="number")switch(p.isChanged.current&&(p.isChanged.current=!1,S()),h(),ie){case"next":if(r===s.length-1)return;n(V=>V+1);break;case"prev":if(r===0)return;n(V=>V-1);break}},D=()=>y.map((ie,V)=>l.jsx(B,{style:{flexGrow:v[V]},onClick:()=>T(V),size:"clear",className:`justify-center ${e.side_bar_bg} border border-${e.alpha} ${a===V?e.content_bg:""}`,children:ie},V)),ee=()=>{switch(d){case"playing":return l.jsx($x,{className:"w-6"});case"paused":return l.jsx(hh,{className:"w-6"})}},K={input:`bg-${e.alpha} text-lg rounded-[4px] outline-none w-full px-2 py-1`,button:`${e.content_bg} rounded-full`};return l.jsxs(l.Fragment,{children:[l.jsx("audio",{ref:p.audioRef,src:i==null?void 0:i.song_url,className:"hidden"}),l.jsxs("div",{className:"max-w-[90vw] w-[600px]",children:[l.jsx(mr,{close:t,title:"Edit lyric"}),l.jsx("div",{ref:p.tempWordRef,className:"inline-block opacity-0",children:y.map((ie,V)=>l.jsx("span",{className:"leading-[1] inline-block",children:ie},V))}),l.jsxs("div",{className:"flex items-center space-x-2 mt-[-20px]",children:[l.jsx(B,{onClick:u,className:K.button,children:ee()}),p.audioRef.current&&l.jsx(_P,{audioEle:p.audioRef.current,postLocalStorageKey:"edit_lyric_tune"}),g?l.jsxs(l.Fragment,{children:[l.jsx(B,{onClick:()=>x(!1),className:K.button,children:l.jsx(dr,{className:"w-6"})}),l.jsx(B,{onClick:E,className:K.button,children:l.jsx(Vf,{className:"w-6"})})]}):l.jsx(B,{onClick:()=>x(!0),className:K.button,children:l.jsx(b7,{className:"w-6"})})]}),l.jsxs("div",{className:"flex items-center mt-5 space-x-2",children:[l.jsxs("label",{htmlFor:"start",className:"flex-shrink-0 w-[150px]",children:["Start:",l.jsx("span",{ref:p.startRefText})]}),l.jsx("input",{ref:p.startTimeRangeRef,type:"range",id:"start",min:b.start,max:b.end,step:.2,className:"w-full",onChange:ie=>m(+ie.target.value)})]}),l.jsxs("div",{className:"flex items-center mt-3 space-x-2",children:[l.jsxs("label",{htmlFor:"end",className:"flex-shrink-0 w-[150px]",children:["End:",l.jsx("span",{ref:p.endRefText})]}),l.jsx("input",{id:"end",ref:p.endTimeRangeRef,type:"range",min:b.start,step:.2,className:"w-full",onChange:ie=>_(+ie.target.value)})]}),l.jsxs("div",{className:"flex items-center mt-3",children:[l.jsxs("label",{htmlFor:"grow",className:"flex-shrink-0 w-[150px] mr-2 leading-[1]",children:["Grow: ",v[a]]}),l.jsx("input",{ref:c,type:"range",id:"grow",min:1,max:30,step:.2,className:"w-full",value:v[a]+"",onChange:ie=>w({variant:"range",value:+ie.target.value,index:a})})]}),l.jsx("div",{className:"flex justify-center items-center space-x-2 mt-5",children:g?l.jsx("form",{action:"",onSubmit:E,children:l.jsx("textarea",{ref:p.textRef,className:K.input})}):l.jsx(l.Fragment,{children:l.jsxs("div",{className:"relative whitespace-nowrap  sm:text-2xl font-[700]",children:[b.text,l.jsx("div",{ref:p.overlayRef,className:"absolute  top-0 left-0 overflow-hidden text-[#ffed00] whitespace-nowrap w-0",children:b.text})]})})}),l.jsx("div",{className:"flex h-[60px] mt-3",children:D()}),l.jsxs("div",{className:"flex justify-end space-x-2",children:[l.jsxs(B,{onClick:()=>N("prev"),className:`${e.content_bg} font-playwriteCU space-x-1 rounded-full mt-5`,children:[l.jsx(Dx,{className:"w-6"}),l.jsx("span",{children:"Previous"})]}),l.jsxs(B,{onClick:()=>N("next"),className:`${e.content_bg} font-playwriteCU space-x-1 rounded-full mt-5`,children:[l.jsx("span",{children:"Next"}),l.jsx(Hf,{className:"w-6"})]}),l.jsx(B,{onClick:k,className:`${e.content_bg} font-playwriteCU rounded-full mt-5`,children:"Ok"})]})]})]})}function wm({title:t,className:e}){return l.jsx("div",{className:`text-xl font-playwriteCU leading-[2.4] ${e}`,children:t})}function EP({admin:t,children:e}){const{theme:n}=L(),r=f.useRef(null),s=f.useRef(null),i=f.useRef(null),{isFetching:a,song:o,isChanged:c,isSubmitting:u}=RG({audioRef:s,admin:t}),d=()=>{var h,m;(h=r.current)==null||h.pause(),(m=r.current)==null||m.submit()};return l.jsxs(l.Fragment,{children:[l.jsx("audio",{className:"hidden",ref:s,src:o==null?void 0:o.song_url}),a?l.jsx(Nh,{children:l.jsx(mn,{className:"w-6 animate-spin"})}):o&&l.jsxs("div",{className:"flex flex-col h-full pb-5",children:[e,l.jsx(wm,{title:` Edit lyric - ${o==null?void 0:o.name}`}),l.jsx("div",{className:"mt-3",children:s.current&&l.jsxs(l.Fragment,{children:[l.jsx(IG,{audioEle:s.current,ref:r}),l.jsx(an,{variant:"animation",ref:i,children:l.jsx(NG,{closeModal:()=>{var h;return(h=i.current)==null?void 0:h.close()}})})]})}),l.jsx(AG,{modalRef:i,controlRef:r}),l.jsx(B,{className:`${n.content_bg} font-playwriteCU self-start rounded-full mt-5 `,variant:"primary",disabled:!c,isLoading:u,onClick:d,children:"Save"})]})]})}const Uu=.3;function jG({active:t}){const{audioRef:e}=Ht();if(!e.current)throw new Error("useSongLyric !audioRef.current");const[n,r]=f.useState(0),s=f.useRef("instant"),i=f.useRef(null),a=f.useRef(0),o=f.useRef([]),c=f.useRef(0),{loading:u,songLyrics:d}=FR({active:t}),h=()=>{const m=e.current.currentTime>a.current?"forward":"backward";a.current=e.current.currentTime;let p=c.current;switch(m){case"forward":for(;d[p+1]&&d[p+1].start-Uu<a.current+Uu;)p+=1;break;case"backward":for(;d[p-1]&&d[p-1].end-Uu>a.current+Uu;)p-=1;break}p!==c.current&&(Math.abs(p-c.current)>5&&(s.current="instant"),c.current=p,r(p),PA(o.current[p],s.current),s.current==="instant"&&(s.current="smooth"))};return f.useEffect(()=>{h()},[t]),f.useEffect(()=>{if(!(!t||!d.length))return e.current.addEventListener("timeupdate",h),()=>{e.current.removeEventListener("timeupdate",h)}},[t,d]),f.useEffect(()=>()=>{r(0),c.current=0},[d]),{songLyrics:d,loading:u,currentIndex:n,containerRef:i,lyricRefs:o,scrollBehavior:s}}const SP=({className:t,active:e})=>{const{lyricSize:n}=Z(pn),{loading:r,songLyrics:s,currentIndex:i,containerRef:a,lyricRefs:o}=jG({active:e}),c={small:"text-[20px] sm:text-[30px]",medium:"text-[25px] sm:text-[35px]",large:"text-[30px] sm:text-[40px]"},u=()=>s.map((h,m)=>{let p="coming";return i===m?p="active":m<i&&(p="done"),l.jsx(cR,{ref:g=>o.current[m]=g,status:p,text:h.text,className:" mb-[30px] last:mb-[50vh]"},m)}),d={container:"no-scrollbar pt-[20px] mask-image overflow-y-auto overflow-x-hidden"};return l.jsxs("div",{ref:a,className:`${d.container} ${c[n||"medium"]} ${t}`,children:[r&&l.jsx("div",{className:"relative w-full h-full",children:l.jsx(Nh,{children:l.jsx(mn,{className:"w-7 animate-spin"})})}),!r&&l.jsx(l.Fragment,{children:s.length?u():l.jsx("div",{className:"relative w-full h-full",children:l.jsx(Nh,{children:l.jsx("h1",{className:"text-[30px] opacity-60",children:"..."})})})})]})},DG=()=>{const{theme:t}=L(),{controlRef:e,isOpenFullScreen:n,setIsOpenFullScreen:r}=Ht(),{playStatus:s}=Z(pn),{currentSongData:i}=Z(ct),a=hr(),o=f.useMemo(()=>a.pathname.includes("edit"),[a]),c=f.useMemo(()=>{switch(s){case"playing":return l.jsx(Mx,{className:"w-10"});case"error":return l.jsx(Fx,{className:"w-10"});case"loading":case"waiting":return l.jsx(mn,{className:"w-10 animate-spin"});case"paused":return l.jsx(zx,{className:"w-10"})}},[s]),u={wrapper:`fixed bottom-0 transition-transform w-full h-[80px] border-t border-${t.alpha} z-40  px-4`,container:`absolute inset-0 ${t.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1]`,songImageWrapper:"flex flex-row items-center flex-grow h-full",image:"w-[54px] h-[54px] flex-shrink-0",cta:"pl-2 flex-shrink-0"};return l.jsxs("div",{className:`${u.wrapper} ${o?"translate-y-full":""}`,children:[l.jsx("div",{className:`${u.container} ${n?"opacity-0 transition-opacity delay-[.3s]":""}`}),l.jsxs("div",{className:"flex items-center  h-full",children:[l.jsx("div",{onClick:()=>i!=null&&i.song.name?r(!0):{},className:"mobile-current-song flex-grow",children:l.jsxs("div",{className:u.songImageWrapper,children:[l.jsx("div",{className:u.image,children:l.jsx(xs,{src:i==null?void 0:i.song.image_url,className:"rounded-full"})}),l.jsx("div",{className:"flex-grow  ml-[10px]",children:(i==null?void 0:i.song.song_url)&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"h-[30px] relative overflow-hidden",children:l.jsx("div",{className:"absolute left-0 whitespace-nowrap font-playwriteCU leading-[1.5]",children:(i==null?void 0:i.song.name)||"name"})}),l.jsx("p",{className:"opacity-70 line-clamp-1",children:(i==null?void 0:i.song.singer)||"singer"})]})})]})}),l.jsxs("div",{className:`${u.cta} ${!(i!=null&&i.song.name)&&"disable"}`,children:[l.jsx("button",{className:"p-[4px]",onClick:()=>{var d;return(d=e.current)==null?void 0:d.handlePlayPause()},children:c}),l.jsx("button",{onClick:()=>{var d;return(d=e.current)==null?void 0:d.handleNext()},className:"p-[4px]",children:l.jsx(Hf,{className:"w-10"})})]})]})]})},OG=t=>{let e=0,n=t;for(;!n.classList.contains("target-class")&&e<5;)n=n.parentElement,e++;return n},bP={opacity:"0",transform:"translate(-100%, 0)"},FG=t=>{let e=0,n=t.previousElementSibling;for(;n&&e<100;)Object.assign(n.style,bP),e++,n=n.previousElementSibling};function LG({currentIndex:t}){const e=rn(),{theme:n}=L(),{queueSongs:r}=Z(ct),s=(a,o)=>{const c=a.target,u=OG(c);FG(u),Object.assign(u.style,bP),setTimeout(()=>{e(ms(o))},500)},i=()=>l.jsx(l.Fragment,{children:t===r.length-1||r.length<=1?l.jsx("p",{children:"..."}):r.map((a,o)=>{if(o>t)return l.jsx(zG,{variant:"playing-next",theme:n,song:a,onClick:c=>s(c,a.queue_id)},o)})});return l.jsx(l.Fragment,{children:l.jsx(gi,{children:i()})})}function MG({isOpenFullScreen:t}){const e=f.useRef(null);f.useEffect(()=>{const r=e.current;r&&(t?(r.style.transform="translate(0)",r.style.zIndex="99"):(r.style.transform="translate(0, 100%)",setTimeout(()=>{r.style.zIndex="-10"},500)))},[t]);const n=()=>{const r=document.querySelector("body");r&&(t?r.style.overflow="hidden":r.style.overflow="auto")};return f.useEffect(()=>{n()},[t]),{wrapperRef:e}}function $G(){const{controlRef:t,setIsOpenFullScreen:e,isOpenFullScreen:n}=Ht(),{currentSongData:r}=Z(ct),{songBackground:s}=Z(pn),[i,a]=f.useState("Playing"),o=f.useRef(null),{wrapperRef:c}=MG({isOpenFullScreen:n}),u={headerWrapper:"flex mb-4",container:"flex-grow flex flex-col relative overflow-hidden",control:"flex flex-col-reverse justify-center",bgImage:"absolute inset-0 z-[-9] brightness-[70%] blur-[4px] translate-3d-0",button:"flex justify-center items-center rounded-full w-[38px]"};return l.jsx(l.Fragment,{children:l.jsxs("div",{ref:c,style:{transform:"translate(0, 100%)",zIndex:"-10"},className:"fixed inset-0 bg-zinc-900 text-white overflow-hidden transition-[transform] duration-[.3s] ease-linear",children:[s&&l.jsx("div",{className:u.bgImage,children:l.jsx(Gf,{width:"100%",height:"100%",hash:(r==null?void 0:r.song.blurhash_encode)||oR})}),l.jsxs("div",{className:"h-full z-10 p-4 flex flex-col",children:[l.jsxs("div",{className:u.headerWrapper,children:[l.jsxs($r,{appendOnPortal:!0,children:[l.jsx(zr,{children:l.jsx("button",{className:`${u.button} p-[6px] left-0 bg-white/10`,children:l.jsx(Ox,{className:"w-full"})})}),l.jsx(Cn,{appendTo:"portal",position:"right-bottom",origin:"top left",children:l.jsx(pP,{})})]}),l.jsx(su,{inFullScreen:!0,className:"w-fit font-[500]",setActiveTab:a,activeTab:i,render:d=>d,tabs:["Songs","Playing","Lyric"]}),l.jsx("button",{className:`${u.button} p-[6px] bg-white/10`,onClick:()=>e(!1),children:l.jsx(VA,{className:"w-6"})})]}),l.jsxs("div",{ref:o,className:u.container,children:[l.jsxs("div",{className:`${i!="Playing"?"flex":"sm:flex"}`,children:[l.jsx(QG,{expand:i==="Playing",imageUrl:r==null?void 0:r.song.image_url}),l.jsxs("div",{className:`ml-2 ${i!="Playing"?"block":"hidden sm:block"}`,children:[l.jsx("p",{className:"font-playwriteCU translate-y-[-6px] leading-[2.4] line-clamp-1",children:r==null?void 0:r.song.name}),l.jsx("div",{className:"opacity-70 translate-y-[-4px] leading-[1] line-clamp-1",children:r==null?void 0:r.song.singer})]})]}),l.jsxs("div",{className:`mt-5 justify-between items-center ${i!="Playing"?"hidden":"flex sm:hidden"}`,children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("div",{className:"h-[40px]",children:l.jsx(jh,{autoScroll:!0,className:"text-xl leading-[1.5] font-playwriteCU",content:(r==null?void 0:r.song.name)||"..."})}),l.jsx("div",{className:"h-[28px]",children:l.jsx(jh,{autoScroll:!0,className:`opacity-60 ${i==="Playing"?"text-lg":"text-base"}`,content:(r==null?void 0:r.song.singer)||"..."})})]}),l.jsx(fP,{})]}),l.jsx(zA,{children:l.jsx(SP,{active:n&&i==="Lyric",className:`text-center ${i==="Lyric"?"flex-1 block":"hidden"}`})}),l.jsx("div",{className:`leading-[2.2] font-playwriteCU my-2 ${i==="Songs"?"":"hidden"}`,children:"Playing next"}),l.jsx("div",{className:`flex-grow no-scrollbar overflow-auto ${i==="Songs"?"":"hidden"}`,children:r&&l.jsx(LG,{currentIndex:r.index})}),l.jsx("div",{className:`${u.control} ${i==="Songs"?"opacity-0 pointer-events-none h-[0px]":""} ${i==="Playing"?"flex-grow":""}`,children:l.jsx(mP,{variant:"mobile",ref:t})})]})]})]})})}function zG({song:t,theme:e,...n}){const{selectedSongs:r,selectSong:s}=Oo(),i=u=>{switch(n.variant){case"default":case"playing-next":return n.onClick(u);case"select":return s(t)}},a=f.useMemo(()=>n.variant!=="select"?!1:r.findIndex(u=>u.id===t.id)!=-1,[r]),o={itemContainer:`items-center justify-between cursor-pointer border-b 
    last:border-none border-${e.alpha} flex rounded-md p-2 ${a&&"bg-"+e.alpha}`,button:`${e.content_bg} rounded-full`,songListButton:"mr-[10px] px-[5px]",imageFrame:"w-[54px] h-[54px] relative rounded-[4px] overflow-hidden flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]"},c=()=>{switch(n.variant){case"select":return l.jsx(l.Fragment,{children:a?l.jsx(Vf,{className:"w-5 mr-1"}):l.jsx(fh,{className:"w-5 mr-1"})});default:return l.jsx(l.Fragment,{})}};return l.jsx(l.Fragment,{children:l.jsx("div",{onClick:i,className:`target-class opacity-100 transition-[opacity,transform] duration-500 ${o.itemContainer} `,children:l.jsxs("div",{className:"flex flex-row w-[100%]",children:[c(),l.jsxs("div",{className:"flex-grow flex",children:[l.jsx("div",{className:`${o.imageFrame}  `,children:l.jsx(xs,{blurHashEncode:t.blurhash_encode,src:t.image_url})}),l.jsxs("div",{className:"ml-[10px]",children:[l.jsx("h5",{className:`text-lg line-clamp-1 ${a&&e.content_text}`,children:t.name}),l.jsx("p",{className:"opacity-60 bg-blend-lighten line-clamp-1",children:t.singer})]})]})]})})})}function BG(){const{theme:t}=L(),{loading:e,user:n}=qn(),{logIn:r}=Lf(),s=async()=>{try{await r()}catch(a){console.log(a)}finally{}},i={icon:"w-7 mr-2 inline",linkItem:`py-3 border-b text-lg border-${t.alpha} last:border-none`,button:`${t.content_bg} rounded-full`};return l.jsxs("div",{className:"pb-[30px]",children:[l.jsx("div",{className:"text-xl font-playwriteCU leading-[2.2] mb-3",children:"Library"}),e?[...Array(3).keys()].map(a=>l.jsx(tR,{},a)):l.jsx(l.Fragment,{children:n?l.jsxs(l.Fragment,{children:[l.jsx(bp,{className:i.linkItem,to:Mt.MySongs,icon:l.jsx(Zi,{className:i.icon+t.content_text}),label:"All songs",arrowIcon:l.jsx(md,{className:"w-6"})}),l.jsx(bp,{className:i.linkItem,to:Mt.MySongs,icon:l.jsx(Z8,{className:i.icon+t.content_text}),label:"Favorite",arrowIcon:l.jsx(md,{className:"w-6"})}),l.jsx(bp,{className:i.linkItem,to:Mt.MySongs,icon:l.jsx(WA,{className:i.icon+t.content_text}),label:"Recent",arrowIcon:l.jsx(md,{className:"w-6"})})]}):l.jsxs(B,{onClick:s,className:`${t.content_bg} rounded-md space-x-1 py-1`,children:[l.jsx(Nx,{className:"w-7"}),l.jsx("span",{className:"font-playwriteCU leading-[2.2]",children:"Login"})]})})]})}function UG(){const{theme:t}=L(),{loading:e,user:n}=qn(),r=f.useRef(null),{logOut:s}=Lf(),[i,a]=f.useState(""),o=()=>{var m;return(m=r.current)==null?void 0:m.toggle()},c=m=>{var p;a(m),(p=r.current)==null||p.toggle()},u=async()=>{try{await s()}catch(m){console.log("signOut error",{messsage:m})}finally{o()}},d=f.useMemo(()=>{switch(i){case"theme":return l.jsx(S1,{close:o});case"info":return l.jsx(E1,{close:o});case"logout":return l.jsx(ui,{close:o,callback:u,loading:!1,theme:t,label:"Log out ?"})}},[i]),h={linkItem:`py-3 text-lg w-full border-b border-${t.alpha} space-x-2 last:border-none flex items-center`,icon:"w-7"};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-xl font-playwriteCU leading-[2.2] mb-3",children:"Setting"}),n&&l.jsxs("div",{className:`bg-${t.alpha} p-3 rounded-md flex mb-2`,children:[l.jsx(ry,{className:"h-[65px] w-[65px]"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-lg font-[500]",children:n.display_name}),l.jsx("p",{className:"opacity-70 font-[500]",children:"Vip member "})]})]}),e?[...Array(3).keys()].map(m=>l.jsx(tR,{},m)):l.jsxs("div",{className:"",children:[l.jsxs("button",{className:h.linkItem,onClick:()=>c("theme"),children:[l.jsx(P0,{className:h.icon}),l.jsx("span",{children:"Theme"})]}),l.jsxs("button",{className:h.linkItem,onClick:()=>c("info"),children:[l.jsx(R0,{className:h.icon}),l.jsx("span",{children:"Info"})]}),n&&l.jsxs("button",{className:h.linkItem,onClick:()=>c("logout"),children:[l.jsx(Nx,{className:h.icon}),l.jsx("span",{children:"Logout"})]})]}),l.jsx(an,{ref:r,variant:"animation",children:d})]})}const p1="data:image/gif;base64,R0lGODlhJAAkAIABAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NmRjOGMyNC03YmYxLTQxZTMtYjQ2Zi1mY2ZhMDk4MDE1YWYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTBDRTc0QzlGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTBDRTc0QzhGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YzBhNGU4OWYtNjc4Yy00NmMyLTg4NmUtYzIxNGE0NTIwZDRjIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODRlMDBjYmEtZjhlNy03YzQ4LWE4MTgtNDc3NTI3MGQ1ZTAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQgAAQAsAAAAACQAJAAAAnKMj5nArQ9jc7HWyax+GOx/dCAojltpWmgqYazqvu0kz1StrHgYp6tO6gWAn59wZKSxkjcTM7MUEk/SY1BpmGqeHhs0W8Vywk3tkPw9iztcBLfNW7Pl9PLcXk/f8Xz9vguWB6h254Y2+Id4aLjH2Kc4UQAAIfkECQgAAQAsAAAAACQAJAAAAnSMj6nL7Q+jnAzYS+XFGW7beV/4fADpmGijrkvrJnA2z1Q9hvhG7lznA+lyBpuMGAieDiYlQulkIpvTKk9KFRatv2RW671uxeHskwv+ptHLsRnbhbLPZHW7vK6r6XF21J33Bngnp2fY98UXuNikSOg3B8dYAAAh+QQJCAABACwAAAAAJAAkAAACfIyPqcvtD6OctNqLKdg8N955C7iJI4mQAKam6NUeMTMHda3cr4EnOugCfnY2Yi8Y4hmXKqHSWYQ2mclodSqllmTY7fOqbSK9VnLXHB6Ludk2Vg1nv+Vo9zT+rc/zK3qf/wNmt8aHV0Z4aHj2l+inFqgXiQjJuKgYRnkJUgAAIfkECQgAAQAsAAAAACQAJAAAAnuMj6nL7Q+jnLTaC7K+T2/eeBkYiiQjAlyKsJh5uJYc0BRtTzgMpbsn8fFqQ4cQGCuWjqok0vA7toZR4fRJxDJHzg+Uur16s+Nt86sFM8VcdDncbZPlZvZ5fq/H82rp3m5XxZe29mfoZnWIF9hH1+gDqKiHOPhWSBlJWQAAIfkECQgAAQAsAAAAACQAJAAAAn6Mj6nL7Q8RmDTaQ+u1eW7efVg4ZqLRARIppqsZpW6pQTIbzPZd57jD6+keQQ/NuAu+esDiEkl0HlUxKerXKFKvsCTvuY0qp2Dw8IzTlslTdNf3VrO5Qiu8Hre78d/5HSpHB5imR5g3Jhi2d7OWaGbIN4j4pwjJ6Lco00gJVgAAIfkECQgAAQAsAAAAACQAJAAAAn2EH6nL7XnQmxRGULO7WHsbfRPHiQ95mRsqqQvbBqUGG29K13eYw3tMqXVAwJFOMcsIf7YeizmsLJE45ZHYtPqoPO2TWzxdZVXpOGneYqPBc7mtJnflsekaCkXry3Z61h/VtzcnyGcYN1jnRnj4dQf2V8g46QiIB0ly+bhWAAAh+QQJCAABACwAAAAAJAAkAAACfYyPqcvtD+MDtMobqt6Y7Q90C8iJCamZJ0qpCNu6Bhwen0S/JZTb+wTTpSK92c9RzBwbyRsx6BvyoEYpkCW0RLVVVDbWBSuxW7EzDPrW0OrzmPs2U+Nrevvnzs/11ib+T8ZWVufXB+g1qHZnyAhX6HhIopg4yAfZKEkpiFYAACH5BAkIAAEALAAAAAAkACQAAAJ7jI+py+0Po5y02ouB3tht3jGfFopjuYwqgK5npCLuJ8XHDEK2gZP3ywMGeqwfzZgb9mTCnRLHPAalz1k06SRefVPsEsmthrXgYnf8PZvFa7J6206z4fBs8w4t08t2at+qF6j2h+YnRxiX9ybIhrg3iOdlqDjH6Fa5qFYAACH5BAkIAAEALAAAAAAkACQAAAJ1jI+py+0Po5y02otzArxr1nmfEnIjWZ5bqh4l0Lqs8WK1HNpzcFs9/9o5fkFhg1gUQZBJWISZlECL0l3ThFMCc1lq10mzXhFT8Db6JYubam7Yffa+teVymz5O6+fyuLm+hgd39ReIxRd0d+inmLjH+GX3+FIAACH5BAUIAAEALAAAAAAkACQAAAJwjI+py+0Po5y0PoCzhVlv12EfGI5NCJgMqi5sm7zwIc9BPeOw3vKqb6oBLyUaqshB3o4diZDpSTaN0FTkWUVgo8sslbtlapXh43hqKJfP4Ko1TY574ehue24XffV0KJuf9xa4tifoZih351f4h9hRAAA7",kP=({data:t,inDetail:e,active:n,link:r})=>{const{theme:s}=L(),i={button:`rounded-full text-[#201f1f] p-[4px] hover:bg-${s==null?void 0:s.alpha}`,imageContainer:"absolute inset-0 overflow-hidden flex items-center justify-center "},a=l.jsx(lR,{theme:s,children:l.jsxs("div",{className:i.imageContainer,children:[l.jsx(xs,{className:`hover:scale-[1.05] transition-transform duration-300 object-center object-cover ${n?"brightness-[90%]":""}`,src:t.image_url,blurHashEncode:t.blurhash_encode}),n&&l.jsx("img",{src:p1,alt:"",className:" absolute w-[30px]"})]})});return e?a:l.jsxs(l.Fragment,{children:[l.jsx(cn,{to:`${r||"/playlist/"+t.id}`,className:"",children:a}),l.jsx("div",{className:"text-xl font-[500] line-clamp-1 leading-[24px]  mt-[6px]",children:t.name})]})};function VG({content:t,className:e}){const n=f.useRef(null),r=f.useRef(null);return jV({textRef:r,textWrapperRef:n,content:t}),l.jsx("div",{ref:n,className:"overflow-hidden relative h-full ",children:l.jsx("div",{ref:r,className:`absolute left-0 whitespace-nowrap ${e}`,children:t||"..."})})}const jh=f.memo(VG);function TP({openModal:t,variant:e}){const{theme:n}=L(),r=rn(),s=d=>{t(d)},[i,a]=LR("isCrossFade",!1),o=()=>{a(!i),r(st({isCrossFade:!i}))},c={menuItem:"hover:bg-[#fff]/5 rounded-md text-sm font-[500] px-2 py-2 inline-flex items-center cursor-pointer",icon:"w-5 mr-2",divide:"h-[1px]  w-[calc(100%-20px)] my-[4px] mx-auto bg-[#fff]/5"},u=()=>{switch(e){case"client":return l.jsxs(l.Fragment,{children:[l.jsxs("li",{className:`${c.menuItem} justify-between cursor-default`,children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(zx,{className:c.icon}),"Cross fade"]}),l.jsx(hP,{active:i,cb:o})]}),l.jsxs("li",{className:`${c.menuItem}`,onClick:()=>s("theme"),children:[l.jsx(P0,{className:c.icon}),"Themes"]}),l.jsx("div",{className:c.divide}),l.jsxs("li",{className:`${c.menuItem}`,onClick:()=>s("info"),children:[l.jsx(R0,{className:c.icon}),"Info"]})]});case"dashboard":return l.jsxs(l.Fragment,{children:[l.jsxs("li",{className:`${c.menuItem}`,onClick:()=>s("theme"),children:[l.jsx(P0,{className:c.icon}),"Themes"]}),l.jsx("div",{className:c.divide}),l.jsxs("li",{className:`${c.menuItem}`,onClick:()=>s("info"),children:[l.jsx(R0,{className:c.icon}),"Info"]})]})}};return l.jsx(l.Fragment,{children:l.jsx(Gn,{theme:n,children:l.jsx("ul",{className:"flex flex-col w-[200px]",children:u()})})})}function WG(){const{setErrorToast:t,setSuccessToast:e}=xt(),[n,r]=f.useState(!1);return{isFetching:n,addToPlaylist:async({playlist:i,song:a})=>{try{if(r(!0),!i.song_ids.find(c=>c===a.id)){const c=[...i.song_ids,a.id];await pt({collection:"playlist",id:i.id,data:{song_ids:c},msg:">>> api: update playlist doc"})}e(`' ${a.name} added to playlist ' ${i.name} '`)}catch(o){console.log({message:o}),t()}finally{r(!1)}}}}function g1({addSongToNewPlaylistModalRef:t,addSongToPlaylistModalRef:e,song:n}){const{isOnMobile:r,theme:s}=L(),{playlists:i}=At(),{close:a}=vs(),{isFetching:o,addToPlaylist:c}=WG(),u=()=>{var m;(m=t.current)==null||m.open(),a()},d=()=>{var m;(m=e==null?void 0:e.current)==null||m.open(),a()},h={overlay:"absolute flex items-center justify-center inset-0 bg-black/40"};return r?l.jsxs("button",{onClick:d,children:[l.jsx(zn,{className:"w-5"}),l.jsx("span",{children:"Add to playlist"})]}):l.jsx(l.Fragment,{children:l.jsxs("div",{className:"group/add-playlist relative",children:[l.jsx(zn,{className:"w-5"}),l.jsx("span",{children:"Add to playlist"}),l.jsxs(Gn,{className:"absolute z-[99] overflow-hidden py-2 right-full w-full hidden group-hover/add-playlist:block",theme:s,p:"clear",children:[l.jsxs(yi,{children:[l.jsxs("button",{onClick:u,children:[l.jsx("span",{className:` inline-flex items-center mr-1 p-1 rounded-full ${s.content_bg}`,children:l.jsx(zn,{className:"w-4"})}),l.jsx("span",{children:"Add new playlist"})]}),!!(i!=null&&i.length)&&i.map((m,p)=>l.jsxs("button",{onClick:()=>c({song:n,playlist:m}),children:[l.jsx(Zi,{className:"w-5"}),l.jsx("p",{className:"line-clamp-1",children:m.name})]},p))]}),o&&l.jsx("div",{className:h.overlay,children:l.jsx("div",{className:"h-[25px] w-[25px] border-[2px] border-r-black rounded-[50%] animate-spin"})})]})]})})}function y1({closeModal:t,cbWhenSubmit:e,title:n,initValue:r="",loading:s,variant:i="input",children:a}){const{theme:o}=L(),[c,u]=f.useState(r||""),d=f.useRef(null),h=g=>{g.preventDefault(),!(!m||s)&&e(c)},m=f.useMemo(()=>c.trim()&&c!==r,[c]);f.useEffect(()=>{var g;(g=d.current)==null||g.focus()},[]);const p={input:"rounded-md px-3 py-2 outline-none w-full bg-white/5 text-white"};return l.jsxs("div",{className:"w-[400px] max-w-[85vw]",children:[l.jsx(mr,{close:t,title:n}),l.jsxs("form",{action:"",onSubmit:h,children:[i==="input"&&l.jsx("input",{className:p.input,ref:d,placeholder:"name...",value:c,onChange:g=>u(g.target.value.trim())}),i==="text-area"&&l.jsx("textarea",{className:p.input,value:c,onChange:g=>u(g.target.value)}),a,l.jsx("p",{className:"text-right mt-3",children:l.jsx(B,{type:"submit",variant:"primary",isLoading:s,className:`${o.content_bg} rounded-full self-end mt-[15px] ${m?"":"disable"}`,children:"Save"})})]})]})}function IP(){const{user:t}=qn(),{playlists:e,setPlaylists:n}=At(),[r,s]=f.useState(!1),{setErrorToast:i,setSuccessToast:a}=xt();return{isFetching:r,addToPlaylist:async({song:c,...u})=>{try{if(!t)throw new Error("user not found");switch(s(!0),u.variant){case"exist":{const{playlist:d}=u;s(!0);const h=[...d.song_ids,c.id];await pt({collection:"playlist",id:d.id,data:{song_ids:h},msg:">>> api: update playlist doc"}),a("Song added");break}case"create":{const{name:d}=u,h=eu(d),m=Ax({id:h,by:t.email,name:d,song_ids:[c.id]}),p=[...e,m];await pt({collection:"playlist",data:m,id:h,msg:">>> api: set playlist doc"}),n(p),a("Playlist created");break}}}catch(d){console.log({message:d}),i()}finally{s(!1)}}}}function v1({song:t,modalRef:e}){const n=()=>{var a;return(a=e.current)==null?void 0:a.close()},{addToPlaylist:r,isFetching:s}=IP(),i=async a=>{var o;await r({variant:"create",name:a,song:t}),(o=e.current)==null||o.close()};return l.jsx(an,{ref:e,variant:"animation",children:l.jsx(y1,{loading:s,closeModal:n,cbWhenSubmit:a=>i(a),title:"Add to new playlist"})})}function CP({modalRef:t,openAddToNewPlaylistModal:e,song:n}){const{playlists:r}=At(),{theme:s}=L(),{addToPlaylist:i,isFetching:a}=IP(),o=()=>{var u;(u=t.current)==null||u.close(),e()},c=async u=>{await i({variant:"exist",playlist:u,song:n})};return l.jsx(an,{variant:"animation",ref:t,children:l.jsxs("div",{className:"w-[400px] max-h-[80vh] max-w-[calc(90vw-40px)] flex flex-col ",children:[l.jsx(mr,{close:()=>{var u;return(u=t.current)==null?void 0:u.close()},title:"Playlists"}),l.jsxs("div",{className:`flex-grow flex flex-col overflow-auto space-y-2 ${a?"disable":""}`,children:[l.jsxs(B,{className:`${s.content_bg} rounded-full justify-center`,onClick:o,children:[l.jsx(zn,{className:"w-5"}),l.jsx("span",{children:"Add new playlist"})]}),!!(r!=null&&r.length)&&l.jsx(l.Fragment,{children:r.map((u,d)=>l.jsxs("button",{onClick:()=>c(u),className:`flex rounded-md p-2 hover:${s.content_bg} ${s.side_bar_bg}`,children:[l.jsx(Zi,{className:"w-5 mr-2"}),l.jsx("span",{children:u.name})]},d))})]})]})})}function x1(){const t=rn(),{setSuccessToast:e}=xt();return{action:r=>{switch(r.variant){case"add":t(OR({songs:r.songs})),e("Song added to queue");break;case"remove":t(SV({index:r.index}))}}}}function w1({song:t}){return l.jsx("div",{className:"px-2 mb-3",children:l.jsxs("div",{className:"p-1.5 bg-[#fff]/5 rounded-md flex",children:[t.image_url&&l.jsx("div",{className:"w-[50px] h-[50px] flex-shrink-0",children:l.jsx("img",{src:t.image_url,className:"object-cover object-center w-full rounded",alt:""})}),l.jsxs("div",{className:"ml-1 text-sm",children:[l.jsx("h5",{className:"line-clamp-1 font-[500]",children:t.name}),l.jsx("p",{className:"opacity-70 line-clamp-1",children:t.singer})]})]})})}function HG({index:t,song:e}){const{theme:n}=L(),{close:r}=vs(),{action:s}=x1(),i=f.useRef(null),a=()=>{s({variant:"remove",index:t}),r()};return l.jsxs(l.Fragment,{children:[l.jsx(Cn,{appendTo:"portal",className:"w-[200px]",children:l.jsxs(Gn,{className:"py-2",p:"clear",theme:n,children:[l.jsx(w1,{song:e}),l.jsxs(yi,{children:[l.jsx(g1,{song:e,addSongToNewPlaylistModalRef:i}),l.jsxs("button",{onClick:a,children:[l.jsx(l7,{className:"w-5"}),l.jsx("span",{children:"Remove"})]}),l.jsxs("a",{target:"_blank",href:e.song_url,children:[l.jsx(Px,{className:"w-5"}),l.jsx("span",{children:"Download"})]})]})]})}),l.jsx(v1,{modalRef:i,song:e})]})}function qG({song:t}){const{theme:e}=L(),{close:n}=vs(),r=f.useRef(null),s=f.useRef(null),{action:i}=x1(),a=()=>{i({variant:"add",songs:[t]}),n()};return l.jsxs(l.Fragment,{children:[l.jsx(Cn,{appendTo:"portal",className:"w-[200px]",children:l.jsxs(Gn,{className:"py-2",p:"clear",theme:e,children:[l.jsx(w1,{song:t}),l.jsxs(yi,{children:[l.jsxs("button",{onClick:a,children:[l.jsx(zn,{className:"w-5"}),l.jsx("span",{children:"Add to queue"})]}),l.jsx(g1,{song:t,addSongToPlaylistModalRef:s,addSongToNewPlaylistModalRef:r}),l.jsxs("a",{target:"_blank",href:t.song_url,children:[l.jsx(Px,{className:"w-5"}),l.jsx("span",{children:"Download"})]})]})]})}),l.jsx(v1,{modalRef:r,song:t}),l.jsx(CP,{modalRef:s,song:t,openAddToNewPlaylistModal:()=>{var o;return(o=r.current)==null?void 0:o.open()}})]})}function GG({song:t}){const{theme:e}=L(),{close:n}=vs(),[r,s]=f.useState(""),i=f.useRef(null),a=f.useRef(null),o=f.useRef(null),{action:c}=x1(),{action:u,loading:d}=DV(),h=()=>{c({variant:"add",songs:[t]}),n()},m=_=>{var v;s(_),(v=i.current)==null||v.open(),n()},p=()=>{var _;(_=i.current)==null||_.close()},g=async()=>{await u({variant:"delete",song:t}),p()},x=()=>{switch(r){case"":return l.jsx(l.Fragment,{});case"delete":return l.jsx(ui,{callback:g,loading:d,theme:e,close:p,label:`Delete ' ${t.name} ' ?`});case"edit":return l.jsx(dP,{modalRef:i,song:t})}};return l.jsxs(l.Fragment,{children:[l.jsx(Cn,{appendTo:"portal",className:"w-[200px]",children:l.jsxs(Gn,{className:"py-2",p:"clear",theme:e,children:[l.jsx(w1,{song:t}),l.jsxs(yi,{children:[l.jsxs("button",{onClick:h,children:[l.jsx(zn,{className:"w-5"}),l.jsx("span",{children:"Add to queue"})]}),l.jsx(g1,{song:t,addSongToPlaylistModalRef:o,addSongToNewPlaylistModalRef:a}),l.jsxs("button",{onClick:()=>m("edit"),children:[l.jsx(nu,{className:"w-5"}),l.jsx("span",{children:"Edit"})]}),l.jsxs(cn,{to:`lyric/${t.id}`,children:[l.jsx(Wf,{className:"w-5"}),l.jsx("span",{children:t.lyric_id?"Edit lyric":"Add lyric"})]}),l.jsxs("button",{onClick:()=>m("delete"),children:[l.jsx(oi,{className:"w-5"}),l.jsx("span",{children:"Delete"})]}),l.jsxs("a",{target:"_blank",href:t.song_url,children:[l.jsx(Px,{className:"w-5"}),l.jsx("span",{children:"Download"})]})]})]})}),l.jsx(v1,{modalRef:a,song:t}),l.jsx(CP,{modalRef:o,song:t,openAddToNewPlaylistModal:()=>{var _;return(_=a.current)==null?void 0:_.open()}}),l.jsx(an,{variant:"animation",ref:i,children:x()})]})}function Zo({song:t,index:e,variant:n}){const{theme:r}=L(),[s,i]=f.useState(!1),a=()=>{switch(n){case"queue-song":return l.jsx(HG,{song:t,index:e});case"user-song":return l.jsx(GG,{song:t});case"sys-song":return l.jsx(qG,{song:t})}},o=()=>s?`${r.content_bg}`:"block md:hidden";return l.jsx(l.Fragment,{children:l.jsxs($r,{appendOnPortal:!0,children:[l.jsx(zr,{setIsOpenParent:i,children:l.jsx(rs,{isWrapped:!0,content:"Menu",children:l.jsx("button",{className:`block group-hover/main:block ${r.content_hover_bg} p-2 rounded-full ${o()}`,children:l.jsx(UA,{className:"w-5"})})})}),l.jsx("span",{className:`text-sm font-[500] hidden  group-hover/main:hidden ${s||n==="queue-song"?"hidden":"md:block"}`,children:yo(t.duration)}),a()]})})}function el({song:t,onClick:e,active:n=!0,index:r,className:s,...i}){const{theme:a,isOnMobile:o}=L(),{isChecked:c,selectedSongs:u,selectSong:d}=Oo(),h=f.useMemo(()=>u?u.indexOf(t)!=-1:!1,[u]),m=k=>{c!==void 0&&d(k)},p={button:`${a.content_hover_bg} p-[8px] rounded-full`,checkboxButton:"mr-3 text-[inherit]",itemContainer:`w-full sm:group/container cursor-pointer flex flex-row rounded justify-between p-[10px] border-b border-${a.alpha} last:border-none`,imageFrame:` relative rounded-[4px] overflow-hidden flex-shrink-0 ${i.variant==="queue"?"w-[40px] h-[40px]":"h-[54px] w-[54px]"}`,overlay:"absolute flex items-center justify-center inset-0 bg-black/40",ctaWrapper:"flex items-center justify-end flex-shrink-0",menuBtnWrapper:"w-[50px] flex justify-center relative"},g=()=>{switch(i.variant){case"search-bar":case"queue":case"home":return l.jsx(l.Fragment,{});case"uploading":return l.jsx("button",{className:`${p.checkboxButton}`,children:l.jsx(Zi,{className:"w-[18px]"})});default:return o?l.jsx("button",{onClick:()=>m(t),className:`${p.checkboxButton} text-[inherit]`,children:h?l.jsx(ty,{className:"w-[18px]"}):l.jsx(fh,{className:"w-[18px]"})}):l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>m(t),className:`${p.checkboxButton} ${!h&&"hidden"} group-hover/main:block`,children:h?l.jsx(ty,{className:"w-[18px]"}):l.jsx(fh,{className:"w-[18px]"})}),l.jsx("button",{className:`${p.checkboxButton} ${h&&"hidden"} group-hover/main:hidden group-hover/main:mr-[0px]`,children:l.jsx(Zi,{className:"w-[18px]"})})]})}},x=f.useMemo(()=>{switch(i.variant){case"uploading":return l.jsx(l.Fragment,{});default:return l.jsxs("div",{className:` ${p.overlay} 
               ${n?"":"hidden sm:group-hover/main:flex"}`,children:[l.jsx("img",{src:p1,alt:"",className:`"h-[18px] w-[18px] ${pc(!n)}`}),l.jsx("button",{onClick:e,className:`${pc(n)} `,children:l.jsx(mB,{className:"w-[24px] text-white"})})]})}},[n,e]),_=()=>{switch(i.variant){case"queue":return"text-sm";default:return""}},v=()=>{switch(i.variant){case"queue":return"text-xs";default:return"text-sm"}},y=l.jsxs(l.Fragment,{children:[g(),l.jsxs("div",{className:"flex-grow flex",onClick:o&&i.variant!=="uploading"?e:()=>{},children:[l.jsxs("div",{className:`${p.imageFrame}`,children:[l.jsx(xs,{src:t.image_url,blurHashEncode:t.blurhash_encode}),x]}),l.jsxs("div",{className:"ml-[10px]",children:[l.jsx("h5",{className:`line-clamp-1 font-medium overflow-hidden ${_()}`,children:t.name}),l.jsx("p",{className:`opacity-[.7] leading-[1.2] line-clamp-1 ${v()}`,children:t.singer})]})]})]}),w=()=>{switch(i.variant){case"uploading":return l.jsx("div",{className:"opacity-[.7] flex flex-grow overflow-hidden",children:y});case"queue":return y;default:return l.jsx("div",{className:"flex flex-grow overflow-hidden",children:y})}},E=()=>{switch(i.variant){case"search-bar":case"home":return l.jsx(Zo,{index:r,variant:"sys-song",song:t});case"my-songs":return l.jsx(Zo,{variant:"user-song",index:r,song:t});case"my-playlist":return l.jsx(Zo,{variant:"sys-song",index:r,song:t});case"sys-playlist":return l.jsx(Zo,{variant:"sys-song",song:t,index:r});case"queue":return l.jsx(Zo,{variant:"queue-song",song:t,index:r});default:return l.jsx(l.Fragment,{})}},S=()=>{switch(i.variant){case"uploading":return l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{children:l.jsx(mn,{className:"w-[20px] mr-[10px] animate-spin"})}),l.jsx("p",{className:"text-[14px]",children:"In process..."})]});default:return l.jsx("div",{className:p.ctaWrapper,children:l.jsx("div",{className:p.menuBtnWrapper,children:E()})})}},b=()=>{switch(i.variant){case"uploading":return l.jsxs("div",{className:`${p.itemContainer} ${s||""} `,children:[w(),S()]});case"queue":return l.jsxs("div",{className:`${p.itemContainer} group/main py-[6px] ${n?`${a.content_bg} text-white`:`hover:bg-${a.alpha}`}`,children:[w(),S()]});default:return l.jsxs("div",{className:`${p.itemContainer} ${s||""} group/main ${n||h?`bg-${a.alpha}`:`hover:bg-${a.alpha}`}`,children:[w(),S()]})}};return l.jsx(l.Fragment,{children:b()})}const KG=({data:t,active:e,onClick:n,hasTitle:r,classNames:s="",idleClass:i=""},a)=>{const o={container:"flex flex-col",imageFrame:"group relative transition-[width] duration-[.3s] origin-center rounded-[6px] overflow-hidden",image:"select-none object-cover object-center rounded w-full",overlay:`absolute  ${e?"":"inset-0 hidden bg-black/40 items-center justify-center"}   group-hover:flex`,playingGifFrame:"absolute h-[30px] w-[30px] bottom-[15px] left-[15px] -z-1",title:"text-2xl text-white mt-3 font-bold text-ellipsis line-clamp-1"};if(t)return l.jsxs("div",{ref:a,"queue-id":t.queue_id,className:`song-thumb ${e?"active":""} ${o.container} ${i}`,children:[l.jsx("div",{className:`${s} flex items-end justify-center flex-shrink-0 w-[350px] h-[350px] min-[1536px]:w-[450px] min-[1536px]:h-[450px] `,children:l.jsxs("div",{className:`border-[4px] rounded-[6px] overflow-hidden border-transparent ${o.imageFrame} ${e?"w-[350px] min-[1536px]:w-[450px]":"w-[280px] min-[1536px]:w-[330px]"}`,children:[l.jsx(xs,{src:t.image_url,blurHashEncode:t.blurhash_encode}),l.jsx("div",{className:`${o.overlay}`,children:!e&&l.jsx(B,{onClick:n,variant:"circle",hover:"scale",size:"clear",className:"p-2 hover:bg-[#fff]/10",children:l.jsx(Mx,{className:"w-10"})})}),e&&l.jsx("div",{className:o.playingGifFrame,children:l.jsx("img",{src:p1,alt:""})})]})}),r&&l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:o.title,children:(t==null?void 0:t.name)||"Some song"}),l.jsx("p",{className:"text-md opacity-50 line-clamp-1",children:(t==null?void 0:t.singer)||"..."})]})]})},Hp=f.forwardRef(KG);function QG({imageUrl:t,expand:e}){return l.jsx("div",{className:` ${e?"w-full h-auto px-10 sm:w-[60px] sm:h-[60px] sm:px-0":"w-[60px] h-[60px] p-0 flex-shrink-0"}`,children:l.jsx(xs,{src:t,className:"w-full rounded-md"})})}function sa({songs:t,...e}){const{theme:n}=L(),{queueSongs:r,currentSongData:s}=Z(ct),i=()=>e.variant!=="uploading"?l.jsx(l.Fragment,{}):t.map((c,u)=>{const d={key:u,onClick:()=>{},song:c};return u==0?l.jsx(el,{index:u,variant:"uploading",className:"temp-song",...d}):l.jsx(el,{variant:"uploading",index:u,...d})}),a=l.jsx("p",{className:"text-center my-[60px]",children:"... \\_()_/"}),o=()=>{switch(e.variant){case"uploading":return l.jsx(l.Fragment,{});case"my-songs":if(!t.length&&!e.tempSongs.length)return a;break;default:if(!t.length)return a}return t.map((c,u)=>{let d=c.id===(s==null?void 0:s.song.id);const h=u===r.length-1;switch(e.variant==="queue"&&(d=d&&(s==null?void 0:s.song.queue_id)===c.queue_id),e.variant){case"search-bar":return l.jsx(el,{active:d,onClick:()=>e.handleSetSong(c),variant:e.variant,song:c,index:u},c.queue_id);default:return e.variant==="queue"&&d&&!h?l.jsxs("div",{children:[l.jsx(el,{active:d,onClick:()=>e.handleSetSong(c.queue_id),variant:e.variant,song:c,index:u}),l.jsx("div",{className:"mt-[12px] mb-[4px]",children:l.jsx("p",{className:`${n.content_text} text-[14px] font-[600]`,children:"Playing next"})})]},c.queue_id):l.jsx(el,{active:d,onClick:()=>e.handleSetSong(c.queue_id),variant:e.variant,song:c,index:u},c.queue_id)}})};return l.jsxs(l.Fragment,{children:[o(),i()]})}function Lo({variant:t}){const e=rn(),{currentQueueId:n,queueSongs:r,currentSongData:s}=Z(ct),i=f.useMemo(()=>{switch(t){case"songs":case"search-bar":return"queue_id";case"playlist":return"queue_id"}},[]);return{handleSetSong:(o,c)=>{if(n!==o){e(ms(o)),e(st({playStatus:"loading"}));const u=r.map(h=>h[i]);(!r.length||r.length!==c.length||!!c.find(h=>!u.includes(h[i])))&&(console.log("set queue"),e(bV({songs:c})))}},currentSongData:s,queueSongs:r,currentQueueId:n}}function XG({loading:t}){const{sysSongPlaylist:e}=At(),{handleSetSong:n}=Lo({variant:"songs"}),r=s=>{n(s,e.songs)};return l.jsx(l.Fragment,{children:l.jsxs(gi,{children:[t&&qf,!t&&l.jsxs(l.Fragment,{children:[l.jsx(wm,{title:"Songs"}),e.songs.length?l.jsx(l.Fragment,{children:l.jsx(sa,{variant:"home",handleSetSong:r,songs:e.songs})}):l.jsx("h1",{className:"text-[22px] text-center",children:"..."})]})]})})}function _1({className:t="",...e}){const{theme:n}=L(),{currentSongData:r}=Z(ct),{playlists:s,sysSongPlaylist:i}=At(),a=f.useRef(null),o=e.variant!="search-page"?e.loading:!1,c=()=>{var g;return(g=a.current)==null?void 0:g.toggle()},u=f.useMemo(()=>e.variant==="search-page"?e.playlists:e.variant==="my-song"?s:e.variant==="sys"?i.playlists:[],[i,s]),d={playlistItem:"w-1/4 p-[8px] max-[800px]:w-1/2"},h=()=>u.length?u.map((g,x)=>{const _=r==null?void 0:r.song.song_in.includes(g.id);switch(e.variant){case"sys":case"search-page":case"my-song":return l.jsx("div",{className:d.playlistItem,children:l.jsx(kP,{active:_,data:g})},x)}}):l.jsx(l.Fragment,{}),m=()=>{switch(e.variant){case"my-song":return l.jsx("div",{className:`${d.playlistItem} mb-[25px]`,children:l.jsx(lR,{theme:n,onClick:()=>{var g;return(g=a.current)==null?void 0:g.toggle()}})});default:return l.jsx(l.Fragment,{})}},p=()=>{switch(e.variant){case"my-song":return l.jsx(ZG,{close:c})}};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:`flex flex-row flex-wrap -mx-[8px] ${t}`,children:[o&&nR,!o&&l.jsxs(l.Fragment,{children:[h(),m()]})]}),l.jsx(an,{variant:"animation",ref:a,children:p()})]})}function su({tabs:t,activeTab:e,setActiveTab:n,className:r="",render:s,inFullScreen:i}){const{theme:a}=L();return l.jsx("ul",{className:`inline-flex space-x-[4px] py-[4px] px-[4px] items-center ${i?"mx-auto":""} rounded-full ${i?"bg-white/10":a.side_bar_bg} ${r&&r}`,children:t.map((o,c)=>l.jsx("li",{onClick:()=>n(o),className:`${i?"px-[30px]":"px-[20px]"}  cursor-pointer hover:bg-white/5 h-full rounded-full max-[549px]:px-4 ${i?"":a.content_hover_text} ${e===o?i?"bg-white/20":`${a.content_text} ${a.container}`:""}`,children:l.jsx("span",{className:"leading-[30px] font-normal sm:font-bold",children:s(o)})},c))})}function YG({user:t},e){return e?l.jsx("p",{className:"text-xl mb-4 ml-2",ref:e,children:t.display_name}):l.jsx("p",{className:"text-xl mb-4 ml-2",children:t.display_name})}f.forwardRef(YG);const JG="/assets/user-default-971f59df.png";function ry({className:t}){const[e]=Ff(Ji),n={imageFrame:`${t||"w-[35px] h-[35px]"} flex-shrink-0 rounded-full overflow-hidden ${e!=null&&e.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`};return l.jsx("div",{className:n.imageFrame,children:l.jsx(xs,{src:(e==null?void 0:e.photoURL)||JG,className:"w-full"})})}function E1({close:t}){return l.jsxs("div",{className:"w-[400px] max-w-[calc(90vw-40px)]",children:[l.jsx(mr,{close:t,title:"HD MP3"}),l.jsxs("p",{children:[l.jsx("span",{className:"font-[500]",children:"Technologies: "})," React, Tailwind Css, Google firebase"]})]})}function qp({onClick:t,theme:e,active:n}){return l.jsx(l.Fragment,{children:l.jsxs("div",{className:"w-[25%] px-2 mt-3 max-[549px]:w-[50%]",children:[l.jsx("div",{onClick:()=>t(e),className:`relative border-l-[20px] ${e.content_border} pt-[100%] rounded-xl ${e.side_bar_bg} ${n?e.content_border:""}`,children:n&&l.jsx("div",{className:"absolute bottom-[10px] right-[10px]",children:l.jsx(T8,{className:`${e.content_text} w-[25px]`})})}),l.jsx("p",{className:"text-base font-[500] mt-1",children:e.name})]})})}function S1({close:t}){const{theme:e,setTheme:n}=L(),r=c=>{It("theme",c.id),n(c)},s={songItemContainer:`w-full border-b border-${e.alpha} last:border-none`,icon:"w-6 h-6 mr-2 inline",popupWrapper:"w-[900px] max-w-[calc(90vw-40px)]",themeContainer:"overflow-y-auto overflow-x-hidden no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-2 -mt-3 flex-wrap",linkItem:`py-[10px] border-b border-${e.alpha} last:border-none`},i=uh.map(c=>{const u=c.id===e.id;if(c.type==="light")return l.jsx(qp,{active:u,theme:c,onClick:r},c.id)}),a=uh.map(c=>{const u=c.id===e.id;if(c.type==="dark")return l.jsx(qp,{active:u,theme:c,onClick:r},c.id)}),o=lA.map(c=>{const u=c.id===e.id;return l.jsx(qp,{active:u,theme:c,onClick:r},c.id)});return l.jsxs("div",{className:s.popupWrapper,children:[l.jsx(mr,{close:t,title:"Themes"}),l.jsxs("div",{className:s.themeContainer,children:[l.jsx("h2",{className:"text-lg font-semibold mb-[10px] mt-[30px]",children:"Specical"}),l.jsx("div",{className:s.themeList,children:o}),l.jsx("h2",{className:"text-lg font-semibold mb-[10px]",children:"Dark"}),l.jsx("div",{className:s.themeList,children:a}),l.jsx("h2",{className:"text-lg font-semibold mb-[10px] mt-[30px]",children:"Light"}),l.jsx("div",{className:s.themeList,children:i})]})]})}function ui({loading:t,theme:e,callback:n,label:r,close:s,buttonLabel:i,desc:a="This action cannot be undone",className:o}){return l.jsxs("div",{className:`${o||"w-[400px] max-w-[calc(90vw-40px)]"} ${t?"disable":""}`,children:[l.jsx("div",{className:"text-xl font-playwriteCU leading-[2.2] mb-3",children:r||"Wait a minute"}),a&&l.jsx("p",{className:"font-semibold text-lg text-red-500",children:a}),l.jsxs("div",{className:"flex space-x-3 mt-5",children:[l.jsx(B,{onClick:s,className:"bg-white/10 border border-white/10 rounded-full px-3 py-0.5",variant:"primary",size:"clear",children:"Close"}),l.jsx(B,{isLoading:t,className:`${e.content_bg} rounded-full px-3`,variant:"primary",size:"clear",onClick:n,children:i||"Yes, Please"})]})]})}function _m(){const t=rn(),{user:e}=qn(),{currentPlaylist:n,playlistSongs:r}=Z(fr),{playlists:s}=At(),[i,a]=f.useState(!1),{setErrorToast:o,setSuccessToast:c}=xt(),u=Hn();return{isFetching:i,removeSelectSongs:async(m,p)=>{try{if(!n||!r.length)return;p?p(!0):a(!0);const g=m.map(v=>v.id),x=[...r].filter(v=>!g.includes(v.id)),_=x.map(v=>v.id);return await pt({collection:"playlist",id:n.id,data:{song_ids:_},msg:">>> api: update playlist doc"}),t($R(x)),a(!1),c(`${m.length} songs removed`),x}catch(g){o(),console.log({message:g})}finally{p?p(!1):a(!1)}},action:async m=>{try{if(!e)throw new Error("user not found");switch(a(!0),m.variant){case"add":if(!m.name.trim())throw new Error("playlist name invalid");const p=eu(m.name),g=Ax({id:p,by:e.email,name:m.name});await pt({collection:"playlist",data:g,id:p,msg:">>> api: set playlist doc"});const x=[...s,g];await rS(x,e);break;case"edit":if(!n)throw new Error("Current playlist invalid");await pt({collection:"playlist",data:{name:m.playlist.name},id:n.id,msg:">>> api: set playlist doc"}),t(z0({name:m.playlist.name})),c("Playlist edited");break;case"delete":if(!n)throw new Error("Current playlist invalid");const _=s.filter(v=>v.id!==n.id);await wh({collection:"playlist",id:n.id,msg:">>> api: delete playlist doc"}),await rS(_,e),u("/mysongs")}}catch(p){throw console.log({message:p}),new Error("Error when do playlist action")}finally{a(!1)}}}}function ZG({close:t}){const{theme:e}=L(),[n,r]=f.useState(""),s=f.useRef(null),{action:i,isFetching:a}=_m(),o=async c=>{c.preventDefault(),n.trim()&&(await i({variant:"add",name:n}),t())};return f.useEffect(()=>{var c;(c=s.current)==null||c.focus()},[]),l.jsxs("div",{className:"w-[400px] max-w-[calc(100vw-40px)]",children:[l.jsx(mr,{close:t,title:"Add playlist"}),l.jsxs("form",{action:"",onSubmit:o,children:[l.jsx("input",{ref:s,className:"bg-[#fff]/5 px-[20px] text-lg rounded-full outline-none  h-[35px] w-full",type:"text",placeholder:"name...",value:n,onChange:c=>r(c.target.value)}),l.jsx("p",{className:"text-right mt-[20px]",children:l.jsx(B,{type:"submit",isLoading:a,variant:"primary",className:`${e.content_bg} font-playwriteCU rounded-full ${n?"":"disable"}`,children:"Save"})})]})]})}const eK=[3,5,7,10];function tK({closeModal:t,active:e}){const{theme:n}=L(),r={button:`bg-[#fff]/5 ${n.content_hover_bg} ml-2 mt-2 px-3  py-1 rounded-[99px]`},s=a=>{e(a),t()},i=eK.map(a=>l.jsxs("button",{type:"button",onClick:()=>s(a),className:`${r.button} `,children:[a," songs"]},a));return l.jsxs("div",{className:"w-[300px] max-w-[calc(100vw-40px)]",children:[l.jsx(mr,{close:t,title:"Sleep timer"}),l.jsx("div",{children:l.jsx("div",{className:"flex flex-wrap -mt-2 -ml-2 mb-3",children:i})})]})}function nK({children:t,className:e,...n},r){const s=n.variant||"default",{theme:i}=L(),[a,o]=f.useState(s==="default"),[c,u]=f.useState(s==="default"),[d,h]=f.useState(!1),m=()=>{c&&u(!1),a||o(!0)},p=()=>{o(!0)},g=()=>{u(!1),h(!1)},x=y=>{h(y)},_=y=>{y.preventDefault(),y.stopPropagation(),!d&&(s==="default"&&n.closeModal&&n.closeModal(),s==="animation"&&g())};f.useImperativeHandle(r,()=>({toggle:m,close:g,open:p,setModalPersist:x})),f.useEffect(()=>{s!=="default"&&(c||setTimeout(()=>{o(!1)},400))},[c]),f.useEffect(()=>{s!=="default"&&a&&setTimeout(()=>{u(!0)},100)},[a]);const v={unMountedContent:"opacity-0 scale-[.95]",mountedContent:"opacity-100 scale-[1]",unMountedLayer:"opacity-0",mountedLayer:"opacity-40"};return l.jsx(l.Fragment,{children:a&&oa.createPortal(l.jsxs("div",{className:"fixed inset-0 z-[99]",children:[l.jsx("div",{onClick:_,className:`transition-opacity duration-300 absolute bg-black inset-0 z-[90]
                             ${c?v.mountedLayer:v.unMountedLayer}
                        `}),l.jsx("div",{className:`absolute duration-300 transition-[transform,opacity] z-[99] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2
                            ${c?v.mountedContent:v.unMountedContent}
                        `,children:l.jsx(Gn,{className:e||"",theme:i,children:t})})]}),document.getElementById("portals"))})}const an=f.forwardRef(nK);function rK(){const{theme:t}=L(),[e,n]=f.useState(0),[r,s]=f.useState(""),i=f.useRef(null),a=f.useRef(null),o=h=>{var m,p;s(h),(m=a.current)==null||m.close(),(p=i.current)==null||p.open()},c=()=>{var h;return(h=i.current)==null?void 0:h.close()},u=h=>{const m=h.target.scrollTop||0;n(m)},d=()=>{switch(r){case"":return l.jsx(l.Fragment,{});case"theme":return l.jsx(S1,{close:c});case"info":return l.jsx(E1,{close:c})}};return f.useEffect(()=>{const h=document.querySelector(".main-container");return h==null||h.addEventListener("scroll",u),()=>{h==null||h.removeEventListener("scroll",u)}},[]),l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:`"px-[10px] md:px-[40px] h-[60px] flex-shrink-0 flex items-center justify-between ${e?" shadow-lg":""}`,children:[l.jsxs("div",{className:"flex",children:[l.jsxs(cn,{to:"/dashboard",className:"text-xl font-[500]",children:["HD",l.jsx("span",{className:`${t.content_text} ml-[4px] uppercase`,children:"Dashboard"})]}),l.jsx(XA,{children:l.jsx(YA,{className:"ml-5"})})]}),l.jsx("div",{className:"flex",children:l.jsxs($r,{children:[l.jsx(zr,{ref:a,children:l.jsx("button",{className:`flex p-2 items-center rounded-full bg-${t.alpha} ${t.content_hover_bg}`,children:l.jsx(nu,{className:"w-6"})})}),l.jsx(Cn,{appendTo:"parent",className:"top-[calc(100%+8px)] right-0",animationClassName:"origin-top-right",children:l.jsx(TP,{openModal:o,variant:"dashboard"})})]})})]}),l.jsx(an,{ref:i,variant:"animation",children:d()})]})}function sK(){const[t,e]=f.useState(!1),n=f.useRef(null),{setErrorToast:r,setSuccessToast:s}=xt(),i=()=>{n.current&&(n.current.value="")};return{handleInputChange:async o=>{const u=o.target.files;if(u.length)try{e(!0);for(const d of u){const h=await cP(d);if(!h){r("Error when parser song"),i();return}const m=RA({by:"admin",id:eu(h.name)+"_admin",name:h.name,singer:h.singer,duration:Math.floor(h.duration),size:Math.floor(d.size/1024)}),{filePath:p,fileURL:g}=await t1({file:d,folder:"/songs/",msg:">>> api: upload song file",namePrefix:"admin"});Object.assign(m,{song_file_path:p,song_url:g}),await pt({collection:"songs",data:m,id:m.id,msg:">>> api: set song doc"})}i(),s(`${u.length} songs uploaded`)}catch(d){console.log({message:d}),i(),r()}finally{e(!1)}},inputRef:n,isFetching:t}}function AP({className:t="",...e}){const{theme:n}=L(),r=e.variant||"notify",[s,i]=f.useState(!1),a={icon:"w-6",container:`transition-[transform,opacity] text-white px-3 py-1 space-x-1 rounded-md flex items-center ${n.content_bg} border border-${n.alpha}`,text:"font-[500] text-sm",open:"opacity-[1] translate-x-0",init:"opacity-0 -translate-x-10"},o=()=>{if(e.variant==="notify")switch(e.toast.variant){case"success":return l.jsx(Vf,{className:`${a.icon}`});case"error":return l.jsx(dr,{className:`${a.icon}`})}};return f.useEffect(()=>{setTimeout(()=>{i(!0)},0)},[]),l.jsxs("div",{onClick:()=>e.variant==="notify"&&e.onClick?e.onClick(e.toast.id):void 0,className:`${a.container} ${t} ${s?a.open:a.init} `,children:[r==="notify"&&o(),l.jsxs("p",{className:a.text,children:[r==="notify"&&e.toast.desc,e.variant==="message"&&e.message]})]})}function iK(){const{handleInputChange:t,inputRef:e,isFetching:n}=sK();return l.jsx(l.Fragment,{children:oa.createPortal(l.jsxs("div",{className:"",children:[l.jsx("input",{ref:e,onChange:n?void 0:t,type:"file",multiple:!0,accept:"audio",id:"song-upload",className:"hidden"}),n&&l.jsx(AP,{className:"fixed bottom-4 right-1/2 translate-x-1/2",variant:"message",message:"...Uploading"})]}),document.getElementById("portals"))})}const RP=({time:t=6e3,variant:e})=>{const{setToasts:n,toasts:r}=xt(),[s,i]=f.useState(""),a=c=>{n(u=>u.filter(d=>d.id!=c))};f.useEffect(()=>{s&&n(c=>c.filter(u=>u.id!=s))},[s]),f.useEffect(()=>{if(!r.length)return;const c=r[r.length-1].id;setTimeout(()=>{i(c)},t)},[r]);const o={container:`toast-portal fixed z-[199] bottom-[120px] ${e==="client"?"left-[20px]":"right-[20px]"} max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]`};return l.jsx(l.Fragment,{children:oa.createPortal(l.jsx("div",{className:o.container,children:l.jsx("div",{className:"flex flex-col gap-[10px]",children:!!r.length&&r.map((c,u)=>l.jsx(AP,{onClick:a,toast:c},u))})}),document.getElementById("portals"))})};function tl({children:t}){const{theme:e}=L();return l.jsx(l.Fragment,{children:l.jsxs("div",{className:`${e.container} fixed inset-full flex ${e.text_color}`,children:[l.jsx(xB,{}),l.jsxs("div",{className:"flex flex-col flex-grow",children:[l.jsx(rK,{}),l.jsx("div",{className:"main-container flex-grow overflow-auto  px-[10px] md:px-[40px] py-[30px]",children:t})]}),l.jsx(RP,{variant:"dashboard"}),l.jsx(iK,{})]})})}const PP=[{song_ids:["diviners_exqv_admin","hope_AI6Q_admin","lostskydreamsptiifeatsaraskinner_RXI2_admin","thecalling_eRwo_admin"],name:"NCS",blurhash_encode:"",id:"test_RVt4_admin",image_url:"",by:"admin"},{id:"tet2025_a_d2_admin",song_ids:["baicatetchoemremixm4a_2GXB_admin","chuyencuboqua_Y_LJ_admin","chuyencuboquamp3_Khip_admin","doanxuancaorinnremixm4a_2pzW_admin","y2matecomlienkhucxuan2012hd720pmp3_uqok_admin","y2matecomtetdongdaykhoaxkaytranxduckvhomieboizofficialmp3cutnetmp3_LsE4_admin","thithammuaxuanremixm4a_KLRX_admin","ngayxuanlongphungsumvayvitasm4a_RMG4_admin","nangxuantlongh2om4a_Yd-x_admin","hoacomuaxuanremixshaynorinnm4a_bjRD_admin"],image_url:"",by:"admin",blurhash_encode:"",name:"Tt 2025 "}],b1=[{by:"admin",name:"Dancing With Your Ghost",song_in:"admin",singer:"Sasha Sloan",song_file_path:"songs/huudat01234560_dancingwithyourghost-sashasloan-6033576.mp3",image_file_path:"images/dancingwithyourghost_GLVy_admin_stock",id:"dancingwithyourghost_GLVy_admin",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fdancingwithyourghost_GLVy_admin_stock?alt=media&token=26792777-c331-4d21-b394-a7661e0f0a72",duration:197,song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_dancingwithyourghost-sashasloan-6033576.mp3?alt=media&token=154d79ca-c963-4f32-a21c-b58959b8f2a4",lyric_id:"",blurhash_encode:"UHB{c?S0WBRjtpodWBWB9qofWBWBxYa{oLWV",size:3326,queue_id:"UzCv"},{size:3230,singer:"Savannah, Philly K",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_diviners-savannahphillyk-4271809.mpga?alt=media&token=0a2bab43-8fe1-42fe-9991-3d798f4bd46e",song_in:"admin",lyric_id:"",duration:207,blurhash_encode:"",id:"diviners_exqv_admin",name:"Diviners",image_url:"",image_file_path:"",song_file_path:"songs/huudat01234560_diviners-savannahphillyk-4271809.mpga",by:"admin",queue_id:"WID-"},{id:"dusktilldawn_tJMx_admin",song_file_path:"songs/huudat01234560_dusktilldawn-zaynsia-5164057.mp3",duration:239,blurhash_encode:"UCHU,]8w%hE300I.4:xb}q.SMxM{9tD*tkxE",size:3749,song_in:"admin",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fdusktilldawn_tJMx_admin_stock?alt=media&token=93163b40-69d7-49d1-8f3c-7d35ecf80e63",image_file_path:"images/dusktilldawn_tJMx_admin_stock",by:"admin",singer:"Zayn, Sia",lyric_id:"dusktilldawn_tJMx_admin",name:"Dusk Till Dawn",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_dusktilldawn-zaynsia-5164057.mp3?alt=media&token=0e2d432c-a492-4338-b9be-013310ddfb70",queue_id:"ULdq"},{duration:191,blurhash_encode:"",singer:"Syn Cole",by:"admin",song_in:"admin",lyric_id:"",size:3007,image_file_path:"",id:"gizmo_VMF2_admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_gizmo-syncole-6046197.mpga?alt=media&token=eed274e0-5716-47fc-a020-872a14c2fa6d",song_file_path:"songs/huudat01234560_gizmo-syncole-6046197.mpga",name:"Gizmo",image_url:"",queue_id:"650-"},{image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fgoodtimeowlcitycarlyraejepsen49b6mpga_vxSV_admin_stock?alt=media&token=55478c10-9a5e-4b02-a0e3-d9cf53136f51",id:"goodtimeowlcitycarlyraejepsen49b6mpga_vxSV_admin",singer:"OwlCity, CarlyRaeJepsen",lyric_id:"goodtimeowlcitycarlyraejepsen49b6mpga_vxSV_admin",blurhash_encode:"UID9|+tR%MM{?^-pt7RjyDV@e.WB00IoWBof",name:"GoodTime",duration:208,size:3235,song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_goodtime-owlcity-carlyraejepsen_49b6.mpga?alt=media&token=0fd9fd15-5f09-4e95-a101-32c648827723",by:"admin",song_in:"admin",image_file_path:"images/goodtimeowlcitycarlyraejepsen49b6mpga_vxSV_admin_stock",song_file_path:"songs/huudat01234560_goodtime-owlcity-carlyraejepsen_49b6.mpga",queue_id:"DPkD"},{size:3987,duration:256,song_in:"admin",lyric_id:"heybrother_-8jG_admin",image_file_path:"images/heybrother_-8jG_admin_stock",song_file_path:"songs/huudat01234560_heybrother-avicii-3044424.mpga",by:"admin",id:"heybrother_-8jG_admin",singer:"Avicii",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fheybrother_-8jG_admin_stock?alt=media&token=bbbc1aa3-7f52-4d60-9773-2f3f7818cd01",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_heybrother-avicii-3044424.mpga?alt=media&token=dba0759f-6762-47f4-9899-d6494a6fab15",blurhash_encode:"U98#7;X7Ntbb00oyt7oz~qWBoLbG00oLjZof",name:"Hey Brother",queue_id:"ZdjT"},{song_file_path:"songs/huudat01234560_hope-tobu-3117457.mpga",duration:289,id:"hope_AI6Q_admin",singer:"Tobu",size:4506,by:"admin",image_file_path:"images/hope_AI6Q_admin_stock",lyric_id:"",song_in:"admin",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fhope_AI6Q_admin_stock?alt=media&token=9f282ea4-69c7-42f2-bba3-a232c9e7e194",name:"Hope",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_hope-tobu-3117457.mpga?alt=media&token=e1bfc470-a344-4505-b177-4ef96991b3fc",blurhash_encode:"UEBiHzyG00sVt:VWaioy00Mz^~WVIXtQnhRj",queue_id:"F7h1"},{size:3664,singer:"Kygo,Selena Gomez",lyric_id:"itaintme_8IYS_admin",by:"admin",blurhash_encode:"U26Qe$KN5i}Y0|IpxH^j0x^P-W0zn7S_OTE2",duration:220,song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_itaintme-kygoselenagomez-5817724.mpga?alt=media&token=4328f6fc-3b04-490b-a37e-00c9ce8718d8",song_in:"admin",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fitaintme_8IYS_admin_stock?alt=media&token=023ee525-6d9e-44ce-90b7-60b88c08a505",name:"It Ain't Me",id:"itaintme_8IYS_admin",song_file_path:"songs/huudat01234560_itaintme-kygoselenagomez-5817724.mpga",image_file_path:"images/itaintme_8IYS_admin_stock",queue_id:"UGap"},{singer:"Passenger",size:3892,song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_lethergo-passenger-3719556.mpga?alt=media&token=7cbaf060-cc4f-4970-9967-5876943a7ced",lyric_id:"lethergo_QrJg_admin",image_file_path:"images/lethergo_QrJg_admin_stock",song_in:"admin",duration:250,song_file_path:"songs/huudat01234560_lethergo-passenger-3719556.mpga",name:"Let Her Go",id:"lethergo_QrJg_admin",blurhash_encode:"URBND:-;xZRSt:bxS4ja07E7NItPqtn4nQbb",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Flethergo_QrJg_admin_stock?alt=media&token=11c785b1-534f-4314-882e-9599b0dec8e4",by:"admin",queue_id:"1TQ5"},{song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_letmedownslowly-alecbenjamin-6360069.mpga?alt=media&token=966e502f-6f95-4615-a961-08a95f5bab43",song_in:"admin",size:2883,blurhash_encode:"UhK,EXv|-VNG}@V@RPbcNZo#I;WqxCWBN{jY",singer:"Alec Benjamin",by:"admin",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fletmedownslowly_KFip_admin_stock?alt=media&token=f6c875c3-335b-4195-abea-e8d065c0d50b",duration:170,lyric_id:"letmedownslowly_KFip_admin",song_file_path:"songs/huudat01234560_letmedownslowly-alecbenjamin-6360069.mpga",image_file_path:"images/letmedownslowly_KFip_admin_stock",id:"letmedownslowly_KFip_admin",name:"Let Me Down Slowly",queue_id:"MDjm"},{song_in:"admin",lyric_id:"",size:3600,by:"admin",singer:"Lost Sky, ft. Sara Skinner",image_file_path:"images/lostskydreamsptiifeatsaraskinner_RXI2_admin_stock",name:"Dreams ",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Flostskydreamsptiifeatsaraskinner_RXI2_admin_stock?alt=media&token=0dc0a53a-e457-4bda-b4cd-ac71e1852145",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_p4fh9nm1y1.mpga?alt=media&token=f7a7ad35-e4d2-4387-8319-2688fabd9282",duration:216,blurhash_encode:"UHD%%%JoF^Jm|wNcE#a#J--BNtxF1ubF,Wwd",song_file_path:"songs/huudat01234560_p4fh9nm1y1.mpga",id:"lostskydreamsptiifeatsaraskinner_RXI2_admin",queue_id:"kqLe"},{song_file_path:"songs/huudat01234560_oggy_cockroaches.mp3",song_in:"admin",size:319,duration:20,by:"admin",image_file_path:"",image_url:"",id:"oggycockroachesmp3_j52d_admin",name:"oggy_cockroaches.mp3",blurhash_encode:"",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_oggy_cockroaches.mp3?alt=media&token=59636050-21f9-4cc6-a0f6-68ef59a30d48",singer:"...",lyric_id:"",queue_id:"V8UD"},{image_file_path:"images/perfectedsheeran5208784mpga_wOSF_admin_stock",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fperfectedsheeran5208784mpga_wOSF_admin_stock?alt=media&token=11e8ee8b-5c3e-426c-8301-3ac87451654a",size:4117,id:"perfectedsheeran5208784mpga_wOSF_admin",name:"Perfect",lyric_id:"perfectedsheeran5208784mpga_wOSF_admin",song_file_path:"songs/huudat01234560_perfect-edsheeran-5208784.mpga",blurhash_encode:"UY9,tJRQyZRQn-V[oJWBpKaeROkBbIWBfikB",duration:264,singer:"EdSheeran",by:"admin",song_in:"admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_perfect-edsheeran-5208784.mpga?alt=media&token=3c953332-727a-4846-aace-93a18882de2b",queue_id:"oCHL"},{singer:"One Direction",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_stealmygirl-onedirection-5434790.mpga?alt=media&token=41b6f6b9-5961-42bd-a7e3-d5764ba4dcae",by:"admin",blurhash_encode:"UOHw}rNaVYae_Nt7R+M|^*RjWBoLofofs:WB",lyric_id:"stealmygirl_nhcW_admin",song_in:"admin",duration:227,image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fstealmygirl_nhcW_admin_stock?alt=media&token=c4a6cc9b-c92c-497b-a76f-a557d1647bc7",name:"Steal My Girl",image_file_path:"images/stealmygirl_nhcW_admin_stock",id:"stealmygirl_nhcW_admin",size:3772,song_file_path:"songs/huudat01234560_stealmygirl-onedirection-5434790.mpga",queue_id:"Ay5N"},{blurhash_encode:"UkE{P7jFNwf6T#WVsTbHxcjZoLjZO=bIWWbH",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_sugar--3330663.mpga?alt=media&token=c7fe9b02-a189-4721-9ed9-ebd96618f291",singer:"Maroon 5",duration:236,id:"sugar_H5zA_admin",song_file_path:"songs/huudat01234560_sugar--3330663.mpga",lyric_id:"sugar_H5zA_admin",song_in:"admin",size:3681,name:"Sugar",by:"admin",image_file_path:"images/sugar_H5zA_admin_stock",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fsugar_H5zA_admin_stock?alt=media&token=833833b1-d54d-4c50-8f24-e290de179191",queue_id:"h4V8"},{lyric_id:"takemetoinfinityconsoultrainin_Nkiw_admin",song_file_path:"songs/huudat01234560_takemetoinfinity-consoultrainin-4723303.mpga",size:3248,id:"takemetoinfinityconsoultrainin_Nkiw_admin",song_in:"admin",by:"admin",blurhash_encode:"UBDy@My5yqsE8|OlO9og.ivVm-kpKZWYizaK",image_file_path:"images/takemetoinfinityconsoultrainin_Nkiw_admin_stock",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_takemetoinfinity-consoultrainin-4723303.mpga?alt=media&token=045f8984-8de7-4baa-9414-23386de5e0f9",name:"Take Me To Infinity",singer:"Consoul Trainin",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Ftakemetoinfinityconsoultrainin_Nkiw_admin_stock?alt=media&token=04ecc734-f3fc-4b0d-b08b-456b29fd4c55",duration:208,queue_id:"HJfa"},{id:"thecalling_eRwo_admin",by:"admin",singer:"TheFatRat, Laura Brehm",duration:234,image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fthecalling_eRwo_admin_stock?alt=media&token=97909f54-8b4a-422a-84e9-4a1724ba0bd8",image_file_path:"images/thecalling_eRwo_admin_stock",song_in:"admin",name:"The Calling",size:3651,blurhash_encode:"UKE3b*WrDiMx00n#t7t7~WWCbbo#OHjFRPRj",lyric_id:"",song_file_path:"songs/huudat01234560_thecalling-thefatratlaurabrehm-4391253.mpga",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_thecalling-thefatratlaurabrehm-4391253.mpga?alt=media&token=779e3253-e60d-46d3-9a3f-f924752178f4",queue_id:"no2I"},{duration:204,lyric_id:"timber_NNe3_admin",song_in:"admin",image_file_path:"images/timber_NNe3_admin_stock",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Ftimber_NNe3_admin_stock?alt=media&token=dd80433d-dd6c-4cab-999b-7a66ac64d907",song_file_path:"songs/huudat01234560_timber-pitbullfeatkeha-6629607.mpga",name:"Timber",by:"admin",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_timber-pitbullfeatkeha-6629607.mpga?alt=media&token=09e07118-f611-41d1-8ad1-d97a353dd2a8",blurhash_encode:"ULNTg+XT00D*~WE2xat8D*WBIAM|~XxuIUax",size:3265,singer:"Pitbull feat. Ke",id:"timber_NNe3_admin",queue_id:"98BR"},{id:"waitingforlove_jqak_admin",image_file_path:"images/waitingforlove_jqak_admin_stock",lyric_id:"waitingforlove_jqak_admin",name:"Waiting for Love",blurhash_encode:"U5EyGK0000pM00=}?]9a]:pI?bRO9EMKIT-;",song_file_path:"songs/huudat01234560_waitingforlove-avicii-5008939.mp3",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fwaitingforlove_jqak_admin_stock?alt=media&token=f6f54aba-645d-40bd-968c-ba4c7b82d010",singer:"Avicii",duration:228,by:"admin",size:3576,song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_waitingforlove-avicii-5008939.mp3?alt=media&token=4135c2ce-f78d-43fe-a97a-4c4705cd62d6",song_in:"admin",queue_id:"tcSp"},{image_file_path:"images/y2matecomlienkhucxuan2012hd720pmp3_uqok_admin_stock",song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_y2mate.com-li%C3%AAnkh%C3%BAcxu%C3%A2n2012hd720p.mp3?alt=media&token=6bade7c7-4be9-4b7c-b5b4-f36bc7e5a2a4",by:"admin",lyric_id:"",singer:"...",size:7829,song_file_path:"songs/huudat01234560_y2mate.com-linkhcxun2012hd720p.mp3",image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fy2matecomlienkhucxuan2012hd720pmp3_uqok_admin_stock?alt=media&token=c7869d1b-cd2a-407a-a2e6-988881f0362a",id:"y2matecomlienkhucxuan2012hd720pmp3_uqok_admin",song_in:"admin",name:"Lin Khc Xun 2012",duration:501,blurhash_encode:"USRKy:SK%|R*}@r@MxoeY$kWmnafBUR*oybu",queue_id:"5mfY"},{by:"admin",song_file_path:"songs/huudat01234560_youi-onedirection-8438574.mpga",size:3954,song_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/songs%2Fhuudat01234560_youi-onedirection-8438574.mpga?alt=media&token=707a3005-6630-4f62-a8ed-96cc0895159f",id:"youi_DhYr_admin",blurhash_encode:"UeI;|=M{JPs-?wn%a1WB%hsTs:bHMyt7R*ni",duration:238,image_url:"https://firebasestorage.googleapis.com/v0/b/zingmp3-clone-61799.appspot.com/o/images%2Fyoui_DhYr_admin_stock?alt=media&token=ae005e9b-21d4-4c40-839d-a75fe81f6504",name:"You & I",singer:"One Direction",song_in:"admin",lyric_id:"youi_DhYr_admin",image_file_path:"images/youi_DhYr_admin_stock",queue_id:"IXeV"}],Gp=No(ys,"songs"),XS=No(ys,"playlist"),Dh=async t=>{let e;switch(t.variant){case"user":e=ts(Gp,Zt("by","==",t.email),ld(10));break;case"home":e=ts(Gp,Zt("by","==","admin"),ld(10));break;case"dashboard":e=ts(Gp,Zt("by","==","admin"),ld(20));break}const n=await jo(e);if(n.docs)return n.docs.map(s=>({...s.data(),song_in:"",queue_id:ma(4)}))},Oh=async t=>{let e;switch(t.variant){case"admin":e=ts(XS,Zt("by","==","admin"),ld(20));break;case"user":e=ts(XS,Zt("by","==",t.email));break}const n=await jo(e);if(n.docs)return n.docs.map(s=>s.data())},aK=async t=>{const e={userSongs:[],userPlaylists:[]},n=await Dh({variant:"user",email:t});n!=null&&n.length&&(e.userSongs=n);const r=await Oh({variant:"user",email:t});return r!=null&&r.length&&(e.userPlaylists=r),e},oK=async t=>{const e=No(ys,"songs"),n=ts(e,Zt("name",">=",t),Zt("name","<=",t+""),Zt("by","==","admin")),r=await jo(n);if(r.docs)return r.docs.map(i=>i.data())};function NP(){const{setSysSongPlaylist:t,setSongs:e,setPlaylists:n}=At(),[r,s]=f.useState(!0);return{isFetching:r,getSongAndPlaylist:async a=>{try{if(Sc.isDev){await tu(Sc.loadingDuration),t({playlists:PP,songs:b1});return}switch(a.variant){case"home":const o=await Dh({variant:"home"}),c=await Oh({variant:"admin"});t({playlists:c||[],songs:o||[]});break;case"user":const{userPlaylists:u,userSongs:d}=await aK(a.email);e(d),n(u);break;case"dashboard":{const h=await Dh({variant:"dashboard"}),m=await Oh({variant:"admin"});e(h||[]),n(m||[]);break}}}catch(o){console.log({message:o})}finally{s(!1)}}}}function k1(){const t={container:"py-[30px] flex flex-col md:flex-row md:justify-between items-start",icon:"w-6 hover:scale-[1.1] transition linear ",copyRightText:"text-sm"};return l.jsxs("div",{className:`${t.container}`,children:[l.jsxs("p",{className:t.copyRightText,children:["Make with  by d4t06 ",l.jsx("br",{}),"  All rights no reserve \\_()_/"]}),l.jsxs("div",{className:"flex items-center mt-[20px] md:mt-0 space-x-[10px]",children:[l.jsx("a",{href:"mailto:datnh0708@gmail.com",children:l.jsx("svg",{className:t.icon,fill:"currentColor",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:l.jsxs("g",{children:[l.jsx("path",{d:"M16.601 14.648v4.105h9.813c-0.162 2.008-0.982 3.798-2.243 5.18l0.006-0.007c-1.825 1.86-4.364 3.012-7.172 3.012-0.142 0-0.283-0.003-0.424-0.009l0.020 0.001c-5.946-0.003-10.765-4.823-10.765-10.77 0-0.051 0-0.102 0.001-0.152l-0 0.008c-0.001-0.043-0.001-0.094-0.001-0.145 0-5.946 4.819-10.767 10.765-10.77h0c0.040-0.001 0.087-0.001 0.135-0.001 2.822 0 5.383 1.121 7.262 2.941l-0.003-0.003 2.888-2.888c-2.568-2.578-6.121-4.174-10.047-4.174-0.082 0-0.164 0.001-0.246 0.002l0.012-0c-0.002 0-0.005 0-0.008 0-8.337 0-15.11 6.699-15.228 15.009l-0 0.011c0.118 8.32 6.891 15.020 15.228 15.020 0.003 0 0.006 0 0.009 0h-0c0.169 0.007 0.367 0.012 0.566 0.012 3.892 0 7.407-1.616 9.91-4.213l0.004-0.004c2.208-2.408 3.561-5.63 3.561-9.169 0-0.15-0.002-0.3-0.007-0.449l0.001 0.022c0.001-0.054 0.001-0.119 0.001-0.183 0-0.844-0.079-1.669-0.231-2.469l0.013 0.082z"})," "]})})}),l.jsx("a",{href:"https://github.com/d4t06",target:"_blank",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,fill:"currentColor",viewBox:"0 0 496 512",children:l.jsx("path",{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})})}),l.jsx("a",{href:"https://www.linkedin.com/in/dat-nguyen-huu-9371a926a",target:"_blank",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.icon,viewBox:"0 0 448 512",fill:"currentColor",children:l.jsx("path",{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"})})})]})]})}function lK(){const{isOnMobile:t}=L(),e=f.useRef(!1),{isFetching:n,getSongAndPlaylist:r}=NP();return f.useEffect(()=>{e.current||(e.current=!0,r({variant:"home"}))},[]),l.jsxs(l.Fragment,{children:[t&&l.jsx(BG,{}),l.jsxs("div",{className:"mb-[30px]",children:[l.jsx("h3",{className:"text-xl leading-[2.2] font-playwriteCU mb-3",children:"Popular"}),l.jsx(_1,{loading:n,variant:"sys"})]}),l.jsx(XG,{loading:n}),t&&l.jsx("div",{className:"mt-[30px]",children:l.jsx(UG,{})}),l.jsx(k1,{})]})}function cK({playlist:t,close:e}){const{theme:n}=L(),r=f.useRef(null),[s,i]=f.useState(""),[a,o]=f.useState(!1),{action:c,isFetching:u}=_m(),d=async m=>{m.preventDefault(),a&&(await c({variant:"edit",playlist:{name:s}}),e())},h={editContainer:"w-[400px] max-w-[calc(90vw-40px)]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full"};return f.useEffect(()=>{const m=r.current;m==null||m.focus(),i(t.name)},[]),f.useEffect(()=>{s.trim()&&s.trim()!==t.name?o(!0):o(!1)},[s]),l.jsxs(l.Fragment,{children:[l.jsx(mr,{close:e,title:"Edit playlist"}),l.jsxs("form",{action:"",onSubmit:d,className:`${h.editContainer} ${u?"disable":""}`,children:[l.jsx("input",{ref:r,value:s,onChange:m=>i(m.target.value),type:"text",className:`${h.input} bg-white/5 text-white`}),l.jsx(B,{type:"submit",variant:"primary",isLoading:u,className:`${n.content_bg} rounded-full self-end mt-[15px] ${a?"":"disable"}`,children:"Save"})]})]})}function Kp({onClick:t,children:e,text:n}){const{theme:r}=L();return l.jsxs(B,{onClick:t,size:"clear",className:`rounded-full px-5 py-1 ${r.content_bg}`,children:[e,l.jsx("span",{className:"font-playwriteCU leading-[2.2]",children:n})]})}function YS(){const t=rn(),{currentPlaylist:e,playlistSongs:n}=Z(fr),{currentSongData:r}=Z(ct),{playStatus:s}=Z(pn),i=tv(),{handleSetSong:a}=Lo({variant:"playlist"}),o=()=>{if(r!=null&&r.song.song_in.includes(i.name))return;const u=n[0];a(u.queue_id,n)},c=()=>{switch(s){case"playing":return t(st({triggerPlayStatus:"paused"}));case"paused":return t(st({triggerPlayStatus:"playing"}))}};if(!e)return l.jsx(l.Fragment,{});if(r!=null&&r.song.song_in.includes(e.id))switch(s){case"playing":case"waiting":return l.jsx(Kp,{text:"Pause",onClick:c,children:l.jsx($x,{className:"w-7 mr-1"})});case"loading":case"paused":return l.jsx(Kp,{text:"Continue Play",onClick:c,children:l.jsx(hh,{className:"w-7 mr-1"})})}return l.jsx(Kp,{text:"Play",onClick:o,children:l.jsx(hh,{className:"w-7 mr-1"})})}function uK(){const{theme:t}=L(),{currentPlaylist:e}=Z(fr),[n,r]=f.useState(""),[s,i]=f.useState(!1),a=f.useRef(null),o=f.useRef(null),{action:c,isFetching:u}=_m(),d=p=>{var g,x;r(p),(g=o.current)==null||g.close(),(x=a.current)==null||x.open()},h=()=>{var p;return(p=a.current)==null?void 0:p.close()},m=()=>{if(!e)return l.jsx(l.Fragment,{});switch(n){case"":return l.jsx(l.Fragment,{});case"edit":return l.jsx(cK,{close:h,playlist:e});case"delete":return l.jsx(ui,{loading:u,label:`Delete playist ' ${e.name} ' ?`,theme:t,callback:()=>c({variant:"delete"}),close:h})}};return l.jsxs(l.Fragment,{children:[l.jsxs($r,{children:[l.jsx(zr,{setIsOpenParent:i,ref:o,children:l.jsx(B,{size:"clear",className:`rounded-full p-2.5 ${s?t.content_bg:""} ${t.content_hover_bg} bg-${t.alpha}`,children:l.jsx(nu,{className:"w-6"})})}),l.jsx(Cn,{className:"left-[calc(100%)]",animationClassName:"origin-top-left",appendTo:"parent",children:l.jsx(iG,{children:l.jsxs(yi,{children:[l.jsxs("button",{onClick:()=>d("edit"),children:[l.jsx(KA,{className:"w-5"}),l.jsx("span",{children:"Edit"})]}),l.jsxs("button",{onClick:()=>d("delete"),children:[l.jsx(oi,{className:"w-5"}),l.jsx("span",{children:"Delete"})]})]})})})]}),l.jsx(an,{variant:"animation",ref:a,children:m()})]})}function dK({variant:t}){switch(t){case"sys-playlist":return l.jsx(YS,{});case"my-playlist":return l.jsxs(l.Fragment,{children:[l.jsx(YS,{}),l.jsx(uK,{})]})}}function Em(){const t=rn(),{playlists:e,setPlaylists:n}=At(),{currentPlaylist:r,playlistSongs:s}=Z(fr),[i,a]=f.useState(!1),o=Hn(),{setErrorToast:c,setSuccessToast:u}=xt();return{isFetching:i,actions:async h=>{try{switch(h.variant){case"add-playlist":{if(!h.name)throw new Error("playlist name invalid");a(!0);const m=eu(h.name)+"_admin",p=Ax({id:m,by:"admin",name:h.name}),g=[...e,p];await pt({collection:"playlist",data:p,id:m,msg:">>> api: set playlist doc"}),n(g),u("Playlist created");break}case"delete-playlist":{if(!r)throw new Error("currentPlaylist not found");a(!0),await wh({collection:"playlist",id:r.id,msg:">>> api: delete playlist doc"}),a(!1),o("/dashboard/playlists");break}case"add-songs":{if(!r)throw new Error("currentPlaylist not found");a(!0);const m=[...s.map(p=>p.id),...h.songs.map(p=>p.id)];await pt({collection:"playlist",id:r==null?void 0:r.id,data:{song_ids:m},msg:">>> api: update playlist doc"}),t(IV(h.songs)),u("Songs added");break}case"edit-playlist":{if(!r)throw new Error("currentPlaylist not found");a(!0),await pt({collection:"playlist",data:{name:h.name},id:r.id,msg:">>> api: set playlist doc"}),t(z0({name:h.name})),u("Playlist edited");break}case"remove-song":{if(!r)throw new Error("currentPlaylist not found");a(!0);const m=s.filter(p=>p.id!==h.song.id);await pt({collection:"playlist",id:r.id,data:{song_ids:m.map(p=>p.id)},msg:">>> api: update playlist doc"}),t($R(m)),u(`'${h.song.name}' removed`);break}case"update-image":{if(!r)throw new Error("currentPlaylist not found");a(!0);const m={image_url:h.song.image_url,blurhash_encode:h.song.blurhash_encode};await pt({collection:"playlist",data:m,id:r.id,msg:">>> api: set playlist doc"}),t(z0(m)),u("Playlist edited");break}}}catch(m){console.log({message:m}),c("")}finally{a(!1)}},currentPlaylist:r}}function hK(){const[t,e]=f.useState(""),[n,r]=f.useState(!1),[s,i]=f.useState([]),{selectedSongs:a,selectSong:o}=Oo(),{actions:c,isFetching:u}=Em(),{setErrorToast:d}=xt();return{value:t,setValue:e,isFetching:n,handleSubmit:async p=>{try{p.preventDefault(),r(!0);const g=await oK(t);g&&i(g)}catch(g){console.log({message:g}),d()}finally{r(!1)}},handleAddSongsToPlaylist:async()=>{a.length&&await c({variant:"add-songs",songs:a})},songs:s,selectedSongs:a,selectSong:o,actionFetching:u}}function fK({closeModal:t}){const{theme:e}=L(),{value:n,setValue:r,isFetching:s,songs:i,handleSubmit:a,selectedSongs:o,handleAddSongsToPlaylist:c,selectSong:u,actionFetching:d}=hK(),h=async()=>{await c(),t()},m=f.useMemo(()=>{const g=o.map(x=>x.id);return i.filter(x=>!g.includes(x.id))},[i,o]),p={col:"w-1/2 flex flex-col px-2",formGroup:" flex bg-white/10 rounded-full overflow-hidden",input:"outline-none bg-transparent px-3 py-1 h-full",box:"rounded-lg bg-white/10 overflow-hidden p-2",songItem:"rounded-md w-full p-1 text-left"};return l.jsxs("div",{className:"w-[700px] max-w-[85vw] h-[80vh] flex flex-col",children:[l.jsx(mr,{close:t,title:"Add song to playist"}),l.jsxs("div",{className:"flex-grow flex flex-col md:flex-row md:-mx-3 overflow-hidden",children:[l.jsxs("div",{className:`${p.col}`,children:[l.jsxs("form",{action:"#",onSubmit:a,className:"flex w-full",children:[l.jsxs("div",{className:`${p.formGroup}`,children:[l.jsx("input",{value:n,placeholder:"...",onChange:g=>r(g.target.value.trim()),className:`${p.input}`,type:"text"}),l.jsx("button",{type:"button",onClick:()=>r(""),className:`pr-2 ${n?"opacity-[1] cursor-pointer":"opacity-0 cursor-none"}`,children:l.jsx(dr,{className:"w-5"})})]}),l.jsx(B,{type:"submit",className:`${e.content_bg} ml-3 w-[32px] justify-center h-full rounded-full `,size:"clear",children:l.jsx(Lx,{className:"w-5"})})]}),l.jsx("div",{className:`${p.box} flex-grow mt-3`,children:l.jsx("div",{className:"h-full overflow-auto space-y-2",children:s?l.jsx(mn,{className:"w-5 animate-spin"}):m.map((g,x)=>l.jsxs("button",{onClick:()=>u(g),className:`${p.songItem} bg-${e.alpha} ${e.content_hover_bg}`,children:[l.jsx("h5",{className:"",children:g.name}),l.jsx("p",{className:" text-sm",children:g.singer})]},x))})})]}),l.jsxs("div",{className:p.col,children:[l.jsx("div",{className:"leading-[32px] font-[500]",children:"Selected:"}),l.jsx("div",{className:`${p.box} flex-grow mt-3 space-y-2`,children:o.map((g,x)=>l.jsxs("button",{onClick:()=>u(g),className:`${p.songItem} ${e.content_bg} hover:bg-${e.alpha}`,children:[l.jsx("h5",{className:"",children:g.name}),l.jsx("p",{className:" text-sm",children:g.singer})]},x))})]})]}),l.jsx("p",{className:"text-right mt-3",children:l.jsx(B,{isLoading:d,onClick:h,className:`${e.content_bg} rounded-full`,color:"",children:"Add"})})]})}function mK(){const{theme:t}=L(),[e,n]=f.useState(""),r=f.useRef(null),{actions:s,currentPlaylist:i,isFetching:a}=Em(),o=m=>{var p,g;n(m),e==="add-song-to-playlist"&&((p=r.current)==null||p.setModalPersist(!0)),(g=r.current)==null||g.open()},c=()=>{var m;return(m=r.current)==null?void 0:m.close()},u=async m=>{switch(m.variant){case"delete":await s({variant:"delete-playlist"});break;case"edit":await s({variant:"edit-playlist",name:m.value});break}c()},d=()=>{switch(e){case"":return l.jsx(l.Fragment,{});case"edit":return l.jsx(l.Fragment,{children:i&&l.jsx(y1,{cbWhenSubmit:m=>u({variant:"edit",value:m}),initValue:i.name,title:"Edit playlist",variant:"input",loading:a,closeModal:c})});case"delete":return l.jsx(ui,{loading:a,label:"Delete playlist ?",theme:t,callback:()=>u({variant:"delete"}),close:c});case"add-song-to-playlist":return l.jsx(gi,{children:l.jsx(fK,{closeModal:c})})}},h={button:"rounded-full p-2.5"};return l.jsxs(l.Fragment,{children:[l.jsx(B,{onClick:()=>o("edit"),size:"clear",className:`${h.button} bg-${t.alpha}`,children:l.jsx(KA,{className:"w-5"})}),l.jsx(B,{onClick:()=>o("delete"),size:"clear",className:`${h.button} bg-${t.alpha}`,children:l.jsx(oi,{className:"w-5"})}),l.jsxs(B,{onClick:()=>o("add-song-to-playlist"),size:"clear",className:`${h.button} space-x-1 ${t.content_bg}`,children:[l.jsx(yB,{className:"w-5"}),l.jsx("span",{children:"Add song"})]}),l.jsx(an,{variant:"animation",ref:r,children:d()})]})}function sy({loading:t,...e}){const{currentPlaylist:n}=Z(fr),{currentSongData:r}=Z(ct),{playStatus:s}=Z(pn),i=(s==="playing"||s==="waiting")&&(r==null?void 0:r.song.song_in)===`playlist_${n==null?void 0:n.id}`,a=l.jsx(l.Fragment,{children:l.jsx(Yt,{className:"h-[38px] mb-[6px] w-[200px]"})}),o=()=>t?a:l.jsx(l.Fragment,{children:l.jsx("div",{className:"text-xl leading-[2.2] font-playwriteCU",children:n==null?void 0:n.name})}),c=()=>{switch(e.variant){case"my-playlist":case"sys-playlist":return l.jsx(dK,{variant:e.variant});case"dashboard-playlist":return l.jsx(mK,{})}},u={container:"flex flex-col md:flex-row lg:flex-col",playlistInfoContainer:"flex flex-col md:justify-between md:ml-3 lg:ml-0 mt-3 md:mt-0 lg:mt-3",infoTop:"flex justify-center items-center space-y-1 md:flex-col md:items-start lg:items-center",ctaContainer:"flex justify-center space-x-3 md:justify-start  lg:justify-center mt-3 md:mt-0 lg:mt-3"};return l.jsx(l.Fragment,{children:l.jsxs("div",{className:u.container,children:[l.jsx("div",{className:"w-full flex-shrink-0 px-10 md:w-1/4 md:px-0 lg:w-full",children:t?l.jsx(Yt,{className:"pt-[100%] rounded-[8px]"}):n&&l.jsx(kP,{data:n,active:i,inDetail:!0})}),l.jsxs("div",{className:u.playlistInfoContainer,children:[l.jsx("div",{className:u.infoTop,children:o()}),l.jsx("div",{className:`${u.ctaContainer} `,children:!t&&c()})]})]})})}function nl({children:t,...e}){const{isSelectAll:n,resetSelect:r}=Oo();switch(e.variant){case"home":case"dashboard-songs":return l.jsxs(l.Fragment,{children:[t,l.jsx(B,{onClick:r,className:"px-[5px] flex-shrink-0",children:l.jsx(dr,{className:"w-[20px]"})})]});case"my-playlist":case"my-songs":case"dashboard-playlist":case"sys-playlist":return l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:e.selectAll,className:"ml-[10px]",children:n?l.jsx(ty,{className:"w-[20px]"}):l.jsx(fh,{className:"w-[20px]"})}),t,l.jsx(B,{onClick:r,className:"px-[5px] flex-shrink-0",children:l.jsx(dr,{className:"w-[20px]"})})]})}}function pK({modalRef:t}){const e=rn(),{user:n}=qn(),{selectedSongs:r,resetSelect:s}=Oo(),{songs:i,setSongs:a}=At(),[o,c]=f.useState(!1),{setErrorToast:u,setSuccessToast:d}=xt(),{removeSelectSongs:h}=_m();return{deleteSelectedSong:async()=>{var x;try{if(!n)return;c(!0);const _=r.map(y=>y.id);for(let y of r)await n1(y);const v=i.filter(y=>!_.includes(y.id));a(v),d(`${r.length} songs deleted`)}catch(_){console.log({message:_}),u()}finally{s(),c(!1),(x=t.current)==null||x.close()}},removeSelectedSongFromPlaylist:async()=>{var x;await h(r,c),(x=t.current)==null||x.close(),s()},addSongsToQueue:()=>{e(OR({songs:r})),d("songs added to queue"),s()},isFetching:o}}function jP({children:t,...e}){const{theme:n}=L(),{isChecked:r,selectedSongs:s,selectAllSong:i,resetSelect:a}=Oo(),{playlistSongs:o}=Z(fr),{songs:c}=At(),[u,d]=f.useState(""),h=f.useRef(null),{isFetching:m,addSongsToQueue:p,deleteSelectedSong:g,removeSelectedSongFromPlaylist:x}=pK({modalRef:h}),_=()=>{var k;(k=h.current)==null||k.close()},v=k=>{var T;d(k),(T=h.current)==null||T.open()},y=()=>{s.length<c.length?i(c):a()},w=()=>{s.length<o.length?i(o):a()},E={title:"text-xl leading-[2.2] font-playwriteCU",outlineButton:`border-${n.alpha} ${n.side_bar_bg} space-x-1 text-sm`,icon:"w-5 mr-1"},S=f.useMemo(()=>{if(u)switch(u){case"delete-selected-songs":return l.jsx(ui,{loading:m,label:`Delete ${s.length} songs ?`,theme:n,callback:g,close:_});case"remove-selects-songs":return l.jsx(ui,{loading:m,label:`Remove ${s.length} songs ?`,theme:n,callback:x,close:_})}},[u,m]),b=f.useMemo(()=>{switch(e.variant){case"home":return l.jsxs(l.Fragment,{children:[!r&&l.jsx("h3",{className:`${E.title} !mr-[14px]`,children:"Songs"}),r&&l.jsxs(nl,{variant:e.variant,children:[l.jsx("p",{className:"font-playwriteCU mr-1",children:s.length}),l.jsxs(B,{onClick:p,variant:"outline",size:"small",className:E.outlineButton,children:[l.jsx(zn,{className:E.icon}),l.jsx("span",{className:"",children:"Add to queue"})]})]})]});case"dashboard-songs":return l.jsxs(l.Fragment,{children:[!r&&t,r&&l.jsxs(nl,{variant:e.variant,children:[l.jsx("div",{className:"font-playwriteCU",children:s.length}),l.jsxs(B,{variant:"outline",size:"small",onClick:()=>v("delete-selected-songs"),className:E.outlineButton,children:[l.jsx(oi,{className:E.icon}),l.jsx("span",{className:"hidden sm:block",children:"Delete"})]})]})]});case"my-songs":return l.jsxs(l.Fragment,{children:[!r&&t,r&&l.jsxs(nl,{selectAll:y,variant:e.variant,children:[l.jsx("div",{className:"font-playwriteCU !mr-[14px]",children:s.length}),l.jsxs(B,{variant:"outline",size:"small",onClick:p,className:E.outlineButton,children:[l.jsx(zn,{className:E.icon}),l.jsx("span",{className:"",children:"Add to queue"})]}),l.jsxs(B,{variant:"outline",size:"small",onClick:()=>v("delete-selected-songs"),className:E.outlineButton,children:[l.jsx(oi,{className:E.icon}),l.jsx("span",{className:"hidden sm:block",children:"Delete"})]})]})]});case"dashboard-playlist":case"my-playlist":return l.jsxs(l.Fragment,{children:[!r&&t,r&&l.jsxs(nl,{selectAll:w,variant:e.variant,children:[l.jsx("p",{className:"font-playwriteCU !mr-[14px]",children:s.length}),e.variant==="my-playlist"&&l.jsxs(B,{variant:"outline",size:"small",onClick:p,className:E.outlineButton,children:[l.jsx(zn,{className:E.icon}),"Add to songs queue"]}),l.jsxs(B,{variant:"outline",size:"small",onClick:()=>v("remove-selects-songs"),className:E.outlineButton,children:[l.jsx(GA,{className:E.icon}),"Remove"]})]})]});case"sys-playlist":return l.jsxs(l.Fragment,{children:[!r&&l.jsx("div",{className:`${E.title} !mr-[14px]`,children:"Songs"}),r&&l.jsxs(nl,{selectAll:w,variant:e.variant,children:[l.jsx("p",{className:"font-[500]",children:s.length}),l.jsxs(B,{variant:"outline",size:"small",onClick:p,className:E.outlineButton,children:[l.jsx(zn,{className:E.icon}),"Add to songs queue"]})]})]})}},[r,s,e]);return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex items-center space-x-2 h-[44px] mb-3",children:b}),l.jsx(an,{ref:h,variant:"animation",children:S})]})}const gK=l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:l.jsx(Yt,{className:"h-[20px] w-[90px]"})}),qf]});function JS({variant:t,loading:e}){const{playlistSongs:n}=Z(fr),{handleSetSong:r}=Lo({variant:"playlist"}),s=i=>{r(i,n)};return e?gK:l.jsx(l.Fragment,{children:l.jsxs(gi,{children:[l.jsx(jP,{variant:t,children:l.jsxs("p",{className:"font-[500] opacity-[.5]",children:[n.length," Songs"]})}),l.jsx(sa,{variant:t,songs:n,handleSetSong:s})]})})}function DP(){const t=rn(),e=tv(),{setErrorToast:n}=xt(),r=f.useRef(!1),[s,i]=f.useState(!0),a=async()=>{if(!e.id)throw new Error("invalid playlist id");const u=await xc({collection:"playlist",id:e.id,msg:">>> api get playlist"});if(u.exists())return u.data()},o=async u=>{if(!u.song_ids.length)return[];const d=No(ys,"songs"),h=ts(d,Zt("id","in",u.song_ids)),m=await jo(h);return m.docs.length?m.docs.map(g=>({...g.data(),song_in:`playlist_${u.id}`,queue_id:ma(4)})):(n(),[])},c=async()=>{try{if(!e.id)throw new Error("invalid playlist id");i(!0);const u=await a();if(!u)throw new Error("");const d=await o(u);t(CV({playlist:u,songs:d}))}catch(u){console.log({message:u}),n()}finally{i(!1)}};return f.useEffect(()=>(r.current||(r.current=!0,c()),()=>{t(AV())}),[]),{isFetching:s}}function yK(){const{currentPlaylist:t}=Z(fr),e=f.useMemo(()=>(t==null?void 0:t.by)==="admin",[t]);PV();const{isFetching:n}=DP(),r=()=>e?l.jsx(sy,{loading:n,variant:"sys-playlist"}):l.jsx(sy,{loading:n,variant:"my-playlist"}),s=()=>e?l.jsx(JS,{loading:n,variant:"sys-playlist"}):l.jsx(JS,{loading:n,variant:"my-playlist"});return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"lg:flex lg:-mx-3",children:[l.jsx("div",{className:"w-full lg:w-1/4 lg:px-3",children:r()}),l.jsx("div",{className:"w-full lg:w-3/4 lg:px-3",children:l.jsx("div",{className:"mt-[30px] lg:mt-0",children:s()})})]}),l.jsx(k1,{})]})}function vK({initialLoading:t}){const{songs:e}=At(),{tempSongs:n}=Rx(),{handleSetSong:r}=Lo({variant:"songs"}),s=a=>{r(a,e)},i=f.useMemo(()=>t?0:n.length+e.length,[n,e,t]);return l.jsxs(gi,{children:[l.jsx(jP,{variant:"my-songs",children:t?l.jsx(l.Fragment,{children:l.jsx("div",{className:"h-[30px] mb-[10px] flex items-center",children:l.jsx(Yt,{className:"h-[20px] w-[90px]"})})}):l.jsxs("p",{className:"font-[500] opacity-[.5]",children:[i," Songs"]})}),l.jsxs("div",{className:"min-h-[50vh]",children:[t&&qf,!t&&l.jsx(l.Fragment,{children:!!i&&l.jsxs(l.Fragment,{children:[l.jsx(sa,{variant:"my-songs",handleSetSong:s,songs:e,tempSongs:n}),l.jsx(sa,{songs:n,variant:"uploading"})]})})]})]})}function xK(){const{theme:t}=L(),{loading:e,user:n}=qn(),{status:r}=Rx(),s=Hn(),{isFetching:i,getSongAndPlaylist:a}=NP();return f.useEffect(()=>{e||(n?a({variant:"user",email:n.email}):s(Mt.Home))},[e]),l.jsxs(l.Fragment,{children:[l.jsx("h3",{className:"font-playwriteCU leading-[2.2] mb-3 text-xl",children:"Playlist"}),l.jsx(_1,{loading:i,variant:"my-song"}),l.jsx("div",{className:"pt-[30px]"}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"font-playwriteCU leading-[2.2] mb-3 text-xl",children:"Songs"}),l.jsxs("label",{className:`${t.content_bg} ${r==="uploading"||i?"disable":""} items-center hover:opacity-60 py-1 rounded-full flex px-4 cursor-pointer`,htmlFor:"song_upload",children:[l.jsx(jx,{className:"w-7 mr-1"}),l.jsx("span",{className:" font-playwriteCU leading-[2.2]",children:"Upload"})]})]}),l.jsx(vK,{initialLoading:i}),l.jsx(k1,{})]})}function wK(){return l.jsx(wP,{children:l.jsx("div",{className:"fixed left-[10px] md:left-0 top-0 right-[10px] md:right-0 bottom-0 md:relative md:h-full",children:l.jsx(EP,{})})})}function _K(){const{theme:t}=L();return l.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t.container} ${t.text_color}`,children:[l.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.text_color}`,children:"Page Not found"}),l.jsx(cn,{to:"/",className:`${t.content_bg} font-bold  text-[#fff] mt-[20px] rounded-full flex px-[20px] py-[4px] cursor-pointer`,children:"Go home"})," "]})}function EK(){const{theme:t}=L(),e=Hn(),n=async()=>{await sT(Ji),e("/login")};return l.jsxs("div",{className:`${t.container} flex flex-col justify-center items-center min-h-screen`,children:[l.jsx("h1",{className:`text-[30px] font-bold border p-[10px] ${t.text_color}`,children:"Unauthorized"}),l.jsx(B,{onClick:n,variant:"primary",className:`${t.content_bg} font-bold text-[20px]  text-[#fff] rounded-full mt-[20px]`,children:"Exit"})]})}function SK(){var o,c;const[t]=Ff(Ji),{logIn:e}=Lf(),{theme:n}=L(),r=Hn(),s=hr(),i=((c=(o=s==null?void 0:s.state)==null?void 0:o.from)==null?void 0:c.pathname)||"/dashboard",a=async()=>{try{await e()}catch(u){console.log(u)}};return f.useEffect(()=>{if(t!=null&&t.email){r(i,{replace:!0});return}console.log("run effect")},[t]),l.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${n.container} ${n.text_color}`,children:[l.jsx(B,{onClick:a,variant:"default",className:`${n.content_bg} font-bold text-[#fff] text-[30px] rounded-full`,children:"Login with google"})," "]})}function bK(){return l.jsx(l.Fragment,{children:l.jsx("div",{className:"",children:l.jsx("p",{children:"This is dashboard page"})})})}function T1({colList:t,children:e,className:n=""}){const r={table:"w-full"};return l.jsxs("table",{className:`${r.table} ${n}`,children:[l.jsx("thead",{children:l.jsx("tr",{children:t.map((s,i)=>l.jsx("th",{children:s},i))})}),l.jsx("tbody",{children:e})]})}function kK(){const{setSongs:t,songs:e}=At(),[n,r]=f.useState(!1),{setSuccessToast:s,setErrorToast:i}=xt();return{actions:async o=>{try{switch(r(!0),o.variant){case"delete":{const c=e.filter(u=>u.id!==o.song.id);await n1(o.song),t(c),s(`'${o.song.name}' deleted`);break}}}catch(c){console.log({message:c}),i()}finally{r(!1)}},isFetching:n}}function OP({song:t}){return l.jsx("div",{className:"px-2 mb-3",children:l.jsxs("div",{className:"p-1.5 bg-[#fff]/5 rounded-md flex",children:[t.image_url&&l.jsx("div",{className:"w-[50px] h-[50px] flex-shrink-0",children:l.jsx("img",{src:t.image_url,className:"object-cover object-center w-full rounded",alt:""})}),l.jsxs("div",{className:"ml-1 text-sm",children:[l.jsx("h5",{className:"line-clamp-1 font-[500]",children:t.name}),l.jsx("p",{className:"opacity-70 line-clamp-1",children:t.singer})]})]})})}function TK({song:t}){const{theme:e}=L(),n=f.useRef(null),{actions:r,isFetching:s}=kK(),{close:i}=vs(),[a,o]=f.useState(""),c=()=>{var m;return(m=n.current)==null?void 0:m.close()},u=m=>{var p;o(m),i(),(p=n.current)==null||p.open()},d=async m=>{switch(m.variant){case"delete":await r({variant:"delete",song:t})}c()},h=()=>{switch(a){case"":return l.jsx(l.Fragment,{});case"edit":return l.jsx(dP,{admin:!0,modalRef:n,song:t});case"delete":return l.jsx(ui,{loading:s,label:`Delete '${t.name}' ?`,desc:"This action cannot be undone",theme:e,callback:()=>d({variant:"delete",song:t}),close:c})}};return l.jsxs(l.Fragment,{children:[l.jsx(Cn,{className:"w-[200px]",appendTo:"portal",children:l.jsxs(Gn,{p:"clear",theme:e,className:"py-2 rounded-md overflow-hidden relative",children:[l.jsx(OP,{song:t}),l.jsxs(yi,{children:[l.jsxs("button",{onClick:()=>u("edit"),children:[l.jsx(nu,{className:"w-5"}),l.jsx("span",{children:"Edit"})]}),l.jsxs(cn,{to:`/dashboard/lyric/${t.id}`,children:[l.jsx(Wf,{className:"w-5"}),l.jsx("span",{children:"Lyric"})]}),l.jsxs("button",{onClick:()=>u("delete"),children:[l.jsx(oi,{className:"w-5"}),l.jsx("span",{children:"Delete"})]})]})]})}),l.jsx(an,{ref:n,variant:"animation",children:h()})]})}function IK({song:t}){const{theme:e}=L(),{actions:n,isFetching:r,currentPlaylist:s}=Em(),{close:i}=vs(),a={overlay:"absolute flex items-center justify-center inset-0 bg-black/40"},o=async c=>{switch(c.variant){case"remove-song":await n({variant:"remove-song",song:c.song});break;case"update-image":await n({variant:"update-image",song:c.song});break}i()};return l.jsx(l.Fragment,{children:l.jsx(Cn,{className:"w-[200px]",appendTo:"portal",children:l.jsxs(Gn,{p:"clear",theme:e,className:"py-2 rounded-md overflow-hidden relative",children:[l.jsx(OP,{song:t}),l.jsxs(yi,{children:[l.jsxs("button",{onClick:()=>o({variant:"remove-song",song:t}),children:[l.jsx(oi,{className:"w-5"}),l.jsx("span",{children:"Remove"})]}),t.image_url&&l.jsxs("button",{className:`${(s==null?void 0:s.image_url)===t.image_url?"disable":""}`,onClick:()=>o({variant:"update-image",song:t}),children:[l.jsx(A7,{className:"w-5"}),l.jsx("span",{children:"Set playlist image"})]})]}),r&&l.jsx("div",{className:a.overlay,children:l.jsx("div",{className:"h-[25px] w-[25px] border-[2px] border-r-black rounded-[50%] animate-spin"})})]})})})}function CK({song:t,variant:e}){const{theme:n}=L(),[r,s]=f.useState(!1),i=()=>{switch(e){case"songs":return l.jsx(TK,{song:t});case"playlist":return l.jsx(IK,{song:t})}};return l.jsx(l.Fragment,{children:l.jsxs($r,{appendOnPortal:!0,children:[l.jsx(zr,{setIsOpenParent:s,children:l.jsx("button",{className:`p-1 rounded-full ${n.content_hover_bg} ${r?n.content_bg:"bg-"+n.alpha}`,children:l.jsx(UA,{className:"w-5"})})}),i()]})})}function FP({song:t,className:e="",variant:n}){return l.jsxs("tr",{className:e,children:[l.jsx("td",{children:t.name}),l.jsx("td",{children:t.singer}),l.jsx("td",{children:"-"}),l.jsx("td",{children:yo(t.duration)}),l.jsx("td",{children:l.jsx(CK,{variant:n,song:t})})]})}function AK(){const{theme:t}=L(),{isFetching:e}=DP(),{playlistSongs:n}=Z(fr);return l.jsxs("div",{className:"lg:flex lg:-mx-3 overflow-hidden",children:[l.jsx("div",{className:"w-full lg:w-1/4 lg:px-3",children:l.jsx(sy,{loading:e,variant:"dashboard-playlist"})}),l.jsxs("div",{className:"w-full lg:w-3/4 lg:px-3 lg:overflow-auto",children:[e&&l.jsx("p",{className:"text-center w-full",children:l.jsx(mn,{className:"w-6 animate-spin inline-block"})}),!e&&l.jsx("div",{className:`rounded-md overflow-hidden ${t.side_bar_bg}`,children:l.jsx(T1,{className:"[&_td]:text-sm [&_tr]:border-b [&_tr]:border-black/10 [&_th]:text-sm [&_th]:text-left [&_td]:p-2 [&_th]:p-2 hover:[&_tr:not(div.absolute)]:bg-black/10",colList:["Name","Singer","Genre","Time",""],children:n.map((r,s)=>l.jsx(FP,{variant:"playlist",song:r},s))})})]})]})}function RK(){const{setPlaylists:t,playlists:e}=At(),[n,r]=f.useState(""),[s,i]=f.useState(!0),[a,o]=f.useState("All"),{setErrorToast:c}=xt(),u=async h=>{try{h.preventDefault(),i(!0);const m=No(ys,"playlist"),p=ts(m,Zt("by","==","admin"),Zt("name",">=",n),Zt("name","<=",n+"")),g=await jo(p);if(g.docs){const x=g.docs.map(_=>_.data());t(x)}else t([]);o("Result")}catch(m){console.log({message:m}),c()}finally{i(!1)}},d=async()=>{try{i(!0);const h=await Oh({variant:"admin"});h&&t(h)}catch(h){console.log({message:h}),c()}finally{i(!1)}};return f.useEffect(()=>{a==="All"&&d()},[a]),{isFetching:s,value:n,setValue:r,handleSubmit:u,playlists:e,tab:a,setTab:o}}function PK(){const{theme:t}=L(),{actions:e,isFetching:n}=Em(),r=f.useRef(null),s=()=>{var a;return(a=r.current)==null?void 0:a.close()},i=async a=>{await e({variant:"add-playlist",name:a}),s()};return l.jsxs(l.Fragment,{children:[l.jsxs(B,{onClick:()=>{var a;return(a=r.current)==null?void 0:a.open()},className:`${t.content_bg} h-[32px] rounded-full space-x-1 px-2.5`,size:"clear",children:[l.jsx(ny,{className:"w-6"}),l.jsx("div",{className:"hidden md:block",children:"Add new playlist"})]}),l.jsx(an,{ref:r,variant:"animation",children:l.jsx(y1,{loading:n,closeModal:s,cbWhenSubmit:a=>i(a),title:"Add playlist"})})]})}function NK(){const{theme:t}=L(),{value:e,setValue:n,isFetching:r,handleSubmit:s,playlists:i,tab:a,setTab:o}=RK(),c={formGroup:` flex ${t.side_bar_bg} rounded-full overflow-hidden`,input:"outline-none bg-transparent px-3 py-1 h-full"};return l.jsxs(l.Fragment,{children:[l.jsx(wm,{title:"Playlists"}),l.jsxs("div",{className:"flex items-stretch justify-between mt-3",children:[l.jsxs("form",{action:"#",onSubmit:s,className:"flex",children:[l.jsxs("div",{className:`${c.formGroup}`,children:[l.jsx("input",{value:e,placeholder:"...",onChange:u=>n(u.target.value.trim()),className:`${c.input}`,type:"text"}),l.jsx("button",{type:"button",onClick:()=>n(""),className:`pr-2 ${e?"opacity-[1] cursor-pointer":"opacity-0 cursor-none"}`,children:l.jsx(dr,{className:"w-5"})})]}),l.jsx(B,{type:"submit",className:`${t.content_bg} ml-3 w-[32px] justify-center h-full rounded-full `,size:"clear",children:l.jsx(Qq,{className:"w-5"})})]}),l.jsx(PK,{})]}),l.jsx(su,{className:`mt-5 ${a==="All"?"pointer-events-none":""}`,tabs:["All","Result"],render:u=>u,activeTab:a,setActiveTab:o}),l.jsxs("div",{className:"mt-3",children:[r&&l.jsx("p",{className:"text-center w-full",children:l.jsx(mn,{className:"w-6 animate-spin inline-block"})}),!r&&l.jsx("div",{className:`rounded-md ${t.side_bar_bg}`,children:l.jsx(T1,{className:"[&_td]:text-sm [&_tr]:border-b [&_tr]:border-black/10 [&_th]:text-sm [&_th]:text-left [&_td]:p-2 [&_th]:p-2",colList:["Name","Played","Songs","Date",""],children:i.length?i.map((u,d)=>l.jsxs("tr",{className:"hover:bg-black/10",children:[l.jsx("td",{children:l.jsx(cn,{to:`/dashboard/playlists/${u.id}`,children:u.name})}),l.jsx("td",{children:"-"}),l.jsx("td",{children:"-"}),l.jsx("td",{children:"-"}),l.jsx("td",{children:"-"})]},d)):l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"text-center",children:"..."})})})})]})]})}function jK(){const{songs:t,setSongs:e}=At(),[n,r]=f.useState(""),[s,i]=f.useState(!0),[a,o]=f.useState("All"),{setErrorToast:c}=xt(),u=async h=>{try{h.preventDefault(),i(!0);const m=No(ys,"songs"),p=ts(m,Zt("name",">=",n),Zt("name","<=",n+""),Zt("by","==","admin")),g=await jo(p);if(g.docs){const x=g.docs.map(_=>_.data());o("Result"),e(x)}}catch(m){console.log({message:m}),c()}finally{i(!1)}},d=async()=>{try{i(!0);const h=await Dh({variant:"dashboard"});h&&e(h)}catch(h){console.log({message:h}),c()}finally{i(!1)}};return f.useEffect(()=>{a==="All"&&d()},[a]),{isFetching:s,value:n,setValue:r,handleSubmit:u,songs:t,tab:a,setTab:o}}function DK(){const{theme:t}=L(),{handleSubmit:e,isFetching:n,setValue:r,songs:s,value:i,setTab:a,tab:o}=jK(),c={formGroup:` flex ${t.side_bar_bg} rounded-full overflow-hidden`,input:"outline-none bg-transparent px-3 py-1 h-full"};return l.jsxs(l.Fragment,{children:[l.jsx(wm,{title:"Songs"}),l.jsxs("div",{className:"flex justify-between mt-3",children:[l.jsxs("form",{action:"#",onSubmit:e,className:"flex",children:[l.jsxs("div",{className:`${c.formGroup}`,children:[l.jsx("input",{value:i,placeholder:"...",onChange:u=>r(u.target.value.trim()),className:`${c.input}`,type:"text"}),l.jsx("button",{type:"button",onClick:()=>r(""),className:`pr-2 ${i?"opacity-[1] cursor-pointer":"opacity-0 cursor-none"}`,children:l.jsx(dr,{className:"w-5"})})]}),l.jsx(B,{type:"submit",className:`${t.content_bg} ml-3 w-[32px] justify-center h-full rounded-full `,size:"clear",children:l.jsx(Lx,{className:"w-5"})})]}),l.jsxs("label",{htmlFor:"song-upload",className:`px-3 items-center cursor-pointer space-x-1 inline-flex ${t.content_bg} rounded-full`,children:[l.jsx(jx,{className:"w-6"}),l.jsx("div",{className:"hidden md:block",children:"Upload"})]})]}),l.jsx(su,{className:`mt-5 ${o==="All"?"pointer-events-none":""}`,tabs:["All","Result"],render:u=>u,activeTab:o,setActiveTab:a}),l.jsxs("div",{className:"mt-3",children:[n&&l.jsx("p",{className:"text-center w-full",children:l.jsx(mn,{className:"w-6 animate-spin inline-block"})}),!n&&l.jsx("div",{className:`rounded-md overflow-hidden ${t.side_bar_bg}`,children:l.jsx(T1,{className:"[&_td]:text-sm [&_tr]:border-b [&_tr]:border-black/10 [&_th]:text-sm [&_th]:text-left [&_td]:p-2 [&_th]:p-2",colList:["Name","Singer","Genre","Time",""],children:s.length?s.map((u,d)=>l.jsx(FP,{className:`hover:bg-${t.alpha}`,variant:"songs",song:u},d)):l.jsx("tr",{children:l.jsx("td",{colSpan:5,className:"text-center",children:"..."})})})})]})]})}function OK(){return l.jsx(wP,{children:l.jsx(EP,{admin:!0})})}function FK(){const[t,e]=f.useState(!1),[n,r]=f.useState("Song"),s=bk(),[i,a]=f.useState({songs:[],playlists:[]}),o=async()=>{try{if(!s[0].get("q"))return;switch(await tu(1e3),n){case"Song":{a({songs:b1,playlists:[]});break}case"Playlist":{a({songs:[],playlists:PP});break}}}catch(c){console.log({message:c})}finally{e(!1)}};return f.useEffect(()=>(o(),()=>{e(!0)}),[s[0].get("q"),n]),f.useEffect(()=>()=>{r("Song")},[s[0].get("q")]),{isFetching:t,setIsFetching:e,tab:n,setTab:r,getResult:o,result:i}}function LK(){const{isFetching:t,result:e,tab:n,setTab:r}=FK(),{handleSetSong:s}=Lo({variant:"search-bar"}),i=c=>{s(c.queue_id,[c])},a=()=>{switch(n){case"Song":return qf;case"Playlist":return l.jsx("div",{className:"flex",children:nR})}},o=()=>{switch(n){case"Song":return e.songs.length?l.jsx(sa,{variant:"search-bar",handleSetSong:i,songs:e.songs}):l.jsx("p",{children:"..."});case"Playlist":return e.playlists.length?l.jsx(_1,{variant:"search-page",playlists:e.playlists}):l.jsx("p",{children:"..."})}};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center mt-3",children:[l.jsx("div",{className:"text-2xl font-bold",children:"Result"}),l.jsx(su,{className:`ml-5 ${t?"disable":""}`,tabs:["Song","Playlist"],render:c=>l.jsx("p",{children:c}),activeTab:n,setActiveTab:r})]}),l.jsx(gi,{children:l.jsxs("div",{className:"mt-5",children:[t&&a(),!t&&o()]})})]})}const Mt={Home:"/",Search:"/search",Dashboard:"/dashboard",DashboardPlaylist:"/dashboard/playlists",DashboardSong:"/dashboard/songs",DashboardSinger:"/dashboard/singers",DashboardGenre:"/dashboard/genres",DashboardPlaylistDetail:"/dashboard/playlists/:id",DashboardSongLyric:"/dashboard/lyric/:id",MySongs:"/mysongs",Favorite:"/favorite",Playlist:"/playlist/:id",Lyric:"/mysongs/lyric/:id"},MK=[{path:Mt.Home,component:lK,layout:""},{path:Mt.Search,component:LK,layout:""},{path:Mt.MySongs,component:xK,layout:""},{path:Mt.Playlist,component:yK,layout:""},{path:Mt.Lyric,component:wK,layout:""}],$K=[{path:Mt.Dashboard,component:bK,layout:tl,title:"Dashboard"},{path:Mt.DashboardPlaylist,component:NK,layout:tl,title:"Playlist"},{path:Mt.DashboardPlaylistDetail,component:AK,layout:tl,title:"Playlist Detail"},{path:Mt.DashboardSong,component:DK,layout:tl,title:"Song"},{path:Mt.DashboardSongLyric,component:OK,layout:tl}];function zK({className:t}){const[e,n]=f.useState(!1),{theme:r}=L(),s=()=>{const a=document.querySelector(".main-container");if(!a)return;const o=a.scrollTop||0;n(o>100)},i=()=>{const a=document.querySelector(".main-container");a==null||a.scroll({behavior:"smooth",top:0})};return f.useEffect(()=>{const a=document.querySelector(".main-container");if(a)return a.addEventListener("scroll",s),()=>{a.removeEventListener("scroll",s)}},[]),l.jsx(B,{onClick:i,variant:"circle",size:"clear",className:`absolute p-[8px] hover:scale-[1.05] transition-[opacity,transform] 
         ${t||""} 
         w-[36px] 
         ${r.content_hover_bg} h-[36px] bg-${r.alpha} 
      ${e?"opacity-[1]":"opacity-0 translate-y-[20px]"}`,children:l.jsx(Wq,{className:"w-full"})})}function BK(){const{theme:t}=L(),{user:e,loading:n}=qn(),r=hr(),s=Hn(),i=()=>{s("/dashboard")},a=[...Array(2).keys()].map(c=>l.jsxs("div",{className:"px-3 w-full h-[51px] flex items-center",children:[l.jsx(Yt,{className:"w-[28px] h-[28px] mr-1 flex-shrink-0"}),l.jsx(Yt,{className:"w-[100px] h-[30px]"})]},c)),o={container:`w-[180px] relative  flex-shrink-0 border-r-[1px] h-screen ${t.side_bar_bg} border-${t.alpha}`,navItem:`  px-3 py-2 leading-[2.2] font-playwriteCU flex items-center ${t.content_hover_text}`,icon:"w-7 mr-2",link:"w-full border-l-[4px]",activeLink:`${t.content_text} ${t.container} ${t.content_border}  `};return l.jsxs("div",{className:`hidden md:block ${o.container} ${t.text_color}`,children:[l.jsx("div",{className:"px-[10px] h-[60px] flex items-center justify-center",children:l.jsxs(cn,{to:"/",className:"text-[24px] font-[500]",children:["HD",l.jsx("span",{className:`${t.content_text} ml-[4px]`,children:"MP3"})]})}),l.jsxs("div",{className:"flex flex-col items-start",children:[n&&a,!n&&l.jsxs(l.Fragment,{children:[l.jsx(cn,{className:`${o.link} ${r.pathname==="/"?o.activeLink:"border-transparent"}`,to:Mt.Home,children:l.jsxs("div",{className:o.navItem,children:[l.jsx(qA,{className:o.icon}),l.jsx("span",{children:"Discover"})]})}),e&&l.jsxs(l.Fragment,{children:[l.jsx(cn,{className:`${o.link}  ${r.pathname.includes("mysongs")?o.activeLink:"border-transparent"}`,to:Mt.MySongs,children:l.jsxs("div",{className:o.navItem,children:[l.jsx(Zi,{className:o.icon}),l.jsx("span",{children:"My Song"})]})}),e.role==="ADMIN"&&l.jsx(cn,{to:"/dashboard",className:`${o.link} border-transparent`,children:l.jsxs("div",{onClick:i,className:` ${o.navItem}`,children:[l.jsx(HA,{className:o.icon}),l.jsx("span",{className:"",children:"Dashboard"})]})})]})]})]}),l.jsx(zK,{className:"left-[50%] translate-x-[-50%] bottom-[80px] md:bottom-[100px]"})]})}function UK(){const[t,e]=f.useState(""),[n,r]=f.useState(!1),[s,i]=f.useState(!1),[a,o]=f.useState([]),c=f.useRef(null),u=f.useRef(null),d=f.useRef(null),h=f.useRef(!0),m=bk(),p=uP(t,700),g=new AbortController,x=_=>{const v=document.querySelector(".popup-content"),y=_.target;c.current&&u.current&&(c.current.contains(y)||u.current.contains(y)||v!=null&&v.contains(y))||i(!1)};return f.useEffect(()=>{if(!p.trim()){r(!1),o([]);return}const _=async()=>{try{r(!0),await tu(1e3),o(b1)}catch(v){console.log(v)}finally{r(!1)}};return h.current?_():h.current=!0,()=>{console.log("abort"),g.abort()}},[p]),f.useEffect(()=>(s&&document.addEventListener("click",x),()=>{document.removeEventListener("click",x)}),[s]),f.useEffect(()=>(e(m[0].get("q")||""),()=>{var _;h.current=!1,(_=d.current)==null||_.blur(),i(!1)}),[m[0].get("q")]),f.useEffect(()=>{m[0].get("q")!==t&&s&&(h.current=!0)},[t,s]),{isFetching:n,searchResult:a,value:t,setValue:e,isFocus:s,setIsFocus:i,formRef:c,searchResultRef:u,inputRef:d}}function VK({songs:t}){const{handleSetSong:e}=Lo({variant:"search-bar"}),n=r=>{e(r.queue_id,[r])};return l.jsx(gi,{children:t.length?l.jsx(sa,{variant:"search-bar",handleSetSong:n,songs:t}):l.jsx("h1",{className:"text-[22px] text-center",children:"..."})})}function WK(){const{theme:t}=L(),e=Hn(),{isFetching:n,inputRef:r,formRef:s,searchResultRef:i,value:a,searchResult:o,setIsFocus:c,isFocus:u,setValue:d}=UK(),h={container:`relative h-[40px] flex px-3 ${u?"text-white":t.text_color}`,unFocusContainer:`bg-${t.alpha} rounded-[20px]`,focusedContainer:`${t.modal_bg} rounded-[20px_20px_0_0]`,input:`bg-transparent outline-none ${u?"placeholder-white":""}`,searchResultContainer:`${t.modal_bg} rounded-[0_0_20px_20px] p-3 position absolute top-full left-0 w-full max-h-[60vh] overflow-hidden flex flex-col`,listWrapper:"[&>*]:px-3 *:text-sm [&>*]:py-2 [&>*]:flex [&>*]:items-center  [&>*]:space-x-1 [&>*]:rounded-md hover:[&>*:not(div.absolute)]:bg-white/10"},m=async p=>{p.preventDefault(),e(`/search?q=${a}`),c(!1)};return l.jsx(l.Fragment,{children:l.jsxs("form",{ref:s,onSubmit:m,className:`${h.container} ${u?h.focusedContainer:h.unFocusContainer}`,children:[l.jsx("button",{className:"mr-2",children:l.jsx(Lx,{className:"w-6"})}),l.jsx("input",{ref:r,value:a,onFocus:()=>c(!0),onChange:p=>d(p.target.value.trim()),placeholder:"Nhac tet...",className:h.input,type:"text"}),l.jsx("button",{type:"button",onClick:()=>d(""),className:`${a?"opacity-100":"!opacity-0"} ${mc(!a)}`,children:n?l.jsx(mn,{className:"w-5 animate-spin"}):l.jsx(dr,{className:"w-5"})}),l.jsx("div",{ref:i,className:`${pc(!u)} ${h.searchResultContainer}`,children:o.length?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-sm font-[500] mb-2",children:"Suggestion results"}),l.jsx("div",{className:`${h.listWrapper} overflow-auto no-scrollbar`,children:l.jsx(VK,{songs:o})})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-sm font-[500] mb-2",children:"Suggestion keyword"}),l.jsx("div",{className:h.listWrapper,children:l.jsxs(cn,{to:"/search?q=nhac-tet",children:[l.jsx(BA,{className:"w-5"}),l.jsx("span",{children:"Nhac tet"})]})})]})})]})})}function HK({contentRef:t}){const{theme:e}=L(),[n,r]=f.useState(0),[s,i]=Ff(Ji),[a,o]=f.useState(""),c=f.useRef(null),u=f.useRef(null),d=f.useRef(null),{logOut:h,logIn:m}=Lf(),p=E=>{var S,b;o(E),(S=d.current)==null||S.toggle(),(b=c.current)==null||b.close()},g=async()=>{var E;try{await h()}catch(S){console.log("signOut error",{message:S})}finally{(E=d.current)==null||E.toggle()}},x=async()=>{var E;try{(E=u.current)==null||E.close(),m()}catch(S){console.log({message:S})}},_=()=>{var S;const E=((S=t.current)==null?void 0:S.scrollTop)||0;r(E)},v=l.jsx(Yt,{className:"h-[40px] w-[40px] rounded-full"}),y=f.useMemo(()=>{switch(a){case"":return l.jsx(l.Fragment,{});case"theme":return l.jsx(S1,{close:()=>{var E;return(E=d.current)==null?void 0:E.toggle()}});case"info":return l.jsx(E1,{close:()=>{var E;return(E=d.current)==null?void 0:E.toggle()}});case"confirm":return l.jsx(ui,{close:()=>{var E;return(E=d.current)==null?void 0:E.toggle()},callback:g,loading:!1,label:"Sign out ?",desc:"",theme:e})}},[a]);f.useEffect(()=>{var E;return(E=t.current)==null||E.addEventListener("scroll",_),()=>{document.removeEventListener("scroll",_)}},[]);const w={userName:"text-[16px] font-[500] ml-[8px] line-clamp-1",button:"h-[40px] w-[40px] rounded-full",menuItem:"hover:bg-white/5 rounded-[4px] w-full text-sm px-[10px] h-[44px] inline-flex items-center font-[500]",icon:"w-5 mr-1",divide:`h-[1px]  w-[calc(100%-20px)] mb-[10px] mt-[20px] mx-auto bg-${e.alpha}`};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:`hidden md:block h-[60px] fixed top-0 right-0 left-[180px] z-[20] ${e.container} ${n?"shadow-lg bg-transparent":""}`,children:[l.jsx("div",{className:`${n?"":"hidden "} absolute  inset-0 ${e.container} bg-opacity-[0.9] backdrop-blur-[15px] z-[-1] `}),l.jsxs("div",{className:"px-[40px] items-center flex h-full",children:[l.jsx(XA,{children:l.jsx(YA,{className:"mr-5"})}),l.jsx(WK,{}),l.jsxs("div",{className:"flex space-x-3 ml-auto",children:[l.jsxs($r,{children:[l.jsx(zr,{ref:c,children:l.jsx(rs,{isWrapped:!0,position:"top-[calc(100%+8px)]",content:"Settings",children:l.jsx("button",{className:`flex px-[6px] items-center ${w.button} bg-${e.alpha} ${e.content_hover_bg}`,children:l.jsx(nu,{className:"w-full"})})})}),l.jsx(Cn,{appendTo:"parent",className:"top-[calc(100%+8px)] right-0",animationClassName:"origin-top-right",children:l.jsx(TP,{openModal:p,variant:"client"})})]}),l.jsxs($r,{children:[l.jsx(zr,{ref:u,className:"flex items-center",children:l.jsx("button",{className:"flex hover:brightness-90",children:i?v:l.jsx(ry,{className:"w-[40px] h-[40px]"})})}),l.jsx(Cn,{appendTo:"parent",className:"top-[calc(100%+8px)] right-0",animationClassName:"origin-top-right",children:l.jsx(Gn,{theme:e,children:l.jsxs("div",{className:"w-[250px] max-h-[50vh]",children:[s&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center p-[10px] pb-0",children:[l.jsx(ry,{className:"login-trigger w-[46px] h-[46px]"}),l.jsx("div",{className:"ml-[12px]",children:l.jsx("h5",{className:"font-semibold line-clamp-1",children:s==null?void 0:s.displayName})})]}),l.jsx("div",{className:w.divide}),l.jsxs("button",{className:`${w.menuItem}`,onClick:()=>p("confirm"),children:[l.jsx(Nx,{className:w.icon}),"Log out"]})]}),!s&&l.jsxs("button",{className:`${w.menuItem}`,onClick:x,children:[l.jsx(n8,{className:w.icon}),"Log in"]})]})})})]})]})]})]}),l.jsx(an,{variant:"animation",ref:d,children:y})]})}function qK(){const t=rn(),{theme:e}=L(),{isOpenSongQueue:n,setIsOpenSongQueue:r,controlRef:s}=Ht(),{queueSongs:i,currentQueueId:a}=Z(ct),o=f.useCallback(d=>{d!==a&&t(ms(d))},[a]),c=f.useCallback(()=>{var d;t(kV()),(d=s.current)==null||d.resetForNewSong(),r(!1)},[]),u={mainContainer:`fixed w-[300px] flex flex-col bottom-[80px] right-[0] top-[0] z-20 px-3 pt-4 ${e.container} border-l-[1px] border-${e.alpha} transition-[transform] duration-[.5s] linear delay-100`,songListContainer:"flex-grow overflow-y-auto pb-[10px] overflow-x-hidden no-scrollbar"};return l.jsx(gi,{children:l.jsxs("div",{className:`${e.text_color} ${u.mainContainer} ${n?"translate-x-0---":"translate-x-full"}     `,children:[l.jsx("div",{className:"leading-[2.2] font-playwriteCU mb-2",children:"Song queue"}),l.jsx("div",{className:u.songListContainer,children:l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"",children:l.jsx(sa,{variant:"queue",songs:i,handleSetSong:o})}),l.jsx("div",{className:"text-center",children:!!i.length&&l.jsxs(B,{onClick:c,size:"clear",className:`${e.content_bg} rounded-full my-5 px-3 py-1 space-x-1`,children:[l.jsx(oi,{className:"w-6"}),l.jsx("span",{className:"font-playwriteCU leading-[2.2]",children:"Clear"})]})})]})})]})})}const GK=f.memo(qK);function KK(t,e){const{currentSongData:n}=Z(ct),{isOpenFullScreen:r,setIdle:s}=Ht(),[i,a]=f.useState(0),o=f.useRef(),c=f.useRef(),u=()=>{s(!1),a(Math.random())},d=()=>{clearTimeout(c.current),clearTimeout(o.current)},h=async()=>{if(!r)return;const m=document.querySelector(".song-thumb.active"),p=document.querySelector(".song-list-container");if(m&&p){const g=B0(m,p,!0);let x=Sc.focusDelay;g||(x=0),o.current=setTimeout(()=>{s(!0)},x)}};if(f.useEffect(()=>{if(!(e||!n)){if(!r){s(!1);return}return setTimeout(()=>{window.addEventListener("mousemove",u),window.dispatchEvent(new Event("mousemove"))},1e3),()=>{window.removeEventListener("mousemove",u),d()}}},[r]),f.useEffect(()=>(c.current=setTimeout(()=>{h()},t),()=>{d()}),[i]),!r)return!1}const QK=()=>{const{isOnMobile:t}=L(),{audioRef:e,setIsHasAudioEle:n}=Ht();KK(Sc.focusDelay,t);const r=e.current&&l.jsxs(l.Fragment,{children:[l.jsx(wG,{}),l.jsx(GK,{}),l.jsx(mG,{})]}),s=e.current&&l.jsxs(l.Fragment,{children:[l.jsx($G,{}),l.jsx(DG,{})]});return f.useEffect(()=>{e.current&&n(!0)},[]),l.jsxs(l.Fragment,{children:[l.jsx("audio",{ref:e,className:"hidden"}),e.current&&(t?s:r)]})};function XK(){return l.jsx(Gz,{children:l.jsx(QK,{})})}function YK(){const{handleInputChange:t,inputRef:e}=Dq(),n={container:"upload portal fixed z-[199] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return l.jsx(l.Fragment,{children:oa.createPortal(l.jsx("div",{className:n.container,children:l.jsx("input",{ref:e,onChange:t,type:"file",multiple:!0,accept:"audio",id:"song_upload",className:"hidden"})}),document.getElementById("portals"))})}const ZS=({children:t})=>{const{theme:e}=L(),n=f.useRef(null),r={page:`md:flex md:h-screen md:overflow-hidden ${e.container} ${e.text_color}`,container:"h-full md:w-full px-[10px] md:px-[40px] pt-[30px] md:pt-[90px] md:pb-[90px] md:overflow-auto"};return f.useEffect(()=>{const s=document.querySelector(".my-tag"),i=document.querySelector("body");i.style.backgroundColor=e.container_code,s&&s.setAttribute("content",e.container_code)},[e]),l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:`${r.page}`,children:[l.jsx(BK,{}),l.jsxs("div",{ref:n,className:r.container,children:[l.jsx(HK,{contentRef:n}),t]}),l.jsx(XK,{})]}),l.jsx(RP,{variant:"client"}),l.jsx(YK,{})]})};function JK(){const{setUser:t}=qn(),[e,n]=Ff(Ji);return f.useEffect(()=>{if(n)return;(async()=>{try{if(!e||!e.email)return t({type:"set-user",user:null});const i=(await xc({collection:"users",id:e.email,msg:">>> api: get auth info"})).data();Object.assign(i,{email:e.email,display_name:e.displayName,photoURL:e.photoURL,like_song_ids:i.like_song_ids||[],playlist_ids:i.playlist_ids||[],play_history:i.play_history||[]}),t({type:"set-user",user:i})}catch(s){console.log({message:s})}})()},[n,e]),l.jsx(J5,{})}function ZK(){return l.jsx(l.Fragment,{children:l.jsx(o3,{children:l.jsxs(e3,{children:[l.jsx(Si,{path:"/login",element:l.jsx(SK,{})}),l.jsx(Si,{path:"/unauthorized",element:l.jsx(EK,{})}),l.jsx(Si,{path:"*",element:l.jsx(_K,{})}),l.jsxs(Si,{element:l.jsx(JK,{}),children:[MK.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=ZS,l.jsx(Si,{path:t.path,element:l.jsx(n,{children:l.jsx(r,{})})},e)}),$K.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=ZS,l.jsx(Si,{path:t.path,element:l.jsx(n,{children:l.jsx(r,{})})},e)})]})]})})})}const eQ=vU({reducer:{currentPlaylist:RV,playStatus:RU,songQueue:TV}});Qp.createRoot(document.getElementById("root")).render(l.jsx(u2.StrictMode,{children:l.jsx(p9,{children:l.jsx(Mz,{children:l.jsx(y9,{children:l.jsx(zz,{children:l.jsx(Hz,{children:l.jsx(vV,{store:eQ,children:l.jsx(ZK,{})})})})})})})}));
