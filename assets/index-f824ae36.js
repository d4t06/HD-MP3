function tC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var $0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ww={exports:{}},pd={},xw={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cl=Symbol.for("react.element"),rC=Symbol.for("react.portal"),iC=Symbol.for("react.fragment"),sC=Symbol.for("react.strict_mode"),oC=Symbol.for("react.profiler"),aC=Symbol.for("react.provider"),lC=Symbol.for("react.context"),uC=Symbol.for("react.forward_ref"),cC=Symbol.for("react.suspense"),dC=Symbol.for("react.memo"),hC=Symbol.for("react.lazy"),V0=Symbol.iterator;function fC(t){return t===null||typeof t!="object"?null:(t=V0&&t[V0]||t["@@iterator"],typeof t=="function"?t:null)}var Ew={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sw=Object.assign,Tw={};function vo(t,e,n){this.props=t,this.context=e,this.refs=Tw,this.updater=n||Ew}vo.prototype.isReactComponent={};vo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Iw(){}Iw.prototype=vo.prototype;function Vm(t,e,n){this.props=t,this.context=e,this.refs=Tw,this.updater=n||Ew}var Fm=Vm.prototype=new Iw;Fm.constructor=Vm;Sw(Fm,vo.prototype);Fm.isPureReactComponent=!0;var F0=Array.isArray,Rw=Object.prototype.hasOwnProperty,Um={current:null},Aw={key:!0,ref:!0,__self:!0,__source:!0};function Cw(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Rw.call(e,r)&&!Aw.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:cl,type:t,key:s,ref:o,props:i,_owner:Um.current}}function pC(t,e){return{$$typeof:cl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Bm(t){return typeof t=="object"&&t!==null&&t.$$typeof===cl}function mC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var U0=/\/+/g;function Fh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mC(""+t.key):e.toString(36)}function Pu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case cl:case rC:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Fh(o,0):r,F0(i)?(n="",t!=null&&(n=t.replace(U0,"$&/")+"/"),Pu(i,e,n,"",function(u){return u})):i!=null&&(Bm(i)&&(i=pC(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(U0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",F0(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Fh(s,a);o+=Pu(s,e,n,l,i)}else if(l=fC(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Fh(s,a++),o+=Pu(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Zl(t,e,n){if(t==null)return t;var r=[],i=0;return Pu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function gC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ft={current:null},Nu={transition:null},yC={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:Nu,ReactCurrentOwner:Um};me.Children={map:Zl,forEach:function(t,e,n){Zl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Zl(t,function(){e++}),e},toArray:function(t){return Zl(t,function(e){return e})||[]},only:function(t){if(!Bm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=vo;me.Fragment=iC;me.Profiler=oC;me.PureComponent=Vm;me.StrictMode=sC;me.Suspense=cC;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yC;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Sw({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Um.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Rw.call(e,l)&&!Aw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:cl,type:t.type,key:i,ref:s,props:r,_owner:o}};me.createContext=function(t){return t={$$typeof:lC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:aC,_context:t},t.Consumer=t};me.createElement=Cw;me.createFactory=function(t){var e=Cw.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:uC,render:t}};me.isValidElement=Bm;me.lazy=function(t){return{$$typeof:hC,_payload:{_status:-1,_result:t},_init:gC}};me.memo=function(t,e){return{$$typeof:dC,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=Nu.transition;Nu.transition={};try{t()}finally{Nu.transition=e}};me.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};me.useCallback=function(t,e){return Ft.current.useCallback(t,e)};me.useContext=function(t){return Ft.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return Ft.current.useDeferredValue(t)};me.useEffect=function(t,e){return Ft.current.useEffect(t,e)};me.useId=function(){return Ft.current.useId()};me.useImperativeHandle=function(t,e,n){return Ft.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return Ft.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return Ft.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return Ft.current.useMemo(t,e)};me.useReducer=function(t,e,n){return Ft.current.useReducer(t,e,n)};me.useRef=function(t){return Ft.current.useRef(t)};me.useState=function(t){return Ft.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return Ft.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return Ft.current.useTransition()};me.version="18.2.0";xw.exports=me;var h=xw.exports;const kw=nC(h),zm=tC({__proto__:null,default:kw},[h]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vC=h,_C=Symbol.for("react.element"),wC=Symbol.for("react.fragment"),xC=Object.prototype.hasOwnProperty,EC=vC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,SC={key:!0,ref:!0,__self:!0,__source:!0};function Pw(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)xC.call(e,r)&&!SC.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:_C,type:t,key:s,ref:o,props:i,_owner:EC.current}}pd.Fragment=wC;pd.jsx=Pw;pd.jsxs=Pw;ww.exports=pd;var c=ww.exports;var Yf={},Nw={exports:{}},on={},bw={exports:{}},Ow={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(b,$){var U=b.length;b.push($);e:for(;0<U;){var N=U-1>>>1,D=b[N];if(0<i(D,$))b[N]=$,b[U]=D,U=N;else break e}}function n(b){return b.length===0?null:b[0]}function r(b){if(b.length===0)return null;var $=b[0],U=b.pop();if(U!==$){b[0]=U;e:for(var N=0,D=b.length,Q=D>>>1;N<Q;){var Z=2*(N+1)-1,X=b[Z],M=Z+1,B=b[M];if(0>i(X,U))M<D&&0>i(B,X)?(b[N]=B,b[M]=U,N=M):(b[N]=X,b[Z]=U,N=Z);else if(M<D&&0>i(B,U))b[N]=B,b[M]=U,N=M;else break e}}return $}function i(b,$){var U=b.sortIndex-$.sortIndex;return U!==0?U:b.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,f=null,p=3,m=!1,_=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(b){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=b)r(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(u)}}function E(b){if(w=!1,v(b),!_)if(n(l)!==null)_=!0,K(S);else{var $=n(u);$!==null&&ce(E,$.startTime-b)}}function S(b,$){_=!1,w&&(w=!1,y(R),R=-1),m=!0;var U=p;try{for(v($),f=n(l);f!==null&&(!(f.expirationTime>$)||b&&!k());){var N=f.callback;if(typeof N=="function"){f.callback=null,p=f.priorityLevel;var D=N(f.expirationTime<=$);$=t.unstable_now(),typeof D=="function"?f.callback=D:f===n(l)&&r(l),v($)}else r(l);f=n(l)}if(f!==null)var Q=!0;else{var Z=n(u);Z!==null&&ce(E,Z.startTime-$),Q=!1}return Q}finally{f=null,p=U,m=!1}}var I=!1,T=null,R=-1,C=5,A=-1;function k(){return!(t.unstable_now()-A<C)}function z(){if(T!==null){var b=t.unstable_now();A=b;var $=!0;try{$=T(!0,b)}finally{$?L():(I=!1,T=null)}}else I=!1}var L;if(typeof g=="function")L=function(){g(z)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,ie=F.port2;F.port1.onmessage=z,L=function(){ie.postMessage(null)}}else L=function(){x(z,0)};function K(b){T=b,I||(I=!0,L())}function ce(b,$){R=x(function(){b(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(b){b.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,K(S))},t.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<b?Math.floor(1e3/b):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(b){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var U=p;p=$;try{return b()}finally{p=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(b,$){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var U=p;p=b;try{return $()}finally{p=U}},t.unstable_scheduleCallback=function(b,$,U){var N=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?N+U:N):U=N,b){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=U+D,b={id:d++,callback:$,priorityLevel:b,startTime:U,expirationTime:D,sortIndex:-1},U>N?(b.sortIndex=U,e(u,b),n(l)===null&&b===n(u)&&(w?(y(R),R=-1):w=!0,ce(E,U-N))):(b.sortIndex=D,e(l,b),_||m||(_=!0,K(S))),b},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(b){var $=p;return function(){var U=p;p=$;try{return b.apply(this,arguments)}finally{p=U}}}})(Ow);bw.exports=Ow;var TC=bw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jw=h,tn=TC;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lw=new Set,xa={};function as(t,e){Xs(t,e),Xs(t+"Capture",e)}function Xs(t,e){for(xa[t]=e,t=0;t<e.length;t++)Lw.add(e[t])}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xf=Object.prototype.hasOwnProperty,IC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,B0={},z0={};function RC(t){return Xf.call(z0,t)?!0:Xf.call(B0,t)?!1:IC.test(t)?z0[t]=!0:(B0[t]=!0,!1)}function AC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function CC(t,e,n,r){if(e===null||typeof e>"u"||AC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ut(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mt[t]=new Ut(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mt[e]=new Ut(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mt[t]=new Ut(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mt[t]=new Ut(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mt[t]=new Ut(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mt[t]=new Ut(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mt[t]=new Ut(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mt[t]=new Ut(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mt[t]=new Ut(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wm=/[\-:]([a-z])/g;function Hm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wm,Hm);mt[e]=new Ut(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wm,Hm);mt[e]=new Ut(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wm,Hm);mt[e]=new Ut(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!1,!1)});mt.xlinkHref=new Ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!0,!0)});function qm(t,e,n,r){var i=mt.hasOwnProperty(e)?mt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(CC(e,n,i,r)&&(n=null),r||i===null?RC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Tr=jw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,eu=Symbol.for("react.element"),ws=Symbol.for("react.portal"),xs=Symbol.for("react.fragment"),Gm=Symbol.for("react.strict_mode"),Jf=Symbol.for("react.profiler"),Dw=Symbol.for("react.provider"),Mw=Symbol.for("react.context"),Km=Symbol.for("react.forward_ref"),Zf=Symbol.for("react.suspense"),ep=Symbol.for("react.suspense_list"),Qm=Symbol.for("react.memo"),Cr=Symbol.for("react.lazy"),$w=Symbol.for("react.offscreen"),W0=Symbol.iterator;function Oo(t){return t===null||typeof t!="object"?null:(t=W0&&t[W0]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,Uh;function Wo(t){if(Uh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Uh=e&&e[1]||""}return`
`+Uh+t}var Bh=!1;function zh(t,e){if(!t||Bh)return"";Bh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Bh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wo(t):""}function kC(t){switch(t.tag){case 5:return Wo(t.type);case 16:return Wo("Lazy");case 13:return Wo("Suspense");case 19:return Wo("SuspenseList");case 0:case 2:case 15:return t=zh(t.type,!1),t;case 11:return t=zh(t.type.render,!1),t;case 1:return t=zh(t.type,!0),t;default:return""}}function tp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xs:return"Fragment";case ws:return"Portal";case Jf:return"Profiler";case Gm:return"StrictMode";case Zf:return"Suspense";case ep:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Mw:return(t.displayName||"Context")+".Consumer";case Dw:return(t._context.displayName||"Context")+".Provider";case Km:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Qm:return e=t.displayName||null,e!==null?e:tp(t.type)||"Memo";case Cr:e=t._payload,t=t._init;try{return tp(t(e))}catch{}}return null}function PC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tp(e);case 8:return e===Gm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ri(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Vw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function NC(t){var e=Vw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function tu(t){t._valueTracker||(t._valueTracker=NC(t))}function Fw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Vw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Zu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function np(t,e){var n=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function H0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ri(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Uw(t,e){e=e.checked,e!=null&&qm(t,"checked",e,!1)}function rp(t,e){Uw(t,e);var n=ri(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ip(t,e.type,n):e.hasOwnProperty("defaultValue")&&ip(t,e.type,ri(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function q0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ip(t,e,n){(e!=="number"||Zu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ho=Array.isArray;function Ms(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ri(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function sp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function G0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(O(92));if(Ho(n)){if(1<n.length)throw Error(O(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ri(n)}}function Bw(t,e){var n=ri(e.value),r=ri(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function K0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function zw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function op(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?zw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var nu,Ww=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(nu=nu||document.createElement("div"),nu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=nu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ea(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ta={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bC=["Webkit","ms","Moz","O"];Object.keys(ta).forEach(function(t){bC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ta[e]=ta[t]})});function Hw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ta.hasOwnProperty(t)&&ta[t]?(""+e).trim():e+"px"}function qw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Hw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var OC=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ap(t,e){if(e){if(OC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function lp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var up=null;function Ym(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cp=null,$s=null,Vs=null;function Q0(t){if(t=fl(t)){if(typeof cp!="function")throw Error(O(280));var e=t.stateNode;e&&(e=_d(e),cp(t.stateNode,t.type,e))}}function Gw(t){$s?Vs?Vs.push(t):Vs=[t]:$s=t}function Kw(){if($s){var t=$s,e=Vs;if(Vs=$s=null,Q0(t),e)for(t=0;t<e.length;t++)Q0(e[t])}}function Qw(t,e){return t(e)}function Yw(){}var Wh=!1;function Xw(t,e,n){if(Wh)return t(e,n);Wh=!0;try{return Qw(t,e,n)}finally{Wh=!1,($s!==null||Vs!==null)&&(Yw(),Kw())}}function Sa(t,e){var n=t.stateNode;if(n===null)return null;var r=_d(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var dp=!1;if(fr)try{var jo={};Object.defineProperty(jo,"passive",{get:function(){dp=!0}}),window.addEventListener("test",jo,jo),window.removeEventListener("test",jo,jo)}catch{dp=!1}function jC(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var na=!1,ec=null,tc=!1,hp=null,LC={onError:function(t){na=!0,ec=t}};function DC(t,e,n,r,i,s,o,a,l){na=!1,ec=null,jC.apply(LC,arguments)}function MC(t,e,n,r,i,s,o,a,l){if(DC.apply(this,arguments),na){if(na){var u=ec;na=!1,ec=null}else throw Error(O(198));tc||(tc=!0,hp=u)}}function ls(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Jw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Y0(t){if(ls(t)!==t)throw Error(O(188))}function $C(t){var e=t.alternate;if(!e){if(e=ls(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Y0(i),t;if(s===r)return Y0(i),e;s=s.sibling}throw Error(O(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function Zw(t){return t=$C(t),t!==null?ex(t):null}function ex(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ex(t);if(e!==null)return e;t=t.sibling}return null}var tx=tn.unstable_scheduleCallback,X0=tn.unstable_cancelCallback,VC=tn.unstable_shouldYield,FC=tn.unstable_requestPaint,qe=tn.unstable_now,UC=tn.unstable_getCurrentPriorityLevel,Xm=tn.unstable_ImmediatePriority,nx=tn.unstable_UserBlockingPriority,nc=tn.unstable_NormalPriority,BC=tn.unstable_LowPriority,rx=tn.unstable_IdlePriority,md=null,zn=null;function zC(t){if(zn&&typeof zn.onCommitFiberRoot=="function")try{zn.onCommitFiberRoot(md,t,void 0,(t.current.flags&128)===128)}catch{}}var Rn=Math.clz32?Math.clz32:qC,WC=Math.log,HC=Math.LN2;function qC(t){return t>>>=0,t===0?32:31-(WC(t)/HC|0)|0}var ru=64,iu=4194304;function qo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=qo(a):(s&=o,s!==0&&(r=qo(s)))}else o=n&~i,o!==0?r=qo(o):s!==0&&(r=qo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Rn(e),i=1<<n,r|=t[n],e&=~i;return r}function GC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Rn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=GC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function fp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ix(){var t=ru;return ru<<=1,!(ru&4194240)&&(ru=64),t}function Hh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function dl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Rn(e),t[e]=n}function QC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Rn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Jm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Rn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ee=0;function sx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ox,Zm,ax,lx,ux,pp=!1,su=[],zr=null,Wr=null,Hr=null,Ta=new Map,Ia=new Map,Pr=[],YC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function J0(t,e){switch(t){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":Hr=null;break;case"pointerover":case"pointerout":Ta.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ia.delete(e.pointerId)}}function Lo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=fl(e),e!==null&&Zm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function XC(t,e,n,r,i){switch(e){case"focusin":return zr=Lo(zr,t,e,n,r,i),!0;case"dragenter":return Wr=Lo(Wr,t,e,n,r,i),!0;case"mouseover":return Hr=Lo(Hr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ta.set(s,Lo(Ta.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ia.set(s,Lo(Ia.get(s)||null,t,e,n,r,i)),!0}return!1}function cx(t){var e=Pi(t.target);if(e!==null){var n=ls(e);if(n!==null){if(e=n.tag,e===13){if(e=Jw(n),e!==null){t.blockedOn=e,ux(t.priority,function(){ax(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=mp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);up=r,n.target.dispatchEvent(r),up=null}else return e=fl(n),e!==null&&Zm(e),t.blockedOn=n,!1;e.shift()}return!0}function Z0(t,e,n){bu(t)&&n.delete(e)}function JC(){pp=!1,zr!==null&&bu(zr)&&(zr=null),Wr!==null&&bu(Wr)&&(Wr=null),Hr!==null&&bu(Hr)&&(Hr=null),Ta.forEach(Z0),Ia.forEach(Z0)}function Do(t,e){t.blockedOn===e&&(t.blockedOn=null,pp||(pp=!0,tn.unstable_scheduleCallback(tn.unstable_NormalPriority,JC)))}function Ra(t){function e(i){return Do(i,t)}if(0<su.length){Do(su[0],t);for(var n=1;n<su.length;n++){var r=su[n];r.blockedOn===t&&(r.blockedOn=null)}}for(zr!==null&&Do(zr,t),Wr!==null&&Do(Wr,t),Hr!==null&&Do(Hr,t),Ta.forEach(e),Ia.forEach(e),n=0;n<Pr.length;n++)r=Pr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Pr.length&&(n=Pr[0],n.blockedOn===null);)cx(n),n.blockedOn===null&&Pr.shift()}var Fs=Tr.ReactCurrentBatchConfig,ic=!0;function ZC(t,e,n,r){var i=Ee,s=Fs.transition;Fs.transition=null;try{Ee=1,eg(t,e,n,r)}finally{Ee=i,Fs.transition=s}}function e2(t,e,n,r){var i=Ee,s=Fs.transition;Fs.transition=null;try{Ee=4,eg(t,e,n,r)}finally{Ee=i,Fs.transition=s}}function eg(t,e,n,r){if(ic){var i=mp(t,e,n,r);if(i===null)tf(t,e,r,sc,n),J0(t,r);else if(XC(i,t,e,n,r))r.stopPropagation();else if(J0(t,r),e&4&&-1<YC.indexOf(t)){for(;i!==null;){var s=fl(i);if(s!==null&&ox(s),s=mp(t,e,n,r),s===null&&tf(t,e,r,sc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else tf(t,e,r,null,n)}}var sc=null;function mp(t,e,n,r){if(sc=null,t=Ym(r),t=Pi(t),t!==null)if(e=ls(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Jw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return sc=t,null}function dx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UC()){case Xm:return 1;case nx:return 4;case nc:case BC:return 16;case rx:return 536870912;default:return 16}default:return 16}}var $r=null,tg=null,Ou=null;function hx(){if(Ou)return Ou;var t,e=tg,n=e.length,r,i="value"in $r?$r.value:$r.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ou=i.slice(t,1<r?1-r:void 0)}function ju(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ou(){return!0}function ev(){return!1}function an(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ou:ev,this.isPropagationStopped=ev,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ou)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ou)},persist:function(){},isPersistent:ou}),e}var _o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ng=an(_o),hl=Fe({},_o,{view:0,detail:0}),t2=an(hl),qh,Gh,Mo,gd=Fe({},hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Mo&&(Mo&&t.type==="mousemove"?(qh=t.screenX-Mo.screenX,Gh=t.screenY-Mo.screenY):Gh=qh=0,Mo=t),qh)},movementY:function(t){return"movementY"in t?t.movementY:Gh}}),tv=an(gd),n2=Fe({},gd,{dataTransfer:0}),r2=an(n2),i2=Fe({},hl,{relatedTarget:0}),Kh=an(i2),s2=Fe({},_o,{animationName:0,elapsedTime:0,pseudoElement:0}),o2=an(s2),a2=Fe({},_o,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),l2=an(a2),u2=Fe({},_o,{data:0}),nv=an(u2),c2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},d2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},h2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function f2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=h2[t])?!!e[t]:!1}function rg(){return f2}var p2=Fe({},hl,{key:function(t){if(t.key){var e=c2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ju(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?d2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rg,charCode:function(t){return t.type==="keypress"?ju(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ju(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),m2=an(p2),g2=Fe({},gd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rv=an(g2),y2=Fe({},hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rg}),v2=an(y2),_2=Fe({},_o,{propertyName:0,elapsedTime:0,pseudoElement:0}),w2=an(_2),x2=Fe({},gd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),E2=an(x2),S2=[9,13,27,32],ig=fr&&"CompositionEvent"in window,ra=null;fr&&"documentMode"in document&&(ra=document.documentMode);var T2=fr&&"TextEvent"in window&&!ra,fx=fr&&(!ig||ra&&8<ra&&11>=ra),iv=String.fromCharCode(32),sv=!1;function px(t,e){switch(t){case"keyup":return S2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Es=!1;function I2(t,e){switch(t){case"compositionend":return mx(e);case"keypress":return e.which!==32?null:(sv=!0,iv);case"textInput":return t=e.data,t===iv&&sv?null:t;default:return null}}function R2(t,e){if(Es)return t==="compositionend"||!ig&&px(t,e)?(t=hx(),Ou=tg=$r=null,Es=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fx&&e.locale!=="ko"?null:e.data;default:return null}}var A2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ov(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!A2[t.type]:e==="textarea"}function gx(t,e,n,r){Gw(r),e=oc(e,"onChange"),0<e.length&&(n=new ng("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ia=null,Aa=null;function C2(t){Ax(t,0)}function yd(t){var e=Is(t);if(Fw(e))return t}function k2(t,e){if(t==="change")return e}var yx=!1;if(fr){var Qh;if(fr){var Yh="oninput"in document;if(!Yh){var av=document.createElement("div");av.setAttribute("oninput","return;"),Yh=typeof av.oninput=="function"}Qh=Yh}else Qh=!1;yx=Qh&&(!document.documentMode||9<document.documentMode)}function lv(){ia&&(ia.detachEvent("onpropertychange",vx),Aa=ia=null)}function vx(t){if(t.propertyName==="value"&&yd(Aa)){var e=[];gx(e,Aa,t,Ym(t)),Xw(C2,e)}}function P2(t,e,n){t==="focusin"?(lv(),ia=e,Aa=n,ia.attachEvent("onpropertychange",vx)):t==="focusout"&&lv()}function N2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yd(Aa)}function b2(t,e){if(t==="click")return yd(e)}function O2(t,e){if(t==="input"||t==="change")return yd(e)}function j2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kn=typeof Object.is=="function"?Object.is:j2;function Ca(t,e){if(kn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Xf.call(e,i)||!kn(t[i],e[i]))return!1}return!0}function uv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cv(t,e){var n=uv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=uv(n)}}function _x(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?_x(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function wx(){for(var t=window,e=Zu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zu(t.document)}return e}function sg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function L2(t){var e=wx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&_x(n.ownerDocument.documentElement,n)){if(r!==null&&sg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=cv(n,s);var o=cv(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var D2=fr&&"documentMode"in document&&11>=document.documentMode,Ss=null,gp=null,sa=null,yp=!1;function dv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yp||Ss==null||Ss!==Zu(r)||(r=Ss,"selectionStart"in r&&sg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sa&&Ca(sa,r)||(sa=r,r=oc(gp,"onSelect"),0<r.length&&(e=new ng("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ss)))}function au(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ts={animationend:au("Animation","AnimationEnd"),animationiteration:au("Animation","AnimationIteration"),animationstart:au("Animation","AnimationStart"),transitionend:au("Transition","TransitionEnd")},Xh={},xx={};fr&&(xx=document.createElement("div").style,"AnimationEvent"in window||(delete Ts.animationend.animation,delete Ts.animationiteration.animation,delete Ts.animationstart.animation),"TransitionEvent"in window||delete Ts.transitionend.transition);function vd(t){if(Xh[t])return Xh[t];if(!Ts[t])return t;var e=Ts[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in xx)return Xh[t]=e[n];return t}var Ex=vd("animationend"),Sx=vd("animationiteration"),Tx=vd("animationstart"),Ix=vd("transitionend"),Rx=new Map,hv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gi(t,e){Rx.set(t,e),as(e,[t])}for(var Jh=0;Jh<hv.length;Jh++){var Zh=hv[Jh],M2=Zh.toLowerCase(),$2=Zh[0].toUpperCase()+Zh.slice(1);gi(M2,"on"+$2)}gi(Ex,"onAnimationEnd");gi(Sx,"onAnimationIteration");gi(Tx,"onAnimationStart");gi("dblclick","onDoubleClick");gi("focusin","onFocus");gi("focusout","onBlur");gi(Ix,"onTransitionEnd");Xs("onMouseEnter",["mouseout","mouseover"]);Xs("onMouseLeave",["mouseout","mouseover"]);Xs("onPointerEnter",["pointerout","pointerover"]);Xs("onPointerLeave",["pointerout","pointerover"]);as("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));as("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));as("onBeforeInput",["compositionend","keypress","textInput","paste"]);as("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));as("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));as("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Go));function fv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,MC(r,e,void 0,t),t.currentTarget=null}function Ax(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;fv(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;fv(i,a,u),s=l}}}if(tc)throw t=hp,tc=!1,hp=null,t}function Pe(t,e){var n=e[Ep];n===void 0&&(n=e[Ep]=new Set);var r=t+"__bubble";n.has(r)||(Cx(e,t,2,!1),n.add(r))}function ef(t,e,n){var r=0;e&&(r|=4),Cx(n,t,r,e)}var lu="_reactListening"+Math.random().toString(36).slice(2);function ka(t){if(!t[lu]){t[lu]=!0,Lw.forEach(function(n){n!=="selectionchange"&&(V2.has(n)||ef(n,!1,t),ef(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[lu]||(e[lu]=!0,ef("selectionchange",!1,e))}}function Cx(t,e,n,r){switch(dx(e)){case 1:var i=ZC;break;case 4:i=e2;break;default:i=eg}n=i.bind(null,e,n,t),i=void 0,!dp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function tf(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Pi(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Xw(function(){var u=s,d=Ym(n),f=[];e:{var p=Rx.get(t);if(p!==void 0){var m=ng,_=t;switch(t){case"keypress":if(ju(n)===0)break e;case"keydown":case"keyup":m=m2;break;case"focusin":_="focus",m=Kh;break;case"focusout":_="blur",m=Kh;break;case"beforeblur":case"afterblur":m=Kh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=tv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=r2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=v2;break;case Ex:case Sx:case Tx:m=o2;break;case Ix:m=w2;break;case"scroll":m=t2;break;case"wheel":m=E2;break;case"copy":case"cut":case"paste":m=l2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=rv}var w=(e&4)!==0,x=!w&&t==="scroll",y=w?p!==null?p+"Capture":null:p;w=[];for(var g=u,v;g!==null;){v=g;var E=v.stateNode;if(v.tag===5&&E!==null&&(v=E,y!==null&&(E=Sa(g,y),E!=null&&w.push(Pa(g,E,v)))),x)break;g=g.return}0<w.length&&(p=new m(p,_,null,n,d),f.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==up&&(_=n.relatedTarget||n.fromElement)&&(Pi(_)||_[pr]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=u,_=_?Pi(_):null,_!==null&&(x=ls(_),_!==x||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=u),m!==_)){if(w=tv,E="onMouseLeave",y="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(w=rv,E="onPointerLeave",y="onPointerEnter",g="pointer"),x=m==null?p:Is(m),v=_==null?p:Is(_),p=new w(E,g+"leave",m,n,d),p.target=x,p.relatedTarget=v,E=null,Pi(d)===u&&(w=new w(y,g+"enter",_,n,d),w.target=v,w.relatedTarget=x,E=w),x=E,m&&_)t:{for(w=m,y=_,g=0,v=w;v;v=ps(v))g++;for(v=0,E=y;E;E=ps(E))v++;for(;0<g-v;)w=ps(w),g--;for(;0<v-g;)y=ps(y),v--;for(;g--;){if(w===y||y!==null&&w===y.alternate)break t;w=ps(w),y=ps(y)}w=null}else w=null;m!==null&&pv(f,p,m,w,!1),_!==null&&x!==null&&pv(f,x,_,w,!0)}}e:{if(p=u?Is(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var S=k2;else if(ov(p))if(yx)S=O2;else{S=N2;var I=P2}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=b2);if(S&&(S=S(t,u))){gx(f,S,n,d);break e}I&&I(t,p,u),t==="focusout"&&(I=p._wrapperState)&&I.controlled&&p.type==="number"&&ip(p,"number",p.value)}switch(I=u?Is(u):window,t){case"focusin":(ov(I)||I.contentEditable==="true")&&(Ss=I,gp=u,sa=null);break;case"focusout":sa=gp=Ss=null;break;case"mousedown":yp=!0;break;case"contextmenu":case"mouseup":case"dragend":yp=!1,dv(f,n,d);break;case"selectionchange":if(D2)break;case"keydown":case"keyup":dv(f,n,d)}var T;if(ig)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Es?px(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(fx&&n.locale!=="ko"&&(Es||R!=="onCompositionStart"?R==="onCompositionEnd"&&Es&&(T=hx()):($r=d,tg="value"in $r?$r.value:$r.textContent,Es=!0)),I=oc(u,R),0<I.length&&(R=new nv(R,t,null,n,d),f.push({event:R,listeners:I}),T?R.data=T:(T=mx(n),T!==null&&(R.data=T)))),(T=T2?I2(t,n):R2(t,n))&&(u=oc(u,"onBeforeInput"),0<u.length&&(d=new nv("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=T))}Ax(f,e)})}function Pa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function oc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Sa(t,n),s!=null&&r.unshift(Pa(t,s,i)),s=Sa(t,e),s!=null&&r.push(Pa(t,s,i))),t=t.return}return r}function ps(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pv(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Sa(n,s),l!=null&&o.unshift(Pa(n,l,a))):i||(l=Sa(n,s),l!=null&&o.push(Pa(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var F2=/\r\n?/g,U2=/\u0000|\uFFFD/g;function mv(t){return(typeof t=="string"?t:""+t).replace(F2,`
`).replace(U2,"")}function uu(t,e,n){if(e=mv(e),mv(t)!==e&&n)throw Error(O(425))}function ac(){}var vp=null,_p=null;function wp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xp=typeof setTimeout=="function"?setTimeout:void 0,B2=typeof clearTimeout=="function"?clearTimeout:void 0,gv=typeof Promise=="function"?Promise:void 0,z2=typeof queueMicrotask=="function"?queueMicrotask:typeof gv<"u"?function(t){return gv.resolve(null).then(t).catch(W2)}:xp;function W2(t){setTimeout(function(){throw t})}function nf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ra(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ra(e)}function qr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function yv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wo=Math.random().toString(36).slice(2),Ln="__reactFiber$"+wo,Na="__reactProps$"+wo,pr="__reactContainer$"+wo,Ep="__reactEvents$"+wo,H2="__reactListeners$"+wo,q2="__reactHandles$"+wo;function Pi(t){var e=t[Ln];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pr]||n[Ln]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=yv(t);t!==null;){if(n=t[Ln])return n;t=yv(t)}return e}t=n,n=t.parentNode}return null}function fl(t){return t=t[Ln]||t[pr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Is(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function _d(t){return t[Na]||null}var Sp=[],Rs=-1;function yi(t){return{current:t}}function Oe(t){0>Rs||(t.current=Sp[Rs],Sp[Rs]=null,Rs--)}function ke(t,e){Rs++,Sp[Rs]=t.current,t.current=e}var ii={},kt=yi(ii),Ht=yi(!1),Hi=ii;function Js(t,e){var n=t.type.contextTypes;if(!n)return ii;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function qt(t){return t=t.childContextTypes,t!=null}function lc(){Oe(Ht),Oe(kt)}function vv(t,e,n){if(kt.current!==ii)throw Error(O(168));ke(kt,e),ke(Ht,n)}function kx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(O(108,PC(t)||"Unknown",i));return Fe({},n,r)}function uc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ii,Hi=kt.current,ke(kt,t),ke(Ht,Ht.current),!0}function _v(t,e,n){var r=t.stateNode;if(!r)throw Error(O(169));n?(t=kx(t,e,Hi),r.__reactInternalMemoizedMergedChildContext=t,Oe(Ht),Oe(kt),ke(kt,t)):Oe(Ht),ke(Ht,n)}var ir=null,wd=!1,rf=!1;function Px(t){ir===null?ir=[t]:ir.push(t)}function G2(t){wd=!0,Px(t)}function vi(){if(!rf&&ir!==null){rf=!0;var t=0,e=Ee;try{var n=ir;for(Ee=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ir=null,wd=!1}catch(i){throw ir!==null&&(ir=ir.slice(t+1)),tx(Xm,vi),i}finally{Ee=e,rf=!1}}return null}var As=[],Cs=0,cc=null,dc=0,cn=[],dn=0,qi=null,sr=1,or="";function Ri(t,e){As[Cs++]=dc,As[Cs++]=cc,cc=t,dc=e}function Nx(t,e,n){cn[dn++]=sr,cn[dn++]=or,cn[dn++]=qi,qi=t;var r=sr;t=or;var i=32-Rn(r)-1;r&=~(1<<i),n+=1;var s=32-Rn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,sr=1<<32-Rn(e)+i|n<<i|r,or=s+t}else sr=1<<s|n<<i|r,or=t}function og(t){t.return!==null&&(Ri(t,1),Nx(t,1,0))}function ag(t){for(;t===cc;)cc=As[--Cs],As[Cs]=null,dc=As[--Cs],As[Cs]=null;for(;t===qi;)qi=cn[--dn],cn[dn]=null,or=cn[--dn],cn[dn]=null,sr=cn[--dn],cn[dn]=null}var Zt=null,Xt=null,De=!1,Sn=null;function bx(t,e){var n=pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function wv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zt=t,Xt=qr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zt=t,Xt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qi!==null?{id:sr,overflow:or}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zt=t,Xt=null,!0):!1;default:return!1}}function Tp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ip(t){if(De){var e=Xt;if(e){var n=e;if(!wv(t,e)){if(Tp(t))throw Error(O(418));e=qr(n.nextSibling);var r=Zt;e&&wv(t,e)?bx(r,n):(t.flags=t.flags&-4097|2,De=!1,Zt=t)}}else{if(Tp(t))throw Error(O(418));t.flags=t.flags&-4097|2,De=!1,Zt=t}}}function xv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zt=t}function cu(t){if(t!==Zt)return!1;if(!De)return xv(t),De=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!wp(t.type,t.memoizedProps)),e&&(e=Xt)){if(Tp(t))throw Ox(),Error(O(418));for(;e;)bx(t,e),e=qr(e.nextSibling)}if(xv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xt=qr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xt=null}}else Xt=Zt?qr(t.stateNode.nextSibling):null;return!0}function Ox(){for(var t=Xt;t;)t=qr(t.nextSibling)}function Zs(){Xt=Zt=null,De=!1}function lg(t){Sn===null?Sn=[t]:Sn.push(t)}var K2=Tr.ReactCurrentBatchConfig;function xn(t,e){if(t&&t.defaultProps){e=Fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var hc=yi(null),fc=null,ks=null,ug=null;function cg(){ug=ks=fc=null}function dg(t){var e=hc.current;Oe(hc),t._currentValue=e}function Rp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Us(t,e){fc=t,ug=ks=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Wt=!0),t.firstContext=null)}function gn(t){var e=t._currentValue;if(ug!==t)if(t={context:t,memoizedValue:e,next:null},ks===null){if(fc===null)throw Error(O(308));ks=t,fc.dependencies={lanes:0,firstContext:t}}else ks=ks.next=t;return e}var Ni=null;function hg(t){Ni===null?Ni=[t]:Ni.push(t)}function jx(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,hg(e)):(n.next=i.next,i.next=n),e.interleaved=n,mr(t,r)}function mr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var kr=!1;function fg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,mr(t,n)}return i=r.interleaved,i===null?(e.next=e,hg(r)):(e.next=i.next,i.next=e),r.interleaved=e,mr(t,n)}function Lu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Jm(t,n)}}function Ev(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function pc(t,e,n,r){var i=t.updateQueue;kr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,d=u=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,w=a;switch(p=e,m=n,w.tag){case 1:if(_=w.payload,typeof _=="function"){f=_.call(m,f,p);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=w.payload,p=typeof _=="function"?_.call(m,f,p):_,p==null)break e;f=Fe({},f,p);break e;case 2:kr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=m,l=f):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ki|=o,t.lanes=o,t.memoizedState=f}}function Sv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(O(191,i));i.call(r)}}}var Dx=new jw.Component().refs;function Ap(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xd={isMounted:function(t){return(t=t._reactInternals)?ls(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$t(),i=Qr(t),s=cr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Gr(t,s,i),e!==null&&(An(e,t,i,r),Lu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$t(),i=Qr(t),s=cr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Gr(t,s,i),e!==null&&(An(e,t,i,r),Lu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$t(),r=Qr(t),i=cr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Gr(t,i,r),e!==null&&(An(e,t,r,n),Lu(e,t,r))}};function Tv(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ca(n,r)||!Ca(i,s):!0}function Mx(t,e,n){var r=!1,i=ii,s=e.contextType;return typeof s=="object"&&s!==null?s=gn(s):(i=qt(e)?Hi:kt.current,r=e.contextTypes,s=(r=r!=null)?Js(t,i):ii),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Iv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xd.enqueueReplaceState(e,e.state,null)}function Cp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Dx,fg(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=gn(s):(s=qt(e)?Hi:kt.current,i.context=Js(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ap(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&xd.enqueueReplaceState(i,i.state,null),pc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function $o(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Dx&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,t))}return t}function du(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Rv(t){var e=t._init;return e(t._payload)}function $x(t){function e(y,g){if(t){var v=y.deletions;v===null?(y.deletions=[g],y.flags|=16):v.push(g)}}function n(y,g){if(!t)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function i(y,g){return y=Yr(y,g),y.index=0,y.sibling=null,y}function s(y,g,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<g?(y.flags|=2,g):v):(y.flags|=2,g)):(y.flags|=1048576,g)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,g,v,E){return g===null||g.tag!==6?(g=df(v,y.mode,E),g.return=y,g):(g=i(g,v),g.return=y,g)}function l(y,g,v,E){var S=v.type;return S===xs?d(y,g,v.props.children,E,v.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Cr&&Rv(S)===g.type)?(E=i(g,v.props),E.ref=$o(y,g,v),E.return=y,E):(E=Uu(v.type,v.key,v.props,null,y.mode,E),E.ref=$o(y,g,v),E.return=y,E)}function u(y,g,v,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=hf(v,y.mode,E),g.return=y,g):(g=i(g,v.children||[]),g.return=y,g)}function d(y,g,v,E,S){return g===null||g.tag!==7?(g=Vi(v,y.mode,E,S),g.return=y,g):(g=i(g,v),g.return=y,g)}function f(y,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=df(""+g,y.mode,v),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case eu:return v=Uu(g.type,g.key,g.props,null,y.mode,v),v.ref=$o(y,null,g),v.return=y,v;case ws:return g=hf(g,y.mode,v),g.return=y,g;case Cr:var E=g._init;return f(y,E(g._payload),v)}if(Ho(g)||Oo(g))return g=Vi(g,y.mode,v,null),g.return=y,g;du(y,g)}return null}function p(y,g,v,E){var S=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:a(y,g,""+v,E);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case eu:return v.key===S?l(y,g,v,E):null;case ws:return v.key===S?u(y,g,v,E):null;case Cr:return S=v._init,p(y,g,S(v._payload),E)}if(Ho(v)||Oo(v))return S!==null?null:d(y,g,v,E,null);du(y,v)}return null}function m(y,g,v,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(v)||null,a(g,y,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case eu:return y=y.get(E.key===null?v:E.key)||null,l(g,y,E,S);case ws:return y=y.get(E.key===null?v:E.key)||null,u(g,y,E,S);case Cr:var I=E._init;return m(y,g,v,I(E._payload),S)}if(Ho(E)||Oo(E))return y=y.get(v)||null,d(g,y,E,S,null);du(g,E)}return null}function _(y,g,v,E){for(var S=null,I=null,T=g,R=g=0,C=null;T!==null&&R<v.length;R++){T.index>R?(C=T,T=null):C=T.sibling;var A=p(y,T,v[R],E);if(A===null){T===null&&(T=C);break}t&&T&&A.alternate===null&&e(y,T),g=s(A,g,R),I===null?S=A:I.sibling=A,I=A,T=C}if(R===v.length)return n(y,T),De&&Ri(y,R),S;if(T===null){for(;R<v.length;R++)T=f(y,v[R],E),T!==null&&(g=s(T,g,R),I===null?S=T:I.sibling=T,I=T);return De&&Ri(y,R),S}for(T=r(y,T);R<v.length;R++)C=m(T,y,R,v[R],E),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?R:C.key),g=s(C,g,R),I===null?S=C:I.sibling=C,I=C);return t&&T.forEach(function(k){return e(y,k)}),De&&Ri(y,R),S}function w(y,g,v,E){var S=Oo(v);if(typeof S!="function")throw Error(O(150));if(v=S.call(v),v==null)throw Error(O(151));for(var I=S=null,T=g,R=g=0,C=null,A=v.next();T!==null&&!A.done;R++,A=v.next()){T.index>R?(C=T,T=null):C=T.sibling;var k=p(y,T,A.value,E);if(k===null){T===null&&(T=C);break}t&&T&&k.alternate===null&&e(y,T),g=s(k,g,R),I===null?S=k:I.sibling=k,I=k,T=C}if(A.done)return n(y,T),De&&Ri(y,R),S;if(T===null){for(;!A.done;R++,A=v.next())A=f(y,A.value,E),A!==null&&(g=s(A,g,R),I===null?S=A:I.sibling=A,I=A);return De&&Ri(y,R),S}for(T=r(y,T);!A.done;R++,A=v.next())A=m(T,y,R,A.value,E),A!==null&&(t&&A.alternate!==null&&T.delete(A.key===null?R:A.key),g=s(A,g,R),I===null?S=A:I.sibling=A,I=A);return t&&T.forEach(function(z){return e(y,z)}),De&&Ri(y,R),S}function x(y,g,v,E){if(typeof v=="object"&&v!==null&&v.type===xs&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case eu:e:{for(var S=v.key,I=g;I!==null;){if(I.key===S){if(S=v.type,S===xs){if(I.tag===7){n(y,I.sibling),g=i(I,v.props.children),g.return=y,y=g;break e}}else if(I.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Cr&&Rv(S)===I.type){n(y,I.sibling),g=i(I,v.props),g.ref=$o(y,I,v),g.return=y,y=g;break e}n(y,I);break}else e(y,I);I=I.sibling}v.type===xs?(g=Vi(v.props.children,y.mode,E,v.key),g.return=y,y=g):(E=Uu(v.type,v.key,v.props,null,y.mode,E),E.ref=$o(y,g,v),E.return=y,y=E)}return o(y);case ws:e:{for(I=v.key;g!==null;){if(g.key===I)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){n(y,g.sibling),g=i(g,v.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else e(y,g);g=g.sibling}g=hf(v,y.mode,E),g.return=y,y=g}return o(y);case Cr:return I=v._init,x(y,g,I(v._payload),E)}if(Ho(v))return _(y,g,v,E);if(Oo(v))return w(y,g,v,E);du(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(n(y,g.sibling),g=i(g,v),g.return=y,y=g):(n(y,g),g=df(v,y.mode,E),g.return=y,y=g),o(y)):n(y,g)}return x}var eo=$x(!0),Vx=$x(!1),pl={},Wn=yi(pl),ba=yi(pl),Oa=yi(pl);function bi(t){if(t===pl)throw Error(O(174));return t}function pg(t,e){switch(ke(Oa,e),ke(ba,t),ke(Wn,pl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:op(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=op(e,t)}Oe(Wn),ke(Wn,e)}function to(){Oe(Wn),Oe(ba),Oe(Oa)}function Fx(t){bi(Oa.current);var e=bi(Wn.current),n=op(e,t.type);e!==n&&(ke(ba,t),ke(Wn,n))}function mg(t){ba.current===t&&(Oe(Wn),Oe(ba))}var $e=yi(0);function mc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sf=[];function gg(){for(var t=0;t<sf.length;t++)sf[t]._workInProgressVersionPrimary=null;sf.length=0}var Du=Tr.ReactCurrentDispatcher,of=Tr.ReactCurrentBatchConfig,Gi=0,Ve=null,Ze=null,it=null,gc=!1,oa=!1,ja=0,Q2=0;function yt(){throw Error(O(321))}function yg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!kn(t[n],e[n]))return!1;return!0}function vg(t,e,n,r,i,s){if(Gi=s,Ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Du.current=t===null||t.memoizedState===null?Z2:ek,t=n(r,i),oa){s=0;do{if(oa=!1,ja=0,25<=s)throw Error(O(301));s+=1,it=Ze=null,e.updateQueue=null,Du.current=tk,t=n(r,i)}while(oa)}if(Du.current=yc,e=Ze!==null&&Ze.next!==null,Gi=0,it=Ze=Ve=null,gc=!1,e)throw Error(O(300));return t}function _g(){var t=ja!==0;return ja=0,t}function jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Ve.memoizedState=it=t:it=it.next=t,it}function yn(){if(Ze===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var e=it===null?Ve.memoizedState:it.next;if(e!==null)it=e,Ze=t;else{if(t===null)throw Error(O(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},it===null?Ve.memoizedState=it=t:it=it.next=t}return it}function La(t,e){return typeof e=="function"?e(t):e}function af(t){var e=yn(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=Ze,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((Gi&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Ve.lanes|=d,Ki|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,kn(r,e.memoizedState)||(Wt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ve.lanes|=s,Ki|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function lf(t){var e=yn(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);kn(s,e.memoizedState)||(Wt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Ux(){}function Bx(t,e){var n=Ve,r=yn(),i=e(),s=!kn(r.memoizedState,i);if(s&&(r.memoizedState=i,Wt=!0),r=r.queue,wg(Hx.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||it!==null&&it.memoizedState.tag&1){if(n.flags|=2048,Da(9,Wx.bind(null,n,r,i,e),void 0,null),st===null)throw Error(O(349));Gi&30||zx(n,e,i)}return i}function zx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Wx(t,e,n,r){e.value=n,e.getSnapshot=r,qx(e)&&Gx(t)}function Hx(t,e,n){return n(function(){qx(e)&&Gx(t)})}function qx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!kn(t,n)}catch{return!0}}function Gx(t){var e=mr(t,1);e!==null&&An(e,t,1,-1)}function Av(t){var e=jn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:t},e.queue=t,t=t.dispatch=J2.bind(null,Ve,t),[e.memoizedState,t]}function Da(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Kx(){return yn().memoizedState}function Mu(t,e,n,r){var i=jn();Ve.flags|=t,i.memoizedState=Da(1|e,n,void 0,r===void 0?null:r)}function Ed(t,e,n,r){var i=yn();r=r===void 0?null:r;var s=void 0;if(Ze!==null){var o=Ze.memoizedState;if(s=o.destroy,r!==null&&yg(r,o.deps)){i.memoizedState=Da(e,n,s,r);return}}Ve.flags|=t,i.memoizedState=Da(1|e,n,s,r)}function Cv(t,e){return Mu(8390656,8,t,e)}function wg(t,e){return Ed(2048,8,t,e)}function Qx(t,e){return Ed(4,2,t,e)}function Yx(t,e){return Ed(4,4,t,e)}function Xx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Jx(t,e,n){return n=n!=null?n.concat([t]):null,Ed(4,4,Xx.bind(null,e,t),n)}function xg(){}function Zx(t,e){var n=yn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function eE(t,e){var n=yn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function tE(t,e,n){return Gi&21?(kn(n,e)||(n=ix(),Ve.lanes|=n,Ki|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Wt=!0),t.memoizedState=n)}function Y2(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var r=of.transition;of.transition={};try{t(!1),e()}finally{Ee=n,of.transition=r}}function nE(){return yn().memoizedState}function X2(t,e,n){var r=Qr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rE(t))iE(e,n);else if(n=jx(t,e,n,r),n!==null){var i=$t();An(n,t,r,i),sE(n,e,r)}}function J2(t,e,n){var r=Qr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rE(t))iE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,kn(a,o)){var l=e.interleaved;l===null?(i.next=i,hg(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=jx(t,e,i,r),n!==null&&(i=$t(),An(n,t,r,i),sE(n,e,r))}}function rE(t){var e=t.alternate;return t===Ve||e!==null&&e===Ve}function iE(t,e){oa=gc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Jm(t,n)}}var yc={readContext:gn,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},Z2={readContext:gn,useCallback:function(t,e){return jn().memoizedState=[t,e===void 0?null:e],t},useContext:gn,useEffect:Cv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Mu(4194308,4,Xx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Mu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Mu(4,2,t,e)},useMemo:function(t,e){var n=jn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=jn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=X2.bind(null,Ve,t),[r.memoizedState,t]},useRef:function(t){var e=jn();return t={current:t},e.memoizedState=t},useState:Av,useDebugValue:xg,useDeferredValue:function(t){return jn().memoizedState=t},useTransition:function(){var t=Av(!1),e=t[0];return t=Y2.bind(null,t[1]),jn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ve,i=jn();if(De){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),st===null)throw Error(O(349));Gi&30||zx(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Cv(Hx.bind(null,r,s,t),[t]),r.flags|=2048,Da(9,Wx.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=jn(),e=st.identifierPrefix;if(De){var n=or,r=sr;n=(r&~(1<<32-Rn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ja++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Q2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ek={readContext:gn,useCallback:Zx,useContext:gn,useEffect:wg,useImperativeHandle:Jx,useInsertionEffect:Qx,useLayoutEffect:Yx,useMemo:eE,useReducer:af,useRef:Kx,useState:function(){return af(La)},useDebugValue:xg,useDeferredValue:function(t){var e=yn();return tE(e,Ze.memoizedState,t)},useTransition:function(){var t=af(La)[0],e=yn().memoizedState;return[t,e]},useMutableSource:Ux,useSyncExternalStore:Bx,useId:nE,unstable_isNewReconciler:!1},tk={readContext:gn,useCallback:Zx,useContext:gn,useEffect:wg,useImperativeHandle:Jx,useInsertionEffect:Qx,useLayoutEffect:Yx,useMemo:eE,useReducer:lf,useRef:Kx,useState:function(){return lf(La)},useDebugValue:xg,useDeferredValue:function(t){var e=yn();return Ze===null?e.memoizedState=t:tE(e,Ze.memoizedState,t)},useTransition:function(){var t=lf(La)[0],e=yn().memoizedState;return[t,e]},useMutableSource:Ux,useSyncExternalStore:Bx,useId:nE,unstable_isNewReconciler:!1};function no(t,e){try{var n="",r=e;do n+=kC(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function uf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function kp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var nk=typeof WeakMap=="function"?WeakMap:Map;function oE(t,e,n){n=cr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_c||(_c=!0,Vp=r),kp(t,e)},n}function aE(t,e,n){n=cr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){kp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){kp(t,e),typeof r!="function"&&(Kr===null?Kr=new Set([this]):Kr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function kv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new nk;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=gk.bind(null,t,e,n),e.then(t,t))}function Pv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Nv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=cr(-1,1),e.tag=2,Gr(n,e,1))),n.lanes|=1),t)}var rk=Tr.ReactCurrentOwner,Wt=!1;function Lt(t,e,n,r){e.child=t===null?Vx(e,null,n,r):eo(e,t.child,n,r)}function bv(t,e,n,r,i){n=n.render;var s=e.ref;return Us(e,i),r=vg(t,e,n,r,s,i),n=_g(),t!==null&&!Wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,gr(t,e,i)):(De&&n&&og(e),e.flags|=1,Lt(t,e,r,i),e.child)}function Ov(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!kg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,lE(t,e,s,r,i)):(t=Uu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ca,n(o,r)&&t.ref===e.ref)return gr(t,e,i)}return e.flags|=1,t=Yr(s,r),t.ref=e.ref,t.return=e,e.child=t}function lE(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ca(s,r)&&t.ref===e.ref)if(Wt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Wt=!0);else return e.lanes=t.lanes,gr(t,e,i)}return Pp(t,e,n,r,i)}function uE(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(Ns,Yt),Yt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ke(Ns,Yt),Yt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ke(Ns,Yt),Yt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ke(Ns,Yt),Yt|=r;return Lt(t,e,i,n),e.child}function cE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Pp(t,e,n,r,i){var s=qt(n)?Hi:kt.current;return s=Js(e,s),Us(e,i),n=vg(t,e,n,r,s,i),r=_g(),t!==null&&!Wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,gr(t,e,i)):(De&&r&&og(e),e.flags|=1,Lt(t,e,n,i),e.child)}function jv(t,e,n,r,i){if(qt(n)){var s=!0;uc(e)}else s=!1;if(Us(e,i),e.stateNode===null)$u(t,e),Mx(e,n,r),Cp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=gn(u):(u=qt(n)?Hi:kt.current,u=Js(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Iv(e,o,r,u),kr=!1;var p=e.memoizedState;o.state=p,pc(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Ht.current||kr?(typeof d=="function"&&(Ap(e,n,d,r),l=e.memoizedState),(a=kr||Tv(e,n,a,r,p,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Lx(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:xn(e.type,a),o.props=u,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=gn(l):(l=qt(n)?Hi:kt.current,l=Js(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&Iv(e,o,r,l),kr=!1,p=e.memoizedState,o.state=p,pc(e,r,o,i);var _=e.memoizedState;a!==f||p!==_||Ht.current||kr?(typeof m=="function"&&(Ap(e,n,m,r),_=e.memoizedState),(u=kr||Tv(e,n,u,r,p,_,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Np(t,e,n,r,s,i)}function Np(t,e,n,r,i,s){cE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&_v(e,n,!1),gr(t,e,s);r=e.stateNode,rk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=eo(e,t.child,null,s),e.child=eo(e,null,a,s)):Lt(t,e,a,s),e.memoizedState=r.state,i&&_v(e,n,!0),e.child}function dE(t){var e=t.stateNode;e.pendingContext?vv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vv(t,e.context,!1),pg(t,e.containerInfo)}function Lv(t,e,n,r,i){return Zs(),lg(i),e.flags|=256,Lt(t,e,n,r),e.child}var bp={dehydrated:null,treeContext:null,retryLane:0};function Op(t){return{baseLanes:t,cachePool:null,transitions:null}}function hE(t,e,n){var r=e.pendingProps,i=$e.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ke($e,i&1),t===null)return Ip(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Id(o,r,0,null),t=Vi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Op(n),e.memoizedState=bp,t):Eg(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return ik(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Yr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Yr(a,s):(s=Vi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Op(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=bp,r}return s=t.child,t=s.sibling,r=Yr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Eg(t,e){return e=Id({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hu(t,e,n,r){return r!==null&&lg(r),eo(e,t.child,null,n),t=Eg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ik(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=uf(Error(O(422))),hu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Id({mode:"visible",children:r.children},i,0,null),s=Vi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&eo(e,t.child,null,o),e.child.memoizedState=Op(o),e.memoizedState=bp,s);if(!(e.mode&1))return hu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(O(419)),r=uf(s,r,void 0),hu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Wt||a){if(r=st,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,mr(t,i),An(r,t,i,-1))}return Cg(),r=uf(Error(O(421))),hu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=yk.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Xt=qr(i.nextSibling),Zt=e,De=!0,Sn=null,t!==null&&(cn[dn++]=sr,cn[dn++]=or,cn[dn++]=qi,sr=t.id,or=t.overflow,qi=e),e=Eg(e,r.children),e.flags|=4096,e)}function Dv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Rp(t.return,e,n)}function cf(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function fE(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Lt(t,e,r.children,n),r=$e.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dv(t,n,e);else if(t.tag===19)Dv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ke($e,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&mc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),cf(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&mc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}cf(e,!0,n,null,s);break;case"together":cf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $u(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ki|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=Yr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Yr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sk(t,e,n){switch(e.tag){case 3:dE(e),Zs();break;case 5:Fx(e);break;case 1:qt(e.type)&&uc(e);break;case 4:pg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ke(hc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ke($e,$e.current&1),e.flags|=128,null):n&e.child.childLanes?hE(t,e,n):(ke($e,$e.current&1),t=gr(t,e,n),t!==null?t.sibling:null);ke($e,$e.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return fE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ke($e,$e.current),r)break;return null;case 22:case 23:return e.lanes=0,uE(t,e,n)}return gr(t,e,n)}var pE,jp,mE,gE;pE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jp=function(){};mE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,bi(Wn.current);var s=null;switch(n){case"input":i=np(t,i),r=np(t,r),s=[];break;case"select":i=Fe({},i,{value:void 0}),r=Fe({},r,{value:void 0}),s=[];break;case"textarea":i=sp(t,i),r=sp(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ac)}ap(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(xa.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(xa.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Pe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};gE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vo(t,e){if(!De)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ok(t,e,n){var r=e.pendingProps;switch(ag(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(e),null;case 1:return qt(e.type)&&lc(),vt(e),null;case 3:return r=e.stateNode,to(),Oe(Ht),Oe(kt),gg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(cu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Sn!==null&&(Bp(Sn),Sn=null))),jp(t,e),vt(e),null;case 5:mg(e);var i=bi(Oa.current);if(n=e.type,t!==null&&e.stateNode!=null)mE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(O(166));return vt(e),null}if(t=bi(Wn.current),cu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ln]=e,r[Na]=s,t=(e.mode&1)!==0,n){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(i=0;i<Go.length;i++)Pe(Go[i],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":H0(r,s),Pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Pe("invalid",r);break;case"textarea":G0(r,s),Pe("invalid",r)}ap(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&uu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&uu(r.textContent,a,t),i=["children",""+a]):xa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Pe("scroll",r)}switch(n){case"input":tu(r),q0(r,s,!0);break;case"textarea":tu(r),K0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ac)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=zw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ln]=e,t[Na]=r,pE(t,e,!1,!1),e.stateNode=t;e:{switch(o=lp(n,r),n){case"dialog":Pe("cancel",t),Pe("close",t),i=r;break;case"iframe":case"object":case"embed":Pe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Go.length;i++)Pe(Go[i],t);i=r;break;case"source":Pe("error",t),i=r;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),i=r;break;case"details":Pe("toggle",t),i=r;break;case"input":H0(t,r),i=np(t,r),Pe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Fe({},r,{value:void 0}),Pe("invalid",t);break;case"textarea":G0(t,r),i=sp(t,r),Pe("invalid",t);break;default:i=r}ap(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?qw(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ww(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ea(t,l):typeof l=="number"&&Ea(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(xa.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Pe("scroll",t):l!=null&&qm(t,s,l,o))}switch(n){case"input":tu(t),q0(t,r,!1);break;case"textarea":tu(t),K0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ri(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ms(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ms(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ac)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vt(e),null;case 6:if(t&&e.stateNode!=null)gE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(O(166));if(n=bi(Oa.current),bi(Wn.current),cu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ln]=e,(s=r.nodeValue!==n)&&(t=Zt,t!==null))switch(t.tag){case 3:uu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&uu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ln]=e,e.stateNode=r}return vt(e),null;case 13:if(Oe($e),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(De&&Xt!==null&&e.mode&1&&!(e.flags&128))Ox(),Zs(),e.flags|=98560,s=!1;else if(s=cu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(O(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(O(317));s[Ln]=e}else Zs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vt(e),s=!1}else Sn!==null&&(Bp(Sn),Sn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||$e.current&1?tt===0&&(tt=3):Cg())),e.updateQueue!==null&&(e.flags|=4),vt(e),null);case 4:return to(),jp(t,e),t===null&&ka(e.stateNode.containerInfo),vt(e),null;case 10:return dg(e.type._context),vt(e),null;case 17:return qt(e.type)&&lc(),vt(e),null;case 19:if(Oe($e),s=e.memoizedState,s===null)return vt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Vo(s,!1);else{if(tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=mc(t),o!==null){for(e.flags|=128,Vo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ke($e,$e.current&1|2),e.child}t=t.sibling}s.tail!==null&&qe()>ro&&(e.flags|=128,r=!0,Vo(s,!1),e.lanes=4194304)}else{if(!r)if(t=mc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!De)return vt(e),null}else 2*qe()-s.renderingStartTime>ro&&n!==1073741824&&(e.flags|=128,r=!0,Vo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=qe(),e.sibling=null,n=$e.current,ke($e,r?n&1|2:n&1),e):(vt(e),null);case 22:case 23:return Ag(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Yt&1073741824&&(vt(e),e.subtreeFlags&6&&(e.flags|=8192)):vt(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function ak(t,e){switch(ag(e),e.tag){case 1:return qt(e.type)&&lc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return to(),Oe(Ht),Oe(kt),gg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return mg(e),null;case 13:if(Oe($e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));Zs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe($e),null;case 4:return to(),null;case 10:return dg(e.type._context),null;case 22:case 23:return Ag(),null;case 24:return null;default:return null}}var fu=!1,Et=!1,lk=typeof WeakSet=="function"?WeakSet:Set,q=null;function Ps(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Be(t,e,r)}else n.current=null}function Lp(t,e,n){try{n()}catch(r){Be(t,e,r)}}var Mv=!1;function uk(t,e){if(vp=ic,t=wx(),sg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,f=t,p=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===t)break t;if(p===n&&++u===i&&(a=o),p===s&&++d===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(_p={focusedElem:t,selectionRange:n},ic=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var w=_.memoizedProps,x=_.memoizedState,y=e.stateNode,g=y.getSnapshotBeforeUpdate(e.elementType===e.type?w:xn(e.type,w),x);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(E){Be(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return _=Mv,Mv=!1,_}function aa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Lp(e,n,s)}i=i.next}while(i!==r)}}function Sd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Dp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function yE(t){var e=t.alternate;e!==null&&(t.alternate=null,yE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ln],delete e[Na],delete e[Ep],delete e[H2],delete e[q2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function vE(t){return t.tag===5||t.tag===3||t.tag===4}function $v(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ac));else if(r!==4&&(t=t.child,t!==null))for(Mp(t,e,n),t=t.sibling;t!==null;)Mp(t,e,n),t=t.sibling}function $p(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($p(t,e,n),t=t.sibling;t!==null;)$p(t,e,n),t=t.sibling}var ut=null,En=!1;function Rr(t,e,n){for(n=n.child;n!==null;)_E(t,e,n),n=n.sibling}function _E(t,e,n){if(zn&&typeof zn.onCommitFiberUnmount=="function")try{zn.onCommitFiberUnmount(md,n)}catch{}switch(n.tag){case 5:Et||Ps(n,e);case 6:var r=ut,i=En;ut=null,Rr(t,e,n),ut=r,En=i,ut!==null&&(En?(t=ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(En?(t=ut,n=n.stateNode,t.nodeType===8?nf(t.parentNode,n):t.nodeType===1&&nf(t,n),Ra(t)):nf(ut,n.stateNode));break;case 4:r=ut,i=En,ut=n.stateNode.containerInfo,En=!0,Rr(t,e,n),ut=r,En=i;break;case 0:case 11:case 14:case 15:if(!Et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Lp(n,e,o),i=i.next}while(i!==r)}Rr(t,e,n);break;case 1:if(!Et&&(Ps(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Be(n,e,a)}Rr(t,e,n);break;case 21:Rr(t,e,n);break;case 22:n.mode&1?(Et=(r=Et)||n.memoizedState!==null,Rr(t,e,n),Et=r):Rr(t,e,n);break;default:Rr(t,e,n)}}function Vv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new lk),e.forEach(function(r){var i=vk.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function wn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ut=a.stateNode,En=!1;break e;case 3:ut=a.stateNode.containerInfo,En=!0;break e;case 4:ut=a.stateNode.containerInfo,En=!0;break e}a=a.return}if(ut===null)throw Error(O(160));_E(s,o,i),ut=null,En=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Be(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)wE(e,t),e=e.sibling}function wE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(wn(e,t),On(t),r&4){try{aa(3,t,t.return),Sd(3,t)}catch(w){Be(t,t.return,w)}try{aa(5,t,t.return)}catch(w){Be(t,t.return,w)}}break;case 1:wn(e,t),On(t),r&512&&n!==null&&Ps(n,n.return);break;case 5:if(wn(e,t),On(t),r&512&&n!==null&&Ps(n,n.return),t.flags&32){var i=t.stateNode;try{Ea(i,"")}catch(w){Be(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Uw(i,s),lp(a,o);var u=lp(a,s);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?qw(i,f):d==="dangerouslySetInnerHTML"?Ww(i,f):d==="children"?Ea(i,f):qm(i,d,f,u)}switch(a){case"input":rp(i,s);break;case"textarea":Bw(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Ms(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Ms(i,!!s.multiple,s.defaultValue,!0):Ms(i,!!s.multiple,s.multiple?[]:"",!1))}i[Na]=s}catch(w){Be(t,t.return,w)}}break;case 6:if(wn(e,t),On(t),r&4){if(t.stateNode===null)throw Error(O(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){Be(t,t.return,w)}}break;case 3:if(wn(e,t),On(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ra(e.containerInfo)}catch(w){Be(t,t.return,w)}break;case 4:wn(e,t),On(t);break;case 13:wn(e,t),On(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ig=qe())),r&4&&Vv(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Et=(u=Et)||d,wn(e,t),Et=u):wn(e,t),On(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(q=t,d=t.child;d!==null;){for(f=q=d;q!==null;){switch(p=q,m=p.child,p.tag){case 0:case 11:case 14:case 15:aa(4,p,p.return);break;case 1:Ps(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(w){Be(r,n,w)}}break;case 5:Ps(p,p.return);break;case 22:if(p.memoizedState!==null){Uv(f);continue}}m!==null?(m.return=p,q=m):Uv(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Hw("display",o))}catch(w){Be(t,t.return,w)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(w){Be(t,t.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:wn(e,t),On(t),r&4&&Vv(t);break;case 21:break;default:wn(e,t),On(t)}}function On(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(vE(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ea(i,""),r.flags&=-33);var s=$v(t);$p(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=$v(t);Mp(t,a,o);break;default:throw Error(O(161))}}catch(l){Be(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ck(t,e,n){q=t,xE(t)}function xE(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var i=q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||fu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Et;a=fu;var u=Et;if(fu=o,(Et=l)&&!u)for(q=i;q!==null;)o=q,l=o.child,o.tag===22&&o.memoizedState!==null?Bv(i):l!==null?(l.return=o,q=l):Bv(i);for(;s!==null;)q=s,xE(s),s=s.sibling;q=i,fu=a,Et=u}Fv(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,q=s):Fv(t)}}function Fv(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Et||Sd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Et)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:xn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Sv(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Sv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Ra(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}Et||e.flags&512&&Dp(e)}catch(p){Be(e,e.return,p)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Uv(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Bv(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sd(4,e)}catch(l){Be(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Be(e,i,l)}}var s=e.return;try{Dp(e)}catch(l){Be(e,s,l)}break;case 5:var o=e.return;try{Dp(e)}catch(l){Be(e,o,l)}}}catch(l){Be(e,e.return,l)}if(e===t){q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,q=a;break}q=e.return}}var dk=Math.ceil,vc=Tr.ReactCurrentDispatcher,Sg=Tr.ReactCurrentOwner,mn=Tr.ReactCurrentBatchConfig,ve=0,st=null,Qe=null,ft=0,Yt=0,Ns=yi(0),tt=0,Ma=null,Ki=0,Td=0,Tg=0,la=null,Bt=null,Ig=0,ro=1/0,rr=null,_c=!1,Vp=null,Kr=null,pu=!1,Vr=null,wc=0,ua=0,Fp=null,Vu=-1,Fu=0;function $t(){return ve&6?qe():Vu!==-1?Vu:Vu=qe()}function Qr(t){return t.mode&1?ve&2&&ft!==0?ft&-ft:K2.transition!==null?(Fu===0&&(Fu=ix()),Fu):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:dx(t.type)),t):1}function An(t,e,n,r){if(50<ua)throw ua=0,Fp=null,Error(O(185));dl(t,n,r),(!(ve&2)||t!==st)&&(t===st&&(!(ve&2)&&(Td|=n),tt===4&&Nr(t,ft)),Gt(t,r),n===1&&ve===0&&!(e.mode&1)&&(ro=qe()+500,wd&&vi()))}function Gt(t,e){var n=t.callbackNode;KC(t,e);var r=rc(t,t===st?ft:0);if(r===0)n!==null&&X0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&X0(n),e===1)t.tag===0?G2(zv.bind(null,t)):Px(zv.bind(null,t)),z2(function(){!(ve&6)&&vi()}),n=null;else{switch(sx(r)){case 1:n=Xm;break;case 4:n=nx;break;case 16:n=nc;break;case 536870912:n=rx;break;default:n=nc}n=kE(n,EE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function EE(t,e){if(Vu=-1,Fu=0,ve&6)throw Error(O(327));var n=t.callbackNode;if(Bs()&&t.callbackNode!==n)return null;var r=rc(t,t===st?ft:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xc(t,r);else{e=r;var i=ve;ve|=2;var s=TE();(st!==t||ft!==e)&&(rr=null,ro=qe()+500,$i(t,e));do try{pk();break}catch(a){SE(t,a)}while(1);cg(),vc.current=s,ve=i,Qe!==null?e=0:(st=null,ft=0,e=tt)}if(e!==0){if(e===2&&(i=fp(t),i!==0&&(r=i,e=Up(t,i))),e===1)throw n=Ma,$i(t,0),Nr(t,r),Gt(t,qe()),n;if(e===6)Nr(t,r);else{if(i=t.current.alternate,!(r&30)&&!hk(i)&&(e=xc(t,r),e===2&&(s=fp(t),s!==0&&(r=s,e=Up(t,s))),e===1))throw n=Ma,$i(t,0),Nr(t,r),Gt(t,qe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(O(345));case 2:Ai(t,Bt,rr);break;case 3:if(Nr(t,r),(r&130023424)===r&&(e=Ig+500-qe(),10<e)){if(rc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){$t(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=xp(Ai.bind(null,t,Bt,rr),e);break}Ai(t,Bt,rr);break;case 4:if(Nr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Rn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*dk(r/1960))-r,10<r){t.timeoutHandle=xp(Ai.bind(null,t,Bt,rr),r);break}Ai(t,Bt,rr);break;case 5:Ai(t,Bt,rr);break;default:throw Error(O(329))}}}return Gt(t,qe()),t.callbackNode===n?EE.bind(null,t):null}function Up(t,e){var n=la;return t.current.memoizedState.isDehydrated&&($i(t,e).flags|=256),t=xc(t,e),t!==2&&(e=Bt,Bt=n,e!==null&&Bp(e)),t}function Bp(t){Bt===null?Bt=t:Bt.push.apply(Bt,t)}function hk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!kn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Nr(t,e){for(e&=~Tg,e&=~Td,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Rn(e),r=1<<n;t[n]=-1,e&=~r}}function zv(t){if(ve&6)throw Error(O(327));Bs();var e=rc(t,0);if(!(e&1))return Gt(t,qe()),null;var n=xc(t,e);if(t.tag!==0&&n===2){var r=fp(t);r!==0&&(e=r,n=Up(t,r))}if(n===1)throw n=Ma,$i(t,0),Nr(t,e),Gt(t,qe()),n;if(n===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ai(t,Bt,rr),Gt(t,qe()),null}function Rg(t,e){var n=ve;ve|=1;try{return t(e)}finally{ve=n,ve===0&&(ro=qe()+500,wd&&vi())}}function Qi(t){Vr!==null&&Vr.tag===0&&!(ve&6)&&Bs();var e=ve;ve|=1;var n=mn.transition,r=Ee;try{if(mn.transition=null,Ee=1,t)return t()}finally{Ee=r,mn.transition=n,ve=e,!(ve&6)&&vi()}}function Ag(){Yt=Ns.current,Oe(Ns)}function $i(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,B2(n)),Qe!==null)for(n=Qe.return;n!==null;){var r=n;switch(ag(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&lc();break;case 3:to(),Oe(Ht),Oe(kt),gg();break;case 5:mg(r);break;case 4:to();break;case 13:Oe($e);break;case 19:Oe($e);break;case 10:dg(r.type._context);break;case 22:case 23:Ag()}n=n.return}if(st=t,Qe=t=Yr(t.current,null),ft=Yt=e,tt=0,Ma=null,Tg=Td=Ki=0,Bt=la=null,Ni!==null){for(e=0;e<Ni.length;e++)if(n=Ni[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ni=null}return t}function SE(t,e){do{var n=Qe;try{if(cg(),Du.current=yc,gc){for(var r=Ve.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}gc=!1}if(Gi=0,it=Ze=Ve=null,oa=!1,ja=0,Sg.current=null,n===null||n.return===null){tt=1,Ma=e,Qe=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ft,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Pv(o);if(m!==null){m.flags&=-257,Nv(m,o,a,s,e),m.mode&1&&kv(s,u,e),e=m,l=u;var _=e.updateQueue;if(_===null){var w=new Set;w.add(l),e.updateQueue=w}else _.add(l);break e}else{if(!(e&1)){kv(s,u,e),Cg();break e}l=Error(O(426))}}else if(De&&a.mode&1){var x=Pv(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Nv(x,o,a,s,e),lg(no(l,a));break e}}s=l=no(l,a),tt!==4&&(tt=2),la===null?la=[s]:la.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=oE(s,l,e);Ev(s,y);break e;case 1:a=l;var g=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Kr===null||!Kr.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=aE(s,a,e);Ev(s,E);break e}}s=s.return}while(s!==null)}RE(n)}catch(S){e=S,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(1)}function TE(){var t=vc.current;return vc.current=yc,t===null?yc:t}function Cg(){(tt===0||tt===3||tt===2)&&(tt=4),st===null||!(Ki&268435455)&&!(Td&268435455)||Nr(st,ft)}function xc(t,e){var n=ve;ve|=2;var r=TE();(st!==t||ft!==e)&&(rr=null,$i(t,e));do try{fk();break}catch(i){SE(t,i)}while(1);if(cg(),ve=n,vc.current=r,Qe!==null)throw Error(O(261));return st=null,ft=0,tt}function fk(){for(;Qe!==null;)IE(Qe)}function pk(){for(;Qe!==null&&!VC();)IE(Qe)}function IE(t){var e=CE(t.alternate,t,Yt);t.memoizedProps=t.pendingProps,e===null?RE(t):Qe=e,Sg.current=null}function RE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ak(n,e),n!==null){n.flags&=32767,Qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,Qe=null;return}}else if(n=ok(n,e,Yt),n!==null){Qe=n;return}if(e=e.sibling,e!==null){Qe=e;return}Qe=e=t}while(e!==null);tt===0&&(tt=5)}function Ai(t,e,n){var r=Ee,i=mn.transition;try{mn.transition=null,Ee=1,mk(t,e,n,r)}finally{mn.transition=i,Ee=r}return null}function mk(t,e,n,r){do Bs();while(Vr!==null);if(ve&6)throw Error(O(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(QC(t,s),t===st&&(Qe=st=null,ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||pu||(pu=!0,kE(nc,function(){return Bs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=mn.transition,mn.transition=null;var o=Ee;Ee=1;var a=ve;ve|=4,Sg.current=null,uk(t,n),wE(n,t),L2(_p),ic=!!vp,_p=vp=null,t.current=n,ck(n),FC(),ve=a,Ee=o,mn.transition=s}else t.current=n;if(pu&&(pu=!1,Vr=t,wc=i),s=t.pendingLanes,s===0&&(Kr=null),zC(n.stateNode),Gt(t,qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(_c)throw _c=!1,t=Vp,Vp=null,t;return wc&1&&t.tag!==0&&Bs(),s=t.pendingLanes,s&1?t===Fp?ua++:(ua=0,Fp=t):ua=0,vi(),null}function Bs(){if(Vr!==null){var t=sx(wc),e=mn.transition,n=Ee;try{if(mn.transition=null,Ee=16>t?16:t,Vr===null)var r=!1;else{if(t=Vr,Vr=null,wc=0,ve&6)throw Error(O(331));var i=ve;for(ve|=4,q=t.current;q!==null;){var s=q,o=s.child;if(q.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(q=u;q!==null;){var d=q;switch(d.tag){case 0:case 11:case 15:aa(8,d,s)}var f=d.child;if(f!==null)f.return=d,q=f;else for(;q!==null;){d=q;var p=d.sibling,m=d.return;if(yE(d),d===u){q=null;break}if(p!==null){p.return=m,q=p;break}q=m}}}var _=s.alternate;if(_!==null){var w=_.child;if(w!==null){_.child=null;do{var x=w.sibling;w.sibling=null,w=x}while(w!==null)}}q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,q=o;else e:for(;q!==null;){if(s=q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:aa(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,q=y;break e}q=s.return}}var g=t.current;for(q=g;q!==null;){o=q;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,q=v;else e:for(o=g;q!==null;){if(a=q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Sd(9,a)}}catch(S){Be(a,a.return,S)}if(a===o){q=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,q=E;break e}q=a.return}}if(ve=i,vi(),zn&&typeof zn.onPostCommitFiberRoot=="function")try{zn.onPostCommitFiberRoot(md,t)}catch{}r=!0}return r}finally{Ee=n,mn.transition=e}}return!1}function Wv(t,e,n){e=no(n,e),e=oE(t,e,1),t=Gr(t,e,1),e=$t(),t!==null&&(dl(t,1,e),Gt(t,e))}function Be(t,e,n){if(t.tag===3)Wv(t,t,n);else for(;e!==null;){if(e.tag===3){Wv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Kr===null||!Kr.has(r))){t=no(n,t),t=aE(e,t,1),e=Gr(e,t,1),t=$t(),e!==null&&(dl(e,1,t),Gt(e,t));break}}e=e.return}}function gk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$t(),t.pingedLanes|=t.suspendedLanes&n,st===t&&(ft&n)===n&&(tt===4||tt===3&&(ft&130023424)===ft&&500>qe()-Ig?$i(t,0):Tg|=n),Gt(t,e)}function AE(t,e){e===0&&(t.mode&1?(e=iu,iu<<=1,!(iu&130023424)&&(iu=4194304)):e=1);var n=$t();t=mr(t,e),t!==null&&(dl(t,e,n),Gt(t,n))}function yk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),AE(t,n)}function vk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(e),AE(t,n)}var CE;CE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ht.current)Wt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Wt=!1,sk(t,e,n);Wt=!!(t.flags&131072)}else Wt=!1,De&&e.flags&1048576&&Nx(e,dc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;$u(t,e),t=e.pendingProps;var i=Js(e,kt.current);Us(e,n),i=vg(null,e,r,t,i,n);var s=_g();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qt(r)?(s=!0,uc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,fg(e),i.updater=xd,e.stateNode=i,i._reactInternals=e,Cp(e,r,t,n),e=Np(null,e,r,!0,s,n)):(e.tag=0,De&&s&&og(e),Lt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch($u(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=wk(r),t=xn(r,t),i){case 0:e=Pp(null,e,r,t,n);break e;case 1:e=jv(null,e,r,t,n);break e;case 11:e=bv(null,e,r,t,n);break e;case 14:e=Ov(null,e,r,xn(r.type,t),n);break e}throw Error(O(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xn(r,i),Pp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xn(r,i),jv(t,e,r,i,n);case 3:e:{if(dE(e),t===null)throw Error(O(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Lx(t,e),pc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=no(Error(O(423)),e),e=Lv(t,e,r,n,i);break e}else if(r!==i){i=no(Error(O(424)),e),e=Lv(t,e,r,n,i);break e}else for(Xt=qr(e.stateNode.containerInfo.firstChild),Zt=e,De=!0,Sn=null,n=Vx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zs(),r===i){e=gr(t,e,n);break e}Lt(t,e,r,n)}e=e.child}return e;case 5:return Fx(e),t===null&&Ip(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,wp(r,i)?o=null:s!==null&&wp(r,s)&&(e.flags|=32),cE(t,e),Lt(t,e,o,n),e.child;case 6:return t===null&&Ip(e),null;case 13:return hE(t,e,n);case 4:return pg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=eo(e,null,r,n):Lt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xn(r,i),bv(t,e,r,i,n);case 7:return Lt(t,e,e.pendingProps,n),e.child;case 8:return Lt(t,e,e.pendingProps.children,n),e.child;case 12:return Lt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ke(hc,r._currentValue),r._currentValue=o,s!==null)if(kn(s.value,o)){if(s.children===i.children&&!Ht.current){e=gr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=cr(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Rp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(O(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Rp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Lt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Us(e,n),i=gn(i),r=r(i),e.flags|=1,Lt(t,e,r,n),e.child;case 14:return r=e.type,i=xn(r,e.pendingProps),i=xn(r.type,i),Ov(t,e,r,i,n);case 15:return lE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xn(r,i),$u(t,e),e.tag=1,qt(r)?(t=!0,uc(e)):t=!1,Us(e,n),Mx(e,r,i),Cp(e,r,i,n),Np(null,e,r,!0,t,n);case 19:return fE(t,e,n);case 22:return uE(t,e,n)}throw Error(O(156,e.tag))};function kE(t,e){return tx(t,e)}function _k(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(t,e,n,r){return new _k(t,e,n,r)}function kg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wk(t){if(typeof t=="function")return kg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Km)return 11;if(t===Qm)return 14}return 2}function Yr(t,e){var n=t.alternate;return n===null?(n=pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Uu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")kg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xs:return Vi(n.children,i,s,e);case Gm:o=8,i|=8;break;case Jf:return t=pn(12,n,e,i|2),t.elementType=Jf,t.lanes=s,t;case Zf:return t=pn(13,n,e,i),t.elementType=Zf,t.lanes=s,t;case ep:return t=pn(19,n,e,i),t.elementType=ep,t.lanes=s,t;case $w:return Id(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Dw:o=10;break e;case Mw:o=9;break e;case Km:o=11;break e;case Qm:o=14;break e;case Cr:o=16,r=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=pn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Vi(t,e,n,r){return t=pn(7,t,r,e),t.lanes=n,t}function Id(t,e,n,r){return t=pn(22,t,r,e),t.elementType=$w,t.lanes=n,t.stateNode={isHidden:!1},t}function df(t,e,n){return t=pn(6,t,null,e),t.lanes=n,t}function hf(t,e,n){return e=pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xk(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hh(0),this.expirationTimes=Hh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Pg(t,e,n,r,i,s,o,a,l){return t=new xk(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=pn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fg(s),t}function Ek(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ws,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function PE(t){if(!t)return ii;t=t._reactInternals;e:{if(ls(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var n=t.type;if(qt(n))return kx(t,n,e)}return e}function NE(t,e,n,r,i,s,o,a,l){return t=Pg(n,r,!0,t,i,s,o,a,l),t.context=PE(null),n=t.current,r=$t(),i=Qr(n),s=cr(r,i),s.callback=e??null,Gr(n,s,i),t.current.lanes=i,dl(t,i,r),Gt(t,r),t}function Rd(t,e,n,r){var i=e.current,s=$t(),o=Qr(i);return n=PE(n),e.context===null?e.context=n:e.pendingContext=n,e=cr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Gr(i,e,o),t!==null&&(An(t,i,o,s),Lu(t,i,o)),o}function Ec(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Hv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ng(t,e){Hv(t,e),(t=t.alternate)&&Hv(t,e)}function Sk(){return null}var bE=typeof reportError=="function"?reportError:function(t){console.error(t)};function bg(t){this._internalRoot=t}Ad.prototype.render=bg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));Rd(t,e,null,null)};Ad.prototype.unmount=bg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qi(function(){Rd(null,t,null,null)}),e[pr]=null}};function Ad(t){this._internalRoot=t}Ad.prototype.unstable_scheduleHydration=function(t){if(t){var e=lx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Pr.length&&e!==0&&e<Pr[n].priority;n++);Pr.splice(n,0,t),n===0&&cx(t)}};function Og(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qv(){}function Tk(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Ec(o);s.call(u)}}var o=NE(e,r,t,0,null,!1,!1,"",qv);return t._reactRootContainer=o,t[pr]=o.current,ka(t.nodeType===8?t.parentNode:t),Qi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Ec(l);a.call(u)}}var l=Pg(t,0,!1,null,null,!1,!1,"",qv);return t._reactRootContainer=l,t[pr]=l.current,ka(t.nodeType===8?t.parentNode:t),Qi(function(){Rd(e,l,n,r)}),l}function kd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ec(o);a.call(l)}}Rd(e,o,t,i)}else o=Tk(n,e,t,i,r);return Ec(o)}ox=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qo(e.pendingLanes);n!==0&&(Jm(e,n|1),Gt(e,qe()),!(ve&6)&&(ro=qe()+500,vi()))}break;case 13:Qi(function(){var r=mr(t,1);if(r!==null){var i=$t();An(r,t,1,i)}}),Ng(t,1)}};Zm=function(t){if(t.tag===13){var e=mr(t,134217728);if(e!==null){var n=$t();An(e,t,134217728,n)}Ng(t,134217728)}};ax=function(t){if(t.tag===13){var e=Qr(t),n=mr(t,e);if(n!==null){var r=$t();An(n,t,e,r)}Ng(t,e)}};lx=function(){return Ee};ux=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};cp=function(t,e,n){switch(e){case"input":if(rp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_d(r);if(!i)throw Error(O(90));Fw(r),rp(r,i)}}}break;case"textarea":Bw(t,n);break;case"select":e=n.value,e!=null&&Ms(t,!!n.multiple,e,!1)}};Qw=Rg;Yw=Qi;var Ik={usingClientEntryPoint:!1,Events:[fl,Is,_d,Gw,Kw,Rg]},Fo={findFiberByHostInstance:Pi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Rk={bundleType:Fo.bundleType,version:Fo.version,rendererPackageName:Fo.rendererPackageName,rendererConfig:Fo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Zw(t),t===null?null:t.stateNode},findFiberByHostInstance:Fo.findFiberByHostInstance||Sk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mu.isDisabled&&mu.supportsFiber)try{md=mu.inject(Rk),zn=mu}catch{}}on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ik;on.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Og(e))throw Error(O(200));return Ek(t,e,null,n)};on.createRoot=function(t,e){if(!Og(t))throw Error(O(299));var n=!1,r="",i=bE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Pg(t,1,!1,null,null,n,!1,r,i),t[pr]=e.current,ka(t.nodeType===8?t.parentNode:t),new bg(e)};on.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=Zw(e),t=t===null?null:t.stateNode,t};on.flushSync=function(t){return Qi(t)};on.hydrate=function(t,e,n){if(!Cd(e))throw Error(O(200));return kd(null,t,e,!0,n)};on.hydrateRoot=function(t,e,n){if(!Og(t))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=bE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=NE(e,null,t,1,n??null,i,!1,s,o),t[pr]=e.current,ka(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ad(e)};on.render=function(t,e,n){if(!Cd(e))throw Error(O(200));return kd(null,t,e,!1,n)};on.unmountComponentAtNode=function(t){if(!Cd(t))throw Error(O(40));return t._reactRootContainer?(Qi(function(){kd(null,null,t,!1,function(){t._reactRootContainer=null,t[pr]=null})}),!0):!1};on.unstable_batchedUpdates=Rg;on.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Cd(n))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return kd(t,e,n,!1,r)};on.version="18.2.0-next-9e3b772b8-20220608";function OE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(OE)}catch(t){console.error(t)}}OE(),Nw.exports=on;var ml=Nw.exports,Gv=ml;Yf.createRoot=Gv.createRoot,Yf.hydrateRoot=Gv.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $a(){return $a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$a.apply(this,arguments)}var Fr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Fr||(Fr={}));const Kv="popstate";function Ak(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return zp("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Sc(i)}return kk(e,n,null,t)}function Xe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ck(){return Math.random().toString(36).substr(2,8)}function Qv(t,e){return{usr:t.state,key:t.key,idx:e}}function zp(t,e,n,r){return n===void 0&&(n=null),$a({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?xo(e):e,{state:n,key:e&&e.key||r||Ck()})}function Sc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function xo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function kk(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Fr.Pop,l=null,u=d();u==null&&(u=0,o.replaceState($a({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){a=Fr.Pop;let x=d(),y=x==null?null:x-u;u=x,l&&l({action:a,location:w.location,delta:y})}function p(x,y){a=Fr.Push;let g=zp(w.location,x,y);n&&n(g,x),u=d()+1;let v=Qv(g,u),E=w.createHref(g);try{o.pushState(v,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(E)}s&&l&&l({action:a,location:w.location,delta:1})}function m(x,y){a=Fr.Replace;let g=zp(w.location,x,y);n&&n(g,x),u=d();let v=Qv(g,u),E=w.createHref(g);o.replaceState(v,"",E),s&&l&&l({action:a,location:w.location,delta:0})}function _(x){let y=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof x=="string"?x:Sc(x);return Xe(y,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,y)}let w={get action(){return a},get location(){return t(i,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Kv,f),l=x,()=>{i.removeEventListener(Kv,f),l=null}},createHref(x){return e(i,x)},createURL:_,encodeLocation(x){let y=_(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:p,replace:m,go(x){return o.go(x)}};return w}var Yv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Yv||(Yv={}));function Pk(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?xo(e):e,i=Lg(r.pathname||"/",n);if(i==null)return null;let s=jE(t);Nk(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=Fk(s[a],zk(i));return o}function jE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Xe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Xr([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(Xe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),jE(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:$k(u,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of LE(s.path))i(s,o,l)}),e}function LE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=LE(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Nk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Vk(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const bk=/^:\w+$/,Ok=3,jk=2,Lk=1,Dk=10,Mk=-2,Xv=t=>t==="*";function $k(t,e){let n=t.split("/"),r=n.length;return n.some(Xv)&&(r+=Mk),e&&(r+=jk),n.filter(i=>!Xv(i)).reduce((i,s)=>i+(bk.test(s)?Ok:s===""?Lk:Dk),r)}function Vk(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Fk(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=Uk({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!d)return null;Object.assign(r,d.params);let f=a.route;s.push({params:r,pathname:Xr([i,d.pathname]),pathnameBase:Gk(Xr([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=Xr([i,d.pathnameBase]))}return s}function Uk(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Bk(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,d,f)=>{if(d==="*"){let p=a[f]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}return u[d]=Wk(a[f]||"",d),u},{}),pathname:s,pathnameBase:o,pattern:t}}function Bk(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),jg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function zk(t){try{return decodeURI(t)}catch(e){return jg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Wk(t,e){try{return decodeURIComponent(t)}catch(n){return jg(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Lg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Hk(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?xo(t):t;return{pathname:n?n.startsWith("/")?n:qk(n,e):e,search:Kk(r),hash:Qk(i)}}function qk(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function ff(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function DE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ME(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=xo(t):(i=$a({},t),Xe(!i.pathname||!i.pathname.includes("?"),ff("?","pathname","search",i)),Xe(!i.pathname||!i.pathname.includes("#"),ff("#","pathname","hash",i)),Xe(!i.search||!i.search.includes("#"),ff("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let f=e.length-1;if(o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=Hk(i,a),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const Xr=t=>t.join("/").replace(/\/\/+/g,"/"),Gk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Kk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Qk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Yk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const $E=["post","put","patch","delete"];new Set($E);const Xk=["get",...$E];new Set(Xk);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tc(){return Tc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tc.apply(this,arguments)}const Dg=h.createContext(null),Jk=h.createContext(null),Eo=h.createContext(null),Pd=h.createContext(null),_i=h.createContext({outlet:null,matches:[],isDataRoute:!1}),VE=h.createContext(null);function Zk(t,e){let{relative:n}=e===void 0?{}:e;gl()||Xe(!1);let{basename:r,navigator:i}=h.useContext(Eo),{hash:s,pathname:o,search:a}=UE(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Xr([r,o])),i.createHref({pathname:l,search:a,hash:s})}function gl(){return h.useContext(Pd)!=null}function Nd(){return gl()||Xe(!1),h.useContext(Pd).location}function FE(t){h.useContext(Eo).static||h.useLayoutEffect(t)}function us(){let{isDataRoute:t}=h.useContext(_i);return t?hP():eP()}function eP(){gl()||Xe(!1);let t=h.useContext(Dg),{basename:e,navigator:n}=h.useContext(Eo),{matches:r}=h.useContext(_i),{pathname:i}=Nd(),s=JSON.stringify(DE(r).map(l=>l.pathnameBase)),o=h.useRef(!1);return FE(()=>{o.current=!0}),h.useCallback(function(l,u){if(u===void 0&&(u={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=ME(l,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Xr([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,s,i,t])}function Mg(){let{matches:t}=h.useContext(_i),e=t[t.length-1];return e?e.params:{}}function UE(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=h.useContext(_i),{pathname:i}=Nd(),s=JSON.stringify(DE(r).map(o=>o.pathnameBase));return h.useMemo(()=>ME(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}function tP(t,e){return nP(t,e)}function nP(t,e,n){gl()||Xe(!1);let{navigator:r}=h.useContext(Eo),{matches:i}=h.useContext(_i),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=Nd(),u;if(e){var d;let w=typeof e=="string"?xo(e):e;a==="/"||(d=w.pathname)!=null&&d.startsWith(a)||Xe(!1),u=w}else u=l;let f=u.pathname||"/",p=a==="/"?f:f.slice(a.length)||"/",m=Pk(t,{pathname:p}),_=aP(m&&m.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:Xr([a,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?a:Xr([a,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n);return e&&_?h.createElement(Pd.Provider,{value:{location:Tc({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Fr.Pop}},_):_}function rP(){let t=dP(),e=Yk(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},e),n?h.createElement("pre",{style:i},n):null,s)}const iP=h.createElement(rP,null);class sP extends h.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?h.createElement(_i.Provider,{value:this.props.routeContext},h.createElement(VE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oP(t){let{routeContext:e,match:n,children:r}=t,i=h.useContext(Dg);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),h.createElement(_i.Provider,{value:e},r)}function aP(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let s=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=s.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||Xe(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,l,u)=>{let d=l.route.id?o==null?void 0:o[l.route.id]:null,f=null;n&&(f=l.route.errorElement||iP);let p=e.concat(s.slice(0,u+1)),m=()=>{let _;return d?_=f:l.route.Component?_=h.createElement(l.route.Component,null):l.route.element?_=l.route.element:_=a,h.createElement(oP,{match:l,routeContext:{outlet:a,matches:p,isDataRoute:n!=null},children:_})};return n&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?h.createElement(sP,{location:n.location,revalidation:n.revalidation,component:f,error:d,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var Wp;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(Wp||(Wp={}));var Va;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(Va||(Va={}));function lP(t){let e=h.useContext(Dg);return e||Xe(!1),e}function uP(t){let e=h.useContext(Jk);return e||Xe(!1),e}function cP(t){let e=h.useContext(_i);return e||Xe(!1),e}function BE(t){let e=cP(),n=e.matches[e.matches.length-1];return n.route.id||Xe(!1),n.route.id}function dP(){var t;let e=h.useContext(VE),n=uP(Va.UseRouteError),r=BE(Va.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function hP(){let{router:t}=lP(Wp.UseNavigateStable),e=BE(Va.UseNavigateStable),n=h.useRef(!1);return FE(()=>{n.current=!0}),h.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Tc({fromRouteId:e},s)))},[t,e])}function zE(t){Xe(!1)}function fP(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Fr.Pop,navigator:s,static:o=!1}=t;gl()&&Xe(!1);let a=e.replace(/^\/*/,"/"),l=h.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=xo(r));let{pathname:u="/",search:d="",hash:f="",state:p=null,key:m="default"}=r,_=h.useMemo(()=>{let w=Lg(u,a);return w==null?null:{location:{pathname:w,search:d,hash:f,state:p,key:m},navigationType:i}},[a,u,d,f,p,m,i]);return _==null?null:h.createElement(Eo.Provider,{value:l},h.createElement(Pd.Provider,{children:n,value:_}))}function pP(t){let{children:e,location:n}=t;return tP(Hp(e),n)}var Jv;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(Jv||(Jv={}));new Promise(()=>{});function Hp(t,e){e===void 0&&(e=[]);let n=[];return h.Children.forEach(t,(r,i)=>{if(!h.isValidElement(r))return;let s=[...e,i];if(r.type===h.Fragment){n.push.apply(n,Hp(r.props.children,s));return}r.type!==zE&&Xe(!1),!r.props.index||!r.props.children||Xe(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Hp(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qp(){return qp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qp.apply(this,arguments)}function mP(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function gP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function yP(t,e){return t.button===0&&(!e||e==="_self")&&!gP(t)}const vP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],_P="startTransition",Zv=zm[_P];function wP(t){let{basename:e,children:n,future:r,window:i}=t,s=h.useRef();s.current==null&&(s.current=Ak({window:i,v5Compat:!0}));let o=s.current,[a,l]=h.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=h.useCallback(f=>{u&&Zv?Zv(()=>l(f)):l(f)},[l,u]);return h.useLayoutEffect(()=>o.listen(d),[o,d]),h.createElement(fP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const xP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",EP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,si=h.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:d}=e,f=mP(e,vP),{basename:p}=h.useContext(Eo),m,_=!1;if(typeof u=="string"&&EP.test(u)&&(m=u,xP))try{let g=new URL(window.location.href),v=u.startsWith("//")?new URL(g.protocol+u):new URL(u),E=Lg(v.pathname,p);v.origin===g.origin&&E!=null?u=E+v.search+v.hash:_=!0}catch{}let w=Zk(u,{relative:i}),x=SP(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:i});function y(g){r&&r(g),g.defaultPrevented||x(g)}return h.createElement("a",qp({},f,{href:m||w,onClick:_||s?r:y,ref:n,target:l}))});var e_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(e_||(e_={}));var t_;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(t_||(t_={}));function SP(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=us(),l=Nd(),u=UE(t,{relative:o});return h.useCallback(d=>{if(yP(d,n)){d.preventDefault();let f=r!==void 0?r:Sc(l)===Sc(u);a(t,{replace:f,state:i,preventScrollReset:s,relative:o})}},[l,a,u,r,i,n,t,s,o])}const Ic={red:{id:"red",type:"dark",bottom_player_bg:"bg-[#3b1113]",side_bar_bg:"bg-[#391b1c]",content_text:"text-[#ca4954]",content_hover_text:"hover:text-[#ca4954]",content_bg:"bg-[#ca4954]",content_hover_bg:"hover:bg-[#ca4954]",container:"bg-[#2e0f10]"},deep_blue:{id:"deep_blue",type:"dark",bottom_player_bg:"bg-[#111f3b]",side_bar_bg:"bg-[#1b2639]",content_text:"text-[#0c9e85]",content_hover_text:"hover:text-[#0c9e85]",content_bg:"bg-[#0c9e85]",content_hover_bg:"hover:bg-[#0c9e85]",container:"bg-[#0f1a2e]"},green_light:{id:"green_light",type:"light",bottom_player_bg:"bg-[#c0d8d8]",side_bar_bg:"bg-[#dde5e5]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_bg:"bg-[#198585]",content_hover_bg:"hover:bg-[#198585]",container:"bg-[#ced9d9]"}},TP=JSON.parse(localStorage.getItem("theme")),n_=Ic[TP]||Ic.red,WE={theme:{...n_,alpha:n_.type==="light"?"[#000]/[.1]":"[#fff]/[.1]"}},IP=(t,e)=>({theme:{...Ic[e.payload.id],alpha:Ic[e.payload.id].type==="dark"?"[#fff]/[.1]":"[#000]/[.1]"}}),RP=t=>{const[e,n]=h.useReducer(IP,t),r=h.useCallback(i=>{console.log("set theme"),n({type:0,payload:{id:i}})},[]);return{state:e,setTheme:r}},AP={state:WE,setTheme:()=>{}},HE=h.createContext(AP),CP=({children:t,theme:e})=>c.jsx(HE.Provider,{value:RP(e),children:t}),gt=()=>{const{state:{theme:t},setTheme:e}=h.useContext(HE);return{theme:t,setTheme:e}};function qE(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=qE(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function kP(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=qE(t))&&(r&&(r+=" "),r+=e);return r}const r_=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,i_=kP,PP=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return i_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(u=>{const d=n==null?void 0:n[u],f=s==null?void 0:s[u];if(d===null)return null;const p=r_(d)||r_(f);return i[u][p]}),a=n&&Object.entries(n).reduce((u,d)=>{let[f,p]=d;return p===void 0||(u[f]=p),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:f,className:p,...m}=d;return Object.entries(m).every(_=>{let[w,x]=_;return Array.isArray(x)?x.includes({...s,...a}[w]):{...s,...a}[w]===x})?[...u,f,p]:u},[]);return i_(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function NP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}))}const bP=h.forwardRef(NP),OP=bP;function jP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3"}))}const LP=h.forwardRef(jP),DP=LP;function MP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const $P=h.forwardRef(MP),$g=$P;function VP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"}))}const FP=h.forwardRef(VP),UP=FP;function BP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"}))}const zP=h.forwardRef(BP),WP=zP;function HP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}))}const qP=h.forwardRef(HP),GP=qP;function KP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953l7.108-4.062A1.125 1.125 0 0121 8.688v8.123zM11.25 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953L9.567 7.71a1.125 1.125 0 011.683.977v8.123z"}))}const QP=h.forwardRef(KP),YP=QP;function XP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const JP=h.forwardRef(XP),ZP=JP;function eN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const tN=h.forwardRef(eN),nN=tN;function rN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))}const iN=h.forwardRef(rN),ca=iN;function sN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const oN=h.forwardRef(sN),GE=oN;function aN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}const lN=h.forwardRef(aN),Vg=lN;function uN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const cN=h.forwardRef(uN),KE=cN;function dN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"}))}const hN=h.forwardRef(dN),fN=hN;function pN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const mN=h.forwardRef(pN),Fg=mN;function gN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m5.231 13.481L15 17.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v16.5c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9zm3.75 11.625a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"}))}const yN=h.forwardRef(gN),vN=yN;function _N({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const wN=h.forwardRef(_N),xN=wN;function EN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const SN=h.forwardRef(EN),TN=SN;function IN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))}const RN=h.forwardRef(IN),QE=RN;function AN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z"}))}const CN=h.forwardRef(AN),YE=CN;function kN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const PN=h.forwardRef(kN),XE=PN;function NN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const bN=h.forwardRef(NN),ON=bN;function jN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const LN=h.forwardRef(jN),DN=LN;function MN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const $N=h.forwardRef(MN),VN=$N;function FN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"}))}const UN=h.forwardRef(FN),da=UN;function BN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}))}const zN=h.forwardRef(BN),WN=zN;function HN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const qN=h.forwardRef(HN),So=qN;function GN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))}const KN=h.forwardRef(GN),Ug=KN;function QN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"}))}const YN=h.forwardRef(QN),JE=YN;function XN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"}))}const JN=h.forwardRef(XN),ZN=JN;function eb({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const tb=h.forwardRef(eb),Fa=tb;function nb({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.59 14.37a6 6 0 01-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 006.16-12.12A14.98 14.98 0 009.631 8.41m5.96 5.96a14.926 14.926 0 01-5.841 2.58m-.119-8.54a6 6 0 00-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 00-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 01-2.448-2.448 14.9 14.9 0 01.06-.312m-2.24 2.39a4.493 4.493 0 00-1.757 4.306 4.493 4.493 0 004.306-1.758M16.5 9a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"}))}const rb=h.forwardRef(nb),ib=rb;function sb({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"}))}const ob=h.forwardRef(sb),ab=ob;function lb({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75L19.5 12m0 0l2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6l4.72-4.72a.75.75 0 011.28.531V19.94a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.506-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.395C2.806 8.757 3.63 8.25 4.51 8.25H6.75z"}))}const ub=h.forwardRef(lb),cb=ub;function db({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"}))}const hb=h.forwardRef(db),Rc=hb;function fb({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const pb=h.forwardRef(fb),Bg=pb;function mb({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}))}const gb=h.forwardRef(mb),yb=gb;function vb({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const _b=h.forwardRef(vb),wb=_b;function xb({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const Eb=h.forwardRef(xb),Dn=Eb,Sb=PP("inline-flex items-center hover:brightness-90",{variants:{variant:{default:"",circle:"rounded-[99px] p-[4px] bg-gray-500 bg-opacity-20 text-xl",list:"flex items-center py-[4px] w-full text-[14px]",primary:"px-[20px] py-[5px] text-[14px]"},size:{half:"w-1/2",full:"w-full",small:"h-[20px] w-[20px]",normal:"h-[35px] w-[35px]",large:"h-[40px] w-[40px]"}},defaultVariants:{variant:"default"}}),ee=({className:t,children:e,variant:n,size:r,isLoading:i,onClick:s,...o})=>c.jsxs("button",{onClick:a=>s?s(a):"",...o,className:Sb({variant:n,size:r,className:t}),disabled:i,children:[i?c.jsx($g,{className:"h-5 w-5 animate-spin"}):null,!i&&e]});function Ce({className:t}){const{theme:e}=gt();return c.jsx("div",{className:`animate-pulse rounded-[4px] bg-${e.alpha} ${t}`})}function wi({src:t,classNames:e,onError:n}){const[r,i]=h.useState(!1),s=h.useRef(null);return h.useEffect(()=>{if(!t){i(!0);return}const o=s.current,a=()=>{console.log("image loadded"),i(!0)},l=()=>{const d=s.current;d.src="https://placehold.co/100",i(!0)},u=()=>{n?n():l()};return o&&(o.addEventListener("load",a),o.addEventListener("error",u)),()=>{o&&(o.removeEventListener("load",a),o.removeEventListener("error",u))}},[]),c.jsxs(c.Fragment,{children:[!r&&c.jsx(Ce,{className:"w-full pt-[100%]"}),c.jsx("img",{className:`${e&&e} w-full ${r?"":"hidden"}`,src:t||"https://placehold.co/100",ref:s})]})}const Tb=({className:t,onClick:e,theme:n})=>c.jsx("div",{onClick:()=>e(),className:`${n==null?void 0:n.content_hover_text} ${t} relative rounded-xl border group cursor-pointer`,children:c.jsx(ee,{className:"absolute top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ",children:c.jsx(Fa,{className:"w-[40px] max-[549px]:w-[30px]"})})});function Cn({children:t,theme:e,classNames:n}){return c.jsx("div",{className:`rounded  px-[20px] py-[10px] ${e.type==="light"?"text-[#333]":"text-white"} ${e.side_bar_bg} border-[1px] border-${e.alpha} ${n}`,children:t})}function Ib({className:t,icon:e,label:n,to:r,arrowIcon:i}){return c.jsxs(si,{className:"w-full flex flex-row justify-between items-center "+t,to:r,children:[c.jsxs(ee,{className:"",children:[e,c.jsx("span",{className:"text-lg font-medium",children:n})]}),i&&c.jsx("span",{children:i})]})}const ZE={userSongs:[],userPlaylists:[],adminSongs:[],adminPlaylists:[],initial:!1},Rb=(t,e)=>{const n=e.payload;switch(e.type){case 2:return{userSongs:n.userSongs||[],userPlaylists:n.userPlaylists||[],adminSongs:n.adminSongs||t.adminSongs,adminPlaylists:n.adminPlaylists||t.adminPlaylists,initial:!!(n.adminSongs||n.userSongs)};case 0:return{userSongs:n.userSongs||[],adminSongs:t.adminSongs,userPlaylists:t.userPlaylists,adminPlaylists:t.adminPlaylists,initial:t.initial};case 1:return{adminSongs:t.adminSongs,userSongs:t.userSongs,userPlaylists:n.userPlaylists||[],adminPlaylists:t.adminPlaylists,initial:t.initial};default:return{adminSongs:t.adminSongs,userSongs:t.userSongs,userPlaylists:t.userPlaylists,adminPlaylists:t.adminPlaylists,initial:t.initial}}},Ab=t=>{const[e,n]=h.useReducer(Rb,t),r=h.useCallback(o=>{n({type:0,payload:{userSongs:o}})},[]),i=h.useCallback(({userSongs:o,adminSongs:a,userPlaylists:l,adminPlaylists:u})=>{n({type:2,payload:{userSongs:o,adminSongs:a,userPlaylists:l,adminPlaylists:u}})},[]),s=h.useCallback(o=>{n({type:1,payload:{userPlaylists:o}})},[]);return{state:e,setUserSongs:r,initSongsContext:i,setUserPlaylists:s}},Cb={state:ZE,setUserSongs:()=>{},initSongsContext:()=>{},setUserPlaylists:()=>{}},eS=h.createContext(Cb),kb=({children:t,songsStore:e})=>c.jsx(eS.Provider,{value:Ab(e),children:t}),vn=()=>{const{state:{adminPlaylists:t,adminSongs:e,initial:n,userPlaylists:r,userSongs:i},initSongsContext:s,setUserSongs:o,setUserPlaylists:a}=h.useContext(eS);return{adminPlaylists:t,adminSongs:e,initial:n,userPlaylists:r,userSongs:i,initSongsContext:s,setUserSongs:o,setUserPlaylists:a}},yl=({data:t,theme:e,selectedSongList:n,active:r,onClick:i,isCheckedSong:s,setSelectedSongList:o,setIsCheckedSong:a})=>{const l=h.useCallback(()=>n?(n==null?void 0:n.indexOf(t))!=-1:!1,[n]),u=f=>{if(console.log("check selected"),!o||!n){console.log("song list item lack of props");return}s||a&&a(!0);let p=[...n];const m=p.indexOf(f);m===-1?p.push(f):p.splice(m,1),o(p),p.length||a&&a(!0)},d={button:`${e.content_bg} rounded-full`,textColor:e.type==="light"?"text-[#333]":"text-[#fff]",songListButton:`mr-[10px] px-[5px] text-${e.alpha} group-hover/main:text-[inherit]`,itemContainer:`item-container transition-all  origin-top duration-[300ms] border-b border-${e.alpha} flex flex-row rounded-[4px] justify-between w-[100%] px-[5px] py-[10px] ${l()&&"bg-"+e.alpha}`,imageFrame:"w-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]"};return c.jsx(c.Fragment,{children:c.jsx("div",{className:`${d.itemContainer}`,children:c.jsxs("div",{className:"flex flex-row w-[100%]",children:[c.jsx(c.Fragment,{children:s?c.jsx("button",{onClick:()=>u(t),className:`${d.songListButton} text-[inherit]`,children:l()?c.jsx(ca,{className:"w-[18px]"}):c.jsx(Rc,{className:"w-[18px]"})}):c.jsx(c.Fragment,{children:c.jsx("button",{onClick:()=>u(t),className:`${d.songListButton} block`,children:c.jsx(Rc,{className:"w-[18px] "})})})}),c.jsxs("div",{className:"flex-grow flex",onClick:f=>i(f),children:[c.jsxs("div",{className:`${d.imageFrame}`,children:[c.jsx(wi,{src:t.image_url}),r&&c.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex songContainers-center items-center justify-center",children:c.jsx(So,{className:"w-[28px] text-[#fff]"})})]}),c.jsxs("div",{className:"ml-[10px]",children:[c.jsx("h5",{className:`text-mg line-clamp-1 ${r&&e.content_text}`,children:t.name}),c.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:t.singer})]})]})]})})})};function Pb({playlistSongs:t,theme:e,handleAddSongsToPlaylist:n}){const[r,i]=h.useState([]),{userSongs:s}=vn(),o={addSongContainer:"pb-[50px] relative",addSongContent:"max-h-[calc(90vh-50px)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full max-[549px]:w-full"},a=h.useMemo(()=>!!r.length,[r]);return c.jsx("div",{className:o.addSongContainer,children:c.jsxs("div",{className:o.addSongContent,children:[c.jsx(ee,{onClick:()=>n(r),variant:"primary",className:`rounded-full ${e.content_bg} absolute bottom-0 right-15px ${!a&&"opacity-60 pointer-events-none"}`,children:"Save"}),s.map((l,u)=>{if(t.indexOf(l)==-1)return c.jsx("div",{className:o.songItem,children:c.jsx(yl,{isCheckedSong:!0,selectedSongList:r,setSelectedSongList:i,theme:e,data:l,active:!1,onClick:()=>{}})},u)})]})})}function tS({children:t,active:e,done:n,firstTimeRender:r,inUpload:i,className:s}){const o=h.useRef(null);return h.useEffect(()=>{e&&o.current.scrollIntoView({behavior:r?"instant":"smooth",block:"center"})},[e]),c.jsxs("li",{ref:o,className:`${s&&s} py-[10px] max-[549px]:text-[24px] ${i?"text-[16px]":"text-[40px]"} max-[549px]:text-center font-bold ${e?"opacity-100":""} ${n?"opacity-40":""} ${i&&"flex pl-[20px]"}`,children:[t,i&&e&&c.jsx("span",{className:"ml-[10px] text-[16px]",children:"(Next)"})]})}function Nb({isWaiting:t,isPlaying:e,handlePlayPause:n,hoverClasses:r,isError:i,songInStore:s}){const o=h.useMemo(()=>t?c.jsx($g,{className:"w-[36px] animate-spin"}):i&&s.name?c.jsx(QE,{className:"w-[30px]"}):e?c.jsx(So,{className:"w-[50px]"}):c.jsx(JE,{className:"w-[50px]"}),[t,i,e]);return c.jsx(c.Fragment,{children:c.jsx("button",{className:`p-[5px] ${r&&r} ${t&&"pointer-events-none"} inline-flex items-center justify-center w-[50px]`,onClick:()=>n(),children:o})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},bb=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},rS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(p=64)),r.push(n[d],n[f],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new Ob;const p=s<<2|a>>4;if(r.push(p),u!==64){const m=a<<4&240|u>>2;if(r.push(m),f!==64){const _=u<<6&192|f;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Ob extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jb=function(t){const e=nS(t);return rS.encodeByteArray(e,!0)},Ac=function(t){return jb(t).replace(/\./g,"")},iS=function(t){try{return rS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=()=>Lb().__FIREBASE_DEFAULTS__,Mb=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$b=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iS(t[1]);return e&&JSON.parse(e)},bd=()=>{try{return Db()||Mb()||$b()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},sS=t=>{var e,n;return(n=(e=bd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},oS=t=>{const e=sS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},aS=()=>{var t;return(t=bd())===null||t===void 0?void 0:t.config},lS=t=>{var e;return(e=bd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Ac(JSON.stringify(n)),Ac(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pt())}function Ub(){var t;const e=(t=bd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Bb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Wb(){const t=Pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Hb(){try{return typeof indexedDB=="object"}catch{return!1}}function qb(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="FirebaseError";class er extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Gb,Object.setPrototypeOf(this,er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vl.prototype.create)}}class vl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Kb(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new er(i,a,r)}}function Kb(t,e){return t.replace(Qb,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Qb=/\{\$([^}]+)}/g;function Yb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(s_(s)&&s_(o)){if(!Cc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function s_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xb(t,e){const n=new Jb(t,e);return n.subscribe.bind(n)}class Jb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Zb(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=pf),i.error===void 0&&(i.error=pf),i.complete===void 0&&(i.complete=pf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Zb(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function pf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(t){return t&&t._delegate?t._delegate:t}class oi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e5=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Vb;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(n5(e))try{this.getOrInitializeService({instanceIdentifier:Ci})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ci){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ci){return this.instances.has(e)}getOptions(e=Ci){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:t5(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ci){return this.component?this.component.multipleInstances?e:Ci:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function t5(t){return t===Ci?void 0:t}function n5(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new e5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(we||(we={}));const i5={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},s5=we.INFO,o5={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},a5=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=o5[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zg{constructor(e){this.name=e,this._logLevel=s5,this._logHandler=a5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?i5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}}const l5=(t,e)=>e.some(n=>t instanceof n);let o_,a_;function u5(){return o_||(o_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function c5(){return a_||(a_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cS=new WeakMap,Gp=new WeakMap,dS=new WeakMap,mf=new WeakMap,Wg=new WeakMap;function d5(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Jr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&cS.set(n,t)}).catch(()=>{}),Wg.set(e,t),e}function h5(t){if(Gp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Gp.set(t,e)}let Kp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function f5(t){Kp=t(Kp)}function p5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(gf(this),e,...n);return dS.set(r,e.sort?e.sort():[e]),Jr(r)}:c5().includes(t)?function(...e){return t.apply(gf(this),e),Jr(cS.get(this))}:function(...e){return Jr(t.apply(gf(this),e))}}function m5(t){return typeof t=="function"?p5(t):(t instanceof IDBTransaction&&h5(t),l5(t,u5())?new Proxy(t,Kp):t)}function Jr(t){if(t instanceof IDBRequest)return d5(t);if(mf.has(t))return mf.get(t);const e=m5(t);return e!==t&&(mf.set(t,e),Wg.set(e,t)),e}const gf=t=>Wg.get(t);function g5(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Jr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Jr(o.result),l.oldVersion,l.newVersion,Jr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const y5=["get","getKey","getAll","getAllKeys","count"],v5=["put","add","delete","clear"],yf=new Map;function l_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yf.get(e))return yf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=v5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||y5.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return yf.set(e,s),s}f5(t=>({...t,get:(e,n,r)=>l_(e,n)||t.get(e,n,r),has:(e,n)=>!!l_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(w5(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function w5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qp="@firebase/app",u_="0.9.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=new zg("@firebase/app"),x5="@firebase/app-compat",E5="@firebase/analytics-compat",S5="@firebase/analytics",T5="@firebase/app-check-compat",I5="@firebase/app-check",R5="@firebase/auth",A5="@firebase/auth-compat",C5="@firebase/database",k5="@firebase/database-compat",P5="@firebase/functions",N5="@firebase/functions-compat",b5="@firebase/installations",O5="@firebase/installations-compat",j5="@firebase/messaging",L5="@firebase/messaging-compat",D5="@firebase/performance",M5="@firebase/performance-compat",$5="@firebase/remote-config",V5="@firebase/remote-config-compat",F5="@firebase/storage",U5="@firebase/storage-compat",B5="@firebase/firestore",z5="@firebase/firestore-compat",W5="firebase",H5="10.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="[DEFAULT]",q5={[Qp]:"fire-core",[x5]:"fire-core-compat",[S5]:"fire-analytics",[E5]:"fire-analytics-compat",[I5]:"fire-app-check",[T5]:"fire-app-check-compat",[R5]:"fire-auth",[A5]:"fire-auth-compat",[C5]:"fire-rtdb",[k5]:"fire-rtdb-compat",[P5]:"fire-fn",[N5]:"fire-fn-compat",[b5]:"fire-iid",[O5]:"fire-iid-compat",[j5]:"fire-fcm",[L5]:"fire-fcm-compat",[D5]:"fire-perf",[M5]:"fire-perf-compat",[$5]:"fire-rc",[V5]:"fire-rc-compat",[F5]:"fire-gcs",[U5]:"fire-gcs-compat",[B5]:"fire-fst",[z5]:"fire-fst-compat","fire-js":"fire-js",[W5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=new Map,Xp=new Map;function G5(t,e){try{t.container.addComponent(e)}catch(n){Yi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xi(t){const e=t.name;if(Xp.has(e))return Yi.debug(`There were multiple attempts to register component ${e}.`),!1;Xp.set(e,t);for(const n of kc.values())G5(n,t);return!0}function Od(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Zr=new vl("app","Firebase",K5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new oi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs=H5;function hS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Yp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Zr.create("bad-app-name",{appName:String(i)});if(n||(n=aS()),!n)throw Zr.create("no-options");const s=kc.get(i);if(s){if(Cc(n,s.options)&&Cc(r,s.config))return s;throw Zr.create("duplicate-app",{appName:i})}const o=new r5(i);for(const l of Xp.values())o.addComponent(l);const a=new Q5(n,r,o);return kc.set(i,a),a}function Hg(t=Yp){const e=kc.get(t);if(!e&&t===Yp&&aS())return hS();if(!e)throw Zr.create("no-app",{appName:t});return e}function Hn(t,e,n){var r;let i=(r=q5[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yi.warn(a.join(" "));return}Xi(new oi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5="firebase-heartbeat-database",X5=1,Ua="firebase-heartbeat-store";let vf=null;function fS(){return vf||(vf=g5(Y5,X5,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ua)}}}).catch(t=>{throw Zr.create("idb-open",{originalErrorMessage:t.message})})),vf}async function J5(t){try{return await(await fS()).transaction(Ua).objectStore(Ua).get(pS(t))}catch(e){if(e instanceof er)Yi.warn(e.message);else{const n=Zr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yi.warn(n.message)}}}async function c_(t,e){try{const r=(await fS()).transaction(Ua,"readwrite");await r.objectStore(Ua).put(e,pS(t)),await r.done}catch(n){if(n instanceof er)Yi.warn(n.message);else{const r=Zr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yi.warn(r.message)}}}function pS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5=1024,eO=30*24*60*60*1e3;class tO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rO(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=d_();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=eO}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=d_(),{heartbeatsToSend:n,unsentEntries:r}=nO(this._heartbeatsCache.heartbeats),i=Ac(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function d_(){return new Date().toISOString().substring(0,10)}function nO(t,e=Z5){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),h_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),h_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class rO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hb()?qb().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await J5(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return c_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return c_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function h_(t){return Ac(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(t){Xi(new oi("platform-logger",e=>new _5(e),"PRIVATE")),Xi(new oi("heartbeat",e=>new tO(e),"PRIVATE")),Hn(Qp,u_,t),Hn(Qp,u_,"esm2017"),Hn("fire-js","")}iO("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="firebasestorage.googleapis.com",gS="storageBucket",sO=2*60*1e3,oO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He extends er{constructor(e,n,r=0){super(_f(e),`Firebase Storage: ${n} (${_f(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,He.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return _f(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ze;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ze||(ze={}));function _f(t){return"storage/"+t}function qg(){const t="An unknown error occurred, please check the error payload for server response.";return new He(ze.UNKNOWN,t)}function aO(t){return new He(ze.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function lO(t){return new He(ze.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function uO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new He(ze.UNAUTHENTICATED,t)}function cO(){return new He(ze.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function dO(t){return new He(ze.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function hO(){return new He(ze.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function fO(){return new He(ze.CANCELED,"User canceled the upload/download.")}function pO(t){return new He(ze.INVALID_URL,"Invalid URL '"+t+"'.")}function mO(t){return new He(ze.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function gO(){return new He(ze.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+gS+"' property when initializing the app?")}function yO(){return new He(ze.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function vO(){return new He(ze.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _O(t){return new He(ze.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Jp(t){return new He(ze.INVALID_ARGUMENT,t)}function yS(){return new He(ze.APP_DELETED,"The Firebase app was deleted.")}function wO(t){return new He(ze.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ha(t,e){return new He(ze.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Uo(t){throw new He(ze.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Jt.makeFromUrl(e,n)}catch{return new Jt(e,"")}if(r.path==="")return r;throw mO(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${d}/b/${i}/o${p}`,"i"),_={bucket:1,path:3},w=n===mS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",y=new RegExp(`^https?://${w}/${i}/${x}`,"i"),v=[{regex:a,indices:l,postModify:s},{regex:m,indices:_,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let E=0;E<v.length;E++){const S=v[E],I=S.regex.exec(e);if(I){const T=I[S.indices.bucket];let R=I[S.indices.path];R||(R=""),r=new Jt(T,R),S.postModify(r);break}}if(r==null)throw pO(e);return r}}class xO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function d(...x){u||(u=!0,e.apply(null,x))}function f(x){i=setTimeout(()=>{i=null,t(m,l())},x)}function p(){s&&clearTimeout(s)}function m(x,...y){if(u){p();return}if(x){p(),d.call(null,x,...y);return}if(l()||o){p(),d.call(null,x,...y);return}r<64&&(r*=2);let v;a===1?(a=2,v=0):v=(r+Math.random())*1e3,f(v)}let _=!1;function w(x){_||(_=!0,p(),!u&&(i!==null?(x||(a=2),clearTimeout(i),f(0)):x||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,w(!0)},n),w}function SO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(t){return t!==void 0}function IO(t){return typeof t=="object"&&!Array.isArray(t)}function Gg(t){return typeof t=="string"||t instanceof String}function f_(t){return Kg()&&t instanceof Blob}function Kg(){return typeof Blob<"u"&&!Ub()}function p_(t,e,n,r){if(r<e)throw Jp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Jp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function vS(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Fi||(Fi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,n,r,i,s,o,a,l,u,d,f,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,_)=>{this.resolve_=m,this.reject_=_,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new gu(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Fi.NO_ERROR,l=s.getStatus();if(!a||RO(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Fi.ABORT;r(!1,new gu(!1,null,d));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new gu(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());TO(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=qg();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?yS():fO();o(l)}else{const l=hO();o(l)}};this.canceled_?n(!1,new gu(!1,null,!0)):this.backoffId_=EO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&SO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function CO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function kO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function PO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function NO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function bO(t,e,n,r,i,s,o=!0){const a=vS(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return PO(u,e),CO(u,n),kO(u,s),NO(u,r),new AO(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function jO(...t){const e=OO();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Kg())return new Blob(t);throw new He(ze.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function LO(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(t){if(typeof atob>"u")throw _O("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class wf{constructor(e,n){this.data=e,this.contentType=n||null}}function MO(t,e){switch(t){case Fn.RAW:return new wf(_S(e));case Fn.BASE64:case Fn.BASE64URL:return new wf(wS(t,e));case Fn.DATA_URL:return new wf(VO(e),FO(e))}throw qg()}function _S(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function $O(t){let e;try{e=decodeURIComponent(t)}catch{throw ha(Fn.DATA_URL,"Malformed data URL.")}return _S(e)}function wS(t,e){switch(t){case Fn.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw ha(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Fn.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw ha(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=DO(e)}catch(i){throw i.message.includes("polyfill")?i:ha(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class xS{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ha(Fn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=UO(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function VO(t){const e=new xS(t);return e.base64?wS(Fn.BASE64,e.rest):$O(e.rest)}function FO(t){return new xS(t).contentType}function UO(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n){let r=0,i="";f_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(f_(this.data_)){const r=this.data_,i=LO(r,e,n);return i===null?null:new br(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new br(r,!0)}}static getBlob(...e){if(Kg()){const n=e.map(r=>r instanceof br?r.data_:r);return new br(jO.apply(null,n))}else{const n=e.map(o=>Gg(o)?MO(Fn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new br(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(t){let e;try{e=JSON.parse(t)}catch{return null}return IO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function zO(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function SS(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(t,e){return e}class jt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||WO}}let yu=null;function HO(t){return!Gg(t)||t.length<2?t:SS(t)}function TS(){if(yu)return yu;const t=[];t.push(new jt("bucket")),t.push(new jt("generation")),t.push(new jt("metageneration")),t.push(new jt("name","fullPath",!0));function e(s,o){return HO(o)}const n=new jt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new jt("size");return i.xform=r,t.push(i),t.push(new jt("timeCreated")),t.push(new jt("updated")),t.push(new jt("md5Hash",null,!0)),t.push(new jt("cacheControl",null,!0)),t.push(new jt("contentDisposition",null,!0)),t.push(new jt("contentEncoding",null,!0)),t.push(new jt("contentLanguage",null,!0)),t.push(new jt("contentType",null,!0)),t.push(new jt("metadata","customMetadata",!0)),yu=t,yu}function qO(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Jt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function GO(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return qO(r,t),r}function IS(t,e,n){const r=ES(e);return r===null?null:GO(t,r,n)}function KO(t,e,n,r){const i=ES(e);if(i===null||!Gg(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const d=t.bucket,f=t.fullPath,p="/b/"+o(d)+"/o/"+o(f),m=jd(p,n,r),_=vS({alt:"media",token:u});return m+_})[0]}function QO(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class Qg{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(t){if(!t)throw qg()}function YO(t,e){function n(r,i){const s=IS(t,i,e);return RS(s!==null),s}return n}function XO(t,e){function n(r,i){const s=IS(t,i,e);return RS(s!==null),KO(s,i,t.host,t._protocol)}return n}function AS(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=cO():i=uO():n.getStatus()===402?i=lO(t.bucket):n.getStatus()===403?i=dO(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function CS(t){const e=AS(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=aO(t.path)),s.serverResponse=i.serverResponse,s}return n}function JO(t,e,n){const r=e.fullServerUrl(),i=jd(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Qg(i,s,XO(t,n),o);return a.errorHandler=CS(e),a}function ZO(t,e){const n=e.fullServerUrl(),r=jd(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,u){}const a=new Qg(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=CS(e),a}function ej(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function tj(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=ej(null,e)),r}function nj(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let v="";for(let E=0;E<2;E++)v=v+Math.random().toString().slice(2);return v}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=tj(e,r,i),d=QO(u,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=br.getBlob(f,r,p);if(m===null)throw yO();const _={name:u.fullPath},w=jd(s,t.host,t._protocol),x="POST",y=t.maxUploadRetryTime,g=new Qg(w,x,YO(t,n),y);return g.urlParams=_,g.headers=o,g.body=m.uploadData(),g.errorHandler=AS(e),g}class rj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Uo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Uo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Uo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Uo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Uo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class ij extends rj{initXhr(){this.xhr_.responseType="text"}}function Yg(){return new ij}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,n){this._service=e,n instanceof Jt?this._location=n:this._location=Jt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ji(e,n)}get root(){const e=new Jt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return SS(this._location.path)}get storage(){return this._service}get parent(){const e=BO(this._location.path);if(e===null)return null;const n=new Jt(this._location.bucket,e);return new Ji(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw wO(e)}}function sj(t,e,n){t._throwIfRoot("uploadBytes");const r=nj(t.storage,t._location,TS(),new br(e,!0),n);return t.storage.makeRequestWithTokens(r,Yg).then(i=>({metadata:i,ref:t}))}function oj(t){t._throwIfRoot("getDownloadURL");const e=JO(t.storage,t._location,TS());return t.storage.makeRequestWithTokens(e,Yg).then(n=>{if(n===null)throw vO();return n})}function aj(t){t._throwIfRoot("deleteObject");const e=ZO(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Yg)}function lj(t,e){const n=zO(t._location.path,e),r=new Jt(t._location.bucket,n);return new Ji(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(t){return/^[A-Za-z]+:\/\//.test(t)}function cj(t,e){return new Ji(t,e)}function kS(t,e){if(t instanceof Xg){const n=t;if(n._bucket==null)throw gO();const r=new Ji(n,n._bucket);return e!=null?kS(r,e):r}else return e!==void 0?lj(t,e):t}function dj(t,e){if(e&&uj(e)){if(t instanceof Xg)return cj(t,e);throw Jp("To use ref(service, url), the first argument must be a Storage instance.")}else return kS(t,e)}function m_(t,e){const n=e==null?void 0:e[gS];return n==null?null:Jt.makeFromBucketSpec(n,t)}function hj(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:uS(i,t.app.options.projectId))}class Xg{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=mS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=sO,this._maxUploadRetryTime=oO,this._requests=new Set,i!=null?this._bucket=Jt.makeFromBucketSpec(i,this._host):this._bucket=m_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Jt.makeFromBucketSpec(this._url,e):this._bucket=m_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){p_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){p_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ji(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new xO(yS());{const o=bO(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const g_="@firebase/storage",y_="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="storage";function fj(t,e,n){return t=nt(t),sj(t,e,n)}function pj(t){return t=nt(t),oj(t)}function mj(t){return t=nt(t),aj(t)}function NS(t,e){return t=nt(t),dj(t,e)}function gj(t=Hg(),e){t=nt(t);const r=Od(t,PS).getImmediate({identifier:e}),i=oS("storage");return i&&yj(r,...i),r}function yj(t,e,n,r={}){hj(t,e,n,r)}function vj(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Xg(n,r,i,e,cs)}function _j(){Xi(new oi(PS,vj,"PUBLIC").setMultipleInstances(!0)),Hn(g_,y_,""),Hn(g_,y_,"esm2017")}_j();var wj="firebase",xj="10.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hn(wj,xj,"app");function Jg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function bS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ej=bS,OS=new vl("auth","Firebase",bS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=new zg("@firebase/auth");function Sj(t,...e){Pc.logLevel<=we.WARN&&Pc.warn(`Auth (${cs}): ${t}`,...e)}function Bu(t,...e){Pc.logLevel<=we.ERROR&&Pc.error(`Auth (${cs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(t,...e){throw Zg(t,...e)}function qn(t,...e){return Zg(t,...e)}function jS(t,e,n){const r=Object.assign(Object.assign({},Ej()),{[e]:n});return new vl("auth","Firebase",r).create(e,{appName:t.name})}function Tj(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Jn(t,"argument-error"),jS(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Zg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return OS.create(t,...e)}function ue(t,e,...n){if(!t)throw Zg(e,...n)}function ar(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bu(e),new Error(e)}function yr(t,e){t||ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Ij(){return v_()==="http:"||v_()==="https:"}function v_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ij()||Bb()||"connection"in navigator)?navigator.onLine:!0}function Aj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,n){this.shortDelay=e,this.longDelay=n,yr(n>e,"Short delay should be less than long delay!"),this.isMobile=Fb()||zb()}get(){return Rj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t,e){yr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj=new wl(3e4,6e4);function DS(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function xl(t,e,n,r,i={}){return MS(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=_l(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),LS.fetch()($S(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function MS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Cj),e);try{const i=new Nj(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw vu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw vu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw vu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw vu(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw jS(t,d,u);Jn(t,d)}}catch(i){if(i instanceof er)throw i;Jn(t,"network-request-failed",{message:String(i)})}}async function Pj(t,e,n,r,i={}){const s=await xl(t,e,n,r,i);return"mfaPendingCredential"in s&&Jn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function $S(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?ey(t.config,i):`${t.config.apiScheme}://${i}`}class Nj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(qn(this.auth,"network-request-failed")),kj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=qn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bj(t,e){return xl(t,"POST","/v1/accounts:delete",e)}async function Oj(t,e){return xl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jj(t,e=!1){const n=nt(t),r=await n.getIdToken(e),i=ty(r);ue(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:fa(xf(i.auth_time)),issuedAtTime:fa(xf(i.iat)),expirationTime:fa(xf(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function xf(t){return Number(t)*1e3}function ty(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Bu("JWT malformed, contained fewer than 3 sections"),null;try{const i=iS(n);return i?JSON.parse(i):(Bu("Failed to decode base64 JWT payload"),null)}catch(i){return Bu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Lj(t){const e=ty(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ba(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof er&&Dj(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Dj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fa(this.lastLoginAt),this.creationTime=fa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ba(t,Oj(n,{idToken:r}));ue(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Fj(s.providerUserInfo):[],a=Vj(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new VS(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function $j(t){const e=nt(t);await Nc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Vj(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Fj(t){return t.map(e=>{var{providerId:n}=e,r=Jg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uj(t,e){const n=await MS(t,{},async()=>{const r=_l({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=$S(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",LS.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Lj(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ue(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Uj(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new za;return r&&(ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ue(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ue(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new za,this.toJSON())}_performRefresh(){return ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ui{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Jg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new VS(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ba(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return jj(this,e)}reload(){return $j(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ui(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Nc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ba(this,bj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(u=n.createdAt)!==null&&u!==void 0?u:void 0,g=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:v,emailVerified:E,isAnonymous:S,providerData:I,stsTokenManager:T}=n;ue(v&&T,e,"internal-error");const R=za.fromJSON(this.name,T);ue(typeof v=="string",e,"internal-error"),Ar(f,e.name),Ar(p,e.name),ue(typeof E=="boolean",e,"internal-error"),ue(typeof S=="boolean",e,"internal-error"),Ar(m,e.name),Ar(_,e.name),Ar(w,e.name),Ar(x,e.name),Ar(y,e.name),Ar(g,e.name);const C=new Ui({uid:v,auth:e,email:p,emailVerified:E,displayName:f,isAnonymous:S,photoURL:_,phoneNumber:m,tenantId:w,stsTokenManager:R,createdAt:y,lastLoginAt:g});return I&&Array.isArray(I)&&(C.providerData=I.map(A=>Object.assign({},A))),x&&(C._redirectEventId=x),C}static async _fromIdTokenResponse(e,n,r=!1){const i=new za;i.updateFromServerResponse(n);const s=new Ui({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Nc(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __=new Map;function lr(t){yr(t instanceof Function,"Expected a class definition");let e=__.get(t);return e?(yr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,__.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}FS.type="NONE";const w_=FS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(t,e,n){return`firebase:${t}:${e}:${n}`}class zs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=zu(this.userKey,i.apiKey,s),this.fullPersistenceKey=zu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ui._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new zs(lr(w_),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||lr(w_);const o=zu(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const f=Ui._fromJSON(e,d);u!==s&&(a=f),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new zs(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new zs(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(US(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HS(e))return"Blackberry";if(qS(e))return"Webos";if(ny(e))return"Safari";if((e.includes("chrome/")||BS(e))&&!e.includes("edge/"))return"Chrome";if(WS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function US(t=Pt()){return/firefox\//i.test(t)}function ny(t=Pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BS(t=Pt()){return/crios\//i.test(t)}function zS(t=Pt()){return/iemobile/i.test(t)}function WS(t=Pt()){return/android/i.test(t)}function HS(t=Pt()){return/blackberry/i.test(t)}function qS(t=Pt()){return/webos/i.test(t)}function Ld(t=Pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Bj(t=Pt()){var e;return Ld(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zj(){return Wb()&&document.documentMode===10}function GS(t=Pt()){return Ld(t)||WS(t)||qS(t)||HS(t)||/windows phone/i.test(t)||zS(t)}function Wj(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(t,e=[]){let n;switch(t){case"Browser":n=x_(Pt());break;case"Worker":n=`${x_(Pt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${cs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qj(t,e={}){return xl(t,"GET","/v2/passwordPolicy",DS(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=6;class Kj{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Gj,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new E_(this),this.idTokenSubscription=new E_(this),this.beforeStateQueue=new Hj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=lr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await zs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Nc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Aj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?nt(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qj(this),n=new Kj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new vl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&lr(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await zs.create(this,[lr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Sj(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Dd(t){return nt(t)}class E_{constructor(e){this.auth=e,this.observer=null,this.addObserver=Xb(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function Xj(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=qn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Yj().appendChild(r)})}function Jj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(t,e){const n=Od(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Cc(s,e??{}))return i;Jn(i,"already-initialized")}return n.initialize({options:e})}function eL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(lr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function tL(t,e,n){const r=Dd(t);ue(r._canInitEmulator,r,"emulator-config-failed"),ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=QS(e),{host:o,port:a}=nL(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||rL()}function QS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function nL(t){const e=QS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:S_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:S_(o)}}}function S_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function rL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ar("not implemented")}_getIdTokenResponse(e){return ar("not implemented")}_linkToIdToken(e,n){return ar("not implemented")}_getReauthenticationResolver(e){return ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ws(t,e){return Pj(t,"POST","/v1/accounts:signInWithIdp",DS(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL="http://localhost";class Zi extends YS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Zi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Jg(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Zi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ws(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ws(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ws(e,n)}buildRequest(){const e={requestUri:iL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_l(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends ry{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends El{constructor(){super("facebook.com")}static credential(e){return Zi._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Or.credential(e.oauthAccessToken)}catch{return null}}}Or.FACEBOOK_SIGN_IN_METHOD="facebook.com";Or.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn extends El{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Zi._fromParams({providerId:Mn.PROVIDER_ID,signInMethod:Mn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Mn.credentialFromTaggedObject(e)}static credentialFromError(e){return Mn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Mn.credential(n,r)}catch{return null}}}Mn.GOOGLE_SIGN_IN_METHOD="google.com";Mn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends El{constructor(){super("github.com")}static credential(e){return Zi._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jr.credential(e.oauthAccessToken)}catch{return null}}}jr.GITHUB_SIGN_IN_METHOD="github.com";jr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends El{constructor(){super("twitter.com")}static credential(e,n){return Zi._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Lr.credential(n,r)}catch{return null}}}Lr.TWITTER_SIGN_IN_METHOD="twitter.com";Lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ui._fromIdTokenResponse(e,r,i),o=T_(r);return new io({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=T_(r);return new io({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function T_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc extends er{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,bc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new bc(e,n,r,i)}}function XS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?bc._fromErrorAndOperation(t,s,e,r):s})}async function sL(t,e,n=!1){const r=await Ba(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return io._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oL(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Ba(t,XS(r,i,e,t),n);ue(s.idToken,r,"internal-error");const o=ty(s.idToken);ue(o,r,"internal-error");const{sub:a}=o;return ue(t.uid===a,r,"user-mismatch"),io._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Jn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aL(t,e,n=!1){const r="signIn",i=await XS(t,r,e),s=await io._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function lL(t,e,n,r){return nt(t).onIdTokenChanged(e,n,r)}function uL(t,e,n){return nt(t).beforeAuthStateChanged(e,n)}function cL(t,e,n,r){return nt(t).onAuthStateChanged(e,n,r)}function dL(t){return nt(t).signOut()}const Oc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Oc,"1"),this.storage.removeItem(Oc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(){const t=Pt();return ny(t)||Ld(t)}const fL=1e3,pL=10;class ZS extends JS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=hL()&&Wj(),this.fallbackToPolling=GS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);zj()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,pL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},fL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ZS.type="LOCAL";const mL=ZS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT extends JS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}eT.type="SESSION";const tT=eT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Md(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await gL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Md.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=iy("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(){return window}function vL(t){Gn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(){return typeof Gn().WorkerGlobalScope<"u"&&typeof Gn().importScripts=="function"}async function _L(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function xL(){return nT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="firebaseLocalStorageDb",EL=1,jc="firebaseLocalStorage",iT="fbase_key";class Sl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $d(t,e){return t.transaction([jc],e?"readwrite":"readonly").objectStore(jc)}function SL(){const t=indexedDB.deleteDatabase(rT);return new Sl(t).toPromise()}function em(){const t=indexedDB.open(rT,EL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(jc,{keyPath:iT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(jc)?e(r):(r.close(),await SL(),e(await em()))})})}async function I_(t,e,n){const r=$d(t,!0).put({[iT]:e,value:n});return new Sl(r).toPromise()}async function TL(t,e){const n=$d(t,!1).get(e),r=await new Sl(n).toPromise();return r===void 0?null:r.value}function R_(t,e){const n=$d(t,!0).delete(e);return new Sl(n).toPromise()}const IL=800,RL=3;class sT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await em(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>RL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Md._getInstance(xL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await _L(),!this.activeServiceWorker)return;this.sender=new yL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await em();return await I_(e,Oc,"1"),await R_(e,Oc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>I_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>TL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>R_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=$d(i,!1).getAll();return new Sl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sT.type="LOCAL";const AL=sT;new wl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(t,e){return e?lr(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy extends YS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ws(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ws(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ws(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function CL(t){return aL(t.auth,new sy(t),t.bypassAuthState)}function kL(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),oL(n,new sy(t),t.bypassAuthState)}async function PL(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),sL(n,new sy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return CL;case"linkViaPopup":case"linkViaRedirect":return PL;case"reauthViaPopup":case"reauthViaRedirect":return kL;default:Jn(this.auth,"internal-error")}}resolve(e){yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL=new wl(2e3,1e4);async function bL(t,e,n){const r=Dd(t);Tj(t,e,ry);const i=oT(r,n);return new Oi(r,"signInViaPopup",e,i).executeNotNull()}class Oi extends aT{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Oi.currentPopupAction&&Oi.currentPopupAction.cancel(),Oi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){yr(this.filter.length===1,"Popup operations only handle one event");const e=iy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NL.get())};e()}}Oi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL="pendingRedirect",Wu=new Map;class jL extends aT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Wu.get(this.auth._key());if(!e){try{const r=await LL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Wu.set(this.auth._key(),e)}return this.bypassAuthState||Wu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LL(t,e){const n=$L(e),r=ML(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function DL(t,e){Wu.set(t._key(),e)}function ML(t){return lr(t._redirectPersistence)}function $L(t){return zu(OL,t.config.apiKey,t.name)}async function VL(t,e,n=!1){const r=Dd(t),i=oT(r,e),o=await new jL(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL=10*60*1e3;class UL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!lT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(qn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FL&&this.cachedEventUids.clear(),this.cachedEventUids.has(A_(e))}saveEventToCache(e){this.cachedEventUids.add(A_(e)),this.lastProcessedEventTime=Date.now()}}function A_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function lT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function BL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zL(t,e={}){return xl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HL=/^https?/;async function qL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await zL(t);for(const n of e)try{if(GL(n))return}catch{}Jn(t,"unauthorized-domain")}function GL(t){const e=Zp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!HL.test(n))return!1;if(WL.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=new wl(3e4,6e4);function C_(){const t=Gn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function QL(t){return new Promise((e,n)=>{var r,i,s;function o(){C_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{C_(),n(qn(t,"network-request-failed"))},timeout:KL.get()})}if(!((i=(r=Gn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Gn().gapi)===null||s===void 0)&&s.load)o();else{const a=Jj("iframefcb");return Gn()[a]=()=>{gapi.load?o():n(qn(t,"network-request-failed"))},Xj(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Hu=null,e})}let Hu=null;function YL(t){return Hu=Hu||QL(t),Hu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL=new wl(5e3,15e3),JL="__/auth/iframe",ZL="emulator/auth/iframe",e4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},t4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function n4(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ey(e,ZL):`https://${t.config.authDomain}/${JL}`,r={apiKey:e.apiKey,appName:t.name,v:cs},i=t4.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${_l(r).slice(1)}`}async function r4(t){const e=await YL(t),n=Gn().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:n4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:e4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=qn(t,"network-request-failed"),a=Gn().setTimeout(()=>{s(o)},XL.get());function l(){Gn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},s4=500,o4=600,a4="_blank",l4="http://localhost";class k_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function u4(t,e,n,r=s4,i=o4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},i4),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Pt().toLowerCase();n&&(a=BS(u)?a4:n),US(u)&&(e=e||l4,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[m,_])=>`${p}${m}=${_},`,"");if(Bj(u)&&a!=="_self")return c4(e||"",a),new k_(null);const f=window.open(e||"",a,d);ue(f,t,"popup-blocked");try{f.focus()}catch{}return new k_(f)}function c4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4="__/auth/handler",h4="emulator/auth/handler",f4=encodeURIComponent("fac");async function P_(t,e,n,r,i,s){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:cs,eventId:i};if(e instanceof ry){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Yb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries(s||{}))o[d]=f}if(e instanceof El){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${f4}=${encodeURIComponent(l)}`:"";return`${p4(t)}?${_l(a).slice(1)}${u}`}function p4({config:t}){return t.emulator?ey(t,h4):`https://${t.authDomain}/${d4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef="webStorageSupport";class m4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tT,this._completeRedirectFn=VL,this._overrideRedirectResult=DL}async _openPopup(e,n,r,i){var s;yr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await P_(e,n,r,Zp(),i);return u4(e,o,iy())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await P_(e,n,r,Zp(),i);return vL(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(yr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await r4(e),r=new UL(e);return n.register("authEvent",i=>(ue(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ef,{type:Ef},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Ef];o!==void 0&&n(!!o),Jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return GS()||ny()||Ld()}}const g4=m4;var N_="@firebase/auth",b_="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function _4(t){Xi(new oi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KS(t)},u=new Qj(r,i,s,l);return eL(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xi(new oi("auth-internal",e=>{const n=Dd(e.getProvider("auth").getImmediate());return(r=>new y4(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hn(N_,b_,v4(t)),Hn(N_,b_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=5*60,x4=lS("authIdTokenMaxAge")||w4;let O_=null;const E4=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>x4)return;const i=n==null?void 0:n.token;O_!==i&&(O_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function S4(t=Hg()){const e=Od(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Zj(t,{popupRedirectResolver:g4,persistence:[AL,mL,tT]}),r=lS("authTokenSyncURL");if(r){const s=E4(r);uL(n,s,()=>s(n.currentUser)),lL(n,o=>s(o))}const i=sS("auth");return i&&tL(n,`http://${i}`),n}_4("Browser");var T4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},V,oy=oy||{},ae=T4||self;function Vd(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Tl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function I4(t){return Object.prototype.hasOwnProperty.call(t,Sf)&&t[Sf]||(t[Sf]=++R4)}var Sf="closure_uid_"+(1e9*Math.random()>>>0),R4=0;function A4(t,e,n){return t.call.apply(t.bind,arguments)}function C4(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function It(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?It=A4:It=C4,It.apply(null,arguments)}function _u(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function at(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function xi(){this.s=this.s,this.o=this.o}var k4=0;xi.prototype.s=!1;xi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),k4!=0)&&I4(this)};xi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const uT=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function ay(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function j_(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Vd(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Rt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Rt.prototype.h=function(){this.defaultPrevented=!0};var P4=function(){if(!ae.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ae.addEventListener("test",()=>{},e),ae.removeEventListener("test",()=>{},e)}catch{}return t}();function Wa(t){return/^[\s\xa0]*$/.test(t)}function Fd(){var t=ae.navigator;return t&&(t=t.userAgent)?t:""}function $n(t){return Fd().indexOf(t)!=-1}function ly(t){return ly[" "](t),t}ly[" "]=function(){};function N4(t,e){var n=SD;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var b4=$n("Opera"),so=$n("Trident")||$n("MSIE"),cT=$n("Edge"),tm=cT||so,dT=$n("Gecko")&&!(Fd().toLowerCase().indexOf("webkit")!=-1&&!$n("Edge"))&&!($n("Trident")||$n("MSIE"))&&!$n("Edge"),O4=Fd().toLowerCase().indexOf("webkit")!=-1&&!$n("Edge");function hT(){var t=ae.document;return t?t.documentMode:void 0}var nm;e:{var Tf="",If=function(){var t=Fd();if(dT)return/rv:([^\);]+)(\)|;)/.exec(t);if(cT)return/Edge\/([\d\.]+)/.exec(t);if(so)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(O4)return/WebKit\/(\S+)/.exec(t);if(b4)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(If&&(Tf=If?If[1]:""),so){var Rf=hT();if(Rf!=null&&Rf>parseFloat(Tf)){nm=String(Rf);break e}}nm=Tf}var rm;if(ae.document&&so){var L_=hT();rm=L_||parseInt(nm,10)||void 0}else rm=void 0;var j4=rm;function Ha(t,e){if(Rt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(dT){e:{try{ly(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:L4[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ha.$.h.call(this)}}at(Ha,Rt);var L4={2:"touch",3:"pen",4:"mouse"};Ha.prototype.h=function(){Ha.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Il="closure_listenable_"+(1e6*Math.random()|0),D4=0;function M4(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++D4,this.fa=this.ia=!1}function Ud(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function uy(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function $4(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function fT(t){const e={};for(const n in t)e[n]=t[n];return e}const D_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pT(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<D_.length;s++)n=D_[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Bd(t){this.src=t,this.g={},this.h=0}Bd.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=sm(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new M4(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function im(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=uT(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Ud(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function sm(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var cy="closure_lm_"+(1e6*Math.random()|0),Af={};function mT(t,e,n,r,i){if(r&&r.once)return yT(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)mT(t,e[s],n,r,i);return null}return n=fy(n),t&&t[Il]?t.O(e,n,Tl(r)?!!r.capture:!!r,i):gT(t,e,n,!1,r,i)}function gT(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Tl(i)?!!i.capture:!!i,a=hy(t);if(a||(t[cy]=a=new Bd(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=V4(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)P4||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(_T(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function V4(){function t(n){return e.call(t.src,t.listener,n)}const e=F4;return t}function yT(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)yT(t,e[s],n,r,i);return null}return n=fy(n),t&&t[Il]?t.P(e,n,Tl(r)?!!r.capture:!!r,i):gT(t,e,n,!0,r,i)}function vT(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)vT(t,e[s],n,r,i);else r=Tl(r)?!!r.capture:!!r,n=fy(n),t&&t[Il]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=sm(s,n,r,i),-1<n&&(Ud(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=hy(t))&&(e=t.g[e.toString()],t=-1,e&&(t=sm(e,n,r,i)),(n=-1<t?e[t]:null)&&dy(n))}function dy(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Il])im(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(_T(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=hy(e))?(im(n,t),n.h==0&&(n.src=null,e[cy]=null)):Ud(t)}}}function _T(t){return t in Af?Af[t]:Af[t]="on"+t}function F4(t,e){if(t.fa)t=!0;else{e=new Ha(e,this);var n=t.listener,r=t.la||t.src;t.ia&&dy(t),t=n.call(r,e)}return t}function hy(t){return t=t[cy],t instanceof Bd?t:null}var Cf="__closure_events_fn_"+(1e9*Math.random()>>>0);function fy(t){return typeof t=="function"?t:(t[Cf]||(t[Cf]=function(e){return t.handleEvent(e)}),t[Cf])}function ot(){xi.call(this),this.i=new Bd(this),this.S=this,this.J=null}at(ot,xi);ot.prototype[Il]=!0;ot.prototype.removeEventListener=function(t,e,n,r){vT(this,t,e,n,r)};function pt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Rt(e,t);else if(e instanceof Rt)e.target=e.target||t;else{var i=e;e=new Rt(r,t),pT(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=wu(o,r,!0,e)&&i}if(o=e.g=t,i=wu(o,r,!0,e)&&i,i=wu(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=wu(o,r,!1,e)&&i}ot.prototype.N=function(){if(ot.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ud(n[r]);delete t.g[e],t.h--}}this.J=null};ot.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ot.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function wu(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&im(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var py=ae.JSON.stringify;class U4{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function B4(){var t=my;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class z4{constructor(){this.h=this.g=null}add(e,n){const r=wT.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var wT=new U4(()=>new W4,t=>t.reset());class W4{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function H4(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function q4(t){ae.setTimeout(()=>{throw t},0)}let qa,Ga=!1,my=new z4,xT=()=>{const t=ae.Promise.resolve(void 0);qa=()=>{t.then(G4)}};var G4=()=>{for(var t;t=B4();){try{t.h.call(t.g)}catch(n){q4(n)}var e=wT;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ga=!1};function zd(t,e){ot.call(this),this.h=t||1,this.g=e||ae,this.j=It(this.qb,this),this.l=Date.now()}at(zd,ot);V=zd.prototype;V.ga=!1;V.T=null;V.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),pt(this,"tick"),this.ga&&(gy(this),this.start()))}};V.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function gy(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}V.N=function(){zd.$.N.call(this),gy(this),delete this.g};function yy(t,e,n){if(typeof t=="function")n&&(t=It(t,n));else if(t&&typeof t.handleEvent=="function")t=It(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ae.setTimeout(t,e||0)}function ET(t){t.g=yy(()=>{t.g=null,t.i&&(t.i=!1,ET(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class K4 extends xi{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ET(this)}N(){super.N(),this.g&&(ae.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ka(t){xi.call(this),this.h=t,this.g={}}at(Ka,xi);var M_=[];function ST(t,e,n,r){Array.isArray(n)||(n&&(M_[0]=n.toString()),n=M_);for(var i=0;i<n.length;i++){var s=mT(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function TT(t){uy(t.g,function(e,n){this.g.hasOwnProperty(n)&&dy(e)},t),t.g={}}Ka.prototype.N=function(){Ka.$.N.call(this),TT(this)};Ka.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Wd(){this.g=!0}Wd.prototype.Ea=function(){this.g=!1};function Q4(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var d=u[0];u=u[1];var f=d.split("_");o=2<=f.length&&f[1]=="type"?o+(d+"="+u+"&"):o+(d+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function Y4(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function bs(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+J4(t,n)+(r?" "+r:"")})}function X4(t,e){t.info(function(){return"TIMEOUT: "+e})}Wd.prototype.info=function(){};function J4(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return py(n)}catch{return e}}var ds={},$_=null;function Hd(){return $_=$_||new ot}ds.Ta="serverreachability";function IT(t){Rt.call(this,ds.Ta,t)}at(IT,Rt);function Qa(t){const e=Hd();pt(e,new IT(e))}ds.STAT_EVENT="statevent";function RT(t,e){Rt.call(this,ds.STAT_EVENT,t),this.stat=e}at(RT,Rt);function Mt(t){const e=Hd();pt(e,new RT(e,t))}ds.Ua="timingevent";function AT(t,e){Rt.call(this,ds.Ua,t),this.size=e}at(AT,Rt);function Rl(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ae.setTimeout(function(){t()},e)}var qd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},CT={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function vy(){}vy.prototype.h=null;function V_(t){return t.h||(t.h=t.i())}function kT(){}var Al={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function _y(){Rt.call(this,"d")}at(_y,Rt);function wy(){Rt.call(this,"c")}at(wy,Rt);var om;function Gd(){}at(Gd,vy);Gd.prototype.g=function(){return new XMLHttpRequest};Gd.prototype.i=function(){return{}};om=new Gd;function Cl(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Ka(this),this.P=Z4,t=tm?125:void 0,this.V=new zd(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new PT}function PT(){this.i=null,this.g="",this.h=!1}var Z4=45e3,am={},Lc={};V=Cl.prototype;V.setTimeout=function(t){this.P=t};function lm(t,e,n){t.L=1,t.v=Qd(vr(e)),t.s=n,t.S=!0,NT(t,null)}function NT(t,e){t.G=Date.now(),kl(t),t.A=vr(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),VT(n.i,"t",r),t.C=0,n=t.l.J,t.h=new PT,t.g=oI(t.l,n?e:null,!t.s),0<t.O&&(t.M=new K4(It(t.Pa,t,t.g),t.O)),ST(t.U,t.g,"readystatechange",t.nb),e=t.I?fT(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Qa(),Q4(t.j,t.u,t.A,t.m,t.W,t.s)}V.nb=function(t){t=t.target;const e=this.M;e&&Un(t)==3?e.l():this.Pa(t)};V.Pa=function(t){try{if(t==this.g)e:{const d=Un(this.g);var e=this.g.Ia();const f=this.g.da();if(!(3>d)&&(d!=3||tm||this.g&&(this.h.h||this.g.ja()||z_(this.g)))){this.J||d!=4||e==7||(e==8||0>=f?Qa(3):Qa(2)),Kd(this);var n=this.g.da();this.ca=n;t:if(bT(this)){var r=z_(this.g);t="";var i=r.length,s=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ji(this),pa(this);var o="";break t}this.h.i=new ae.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,Y4(this.j,this.u,this.A,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Wa(a)){var u=a;break t}}u=null}if(n=u)bs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,um(this,n);else{this.i=!1,this.o=3,Mt(12),ji(this),pa(this);break e}}this.S?(OT(this,d,o),tm&&this.i&&d==3&&(ST(this.U,this.V,"tick",this.mb),this.V.start())):(bs(this.j,this.m,o,null),um(this,o)),d==4&&ji(this),this.i&&!this.J&&(d==4?nI(this.l,this):(this.i=!1,kl(this)))}else wD(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Mt(12)):(this.o=0,Mt(13)),ji(this),pa(this)}}}catch{}finally{}};function bT(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function OT(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=eD(t,n),i==Lc){e==4&&(t.o=4,Mt(14),r=!1),bs(t.j,t.m,null,"[Incomplete Response]");break}else if(i==am){t.o=4,Mt(15),bs(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else bs(t.j,t.m,i,null),um(t,i);bT(t)&&i!=Lc&&i!=am&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Mt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ry(e),e.M=!0,Mt(11))):(bs(t.j,t.m,n,"[Invalid Chunked Response]"),ji(t),pa(t))}V.mb=function(){if(this.g){var t=Un(this.g),e=this.g.ja();this.C<e.length&&(Kd(this),OT(this,t,e),this.i&&t!=4&&kl(this))}};function eD(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Lc:(n=Number(e.substring(n,r)),isNaN(n)?am:(r+=1,r+n>e.length?Lc:(e=e.slice(r,r+n),t.C=r+n,e)))}V.cancel=function(){this.J=!0,ji(this)};function kl(t){t.Y=Date.now()+t.P,jT(t,t.P)}function jT(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Rl(It(t.lb,t),e)}function Kd(t){t.B&&(ae.clearTimeout(t.B),t.B=null)}V.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(X4(this.j,this.A),this.L!=2&&(Qa(),Mt(17)),ji(this),this.o=2,pa(this)):jT(this,this.Y-t)};function pa(t){t.l.H==0||t.J||nI(t.l,t)}function ji(t){Kd(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,gy(t.V),TT(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function um(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||cm(n.i,t))){if(!t.K&&cm(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)$c(n),Zd(n);else break e;Iy(n),Mt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Rl(It(n.ib,n),6e3));if(1>=BT(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Li(n,11)}else if((t.K||n.g==t)&&$c(n),!Wa(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const d=u[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const f=u[4];f!=null&&(n.Ga=f,n.l.info("SVER="+n.Ga));const p=u[5];p!=null&&typeof p=="number"&&0<p&&(r=1.5*p,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const _=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_){var s=r.i;s.g||_.indexOf("spdy")==-1&&_.indexOf("quic")==-1&&_.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(xy(s,s.h),s.h=null))}if(r.F){const w=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(r.Da=w,Ne(r.I,r.F,w))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=sI(r,r.J?r.pa:null,r.Y),o.K){zT(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Kd(a),kl(a)),r.g=o}else eI(r);0<n.j.length&&eh(n)}else u[0]!="stop"&&u[0]!="close"||Li(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Li(n,7):Ty(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Qa(4)}catch{}}function tD(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Vd(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function nD(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Vd(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function LT(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Vd(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=nD(t),r=tD(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var DT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rD(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Bi(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Bi){this.h=t.h,Dc(this,t.j),this.s=t.s,this.g=t.g,Mc(this,t.m),this.l=t.l;var e=t.i,n=new Ya;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),F_(this,n),this.o=t.o}else t&&(e=String(t).match(DT))?(this.h=!1,Dc(this,e[1]||"",!0),this.s=Ko(e[2]||""),this.g=Ko(e[3]||"",!0),Mc(this,e[4]),this.l=Ko(e[5]||"",!0),F_(this,e[6]||"",!0),this.o=Ko(e[7]||"")):(this.h=!1,this.i=new Ya(null,this.h))}Bi.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Qo(e,U_,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Qo(e,U_,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Qo(n,n.charAt(0)=="/"?oD:sD,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Qo(n,lD)),t.join("")};function vr(t){return new Bi(t)}function Dc(t,e,n){t.j=n?Ko(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Mc(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function F_(t,e,n){e instanceof Ya?(t.i=e,uD(t.i,t.h)):(n||(e=Qo(e,aD)),t.i=new Ya(e,t.h))}function Ne(t,e,n){t.i.set(e,n)}function Qd(t){return Ne(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ko(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Qo(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,iD),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function iD(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var U_=/[#\/\?@]/g,sD=/[#\?:]/g,oD=/[#\?]/g,aD=/[#\?@]/g,lD=/#/g;function Ya(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ei(t){t.g||(t.g=new Map,t.h=0,t.i&&rD(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}V=Ya.prototype;V.add=function(t,e){Ei(this),this.i=null,t=To(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function MT(t,e){Ei(t),e=To(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function $T(t,e){return Ei(t),e=To(t,e),t.g.has(e)}V.forEach=function(t,e){Ei(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};V.ta=function(){Ei(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};V.Z=function(t){Ei(this);let e=[];if(typeof t=="string")$T(this,t)&&(e=e.concat(this.g.get(To(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};V.set=function(t,e){return Ei(this),this.i=null,t=To(this,t),$T(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};V.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function VT(t,e,n){MT(t,e),0<n.length&&(t.i=null,t.g.set(To(t,e),ay(n)),t.h+=n.length)}V.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function To(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function uD(t,e){e&&!t.j&&(Ei(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(MT(this,r),VT(this,i,n))},t)),t.j=e}var cD=class{constructor(t,e){this.g=t,this.map=e}};function FT(t){this.l=t||dD,ae.PerformanceNavigationTiming?(t=ae.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ae.g&&ae.g.Ka&&ae.g.Ka()&&ae.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var dD=10;function UT(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function BT(t){return t.h?1:t.g?t.g.size:0}function cm(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function xy(t,e){t.g?t.g.add(e):t.h=e}function zT(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}FT.prototype.cancel=function(){if(this.i=WT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function WT(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return ay(t.i)}var hD=class{stringify(t){return ae.JSON.stringify(t,void 0)}parse(t){return ae.JSON.parse(t,void 0)}};function fD(){this.g=new hD}function pD(t,e,n){const r=n||"";try{LT(t,function(i,s){let o=i;Tl(i)&&(o=py(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function mD(t,e){const n=new Wd;if(ae.Image){const r=new Image;r.onload=_u(xu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=_u(xu,n,r,"TestLoadImage: error",!1,e),r.onabort=_u(xu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=_u(xu,n,r,"TestLoadImage: timeout",!1,e),ae.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function xu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Yd(t){this.l=t.fc||null,this.j=t.ob||!1}at(Yd,vy);Yd.prototype.g=function(){return new Xd(this.l,this.j)};Yd.prototype.i=function(t){return function(){return t}}({});function Xd(t,e){ot.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Ey,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}at(Xd,ot);var Ey=0;V=Xd.prototype;V.open=function(t,e){if(this.readyState!=Ey)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Xa(this)};V.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ae).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};V.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pl(this)),this.readyState=Ey};V.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Xa(this)),this.g&&(this.readyState=3,Xa(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ae.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;HT(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function HT(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}V.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Pl(this):Xa(this),this.readyState==3&&HT(this)}};V.Za=function(t){this.g&&(this.response=this.responseText=t,Pl(this))};V.Ya=function(t){this.g&&(this.response=t,Pl(this))};V.ka=function(){this.g&&Pl(this)};function Pl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Xa(t)}V.setRequestHeader=function(t,e){this.v.append(t,e)};V.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};V.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Xa(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Xd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var gD=ae.JSON.parse;function We(t){ot.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=qT,this.L=this.M=!1}at(We,ot);var qT="",yD=/^https?$/i,vD=["POST","PUT"];V=We.prototype;V.Oa=function(t){this.M=t};V.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():om.g(),this.C=this.u?V_(this.u):V_(om),this.g.onreadystatechange=It(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){B_(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=ae.FormData&&t instanceof ae.FormData,!(0<=uT(vD,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{QT(this),0<this.B&&((this.L=_D(this.g))?(this.g.timeout=this.B,this.g.ontimeout=It(this.ua,this)):this.A=yy(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){B_(this,s)}};function _D(t){return so&&typeof t.timeout=="number"&&t.ontimeout!==void 0}V.ua=function(){typeof oy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pt(this,"timeout"),this.abort(8))};function B_(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,GT(t),Jd(t)}function GT(t){t.F||(t.F=!0,pt(t,"complete"),pt(t,"error"))}V.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,pt(this,"complete"),pt(this,"abort"),Jd(this))};V.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jd(this,!0)),We.$.N.call(this)};V.La=function(){this.s||(this.G||this.v||this.l?KT(this):this.kb())};V.kb=function(){KT(this)};function KT(t){if(t.h&&typeof oy<"u"&&(!t.C[1]||Un(t)!=4||t.da()!=2)){if(t.v&&Un(t)==4)yy(t.La,0,t);else if(pt(t,"readystatechange"),Un(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(DT)[1]||null;!i&&ae.self&&ae.self.location&&(i=ae.self.location.protocol.slice(0,-1)),r=!yD.test(i?i.toLowerCase():"")}n=r}if(n)pt(t,"complete"),pt(t,"success");else{t.m=6;try{var s=2<Un(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",GT(t)}}finally{Jd(t)}}}}function Jd(t,e){if(t.g){QT(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||pt(t,"ready");try{n.onreadystatechange=r}catch{}}}function QT(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ae.clearTimeout(t.A),t.A=null)}V.isActive=function(){return!!this.g};function Un(t){return t.g?t.g.readyState:0}V.da=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}};V.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};V.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),gD(e)}};function z_(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case qT:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function wD(t){const e={};t=(t.g&&2<=Un(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Wa(t[r]))continue;var n=H4(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}$4(e,function(r){return r.join(", ")})}V.Ia=function(){return this.m};V.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function YT(t){let e="";return uy(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Sy(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=YT(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ne(t,e,n))}function Bo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function XT(t){this.Ga=0,this.j=[],this.l=new Wd,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Bo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Bo("baseRetryDelayMs",5e3,t),this.hb=Bo("retryDelaySeedMs",1e4,t),this.eb=Bo("forwardChannelMaxRetries",2,t),this.xa=Bo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new FT(t&&t.concurrentRequestLimit),this.Ja=new fD,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}V=XT.prototype;V.ra=8;V.H=1;function Ty(t){if(JT(t),t.H==3){var e=t.W++,n=vr(t.I);if(Ne(n,"SID",t.K),Ne(n,"RID",e),Ne(n,"TYPE","terminate"),Nl(t,n),e=new Cl(t,t.l,e),e.L=2,e.v=Qd(vr(n)),n=!1,ae.navigator&&ae.navigator.sendBeacon)try{n=ae.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&ae.Image&&(new Image().src=e.v,n=!0),n||(e.g=oI(e.l,null),e.g.ha(e.v)),e.G=Date.now(),kl(e)}iI(t)}function Zd(t){t.g&&(Ry(t),t.g.cancel(),t.g=null)}function JT(t){Zd(t),t.u&&(ae.clearTimeout(t.u),t.u=null),$c(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ae.clearTimeout(t.m),t.m=null)}function eh(t){if(!UT(t.i)&&!t.m){t.m=!0;var e=t.Na;qa||xT(),Ga||(qa(),Ga=!0),my.add(e,t),t.C=0}}function xD(t,e){return BT(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Rl(It(t.Na,t,e),rI(t,t.C)),t.C++,!0)}V.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Cl(this,this.l,t);let s=this.s;if(this.U&&(s?(s=fT(s),pT(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=ZT(this,i,e),n=vr(this.I),Ne(n,"RID",t),Ne(n,"CVER",22),this.F&&Ne(n,"X-HTTP-Session-Id",this.F),Nl(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(YT(s)))+"&"+e:this.o&&Sy(n,this.o,s)),xy(this.i,i),this.bb&&Ne(n,"TYPE","init"),this.P?(Ne(n,"$req",e),Ne(n,"SID","null"),i.aa=!0,lm(i,n,null)):lm(i,n,e),this.H=2}}else this.H==3&&(t?W_(this,t):this.j.length==0||UT(this.i)||W_(this))};function W_(t,e){var n;e?n=e.m:n=t.W++;const r=vr(t.I);Ne(r,"SID",t.K),Ne(r,"RID",n),Ne(r,"AID",t.V),Nl(t,r),t.o&&t.s&&Sy(r,t.o,t.s),n=new Cl(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=ZT(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),xy(t.i,n),lm(n,r,e)}function Nl(t,e){t.na&&uy(t.na,function(n,r){Ne(e,r,n)}),t.h&&LT({},function(n,r){Ne(e,r,n)})}function ZT(t,e,n){n=Math.min(t.j.length,n);var r=t.h?It(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let u=i[l].g;const d=i[l].map;if(u-=s,0>u)s=Math.max(0,i[l].g-100),a=!1;else try{pD(d,o,"req"+u+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function eI(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;qa||xT(),Ga||(qa(),Ga=!0),my.add(e,t),t.A=0}}function Iy(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Rl(It(t.Ma,t),rI(t,t.A)),t.A++,!0)}V.Ma=function(){if(this.u=null,tI(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Rl(It(this.jb,this),t)}};V.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Mt(10),Zd(this),tI(this))};function Ry(t){t.B!=null&&(ae.clearTimeout(t.B),t.B=null)}function tI(t){t.g=new Cl(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=vr(t.wa);Ne(e,"RID","rpc"),Ne(e,"SID",t.K),Ne(e,"AID",t.V),Ne(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ne(e,"TO",t.qa),Ne(e,"TYPE","xmlhttp"),Nl(t,e),t.o&&t.s&&Sy(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Qd(vr(e)),n.s=null,n.S=!0,NT(n,t)}V.ib=function(){this.v!=null&&(this.v=null,Zd(this),Iy(this),Mt(19))};function $c(t){t.v!=null&&(ae.clearTimeout(t.v),t.v=null)}function nI(t,e){var n=null;if(t.g==e){$c(t),Ry(t),t.g=null;var r=2}else if(cm(t.i,e))n=e.F,zT(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=Hd(),pt(r,new AT(r,n)),eh(t)}else eI(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&xD(t,e)||r==2&&Iy(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Li(t,5);break;case 4:Li(t,10);break;case 3:Li(t,6);break;default:Li(t,2)}}}function rI(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Li(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=It(t.pb,t);n||(n=new Bi("//www.google.com/images/cleardot.gif"),ae.location&&ae.location.protocol=="http"||Dc(n,"https"),Qd(n)),mD(n.toString(),r)}else Mt(2);t.H=0,t.h&&t.h.za(e),iI(t),JT(t)}V.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Mt(2)):(this.l.info("Failed to ping google.com"),Mt(1))};function iI(t){if(t.H=0,t.ma=[],t.h){const e=WT(t.i);(e.length!=0||t.j.length!=0)&&(j_(t.ma,e),j_(t.ma,t.j),t.i.i.length=0,ay(t.j),t.j.length=0),t.h.ya()}}function sI(t,e,n){var r=n instanceof Bi?vr(n):new Bi(n);if(r.g!="")e&&(r.g=e+"."+r.g),Mc(r,r.m);else{var i=ae.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Bi(null);r&&Dc(s,r),e&&(s.g=e),i&&Mc(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Ne(r,n,e),Ne(r,"VER",t.ra),Nl(t,r),r}function oI(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new We(new Yd({ob:!0})):new We(t.va),e.Oa(t.J),e}V.isActive=function(){return!!this.h&&this.h.isActive(this)};function aI(){}V=aI.prototype;V.Ba=function(){};V.Aa=function(){};V.za=function(){};V.ya=function(){};V.isActive=function(){return!0};V.Va=function(){};function Vc(){if(so&&!(10<=Number(j4)))throw Error("Environmental error: no available transport.")}Vc.prototype.g=function(t,e){return new nn(t,e)};function nn(t,e){ot.call(this),this.g=new XT(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Wa(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Wa(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Io(this)}at(nn,ot);nn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Mt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=sI(t,null,t.Y),eh(t)};nn.prototype.close=function(){Ty(this.g)};nn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=py(t),t=n);e.j.push(new cD(e.fb++,t)),e.H==3&&eh(e)};nn.prototype.N=function(){this.g.h=null,delete this.j,Ty(this.g),delete this.g,nn.$.N.call(this)};function lI(t){_y.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}at(lI,_y);function uI(){wy.call(this),this.status=1}at(uI,wy);function Io(t){this.g=t}at(Io,aI);Io.prototype.Ba=function(){pt(this.g,"a")};Io.prototype.Aa=function(t){pt(this.g,new lI(t))};Io.prototype.za=function(t){pt(this.g,new uI)};Io.prototype.ya=function(){pt(this.g,"b")};function ED(){this.blockSize=-1}function Pn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}at(Pn,ED);Pn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function kf(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Pn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)kf(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){kf(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){kf(this,r),i=0;break}}this.h=i,this.i+=e};Pn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Se(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var SD={};function Ay(t){return-128<=t&&128>t?N4(t,function(e){return new Se([e|0],0>e?-1:0)}):new Se([t|0],0>t?-1:0)}function Bn(t){if(isNaN(t)||!isFinite(t))return Hs;if(0>t)return dt(Bn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=dm;return new Se(e,0)}function cI(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return dt(cI(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Bn(Math.pow(e,8)),r=Hs,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Bn(Math.pow(e,s)),r=r.R(s).add(Bn(o))):(r=r.R(n),r=r.add(Bn(o)))}return r}var dm=4294967296,Hs=Ay(0),hm=Ay(1),H_=Ay(16777216);V=Se.prototype;V.ea=function(){if(hn(this))return-dt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:dm+r)*e,e*=dm}return t};V.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ur(this))return"0";if(hn(this))return"-"+dt(this).toString(t);for(var e=Bn(Math.pow(t,6)),n=this,r="";;){var i=Uc(n,e).g;n=Fc(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,ur(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};V.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ur(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function hn(t){return t.h==-1}V.X=function(t){return t=Fc(this,t),hn(t)?-1:ur(t)?0:1};function dt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Se(n,~t.h).add(hm)}V.abs=function(){return hn(this)?dt(this):this};V.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Se(n,n[n.length-1]&-2147483648?-1:0)};function Fc(t,e){return t.add(dt(e))}V.R=function(t){if(ur(this)||ur(t))return Hs;if(hn(this))return hn(t)?dt(this).R(dt(t)):dt(dt(this).R(t));if(hn(t))return dt(this.R(dt(t)));if(0>this.X(H_)&&0>t.X(H_))return Bn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,Eu(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Eu(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Eu(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Eu(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Se(n,0)};function Eu(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function zo(t,e){this.g=t,this.h=e}function Uc(t,e){if(ur(e))throw Error("division by zero");if(ur(t))return new zo(Hs,Hs);if(hn(t))return e=Uc(dt(t),e),new zo(dt(e.g),dt(e.h));if(hn(e))return e=Uc(t,dt(e)),new zo(dt(e.g),e.h);if(30<t.g.length){if(hn(t)||hn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=hm,r=e;0>=r.X(t);)n=q_(n),r=q_(r);var i=ms(n,1),s=ms(r,1);for(r=ms(r,2),n=ms(n,2);!ur(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=ms(r,1),n=ms(n,1)}return e=Fc(t,i.R(e)),new zo(i,e)}for(i=Hs;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Bn(n),o=s.R(e);hn(o)||0<o.X(t);)n-=r,s=Bn(n),o=s.R(e);ur(s)&&(s=hm),i=i.add(s),t=Fc(t,o)}return new zo(i,t)}V.gb=function(t){return Uc(this,t).h};V.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Se(n,this.h&t.h)};V.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Se(n,this.h|t.h)};V.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Se(n,this.h^t.h)};function q_(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Se(n,t.h)}function ms(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Se(i,t.h)}Vc.prototype.createWebChannel=Vc.prototype.g;nn.prototype.send=nn.prototype.u;nn.prototype.open=nn.prototype.m;nn.prototype.close=nn.prototype.close;qd.NO_ERROR=0;qd.TIMEOUT=8;qd.HTTP_ERROR=6;CT.COMPLETE="complete";kT.EventType=Al;Al.OPEN="a";Al.CLOSE="b";Al.ERROR="c";Al.MESSAGE="d";ot.prototype.listen=ot.prototype.O;We.prototype.listenOnce=We.prototype.P;We.prototype.getLastError=We.prototype.Sa;We.prototype.getLastErrorCode=We.prototype.Ia;We.prototype.getStatus=We.prototype.da;We.prototype.getResponseJson=We.prototype.Wa;We.prototype.getResponseText=We.prototype.ja;We.prototype.send=We.prototype.ha;We.prototype.setWithCredentials=We.prototype.Oa;Pn.prototype.digest=Pn.prototype.l;Pn.prototype.reset=Pn.prototype.reset;Pn.prototype.update=Pn.prototype.j;Se.prototype.add=Se.prototype.add;Se.prototype.multiply=Se.prototype.R;Se.prototype.modulo=Se.prototype.gb;Se.prototype.compare=Se.prototype.X;Se.prototype.toNumber=Se.prototype.ea;Se.prototype.toString=Se.prototype.toString;Se.prototype.getBits=Se.prototype.D;Se.fromNumber=Bn;Se.fromString=cI;var TD=function(){return new Vc},ID=function(){return Hd()},Pf=qd,RD=CT,AD=ds,G_={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Su=kT,CD=We,kD=Pn,qs=Se;const K_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ro="10.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=new zg("@firebase/firestore");function Q_(){return es.logLevel}function Y(t,...e){if(es.logLevel<=we.DEBUG){const n=e.map(Cy);es.debug(`Firestore (${Ro}): ${t}`,...n)}}function _r(t,...e){if(es.logLevel<=we.ERROR){const n=e.map(Cy);es.error(`Firestore (${Ro}): ${t}`,...n)}}function oo(t,...e){if(es.logLevel<=we.WARN){const n=e.map(Cy);es.warn(`Firestore (${Ro}): ${t}`,...n)}}function Cy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t="Unexpected state"){const e=`FIRESTORE (${Ro}) INTERNAL ASSERTION FAILED: `+t;throw _r(e),new Error(e)}function je(t,e){t||se()}function de(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends er{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(xt.UNAUTHENTICATED))}shutdown(){}}class ND{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class bD{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new dr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new dr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new dr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(je(typeof r.accessToken=="string"),new dI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string"),new xt(e)}}class OD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class jD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new OD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class LD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(je(typeof n.token=="string"),this.R=n.token,new LD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=MD(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function xe(t,e){return t<e?-1:t>e?1:0}function ao(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Je(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new le(e)}static min(){return new le(new Je(0,0))}static max(){return new le(new Je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(),r===void 0?r=e.length-n:r>e.length-n&&se(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ja.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ja?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class be extends Ja{construct(e,n,r){return new be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new be(n)}static emptyPath(){return new be([])}}const $D=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tt extends Ja{construct(e,n,r){return new Tt(e,n,r)}static isValidIdentifier(e){return $D.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Tt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new G(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new G(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new G(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tt(n)}static emptyPath(){return new Tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(be.fromString(e))}static fromName(e){return new ne(be.fromString(e).popFirst(5))}static empty(){return new ne(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new be(e.slice()))}}function VD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new Je(n+1,0):new Je(n,r));return new ai(i,ne.empty(),e)}function FD(t){return new ai(t.readTime,t.key,-1)}class ai{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ai(le.min(),ne.empty(),-1)}static max(){return new ai(le.max(),ne.empty(),-1)}}function UD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(t){if(t.code!==P.FAILED_PRECONDITION||t.message!==BD)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(i=>i?j.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new j((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new j((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Ol(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}ky.ae=-1;function th(t){return t==null}function Bc(t){return t===0&&1/t==-1/0}function WD(t){return typeof t=="number"&&Number.isInteger(t)&&!Bc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ao(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||ct.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ct.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tu(this.root,e,this.comparator,!0)}}class Tu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ct{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ct.RED,this.left=i??ct.EMPTY,this.right=s??ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ct(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ct.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw se();const e=this.left.check();if(e!==this.right.check())throw se();return e+(this.isRed()?0:1)}}ct.EMPTY=null,ct.RED=!0,ct.BLACK=!1;ct.EMPTY=new class{constructor(){this.size=0}get key(){throw se()}get value(){throw se()}get color(){throw se()}get left(){throw se()}get right(){throw se()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new X_(this.data.getIterator())}getIteratorFrom(e){return new X_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof At)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new At(this.comparator);return n.data=e,n}}class X_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new In([])}unionWith(e){let n=new At(Tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new In(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ao(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new pI("Invalid base64 string: "+s):s}}(e);return new Nt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const HD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function li(t){if(je(!!t),typeof t=="string"){let e=0;const n=HD.exec(t);if(je(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(t.seconds),nanos:Ke(t.nanos)}}function Ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ts(t){return typeof t=="string"?Nt.fromBase64String(t):Nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ny(t){const e=t.mapValue.fields.__previous_value__;return Py(e)?Ny(e):e}function Za(t){const e=li(t.mapValue.fields.__local_write_time__.timestampValue);return new Je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class el{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new el("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof el&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ns(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Py(t)?4:GD(t)?9007199254740991:10:se()}function Zn(t,e){if(t===e)return!0;const n=ns(t);if(n!==ns(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Za(t).isEqual(Za(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=li(i.timestampValue),a=li(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ts(i.bytesValue).isEqual(ts(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ke(i.geoPointValue.latitude)===Ke(s.geoPointValue.latitude)&&Ke(i.geoPointValue.longitude)===Ke(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ke(i.integerValue)===Ke(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ke(i.doubleValue),a=Ke(s.doubleValue);return o===a?Bc(o)===Bc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ao(t.arrayValue.values||[],e.arrayValue.values||[],Zn);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Y_(o)!==Y_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Zn(o[l],a[l])))return!1;return!0}(t,e);default:return se()}}function tl(t,e){return(t.values||[]).find(n=>Zn(n,e))!==void 0}function lo(t,e){if(t===e)return 0;const n=ns(t),r=ns(e);if(n!==r)return xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ke(s.integerValue||s.doubleValue),l=Ke(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return J_(t.timestampValue,e.timestampValue);case 4:return J_(Za(t),Za(e));case 5:return xe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ts(s),l=ts(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=xe(a[u],l[u]);if(d!==0)return d}return xe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=xe(Ke(s.latitude),Ke(o.latitude));return a!==0?a:xe(Ke(s.longitude),Ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const d=lo(a[u],l[u]);if(d)return d}return xe(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Iu.mapValue&&o===Iu.mapValue)return 0;if(s===Iu.mapValue)return 1;if(o===Iu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const p=xe(l[f],d[f]);if(p!==0)return p;const m=lo(a[l[f]],u[d[f]]);if(m!==0)return m}return xe(l.length,d.length)}(t.mapValue,e.mapValue);default:throw se()}}function J_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xe(t,e);const n=li(t),r=li(e),i=xe(n.seconds,r.seconds);return i!==0?i:xe(n.nanos,r.nanos)}function uo(t){return fm(t)}function fm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=li(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ts(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=fm(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${fm(n.fields[o])}`;return i+"}"}(t.mapValue):se()}function Z_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function pm(t){return!!t&&"integerValue"in t}function by(t){return!!t&&"arrayValue"in t}function e1(t){return!!t&&"nullValue"in t}function t1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qu(t){return!!t&&"mapValue"in t}function ma(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ao(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ma(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ma(t.arrayValue.values[n]);return e}return Object.assign({},t)}function GD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!qu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ma(n)}setAll(e){let n=Tt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ma(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());qu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Zn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];qu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ao(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new fn(ma(this.value))}}function mI(t){const e=[];return Ao(t.fields,(n,r)=>{const i=new Tt([n]);if(qu(r)){const s=mI(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new In(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new St(e,0,le.min(),le.min(),le.min(),fn.empty(),0)}static newFoundDocument(e,n,r,i){return new St(e,1,n,le.min(),r,i,0)}static newNoDocument(e,n){return new St(e,2,n,le.min(),le.min(),fn.empty(),0)}static newUnknownDocument(e,n){return new St(e,3,n,le.min(),le.min(),fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof St&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new St(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n){this.position=e,this.inclusive=n}}function n1(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=lo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function r1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Zn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n="asc"){this.field=e,this.dir=n}}function KD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{}class Ye extends gI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new YD(e,n,r):n==="array-contains"?new ZD(e,r):n==="in"?new eM(e,r):n==="not-in"?new tM(e,r):n==="array-contains-any"?new nM(e,r):new Ye(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new XD(e,r):new JD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(lo(n,this.value)):n!==null&&ns(this.value)===ns(n)&&this.matchesComparison(lo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Nn extends gI{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Nn(e,n)}matches(e){return yI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function yI(t){return t.op==="and"}function vI(t){return QD(t)&&yI(t)}function QD(t){for(const e of t.filters)if(e instanceof Nn)return!1;return!0}function mm(t){if(t instanceof Ye)return t.field.canonicalString()+t.op.toString()+uo(t.value);if(vI(t))return t.filters.map(e=>mm(e)).join(",");{const e=t.filters.map(n=>mm(n)).join(",");return`${t.op}(${e})`}}function _I(t,e){return t instanceof Ye?function(r,i){return i instanceof Ye&&r.op===i.op&&r.field.isEqual(i.field)&&Zn(r.value,i.value)}(t,e):t instanceof Nn?function(r,i){return i instanceof Nn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&_I(o,i.filters[a]),!0):!1}(t,e):void se()}function wI(t){return t instanceof Ye?function(n){return`${n.field.canonicalString()} ${n.op} ${uo(n.value)}`}(t):t instanceof Nn?function(n){return n.op.toString()+" {"+n.getFilters().map(wI).join(" ,")+"}"}(t):"Filter"}class YD extends Ye{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class XD extends Ye{constructor(e,n){super(e,"in",n),this.keys=xI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class JD extends Ye{constructor(e,n){super(e,"not-in",n),this.keys=xI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function xI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class ZD extends Ye{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return by(n)&&tl(n.arrayValue,this.value)}}class eM extends Ye{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&tl(this.value.arrayValue,n)}}class tM extends Ye{constructor(e,n){super(e,"not-in",n)}matches(e){if(tl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!tl(this.value.arrayValue,n)}}class nM extends Ye{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!by(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>tl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.he=null}}function i1(t,e=null,n=[],r=[],i=null,s=null,o=null){return new rM(t,e,n,r,i,s,o)}function Oy(t){const e=de(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>mm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),th(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>uo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>uo(r)).join(",")),e.he=n}return e.he}function jy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!KD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_I(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!r1(t.startAt,e.startAt)&&r1(t.endAt,e.endAt)}function gm(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function iM(t,e,n,r,i,s,o,a){return new jl(t,e,n,r,i,s,o,a)}function Ly(t){return new jl(t)}function s1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function EI(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Dy(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function SI(t){return t.collectionGroup!==null}function ya(t){const e=de(t);if(e.Pe===null){e.Pe=[];const n=Dy(e),r=EI(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new ga(n)),e.Pe.push(new ga(Tt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new ga(Tt.keyField(),s))}}}return e.Pe}function wr(t){const e=de(t);return e.Ie||(e.Ie=sM(e,ya(t))),e.Ie}function sM(t,e){if(t.limitType==="F")return i1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ga(i.field,s)});const n=t.endAt?new zc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new zc(t.startAt.position,t.startAt.inclusive):null;return i1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ym(t,e){e.getFirstInequalityField(),Dy(t);const n=t.filters.concat([e]);return new jl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vm(t,e,n){return new jl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function nh(t,e){return jy(wr(t),wr(e))&&t.limitType===e.limitType}function TI(t){return`${Oy(wr(t))}|lt:${t.limitType}`}function _m(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>wI(i)).join(", ")}]`),th(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>uo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>uo(i)).join(",")),`Target(${r})`}(wr(t))}; limitType=${t.limitType})`}function rh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ne.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ya(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=n1(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,ya(r),i)||r.endAt&&!function(o,a,l){const u=n1(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,ya(r),i))}(t,e)}function oM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function II(t){return(e,n)=>{let r=!1;for(const i of ya(t)){const s=aM(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function aM(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?lo(l,u):se()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ao(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return fI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=new Ue(ne.comparator);function xr(){return lM}const RI=new Ue(ne.comparator);function Yo(...t){let e=RI;for(const n of t)e=e.insert(n.key,n);return e}function AI(t){let e=RI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Di(){return va()}function CI(){return va()}function va(){return new Co(t=>t.toString(),(t,e)=>t.isEqual(e))}const uM=new Ue(ne.comparator),cM=new At(ne.comparator);function pe(...t){let e=cM;for(const n of t)e=e.add(n);return e}const dM=new At(xe);function hM(){return dM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bc(e)?"-0":e}}function PI(t){return{integerValue:""+t}}function fM(t,e){return WD(e)?PI(e):kI(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(){this._=void 0}}function pM(t,e,n){return t instanceof nl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Py(s)&&(s=Ny(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof rl?bI(t,e):t instanceof il?OI(t,e):function(i,s){const o=NI(i,s),a=o1(o)+o1(i.Ee);return pm(o)&&pm(i.Ee)?PI(a):kI(i.serializer,a)}(t,e)}function mM(t,e,n){return t instanceof rl?bI(t,e):t instanceof il?OI(t,e):n}function NI(t,e){return t instanceof Wc?function(r){return pm(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class nl extends ih{}class rl extends ih{constructor(e){super(),this.elements=e}}function bI(t,e){const n=jI(e);for(const r of t.elements)n.some(i=>Zn(i,r))||n.push(r);return{arrayValue:{values:n}}}class il extends ih{constructor(e){super(),this.elements=e}}function OI(t,e){let n=jI(e);for(const r of t.elements)n=n.filter(i=>!Zn(i,r));return{arrayValue:{values:n}}}class Wc extends ih{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function o1(t){return Ke(t.integerValue||t.doubleValue)}function jI(t){return by(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,n){this.field=e,this.transform=n}}function yM(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof rl&&i instanceof rl||r instanceof il&&i instanceof il?ao(r.elements,i.elements,Zn):r instanceof Wc&&i instanceof Wc?Zn(r.Ee,i.Ee):r instanceof nl&&i instanceof nl}(t.transform,e.transform)}class vM{constructor(e,n){this.version=e,this.transformResults=n}}class Kn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Kn}static exists(e){return new Kn(void 0,e)}static updateTime(e){return new Kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class sh{}function LI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new My(t.key,Kn.none()):new Ll(t.key,t.data,Kn.none());{const n=t.data,r=fn.empty();let i=new At(Tt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new hs(t.key,r,new In(i.toArray()),Kn.none())}}function _M(t,e,n){t instanceof Ll?function(i,s,o){const a=i.value.clone(),l=l1(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof hs?function(i,s,o){if(!Gu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=l1(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(DI(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function _a(t,e,n,r){return t instanceof Ll?function(s,o,a,l){if(!Gu(s.precondition,o))return a;const u=s.value.clone(),d=u1(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof hs?function(s,o,a,l){if(!Gu(s.precondition,o))return a;const u=u1(s.fieldTransforms,l,o),d=o.data;return d.setAll(DI(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Gu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function wM(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=NI(r.transform,i||null);s!=null&&(n===null&&(n=fn.empty()),n.set(r.field,s))}return n||null}function a1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ao(r,i,(s,o)=>yM(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ll extends sh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class hs extends sh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function DI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function l1(t,e,n){const r=new Map;je(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,mM(o,a,n[i]))}return r}function u1(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,pM(s,o,e))}return r}class My extends sh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xM extends sh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&_M(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_a(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_a(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=CI();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=LI(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&ao(this.mutations,e.mutations,(n,r)=>a1(n,r))&&ao(this.baseMutations,e.baseMutations,(n,r)=>a1(n,r))}}class $y{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){je(e.mutations.length===r.length);let i=function(){return uM}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new $y(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge,ge;function IM(t){switch(t){default:return se();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function MI(t){if(t===void 0)return _r("GRPC error has no .code"),P.UNKNOWN;switch(t){case Ge.OK:return P.OK;case Ge.CANCELLED:return P.CANCELLED;case Ge.UNKNOWN:return P.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return P.INTERNAL;case Ge.UNAVAILABLE:return P.UNAVAILABLE;case Ge.UNAUTHENTICATED:return P.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case Ge.NOT_FOUND:return P.NOT_FOUND;case Ge.ALREADY_EXISTS:return P.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return P.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case Ge.ABORTED:return P.ABORTED;case Ge.OUT_OF_RANGE:return P.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return P.UNIMPLEMENTED;case Ge.DATA_LOSS:return P.DATA_LOSS;default:return se()}}(ge=Ge||(Ge={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM=new qs([4294967295,4294967295],0);function c1(t){const e=RM().encode(t),n=new kD;return n.update(e),new Uint8Array(n.digest())}function d1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new qs([n,r],0),new qs([i,s],0)]}class Vy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xo(`Invalid padding: ${n}`);if(r<0)throw new Xo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Xo(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=qs.fromNumber(this.Ae)}Ve(e,n,r){let i=e.add(n.multiply(qs.fromNumber(r)));return i.compare(AM)===1&&(i=new qs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=c1(e),[r,i]=d1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);if(!this.me(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Vy(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=c1(e),[r,i]=d1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Xo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Dl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new oh(le.min(),i,new Ue(xe),xr(),pe())}}class Dl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Dl(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n,r,i){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=i}}class $I{constructor(e,n){this.targetId=e,this.ye=n}}class VI{constructor(e,n,r=Nt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class h1{constructor(){this.we=0,this.Se=p1(),this.be=Nt.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=pe(),n=pe(),r=pe();return this.Se.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:se()}}),new Dl(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=p1()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class CM{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=xr(),this.Ue=f1(),this.We=new Ue(xe)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:se()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,i)=>{this.Ye(i)&&n(i)})}Xe(e){const n=e.targetId,r=e.ye.count,i=this.et(n);if(i){const s=i.target;if(gm(s))if(r===0){const o=new ne(s.path);this.je(n,o,St.newNoDocument(o,le.min()))}else je(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),l=a?this.rt(a,e,o):1;if(l!==0){this.Ze(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,u)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ts(r).toUint8Array()}catch(l){if(l instanceof pI)return oo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Vy(o,i,s)}catch(l){return oo(l instanceof Xo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.je(n,s,null),i++)}),i}_t(e){const n=new Map;this.Ke.forEach((s,o)=>{const a=this.et(o);if(a){if(s.current&&gm(a.target)){const l=new ne(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,St.newNoDocument(l,e))}s.Fe&&(n.set(o,s.xe()),s.Oe())}});let r=pe();this.Ue.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.et(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.$e.forEach((s,o)=>o.setReadTime(e));const i=new oh(e,n,this.We,this.$e,r);return this.$e=xr(),this.Ue=f1(),this.We=new Ue(xe),i}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const i=this.Je(e);this.ut(e,n)?i.Ne(n,1):i.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new h1,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new At(xe),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new h1),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function f1(){return new Ue(ne.comparator)}function p1(){return new Ue(ne.comparator)}const kM=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),PM=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),NM=(()=>({and:"AND",or:"OR"}))();class bM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function wm(t,e){return t.useProto3Json||th(e)?e:{value:e}}function Hc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function OM(t,e){return Hc(t,e.toTimestamp())}function Qn(t){return je(!!t),le.fromTimestamp(function(n){const r=li(n);return new Je(r.seconds,r.nanos)}(t))}function Fy(t,e){return function(r){return new be(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function UI(t){const e=be.fromString(t);return je(HI(e)),e}function xm(t,e){return Fy(t.databaseId,e.path)}function Nf(t,e){const n=UI(e);if(n.get(1)!==t.databaseId.projectId)throw new G(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(BI(n))}function Em(t,e){return Fy(t.databaseId,e)}function jM(t){const e=UI(t);return e.length===4?be.emptyPath():BI(e)}function Sm(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function BI(t){return je(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function m1(t,e,n){return{name:xm(t,e),fields:n.value.mapValue.fields}}function LM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:se()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(je(d===void 0||typeof d=="string"),Nt.fromBase64String(d||"")):(je(d===void 0||d instanceof Uint8Array),Nt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?P.UNKNOWN:MI(u.code);return new G(d,u.message||"")}(o);n=new VI(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Nf(t,r.document.name),s=Qn(r.document.updateTime),o=r.document.createTime?Qn(r.document.createTime):le.min(),a=new fn({mapValue:{fields:r.document.fields}}),l=St.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Ku(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Nf(t,r.document),s=r.readTime?Qn(r.readTime):le.min(),o=St.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ku([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Nf(t,r.document),s=r.removedTargetIds||[];n=new Ku([],s,i,null)}else{if(!("filter"in e))return se();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new TM(i,s),a=r.targetId;n=new $I(a,o)}}return n}function DM(t,e){let n;if(e instanceof Ll)n={update:m1(t,e.key,e.value)};else if(e instanceof My)n={delete:xm(t,e.key)};else if(e instanceof hs)n={update:m1(t,e.key,e.data),updateMask:HM(e.fieldMask)};else{if(!(e instanceof xM))return se();n={verify:xm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof nl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof rl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof il)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Wc)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw se()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:OM(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:se()}(t,e.precondition)),n}function MM(t,e){return t&&t.length>0?(je(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Qn(i.updateTime):Qn(s);return o.isEqual(le.min())&&(o=Qn(s)),new vM(o,i.transformResults||[])}(n,e))):[]}function $M(t,e){return{documents:[Em(t,e.path)]}}function VM(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Em(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Em(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return WI(Nn.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(u=>function(f){return{field:ys(f.field),direction:BM(f.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=wm(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function FM(t){let e=jM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){je(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){const p=zI(f);return p instanceof Nn&&vI(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(_){return new ga(vs(_.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,th(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new zc(m,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,m=f.values||[];return new zc(m,p)}(n.endAt)),iM(e,i,o,s,a,"F",l,u)}function UM(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function zI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=vs(n.unaryFilter.field);return Ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=vs(n.unaryFilter.field);return Ye.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=vs(n.unaryFilter.field);return Ye.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=vs(n.unaryFilter.field);return Ye.create(o,"!=",{nullValue:"NULL_VALUE"});default:return se()}}(t):t.fieldFilter!==void 0?function(n){return Ye.create(vs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return se()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Nn.create(n.compositeFilter.filters.map(r=>zI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return se()}}(n.compositeFilter.op))}(t):se()}function BM(t){return kM[t]}function zM(t){return PM[t]}function WM(t){return NM[t]}function ys(t){return{fieldPath:t.canonicalString()}}function vs(t){return Tt.fromServerFormat(t.fieldPath)}function WI(t){return t instanceof Ye?function(n){if(n.op==="=="){if(t1(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NAN"}};if(e1(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(t1(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NOT_NAN"}};if(e1(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ys(n.field),op:zM(n.op),value:n.value}}}(t):t instanceof Nn?function(n){const r=n.getFilters().map(i=>WI(i));return r.length===1?r[0]:{compositeFilter:{op:WM(n.op),filters:r}}}(t):se()}function HM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function HI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n,r,i,s=le.min(),o=le.min(),a=Nt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ur(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e){this.ht=e}}function GM(t){const e=FM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(){this._n=new QM}addToCollectionParentIndex(e,n){return this._n.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(ai.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(ai.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class QM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new At(be.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new At(be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new co(0)}static Bn(){return new co(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(){this.changes=new Co(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,St.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&_a(r.mutation,i,In.empty(),Je.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const i=Di();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Yo();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Di();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=xr();const o=va(),a=function(){return va()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof hs)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),_a(d.mutation,u,d.mutation.getFieldMask(),Je.now())):o.set(u.key,In.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var f;return a.set(u,new XM(d,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=va();let i=new Ue((o,a)=>o-a),s=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||In.empty();d=a.applyToLocalView(u,d),r.set(l,d);const f=(i.get(a.batchId)||pe()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,f=CI();d.forEach(p=>{if(!s.has(p)){const m=LI(n.get(p),r.get(p));m!==null&&f.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return ne.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):SI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):j.resolve(Di());let a=-1,l=s;return o.next(u=>j.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?j.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,pe())).next(d=>({batchId:a,changes:AI(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let i=Yo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=Yo();return this.indexManager.getCollectionParents(e,i).next(o=>j.forEach(o,a=>{const l=function(d,f){return new jl(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(u=>{u.forEach((d,f)=>{s=s.insert(d,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,l)=>{const u=l.getKey();s.get(u)===null&&(s=s.insert(u,St.newInvalidDocument(u)))});let o=Yo();return s.forEach((a,l)=>{const u=i.get(a);u!==void 0&&_a(u.mutation,l,In.empty(),Je.now()),rh(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return j.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Qn(i.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:GM(i.bundledQuery),readTime:Qn(i.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(){this.overlays=new Ue(ne.comparator),this.hr=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Di();return j.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.It(e,n,s)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const i=Di(),s=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return j.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ue((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=Di(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=Di(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return j.resolve(a)}It(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new SM(n,r));let s=this.hr.get(n);s===void 0&&(s=pe(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(){this.Pr=new At(rt.Ir),this.Tr=new At(rt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new rt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new rt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new ne(new be([])),r=new rt(n,e),i=new rt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new ne(new be([])),r=new rt(n,e),i=new rt(n,e+1);let s=pe();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new rt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ne.comparator(e.key,n.key)||xe(e.pr,n.pr)}static Er(e,n){return xe(e.pr,n.pr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new At(rt.Ir)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new EM(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new rt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rt(n,0),i=new rt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new At(xe);return n.forEach(i=>{const s=new rt(i,0),o=new rt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),j.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ne.isDocumentKey(s)||(s=s.child(""));const o=new rt(new ne(s),0);let a=new At(xe);return this.wr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.pr)),!0)},o),j.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){je(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return j.forEach(n.mutations,i=>{const s=new rt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new rt(n,0),i=this.wr.firstAfterOrEqual(r);return j.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}vr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e){this.Cr=e,this.docs=function(){return new Ue(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():St.newInvalidDocument(n))}getEntries(e,n){let r=xr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():St.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=xr();const o=n.path,a=new ne(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||UD(FD(d),r)<=0||(i.has(d.key)||rh(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,n,r,i){se()}Fr(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new r3(this)}getSize(e){return j.resolve(this.size)}}class r3 extends YM{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e){this.persistence=e,this.Mr=new Co(n=>Oy(n),jy),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Uy,this.targetCount=0,this.Br=co.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),j.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new co(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.qn(n),j.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),j.waitFor(s).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e,n){this.Lr={},this.overlays={},this.kr=new ky(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new i3(this),this.indexManager=new KM,this.remoteDocumentCache=function(i){return new n3(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new qM(n),this.$r=new ZM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new e3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new t3(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const i=new o3(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return j.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class o3 extends zD{constructor(e){super(),this.currentSequenceNumber=e}}class By{constructor(e){this.persistence=e,this.zr=new Uy,this.jr=null}static Hr(e){return new By(e)}get Jr(){if(this.jr)return this.jr;throw se()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),j.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Jr,r=>{const i=ne.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,le.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return j.or([()=>j.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=pe(),i=pe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new zy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(){this.$i=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Wi(e,n).next(s=>s||this.Gi(e,n,i,r)).next(s=>s||this.zi(e,n))}Wi(e,n){if(s1(n))return j.resolve(null);let r=wr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=vm(n,null,"F"),r=wr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=pe(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ji(n,a);return this.Hi(n,u,o,l.readTime)?this.Wi(e,vm(n,null,"F")):this.Ji(e,u,n,l)}))})))}Gi(e,n,r,i){return s1(n)||i.isEqual(le.min())?this.zi(e,n):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(n,s);return this.Hi(n,o,r,i)?this.zi(e,n):(Q_()<=we.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_m(n)),this.Ji(e,o,n,VD(i,-1)))})}ji(e,n){let r=new At(II(e));return n.forEach((i,s)=>{rh(e,s)&&(r=r.add(s))}),r}Hi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}zi(e,n){return Q_()<=we.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",_m(n)),this.Ui.getDocumentsMatchingQuery(e,n,ai.min())}Ji(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e,n,r,i){this.persistence=e,this.Yi=n,this.serializer=i,this.Zi=new Ue(xe),this.Xi=new Co(s=>Oy(s),jy),this.es=new Map,this.ts=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this.ns(r)}ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JM(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Zi))}}function u3(t,e,n,r){return new l3(t,e,n,r)}async function qI(t,e){const n=de(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=pe();for(const u of i){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({rs:u,removedBatchIds:o,addedBatchIds:a}))})})}function c3(t,e){const n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ts.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const f=u.batch,p=f.keys();let m=j.resolve();return p.forEach(_=>{m=m.next(()=>d.getEntry(l,_)).next(w=>{const x=u.docVersions.get(_);je(x!==null),w.version.compareTo(x)<0&&(f.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),d.addEntry(w)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=pe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function GI(t){const e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function d3(t,e){const n=de(t),r=e.snapshotVersion;let i=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ts.newChangeBuffer({trackRemovals:!0});i=n.Zi;const a=[];e.targetChanges.forEach((d,f)=>{const p=i.get(f);if(!p)return;a.push(n.Qr.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,d.addedDocuments,f)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Nt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(f,m),function(w,x,y){return w.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(p,m,d)&&a.push(n.Qr.updateTargetData(s,m))});let l=xr(),u=pe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(h3(s,o,e.documentUpdates).next(d=>{l=d.ss,u=d.os})),!r.isEqual(le.min())){const d=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return j.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Zi=i,s))}function h3(t,e,n){let r=pe(),i=pe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=xr();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Y("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ss:o,os:i}})}function f3(t,e){const n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function p3(t,e){const n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,j.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Ur(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Zi.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(r.targetId,r),n.Xi.set(e,r.targetId)),r})}async function Tm(t,e,n){const r=de(t),i=r.Zi.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ol(o))throw o;Y("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Zi=r.Zi.remove(e),r.Xi.delete(i.target)}function g1(t,e,n){const r=de(t);let i=le.min(),s=pe();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,u,d){const f=de(l),p=f.Xi.get(d);return p!==void 0?j.resolve(f.Zi.get(p)):f.Qr.getTargetData(u,d)}(r,o,wr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Yi.getDocumentsMatchingQuery(o,e,n?i:le.min(),n?s:pe())).next(a=>(m3(r,oM(e),a),{documents:a,_s:s})))}function m3(t,e,n){let r=t.es.get(e)||le.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.es.set(e,r)}class y1{constructor(){this.activeTargetIds=hM()}Is(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ts(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ps(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class g3{constructor(){this.Ys=new y1,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}updateQueryState(e,n,r){this.Zs[e]=n}removeLocalQueryTarget(e){this.Ys.Ts(e)}isLocalQueryTarget(e){return this.Ys.activeTargetIds.has(e)}clearQueryState(e){delete this.Zs[e]}getAllActiveQueryTargets(){return this.Ys.activeTargetIds}isActiveQueryTarget(e){return this.Ys.activeTargetIds.has(e)}start(){return this.Ys=new y1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{Xs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(){this.eo=()=>this.no(),this.ro=()=>this.io(),this.so=[],this.oo()}Xs(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}oo(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}no(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}io(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ru=null;function bf(){return Ru===null?Ru=function(){return 268435456+Math.round(2147483648*Math.random())}():Ru++,"0x"+Ru.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e){this._o=e._o,this.ao=e.ao}uo(e){this.co=e}lo(e){this.ho=e}onMessage(e){this.Po=e}close(){this.ao()}send(e){this._o(e)}Io(){this.co()}To(e){this.ho(e)}Eo(e){this.Po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="WebChannelConnection";class w3 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ao=r+"://"+n.host,this.Ro=`projects/${i}/databases/${s}`,this.Vo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get mo(){return!1}fo(n,r,i,s,o){const a=bf(),l=this.po(n,r);Y("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(u,s,o),this.wo(n,l,u,i).then(d=>(Y("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw oo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}So(n,r,i,s,o,a){return this.fo(n,r,i,s,o)}yo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ro}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}po(n,r){const i=v3[n];return`${this.Ao}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}wo(e,n,r,i){const s=bf();return new Promise((o,a)=>{const l=new CD;l.setWithCredentials(!0),l.listenOnce(RD.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Pf.NO_ERROR:const d=l.getResponseJson();Y(_t,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Pf.TIMEOUT:Y(_t,`RPC '${e}' ${s} timed out`),a(new G(P.DEADLINE_EXCEEDED,"Request time out"));break;case Pf.HTTP_ERROR:const f=l.getStatus();if(Y(_t,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const _=function(x){const y=x.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(y)>=0?y:P.UNKNOWN}(m.status);a(new G(_,m.message))}else a(new G(P.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new G(P.UNAVAILABLE,"Connection failed."));break;default:se()}}finally{Y(_t,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Y(_t,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}bo(e,n,r){const i=bf(),s=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=TD(),a=ID(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.yo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");Y(_t,`Creating RPC '${e}' stream ${i}: ${d}`,l);const f=o.createWebChannel(d,l);let p=!1,m=!1;const _=new _3({_o:x=>{m?Y(_t,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(p||(Y(_t,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),Y(_t,`RPC '${e}' stream ${i} sending:`,x),f.send(x))},ao:()=>f.close()}),w=(x,y,g)=>{x.listen(y,v=>{try{g(v)}catch(E){setTimeout(()=>{throw E},0)}})};return w(f,Su.EventType.OPEN,()=>{m||Y(_t,`RPC '${e}' stream ${i} transport opened.`)}),w(f,Su.EventType.CLOSE,()=>{m||(m=!0,Y(_t,`RPC '${e}' stream ${i} transport closed`),_.To())}),w(f,Su.EventType.ERROR,x=>{m||(m=!0,oo(_t,`RPC '${e}' stream ${i} transport errored:`,x),_.To(new G(P.UNAVAILABLE,"The operation could not be completed")))}),w(f,Su.EventType.MESSAGE,x=>{var y;if(!m){const g=x.data[0];je(!!g);const v=g,E=v.error||((y=v[0])===null||y===void 0?void 0:y.error);if(E){Y(_t,`RPC '${e}' stream ${i} received error:`,E);const S=E.status;let I=function(C){const A=Ge[C];if(A!==void 0)return MI(A)}(S),T=E.message;I===void 0&&(I=P.INTERNAL,T="Unknown error status: "+S+" with message "+E.message),m=!0,_.To(new G(I,T)),f.close()}else Y(_t,`RPC '${e}' stream ${i} received:`,g),_.Eo(g)}}),w(a,AD.STAT_EVENT,x=>{x.stat===G_.PROXY?Y(_t,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===G_.NOPROXY&&Y(_t,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.Io()},0),_}}function Of(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(t){return new bM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Do=r,this.vo=i,this.Co=s,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}reset(){this.Fo=0}Oo(){this.Fo=this.Co}No(e){this.cancel();const n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),i=Math.max(0,n-r);i>0&&Y("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Fo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Mo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.xo=Date.now(),e())),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}Lo(){this.Mo!==null&&(this.Mo.skipDelay(),this.Mo=null)}cancel(){this.Mo!==null&&(this.Mo.cancel(),this.Mo=null)}Bo(){return(Math.random()-.5)*this.Fo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.ko=r,this.qo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new KI(e,n)}Wo(){return this.state===1||this.state===5||this.Go()}Go(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.zo()}async stop(){this.Wo()&&await this.close(0)}jo(){this.state=0,this.Uo.reset()}Ho(){this.Go()&&this.Ko===null&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,()=>this.Jo()))}Yo(e){this.Zo(),this.stream.send(e)}async Jo(){if(this.Go())return this.close(0)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}Xo(){this.$o&&(this.$o.cancel(),this.$o=null)}async close(e,n){this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,e!==4?this.Uo.reset():n&&n.code===P.RESOURCE_EXHAUSTED?(_r(n.toString()),_r("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.e_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.lo(n)}e_(){}auth(){this.state=1;const e=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Qo===n&&this.n_(r,i)},r=>{e(()=>{const i=new G(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.r_(i)})})}n_(e,n){const r=this.t_(this.Qo);this.stream=this.i_(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.$o=this.oi.enqueueAfterDelay(this.qo,1e4,()=>(this.Go()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.lo(i=>{r(()=>this.r_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}zo(){this.state=5,this.Uo.No(async()=>{this.state=0,this.start()})}r_(e){return Y("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}t_(e){return n=>{this.oi.enqueueAndForget(()=>this.Qo===e?n():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class x3 extends QI{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}i_(e,n){return this.connection.bo("Listen",e,n)}onMessage(e){this.Uo.reset();const n=LM(this.serializer,e),r=function(s){if(!("targetChange"in s))return le.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?Qn(o.readTime):le.min()}(e);return this.listener.s_(n,r)}o_(e){const n={};n.database=Sm(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=gm(l)?{documents:$M(s,l)}:{query:VM(s,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=FI(s,o.resumeToken);const u=wm(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=Hc(s,o.snapshotVersion.toTimestamp());const u=wm(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=UM(this.serializer,e);r&&(n.labels=r),this.Yo(n)}__(e){const n={};n.database=Sm(this.serializer),n.removeTarget=e,this.Yo(n)}}class E3 extends QI{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.a_=!1}get u_(){return this.a_}start(){this.a_=!1,this.lastStreamToken=void 0,super.start()}e_(){this.a_&&this.c_([])}i_(e,n){return this.connection.bo("Write",e,n)}onMessage(e){if(je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();const n=MM(e.writeResults,e.commitTime),r=Qn(e.commitTime);return this.listener.l_(r,n)}return je(!e.writeResults||e.writeResults.length===0),this.a_=!0,this.listener.h_()}P_(){const e={};e.database=Sm(this.serializer),this.Yo(e)}c_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>DM(this.serializer,r))};this.Yo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.I_=!1}T_(){if(this.I_)throw new G(P.FAILED_PRECONDITION,"The client has already been terminated.")}fo(e,n,r){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.fo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(P.UNKNOWN,i.toString())})}So(e,n,r,i){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(P.UNKNOWN,s.toString())})}terminate(){this.I_=!0}}class T3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}V_(){this.d_===0&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.A_=null,this.f_("Backend didn't respond within 10 seconds."),this.m_("Offline"),Promise.resolve())))}g_(e){this.state==="Online"?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.m_("Offline")))}set(e){this.p_(),this.d_=0,e==="Online"&&(this.R_=!1),this.m_(e)}m_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}f_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.R_?(_r(n),this.R_=!1):Y("OnlineStateTracker",n)}p_(){this.A_!==null&&(this.A_.cancel(),this.A_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=s,this.D_.Xs(o=>{r.enqueueAndForget(async()=>{fs(this)&&(Y("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=de(l);u.S_.add(4),await Ml(u),u.v_.set("Unknown"),u.S_.delete(4),await lh(u)}(this))})}),this.v_=new T3(r,i)}}async function lh(t){if(fs(t))for(const e of t.b_)await e(!0)}async function Ml(t){for(const e of t.b_)await e(!1)}function YI(t,e){const n=de(t);n.w_.has(e.targetId)||(n.w_.set(e.targetId,e),qy(n)?Hy(n):ko(n).Go()&&Wy(n,e))}function XI(t,e){const n=de(t),r=ko(n);n.w_.delete(e),r.Go()&&JI(n,e),n.w_.size===0&&(r.Go()?r.Ho():fs(n)&&n.v_.set("Unknown"))}function Wy(t,e){if(t.C_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ko(t).o_(e)}function JI(t,e){t.C_.Le(e),ko(t).__(e)}function Hy(t){t.C_=new CM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.w_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),ko(t).start(),t.v_.V_()}function qy(t){return fs(t)&&!ko(t).Wo()&&t.w_.size>0}function fs(t){return de(t).S_.size===0}function ZI(t){t.C_=void 0}async function R3(t){t.w_.forEach((e,n)=>{Wy(t,e)})}async function A3(t,e){ZI(t),qy(t)?(t.v_.g_(e),Hy(t)):t.v_.set("Unknown")}async function C3(t,e,n){if(t.v_.set("Online"),e instanceof VI&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.w_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.w_.delete(a),i.C_.removeTarget(a))}(t,e)}catch(r){Y("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await qc(t,r)}else if(e instanceof Ku?t.C_.Ge(e):e instanceof $I?t.C_.Xe(e):t.C_.He(e),!n.isEqual(le.min()))try{const r=await GI(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.C_._t(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.w_.get(u);d&&s.w_.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=s.w_.get(l);if(!d)return;s.w_.set(l,d.withResumeToken(Nt.EMPTY_BYTE_STRING,d.snapshotVersion)),JI(s,l);const f=new Ur(d.target,l,u,d.sequenceNumber);Wy(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Y("RemoteStore","Failed to raise snapshot:",r),await qc(t,r)}}async function qc(t,e,n){if(!Ol(e))throw e;t.S_.add(1),await Ml(t),t.v_.set("Offline"),n||(n=()=>GI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y("RemoteStore","Retrying IndexedDB access"),await n(),t.S_.delete(1),await lh(t)})}function eR(t,e){return e().catch(n=>qc(t,n,e))}async function uh(t){const e=de(t),n=ui(e);let r=e.y_.length>0?e.y_[e.y_.length-1].batchId:-1;for(;k3(e);)try{const i=await f3(e.localStore,r);if(i===null){e.y_.length===0&&n.Ho();break}r=i.batchId,P3(e,i)}catch(i){await qc(e,i)}tR(e)&&nR(e)}function k3(t){return fs(t)&&t.y_.length<10}function P3(t,e){t.y_.push(e);const n=ui(t);n.Go()&&n.u_&&n.c_(e.mutations)}function tR(t){return fs(t)&&!ui(t).Wo()&&t.y_.length>0}function nR(t){ui(t).start()}async function N3(t){ui(t).P_()}async function b3(t){const e=ui(t);for(const n of t.y_)e.c_(n.mutations)}async function O3(t,e,n){const r=t.y_.shift(),i=$y.from(r,e,n);await eR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await uh(t)}async function j3(t,e){e&&ui(t).u_&&await async function(r,i){if(function(o){return IM(o)&&o!==P.ABORTED}(i.code)){const s=r.y_.shift();ui(r).jo(),await eR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await uh(r)}}(t,e),tR(t)&&nR(t)}async function _1(t,e){const n=de(t);n.asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials");const r=fs(n);n.S_.add(3),await Ml(n),r&&n.v_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.S_.delete(3),await lh(n)}async function L3(t,e){const n=de(t);e?(n.S_.delete(2),await lh(n)):e||(n.S_.add(2),await Ml(n),n.v_.set("Unknown"))}function ko(t){return t.F_||(t.F_=function(n,r,i){const s=de(n);return s.T_(),new x3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{uo:R3.bind(null,t),lo:A3.bind(null,t),s_:C3.bind(null,t)}),t.b_.push(async e=>{e?(t.F_.jo(),qy(t)?Hy(t):t.v_.set("Unknown")):(await t.F_.stop(),ZI(t))})),t.F_}function ui(t){return t.M_||(t.M_=function(n,r,i){const s=de(n);return s.T_(),new E3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{uo:N3.bind(null,t),lo:j3.bind(null,t),h_:b3.bind(null,t),l_:O3.bind(null,t)}),t.b_.push(async e=>{e?(t.M_.jo(),await uh(t)):(await t.M_.stop(),t.y_.length>0&&(Y("RemoteStore",`Stopping write stream with ${t.y_.length} pending writes`),t.y_=[]))})),t.M_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Gy(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ky(t,e){if(_r("AsyncQueue",`${e}: ${t}`),Ol(t))return new G(P.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=Yo(),this.sortedSet=new Ue(this.comparator)}static emptySet(e){return new Gs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Gs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Gs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(){this.x_=new Ue(ne.comparator)}track(e){const n=e.doc.key,r=this.x_.get(n);r?e.type!==0&&r.type===3?this.x_=this.x_.insert(n,e):e.type===3&&r.type!==1?this.x_=this.x_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.x_=this.x_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.x_=this.x_.remove(n):e.type===1&&r.type===2?this.x_=this.x_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):se():this.x_=this.x_.insert(n,e)}O_(){const e=[];return this.x_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ho{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ho(e,n,Gs.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(){this.N_=void 0,this.listeners=[]}}class M3{constructor(){this.queries=new Co(e=>TI(e),nh),this.onlineState="Unknown",this.B_=new Set}}async function rR(t,e){const n=de(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new D3),i)try{s.N_=await n.onListen(r)}catch(o){const a=Ky(o,`Initialization of query '${_m(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.L_(n.onlineState),s.N_&&e.k_(s.N_)&&Qy(n)}async function iR(t,e){const n=de(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function $3(t,e){const n=de(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.k_(i)&&(r=!0);o.N_=i}}r&&Qy(n)}function V3(t,e,n){const r=de(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function Qy(t){t.B_.forEach(e=>{e.next()})}class sR{constructor(e,n,r){this.query=e,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}k_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ho(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),n=!0):this.W_(e,this.onlineState)&&(this.G_(e),n=!0),this.K_=e,n}onError(e){this.q_.error(e)}L_(e){this.onlineState=e;let n=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),n=!0),n}W_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}U_(e){if(e.docChanges.length>0)return!0;const n=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}G_(e){e=ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.key=e}}class aR{constructor(e){this.key=e}}class F3{constructor(e,n){this.query=e,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=pe(),this.mutatedKeys=pe(),this.ia=II(e),this.sa=new Gs(this.ia)}get oa(){return this.ta}_a(e,n){const r=n?n.aa:new w1,i=n?n.sa:this.sa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const p=i.get(d),m=rh(this.query,f)?f:null,_=!!p&&this.mutatedKeys.has(p.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let x=!1;p&&m?p.data.isEqual(m.data)?_!==w&&(r.track({type:3,doc:m}),x=!0):this.ua(p,m)||(r.track({type:2,doc:m}),x=!0,(l&&this.ia(m,l)>0||u&&this.ia(m,u)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),x=!0):p&&!m&&(r.track({type:1,doc:p}),x=!0,(l||u)&&(a=!0)),x&&(m?(o=o.add(m),s=w?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{sa:o,aa:r,Hi:a,mutatedKeys:s}}ua(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;const s=e.aa.O_();s.sort((u,d)=>function(p,m){const _=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se()}};return _(p)-_(m)}(u.type,d.type)||this.ia(u.doc,d.doc)),this.ca(r);const o=n?this.la():[],a=this.ra.size===0&&this.current?1:0,l=a!==this.na;return this.na=a,s.length!==0||l?{snapshot:new ho(this.query,e.sa,i,s,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ha:o}:{ha:o}}L_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({sa:this.sa,aa:new w1,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}Pa(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}ca(e){e&&(e.addedDocuments.forEach(n=>this.ta=this.ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ta=this.ta.delete(n)),this.current=e.current)}la(){if(!this.current)return[];const e=this.ra;this.ra=pe(),this.sa.forEach(r=>{this.Pa(r.key)&&(this.ra=this.ra.add(r.key))});const n=[];return e.forEach(r=>{this.ra.has(r)||n.push(new aR(r))}),this.ra.forEach(r=>{e.has(r)||n.push(new oR(r))}),n}Ia(e){this.ta=e._s,this.ra=pe();const n=this._a(e.documents);return this.applyChanges(n,!0)}Ta(){return ho.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,this.na===0,this.hasCachedResults)}}class U3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class B3{constructor(e){this.key=e,this.Ea=!1}}class z3{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.da={},this.Aa=new Co(a=>TI(a),nh),this.Ra=new Map,this.Va=new Set,this.ma=new Ue(ne.comparator),this.fa=new Map,this.ga=new Uy,this.pa={},this.ya=new Map,this.wa=co.Bn(),this.onlineState="Unknown",this.Sa=void 0}get isPrimaryClient(){return this.Sa===!0}}async function W3(t,e){const n=e$(t);let r,i;const s=n.Aa.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ta();else{const o=await p3(n.localStore,wr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await H3(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&YI(n.remoteStore,o)}return i}async function H3(t,e,n,r,i){t.ba=(f,p,m)=>async function(w,x,y,g){let v=x.view._a(y);v.Hi&&(v=await g1(w.localStore,x.query,!1).then(({documents:I})=>x.view._a(I,v)));const E=g&&g.targetChanges.get(x.targetId),S=x.view.applyChanges(v,w.isPrimaryClient,E);return E1(w,x.targetId,S.ha),S.snapshot}(t,f,p,m);const s=await g1(t.localStore,e,!0),o=new F3(e,s._s),a=o._a(s.documents),l=Dl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);E1(t,n,u.ha);const d=new U3(e,n,o);return t.Aa.set(e,d),t.Ra.has(n)?t.Ra.get(n).push(e):t.Ra.set(n,[e]),u.snapshot}async function q3(t,e){const n=de(t),r=n.Aa.get(e),i=n.Ra.get(r.targetId);if(i.length>1)return n.Ra.set(r.targetId,i.filter(s=>!nh(s,e))),void n.Aa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Tm(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),XI(n.remoteStore,r.targetId),Im(n,r.targetId)}).catch(bl)):(Im(n,r.targetId),await Tm(n.localStore,r.targetId,!0))}async function G3(t,e,n){const r=t$(t);try{const i=await function(o,a){const l=de(o),u=Je.now(),d=a.reduce((m,_)=>m.add(_.key),pe());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=xr(),w=pe();return l.ts.getEntries(m,d).next(x=>{_=x,_.forEach((y,g)=>{g.isValidDocument()||(w=w.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,_)).next(x=>{f=x;const y=[];for(const g of a){const v=wM(g,f.get(g.key).overlayedDocument);v!=null&&y.push(new hs(g.key,v,mI(v.value.mapValue),Kn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,y,a)}).next(x=>{p=x;const y=x.applyToLocalDocumentSet(f,w);return l.documentOverlayCache.saveOverlays(m,x.batchId,y)})}).then(()=>({batchId:p.batchId,changes:AI(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.pa[o.currentUser.toKey()];u||(u=new Ue(xe)),u=u.insert(a,l),o.pa[o.currentUser.toKey()]=u}(r,i.batchId,n),await $l(r,i.changes),await uh(r.remoteStore)}catch(i){const s=Ky(i,"Failed to persist write");n.reject(s)}}async function lR(t,e){const n=de(t);try{const r=await d3(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.fa.get(s);o&&(je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ea=!0:i.modifiedDocuments.size>0?je(o.Ea):i.removedDocuments.size>0&&(je(o.Ea),o.Ea=!1))}),await $l(n,r,e)}catch(r){await bl(r)}}function x1(t,e,n){const r=de(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Aa.forEach((s,o)=>{const a=o.view.L_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=de(o);l.onlineState=a;let u=!1;l.queries.forEach((d,f)=>{for(const p of f.listeners)p.L_(a)&&(u=!0)}),u&&Qy(l)}(r.eventManager,e),i.length&&r.da.s_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function K3(t,e,n){const r=de(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.fa.get(e),s=i&&i.key;if(s){let o=new Ue(ne.comparator);o=o.insert(s,St.newNoDocument(s,le.min()));const a=pe().add(s),l=new oh(le.min(),new Map,new Ue(xe),o,a);await lR(r,l),r.ma=r.ma.remove(s),r.fa.delete(e),Yy(r)}else await Tm(r.localStore,e,!1).then(()=>Im(r,e,n)).catch(bl)}async function Q3(t,e){const n=de(t),r=e.batch.batchId;try{const i=await c3(n.localStore,e);cR(n,r,null),uR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $l(n,i)}catch(i){await bl(i)}}async function Y3(t,e,n){const r=de(t);try{const i=await function(o,a){const l=de(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(je(f!==null),d=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);cR(r,e,n),uR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await $l(r,i)}catch(i){await bl(i)}}function uR(t,e){(t.ya.get(e)||[]).forEach(n=>{n.resolve()}),t.ya.delete(e)}function cR(t,e,n){const r=de(t);let i=r.pa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.pa[r.currentUser.toKey()]=i}}function Im(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ra.get(e))t.Aa.delete(r),n&&t.da.Da(r,n);t.Ra.delete(e),t.isPrimaryClient&&t.ga.Vr(e).forEach(r=>{t.ga.containsKey(r)||dR(t,r)})}function dR(t,e){t.Va.delete(e.path.canonicalString());const n=t.ma.get(e);n!==null&&(XI(t.remoteStore,n),t.ma=t.ma.remove(e),t.fa.delete(n),Yy(t))}function E1(t,e,n){for(const r of n)r instanceof oR?(t.ga.addReference(r.key,e),X3(t,r)):r instanceof aR?(Y("SyncEngine","Document no longer in limbo: "+r.key),t.ga.removeReference(r.key,e),t.ga.containsKey(r.key)||dR(t,r.key)):se()}function X3(t,e){const n=e.key,r=n.path.canonicalString();t.ma.get(n)||t.Va.has(r)||(Y("SyncEngine","New document in limbo: "+n),t.Va.add(r),Yy(t))}function Yy(t){for(;t.Va.size>0&&t.ma.size<t.maxConcurrentLimboResolutions;){const e=t.Va.values().next().value;t.Va.delete(e);const n=new ne(be.fromString(e)),r=t.wa.next();t.fa.set(r,new B3(n)),t.ma=t.ma.insert(n,r),YI(t.remoteStore,new Ur(wr(Ly(n.path)),r,"TargetPurposeLimboResolution",ky.ae))}}async function $l(t,e,n){const r=de(t),i=[],s=[],o=[];r.Aa.isEmpty()||(r.Aa.forEach((a,l)=>{o.push(r.ba(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const d=zy.Ki(l.targetId,u);s.push(d)}}))}),await Promise.all(o),r.da.s_(i),await async function(l,u){const d=de(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>j.forEach(u,p=>j.forEach(p.qi,m=>d.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>j.forEach(p.Qi,m=>d.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!Ol(f))throw f;Y("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const m=d.Zi.get(p),_=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(_);d.Zi=d.Zi.insert(p,w)}}}(r.localStore,s))}async function J3(t,e){const n=de(t);if(!n.currentUser.isEqual(e)){Y("SyncEngine","User change. New user:",e.toKey());const r=await qI(n.localStore,e);n.currentUser=e,function(s,o){s.ya.forEach(a=>{a.forEach(l=>{l.reject(new G(P.CANCELLED,o))})}),s.ya.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await $l(n,r.rs)}}function Z3(t,e){const n=de(t),r=n.fa.get(e);if(r&&r.Ea)return pe().add(r.key);{let i=pe();const s=n.Ra.get(e);if(!s)return i;for(const o of s){const a=n.Aa.get(o);i=i.unionWith(a.view.oa)}return i}}function e$(t){const e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Z3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=K3.bind(null,e),e.da.s_=$3.bind(null,e.eventManager),e.da.Da=V3.bind(null,e.eventManager),e}function t$(t){const e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Q3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Y3.bind(null,e),e}class S1{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=ah(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return u3(this.persistence,new a3,e.initialUser,this.serializer)}createPersistence(e){return new s3(By.Hr,this.serializer)}createSharedClientState(e){return new g3}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class n${async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>x1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=J3.bind(null,this.syncEngine),await L3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new M3}()}createDatastore(e){const n=ah(e.databaseInfo.databaseId),r=function(s){return new w3(s)}(e.databaseInfo);return function(s,o,a,l){return new S3(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new I3(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>x1(this.syncEngine,n,0),function(){return v1.v()?new v1:new y3}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,d){const f=new z3(i,s,o,a,l,u);return d&&(f.Sa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=de(n);Y("RemoteStore","RemoteStore shutting down."),r.S_.add(5),await Ml(r),r.D_.shutdown(),r.v_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Fa(this.observer.next,e)}error(e){this.observer.error?this.Fa(this.observer.error,e):_r("Uncaught Error in snapshot listener:",e.toString())}Ma(){this.muted=!0}Fa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r${constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=xt.UNAUTHENTICATED,this.clientId=hI.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Y("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Y("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new G(P.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ky(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jf(t,e){t.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await qI(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function T1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await s$(t);Y("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>_1(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>_1(e.remoteStore,s)),t._onlineComponents=e}function i$(t){return t.name==="FirebaseError"?t.code===P.FAILED_PRECONDITION||t.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function s$(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y("FirestoreClient","Using user provided OfflineComponentProvider");try{await jf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!i$(n))throw n;oo("Error using user provided cache. Falling back to memory cache: "+n),await jf(t,new S1)}}else Y("FirestoreClient","Using default OfflineComponentProvider"),await jf(t,new S1);return t._offlineComponents}async function fR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y("FirestoreClient","Using user provided OnlineComponentProvider"),await T1(t,t._uninitializedComponentsProvider._online)):(Y("FirestoreClient","Using default OnlineComponentProvider"),await T1(t,new n$))),t._onlineComponents}function o$(t){return fR(t).then(e=>e.syncEngine)}async function pR(t){const e=await fR(t),n=e.eventManager;return n.onListen=W3.bind(null,e.syncEngine),n.onUnlisten=q3.bind(null,e.syncEngine),n}function a$(t,e,n={}){const r=new dr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new hR({next:p=>{o.enqueueAndForget(()=>iR(s,f));const m=p.docs.has(a);!m&&p.fromCache?u.reject(new G(P.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?u.reject(new G(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new sR(Ly(a.path),d,{includeMetadataChanges:!0,z_:!0});return rR(s,f)}(await pR(t),t.asyncQueue,e,n,r)),r.promise}function l$(t,e,n={}){const r=new dr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new hR({next:p=>{o.enqueueAndForget(()=>iR(s,f)),p.fromCache&&l.source==="server"?u.reject(new G(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new sR(a,d,{includeMetadataChanges:!0,z_:!0});return rR(s,f)}(await pR(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(t,e,n){if(!n)throw new G(P.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function u$(t,e,n,r){if(e===!0&&r===!0)throw new G(P.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function R1(t){if(!ne.isDocumentKey(t))throw new G(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function A1(t){if(ne.isDocumentKey(t))throw new G(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ch(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se()}function ci(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ch(t);throw new G(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}u$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new G(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new G(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new G(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new C1({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new G(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new G(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new C1(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new PD;switch(r.type){case"firstParty":return new jD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=I1.get(n);r&&(Y("ComponentProvider","Removing Datastore"),I1.delete(n),r.terminate())}(this),Promise.resolve()}}function c$(t,e,n,r={}){var i;const s=(t=ci(t,dh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=xt.MOCK_USER;else{a=uS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new G(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new xt(u)}t._authCredentials=new ND(new dI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Po(this.firestore,e,this._query)}}class Kt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}}class ei extends Po{constructor(e,n,r){super(e,n,Ly(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new ne(e))}withConverter(e){return new ei(this.firestore,e,this._path)}}function Dr(t,e,...n){if(t=nt(t),gR("collection","path",e),t instanceof dh){const r=be.fromString(e,...n);return A1(r),new ei(t,null,r)}{if(!(t instanceof Kt||t instanceof ei))throw new G(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return A1(r),new ei(t.firestore,null,r)}}function di(t,e,...n){if(t=nt(t),arguments.length===1&&(e=hI.V()),gR("doc","path",e),t instanceof dh){const r=be.fromString(e,...n);return R1(r),new Kt(t,null,new ne(r))}{if(!(t instanceof Kt||t instanceof ei))throw new G(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return R1(r),new Kt(t.firestore,t instanceof ei?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d${constructor(){this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new KI(this,"async_queue_retry"),this.tu=()=>{const n=Of();n&&Y("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Uo.Lo()};const e=Of();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.tu)}get isShuttingDown(){return this.Ha}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nu(),this.ru(e)}enterRestrictedMode(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;const n=Of();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.tu)}}enqueue(e){if(this.nu(),this.Ha)return new Promise(()=>{});const n=new dr;return this.ru(()=>this.Ha&&this.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ja.push(e),this.iu()))}async iu(){if(this.ja.length!==0){try{await this.ja[0](),this.ja.shift(),this.Uo.reset()}catch(e){if(!Ol(e))throw e;Y("AsyncQueue","Operation failed with retryable error: "+e)}this.ja.length>0&&this.Uo.No(()=>this.iu())}}ru(e){const n=this.za.then(()=>(this.Za=!0,e().catch(r=>{this.Ya=r,this.Za=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw _r("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Za=!1,r))));return this.za=n,n}enqueueAfterDelay(e,n,r){this.nu(),this.eu.indexOf(e)>-1&&(n=0);const i=Gy.createAndSchedule(this,e,n,r,s=>this.su(s));return this.Ja.push(i),i}nu(){this.Ya&&se()}verifyOperationInProgress(){}async ou(){let e;do e=this.za,await e;while(e!==this.za)}_u(e){for(const n of this.Ja)if(n.timerId===e)return!0;return!1}au(e){return this.ou().then(()=>{this.Ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ou()})}uu(e){this.eu.push(e)}su(e){const n=this.Ja.indexOf(e);this.Ja.splice(n,1)}}class Vl extends dh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new d$}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||yR(this),this._firestoreClient.terminate()}}function h$(t,e){const n=typeof t=="object"?t:Hg(),r=typeof t=="string"?t:e||"(default)",i=Od(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=oS("firestore");s&&c$(i,...s)}return i}function Xy(t){return t._firestoreClient||yR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function yR(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,d){return new qD(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,mR(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new r$(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fo(Nt.fromBase64String(e))}catch(n){throw new G(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new fo(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f$=/^__.*__$/;class p${constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new hs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ll(e,this.data,n,this.fieldTransforms)}}function vR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se()}}class t0{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.cu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get lu(){return this.settings.lu}hu(e){return new t0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.hu({path:r,Iu:!1});return i.Tu(e),i}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.hu({path:r,Iu:!1});return i.cu(),i}du(e){return this.hu({path:void 0,Iu:!0})}Au(e){return Gc(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}cu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}Tu(e){if(e.length===0)throw this.Au("Document fields must not be empty");if(vR(this.lu)&&f$.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}class m${constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ah(e)}mu(e,n,r,i=!1){return new t0({lu:e,methodName:n,Vu:r,path:Tt.emptyPath(),Iu:!1,Ru:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _R(t){const e=t._freezeSettings(),n=ah(t._databaseId);return new m$(t._databaseId,!!e.ignoreUndefinedProperties,n)}function g$(t,e,n,r,i,s={}){const o=t.mu(s.merge||s.mergeFields?2:0,e,n,i);ER("Data must be an object, but it was:",o,r);const a=wR(r,o);let l,u;if(s.merge)l=new In(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const p=v$(e,f,n);if(!o.contains(p))throw new G(P.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);w$(d,p)||d.push(p)}l=new In(d),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new p$(new fn(a),l,u)}class n0 extends Zy{_toFieldTransform(e){return new gM(e.path,new nl)}isEqual(e){return e instanceof n0}}function y$(t,e,n,r=!1){return r0(n,t.mu(r?4:3,e))}function r0(t,e){if(xR(t=nt(t)))return ER("Unsupported field value:",e,t),wR(t,e);if(t instanceof Zy)return function(r,i){if(!vR(i.lu))throw i.Au(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Au(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Iu&&e.lu!==4)throw e.Au("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=r0(a,i.du(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Je.fromDate(r);return{timestampValue:Hc(i.serializer,s)}}if(r instanceof Je){const s=new Je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hc(i.serializer,s)}}if(r instanceof e0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fo)return{bytesValue:FI(i.serializer,r._byteString)};if(r instanceof Kt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Au(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Fy(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Au(`Unsupported field value: ${ch(r)}`)}(t,e)}function wR(t,e){const n={};return fI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ao(t,(r,i)=>{const s=r0(i,e.Pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function xR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Je||t instanceof e0||t instanceof fo||t instanceof Kt||t instanceof Zy)}function ER(t,e,n){if(!xR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=ch(n);throw r==="an object"?e.Au(t+" a custom object"):e.Au(t+" "+r)}}function v$(t,e,n){if((e=nt(e))instanceof Jy)return e._internalPath;if(typeof e=="string")return SR(t,e);throw Gc("Field path arguments must be of type string or ",t,!1,void 0,n)}const _$=new RegExp("[~\\*/\\[\\]]");function SR(t,e,n){if(e.search(_$)>=0)throw Gc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jy(...e.split("."))._internalPath}catch{throw Gc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Gc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new G(P.INVALID_ARGUMENT,a+t+l)}function w$(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new x$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(i0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class x$ extends TR{data(){return super.data()}}function i0(t,e){return typeof e=="string"?SR(t,e):e instanceof Jy?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E$(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class s0{}class S$ extends s0{}function Os(t,e,...n){let r=[];e instanceof s0&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof o0).length,a=s.filter(l=>l instanceof hh).length;if(o>1||o>0&&a>0)throw new G(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class hh extends S${constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new hh(e,n,r)}_apply(e){const n=this._parse(e);return IR(e._query,n),new Po(e.firestore,e.converter,ym(e._query,n))}_parse(e){const n=_R(e.firestore);return function(s,o,a,l,u,d,f){let p;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new G(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){P1(f,d);const m=[];for(const _ of f)m.push(k1(l,s,_));p={arrayValue:{values:m}}}else p=k1(l,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||P1(f,d),p=y$(a,o,f,d==="in"||d==="not-in");return Ye.create(u,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function js(t,e,n){const r=e,i=i0("where",t);return hh._create(i,r,n)}class o0 extends s0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new o0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Nn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)IR(o,l),o=ym(o,l)}(e._query,n),new Po(e.firestore,e.converter,ym(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function k1(t,e,n){if(typeof(n=nt(n))=="string"){if(n==="")throw new G(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SI(e)&&n.indexOf("/")!==-1)throw new G(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(be.fromString(n));if(!ne.isDocumentKey(r))throw new G(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Z_(t,new ne(r))}if(n instanceof Kt)return Z_(t,n._key);throw new G(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ch(n)}.`)}function P1(t,e){if(!Array.isArray(t)||t.length===0)throw new G(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IR(t,e){if(e.isInequality()){const r=Dy(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new G(P.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=EI(t);s!==null&&T$(t,i,s)}const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function T$(t,e,n){if(!n.isEqual(e))throw new G(P.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class I${convertValue(e,n="none"){switch(ns(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw se()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ao(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new e0(Ke(e.latitude),Ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ny(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Za(e));default:return null}}convertTimestamp(e){const n=li(e);return new Je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=be.fromString(e);je(HI(r));const i=new el(r.get(1),r.get(3)),s=new ne(r.popFirst(5));return i.isEqual(n)||_r(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R$(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class RR extends TR{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(i0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Qu extends RR{data(e={}){return super.data(e)}}class A${constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Jo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Qu(this._firestore,this._userDataWriter,r.key,r,new Jo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Qu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Jo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Qu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Jo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:C$(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function C$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t){t=ci(t,Kt);const e=ci(t.firestore,Vl);return a$(Xy(e),t._key).then(n=>P$(e,t,n))}class AR extends I${constructor(e){super(),this.firestore=e}convertBytes(e){return new fo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,n)}}function Ls(t){t=ci(t,Po);const e=ci(t.firestore,Vl),n=Xy(e),r=new AR(e);return E$(t._query),l$(n,t._query).then(i=>new A$(e,r,t,i))}function k$(t,e,n){t=ci(t,Kt);const r=ci(t.firestore,Vl),i=R$(t.converter,e,n);return CR(r,[g$(_R(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Kn.none())])}function Rm(t){return CR(ci(t.firestore,Vl),[new My(t._key,Kn.none())])}function CR(t,e){return function(r,i){const s=new dr;return r.asyncQueue.enqueueAndForget(async()=>G3(await o$(r),i,s)),s.promise}(Xy(t),e)}function P$(t,e,n){const r=n.docs.get(e._key),i=new AR(t);return new RR(t,i,e._key,r,new Jo(n.hasPendingWrites,n.fromCache),e.converter)}function N$(){return new n0("serverTimestamp")}(function(e,n=!0){(function(i){Ro=i})(cs),Xi(new oi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Vl(new bD(r.getProvider("auth-internal")),new DD(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new G(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new el(u.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Hn(K_,"4.1.2",e),Hn(K_,"4.1.2","esm2017")})();const b$={apiKey:"AIzaSyBPNpckpYiu009eSzHz_1YMlwHLtScgVjE",authDomain:"zingmp3-clone-61799.firebaseapp.com",projectId:"zingmp3-clone-61799",storageBucket:"zingmp3-clone-61799.appspot.com",messagingSenderId:"938280289868",appId:"1:938280289868:web:1b426fc2dba5d03dde96e9"},a0=hS(b$),zt=h$(a0),po=S4(a0);new Mn;const kR=gj(a0),O$=async({collection:t,id:e})=>{console.log("delete doc"),await Rm(di(zt,t,e))},j$=async({collection:t,id:e})=>(console.log("get doc"),Kc(di(zt,t,e))),Ct=async({collection:t,id:e,data:n})=>(console.log("set doc"),k$(di(zt,t,e),{...n},{merge:!0})),PR=async({file:t,folder:e,email:n})=>{console.log("upload file");const r=t.name.replaceAll(" ","").toLowerCase()+"_"+n.replace("@gmail.com",""),i=NS(kR,`${e+r}`),s=await fj(i,t);return{fileURL:await pj(s.ref),filePath:s.metadata.fullPath}},Am=async({filePath:t})=>{console.log("delete file");const e=NS(kR,t);await mj(e)},fh=async t=>{await Rm(di(zt,"songs",t.id)),await Am({filePath:t.song_file_path}),t.lyric_id&&await Rm(di(zt,"lyrics",t.lyric_id)),t.image_file_path&&await Am({filePath:t.image_file_path})},NR=async(t,e)=>{const n=t.map(r=>r.id);await Ct({collection:"users",data:{playlist_ids:n},id:e.email})},bR=async({songIds:t,userInfo:e})=>{await Ct({collection:"users",data:{song_ids:t,song_count:t.length},id:e.email})};let Qc=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");const L$={toasts:[]},D$={state:L$,setToasts:()=>{},setErrorToast:()=>{},setSuccessToast:()=>{}},OR=h.createContext(D$),M$=({children:t})=>{const[e,n]=h.useState([]),r=({message:s="Somethings went wrong"})=>n(o=>[...o,{title:"error",id:Qc(4),desc:s}]),i=({message:s="Success"})=>n(o=>[...o,{title:"success",id:Qc(4),desc:`${s}`}]);return c.jsx(OR.Provider,{value:{state:{toasts:e},setToasts:n,setErrorToast:r,setSuccessToast:i},children:t})},tr=()=>{const{state:{toasts:t},setToasts:e,setErrorToast:n,setSuccessToast:r}=h.useContext(OR);return{toasts:t,setToasts:e,setErrorToast:n,setSuccessToast:r}},l0={userInfo:{status:"loading",display_name:"",playlist_ids:[],role:"user",song_count:0,song_ids:[],email:"",photoURL:"",latest_seen:new Je(0,0)}},$$=(t,e)=>{switch(e.type){case 0:return console.log("dispatch set user info"),{userInfo:{...t.userInfo,...e.payload.userInfo}};default:return console.log("default case"),{userInfo:t.userInfo}}},V$=()=>{const[t,e]=h.useReducer($$,l0),n=h.useCallback(r=>{e({type:0,payload:{userInfo:r}})},[]);return{userInfo:t.userInfo,setUserInfo:n}},F$={userInfo:l0.userInfo,setUserInfo:()=>{}},jR=h.createContext(F$),U$=({children:t})=>{const{userInfo:e,setUserInfo:n}=V$();return c.jsx(jR.Provider,{value:{userInfo:e,setUserInfo:n},children:t})},bn=()=>{const{userInfo:t,setUserInfo:e}=h.useContext(jR);return{userInfo:t,setUserInfo:e}},B$=/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;function LR({data:t,setIsOpenModal:e,userSongs:n,setUserSongs:r,theme:i}){const{setErrorToast:s,setSuccessToast:o}=tr(),{userInfo:a}=bn(),[l,u]=h.useState(!1),[d,f]=h.useState(t.image_url),[p,m]=h.useState(""),[_,w]=h.useState(),[x,y]=h.useState({name:t.name,singer:t.singer,image_url:""}),g=h.useRef(!1),[v,E]=h.useState(!!t.name),[S,I]=h.useState(!!t.singer),[T,R]=h.useState(!1),C=h.useRef(null),A=h.useMemo(()=>{if(x.name!==t.name||x.singer!==t.singer||x.image_url!==t.image_url||g.current)return!0},[x,p]),k=h.useMemo(()=>{if(p)return p;if(d)return d;if(T)return x.image_url},[x,p,d,t,T]),z=h.useMemo(()=>!!p||!!d,[p,d]),L=h.useMemo(()=>A&&v&&v&&T,[v,S,T,A]),F=(N,D)=>{y({...x,[N]:D})},ie=h.useCallback(()=>{t.image_file_path&&!p?f(""):p&&(m(""),w(void 0)),f(""),g.current=!0;const N=C.current;N&&(N.value="")},[]),K=h.useCallback(N=>{const Q=N.target.files[0];m(URL.createObjectURL(Q)),g.current=!0,w(Q)},[]),ce=()=>{u(!1),e(!1)},b=N=>{N.stopPropagation(),ce(),e(!1)},$=h.useCallback(async()=>{if(!n||!r){s({message:"Lack of props"});return}if(!t.id){s({});return}try{let N=[],D={...t};if(A){if(!x.name||!x.singer){s({});return}const Q=g.current?"":x.image_url&&T?x.image_url:D.image_url;if(u(!0),D={...D,name:x.name,singer:x.singer,image_url:Q},D.name!==x.name||D.singer!==x.singer){s({});return}if(_&&g.current){const{filePath:X,fileURL:M}=await PR({file:_,folder:"/images/",email:a.email});D.image_file_path=X,D.image_url=M}else g.current&&(D.image_file_path="");console.log("check new song",D),N=[...n];const Z=N.findIndex(X=>X.id===D.id);if(Z===-1){s({message:"No index found"});return}N[Z]=D}g.current&&t.image_file_path&&Am({filePath:t.image_file_path}),r(N),await Ct({collection:"songs",data:D,id:D.id}),o({message:`${D.name} edited`})}catch(N){s({}),console.log(N)}finally{ce()}},[x,_,n,t]);h.useEffect(()=>{x.name?E(!0):E(!1)},[x.name]),h.useEffect(()=>{x.singer?I(!0):I(!1)},[x.singer]),h.useEffect(()=>{if(!x.image_url){R(!0);return}const N=B$.test(x.image_url);R(N)},[x.image_url]);const U={textColor:i.type==="light"?"text-[#333]":"text-[#fff]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${i.alpha} text-[14px] font-[500]`};return c.jsxs("div",{className:"w-[50vw] h-[auto]",children:[c.jsx("input",{ref:C,id:"editImageInput",type:"file",onChange:K,className:"hidden"}),c.jsx("h1",{className:"text-[20px] font-semibold",children:"Edit"}),c.jsxs("div",{className:"flex mt-[10px]",children:[c.jsxs("div",{children:[c.jsx("div",{className:"w-[130px] h-[130px] flex-shrink-0 rounded-[5px]",children:c.jsx(wi,{onError:()=>R(!1),src:k})}),c.jsxs("div",{className:"flex items-center gap-[12px] mt-[10px]",children:[c.jsx("label",{htmlFor:"editImageInput",className:`inline-block cursor-pointer hover:brightness-90 px-[20px] py-[5px] bg-${i.alpha} rounded-full text-[14px]`,children:c.jsx(GP,{className:"w-[15px]"})}),z&&c.jsx(ee,{onClick:()=>ie(),className:`inline-block hover:brightness-90 px-[20px] py-[5px] ${i.content_bg} rounded-full text-[14px]`,children:c.jsx(Dn,{className:"w-[15px]"})})]}),c.jsx("p",{className:`text-[12px] ${U.textColor} mt-[10px]`,children:"* Image from URL will not be apply until you remove current image"})]}),c.jsxs("div",{className:"ml-[20px] w-full flex flex-col gap-[10px]",children:[c.jsxs("div",{className:"flex flex-col gap-[5px]",children:[c.jsxs("p",{className:"text-[14px] inline-flex",children:["Name:",v?c.jsx(ca,{className:"w-[20px] text-emerald-500 ml-[10px]"}):c.jsx(Dn,{className:"w-[20px] text-red-500 ml-[10px]"})]}),c.jsx("input",{className:`${U.input} ${U.textColor}`,value:x.name,type:"text",onChange:N=>F("name",N.target.value),placeholder:t.name})]}),c.jsxs("div",{className:"flex flex-col gap-[5px]",children:[c.jsxs("p",{className:"inline-flex text-[14px]",children:["Singer:",S?c.jsx(ca,{className:"w-[20px] text-emerald-500 ml-[10px]"}):c.jsx(Dn,{className:"w-[20px] text-red-500 ml-[10px]"})]}),c.jsx("input",{className:U.input,value:x.singer,onChange:N=>F("singer",N.target.value),type:"text",placeholder:t.singer})]}),c.jsxs("div",{className:"flex flex-col gap-[5px]",children:[c.jsxs("p",{className:"inline-flex text-[14px]",children:["Image URL:",x.image_url&&c.jsx(c.Fragment,{children:T?c.jsx(ca,{className:"w-[20px] text-emerald-500 ml-[10px]"}):c.jsx(Dn,{className:"w-[20px] text-red-500 ml-[10px]"})})]}),c.jsx("input",{className:U.input,value:x.image_url,onChange:N=>F("image_url",N.target.value),type:"text"})]}),c.jsxs("div",{className:"flex gap-[10px] mt-[10px]",children:[c.jsx(ee,{onClick:b,className:`bg-${i.alpha} rounded-full text-[14px]`,variant:"primary",children:c.jsx(Dn,{className:"w-[20px]"})}),c.jsx(ee,{isLoading:l,onClick:()=>$(),className:`${i.content_bg} rounded-full text-[14px] ${!L&&"pointer-events-none opacity-60"}`,variant:"primary",children:"Save"})]})]})]})]})}function z$({toast:t,theme:e,onClick:n}){const r={icon:"w-[30px] max-[549px]:w-[25px]",container:`text-white px-[20px] py-[10px] rounded-[4px] flex items-center  ${e.bottom_player_bg} border border-${e.alpha}`,text:`font-[500] text-[16px] max-[549px]:text-[14px] ${e.type==="light"?"text-[#333]":""}`};return c.jsxs("div",{onClick:()=>n(t.id),className:`${r.container} animate-[fadeIn_0.3s_linear]`,children:[c.jsxs("span",{className:"mr-[10px]",children:[t.title==="success"&&c.jsx(nN,{className:`${r.icon} text-emerald-500 `}),t.title==="error"&&c.jsx(wb,{className:`${r.icon} text-red-500`}),t.title==="warning"&&c.jsx(QE,{className:`${r.icon} text-yellow-500`})]}),c.jsx("p",{className:r.text,children:t.desc})]})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function DR(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(f){o(f)}}function l(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}function MR(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(d){return l([u,d])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ds=function(){return Ds=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ds.apply(this,arguments)},$R=function(t){return{loading:t==null,value:t}},W$=function(){return function(t,e){switch(e.type){case"error":return Ds(Ds({},t),{error:e.error,loading:!1,value:void 0});case"reset":return $R(e.defaultValue);case"value":return Ds(Ds({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},H$=function(t){var e=t?t():void 0,n=h.useReducer(W$(),$R(e)),r=n[0],i=n[1],s=h.useCallback(function(){var l=t?t():void 0;i({type:"reset",defaultValue:l})},[t]),o=h.useCallback(function(l){i({type:"error",error:l})},[]),a=h.useCallback(function(l){i({type:"value",value:l})},[]);return h.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}},[r.error,r.loading,s,o,a,r.value])},u0=function(t,e){var n=H$(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,a=n.value;return h.useEffect(function(){var l=cL(t,function(u){return DR(void 0,void 0,void 0,function(){var d;return MR(this,function(f){switch(f.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,e.onUserChanged(u)];case 2:return f.sent(),[3,4];case 3:return d=f.sent(),s(d),[3,4];case 4:return o(u),[2]}})})},s);return function(){l()}},[t]),[a,i,r]},VR=function(t){var e=h.useCallback(function(n,r){var i=new Mn;return n&&n.forEach(function(s){return i.addScope(s)}),r&&i.setCustomParameters(r),i},[]);return q$(t,e)},q$=function(t,e){var n=h.useState(),r=n[0],i=n[1],s=h.useState(),o=s[0],a=s[1],l=h.useState(!1),u=l[0],d=l[1],f=h.useCallback(function(p,m){return DR(void 0,void 0,void 0,function(){var _,w,x;return MR(this,function(y){switch(y.label){case 0:d(!0),i(void 0),y.label=1;case 1:return y.trys.push([1,3,4,5]),_=e(p,m),[4,bL(t,_)];case 2:return w=y.sent(),a(w),[2,w];case 3:return x=y.sent(),i(x),[3,5];case 4:return d(!1),[7];case 5:return[2]}})})},[t,e]);return[f,o,u,r]};function c0({children:t}){const[e,n]=u0(po),{initial:r}=vn(),{setUserInfo:i,userInfo:s}=bn();return h.useEffect(()=>{const o=async()=>{try{await Ct({collection:"users",data:{email:e==null?void 0:e.email,latest_seen:N$(),photoURL:e==null?void 0:e.photoURL},id:e==null?void 0:e.email}),i({status:"finish",email:e==null?void 0:e.email,display_name:e==null?void 0:e.displayName,photoURL:e==null?void 0:e.photoURL})}catch(a){console.log(a)}};if(!n){if(!e){console.log("auth no user"),s.status!=="finish"&&i({status:"finish"});return}o()}},[e,n]),t}const FR="/React-Zingmp3/assets/icon-zing-b16ab47b.svg";var UR={exports:{}},BR={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mo=h;function G$(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var K$=typeof Object.is=="function"?Object.is:G$,Q$=mo.useState,Y$=mo.useEffect,X$=mo.useLayoutEffect,J$=mo.useDebugValue;function Z$(t,e){var n=e(),r=Q$({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return X$(function(){i.value=n,i.getSnapshot=e,Lf(i)&&s({inst:i})},[t,n,e]),Y$(function(){return Lf(i)&&s({inst:i}),t(function(){Lf(i)&&s({inst:i})})},[t]),J$(n),n}function Lf(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!K$(t,n)}catch{return!0}}function eV(t,e){return e()}var tV=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?eV:Z$;BR.useSyncExternalStore=mo.useSyncExternalStore!==void 0?mo.useSyncExternalStore:tV;UR.exports=BR;var nV=UR.exports,zR={exports:{}},WR={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ph=h,rV=nV;function iV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sV=typeof Object.is=="function"?Object.is:iV,oV=rV.useSyncExternalStore,aV=ph.useRef,lV=ph.useEffect,uV=ph.useMemo,cV=ph.useDebugValue;WR.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=aV(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=uV(function(){function l(m){if(!u){if(u=!0,d=m,m=r(m),i!==void 0&&o.hasValue){var _=o.value;if(i(_,m))return f=_}return f=m}if(_=f,sV(d,m))return _;var w=r(m);return i!==void 0&&i(_,w)?_:(d=m,f=w)}var u=!1,d,f,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,i]);var a=oV(t,s[0],s[1]);return lV(function(){o.hasValue=!0,o.value=a},[a]),cV(a),a};zR.exports=WR;var dV=zR.exports;function hV(t){t()}let HR=hV;const fV=t=>HR=t,pV=()=>HR,N1=Symbol.for("react-redux-context"),b1=typeof globalThis<"u"?globalThis:{};function mV(){var t;if(!h.createContext)return{};const e=(t=b1[N1])!=null?t:b1[N1]=new Map;let n=e.get(h.createContext);return n||(n=h.createContext(null),e.set(h.createContext,n)),n}const hi=mV();function d0(t=hi){return function(){return h.useContext(t)}}const qR=d0(),gV=()=>{throw new Error("uSES not initialized!")};let GR=gV;const yV=t=>{GR=t},vV=(t,e)=>t===e;function _V(t=hi){const e=t===hi?qR:d0(t);return function(r,i={}){const{equalityFn:s=vV,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:l,subscription:u,getServerState:d,stabilityCheck:f,noopCheck:p}=e();h.useRef(!0);const m=h.useCallback({[r.name](w){return r(w)}}[r.name],[r,f,o]),_=GR(u.addNestedSub,l.getState,d||l.getState,m,s);return h.useDebugValue(_),_}}const bt=_V();var KR={exports:{}},Te={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lt=typeof Symbol=="function"&&Symbol.for,h0=lt?Symbol.for("react.element"):60103,f0=lt?Symbol.for("react.portal"):60106,mh=lt?Symbol.for("react.fragment"):60107,gh=lt?Symbol.for("react.strict_mode"):60108,yh=lt?Symbol.for("react.profiler"):60114,vh=lt?Symbol.for("react.provider"):60109,_h=lt?Symbol.for("react.context"):60110,p0=lt?Symbol.for("react.async_mode"):60111,wh=lt?Symbol.for("react.concurrent_mode"):60111,xh=lt?Symbol.for("react.forward_ref"):60112,Eh=lt?Symbol.for("react.suspense"):60113,wV=lt?Symbol.for("react.suspense_list"):60120,Sh=lt?Symbol.for("react.memo"):60115,Th=lt?Symbol.for("react.lazy"):60116,xV=lt?Symbol.for("react.block"):60121,EV=lt?Symbol.for("react.fundamental"):60117,SV=lt?Symbol.for("react.responder"):60118,TV=lt?Symbol.for("react.scope"):60119;function ln(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case h0:switch(t=t.type,t){case p0:case wh:case mh:case yh:case gh:case Eh:return t;default:switch(t=t&&t.$$typeof,t){case _h:case xh:case Th:case Sh:case vh:return t;default:return e}}case f0:return e}}}function QR(t){return ln(t)===wh}Te.AsyncMode=p0;Te.ConcurrentMode=wh;Te.ContextConsumer=_h;Te.ContextProvider=vh;Te.Element=h0;Te.ForwardRef=xh;Te.Fragment=mh;Te.Lazy=Th;Te.Memo=Sh;Te.Portal=f0;Te.Profiler=yh;Te.StrictMode=gh;Te.Suspense=Eh;Te.isAsyncMode=function(t){return QR(t)||ln(t)===p0};Te.isConcurrentMode=QR;Te.isContextConsumer=function(t){return ln(t)===_h};Te.isContextProvider=function(t){return ln(t)===vh};Te.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===h0};Te.isForwardRef=function(t){return ln(t)===xh};Te.isFragment=function(t){return ln(t)===mh};Te.isLazy=function(t){return ln(t)===Th};Te.isMemo=function(t){return ln(t)===Sh};Te.isPortal=function(t){return ln(t)===f0};Te.isProfiler=function(t){return ln(t)===yh};Te.isStrictMode=function(t){return ln(t)===gh};Te.isSuspense=function(t){return ln(t)===Eh};Te.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===mh||t===wh||t===yh||t===gh||t===Eh||t===wV||typeof t=="object"&&t!==null&&(t.$$typeof===Th||t.$$typeof===Sh||t.$$typeof===vh||t.$$typeof===_h||t.$$typeof===xh||t.$$typeof===EV||t.$$typeof===SV||t.$$typeof===TV||t.$$typeof===xV)};Te.typeOf=ln;KR.exports=Te;var IV=KR.exports,YR=IV,RV={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},AV={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},XR={};XR[YR.ForwardRef]=RV;XR[YR.Memo]=AV;var Re={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0=Symbol.for("react.element"),g0=Symbol.for("react.portal"),Ih=Symbol.for("react.fragment"),Rh=Symbol.for("react.strict_mode"),Ah=Symbol.for("react.profiler"),Ch=Symbol.for("react.provider"),kh=Symbol.for("react.context"),CV=Symbol.for("react.server_context"),Ph=Symbol.for("react.forward_ref"),Nh=Symbol.for("react.suspense"),bh=Symbol.for("react.suspense_list"),Oh=Symbol.for("react.memo"),jh=Symbol.for("react.lazy"),kV=Symbol.for("react.offscreen"),JR;JR=Symbol.for("react.module.reference");function _n(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case m0:switch(t=t.type,t){case Ih:case Ah:case Rh:case Nh:case bh:return t;default:switch(t=t&&t.$$typeof,t){case CV:case kh:case Ph:case jh:case Oh:case Ch:return t;default:return e}}case g0:return e}}}Re.ContextConsumer=kh;Re.ContextProvider=Ch;Re.Element=m0;Re.ForwardRef=Ph;Re.Fragment=Ih;Re.Lazy=jh;Re.Memo=Oh;Re.Portal=g0;Re.Profiler=Ah;Re.StrictMode=Rh;Re.Suspense=Nh;Re.SuspenseList=bh;Re.isAsyncMode=function(){return!1};Re.isConcurrentMode=function(){return!1};Re.isContextConsumer=function(t){return _n(t)===kh};Re.isContextProvider=function(t){return _n(t)===Ch};Re.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===m0};Re.isForwardRef=function(t){return _n(t)===Ph};Re.isFragment=function(t){return _n(t)===Ih};Re.isLazy=function(t){return _n(t)===jh};Re.isMemo=function(t){return _n(t)===Oh};Re.isPortal=function(t){return _n(t)===g0};Re.isProfiler=function(t){return _n(t)===Ah};Re.isStrictMode=function(t){return _n(t)===Rh};Re.isSuspense=function(t){return _n(t)===Nh};Re.isSuspenseList=function(t){return _n(t)===bh};Re.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Ih||t===Ah||t===Rh||t===Nh||t===bh||t===kV||typeof t=="object"&&t!==null&&(t.$$typeof===jh||t.$$typeof===Oh||t.$$typeof===Ch||t.$$typeof===kh||t.$$typeof===Ph||t.$$typeof===JR||t.getModuleId!==void 0)};Re.typeOf=_n;function PV(){const t=pV();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=e;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:e=s,function(){!i||e===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}const O1={notify(){},get:()=>[]};function NV(t,e){let n,r=O1;function i(f){return l(),r.subscribe(f)}function s(){r.notify()}function o(){d.onStateChange&&d.onStateChange()}function a(){return!!n}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=PV())}function u(){n&&(n(),n=void 0,r.clear(),r=O1)}const d={addNestedSub:i,notifyNestedSubs:s,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:u,getListeners:()=>r};return d}const bV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OV=bV?h.useLayoutEffect:h.useEffect;function jV({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",noopCheck:s="once"}){const o=h.useMemo(()=>{const u=NV(t);return{store:t,subscription:u,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:s}},[t,r,i,s]),a=h.useMemo(()=>t.getState(),[t]);OV(()=>{const{subscription:u}=o;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),a!==t.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[o,a]);const l=e||hi;return h.createElement(l.Provider,{value:o},n)}function ZR(t=hi){const e=t===hi?qR:d0(t);return function(){const{store:r}=e();return r}}const LV=ZR();function DV(t=hi){const e=t===hi?LV:ZR(t);return function(){return e().dispatch}}const nr=DV();yV(dV.useSyncExternalStoreWithSelector);fV(ml.unstable_batchedUpdates);function Tn(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function fi(t){return!!t&&!!t[Le]}function Er(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===HV}(t)||Array.isArray(t)||!!t[F1]||!!(!((e=t.constructor)===null||e===void 0)&&e[F1])||y0(t)||v0(t))}function rs(t,e,n){n===void 0&&(n=!1),No(t)===0?(n?Object.keys:Qs)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,i){return e(i,r,t)})}function No(t){var e=t[Le];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:y0(t)?2:v0(t)?3:0}function Ks(t,e){return No(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function MV(t,e){return No(t)===2?t.get(e):t[e]}function eA(t,e,n){var r=No(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function tA(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function y0(t){return zV&&t instanceof Map}function v0(t){return WV&&t instanceof Set}function ki(t){return t.o||t.t}function _0(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=rA(t);delete e[Le];for(var n=Qs(e),r=0;r<n.length;r++){var i=n[r],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function w0(t,e){return e===void 0&&(e=!1),x0(t)||fi(t)||!Er(t)||(No(t)>1&&(t.set=t.add=t.clear=t.delete=$V),Object.freeze(t),e&&rs(t,function(n,r){return w0(r,!0)},!0)),t}function $V(){Tn(2)}function x0(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function Yn(t){var e=Nm[t];return e||Tn(18,t),e}function VV(t,e){Nm[t]||(Nm[t]=e)}function Cm(){return sl}function Df(t,e){e&&(Yn("Patches"),t.u=[],t.s=[],t.v=e)}function Yc(t){km(t),t.p.forEach(FV),t.p=null}function km(t){t===sl&&(sl=t.l)}function j1(t){return sl={p:[],l:sl,h:t,m:!0,_:0}}function FV(t){var e=t[Le];e.i===0||e.i===1?e.j():e.g=!0}function Mf(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||Yn("ES5").S(e,t,r),r?(n[Le].P&&(Yc(e),Tn(4)),Er(t)&&(t=Xc(e,t),e.l||Jc(e,t)),e.u&&Yn("Patches").M(n[Le].t,t,e.u,e.s)):t=Xc(e,n,[]),Yc(e),e.u&&e.v(e.u,e.s),t!==nA?t:void 0}function Xc(t,e,n){if(x0(e))return e;var r=e[Le];if(!r)return rs(e,function(a,l){return L1(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return Jc(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=_0(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),rs(s,function(a,l){return L1(t,r,i,a,l,n,o)}),Jc(t,i,!1),n&&t.u&&Yn("Patches").N(r,n,t.u,t.s)}return r.o}function L1(t,e,n,r,i,s,o){if(fi(i)){var a=Xc(t,i,s&&e&&e.i!==3&&!Ks(e.R,r)?s.concat(r):void 0);if(eA(n,r,a),!fi(a))return;t.m=!1}else o&&n.add(i);if(Er(i)&&!x0(i)){if(!t.h.D&&t._<1)return;Xc(t,i),e&&e.A.l||Jc(t,i)}}function Jc(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&w0(e,n)}function $f(t,e){var n=t[Le];return(n?ki(n):t)[e]}function D1(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Mr(t){t.P||(t.P=!0,t.l&&Mr(t.l))}function Vf(t){t.o||(t.o=_0(t.t))}function Pm(t,e,n){var r=y0(e)?Yn("MapSet").F(e,n):v0(e)?Yn("MapSet").T(e,n):t.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Cm(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,u=ol;o&&(l=[a],u=Zo);var d=Proxy.revocable(l,u),f=d.revoke,p=d.proxy;return a.k=p,a.j=f,p}(e,n):Yn("ES5").J(e,n);return(n?n.A:Cm()).p.push(r),r}function UV(t){return fi(t)||Tn(22,t),function e(n){if(!Er(n))return n;var r,i=n[Le],s=No(n);if(i){if(!i.P&&(i.i<4||!Yn("ES5").K(i)))return i.t;i.I=!0,r=M1(n,s),i.I=!1}else r=M1(n,s);return rs(r,function(o,a){i&&MV(i.t,o)===a||eA(r,o,e(a))}),s===3?new Set(r):r}(t)}function M1(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return _0(t)}function BV(){function t(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var l=this[Le];return ol.get(l,s)},set:function(l){var u=this[Le];ol.set(u,s,l)}},a}function e(s){for(var o=s.length-1;o>=0;o--){var a=s[o][Le];if(!a.P)switch(a.i){case 5:r(a)&&Mr(a);break;case 4:n(a)&&Mr(a)}}}function n(s){for(var o=s.t,a=s.k,l=Qs(a),u=l.length-1;u>=0;u--){var d=l[u];if(d!==Le){var f=o[d];if(f===void 0&&!Ks(o,d))return!0;var p=a[d],m=p&&p[Le];if(m?m.t!==f:!tA(p,f))return!0}}var _=!!o[Le];return l.length!==Qs(o).length+(_?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var i={};VV("ES5",{J:function(s,o){var a=Array.isArray(s),l=function(d,f){if(d){for(var p=Array(f.length),m=0;m<f.length;m++)Object.defineProperty(p,""+m,t(m,!0));return p}var _=rA(f);delete _[Le];for(var w=Qs(_),x=0;x<w.length;x++){var y=w[x];_[y]=t(y,d||!!_[y].enumerable)}return Object.create(Object.getPrototypeOf(f),_)}(a,s),u={i:a?5:4,A:o?o.A:Cm(),P:!1,I:!1,R:{},l:o,t:s,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,Le,{value:u,writable:!0}),l},S:function(s,o,a){a?fi(o)&&o[Le].A===s&&e(s.p):(s.u&&function l(u){if(u&&typeof u=="object"){var d=u[Le];if(d){var f=d.t,p=d.k,m=d.R,_=d.i;if(_===4)rs(p,function(v){v!==Le&&(f[v]!==void 0||Ks(f,v)?m[v]||l(p[v]):(m[v]=!0,Mr(d)))}),rs(f,function(v){p[v]!==void 0||Ks(p,v)||(m[v]=!1,Mr(d))});else if(_===5){if(r(d)&&(Mr(d),m.length=!0),p.length<f.length)for(var w=p.length;w<f.length;w++)m[w]=!1;else for(var x=f.length;x<p.length;x++)m[x]=!0;for(var y=Math.min(p.length,f.length),g=0;g<y;g++)p.hasOwnProperty(g)||(m[g]=!0),m[g]===void 0&&l(p[g])}}}}(s.p[0]),e(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var $1,sl,E0=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",zV=typeof Map<"u",WV=typeof Set<"u",V1=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",nA=E0?Symbol.for("immer-nothing"):(($1={})["immer-nothing"]=!0,$1),F1=E0?Symbol.for("immer-draftable"):"__$immer_draftable",Le=E0?Symbol.for("immer-state"):"__$immer_state",HV=""+Object.prototype.constructor,Qs=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,rA=Object.getOwnPropertyDescriptors||function(t){var e={};return Qs(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},Nm={},ol={get:function(t,e){if(e===Le)return t;var n=ki(t);if(!Ks(n,e))return function(i,s,o){var a,l=D1(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(t,n,e);var r=n[e];return t.I||!Er(r)?r:r===$f(t.t,e)?(Vf(t),t.o[e]=Pm(t.A.h,r,t)):r},has:function(t,e){return e in ki(t)},ownKeys:function(t){return Reflect.ownKeys(ki(t))},set:function(t,e,n){var r=D1(ki(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=$f(ki(t),e),s=i==null?void 0:i[Le];if(s&&s.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(tA(n,i)&&(n!==void 0||Ks(t.t,e)))return!0;Vf(t),Mr(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return $f(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,Vf(t),Mr(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=ki(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){Tn(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Tn(12)}},Zo={};rs(ol,function(t,e){Zo[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Zo.deleteProperty=function(t,e){return Zo.set.call(this,t,e,void 0)},Zo.set=function(t,e,n){return ol.set.call(this,t[0],e,n,t[0])};var qV=function(){function t(n){var r=this;this.O=V1,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=r;return function(w){var x=this;w===void 0&&(w=a);for(var y=arguments.length,g=Array(y>1?y-1:0),v=1;v<y;v++)g[v-1]=arguments[v];return l.produce(w,function(E){var S;return(S=s).call.apply(S,[x,E].concat(g))})}}var u;if(typeof s!="function"&&Tn(6),o!==void 0&&typeof o!="function"&&Tn(7),Er(i)){var d=j1(r),f=Pm(r,i,void 0),p=!0;try{u=s(f),p=!1}finally{p?Yc(d):km(d)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(w){return Df(d,o),Mf(w,d)},function(w){throw Yc(d),w}):(Df(d,o),Mf(u,d))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===nA&&(u=void 0),r.D&&w0(u,!0),o){var m=[],_=[];Yn("Patches").M(i,u,m,_),o(m,_)}return u}Tn(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var d=arguments.length,f=Array(d>1?d-1:0),p=1;p<d;p++)f[p-1]=arguments[p];return r.produceWithPatches(u,function(m){return i.apply(void 0,[m].concat(f))})};var o,a,l=r.produce(i,s,function(u,d){o=u,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){Er(n)||Tn(8),fi(n)&&(n=UV(n));var r=j1(this),i=Pm(this,n,void 0);return i[Le].C=!0,km(r),i},e.finishDraft=function(n,r){var i=n&&n[Le],s=i.A;return Df(s,r),Mf(void 0,s)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!V1&&Tn(20),this.O=n},e.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Yn("Patches").$;return fi(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),rn=new qV,iA=rn.produce;rn.produceWithPatches.bind(rn);rn.setAutoFreeze.bind(rn);rn.setUseProxies.bind(rn);rn.applyPatches.bind(rn);rn.createDraft.bind(rn);rn.finishDraft.bind(rn);function al(t){"@babel/helpers - typeof";return al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},al(t)}function GV(t,e){if(al(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(al(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KV(t){var e=GV(t,"string");return al(e)==="symbol"?e:String(e)}function QV(t,e,n){return e=KV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function B1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U1(Object(n),!0).forEach(function(r){QV(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var z1=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Ff=function(){return Math.random().toString(36).substring(7).split("").join(".")},Zc={INIT:"@@redux/INIT"+Ff(),REPLACE:"@@redux/REPLACE"+Ff(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Ff()}};function YV(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function sA(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(wt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(wt(1));return n(sA)(t,e)}if(typeof t!="function")throw new Error(wt(2));var i=t,s=e,o=[],a=o,l=!1;function u(){a===o&&(a=o.slice())}function d(){if(l)throw new Error(wt(3));return s}function f(w){if(typeof w!="function")throw new Error(wt(4));if(l)throw new Error(wt(5));var x=!0;return u(),a.push(w),function(){if(x){if(l)throw new Error(wt(6));x=!1,u();var g=a.indexOf(w);a.splice(g,1),o=null}}}function p(w){if(!YV(w))throw new Error(wt(7));if(typeof w.type>"u")throw new Error(wt(8));if(l)throw new Error(wt(9));try{l=!0,s=i(s,w)}finally{l=!1}for(var x=o=a,y=0;y<x.length;y++){var g=x[y];g()}return w}function m(w){if(typeof w!="function")throw new Error(wt(10));i=w,p({type:Zc.REPLACE})}function _(){var w,x=f;return w={subscribe:function(g){if(typeof g!="object"||g===null)throw new Error(wt(11));function v(){g.next&&g.next(d())}v();var E=x(v);return{unsubscribe:E}}},w[z1]=function(){return this},w}return p({type:Zc.INIT}),r={dispatch:p,subscribe:f,getState:d,replaceReducer:m},r[z1]=_,r}function XV(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:Zc.INIT});if(typeof r>"u")throw new Error(wt(12));if(typeof n(void 0,{type:Zc.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(wt(13))})}function JV(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];typeof t[i]=="function"&&(n[i]=t[i])}var s=Object.keys(n),o;try{XV(n)}catch(a){o=a}return function(l,u){if(l===void 0&&(l={}),o)throw o;for(var d=!1,f={},p=0;p<s.length;p++){var m=s[p],_=n[m],w=l[m],x=_(w,u);if(typeof x>"u")throw u&&u.type,new Error(wt(14));f[m]=x,d=d||x!==w}return d=d||s.length!==Object.keys(l).length,d?f:l}}function ed(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function ZV(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(wt(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return s=ed.apply(void 0,a)(i.dispatch),B1(B1({},i),{},{dispatch:s})}}}function oA(t){var e=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,t):o(a)}}};return e}var aA=oA();aA.withExtraArgument=oA;const W1=aA;var lA=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),e9=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(d){return l([u,d])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},go=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},t9=Object.defineProperty,n9=Object.defineProperties,r9=Object.getOwnPropertyDescriptors,H1=Object.getOwnPropertySymbols,i9=Object.prototype.hasOwnProperty,s9=Object.prototype.propertyIsEnumerable,q1=function(t,e,n){return e in t?t9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},ti=function(t,e){for(var n in e||(e={}))i9.call(e,n)&&q1(t,n,e[n]);if(H1)for(var r=0,i=H1(e);r<i.length;r++){var n=i[r];s9.call(e,n)&&q1(t,n,e[n])}return t},Uf=function(t,e){return n9(t,r9(e))},o9=function(t,e,n){return new Promise(function(r,i){var s=function(l){try{a(n.next(l))}catch(u){i(u)}},o=function(l){try{a(n.throw(l))}catch(u){i(u)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(s,o)};a((n=n.apply(t,e)).next())})},a9=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ed:ed.apply(null,arguments)};function l9(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var u9=function(t){lA(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,go([void 0],n[0].concat(this)))):new(e.bind.apply(e,go([void 0],n.concat(this))))},e}(Array),c9=function(t){lA(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,go([void 0],n[0].concat(this)))):new(e.bind.apply(e,go([void 0],n.concat(this))))},e}(Array);function bm(t){return Er(t)?iA(t,function(){}):t}function d9(t){return typeof t=="boolean"}function h9(){return function(e){return f9(e)}}function f9(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new u9;return n&&(d9(n)?r.push(W1):r.push(W1.withExtraArgument(n.extraArgument))),r}var p9=!0;function m9(t){var e=h9(),n=t||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?e():s,a=n.devTools,l=a===void 0?!0:a,u=n.preloadedState,d=u===void 0?void 0:u,f=n.enhancers,p=f===void 0?void 0:f,m;if(typeof i=="function")m=i;else if(l9(i))m=JV(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var _=o;typeof _=="function"&&(_=_(e));var w=ZV.apply(void 0,_),x=ed;l&&(x=a9(ti({trace:!p9},typeof l=="object"&&l)));var y=new c9(w),g=y;Array.isArray(p)?g=go([w],p):typeof p=="function"&&(g=p(y));var v=x.apply(void 0,g);return sA(m,d,v)}function ni(t,e){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e){var s=e.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return ti(ti({type:t,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function uA(t){var e={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return t(i),[e,n,r]}function g9(t){return typeof t=="function"}function y9(t,e,n,r){n===void 0&&(n=[]);var i=typeof e=="function"?uA(e):[e,n,r],s=i[0],o=i[1],a=i[2],l;if(g9(t))l=function(){return bm(t())};else{var u=bm(t);l=function(){return u}}function d(f,p){f===void 0&&(f=l());var m=go([s[p.type]],o.filter(function(_){var w=_.matcher;return w(p)}).map(function(_){var w=_.reducer;return w}));return m.filter(function(_){return!!_}).length===0&&(m=[a]),m.reduce(function(_,w){if(w)if(fi(_)){var x=_,y=w(x,p);return y===void 0?_:y}else{if(Er(_))return iA(_,function(g){return w(g,p)});var y=w(_,p);if(y===void 0){if(_===null)return _;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return _},f)}return d.getInitialState=l,d}function v9(t,e){return t+"/"+e}function _9(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:bm(t.initialState),r=t.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(d){var f=r[d],p=v9(e,d),m,_;"reducer"in f?(m=f.reducer,_=f.prepare):m=f,s[d]=m,o[p]=m,a[d]=_?ni(p,_):ni(p)});function l(){var d=typeof t.extraReducers=="function"?uA(t.extraReducers):[t.extraReducers],f=d[0],p=f===void 0?{}:f,m=d[1],_=m===void 0?[]:m,w=d[2],x=w===void 0?void 0:w,y=ti(ti({},p),o);return y9(n,function(g){for(var v in y)g.addCase(v,y[v]);for(var E=0,S=_;E<S.length;E++){var I=S[E];g.addMatcher(I.matcher,I.reducer)}x&&g.addDefaultCase(x)})}var u;return{name:e,reducer:function(d,f){return u||(u=l()),u(d,f)},actions:a,caseReducers:s,getInitialState:function(){return u||(u=l()),u.getInitialState()}}}var w9="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",x9=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=w9[Math.random()*64|0];return e},E9=["name","message","stack","code"],Bf=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),G1=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),S9=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=E9;n<r.length;n++){var i=r[n];typeof t[i]=="string"&&(e[i]=t[i])}return e}return{message:String(t)}};(function(){function t(e,n,r){var i=ni(e+"/fulfilled",function(u,d,f,p){return{payload:u,meta:Uf(ti({},p||{}),{arg:f,requestId:d,requestStatus:"fulfilled"})}}),s=ni(e+"/pending",function(u,d,f){return{payload:void 0,meta:Uf(ti({},f||{}),{arg:d,requestId:u,requestStatus:"pending"})}}),o=ni(e+"/rejected",function(u,d,f,p,m){return{payload:p,error:(r&&r.serializeError||S9)(u||"Rejected"),meta:Uf(ti({},m||{}),{arg:f,requestId:d,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(u==null?void 0:u.name)==="AbortError",condition:(u==null?void 0:u.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function u(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return u.prototype.abort=function(){},u}();function l(u){return function(d,f,p){var m=r!=null&&r.idGenerator?r.idGenerator(u):x9(),_=new a,w;function x(g){w=g,_.abort()}var y=function(){return o9(this,null,function(){var g,v,E,S,I,T,R;return e9(this,function(C){switch(C.label){case 0:return C.trys.push([0,4,,5]),S=(g=r==null?void 0:r.condition)==null?void 0:g.call(r,u,{getState:f,extra:p}),I9(S)?[4,S]:[3,2];case 1:S=C.sent(),C.label=2;case 2:if(S===!1||_.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return I=new Promise(function(A,k){return _.signal.addEventListener("abort",function(){return k({name:"AbortError",message:w||"Aborted"})})}),d(s(m,u,(v=r==null?void 0:r.getPendingMeta)==null?void 0:v.call(r,{requestId:m,arg:u},{getState:f,extra:p}))),[4,Promise.race([I,Promise.resolve(n(u,{dispatch:d,getState:f,extra:p,requestId:m,signal:_.signal,abort:x,rejectWithValue:function(A,k){return new Bf(A,k)},fulfillWithValue:function(A,k){return new G1(A,k)}})).then(function(A){if(A instanceof Bf)throw A;return A instanceof G1?i(A.payload,m,u,A.meta):i(A,m,u)})])];case 3:return E=C.sent(),[3,5];case 4:return T=C.sent(),E=T instanceof Bf?o(null,m,u,T.payload,T.meta):o(T,m,u),[3,5];case 5:return R=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,R||d(E),[2,E]}})})}();return Object.assign(y,{abort:x,requestId:m,arg:u,unwrap:function(){return y.then(T9)}})}}return Object.assign(l,{pending:s,rejected:o,fulfilled:i,typePrefix:e})}return t.withTypes=function(){return t},t})();function T9(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function I9(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var S0="listenerMiddleware";ni(S0+"/add");ni(S0+"/removeAll");ni(S0+"/remove");var K1;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);BV();const R9={song:{id:"",name:"",singer:"",by:"",image_file_path:"",image_url:"",song_file_path:"",song_url:"",duration:0,lyric_id:"",currentIndex:0,song_in:"",in_playlist:[]},playlist:{id:"",name:"",song_ids:[],time:0,count:0,by:"",image_by:"",image_file_path:"",image_url:""}},cA=_9({name:"song",initialState:R9,reducers:{setSong(t,e){t.song={...e.payload}},setPlaylist(t,e){t.playlist={...e.payload}}}}),Ot=t=>t.song,{setSong:Xn,setPlaylist:Fl}=cA.actions,A9=cA.reducer,C9={actuallySongs:[]},k9={state:C9,setActuallySongs:()=>{}},dA=h.createContext(k9),P9=({children:t})=>{const{adminSongs:e,userSongs:n,initial:r}=vn(),{song:i}=bt(Ot),[s,o]=h.useState([]),[a,l]=h.useState([]);return h.useEffect(()=>{if(r&&i.name){if(i.song_in.includes("playlist")){console.log("set actually songs"),l(s);return}i.song_in==="admin"?l(e):l(n),console.log("set actually songs")}},[i.song_in,r,s,n.length]),c.jsx(dA.Provider,{value:{state:{actuallySongs:a},setActuallySongs:o},children:t})},Ul=()=>{const{setActuallySongs:t,state:{actuallySongs:e}}=h.useContext(dA);return{actuallySongs:e,setActuallySongs:t}},Om=(t,e)=>{const[n,r]=h.useState(JSON.parse(localStorage.getItem(t)||JSON.stringify(e)));return h.useEffect(()=>{localStorage.setItem(t,JSON.stringify(n))},[n]),[n,r]},N9=t=>new Date(t.toDate().getTime()).toLocaleString(),hA=t=>(n=>n.toLocaleLowerCase().replace(/||||||||||/g,"a").replace(/||||||||||/g,"e").replace(/||||/g,"i").replace(/||||||||||/g,"o").replace(/||||||||||/g,"u").replace(/||||/g,"y").replace(//g,"d"))(t).toLocaleLowerCase().replaceAll(/[\W_]/g,""),td=t=>{if(!t)return"";let e=0,n=+t.toFixed(0);for(;n>=60;)n-=60,e++;return e<10?n>=10?`0${e}:${n}`:`0${e}:0${n}`:n>=10?`${e}:${n}`:`${e}:0${n}`},ea=(t,e)=>{console.log("update songs list");const n=e.findIndex(r=>r.id===t.id);n!=-1&&(e[n]=t)},Lh=(t,e)=>{console.log("update playlist value");const n=e.findIndex(r=>r.id===t.id);n!=-1&&(e[n]=t)},b9=t=>{let e=0,n=[];return t.forEach(r=>{e+=r.duration,n.push(r.id)}),{time:e,ids:n}},zf=({newPlaylistSongs:t,existingPlaylist:e})=>{console.log("generate playlist");const{ids:n,time:r}=b9(t);return{...e,time:+r.toFixed(1),song_ids:n,count:n.length}},Q1=({song:t,playlist:e})=>(console.log("generate playlist"),{...e,time:+(e.time+t.duration).toFixed(1),song_ids:[...e.song_ids,t.id],count:e.count+1}),fA=({...t})=>({...{name:"",singer:"",image_url:"",song_url:"",by:"",duration:0,lyric_id:"",image_file_path:"",song_file_path:"",id:"",in_playlist:[]},...t});function pA({audioEle:t,isPlaying:e,isOpenFullScreen:n,isWaiting:r,setIsPlaying:i,setIsWaiting:s}){const o=nr(),{theme:a}=gt(),{song:l}=bt(Ot),{actuallySongs:u}=Ul(),[d,f]=h.useState(!1),[p,m]=h.useState(!1),[_,w]=Om("repeat",!1),[x,y]=Om("shuffle",!1),g=h.useRef(0),v=h.useRef(),E=h.useRef(null),S=h.useRef(null),I=h.useRef(null),T=h.useRef(null),R=h.useRef(!0),C=h.useRef(!1),A=()=>{t==null||t.play()},k=()=>{t==null||t.pause()},z=M=>u[M],L=()=>{e?k():A()},F=()=>{i(!1)},ie=()=>{i(!0),s(!1),f(!1)},K=()=>{s(!0)},ce=h.useCallback(()=>{k(),s(!0),m(!1);const M=S.current;M&&I.current&&T.current&&(I.current.innerText="00:00",M.style.width="0%")},[]),b=h.useCallback(M=>{const B=M.target;if(v.current&&g.current){s(!0);const he=B.getBoundingClientRect(),Ae=S.current,te=(M.clientX-he.left)/v.current,Ie=te*g.current;t&&Ae&&(t.currentTime=+Ie.toFixed(1),Ae.style.width=(te*100).toFixed(1)+"%",e||A())}},[n,l]),$=h.useCallback(()=>{let M=l.currentIndex+1,B;M<u.length?B=u[M]:(B=u[0],M=0),o(Xn({...B,currentIndex:M,song_in:l.song_in}))},[l,u]),U=h.useCallback(()=>{let M=l.currentIndex-1,B;M>=0?B=u[M]:(B=u[u.length-1],M=u.length-1),o(Xn({...B,currentIndex:M,song_in:l.song_in}))},[l,u]),N=h.useCallback(()=>{if(!t)return;const M=t==null?void 0:t.currentTime,B=S.current;if(g.current&&M){const he=M/(g.current/100);B.style.width=he.toFixed(1)+"%"}I.current&&(I.current.innerText=td(M)||"00:00")},[l,n]),D=h.useCallback(()=>{if(_)return console.log("song repeat"),A();if(x){console.log("song shuffle");let M=l.currentIndex;for(;M===l.currentIndex;)M=Math.floor(Math.random()*u.length);const B=z(M);return o(Xn({...B,currentIndex:M,song_in:l.song_in}))}return l.currentIndex===u.length-1&&(C.current=!0),$()},[_,x,l,u]),Q=h.useCallback(()=>{var M;if(t){if(g.current=t.duration,m(!0),v.current=(M=E.current)==null?void 0:M.offsetWidth,C.current){C.current=!1,s(!1),i(!1);return}R.current&&!C||A()}},[]),Z=h.useCallback(()=>{f(!0),s(!1)},[]);h.useEffect(()=>{if(t)return t.addEventListener("loadedmetadata",Q),t.addEventListener("error",Z),t.addEventListener("pause",F),t.addEventListener("playing",ie),t.addEventListener("timeupdate",N),t.addEventListener("waiting",K),()=>{t.removeEventListener("loadedmetadata",Q),t.removeEventListener("error",Z),t.removeEventListener("pause",F),t.removeEventListener("playing",ie),t.removeEventListener("timeupdate",N),t.removeEventListener("waiting",K)}},[]),h.useEffect(()=>{if(t)return t.src=l.song_url,()=>{if(R.current){R.current=!1;return}ce()}},[l]),h.useEffect(()=>{if(t)return t==null||t.addEventListener("ended",D),()=>t==null?void 0:t.removeEventListener("ended",D)},[_,x,l,u]),h.useEffect(()=>{var M;v.current=(M=E.current)==null?void 0:M.offsetWidth},[n]);const X={button:`p-[5px] ${u.length<=1&&"opacity-20 pointer-events-none"}`,buttonsContainer:"w-full flex justify-center items-center gap-x-[20px] h-[50px]",processContainer:"flex flex-row items-center h-[30px]",processLineBase:"h-[4px] hover:h-[6px] flex-1 relative cursor-pointer rounded-3xl overflow-hidden bg-[#fff]",processLineCurrent:`absolute left-0 top-0 h-full ${a.content_bg}`,currentTime:"text-gray-500 text-[14px] font-semibold",duration:"text-[14px] font-semibold",icon:"w-[30px] "};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`${X.buttonsContainer}`,children:[c.jsx("button",{className:`${X.button} ${_&&a.content_text}`,onClick:()=>w(!_),children:c.jsx(DP,{className:X.icon})}),c.jsx("button",{className:X.button,onClick:()=>U(),children:c.jsx(YP,{className:X.icon})}),c.jsx(Nb,{isError:d,isWaiting:r,isPlaying:e,handlePlayPause:L,songInStore:l}),c.jsx("button",{className:`${X.button}`,onClick:()=>$(),children:c.jsx(YE,{className:X.icon})}),c.jsx("button",{className:`${X.button} ${x&&a.content_text}`,onClick:()=>y(!x),children:c.jsx(WP,{className:X.icon})})]}),c.jsxs("div",{className:X.processContainer,children:[c.jsx("div",{className:"w-[45px]",children:t&&c.jsx("span",{ref:I,className:`${X.currentTime}`,children:"00:00"})}),c.jsx("div",{ref:E,onClick:M=>b(M),className:`${X.processLineBase} ${!p&&"opacity-20 pointer-events-none"}`,children:c.jsx("div",{ref:S,className:`${X.processLineCurrent}`})}),c.jsx("div",{className:"w-[55px] pl-[5px]",children:t&&c.jsx("span",{ref:T,className:X.duration,children:td(g.current)||"00:00"})})]})]})}function O9(t,e,n){const[r,i]=h.useState(!1),[s,o]=Om("volume",1),a=u=>{const f=u.target.getBoundingClientRect();if(console.log("handleSetVolume"),t.current){let p=+((u.clientX-f.x)/t.current).toFixed(2);p>.9?p=1:p<.1?(p=0,i(!0)):i(!1),o(p)}},l=()=>{n.muted?(n.muted=!1,i(!1)):(n.muted=!0,i(!0))};return h.useEffect(()=>{e.current&&n&&(e.current.style.width=s*100+"%",n.volume=s)},[s]),{volume:s,handleSetVolume:a,isMute:r,handleMute:l}}function j9({text:t,textWrapper:e,autoScroll:n}){const{song:r}=bt(Ot),{setErrorToast:i}=tr(),s=h.useRef(),o=h.useRef(),a=h.useRef(0),l=h.useRef(""),u=h.useRef(0),[d,f]=h.useState(!1),p=h.useCallback(()=>{if(!t){console.log("lack props");return}const w=t.current;w&&(w.style.transition="none",w.style.transform="translateX(0)",f(!1))},[t]),m=h.useCallback(()=>{if(!t){console.log("lack of prop");return}if(!a.current&&!u.current)return;const w=t.current;w&&(w.innerHTML=l.current+"&nbsp; &nbsp; &nbsp;"+l.current,f(!0),w.style.transition=`transform linear ${a.current}s`,w.style.transform=`translateX(-${u.current}px)`,o.current=setTimeout(()=>{p()},a.current*1e3))},[t,e]),_=h.useCallback(()=>{if(!n||!t||!e||d)return;const w=t.current,x=e.current;w.offsetWidth-x.offsetWidth>0&&(l.current=w.innerText,u.current=w.offsetWidth+20,a.current=+(u.current/35).toFixed(1))},[d,t,e]);h.useEffect(()=>{if(r.name&&(_(),!!u.current))return n&&a.current&&!d&&(setTimeout(()=>{m()},1e3),s.current=setInterval(()=>{m()},a.current*1e3+3e3+1e3)),()=>{s.current?clearInterval(s.current):i({}),o.current?clearTimeout(o.current):i({}),l.current&&(p(),a.current=0,u.current=0)}},[r])}function nd({label:t,classNames:e,autoScroll:n}){const r=h.useRef(null),i=h.useRef(null);return j9({text:i,textWrapper:r,autoScroll:n}),c.jsx("div",{ref:r,className:"overflow-hidden scroll-smooth relative h-full",children:c.jsx("div",{ref:i,className:`${e} absolute left-0 whitespace-nowrap line-clamp-1 pl-[3px]`,children:t||"..."})})}function L9({idle:t,audioEle:e,isOpenFullScreen:n,isPlaying:r,isWaiting:i,setIsWaiting:s,setIsPlaying:o,setIsOpenFullScreen:a}){const l=bt(Ot),{song:u}=l,{theme:d}=gt(),f=h.useRef(),p=h.useRef(null),m=h.useRef(null),{handleSetVolume:_,isMute:w,handleMute:x}=O9(f,m,e);return h.useEffect(()=>{var y;f.current=(y=p.current)==null?void 0:y.offsetWidth},[n]),c.jsx("div",{className:`border-${d.alpha} fixed bottom-0 w-full h-[90px] border-t  z-50 px-10
            ${n?"border-transparent bg-transparent":d.bottom_player_bg}
            ${t?"hidden":""} `,children:c.jsxs("div",{className:`flex flex-row gap-[10px] h-full items-stretch ${n?"justify-center text-white":"justify-between"}`,children:[c.jsx("div",{className:`current-song w-1/3 ${n?"hidden":""}`,children:c.jsxs("div",{className:`flex flex-row items-center h-full origin-center ${n?"hidden":""}`,children:[c.jsx("div",{className:"w-[2.5rem] h-[2.5rem]",children:c.jsx("img",{className:"w-full object-cover object-center rounded-full",src:u.image_url?u.image_url:FR})}),c.jsxs("div",{className:" ml-[10px] flex-grow",children:[c.jsx("div",{className:"h-[24px] w-full mask-image-horizontal",children:h.useMemo(()=>c.jsx(nd,{songInStore:u,autoScroll:!0,classNames:"text-[18px] font-[500]",label:(u==null?void 0:u.name)||"name"}),[u])}),c.jsx("div",{className:"h-[20px] w-full mask-image-horizontal",children:h.useMemo(()=>c.jsx(nd,{songInStore:u,autoScroll:!0,classNames:"text-[14px] opacity-60",label:(u==null?void 0:u.singer)||"singer"}),[u])})]})]})}),c.jsx("div",{className:`desktop-bottom-player-control  flex  
               max-w-[400px] ${n?"max-w-[600px] flex-col-reverse pb-[10px]":"flex-col justify-center"} flex-grow
            ${u.song_url?"":"pointer-events-none opacity-20"}`,children:h.useMemo(()=>c.jsx(pA,{audioEle:e,idle:!1,isPlaying:r,isWaiting:i,isOpenFullScreen:n,setIsWaiting:s,setIsPlaying:o}),[r,n,i])}),c.jsxs("div",{className:`volume-control w-1/3 flex items-center justify-end gap-5  ${n?"hidden":""}`,children:[c.jsxs("div",{className:"flex items-center w-[150px]",children:[c.jsx("button",{onClick:()=>x(),children:w?c.jsx(cb,{className:"w-6 h-6"}):c.jsx(ab,{className:"w-6 h-6"})}),c.jsx("div",{onClick:y=>_(y),ref:p,className:`ml-3 w-full relative h-[4px] hover:h-[0.4rem] cursor-pointer rounded-3xl overflow-hidden
                     ${d.type==="light"?"bg-gray-400":"bg-gray-200"}
                     `,children:c.jsx("div",{ref:m,className:`absolute left-0 top-0 h-full w-full ${d.content_bg}`})})]}),c.jsx(ee,{onClick:()=>a(!0),variant:"circle",className:`h-[35px] w-[35px] p-[8px] ${u.name?"":"opacity-20 pointer-events-none"}`,children:c.jsx(fN,{})})]})]})})}const bo=({loading:t,theme:e,callback:n,label:r,setOpenModal:i,buttonLabel:s,desc:o,className:a})=>c.jsxs("div",{className:a||"w-[30vw]",children:[c.jsx("h1",{className:"text-[20px] text-red-500 font-semibold",children:r||"Wait a minute"}),c.jsx("p",{className:" text-[16px]",children:o}),c.jsxs("div",{className:"flex gap-[10px] mt-[20px]",children:[c.jsx(ee,{isLoading:t,className:` bg-${e.alpha} hover:bg-red-500 rounded-full text-[14px]`,variant:"primary",onClick:()=>n(),children:s||"Yes please"}),c.jsx(ee,{onClick:()=>i&&i(!1),className:`${e.content_bg} rounded-full text-[14px]`,variant:"primary",children:"Close"})]})]}),Si=({children:t,setOpenModal:e})=>c.jsx(c.Fragment,{children:ml.createPortal(c.jsxs("div",{className:"fixed inset-0 z-[99]",children:[c.jsx("div",{onClick:n=>{n.stopPropagation,e(!1)},className:"absolute bg-black opacity-60 inset-0 z-[90]"}),c.jsx("div",{className:"absolute z-[99] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:t})]}),document.getElementById("portals"))});function Y1({data:t,theme:e,selectedSongList:n,setSelectedSongList:r,isChecked:i,adminSongs:s,setAdminSongs:o,inProcess:a}){const[l,u]=h.useState(!1),[d,f]=h.useState(!1),[p,m]=h.useState(),{setErrorToast:_,setSuccessToast:w}=tr(),{song:x}=bt(Ot),y=T=>{m(T),f(!0)},g=()=>{u(!1),f(!1)},v=async()=>{if(!o||!s){_({message:"Lack of props"});return}try{u(!0);const T=[...s],R=T.indexOf(t);T.splice(R,1),o(T),await fh(t),w({message:`'${t.name}' deleted`})}catch(T){console.log({message:T}),_({})}finally{g()}},E=T=>{if(!n||!r)return;let R=[...n];const C=R.indexOf(T);C===-1?R.push(T):R.splice(C,1),r(R)},S=h.useMemo(()=>bo({loading:l,label:`Delete '${t.name}'`,desc:"This action cannot be undone",theme:e,callback:v,setOpenModal:f}),[l,e,s,x]),I={td:`py-[10px] my-[10px] border-${e.alpha} border-b-[1px]`,th:"py-[5px]"};return c.jsxs(c.Fragment,{children:[c.jsxs("tr",{className:"",children:[c.jsx("td",{className:`${I.td} text-center`,children:!a&&c.jsx("input",{checked:i,onChange:()=>E(t),className:"scale-[1.2]",type:"checkbox"})}),c.jsx("td",{className:I.td,children:c.jsx("div",{className:"h-[44px] w-[44px]",children:c.jsx(wi,{classNames:"",src:t.image_url})})}),c.jsx("td",{className:I.td,children:t.name}),c.jsx("td",{className:I.td,children:t.singer}),a?c.jsx("td",{className:I.td,children:c.jsx("h1",{children:"...in process"})}):c.jsx("td",{className:I.td,children:c.jsxs("div",{className:"flex items-center gap-[5px]",children:[c.jsx(ee,{variant:"circle",onClick:()=>y("confirm"),children:c.jsx(Bg,{className:"w-[20px]"})}),c.jsx(ee,{variant:"circle",onClick:()=>y("edit"),children:c.jsx(Ug,{className:"w-[20px]"})})]})})]}),d&&!a&&c.jsx(Si,{setOpenModal:f,children:c.jsxs(Cn,{theme:e,children:[p==="edit"&&c.jsx(LR,{setIsOpenModal:f,setUserSongs:o,theme:e,userSongs:s,data:t}),p==="confirm"&&S]})})]})}function mA({bgRef:t,songInStore:e}){h.useEffect(()=>{if(e.image_url){const n=t.current;n&&(n.style.backgroundImage=`url(${e.image_url})`)}},[e])}function gA({songInStore:t}){const[e,n]=h.useState({base:"",real_time:[]});return h.useEffect(()=>t.lyric_id?((async()=>{const i=(await j$({collection:"lyrics",id:t.lyric_id})).data();i&&n(i)})(),()=>n({base:"",real_time:[]})):void 0,[t]),e}function T0(){const{setErrorToast:t}=tr(),{userInfo:e,setUserInfo:n}=bn(),{initial:r,adminSongs:i,initSongsContext:s,userSongs:o}=vn(),[a,l]=h.useState(""),[u,d]=h.useState(!(i.length||o.length)),f=Dr(zt,"songs"),p=Dr(zt,"playlist"),m=v=>{d(!1),l(v),t({})},_=async()=>{try{const v=Os(Dr(zt,"songs"),js("by","==","admin")),E=Os(Dr(zt,"playlists"),js("by","==","admin")),S=await Ls(v),I=await Ls(E),T={adminSongs:[],adminPlaylists:[]};if(S.docs||I.docs){const R=S.docs.map(A=>A.data()),C=I.docs.map(A=>A.data());return T.adminPlaylists=C||[],T.adminSongs=R||[],T}}catch(v){console.log({message:v}),m("GetAdminSongsAndPlaylists error")}},w=async()=>{if(!e)return;const v=Dr(zt,"users"),E=di(v,e==null?void 0:e.email);try{const S=await Kc(E);if(S.exists())return S.data()}catch(S){console.log(S),m("Get userData error")}},x=async()=>{var v;try{const E=Os(p,js("by","==",e==null?void 0:e.email)),S=await Ls(E);if(S.docs.length)return(v=S.docs)==null?void 0:v.map(I=>I.data())}catch(E){console.log("getUserPlaylists",E),m("Get users playlist error")}},y=async()=>{var v,E;try{const S=await w(),I={userSongs:[],userPlaylists:[]};if(!(S!=null&&S.song_ids))return;if((v=S==null?void 0:S.song_ids)!=null&&v.length){const T=Os(f,js("by","==",S==null?void 0:S.email)),R=await Ls(T);R.docs.length&&(I.userSongs=R.docs.map(C=>C.data()))}if((E=S==null?void 0:S.playlist_ids)!=null&&E.length){const T=await x();T!=null&&T.length&&(I.userPlaylists=T)}return{userData:I,userInfo:S}}catch(S){console.log({message:S}),m("GetUserSongsAndPlaylists error")}},g=async()=>{console.log("run initial"),d(!0);let v;if(i.length||(console.log("get admin data"),v=await _()),!e.email){console.log("no logged in"),s({...v,userPlaylists:[],userSongs:[]}),d(!1);return}const E=await y();if(E){console.log("logged in");const{userInfo:S,userData:I}=E;s(v?{...I,...v}:{...I}),n({latest_seen:S.latest_seen,song_ids:S.song_ids,song_count:S.song_count,playlist_ids:S.playlist_ids,role:S.role})}d(!1)};return h.useEffect(()=>{if(e.status==="loading"){d(!0);return}if(r&&i.length&&e.email&&!o.length){g();return}if(!r&&!i.length){g();return}else{d(!1);return}},[e]),{initial:r,loading:u,errorMsg:a}}function D9({firstTimeRender:t}){const e=nr(),{userInfo:n}=bn(),{setActuallySongs:r}=Ul(),{song:i,playlist:s}=bt(Ot),{loading:o,errorMsg:a,initial:l}=T0(),{adminSongs:u,userSongs:d,userPlaylists:f}=vn(),[p,m]=h.useState(o),[_,w]=h.useState([]),x=h.useRef(!0),y=h.useRef(0),{setErrorToast:g}=tr(),v=Mg(),E=us(),S=h.useCallback(async()=>{if(!l||!v.id){E(ht.Home);return}const T=f.find(R=>R.id===v.id);T&&(console.log("set playlist after init"),e(Fl(T)),m(!1))},[v,n]),I=h.useCallback(()=>{console.log("get playlist songs");let T=[],R;if(!s.song_ids.length){w([]);return}if(s.song_ids.some(A=>A.includes("admin")))R=[...u,...d];else switch(s.by){case"admin":R=u;break;default:R=d}if(s.song_ids.forEach(A=>{const k=R.find(z=>A===z.id);k&&T.push(k)}),s.song_ids.length!==T.length){console.log("check playlist song ids",s.song_ids),g({});return}w(T),y.current||(y.current=T.length)},[s.song_ids,d]);return h.useEffect(()=>{if(!t.current&&!(!l||a)){if(s.id===v.id){console.log("already have playlist"),m(!1);return}S()}},[l]),h.useEffect(()=>{t.current||!s.name||a||s.id===v.id&&I()},[s.song_ids]),h.useEffect(()=>{if(t.current){t.current=!1;return}if(x.current){x.current=!1;return}!i.song_in.includes(s.name)||v.id===s.name&&y.current===_.length||(y.current=_.length,r(_))},[_]),{playlistSongs:_,loading:p}}function M9({containerRef:t,songItemRef:e,firstTimeRender:n,isOpenFullScreen:r}){const{song:i}=bt(Ot);!scroll||!t||!e||h.useEffect(()=>{if(n.current){n.current=!1;return}if(i.name&&r)if(t&&e){const s=window.innerWidth,o=e.current,a=t.current,u=o.getBoundingClientRect().left,d=s-(u+o.offsetWidth),f=Math.abs(u-d)/2;(Math.abs(u)>s||Math.abs(d)>s)&&(a.style.scrollBehavior="auto"),d>u?setTimeout(()=>{a.scrollLeft=a.scrollLeft-f,a.style.scrollBehavior="smooth"},300):d<u&&setTimeout(()=>{a.scrollLeft=a.scrollLeft+f,a.style.scrollBehavior="smooth"},300)}else console.log("element undefined")},[i,r])}const I0=()=>{const t=nr(),{userPlaylists:e,setUserPlaylists:n,userSongs:r,setUserSongs:i}=vn(),{playlist:s}=bt(Ot),o=h.useCallback(async({newPlaylist:l})=>{const u=[...e];Lh(l,u),s.name===l.name&&t(Fl(l)),await Ct({collection:"playlist",data:l,id:l.id}),n(u,[])},[e,s]),a=h.useCallback(async({song:l})=>{let u=[...r];const d=u.indexOf(l);u.splice(d,1);const f=u.map(p=>p.id);if(u.length!==r.length)return i(u),f},[r]);return{setPlaylistDocAndSetUserPlaylists:o,updateAndSetUserSongs:a}};var yo={},R0={},Dh={};Object.defineProperty(Dh,"__esModule",{value:!0});Dh.default=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop / Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast  Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Rock/Pop"];var Dt={};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.skipPaddingZeros=Dt.getEndpointOfBytes=Dt.readBytesToString=Dt.readBytesToISO8859=Dt.readBytesToUTF16=Dt.readBytesToUTF8=void 0;const Mi=String.fromCharCode;function yA(t,e){e==null||e<0?e=t.length:e=Math.min(e,t.length);let n=0;t[0]===239&&t[1]===187&&t[2]===191&&(n=3);const r=[];for(let i=0;n<e;i++){const s=t[n++];let o,a,l,u;if(s===0)break;s<128?r[i]=Mi(s):s>=194&&s<224?(o=t[n++],r[i]=Mi(((s&31)<<6)+(o&63))):s>=224&&s<240?(o=t[n++],a=t[n++],r[i]=Mi(((s&15)<<12)+((o&63)<<6)+(a&63))):s>=240&&s<245&&(o=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18)+((o&63)<<12)+((a&63)<<6)+(l&63)-65536,r[i]=Mi((u>>10)+55296,(u&1023)+56320))}return r.join("")}Dt.readBytesToUTF8=yA;function vA(t,e,n){n==null||n<0?n=t.length:n=Math.min(n,t.length);let r=0,i=1,s=0;t[0]===254&&t[1]===255?(e=!0,r=2):t[0]===255&&t[1]===254&&(e=!1,r=2),e&&(i=0,s=1);const o=[];let a,l,u,d,f,p;for(let m=0;r<n&&(a=t[r+i],l=t[r+s],u=(a<<8)+l,r+=2,u!==0);m++)a<216||a>=224?o[m]=Mi(u):(f=t[r+i],p=t[r+s],d=(f<<8)+p,r+=2,o[m]=Mi(u,d));return o.join("")}Dt.readBytesToUTF16=vA;function _A(t,e){e==null||e<0?e=t.length:e=Math.min(e,t.length);const n=[];for(let r=0;r<e;r++)n.push(Mi(t[r]));return n.join("")}Dt.readBytesToISO8859=_A;function $9(t,e,n){return e===0?_A(t,n):e===3?yA(t,n):e===1||e===2?vA(t,void 0,n):null}Dt.readBytesToString=$9;function V9(t,e,n=0){const r=e===0?s=>t[s]===0:s=>t[s]===0&&t[s+1]===0;let i=n;for(;i<t.length&&!r(i);i++);return i}Dt.getEndpointOfBytes=V9;function F9(t,e){for(let n=e;t[n]===0;n++)e++;return e}Dt.skipPaddingZeros=F9;Object.defineProperty(R0,"__esModule",{value:!0});const U9=Dh,Ti=Dt,X1=128;function B9(t){if(!t||t.length<X1)return!1;t=t.slice(t.length-X1);const e={version:{major:1,minor:0}};if((0,Ti.readBytesToUTF8)(t,3)!=="TAG")return!1;const r=/(^[\s0]+|[\s0]+$)/;return e.title=(0,Ti.readBytesToUTF8)(t.slice(3),30).replace(r,""),e.artist=(0,Ti.readBytesToUTF8)(t.slice(33),30).replace(r,""),e.album=(0,Ti.readBytesToUTF8)(t.slice(63),30).replace(r,""),e.year=(0,Ti.readBytesToUTF8)(t.slice(93),4).replace(r,""),t[125]===0?(e.comments=(0,Ti.readBytesToUTF8)(t.slice(97),28).replace(r,""),e.version.minor=1,e.track=t[126]):e.comments=(0,Ti.readBytesToUTF8)(t.slice(97),30).replace(r,""),e.genre=U9.default[t[127]]||"",e}R0.default=B9;var is={},Bl={};Object.defineProperty(Bl,"__esModule",{value:!0});Bl.FrameTypeValueMap=void 0;const z9={TALB:"album",TBPM:"bpm",TCOM:"composer",TCON:"genre",TCOP:"copyright",TDEN:"encoding-time",TDLY:"playlist-delay",TDOR:"original-release-time",TDRC:"recording-time",TDRL:"release-time",TDTG:"tagging-time",TENC:"encoder",TEXT:"writer",TFLT:"file-type",TIPL:"involved-people",TIT1:"content-group",TIT2:"title",TIT3:"subtitle",TKEY:"initial-key",TLAN:"language",TLEN:"length",TMCL:"credits",TMED:"media-type",TMOO:"mood",TOAL:"original-album",TOFN:"original-filename",TOLY:"original-writer",TOPE:"original-artist",TOWN:"owner",TPE1:"artist",TPE2:"band",TPE3:"conductor",TPE4:"remixer",TPOS:"set-part",TPRO:"produced-notice",TPUB:"publisher",TRCK:"track",TRSN:"radio-name",TRSO:"radio-owner",TSOA:"album-sort",TSOP:"performer-sort",TSOT:"title-sort",TSRC:"isrc",TSSE:"encoder-settings",TSST:"set-subtitle",TXXX:"user-defined-text-information",TYER:"year",WCOM:"url-commercial",WCOP:"url-legal",WOAF:"url-file",WOAR:"url-artist",WOAS:"url-source",WORS:"url-radio",WPAY:"url-payment",WPUB:"url-publisher",WAF:"url-file",WAR:"url-artist",WAS:"url-source",WCM:"url-commercial",WCP:"url-copyright",WPB:"url-publisher",COMM:"comments",USLT:"lyrics",APIC:"image",PIC:"image",IPLS:"involved-people-list",OWNE:"ownership"};Bl.default=z9;Bl.FrameTypeValueMap={TXXX:"array",COMM:"array",USLT:"array"};var A0={};Object.defineProperty(A0,"__esModule",{value:!0});A0.default=["other","file-icon","icon","cover-front","cover-back","leaflet","media","artist-lead","artist","conductor","band","composer","lyricist-writer","recording-location","during-recording","during-performance","screen","fish","illustration","logo-band","logo-publisher"];Object.defineProperty(is,"__esModule",{value:!0});is.calcFrameSize=is.calcTagSize=void 0;const jm=Bl,J1=Dh,W9=A0,Me=Dt,H9=20;function q9(t){if(!t||t.length<H9)return!1;const e=G9(t.slice(0,10));if(!e)return!1;const n=e.version.flags;if(n.unsync)throw new Error("no support for unsynchronisation");let r=10;n.xheader&&(r+=Lm(t.slice(10,14)));const i=Lm(t.slice(6,10));return K9(t.slice(r,i+r),e),e}is.default=q9;function G9(t){if(!t||t.length<10||(0,Me.readBytesToUTF8)(t,3)!=="ID3")return!1;const n=t[5];return{version:{major:2,minor:t[3],revision:t[4],flags:{unsync:(n&128)!==0,xheader:(n&64)!==0,experimental:(n&32)!==0}}}}function Lm(t){return(t[0]&127)*2097152+(t[1]&127)*16384+(t[2]&127)*128+(t[3]&127)}is.calcTagSize=Lm;function wA(t){return t.length<4?0:t[0]*16777216+t[1]*65536+t[2]*256+t[3]}is.calcFrameSize=wA;function K9(t,e){let n=0;const r=e.version;for(;n<t.length;){const i=wA(t.slice(n+4));if(i===0)break;const s=t.slice(n,n+10+i);if(!s.length)break;const o=Q9(s,r.minor,i);o.tag&&(jm.FrameTypeValueMap[o.id]==="array"?e[o.tag]?e[o.tag].push(o.value):e[o.tag]=[o.value]:e[o.tag]=o.value),n+=s.length}}function Q9(t,e,n){const r={id:null,tag:null,value:null},i={id:(0,Me.readBytesToUTF8)(t,4),type:null,size:n,flags:[t[8],t[9]]};if(i.type=i.id[0],r.id=i.id,i.flags[1]!==0||!(i.id in jm.default))return r;r.tag=jm.default[i.id];let s=0,o=0,a=0,l=0;if(i.type==="T"){if(s=t[10],i.id==="TXXX"){o=11,a=(0,Me.getEndpointOfBytes)(t,s,o)-o;const u={description:(0,Me.readBytesToString)(t.slice(o),s,a),value:""};o+=a+1,o=(0,Me.skipPaddingZeros)(t,o),u.value=(0,Me.readBytesToString)(t.slice(o),s),r.value=u}else if(r.value=(0,Me.readBytesToString)(t.slice(11),s),i.id==="TCON"&&r.value!==null)if(r.value[0]==="("){const u=r.value.match(/\(\d+\)/g);u&&(r.value=u.map(d=>J1.default[+d.slice(1,-1)]).join(","))}else{const u=parseInt(r.value,10);isNaN(u)||(r.value=J1.default[u])}}else if(i.type==="W")i.id==="WXXX"&&t[10]===0?r.value=(0,Me.readBytesToISO8859)(t.slice(11)):r.value=(0,Me.readBytesToISO8859)(t.slice(10));else if(i.id==="COMM"||i.id==="USLT"){s=t[10],o=14,a=0;const u=(0,Me.readBytesToISO8859)(t.slice(11),3);a=(0,Me.getEndpointOfBytes)(t,s,o)-o;const d=(0,Me.readBytesToString)(t.slice(o),s,a);o=(0,Me.skipPaddingZeros)(t,o+a+1),r.value={language:u,description:d,value:(0,Me.readBytesToString)(t.slice(o),s)}}else if(i.id==="APIC"){s=t[10];const u={type:null,mime:null,description:null,data:null};for(o=11,a=(0,Me.getEndpointOfBytes)(t,0,o)-o,u.mime=(0,Me.readBytesToString)(t.slice(o),0,a),u.type=W9.default[t[o+a+1]]||"other",o+=a+2,a=0,l=o;;l++)if(t[l]===0){a=l-o;break}u.description=a===0?null:(0,Me.readBytesToString)(t.slice(o),s,a),o=(0,Me.skipPaddingZeros)(t,o+a+1),u.data=t.slice(o),r.value=u}else if(i.id==="IPLS")s=t[10],r.value=(0,Me.readBytesToString)(t.slice(11),s);else if(i.id==="OWNE"){s=t[10],o=11,a=(0,Me.getEndpointOfBytes)(t,s,o);const u=(0,Me.readBytesToISO8859)(t.slice(o),a);o+=a+1;const d=(0,Me.readBytesToISO8859)(t.slice(o),8);o+=8,r.value={pricePayed:u,dateOfPurch:d,seller:(0,Me.readBytesToString)(t.slice(o),s)}}return r}var Z1=$0&&$0.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};Object.defineProperty(yo,"__esModule",{value:!0});yo.parseV2Tag=yo.parseV1Tag=void 0;const xA=R0;yo.parseV1Tag=xA.default;const EA=is;yo.parseV2Tag=EA.default;function Y9(t){const e=(0,xA.default)(t),n=(0,EA.default)(t);if(!n&&!e)return!1;const r={version:!1},i=n||r,{version:s}=i,o=Z1(i,["version"]),a=e||r,{version:l}=a,u=Z1(a,["version"]),d=Object.assign(Object.assign({version:{v1:l,v2:s}},u),o);return u.comments&&(d.comments=[{value:u.comments},...o&&o.comments?o.comments:[]]),d}var X9=yo.default=Y9,ll={};Object.defineProperty(ll,"__esModule",{value:!0});ll.fetchFileAsBuffer=SA=ll.convertFileToBuffer=void 0;function J9(t){const e=new FileReader;return new Promise((n,r)=>{e.onload=()=>{n(new Uint8Array(e.result))},e.onerror=i=>r(i),e.readAsArrayBuffer(t)})}var SA=ll.convertFileToBuffer=J9;function Z9(t){if(!t)throw new Error("Argument should be a valid url string.");return new Promise((e,n)=>{const r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{r.response?e(new Uint8Array(r.response)):n(new Error("Empty XMLHttpRequest response."))},r.onerror=i=>n(i),r.send()})}ll.fetchFileAsBuffer=Z9;const eF=async t=>{if(!t)return;const e=await SA(t).then(X9);if(!e)return;const{title:n,artist:r,lyrics:i}=e,s={name:"",singer:"",lyric:""};if((!n||!r)&&console.log("song don't have tags"),s.name=n||t.name,s.singer=r||"...",i!=null&&i.length){const o=i[0].value;o?o.includes("image/jpeg")?s.lyric="":s.lyric=o:s.lyric=""}return s};function TA({audioRef:t,admin:e,songs:n,setSongs:r}){const{userInfo:i}=bn(),{setErrorToast:s,setSuccessToast:o,setToasts:a}=tr(),{setUserSongs:l,userSongs:u}=vn(),[d,f]=h.useState("idle"),[p,m]=h.useState([]),[_,w]=h.useState([]),x=h.useRef([]),y=h.useRef([]),g=h.useRef(!1),v=h.useCallback(async S=>{if(!i.email){s({message:"Missing user data"});return}f("uploading");const T=S.target.files;if(!T.length){f("finish");return}let R=fA({by:e?"admin":i.email}),C=[],A=[];e&&n?A=n:A=u;try{let k;for(k=0;k<=T.length-1;k++){const z=T[k],L=await eF(z);if(L){let F={...R,name:L.name,singer:L.singer};if((()=>A.some(K=>K.singer===F.singer&&K.name===F.name))()){console.log(">>>duplicate"),g.current=!0,x.current.push(F);continue}C.push(F),y.current=[...y.current,k],Object.assign(z,{for_song_id:C.length-1})}}if(u.length+y.current.length>20&&i.role!=="admin"){f("finish-error"),s({message:"You have reach the upload limit"});return}if(!C.length){f("finish-error"),s({message:"Duplicate song"});return}m(C);for(let z of y.current){let L=T[z];const{fileURL:F,filePath:ie}=await PR({file:L,folder:"/songs/",email:i.email});let K=hA(C[L.for_song_id].name);e?K+="_admin":K+="_"+i.email.replace("@gmail.com","");const ce=L.for_song_id;C[ce]={...C[ce],id:K,song_file_path:ie,song_url:F};const b=t.current;b.src=URL.createObjectURL(L),await E(C,ce)}}catch(k){console.log(k),f("finish-error"),s({message:"error when upload song file"}),m([]);return}try{if(y.current=[],!e){const k=C.map(F=>F.id),L=[...u.map(F=>F.id),...k];await bR({songIds:L,userInfo:i}),l([...u,...C])}m([]),r&&r([...A,...C]),g.current?(f("finish-error"),a(k=>[...k,{id:Qc(4),title:"warning",desc:"Song duplicate"}])):(f("finish"),C.length>1&&o({message:`${C.length} songs uploaded`}))}catch(k){console.log(k),s({message:"Update user data failed"}),f("finish-error");return}},[i,u,n]),E=h.useCallback(async(S,I)=>new Promise(T=>{const R=t.current,C=async()=>{let A=S[I];const k=+R.duration.toFixed(1)||99;A={...A,duration:k},S[I]=A,await Ct({collection:"songs",data:A,id:A.id}),m(S),w(z=>[...z,A.id]),R.removeEventListener("loadedmetadata",C),URL.revokeObjectURL(R.src),a(z=>[...z,{title:"success",id:Qc(4),desc:`'${A.name}' uploaded`}]),T()};R.addEventListener("loadedmetadata",C)}),[]);return{tempSongs:p,setTempSongs:m,addedSongIds:_,status:d,handleInputChange:v}}function tF({isOpenFullScreen:t,setIsOpenFullScreen:e,idle:n,audioEle:r}){const i=nr(),{theme:s}=gt(),{song:o}=bt(Ot),{actuallySongs:a}=Ul(),[l,u]=h.useState("Lyric"),d=h.useRef(null),f=h.useRef(null),p=h.useRef(),m=h.useRef(null),_=h.useRef(!0),w=us(),x=gA({songInStore:o});mA({bgRef:d,songInStore:o}),M9({containerRef:f,songItemRef:m,firstTimeRender:_,isOpenFullScreen:t});const y=(T,R)=>{o.id!==T.id&&i(Xn({...T,currentIndex:R,song_in:o.song_in}))},g=T=>{const R=f.current;T==="next"?(R.scrollLeft+=500,p.current&&clearTimeout(p.current)):T==="previous"&&(R.scrollLeft-=500),console.log(">>> check scroll left",R.scrollLeft)},v=()=>{e(!1),setTimeout(()=>{w(`/React-Zingmp3/edit/${o.id}`)},300)},E={button:`p-[8px] bg-gray-500 bg-opacity-20 text-xl ${s.content_hover_text}`,mainContainer:`fixed inset-0 z-50 bg-zinc-900  overflow-hidden text-white  ${t?"translate-y-0":"translate-y-full"} transition-[transform] duration-300 ease-in-out delay-300`,bg:"absolute h-[100vh] w-[100vw] -z-10 inset-0 bg-no-repeat bg-cover bg-center blur-[99px] transition-[background] duration-100",overplay:"absolute h-[100vh] w-[100vw] inset-0 bg-zinc-900 bg-opacity-80 bg-blend-multiply",header:"header-left flex px-10 py-[20px] relative h-[75px] max-[549px]:px-[10px]",headerRight:`flex items-center absolute right-10 gap-[10px] max-[549px]:right-[10px] top-0 h-full ${n?"hidden":""}`,contentContainer:"h-[calc(100%-100px)] max-[549px]:h-[calc(100%-150px)] relative overflow-hidden",songsListTab:`${l!=="Songs"?"opacity-0":""} relative h-full no-scrollbar flex items-center flex-row overflow-auto scroll-smooth max-[549px]:px-[150px] px-[calc(50%-390px/2)]`,absoluteButton:`p-[8px] bg-gray-500 bg-opacity-50 text-xl fixed top-1/2 -translate-y-1/2 max-[549px]:hidden opacity-[.5] hover:opacity-100 ${s.content_hover_text}`,songNameSinger:"relative text-center text-white text-[14px] opacity-80",lyricTabContainer:"px-[40px] h-full w-full flex items-center justify-center flex-row",lyricContainer:"flex-grow ml-[50px] max-[549px]:ml-0 h-full overflow-hidden"},S=h.useMemo(()=>{if(a.length)return a.map((T,R)=>{const C=R===o.currentIndex;return C?c.jsx(Ju,{theme:s,ref:m,classNames:"items-end justify-center flex-shrink-0 w-[350px] h-[350px]",hasHover:!0,hasTitle:!0,onClick:()=>y(T,R),active:C,data:T},R):c.jsx(Ju,{theme:s,classNames:"items-end justify-center flex-shrink-0 w-[350px] h-[350px]",hasHover:!0,hasTitle:!0,onClick:()=>y(T,R),active:C,data:T},R)})},[o,a]),I=c.jsxs("div",{className:E.lyricTabContainer,children:[c.jsx(Ju,{theme:s,active:!0,data:o}),c.jsx("div",{className:E.lyricContainer,children:c.jsx(QA,{audioEle:r,songLyric:x})})]});return c.jsxs("div",{className:`${E.mainContainer}`,children:[c.jsx("div",{ref:d,className:E.bg}),c.jsx("div",{className:E.overplay}),c.jsxs("div",{className:"h-[calc(100vh-90px)]",children:[c.jsxs("div",{className:E.header,children:[c.jsx("div",{className:`relative h-full ${n?"":"hidden"}`,children:c.jsx("div",{className:"absolute left-0 top-0 h-full "})}),c.jsx(eC,{idle:n,activeTab:l,setActiveTab:u,tabs:["Songs","Lyric"]}),c.jsxs("div",{className:`${E.headerRight}`,children:[o.by!="admin"&&c.jsx(ee,{onClick:()=>v(),variant:"circle",size:"normal",className:E.button,children:c.jsx(TN,{})}),c.jsx(ee,{onClick:()=>e(!1),variant:"circle",size:"normal",className:E.button,children:c.jsx(GE,{})})]})]}),c.jsxs("div",{className:E.contentContainer,children:[c.jsxs("div",{ref:f,className:` ${E.songsListTab}`,children:[S,c.jsx(ee,{onClick:()=>g("previous"),variant:"circle",size:"large",className:`${E.absoluteButton} left-[20px]`,children:c.jsx(Vg,{})}),c.jsx(ee,{onClick:()=>g("next"),variant:"circle",size:"large",className:`${E.absoluteButton} right-[20px]`,children:c.jsx(KE,{})})]}),t&&l==="Lyric"&&c.jsx("div",{className:"absolute inset-0 z-20  ",children:I})]}),t&&l==="Lyric"&&c.jsxs("p",{className:E.songNameSinger,children:[o.name," - ",c.jsx("span",{className:"opacity-30",children:o.singer})]})]})]})}const nF=["top","right","bottom","left"],ew=["start","end"],tw=nF.reduce((t,e)=>t.concat(e,e+"-"+ew[0],e+"-"+ew[1]),[]),rd=Math.min,zi=Math.max,id=Math.round,Au=Math.floor,pi=t=>({x:t,y:t}),rF={left:"right",right:"left",bottom:"top",top:"bottom"},iF={start:"end",end:"start"};function nw(t,e,n){return zi(t,rd(e,n))}function zl(t,e){return typeof t=="function"?t(e):t}function Sr(t){return t.split("-")[0]}function hr(t){return t.split("-")[1]}function IA(t){return t==="x"?"y":"x"}function RA(t){return t==="y"?"height":"width"}function Mh(t){return["top","bottom"].includes(Sr(t))?"y":"x"}function AA(t){return IA(Mh(t))}function CA(t,e,n){n===void 0&&(n=!1);const r=hr(t),i=AA(t),s=RA(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=od(o)),[o,od(o)]}function sF(t){const e=od(t);return[sd(t),e,sd(e)]}function sd(t){return t.replace(/start|end/g,e=>iF[e])}function oF(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function aF(t,e,n,r){const i=hr(t);let s=oF(Sr(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(sd)))),s}function od(t){return t.replace(/left|right|bottom|top/g,e=>rF[e])}function lF(t){return{top:0,right:0,bottom:0,left:0,...t}}function uF(t){return typeof t!="number"?lF(t):{top:t,right:t,bottom:t,left:t}}function ad(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function rw(t,e,n){let{reference:r,floating:i}=t;const s=Mh(e),o=AA(e),a=RA(o),l=Sr(e),u=s==="y",d=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-i.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-i.width,y:f};break;default:m={x:r.x,y:r.y}}switch(hr(e)){case"start":m[o]-=p*(n&&u?-1:1);break;case"end":m[o]+=p*(n&&u?-1:1);break}return m}const cF=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:f}=rw(u,r,l),p=r,m={},_=0;for(let w=0;w<a.length;w++){const{name:x,fn:y}=a[w],{x:g,y:v,data:E,reset:S}=await y({x:d,y:f,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:u,platform:o,elements:{reference:t,floating:e}});if(d=g??d,f=v??f,m={...m,[x]:{...m[x],...E}},S&&_<=50){_++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):S.rects),{x:d,y:f}=rw(u,p,l)),w=-1;continue}}return{x:d,y:f,placement:p,strategy:i,middlewareData:m}};async function C0(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=zl(e,t),_=uF(m),x=a[p?f==="floating"?"reference":"floating":f],y=ad(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(x)))==null||n?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),g=f==="floating"?{...o.floating,x:r,y:i}:o.reference,v=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(v))?await(s.getScale==null?void 0:s.getScale(v))||{x:1,y:1}:{x:1,y:1},S=ad(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:g,offsetParent:v,strategy:l}):g);return{top:(y.top-S.top+_.top)/E.y,bottom:(S.bottom-y.bottom+_.bottom)/E.y,left:(y.left-S.left+_.left)/E.x,right:(S.right-y.right+_.right)/E.x}}function dF(t,e,n){return(t?[...n.filter(i=>hr(i)===t),...n.filter(i=>hr(i)!==t)]:n.filter(i=>Sr(i)===i)).filter(i=>t?hr(i)===t||(e?sd(i)!==i:!1):!0)}const hF=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,r,i;const{rects:s,middlewareData:o,placement:a,platform:l,elements:u}=e,{crossAxis:d=!1,alignment:f,allowedPlacements:p=tw,autoAlignment:m=!0,..._}=zl(t,e),w=f!==void 0||p===tw?dF(f||null,m,p):p,x=await C0(e,_),y=((n=o.autoPlacement)==null?void 0:n.index)||0,g=w[y];if(g==null)return{};const v=CA(g,s,await(l.isRTL==null?void 0:l.isRTL(u.floating)));if(a!==g)return{reset:{placement:w[0]}};const E=[x[Sr(g)],x[v[0]],x[v[1]]],S=[...((r=o.autoPlacement)==null?void 0:r.overflows)||[],{placement:g,overflows:E}],I=w[y+1];if(I)return{data:{index:y+1,overflows:S},reset:{placement:I}};const T=S.map(A=>{const k=hr(A.placement);return[A.placement,k&&d?A.overflows.slice(0,2).reduce((z,L)=>z+L,0):A.overflows[0],A.overflows]}).sort((A,k)=>A[1]-k[1]),C=((i=T.filter(A=>A[2].slice(0,hr(A[0])?2:3).every(k=>k<=0))[0])==null?void 0:i[0])||T[0][0];return C!==a?{data:{index:y+1,overflows:S},reset:{placement:C}}:{}}}},k0=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:r,middlewareData:i,rects:s,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:_=!0,...w}=zl(t,e),x=Sr(r),y=Sr(o)===o,g=await(a.isRTL==null?void 0:a.isRTL(l.floating)),v=f||(y||!_?[od(o)]:sF(o));!f&&m!=="none"&&v.push(...aF(o,_,m,g));const E=[o,...v],S=await C0(e,w),I=[];let T=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&I.push(S[x]),d){const k=CA(r,s,g);I.push(S[k[0]],S[k[1]])}if(T=[...T,{placement:r,overflows:I}],!I.every(k=>k<=0)){var R,C;const k=(((R=i.flip)==null?void 0:R.index)||0)+1,z=E[k];if(z)return{data:{index:k,overflows:T},reset:{placement:z}};let L=(C=T.filter(F=>F.overflows[0]<=0).sort((F,ie)=>F.overflows[1]-ie.overflows[1])[0])==null?void 0:C.placement;if(!L)switch(p){case"bestFit":{var A;const F=(A=T.map(ie=>[ie.placement,ie.overflows.filter(K=>K>0).reduce((K,ce)=>K+ce,0)]).sort((ie,K)=>ie[1]-K[1])[0])==null?void 0:A[0];F&&(L=F);break}case"initialPlacement":L=o;break}if(r!==L)return{reset:{placement:L}}}return{}}}};async function fF(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Sr(n),a=hr(n),l=Mh(n)==="y",u=["left","top"].includes(o)?-1:1,d=s&&l?-1:1,f=zl(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:_}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof _=="number"&&(m=a==="end"?_*-1:_),l?{x:m*d,y:p*u}:{x:p*u,y:m*d}}const $h=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,i=await fF(e,t);return{x:n+i.x,y:r+i.y,data:i}}}},P0=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:y,y:g}=x;return{x:y,y:g}}},...l}=zl(t,e),u={x:n,y:r},d=await C0(e,l),f=Mh(Sr(i)),p=IA(f);let m=u[p],_=u[f];if(s){const x=p==="y"?"top":"left",y=p==="y"?"bottom":"right",g=m+d[x],v=m-d[y];m=nw(g,m,v)}if(o){const x=f==="y"?"top":"left",y=f==="y"?"bottom":"right",g=_+d[x],v=_-d[y];_=nw(g,_,v)}const w=a.fn({...e,[p]:m,[f]:_});return{...w,data:{x:w.x-n,y:w.y-r}}}}};function mi(t){return kA(t)?(t.nodeName||"").toLowerCase():"#document"}function en(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ir(t){var e;return(e=(kA(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function kA(t){return t instanceof Node||t instanceof en(t).Node}function et(t){return t instanceof Element||t instanceof en(t).Element}function Vt(t){return t instanceof HTMLElement||t instanceof en(t).HTMLElement}function Dm(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof en(t).ShadowRoot}function Wl(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=sn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function pF(t){return["table","td","th"].includes(mi(t))}function N0(t){const e=b0(),n=sn(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function mF(t){let e=ss(t);for(;Vt(e)&&!Hl(e);){if(N0(e))return e;e=ss(e)}return null}function b0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Hl(t){return["html","body","#document"].includes(mi(t))}function sn(t){return en(t).getComputedStyle(t)}function Vh(t){return et(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ss(t){if(mi(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Dm(t)&&t.host||Ir(t);return Dm(e)?e.host:e}function PA(t){const e=ss(t);return Hl(e)?t.ownerDocument?t.ownerDocument.body:t.body:Vt(e)&&Wl(e)?e:PA(e)}function Wi(t,e){var n;e===void 0&&(e=[]);const r=PA(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=en(r);return i?e.concat(s,s.visualViewport||[],Wl(r)?r:[]):e.concat(r,Wi(r))}function NA(t){const e=sn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Vt(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=id(n)!==s||id(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function O0(t){return et(t)?t:t.contextElement}function Ys(t){const e=O0(t);if(!Vt(e))return pi(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=NA(e);let o=(s?id(n.width):n.width)/r,a=(s?id(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const gF=pi(0);function bA(t){const e=en(t);return!b0()||!e.visualViewport?gF:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function yF(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==en(t)?!1:e}function os(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=O0(t);let o=pi(1);e&&(r?et(r)&&(o=Ys(r)):o=Ys(t));const a=yF(s,n,r)?bA(s):pi(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,d=i.width/o.x,f=i.height/o.y;if(s){const p=en(s),m=r&&et(r)?en(r):r;let _=p.frameElement;for(;_&&r&&m!==p;){const w=Ys(_),x=_.getBoundingClientRect(),y=sn(_),g=x.left+(_.clientLeft+parseFloat(y.paddingLeft))*w.x,v=x.top+(_.clientTop+parseFloat(y.paddingTop))*w.y;l*=w.x,u*=w.y,d*=w.x,f*=w.y,l+=g,u+=v,_=en(_).frameElement}}return ad({width:d,height:f,x:l,y:u})}function vF(t){let{rect:e,offsetParent:n,strategy:r}=t;const i=Vt(n),s=Ir(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0},a=pi(1);const l=pi(0);if((i||!i&&r!=="fixed")&&((mi(n)!=="body"||Wl(s))&&(o=Vh(n)),Vt(n))){const u=os(n);a=Ys(n),l.x=u.x+n.clientLeft,l.y=u.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function _F(t){return Array.from(t.getClientRects())}function OA(t){return os(Ir(t)).left+Vh(t).scrollLeft}function wF(t){const e=Ir(t),n=Vh(t),r=t.ownerDocument.body,i=zi(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=zi(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+OA(t);const a=-n.scrollTop;return sn(r).direction==="rtl"&&(o+=zi(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function xF(t,e){const n=en(t),r=Ir(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=b0();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function EF(t,e){const n=os(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Vt(t)?Ys(t):pi(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function iw(t,e,n){let r;if(e==="viewport")r=xF(t,n);else if(e==="document")r=wF(Ir(t));else if(et(e))r=EF(e,n);else{const i=bA(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return ad(r)}function jA(t,e){const n=ss(t);return n===e||!et(n)||Hl(n)?!1:sn(n).position==="fixed"||jA(n,e)}function SF(t,e){const n=e.get(t);if(n)return n;let r=Wi(t).filter(a=>et(a)&&mi(a)!=="body"),i=null;const s=sn(t).position==="fixed";let o=s?ss(t):t;for(;et(o)&&!Hl(o);){const a=sn(o),l=N0(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Wl(o)&&!l&&jA(t,o))?r=r.filter(d=>d!==o):i=a,o=ss(o)}return e.set(t,r),r}function TF(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?SF(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,d)=>{const f=iw(e,d,i);return u.top=zi(f.top,u.top),u.right=rd(f.right,u.right),u.bottom=rd(f.bottom,u.bottom),u.left=zi(f.left,u.left),u},iw(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function IF(t){return NA(t)}function RF(t,e,n){const r=Vt(e),i=Ir(e),s=n==="fixed",o=os(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=pi(0);if(r||!r&&!s)if((mi(e)!=="body"||Wl(i))&&(a=Vh(e)),r){const u=os(e,!0,s,e);l.x=u.x+e.clientLeft,l.y=u.y+e.clientTop}else i&&(l.x=OA(i));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function sw(t,e){return!Vt(t)||sn(t).position==="fixed"?null:e?e(t):t.offsetParent}function LA(t,e){const n=en(t);if(!Vt(t))return n;let r=sw(t,e);for(;r&&pF(r)&&sn(r).position==="static";)r=sw(r,e);return r&&(mi(r)==="html"||mi(r)==="body"&&sn(r).position==="static"&&!N0(r))?n:r||mF(t)||n}const AF=async function(t){let{reference:e,floating:n,strategy:r}=t;const i=this.getOffsetParent||LA,s=this.getDimensions;return{reference:RF(e,await i(n),r),floating:{x:0,y:0,...await s(n)}}};function CF(t){return sn(t).direction==="rtl"}const kF={convertOffsetParentRelativeRectToViewportRelativeRect:vF,getDocumentElement:Ir,getClippingRect:TF,getOffsetParent:LA,getElementRects:AF,getClientRects:_F,getDimensions:IF,getScale:Ys,isElement:et,isRTL:CF};function PF(t,e){let n=null,r;const i=Ir(t);function s(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:d,width:f,height:p}=t.getBoundingClientRect();if(a||e(),!f||!p)return;const m=Au(d),_=Au(i.clientWidth-(u+f)),w=Au(i.clientHeight-(d+p)),x=Au(u),g={rootMargin:-m+"px "+-_+"px "+-w+"px "+-x+"px",threshold:zi(0,rd(1,l))||1};let v=!0;function E(S){const I=S[0].intersectionRatio;if(I!==l){if(!v)return o();I?o(!1,I):r=setTimeout(()=>{o(!1,1e-7)},100)}v=!1}try{n=new IntersectionObserver(E,{...g,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,g)}n.observe(t)}return o(!0),s}function ql(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=O0(t),d=i||s?[...u?Wi(u):[],...Wi(e)]:[];d.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=u&&a?PF(u,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(y=>{let[g]=y;g&&g.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{m&&m.observe(e)})),n()}),u&&!l&&m.observe(u),m.observe(e));let _,w=l?os(t):null;l&&x();function x(){const y=os(t);w&&(y.x!==w.x||y.y!==w.y||y.width!==w.width||y.height!==w.height)&&n(),w=y,_=requestAnimationFrame(x)}return n(),()=>{d.forEach(y=>{i&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),f&&f(),m&&m.disconnect(),m=null,l&&cancelAnimationFrame(_)}}const NF=(t,e,n)=>{const r=new Map,i={platform:kF,...n},s={...i.platform,_c:r};return cF(t,e,{...i,platform:s})};var Yu=typeof document<"u"?h.useLayoutEffect:h.useEffect;function ld(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!ld(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!ld(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function DA(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function ow(t,e){const n=DA(t);return Math.round(e*n)/n}function aw(t){const e=h.useRef(t);return Yu(()=>{e.current=t}),e}function bF(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[d,f]=h.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=h.useState(r);ld(p,r)||m(r);const[_,w]=h.useState(null),[x,y]=h.useState(null),g=h.useCallback(K=>{K!=I.current&&(I.current=K,w(K))},[w]),v=h.useCallback(K=>{K!==T.current&&(T.current=K,y(K))},[y]),E=s||_,S=o||x,I=h.useRef(null),T=h.useRef(null),R=h.useRef(d),C=aw(l),A=aw(i),k=h.useCallback(()=>{if(!I.current||!T.current)return;const K={placement:e,strategy:n,middleware:p};A.current&&(K.platform=A.current),NF(I.current,T.current,K).then(ce=>{const b={...ce,isPositioned:!0};z.current&&!ld(R.current,b)&&(R.current=b,ml.flushSync(()=>{f(b)}))})},[p,e,n,A]);Yu(()=>{u===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,f(K=>({...K,isPositioned:!1})))},[u]);const z=h.useRef(!1);Yu(()=>(z.current=!0,()=>{z.current=!1}),[]),Yu(()=>{if(E&&(I.current=E),S&&(T.current=S),E&&S){if(C.current)return C.current(E,S,k);k()}},[E,S,k,C]);const L=h.useMemo(()=>({reference:I,floating:T,setReference:g,setFloating:v}),[g,v]),F=h.useMemo(()=>({reference:E,floating:S}),[E,S]),ie=h.useMemo(()=>{const K={position:n,left:0,top:0};if(!F.floating)return K;const ce=ow(F.floating,d.x),b=ow(F.floating,d.y);return a?{...K,transform:"translate("+ce+"px, "+b+"px)",...DA(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ce,top:b}},[n,a,F.floating,d.x,d.y]);return h.useMemo(()=>({...d,update:k,refs:L,elements:F,floatingStyles:ie}),[d,k,L,F,ie])}function _s(t){let e=t.activeElement;for(;((n=e)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;e=e.shadowRoot.activeElement}return e}function Qt(t,e){if(!t||!e)return!1;const n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Dm(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function OF(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function jF(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function LF(t){if(t.mozInputSource===0&&t.isTrusted)return!0;const e=/Android/i;return(e.test(OF())||e.test(jF()))&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function DF(t){return t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType!=="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0}function MF(){return/apple/i.test(navigator.vendor)}function lw(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function $F(t){return"nativeEvent"in t}function VF(t){return t.matches("html,body")}function Vn(t){return(t==null?void 0:t.ownerDocument)||document}function Wf(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function MA(t){return"composedPath"in t?t.composedPath()[0]:t.target}const FF="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function $A(t){return Vt(t)&&t.matches(FF)}function Hf(t){t.preventDefault(),t.stopPropagation()}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var UF=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Mm=UF.join(","),VA=typeof Element>"u",ul=VA?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ud=!VA&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},cd=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",o=s||n&&e&&t(e.parentNode);return o},BF=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},zF=function(e,n,r){if(cd(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(Mm));return n&&ul.call(e,Mm)&&i.unshift(e),i=i.filter(r),i},WF=function t(e,n,r){for(var i=[],s=Array.from(e);s.length;){var o=s.shift();if(!cd(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,u=t(l,!0,r);r.flatten?i.push.apply(i,u):i.push({scopeParent:o,candidates:u})}else{var d=ul.call(o,Mm);d&&r.filter(o)&&(n||!e.includes(o))&&i.push(o);var f=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),p=!cd(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(f&&p){var m=t(f===!0?o.children:f.children,!0,r);r.flatten?i.push.apply(i,m):i.push({scopeParent:o,candidates:m})}else s.unshift.apply(s,o.children)}}return i},FA=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},UA=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||BF(e))&&!FA(e)?0:e.tabIndex},HF=function(e,n){var r=UA(e);return r<0&&n&&!FA(e)?0:r},qF=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},BA=function(e){return e.tagName==="INPUT"},GF=function(e){return BA(e)&&e.type==="hidden"},KF=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},QF=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},YF=function(e){if(!e.name)return!0;var n=e.form||ud(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=QF(i,e.form);return!s||s===e},XF=function(e){return BA(e)&&e.type==="radio"},JF=function(e){return XF(e)&&!YF(e)},ZF=function(e){var n,r=e&&ud(e),i=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var o,a,l;for(s=!!((o=i)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(i)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&i;){var u,d,f;r=ud(i),i=(u=r)===null||u===void 0?void 0:u.host,s=!!((d=i)!==null&&d!==void 0&&(f=d.ownerDocument)!==null&&f!==void 0&&f.contains(i))}}return s},uw=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},e6=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=ul.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(ul.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=e;e;){var l=e.parentElement,u=ud(e);if(l&&!l.shadowRoot&&i(l)===!0)return uw(e);e.assignedSlot?e=e.assignedSlot:!l&&u!==e.ownerDocument?e=u.host:e=l}e=a}if(ZF(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return uw(e);return!1},t6=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return ul.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},n6=function(e,n){return!(n.disabled||cd(n)||GF(n)||e6(n,e)||KF(n)||t6(n))},cw=function(e,n){return!(JF(n)||UA(n)<0||!n6(e,n))},r6=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},i6=function t(e){var n=[],r=[];return e.forEach(function(i,s){var o=!!i.scopeParent,a=o?i.scopeParent:i,l=HF(a,o),u=o?t(i.candidates):a;l===0?o?n.push.apply(n,u):n.push(a):r.push({documentOrder:s,tabIndex:l,item:i,isScope:o,content:u})}),r.sort(qF).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(n)},zA=function(e,n){n=n||{};var r;return n.getShadowRoot?r=WF([e],n.includeContainer,{filter:cw.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:r6}):r=zF(e,n.includeContainer,cw.bind(null,n)),i6(r)};function dd(){return dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dd.apply(this,arguments)}var Br=typeof document<"u"?h.useLayoutEffect:h.useEffect;let qf=!1,s6=0;const dw=()=>"floating-ui-"+s6++;function o6(){const[t,e]=h.useState(()=>qf?dw():void 0);return Br(()=>{t==null&&e(dw())},[]),h.useEffect(()=>{qf||(qf=!0)},[]),t}const a6=zm["useId".toString()],WA=a6||o6;function l6(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(i=>i!==n))||[])}}}const u6=h.createContext(null),c6=h.createContext(null),d6=()=>{var t;return((t=h.useContext(u6))==null?void 0:t.id)||null},j0=()=>h.useContext(c6);function hd(t){return"data-floating-ui-"+t}function Gf(t){const e=h.useRef(t);return Br(()=>{e.current=t}),e}let hw=0;function Ii(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=e;r&&cancelAnimationFrame(hw);const s=()=>t==null?void 0:t.focus({preventScroll:n});i?s():hw=requestAnimationFrame(s)}function h6(t,e){var n;let r=[],i=(n=t.find(s=>s.id===e))==null?void 0:n.parentId;for(;i;){const s=t.find(o=>o.id===i);i=s==null?void 0:s.parentId,s&&(r=r.concat(s))}return r}function wa(t,e){let n=t.filter(i=>{var s;return i.parentId===e&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=t.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}let gs=new WeakMap,Cu=new WeakSet,ku={},Kf=0;const f6=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,HA=t=>t&&(t.host||HA(t.parentNode)),p6=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=HA(n);return t.contains(r)?r:null}).filter(n=>n!=null);function m6(t,e,n,r){const i="data-floating-ui-inert",s=r?"inert":n?"aria-hidden":null,o=p6(e,t),a=new Set,l=new Set(o),u=[];ku[i]||(ku[i]=new WeakMap);const d=ku[i];o.forEach(f),p(e),a.clear();function f(m){!m||a.has(m)||(a.add(m),m.parentNode&&f(m.parentNode))}function p(m){!m||l.has(m)||Array.prototype.forEach.call(m.children,_=>{if(a.has(_))p(_);else{const w=s?_.getAttribute(s):null,x=w!==null&&w!=="false",y=(gs.get(_)||0)+1,g=(d.get(_)||0)+1;gs.set(_,y),d.set(_,g),u.push(_),y===1&&x&&Cu.add(_),g===1&&_.setAttribute(i,""),!x&&s&&_.setAttribute(s,"true")}})}return Kf++,()=>{u.forEach(m=>{const _=(gs.get(m)||0)-1,w=(d.get(m)||0)-1;gs.set(m,_),d.set(m,w),_||(!Cu.has(m)&&s&&m.removeAttribute(s),Cu.delete(m)),w||m.removeAttribute(i)}),Kf--,Kf||(gs=new WeakMap,gs=new WeakMap,Cu=new WeakSet,ku={})}}function fw(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=Vn(t[0]).body;return m6(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const qA=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function GA(t,e){const n=zA(t,qA());e==="prev"&&n.reverse();const r=n.indexOf(_s(Vn(t)));return n.slice(r+1)[0]}function g6(){return GA(document.body,"next")}function y6(){return GA(document.body,"prev")}function pw(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!Qt(n,r)}const KA={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let v6;function mw(t){t.key==="Tab"&&(t.target,clearTimeout(v6))}const gw=h.forwardRef(function(e,n){const[r,i]=h.useState();Br(()=>(MF()&&i("button"),document.addEventListener("keydown",mw),()=>{document.removeEventListener("keydown",mw)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[hd("focus-guard")]:"",style:KA};return h.createElement("span",dd({},e,s))}),_6=h.createContext(null),w6=()=>h.useContext(_6),x6=h.forwardRef(function(e,n){return h.createElement("button",dd({},e,{type:"button",ref:n,tabIndex:-1,style:KA}))});function Gl(t){const{context:e,children:n,disabled:r=!1,order:i=["content"],guards:s=!0,initialFocus:o=0,returnFocus:a=!0,modal:l=!0,visuallyHiddenDismiss:u=!1,closeOnFocusOut:d=!0}=t,{open:f,refs:p,nodeId:m,onOpenChange:_,events:w,dataRef:x,elements:{domReference:y,floating:g}}=e,v=f6()?s:!0,E=Gf(i),S=Gf(o),I=Gf(a),T=j0(),R=w6(),C=typeof o=="number"&&o<0,A=h.useRef(null),k=h.useRef(null),z=h.useRef(!1),L=h.useRef(null),F=h.useRef(!1),ie=R!=null,K=y&&y.getAttribute("role")==="combobox"&&$A(y),ce=h.useCallback(function(N){return N===void 0&&(N=g),N?zA(N,qA()):[]},[g]),b=h.useCallback(N=>{const D=ce(N);return E.current.map(Q=>y&&Q==="reference"?y:g&&Q==="floating"?g:D).filter(Boolean).flat()},[y,g,E,ce]);h.useEffect(()=>{if(r||!l)return;function N(Q){if(Q.key==="Tab"){Qt(g,_s(Vn(g)))&&ce().length===0&&!K&&Hf(Q);const Z=b(),X=MA(Q);E.current[0]==="reference"&&X===y&&(Hf(Q),Q.shiftKey?Ii(Z[Z.length-1]):Ii(Z[1])),E.current[1]==="floating"&&X===g&&Q.shiftKey&&(Hf(Q),Ii(Z[0]))}}const D=Vn(g);return D.addEventListener("keydown",N),()=>{D.removeEventListener("keydown",N)}},[r,y,g,l,E,p,K,ce,b]),h.useEffect(()=>{if(r||!d)return;function N(){F.current=!0,setTimeout(()=>{F.current=!1})}function D(Q){const Z=Q.relatedTarget;queueMicrotask(()=>{const X=!(Qt(y,Z)||Qt(g,Z)||Qt(Z,g)||Qt(R==null?void 0:R.portalNode,Z)||Z!=null&&Z.hasAttribute(hd("focus-guard"))||T&&(wa(T.nodesRef.current,m).find(M=>{var B,he;return Qt((B=M.context)==null?void 0:B.elements.floating,Z)||Qt((he=M.context)==null?void 0:he.elements.domReference,Z)})||h6(T.nodesRef.current,m).find(M=>{var B,he;return((B=M.context)==null?void 0:B.elements.floating)===Z||((he=M.context)==null?void 0:he.elements.domReference)===Z})));Z&&X&&!F.current&&Z!==L.current&&(z.current=!0,_(!1,Q))})}if(g&&Vt(y))return y.addEventListener("focusout",D),y.addEventListener("pointerdown",N),!l&&g.addEventListener("focusout",D),()=>{y.removeEventListener("focusout",D),y.removeEventListener("pointerdown",N),!l&&g.removeEventListener("focusout",D)}},[r,y,g,l,m,T,R,_,d]),h.useEffect(()=>{var N;if(r)return;const D=Array.from((R==null||(N=R.portalNode)==null?void 0:N.querySelectorAll("["+hd("portal")+"]"))||[]);if(g){const Q=[g,...D,A.current,k.current,E.current.includes("reference")||K?y:null].filter(X=>X!=null),Z=l?fw(Q,v,!v):fw(Q);return()=>{Z()}}},[r,y,g,l,E,R,K,v]),Br(()=>{if(r||!g)return;const N=Vn(g),D=_s(N);queueMicrotask(()=>{const Q=b(g),Z=S.current,X=(typeof Z=="number"?Q[Z]:Z.current)||g,M=Qt(g,D);!C&&!M&&f&&Ii(X,{preventScroll:X===g})})},[r,f,g,C,b,S]),Br(()=>{if(r||!g)return;let N=!1;const D=Vn(g),Q=_s(D),Z=x.current;L.current=Q;function X(M){if(M.type==="escapeKey"&&p.domReference.current&&(L.current=p.domReference.current),["referencePress","escapeKey"].includes(M.type))return;const B=M.data.returnFocus;typeof B=="object"?(z.current=!1,N=B.preventScroll):z.current=!B}return w.on("dismiss",X),()=>{w.off("dismiss",X);const M=_s(D);(Qt(g,M)||T&&wa(T.nodesRef.current,m).some(he=>{var Ae;return Qt((Ae=he.context)==null?void 0:Ae.elements.floating,M)})||Z.openEvent&&["click","mousedown"].includes(Z.openEvent.type))&&p.domReference.current&&(L.current=p.domReference.current),I.current&&Vt(L.current)&&!z.current&&Ii(L.current,{cancelPrevious:!1,preventScroll:N})}},[r,g,I,x,p,w,T,m]),Br(()=>{if(!(r||!R))return R.setFocusManagerState({modal:l,closeOnFocusOut:d,open:f,onOpenChange:_,refs:p}),()=>{R.setFocusManagerState(null)}},[r,R,l,f,_,p,d]),Br(()=>{if(!r&&g&&typeof MutationObserver=="function"){const N=()=>{const Q=g.getAttribute("tabindex");E.current.includes("floating")||_s(Vn(g))!==p.domReference.current&&ce().length===0?Q!=="0"&&g.setAttribute("tabindex","0"):Q!=="-1"&&g.setAttribute("tabindex","-1")};N();const D=new MutationObserver(N);return D.observe(g,{childList:!0,subtree:!0,attributes:!0}),()=>{D.disconnect()}}},[r,g,p,E,ce]);function $(N){return r||!u||!l?null:h.createElement(x6,{ref:N==="start"?A:k,onClick:D=>_(!1,D.nativeEvent)},typeof u=="string"?u:"Dismiss")}const U=!r&&v&&!K&&(ie||l);return h.createElement(h.Fragment,null,U&&h.createElement(gw,{"data-type":"inside",ref:R==null?void 0:R.beforeInsideRef,onFocus:N=>{if(l){const Q=b();Ii(i[0]==="reference"?Q[0]:Q[Q.length-1])}else if(R!=null&&R.preserveTabOrder&&R.portalNode)if(z.current=!1,pw(N,R.portalNode)){const Q=g6()||y;Q==null||Q.focus()}else{var D;(D=R.beforeOutsideRef.current)==null||D.focus()}}}),!K&&$("start"),n,$("end"),U&&h.createElement(gw,{"data-type":"inside",ref:R==null?void 0:R.afterInsideRef,onFocus:N=>{if(l)Ii(b()[0]);else if(R!=null&&R.preserveTabOrder&&R.portalNode)if(d&&(z.current=!0),pw(N,R.portalNode)){const Q=y6()||y;Q==null||Q.focus()}else{var D;(D=R.afterOutsideRef.current)==null||D.focus()}}}))}function yw(t){return Vt(t.target)&&t.target.tagName==="BUTTON"}function vw(t){return $A(t)}function Kl(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:s}}=t,{enabled:o=!0,event:a="click",toggle:l=!0,ignoreMouse:u=!1,keyboardHandlers:d=!0}=e,f=h.useRef(),p=h.useRef(!1);return h.useMemo(()=>o?{reference:{onPointerDown(m){f.current=m.pointerType},onMouseDown(m){m.button===0&&(lw(f.current,!0)&&u||a!=="click"&&(n&&l&&(!i.current.openEvent||i.current.openEvent.type==="mousedown")?r(!1,m.nativeEvent):(m.preventDefault(),r(!0,m.nativeEvent))))},onClick(m){if(a==="mousedown"&&f.current){f.current=void 0;return}lw(f.current,!0)&&u||(n&&l&&(!i.current.openEvent||i.current.openEvent.type==="click")?r(!1,m.nativeEvent):r(!0,m.nativeEvent))},onKeyDown(m){f.current=void 0,!(m.defaultPrevented||!d||yw(m))&&(m.key===" "&&!vw(s)&&(m.preventDefault(),p.current=!0),m.key==="Enter"&&r(!(n&&l),m.nativeEvent))},onKeyUp(m){m.defaultPrevented||!d||yw(m)||vw(s)||m.key===" "&&p.current&&(p.current=!1,r(!(n&&l),m.nativeEvent))}}}:{},[o,i,a,u,d,s,l,n,r])}const E6=zm["useInsertionEffect".toString()],S6=E6||(t=>t());function Xu(t){const e=h.useRef(()=>{});return S6(()=>{e.current=t}),h.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}const T6={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},I6={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},R6=t=>{var e,n;return{escapeKeyBubbles:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePressBubbles:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function Ql(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:i,nodeId:s,elements:{reference:o,domReference:a,floating:l},dataRef:u}=t,{enabled:d=!0,escapeKey:f=!0,outsidePress:p=!0,outsidePressEvent:m="pointerdown",referencePress:_=!1,referencePressEvent:w="pointerdown",ancestorScroll:x=!1,bubbles:y}=e,g=j0(),v=d6()!=null,E=Xu(typeof p=="function"?p:()=>!1),S=typeof p=="function"?E:p,I=h.useRef(!1),{escapeKeyBubbles:T,outsidePressBubbles:R}=R6(y),C=Xu(k=>{if(!n||!d||!f||k.key!=="Escape")return;const z=g?wa(g.nodesRef.current,s):[];if(!T&&(k.stopPropagation(),z.length>0)){let L=!0;if(z.forEach(F=>{var ie;if((ie=F.context)!=null&&ie.open&&!F.context.dataRef.current.__escapeKeyBubbles){L=!1;return}}),!L)return}i.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1,$F(k)?k.nativeEvent:k)}),A=Xu(k=>{const z=I.current;if(I.current=!1,z||typeof S=="function"&&!S(k))return;const L=MA(k),F="["+hd("inert")+"]",ie=Vn(l).querySelectorAll(F);let K=et(L)?L:null;for(;K&&!Hl(K);){const $=ss(K);if($===Vn(l).body||!et($))break;K=$}if(ie.length&&et(L)&&!VF(L)&&!Qt(L,l)&&Array.from(ie).every($=>!Qt(K,$)))return;if(Vt(L)&&l){const $=L.clientWidth>0&&L.scrollWidth>L.clientWidth,U=L.clientHeight>0&&L.scrollHeight>L.clientHeight;let N=U&&k.offsetX>L.clientWidth;if(U&&sn(L).direction==="rtl"&&(N=k.offsetX<=L.offsetWidth-L.clientWidth),N||$&&k.offsetY>L.clientHeight)return}const ce=g&&wa(g.nodesRef.current,s).some($=>{var U;return Wf(k,(U=$.context)==null?void 0:U.elements.floating)});if(Wf(k,l)||Wf(k,a)||ce)return;const b=g?wa(g.nodesRef.current,s):[];if(b.length>0){let $=!0;if(b.forEach(U=>{var N;if((N=U.context)!=null&&N.open&&!U.context.dataRef.current.__outsidePressBubbles){$=!1;return}}),!$)return}i.emit("dismiss",{type:"outsidePress",data:{returnFocus:v?{preventScroll:!0}:LF(k)||DF(k)}}),r(!1,k)});return h.useEffect(()=>{if(!n||!d)return;u.current.__escapeKeyBubbles=T,u.current.__outsidePressBubbles=R;function k(F){r(!1,F)}const z=Vn(l);f&&z.addEventListener("keydown",C),S&&z.addEventListener(m,A);let L=[];return x&&(et(a)&&(L=Wi(a)),et(l)&&(L=L.concat(Wi(l))),!et(o)&&o&&o.contextElement&&(L=L.concat(Wi(o.contextElement)))),L=L.filter(F=>{var ie;return F!==((ie=z.defaultView)==null?void 0:ie.visualViewport)}),L.forEach(F=>{F.addEventListener("scroll",k,{passive:!0})}),()=>{f&&z.removeEventListener("keydown",C),S&&z.removeEventListener(m,A),L.forEach(F=>{F.removeEventListener("scroll",k)})}},[u,l,a,o,f,S,m,n,r,x,d,T,R,C,A]),h.useEffect(()=>{I.current=!1},[S,m]),h.useMemo(()=>d?{reference:{onKeyDown:C,[T6[w]]:k=>{_&&(i.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1,k.nativeEvent))}},floating:{onKeyDown:C,[I6[m]]:()=>{I.current=!0}}}:{},[d,i,_,m,w,r,C])}function Yl(t){var e;t===void 0&&(t={});const{open:n=!1,onOpenChange:r,nodeId:i}=t,[s,o]=h.useState(null),a=((e=t.elements)==null?void 0:e.reference)||s,l=bF(t),u=j0(),d=Xu((E,S)=>{E&&(p.current.openEvent=S),r==null||r(E,S)}),f=h.useRef(null),p=h.useRef({}),m=h.useState(()=>l6())[0],_=WA(),w=h.useCallback(E=>{const S=et(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;l.refs.setReference(S)},[l.refs]),x=h.useCallback(E=>{(et(E)||E===null)&&(f.current=E,o(E)),(et(l.refs.reference.current)||l.refs.reference.current===null||E!==null&&!et(E))&&l.refs.setReference(E)},[l.refs]),y=h.useMemo(()=>({...l.refs,setReference:x,setPositionReference:w,domReference:f}),[l.refs,x,w]),g=h.useMemo(()=>({...l.elements,domReference:a}),[l.elements,a]),v=h.useMemo(()=>({...l,refs:y,elements:g,dataRef:p,nodeId:i,floatingId:_,events:m,open:n,onOpenChange:d}),[l,i,_,m,n,d,y,g]);return Br(()=>{const E=u==null?void 0:u.nodesRef.current.find(S=>S.id===i);E&&(E.context=v)}),h.useMemo(()=>({...l,context:v,refs:y,elements:g}),[l,y,g,v])}function Qf(t,e,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...t,...e.map(i=>i?i[n]:null).concat(t).reduce((i,s)=>(s&&Object.entries(s).forEach(o=>{let[a,l]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof l=="function"){var u;(u=r.get(a))==null||u.push(l),i[a]=function(){for(var d,f=arguments.length,p=new Array(f),m=0;m<f;m++)p[m]=arguments[m];return(d=r.get(a))==null?void 0:d.map(_=>_(...p)).find(_=>_!==void 0)}}}else i[a]=l}),i),{})}}function Xl(t){t===void 0&&(t=[]);const e=t,n=h.useCallback(s=>Qf(s,t,"reference"),e),r=h.useCallback(s=>Qf(s,t,"floating"),e),i=h.useCallback(s=>Qf(s,t,"item"),t.map(s=>s==null?void 0:s.item));return h.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}function L0(t,e){e===void 0&&(e={});const{open:n,floatingId:r}=t,{enabled:i=!0,role:s="dialog"}=e,o=WA();return h.useMemo(()=>{const a={id:r,role:s};return i?s==="tooltip"?{reference:{"aria-describedby":n?r:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":s==="alertdialog"?"dialog":s,"aria-controls":n?r:void 0,...s==="listbox"&&{role:"combobox"},...s==="menu"&&{id:o}},floating:{...a,...s==="menu"&&{"aria-labelledby":o}}}:{}},[i,s,n,r,o])}function A6({audioEle:t,theme:e,song:n,lyric:r}){const[i,s]=h.useState(!1),[o,a]=h.useState(!1),[l,u]=h.useState(r?r.base:""),[d,f]=h.useState([]),[p,m]=h.useState(r?r.real_time:[]),[_,w]=h.useState(!1),[x,y]=h.useState(1),[g,v]=h.useState(!1),[E,S]=h.useState(!1),[I,T]=h.useState(p?p.length:0),R=h.useRef(!0),C=h.useRef(null),A=h.useRef(0),k=h.useRef(0),{refs:z,floatingStyles:L,context:F}=Yl({open:_,onOpenChange:w,placement:"bottom-start",middleware:[$h(10)],whileElementsMounted:ql}),ie=Kl(F),K=Ql(F),{getReferenceProps:ce,getFloatingProps:b}=Xl([ie,K]),$=()=>{t&&(t.play(),s(!0),a(!0))},U=()=>{t&&(t.pause(),s(!1))},N=fe=>{t&&(t.playbackRate=fe,y(fe))},D=()=>{if(!C.current)return;const fe=C.current;u(fe.value),S(!1)},Q=()=>{if(d.length&&!(I>=d.length)&&k.current!=+t.currentTime.toFixed(1)&&t){A.current=+t.currentTime.toFixed(1);const fe=d[I],te={start:k.current,text:fe,end:A.current};k.current=A.current,m([...p,te]),T(I+1)}},Z=()=>{if(!(I<=0)&&t){k.current=p[I-1].start,A.current=0;const fe=p.slice(0,I-1);m(fe),T(I-1)}},X=()=>{navigator.clipboard.writeText(JSON.stringify(p))},M=async()=>{try{v(!0),console.log("lyric result",p),await Ct({collection:"lyrics",data:{real_time:p,base:l},id:n.id}),await Ct({collection:"songs",data:{lyric_id:n.id},id:n.id}),v(!1)}catch(fe){console.log({message:fe})}},B={section:`bg-${e.alpha} py-[10px] px-[20px] rounded-[12px] mb-[30px] w-full`,row:"flex no-scrollbar justify-between gap-[20px]",col:"flex-grow flex flex-col gap-[20px]",formGroup:"flex flex-col gap-[5px] flex-grow",label:"text-md font-[500]",button:`${e.content_bg} rounded-full text-white text-[14px] px-[10px]`,disable:" opacity-60 pointer-events-none ",icon:"h-[20px] w-[20px]",lyricBox:"list-none h-full max-[549px]:w-[100%]"},he=c.jsxs("div",{className:"flex flex-wrap gap-[10px] mb-[20px]",children:[c.jsx("button",{onClick:()=>S(!0),className:B.button,children:l?"Change lyric":"Add lyric"}),c.jsxs("button",{ref:z.setReference,...ce(),className:B.button+"  inline-flex items-center hover:brightness-90 px-[20px] py-[5px] rounded-full text-white text-[14px]",children:[c.jsx(ib,{className:"h-[20px] w-[20px] mr-[5px]"}),"Speed"]}),i?c.jsx(ee,{variant:"primary",onClick:U,className:B.button+(o?"":B.disable),children:"Pause"}):c.jsx(ee,{variant:"primary",onClick:$,className:B.button+(i?B.disable:""),children:"Play"}),c.jsx(ee,{variant:"primary",onClick:Q,className:B.button+(!o||!d.length?B.disable:""),children:"Add"}),c.jsx(ee,{variant:"primary",onClick:Z,className:B.button+(!o||!d.length?B.disable:""),children:"Remove"}),c.jsx(ee,{onClick:X,variant:"primary",className:B.button+(o?"":B.disable),children:"Copy"})]});h.useEffect(()=>{if(l){const fe=l.split(/\r?\n/).filter(te=>te);f(fe)}d.length&&R.current&&(R.current=!1),console.log("check firstTimeRender",R.current)},[l]),h.useEffect(()=>{if(p.length){const fe=p[p.length-1].end;t.currentTime=fe,k.current=fe}},[]);const Ae={listItem:`w-full cursor-pointer py-[2px] ${e.content_hover_text}`};return c.jsxs(c.Fragment,{children:[he,c.jsxs("div",{className:B.row+" h-[60vh] min-h-[200px] overflow-auto "+B.section,children:[c.jsx("ul",{className:B.lyricBox+"min-w-[50%] max-w-[50%] pr-[20px]",children:d.length?c.jsx(c.Fragment,{children:d.map((fe,te)=>c.jsx(tS,{firstTimeRender:R.current,className:"mb-[19px]",inUpload:!0,active:te===I,done:te!=I,children:fe},te))}):c.jsx("h1",{children:"Base lyric..."})}),c.jsx("ul",{className:B.lyricBox+" border-none w-[50%]",children:!!(p!=null&&p.length)&&p.map((fe,te)=>c.jsxs("li",{className:"mb-[5px] pt-[10px]",children:[c.jsx("p",{className:"text-[16px] font-bold",children:fe.text}),c.jsxs("div",{className:"flex gap-[10px]",children:[c.jsxs("button",{className:` ${e.content_hover_text}`,onClick:()=>t.currentTime=fe.start,children:[fe.start,"s"]}),c.jsx("span",{children:" - "}),c.jsxs("button",{className:` ${e.content_hover_text}`,onClick:()=>t.currentTime=fe.end,children:[fe.end,"s"]})]})]},te))})]}),c.jsx(ee,{isLoading:g,className:`${e.content_bg} text-[14px] rounded-full mt-[20px]`,variant:"primary",onClick:()=>M(),children:"Save"}),_&&c.jsx(Gl,{context:F,modal:!1,children:c.jsx("div",{className:"z-[99]",ref:z.setFloating,style:L,...b(),children:c.jsx(Cn,{theme:e,children:c.jsxs("ul",{className:"w-[100px] text-center text-[14px]",children:[c.jsx("li",{onClick:()=>N(1),className:`
                  ${x===1&&e.content_text} 
                  ${Ae.listItem}`,children:"1x"}),c.jsx("li",{onClick:()=>N(1.2),className:`
                  ${x===1.2&&e.content_text}
                  ${Ae.listItem}`,children:"1.2x"}),c.jsx("li",{onClick:()=>N(1.5),className:`
                  ${x===1.5&&e.content_text}
                  ${Ae.listItem}`,children:"1.5x"})]})})})}),E&&c.jsx(Si,{setOpenModal:S,children:c.jsxs("div",{className:`w-[700px] max-w-[90vw]  rounded-[8px] p-[20px] ${e.side_bar_bg}`,children:[c.jsx("textarea",{ref:C,value:l,onChange:fe=>u(fe.target.value),className:"w-full rounded-[4px] mb-[10px] min-h-[50vh] bg-transparent border text-[#333] p-[10px]"}),c.jsx(ee,{variant:"primary",onClick:()=>D(),className:B.button,children:"Save"})]})})]})}const QA=({audioEle:t,songLyric:e,className:n})=>{const{theme:r}=gt(),[i,s]=h.useState(0),o=h.useRef(!0),a=h.useRef(null),l=()=>{s(t.currentTime)};h.useEffect(()=>{o.current&&t&&(t.addEventListener("timeupdate",l),i&&o&&(o.current=!1))},[i]);const u=()=>e.real_time.map((d,f)=>{const p=i>=d.start&&d.end>i;return c.jsx(tS,{theme:r,firstTimeRender:o.current,done:!p,active:p,children:d.text},f)});return e.real_time.length?c.jsx("ul",{ref:a,className:`${n&&n} overflow-y-auto overflow-x-hidden no-scrollbar h-full max-h-[500px] mask-image`,children:u()}):c.jsx("h1",{className:"text-[50px] mt-[30px] text-center",children:"..."})},C6=({audioEle:t,isOpenFullScreen:e,isWaiting:n,setIsOpenFullScreen:r,isPlaying:i})=>{const s=nr(),o=bt(Ot),{userSongs:a}=vn(),{theme:l}=gt(),{song:u}=o,d=()=>{t==null||t.play()},f=()=>{t==null||t.pause()},p=()=>{i?f():d()},m=()=>{let _=u.currentIndex+1,w;_<a.length?w=a[_]:(w=a[0],_=0),s(Xn({...w,currentIndex:_,song_in:u.song_in}))};return h.useEffect(()=>{if(!e)return()=>{}},[u,e]),c.jsx("div",{className:`fixed bottom-0 w-full h-[70px] border-t z-40  px-[20px] ${l.bottom_player_bg}`,children:c.jsxs("div",{className:"flex flex-row  h-full",children:[c.jsx("div",{onClick:()=>r(!0),className:"mobile-current-song flex-grow",children:c.jsxs("div",{className:" flex flex-row items-center flex-grow h-full",children:[c.jsx("div",{className:"w-[40px] h-[40px]",children:c.jsx("img",{className:"w-full object-cover object-center rounded-full",src:u.image_url?u.image_url:FR})}),c.jsx("div",{className:"flex-grow  ml-[10px]",children:u.song_url&&c.jsxs(c.Fragment,{children:[c.jsx("h5",{className:"text-[18px] font-[500] line-clamp-1",children:(u==null?void 0:u.name)||"name"}),c.jsx("p",{className:"text-[14px] font-[400] line-clamp-1",children:(u==null?void 0:u.singer)||"singer"})]})})]})}),c.jsxs("div",{className:`mobile-bottom-player flex items-center h-full pl-[15px] gap-[10px] ${!u.name&&"opacity-60 pointer-events-none"}`,children:[c.jsx("button",{className:"p-[4px]",onClick:()=>p(),children:n?c.jsx(yb,{className:"w-[35px]"}):i?c.jsx(So,{className:"w-[35px]"}):c.jsx(JE,{className:"w-[35px]"})}),c.jsx("button",{onClick:m,className:"p-[4px]",children:c.jsx(YE,{className:"w-[35px]"})})]})]})})};function k6({audioEle:t,isPlaying:e,isWaiting:n,isOpenFullScreen:r,setIsPlaying:i,setIsWaiting:s,setIsOpenFullScreen:o}){const a=nr(),{theme:l}=gt(),{userInfo:u}=bn(),{song:d}=bt(Ot),{actuallySongs:f}=Ul(),[p,m]=h.useState(!1),[_,w]=h.useState(!1),[x,y]=h.useState("Playing"),[g,v]=h.useState(),[E,S]=h.useState(!1),I=h.useRef(),T=h.useRef(null),R=h.useRef(null),C=h.useRef(null),A=h.useRef(null);mA({bgRef:R,songInStore:d});const k=gA({songInStore:d}),{refs:z,floatingStyles:L,context:F}=Yl({open:_,onOpenChange:w,placement:"bottom-start",middleware:[$h(10),k0(),P0()],whileElementsMounted:ql}),ie=Kl(F),K=Ql(F),ce=L0(F),{getReferenceProps:b,getFloatingProps:$}=Xl([ie,K,ce]),U=M=>{let B=0,he=M.parentElement;for(;!he.classList.contains("item-container")&&B<5;)he=he.parentElement,B++;return he},N={height:"0px",opacity:"0",padding:"0px 5px",border:"none"},D=M=>{let B=0,he=M.previousElementSibling;for(;he&&B<20;)Object.assign(he.style,N),B++,he=he.previousElementSibling},Q=(M,B,he)=>{const Ae=M.target,fe=U(Ae),te=D(fe);Object.assign(fe.style,N),console.log("check previousSibling",te),setTimeout(()=>{a(Xn({...B,currentIndex:he,song_in:d.song_in}))},250)};h.useEffect(()=>{var B;I.current=(B=T.current)==null?void 0:B.offsetWidth;const M=C.current;M.style.height=`${window.innerHeight-65}px`},[]);const Z=h.useMemo(()=>c.jsx(c.Fragment,{children:d&&c.jsxs(c.Fragment,{children:[c.jsx("h3",{className:"text-white text-[16px] mt-[10px] mb-[7px]",children:"Playing next"}),d.currentIndex===f.length-1?c.jsx("p",{children:"..."}):c.jsx("div",{ref:A,className:"relative h-full no-scrollbar overflow-auto transition-transform duration-200",children:f.map((M,B)=>{if(B>d.currentIndex)return c.jsx(yl,{theme:l,data:M,onClick:he=>Q(he,M,B),active:M.song_url===d.song_url},B)})})]})}),[d,f]),X=h.useMemo(()=>c.jsx(QA,{className:"flex-shrink-0 overflow-auto",audioEle:t,songLyric:k}),[k]);return c.jsxs("div",{className:`fixed inset-0 z-50 bg-zinc-900 text-white overflow-hidden  ${r?"translate-y-0":"translate-y-full"} transition-[transform] duration-300 ease-in-out delay-150  `,children:[c.jsx("div",{ref:R,className:"absolute  inset-0 bg-no-repeat bg-cover bg-center blur-[99px]"}),c.jsx("div",{className:"absolute inset-0 bg-zinc-900 bg-opacity-60 bg-blend-multiply"}),c.jsxs("div",{className:"absolute inset-0 z-10",children:[c.jsxs("div",{className:"h-[65px] p-[15px]",children:[c.jsx("button",{ref:z.setReference,...b(),className:"rounded-full p-[5px] bg-gray-500 bg-opacity-20 absolute left-[15px]",children:c.jsx(Fg,{className:"w-[25px]"})}),c.jsx(eC,{className:"w-fit",idle:!1,setActiveTab:y,activeTab:x,tabs:["Songs","Playing","Lyric"]}),c.jsx("button",{className:"bg-gray-500 bg-opacity-20 rounded-full absolute right-[15px] top-[15px] p-[6px]",onClick:()=>o(!1),children:c.jsx(GE,{className:"w-[25px]"})}),_&&c.jsx(Gl,{context:F,modal:!1,children:c.jsx("div",{className:"z-[99]",ref:z.setFloating,style:L,...$(),children:c.jsx(D0,{loggedIn:!!u.email,setIsOpenMenu:w,setIsOpenSetting:m,setSettingComp:v})})})]}),c.jsx("div",{ref:C,className:"relative px-[15px] overflow-hidden",children:c.jsxs("div",{className:"relative h-full flex flex-col overflow-hidden",children:[c.jsx("div",{className:""}),c.jsxs("div",{className:`${x!="Playing"&&!E?"flex":""}`,children:[h.useMemo(()=>c.jsx(Ju,{theme:l,classNames:`flex-shrink-0 transition-[height, width] origin-top-left ${x!="Playing"?"max-[549px]:w-[60px] max-[549px]:h-[60px]":"justify-center items-center w-full px-[20px]"}`,active:!0,data:d}),[d,e,x]),c.jsxs("div",{className:`flex flex-grow justify-between items-center ${x!="Playing"?"ml-[10px]":"mt-[15px]"}`,children:[c.jsxs("div",{className:"group flex-grow overflow-hidden",children:[c.jsx("div",{className:"h-[30px]",children:h.useMemo(()=>c.jsx(nd,{songInStore:d,autoScroll:!0,classNames:`${x==="Playing"?"text-[24px] leading-[30px]":"text-[20px]"} font-[500]`,label:d.name||"..."}),[d,x])}),c.jsx("div",{className:"h-[30px]",children:h.useMemo(()=>c.jsx(nd,{songInStore:d,autoScroll:!0,classNames:`${x==="Playing"?"text-[22px]":"text-[16px] text-gray-500"} font-[400]`,label:d.singer||"..."}),[d,x])})]}),c.jsx("div",{className:"pl-[20px]",children:c.jsx("button",{className:"p-[5px]",children:c.jsx(XE,{className:"w-[25px]"})})})]})]}),c.jsx("div",{className:`absolute h-full top-[60px] w-full opacity-0 ${x==="Lyric"&&"opacity-100"}`,children:c.jsx("div",{className:"relative h-full",children:X})}),c.jsx("div",{className:`absolute h-full top-[60px] w-full opacity-0 ${x==="Songs"&&"opacity-100"}`,children:c.jsx("div",{className:"relative",children:Z})}),c.jsx("div",{className:`absolute bottom-[30px] w-[100%] ${x!=="Playing"&&"opacity-0 pointer-events-none h-[0px] mb-[0px]"}`,children:c.jsx("div",{className:"flex flex-col justify-start flex-1",children:c.jsx("div",{className:"flex-col-reverse flex",children:h.useMemo(()=>c.jsx(pA,{audioEle:t,isOpenFullScreen:!1,isPlaying:e,isWaiting:n,setIsWaiting:s,setIsPlaying:i,idle:!1}),[e,n])})})})]})})]}),p&&c.jsx(Si,{setOpenModal:m,children:c.jsx(Cn,{theme:l,children:g})})]})}const P6=()=>{const t=bt(Ot),{song:e}=t,[n,r]=h.useState(!1),[i,s]=h.useState(!1),[o,a]=h.useState(!1),[l,u]=h.useState(!1),d=h.useRef(null),f=h.useMemo(()=>window.innerWidth<550,[]),p=c.jsxs(c.Fragment,{children:[c.jsx(tF,{audioEle:d.current,idle:!1,isPlaying:n,isOpenFullScreen:o,setIsOpenFullScreen:a}),c.jsx(L9,{audioEle:d.current,idle:!1,isPlaying:n,isWaiting:i,isOpenFullScreen:o,setIsPlaying:r,setIsWaiting:s,setIsOpenFullScreen:a})]}),m=c.jsxs(c.Fragment,{children:[c.jsx(k6,{audioEle:d.current,idle:!1,isPlaying:n,isWaiting:i,isOpenFullScreen:o,setIsPlaying:r,setIsWaiting:s,setIsOpenFullScreen:a}),c.jsx(C6,{audioEle:d.current,idle:!1,isPlaying:n,isOpenFullScreen:o,isWaiting:i,setIsOpenFullScreen:a})]});return h.useEffect(()=>{l||d.current&&u(!0)},[]),c.jsxs("div",{className:"absolute",children:[c.jsx("audio",{ref:d,src:e.song_url,className:"hidden"}),l?f?m:p:""]})},$m=({data:t,inDetail:e,theme:n,onClick:r})=>{const i={button:`rounded-full text-[#fff] p-[4px] hover:bg-${n==null?void 0:n.alpha}`,imageContainer:"relative overflow-hidden rounded-xl flex-grow",absoluteContainer:"absolute hidden inset-0 group-hover:block",overlay:"absolute inset-0 bg-[#333] opacity-60",buttonContainer:"justify-center items-center h-full relative z-10 relative",buttonWrapper:"flex items-center justify-center z-10 h-full w-full relative"},s=h.useMemo(()=>window.innerWidth<550,[]);return c.jsx(c.Fragment,{children:c.jsxs("div",{className:"group h-full flex flex-col",onClick:()=>s&&r&&r(),children:[c.jsxs("div",{className:i.imageContainer,children:[c.jsx(wi,{classNames:"h-full w-full aspect-square object-cover object-center",src:t.image_url}),!s&&!e&&c.jsxs("div",{className:i.absoluteContainer,children:[c.jsx("div",{className:i.overlay}),c.jsx("div",{className:i.buttonWrapper,children:c.jsx(si,{to:`${ht.Playlist}/${t.id}`,children:c.jsx(ee,{onClick:()=>r&&r(),className:i.button,children:c.jsx(So,{className:"w-[35px]"})})})})]})]}),!e&&c.jsx("h5",{className:"text-[20px] font-[500]",children:t.name})]})})};function D0({setIsOpenSetting:t,setSettingComp:e,setIsOpenMenu:n,setModalName:r,loggedIn:i}){const{theme:s,setTheme:o}=gt(),{setUserInfo:a}=bn(),{initSongsContext:l,adminSongs:u,adminPlaylists:d}=vn(),f=h.useCallback(g=>{localStorage.setItem("theme",JSON.stringify(g)),o(g)},[]),p=g=>c.jsxs("div",{className:"flex justify-between py-[15px]",children:[c.jsx("h1",{className:"text-xl font-bold",children:g}),c.jsx(ee,{onClick:()=>t(!1),size:"normal",variant:"circle",children:c.jsx(Dn,{})})]}),m=async()=>{try{await dL(po),a({...l0.userInfo,status:"finish"}),l({adminSongs:u,adminPlaylists:d}),t(!1)}catch(g){console.log("signOut error",{messsage:g})}},_=g=>{n(!1);let v;switch(g){case"themes":v=x;break;case"info":v=w;break;case"logout":v=y;break;default:v=c.jsx("h1",{children:"Nothing to show"})}e(v),r&&r("setting"),t(!0)},w=c.jsxs("div",{className:"w-[700px] max-w-[90vw] max-[549px]:w-[85vw]",children:[p("Zingmp3 clone"),c.jsxs("div",{className:"",children:[c.jsx("h5",{className:"text-lg font-bold",children:"Cc cng ngh s dng:"}),c.jsx("ul",{children:c.jsx("li",{className:"text-lg my-[10px]  ml-[20px]",children:"- Ny tui copy nn khng bit   "})}),c.jsx("a",{href:"asldj",target:"_blank",className:"text-lg font-bold",children:"#Github"})]})]}),x=h.useMemo(()=>c.jsxs("div",{className:"w-[700px] max-w-[90vw] max-[549px]:w-[85vw]",children:[p("Themes"),c.jsxs("div",{className:"overflow-auto no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",children:[c.jsx("h2",{className:"text-md font-semibold mb-[10px]",children:"Dark"}),c.jsxs("div",{className:"flex flex-row -mx-[10px] flex-wrap gap-y-[20px]",children:[c.jsxs("div",{className:"w-[25%] px-[10px] max-[549px]:w-[50%]",children:[c.jsx("div",{onClick:()=>f("red"),className:"from-[30%]  pt-[100%] rounded-xl bg-[#3b1113]"}),c.jsx("span",{className:"text-sm",children:""})]}),c.jsxs("div",{className:"w-[25%] px-[10px] max-[549px]:w-[50%]",children:[c.jsx("div",{onClick:()=>f("deep_blue"),className:"from-[30%]  pt-[100%] rounded-xl bg-[#111f3b]"}),c.jsx("span",{className:"text-sm",children:"Xanh m"})]})]}),c.jsx("h2",{className:"text-md font-semibold mb-[10px] mt-[30px]",children:"Light"}),c.jsx("div",{className:"flex flex-row -mx-[10px] flex-wrap gap-y-[20px]",children:c.jsxs("div",{className:"w-[25%] px-[10px] max-[549px]:w-[50%]",children:[c.jsx("div",{onClick:()=>f("green_light"),className:"from-[30%] bg-[#c0d8d8]  pt-[100%] rounded-xl"}),c.jsx("span",{className:"text-sm",children:"Xanh nht"})]})})]})]}),[]),y=h.useMemo(()=>bo({loading:!1,label:"Log out ?",theme:s,callback:m,setOpenModal:t,className:"w-[auto]"}),[s]);return c.jsx(c.Fragment,{children:c.jsxs(Cn,{theme:s,classNames:"flex flex-col gap-[15px]",children:[c.jsxs(ee,{onClick:()=>_("themes"),children:[c.jsx(WN,{className:"w-6 h-6 mr-2"}),"Themes"]}),i&&c.jsxs(ee,{onClick:()=>_("logout"),children:[c.jsx(UP,{className:"w-6 h-6 mr-2"}),"Log out"]}),c.jsxs(ee,{onClick:()=>_("info"),children:[c.jsx(DN,{className:"w-6 h-6 mr-2"}),"Info"]})]})})}function YA(){var T;const[t]=VR(po),{theme:e}=gt(),{userInfo:n}=bn(),[r,i]=u0(po),[s,o]=h.useState(!1),[a,l]=h.useState(!1),[u,d]=h.useState(),{refs:f,floatingStyles:p,context:m}=Yl({open:s,onOpenChange:o,placement:"right-start",middleware:[$h(0),k0(),P0()],whileElementsMounted:ql}),_=Kl(m),w=Ql(m),x=L0(m),{getReferenceProps:y,getFloatingProps:g}=Xl([_,w,x]),v=()=>{t()},E=[...Array(3).keys()].map(R=>c.jsxs("div",{className:"px-[10px] py-[5px] flex items-center",children:[c.jsx(Ce,{className:"w-[25px] h-[25px] flex-shrink-0"}),c.jsx(Ce,{className:"w-[80px] h-[19px] ml-[5px]"})]},R)),S=c.jsxs("div",{className:"flex items-center",children:[c.jsx(Ce,{className:"w-[36px] h-[36px] flex-shrink-0 rounded-full"}),c.jsx(Ce,{className:"w-[104px] h-[16px] ml-[5px]"})]}),I={container:`pt-[30px] w-[180px] flex-shrink-0 border-r-[1px] h-screen overflow-y-auto ${e.side_bar_bg} border-${e.alpha}`,button:`px-[10px] py-[5px] w-full text-[14px] font-[500] ${e.content_hover_text}`,text:e.type==="light"?"text-[#333]":"text-white",icon:"w-[25px] mr-[5px]",divide:`h-[1px]  w-[calc(100%-20px)] mb-[10px] mt-[20px] mx-auto bg-${e.alpha}`,userName:"text-[16px] font-[500] ml-[8px] line-clamp-1",imageFrame:`w-[36px] h-[36px] flex-shrink-0 rounded-full overflow-hidden ${r!=null&&r.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`};return c.jsxs("div",{className:`${I.container} + ${I.text}`,children:[c.jsx("div",{className:"px-[10px] flex items-center",children:i?S:c.jsxs(c.Fragment,{children:[c.jsx("div",{className:I.imageFrame,children:r!=null&&r.photoURL?c.jsx(wi,{src:r.photoURL,classNames:"w-full"}):c.jsx("h1",{className:"text-[20px]",children:r!=null&&r.email?(T=r==null?void 0:r.displayName)==null?void 0:T.charAt(1):"Z"})}),c.jsx("h3",{className:I.userName,children:r!=null&&r.email?r==null?void 0:r.displayName:"Guest"})]})}),c.jsx("div",{className:I.divide}),c.jsxs("div",{className:"flex flex-col gap-[15px] items-start",children:[i&&E,!i&&c.jsxs(c.Fragment,{children:[c.jsx(si,{className:"w-full",to:ht.Home,children:c.jsxs(ee,{className:I.button,children:[c.jsx(ON,{className:I.icon}),"Discover"]})}),r!=null&&r.email?c.jsx(si,{className:"w-full",to:ht.MySongs,children:c.jsxs(ee,{className:I.button,children:[c.jsx(da,{className:I.icon}),"My songs"]})}):c.jsxs(ee,{onClick:()=>v(),className:I.button,children:[c.jsx(OP,{className:I.icon}),"Login"]}),c.jsxs("button",{ref:f.setReference,...y(),className:`flex items-center hover:brightness-75 ${I.button} ${s&&e.content_text}`,children:[c.jsx(Fg,{className:I.icon}),"Settings"]})]})]}),s&&c.jsx(Gl,{context:m,modal:!1,children:c.jsx("div",{className:"z-[99]",ref:f.setFloating,style:p,...g(),children:c.jsx(D0,{loggedIn:!!n.email,setIsOpenMenu:o,setIsOpenSetting:l,setSettingComp:d})})}),a&&c.jsx(Si,{setOpenModal:l,children:c.jsx(Cn,{theme:e,children:u})})]})}const XA="data:image/gif;base64,R0lGODlhJAAkAIABAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NmRjOGMyNC03YmYxLTQxZTMtYjQ2Zi1mY2ZhMDk4MDE1YWYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTBDRTc0QzlGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTBDRTc0QzhGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YzBhNGU4OWYtNjc4Yy00NmMyLTg4NmUtYzIxNGE0NTIwZDRjIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODRlMDBjYmEtZjhlNy03YzQ4LWE4MTgtNDc3NTI3MGQ1ZTAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQgAAQAsAAAAACQAJAAAAnKMj5nArQ9jc7HWyax+GOx/dCAojltpWmgqYazqvu0kz1StrHgYp6tO6gWAn59wZKSxkjcTM7MUEk/SY1BpmGqeHhs0W8Vywk3tkPw9iztcBLfNW7Pl9PLcXk/f8Xz9vguWB6h254Y2+Id4aLjH2Kc4UQAAIfkECQgAAQAsAAAAACQAJAAAAnSMj6nL7Q+jnAzYS+XFGW7beV/4fADpmGijrkvrJnA2z1Q9hvhG7lznA+lyBpuMGAieDiYlQulkIpvTKk9KFRatv2RW671uxeHskwv+ptHLsRnbhbLPZHW7vK6r6XF21J33Bngnp2fY98UXuNikSOg3B8dYAAAh+QQJCAABACwAAAAAJAAkAAACfIyPqcvtD6OctNqLKdg8N955C7iJI4mQAKam6NUeMTMHda3cr4EnOugCfnY2Yi8Y4hmXKqHSWYQ2mclodSqllmTY7fOqbSK9VnLXHB6Ludk2Vg1nv+Vo9zT+rc/zK3qf/wNmt8aHV0Z4aHj2l+inFqgXiQjJuKgYRnkJUgAAIfkECQgAAQAsAAAAACQAJAAAAnuMj6nL7Q+jnLTaC7K+T2/eeBkYiiQjAlyKsJh5uJYc0BRtTzgMpbsn8fFqQ4cQGCuWjqok0vA7toZR4fRJxDJHzg+Uur16s+Nt86sFM8VcdDncbZPlZvZ5fq/H82rp3m5XxZe29mfoZnWIF9hH1+gDqKiHOPhWSBlJWQAAIfkECQgAAQAsAAAAACQAJAAAAn6Mj6nL7Q8RmDTaQ+u1eW7efVg4ZqLRARIppqsZpW6pQTIbzPZd57jD6+keQQ/NuAu+esDiEkl0HlUxKerXKFKvsCTvuY0qp2Dw8IzTlslTdNf3VrO5Qiu8Hre78d/5HSpHB5imR5g3Jhi2d7OWaGbIN4j4pwjJ6Lco00gJVgAAIfkECQgAAQAsAAAAACQAJAAAAn2EH6nL7XnQmxRGULO7WHsbfRPHiQ95mRsqqQvbBqUGG29K13eYw3tMqXVAwJFOMcsIf7YeizmsLJE45ZHYtPqoPO2TWzxdZVXpOGneYqPBc7mtJnflsekaCkXry3Z61h/VtzcnyGcYN1jnRnj4dQf2V8g46QiIB0ly+bhWAAAh+QQJCAABACwAAAAAJAAkAAACfYyPqcvtD+MDtMobqt6Y7Q90C8iJCamZJ0qpCNu6Bhwen0S/JZTb+wTTpSK92c9RzBwbyRsx6BvyoEYpkCW0RLVVVDbWBSuxW7EzDPrW0OrzmPs2U+Nrevvnzs/11ib+T8ZWVufXB+g1qHZnyAhX6HhIopg4yAfZKEkpiFYAACH5BAkIAAEALAAAAAAkACQAAAJ7jI+py+0Po5y02ouB3tht3jGfFopjuYwqgK5npCLuJ8XHDEK2gZP3ywMGeqwfzZgb9mTCnRLHPAalz1k06SRefVPsEsmthrXgYnf8PZvFa7J6206z4fBs8w4t08t2at+qF6j2h+YnRxiX9ybIhrg3iOdlqDjH6Fa5qFYAACH5BAkIAAEALAAAAAAkACQAAAJ1jI+py+0Po5y02otzArxr1nmfEnIjWZ5bqh4l0Lqs8WK1HNpzcFs9/9o5fkFhg1gUQZBJWISZlECL0l3ThFMCc1lq10mzXhFT8Db6JYubam7Yffa+teVymz5O6+fyuLm+hgd39ReIxRd0d+inmLjH+GX3+FIAACH5BAUIAAEALAAAAAAkACQAAAJwjI+py+0Po5y0PoCzhVlv12EfGI5NCJgMqi5sm7zwIc9BPeOw3vKqb6oBLyUaqshB3o4diZDpSTaN0FTkWUVgo8sslbtlapXh43hqKJfP4Ko1TY574ehue24XffV0KJuf9xa4tifoZih351f4h9hRAAA7",JA=(t,e)=>{const n=[...e.song_ids],r=n.findIndex(o=>o===t.id);n.splice(r,1);const i=n.length,s={...e,count:i,song_ids:n,time:i===0?0:+(e.time-t.duration).toFixed(1)};return console.log("handle playlist prev",e.name,e.song_ids),s.count<0||s.time<0||s.song_ids.length===e.song_ids.length||s.count===e.count||s.time===e.time?{error:!0,newPlaylist:s}:(console.log("handle playlist current",s.name,s.song_ids),{error:!1,newPlaylist:s})},N6=(t,e,n)=>{let r;for(let i of t.in_playlist){const s=e.findIndex(u=>u.id===i),o=s!==-1;if(o)r=e[s];else{const u=n.find(d=>d.id===i);if(!u)return{error:!0};r=u}const{error:a,newPlaylist:l}=JA(t,r);if(a)return{error:!0};o?(console.log("update to existing list "),Lh(l,e)):(console.log("push to existing list "),e.push(l))}return{error:!1}},b6=async(t,e)=>{let n=[];for(let r of t.in_playlist){const i=e.find(a=>a.id===r);if(!i)return{error:!0,playlistsNeedToUpdateDoc:n};const{error:s,newPlaylist:o}=JA(t,i);if(s)return{error:!0,playlistsNeedToUpdateDoc:n};n.push(o)}return{error:!1,playlistsNeedToUpdateDoc:n}},_w=(t,e)=>{let n;if(!t.in_playlist.length)return console.log("No song in playlist"),{error:!0,newSong:n};const r=[...t.in_playlist],i=r.findIndex(s=>s===e.id);return r.splice(i,1),n={...t,in_playlist:r},t.in_playlist.length===r.length?(console.log("song in playlist no change"),{error:!0,newSong:n}):{error:!1,newSong:n}},ZA=(t,e)=>{let n;const r=[...t.in_playlist];return r.find(s=>s===e.id)?{error:!0,newSong:n}:(r.push(e.id),n={...t,in_playlist:r},r.length===t.in_playlist.length?{error:!0,newSong:n}:{error:!1,newSong:n})},O6=(t,e)=>{const n=[];if(console.log("delete playlist"),!t)return console.log("no playlist"),{error:!0,songsNeedToUpdate:n};for(let r of e){if(!r.in_playlist.includes(t.id))return console.log("not in playlist"),{error:!0,songsNeedToUpdate:n};const i=[...r.in_playlist],s=i.findIndex(a=>a===t.id);i.splice(s,1);let o={...r,in_playlist:i};if(console.log("check new songs",o),o.in_playlist.length===r.in_playlist.length)return console.log("new song error"),{error:!0,songsNeedToUpdate:n};n.push(o)}return n.length===0?{error:!0,songsNeedToUpdate:n}:{error:!1,songsNeedToUpdate:n}};function fd({data:t,active:e,onClick:n,theme:r,inProcess:i,inPlaylist:s,userInfo:o,userSongs:a,userPlaylists:l,setUserSongs:u,setUserPlaylists:d,songItemActions:f,deleteFromPlaylist:p,selectedSongList:m,isCheckedSong:_,setSelectedSongList:w,setIsCheckedSong:x,handleOpenParentModal:y}){const g=nr(),{setErrorToast:v,setSuccessToast:E}=tr(),{playlist:S,song:I}=bt(Ot),[T,R]=h.useState(!1),[C,A]=h.useState(!1),[k,z]=h.useState(!1),[L,F]=h.useState(),{refs:ie,floatingStyles:K,context:ce}=Yl({open:C,onOpenChange:A,middleware:[hF()],whileElementsMounted:ql}),b=Kl(ce),$=Ql(ce),{getReferenceProps:U,getFloatingProps:N}=Xl([b,$]),D=h.useMemo(()=>window.innerWidth<550,[]),Q=h.useMemo(()=>m?(m==null?void 0:m.indexOf(t))!=-1:!1,[m]),Z=oe=>{F(oe),z(!0)},X=()=>{R(!1),z(!1)},M=h.useCallback(async()=>{if(!o||!a||!l||!u||!d||!f){v({message:"Lack of props"});return}try{R(!0);let oe,W;if(t.in_playlist.length){oe=[...l];const{error:J,playlistsNeedToUpdateDoc:re}=await b6(t,oe);if(J||!re){X(),v({message:"Error when handle playlist"});return}W=re}if(I.id===t.id){const J=fA({});g(Xn({...J,song_in:"user",currentIndex:0}))}const H=await f.updateAndSetUserSongs({song:t});if(!H){v({message:"Error when handle user songs"}),X();return}if(W&&oe){for(let J of W)Lh(J,oe),J.id===S.id&&g(Fl(J)),await Ct({collection:"playlist",data:J,id:J.id});d(oe,[])}await fh(t),await Ct({collection:"users",data:{song_ids:H,song_count:H.length},id:o.email}),E({message:`'${t.name}' deleted`})}catch(oe){console.log({message:oe}),v({})}finally{X()}},[a,I,t]),B=h.useCallback(async(oe,W)=>{if(!oe||!W||!f){v({message:"Lack of props"});return}try{if(t.by==="admin"){console.log("song by admin");const _e=Q1({song:oe,playlist:W});if(_e.count<0||_e.time<0||_e.song_ids.length===W.song_ids.length){v({message:"New playlist error"});return}console.log("check new playlist",_e),await f.setPlaylistDocAndSetUserPlaylists({newPlaylist:_e}),E({message:`'${oe.name}' added to ${W.name}`});return}if(!a||!u){v({message:"Lack of props"});return}const{error:H,newSong:J}=ZA(oe,W);if(H||!J){v({message:"New song error"});return}const re=[...a];ea(J,re);const ye=Q1({song:J,playlist:W});if(ye.count<0||ye.time<0||ye.song_ids.length===W.song_ids.length){v({message:"New playlist error"});return}u(re),await Ct({collection:"songs",data:J,id:J.id}),await f.setPlaylistDocAndSetUserPlaylists({newPlaylist:ye}),E({message:`'${oe.name}' added to ${W.name}`})}catch(H){console.log(H),v({})}finally{A(!1)}},[a,t]),he=h.useCallback(oe=>{if(!w||!m||!x){v({});return}x(!0);let W=[...m];const H=W.indexOf(oe);H===-1?W.push(oe):W.splice(H,1),w(W),W.length||x(!1)},[m]),Ae={textColor:r.type==="light"?"text-[#333]":"text-[#fff]",button:`${r.content_hover_bg} p-[8px] rounded-full`,songListButton:"mr-[10px] text-[inherit]",itemContainer:`border-b border-${r.alpha} ${window.innerWidth>549&&"p-[0px] hover:bg-"+r.alpha}  ${Q&&"bg-"+r.alpha}`,imageFrame:"h-[54px] w-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${r.alpha} text-[14px] font-[500]`},fe=c.jsxs("div",{className:`flex flex-row ${i?"opacity-60":""}`,children:[c.jsx(c.Fragment,{children:i?c.jsx("button",{className:`${Ae.songListButton}`,children:c.jsx(da,{className:"w-[18px]"})}):c.jsx(c.Fragment,{children:_?c.jsx("button",{onClick:()=>he(t),className:`${Ae.songListButton} text-[inherit]`,children:Q?c.jsx(ca,{className:"w-[18px]"}):c.jsx(Rc,{className:"w-[18px]"})}):c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>he(t),className:`${Ae.songListButton} hidden group-hover/main:block`,children:c.jsx(Rc,{className:"w-[18px] "})}),c.jsx("button",{className:`${Ae.songListButton} group-hover/main:hidden group-hover/main:mr-[0px]`,children:c.jsx(da,{className:"w-[18px]"})})]})})}),c.jsxs("div",{className:`${Ae.imageFrame}`,children:[c.jsx(wi,{src:t.image_url}),!i&&c.jsx(c.Fragment,{children:e?c.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center",children:c.jsx("div",{className:"relative h-[18px] w-[18px]",children:c.jsx("img",{src:XA,alt:""})})}):c.jsx("div",{className:`absolute  inset-0 bg-black bg-opacity-60 
songContainers-center justify-center items-center hidden group-hover/image:flex`,children:c.jsx(ee,{onClick:n,variant:"default",className:"h-[25px] w-[25px] text-white",children:c.jsx(So,{})})})})]}),c.jsxs("div",{className:"ml-[10px]",children:[c.jsx("h5",{className:"text-mg line-clamp-1",children:t.name}),c.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:t.singer})]})]}),te=h.useMemo(()=>c.jsxs("div",{className:"w-[200px]",children:[!D&&c.jsxs(c.Fragment,{children:[c.jsx("h5",{className:"text-mg line-clamp-1",children:t.name}),c.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:t.singer})]}),(o==null?void 0:o.email)&&c.jsx(c.Fragment,{children:s?c.jsx(c.Fragment,{children:!e&&c.jsxs(ee,{className:`mt-[15px] ${r.content_hover_text}`,variant:"list",onClick:()=>p&&p(t),children:[c.jsx(VN,{className:"w-[18px] mr-[5px]"}),"Remove from playlist"]})}):c.jsxs(ee,{className:`mt-[15px] group relative ${r.content_hover_text} ${Ae.before}`,variant:"list",children:[c.jsx(Fa,{className:"w-[18px] mr-[5px]"}),"Add to playlist",c.jsx(Cn,{classNames:"w-[100%] absolute right-[calc(100%+5px)] hidden group-hover:block hover:block",theme:r,children:c.jsxs("ul",{className:"w-[150px]",children:[!!(l!=null&&l.length)&&c.jsx(c.Fragment,{children:l.map((oe,W)=>{const H=oe.song_ids.includes(t.id);return c.jsxs("li",{onClick:()=>!H&&B(t,oe),className:`list-none flex rounded-[4px] p-[5px] ${H&&"opacity-60"} ${!H&&r.content_hover_text}`,children:[c.jsx(da,{className:"w-[20px] mr-[5px]"}),c.jsxs("p",{children:[oe.name," ",H&&"(added)"]})]},W)})}),c.jsxs("li",{onClick:()=>y&&y("ADD_PLAYLIST"),className:`list-none flex rounded-[4px] p-[5px] ${r.content_hover_text}`,children:[c.jsx(Fa,{className:"w-[18px] mr-[5px]"}),"Add new playlist"]})]})})]})}),t.by!="admin"&&c.jsxs(c.Fragment,{children:[c.jsxs(ee,{onClick:()=>Z("edit"),className:`${r.content_hover_text}`,variant:"list",children:[c.jsx(Ug,{className:"w-[18px] mr-[5px]"}),"Edit"]}),t.lyric_id?c.jsxs(ee,{className:`${r.content_hover_text}`,variant:"list",onClick:()=>Z("edit"),children:[c.jsx(vN,{className:"w-[18px] mr-[5px]"}),"Edit lyric"]}):c.jsx(si,{to:`/React-Zingmp3/edit/${t.id}`,children:c.jsxs(ee,{className:`${r.content_hover_text}`,variant:"list",children:[c.jsx(xN,{className:"w-[18px] mr-[5px]"}),"Add lyric"]})}),c.jsxs(ee,{onClick:()=>Z("confirm"),className:`${r.content_hover_text}`,variant:"list",children:[c.jsx(Bg,{className:"w-[18px] mr-[5px]"}),"Delete"]})]}),c.jsxs("p",{className:"opacity-60 text-center text-[12px] mt-[10px]",children:["uploaded by ",t.by]})]}),[r,e,l,t,B,p]),Ie=h.useMemo(()=>bo({loading:T,label:`Delete '${t.name}'`,desc:"This action cannot be undone",theme:r,callback:M,setOpenModal:z}),[T,r,a,t,I]);return c.jsxs("div",{className:`${!i&&"group/main"} flex flex-row rounded justify-between songContainers-center px-[10px] py-[10px] max-[549px]:px-[0px] ${Ae.itemContainer}`,children:[fe,i?c.jsxs("div",{className:"flex items-center",children:[c.jsx("span",{children:c.jsx($g,{className:"w-[20px] mr-[10px] animate-spin"})}),c.jsx("p",{className:"text-[14px]",children:"In process..."})]}):c.jsx(c.Fragment,{children:c.jsxs("div",{className:"flex flex-row items-center gap-x-[5px]",children:[c.jsx(ee,{className:`${Ae.button} ${r.type==="light"?"hover:text-[#333]":"hover:text-white"}`,children:c.jsx(XE,{className:"w-[20px]"})}),c.jsxs("div",{className:"w-[80px] flex justify-center songContainers-center",children:[c.jsx("button",{ref:ie.setReference,...U(),className:`group-hover/main:block ${Ae.button}
            ${C?"block cursor-default":"hidden "}
            ${r.type==="light"?"hover:text-[#333]":"hover:text-white"}
            max-[549px]:block
            `,children:c.jsx(ZP,{className:"w-[20px]"})}),c.jsx("span",{className:`text-[12px] group-hover/main:hidden ${C&&"hidden"} max-[549px]:hidden`,children:td(t.duration)})]})]})}),C&&!i&&c.jsx(Gl,{context:ce,modal:!1,children:c.jsx("div",{className:"z-[99]",ref:ie.setFloating,style:K,...N(),children:c.jsx(Cn,{theme:r,children:te})})}),k&&!i&&c.jsx(Si,{setOpenModal:z,children:c.jsxs(Cn,{theme:r,children:[L==="edit"&&c.jsx(LR,{setIsOpenModal:z,setUserSongs:u,theme:r,userSongs:a,data:t}),L==="confirm"&&Ie]})})]})}const j6=({data:t,active:e,hasHover:n,onClick:r,hasTitle:i,classNames:s,theme:o},a)=>{const l={container:"flex flex-col min-[549px]:px-[20px]",imageFrame:"group relative transition-[width] duration-300 origin-center",image:"select-none object-cover object-center rounded w-full",overlay:"absolute inset-0 bg-[#333] bg-opacity-60 items-center justify-center hidden max-[549px]:hidden group-hover:flex",playingGifFrame:"absolute h-[30px] w-[30px] bottom-[15px] left-[15px]",title:"text-2xl text-white  text-center mt-[10px] font-bold max-[549px]:text-xl text-ellipsis line-clamp-1"},u=`${e?"w-[350px] max-[549px]:w-[100%]":"w-[280px] max-[549px]:w-[75%]"}`;return c.jsxs("div",{ref:a,className:l.container,children:[c.jsx("div",{className:`flex ${s&&s}`,children:c.jsxs("div",{className:`${l.imageFrame} ${u}`,children:[c.jsx(wi,{classNames:"rounded-[6px]",src:t==null?void 0:t.image_url}),n&&!e&&c.jsx("div",{className:l.overlay,children:c.jsx(ee,{onClick:r,variant:"circle",className:`h-[50px] w-[50px] text-white ${o.content_hover_text}`,children:c.jsx(So,{})})}),e&&window.innerWidth>=550&&c.jsx("div",{className:l.playingGifFrame,children:c.jsx("img",{src:XA,alt:""})})]})}),i&&c.jsxs("div",{children:[c.jsx("h2",{className:l.title,children:(t==null?void 0:t.name)||"Some song"}),c.jsx("p",{className:"text-center text-md  text-gray-500 line-clamp-1",children:(t==null?void 0:t.singer)||"..."})]})]})},Ju=h.forwardRef(j6),eC=({tabs:t,idle:e,activeTab:n,setActiveTab:r,className:i})=>c.jsx("ul",{className:`flex px-[2px] flex-row py-[4px] h-full px-[4px] items-center bg-indio-650 mx-auto rounded-full bg-gray-500 bg-opacity-20  ${e?"hidden":""}`+i,children:t.map((s,o)=>c.jsx("li",{onClick:()=>r(s),className:`px-[30px] h-full rounded-full max-[549px]:px-[15px] ${n===s?"bg-gray-400 bg-opacity-20 text-white":""}`,children:c.jsx("span",{className:"leading-[27px] font-bold max-[549px]:font-normal",children:s})},o))}),M0=({time:t=3e3,autoClose:e})=>{const{setToasts:n,toasts:r}=tr(),{theme:i}=gt(),[s,o]=h.useState(""),a=u=>{n(d=>d.filter(f=>f.id!=u))};h.useEffect(()=>{s&&n(u=>u.filter(d=>d.id!=s))},[s]),h.useEffect(()=>{if(!e||!r.length)return;const u=r[r.length-1].id;setTimeout(()=>{o(u)},t)},[r]);const l={container:"fixed z-[99] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return c.jsx(c.Fragment,{children:ml.createPortal(c.jsx("div",{className:l.container,children:c.jsx("div",{className:"flex flex-col gap-[10px]",children:!!r.length&&r.map((u,d)=>c.jsx(z$,{onClick:a,theme:i,toast:u},d))})}),document.getElementById("portals"))})};function L6({user:t},e){return e?c.jsx("p",{className:"text-xl mb-4 ml-2",ref:e,children:t.display_name}):c.jsx("p",{className:"text-xl mb-4 ml-2",children:t.display_name})}h.forwardRef(L6);const D6=({children:t})=>{const{theme:e}=gt();return c.jsxs(c0,{children:[c.jsxs("div",{className:`h-screen w-screen flex 
         ${e.type==="dark"?"text-white":"text-[#333]"}
         ${e.container}
         `,children:[c.jsx(YA,{}),c.jsx("div",{className:"w-full overflow-auto h-full",children:c.jsx("div",{className:"px-[40px] max-[549px]:px-[10px]",children:t})})]}),c.jsx(M0,{autoClose:!0})]})};function M6({children:t}){return c.jsxs(c0,{children:[t,c.jsx(M0,{autoClose:!0})]})}function $6(){const t=nr(),{theme:e}=gt(),{userInfo:n}=bn(),{loading:r}=T0(),{adminSongs:i,userPlaylists:s}=vn(),{song:o}=bt(Ot),a=I0(),[l]=VR(po),[u,d]=h.useState([]),[f,p]=h.useState(!1),m=(E,S)=>{o.id!==E.id&&t(Xn({...E,currentIndex:S,song_in:"admin"}))},_=h.useMemo(()=>window.innerWidth<550,[]),w=()=>{l()},x=[...Array(1).keys()].map(E=>c.jsx(Ce,{className:"w-full h-[40px] mb-[10px]"},E)),y=[...Array(4).keys()].map(E=>c.jsxs("div",{className:"flex items-center p-[10px]",children:[c.jsx(Ce,{className:"h-[18px] w-[18px]"}),c.jsx(Ce,{className:"h-[54px] w-[54px] ml-[18px] rounded-[4px]"}),c.jsxs("div",{className:"ml-[10px]",children:[c.jsx(Ce,{className:"h-[20px] mb-[5px] w-[150px]"}),c.jsx(Ce,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},E)),g=h.useMemo(()=>i.map((E,S)=>{const I=E.id===o.id&&o.song_in==="admin";return _?c.jsx("div",{className:"w-full max-[549px]:w-full",children:c.jsx(yl,{theme:e,onClick:()=>m(E,S),active:I,data:E,isCheckedSong:f,selectedSongList:u,setIsCheckedSong:p,setSelectedSongList:d},S)},S):c.jsx("div",{className:"w-full max-[549px]:w-full",children:c.jsx(fd,{theme:e,onClick:()=>m(E,S),active:I,data:E,userInfo:n,isCheckedSong:f,userPlaylists:s,selectedSongList:u,setIsCheckedSong:p,setSelectedSongList:d,songItemActions:a},S)},S)}),[i,e,o]),v={icon:"w-6 h-6 mr-2 inline"};return c.jsxs(c.Fragment,{children:[_&&c.jsx("div",{className:"pb-[20px]",children:c.jsxs("div",{className:"flex flex-col gap-3 items-start ",children:[c.jsx("h1",{className:"text-[24px] font-bold",children:"Library"}),n.status==="loading"?x:c.jsx(c.Fragment,{children:n.email?c.jsx(c.Fragment,{children:c.jsx(Ib,{className:"py-[10px] border-b border-[#333]",to:ht.MySongs,icon:c.jsx(da,{className:v.icon+e.content_text}),label:"All songs",arrowIcon:c.jsx(KE,{className:"w-5 h-5 text-gray-500"})})}):c.jsx(ee,{onClick:w,className:`${e.content_bg} rounded-[4px] px-[40px]`,variant:"primary",children:"Login"})})]})}),c.jsxs("div",{className:"pb-[30px]",children:[c.jsx("h3",{className:"text-[24px] font-bold mb-[10px]",children:"Popular"}),r&&y,!r&&c.jsx(c.Fragment,{children:i.length?g:"No songs jet..."})]})]})}function V6(){const{theme:t}=gt(),[e,n]=h.useState(),[r,i]=h.useState({base:"",real_time:[]}),s=h.useRef(null),o=Mg(),a=us();return h.useEffect(()=>{(async()=>{try{const u=di(Dr(zt,"songs"),o==null?void 0:o.id),d=await Kc(u),f=d.data();if(f.by==="admin"&&a(ht.Home),f.lyric_id){const m=(await Kc(di(zt,"lyrics",f.lyric_id))).data();i(m)}n({...f,id:d.id})}catch(u){console.log({message:u})}})()},[]),c.jsxs("div",{className:"pt-[30px]",children:[c.jsx("audio",{ref:s,src:e&&e.song_url,className:"hidden"}),s.current&&e&&c.jsx(A6,{lyric:r,audioEle:s.current,theme:t,song:e})]})}function F6(){const{theme:t}=gt(),[e,n]=u0(po),[r,i]=h.useState([]),[s,o]=h.useState([]),[a,l]=h.useState(!1),[u,d]=h.useState(!1),[f,p]=h.useState("songs"),[m,_]=h.useState(!1),[w,x]=h.useState(!1),[y,g]=h.useState(""),[v,E]=h.useState([]),[S,I]=h.useState(),[T,R]=h.useState("setting"),C=h.useRef(null),A=h.useRef(""),k=h.useRef(null),z=us(),{addedSongIds:L,handleInputChange:F,status:ie,tempSongs:K}=TA({audioRef:C,message:A,admin:!0,songs:r,setSongs:i}),{refs:ce,floatingStyles:b,context:$}=Yl({open:a,onOpenChange:l,placement:"bottom-end",middleware:[$h(20),k0(),P0()],whileElementsMounted:ql}),U=Kl($),N=Ql($),D=L0($),{getReferenceProps:Q,getFloatingProps:Z}=Xl([U,N,D]),X=h.useMemo(()=>n?0:K.length+r.length,[K,r]),M=async()=>{try{console.log("get songs"),x(!0);const re=Os(Dr(zt,"songs"),js("by","==","admin")),ye=await Ls(re);if(ye.docs){const _e=ye.docs.map(un=>({...un.data(),id:un.id}));i(_e)}}catch(re){console.log(re),g("get users list error")}finally{x(!1)}},B=async()=>{console.log("get user");try{x(!0);const re=Os(Dr(zt,"users"),js("email","!=",e==null?void 0:e.email)),ye=await Ls(re);if(ye.docs){const _e=ye.docs.map(un=>un.data());console.log("get user",_e),o(_e)}}catch(re){console.log(re),g("get users list error")}finally{x(!1)}},he=()=>v.length?E([]):E(r),Ae=async()=>{try{const re=[...r];x(!0);for(let ye of v){await fh(ye);const _e=r.findIndex(un=>un.id===ye.id);re.splice(_e,1)}x(!1),i(re)}catch(re){console.log({message:re})}},fe=re=>{R(re),d(!0)},te=()=>r.map((re,ye)=>{const _e=v.length?v.some(un=>re.name===un.name):!1;return c.jsx(Y1,{inProcess:!1,data:re,adminSongs:r,setAdminSongs:i,isChecked:_e,selectedSongList:v,setSelectedSongList:E,theme:t},ye)}),Ie=()=>K.map((re,ye)=>{const _e=L.some(un=>un===re.id);return c.jsx(Y1,{data:re,theme:t,inProcess:!_e},ye)}),oe=()=>s.map((re,ye)=>c.jsxs("tr",{className:"",children:[c.jsx("td",{className:J.td,children:c.jsx("div",{className:"h-[44px] w-[44px] ml-[20px]",children:c.jsx(wi,{classNames:"rounded-[4px]",src:re.photoURL})})}),c.jsx("td",{className:J.td,children:re.display_name}),c.jsx("td",{className:J.td,children:re.email}),c.jsx("td",{className:J.td,children:N9(re==null?void 0:re.latest_seen)})]},ye)),W=h.useMemo(()=>bo({loading:w,label:`Delete '${v.length} songs'`,desc:"This action cannot be undone",theme:t,callback:Ae,setOpenModal:d}),[w,t,v]);h.useEffect(()=>{if(n)return;const re=async()=>{try{_(!0)}catch(ye){console.log(ye)}};if(!e)return z(ht.Home);re()},[e]),h.useEffect(()=>{n||!m||(f==="users"&&!s.length&&B(),f==="songs"&&!r.length&&M())},[f,m]);const H=`${t.type==="light"?"text-[#333]":"text-white"}`,J={inActiveBtn:`bg-${t.alpha} ${H}`,activeBtn:`${t.content_bg} ${H}`,td:`py-[10px] my-[10px] border-${t.alpha} border-b-[1px]`,th:"py-[5px]",tableContainer:`border border-${t.alpha} rounded-[4px] mt-[30px]`,tableHeader:`border-b border-${t.alpha} ${t.side_bar_bg} flex items-center h-[50px] gap-[15px]`};return c.jsxs(c.Fragment,{children:[c.jsx("input",{onChange:F,type:"file",multiple:!0,accept:".mp3",id:"file",className:"hidden"}),c.jsx("audio",{ref:C,className:"hidden"}),!n&&c.jsxs("div",{className:`${t.container} ${H} min-h-screen`,children:[c.jsx("div",{className:`${t.side_bar_bg} `,children:c.jsxs("div",{className:"container mx-auto flex justify-between items-center h-[50px]",children:[c.jsx("h1",{className:"text-[20px] uppercase",children:"Zing dash board"}),c.jsxs("div",{className:"flex items-center",children:[(e==null?void 0:e.displayName)&&c.jsx("p",{className:"text-[14px] mr-[8px]",children:e.displayName}),c.jsx("div",{className:"w-[30px] h-[30px] rounded-full overflow-hidden border-[#ccc] border",children:(e==null?void 0:e.photoURL)&&c.jsx("img",{src:e.photoURL,className:"w-full",alt:""})}),c.jsx("button",{ref:ce.setReference,...Q(),className:`flex ml-[12px] justify-center rounded-full items-center h-[30px] w-[30px] hover:brightness-75  ${a&&t.content_text} bg-${t.alpha}`,children:c.jsx(Fg,{className:"w-[24px]"})})]})]})}),c.jsxs("div",{className:"container mx-auto mt-[30px] pb-[60px]",children:[c.jsxs("div",{className:"",children:[c.jsx(ee,{onClick:()=>p("songs"),className:`${f==="songs"?J.activeBtn:J.inActiveBtn}  rounded-full`,variant:"primary",children:"Songs"}),c.jsx(ee,{onClick:()=>p("users"),className:` ${f==="users"?J.activeBtn:J.inActiveBtn} rounded-full ml-[10px]`,variant:"primary",children:"Users"})]}),y&&c.jsx("p",{children:y}),c.jsxs("div",{className:J.tableContainer,children:[c.jsx("div",{className:J.tableHeader,children:v.length?c.jsxs(c.Fragment,{children:[c.jsxs("h2",{className:"ml-[20px]",children:[v.length," selected"]}),c.jsxs("div",{className:"flex items-stretch gap-[12px]",children:[c.jsx(ee,{onClick:()=>fe("confirm"),variant:"primary",className:`${J.activeBtn} rounded-full`,children:"Delete"}),c.jsx(ee,{onClick:()=>E([]),variant:"primary",className:`${J.activeBtn} rounded-full`,children:c.jsx(Dn,{className:"w-[20px]"})})]})]}):c.jsx("label",{className:`${t.content_bg} ${H} ${ie==="uploading"?"opacity-60 pointer-events-none":""} rounded-full ml-[auto] mr-[10px] px-[20px] py-[4px] cursor-pointer`,htmlFor:"file",children:"Upload"})}),f==="songs"&&c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:`${t.bottom_player_bg} w-full text-[14px]`,children:c.jsxs("tr",{children:[c.jsx("th",{className:`${J.th} w-[10%]`,children:c.jsx("input",{className:"scale-[1.2]",onChange:()=>he(),ref:k,checked:r.length?r.length===v.length:!1,type:"checkbox"})}),c.jsx("th",{}),c.jsx("th",{className:`${J.th} text-left`,children:"Name"}),c.jsx("th",{className:`${J.th} text-left`,children:"Singer"}),c.jsx("th",{className:`${J.th} text-left`,children:"Action"})]})}),c.jsx("tbody",{children:X?c.jsxs(c.Fragment,{children:[!!r.length&&te(),!!K.length&&Ie()]}):w?c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:`${J.td} text-center`,children:c.jsx("p",{children:"...Loading"})})}):c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:`${J.td} text-center`,children:c.jsx("p",{children:"No song jet..."})})})})]}),f==="users"&&c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"text-[14px]",children:c.jsxs("tr",{children:[c.jsx("th",{}),c.jsx("th",{className:"text-left",children:"Name"}),c.jsx("th",{className:"text-left",children:"Email"}),c.jsx("th",{className:"text-left",children:"Latest Seen"})]})}),c.jsx("tbody",{children:oe()})]})]})]})]}),a&&c.jsx(Gl,{context:$,modal:!1,children:c.jsx("div",{className:"z-[99]",ref:ce.setFloating,style:b,...Z(),children:c.jsx(D0,{loggedIn:!!(e!=null&&e.email),setIsOpenMenu:l,setIsOpenSetting:d,setSettingComp:I,setModalName:R})})}),u&&c.jsx(Si,{setOpenModal:d,children:c.jsxs(Cn,{theme:t,children:[T==="setting"&&S,T==="confirm"&&W]})})]})}function U6(){const t=nr(),e=Mg(),{theme:n}=gt(),{userInfo:r}=bn(),{setSuccessToast:i,setErrorToast:s}=tr(),{setActuallySongs:o}=Ul(),{userSongs:a,userPlaylists:l,setUserPlaylists:u,setUserSongs:d,adminSongs:f}=vn(),{song:p,playlist:m}=bt(Ot),[_,w]=h.useState(!1),x=h.useRef(!0),y=us(),{playlistSongs:g,loading:v}=D9({firstTimeRender:x,playlistInStore:m,songInStore:p}),{setPlaylistDocAndSetUserPlaylists:E}=I0(),[S,I]=h.useState(!1),[T,R]=h.useState(),[C,A]=h.useState([]),[k,z]=h.useState(!1),[L,F]=h.useState(m.name),ie=(te,Ie)=>{if(p.id!==te.id||!p.song_in.includes(m.name)){const oe=m.by==="admin"?`admin-playlist-${m.name}`:`user-playlist-${m.name}`;t(Xn({...te,currentIndex:Ie,song_in:oe})),p.song_in.includes(m.name)||o(g)}},K=()=>{const te=g[0];p.song_in.includes(e.name)||ie(te,0)},ce=h.useCallback(async te=>{const Ie=[...g,...te],oe=[...a],W=[];for(let J of te){const{error:re,newSong:ye}=ZA(J,m);if(re){s({message:"handleSongWhenDeleteFromPlaylist error"});return}else ye&&(W.push(ye),ea(ye,oe))}const H=zf({newPlaylistSongs:Ie,existingPlaylist:m});if(H.count<0||H.time<0||H.song_ids.length===m.song_ids.length){s({message:"New playlist data error"});return}d(oe),await E({newPlaylist:H}),W.forEach(async J=>{await Ct({collection:"songs",data:J,id:J.id})}),D(),i({message:`${te.length} songs added`})},[C,S]),b=async te=>{if(!m.song_ids){s({});return}const Ie=[...a],oe=[...g],{error:W,newSong:H}=_w(te,m);if(W||!H){s({message:"Handle song when delete from playlist error"});return}ea(H,Ie);const J=oe.findIndex(ye=>ye.id===te.id);oe.splice(J,1);const re=zf({newPlaylistSongs:oe,existingPlaylist:m});if(re.count<0||re.time<0||re.song_ids.length===m.song_ids.length){s({message:"New playlist data error"});return}d(Ie),await Ct({collection:"songs",data:H,id:H.id}),await E({newPlaylist:re}),i({message:`'${te.name}' removed`})},$=async()=>{if(!m.song_ids){s({});return}if(C.length===1)return b(C[0]);const te=[...g],Ie=[...a],oe=[];for(let H of C){const J=te.findIndex(_e=>_e.id===H.id);te.splice(J,1);const{error:re,newSong:ye}=_w(H,m);re?s({message:"handleSongWhenDeleteFromPlaylist error"}):ye&&(oe.push(ye),ea(ye,Ie))}const W=zf({newPlaylistSongs:te,existingPlaylist:m});if(W.count<0||W.time<0||W.song_ids.length===m.song_ids.length){s({message:"New playlist data error"});return}d(Ie),oe.forEach(async H=>{console.log("update doc",H.name)}),await E({newPlaylist:W}),i({message:`${C.length} songs removed`})},U=async()=>{try{w(!0);const te=[...l];let Ie=[],oe=[];if(g.length){oe=[...a];const{error:H,songsNeedToUpdate:J}=O6(m,g);if(H){D(),s({});return}Ie=J}if(Ie.length)for(let H of Ie)ea(H,oe),await Ct({collection:"songs",data:H,id:H.id});const W=te.findIndex(H=>H.id===m.id);te.splice(W,1),u(te,[]),Ie.length&&d(oe),await O$({collection:"playlist",id:m.id}),await NR(te,r),w(!1),I(!1),t(Fl({id:"",name:"",song_ids:[],time:0,count:0,by:"",image_by:"",image_file_path:"",image_url:""})),i({message:`${m.name} deleted`}),y(`${ht.Playlist}`)}catch{s({})}},N=te=>{R(te),I(!0)},D=()=>{w(!1),I(!1),z(!1),A([])},Q=h.useMemo(()=>g.length,[g]),Z=h.useMemo(()=>window.innerWidth<550,[]),X={addSongContainer:"pb-[50px] relative",addSongContent:"max-h-[calc(90vh-50px)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full max-[549px]:w-full",editContainer:"w-[700px] max-w-[90vw] max-h-[90vh]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full",button:`${n.content_bg} rounded-full`,playListTop:"w-full flex max-[549px]:flex-col max-[549px]:gap-[12px]",playlistInfoContainer:"ml-[15px] flex flex-col justify-between max-[549px]:ml-0 max-[549px]:mb-[30px] max-[549px]:gap-[12px]",songListContainer:"h-[50px] mb-[10px] flex gap-[20px] max-[549px]:gap-[12px] items-center border-b",countSongText:"text-[14px]] font-semibold text-gray-500 w-[100px]",buttonAddSongContainer:"w-full text-center mt-[30px]"},M=h.useMemo(()=>g.map((te,Ie)=>{const oe=te.id===p.id&&p.song_in.includes(m.name);return Z?c.jsx("div",{className:"w-full max-[549px]:w-full",children:c.jsx(yl,{theme:n,onClick:()=>ie(te,Ie),active:oe,data:te,isCheckedSong:k,selectedSongList:C,setIsCheckedSong:z,setSelectedSongList:A},Ie)},Ie):c.jsx("div",{className:"w-full max-[549px]:w-full",children:c.jsx(fd,{isCheckedSong:k&&!S,setIsCheckedSong:z,selectedSongList:C,setSelectedSongList:A,deleteFromPlaylist:b,userInfo:r,userSongs:a,setUserSongs:d,onClick:()=>ie(te,Ie),theme:n,active:oe,data:te,inPlaylist:!0})},Ie)}),[m.name,p,g,k,C]),B=c.jsxs("div",{className:X.editContainer,children:[c.jsx("label",{htmlFor:"",className:"text-[18px] font-semibold",children:"Name:"}),c.jsx("input",{value:L,onChange:te=>F(te.target.value),type:"text",className:`${X.input} bg-${n.alpha} ${n.type==="light"?"text-[#333]":"text-white"}`}),c.jsx(ee,{variant:"primary",className:`${n.content_bg} rounded-full self-end mt-[15px]`,children:"Save"})]}),he=h.useMemo(()=>bo({loading:_,label:"Delete playlist ?",theme:n,callback:U,setOpenModal:I}),[_,n]),Ae=c.jsxs("div",{className:"flex max-[549px]:flex-col max-[549px]:gap-[12px]",children:[c.jsx("div",{className:"w-1/4 max-[549px]:w-full max-[549px]:px-[20px]",children:c.jsx(Ce,{className:"pt-[100%] rounded-[8px]"})}),c.jsxs("div",{className:"min-[550px]:ml-[15px] max-[549px]:flex max-[549px]:mb-[30px] justify-between",children:[c.jsx(Ce,{className:"h-[30px]  w-[100px]"}),c.jsx(Ce,{className:"h-[20px] mt-[9px] w-[100px]"}),!Z&&c.jsxs(c.Fragment,{children:[c.jsx(Ce,{className:"h-[20px] mt-[9px] w-[100px]"}),c.jsx(Ce,{className:"h-[15px] mt-[9px] w-[200px]"})]})]})]}),fe=[...Array(4).keys()].map(te=>c.jsxs("div",{className:"flex p-[10px]",children:[c.jsx(Ce,{className:"h-[54px] w-[54px] ml-[33px] rounded-[4px]"}),c.jsxs("div",{className:"ml-[10px]",children:[c.jsx(Ce,{className:"h-[20px] mb-[5px] w-[150px]"}),c.jsx(Ce,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},te));return c.jsxs(c.Fragment,{children:[Z&&c.jsxs(si,{to:ht.Home,className:"inline-flex items-center mb-[30px] hover:opacity-75",children:[c.jsx("button",{className:"",children:c.jsx(Vg,{className:"w-[25px]"})}),c.jsx("span",{className:"text-[20px] font-semibold leading-1",children:"My songs"})]}),v&&Ae,!v&&!!m.name&&c.jsxs("div",{className:X.playListTop,children:[c.jsx("div",{className:"w-1/4 max-[549px]:w-full max-[549px]:px-[20px]",children:c.jsx($m,{data:m,inDetail:!0,theme:n})}),c.jsx("div",{className:X.playlistInfoContainer,children:c.jsxs("div",{className:"max-[549px]:flex justify-between items-center gap-[12px]",children:[c.jsxs("h3",{className:"text-[20px] font-semibold max-[549px]:text-[30px] leading-1",children:[m.name,c.jsx("button",{onClick:()=>N("edit"),className:"p-[5px]",children:c.jsx(Ug,{className:"w-[20px]"})})]}),c.jsx("p",{className:"text-[16px]",children:td(m==null?void 0:m.time)}),c.jsxs("p",{className:"text-[14px] opacity-60 max-[549px]:hidden",children:["create by ",m.by]})]})})]}),c.jsxs("div",{className:"flex items-center mt-[15px] gap-[12px] max-[549px]:justify-center",children:[c.jsxs(ee,{onClick:()=>K(),className:`rounded-full px-[20px] py-[6px] ${n.content_bg} ${!m.song_ids.length&&"opacity-60 pointer-events-none"}`,children:["Play",c.jsx(ZN,{className:"ml-[5px] w-[25px]"})]}),c.jsx(ee,{onClick:()=>N("confirm"),className:`p-[8px] rounded-full ${n.content_hover_bg} bg-${n.alpha}`,children:c.jsx(Bg,{className:"w-[25px]"})})]}),c.jsxs("div",{className:"pb-[50px]",children:[c.jsxs("div",{className:`${X.songListContainer} border-${n.alpha}`,children:[v&&c.jsx(Ce,{className:"h-[20px] w-[150px]"}),k?c.jsx("p",{className:X.countSongText,children:C.length+" selected"}):c.jsx("p",{className:X.countSongText,children:Q+" songs"}),k&&a.length&&c.jsxs(c.Fragment,{children:[c.jsx(ee,{onClick:()=>A(g),variant:"primary",className:X.button,children:"All"}),c.jsx(ee,{onClick:()=>$(),variant:"primary",className:X.button,children:"Remove"}),c.jsx(ee,{onClick:()=>{z(!1),A([])},className:"p-[5px]",children:c.jsx(Dn,{className:"w-[20px]"})})]})]}),v&&fe,!v&&!!g.length&&M,(!!a.length||!!f.length)&&c.jsx("div",{className:X.buttonAddSongContainer,children:c.jsxs(ee,{onClick:()=>N("addSongs"),className:`${n.content_bg} rounded-full`,variant:"primary",children:[c.jsx(Fa,{className:"w-[30px] mr-[5px]"}),"Add song"]})})]}),S&&c.jsx(Si,{setOpenModal:D,children:c.jsxs(Cn,{theme:n,children:[T==="edit"&&B,T==="confirm"&&he,T==="addSongs"&&c.jsx(Pb,{theme:n,handleAddSongsToPlaylist:ce,playlistSongs:g})]})})]})}function B6(){const t=nr(),{theme:e}=gt(),{userInfo:n}=bn(),{setErrorToast:r,setSuccessToast:i}=tr(),{loading:s,errorMsg:o,initial:a}=T0(),{song:l,playlist:u}=bt(Ot),{userPlaylists:d,setUserSongs:f,setUserPlaylists:p,userSongs:m}=vn(),_=I0(),[w,x]=h.useState(!1),[y,g]=h.useState(!1),[v,E]=h.useState("ADD_PLAYLIST"),[S,I]=h.useState(""),[T,R]=h.useState([]),[C,A]=h.useState(!1),k=h.useRef(null),z=h.useRef(""),L=us(),{tempSongs:F,addedSongIds:ie,status:K,handleInputChange:ce}=TA({audioRef:k,message:z}),b=W=>{E(W),g(!0)},$=(W,H)=>{(l.id!==W.id||l.song_in!=="user")&&(console.log("set song"),t(Xn({...W,currentIndex:H,song_in:"user"})))},U=h.useMemo(()=>s||!a?0:F.length+m.length,[F,m,a,s]),N=h.useMemo(()=>window.innerWidth<550,[]),D=()=>{R([]),A(!1)},Q=()=>{x(!1),g(!1)},Z=async()=>{let W=!1;const H=[...m],J=[...d];try{x(!0);const re=[];for(let _e of T){if(_e.in_playlist.length){W=!0;const{error:Jl}=N6(_e,re,J);if(Jl){x(!1),Q(),r({message:"Error when handle playlist"});return}}const un=H.findIndex(Jl=>Jl.id===_e.id);H.splice(un,1)}for(let _e of re)Lh(_e,J),_e.id===u.id&&t(Fl(_e)),await Ct({collection:"playlist",data:_e,id:_e.id});W&&p(J,[]),f(H);for(let _e of T)await fh(_e);const ye=H.map(_e=>_e.id);bR({songIds:ye,userInfo:n}),D(),Q(),i({message:`${T.length} songs deleted`})}catch{r({message:"Catch error"})}},X=async()=>{const W=hA(S)+n.email.replace("@gmail.com","");if(!W||!S||!n){r({});return}const H={id:W,image_by:"",image_file_path:"",image_url:"",by:(n==null?void 0:n.email)||"users",name:S,song_ids:[],count:0,time:0},J=[...d,H];try{x(!0),await Ct({collection:"playlist",data:H,id:W}),await NR(J,n),p(J,[]),Q(),I(""),i({message:`'${S}' created`})}catch{r({})}},M=h.useMemo(()=>{if(F.length)return F.map((W,H)=>{const J=ie.some(re=>re===W.id);return c.jsx("div",{className:"w-full max-[549px]:w-full",children:c.jsx(fd,{theme:e,onClick:()=>$(W,H),inProcess:!J,data:W},H)},H)})},[F,ie,e]),B=h.useMemo(()=>{if(m.length)return m.map((W,H)=>{const J=W.id===l.id&&l.song_in==="user";return N?c.jsx("div",{className:"w-full max-[549px]:w-full",children:c.jsx(yl,{theme:e,onClick:()=>$(W,H),active:J,data:W,isCheckedSong:C,selectedSongList:T,setIsCheckedSong:A,setSelectedSongList:R},H)},H):c.jsx("div",{className:"w-full max-[549px]:w-full",children:c.jsx(fd,{theme:e,onClick:()=>$(W,H),active:J,data:W,userInfo:n,userSongs:m,userPlaylists:d,setUserSongs:f,setUserPlaylists:p,isCheckedSong:C,setIsCheckedSong:A,selectedSongList:T,setSelectedSongList:R,handleOpenParentModal:b,songItemActions:_},H)},H)})},[e,n,m,l,T,C,d]),he={button:`${e.content_bg} rounded-full`},Ae=h.useMemo(()=>bo({loading:w,label:"Wait a minute",theme:e,callback:Z,setOpenModal:g}),[w,e,T]),te={ADD_PLAYLIST:c.jsxs("div",{className:"w-[300px]",children:[c.jsx(ee,{className:"absolute top-2 right-2 text-white",onClick:()=>g(!1),children:c.jsx(Dn,{className:"w-6 h-6"})}),c.jsx("h2",{className:"text-[18px] font-semibold text-white",children:"Add Playlist"}),c.jsx("input",{className:`bg-${e.alpha} px-[20px] rounded-full outline-none mt-[10px] text-[16px]  h-[35px] w-full`,type:"text",placeholder:"name...",value:S,onChange:W=>I(W.target.value)}),c.jsx(ee,{isLoading:w,onClick:()=>X(),variant:"primary",className:`${he.button} mt-[15px]`,children:"Save"})]}),CONFIRM:Ae},Ie=[...Array(2).keys()].map(W=>c.jsxs("div",{className:"w-1/4 p-[8px] max-[459px]:w-1/2",children:[c.jsx(Ce,{className:"pt-[100%] rounded-[8px]"}),c.jsx(Ce,{className:"h-[20px] mt-[9px] w-[50%]"})]},W)),oe=[...Array(5).keys()].map(W=>c.jsxs("div",{className:"flex items-center p-[10px]",children:[c.jsx(Ce,{className:"h-[18px] w-[18px]"}),c.jsx(Ce,{className:"h-[54px] w-[54px] ml-[10px] rounded-[4px]"}),c.jsxs("div",{className:"ml-[10px]",children:[c.jsx(Ce,{className:"h-[20px] mb-[5px] w-[150px]"}),c.jsx(Ce,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},W));return h.useEffect(()=>{if(!n.email){L(ht.Home);return}},[n]),o?c.jsx("h1",{children:o}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"pb-[30px] ",children:[N&&c.jsxs(si,{to:ht.Home,className:"inline-flex items-center mb-[30px] hover:opacity-75",children:[c.jsx("button",{className:"",children:c.jsx(Vg,{className:"w-[25px]"})}),c.jsx("span",{className:"text-[20px] font-semibold leading-1",children:"Home"})]}),c.jsx("h3",{className:"text-2xl font-bold mb-[10px]",children:"Playlist"}),c.jsxs("div",{className:"flex flex-row flex-wrap",children:[!!d.length&&!s&&d.map((W,H)=>c.jsx("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:N?c.jsx(si,{to:`${ht.Playlist}/${W.id}`,children:c.jsx($m,{data:W})}):c.jsx($m,{theme:e,data:W})},H)),!s&&c.jsx("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2 mb-[25px]",children:c.jsx(Tb,{theme:e,className:"pt-[100%]",onClick:()=>b("ADD_PLAYLIST")})}),s&&Ie]})]}),c.jsxs("div",{className:"pb-[30px] max-[549px]:pb-[80px]",children:[c.jsxs("div",{className:"flex justify-between mb-[10px]",children:[c.jsx("h3",{className:"text-2xl font-bold",children:"Songs"}),c.jsx("input",{onChange:ce,type:"file",multiple:!0,accept:".mp3",id:"file",className:"hidden"}),c.jsx("audio",{ref:k,className:"hidden"}),c.jsx("div",{className:"flex items-center",children:c.jsxs("label",{className:`${e.content_bg} ${K==="uploading"||s?"opacity-60 pointer-events-none":""} rounded-full flex px-[20px] py-[4px] text-white cursor-pointer`,htmlFor:"file",children:[c.jsx(Fa,{className:"w-[20px] mr-[5px]"}),"Upload"]})})]}),c.jsxs("div",{className:`flex gap-[12px] items-center border-b border-${e.alpha} h-[50px] mb-[10px]`,children:[s&&c.jsx(Ce,{className:"h-[20px] w-[150px]"}),!s&&c.jsx(c.Fragment,{children:C?c.jsx("p",{className:"text-[14px]] font-semibold text-gray-500 w-[100px]",children:T.length+" selected"}):c.jsx("p",{className:"text-[14px]] font-semibold text-gray-500 w-[100px]",children:(U||0)+" songs"})}),C&&m.length&&c.jsxs(c.Fragment,{children:[c.jsx(ee,{onClick:()=>R(m),variant:"primary",className:he.button,children:"All"}),c.jsx(ee,{onClick:()=>b("CONFIRM"),variant:"primary",className:he.button,children:"Delete"}),c.jsx(ee,{onClick:()=>{A(!1),R([])},className:"px-[5px]",children:c.jsx(Dn,{className:"w-[25px]"})})]})]}),c.jsxs("div",{className:"-mx-[8px] min-h-[50vh]",children:[U&&!s?c.jsxs(c.Fragment,{children:[!!m.length&&B,!!F.length&&M]}):!s&&c.jsx("p",{children:"No songs jet..."}),s&&oe]})]}),y&&c.jsx(Si,{setOpenModal:g,children:c.jsx(Cn,{theme:e,children:te[v]})})]})}const ht={Home:"/React-Zingmp3",Dashboard:"/React-Zingmp3/dashboard",MySongs:"/React-Zingmp3/mysongs",MobileMySongs:"/React-Zingmp3/mobile-mysongs",Playlist:"/React-Zingmp3/mysongs/playlist",Edit:"/React-Zingmp3/edit/:id"},z6=[{path:ht.Home,component:$6,layout:""},{path:ht.Dashboard,component:F6,layout:M6},{path:ht.MySongs,component:B6,layout:""},{path:`${ht.Playlist}/:id`,component:U6,layout:""},{path:ht.Edit,component:V6,layout:D6}],W6=({children:t})=>{const{theme:e}=gt(),n={container:"w-full overflow-y-auto overflow-x-hidden h-[calc(100vh-90px)] max-[549px]:h-full max-[549px]:pb-[70px]",content:"px-[40px] max-[549px]:px-[15px]",page:`min-h-screen flex ${e.type==="dark"?"text-white":"text-[#333]"} ${e.container}`};return c.jsx(c0,{children:c.jsxs("div",{className:n.page,children:[window.innerWidth>=550&&c.jsx(YA,{}),c.jsxs("div",{className:n.container,children:[c.jsx("div",{className:"h-[200px]"}),c.jsx("div",{className:n.content,children:t})]}),c.jsx(P6,{}),c.jsx(M0,{autoClose:!0})]})})};function H6(){return c.jsx(wP,{children:c.jsx(pP,{children:z6.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=W6,c.jsx(zE,{path:t.path,element:c.jsx(n,{children:c.jsx(r,{})})},e)})})})}const q6=m9({reducer:{song:A9}});Yf.createRoot(document.getElementById("root")).render(c.jsx(kw.StrictMode,{children:c.jsx(U$,{children:c.jsx(CP,{theme:WE,children:c.jsx(kb,{songsStore:ZE,children:c.jsx(jV,{store:q6,children:c.jsx(M$,{children:c.jsx(P9,{children:c.jsx(H6,{})})})})})})})}));
