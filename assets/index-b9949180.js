function sC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function oC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var E1={exports:{}},pd={},S1={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dl=Symbol.for("react.element"),aC=Symbol.for("react.portal"),lC=Symbol.for("react.fragment"),cC=Symbol.for("react.strict_mode"),uC=Symbol.for("react.profiler"),dC=Symbol.for("react.provider"),hC=Symbol.for("react.context"),fC=Symbol.for("react.forward_ref"),pC=Symbol.for("react.suspense"),mC=Symbol.for("react.memo"),gC=Symbol.for("react.lazy"),Fv=Symbol.iterator;function yC(t){return t===null||typeof t!="object"?null:(t=Fv&&t[Fv]||t["@@iterator"],typeof t=="function"?t:null)}var T1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I1=Object.assign,R1={};function vo(t,e,n){this.props=t,this.context=e,this.refs=R1,this.updater=n||T1}vo.prototype.isReactComponent={};vo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function A1(){}A1.prototype=vo.prototype;function qm(t,e,n){this.props=t,this.context=e,this.refs=R1,this.updater=n||T1}var Km=qm.prototype=new A1;Km.constructor=qm;I1(Km,vo.prototype);Km.isPureReactComponent=!0;var Uv=Array.isArray,C1=Object.prototype.hasOwnProperty,Gm={current:null},b1={key:!0,ref:!0,__self:!0,__source:!0};function k1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)C1.call(e,r)&&!b1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:dl,type:t,key:s,ref:o,props:i,_owner:Gm.current}}function vC(t,e){return{$$typeof:dl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qm(t){return typeof t=="object"&&t!==null&&t.$$typeof===dl}function _C(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Bv=/\/+/g;function Bh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?_C(""+t.key):e.toString(36)}function Pc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case dl:case aC:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Bh(o,0):r,Uv(i)?(n="",t!=null&&(n=t.replace(Bv,"$&/")+"/"),Pc(i,e,n,"",function(c){return c})):i!=null&&(Qm(i)&&(i=vC(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Bv,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Uv(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Bh(s,a);o+=Pc(s,e,n,l,i)}else if(l=yC(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Bh(s,a++),o+=Pc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ec(t,e,n){if(t==null)return t;var r=[],i=0;return Pc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function wC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ut={current:null},Nc={transition:null},xC={ReactCurrentDispatcher:Ut,ReactCurrentBatchConfig:Nc,ReactCurrentOwner:Gm};ge.Children={map:ec,forEach:function(t,e,n){ec(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ec(t,function(){e++}),e},toArray:function(t){return ec(t,function(e){return e})||[]},only:function(t){if(!Qm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=vo;ge.Fragment=lC;ge.Profiler=uC;ge.PureComponent=qm;ge.StrictMode=cC;ge.Suspense=pC;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xC;ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=I1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Gm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)C1.call(e,l)&&!b1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:dl,type:t.type,key:i,ref:s,props:r,_owner:o}};ge.createContext=function(t){return t={$$typeof:hC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:dC,_context:t},t.Consumer=t};ge.createElement=k1;ge.createFactory=function(t){var e=k1.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:fC,render:t}};ge.isValidElement=Qm;ge.lazy=function(t){return{$$typeof:gC,_payload:{_status:-1,_result:t},_init:wC}};ge.memo=function(t,e){return{$$typeof:mC,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=Nc.transition;Nc.transition={};try{t()}finally{Nc.transition=e}};ge.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ge.useCallback=function(t,e){return Ut.current.useCallback(t,e)};ge.useContext=function(t){return Ut.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return Ut.current.useDeferredValue(t)};ge.useEffect=function(t,e){return Ut.current.useEffect(t,e)};ge.useId=function(){return Ut.current.useId()};ge.useImperativeHandle=function(t,e,n){return Ut.current.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return Ut.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return Ut.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return Ut.current.useMemo(t,e)};ge.useReducer=function(t,e,n){return Ut.current.useReducer(t,e,n)};ge.useRef=function(t){return Ut.current.useRef(t)};ge.useState=function(t){return Ut.current.useState(t)};ge.useSyncExternalStore=function(t,e,n){return Ut.current.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return Ut.current.useTransition()};ge.version="18.2.0";S1.exports=ge;var h=S1.exports;const P1=oC(h),Ym=sC({__proto__:null,default:P1},[h]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EC=h,SC=Symbol.for("react.element"),TC=Symbol.for("react.fragment"),IC=Object.prototype.hasOwnProperty,RC=EC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AC={key:!0,ref:!0,__self:!0,__source:!0};function N1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)IC.call(e,r)&&!AC.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:SC,type:t,key:s,ref:o,props:i,_owner:RC.current}}pd.Fragment=TC;pd.jsx=N1;pd.jsxs=N1;E1.exports=pd;var d=E1.exports;var np={},O1={exports:{}},on={},j1={exports:{}},L1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,L){var M=P.length;P.push(L);e:for(;0<M;){var O=M-1>>>1,z=P[O];if(0<i(z,L))P[O]=L,P[M]=z,M=O;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var L=P[0],M=P.pop();if(M!==L){P[0]=M;e:for(var O=0,z=P.length,X=z>>>1;O<X;){var V=2*(O+1)-1,$=P[V],W=V+1,te=P[W];if(0>i($,M))W<z&&0>i(te,$)?(P[O]=te,P[W]=M,O=W):(P[O]=$,P[V]=M,O=V);else if(W<z&&0>i(te,M))P[O]=te,P[W]=M,O=W;else break e}}return L}function i(P,L){var M=P.sortIndex-L.sortIndex;return M!==0?M:P.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,v=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(P){for(var L=n(c);L!==null;){if(L.callback===null)r(c);else if(L.startTime<=P)r(c),L.sortIndex=L.expirationTime,e(l,L);else break;L=n(c)}}function x(P){if(w=!1,_(P),!v)if(n(l)!==null)v=!0,U(S);else{var L=n(c);L!==null&&re(x,L.startTime-P)}}function S(P,L){v=!1,w&&(w=!1,y(I),I=-1),m=!0;var M=p;try{for(_(L),f=n(l);f!==null&&(!(f.expirationTime>L)||P&&!b());){var O=f.callback;if(typeof O=="function"){f.callback=null,p=f.priorityLevel;var z=O(f.expirationTime<=L);L=t.unstable_now(),typeof z=="function"?f.callback=z:f===n(l)&&r(l),_(L)}else r(l);f=n(l)}if(f!==null)var X=!0;else{var V=n(c);V!==null&&re(x,V.startTime-L),X=!1}return X}finally{f=null,p=M,m=!1}}var T=!1,R=null,I=-1,C=5,A=-1;function b(){return!(t.unstable_now()-A<C)}function F(){if(R!==null){var P=t.unstable_now();A=P;var L=!0;try{L=R(!0,P)}finally{L?N():(T=!1,R=null)}}else T=!1}var N;if(typeof g=="function")N=function(){g(F)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,J=Y.port2;Y.port1.onmessage=F,N=function(){J.postMessage(null)}}else N=function(){E(F,0)};function U(P){R=P,T||(T=!0,N())}function re(P,L){I=E(function(){P(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,U(S))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(P){switch(p){case 1:case 2:case 3:var L=3;break;default:L=p}var M=p;p=L;try{return P()}finally{p=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,L){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var M=p;p=P;try{return L()}finally{p=M}},t.unstable_scheduleCallback=function(P,L,M){var O=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?O+M:O):M=O,P){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=M+z,P={id:u++,callback:L,priorityLevel:P,startTime:M,expirationTime:z,sortIndex:-1},M>O?(P.sortIndex=M,e(c,P),n(l)===null&&P===n(c)&&(w?(y(I),I=-1):w=!0,re(x,M-O))):(P.sortIndex=z,e(l,P),v||m||(v=!0,U(S))),P},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(P){var L=p;return function(){var M=p;p=L;try{return P.apply(this,arguments)}finally{p=M}}}})(L1);j1.exports=L1;var CC=j1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D1=h,tn=CC;function j(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var M1=new Set,Ea={};function is(t,e){Xs(t,e),Xs(t+"Capture",e)}function Xs(t,e){for(Ea[t]=e,t=0;t<e.length;t++)M1.add(e[t])}var pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rp=Object.prototype.hasOwnProperty,bC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zv={},Wv={};function kC(t){return rp.call(Wv,t)?!0:rp.call(zv,t)?!1:bC.test(t)?Wv[t]=!0:(zv[t]=!0,!1)}function PC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function NC(t,e,n,r){if(e===null||typeof e>"u"||PC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){vt[t]=new Bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];vt[e]=new Bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){vt[t]=new Bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){vt[t]=new Bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){vt[t]=new Bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){vt[t]=new Bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){vt[t]=new Bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){vt[t]=new Bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){vt[t]=new Bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xm=/[\-:]([a-z])/g;function Jm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xm,Jm);vt[e]=new Bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xm,Jm);vt[e]=new Bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xm,Jm);vt[e]=new Bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){vt[t]=new Bt(t,1,!1,t.toLowerCase(),null,!1,!1)});vt.xlinkHref=new Bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){vt[t]=new Bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zm(t,e,n,r){var i=vt.hasOwnProperty(e)?vt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(NC(e,n,i,r)&&(n=null),r||i===null?kC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ir=D1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tc=Symbol.for("react.element"),ws=Symbol.for("react.portal"),xs=Symbol.for("react.fragment"),eg=Symbol.for("react.strict_mode"),ip=Symbol.for("react.profiler"),$1=Symbol.for("react.provider"),V1=Symbol.for("react.context"),tg=Symbol.for("react.forward_ref"),sp=Symbol.for("react.suspense"),op=Symbol.for("react.suspense_list"),ng=Symbol.for("react.memo"),br=Symbol.for("react.lazy"),F1=Symbol.for("react.offscreen"),Hv=Symbol.iterator;function Oo(t){return t===null||typeof t!="object"?null:(t=Hv&&t[Hv]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,zh;function Wo(t){if(zh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zh=e&&e[1]||""}return`
`+zh+t}var Wh=!1;function Hh(t,e){if(!t||Wh)return"";Wh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Wh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wo(t):""}function OC(t){switch(t.tag){case 5:return Wo(t.type);case 16:return Wo("Lazy");case 13:return Wo("Suspense");case 19:return Wo("SuspenseList");case 0:case 2:case 15:return t=Hh(t.type,!1),t;case 11:return t=Hh(t.type.render,!1),t;case 1:return t=Hh(t.type,!0),t;default:return""}}function ap(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xs:return"Fragment";case ws:return"Portal";case ip:return"Profiler";case eg:return"StrictMode";case sp:return"Suspense";case op:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case V1:return(t.displayName||"Context")+".Consumer";case $1:return(t._context.displayName||"Context")+".Provider";case tg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ng:return e=t.displayName||null,e!==null?e:ap(t.type)||"Memo";case br:e=t._payload,t=t._init;try{return ap(t(e))}catch{}}return null}function jC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ap(e);case 8:return e===eg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ii(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function U1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function LC(t){var e=U1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nc(t){t._valueTracker||(t._valueTracker=LC(t))}function B1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=U1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function tu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lp(t,e){var n=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ii(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function z1(t,e){e=e.checked,e!=null&&Zm(t,"checked",e,!1)}function cp(t,e){z1(t,e);var n=ii(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?up(t,e.type,n):e.hasOwnProperty("defaultValue")&&up(t,e.type,ii(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Kv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function up(t,e,n){(e!=="number"||tu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ho=Array.isArray;function Ms(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ii(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function dp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(j(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(j(92));if(Ho(n)){if(1<n.length)throw Error(j(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ii(n)}}function W1(t,e){var n=ii(e.value),r=ii(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Qv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function H1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?H1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rc,q1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rc=rc||document.createElement("div"),rc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Sa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ta={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DC=["Webkit","ms","Moz","O"];Object.keys(ta).forEach(function(t){DC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ta[e]=ta[t]})});function K1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ta.hasOwnProperty(t)&&ta[t]?(""+e).trim():e+"px"}function G1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=K1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var MC=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fp(t,e){if(e){if(MC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(j(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(j(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(j(61))}if(e.style!=null&&typeof e.style!="object")throw Error(j(62))}}function pp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mp=null;function rg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gp=null,$s=null,Vs=null;function Yv(t){if(t=pl(t)){if(typeof gp!="function")throw Error(j(280));var e=t.stateNode;e&&(e=_d(e),gp(t.stateNode,t.type,e))}}function Q1(t){$s?Vs?Vs.push(t):Vs=[t]:$s=t}function Y1(){if($s){var t=$s,e=Vs;if(Vs=$s=null,Yv(t),e)for(t=0;t<e.length;t++)Yv(e[t])}}function X1(t,e){return t(e)}function J1(){}var qh=!1;function Z1(t,e,n){if(qh)return t(e,n);qh=!0;try{return X1(t,e,n)}finally{qh=!1,($s!==null||Vs!==null)&&(J1(),Y1())}}function Ta(t,e){var n=t.stateNode;if(n===null)return null;var r=_d(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var yp=!1;if(pr)try{var jo={};Object.defineProperty(jo,"passive",{get:function(){yp=!0}}),window.addEventListener("test",jo,jo),window.removeEventListener("test",jo,jo)}catch{yp=!1}function $C(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var na=!1,nu=null,ru=!1,vp=null,VC={onError:function(t){na=!0,nu=t}};function FC(t,e,n,r,i,s,o,a,l){na=!1,nu=null,$C.apply(VC,arguments)}function UC(t,e,n,r,i,s,o,a,l){if(FC.apply(this,arguments),na){if(na){var c=nu;na=!1,nu=null}else throw Error(j(198));ru||(ru=!0,vp=c)}}function ss(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ex(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Xv(t){if(ss(t)!==t)throw Error(j(188))}function BC(t){var e=t.alternate;if(!e){if(e=ss(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Xv(i),t;if(s===r)return Xv(i),e;s=s.sibling}throw Error(j(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function tx(t){return t=BC(t),t!==null?nx(t):null}function nx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=nx(t);if(e!==null)return e;t=t.sibling}return null}var rx=tn.unstable_scheduleCallback,Jv=tn.unstable_cancelCallback,zC=tn.unstable_shouldYield,WC=tn.unstable_requestPaint,Ke=tn.unstable_now,HC=tn.unstable_getCurrentPriorityLevel,ig=tn.unstable_ImmediatePriority,ix=tn.unstable_UserBlockingPriority,iu=tn.unstable_NormalPriority,qC=tn.unstable_LowPriority,sx=tn.unstable_IdlePriority,md=null,qn=null;function KC(t){if(qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot(md,t,void 0,(t.current.flags&128)===128)}catch{}}var Cn=Math.clz32?Math.clz32:YC,GC=Math.log,QC=Math.LN2;function YC(t){return t>>>=0,t===0?32:31-(GC(t)/QC|0)|0}var ic=64,sc=4194304;function qo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function su(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=qo(a):(s&=o,s!==0&&(r=qo(s)))}else o=n&~i,o!==0?r=qo(o):s!==0&&(r=qo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Cn(e),i=1<<n,r|=t[n],e&=~i;return r}function XC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Cn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=XC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function _p(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ox(){var t=ic;return ic<<=1,!(ic&4194240)&&(ic=64),t}function Kh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Cn(e),t[e]=n}function ZC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Cn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function sg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Cn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var xe=0;function ax(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var lx,og,cx,ux,dx,wp=!1,oc=[],Wr=null,Hr=null,qr=null,Ia=new Map,Ra=new Map,Pr=[],eb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zv(t,e){switch(t){case"focusin":case"focusout":Wr=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":qr=null;break;case"pointerover":case"pointerout":Ia.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ra.delete(e.pointerId)}}function Lo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=pl(e),e!==null&&og(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function tb(t,e,n,r,i){switch(e){case"focusin":return Wr=Lo(Wr,t,e,n,r,i),!0;case"dragenter":return Hr=Lo(Hr,t,e,n,r,i),!0;case"mouseover":return qr=Lo(qr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ia.set(s,Lo(Ia.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ra.set(s,Lo(Ra.get(s)||null,t,e,n,r,i)),!0}return!1}function hx(t){var e=Ci(t.target);if(e!==null){var n=ss(e);if(n!==null){if(e=n.tag,e===13){if(e=ex(n),e!==null){t.blockedOn=e,dx(t.priority,function(){cx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);mp=r,n.target.dispatchEvent(r),mp=null}else return e=pl(n),e!==null&&og(e),t.blockedOn=n,!1;e.shift()}return!0}function e0(t,e,n){Oc(t)&&n.delete(e)}function nb(){wp=!1,Wr!==null&&Oc(Wr)&&(Wr=null),Hr!==null&&Oc(Hr)&&(Hr=null),qr!==null&&Oc(qr)&&(qr=null),Ia.forEach(e0),Ra.forEach(e0)}function Do(t,e){t.blockedOn===e&&(t.blockedOn=null,wp||(wp=!0,tn.unstable_scheduleCallback(tn.unstable_NormalPriority,nb)))}function Aa(t){function e(i){return Do(i,t)}if(0<oc.length){Do(oc[0],t);for(var n=1;n<oc.length;n++){var r=oc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Wr!==null&&Do(Wr,t),Hr!==null&&Do(Hr,t),qr!==null&&Do(qr,t),Ia.forEach(e),Ra.forEach(e),n=0;n<Pr.length;n++)r=Pr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Pr.length&&(n=Pr[0],n.blockedOn===null);)hx(n),n.blockedOn===null&&Pr.shift()}var Fs=Ir.ReactCurrentBatchConfig,ou=!0;function rb(t,e,n,r){var i=xe,s=Fs.transition;Fs.transition=null;try{xe=1,ag(t,e,n,r)}finally{xe=i,Fs.transition=s}}function ib(t,e,n,r){var i=xe,s=Fs.transition;Fs.transition=null;try{xe=4,ag(t,e,n,r)}finally{xe=i,Fs.transition=s}}function ag(t,e,n,r){if(ou){var i=xp(t,e,n,r);if(i===null)rf(t,e,r,au,n),Zv(t,r);else if(tb(i,t,e,n,r))r.stopPropagation();else if(Zv(t,r),e&4&&-1<eb.indexOf(t)){for(;i!==null;){var s=pl(i);if(s!==null&&lx(s),s=xp(t,e,n,r),s===null&&rf(t,e,r,au,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else rf(t,e,r,null,n)}}var au=null;function xp(t,e,n,r){if(au=null,t=rg(r),t=Ci(t),t!==null)if(e=ss(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ex(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return au=t,null}function fx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HC()){case ig:return 1;case ix:return 4;case iu:case qC:return 16;case sx:return 536870912;default:return 16}default:return 16}}var $r=null,lg=null,jc=null;function px(){if(jc)return jc;var t,e=lg,n=e.length,r,i="value"in $r?$r.value:$r.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return jc=i.slice(t,1<r?1-r:void 0)}function Lc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ac(){return!0}function t0(){return!1}function an(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ac:t0,this.isPropagationStopped=t0,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ac)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ac)},persist:function(){},isPersistent:ac}),e}var _o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cg=an(_o),fl=Fe({},_o,{view:0,detail:0}),sb=an(fl),Gh,Qh,Mo,gd=Fe({},fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ug,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Mo&&(Mo&&t.type==="mousemove"?(Gh=t.screenX-Mo.screenX,Qh=t.screenY-Mo.screenY):Qh=Gh=0,Mo=t),Gh)},movementY:function(t){return"movementY"in t?t.movementY:Qh}}),n0=an(gd),ob=Fe({},gd,{dataTransfer:0}),ab=an(ob),lb=Fe({},fl,{relatedTarget:0}),Yh=an(lb),cb=Fe({},_o,{animationName:0,elapsedTime:0,pseudoElement:0}),ub=an(cb),db=Fe({},_o,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hb=an(db),fb=Fe({},_o,{data:0}),r0=an(fb),pb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gb[t])?!!e[t]:!1}function ug(){return yb}var vb=Fe({},fl,{key:function(t){if(t.key){var e=pb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ug,charCode:function(t){return t.type==="keypress"?Lc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_b=an(vb),wb=Fe({},gd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),i0=an(wb),xb=Fe({},fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ug}),Eb=an(xb),Sb=Fe({},_o,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tb=an(Sb),Ib=Fe({},gd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rb=an(Ib),Ab=[9,13,27,32],dg=pr&&"CompositionEvent"in window,ra=null;pr&&"documentMode"in document&&(ra=document.documentMode);var Cb=pr&&"TextEvent"in window&&!ra,mx=pr&&(!dg||ra&&8<ra&&11>=ra),s0=String.fromCharCode(32),o0=!1;function gx(t,e){switch(t){case"keyup":return Ab.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Es=!1;function bb(t,e){switch(t){case"compositionend":return yx(e);case"keypress":return e.which!==32?null:(o0=!0,s0);case"textInput":return t=e.data,t===s0&&o0?null:t;default:return null}}function kb(t,e){if(Es)return t==="compositionend"||!dg&&gx(t,e)?(t=px(),jc=lg=$r=null,Es=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mx&&e.locale!=="ko"?null:e.data;default:return null}}var Pb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Pb[t.type]:e==="textarea"}function vx(t,e,n,r){Q1(r),e=lu(e,"onChange"),0<e.length&&(n=new cg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ia=null,Ca=null;function Nb(t){bx(t,0)}function yd(t){var e=Is(t);if(B1(e))return t}function Ob(t,e){if(t==="change")return e}var _x=!1;if(pr){var Xh;if(pr){var Jh="oninput"in document;if(!Jh){var l0=document.createElement("div");l0.setAttribute("oninput","return;"),Jh=typeof l0.oninput=="function"}Xh=Jh}else Xh=!1;_x=Xh&&(!document.documentMode||9<document.documentMode)}function c0(){ia&&(ia.detachEvent("onpropertychange",wx),Ca=ia=null)}function wx(t){if(t.propertyName==="value"&&yd(Ca)){var e=[];vx(e,Ca,t,rg(t)),Z1(Nb,e)}}function jb(t,e,n){t==="focusin"?(c0(),ia=e,Ca=n,ia.attachEvent("onpropertychange",wx)):t==="focusout"&&c0()}function Lb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yd(Ca)}function Db(t,e){if(t==="click")return yd(e)}function Mb(t,e){if(t==="input"||t==="change")return yd(e)}function $b(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pn=typeof Object.is=="function"?Object.is:$b;function ba(t,e){if(Pn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rp.call(e,i)||!Pn(t[i],e[i]))return!1}return!0}function u0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function d0(t,e){var n=u0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=u0(n)}}function xx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?xx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ex(){for(var t=window,e=tu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=tu(t.document)}return e}function hg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Vb(t){var e=Ex(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&xx(n.ownerDocument.documentElement,n)){if(r!==null&&hg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=d0(n,s);var o=d0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Fb=pr&&"documentMode"in document&&11>=document.documentMode,Ss=null,Ep=null,sa=null,Sp=!1;function h0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Sp||Ss==null||Ss!==tu(r)||(r=Ss,"selectionStart"in r&&hg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sa&&ba(sa,r)||(sa=r,r=lu(Ep,"onSelect"),0<r.length&&(e=new cg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ss)))}function lc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ts={animationend:lc("Animation","AnimationEnd"),animationiteration:lc("Animation","AnimationIteration"),animationstart:lc("Animation","AnimationStart"),transitionend:lc("Transition","TransitionEnd")},Zh={},Sx={};pr&&(Sx=document.createElement("div").style,"AnimationEvent"in window||(delete Ts.animationend.animation,delete Ts.animationiteration.animation,delete Ts.animationstart.animation),"TransitionEvent"in window||delete Ts.transitionend.transition);function vd(t){if(Zh[t])return Zh[t];if(!Ts[t])return t;var e=Ts[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Sx)return Zh[t]=e[n];return t}var Tx=vd("animationend"),Ix=vd("animationiteration"),Rx=vd("animationstart"),Ax=vd("transitionend"),Cx=new Map,f0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mi(t,e){Cx.set(t,e),is(e,[t])}for(var ef=0;ef<f0.length;ef++){var tf=f0[ef],Ub=tf.toLowerCase(),Bb=tf[0].toUpperCase()+tf.slice(1);mi(Ub,"on"+Bb)}mi(Tx,"onAnimationEnd");mi(Ix,"onAnimationIteration");mi(Rx,"onAnimationStart");mi("dblclick","onDoubleClick");mi("focusin","onFocus");mi("focusout","onBlur");mi(Ax,"onTransitionEnd");Xs("onMouseEnter",["mouseout","mouseover"]);Xs("onMouseLeave",["mouseout","mouseover"]);Xs("onPointerEnter",["pointerout","pointerover"]);Xs("onPointerLeave",["pointerout","pointerover"]);is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));is("onBeforeInput",["compositionend","keypress","textInput","paste"]);is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ko));function p0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,UC(r,e,void 0,t),t.currentTarget=null}function bx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;p0(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;p0(i,a,c),s=l}}}if(ru)throw t=vp,ru=!1,vp=null,t}function Ce(t,e){var n=e[Cp];n===void 0&&(n=e[Cp]=new Set);var r=t+"__bubble";n.has(r)||(kx(e,t,2,!1),n.add(r))}function nf(t,e,n){var r=0;e&&(r|=4),kx(n,t,r,e)}var cc="_reactListening"+Math.random().toString(36).slice(2);function ka(t){if(!t[cc]){t[cc]=!0,M1.forEach(function(n){n!=="selectionchange"&&(zb.has(n)||nf(n,!1,t),nf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cc]||(e[cc]=!0,nf("selectionchange",!1,e))}}function kx(t,e,n,r){switch(fx(e)){case 1:var i=rb;break;case 4:i=ib;break;default:i=ag}n=i.bind(null,e,n,t),i=void 0,!yp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function rf(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ci(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Z1(function(){var c=s,u=rg(n),f=[];e:{var p=Cx.get(t);if(p!==void 0){var m=cg,v=t;switch(t){case"keypress":if(Lc(n)===0)break e;case"keydown":case"keyup":m=_b;break;case"focusin":v="focus",m=Yh;break;case"focusout":v="blur",m=Yh;break;case"beforeblur":case"afterblur":m=Yh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=n0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=ab;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Eb;break;case Tx:case Ix:case Rx:m=ub;break;case Ax:m=Tb;break;case"scroll":m=sb;break;case"wheel":m=Rb;break;case"copy":case"cut":case"paste":m=hb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=i0}var w=(e&4)!==0,E=!w&&t==="scroll",y=w?p!==null?p+"Capture":null:p;w=[];for(var g=c,_;g!==null;){_=g;var x=_.stateNode;if(_.tag===5&&x!==null&&(_=x,y!==null&&(x=Ta(g,y),x!=null&&w.push(Pa(g,x,_)))),E)break;g=g.return}0<w.length&&(p=new m(p,v,null,n,u),f.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==mp&&(v=n.relatedTarget||n.fromElement)&&(Ci(v)||v[mr]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=c,v=v?Ci(v):null,v!==null&&(E=ss(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(w=n0,x="onMouseLeave",y="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(w=i0,x="onPointerLeave",y="onPointerEnter",g="pointer"),E=m==null?p:Is(m),_=v==null?p:Is(v),p=new w(x,g+"leave",m,n,u),p.target=E,p.relatedTarget=_,x=null,Ci(u)===c&&(w=new w(y,g+"enter",v,n,u),w.target=_,w.relatedTarget=E,x=w),E=x,m&&v)t:{for(w=m,y=v,g=0,_=w;_;_=fs(_))g++;for(_=0,x=y;x;x=fs(x))_++;for(;0<g-_;)w=fs(w),g--;for(;0<_-g;)y=fs(y),_--;for(;g--;){if(w===y||y!==null&&w===y.alternate)break t;w=fs(w),y=fs(y)}w=null}else w=null;m!==null&&m0(f,p,m,w,!1),v!==null&&E!==null&&m0(f,E,v,w,!0)}}e:{if(p=c?Is(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var S=Ob;else if(a0(p))if(_x)S=Mb;else{S=Lb;var T=jb}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=Db);if(S&&(S=S(t,c))){vx(f,S,n,u);break e}T&&T(t,p,c),t==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&up(p,"number",p.value)}switch(T=c?Is(c):window,t){case"focusin":(a0(T)||T.contentEditable==="true")&&(Ss=T,Ep=c,sa=null);break;case"focusout":sa=Ep=Ss=null;break;case"mousedown":Sp=!0;break;case"contextmenu":case"mouseup":case"dragend":Sp=!1,h0(f,n,u);break;case"selectionchange":if(Fb)break;case"keydown":case"keyup":h0(f,n,u)}var R;if(dg)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Es?gx(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(mx&&n.locale!=="ko"&&(Es||I!=="onCompositionStart"?I==="onCompositionEnd"&&Es&&(R=px()):($r=u,lg="value"in $r?$r.value:$r.textContent,Es=!0)),T=lu(c,I),0<T.length&&(I=new r0(I,t,null,n,u),f.push({event:I,listeners:T}),R?I.data=R:(R=yx(n),R!==null&&(I.data=R)))),(R=Cb?bb(t,n):kb(t,n))&&(c=lu(c,"onBeforeInput"),0<c.length&&(u=new r0("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=R))}bx(f,e)})}function Pa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function lu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ta(t,n),s!=null&&r.unshift(Pa(t,s,i)),s=Ta(t,e),s!=null&&r.push(Pa(t,s,i))),t=t.return}return r}function fs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function m0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ta(n,s),l!=null&&o.unshift(Pa(n,l,a))):i||(l=Ta(n,s),l!=null&&o.push(Pa(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Wb=/\r\n?/g,Hb=/\u0000|\uFFFD/g;function g0(t){return(typeof t=="string"?t:""+t).replace(Wb,`
`).replace(Hb,"")}function uc(t,e,n){if(e=g0(e),g0(t)!==e&&n)throw Error(j(425))}function cu(){}var Tp=null,Ip=null;function Rp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ap=typeof setTimeout=="function"?setTimeout:void 0,qb=typeof clearTimeout=="function"?clearTimeout:void 0,y0=typeof Promise=="function"?Promise:void 0,Kb=typeof queueMicrotask=="function"?queueMicrotask:typeof y0<"u"?function(t){return y0.resolve(null).then(t).catch(Gb)}:Ap;function Gb(t){setTimeout(function(){throw t})}function sf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Aa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Aa(e)}function Kr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function v0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wo=Math.random().toString(36).slice(2),$n="__reactFiber$"+wo,Na="__reactProps$"+wo,mr="__reactContainer$"+wo,Cp="__reactEvents$"+wo,Qb="__reactListeners$"+wo,Yb="__reactHandles$"+wo;function Ci(t){var e=t[$n];if(e)return e;for(var n=t.parentNode;n;){if(e=n[mr]||n[$n]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=v0(t);t!==null;){if(n=t[$n])return n;t=v0(t)}return e}t=n,n=t.parentNode}return null}function pl(t){return t=t[$n]||t[mr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Is(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(j(33))}function _d(t){return t[Na]||null}var bp=[],Rs=-1;function gi(t){return{current:t}}function Pe(t){0>Rs||(t.current=bp[Rs],bp[Rs]=null,Rs--)}function Ae(t,e){Rs++,bp[Rs]=t.current,t.current=e}var si={},Nt=gi(si),Ht=gi(!1),Bi=si;function Js(t,e){var n=t.type.contextTypes;if(!n)return si;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function qt(t){return t=t.childContextTypes,t!=null}function uu(){Pe(Ht),Pe(Nt)}function _0(t,e,n){if(Nt.current!==si)throw Error(j(168));Ae(Nt,e),Ae(Ht,n)}function Px(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(j(108,jC(t)||"Unknown",i));return Fe({},n,r)}function du(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||si,Bi=Nt.current,Ae(Nt,t),Ae(Ht,Ht.current),!0}function w0(t,e,n){var r=t.stateNode;if(!r)throw Error(j(169));n?(t=Px(t,e,Bi),r.__reactInternalMemoizedMergedChildContext=t,Pe(Ht),Pe(Nt),Ae(Nt,t)):Pe(Ht),Ae(Ht,n)}var sr=null,wd=!1,of=!1;function Nx(t){sr===null?sr=[t]:sr.push(t)}function Xb(t){wd=!0,Nx(t)}function yi(){if(!of&&sr!==null){of=!0;var t=0,e=xe;try{var n=sr;for(xe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}sr=null,wd=!1}catch(i){throw sr!==null&&(sr=sr.slice(t+1)),rx(ig,yi),i}finally{xe=e,of=!1}}return null}var As=[],Cs=0,hu=null,fu=0,un=[],dn=0,zi=null,or=1,ar="";function Si(t,e){As[Cs++]=fu,As[Cs++]=hu,hu=t,fu=e}function Ox(t,e,n){un[dn++]=or,un[dn++]=ar,un[dn++]=zi,zi=t;var r=or;t=ar;var i=32-Cn(r)-1;r&=~(1<<i),n+=1;var s=32-Cn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,or=1<<32-Cn(e)+i|n<<i|r,ar=s+t}else or=1<<s|n<<i|r,ar=t}function fg(t){t.return!==null&&(Si(t,1),Ox(t,1,0))}function pg(t){for(;t===hu;)hu=As[--Cs],As[Cs]=null,fu=As[--Cs],As[Cs]=null;for(;t===zi;)zi=un[--dn],un[dn]=null,ar=un[--dn],un[dn]=null,or=un[--dn],un[dn]=null}var Zt=null,Xt=null,Le=!1,In=null;function jx(t,e){var n=mn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function x0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zt=t,Xt=Kr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zt=t,Xt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zi!==null?{id:or,overflow:ar}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=mn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zt=t,Xt=null,!0):!1;default:return!1}}function kp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pp(t){if(Le){var e=Xt;if(e){var n=e;if(!x0(t,e)){if(kp(t))throw Error(j(418));e=Kr(n.nextSibling);var r=Zt;e&&x0(t,e)?jx(r,n):(t.flags=t.flags&-4097|2,Le=!1,Zt=t)}}else{if(kp(t))throw Error(j(418));t.flags=t.flags&-4097|2,Le=!1,Zt=t}}}function E0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zt=t}function dc(t){if(t!==Zt)return!1;if(!Le)return E0(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Rp(t.type,t.memoizedProps)),e&&(e=Xt)){if(kp(t))throw Lx(),Error(j(418));for(;e;)jx(t,e),e=Kr(e.nextSibling)}if(E0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xt=Kr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xt=null}}else Xt=Zt?Kr(t.stateNode.nextSibling):null;return!0}function Lx(){for(var t=Xt;t;)t=Kr(t.nextSibling)}function Zs(){Xt=Zt=null,Le=!1}function mg(t){In===null?In=[t]:In.push(t)}var Jb=Ir.ReactCurrentBatchConfig;function Sn(t,e){if(t&&t.defaultProps){e=Fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var pu=gi(null),mu=null,bs=null,gg=null;function yg(){gg=bs=mu=null}function vg(t){var e=pu.current;Pe(pu),t._currentValue=e}function Np(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Us(t,e){mu=t,gg=bs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Wt=!0),t.firstContext=null)}function yn(t){var e=t._currentValue;if(gg!==t)if(t={context:t,memoizedValue:e,next:null},bs===null){if(mu===null)throw Error(j(308));bs=t,mu.dependencies={lanes:0,firstContext:t}}else bs=bs.next=t;return e}var bi=null;function _g(t){bi===null?bi=[t]:bi.push(t)}function Dx(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,_g(e)):(n.next=i.next,i.next=n),e.interleaved=n,gr(t,r)}function gr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var kr=!1;function wg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function dr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,gr(t,n)}return i=r.interleaved,i===null?(e.next=e,_g(r)):(e.next=i.next,i.next=e),r.interleaved=e,gr(t,n)}function Dc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sg(t,n)}}function S0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function gu(t,e,n,r){var i=t.updateQueue;kr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,u=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,w=a;switch(p=e,m=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){f=v.call(m,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,p=typeof v=="function"?v.call(m,f,p):v,p==null)break e;f=Fe({},f,p);break e;case 2:kr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=f):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Hi|=o,t.lanes=o,t.memoizedState=f}}function T0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(j(191,i));i.call(r)}}}var $x=new D1.Component().refs;function Op(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xd={isMounted:function(t){return(t=t._reactInternals)?ss(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Vt(),i=Yr(t),s=dr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Gr(t,s,i),e!==null&&(bn(e,t,i,r),Dc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Vt(),i=Yr(t),s=dr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Gr(t,s,i),e!==null&&(bn(e,t,i,r),Dc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Vt(),r=Yr(t),i=dr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Gr(t,i,r),e!==null&&(bn(e,t,r,n),Dc(e,t,r))}};function I0(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ba(n,r)||!ba(i,s):!0}function Vx(t,e,n){var r=!1,i=si,s=e.contextType;return typeof s=="object"&&s!==null?s=yn(s):(i=qt(e)?Bi:Nt.current,r=e.contextTypes,s=(r=r!=null)?Js(t,i):si),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function R0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xd.enqueueReplaceState(e,e.state,null)}function jp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=$x,wg(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=yn(s):(s=qt(e)?Bi:Nt.current,i.context=Js(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Op(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&xd.enqueueReplaceState(i,i.state,null),gu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function $o(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var r=n.stateNode}if(!r)throw Error(j(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===$x&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,t))}return t}function hc(t,e){throw t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function A0(t){var e=t._init;return e(t._payload)}function Fx(t){function e(y,g){if(t){var _=y.deletions;_===null?(y.deletions=[g],y.flags|=16):_.push(g)}}function n(y,g){if(!t)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function i(y,g){return y=Xr(y,g),y.index=0,y.sibling=null,y}function s(y,g,_){return y.index=_,t?(_=y.alternate,_!==null?(_=_.index,_<g?(y.flags|=2,g):_):(y.flags|=2,g)):(y.flags|=1048576,g)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,g,_,x){return g===null||g.tag!==6?(g=ff(_,y.mode,x),g.return=y,g):(g=i(g,_),g.return=y,g)}function l(y,g,_,x){var S=_.type;return S===xs?u(y,g,_.props.children,x,_.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===br&&A0(S)===g.type)?(x=i(g,_.props),x.ref=$o(y,g,_),x.return=y,x):(x=Bc(_.type,_.key,_.props,null,y.mode,x),x.ref=$o(y,g,_),x.return=y,x)}function c(y,g,_,x){return g===null||g.tag!==4||g.stateNode.containerInfo!==_.containerInfo||g.stateNode.implementation!==_.implementation?(g=pf(_,y.mode,x),g.return=y,g):(g=i(g,_.children||[]),g.return=y,g)}function u(y,g,_,x,S){return g===null||g.tag!==7?(g=Di(_,y.mode,x,S),g.return=y,g):(g=i(g,_),g.return=y,g)}function f(y,g,_){if(typeof g=="string"&&g!==""||typeof g=="number")return g=ff(""+g,y.mode,_),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case tc:return _=Bc(g.type,g.key,g.props,null,y.mode,_),_.ref=$o(y,null,g),_.return=y,_;case ws:return g=pf(g,y.mode,_),g.return=y,g;case br:var x=g._init;return f(y,x(g._payload),_)}if(Ho(g)||Oo(g))return g=Di(g,y.mode,_,null),g.return=y,g;hc(y,g)}return null}function p(y,g,_,x){var S=g!==null?g.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return S!==null?null:a(y,g,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case tc:return _.key===S?l(y,g,_,x):null;case ws:return _.key===S?c(y,g,_,x):null;case br:return S=_._init,p(y,g,S(_._payload),x)}if(Ho(_)||Oo(_))return S!==null?null:u(y,g,_,x,null);hc(y,_)}return null}function m(y,g,_,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(_)||null,a(g,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case tc:return y=y.get(x.key===null?_:x.key)||null,l(g,y,x,S);case ws:return y=y.get(x.key===null?_:x.key)||null,c(g,y,x,S);case br:var T=x._init;return m(y,g,_,T(x._payload),S)}if(Ho(x)||Oo(x))return y=y.get(_)||null,u(g,y,x,S,null);hc(g,x)}return null}function v(y,g,_,x){for(var S=null,T=null,R=g,I=g=0,C=null;R!==null&&I<_.length;I++){R.index>I?(C=R,R=null):C=R.sibling;var A=p(y,R,_[I],x);if(A===null){R===null&&(R=C);break}t&&R&&A.alternate===null&&e(y,R),g=s(A,g,I),T===null?S=A:T.sibling=A,T=A,R=C}if(I===_.length)return n(y,R),Le&&Si(y,I),S;if(R===null){for(;I<_.length;I++)R=f(y,_[I],x),R!==null&&(g=s(R,g,I),T===null?S=R:T.sibling=R,T=R);return Le&&Si(y,I),S}for(R=r(y,R);I<_.length;I++)C=m(R,y,I,_[I],x),C!==null&&(t&&C.alternate!==null&&R.delete(C.key===null?I:C.key),g=s(C,g,I),T===null?S=C:T.sibling=C,T=C);return t&&R.forEach(function(b){return e(y,b)}),Le&&Si(y,I),S}function w(y,g,_,x){var S=Oo(_);if(typeof S!="function")throw Error(j(150));if(_=S.call(_),_==null)throw Error(j(151));for(var T=S=null,R=g,I=g=0,C=null,A=_.next();R!==null&&!A.done;I++,A=_.next()){R.index>I?(C=R,R=null):C=R.sibling;var b=p(y,R,A.value,x);if(b===null){R===null&&(R=C);break}t&&R&&b.alternate===null&&e(y,R),g=s(b,g,I),T===null?S=b:T.sibling=b,T=b,R=C}if(A.done)return n(y,R),Le&&Si(y,I),S;if(R===null){for(;!A.done;I++,A=_.next())A=f(y,A.value,x),A!==null&&(g=s(A,g,I),T===null?S=A:T.sibling=A,T=A);return Le&&Si(y,I),S}for(R=r(y,R);!A.done;I++,A=_.next())A=m(R,y,I,A.value,x),A!==null&&(t&&A.alternate!==null&&R.delete(A.key===null?I:A.key),g=s(A,g,I),T===null?S=A:T.sibling=A,T=A);return t&&R.forEach(function(F){return e(y,F)}),Le&&Si(y,I),S}function E(y,g,_,x){if(typeof _=="object"&&_!==null&&_.type===xs&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case tc:e:{for(var S=_.key,T=g;T!==null;){if(T.key===S){if(S=_.type,S===xs){if(T.tag===7){n(y,T.sibling),g=i(T,_.props.children),g.return=y,y=g;break e}}else if(T.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===br&&A0(S)===T.type){n(y,T.sibling),g=i(T,_.props),g.ref=$o(y,T,_),g.return=y,y=g;break e}n(y,T);break}else e(y,T);T=T.sibling}_.type===xs?(g=Di(_.props.children,y.mode,x,_.key),g.return=y,y=g):(x=Bc(_.type,_.key,_.props,null,y.mode,x),x.ref=$o(y,g,_),x.return=y,y=x)}return o(y);case ws:e:{for(T=_.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===_.containerInfo&&g.stateNode.implementation===_.implementation){n(y,g.sibling),g=i(g,_.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else e(y,g);g=g.sibling}g=pf(_,y.mode,x),g.return=y,y=g}return o(y);case br:return T=_._init,E(y,g,T(_._payload),x)}if(Ho(_))return v(y,g,_,x);if(Oo(_))return w(y,g,_,x);hc(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,g!==null&&g.tag===6?(n(y,g.sibling),g=i(g,_),g.return=y,y=g):(n(y,g),g=ff(_,y.mode,x),g.return=y,y=g),o(y)):n(y,g)}return E}var eo=Fx(!0),Ux=Fx(!1),ml={},Kn=gi(ml),Oa=gi(ml),ja=gi(ml);function ki(t){if(t===ml)throw Error(j(174));return t}function xg(t,e){switch(Ae(ja,e),Ae(Oa,t),Ae(Kn,ml),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hp(e,t)}Pe(Kn),Ae(Kn,e)}function to(){Pe(Kn),Pe(Oa),Pe(ja)}function Bx(t){ki(ja.current);var e=ki(Kn.current),n=hp(e,t.type);e!==n&&(Ae(Oa,t),Ae(Kn,n))}function Eg(t){Oa.current===t&&(Pe(Kn),Pe(Oa))}var De=gi(0);function yu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var af=[];function Sg(){for(var t=0;t<af.length;t++)af[t]._workInProgressVersionPrimary=null;af.length=0}var Mc=Ir.ReactCurrentDispatcher,lf=Ir.ReactCurrentBatchConfig,Wi=0,Ve=null,tt=null,ot=null,vu=!1,oa=!1,La=0,Zb=0;function xt(){throw Error(j(321))}function Tg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Pn(t[n],e[n]))return!1;return!0}function Ig(t,e,n,r,i,s){if(Wi=s,Ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Mc.current=t===null||t.memoizedState===null?r2:i2,t=n(r,i),oa){s=0;do{if(oa=!1,La=0,25<=s)throw Error(j(301));s+=1,ot=tt=null,e.updateQueue=null,Mc.current=s2,t=n(r,i)}while(oa)}if(Mc.current=_u,e=tt!==null&&tt.next!==null,Wi=0,ot=tt=Ve=null,vu=!1,e)throw Error(j(300));return t}function Rg(){var t=La!==0;return La=0,t}function Mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Ve.memoizedState=ot=t:ot=ot.next=t,ot}function vn(){if(tt===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=tt.next;var e=ot===null?Ve.memoizedState:ot.next;if(e!==null)ot=e,tt=t;else{if(t===null)throw Error(j(310));tt=t,t={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},ot===null?Ve.memoizedState=ot=t:ot=ot.next=t}return ot}function Da(t,e){return typeof e=="function"?e(t):e}function cf(t){var e=vn(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=tt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Wi&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Ve.lanes|=u,Hi|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Pn(r,e.memoizedState)||(Wt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ve.lanes|=s,Hi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function uf(t){var e=vn(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Pn(s,e.memoizedState)||(Wt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function zx(){}function Wx(t,e){var n=Ve,r=vn(),i=e(),s=!Pn(r.memoizedState,i);if(s&&(r.memoizedState=i,Wt=!0),r=r.queue,Ag(Kx.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ot!==null&&ot.memoizedState.tag&1){if(n.flags|=2048,Ma(9,qx.bind(null,n,r,i,e),void 0,null),at===null)throw Error(j(349));Wi&30||Hx(n,e,i)}return i}function Hx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function qx(t,e,n,r){e.value=n,e.getSnapshot=r,Gx(e)&&Qx(t)}function Kx(t,e,n){return n(function(){Gx(e)&&Qx(t)})}function Gx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pn(t,n)}catch{return!0}}function Qx(t){var e=gr(t,1);e!==null&&bn(e,t,1,-1)}function C0(t){var e=Mn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:t},e.queue=t,t=t.dispatch=n2.bind(null,Ve,t),[e.memoizedState,t]}function Ma(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Yx(){return vn().memoizedState}function $c(t,e,n,r){var i=Mn();Ve.flags|=t,i.memoizedState=Ma(1|e,n,void 0,r===void 0?null:r)}function Ed(t,e,n,r){var i=vn();r=r===void 0?null:r;var s=void 0;if(tt!==null){var o=tt.memoizedState;if(s=o.destroy,r!==null&&Tg(r,o.deps)){i.memoizedState=Ma(e,n,s,r);return}}Ve.flags|=t,i.memoizedState=Ma(1|e,n,s,r)}function b0(t,e){return $c(8390656,8,t,e)}function Ag(t,e){return Ed(2048,8,t,e)}function Xx(t,e){return Ed(4,2,t,e)}function Jx(t,e){return Ed(4,4,t,e)}function Zx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function eE(t,e,n){return n=n!=null?n.concat([t]):null,Ed(4,4,Zx.bind(null,e,t),n)}function Cg(){}function tE(t,e){var n=vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function nE(t,e){var n=vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function rE(t,e,n){return Wi&21?(Pn(n,e)||(n=ox(),Ve.lanes|=n,Hi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Wt=!0),t.memoizedState=n)}function e2(t,e){var n=xe;xe=n!==0&&4>n?n:4,t(!0);var r=lf.transition;lf.transition={};try{t(!1),e()}finally{xe=n,lf.transition=r}}function iE(){return vn().memoizedState}function t2(t,e,n){var r=Yr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sE(t))oE(e,n);else if(n=Dx(t,e,n,r),n!==null){var i=Vt();bn(n,t,r,i),aE(n,e,r)}}function n2(t,e,n){var r=Yr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sE(t))oE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Pn(a,o)){var l=e.interleaved;l===null?(i.next=i,_g(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Dx(t,e,i,r),n!==null&&(i=Vt(),bn(n,t,r,i),aE(n,e,r))}}function sE(t){var e=t.alternate;return t===Ve||e!==null&&e===Ve}function oE(t,e){oa=vu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function aE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sg(t,n)}}var _u={readContext:yn,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},r2={readContext:yn,useCallback:function(t,e){return Mn().memoizedState=[t,e===void 0?null:e],t},useContext:yn,useEffect:b0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$c(4194308,4,Zx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $c(4194308,4,t,e)},useInsertionEffect:function(t,e){return $c(4,2,t,e)},useMemo:function(t,e){var n=Mn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Mn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=t2.bind(null,Ve,t),[r.memoizedState,t]},useRef:function(t){var e=Mn();return t={current:t},e.memoizedState=t},useState:C0,useDebugValue:Cg,useDeferredValue:function(t){return Mn().memoizedState=t},useTransition:function(){var t=C0(!1),e=t[0];return t=e2.bind(null,t[1]),Mn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ve,i=Mn();if(Le){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),at===null)throw Error(j(349));Wi&30||Hx(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,b0(Kx.bind(null,r,s,t),[t]),r.flags|=2048,Ma(9,qx.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Mn(),e=at.identifierPrefix;if(Le){var n=ar,r=or;n=(r&~(1<<32-Cn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=La++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Zb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},i2={readContext:yn,useCallback:tE,useContext:yn,useEffect:Ag,useImperativeHandle:eE,useInsertionEffect:Xx,useLayoutEffect:Jx,useMemo:nE,useReducer:cf,useRef:Yx,useState:function(){return cf(Da)},useDebugValue:Cg,useDeferredValue:function(t){var e=vn();return rE(e,tt.memoizedState,t)},useTransition:function(){var t=cf(Da)[0],e=vn().memoizedState;return[t,e]},useMutableSource:zx,useSyncExternalStore:Wx,useId:iE,unstable_isNewReconciler:!1},s2={readContext:yn,useCallback:tE,useContext:yn,useEffect:Ag,useImperativeHandle:eE,useInsertionEffect:Xx,useLayoutEffect:Jx,useMemo:nE,useReducer:uf,useRef:Yx,useState:function(){return uf(Da)},useDebugValue:Cg,useDeferredValue:function(t){var e=vn();return tt===null?e.memoizedState=t:rE(e,tt.memoizedState,t)},useTransition:function(){var t=uf(Da)[0],e=vn().memoizedState;return[t,e]},useMutableSource:zx,useSyncExternalStore:Wx,useId:iE,unstable_isNewReconciler:!1};function no(t,e){try{var n="",r=e;do n+=OC(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function df(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Lp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var o2=typeof WeakMap=="function"?WeakMap:Map;function lE(t,e,n){n=dr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xu||(xu=!0,Hp=r),Lp(t,e)},n}function cE(t,e,n){n=dr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Lp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Lp(t,e),typeof r!="function"&&(Qr===null?Qr=new Set([this]):Qr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function k0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new o2;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=w2.bind(null,t,e,n),e.then(t,t))}function P0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function N0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=dr(-1,1),e.tag=2,Gr(n,e,1))),n.lanes|=1),t)}var a2=Ir.ReactCurrentOwner,Wt=!1;function Mt(t,e,n,r){e.child=t===null?Ux(e,null,n,r):eo(e,t.child,n,r)}function O0(t,e,n,r,i){n=n.render;var s=e.ref;return Us(e,i),r=Ig(t,e,n,r,s,i),n=Rg(),t!==null&&!Wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,yr(t,e,i)):(Le&&n&&fg(e),e.flags|=1,Mt(t,e,r,i),e.child)}function j0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Dg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,uE(t,e,s,r,i)):(t=Bc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ba,n(o,r)&&t.ref===e.ref)return yr(t,e,i)}return e.flags|=1,t=Xr(s,r),t.ref=e.ref,t.return=e,e.child=t}function uE(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ba(s,r)&&t.ref===e.ref)if(Wt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Wt=!0);else return e.lanes=t.lanes,yr(t,e,i)}return Dp(t,e,n,r,i)}function dE(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Ps,Yt),Yt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(Ps,Yt),Yt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ae(Ps,Yt),Yt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ae(Ps,Yt),Yt|=r;return Mt(t,e,i,n),e.child}function hE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Dp(t,e,n,r,i){var s=qt(n)?Bi:Nt.current;return s=Js(e,s),Us(e,i),n=Ig(t,e,n,r,s,i),r=Rg(),t!==null&&!Wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,yr(t,e,i)):(Le&&r&&fg(e),e.flags|=1,Mt(t,e,n,i),e.child)}function L0(t,e,n,r,i){if(qt(n)){var s=!0;du(e)}else s=!1;if(Us(e,i),e.stateNode===null)Vc(t,e),Vx(e,n,r),jp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=yn(c):(c=qt(n)?Bi:Nt.current,c=Js(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&R0(e,o,r,c),kr=!1;var p=e.memoizedState;o.state=p,gu(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Ht.current||kr?(typeof u=="function"&&(Op(e,n,u,r),l=e.memoizedState),(a=kr||I0(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Mx(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Sn(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=yn(l):(l=qt(n)?Bi:Nt.current,l=Js(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&R0(e,o,r,l),kr=!1,p=e.memoizedState,o.state=p,gu(e,r,o,i);var v=e.memoizedState;a!==f||p!==v||Ht.current||kr?(typeof m=="function"&&(Op(e,n,m,r),v=e.memoizedState),(c=kr||I0(e,n,c,r,p,v,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Mp(t,e,n,r,s,i)}function Mp(t,e,n,r,i,s){hE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&w0(e,n,!1),yr(t,e,s);r=e.stateNode,a2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=eo(e,t.child,null,s),e.child=eo(e,null,a,s)):Mt(t,e,a,s),e.memoizedState=r.state,i&&w0(e,n,!0),e.child}function fE(t){var e=t.stateNode;e.pendingContext?_0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_0(t,e.context,!1),xg(t,e.containerInfo)}function D0(t,e,n,r,i){return Zs(),mg(i),e.flags|=256,Mt(t,e,n,r),e.child}var $p={dehydrated:null,treeContext:null,retryLane:0};function Vp(t){return{baseLanes:t,cachePool:null,transitions:null}}function pE(t,e,n){var r=e.pendingProps,i=De.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ae(De,i&1),t===null)return Pp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Id(o,r,0,null),t=Di(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Vp(n),e.memoizedState=$p,t):bg(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return l2(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Xr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Xr(a,s):(s=Di(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Vp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=$p,r}return s=t.child,t=s.sibling,r=Xr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bg(t,e){return e=Id({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fc(t,e,n,r){return r!==null&&mg(r),eo(e,t.child,null,n),t=bg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function l2(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=df(Error(j(422))),fc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Id({mode:"visible",children:r.children},i,0,null),s=Di(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&eo(e,t.child,null,o),e.child.memoizedState=Vp(o),e.memoizedState=$p,s);if(!(e.mode&1))return fc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(j(419)),r=df(s,r,void 0),fc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Wt||a){if(r=at,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,gr(t,i),bn(r,t,i,-1))}return Lg(),r=df(Error(j(421))),fc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=x2.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Xt=Kr(i.nextSibling),Zt=e,Le=!0,In=null,t!==null&&(un[dn++]=or,un[dn++]=ar,un[dn++]=zi,or=t.id,ar=t.overflow,zi=e),e=bg(e,r.children),e.flags|=4096,e)}function M0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Np(t.return,e,n)}function hf(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function mE(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Mt(t,e,r.children,n),r=De.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&M0(t,n,e);else if(t.tag===19)M0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ae(De,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&yu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),hf(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&yu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}hf(e,!0,n,null,s);break;case"together":hf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function yr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=Xr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function c2(t,e,n){switch(e.tag){case 3:fE(e),Zs();break;case 5:Bx(e);break;case 1:qt(e.type)&&du(e);break;case 4:xg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ae(pu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ae(De,De.current&1),e.flags|=128,null):n&e.child.childLanes?pE(t,e,n):(Ae(De,De.current&1),t=yr(t,e,n),t!==null?t.sibling:null);Ae(De,De.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return mE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ae(De,De.current),r)break;return null;case 22:case 23:return e.lanes=0,dE(t,e,n)}return yr(t,e,n)}var gE,Fp,yE,vE;gE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fp=function(){};yE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ki(Kn.current);var s=null;switch(n){case"input":i=lp(t,i),r=lp(t,r),s=[];break;case"select":i=Fe({},i,{value:void 0}),r=Fe({},r,{value:void 0}),s=[];break;case"textarea":i=dp(t,i),r=dp(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=cu)}fp(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ea.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ea.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ce("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};vE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vo(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function u2(t,e,n){var r=e.pendingProps;switch(pg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(e),null;case 1:return qt(e.type)&&uu(),Et(e),null;case 3:return r=e.stateNode,to(),Pe(Ht),Pe(Nt),Sg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(dc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,In!==null&&(Gp(In),In=null))),Fp(t,e),Et(e),null;case 5:Eg(e);var i=ki(ja.current);if(n=e.type,t!==null&&e.stateNode!=null)yE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(j(166));return Et(e),null}if(t=ki(Kn.current),dc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[$n]=e,r[Na]=s,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(i=0;i<Ko.length;i++)Ce(Ko[i],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":qv(r,s),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ce("invalid",r);break;case"textarea":Gv(r,s),Ce("invalid",r)}fp(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&uc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&uc(r.textContent,a,t),i=["children",""+a]):Ea.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ce("scroll",r)}switch(n){case"input":nc(r),Kv(r,s,!0);break;case"textarea":nc(r),Qv(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=cu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=H1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[$n]=e,t[Na]=r,gE(t,e,!1,!1),e.stateNode=t;e:{switch(o=pp(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),i=r;break;case"iframe":case"object":case"embed":Ce("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ko.length;i++)Ce(Ko[i],t);i=r;break;case"source":Ce("error",t),i=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),i=r;break;case"details":Ce("toggle",t),i=r;break;case"input":qv(t,r),i=lp(t,r),Ce("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Fe({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":Gv(t,r),i=dp(t,r),Ce("invalid",t);break;default:i=r}fp(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?G1(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&q1(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Sa(t,l):typeof l=="number"&&Sa(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ea.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ce("scroll",t):l!=null&&Zm(t,s,l,o))}switch(n){case"input":nc(t),Kv(t,r,!1);break;case"textarea":nc(t),Qv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ii(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ms(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ms(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=cu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Et(e),null;case 6:if(t&&e.stateNode!=null)vE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(j(166));if(n=ki(ja.current),ki(Kn.current),dc(e)){if(r=e.stateNode,n=e.memoizedProps,r[$n]=e,(s=r.nodeValue!==n)&&(t=Zt,t!==null))switch(t.tag){case 3:uc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&uc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$n]=e,e.stateNode=r}return Et(e),null;case 13:if(Pe(De),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&Xt!==null&&e.mode&1&&!(e.flags&128))Lx(),Zs(),e.flags|=98560,s=!1;else if(s=dc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(j(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(j(317));s[$n]=e}else Zs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Et(e),s=!1}else In!==null&&(Gp(In),In=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||De.current&1?rt===0&&(rt=3):Lg())),e.updateQueue!==null&&(e.flags|=4),Et(e),null);case 4:return to(),Fp(t,e),t===null&&ka(e.stateNode.containerInfo),Et(e),null;case 10:return vg(e.type._context),Et(e),null;case 17:return qt(e.type)&&uu(),Et(e),null;case 19:if(Pe(De),s=e.memoizedState,s===null)return Et(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Vo(s,!1);else{if(rt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=yu(t),o!==null){for(e.flags|=128,Vo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(De,De.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ke()>ro&&(e.flags|=128,r=!0,Vo(s,!1),e.lanes=4194304)}else{if(!r)if(t=yu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Le)return Et(e),null}else 2*Ke()-s.renderingStartTime>ro&&n!==1073741824&&(e.flags|=128,r=!0,Vo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ke(),e.sibling=null,n=De.current,Ae(De,r?n&1|2:n&1),e):(Et(e),null);case 22:case 23:return jg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Yt&1073741824&&(Et(e),e.subtreeFlags&6&&(e.flags|=8192)):Et(e),null;case 24:return null;case 25:return null}throw Error(j(156,e.tag))}function d2(t,e){switch(pg(e),e.tag){case 1:return qt(e.type)&&uu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return to(),Pe(Ht),Pe(Nt),Sg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Eg(e),null;case 13:if(Pe(De),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));Zs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pe(De),null;case 4:return to(),null;case 10:return vg(e.type._context),null;case 22:case 23:return jg(),null;case 24:return null;default:return null}}var pc=!1,Rt=!1,h2=typeof WeakSet=="function"?WeakSet:Set,K=null;function ks(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Be(t,e,r)}else n.current=null}function Up(t,e,n){try{n()}catch(r){Be(t,e,r)}}var $0=!1;function f2(t,e){if(Tp=ou,t=Ex(),hg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=t,p=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++u===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ip={focusedElem:t,selectionRange:n},ou=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,E=v.memoizedState,y=e.stateNode,g=y.getSnapshotBeforeUpdate(e.elementType===e.type?w:Sn(e.type,w),E);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(x){Be(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return v=$0,$0=!1,v}function aa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Up(e,n,s)}i=i.next}while(i!==r)}}function Sd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Bp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function _E(t){var e=t.alternate;e!==null&&(t.alternate=null,_E(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$n],delete e[Na],delete e[Cp],delete e[Qb],delete e[Yb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function wE(t){return t.tag===5||t.tag===3||t.tag===4}function V0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=cu));else if(r!==4&&(t=t.child,t!==null))for(zp(t,e,n),t=t.sibling;t!==null;)zp(t,e,n),t=t.sibling}function Wp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Wp(t,e,n),t=t.sibling;t!==null;)Wp(t,e,n),t=t.sibling}var ht=null,Tn=!1;function Ar(t,e,n){for(n=n.child;n!==null;)xE(t,e,n),n=n.sibling}function xE(t,e,n){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount(md,n)}catch{}switch(n.tag){case 5:Rt||ks(n,e);case 6:var r=ht,i=Tn;ht=null,Ar(t,e,n),ht=r,Tn=i,ht!==null&&(Tn?(t=ht,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ht.removeChild(n.stateNode));break;case 18:ht!==null&&(Tn?(t=ht,n=n.stateNode,t.nodeType===8?sf(t.parentNode,n):t.nodeType===1&&sf(t,n),Aa(t)):sf(ht,n.stateNode));break;case 4:r=ht,i=Tn,ht=n.stateNode.containerInfo,Tn=!0,Ar(t,e,n),ht=r,Tn=i;break;case 0:case 11:case 14:case 15:if(!Rt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Up(n,e,o),i=i.next}while(i!==r)}Ar(t,e,n);break;case 1:if(!Rt&&(ks(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Be(n,e,a)}Ar(t,e,n);break;case 21:Ar(t,e,n);break;case 22:n.mode&1?(Rt=(r=Rt)||n.memoizedState!==null,Ar(t,e,n),Rt=r):Ar(t,e,n);break;default:Ar(t,e,n)}}function F0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new h2),e.forEach(function(r){var i=E2.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function En(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ht=a.stateNode,Tn=!1;break e;case 3:ht=a.stateNode.containerInfo,Tn=!0;break e;case 4:ht=a.stateNode.containerInfo,Tn=!0;break e}a=a.return}if(ht===null)throw Error(j(160));xE(s,o,i),ht=null,Tn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Be(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)EE(e,t),e=e.sibling}function EE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(En(e,t),Dn(t),r&4){try{aa(3,t,t.return),Sd(3,t)}catch(w){Be(t,t.return,w)}try{aa(5,t,t.return)}catch(w){Be(t,t.return,w)}}break;case 1:En(e,t),Dn(t),r&512&&n!==null&&ks(n,n.return);break;case 5:if(En(e,t),Dn(t),r&512&&n!==null&&ks(n,n.return),t.flags&32){var i=t.stateNode;try{Sa(i,"")}catch(w){Be(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&z1(i,s),pp(a,o);var c=pp(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?G1(i,f):u==="dangerouslySetInnerHTML"?q1(i,f):u==="children"?Sa(i,f):Zm(i,u,f,c)}switch(a){case"input":cp(i,s);break;case"textarea":W1(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Ms(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Ms(i,!!s.multiple,s.defaultValue,!0):Ms(i,!!s.multiple,s.multiple?[]:"",!1))}i[Na]=s}catch(w){Be(t,t.return,w)}}break;case 6:if(En(e,t),Dn(t),r&4){if(t.stateNode===null)throw Error(j(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){Be(t,t.return,w)}}break;case 3:if(En(e,t),Dn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Aa(e.containerInfo)}catch(w){Be(t,t.return,w)}break;case 4:En(e,t),Dn(t);break;case 13:En(e,t),Dn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ng=Ke())),r&4&&F0(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Rt=(c=Rt)||u,En(e,t),Rt=c):En(e,t),Dn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(K=t,u=t.child;u!==null;){for(f=K=u;K!==null;){switch(p=K,m=p.child,p.tag){case 0:case 11:case 14:case 15:aa(4,p,p.return);break;case 1:ks(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){Be(r,n,w)}}break;case 5:ks(p,p.return);break;case 22:if(p.memoizedState!==null){B0(f);continue}}m!==null?(m.return=p,K=m):B0(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=K1("display",o))}catch(w){Be(t,t.return,w)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(w){Be(t,t.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:En(e,t),Dn(t),r&4&&F0(t);break;case 21:break;default:En(e,t),Dn(t)}}function Dn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(wE(n)){var r=n;break e}n=n.return}throw Error(j(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Sa(i,""),r.flags&=-33);var s=V0(t);Wp(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=V0(t);zp(t,a,o);break;default:throw Error(j(161))}}catch(l){Be(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function p2(t,e,n){K=t,SE(t)}function SE(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||pc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Rt;a=pc;var c=Rt;if(pc=o,(Rt=l)&&!c)for(K=i;K!==null;)o=K,l=o.child,o.tag===22&&o.memoizedState!==null?z0(i):l!==null?(l.return=o,K=l):z0(i);for(;s!==null;)K=s,SE(s),s=s.sibling;K=i,pc=a,Rt=c}U0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,K=s):U0(t)}}function U0(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Rt||Sd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Rt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Sn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&T0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}T0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Aa(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}Rt||e.flags&512&&Bp(e)}catch(p){Be(e,e.return,p)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function B0(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function z0(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sd(4,e)}catch(l){Be(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Be(e,i,l)}}var s=e.return;try{Bp(e)}catch(l){Be(e,s,l)}break;case 5:var o=e.return;try{Bp(e)}catch(l){Be(e,o,l)}}}catch(l){Be(e,e.return,l)}if(e===t){K=null;break}var a=e.sibling;if(a!==null){a.return=e.return,K=a;break}K=e.return}}var m2=Math.ceil,wu=Ir.ReactCurrentDispatcher,kg=Ir.ReactCurrentOwner,gn=Ir.ReactCurrentBatchConfig,ve=0,at=null,Ye=null,mt=0,Yt=0,Ps=gi(0),rt=0,$a=null,Hi=0,Td=0,Pg=0,la=null,zt=null,Ng=0,ro=1/0,ir=null,xu=!1,Hp=null,Qr=null,mc=!1,Vr=null,Eu=0,ca=0,qp=null,Fc=-1,Uc=0;function Vt(){return ve&6?Ke():Fc!==-1?Fc:Fc=Ke()}function Yr(t){return t.mode&1?ve&2&&mt!==0?mt&-mt:Jb.transition!==null?(Uc===0&&(Uc=ox()),Uc):(t=xe,t!==0||(t=window.event,t=t===void 0?16:fx(t.type)),t):1}function bn(t,e,n,r){if(50<ca)throw ca=0,qp=null,Error(j(185));hl(t,n,r),(!(ve&2)||t!==at)&&(t===at&&(!(ve&2)&&(Td|=n),rt===4&&Nr(t,mt)),Kt(t,r),n===1&&ve===0&&!(e.mode&1)&&(ro=Ke()+500,wd&&yi()))}function Kt(t,e){var n=t.callbackNode;JC(t,e);var r=su(t,t===at?mt:0);if(r===0)n!==null&&Jv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Jv(n),e===1)t.tag===0?Xb(W0.bind(null,t)):Nx(W0.bind(null,t)),Kb(function(){!(ve&6)&&yi()}),n=null;else{switch(ax(r)){case 1:n=ig;break;case 4:n=ix;break;case 16:n=iu;break;case 536870912:n=sx;break;default:n=iu}n=PE(n,TE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function TE(t,e){if(Fc=-1,Uc=0,ve&6)throw Error(j(327));var n=t.callbackNode;if(Bs()&&t.callbackNode!==n)return null;var r=su(t,t===at?mt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Su(t,r);else{e=r;var i=ve;ve|=2;var s=RE();(at!==t||mt!==e)&&(ir=null,ro=Ke()+500,Li(t,e));do try{v2();break}catch(a){IE(t,a)}while(1);yg(),wu.current=s,ve=i,Ye!==null?e=0:(at=null,mt=0,e=rt)}if(e!==0){if(e===2&&(i=_p(t),i!==0&&(r=i,e=Kp(t,i))),e===1)throw n=$a,Li(t,0),Nr(t,r),Kt(t,Ke()),n;if(e===6)Nr(t,r);else{if(i=t.current.alternate,!(r&30)&&!g2(i)&&(e=Su(t,r),e===2&&(s=_p(t),s!==0&&(r=s,e=Kp(t,s))),e===1))throw n=$a,Li(t,0),Nr(t,r),Kt(t,Ke()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(j(345));case 2:Ti(t,zt,ir);break;case 3:if(Nr(t,r),(r&130023424)===r&&(e=Ng+500-Ke(),10<e)){if(su(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Vt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ap(Ti.bind(null,t,zt,ir),e);break}Ti(t,zt,ir);break;case 4:if(Nr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Cn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*m2(r/1960))-r,10<r){t.timeoutHandle=Ap(Ti.bind(null,t,zt,ir),r);break}Ti(t,zt,ir);break;case 5:Ti(t,zt,ir);break;default:throw Error(j(329))}}}return Kt(t,Ke()),t.callbackNode===n?TE.bind(null,t):null}function Kp(t,e){var n=la;return t.current.memoizedState.isDehydrated&&(Li(t,e).flags|=256),t=Su(t,e),t!==2&&(e=zt,zt=n,e!==null&&Gp(e)),t}function Gp(t){zt===null?zt=t:zt.push.apply(zt,t)}function g2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Pn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Nr(t,e){for(e&=~Pg,e&=~Td,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Cn(e),r=1<<n;t[n]=-1,e&=~r}}function W0(t){if(ve&6)throw Error(j(327));Bs();var e=su(t,0);if(!(e&1))return Kt(t,Ke()),null;var n=Su(t,e);if(t.tag!==0&&n===2){var r=_p(t);r!==0&&(e=r,n=Kp(t,r))}if(n===1)throw n=$a,Li(t,0),Nr(t,e),Kt(t,Ke()),n;if(n===6)throw Error(j(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ti(t,zt,ir),Kt(t,Ke()),null}function Og(t,e){var n=ve;ve|=1;try{return t(e)}finally{ve=n,ve===0&&(ro=Ke()+500,wd&&yi())}}function qi(t){Vr!==null&&Vr.tag===0&&!(ve&6)&&Bs();var e=ve;ve|=1;var n=gn.transition,r=xe;try{if(gn.transition=null,xe=1,t)return t()}finally{xe=r,gn.transition=n,ve=e,!(ve&6)&&yi()}}function jg(){Yt=Ps.current,Pe(Ps)}function Li(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,qb(n)),Ye!==null)for(n=Ye.return;n!==null;){var r=n;switch(pg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&uu();break;case 3:to(),Pe(Ht),Pe(Nt),Sg();break;case 5:Eg(r);break;case 4:to();break;case 13:Pe(De);break;case 19:Pe(De);break;case 10:vg(r.type._context);break;case 22:case 23:jg()}n=n.return}if(at=t,Ye=t=Xr(t.current,null),mt=Yt=e,rt=0,$a=null,Pg=Td=Hi=0,zt=la=null,bi!==null){for(e=0;e<bi.length;e++)if(n=bi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}bi=null}return t}function IE(t,e){do{var n=Ye;try{if(yg(),Mc.current=_u,vu){for(var r=Ve.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}vu=!1}if(Wi=0,ot=tt=Ve=null,oa=!1,La=0,kg.current=null,n===null||n.return===null){rt=1,$a=e,Ye=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=mt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=P0(o);if(m!==null){m.flags&=-257,N0(m,o,a,s,e),m.mode&1&&k0(s,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var w=new Set;w.add(l),e.updateQueue=w}else v.add(l);break e}else{if(!(e&1)){k0(s,c,e),Lg();break e}l=Error(j(426))}}else if(Le&&a.mode&1){var E=P0(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),N0(E,o,a,s,e),mg(no(l,a));break e}}s=l=no(l,a),rt!==4&&(rt=2),la===null?la=[s]:la.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=lE(s,l,e);S0(s,y);break e;case 1:a=l;var g=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Qr===null||!Qr.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=cE(s,a,e);S0(s,x);break e}}s=s.return}while(s!==null)}CE(n)}catch(S){e=S,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(1)}function RE(){var t=wu.current;return wu.current=_u,t===null?_u:t}function Lg(){(rt===0||rt===3||rt===2)&&(rt=4),at===null||!(Hi&268435455)&&!(Td&268435455)||Nr(at,mt)}function Su(t,e){var n=ve;ve|=2;var r=RE();(at!==t||mt!==e)&&(ir=null,Li(t,e));do try{y2();break}catch(i){IE(t,i)}while(1);if(yg(),ve=n,wu.current=r,Ye!==null)throw Error(j(261));return at=null,mt=0,rt}function y2(){for(;Ye!==null;)AE(Ye)}function v2(){for(;Ye!==null&&!zC();)AE(Ye)}function AE(t){var e=kE(t.alternate,t,Yt);t.memoizedProps=t.pendingProps,e===null?CE(t):Ye=e,kg.current=null}function CE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=d2(n,e),n!==null){n.flags&=32767,Ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{rt=6,Ye=null;return}}else if(n=u2(n,e,Yt),n!==null){Ye=n;return}if(e=e.sibling,e!==null){Ye=e;return}Ye=e=t}while(e!==null);rt===0&&(rt=5)}function Ti(t,e,n){var r=xe,i=gn.transition;try{gn.transition=null,xe=1,_2(t,e,n,r)}finally{gn.transition=i,xe=r}return null}function _2(t,e,n,r){do Bs();while(Vr!==null);if(ve&6)throw Error(j(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(j(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(ZC(t,s),t===at&&(Ye=at=null,mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||mc||(mc=!0,PE(iu,function(){return Bs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=gn.transition,gn.transition=null;var o=xe;xe=1;var a=ve;ve|=4,kg.current=null,f2(t,n),EE(n,t),Vb(Ip),ou=!!Tp,Ip=Tp=null,t.current=n,p2(n),WC(),ve=a,xe=o,gn.transition=s}else t.current=n;if(mc&&(mc=!1,Vr=t,Eu=i),s=t.pendingLanes,s===0&&(Qr=null),KC(n.stateNode),Kt(t,Ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(xu)throw xu=!1,t=Hp,Hp=null,t;return Eu&1&&t.tag!==0&&Bs(),s=t.pendingLanes,s&1?t===qp?ca++:(ca=0,qp=t):ca=0,yi(),null}function Bs(){if(Vr!==null){var t=ax(Eu),e=gn.transition,n=xe;try{if(gn.transition=null,xe=16>t?16:t,Vr===null)var r=!1;else{if(t=Vr,Vr=null,Eu=0,ve&6)throw Error(j(331));var i=ve;for(ve|=4,K=t.current;K!==null;){var s=K,o=s.child;if(K.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(K=c;K!==null;){var u=K;switch(u.tag){case 0:case 11:case 15:aa(8,u,s)}var f=u.child;if(f!==null)f.return=u,K=f;else for(;K!==null;){u=K;var p=u.sibling,m=u.return;if(_E(u),u===c){K=null;break}if(p!==null){p.return=m,K=p;break}K=m}}}var v=s.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var E=w.sibling;w.sibling=null,w=E}while(w!==null)}}K=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,K=o;else e:for(;K!==null;){if(s=K,s.flags&2048)switch(s.tag){case 0:case 11:case 15:aa(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,K=y;break e}K=s.return}}var g=t.current;for(K=g;K!==null;){o=K;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,K=_;else e:for(o=g;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Sd(9,a)}}catch(S){Be(a,a.return,S)}if(a===o){K=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,K=x;break e}K=a.return}}if(ve=i,yi(),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot(md,t)}catch{}r=!0}return r}finally{xe=n,gn.transition=e}}return!1}function H0(t,e,n){e=no(n,e),e=lE(t,e,1),t=Gr(t,e,1),e=Vt(),t!==null&&(hl(t,1,e),Kt(t,e))}function Be(t,e,n){if(t.tag===3)H0(t,t,n);else for(;e!==null;){if(e.tag===3){H0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qr===null||!Qr.has(r))){t=no(n,t),t=cE(e,t,1),e=Gr(e,t,1),t=Vt(),e!==null&&(hl(e,1,t),Kt(e,t));break}}e=e.return}}function w2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Vt(),t.pingedLanes|=t.suspendedLanes&n,at===t&&(mt&n)===n&&(rt===4||rt===3&&(mt&130023424)===mt&&500>Ke()-Ng?Li(t,0):Pg|=n),Kt(t,e)}function bE(t,e){e===0&&(t.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var n=Vt();t=gr(t,e),t!==null&&(hl(t,e,n),Kt(t,n))}function x2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),bE(t,n)}function E2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(j(314))}r!==null&&r.delete(e),bE(t,n)}var kE;kE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ht.current)Wt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Wt=!1,c2(t,e,n);Wt=!!(t.flags&131072)}else Wt=!1,Le&&e.flags&1048576&&Ox(e,fu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Vc(t,e),t=e.pendingProps;var i=Js(e,Nt.current);Us(e,n),i=Ig(null,e,r,t,i,n);var s=Rg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qt(r)?(s=!0,du(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wg(e),i.updater=xd,e.stateNode=i,i._reactInternals=e,jp(e,r,t,n),e=Mp(null,e,r,!0,s,n)):(e.tag=0,Le&&s&&fg(e),Mt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Vc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=T2(r),t=Sn(r,t),i){case 0:e=Dp(null,e,r,t,n);break e;case 1:e=L0(null,e,r,t,n);break e;case 11:e=O0(null,e,r,t,n);break e;case 14:e=j0(null,e,r,Sn(r.type,t),n);break e}throw Error(j(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Sn(r,i),Dp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Sn(r,i),L0(t,e,r,i,n);case 3:e:{if(fE(e),t===null)throw Error(j(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Mx(t,e),gu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=no(Error(j(423)),e),e=D0(t,e,r,n,i);break e}else if(r!==i){i=no(Error(j(424)),e),e=D0(t,e,r,n,i);break e}else for(Xt=Kr(e.stateNode.containerInfo.firstChild),Zt=e,Le=!0,In=null,n=Ux(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zs(),r===i){e=yr(t,e,n);break e}Mt(t,e,r,n)}e=e.child}return e;case 5:return Bx(e),t===null&&Pp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Rp(r,i)?o=null:s!==null&&Rp(r,s)&&(e.flags|=32),hE(t,e),Mt(t,e,o,n),e.child;case 6:return t===null&&Pp(e),null;case 13:return pE(t,e,n);case 4:return xg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=eo(e,null,r,n):Mt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Sn(r,i),O0(t,e,r,i,n);case 7:return Mt(t,e,e.pendingProps,n),e.child;case 8:return Mt(t,e,e.pendingProps.children,n),e.child;case 12:return Mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ae(pu,r._currentValue),r._currentValue=o,s!==null)if(Pn(s.value,o)){if(s.children===i.children&&!Ht.current){e=yr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=dr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Np(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(j(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Np(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Mt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Us(e,n),i=yn(i),r=r(i),e.flags|=1,Mt(t,e,r,n),e.child;case 14:return r=e.type,i=Sn(r,e.pendingProps),i=Sn(r.type,i),j0(t,e,r,i,n);case 15:return uE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Sn(r,i),Vc(t,e),e.tag=1,qt(r)?(t=!0,du(e)):t=!1,Us(e,n),Vx(e,r,i),jp(e,r,i,n),Mp(null,e,r,!0,t,n);case 19:return mE(t,e,n);case 22:return dE(t,e,n)}throw Error(j(156,e.tag))};function PE(t,e){return rx(t,e)}function S2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(t,e,n,r){return new S2(t,e,n,r)}function Dg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function T2(t){if(typeof t=="function")return Dg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===tg)return 11;if(t===ng)return 14}return 2}function Xr(t,e){var n=t.alternate;return n===null?(n=mn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Bc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Dg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xs:return Di(n.children,i,s,e);case eg:o=8,i|=8;break;case ip:return t=mn(12,n,e,i|2),t.elementType=ip,t.lanes=s,t;case sp:return t=mn(13,n,e,i),t.elementType=sp,t.lanes=s,t;case op:return t=mn(19,n,e,i),t.elementType=op,t.lanes=s,t;case F1:return Id(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $1:o=10;break e;case V1:o=9;break e;case tg:o=11;break e;case ng:o=14;break e;case br:o=16,r=null;break e}throw Error(j(130,t==null?t:typeof t,""))}return e=mn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Di(t,e,n,r){return t=mn(7,t,r,e),t.lanes=n,t}function Id(t,e,n,r){return t=mn(22,t,r,e),t.elementType=F1,t.lanes=n,t.stateNode={isHidden:!1},t}function ff(t,e,n){return t=mn(6,t,null,e),t.lanes=n,t}function pf(t,e,n){return e=mn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function I2(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kh(0),this.expirationTimes=Kh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Mg(t,e,n,r,i,s,o,a,l){return t=new I2(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=mn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wg(s),t}function R2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ws,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function NE(t){if(!t)return si;t=t._reactInternals;e:{if(ss(t)!==t||t.tag!==1)throw Error(j(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(j(171))}if(t.tag===1){var n=t.type;if(qt(n))return Px(t,n,e)}return e}function OE(t,e,n,r,i,s,o,a,l){return t=Mg(n,r,!0,t,i,s,o,a,l),t.context=NE(null),n=t.current,r=Vt(),i=Yr(n),s=dr(r,i),s.callback=e??null,Gr(n,s,i),t.current.lanes=i,hl(t,i,r),Kt(t,r),t}function Rd(t,e,n,r){var i=e.current,s=Vt(),o=Yr(i);return n=NE(n),e.context===null?e.context=n:e.pendingContext=n,e=dr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Gr(i,e,o),t!==null&&(bn(t,i,o,s),Dc(t,i,o)),o}function Tu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function q0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $g(t,e){q0(t,e),(t=t.alternate)&&q0(t,e)}function A2(){return null}var jE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vg(t){this._internalRoot=t}Ad.prototype.render=Vg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));Rd(t,e,null,null)};Ad.prototype.unmount=Vg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;qi(function(){Rd(null,t,null,null)}),e[mr]=null}};function Ad(t){this._internalRoot=t}Ad.prototype.unstable_scheduleHydration=function(t){if(t){var e=ux();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Pr.length&&e!==0&&e<Pr[n].priority;n++);Pr.splice(n,0,t),n===0&&hx(t)}};function Fg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function K0(){}function C2(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Tu(o);s.call(c)}}var o=OE(e,r,t,0,null,!1,!1,"",K0);return t._reactRootContainer=o,t[mr]=o.current,ka(t.nodeType===8?t.parentNode:t),qi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Tu(l);a.call(c)}}var l=Mg(t,0,!1,null,null,!1,!1,"",K0);return t._reactRootContainer=l,t[mr]=l.current,ka(t.nodeType===8?t.parentNode:t),qi(function(){Rd(e,l,n,r)}),l}function bd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Tu(o);a.call(l)}}Rd(e,o,t,i)}else o=C2(n,e,t,i,r);return Tu(o)}lx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qo(e.pendingLanes);n!==0&&(sg(e,n|1),Kt(e,Ke()),!(ve&6)&&(ro=Ke()+500,yi()))}break;case 13:qi(function(){var r=gr(t,1);if(r!==null){var i=Vt();bn(r,t,1,i)}}),$g(t,1)}};og=function(t){if(t.tag===13){var e=gr(t,134217728);if(e!==null){var n=Vt();bn(e,t,134217728,n)}$g(t,134217728)}};cx=function(t){if(t.tag===13){var e=Yr(t),n=gr(t,e);if(n!==null){var r=Vt();bn(n,t,e,r)}$g(t,e)}};ux=function(){return xe};dx=function(t,e){var n=xe;try{return xe=t,e()}finally{xe=n}};gp=function(t,e,n){switch(e){case"input":if(cp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_d(r);if(!i)throw Error(j(90));B1(r),cp(r,i)}}}break;case"textarea":W1(t,n);break;case"select":e=n.value,e!=null&&Ms(t,!!n.multiple,e,!1)}};X1=Og;J1=qi;var b2={usingClientEntryPoint:!1,Events:[pl,Is,_d,Q1,Y1,Og]},Fo={findFiberByHostInstance:Ci,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},k2={bundleType:Fo.bundleType,version:Fo.version,rendererPackageName:Fo.rendererPackageName,rendererConfig:Fo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ir.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tx(t),t===null?null:t.stateNode},findFiberByHostInstance:Fo.findFiberByHostInstance||A2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gc.isDisabled&&gc.supportsFiber)try{md=gc.inject(k2),qn=gc}catch{}}on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b2;on.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fg(e))throw Error(j(200));return R2(t,e,null,n)};on.createRoot=function(t,e){if(!Fg(t))throw Error(j(299));var n=!1,r="",i=jE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Mg(t,1,!1,null,null,n,!1,r,i),t[mr]=e.current,ka(t.nodeType===8?t.parentNode:t),new Vg(e)};on.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=tx(e),t=t===null?null:t.stateNode,t};on.flushSync=function(t){return qi(t)};on.hydrate=function(t,e,n){if(!Cd(e))throw Error(j(200));return bd(null,t,e,!0,n)};on.hydrateRoot=function(t,e,n){if(!Fg(t))throw Error(j(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=jE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=OE(e,null,t,1,n??null,i,!1,s,o),t[mr]=e.current,ka(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ad(e)};on.render=function(t,e,n){if(!Cd(e))throw Error(j(200));return bd(null,t,e,!1,n)};on.unmountComponentAtNode=function(t){if(!Cd(t))throw Error(j(40));return t._reactRootContainer?(qi(function(){bd(null,null,t,!1,function(){t._reactRootContainer=null,t[mr]=null})}),!0):!1};on.unstable_batchedUpdates=Og;on.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Cd(n))throw Error(j(200));if(t==null||t._reactInternals===void 0)throw Error(j(38));return bd(t,e,n,!1,r)};on.version="18.2.0-next-9e3b772b8-20220608";function LE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(LE)}catch(t){console.error(t)}}LE(),O1.exports=on;var gl=O1.exports,G0=gl;np.createRoot=G0.createRoot,np.hydrateRoot=G0.hydrateRoot;/**
 * @remix-run/router v1.7.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Va(){return Va=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Va.apply(this,arguments)}var Fr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Fr||(Fr={}));const Q0="popstate";function P2(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Qp("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Iu(i)}return O2(e,n,null,t)}function Je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ug(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function N2(){return Math.random().toString(36).substr(2,8)}function Y0(t,e){return{usr:t.state,key:t.key,idx:e}}function Qp(t,e,n,r){return n===void 0&&(n=null),Va({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?xo(e):e,{state:n,key:e&&e.key||r||N2()})}function Iu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function xo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function O2(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Fr.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Va({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function f(){a=Fr.Pop;let E=u(),y=E==null?null:E-c;c=E,l&&l({action:a,location:w.location,delta:y})}function p(E,y){a=Fr.Push;let g=Qp(w.location,E,y);n&&n(g,E),c=u()+1;let _=Y0(g,c),x=w.createHref(g);try{o.pushState(_,"",x)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(x)}s&&l&&l({action:a,location:w.location,delta:1})}function m(E,y){a=Fr.Replace;let g=Qp(w.location,E,y);n&&n(g,E),c=u();let _=Y0(g,c),x=w.createHref(g);o.replaceState(_,"",x),s&&l&&l({action:a,location:w.location,delta:0})}function v(E){let y=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof E=="string"?E:Iu(E);return Je(y,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,y)}let w={get action(){return a},get location(){return t(i,o)},listen(E){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Q0,f),l=E,()=>{i.removeEventListener(Q0,f),l=null}},createHref(E){return e(i,E)},createURL:v,encodeLocation(E){let y=v(E);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:p,replace:m,go(E){return o.go(E)}};return w}var X0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(X0||(X0={}));function j2(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?xo(e):e,i=Bg(r.pathname||"/",n);if(i==null)return null;let s=DE(t);L2(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=W2(s[a],K2(i));return o}function DE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Je(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Jr([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Je(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),DE(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:B2(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of ME(s.path))i(s,o,l)}),e}function ME(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=ME(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function L2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:z2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const D2=/^:\w+$/,M2=3,$2=2,V2=1,F2=10,U2=-2,J0=t=>t==="*";function B2(t,e){let n=t.split("/"),r=n.length;return n.some(J0)&&(r+=U2),e&&(r+=$2),n.filter(i=>!J0(i)).reduce((i,s)=>i+(D2.test(s)?M2:s===""?V2:F2),r)}function z2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function W2(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=H2({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let f=a.route;s.push({params:r,pathname:Jr([i,u.pathname]),pathnameBase:X2(Jr([i,u.pathnameBase])),route:f}),u.pathnameBase!=="/"&&(i=Jr([i,u.pathnameBase]))}return s}function H2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=q2(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,f)=>{if(u==="*"){let p=a[f]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}return c[u]=G2(a[f]||"",u),c},{}),pathname:s,pathnameBase:o,pattern:t}}function q2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ug(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function K2(t){try{return decodeURI(t)}catch(e){return Ug(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function G2(t,e){try{return decodeURIComponent(t)}catch(n){return Ug(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Bg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Q2(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?xo(t):t;return{pathname:n?n.startsWith("/")?n:Y2(n,e):e,search:J2(r),hash:Z2(i)}}function Y2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function mf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $E(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function VE(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=xo(t):(i=Va({},t),Je(!i.pathname||!i.pathname.includes("?"),mf("?","pathname","search",i)),Je(!i.pathname||!i.pathname.includes("#"),mf("#","pathname","hash",i)),Je(!i.search||!i.search.includes("#"),mf("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let f=e.length-1;if(o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=Q2(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Jr=t=>t.join("/").replace(/\/\/+/g,"/"),X2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),J2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Z2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ek(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const FE=["post","put","patch","delete"];new Set(FE);const tk=["get",...FE];new Set(tk);/**
 * React Router v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ru(){return Ru=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ru.apply(this,arguments)}const zg=h.createContext(null),nk=h.createContext(null),Eo=h.createContext(null),kd=h.createContext(null),vi=h.createContext({outlet:null,matches:[],isDataRoute:!1}),UE=h.createContext(null);function rk(t,e){let{relative:n}=e===void 0?{}:e;yl()||Je(!1);let{basename:r,navigator:i}=h.useContext(Eo),{hash:s,pathname:o,search:a}=zE(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Jr([r,o])),i.createHref({pathname:l,search:a,hash:s})}function yl(){return h.useContext(kd)!=null}function os(){return yl()||Je(!1),h.useContext(kd).location}function BE(t){h.useContext(Eo).static||h.useLayoutEffect(t)}function _i(){let{isDataRoute:t}=h.useContext(vi);return t?gk():ik()}function ik(){yl()||Je(!1);let t=h.useContext(zg),{basename:e,navigator:n}=h.useContext(Eo),{matches:r}=h.useContext(vi),{pathname:i}=os(),s=JSON.stringify($E(r).map(l=>l.pathnameBase)),o=h.useRef(!1);return BE(()=>{o.current=!0}),h.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let u=VE(l,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Jr([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,s,i,t])}function Pd(){let{matches:t}=h.useContext(vi),e=t[t.length-1];return e?e.params:{}}function zE(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=h.useContext(vi),{pathname:i}=os(),s=JSON.stringify($E(r).map(o=>o.pathnameBase));return h.useMemo(()=>VE(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}function sk(t,e){return ok(t,e)}function ok(t,e,n){yl()||Je(!1);let{navigator:r}=h.useContext(Eo),{matches:i}=h.useContext(vi),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=os(),c;if(e){var u;let w=typeof e=="string"?xo(e):e;a==="/"||(u=w.pathname)!=null&&u.startsWith(a)||Je(!1),c=w}else c=l;let f=c.pathname||"/",p=a==="/"?f:f.slice(a.length)||"/",m=j2(t,{pathname:p}),v=dk(m&&m.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:Jr([a,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?a:Jr([a,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n);return e&&v?h.createElement(kd.Provider,{value:{location:Ru({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Fr.Pop}},v):v}function ak(){let t=mk(),e=ek(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},e),n?h.createElement("pre",{style:i},n):null,s)}const lk=h.createElement(ak,null);class ck extends h.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?h.createElement(vi.Provider,{value:this.props.routeContext},h.createElement(UE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uk(t){let{routeContext:e,match:n,children:r}=t,i=h.useContext(zg);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),h.createElement(vi.Provider,{value:e},r)}function dk(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let s=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=s.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||Je(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,l,c)=>{let u=l.route.id?o==null?void 0:o[l.route.id]:null,f=null;n&&(f=l.route.errorElement||lk);let p=e.concat(s.slice(0,c+1)),m=()=>{let v;return u?v=f:l.route.Component?v=h.createElement(l.route.Component,null):l.route.element?v=l.route.element:v=a,h.createElement(uk,{match:l,routeContext:{outlet:a,matches:p,isDataRoute:n!=null},children:v})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?h.createElement(ck,{location:n.location,revalidation:n.revalidation,component:f,error:u,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var Yp;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(Yp||(Yp={}));var Fa;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(Fa||(Fa={}));function hk(t){let e=h.useContext(zg);return e||Je(!1),e}function fk(t){let e=h.useContext(nk);return e||Je(!1),e}function pk(t){let e=h.useContext(vi);return e||Je(!1),e}function WE(t){let e=pk(),n=e.matches[e.matches.length-1];return n.route.id||Je(!1),n.route.id}function mk(){var t;let e=h.useContext(UE),n=fk(Fa.UseRouteError),r=WE(Fa.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function gk(){let{router:t}=hk(Yp.UseNavigateStable),e=WE(Fa.UseNavigateStable),n=h.useRef(!1);return BE(()=>{n.current=!0}),h.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ru({fromRouteId:e},s)))},[t,e])}function HE(t){Je(!1)}function yk(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Fr.Pop,navigator:s,static:o=!1}=t;yl()&&Je(!1);let a=e.replace(/^\/*/,"/"),l=h.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=xo(r));let{pathname:c="/",search:u="",hash:f="",state:p=null,key:m="default"}=r,v=h.useMemo(()=>{let w=Bg(c,a);return w==null?null:{location:{pathname:w,search:u,hash:f,state:p,key:m},navigationType:i}},[a,c,u,f,p,m,i]);return v==null?null:h.createElement(Eo.Provider,{value:l},h.createElement(kd.Provider,{children:n,value:v}))}function vk(t){let{children:e,location:n}=t;return sk(Xp(e),n)}var Z0;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(Z0||(Z0={}));new Promise(()=>{});function Xp(t,e){e===void 0&&(e=[]);let n=[];return h.Children.forEach(t,(r,i)=>{if(!h.isValidElement(r))return;let s=[...e,i];if(r.type===h.Fragment){n.push.apply(n,Xp(r.props.children,s));return}r.type!==HE&&Je(!1),!r.props.index||!r.props.children||Je(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Xp(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jp(){return Jp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jp.apply(this,arguments)}function _k(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function wk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function xk(t,e){return t.button===0&&(!e||e==="_self")&&!wk(t)}const Ek=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],Sk="startTransition",e_=Ym[Sk];function Tk(t){let{basename:e,children:n,future:r,window:i}=t,s=h.useRef();s.current==null&&(s.current=P2({window:i,v5Compat:!0}));let o=s.current,[a,l]=h.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=h.useCallback(f=>{c&&e_?e_(()=>l(f)):l(f)},[l,c]);return h.useLayoutEffect(()=>o.listen(u),[o,u]),h.createElement(yk,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const Ik=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Rk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_n=h.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u}=e,f=_k(e,Ek),{basename:p}=h.useContext(Eo),m,v=!1;if(typeof c=="string"&&Rk.test(c)&&(m=c,Ik))try{let g=new URL(window.location.href),_=c.startsWith("//")?new URL(g.protocol+c):new URL(c),x=Bg(_.pathname,p);_.origin===g.origin&&x!=null?c=x+_.search+_.hash:v=!0}catch{}let w=rk(c,{relative:i}),E=Ak(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i});function y(g){r&&r(g),g.defaultPrevented||E(g)}return h.createElement("a",Jp({},f,{href:m||w,onClick:v||s?r:y,ref:n,target:l}))});var t_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(t_||(t_={}));var n_;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(n_||(n_={}));function Ak(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=_i(),l=os(),c=zE(t,{relative:o});return h.useCallback(u=>{if(xk(u,n)){u.preventDefault();let f=r!==void 0?r:Iu(l)===Iu(c);a(t,{replace:f,state:i,preventScrollReset:s,relative:o})}},[l,a,c,r,i,n,t,s,o])}function qE(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=qE(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function Ck(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=qE(t))&&(r&&(r+=" "),r+=e);return r}const r_=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,i_=Ck,bk=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return i_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],f=s==null?void 0:s[c];if(u===null)return null;const p=r_(u)||r_(f);return i[c][p]}),a=n&&Object.entries(n).reduce((c,u)=>{let[f,p]=u;return p===void 0||(c[f]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:f,className:p,...m}=u;return Object.entries(m).every(v=>{let[w,E]=v;return Array.isArray(E)?E.includes({...s,...a}[w]):{...s,...a}[w]===E})?[...c,f,p]:c},[]);return i_(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function kk({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"}))}const Pk=h.forwardRef(kk),Nk=Pk;function Ok({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3"}))}const jk=h.forwardRef(Ok),Lk=jk;function Dk({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const Mk=h.forwardRef(Dk),Nd=Mk;function $k({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"}))}const Vk=h.forwardRef($k),Fk=Vk;function Uk({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"}))}const Bk=h.forwardRef(Uk),zk=Bk;function Wk({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}))}const Hk=h.forwardRef(Wk),qk=Hk;function Kk({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953l7.108-4.062A1.125 1.125 0 0121 8.688v8.123zM11.25 16.811c0 .864-.933 1.405-1.683.977l-7.108-4.062a1.125 1.125 0 010-1.953L9.567 7.71a1.125 1.125 0 011.683.977v8.123z"}))}const Gk=h.forwardRef(Kk),Qk=Gk;function Yk({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Xk=h.forwardRef(Yk),Jk=Xk;function Zk({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const eP=h.forwardRef(Zk),KE=eP;function tP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))}const nP=h.forwardRef(tP),ua=nP;function rP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"}))}const iP=h.forwardRef(rP),sP=iP;function oP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5"}))}const aP=h.forwardRef(oP),lP=aP;function cP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const uP=h.forwardRef(cP),GE=uP;function dP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}const hP=h.forwardRef(dP),vl=hP;function fP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const pP=h.forwardRef(fP),QE=pP;function mP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"}))}const gP=h.forwardRef(mP),yP=gP;function vP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const _P=h.forwardRef(vP),Wg=_P;function wP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const xP=h.forwardRef(wP),s_=xP;function EP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const SP=h.forwardRef(EP),TP=SP;function IP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const RP=h.forwardRef(IP),AP=RP;function CP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"}))}const bP=h.forwardRef(CP),YE=bP;function kP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062A1.125 1.125 0 013 16.81V8.688zM12.75 8.688c0-.864.933-1.405 1.683-.977l7.108 4.062a1.125 1.125 0 010 1.953l-7.108 4.062a1.125 1.125 0 01-1.683-.977V8.688z"}))}const PP=h.forwardRef(kP),XE=PP;function NP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const OP=h.forwardRef(NP),JE=OP;function jP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const LP=h.forwardRef(jP),DP=LP;function MP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const $P=h.forwardRef(MP),VP=$P;function FP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const UP=h.forwardRef(FP),BP=UP;function zP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"}))}const WP=h.forwardRef(zP),HP=WP;function qP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"}))}const KP=h.forwardRef(qP),da=KP;function GP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"}))}const QP=h.forwardRef(GP),YP=QP;function XP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9v6m-4.5 0V9M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const JP=h.forwardRef(XP),So=JP;function ZP({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"}))}const eN=h.forwardRef(ZP),Hg=eN;function tN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"}))}const nN=h.forwardRef(tN),ZE=nN;function rN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"}))}const iN=h.forwardRef(rN),sN=iN;function oN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const aN=h.forwardRef(oN),Ua=aN;function lN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const cN=h.forwardRef(lN),uN=cN;function dN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"}))}const hN=h.forwardRef(dN),fN=hN;function pN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75L19.5 12m0 0l2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6l4.72-4.72a.75.75 0 011.28.531V19.94a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.506-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.395C2.806 8.757 3.63 8.25 4.51 8.25H6.75z"}))}const mN=h.forwardRef(pN),gN=mN;function yN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"}))}const vN=h.forwardRef(yN),Au=vN;function _N({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const wN=h.forwardRef(_N),qg=wN;function xN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}))}const EN=h.forwardRef(xN),SN=EN;function TN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}const IN=h.forwardRef(TN),RN=IN;function AN({title:t,titleId:e,...n},r){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":e},n),t?h.createElement("title",{id:e},t):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const CN=h.forwardRef(AN),Vn=CN,bN=bk("inline-flex items-center hover:brightness-90",{variants:{variant:{default:"",circle:"rounded-[99px] p-[4px] bg-gray-500 bg-opacity-20 text-xl",list:"flex items-center py-[4px] w-full text-[14px]",primary:"px-[20px] py-[5px] text-[14px]"},size:{half:"w-1/2",full:"w-full",small:"h-[20px] w-[20px]",normal:"h-[35px] w-[35px]",large:"h-[40px] w-[40px]"}},defaultVariants:{variant:"default"}}),ee=({className:t,children:e,variant:n,size:r,isLoading:i,onClick:s,...o})=>d.jsxs("button",{onClick:a=>s?s(a):"",...o,className:bN({variant:n,size:r,className:t}),disabled:i,children:[i?d.jsx(Nd,{className:"h-5 w-5 animate-spin"}):null,!i&&e]}),Zp=[{name:"Red",id:"red",type:"dark",bottom_player_bg:"bg-[#3b1113]",side_bar_bg:"bg-[#391b1c]",content_text:"text-[#ca4954]",content_hover_text:"hover:text-[#ca4954]",content_border:"border-[#ca4954]",content_hover_border:"hover:border-[#ca4954]",content_bg:"bg-[#ca4954]",content_hover_bg:"hover:bg-[#ca4954]",container:"bg-[#2e0f10]"},{name:"Deep blue",id:"deep_blue",type:"dark",bottom_player_bg:"bg-[#111f3b]",side_bar_bg:"bg-[#1b2639]",content_text:"text-[#0c9e85]",content_hover_text:"hover:text-[#0c9e85]",content_border:"border-[#0c9e85]",content_hover_border:"hover:border-[#0c9e85]",content_bg:"bg-[#0c9e85]",content_hover_bg:"hover:bg-[#0c9e85]",container:"bg-[#0f1a2e]"},{name:"Light green",id:"green_light",type:"light",bottom_player_bg:"bg-[#c0d8d8]",side_bar_bg:"bg-[#dde5e5]",content_text:"text-[#198585]",content_hover_text:"hover:text-[#198585]",content_border:"border-[#198585]",content_hover_border:"hover:border-[#198585]",content_bg:"bg-[#198585]",content_hover_bg:"hover:bg-[#198585]",container:"bg-[#ced9d9]"},{name:"Gray",id:"gray",type:"light",bottom_player_bg:"bg-[#dedad1]",side_bar_bg:"bg-[#d9d7d4]",content_text:"text-[#644646]",content_hover_text:"hover:text-[#644646]",content_border:"border-[#644646]",content_hover_border:"hover:border-[#644646]",content_bg:"bg-[#644646]",content_hover_bg:"hover:bg-[#644646]",container:"bg-[#e5e3df]"}],kN=JSON.parse(localStorage.getItem("theme")),o_=Zp.find(t=>t.id===kN)||Zp[0],eS={theme:{...o_,alpha:o_.type==="light"?"[#000]/[.1]":"[#fff]/[.1]"}},PN=(t,e)=>{const n=e.payload.theme;return{theme:{...n,alpha:n.type==="dark"?"[#fff]/[.1]":"[#000]/[.1]"}}},NN=t=>{const[e,n]=h.useReducer(PN,t),r=h.useCallback(i=>{console.log("set theme"),n({type:0,payload:{theme:i}})},[]);return{state:e,setTheme:r}},ON={state:eS,setTheme:()=>{}},tS=h.createContext(ON),jN=({children:t,theme:e})=>d.jsx(tS.Provider,{value:NN(e),children:t}),ct=()=>{const{state:{theme:t},setTheme:e}=h.useContext(tS);return{theme:t,setTheme:e}};function ze({className:t}){const{theme:e}=ct();return d.jsx("div",{className:`animate-pulse rounded-[4px] bg-${e.alpha} ${t}`})}const nS=[...Array(4).keys()].map(t=>d.jsxs("div",{className:"flex items-center p-[10px]",children:[d.jsx(ze,{className:"h-[18px] w-[18px]"}),d.jsx(ze,{className:"h-[54px] w-[54px] ml-[10px] rounded-[4px]"}),d.jsxs("div",{className:"ml-[10px]",children:[d.jsx(ze,{className:"h-[20px] mb-[5px] w-[150px]"}),d.jsx(ze,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},t)),LN=[...Array(1).keys()].map(t=>d.jsx(ze,{className:"w-full h-[40px] mb-[10px]"},t)),DN=[...Array(2).keys()].map(t=>d.jsxs("div",{className:"w-1/4 p-[8px] max-[459px]:w-1/2",children:[d.jsx(ze,{className:"pt-[100%] rounded-[8px]"}),d.jsx(ze,{className:"h-[20px] mt-[9px] w-[50%]"})]},t));var MN=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],Go=t=>{let e=0;for(let n=0;n<t.length;n++){let r=t[n],i=MN.indexOf(r);e=e*83+i}return e},gf=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},yf=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},$N=t=>t<0?-1:1,vf=(t,e)=>$N(t)*Math.pow(Math.abs(t),e),a_=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},VN=t=>{if(!t||t.length<6)throw new a_("The blurhash string must be at least 6 characters");let e=Go(t[0]),n=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*n)throw new a_(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*n}`)},FN=t=>{let e=t>>16,n=t>>8&255,r=t&255;return[gf(e),gf(n),gf(r)]},UN=(t,e)=>{let n=Math.floor(t/361),r=Math.floor(t/19)%19,i=t%19;return[vf((n-9)/9,2)*e,vf((r-9)/9,2)*e,vf((i-9)/9,2)*e]},BN=(t,e,n,r)=>{VN(t),r=r|1;let i=Go(t[0]),s=Math.floor(i/9)+1,o=i%9+1,a=(Go(t[1])+1)/166,l=new Array(o*s);for(let f=0;f<l.length;f++)if(f===0){let p=Go(t.substring(2,6));l[f]=FN(p)}else{let p=Go(t.substring(4+f*2,6+f*2));l[f]=UN(p,a*r)}let c=e*4,u=new Uint8ClampedArray(c*n);for(let f=0;f<n;f++)for(let p=0;p<e;p++){let m=0,v=0,w=0;for(let _=0;_<s;_++)for(let x=0;x<o;x++){let S=Math.cos(Math.PI*p*x/e)*Math.cos(Math.PI*f*_/n),T=l[x+_*o];m+=T[0]*S,v+=T[1]*S,w+=T[2]*S}let E=yf(m),y=yf(v),g=yf(w);u[4*p+0+f*c]=E,u[4*p+1+f*c]=y,u[4*p+2+f*c]=g,u[4*p+3+f*c]=255}return u},zN=BN,WN=Object.defineProperty,HN=Object.defineProperties,qN=Object.getOwnPropertyDescriptors,Cu=Object.getOwnPropertySymbols,rS=Object.prototype.hasOwnProperty,iS=Object.prototype.propertyIsEnumerable,l_=(t,e,n)=>e in t?WN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,em=(t,e)=>{for(var n in e||(e={}))rS.call(e,n)&&l_(t,n,e[n]);if(Cu)for(var n of Cu(e))iS.call(e,n)&&l_(t,n,e[n]);return t},tm=(t,e)=>HN(t,qN(e)),sS=(t,e)=>{var n={};for(var r in t)rS.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Cu)for(var r of Cu(t))e.indexOf(r)<0&&iS.call(t,r)&&(n[r]=t[r]);return n},oS=class extends h.PureComponent{constructor(){super(...arguments),this.canvas=null,this.handleRef=e=>{this.canvas=e,this.draw()},this.draw=()=>{let{hash:e,height:n,punch:r,width:i}=this.props;if(this.canvas){let s=zN(e,i,n,r),o=this.canvas.getContext("2d"),a=o.createImageData(i,n);a.data.set(s),o.putImageData(a,0,0)}}}componentDidUpdate(){this.draw()}render(){let e=this.props,{hash:n,height:r,width:i}=e,s=sS(e,["hash","height","width"]);return h.createElement("canvas",tm(em({},s),{height:r,width:i,ref:this.handleRef}))}};oS.defaultProps={height:128,width:128};var KN={position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"},aS=class extends h.PureComponent{componentDidUpdate(){if(this.props.resolutionX<=0)throw new Error("resolutionX must be larger than zero");if(this.props.resolutionY<=0)throw new Error("resolutionY must be larger than zero")}render(){let e=this.props,{hash:n,height:r,width:i,punch:s,resolutionX:o,resolutionY:a,style:l}=e,c=sS(e,["hash","height","width","punch","resolutionX","resolutionY","style"]);return h.createElement("div",tm(em({},c),{style:tm(em({display:"inline-block",height:r,width:i},l),{position:"relative"})}),h.createElement(oS,{hash:n,height:a,width:o,punch:s,style:KN}))}};aS.defaultProps={height:128,width:128,resolutionX:32,resolutionY:32};function as({src:t,classNames:e,blurHashEncode:n,onError:r}){const[i,s]=h.useState(!1),o=h.useRef(null),a=()=>{s(!0)},l=()=>{const u=o.current;u.src="https://placehold.co/100",s(!0)},c=()=>{r?(r(),l()):l()};return h.useEffect(()=>{if(!t){l();return}const u=o.current;return u&&(u.addEventListener("load",a),u.addEventListener("error",c)),()=>{u&&(u.removeEventListener("load",a),u.removeEventListener("error",c))}},[]),d.jsxs(d.Fragment,{children:[!i&&d.jsx(d.Fragment,{children:n?d.jsx(aS,{hash:n,height:"100%",width:"100%"}):d.jsx(ze,{className:"w-full h-0"})}),d.jsx("img",{className:`${e||""} w-full ${i?"":"hidden"}`,src:t||"https://placehold.co/100",ref:o})]})}const GN=({className:t,onClick:e,theme:n})=>d.jsx("div",{className:"w-full rounded-[8px] border border-[#fff] relative",children:d.jsx("div",{onClick:()=>e(),className:`${n==null?void 0:n.content_hover_text} ${t} cursor-pointer`,children:d.jsx(ee,{className:"absolute top-1/2 left-1/2 -translate-x-[50%] -translate-y-[50%] ",children:d.jsx(Ua,{className:"w-[40px] max-[549px]:w-[30px]"})})})});function Gn({children:t,theme:e,classNames:n}){return d.jsx("div",{className:`rounded  px-[20px] py-[10px] ${e.type==="light"?"text-[#333]":"text-white"} ${e.container} border-[1px] border-${e.alpha} ${n}`,children:t})}function QN({className:t,icon:e,label:n,to:r,arrowIcon:i}){return d.jsxs(_n,{className:"w-full flex flex-row justify-between items-center "+t,to:r,children:[d.jsxs(ee,{className:"",children:[e,d.jsx("span",{className:"text-lg font-medium",children:n})]}),i&&d.jsx("span",{children:i})]})}const lS={userSongs:[],userPlaylists:[],adminSongs:[],adminPlaylists:[],initial:!1},YN=(t,e)=>{const n=e.payload;switch(e.type){case 2:return{userSongs:n.userSongs||[],userPlaylists:n.userPlaylists||[],adminSongs:n.adminSongs||t.adminSongs,adminPlaylists:n.adminPlaylists||t.adminPlaylists,initial:!!(n.adminSongs||n.userSongs)};case 0:return{userSongs:n.userSongs||[],adminSongs:t.adminSongs,userPlaylists:t.userPlaylists,adminPlaylists:t.adminPlaylists,initial:t.initial};case 1:return{adminSongs:t.adminSongs,userSongs:t.userSongs,userPlaylists:n.userPlaylists||[],adminPlaylists:t.adminPlaylists,initial:t.initial};default:return{adminSongs:t.adminSongs,userSongs:t.userSongs,userPlaylists:t.userPlaylists,adminPlaylists:t.adminPlaylists,initial:t.initial}}},XN=t=>{const[e,n]=h.useReducer(YN,t),r=h.useCallback(o=>{n({type:0,payload:{userSongs:o}})},[]),i=h.useCallback(({userSongs:o,adminSongs:a,userPlaylists:l,adminPlaylists:c})=>{n({type:2,payload:{userSongs:o,adminSongs:a,userPlaylists:l,adminPlaylists:c}})},[]),s=h.useCallback(o=>{n({type:1,payload:{userPlaylists:o}})},[]);return{state:e,setUserSongs:r,initSongsContext:i,setUserPlaylists:s}},JN={state:lS,setUserSongs:()=>{},initSongsContext:()=>{},setUserPlaylists:()=>{}},cS=h.createContext(JN),ZN=({children:t,songsStore:e})=>d.jsx(cS.Provider,{value:XN(e),children:t}),ln=()=>{const{state:{adminPlaylists:t,adminSongs:e,initial:n,userPlaylists:r,userSongs:i},initSongsContext:s,setUserSongs:o,setUserPlaylists:a}=h.useContext(cS);return{adminPlaylists:t,adminSongs:e,initial:n,userPlaylists:r,userSongs:i,initSongsContext:s,setUserSongs:o,setUserPlaylists:a}},_l=({data:t,theme:e,selectedSongList:n,active:r,onClick:i,isCheckedSong:s,setSelectedSongList:o,setIsCheckedSong:a})=>{const l=h.useCallback(()=>n?(n==null?void 0:n.indexOf(t))!=-1:!1,[n]),c=f=>{if(console.log("check selected"),!o||!n){console.log("song list item lack of props");return}s||a&&a(!0);let p=[...n];const m=p.indexOf(f);m===-1?p.push(f):p.splice(m,1),o(p),p.length||a&&a(!0)},u={button:`${e.content_bg} rounded-full`,textColor:e.type==="light"?"text-[#333]":"text-[#fff]",songListButton:`mr-[10px] px-[5px] text-${e.alpha} group-hover/main:text-[inherit]`,itemContainer:`item-container transition-all  origin-top duration-[300ms] border-b border-${e.alpha} flex flex-row rounded-[4px] justify-between w-[100%] px-[5px] py-[10px] ${l()&&"bg-"+e.alpha}`,imageFrame:"w-[54px] h-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]"};return d.jsx(d.Fragment,{children:d.jsx("div",{className:`${u.itemContainer}`,children:d.jsxs("div",{className:"flex flex-row w-[100%]",children:[d.jsx(d.Fragment,{children:s?d.jsx("button",{onClick:()=>c(t),className:`${u.songListButton} text-[inherit]`,children:l()?d.jsx(ua,{className:"w-[18px]"}):d.jsx(Au,{className:"w-[18px]"})}):d.jsx(d.Fragment,{children:d.jsx("button",{onClick:()=>c(t),className:`${u.songListButton} block`,children:d.jsx(Au,{className:"w-[18px] "})})})}),d.jsxs("div",{className:"flex-grow flex",onClick:f=>i(f),children:[d.jsxs("div",{className:`${u.imageFrame}`,children:[d.jsx(as,{src:t.image_url}),r&&d.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex songContainers-center items-center justify-center",children:d.jsx(So,{className:"w-[28px] text-[#fff]"})})]}),d.jsxs("div",{className:"ml-[10px]",children:[d.jsx("h5",{className:`text-mg line-clamp-1 ${r&&e.content_text}`,children:t.name}),d.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:t.singer})]})]})]})})})};function e5({playlistSongs:t,theme:e,handleAddSongsToPlaylist:n}){const[r,i]=h.useState([]),{userSongs:s}=ln(),o={addSongContainer:"pb-[50px] relative",addSongContent:"max-h-[calc(90vh-50px)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full max-[549px]:w-full"},a=h.useMemo(()=>!!r.length,[r]);return d.jsx("div",{className:o.addSongContainer,children:d.jsxs("div",{className:o.addSongContent,children:[d.jsx(ee,{onClick:()=>n(r),variant:"primary",className:`rounded-full ${e.content_bg} absolute bottom-0 right-15px ${!a&&"opacity-60 pointer-events-none"}`,children:"Save"}),s.map((l,c)=>{if(t.indexOf(l)==-1)return d.jsx("div",{className:o.songItem,children:d.jsx(_l,{isCheckedSong:!0,selectedSongList:r,setSelectedSongList:i,theme:e,data:l,active:!1,onClick:()=>{}})},c)})]})})}function uS({children:t,active:e,done:n,firstTimeRender:r,inUpload:i,className:s,scrollBehavior:o}){const a=h.useRef(null),l=()=>{a.current.scrollIntoView({behavior:(o==null?void 0:o.current)||"smooth",block:"center"})};return h.useEffect(()=>{if(e){if(r.current){r.current=!1;return}l(),o&&o.current!="smooth"&&(o.current="smooth")}},[e]),d.jsxs("p",{ref:a,className:`${s&&s} ${i?"text-[16px]":"text-[30px]"}  select-none  max-[549px]:text-center font-bold ${n&&"opacity-40"} ${i&&"flex"} ${e&&"text-[#ffed00]"}`,children:[t,i&&e&&d.jsx("span",{className:"ml-[10px] text-[16px]"})]})}function t5({isWaiting:t,isPlaying:e,handlePlayPause:n,hoverClasses:r,isError:i,songInStore:s}){const o=h.useMemo(()=>t?d.jsx(Nd,{className:"w-[36px] max-[549px]:w-[46px] animate-spin"}):i&&s.name?d.jsx(YE,{className:"w-[30px] max-[549px]:w-[40px]"}):e?d.jsx(So,{className:"w-[50px] max-[549px]:w-[60px]"}):d.jsx(ZE,{className:"w-[50px] max-[549px]:w-[60px]"}),[t,i,e]);return d.jsx(d.Fragment,{children:d.jsx("button",{className:`p-[5px] ${r&&r} ${t&&"pointer-events-none"} inline-flex items-center justify-center w-[50px] max-[549px]:w-[60px]`,onClick:()=>n(),children:o})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},n5=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},hS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[u],n[f],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):n5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new r5;const p=s<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),f!==64){const v=c<<6&192|f;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class r5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i5=function(t){const e=dS(t);return hS.encodeByteArray(e,!0)},bu=function(t){return i5(t).replace(/\./g,"")},fS=function(t){try{return hS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5=()=>s5().__FIREBASE_DEFAULTS__,a5=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},l5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&fS(t[1]);return e&&JSON.parse(e)},Od=()=>{try{return o5()||a5()||l5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},pS=t=>{var e,n;return(n=(e=Od())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},mS=t=>{const e=pS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},gS=()=>{var t;return(t=Od())===null||t===void 0?void 0:t.config},yS=t=>{var e;return(e=Od())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[bu(JSON.stringify(n)),bu(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function u5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function d5(){var t;const e=(t=Od())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function h5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function f5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function p5(){const t=Ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function m5(){try{return typeof indexedDB=="object"}catch{return!1}}function g5(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5="FirebaseError";class rr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=y5,Object.setPrototypeOf(this,rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wl.prototype.create)}}class wl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?v5(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new rr(i,a,r)}}function v5(t,e){return t.replace(_5,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const _5=/\{\$([^}]+)}/g;function w5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ku(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(c_(s)&&c_(o)){if(!ku(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function c_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function x5(t,e){const n=new E5(t,e);return n.subscribe.bind(n)}class E5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");S5(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=_f),i.error===void 0&&(i.error=_f),i.complete===void 0&&(i.complete=_f);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function S5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _f(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){return t&&t._delegate?t._delegate:t}class oi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T5=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new c5;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(R5(e))try{this.getOrInitializeService({instanceIdentifier:Ii})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ii){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ii){return this.instances.has(e)}getOptions(e=Ii){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:I5(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ii){return this.component?this.component.multipleInstances?e:Ii:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function I5(t){return t===Ii?void 0:t}function R5(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new T5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const C5={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},b5=_e.INFO,k5={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},P5=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=k5[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Kg{constructor(e){this.name=e,this._logLevel=b5,this._logHandler=P5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?C5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const N5=(t,e)=>e.some(n=>t instanceof n);let u_,d_;function O5(){return u_||(u_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function j5(){return d_||(d_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _S=new WeakMap,nm=new WeakMap,wS=new WeakMap,wf=new WeakMap,Gg=new WeakMap;function L5(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Zr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&_S.set(n,t)}).catch(()=>{}),Gg.set(e,t),e}function D5(t){if(nm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});nm.set(t,e)}let rm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return nm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function M5(t){rm=t(rm)}function $5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(xf(this),e,...n);return wS.set(r,e.sort?e.sort():[e]),Zr(r)}:j5().includes(t)?function(...e){return t.apply(xf(this),e),Zr(_S.get(this))}:function(...e){return Zr(t.apply(xf(this),e))}}function V5(t){return typeof t=="function"?$5(t):(t instanceof IDBTransaction&&D5(t),N5(t,O5())?new Proxy(t,rm):t)}function Zr(t){if(t instanceof IDBRequest)return L5(t);if(wf.has(t))return wf.get(t);const e=V5(t);return e!==t&&(wf.set(t,e),Gg.set(e,t)),e}const xf=t=>Gg.get(t);function F5(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Zr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Zr(o.result),l.oldVersion,l.newVersion,Zr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const U5=["get","getKey","getAll","getAllKeys","count"],B5=["put","add","delete","clear"],Ef=new Map;function h_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ef.get(e))return Ef.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=B5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||U5.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Ef.set(e,s),s}M5(t=>({...t,get:(e,n,r)=>h_(e,n)||t.get(e,n,r),has:(e,n)=>!!h_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(W5(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function W5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const im="@firebase/app",f_="0.9.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new Kg("@firebase/app"),H5="@firebase/app-compat",q5="@firebase/analytics-compat",K5="@firebase/analytics",G5="@firebase/app-check-compat",Q5="@firebase/app-check",Y5="@firebase/auth",X5="@firebase/auth-compat",J5="@firebase/database",Z5="@firebase/database-compat",eO="@firebase/functions",tO="@firebase/functions-compat",nO="@firebase/installations",rO="@firebase/installations-compat",iO="@firebase/messaging",sO="@firebase/messaging-compat",oO="@firebase/performance",aO="@firebase/performance-compat",lO="@firebase/remote-config",cO="@firebase/remote-config-compat",uO="@firebase/storage",dO="@firebase/storage-compat",hO="@firebase/firestore",fO="@firebase/firestore-compat",pO="firebase",mO="10.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="[DEFAULT]",gO={[im]:"fire-core",[H5]:"fire-core-compat",[K5]:"fire-analytics",[q5]:"fire-analytics-compat",[Q5]:"fire-app-check",[G5]:"fire-app-check-compat",[Y5]:"fire-auth",[X5]:"fire-auth-compat",[J5]:"fire-rtdb",[Z5]:"fire-rtdb-compat",[eO]:"fire-fn",[tO]:"fire-fn-compat",[nO]:"fire-iid",[rO]:"fire-iid-compat",[iO]:"fire-fcm",[sO]:"fire-fcm-compat",[oO]:"fire-perf",[aO]:"fire-perf-compat",[lO]:"fire-rc",[cO]:"fire-rc-compat",[uO]:"fire-gcs",[dO]:"fire-gcs-compat",[hO]:"fire-fst",[fO]:"fire-fst-compat","fire-js":"fire-js",[pO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=new Map,om=new Map;function yO(t,e){try{t.container.addComponent(e)}catch(n){Ki.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gi(t){const e=t.name;if(om.has(e))return Ki.debug(`There were multiple attempts to register component ${e}.`),!1;om.set(e,t);for(const n of Pu.values())yO(n,t);return!0}function jd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ei=new wl("app","Firebase",vO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new oi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ei.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=mO;function xS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:sm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ei.create("bad-app-name",{appName:String(i)});if(n||(n=gS()),!n)throw ei.create("no-options");const s=Pu.get(i);if(s){if(ku(n,s.options)&&ku(r,s.config))return s;throw ei.create("duplicate-app",{appName:i})}const o=new A5(i);for(const l of om.values())o.addComponent(l);const a=new _O(n,r,o);return Pu.set(i,a),a}function Qg(t=sm){const e=Pu.get(t);if(!e&&t===sm&&gS())return xS();if(!e)throw ei.create("no-app",{appName:t});return e}function Qn(t,e,n){var r;let i=(r=gO[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ki.warn(a.join(" "));return}Gi(new oi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO="firebase-heartbeat-database",xO=1,Ba="firebase-heartbeat-store";let Sf=null;function ES(){return Sf||(Sf=F5(wO,xO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ba)}}}).catch(t=>{throw ei.create("idb-open",{originalErrorMessage:t.message})})),Sf}async function EO(t){try{return await(await ES()).transaction(Ba).objectStore(Ba).get(SS(t))}catch(e){if(e instanceof rr)Ki.warn(e.message);else{const n=ei.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ki.warn(n.message)}}}async function p_(t,e){try{const r=(await ES()).transaction(Ba,"readwrite");await r.objectStore(Ba).put(e,SS(t)),await r.done}catch(n){if(n instanceof rr)Ki.warn(n.message);else{const r=ei.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ki.warn(r.message)}}}function SS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=1024,TO=30*24*60*60*1e3;class IO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new AO(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=m_();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=TO}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=m_(),{heartbeatsToSend:n,unsentEntries:r}=RO(this._heartbeatsCache.heartbeats),i=bu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function m_(){return new Date().toISOString().substring(0,10)}function RO(t,e=SO){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),g_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),g_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class AO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return m5()?g5().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await EO(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return p_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return p_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function g_(t){return bu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(t){Gi(new oi("platform-logger",e=>new z5(e),"PRIVATE")),Gi(new oi("heartbeat",e=>new IO(e),"PRIVATE")),Qn(im,f_,t),Qn(im,f_,"esm2017"),Qn("fire-js","")}CO("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="firebasestorage.googleapis.com",IS="storageBucket",bO=2*60*1e3,kO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe extends rr{constructor(e,n,r=0){super(Tf(e),`Firebase Storage: ${n} (${Tf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Tf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var We;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(We||(We={}));function Tf(t){return"storage/"+t}function Yg(){const t="An unknown error occurred, please check the error payload for server response.";return new qe(We.UNKNOWN,t)}function PO(t){return new qe(We.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function NO(t){return new qe(We.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function OO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new qe(We.UNAUTHENTICATED,t)}function jO(){return new qe(We.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function LO(t){return new qe(We.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function DO(){return new qe(We.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function MO(){return new qe(We.CANCELED,"User canceled the upload/download.")}function $O(t){return new qe(We.INVALID_URL,"Invalid URL '"+t+"'.")}function VO(t){return new qe(We.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function FO(){return new qe(We.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+IS+"' property when initializing the app?")}function UO(){return new qe(We.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function BO(){return new qe(We.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function zO(t){return new qe(We.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function am(t){return new qe(We.INVALID_ARGUMENT,t)}function RS(){return new qe(We.APP_DELETED,"The Firebase app was deleted.")}function WO(t){return new qe(We.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ha(t,e){return new qe(We.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Uo(t){throw new qe(We.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Jt.makeFromUrl(e,n)}catch{return new Jt(e,"")}if(r.path==="")return r;throw VO(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(x){x.path_=decodeURIComponent(x.path)}const u="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${u}/b/${i}/o${p}`,"i"),v={bucket:1,path:3},w=n===TS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",y=new RegExp(`^https?://${w}/${i}/${E}`,"i"),_=[{regex:a,indices:l,postModify:s},{regex:m,indices:v,postModify:c},{regex:y,indices:{bucket:1,path:2},postModify:c}];for(let x=0;x<_.length;x++){const S=_[x],T=S.regex.exec(e);if(T){const R=T[S.indices.bucket];let I=T[S.indices.path];I||(I=""),r=new Jt(R,I),S.postModify(r);break}}if(r==null)throw $O(e);return r}}class HO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...E){c||(c=!0,e.apply(null,E))}function f(E){i=setTimeout(()=>{i=null,t(m,l())},E)}function p(){s&&clearTimeout(s)}function m(E,...y){if(c){p();return}if(E){p(),u.call(null,E,...y);return}if(l()||o){p(),u.call(null,E,...y);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,f(_)}let v=!1;function w(E){v||(v=!0,p(),!c&&(i!==null?(E||(a=2),clearTimeout(i),f(0)):E||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,w(!0)},n),w}function KO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(t){return t!==void 0}function QO(t){return typeof t=="object"&&!Array.isArray(t)}function Xg(t){return typeof t=="string"||t instanceof String}function y_(t){return Jg()&&t instanceof Blob}function Jg(){return typeof Blob<"u"&&!d5()}function v_(t,e,n,r){if(r<e)throw am(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw am(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function AS(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Mi||(Mi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,n,r,i,s,o,a,l,c,u,f,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,v)=>{this.resolve_=m,this.reject_=v,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new yc(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Mi.NO_ERROR,l=s.getStatus();if(!a||YO(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Mi.ABORT;r(!1,new yc(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new yc(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());GO(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Yg();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?RS():MO();o(l)}else{const l=DO();o(l)}};this.canceled_?n(!1,new yc(!1,null,!0)):this.backoffId_=qO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&KO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class yc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function JO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function ZO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function ej(t,e){e&&(t["X-Firebase-GMPID"]=e)}function tj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function nj(t,e,n,r,i,s,o=!0){const a=AS(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return ej(c,e),JO(c,n),ZO(c,s),tj(c,r),new XO(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function ij(...t){const e=rj();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Jg())return new Blob(t);throw new qe(We.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function sj(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(t){if(typeof atob>"u")throw zO("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class If{constructor(e,n){this.data=e,this.contentType=n||null}}function aj(t,e){switch(t){case zn.RAW:return new If(CS(e));case zn.BASE64:case zn.BASE64URL:return new If(bS(t,e));case zn.DATA_URL:return new If(cj(e),uj(e))}throw Yg()}function CS(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function lj(t){let e;try{e=decodeURIComponent(t)}catch{throw ha(zn.DATA_URL,"Malformed data URL.")}return CS(e)}function bS(t,e){switch(t){case zn.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw ha(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case zn.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw ha(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=oj(e)}catch(i){throw i.message.includes("polyfill")?i:ha(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class kS{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ha(zn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=dj(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function cj(t){const e=new kS(t);return e.base64?bS(zn.BASE64,e.rest):lj(e.rest)}function uj(t){return new kS(t).contentType}function dj(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n){let r=0,i="";y_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(y_(this.data_)){const r=this.data_,i=sj(r,e,n);return i===null?null:new Or(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Or(r,!0)}}static getBlob(...e){if(Jg()){const n=e.map(r=>r instanceof Or?r.data_:r);return new Or(ij.apply(null,n))}else{const n=e.map(o=>Xg(o)?aj(zn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Or(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(t){let e;try{e=JSON.parse(t)}catch{return null}return QO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function fj(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function NS(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pj(t,e){return e}class Dt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||pj}}let vc=null;function mj(t){return!Xg(t)||t.length<2?t:NS(t)}function OS(){if(vc)return vc;const t=[];t.push(new Dt("bucket")),t.push(new Dt("generation")),t.push(new Dt("metageneration")),t.push(new Dt("name","fullPath",!0));function e(s,o){return mj(o)}const n=new Dt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Dt("size");return i.xform=r,t.push(i),t.push(new Dt("timeCreated")),t.push(new Dt("updated")),t.push(new Dt("md5Hash",null,!0)),t.push(new Dt("cacheControl",null,!0)),t.push(new Dt("contentDisposition",null,!0)),t.push(new Dt("contentEncoding",null,!0)),t.push(new Dt("contentLanguage",null,!0)),t.push(new Dt("contentType",null,!0)),t.push(new Dt("metadata","customMetadata",!0)),vc=t,vc}function gj(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Jt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function yj(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return gj(r,t),r}function jS(t,e,n){const r=PS(e);return r===null?null:yj(t,r,n)}function vj(t,e,n,r){const i=PS(e);if(i===null||!Xg(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const u=t.bucket,f=t.fullPath,p="/b/"+o(u)+"/o/"+o(f),m=Ld(p,n,r),v=AS({alt:"media",token:c});return m+v})[0]}function _j(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class Zg{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t){if(!t)throw Yg()}function wj(t,e){function n(r,i){const s=jS(t,i,e);return LS(s!==null),s}return n}function xj(t,e){function n(r,i){const s=jS(t,i,e);return LS(s!==null),vj(s,i,t.host,t._protocol)}return n}function DS(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=jO():i=OO():n.getStatus()===402?i=NO(t.bucket):n.getStatus()===403?i=LO(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function MS(t){const e=DS(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=PO(t.path)),s.serverResponse=i.serverResponse,s}return n}function Ej(t,e,n){const r=e.fullServerUrl(),i=Ld(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Zg(i,s,xj(t,n),o);return a.errorHandler=MS(e),a}function Sj(t,e){const n=e.fullServerUrl(),r=Ld(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new Zg(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=MS(e),a}function Tj(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Ij(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Tj(null,e)),r}function Rj(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let x=0;x<2;x++)_=_+Math.random().toString().slice(2);return _}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=Ij(e,r,i),u=_j(c,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=Or.getBlob(f,r,p);if(m===null)throw UO();const v={name:c.fullPath},w=Ld(s,t.host,t._protocol),E="POST",y=t.maxUploadRetryTime,g=new Zg(w,E,wj(t,n),y);return g.urlParams=v,g.headers=o,g.body=m.uploadData(),g.errorHandler=DS(e),g}class Aj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Mi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Mi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Mi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Uo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Uo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Uo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Uo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Uo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Cj extends Aj{initXhr(){this.xhr_.responseType="text"}}function ey(){return new Cj}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n){this._service=e,n instanceof Jt?this._location=n:this._location=Jt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Qi(e,n)}get root(){const e=new Jt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return NS(this._location.path)}get storage(){return this._service}get parent(){const e=hj(this._location.path);if(e===null)return null;const n=new Jt(this._location.bucket,e);return new Qi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw WO(e)}}function bj(t,e,n){t._throwIfRoot("uploadBytes");const r=Rj(t.storage,t._location,OS(),new Or(e,!0),n);return t.storage.makeRequestWithTokens(r,ey).then(i=>({metadata:i,ref:t}))}function kj(t){t._throwIfRoot("getDownloadURL");const e=Ej(t.storage,t._location,OS());return t.storage.makeRequestWithTokens(e,ey).then(n=>{if(n===null)throw BO();return n})}function Pj(t){t._throwIfRoot("deleteObject");const e=Sj(t.storage,t._location);return t.storage.makeRequestWithTokens(e,ey)}function Nj(t,e){const n=fj(t._location.path,e),r=new Jt(t._location.bucket,n);return new Qi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oj(t){return/^[A-Za-z]+:\/\//.test(t)}function jj(t,e){return new Qi(t,e)}function $S(t,e){if(t instanceof ty){const n=t;if(n._bucket==null)throw FO();const r=new Qi(n,n._bucket);return e!=null?$S(r,e):r}else return e!==void 0?Nj(t,e):t}function Lj(t,e){if(e&&Oj(e)){if(t instanceof ty)return jj(t,e);throw am("To use ref(service, url), the first argument must be a Storage instance.")}else return $S(t,e)}function __(t,e){const n=e==null?void 0:e[IS];return n==null?null:Jt.makeFromBucketSpec(n,t)}function Dj(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:vS(i,t.app.options.projectId))}class ty{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=TS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=bO,this._maxUploadRetryTime=kO,this._requests=new Set,i!=null?this._bucket=Jt.makeFromBucketSpec(i,this._host):this._bucket=__(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Jt.makeFromBucketSpec(this._url,e):this._bucket=__(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){v_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){v_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qi(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new HO(RS());{const o=nj(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const w_="@firebase/storage",x_="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS="storage";function FS(t,e,n){return t=it(t),bj(t,e,n)}function US(t){return t=it(t),kj(t)}function Mj(t){return t=it(t),Pj(t)}function ny(t,e){return t=it(t),Lj(t,e)}function $j(t=Qg(),e){t=it(t);const r=jd(t,VS).getImmediate({identifier:e}),i=mS("storage");return i&&Vj(r,...i),r}function Vj(t,e,n,r={}){Dj(t,e,n,r)}function Fj(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new ty(n,r,i,e,ls)}function Uj(){Gi(new oi(VS,Fj,"PUBLIC").setMultipleInstances(!0)),Qn(w_,x_,""),Qn(w_,x_,"esm2017")}Uj();var Bj="firebase",zj="10.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qn(Bj,zj,"app");function ry(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function BS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Wj=BS,zS=new wl("auth","Firebase",BS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu=new Kg("@firebase/auth");function Hj(t,...e){Nu.logLevel<=_e.WARN&&Nu.warn(`Auth (${ls}): ${t}`,...e)}function zc(t,...e){Nu.logLevel<=_e.ERROR&&Nu.error(`Auth (${ls}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(t,...e){throw iy(t,...e)}function Yn(t,...e){return iy(t,...e)}function WS(t,e,n){const r=Object.assign(Object.assign({},Wj()),{[e]:n});return new wl("auth","Firebase",r).create(e,{appName:t.name})}function qj(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&tr(t,"argument-error"),WS(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function iy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return zS.create(t,...e)}function de(t,e,...n){if(!t)throw iy(e,...n)}function lr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zc(e),new Error(e)}function vr(t,e){t||lr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Kj(){return E_()==="http:"||E_()==="https:"}function E_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Kj()||h5()||"connection"in navigator)?navigator.onLine:!0}function Qj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n){this.shortDelay=e,this.longDelay=n,vr(n>e,"Short delay should be less than long delay!"),this.isMobile=u5()||f5()}get(){return Gj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t,e){vr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj=new El(3e4,6e4);function qS(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Sl(t,e,n,r,i={}){return KS(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=xl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),HS.fetch()(GS(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function KS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Yj),e);try{const i=new Zj(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw _c(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw _c(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw _c(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw _c(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw WS(t,u,c);tr(t,u)}}catch(i){if(i instanceof rr)throw i;tr(t,"network-request-failed",{message:String(i)})}}async function Jj(t,e,n,r,i={}){const s=await Sl(t,e,n,r,i);return"mfaPendingCredential"in s&&tr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function GS(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?sy(t.config,i):`${t.config.apiScheme}://${i}`}class Zj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Yn(this.auth,"network-request-failed")),Xj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _c(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Yn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eL(t,e){return Sl(t,"POST","/v1/accounts:delete",e)}async function tL(t,e){return Sl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nL(t,e=!1){const n=it(t),r=await n.getIdToken(e),i=oy(r);de(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:fa(Rf(i.auth_time)),issuedAtTime:fa(Rf(i.iat)),expirationTime:fa(Rf(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Rf(t){return Number(t)*1e3}function oy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return zc("JWT malformed, contained fewer than 3 sections"),null;try{const i=fS(n);return i?JSON.parse(i):(zc("Failed to decode base64 JWT payload"),null)}catch(i){return zc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function rL(t){const e=oy(t);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function za(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof rr&&iL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function iL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fa(this.lastLoginAt),this.creationTime=fa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ou(t){var e;const n=t.auth,r=await t.getIdToken(),i=await za(t,tL(n,{idToken:r}));de(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?lL(s.providerUserInfo):[],a=aL(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new QS(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function oL(t){const e=it(t);await Ou(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function lL(t){return t.map(e=>{var{providerId:n}=e,r=ry(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cL(t,e){const n=await KS(t,{},async()=>{const r=xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=GS(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",HS.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return de(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await cL(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Wa;return r&&(de(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(de(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(de(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wa,this.toJSON())}_performRefresh(){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(t,e){de(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class $i{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=ry(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new QS(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await za(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return nL(this,e)}reload(){return oL(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new $i(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ou(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await za(this,eL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:_,emailVerified:x,isAnonymous:S,providerData:T,stsTokenManager:R}=n;de(_&&R,e,"internal-error");const I=Wa.fromJSON(this.name,R);de(typeof _=="string",e,"internal-error"),Cr(f,e.name),Cr(p,e.name),de(typeof x=="boolean",e,"internal-error"),de(typeof S=="boolean",e,"internal-error"),Cr(m,e.name),Cr(v,e.name),Cr(w,e.name),Cr(E,e.name),Cr(y,e.name),Cr(g,e.name);const C=new $i({uid:_,auth:e,email:p,emailVerified:x,displayName:f,isAnonymous:S,photoURL:v,phoneNumber:m,tenantId:w,stsTokenManager:I,createdAt:y,lastLoginAt:g});return T&&Array.isArray(T)&&(C.providerData=T.map(A=>Object.assign({},A))),E&&(C._redirectEventId=E),C}static async _fromIdTokenResponse(e,n,r=!1){const i=new Wa;i.updateFromServerResponse(n);const s=new $i({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ou(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=new Map;function cr(t){vr(t instanceof Function,"Expected a class definition");let e=S_.get(t);return e?(vr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,S_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}YS.type="NONE";const T_=YS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(t,e,n){return`firebase:${t}:${e}:${n}`}class zs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Wc(this.userKey,i.apiKey,s),this.fullPersistenceKey=Wc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$i._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new zs(cr(T_),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||cr(T_);const o=Wc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const f=$i._fromJSON(e,u);c!==s&&(a=f),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new zs(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new zs(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ZS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tT(e))return"Blackberry";if(nT(e))return"Webos";if(ay(e))return"Safari";if((e.includes("chrome/")||JS(e))&&!e.includes("edge/"))return"Chrome";if(eT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function XS(t=Ot()){return/firefox\//i.test(t)}function ay(t=Ot()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function JS(t=Ot()){return/crios\//i.test(t)}function ZS(t=Ot()){return/iemobile/i.test(t)}function eT(t=Ot()){return/android/i.test(t)}function tT(t=Ot()){return/blackberry/i.test(t)}function nT(t=Ot()){return/webos/i.test(t)}function Dd(t=Ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function uL(t=Ot()){var e;return Dd(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function dL(){return p5()&&document.documentMode===10}function rT(t=Ot()){return Dd(t)||eT(t)||nT(t)||tT(t)||/windows phone/i.test(t)||ZS(t)}function hL(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(t,e=[]){let n;switch(t){case"Browser":n=I_(Ot());break;case"Worker":n=`${I_(Ot())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ls}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pL(t,e={}){return Sl(t,"GET","/v2/passwordPolicy",qS(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=6;class gL{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:mL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new R_(this),this.idTokenSubscription=new R_(this),this.beforeStateQueue=new fL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=cr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await zs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ou(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Qj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?it(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pL(this),n=new gL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new wl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&cr(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await zs.create(this,[cr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Hj(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Md(t){return it(t)}class R_{constructor(e){this.auth=e,this.observer=null,this.addObserver=x5(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function _L(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Yn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",vL().appendChild(r)})}function wL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(t,e){const n=jd(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ku(s,e??{}))return i;tr(i,"already-initialized")}return n.initialize({options:e})}function EL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(cr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function SL(t,e,n){const r=Md(t);de(r._canInitEmulator,r,"emulator-config-failed"),de(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=sT(e),{host:o,port:a}=TL(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||IL()}function sT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function TL(t){const e=sT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:A_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:A_(o)}}}function A_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function IL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return lr("not implemented")}_getIdTokenResponse(e){return lr("not implemented")}_linkToIdToken(e,n){return lr("not implemented")}_getReauthenticationResolver(e){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ws(t,e){return Jj(t,"POST","/v1/accounts:signInWithIdp",qS(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL="http://localhost";class Yi extends oT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):tr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=ry(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Yi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ws(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ws(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ws(e,n)}buildRequest(){const e={requestUri:RL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl extends ly{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends Tl{constructor(){super("facebook.com")}static credential(e){return Yi._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jr.credential(e.oauthAccessToken)}catch{return null}}}jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";jr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn extends Tl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yi._fromParams({providerId:Fn.PROVIDER_ID,signInMethod:Fn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Fn.credentialFromTaggedObject(e)}static credentialFromError(e){return Fn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Fn.credential(n,r)}catch{return null}}}Fn.GOOGLE_SIGN_IN_METHOD="google.com";Fn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends Tl{constructor(){super("github.com")}static credential(e){return Yi._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lr.credential(e.oauthAccessToken)}catch{return null}}}Lr.GITHUB_SIGN_IN_METHOD="github.com";Lr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends Tl{constructor(){super("twitter.com")}static credential(e,n){return Yi._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Dr.credential(n,r)}catch{return null}}}Dr.TWITTER_SIGN_IN_METHOD="twitter.com";Dr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await $i._fromIdTokenResponse(e,r,i),o=C_(r);return new io({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=C_(r);return new io({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function C_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju extends rr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ju.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ju(e,n,r,i)}}function aT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ju._fromErrorAndOperation(t,s,e,r):s})}async function AL(t,e,n=!1){const r=await za(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return io._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CL(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await za(t,aT(r,i,e,t),n);de(s.idToken,r,"internal-error");const o=oy(s.idToken);de(o,r,"internal-error");const{sub:a}=o;return de(t.uid===a,r,"user-mismatch"),io._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&tr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bL(t,e,n=!1){const r="signIn",i=await aT(t,r,e),s=await io._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function kL(t,e,n,r){return it(t).onIdTokenChanged(e,n,r)}function PL(t,e,n){return it(t).beforeAuthStateChanged(e,n)}function NL(t,e,n,r){return it(t).onAuthStateChanged(e,n,r)}function OL(t){return it(t).signOut()}const Lu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Lu,"1"),this.storage.removeItem(Lu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(){const t=Ot();return ay(t)||Dd(t)}const LL=1e3,DL=10;class cT extends lT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=jL()&&hL(),this.fallbackToPolling=rT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);dL()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,DL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},LL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}cT.type="LOCAL";const ML=cT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT extends lT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}uT.type="SESSION";const dT=uT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new $d(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await $L(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$d.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=cy("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(){return window}function FL(t){Xn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(){return typeof Xn().WorkerGlobalScope<"u"&&typeof Xn().importScripts=="function"}async function UL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function BL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function zL(){return hT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="firebaseLocalStorageDb",WL=1,Du="firebaseLocalStorage",pT="fbase_key";class Il{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Vd(t,e){return t.transaction([Du],e?"readwrite":"readonly").objectStore(Du)}function HL(){const t=indexedDB.deleteDatabase(fT);return new Il(t).toPromise()}function cm(){const t=indexedDB.open(fT,WL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Du,{keyPath:pT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Du)?e(r):(r.close(),await HL(),e(await cm()))})})}async function b_(t,e,n){const r=Vd(t,!0).put({[pT]:e,value:n});return new Il(r).toPromise()}async function qL(t,e){const n=Vd(t,!1).get(e),r=await new Il(n).toPromise();return r===void 0?null:r.value}function k_(t,e){const n=Vd(t,!0).delete(e);return new Il(n).toPromise()}const KL=800,GL=3;class mT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>GL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$d._getInstance(zL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await UL(),!this.activeServiceWorker)return;this.sender=new VL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||BL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cm();return await b_(e,Lu,"1"),await k_(e,Lu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>b_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>qL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>k_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Vd(i,!1).getAll();return new Il(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mT.type="LOCAL";const QL=mT;new El(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(t,e){return e?cr(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy extends oT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ws(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ws(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ws(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function YL(t){return bL(t.auth,new uy(t),t.bypassAuthState)}function XL(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),CL(n,new uy(t),t.bypassAuthState)}async function JL(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),AL(n,new uy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YL;case"linkViaPopup":case"linkViaRedirect":return JL;case"reauthViaPopup":case"reauthViaRedirect":return XL;default:tr(this.auth,"internal-error")}}resolve(e){vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL=new El(2e3,1e4);async function e4(t,e,n){const r=Md(t);qj(t,e,ly);const i=gT(r,n);return new Pi(r,"signInViaPopup",e,i).executeNotNull()}class Pi extends yT{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Pi.currentPopupAction&&Pi.currentPopupAction.cancel(),Pi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){vr(this.filter.length===1,"Popup operations only handle one event");const e=cy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ZL.get())};e()}}Pi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4="pendingRedirect",Hc=new Map;class n4 extends yT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Hc.get(this.auth._key());if(!e){try{const r=await r4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Hc.set(this.auth._key(),e)}return this.bypassAuthState||Hc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function r4(t,e){const n=o4(e),r=s4(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function i4(t,e){Hc.set(t._key(),e)}function s4(t){return cr(t._redirectPersistence)}function o4(t){return Wc(t4,t.config.apiKey,t.name)}async function a4(t,e,n=!1){const r=Md(t),i=gT(r,e),o=await new n4(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4=10*60*1e3;class c4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!u4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!vT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Yn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=l4&&this.cachedEventUids.clear(),this.cachedEventUids.has(P_(e))}saveEventToCache(e){this.cachedEventUids.add(P_(e)),this.lastProcessedEventTime=Date.now()}}function P_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function vT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function u4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d4(t,e={}){return Sl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,f4=/^https?/;async function p4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await d4(t);for(const n of e)try{if(m4(n))return}catch{}tr(t,"unauthorized-domain")}function m4(t){const e=lm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!f4.test(n))return!1;if(h4.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=new El(3e4,6e4);function N_(){const t=Xn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function y4(t){return new Promise((e,n)=>{var r,i,s;function o(){N_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{N_(),n(Yn(t,"network-request-failed"))},timeout:g4.get()})}if(!((i=(r=Xn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Xn().gapi)===null||s===void 0)&&s.load)o();else{const a=wL("iframefcb");return Xn()[a]=()=>{gapi.load?o():n(Yn(t,"network-request-failed"))},_L(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw qc=null,e})}let qc=null;function v4(t){return qc=qc||y4(t),qc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=new El(5e3,15e3),w4="__/auth/iframe",x4="emulator/auth/iframe",E4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},S4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function T4(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?sy(e,x4):`https://${t.config.authDomain}/${w4}`,r={apiKey:e.apiKey,appName:t.name,v:ls},i=S4.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${xl(r).slice(1)}`}async function I4(t){const e=await v4(t),n=Xn().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:T4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:E4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Yn(t,"network-request-failed"),a=Xn().setTimeout(()=>{s(o)},_4.get());function l(){Xn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},A4=500,C4=600,b4="_blank",k4="http://localhost";class O_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function P4(t,e,n,r=A4,i=C4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},R4),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Ot().toLowerCase();n&&(a=JS(c)?b4:n),XS(c)&&(e=e||k4,l.scrollbars="yes");const u=Object.entries(l).reduce((p,[m,v])=>`${p}${m}=${v},`,"");if(uL(c)&&a!=="_self")return N4(e||"",a),new O_(null);const f=window.open(e||"",a,u);de(f,t,"popup-blocked");try{f.focus()}catch{}return new O_(f)}function N4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4="__/auth/handler",j4="emulator/auth/handler",L4=encodeURIComponent("fac");async function j_(t,e,n,r,i,s){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ls,eventId:i};if(e instanceof ly){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",w5(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,f]of Object.entries(s||{}))o[u]=f}if(e instanceof Tl){const u=e.getScopes().filter(f=>f!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${L4}=${encodeURIComponent(l)}`:"";return`${D4(t)}?${xl(a).slice(1)}${c}`}function D4({config:t}){return t.emulator?sy(t,j4):`https://${t.authDomain}/${O4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af="webStorageSupport";class M4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dT,this._completeRedirectFn=a4,this._overrideRedirectResult=i4}async _openPopup(e,n,r,i){var s;vr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await j_(e,n,r,lm(),i);return P4(e,o,cy())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await j_(e,n,r,lm(),i);return FL(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(vr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await I4(e),r=new c4(e);return n.register("authEvent",i=>(de(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Af,{type:Af},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Af];o!==void 0&&n(!!o),tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=p4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return rT()||ay()||Dd()}}const $4=M4;var L_="@firebase/auth",D_="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function U4(t){Gi(new oi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;de(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iT(t)},c=new yL(r,i,s,l);return EL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Gi(new oi("auth-internal",e=>{const n=Md(e.getProvider("auth").getImmediate());return(r=>new V4(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qn(L_,D_,F4(t)),Qn(L_,D_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=5*60,z4=yS("authIdTokenMaxAge")||B4;let M_=null;const W4=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>z4)return;const i=n==null?void 0:n.token;M_!==i&&(M_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function H4(t=Qg()){const e=jd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=xL(t,{popupRedirectResolver:$4,persistence:[QL,ML,dT]}),r=yS("authTokenSyncURL");if(r){const s=W4(r);PL(n,s,()=>s(n.currentUser)),kL(n,o=>s(o))}const i=pS("auth");return i&&SL(n,`http://${i}`),n}U4("Browser");var q4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},B,dy=dy||{},ae=q4||self;function Fd(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Rl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function K4(t){return Object.prototype.hasOwnProperty.call(t,Cf)&&t[Cf]||(t[Cf]=++G4)}var Cf="closure_uid_"+(1e9*Math.random()>>>0),G4=0;function Q4(t,e,n){return t.call.apply(t.bind,arguments)}function Y4(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function bt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?bt=Q4:bt=Y4,bt.apply(null,arguments)}function wc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function ut(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function wi(){this.s=this.s,this.o=this.o}var X4=0;wi.prototype.s=!1;wi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),X4!=0)&&K4(this)};wi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const _T=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function hy(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function $_(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Fd(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function kt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}kt.prototype.h=function(){this.defaultPrevented=!0};var J4=function(){if(!ae.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ae.addEventListener("test",()=>{},e),ae.removeEventListener("test",()=>{},e)}catch{}return t}();function Ha(t){return/^[\s\xa0]*$/.test(t)}function Ud(){var t=ae.navigator;return t&&(t=t.userAgent)?t:""}function Un(t){return Ud().indexOf(t)!=-1}function fy(t){return fy[" "](t),t}fy[" "]=function(){};function Z4(t,e){var n=HD;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var eD=Un("Opera"),so=Un("Trident")||Un("MSIE"),wT=Un("Edge"),um=wT||so,xT=Un("Gecko")&&!(Ud().toLowerCase().indexOf("webkit")!=-1&&!Un("Edge"))&&!(Un("Trident")||Un("MSIE"))&&!Un("Edge"),tD=Ud().toLowerCase().indexOf("webkit")!=-1&&!Un("Edge");function ET(){var t=ae.document;return t?t.documentMode:void 0}var dm;e:{var bf="",kf=function(){var t=Ud();if(xT)return/rv:([^\);]+)(\)|;)/.exec(t);if(wT)return/Edge\/([\d\.]+)/.exec(t);if(so)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(tD)return/WebKit\/(\S+)/.exec(t);if(eD)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(kf&&(bf=kf?kf[1]:""),so){var Pf=ET();if(Pf!=null&&Pf>parseFloat(bf)){dm=String(Pf);break e}}dm=bf}var hm;if(ae.document&&so){var V_=ET();hm=V_||parseInt(dm,10)||void 0}else hm=void 0;var nD=hm;function qa(t,e){if(kt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(xT){e:{try{fy(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:rD[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&qa.$.h.call(this)}}ut(qa,kt);var rD={2:"touch",3:"pen",4:"mouse"};qa.prototype.h=function(){qa.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Al="closure_listenable_"+(1e6*Math.random()|0),iD=0;function sD(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++iD,this.fa=this.ia=!1}function Bd(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function py(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function oD(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function ST(t){const e={};for(const n in t)e[n]=t[n];return e}const F_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function TT(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<F_.length;s++)n=F_[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function zd(t){this.src=t,this.g={},this.h=0}zd.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=pm(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new sD(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function fm(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=_T(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Bd(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function pm(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var my="closure_lm_"+(1e6*Math.random()|0),Nf={};function IT(t,e,n,r,i){if(r&&r.once)return AT(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)IT(t,e[s],n,r,i);return null}return n=vy(n),t&&t[Al]?t.O(e,n,Rl(r)?!!r.capture:!!r,i):RT(t,e,n,!1,r,i)}function RT(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Rl(i)?!!i.capture:!!i,a=yy(t);if(a||(t[my]=a=new zd(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=aD(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)J4||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(bT(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function aD(){function t(n){return e.call(t.src,t.listener,n)}const e=lD;return t}function AT(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)AT(t,e[s],n,r,i);return null}return n=vy(n),t&&t[Al]?t.P(e,n,Rl(r)?!!r.capture:!!r,i):RT(t,e,n,!0,r,i)}function CT(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)CT(t,e[s],n,r,i);else r=Rl(r)?!!r.capture:!!r,n=vy(n),t&&t[Al]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=pm(s,n,r,i),-1<n&&(Bd(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=yy(t))&&(e=t.g[e.toString()],t=-1,e&&(t=pm(e,n,r,i)),(n=-1<t?e[t]:null)&&gy(n))}function gy(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Al])fm(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(bT(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=yy(e))?(fm(n,t),n.h==0&&(n.src=null,e[my]=null)):Bd(t)}}}function bT(t){return t in Nf?Nf[t]:Nf[t]="on"+t}function lD(t,e){if(t.fa)t=!0;else{e=new qa(e,this);var n=t.listener,r=t.la||t.src;t.ia&&gy(t),t=n.call(r,e)}return t}function yy(t){return t=t[my],t instanceof zd?t:null}var Of="__closure_events_fn_"+(1e9*Math.random()>>>0);function vy(t){return typeof t=="function"?t:(t[Of]||(t[Of]=function(e){return t.handleEvent(e)}),t[Of])}function lt(){wi.call(this),this.i=new zd(this),this.S=this,this.J=null}ut(lt,wi);lt.prototype[Al]=!0;lt.prototype.removeEventListener=function(t,e,n,r){CT(this,t,e,n,r)};function gt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new kt(e,t);else if(e instanceof kt)e.target=e.target||t;else{var i=e;e=new kt(r,t),TT(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=xc(o,r,!0,e)&&i}if(o=e.g=t,i=xc(o,r,!0,e)&&i,i=xc(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=xc(o,r,!1,e)&&i}lt.prototype.N=function(){if(lt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Bd(n[r]);delete t.g[e],t.h--}}this.J=null};lt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};lt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function xc(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&fm(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var _y=ae.JSON.stringify;class cD{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function uD(){var t=wy;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class dD{constructor(){this.h=this.g=null}add(e,n){const r=kT.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var kT=new cD(()=>new hD,t=>t.reset());class hD{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function fD(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function pD(t){ae.setTimeout(()=>{throw t},0)}let Ka,Ga=!1,wy=new dD,PT=()=>{const t=ae.Promise.resolve(void 0);Ka=()=>{t.then(mD)}};var mD=()=>{for(var t;t=uD();){try{t.h.call(t.g)}catch(n){pD(n)}var e=kT;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ga=!1};function Wd(t,e){lt.call(this),this.h=t||1,this.g=e||ae,this.j=bt(this.qb,this),this.l=Date.now()}ut(Wd,lt);B=Wd.prototype;B.ga=!1;B.T=null;B.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),gt(this,"tick"),this.ga&&(xy(this),this.start()))}};B.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function xy(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}B.N=function(){Wd.$.N.call(this),xy(this),delete this.g};function Ey(t,e,n){if(typeof t=="function")n&&(t=bt(t,n));else if(t&&typeof t.handleEvent=="function")t=bt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ae.setTimeout(t,e||0)}function NT(t){t.g=Ey(()=>{t.g=null,t.i&&(t.i=!1,NT(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class gD extends wi{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:NT(this)}N(){super.N(),this.g&&(ae.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qa(t){wi.call(this),this.h=t,this.g={}}ut(Qa,wi);var U_=[];function OT(t,e,n,r){Array.isArray(n)||(n&&(U_[0]=n.toString()),n=U_);for(var i=0;i<n.length;i++){var s=IT(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function jT(t){py(t.g,function(e,n){this.g.hasOwnProperty(n)&&gy(e)},t),t.g={}}Qa.prototype.N=function(){Qa.$.N.call(this),jT(this)};Qa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Hd(){this.g=!0}Hd.prototype.Ea=function(){this.g=!1};function yD(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var f=u.split("_");o=2<=f.length&&f[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function vD(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Ns(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+wD(t,n)+(r?" "+r:"")})}function _D(t,e){t.info(function(){return"TIMEOUT: "+e})}Hd.prototype.info=function(){};function wD(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return _y(n)}catch{return e}}var cs={},B_=null;function qd(){return B_=B_||new lt}cs.Ta="serverreachability";function LT(t){kt.call(this,cs.Ta,t)}ut(LT,kt);function Ya(t){const e=qd();gt(e,new LT(e))}cs.STAT_EVENT="statevent";function DT(t,e){kt.call(this,cs.STAT_EVENT,t),this.stat=e}ut(DT,kt);function $t(t){const e=qd();gt(e,new DT(e,t))}cs.Ua="timingevent";function MT(t,e){kt.call(this,cs.Ua,t),this.size=e}ut(MT,kt);function Cl(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ae.setTimeout(function(){t()},e)}var Kd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},$T={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Sy(){}Sy.prototype.h=null;function z_(t){return t.h||(t.h=t.i())}function VT(){}var bl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ty(){kt.call(this,"d")}ut(Ty,kt);function Iy(){kt.call(this,"c")}ut(Iy,kt);var mm;function Gd(){}ut(Gd,Sy);Gd.prototype.g=function(){return new XMLHttpRequest};Gd.prototype.i=function(){return{}};mm=new Gd;function kl(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Qa(this),this.P=xD,t=um?125:void 0,this.V=new Wd(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new FT}function FT(){this.i=null,this.g="",this.h=!1}var xD=45e3,gm={},Mu={};B=kl.prototype;B.setTimeout=function(t){this.P=t};function ym(t,e,n){t.L=1,t.v=Yd(_r(e)),t.s=n,t.S=!0,UT(t,null)}function UT(t,e){t.G=Date.now(),Pl(t),t.A=_r(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),QT(n.i,"t",r),t.C=0,n=t.l.J,t.h=new FT,t.g=gI(t.l,n?e:null,!t.s),0<t.O&&(t.M=new gD(bt(t.Pa,t,t.g),t.O)),OT(t.U,t.g,"readystatechange",t.nb),e=t.I?ST(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Ya(),yD(t.j,t.u,t.A,t.m,t.W,t.s)}B.nb=function(t){t=t.target;const e=this.M;e&&Wn(t)==3?e.l():this.Pa(t)};B.Pa=function(t){try{if(t==this.g)e:{const u=Wn(this.g);var e=this.g.Ia();const f=this.g.da();if(!(3>u)&&(u!=3||um||this.g&&(this.h.h||this.g.ja()||K_(this.g)))){this.J||u!=4||e==7||(e==8||0>=f?Ya(3):Ya(2)),Qd(this);var n=this.g.da();this.ca=n;t:if(BT(this)){var r=K_(this.g);t="";var i=r.length,s=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ni(this),pa(this);var o="";break t}this.h.i=new ae.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,vD(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ha(a)){var c=a;break t}}c=null}if(n=c)Ns(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vm(this,n);else{this.i=!1,this.o=3,$t(12),Ni(this),pa(this);break e}}this.S?(zT(this,u,o),um&&this.i&&u==3&&(OT(this.U,this.V,"tick",this.mb),this.V.start())):(Ns(this.j,this.m,o,null),vm(this,o)),u==4&&Ni(this),this.i&&!this.J&&(u==4?hI(this.l,this):(this.i=!1,Pl(this)))}else BD(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,$t(12)):(this.o=0,$t(13)),Ni(this),pa(this)}}}catch{}finally{}};function BT(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function zT(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=ED(t,n),i==Mu){e==4&&(t.o=4,$t(14),r=!1),Ns(t.j,t.m,null,"[Incomplete Response]");break}else if(i==gm){t.o=4,$t(15),Ns(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ns(t.j,t.m,i,null),vm(t,i);BT(t)&&i!=Mu&&i!=gm&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,$t(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Py(e),e.M=!0,$t(11))):(Ns(t.j,t.m,n,"[Invalid Chunked Response]"),Ni(t),pa(t))}B.mb=function(){if(this.g){var t=Wn(this.g),e=this.g.ja();this.C<e.length&&(Qd(this),zT(this,t,e),this.i&&t!=4&&Pl(this))}};function ED(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Mu:(n=Number(e.substring(n,r)),isNaN(n)?gm:(r+=1,r+n>e.length?Mu:(e=e.slice(r,r+n),t.C=r+n,e)))}B.cancel=function(){this.J=!0,Ni(this)};function Pl(t){t.Y=Date.now()+t.P,WT(t,t.P)}function WT(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Cl(bt(t.lb,t),e)}function Qd(t){t.B&&(ae.clearTimeout(t.B),t.B=null)}B.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(_D(this.j,this.A),this.L!=2&&(Ya(),$t(17)),Ni(this),this.o=2,pa(this)):WT(this,this.Y-t)};function pa(t){t.l.H==0||t.J||hI(t.l,t)}function Ni(t){Qd(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,xy(t.V),jT(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function vm(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||_m(n.i,t))){if(!t.K&&_m(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Fu(n),eh(n);else break e;ky(n),$t(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Cl(bt(n.ib,n),6e3));if(1>=JT(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Oi(n,11)}else if((t.K||n.g==t)&&Fu(n),!Ha(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const f=c[4];f!=null&&(n.Ga=f,n.l.info("SVER="+n.Ga));const p=c[5];p!=null&&typeof p=="number"&&0<p&&(r=1.5*p,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const v=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var s=r.i;s.g||v.indexOf("spdy")==-1&&v.indexOf("quic")==-1&&v.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Ry(s,s.h),s.h=null))}if(r.F){const w=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(r.Da=w,be(r.I,r.F,w))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=mI(r,r.J?r.pa:null,r.Y),o.K){ZT(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Qd(a),Pl(a)),r.g=o}else uI(r);0<n.j.length&&th(n)}else c[0]!="stop"&&c[0]!="close"||Oi(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Oi(n,7):by(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Ya(4)}catch{}}function SD(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Fd(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function TD(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Fd(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function HT(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Fd(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=TD(t),r=SD(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var qT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ID(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Vi(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Vi){this.h=t.h,$u(this,t.j),this.s=t.s,this.g=t.g,Vu(this,t.m),this.l=t.l;var e=t.i,n=new Xa;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),W_(this,n),this.o=t.o}else t&&(e=String(t).match(qT))?(this.h=!1,$u(this,e[1]||"",!0),this.s=Qo(e[2]||""),this.g=Qo(e[3]||"",!0),Vu(this,e[4]),this.l=Qo(e[5]||"",!0),W_(this,e[6]||"",!0),this.o=Qo(e[7]||"")):(this.h=!1,this.i=new Xa(null,this.h))}Vi.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Yo(e,H_,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Yo(e,H_,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Yo(n,n.charAt(0)=="/"?CD:AD,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Yo(n,kD)),t.join("")};function _r(t){return new Vi(t)}function $u(t,e,n){t.j=n?Qo(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Vu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function W_(t,e,n){e instanceof Xa?(t.i=e,PD(t.i,t.h)):(n||(e=Yo(e,bD)),t.i=new Xa(e,t.h))}function be(t,e,n){t.i.set(e,n)}function Yd(t){return be(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Qo(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Yo(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,RD),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function RD(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var H_=/[#\/\?@]/g,AD=/[#\?:]/g,CD=/[#\?]/g,bD=/[#\?@]/g,kD=/#/g;function Xa(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function xi(t){t.g||(t.g=new Map,t.h=0,t.i&&ID(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}B=Xa.prototype;B.add=function(t,e){xi(this),this.i=null,t=To(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function KT(t,e){xi(t),e=To(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function GT(t,e){return xi(t),e=To(t,e),t.g.has(e)}B.forEach=function(t,e){xi(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};B.ta=function(){xi(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};B.Z=function(t){xi(this);let e=[];if(typeof t=="string")GT(this,t)&&(e=e.concat(this.g.get(To(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};B.set=function(t,e){return xi(this),this.i=null,t=To(this,t),GT(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};B.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function QT(t,e,n){KT(t,e),0<n.length&&(t.i=null,t.g.set(To(t,e),hy(n)),t.h+=n.length)}B.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function To(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function PD(t,e){e&&!t.j&&(xi(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(KT(this,r),QT(this,i,n))},t)),t.j=e}var ND=class{constructor(t,e){this.g=t,this.map=e}};function YT(t){this.l=t||OD,ae.PerformanceNavigationTiming?(t=ae.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ae.g&&ae.g.Ka&&ae.g.Ka()&&ae.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var OD=10;function XT(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function JT(t){return t.h?1:t.g?t.g.size:0}function _m(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Ry(t,e){t.g?t.g.add(e):t.h=e}function ZT(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}YT.prototype.cancel=function(){if(this.i=eI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function eI(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return hy(t.i)}var jD=class{stringify(t){return ae.JSON.stringify(t,void 0)}parse(t){return ae.JSON.parse(t,void 0)}};function LD(){this.g=new jD}function DD(t,e,n){const r=n||"";try{HT(t,function(i,s){let o=i;Rl(i)&&(o=_y(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function MD(t,e){const n=new Hd;if(ae.Image){const r=new Image;r.onload=wc(Ec,n,r,"TestLoadImage: loaded",!0,e),r.onerror=wc(Ec,n,r,"TestLoadImage: error",!1,e),r.onabort=wc(Ec,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=wc(Ec,n,r,"TestLoadImage: timeout",!1,e),ae.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Ec(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Xd(t){this.l=t.fc||null,this.j=t.ob||!1}ut(Xd,Sy);Xd.prototype.g=function(){return new Jd(this.l,this.j)};Xd.prototype.i=function(t){return function(){return t}}({});function Jd(t,e){lt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Ay,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ut(Jd,lt);var Ay=0;B=Jd.prototype;B.open=function(t,e){if(this.readyState!=Ay)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ja(this)};B.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ae).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};B.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nl(this)),this.readyState=Ay};B.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ja(this)),this.g&&(this.readyState=3,Ja(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ae.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tI(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function tI(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}B.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Nl(this):Ja(this),this.readyState==3&&tI(this)}};B.Za=function(t){this.g&&(this.response=this.responseText=t,Nl(this))};B.Ya=function(t){this.g&&(this.response=t,Nl(this))};B.ka=function(){this.g&&Nl(this)};function Nl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ja(t)}B.setRequestHeader=function(t,e){this.v.append(t,e)};B.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};B.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ja(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Jd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var $D=ae.JSON.parse;function He(t){lt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=nI,this.L=this.M=!1}ut(He,lt);var nI="",VD=/^https?$/i,FD=["POST","PUT"];B=He.prototype;B.Oa=function(t){this.M=t};B.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():mm.g(),this.C=this.u?z_(this.u):z_(mm),this.g.onreadystatechange=bt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){q_(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=ae.FormData&&t instanceof ae.FormData,!(0<=_T(FD,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{sI(this),0<this.B&&((this.L=UD(this.g))?(this.g.timeout=this.B,this.g.ontimeout=bt(this.ua,this)):this.A=Ey(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){q_(this,s)}};function UD(t){return so&&typeof t.timeout=="number"&&t.ontimeout!==void 0}B.ua=function(){typeof dy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,gt(this,"timeout"),this.abort(8))};function q_(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,rI(t),Zd(t)}function rI(t){t.F||(t.F=!0,gt(t,"complete"),gt(t,"error"))}B.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,gt(this,"complete"),gt(this,"abort"),Zd(this))};B.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zd(this,!0)),He.$.N.call(this)};B.La=function(){this.s||(this.G||this.v||this.l?iI(this):this.kb())};B.kb=function(){iI(this)};function iI(t){if(t.h&&typeof dy<"u"&&(!t.C[1]||Wn(t)!=4||t.da()!=2)){if(t.v&&Wn(t)==4)Ey(t.La,0,t);else if(gt(t,"readystatechange"),Wn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(qT)[1]||null;!i&&ae.self&&ae.self.location&&(i=ae.self.location.protocol.slice(0,-1)),r=!VD.test(i?i.toLowerCase():"")}n=r}if(n)gt(t,"complete"),gt(t,"success");else{t.m=6;try{var s=2<Wn(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",rI(t)}}finally{Zd(t)}}}}function Zd(t,e){if(t.g){sI(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||gt(t,"ready");try{n.onreadystatechange=r}catch{}}}function sI(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ae.clearTimeout(t.A),t.A=null)}B.isActive=function(){return!!this.g};function Wn(t){return t.g?t.g.readyState:0}B.da=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}};B.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};B.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),$D(e)}};function K_(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case nI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function BD(t){const e={};t=(t.g&&2<=Wn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Ha(t[r]))continue;var n=fD(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}oD(e,function(r){return r.join(", ")})}B.Ia=function(){return this.m};B.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function oI(t){let e="";return py(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Cy(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=oI(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):be(t,e,n))}function Bo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function aI(t){this.Ga=0,this.j=[],this.l=new Hd,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Bo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Bo("baseRetryDelayMs",5e3,t),this.hb=Bo("retryDelaySeedMs",1e4,t),this.eb=Bo("forwardChannelMaxRetries",2,t),this.xa=Bo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new YT(t&&t.concurrentRequestLimit),this.Ja=new LD,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}B=aI.prototype;B.ra=8;B.H=1;function by(t){if(lI(t),t.H==3){var e=t.W++,n=_r(t.I);if(be(n,"SID",t.K),be(n,"RID",e),be(n,"TYPE","terminate"),Ol(t,n),e=new kl(t,t.l,e),e.L=2,e.v=Yd(_r(n)),n=!1,ae.navigator&&ae.navigator.sendBeacon)try{n=ae.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&ae.Image&&(new Image().src=e.v,n=!0),n||(e.g=gI(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Pl(e)}pI(t)}function eh(t){t.g&&(Py(t),t.g.cancel(),t.g=null)}function lI(t){eh(t),t.u&&(ae.clearTimeout(t.u),t.u=null),Fu(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ae.clearTimeout(t.m),t.m=null)}function th(t){if(!XT(t.i)&&!t.m){t.m=!0;var e=t.Na;Ka||PT(),Ga||(Ka(),Ga=!0),wy.add(e,t),t.C=0}}function zD(t,e){return JT(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Cl(bt(t.Na,t,e),fI(t,t.C)),t.C++,!0)}B.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new kl(this,this.l,t);let s=this.s;if(this.U&&(s?(s=ST(s),TT(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=cI(this,i,e),n=_r(this.I),be(n,"RID",t),be(n,"CVER",22),this.F&&be(n,"X-HTTP-Session-Id",this.F),Ol(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(oI(s)))+"&"+e:this.o&&Cy(n,this.o,s)),Ry(this.i,i),this.bb&&be(n,"TYPE","init"),this.P?(be(n,"$req",e),be(n,"SID","null"),i.aa=!0,ym(i,n,null)):ym(i,n,e),this.H=2}}else this.H==3&&(t?G_(this,t):this.j.length==0||XT(this.i)||G_(this))};function G_(t,e){var n;e?n=e.m:n=t.W++;const r=_r(t.I);be(r,"SID",t.K),be(r,"RID",n),be(r,"AID",t.V),Ol(t,r),t.o&&t.s&&Cy(r,t.o,t.s),n=new kl(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=cI(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Ry(t.i,n),ym(n,r,e)}function Ol(t,e){t.na&&py(t.na,function(n,r){be(e,r,n)}),t.h&&HT({},function(n,r){be(e,r,n)})}function cI(t,e,n){n=Math.min(t.j.length,n);var r=t.h?bt(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=i[l].g;const u=i[l].map;if(c-=s,0>c)s=Math.max(0,i[l].g-100),a=!1;else try{DD(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function uI(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ka||PT(),Ga||(Ka(),Ga=!0),wy.add(e,t),t.A=0}}function ky(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Cl(bt(t.Ma,t),fI(t,t.A)),t.A++,!0)}B.Ma=function(){if(this.u=null,dI(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Cl(bt(this.jb,this),t)}};B.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,$t(10),eh(this),dI(this))};function Py(t){t.B!=null&&(ae.clearTimeout(t.B),t.B=null)}function dI(t){t.g=new kl(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=_r(t.wa);be(e,"RID","rpc"),be(e,"SID",t.K),be(e,"AID",t.V),be(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&be(e,"TO",t.qa),be(e,"TYPE","xmlhttp"),Ol(t,e),t.o&&t.s&&Cy(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Yd(_r(e)),n.s=null,n.S=!0,UT(n,t)}B.ib=function(){this.v!=null&&(this.v=null,eh(this),ky(this),$t(19))};function Fu(t){t.v!=null&&(ae.clearTimeout(t.v),t.v=null)}function hI(t,e){var n=null;if(t.g==e){Fu(t),Py(t),t.g=null;var r=2}else if(_m(t.i,e))n=e.F,ZT(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=qd(),gt(r,new MT(r,n)),th(t)}else uI(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&zD(t,e)||r==2&&ky(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Oi(t,5);break;case 4:Oi(t,10);break;case 3:Oi(t,6);break;default:Oi(t,2)}}}function fI(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Oi(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=bt(t.pb,t);n||(n=new Vi("//www.google.com/images/cleardot.gif"),ae.location&&ae.location.protocol=="http"||$u(n,"https"),Yd(n)),MD(n.toString(),r)}else $t(2);t.H=0,t.h&&t.h.za(e),pI(t),lI(t)}B.pb=function(t){t?(this.l.info("Successfully pinged google.com"),$t(2)):(this.l.info("Failed to ping google.com"),$t(1))};function pI(t){if(t.H=0,t.ma=[],t.h){const e=eI(t.i);(e.length!=0||t.j.length!=0)&&($_(t.ma,e),$_(t.ma,t.j),t.i.i.length=0,hy(t.j),t.j.length=0),t.h.ya()}}function mI(t,e,n){var r=n instanceof Vi?_r(n):new Vi(n);if(r.g!="")e&&(r.g=e+"."+r.g),Vu(r,r.m);else{var i=ae.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Vi(null);r&&$u(s,r),e&&(s.g=e),i&&Vu(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&be(r,n,e),be(r,"VER",t.ra),Ol(t,r),r}function gI(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new He(new Xd({ob:!0})):new He(t.va),e.Oa(t.J),e}B.isActive=function(){return!!this.h&&this.h.isActive(this)};function yI(){}B=yI.prototype;B.Ba=function(){};B.Aa=function(){};B.za=function(){};B.ya=function(){};B.isActive=function(){return!0};B.Va=function(){};function Uu(){if(so&&!(10<=Number(nD)))throw Error("Environmental error: no available transport.")}Uu.prototype.g=function(t,e){return new nn(t,e)};function nn(t,e){lt.call(this),this.g=new aI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ha(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ha(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Io(this)}ut(nn,lt);nn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;$t(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=mI(t,null,t.Y),th(t)};nn.prototype.close=function(){by(this.g)};nn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=_y(t),t=n);e.j.push(new ND(e.fb++,t)),e.H==3&&th(e)};nn.prototype.N=function(){this.g.h=null,delete this.j,by(this.g),delete this.g,nn.$.N.call(this)};function vI(t){Ty.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ut(vI,Ty);function _I(){Iy.call(this),this.status=1}ut(_I,Iy);function Io(t){this.g=t}ut(Io,yI);Io.prototype.Ba=function(){gt(this.g,"a")};Io.prototype.Aa=function(t){gt(this.g,new vI(t))};Io.prototype.za=function(t){gt(this.g,new _I)};Io.prototype.ya=function(){gt(this.g,"b")};function WD(){this.blockSize=-1}function Nn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ut(Nn,WD);Nn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function jf(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Nn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)jf(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){jf(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){jf(this,r),i=0;break}}this.h=i,this.i+=e};Nn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ee(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var HD={};function Ny(t){return-128<=t&&128>t?Z4(t,function(e){return new Ee([e|0],0>e?-1:0)}):new Ee([t|0],0>t?-1:0)}function Hn(t){if(isNaN(t)||!isFinite(t))return Hs;if(0>t)return pt(Hn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=wm;return new Ee(e,0)}function wI(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return pt(wI(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Hn(Math.pow(e,8)),r=Hs,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Hn(Math.pow(e,s)),r=r.R(s).add(Hn(o))):(r=r.R(n),r=r.add(Hn(o)))}return r}var wm=4294967296,Hs=Ny(0),xm=Ny(1),Q_=Ny(16777216);B=Ee.prototype;B.ea=function(){if(hn(this))return-pt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:wm+r)*e,e*=wm}return t};B.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ur(this))return"0";if(hn(this))return"-"+pt(this).toString(t);for(var e=Hn(Math.pow(t,6)),n=this,r="";;){var i=zu(n,e).g;n=Bu(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,ur(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};B.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ur(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function hn(t){return t.h==-1}B.X=function(t){return t=Bu(this,t),hn(t)?-1:ur(t)?0:1};function pt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ee(n,~t.h).add(xm)}B.abs=function(){return hn(this)?pt(this):this};B.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Ee(n,n[n.length-1]&-2147483648?-1:0)};function Bu(t,e){return t.add(pt(e))}B.R=function(t){if(ur(this)||ur(t))return Hs;if(hn(this))return hn(t)?pt(this).R(pt(t)):pt(pt(this).R(t));if(hn(t))return pt(this.R(pt(t)));if(0>this.X(Q_)&&0>t.X(Q_))return Hn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,Sc(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Sc(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Sc(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Sc(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ee(n,0)};function Sc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function zo(t,e){this.g=t,this.h=e}function zu(t,e){if(ur(e))throw Error("division by zero");if(ur(t))return new zo(Hs,Hs);if(hn(t))return e=zu(pt(t),e),new zo(pt(e.g),pt(e.h));if(hn(e))return e=zu(t,pt(e)),new zo(pt(e.g),e.h);if(30<t.g.length){if(hn(t)||hn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=xm,r=e;0>=r.X(t);)n=Y_(n),r=Y_(r);var i=ps(n,1),s=ps(r,1);for(r=ps(r,2),n=ps(n,2);!ur(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=ps(r,1),n=ps(n,1)}return e=Bu(t,i.R(e)),new zo(i,e)}for(i=Hs;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Hn(n),o=s.R(e);hn(o)||0<o.X(t);)n-=r,s=Hn(n),o=s.R(e);ur(s)&&(s=xm),i=i.add(s),t=Bu(t,o)}return new zo(i,t)}B.gb=function(t){return zu(this,t).h};B.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ee(n,this.h&t.h)};B.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ee(n,this.h|t.h)};B.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ee(n,this.h^t.h)};function Y_(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ee(n,t.h)}function ps(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Ee(i,t.h)}Uu.prototype.createWebChannel=Uu.prototype.g;nn.prototype.send=nn.prototype.u;nn.prototype.open=nn.prototype.m;nn.prototype.close=nn.prototype.close;Kd.NO_ERROR=0;Kd.TIMEOUT=8;Kd.HTTP_ERROR=6;$T.COMPLETE="complete";VT.EventType=bl;bl.OPEN="a";bl.CLOSE="b";bl.ERROR="c";bl.MESSAGE="d";lt.prototype.listen=lt.prototype.O;He.prototype.listenOnce=He.prototype.P;He.prototype.getLastError=He.prototype.Sa;He.prototype.getLastErrorCode=He.prototype.Ia;He.prototype.getStatus=He.prototype.da;He.prototype.getResponseJson=He.prototype.Wa;He.prototype.getResponseText=He.prototype.ja;He.prototype.send=He.prototype.ha;He.prototype.setWithCredentials=He.prototype.Oa;Nn.prototype.digest=Nn.prototype.l;Nn.prototype.reset=Nn.prototype.reset;Nn.prototype.update=Nn.prototype.j;Ee.prototype.add=Ee.prototype.add;Ee.prototype.multiply=Ee.prototype.R;Ee.prototype.modulo=Ee.prototype.gb;Ee.prototype.compare=Ee.prototype.X;Ee.prototype.toNumber=Ee.prototype.ea;Ee.prototype.toString=Ee.prototype.toString;Ee.prototype.getBits=Ee.prototype.D;Ee.fromNumber=Hn;Ee.fromString=wI;var qD=function(){return new Uu},KD=function(){return qd()},Lf=Kd,GD=$T,QD=cs,X_={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Tc=VT,YD=He,XD=Nn,qs=Ee;const J_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}It.UNAUTHENTICATED=new It(null),It.GOOGLE_CREDENTIALS=new It("google-credentials-uid"),It.FIRST_PARTY=new It("first-party-uid"),It.MOCK_USER=new It("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ro="10.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=new Kg("@firebase/firestore");function Z_(){return Xi.logLevel}function Z(t,...e){if(Xi.logLevel<=_e.DEBUG){const n=e.map(Oy);Xi.debug(`Firestore (${Ro}): ${t}`,...n)}}function wr(t,...e){if(Xi.logLevel<=_e.ERROR){const n=e.map(Oy);Xi.error(`Firestore (${Ro}): ${t}`,...n)}}function oo(t,...e){if(Xi.logLevel<=_e.WARN){const n=e.map(Oy);Xi.warn(`Firestore (${Ro}): ${t}`,...n)}}function Oy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${Ro}) INTERNAL ASSERTION FAILED: `+t;throw wr(e),new Error(e)}function Ne(t,e){t||oe()}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends rr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class JD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(It.UNAUTHENTICATED))}shutdown(){}}class ZD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class eM{constructor(e){this.t=e,this.currentUser=It.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new hr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new hr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ne(typeof r.accessToken=="string"),new xI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string"),new It(e)}}class tM{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=It.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class nM{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new tM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(It.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ne(typeof n.token=="string"),this.R=n.token,new rM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=sM(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function we(t,e){return t<e?-1:t>e?1:0}function ao(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ue(e)}static min(){return new ue(new Ze(0,0))}static max(){return new ue(new Ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Za.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Za?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ke extends Za{construct(e,n,r){return new ke(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ke(n)}static emptyPath(){return new ke([])}}const oM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends Za{construct(e,n,r){return new Ct(e,n,r)}static isValidIdentifier(e){return oM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ct(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new G(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new G(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new G(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(n)}static emptyPath(){return new Ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(ke.fromString(e))}static fromName(e){return new ne(ke.fromString(e).popFirst(5))}static empty(){return new ne(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new ke(e.slice()))}}function aM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new Ze(n+1,0):new Ze(n,r));return new ai(i,ne.empty(),e)}function lM(t){return new ai(t.readTime,t.key,-1)}class ai{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ai(ue.min(),ne.empty(),-1)}static max(){return new ai(ue.max(),ne.empty(),-1)}}function cM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:we(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(t){if(t.code!==k.FAILED_PRECONDITION||t.message!==uM)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new D((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof D?n:D.resolve(n)}catch(n){return D.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):D.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):D.reject(n)}static resolve(e){return new D((n,r)=>{n(e)})}static reject(e){return new D((n,r)=>{r(e)})}static waitFor(e){return new D((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=D.resolve(!1);for(const r of e)n=n.next(i=>i?D.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new D((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new D((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Ll(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}jy.ae=-1;function nh(t){return t==null}function Wu(t){return t===0&&1/t==-1/0}function hM(t){return typeof t=="number"&&Number.isInteger(t)&&!Wu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ao(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function SI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||ft.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ft.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ic(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ic(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ic(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ic(this.root,e,this.comparator,!0)}}class Ic{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ft{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ft.RED,this.left=i??ft.EMPTY,this.right=s??ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ft(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ft.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}ft.EMPTY=null,ft.RED=!0,ft.BLACK=!1;ft.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new tw(this.data.getIterator())}getIteratorFrom(e){return new tw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Pt(this.comparator);return n.data=e,n}}class tw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new An([])}unionWith(e){let n=new Pt(Ct.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new An(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ao(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new TI("Invalid base64 string: "+s):s}}(e);return new jt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new jt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const fM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function li(t){if(Ne(!!t),typeof t=="string"){let e=0;const n=fM.exec(t);if(Ne(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ji(t){return typeof t=="string"?jt.fromBase64String(t):jt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Dy(t){const e=t.mapValue.fields.__previous_value__;return Ly(e)?Dy(e):e}function el(t){const e=li(t.mapValue.fields.__local_write_time__.timestampValue);return new Ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class tl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new tl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof tl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Zi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ly(t)?4:mM(t)?9007199254740991:10:oe()}function nr(t,e){if(t===e)return!0;const n=Zi(t);if(n!==Zi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return el(t).isEqual(el(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=li(i.timestampValue),a=li(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ji(i.bytesValue).isEqual(Ji(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Qe(i.geoPointValue.latitude)===Qe(s.geoPointValue.latitude)&&Qe(i.geoPointValue.longitude)===Qe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Qe(i.integerValue)===Qe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Qe(i.doubleValue),a=Qe(s.doubleValue);return o===a?Wu(o)===Wu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ao(t.arrayValue.values||[],e.arrayValue.values||[],nr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(ew(o)!==ew(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!nr(o[l],a[l])))return!1;return!0}(t,e);default:return oe()}}function nl(t,e){return(t.values||[]).find(n=>nr(n,e))!==void 0}function lo(t,e){if(t===e)return 0;const n=Zi(t),r=Zi(e);if(n!==r)return we(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Qe(s.integerValue||s.doubleValue),l=Qe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return nw(t.timestampValue,e.timestampValue);case 4:return nw(el(t),el(e));case 5:return we(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ji(s),l=Ji(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=we(a[c],l[c]);if(u!==0)return u}return we(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=we(Qe(s.latitude),Qe(o.latitude));return a!==0?a:we(Qe(s.longitude),Qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=lo(a[c],l[c]);if(u)return u}return we(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Rc.mapValue&&o===Rc.mapValue)return 0;if(s===Rc.mapValue)return 1;if(o===Rc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const p=we(l[f],u[f]);if(p!==0)return p;const m=lo(a[l[f]],c[u[f]]);if(m!==0)return m}return we(l.length,u.length)}(t.mapValue,e.mapValue);default:throw oe()}}function nw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return we(t,e);const n=li(t),r=li(e),i=we(n.seconds,r.seconds);return i!==0?i:we(n.nanos,r.nanos)}function co(t){return Em(t)}function Em(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=li(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ji(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Em(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Em(n.fields[o])}`;return i+"}"}(t.mapValue):oe()}function rw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Sm(t){return!!t&&"integerValue"in t}function My(t){return!!t&&"arrayValue"in t}function iw(t){return!!t&&"nullValue"in t}function sw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Kc(t){return!!t&&"mapValue"in t}function ma(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ao(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ma(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ma(t.arrayValue.values[n]);return e}return Object.assign({},t)}function mM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Kc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ma(n)}setAll(e){let n=Ct.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ma(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Kc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Kc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ao(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new fn(ma(this.value))}}function II(t){const e=[];return Ao(t.fields,(n,r)=>{const i=new Ct([n]);if(Kc(r)){const s=II(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new An(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new At(e,0,ue.min(),ue.min(),ue.min(),fn.empty(),0)}static newFoundDocument(e,n,r,i){return new At(e,1,n,ue.min(),r,i,0)}static newNoDocument(e,n){return new At(e,2,n,ue.min(),ue.min(),fn.empty(),0)}static newUnknownDocument(e,n){return new At(e,3,n,ue.min(),ue.min(),fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof At&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new At(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,n){this.position=e,this.inclusive=n}}function ow(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=lo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function aw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n="asc"){this.field=e,this.dir=n}}function gM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{}class Xe extends RI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new vM(e,n,r):n==="array-contains"?new xM(e,r):n==="in"?new EM(e,r):n==="not-in"?new SM(e,r):n==="array-contains-any"?new TM(e,r):new Xe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new _M(e,r):new wM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(lo(n,this.value)):n!==null&&Zi(this.value)===Zi(n)&&this.matchesComparison(lo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class On extends RI{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new On(e,n)}matches(e){return AI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function AI(t){return t.op==="and"}function CI(t){return yM(t)&&AI(t)}function yM(t){for(const e of t.filters)if(e instanceof On)return!1;return!0}function Tm(t){if(t instanceof Xe)return t.field.canonicalString()+t.op.toString()+co(t.value);if(CI(t))return t.filters.map(e=>Tm(e)).join(",");{const e=t.filters.map(n=>Tm(n)).join(",");return`${t.op}(${e})`}}function bI(t,e){return t instanceof Xe?function(r,i){return i instanceof Xe&&r.op===i.op&&r.field.isEqual(i.field)&&nr(r.value,i.value)}(t,e):t instanceof On?function(r,i){return i instanceof On&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&bI(o,i.filters[a]),!0):!1}(t,e):void oe()}function kI(t){return t instanceof Xe?function(n){return`${n.field.canonicalString()} ${n.op} ${co(n.value)}`}(t):t instanceof On?function(n){return n.op.toString()+" {"+n.getFilters().map(kI).join(" ,")+"}"}(t):"Filter"}class vM extends Xe{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class _M extends Xe{constructor(e,n){super(e,"in",n),this.keys=PI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class wM extends Xe{constructor(e,n){super(e,"not-in",n),this.keys=PI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function PI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class xM extends Xe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return My(n)&&nl(n.arrayValue,this.value)}}class EM extends Xe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&nl(this.value.arrayValue,n)}}class SM extends Xe{constructor(e,n){super(e,"not-in",n)}matches(e){if(nl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!nl(this.value.arrayValue,n)}}class TM extends Xe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!My(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>nl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.he=null}}function lw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new IM(t,e,n,r,i,s,o)}function $y(t){const e=fe(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Tm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),nh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>co(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>co(r)).join(",")),e.he=n}return e.he}function Vy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!gM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!aw(t.startAt,e.startAt)&&aw(t.endAt,e.endAt)}function Im(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function RM(t,e,n,r,i,s,o,a){return new Dl(t,e,n,r,i,s,o,a)}function Fy(t){return new Dl(t)}function cw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function NI(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Uy(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function OI(t){return t.collectionGroup!==null}function ya(t){const e=fe(t);if(e.Pe===null){e.Pe=[];const n=Uy(e),r=NI(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new ga(n)),e.Pe.push(new ga(Ct.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new ga(Ct.keyField(),s))}}}return e.Pe}function xr(t){const e=fe(t);return e.Ie||(e.Ie=AM(e,ya(t))),e.Ie}function AM(t,e){if(t.limitType==="F")return lw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ga(i.field,s)});const n=t.endAt?new Hu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Hu(t.startAt.position,t.startAt.inclusive):null;return lw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Rm(t,e){e.getFirstInequalityField(),Uy(t);const n=t.filters.concat([e]);return new Dl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Am(t,e,n){return new Dl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rh(t,e){return Vy(xr(t),xr(e))&&t.limitType===e.limitType}function jI(t){return`${$y(xr(t))}|lt:${t.limitType}`}function Cm(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>kI(i)).join(", ")}]`),nh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>co(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>co(i)).join(",")),`Target(${r})`}(xr(t))}; limitType=${t.limitType})`}function ih(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ne.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ya(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=ow(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,ya(r),i)||r.endAt&&!function(o,a,l){const c=ow(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,ya(r),i))}(t,e)}function CM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function LI(t){return(e,n)=>{let r=!1;for(const i of ya(t)){const s=bM(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function bM(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?lo(l,c):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ao(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return SI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=new Ue(ne.comparator);function Er(){return kM}const DI=new Ue(ne.comparator);function Xo(...t){let e=DI;for(const n of t)e=e.insert(n.key,n);return e}function MI(t){let e=DI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ji(){return va()}function $I(){return va()}function va(){return new Co(t=>t.toString(),(t,e)=>t.isEqual(e))}const PM=new Ue(ne.comparator),NM=new Pt(ne.comparator);function me(...t){let e=NM;for(const n of t)e=e.add(n);return e}const OM=new Pt(we);function jM(){return OM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wu(e)?"-0":e}}function FI(t){return{integerValue:""+t}}function LM(t,e){return hM(e)?FI(e):VI(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(){this._=void 0}}function DM(t,e,n){return t instanceof rl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ly(s)&&(s=Dy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof il?BI(t,e):t instanceof sl?zI(t,e):function(i,s){const o=UI(i,s),a=uw(o)+uw(i.Ee);return Sm(o)&&Sm(i.Ee)?FI(a):VI(i.serializer,a)}(t,e)}function MM(t,e,n){return t instanceof il?BI(t,e):t instanceof sl?zI(t,e):n}function UI(t,e){return t instanceof qu?function(r){return Sm(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class rl extends sh{}class il extends sh{constructor(e){super(),this.elements=e}}function BI(t,e){const n=WI(e);for(const r of t.elements)n.some(i=>nr(i,r))||n.push(r);return{arrayValue:{values:n}}}class sl extends sh{constructor(e){super(),this.elements=e}}function zI(t,e){let n=WI(e);for(const r of t.elements)n=n.filter(i=>!nr(i,r));return{arrayValue:{values:n}}}class qu extends sh{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function uw(t){return Qe(t.integerValue||t.doubleValue)}function WI(t){return My(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,n){this.field=e,this.transform=n}}function VM(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof il&&i instanceof il||r instanceof sl&&i instanceof sl?ao(r.elements,i.elements,nr):r instanceof qu&&i instanceof qu?nr(r.Ee,i.Ee):r instanceof rl&&i instanceof rl}(t.transform,e.transform)}class FM{constructor(e,n){this.version=e,this.transformResults=n}}class Jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class oh{}function HI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new By(t.key,Jn.none()):new Ml(t.key,t.data,Jn.none());{const n=t.data,r=fn.empty();let i=new Pt(Ct.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new us(t.key,r,new An(i.toArray()),Jn.none())}}function UM(t,e,n){t instanceof Ml?function(i,s,o){const a=i.value.clone(),l=hw(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof us?function(i,s,o){if(!Gc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=hw(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(qI(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function _a(t,e,n,r){return t instanceof Ml?function(s,o,a,l){if(!Gc(s.precondition,o))return a;const c=s.value.clone(),u=fw(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof us?function(s,o,a,l){if(!Gc(s.precondition,o))return a;const c=fw(s.fieldTransforms,l,o),u=o.data;return u.setAll(qI(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Gc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function BM(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=UI(r.transform,i||null);s!=null&&(n===null&&(n=fn.empty()),n.set(r.field,s))}return n||null}function dw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ao(r,i,(s,o)=>VM(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ml extends oh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class us extends oh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function qI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function hw(t,e,n){const r=new Map;Ne(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,MM(o,a,n[i]))}return r}function fw(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,DM(s,o,e))}return r}class By extends oh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zM extends oh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&UM(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_a(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_a(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=$I();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=HI(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&ao(this.mutations,e.mutations,(n,r)=>dw(n,r))&&ao(this.baseMutations,e.baseMutations,(n,r)=>dw(n,r))}}class zy{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ne(e.mutations.length===r.length);let i=function(){return PM}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new zy(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge,ye;function KM(t){switch(t){default:return oe();case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0}}function KI(t){if(t===void 0)return wr("GRPC error has no .code"),k.UNKNOWN;switch(t){case Ge.OK:return k.OK;case Ge.CANCELLED:return k.CANCELLED;case Ge.UNKNOWN:return k.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return k.INTERNAL;case Ge.UNAVAILABLE:return k.UNAVAILABLE;case Ge.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Ge.NOT_FOUND:return k.NOT_FOUND;case Ge.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Ge.ABORTED:return k.ABORTED;case Ge.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Ge.DATA_LOSS:return k.DATA_LOSS;default:return oe()}}(ye=Ge||(Ge={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=new qs([4294967295,4294967295],0);function pw(t){const e=GM().encode(t),n=new XD;return n.update(e),new Uint8Array(n.digest())}function mw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new qs([n,r],0),new qs([i,s],0)]}class Wy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Jo(`Invalid padding: ${n}`);if(r<0)throw new Jo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Jo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Jo(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=qs.fromNumber(this.Ae)}Ve(e,n,r){let i=e.add(n.multiply(qs.fromNumber(r)));return i.compare(QM)===1&&(i=new qs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=pw(e),[r,i]=mw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);if(!this.me(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Wy(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=pw(e),[r,i]=mw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Jo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,$l.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ah(ue.min(),i,new Ue(we),Er(),me())}}class $l{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new $l(r,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n,r,i){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=i}}class GI{constructor(e,n){this.targetId=e,this.ye=n}}class QI{constructor(e,n,r=jt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class gw{constructor(){this.we=0,this.Se=vw(),this.be=jt.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=me(),n=me(),r=me();return this.Se.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:oe()}}),new $l(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=vw()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class YM{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=Er(),this.Ue=yw(),this.We=new Ue(we)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,i)=>{this.Ye(i)&&n(i)})}Xe(e){const n=e.targetId,r=e.ye.count,i=this.et(n);if(i){const s=i.target;if(Im(s))if(r===0){const o=new ne(s.path);this.je(n,o,At.newNoDocument(o,ue.min()))}else Ne(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),l=a?this.rt(a,e,o):1;if(l!==0){this.Ze(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,c)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ji(r).toUint8Array()}catch(l){if(l instanceof TI)return oo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Wy(o,i,s)}catch(l){return oo(l instanceof Jo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.je(n,s,null),i++)}),i}_t(e){const n=new Map;this.Ke.forEach((s,o)=>{const a=this.et(o);if(a){if(s.current&&Im(a.target)){const l=new ne(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,At.newNoDocument(l,e))}s.Fe&&(n.set(o,s.xe()),s.Oe())}});let r=me();this.Ue.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.et(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.$e.forEach((s,o)=>o.setReadTime(e));const i=new ah(e,n,this.We,this.$e,r);return this.$e=Er(),this.Ue=yw(),this.We=new Ue(we),i}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const i=this.Je(e);this.ut(e,n)?i.Ne(n,1):i.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new gw,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Pt(we),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new gw),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function yw(){return new Ue(ne.comparator)}function vw(){return new Ue(ne.comparator)}const XM=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),JM=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),ZM=(()=>({and:"AND",or:"OR"}))();class e3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bm(t,e){return t.useProto3Json||nh(e)?e:{value:e}}function Ku(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function t3(t,e){return Ku(t,e.toTimestamp())}function Zn(t){return Ne(!!t),ue.fromTimestamp(function(n){const r=li(n);return new Ze(r.seconds,r.nanos)}(t))}function Hy(t,e){return function(r){return new ke(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function XI(t){const e=ke.fromString(t);return Ne(tR(e)),e}function km(t,e){return Hy(t.databaseId,e.path)}function Df(t,e){const n=XI(e);if(n.get(1)!==t.databaseId.projectId)throw new G(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(JI(n))}function Pm(t,e){return Hy(t.databaseId,e)}function n3(t){const e=XI(t);return e.length===4?ke.emptyPath():JI(e)}function Nm(t){return new ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JI(t){return Ne(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function _w(t,e,n){return{name:km(t,e),fields:n.value.mapValue.fields}}function r3(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Ne(u===void 0||typeof u=="string"),jt.fromBase64String(u||"")):(Ne(u===void 0||u instanceof Uint8Array),jt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?k.UNKNOWN:KI(c.code);return new G(u,c.message||"")}(o);n=new QI(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Df(t,r.document.name),s=Zn(r.document.updateTime),o=r.document.createTime?Zn(r.document.createTime):ue.min(),a=new fn({mapValue:{fields:r.document.fields}}),l=At.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Qc(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Df(t,r.document),s=r.readTime?Zn(r.readTime):ue.min(),o=At.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Qc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Df(t,r.document),s=r.removedTargetIds||[];n=new Qc([],s,i,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new qM(i,s),a=r.targetId;n=new GI(a,o)}}return n}function i3(t,e){let n;if(e instanceof Ml)n={update:_w(t,e.key,e.value)};else if(e instanceof By)n={delete:km(t,e.key)};else if(e instanceof us)n={update:_w(t,e.key,e.data),updateMask:f3(e.fieldMask)};else{if(!(e instanceof zM))return oe();n={verify:km(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof rl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof il)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof sl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof qu)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:t3(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:oe()}(t,e.precondition)),n}function s3(t,e){return t&&t.length>0?(Ne(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Zn(i.updateTime):Zn(s);return o.isEqual(ue.min())&&(o=Zn(s)),new FM(o,i.transformResults||[])}(n,e))):[]}function o3(t,e){return{documents:[Pm(t,e.path)]}}function a3(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Pm(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Pm(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return eR(On.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(c=>function(f){return{field:ys(f.field),direction:u3(f.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=bm(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function l3(t){let e=n3(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ne(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(f){const p=ZI(f);return p instanceof On&&CI(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(v){return new ga(vs(v.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,nh(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new Hu(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,m=f.values||[];return new Hu(m,p)}(n.endAt)),RM(e,i,o,s,a,"F",l,c)}function c3(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ZI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=vs(n.unaryFilter.field);return Xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=vs(n.unaryFilter.field);return Xe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=vs(n.unaryFilter.field);return Xe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=vs(n.unaryFilter.field);return Xe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return Xe.create(vs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return On.create(n.compositeFilter.filters.map(r=>ZI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function u3(t){return XM[t]}function d3(t){return JM[t]}function h3(t){return ZM[t]}function ys(t){return{fieldPath:t.canonicalString()}}function vs(t){return Ct.fromServerFormat(t.fieldPath)}function eR(t){return t instanceof Xe?function(n){if(n.op==="=="){if(sw(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NAN"}};if(iw(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(sw(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NOT_NAN"}};if(iw(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ys(n.field),op:d3(n.op),value:n.value}}}(t):t instanceof On?function(n){const r=n.getFilters().map(i=>eR(i));return r.length===1?r[0]:{compositeFilter:{op:h3(n.op),filters:r}}}(t):oe()}function f3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function tR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n,r,i,s=ue.min(),o=ue.min(),a=jt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ur(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e){this.ht=e}}function m3(t){const e=l3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Am(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(){this._n=new y3}addToCollectionParentIndex(e,n){return this._n.add(n),D.resolve()}getCollectionParents(e,n){return D.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return D.resolve()}deleteFieldIndex(e,n){return D.resolve()}getDocumentsMatchingTarget(e,n){return D.resolve(null)}getIndexType(e,n){return D.resolve(0)}getFieldIndexes(e,n){return D.resolve([])}getNextCollectionGroupToUpdate(e){return D.resolve(null)}getMinOffset(e,n){return D.resolve(ai.min())}getMinOffsetFromCollectionGroup(e,n){return D.resolve(ai.min())}updateCollectionGroup(e,n,r){return D.resolve()}updateIndexEntries(e,n){return D.resolve()}}class y3{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Pt(ke.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pt(ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new uo(0)}static Bn(){return new uo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(){this.changes=new Co(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,At.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?D.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&_a(r.mutation,i,An.empty(),Ze.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){const i=ji();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Xo();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ji();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Er();const o=va(),a=function(){return va()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof us)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),_a(u.mutation,c,u.mutation.getFieldMask(),Ze.now())):o.set(c.key,An.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var f;return a.set(c,new _3(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=va();let i=new Ue((o,a)=>o-a),s=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||An.empty();u=a.applyToLocalView(c,u),r.set(l,u);const f=(i.get(a.batchId)||me()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=$I();u.forEach(p=>{if(!s.has(p)){const m=HI(n.get(p),r.get(p));m!==null&&f.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return D.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return ne.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):OI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):D.resolve(ji());let a=-1,l=s;return o.next(c=>D.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(u)?D.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,me())).next(u=>({batchId:a,changes:MI(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let i=Xo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=Xo();return this.indexManager.getCollectionParents(e,i).next(o=>D.forEach(o,a=>{const l=function(u,f){return new Dl(f,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((u,f)=>{s=s.insert(u,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,l)=>{const c=l.getKey();s.get(c)===null&&(s=s.insert(c,At.newInvalidDocument(c)))});let o=Xo();return s.forEach((a,l)=>{const c=i.get(a);c!==void 0&&_a(c.mutation,l,An.empty(),Ze.now()),ih(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return D.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Zn(i.createTime)}}(n)),D.resolve()}getNamedQuery(e,n){return D.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:m3(i.bundledQuery),readTime:Zn(i.readTime)}}(n)),D.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(){this.overlays=new Ue(ne.comparator),this.hr=new Map}getOverlay(e,n){return D.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ji();return D.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.It(e,n,s)}),D.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),D.resolve()}getOverlaysForCollection(e,n,r){const i=ji(),s=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return D.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ue((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=ji(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=ji(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return D.resolve(a)}It(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new HM(n,r));let s=this.hr.get(n);s===void 0&&(s=me(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(){this.Pr=new Pt(st.Ir),this.Tr=new Pt(st.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new st(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new st(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new ne(new ke([])),r=new st(n,e),i=new st(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new ne(new ke([])),r=new st(n,e),i=new st(n,e+1);let s=me();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new st(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class st{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ne.comparator(e.key,n.key)||we(e.pr,n.pr)}static Er(e,n){return we(e.pr,n.pr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Pt(st.Ir)}checkEmpty(e){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new WM(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new st(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return D.resolve(o)}lookupMutationBatch(e,n){return D.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return D.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new st(n,0),i=new st(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),D.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Pt(we);return n.forEach(i=>{const s=new st(i,0),o=new st(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),D.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ne.isDocumentKey(s)||(s=s.child(""));const o=new st(new ne(s),0);let a=new Pt(we);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),D.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ne(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return D.forEach(n.mutations,i=>{const s=new st(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new st(n,0),i=this.wr.firstAfterOrEqual(r);return D.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,D.resolve()}vr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e){this.Cr=e,this.docs=function(){return new Ue(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return D.resolve(r?r.document.mutableCopy():At.newInvalidDocument(n))}getEntries(e,n){let r=Er();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():At.newInvalidDocument(i))}),D.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Er();const o=n.path,a=new ne(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||cM(lM(u),r)<=0||(i.has(u.key)||ih(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return D.resolve(s)}getAllFromCollectionGroup(e,n,r,i){oe()}Fr(e,n){return D.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new I3(this)}getSize(e){return D.resolve(this.size)}}class I3 extends v3{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),D.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e){this.persistence=e,this.Mr=new Co(n=>$y(n),Vy),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Or=0,this.Nr=new qy,this.targetCount=0,this.Br=uo.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),D.resolve()}getLastRemoteSnapshotVersion(e){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return D.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),D.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new uo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,D.resolve()}updateTargetData(e,n){return this.qn(n),D.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,D.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),D.waitFor(s).next(()=>i)}getTargetCount(e){return D.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return D.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),D.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),D.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),D.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return D.resolve(r)}containsKey(e,n){return D.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e,n){this.Lr={},this.overlays={},this.kr=new jy(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new R3(this),this.indexManager=new g3,this.remoteDocumentCache=function(i){return new T3(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new p3(n),this.$r=new x3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new E3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new S3(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const i=new C3(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return D.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class C3 extends dM{constructor(e){super(),this.currentSequenceNumber=e}}class Ky{constructor(e){this.persistence=e,this.zr=new qy,this.jr=null}static Hr(e){return new Ky(e)}get Jr(){if(this.jr)return this.jr;throw oe()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),D.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),D.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),D.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.Jr,r=>{const i=ne.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,ue.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return D.or([()=>D.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=me(),i=me();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Gy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(){this.$i=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Wi(e,n).next(s=>s||this.Gi(e,n,i,r)).next(s=>s||this.zi(e,n))}Wi(e,n){if(cw(n))return D.resolve(null);let r=xr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Am(n,null,"F"),r=xr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=me(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ji(n,a);return this.Hi(n,c,o,l.readTime)?this.Wi(e,Am(n,null,"F")):this.Ji(e,c,n,l)}))})))}Gi(e,n,r,i){return cw(n)||i.isEqual(ue.min())?this.zi(e,n):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(n,s);return this.Hi(n,o,r,i)?this.zi(e,n):(Z_()<=_e.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Cm(n)),this.Ji(e,o,n,aM(i,-1)))})}ji(e,n){let r=new Pt(LI(e));return n.forEach((i,s)=>{ih(e,s)&&(r=r.add(s))}),r}Hi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}zi(e,n){return Z_()<=_e.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",Cm(n)),this.Ui.getDocumentsMatchingQuery(e,n,ai.min())}Ji(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e,n,r,i){this.persistence=e,this.Yi=n,this.serializer=i,this.Zi=new Ue(we),this.Xi=new Co(s=>$y(s),Vy),this.es=new Map,this.ts=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this.ns(r)}ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new w3(this.ts,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ts.setIndexManager(this.indexManager),this.Yi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Zi))}}function P3(t,e,n,r){return new k3(t,e,n,r)}async function nR(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=me();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function N3(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ts.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,p=f.keys();let m=D.resolve();return p.forEach(v=>{m=m.next(()=>u.getEntry(l,v)).next(w=>{const E=c.docVersions.get(v);Ne(E!==null),w.version.compareTo(E)<0&&(f.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),u.addEntry(w)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=me();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function rR(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function O3(t,e){const n=fe(t),r=e.snapshotVersion;let i=n.Zi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ts.newChangeBuffer({trackRemovals:!0});i=n.Zi;const a=[];e.targetChanges.forEach((u,f)=>{const p=i.get(f);if(!p)return;a.push(n.Qr.removeMatchingKeys(s,u.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,u.addedDocuments,f)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(jt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(f,m),function(w,E,y){return w.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(p,m,u)&&a.push(n.Qr.updateTargetData(s,m))});let l=Er(),c=me();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(j3(s,o,e.documentUpdates).next(u=>{l=u.ss,c=u.os})),!r.isEqual(ue.min())){const u=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return D.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Zi=i,s))}function j3(t,e,n){let r=me(),i=me();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Er();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ss:o,os:i}})}function L3(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function D3(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,D.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Ur(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Zi.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Zi=n.Zi.insert(r.targetId,r),n.Xi.set(e,r.targetId)),r})}async function Om(t,e,n){const r=fe(t),i=r.Zi.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ll(o))throw o;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Zi=r.Zi.remove(e),r.Xi.delete(i.target)}function ww(t,e,n){const r=fe(t);let i=ue.min(),s=me();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,c,u){const f=fe(l),p=f.Xi.get(u);return p!==void 0?D.resolve(f.Zi.get(p)):f.Qr.getTargetData(c,u)}(r,o,xr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Yi.getDocumentsMatchingQuery(o,e,n?i:ue.min(),n?s:me())).next(a=>(M3(r,CM(e),a),{documents:a,_s:s})))}function M3(t,e,n){let r=t.es.get(e)||ue.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.es.set(e,r)}class xw{constructor(){this.activeTargetIds=jM()}Is(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ts(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ps(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $3{constructor(){this.Ys=new xw,this.Zs={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ys.Is(e),this.Zs[e]||"not-current"}updateQueryState(e,n,r){this.Zs[e]=n}removeLocalQueryTarget(e){this.Ys.Ts(e)}isLocalQueryTarget(e){return this.Ys.activeTargetIds.has(e)}clearQueryState(e){delete this.Zs[e]}getAllActiveQueryTargets(){return this.Ys.activeTargetIds}isActiveQueryTarget(e){return this.Ys.activeTargetIds.has(e)}start(){return this.Ys=new xw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{Xs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this.eo=()=>this.no(),this.ro=()=>this.io(),this.so=[],this.oo()}Xs(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.eo),window.removeEventListener("offline",this.ro)}oo(){window.addEventListener("online",this.eo),window.addEventListener("offline",this.ro)}no(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}io(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ac=null;function Mf(){return Ac===null?Ac=function(){return 268435456+Math.round(2147483648*Math.random())}():Ac++,"0x"+Ac.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e){this._o=e._o,this.ao=e.ao}uo(e){this.co=e}lo(e){this.ho=e}onMessage(e){this.Po=e}close(){this.ao()}send(e){this._o(e)}Io(){this.co()}To(e){this.ho(e)}Eo(e){this.Po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St="WebChannelConnection";class B3 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ao=r+"://"+n.host,this.Ro=`projects/${i}/databases/${s}`,this.Vo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get mo(){return!1}fo(n,r,i,s,o){const a=Mf(),l=this.po(n,r);Z("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.Ro,"x-goog-request-params":this.Vo};return this.yo(c,s,o),this.wo(n,l,c,i).then(u=>(Z("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw oo("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}So(n,r,i,s,o,a){return this.fo(n,r,i,s,o)}yo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ro}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}po(n,r){const i=F3[n];return`${this.Ao}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}wo(e,n,r,i){const s=Mf();return new Promise((o,a)=>{const l=new YD;l.setWithCredentials(!0),l.listenOnce(GD.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Lf.NO_ERROR:const u=l.getResponseJson();Z(St,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Lf.TIMEOUT:Z(St,`RPC '${e}' ${s} timed out`),a(new G(k.DEADLINE_EXCEEDED,"Request time out"));break;case Lf.HTTP_ERROR:const f=l.getStatus();if(Z(St,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const v=function(E){const y=E.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(y)>=0?y:k.UNKNOWN}(m.status);a(new G(v,m.message))}else a(new G(k.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new G(k.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{Z(St,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Z(St,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}bo(e,n,r){const i=Mf(),s=[this.Ao,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=qD(),a=KD(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.yo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");Z(St,`Creating RPC '${e}' stream ${i}: ${u}`,l);const f=o.createWebChannel(u,l);let p=!1,m=!1;const v=new U3({_o:E=>{m?Z(St,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(p||(Z(St,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),Z(St,`RPC '${e}' stream ${i} sending:`,E),f.send(E))},ao:()=>f.close()}),w=(E,y,g)=>{E.listen(y,_=>{try{g(_)}catch(x){setTimeout(()=>{throw x},0)}})};return w(f,Tc.EventType.OPEN,()=>{m||Z(St,`RPC '${e}' stream ${i} transport opened.`)}),w(f,Tc.EventType.CLOSE,()=>{m||(m=!0,Z(St,`RPC '${e}' stream ${i} transport closed`),v.To())}),w(f,Tc.EventType.ERROR,E=>{m||(m=!0,oo(St,`RPC '${e}' stream ${i} transport errored:`,E),v.To(new G(k.UNAVAILABLE,"The operation could not be completed")))}),w(f,Tc.EventType.MESSAGE,E=>{var y;if(!m){const g=E.data[0];Ne(!!g);const _=g,x=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(x){Z(St,`RPC '${e}' stream ${i} received error:`,x);const S=x.status;let T=function(C){const A=Ge[C];if(A!==void 0)return KI(A)}(S),R=x.message;T===void 0&&(T=k.INTERNAL,R="Unknown error status: "+S+" with message "+x.message),m=!0,v.To(new G(T,R)),f.close()}else Z(St,`RPC '${e}' stream ${i} received:`,g),v.Eo(g)}}),w(a,QD.STAT_EVENT,E=>{E.stat===X_.PROXY?Z(St,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===X_.NOPROXY&&Z(St,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.Io()},0),v}}function $f(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(t){return new e3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Do=r,this.vo=i,this.Co=s,this.Fo=0,this.Mo=null,this.xo=Date.now(),this.reset()}reset(){this.Fo=0}Oo(){this.Fo=this.Co}No(e){this.cancel();const n=Math.floor(this.Fo+this.Bo()),r=Math.max(0,Date.now()-this.xo),i=Math.max(0,n-r);i>0&&Z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Fo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Mo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.xo=Date.now(),e())),this.Fo*=this.vo,this.Fo<this.Do&&(this.Fo=this.Do),this.Fo>this.Co&&(this.Fo=this.Co)}Lo(){this.Mo!==null&&(this.Mo.skipDelay(),this.Mo=null)}cancel(){this.Mo!==null&&(this.Mo.cancel(),this.Mo=null)}Bo(){return(Math.random()-.5)*this.Fo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.ko=r,this.qo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Qo=0,this.Ko=null,this.$o=null,this.stream=null,this.Uo=new iR(e,n)}Wo(){return this.state===1||this.state===5||this.Go()}Go(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.zo()}async stop(){this.Wo()&&await this.close(0)}jo(){this.state=0,this.Uo.reset()}Ho(){this.Go()&&this.Ko===null&&(this.Ko=this.oi.enqueueAfterDelay(this.ko,6e4,()=>this.Jo()))}Yo(e){this.Zo(),this.stream.send(e)}async Jo(){if(this.Go())return this.close(0)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}Xo(){this.$o&&(this.$o.cancel(),this.$o=null)}async close(e,n){this.Zo(),this.Xo(),this.Uo.cancel(),this.Qo++,e!==4?this.Uo.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(wr(n.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),this.Uo.Oo()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.e_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.lo(n)}e_(){}auth(){this.state=1;const e=this.t_(this.Qo),n=this.Qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Qo===n&&this.n_(r,i)},r=>{e(()=>{const i=new G(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.r_(i)})})}n_(e,n){const r=this.t_(this.Qo);this.stream=this.i_(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.$o=this.oi.enqueueAfterDelay(this.qo,1e4,()=>(this.Go()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.lo(i=>{r(()=>this.r_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}zo(){this.state=5,this.Uo.No(async()=>{this.state=0,this.start()})}r_(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}t_(e){return n=>{this.oi.enqueueAndForget(()=>this.Qo===e?n():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class z3 extends sR{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}i_(e,n){return this.connection.bo("Listen",e,n)}onMessage(e){this.Uo.reset();const n=r3(this.serializer,e),r=function(s){if(!("targetChange"in s))return ue.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?Zn(o.readTime):ue.min()}(e);return this.listener.s_(n,r)}o_(e){const n={};n.database=Nm(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Im(l)?{documents:o3(s,l)}:{query:a3(s,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=YI(s,o.resumeToken);const c=bm(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=Ku(s,o.snapshotVersion.toTimestamp());const c=bm(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=c3(this.serializer,e);r&&(n.labels=r),this.Yo(n)}__(e){const n={};n.database=Nm(this.serializer),n.removeTarget=e,this.Yo(n)}}class W3 extends sR{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.a_=!1}get u_(){return this.a_}start(){this.a_=!1,this.lastStreamToken=void 0,super.start()}e_(){this.a_&&this.c_([])}i_(e,n){return this.connection.bo("Write",e,n)}onMessage(e){if(Ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_){this.Uo.reset();const n=s3(e.writeResults,e.commitTime),r=Zn(e.commitTime);return this.listener.l_(r,n)}return Ne(!e.writeResults||e.writeResults.length===0),this.a_=!0,this.listener.h_()}P_(){const e={};e.database=Nm(this.serializer),this.Yo(e)}c_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>i3(this.serializer,r))};this.Yo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.I_=!1}T_(){if(this.I_)throw new G(k.FAILED_PRECONDITION,"The client has already been terminated.")}fo(e,n,r){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.fo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(k.UNKNOWN,i.toString())})}So(e,n,r,i){return this.T_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(k.UNKNOWN,s.toString())})}terminate(){this.I_=!0}}class q3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.d_=0,this.A_=null,this.R_=!0}V_(){this.d_===0&&(this.m_("Unknown"),this.A_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.A_=null,this.f_("Backend didn't respond within 10 seconds."),this.m_("Offline"),Promise.resolve())))}g_(e){this.state==="Online"?this.m_("Unknown"):(this.d_++,this.d_>=1&&(this.p_(),this.f_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.m_("Offline")))}set(e){this.p_(),this.d_=0,e==="Online"&&(this.R_=!1),this.m_(e)}m_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}f_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.R_?(wr(n),this.R_=!1):Z("OnlineStateTracker",n)}p_(){this.A_!==null&&(this.A_.cancel(),this.A_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.y_=[],this.w_=new Map,this.S_=new Set,this.b_=[],this.D_=s,this.D_.Xs(o=>{r.enqueueAndForget(async()=>{ds(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=fe(l);c.S_.add(4),await Vl(c),c.v_.set("Unknown"),c.S_.delete(4),await ch(c)}(this))})}),this.v_=new q3(r,i)}}async function ch(t){if(ds(t))for(const e of t.b_)await e(!0)}async function Vl(t){for(const e of t.b_)await e(!1)}function oR(t,e){const n=fe(t);n.w_.has(e.targetId)||(n.w_.set(e.targetId,e),Xy(n)?Yy(n):bo(n).Go()&&Qy(n,e))}function aR(t,e){const n=fe(t),r=bo(n);n.w_.delete(e),r.Go()&&lR(n,e),n.w_.size===0&&(r.Go()?r.Ho():ds(n)&&n.v_.set("Unknown"))}function Qy(t,e){if(t.C_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bo(t).o_(e)}function lR(t,e){t.C_.Le(e),bo(t).__(e)}function Yy(t){t.C_=new YM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.w_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),bo(t).start(),t.v_.V_()}function Xy(t){return ds(t)&&!bo(t).Wo()&&t.w_.size>0}function ds(t){return fe(t).S_.size===0}function cR(t){t.C_=void 0}async function G3(t){t.w_.forEach((e,n)=>{Qy(t,e)})}async function Q3(t,e){cR(t),Xy(t)?(t.v_.g_(e),Yy(t)):t.v_.set("Unknown")}async function Y3(t,e,n){if(t.v_.set("Online"),e instanceof QI&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.w_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.w_.delete(a),i.C_.removeTarget(a))}(t,e)}catch(r){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Gu(t,r)}else if(e instanceof Qc?t.C_.Ge(e):e instanceof GI?t.C_.Xe(e):t.C_.He(e),!n.isEqual(ue.min()))try{const r=await rR(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.C_._t(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.w_.get(c);u&&s.w_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.w_.get(l);if(!u)return;s.w_.set(l,u.withResumeToken(jt.EMPTY_BYTE_STRING,u.snapshotVersion)),lR(s,l);const f=new Ur(u.target,l,c,u.sequenceNumber);Qy(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Z("RemoteStore","Failed to raise snapshot:",r),await Gu(t,r)}}async function Gu(t,e,n){if(!Ll(e))throw e;t.S_.add(1),await Vl(t),t.v_.set("Offline"),n||(n=()=>rR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z("RemoteStore","Retrying IndexedDB access"),await n(),t.S_.delete(1),await ch(t)})}function uR(t,e){return e().catch(n=>Gu(t,n,e))}async function uh(t){const e=fe(t),n=ci(e);let r=e.y_.length>0?e.y_[e.y_.length-1].batchId:-1;for(;X3(e);)try{const i=await L3(e.localStore,r);if(i===null){e.y_.length===0&&n.Ho();break}r=i.batchId,J3(e,i)}catch(i){await Gu(e,i)}dR(e)&&hR(e)}function X3(t){return ds(t)&&t.y_.length<10}function J3(t,e){t.y_.push(e);const n=ci(t);n.Go()&&n.u_&&n.c_(e.mutations)}function dR(t){return ds(t)&&!ci(t).Wo()&&t.y_.length>0}function hR(t){ci(t).start()}async function Z3(t){ci(t).P_()}async function e$(t){const e=ci(t);for(const n of t.y_)e.c_(n.mutations)}async function t$(t,e,n){const r=t.y_.shift(),i=zy.from(r,e,n);await uR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await uh(t)}async function n$(t,e){e&&ci(t).u_&&await async function(r,i){if(function(o){return KM(o)&&o!==k.ABORTED}(i.code)){const s=r.y_.shift();ci(r).jo(),await uR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await uh(r)}}(t,e),dR(t)&&hR(t)}async function Sw(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");const r=ds(n);n.S_.add(3),await Vl(n),r&&n.v_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.S_.delete(3),await ch(n)}async function r$(t,e){const n=fe(t);e?(n.S_.delete(2),await ch(n)):e||(n.S_.add(2),await Vl(n),n.v_.set("Unknown"))}function bo(t){return t.F_||(t.F_=function(n,r,i){const s=fe(n);return s.T_(),new z3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{uo:G3.bind(null,t),lo:Q3.bind(null,t),s_:Y3.bind(null,t)}),t.b_.push(async e=>{e?(t.F_.jo(),Xy(t)?Yy(t):t.v_.set("Unknown")):(await t.F_.stop(),cR(t))})),t.F_}function ci(t){return t.M_||(t.M_=function(n,r,i){const s=fe(n);return s.T_(),new W3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{uo:Z3.bind(null,t),lo:n$.bind(null,t),h_:e$.bind(null,t),l_:t$.bind(null,t)}),t.b_.push(async e=>{e?(t.M_.jo(),await uh(t)):(await t.M_.stop(),t.y_.length>0&&(Z("RemoteStore",`Stopping write stream with ${t.y_.length} pending writes`),t.y_=[]))})),t.M_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Jy(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zy(t,e){if(wr("AsyncQueue",`${e}: ${t}`),Ll(t))return new G(k.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=Xo(),this.sortedSet=new Ue(this.comparator)}static emptySet(e){return new Ks(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ks)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ks;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(){this.x_=new Ue(ne.comparator)}track(e){const n=e.doc.key,r=this.x_.get(n);r?e.type!==0&&r.type===3?this.x_=this.x_.insert(n,e):e.type===3&&r.type!==1?this.x_=this.x_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.x_=this.x_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.x_=this.x_.remove(n):e.type===1&&r.type===2?this.x_=this.x_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.x_=this.x_.insert(n,{type:2,doc:e.doc}):oe():this.x_=this.x_.insert(n,e)}O_(){const e=[];return this.x_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ho{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ho(e,n,Ks.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${constructor(){this.N_=void 0,this.listeners=[]}}class s${constructor(){this.queries=new Co(e=>jI(e),rh),this.onlineState="Unknown",this.B_=new Set}}async function fR(t,e){const n=fe(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new i$),i)try{s.N_=await n.onListen(r)}catch(o){const a=Zy(o,`Initialization of query '${Cm(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.L_(n.onlineState),s.N_&&e.k_(s.N_)&&ev(n)}async function pR(t,e){const n=fe(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function o$(t,e){const n=fe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.k_(i)&&(r=!0);o.N_=i}}r&&ev(n)}function a$(t,e,n){const r=fe(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function ev(t){t.B_.forEach(e=>{e.next()})}class mR{constructor(e,n,r){this.query=e,this.q_=n,this.Q_=!1,this.K_=null,this.onlineState="Unknown",this.options=r||{}}k_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ho(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Q_?this.U_(e)&&(this.q_.next(e),n=!0):this.W_(e,this.onlineState)&&(this.G_(e),n=!0),this.K_=e,n}onError(e){this.q_.error(e)}L_(e){this.onlineState=e;let n=!1;return this.K_&&!this.Q_&&this.W_(this.K_,e)&&(this.G_(this.K_),n=!0),n}W_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}U_(e){if(e.docChanges.length>0)return!0;const n=this.K_&&this.K_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}G_(e){e=ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Q_=!0,this.q_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.key=e}}class yR{constructor(e){this.key=e}}class l${constructor(e,n){this.query=e,this.ta=n,this.na=null,this.hasCachedResults=!1,this.current=!1,this.ra=me(),this.mutatedKeys=me(),this.ia=LI(e),this.sa=new Ks(this.ia)}get oa(){return this.ta}_a(e,n){const r=n?n.aa:new Tw,i=n?n.sa:this.sa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,f)=>{const p=i.get(u),m=ih(this.query,f)?f:null,v=!!p&&this.mutatedKeys.has(p.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let E=!1;p&&m?p.data.isEqual(m.data)?v!==w&&(r.track({type:3,doc:m}),E=!0):this.ua(p,m)||(r.track({type:2,doc:m}),E=!0,(l&&this.ia(m,l)>0||c&&this.ia(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),E=!0):p&&!m&&(r.track({type:1,doc:p}),E=!0,(l||c)&&(a=!0)),E&&(m?(o=o.add(m),s=w?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{sa:o,aa:r,Hi:a,mutatedKeys:s}}ua(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.sa;this.sa=e.sa,this.mutatedKeys=e.mutatedKeys;const s=e.aa.O_();s.sort((c,u)=>function(p,m){const v=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return v(p)-v(m)}(c.type,u.type)||this.ia(c.doc,u.doc)),this.ca(r);const o=n?this.la():[],a=this.ra.size===0&&this.current?1:0,l=a!==this.na;return this.na=a,s.length!==0||l?{snapshot:new ho(this.query,e.sa,i,s,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ha:o}:{ha:o}}L_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({sa:this.sa,aa:new Tw,mutatedKeys:this.mutatedKeys,Hi:!1},!1)):{ha:[]}}Pa(e){return!this.ta.has(e)&&!!this.sa.has(e)&&!this.sa.get(e).hasLocalMutations}ca(e){e&&(e.addedDocuments.forEach(n=>this.ta=this.ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ta=this.ta.delete(n)),this.current=e.current)}la(){if(!this.current)return[];const e=this.ra;this.ra=me(),this.sa.forEach(r=>{this.Pa(r.key)&&(this.ra=this.ra.add(r.key))});const n=[];return e.forEach(r=>{this.ra.has(r)||n.push(new yR(r))}),this.ra.forEach(r=>{e.has(r)||n.push(new gR(r))}),n}Ia(e){this.ta=e._s,this.ra=me();const n=this._a(e.documents);return this.applyChanges(n,!0)}Ta(){return ho.fromInitialDocuments(this.query,this.sa,this.mutatedKeys,this.na===0,this.hasCachedResults)}}class c${constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class u${constructor(e){this.key=e,this.Ea=!1}}class d${constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.da={},this.Aa=new Co(a=>jI(a),rh),this.Ra=new Map,this.Va=new Set,this.ma=new Ue(ne.comparator),this.fa=new Map,this.ga=new qy,this.pa={},this.ya=new Map,this.wa=uo.Bn(),this.onlineState="Unknown",this.Sa=void 0}get isPrimaryClient(){return this.Sa===!0}}async function h$(t,e){const n=E$(t);let r,i;const s=n.Aa.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ta();else{const o=await D3(n.localStore,xr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await f$(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&oR(n.remoteStore,o)}return i}async function f$(t,e,n,r,i){t.ba=(f,p,m)=>async function(w,E,y,g){let _=E.view._a(y);_.Hi&&(_=await ww(w.localStore,E.query,!1).then(({documents:T})=>E.view._a(T,_)));const x=g&&g.targetChanges.get(E.targetId),S=E.view.applyChanges(_,w.isPrimaryClient,x);return Rw(w,E.targetId,S.ha),S.snapshot}(t,f,p,m);const s=await ww(t.localStore,e,!0),o=new l$(e,s._s),a=o._a(s.documents),l=$l.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);Rw(t,n,c.ha);const u=new c$(e,n,o);return t.Aa.set(e,u),t.Ra.has(n)?t.Ra.get(n).push(e):t.Ra.set(n,[e]),c.snapshot}async function p$(t,e){const n=fe(t),r=n.Aa.get(e),i=n.Ra.get(r.targetId);if(i.length>1)return n.Ra.set(r.targetId,i.filter(s=>!rh(s,e))),void n.Aa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Om(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),aR(n.remoteStore,r.targetId),jm(n,r.targetId)}).catch(jl)):(jm(n,r.targetId),await Om(n.localStore,r.targetId,!0))}async function m$(t,e,n){const r=S$(t);try{const i=await function(o,a){const l=fe(o),c=Ze.now(),u=a.reduce((m,v)=>m.add(v.key),me());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=Er(),w=me();return l.ts.getEntries(m,u).next(E=>{v=E,v.forEach((y,g)=>{g.isValidDocument()||(w=w.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,v)).next(E=>{f=E;const y=[];for(const g of a){const _=BM(g,f.get(g.key).overlayedDocument);_!=null&&y.push(new us(g.key,_,II(_.value.mapValue),Jn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,y,a)}).next(E=>{p=E;const y=E.applyToLocalDocumentSet(f,w);return l.documentOverlayCache.saveOverlays(m,E.batchId,y)})}).then(()=>({batchId:p.batchId,changes:MI(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.pa[o.currentUser.toKey()];c||(c=new Ue(we)),c=c.insert(a,l),o.pa[o.currentUser.toKey()]=c}(r,i.batchId,n),await Fl(r,i.changes),await uh(r.remoteStore)}catch(i){const s=Zy(i,"Failed to persist write");n.reject(s)}}async function vR(t,e){const n=fe(t);try{const r=await O3(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.fa.get(s);o&&(Ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ea=!0:i.modifiedDocuments.size>0?Ne(o.Ea):i.removedDocuments.size>0&&(Ne(o.Ea),o.Ea=!1))}),await Fl(n,r,e)}catch(r){await jl(r)}}function Iw(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Aa.forEach((s,o)=>{const a=o.view.L_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=fe(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const p of f.listeners)p.L_(a)&&(c=!0)}),c&&ev(l)}(r.eventManager,e),i.length&&r.da.s_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function g$(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.fa.get(e),s=i&&i.key;if(s){let o=new Ue(ne.comparator);o=o.insert(s,At.newNoDocument(s,ue.min()));const a=me().add(s),l=new ah(ue.min(),new Map,new Ue(we),o,a);await vR(r,l),r.ma=r.ma.remove(s),r.fa.delete(e),tv(r)}else await Om(r.localStore,e,!1).then(()=>jm(r,e,n)).catch(jl)}async function y$(t,e){const n=fe(t),r=e.batch.batchId;try{const i=await N3(n.localStore,e);wR(n,r,null),_R(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Fl(n,i)}catch(i){await jl(i)}}async function v$(t,e,n){const r=fe(t);try{const i=await function(o,a){const l=fe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Ne(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);wR(r,e,n),_R(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Fl(r,i)}catch(i){await jl(i)}}function _R(t,e){(t.ya.get(e)||[]).forEach(n=>{n.resolve()}),t.ya.delete(e)}function wR(t,e,n){const r=fe(t);let i=r.pa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.pa[r.currentUser.toKey()]=i}}function jm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ra.get(e))t.Aa.delete(r),n&&t.da.Da(r,n);t.Ra.delete(e),t.isPrimaryClient&&t.ga.Vr(e).forEach(r=>{t.ga.containsKey(r)||xR(t,r)})}function xR(t,e){t.Va.delete(e.path.canonicalString());const n=t.ma.get(e);n!==null&&(aR(t.remoteStore,n),t.ma=t.ma.remove(e),t.fa.delete(n),tv(t))}function Rw(t,e,n){for(const r of n)r instanceof gR?(t.ga.addReference(r.key,e),_$(t,r)):r instanceof yR?(Z("SyncEngine","Document no longer in limbo: "+r.key),t.ga.removeReference(r.key,e),t.ga.containsKey(r.key)||xR(t,r.key)):oe()}function _$(t,e){const n=e.key,r=n.path.canonicalString();t.ma.get(n)||t.Va.has(r)||(Z("SyncEngine","New document in limbo: "+n),t.Va.add(r),tv(t))}function tv(t){for(;t.Va.size>0&&t.ma.size<t.maxConcurrentLimboResolutions;){const e=t.Va.values().next().value;t.Va.delete(e);const n=new ne(ke.fromString(e)),r=t.wa.next();t.fa.set(r,new u$(n)),t.ma=t.ma.insert(n,r),oR(t.remoteStore,new Ur(xr(Fy(n.path)),r,"TargetPurposeLimboResolution",jy.ae))}}async function Fl(t,e,n){const r=fe(t),i=[],s=[],o=[];r.Aa.isEmpty()||(r.Aa.forEach((a,l)=>{o.push(r.ba(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=Gy.Ki(l.targetId,c);s.push(u)}}))}),await Promise.all(o),r.da.s_(i),await async function(l,c){const u=fe(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>D.forEach(c,p=>D.forEach(p.qi,m=>u.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>D.forEach(p.Qi,m=>u.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!Ll(f))throw f;Z("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=u.Zi.get(p),v=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(v);u.Zi=u.Zi.insert(p,w)}}}(r.localStore,s))}async function w$(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());const r=await nR(n.localStore,e);n.currentUser=e,function(s,o){s.ya.forEach(a=>{a.forEach(l=>{l.reject(new G(k.CANCELLED,o))})}),s.ya.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Fl(n,r.rs)}}function x$(t,e){const n=fe(t),r=n.fa.get(e);if(r&&r.Ea)return me().add(r.key);{let i=me();const s=n.Ra.get(e);if(!s)return i;for(const o of s){const a=n.Aa.get(o);i=i.unionWith(a.view.oa)}return i}}function E$(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=x$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=g$.bind(null,e),e.da.s_=o$.bind(null,e.eventManager),e.da.Da=a$.bind(null,e.eventManager),e}function S$(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=y$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v$.bind(null,e),e}class Aw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=lh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return P3(this.persistence,new b3,e.initialUser,this.serializer)}createPersistence(e){return new A3(Ky.Hr,this.serializer)}createSharedClientState(e){return new $3}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class T${async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Iw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=w$.bind(null,this.syncEngine),await r$(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new s$}()}createDatastore(e){const n=lh(e.databaseInfo.databaseId),r=function(s){return new B3(s)}(e.databaseInfo);return function(s,o,a,l){return new H3(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new K3(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Iw(this.syncEngine,n,0),function(){return Ew.v()?new Ew:new V3}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const f=new d$(i,s,o,a,l,c);return u&&(f.Sa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=fe(n);Z("RemoteStore","RemoteStore shutting down."),r.S_.add(5),await Vl(r),r.D_.shutdown(),r.v_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Fa(this.observer.next,e)}error(e){this.observer.error?this.Fa(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString())}Ma(){this.muted=!0}Fa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=It.UNAUTHENTICATED,this.clientId=EI.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Z("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Z("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new G(k.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Zy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Vf(t,e){t.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await nR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Cw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await A$(t);Z("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>Sw(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>Sw(e.remoteStore,s)),t._onlineComponents=e}function R$(t){return t.name==="FirebaseError"?t.code===k.FAILED_PRECONDITION||t.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function A$(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{await Vf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!R$(n))throw n;oo("Error using user provided cache. Falling back to memory cache: "+n),await Vf(t,new Aw)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),await Vf(t,new Aw);return t._offlineComponents}async function SR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),await Cw(t,t._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),await Cw(t,new T$))),t._onlineComponents}function C$(t){return SR(t).then(e=>e.syncEngine)}async function TR(t){const e=await SR(t),n=e.eventManager;return n.onListen=h$.bind(null,e.syncEngine),n.onUnlisten=p$.bind(null,e.syncEngine),n}function b$(t,e,n={}){const r=new hr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new ER({next:p=>{o.enqueueAndForget(()=>pR(s,f));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new G(k.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new G(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new mR(Fy(a.path),u,{includeMetadataChanges:!0,z_:!0});return fR(s,f)}(await TR(t),t.asyncQueue,e,n,r)),r.promise}function k$(t,e,n={}){const r=new hr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new ER({next:p=>{o.enqueueAndForget(()=>pR(s,f)),p.fromCache&&l.source==="server"?c.reject(new G(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new mR(a,u,{includeMetadataChanges:!0,z_:!0});return fR(s,f)}(await TR(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(t,e,n){if(!n)throw new G(k.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function P$(t,e,n,r){if(e===!0&&r===!0)throw new G(k.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function kw(t){if(!ne.isDocumentKey(t))throw new G(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Pw(t){if(ne.isDocumentKey(t))throw new G(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function ui(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dh(t);throw new G(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}P$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new G(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new G(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new G(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new G(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new G(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new JD;switch(r.type){case"firstParty":return new nM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=bw.get(n);r&&(Z("ComponentProvider","Removing Datastore"),bw.delete(n),r.terminate())}(this),Promise.resolve()}}function N$(t,e,n,r={}){var i;const s=(t=ui(t,hh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=It.MOCK_USER;else{a=vS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new G(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new It(c)}t._authCredentials=new ZD(new xI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ko(this.firestore,e,this._query)}}class Gt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ti(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}}class ti extends ko{constructor(e,n,r){super(e,n,Fy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new ne(e))}withConverter(e){return new ti(this.firestore,e,this._path)}}function Ai(t,e,...n){if(t=it(t),RR("collection","path",e),t instanceof hh){const r=ke.fromString(e,...n);return Pw(r),new ti(t,null,r)}{if(!(t instanceof Gt||t instanceof ti))throw new G(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ke.fromString(e,...n));return Pw(r),new ti(t.firestore,null,r)}}function fo(t,e,...n){if(t=it(t),arguments.length===1&&(e=EI.V()),RR("doc","path",e),t instanceof hh){const r=ke.fromString(e,...n);return kw(r),new Gt(t,null,new ne(r))}{if(!(t instanceof Gt||t instanceof ti))throw new G(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ke.fromString(e,...n));return kw(r),new Gt(t.firestore,t instanceof ti?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(){this.za=Promise.resolve(),this.ja=[],this.Ha=!1,this.Ja=[],this.Ya=null,this.Za=!1,this.Xa=!1,this.eu=[],this.Uo=new iR(this,"async_queue_retry"),this.tu=()=>{const n=$f();n&&Z("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Uo.Lo()};const e=$f();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.tu)}get isShuttingDown(){return this.Ha}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nu(),this.ru(e)}enterRestrictedMode(e){if(!this.Ha){this.Ha=!0,this.Xa=e||!1;const n=$f();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.tu)}}enqueue(e){if(this.nu(),this.Ha)return new Promise(()=>{});const n=new hr;return this.ru(()=>this.Ha&&this.Xa?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ja.push(e),this.iu()))}async iu(){if(this.ja.length!==0){try{await this.ja[0](),this.ja.shift(),this.Uo.reset()}catch(e){if(!Ll(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.ja.length>0&&this.Uo.No(()=>this.iu())}}ru(e){const n=this.za.then(()=>(this.Za=!0,e().catch(r=>{this.Ya=r,this.Za=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw wr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Za=!1,r))));return this.za=n,n}enqueueAfterDelay(e,n,r){this.nu(),this.eu.indexOf(e)>-1&&(n=0);const i=Jy.createAndSchedule(this,e,n,r,s=>this.su(s));return this.Ja.push(i),i}nu(){this.Ya&&oe()}verifyOperationInProgress(){}async ou(){let e;do e=this.za,await e;while(e!==this.za)}_u(e){for(const n of this.Ja)if(n.timerId===e)return!0;return!1}au(e){return this.ou().then(()=>{this.Ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ou()})}uu(e){this.eu.push(e)}su(e){const n=this.Ja.indexOf(e);this.Ja.splice(n,1)}}class Ul extends hh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new O$}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||AR(this),this._firestoreClient.terminate()}}function j$(t,e){const n=typeof t=="object"?t:Qg(),r=typeof t=="string"?t:e||"(default)",i=jd(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=mS("firestore");s&&N$(i,...s)}return i}function nv(t){return t._firestoreClient||AR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function AR(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new pM(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,IR(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new I$(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this._byteString=e}static fromBase64String(e){try{return new po(jt.fromBase64String(e))}catch(n){throw new G(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new po(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L$=/^__.*__$/;class D${constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new us(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ml(e,this.data,n,this.fieldTransforms)}}function CR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class ov{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.cu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get lu(){return this.settings.lu}hu(e){return new ov(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.hu({path:r,Iu:!1});return i.Tu(e),i}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.hu({path:r,Iu:!1});return i.cu(),i}du(e){return this.hu({path:void 0,Iu:!0})}Au(e){return Qu(e,this.settings.methodName,this.settings.Ru||!1,this.path,this.settings.Vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}cu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Tu(this.path.get(e))}Tu(e){if(e.length===0)throw this.Au("Document fields must not be empty");if(CR(this.lu)&&L$.test(e))throw this.Au('Document fields cannot begin and end with "__"')}}class M${constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||lh(e)}mu(e,n,r,i=!1){return new ov({lu:e,methodName:n,Vu:r,path:Ct.emptyPath(),Iu:!1,Ru:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bR(t){const e=t._freezeSettings(),n=lh(t._databaseId);return new M$(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $$(t,e,n,r,i,s={}){const o=t.mu(s.merge||s.mergeFields?2:0,e,n,i);NR("Data must be an object, but it was:",o,r);const a=kR(r,o);let l,c;if(s.merge)l=new An(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const f of s.mergeFields){const p=F$(e,f,n);if(!o.contains(p))throw new G(k.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);B$(u,p)||u.push(p)}l=new An(u),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new D$(new fn(a),l,c)}class av extends iv{_toFieldTransform(e){return new $M(e.path,new rl)}isEqual(e){return e instanceof av}}function V$(t,e,n,r=!1){return lv(n,t.mu(r?4:3,e))}function lv(t,e){if(PR(t=it(t)))return NR("Unsupported field value:",e,t),kR(t,e);if(t instanceof iv)return function(r,i){if(!CR(i.lu))throw i.Au(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Au(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Iu&&e.lu!==4)throw e.Au("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=lv(a,i.du(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=it(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return LM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ze.fromDate(r);return{timestampValue:Ku(i.serializer,s)}}if(r instanceof Ze){const s=new Ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ku(i.serializer,s)}}if(r instanceof sv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof po)return{bytesValue:YI(i.serializer,r._byteString)};if(r instanceof Gt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Au(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Hy(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Au(`Unsupported field value: ${dh(r)}`)}(t,e)}function kR(t,e){const n={};return SI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ao(t,(r,i)=>{const s=lv(i,e.Pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function PR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ze||t instanceof sv||t instanceof po||t instanceof Gt||t instanceof iv)}function NR(t,e,n){if(!PR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=dh(n);throw r==="an object"?e.Au(t+" a custom object"):e.Au(t+" "+r)}}function F$(t,e,n){if((e=it(e))instanceof rv)return e._internalPath;if(typeof e=="string")return OR(t,e);throw Qu("Field path arguments must be of type string or ",t,!1,void 0,n)}const U$=new RegExp("[~\\*/\\[\\]]");function OR(t,e,n){if(e.search(U$)>=0)throw Qu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rv(...e.split("."))._internalPath}catch{throw Qu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Qu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new G(k.INVALID_ARGUMENT,a+t+l)}function B$(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new z$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(cv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class z$ extends jR{data(){return super.data()}}function cv(t,e){return typeof e=="string"?OR(t,e):e instanceof rv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W$(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uv{}class H$ extends uv{}function Os(t,e,...n){let r=[];e instanceof uv&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof dv).length,a=s.filter(l=>l instanceof fh).length;if(o>1||o>0&&a>0)throw new G(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class fh extends H${constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new fh(e,n,r)}_apply(e){const n=this._parse(e);return LR(e._query,n),new ko(e.firestore,e.converter,Rm(e._query,n))}_parse(e){const n=bR(e.firestore);return function(s,o,a,l,c,u,f){let p;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new G(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){jw(f,u);const m=[];for(const v of f)m.push(Ow(l,s,v));p={arrayValue:{values:m}}}else p=Ow(l,s,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||jw(f,u),p=V$(a,o,f,u==="in"||u==="not-in");return Xe.create(c,u,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function js(t,e,n){const r=e,i=cv("where",t);return fh._create(i,r,n)}class dv extends uv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new dv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:On.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)LR(o,l),o=Rm(o,l)}(e._query,n),new ko(e.firestore,e.converter,Rm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Ow(t,e,n){if(typeof(n=it(n))=="string"){if(n==="")throw new G(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OI(e)&&n.indexOf("/")!==-1)throw new G(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ke.fromString(n));if(!ne.isDocumentKey(r))throw new G(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return rw(t,new ne(r))}if(n instanceof Gt)return rw(t,n._key);throw new G(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dh(n)}.`)}function jw(t,e){if(!Array.isArray(t)||t.length===0)throw new G(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LR(t,e){if(e.isInequality()){const r=Uy(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new G(k.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=NI(t);s!==null&&q$(t,i,s)}const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function q$(t,e,n){if(!n.isEqual(e))throw new G(k.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class K${convertValue(e,n="none"){switch(Zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ao(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new sv(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Dy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(el(e));default:return null}}convertTimestamp(e){const n=li(e);return new Ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ke.fromString(e);Ne(tR(r));const i=new tl(r.get(1),r.get(3)),s=new ne(r.popFirst(5));return i.isEqual(n)||wr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G$(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DR extends jR{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(cv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Yc extends DR{data(e={}){return super.data(e)}}class Q${constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Zo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Yc(this._firestore,this._userDataWriter,r.key,r,new Zo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Yc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Yc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:Y$(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Y$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(t){t=ui(t,Gt);const e=ui(t.firestore,Ul);return b$(nv(e),t._key).then(n=>J$(e,t,n))}class $R extends K${constructor(e){super(),this.firestore=e}convertBytes(e){return new po(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,n)}}function Ls(t){t=ui(t,ko);const e=ui(t.firestore,Ul),n=nv(e),r=new $R(e);return W$(t._query),k$(n,t._query).then(i=>new Q$(e,r,t,i))}function X$(t,e,n){t=ui(t,Gt);const r=ui(t.firestore,Ul),i=G$(t.converter,e,n);return VR(r,[$$(bR(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Jn.none())])}function Lm(t){return VR(ui(t.firestore,Ul),[new By(t._key,Jn.none())])}function VR(t,e){return function(r,i){const s=new hr;return r.asyncQueue.enqueueAndForget(async()=>m$(await C$(r),i,s)),s.promise}(nv(t),e)}function J$(t,e,n){const r=n.docs.get(e._key),i=new $R(t);return new DR(t,i,e._key,r,new Zo(n.hasPendingWrites,n.fromCache),e.converter)}function Z$(){return new av("serverTimestamp")}(function(e,n=!0){(function(i){Ro=i})(ls),Gi(new oi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ul(new eM(r.getProvider("auth-internal")),new iM(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new G(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tl(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Qn(J_,"4.1.2",e),Qn(J_,"4.1.2","esm2017")})();const eV={apiKey:"AIzaSyBPNpckpYiu009eSzHz_1YMlwHLtScgVjE",authDomain:"zingmp3-clone-61799.firebaseapp.com",projectId:"zingmp3-clone-61799",storageBucket:"zingmp3-clone-61799.appspot.com",messagingSenderId:"938280289868",appId:"1:938280289868:web:1b426fc2dba5d03dde96e9"},hv=xS(eV),pn=j$(hv),es=H4(hv);new Fn;const fv=$j(hv),tV=async({collection:t,id:e})=>{console.log("delete doc"),await Lm(fo(pn,t,e))},Yu=async({collection:t,id:e})=>(console.log("get doc"),MR(fo(pn,t,e))),yt=async({collection:t,id:e,data:n})=>(console.log("set doc"),X$(fo(pn,t,e),{...n},{merge:!0})),FR=async({file:t,folder:e,email:n})=>{console.log("upload file");const r=t.name.replaceAll(" ","").toLowerCase()+"_"+n.replace("@gmail.com",""),i=ny(fv,`${e+r}`),s=await FS(i,t);return{fileURL:await US(s.ref),filePath:s.metadata.fullPath}},nV=async({blob:t,folder:e,songId:n})=>{console.log("upload file");const r=n+"_stock",i=ny(fv,`${e+r}`),s=await FS(i,t);return{fileURL:await US(s.ref),filePath:s.metadata.fullPath}},Dm=async({filePath:t})=>{console.log("delete file");const e=ny(fv,t);await Mj(e)},ph=async t=>{await Lm(fo(pn,"songs",t.id)),await Dm({filePath:t.song_file_path}),t.lyric_id&&await Lm(fo(pn,"lyrics",t.lyric_id)),t.image_file_path&&await Dm({filePath:t.image_file_path})},pv=async(t,e)=>{const n=t.map(r=>r.id);await yt({collection:"users",data:{playlist_ids:n},id:e.email})},UR=async({songIds:t,userInfo:e})=>{await yt({collection:"users",data:{song_ids:t,song_count:t.length},id:e.email})};function Rn(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function di(t){return!!t&&!!t[je]}function Sr(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===dV}(t)||Array.isArray(t)||!!t[Uw]||!!(!((e=t.constructor)===null||e===void 0)&&e[Uw])||mv(t)||gv(t))}function ts(t,e,n){n===void 0&&(n=!1),Po(t)===0?(n?Object.keys:Qs)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,i){return e(i,r,t)})}function Po(t){var e=t[je];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:mv(t)?2:gv(t)?3:0}function Gs(t,e){return Po(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function rV(t,e){return Po(t)===2?t.get(e):t[e]}function BR(t,e,n){var r=Po(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function zR(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function mv(t){return cV&&t instanceof Map}function gv(t){return uV&&t instanceof Set}function Ri(t){return t.o||t.t}function yv(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=HR(t);delete e[je];for(var n=Qs(e),r=0;r<n.length;r++){var i=n[r],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function vv(t,e){return e===void 0&&(e=!1),_v(t)||di(t)||!Sr(t)||(Po(t)>1&&(t.set=t.add=t.clear=t.delete=iV),Object.freeze(t),e&&ts(t,function(n,r){return vv(r,!0)},!0)),t}function iV(){Rn(2)}function _v(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function er(t){var e=Fm[t];return e||Rn(18,t),e}function sV(t,e){Fm[t]||(Fm[t]=e)}function Mm(){return ol}function Ff(t,e){e&&(er("Patches"),t.u=[],t.s=[],t.v=e)}function Xu(t){$m(t),t.p.forEach(oV),t.p=null}function $m(t){t===ol&&(ol=t.l)}function Lw(t){return ol={p:[],l:ol,h:t,m:!0,_:0}}function oV(t){var e=t[je];e.i===0||e.i===1?e.j():e.g=!0}function Uf(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||er("ES5").S(e,t,r),r?(n[je].P&&(Xu(e),Rn(4)),Sr(t)&&(t=Ju(e,t),e.l||Zu(e,t)),e.u&&er("Patches").M(n[je].t,t,e.u,e.s)):t=Ju(e,n,[]),Xu(e),e.u&&e.v(e.u,e.s),t!==WR?t:void 0}function Ju(t,e,n){if(_v(e))return e;var r=e[je];if(!r)return ts(e,function(a,l){return Dw(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return Zu(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=yv(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),ts(s,function(a,l){return Dw(t,r,i,a,l,n,o)}),Zu(t,i,!1),n&&t.u&&er("Patches").N(r,n,t.u,t.s)}return r.o}function Dw(t,e,n,r,i,s,o){if(di(i)){var a=Ju(t,i,s&&e&&e.i!==3&&!Gs(e.R,r)?s.concat(r):void 0);if(BR(n,r,a),!di(a))return;t.m=!1}else o&&n.add(i);if(Sr(i)&&!_v(i)){if(!t.h.D&&t._<1)return;Ju(t,i),e&&e.A.l||Zu(t,i)}}function Zu(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&vv(e,n)}function Bf(t,e){var n=t[je];return(n?Ri(n):t)[e]}function Mw(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Mr(t){t.P||(t.P=!0,t.l&&Mr(t.l))}function zf(t){t.o||(t.o=yv(t.t))}function Vm(t,e,n){var r=mv(e)?er("MapSet").F(e,n):gv(e)?er("MapSet").T(e,n):t.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Mm(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,c=al;o&&(l=[a],c=ea);var u=Proxy.revocable(l,c),f=u.revoke,p=u.proxy;return a.k=p,a.j=f,p}(e,n):er("ES5").J(e,n);return(n?n.A:Mm()).p.push(r),r}function aV(t){return di(t)||Rn(22,t),function e(n){if(!Sr(n))return n;var r,i=n[je],s=Po(n);if(i){if(!i.P&&(i.i<4||!er("ES5").K(i)))return i.t;i.I=!0,r=$w(n,s),i.I=!1}else r=$w(n,s);return ts(r,function(o,a){i&&rV(i.t,o)===a||BR(r,o,e(a))}),s===3?new Set(r):r}(t)}function $w(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return yv(t)}function lV(){function t(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var l=this[je];return al.get(l,s)},set:function(l){var c=this[je];al.set(c,s,l)}},a}function e(s){for(var o=s.length-1;o>=0;o--){var a=s[o][je];if(!a.P)switch(a.i){case 5:r(a)&&Mr(a);break;case 4:n(a)&&Mr(a)}}}function n(s){for(var o=s.t,a=s.k,l=Qs(a),c=l.length-1;c>=0;c--){var u=l[c];if(u!==je){var f=o[u];if(f===void 0&&!Gs(o,u))return!0;var p=a[u],m=p&&p[je];if(m?m.t!==f:!zR(p,f))return!0}}var v=!!o[je];return l.length!==Qs(o).length+(v?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var i={};sV("ES5",{J:function(s,o){var a=Array.isArray(s),l=function(u,f){if(u){for(var p=Array(f.length),m=0;m<f.length;m++)Object.defineProperty(p,""+m,t(m,!0));return p}var v=HR(f);delete v[je];for(var w=Qs(v),E=0;E<w.length;E++){var y=w[E];v[y]=t(y,u||!!v[y].enumerable)}return Object.create(Object.getPrototypeOf(f),v)}(a,s),c={i:a?5:4,A:o?o.A:Mm(),P:!1,I:!1,R:{},l:o,t:s,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,je,{value:c,writable:!0}),l},S:function(s,o,a){a?di(o)&&o[je].A===s&&e(s.p):(s.u&&function l(c){if(c&&typeof c=="object"){var u=c[je];if(u){var f=u.t,p=u.k,m=u.R,v=u.i;if(v===4)ts(p,function(_){_!==je&&(f[_]!==void 0||Gs(f,_)?m[_]||l(p[_]):(m[_]=!0,Mr(u)))}),ts(f,function(_){p[_]!==void 0||Gs(p,_)||(m[_]=!1,Mr(u))});else if(v===5){if(r(u)&&(Mr(u),m.length=!0),p.length<f.length)for(var w=p.length;w<f.length;w++)m[w]=!1;else for(var E=f.length;E<p.length;E++)m[E]=!0;for(var y=Math.min(p.length,f.length),g=0;g<y;g++)p.hasOwnProperty(g)||(m[g]=!0),m[g]===void 0&&l(p[g])}}}}(s.p[0]),e(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Vw,ol,wv=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",cV=typeof Map<"u",uV=typeof Set<"u",Fw=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",WR=wv?Symbol.for("immer-nothing"):((Vw={})["immer-nothing"]=!0,Vw),Uw=wv?Symbol.for("immer-draftable"):"__$immer_draftable",je=wv?Symbol.for("immer-state"):"__$immer_state",dV=""+Object.prototype.constructor,Qs=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,HR=Object.getOwnPropertyDescriptors||function(t){var e={};return Qs(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},Fm={},al={get:function(t,e){if(e===je)return t;var n=Ri(t);if(!Gs(n,e))return function(i,s,o){var a,l=Mw(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(t,n,e);var r=n[e];return t.I||!Sr(r)?r:r===Bf(t.t,e)?(zf(t),t.o[e]=Vm(t.A.h,r,t)):r},has:function(t,e){return e in Ri(t)},ownKeys:function(t){return Reflect.ownKeys(Ri(t))},set:function(t,e,n){var r=Mw(Ri(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=Bf(Ri(t),e),s=i==null?void 0:i[je];if(s&&s.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(zR(n,i)&&(n!==void 0||Gs(t.t,e)))return!0;zf(t),Mr(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return Bf(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,zf(t),Mr(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Ri(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){Rn(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Rn(12)}},ea={};ts(al,function(t,e){ea[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),ea.deleteProperty=function(t,e){return ea.set.call(this,t,e,void 0)},ea.set=function(t,e,n){return al.set.call(this,t[0],e,n,t[0])};var hV=function(){function t(n){var r=this;this.O=Fw,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=r;return function(w){var E=this;w===void 0&&(w=a);for(var y=arguments.length,g=Array(y>1?y-1:0),_=1;_<y;_++)g[_-1]=arguments[_];return l.produce(w,function(x){var S;return(S=s).call.apply(S,[E,x].concat(g))})}}var c;if(typeof s!="function"&&Rn(6),o!==void 0&&typeof o!="function"&&Rn(7),Sr(i)){var u=Lw(r),f=Vm(r,i,void 0),p=!0;try{c=s(f),p=!1}finally{p?Xu(u):$m(u)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(w){return Ff(u,o),Uf(w,u)},function(w){throw Xu(u),w}):(Ff(u,o),Uf(c,u))}if(!i||typeof i!="object"){if((c=s(i))===void 0&&(c=i),c===WR&&(c=void 0),r.D&&vv(c,!0),o){var m=[],v=[];er("Patches").M(i,c,m,v),o(m,v)}return c}Rn(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(c){for(var u=arguments.length,f=Array(u>1?u-1:0),p=1;p<u;p++)f[p-1]=arguments[p];return r.produceWithPatches(c,function(m){return i.apply(void 0,[m].concat(f))})};var o,a,l=r.produce(i,s,function(c,u){o=c,a=u});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){Sr(n)||Rn(8),di(n)&&(n=aV(n));var r=Lw(this),i=Vm(this,n,void 0);return i[je].C=!0,$m(r),i},e.finishDraft=function(n,r){var i=n&&n[je],s=i.A;return Ff(s,r),Uf(void 0,s)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!Fw&&Rn(20),this.O=n},e.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=er("Patches").$;return di(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),rn=new hV,qR=rn.produce;rn.produceWithPatches.bind(rn);rn.setAutoFreeze.bind(rn);rn.setUseProxies.bind(rn);rn.applyPatches.bind(rn);rn.createDraft.bind(rn);rn.finishDraft.bind(rn);function ll(t){"@babel/helpers - typeof";return ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ll(t)}function fV(t,e){if(ll(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ll(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pV(t){var e=fV(t,"string");return ll(e)==="symbol"?e:String(e)}function mV(t,e,n){return e=pV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bw(Object(n),!0).forEach(function(r){mV(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bw(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Ww=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Wf=function(){return Math.random().toString(36).substring(7).split("").join(".")},ed={INIT:"@@redux/INIT"+Wf(),REPLACE:"@@redux/REPLACE"+Wf(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Wf()}};function gV(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function KR(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Tt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Tt(1));return n(KR)(t,e)}if(typeof t!="function")throw new Error(Tt(2));var i=t,s=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function u(){if(l)throw new Error(Tt(3));return s}function f(w){if(typeof w!="function")throw new Error(Tt(4));if(l)throw new Error(Tt(5));var E=!0;return c(),a.push(w),function(){if(E){if(l)throw new Error(Tt(6));E=!1,c();var g=a.indexOf(w);a.splice(g,1),o=null}}}function p(w){if(!gV(w))throw new Error(Tt(7));if(typeof w.type>"u")throw new Error(Tt(8));if(l)throw new Error(Tt(9));try{l=!0,s=i(s,w)}finally{l=!1}for(var E=o=a,y=0;y<E.length;y++){var g=E[y];g()}return w}function m(w){if(typeof w!="function")throw new Error(Tt(10));i=w,p({type:ed.REPLACE})}function v(){var w,E=f;return w={subscribe:function(g){if(typeof g!="object"||g===null)throw new Error(Tt(11));function _(){g.next&&g.next(u())}_();var x=E(_);return{unsubscribe:x}}},w[Ww]=function(){return this},w}return p({type:ed.INIT}),r={dispatch:p,subscribe:f,getState:u,replaceReducer:m},r[Ww]=v,r}function yV(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:ed.INIT});if(typeof r>"u")throw new Error(Tt(12));if(typeof n(void 0,{type:ed.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Tt(13))})}function vV(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];typeof t[i]=="function"&&(n[i]=t[i])}var s=Object.keys(n),o;try{yV(n)}catch(a){o=a}return function(l,c){if(l===void 0&&(l={}),o)throw o;for(var u=!1,f={},p=0;p<s.length;p++){var m=s[p],v=n[m],w=l[m],E=v(w,c);if(typeof E>"u")throw c&&c.type,new Error(Tt(14));f[m]=E,u=u||E!==w}return u=u||s.length!==Object.keys(l).length,u?f:l}}function td(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function _V(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Tt(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return s=td.apply(void 0,a)(i.dispatch),zw(zw({},i),{},{dispatch:s})}}}function GR(t){var e=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,t):o(a)}}};return e}var QR=GR();QR.withExtraArgument=GR;const Hw=QR;var YR=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wV=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},mo=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},xV=Object.defineProperty,EV=Object.defineProperties,SV=Object.getOwnPropertyDescriptors,qw=Object.getOwnPropertySymbols,TV=Object.prototype.hasOwnProperty,IV=Object.prototype.propertyIsEnumerable,Kw=function(t,e,n){return e in t?xV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},ni=function(t,e){for(var n in e||(e={}))TV.call(e,n)&&Kw(t,n,e[n]);if(qw)for(var r=0,i=qw(e);r<i.length;r++){var n=i[r];IV.call(e,n)&&Kw(t,n,e[n])}return t},Hf=function(t,e){return EV(t,SV(e))},RV=function(t,e,n){return new Promise(function(r,i){var s=function(l){try{a(n.next(l))}catch(c){i(c)}},o=function(l){try{a(n.throw(l))}catch(c){i(c)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(s,o)};a((n=n.apply(t,e)).next())})},AV=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?td:td.apply(null,arguments)};function CV(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var bV=function(t){YR(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,mo([void 0],n[0].concat(this)))):new(e.bind.apply(e,mo([void 0],n.concat(this))))},e}(Array),kV=function(t){YR(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,mo([void 0],n[0].concat(this)))):new(e.bind.apply(e,mo([void 0],n.concat(this))))},e}(Array);function Um(t){return Sr(t)?qR(t,function(){}):t}function PV(t){return typeof t=="boolean"}function NV(){return function(e){return OV(e)}}function OV(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new bV;return n&&(PV(n)?r.push(Hw):r.push(Hw.withExtraArgument(n.extraArgument))),r}var jV=!0;function LV(t){var e=NV(),n=t||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?e():s,a=n.devTools,l=a===void 0?!0:a,c=n.preloadedState,u=c===void 0?void 0:c,f=n.enhancers,p=f===void 0?void 0:f,m;if(typeof i=="function")m=i;else if(CV(i))m=vV(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var v=o;typeof v=="function"&&(v=v(e));var w=_V.apply(void 0,v),E=td;l&&(E=AV(ni({trace:!jV},typeof l=="object"&&l)));var y=new kV(w),g=y;Array.isArray(p)?g=mo([w],p):typeof p=="function"&&(g=p(y));var _=E.apply(void 0,g);return KR(m,u,_)}function ri(t,e){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e){var s=e.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return ni(ni({type:t,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function XR(t){var e={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return t(i),[e,n,r]}function DV(t){return typeof t=="function"}function MV(t,e,n,r){n===void 0&&(n=[]);var i=typeof e=="function"?XR(e):[e,n,r],s=i[0],o=i[1],a=i[2],l;if(DV(t))l=function(){return Um(t())};else{var c=Um(t);l=function(){return c}}function u(f,p){f===void 0&&(f=l());var m=mo([s[p.type]],o.filter(function(v){var w=v.matcher;return w(p)}).map(function(v){var w=v.reducer;return w}));return m.filter(function(v){return!!v}).length===0&&(m=[a]),m.reduce(function(v,w){if(w)if(di(v)){var E=v,y=w(E,p);return y===void 0?v:y}else{if(Sr(v))return qR(v,function(g){return w(g,p)});var y=w(v,p);if(y===void 0){if(v===null)return v;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return v},f)}return u.getInitialState=l,u}function $V(t,e){return t+"/"+e}function VV(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:Um(t.initialState),r=t.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(u){var f=r[u],p=$V(e,u),m,v;"reducer"in f?(m=f.reducer,v=f.prepare):m=f,s[u]=m,o[p]=m,a[u]=v?ri(p,v):ri(p)});function l(){var u=typeof t.extraReducers=="function"?XR(t.extraReducers):[t.extraReducers],f=u[0],p=f===void 0?{}:f,m=u[1],v=m===void 0?[]:m,w=u[2],E=w===void 0?void 0:w,y=ni(ni({},p),o);return MV(n,function(g){for(var _ in y)g.addCase(_,y[_]);for(var x=0,S=v;x<S.length;x++){var T=S[x];g.addMatcher(T.matcher,T.reducer)}E&&g.addDefaultCase(E)})}var c;return{name:e,reducer:function(u,f){return c||(c=l()),c(u,f)},actions:a,caseReducers:s,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var FV="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",UV=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=FV[Math.random()*64|0];return e},BV=["name","message","stack","code"],qf=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),Gw=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),zV=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=BV;n<r.length;n++){var i=r[n];typeof t[i]=="string"&&(e[i]=t[i])}return e}return{message:String(t)}};(function(){function t(e,n,r){var i=ri(e+"/fulfilled",function(c,u,f,p){return{payload:c,meta:Hf(ni({},p||{}),{arg:f,requestId:u,requestStatus:"fulfilled"})}}),s=ri(e+"/pending",function(c,u,f){return{payload:void 0,meta:Hf(ni({},f||{}),{arg:u,requestId:c,requestStatus:"pending"})}}),o=ri(e+"/rejected",function(c,u,f,p,m){return{payload:p,error:(r&&r.serializeError||zV)(c||"Rejected"),meta:Hf(ni({},m||{}),{arg:f,requestId:u,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(u,f,p){var m=r!=null&&r.idGenerator?r.idGenerator(c):UV(),v=new a,w;function E(g){w=g,v.abort()}var y=function(){return RV(this,null,function(){var g,_,x,S,T,R,I;return wV(this,function(C){switch(C.label){case 0:return C.trys.push([0,4,,5]),S=(g=r==null?void 0:r.condition)==null?void 0:g.call(r,c,{getState:f,extra:p}),HV(S)?[4,S]:[3,2];case 1:S=C.sent(),C.label=2;case 2:if(S===!1||v.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(A,b){return v.signal.addEventListener("abort",function(){return b({name:"AbortError",message:w||"Aborted"})})}),u(s(m,c,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:m,arg:c},{getState:f,extra:p}))),[4,Promise.race([T,Promise.resolve(n(c,{dispatch:u,getState:f,extra:p,requestId:m,signal:v.signal,abort:E,rejectWithValue:function(A,b){return new qf(A,b)},fulfillWithValue:function(A,b){return new Gw(A,b)}})).then(function(A){if(A instanceof qf)throw A;return A instanceof Gw?i(A.payload,m,c,A.meta):i(A,m,c)})])];case 3:return x=C.sent(),[3,5];case 4:return R=C.sent(),x=R instanceof qf?o(null,m,c,R.payload,R.meta):o(R,m,c),[3,5];case 5:return I=r&&!r.dispatchConditionRejection&&o.match(x)&&x.meta.condition,I||u(x),[2,x]}})})}();return Object.assign(y,{abort:E,requestId:m,arg:c,unwrap:function(){return y.then(WV)}})}}return Object.assign(l,{pending:s,rejected:o,fulfilled:i,typePrefix:e})}return t.withTypes=function(){return t},t})();function WV(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function HV(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var xv="listenerMiddleware";ri(xv+"/add");ri(xv+"/removeAll");ri(xv+"/remove");var Qw;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);lV();const qV={song:{id:"",name:"",singer:"",by:"",image_file_path:"",image_url:"",song_file_path:"",song_url:"",duration:0,lyric_id:"",currentIndex:0,song_in:"",in_playlist:[],blurhash_encode:""},playlist:{id:"",name:"",song_ids:[],time:0,count:0,by:"",image_by:"",image_file_path:"",image_url:"",blurhash_encode:""}},JR=VV({name:"song",initialState:qV,reducers:{setSong(t,e){t.song={...e.payload}},setPlaylist(t,e){t.playlist={...e.payload}}}}),_t=t=>t.song,{setSong:kn,setPlaylist:go}=JR.actions,KV=JR.reducer;var ZR={exports:{}},eA={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yo=h;function GV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var QV=typeof Object.is=="function"?Object.is:GV,YV=yo.useState,XV=yo.useEffect,JV=yo.useLayoutEffect,ZV=yo.useDebugValue;function e9(t,e){var n=e(),r=YV({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return JV(function(){i.value=n,i.getSnapshot=e,Kf(i)&&s({inst:i})},[t,n,e]),XV(function(){return Kf(i)&&s({inst:i}),t(function(){Kf(i)&&s({inst:i})})},[t]),ZV(n),n}function Kf(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!QV(t,n)}catch{return!0}}function t9(t,e){return e()}var n9=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t9:e9;eA.useSyncExternalStore=yo.useSyncExternalStore!==void 0?yo.useSyncExternalStore:n9;ZR.exports=eA;var r9=ZR.exports,tA={exports:{}},nA={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mh=h,i9=r9;function s9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var o9=typeof Object.is=="function"?Object.is:s9,a9=i9.useSyncExternalStore,l9=mh.useRef,c9=mh.useEffect,u9=mh.useMemo,d9=mh.useDebugValue;nA.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=l9(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=u9(function(){function l(m){if(!c){if(c=!0,u=m,m=r(m),i!==void 0&&o.hasValue){var v=o.value;if(i(v,m))return f=v}return f=m}if(v=f,o9(u,m))return v;var w=r(m);return i!==void 0&&i(v,w)?v:(u=m,f=w)}var c=!1,u,f,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,i]);var a=a9(t,s[0],s[1]);return c9(function(){o.hasValue=!0,o.value=a},[a]),d9(a),a};tA.exports=nA;var h9=tA.exports;function f9(t){t()}let rA=f9;const p9=t=>rA=t,m9=()=>rA,Yw=Symbol.for("react-redux-context"),Xw=typeof globalThis<"u"?globalThis:{};function g9(){var t;if(!h.createContext)return{};const e=(t=Xw[Yw])!=null?t:Xw[Yw]=new Map;let n=e.get(h.createContext);return n||(n=h.createContext(null),e.set(h.createContext,n)),n}const hi=g9();function Ev(t=hi){return function(){return h.useContext(t)}}const iA=Ev(),y9=()=>{throw new Error("uSES not initialized!")};let sA=y9;const v9=t=>{sA=t},_9=(t,e)=>t===e;function w9(t=hi){const e=t===hi?iA:Ev(t);return function(r,i={}){const{equalityFn:s=_9,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:l,subscription:c,getServerState:u,stabilityCheck:f,noopCheck:p}=e();h.useRef(!0);const m=h.useCallback({[r.name](w){return r(w)}}[r.name],[r,f,o]),v=sA(c.addNestedSub,l.getState,u||l.getState,m,s);return h.useDebugValue(v),v}}const wt=w9();var oA={exports:{}},Se={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dt=typeof Symbol=="function"&&Symbol.for,Sv=dt?Symbol.for("react.element"):60103,Tv=dt?Symbol.for("react.portal"):60106,gh=dt?Symbol.for("react.fragment"):60107,yh=dt?Symbol.for("react.strict_mode"):60108,vh=dt?Symbol.for("react.profiler"):60114,_h=dt?Symbol.for("react.provider"):60109,wh=dt?Symbol.for("react.context"):60110,Iv=dt?Symbol.for("react.async_mode"):60111,xh=dt?Symbol.for("react.concurrent_mode"):60111,Eh=dt?Symbol.for("react.forward_ref"):60112,Sh=dt?Symbol.for("react.suspense"):60113,x9=dt?Symbol.for("react.suspense_list"):60120,Th=dt?Symbol.for("react.memo"):60115,Ih=dt?Symbol.for("react.lazy"):60116,E9=dt?Symbol.for("react.block"):60121,S9=dt?Symbol.for("react.fundamental"):60117,T9=dt?Symbol.for("react.responder"):60118,I9=dt?Symbol.for("react.scope"):60119;function cn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Sv:switch(t=t.type,t){case Iv:case xh:case gh:case vh:case yh:case Sh:return t;default:switch(t=t&&t.$$typeof,t){case wh:case Eh:case Ih:case Th:case _h:return t;default:return e}}case Tv:return e}}}function aA(t){return cn(t)===xh}Se.AsyncMode=Iv;Se.ConcurrentMode=xh;Se.ContextConsumer=wh;Se.ContextProvider=_h;Se.Element=Sv;Se.ForwardRef=Eh;Se.Fragment=gh;Se.Lazy=Ih;Se.Memo=Th;Se.Portal=Tv;Se.Profiler=vh;Se.StrictMode=yh;Se.Suspense=Sh;Se.isAsyncMode=function(t){return aA(t)||cn(t)===Iv};Se.isConcurrentMode=aA;Se.isContextConsumer=function(t){return cn(t)===wh};Se.isContextProvider=function(t){return cn(t)===_h};Se.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Sv};Se.isForwardRef=function(t){return cn(t)===Eh};Se.isFragment=function(t){return cn(t)===gh};Se.isLazy=function(t){return cn(t)===Ih};Se.isMemo=function(t){return cn(t)===Th};Se.isPortal=function(t){return cn(t)===Tv};Se.isProfiler=function(t){return cn(t)===vh};Se.isStrictMode=function(t){return cn(t)===yh};Se.isSuspense=function(t){return cn(t)===Sh};Se.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===gh||t===xh||t===vh||t===yh||t===Sh||t===x9||typeof t=="object"&&t!==null&&(t.$$typeof===Ih||t.$$typeof===Th||t.$$typeof===_h||t.$$typeof===wh||t.$$typeof===Eh||t.$$typeof===S9||t.$$typeof===T9||t.$$typeof===I9||t.$$typeof===E9)};Se.typeOf=cn;oA.exports=Se;var R9=oA.exports,lA=R9,A9={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},C9={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},cA={};cA[lA.ForwardRef]=A9;cA[lA.Memo]=C9;var Te={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rv=Symbol.for("react.element"),Av=Symbol.for("react.portal"),Rh=Symbol.for("react.fragment"),Ah=Symbol.for("react.strict_mode"),Ch=Symbol.for("react.profiler"),bh=Symbol.for("react.provider"),kh=Symbol.for("react.context"),b9=Symbol.for("react.server_context"),Ph=Symbol.for("react.forward_ref"),Nh=Symbol.for("react.suspense"),Oh=Symbol.for("react.suspense_list"),jh=Symbol.for("react.memo"),Lh=Symbol.for("react.lazy"),k9=Symbol.for("react.offscreen"),uA;uA=Symbol.for("react.module.reference");function wn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Rv:switch(t=t.type,t){case Rh:case Ch:case Ah:case Nh:case Oh:return t;default:switch(t=t&&t.$$typeof,t){case b9:case kh:case Ph:case Lh:case jh:case bh:return t;default:return e}}case Av:return e}}}Te.ContextConsumer=kh;Te.ContextProvider=bh;Te.Element=Rv;Te.ForwardRef=Ph;Te.Fragment=Rh;Te.Lazy=Lh;Te.Memo=jh;Te.Portal=Av;Te.Profiler=Ch;Te.StrictMode=Ah;Te.Suspense=Nh;Te.SuspenseList=Oh;Te.isAsyncMode=function(){return!1};Te.isConcurrentMode=function(){return!1};Te.isContextConsumer=function(t){return wn(t)===kh};Te.isContextProvider=function(t){return wn(t)===bh};Te.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Rv};Te.isForwardRef=function(t){return wn(t)===Ph};Te.isFragment=function(t){return wn(t)===Rh};Te.isLazy=function(t){return wn(t)===Lh};Te.isMemo=function(t){return wn(t)===jh};Te.isPortal=function(t){return wn(t)===Av};Te.isProfiler=function(t){return wn(t)===Ch};Te.isStrictMode=function(t){return wn(t)===Ah};Te.isSuspense=function(t){return wn(t)===Nh};Te.isSuspenseList=function(t){return wn(t)===Oh};Te.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Rh||t===Ch||t===Ah||t===Nh||t===Oh||t===k9||typeof t=="object"&&t!==null&&(t.$$typeof===Lh||t.$$typeof===jh||t.$$typeof===bh||t.$$typeof===kh||t.$$typeof===Ph||t.$$typeof===uA||t.getModuleId!==void 0)};Te.typeOf=wn;function P9(){const t=m9();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=e;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:e=s,function(){!i||e===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}const Jw={notify(){},get:()=>[]};function N9(t,e){let n,r=Jw;function i(f){return l(),r.subscribe(f)}function s(){r.notify()}function o(){u.onStateChange&&u.onStateChange()}function a(){return!!n}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=P9())}function c(){n&&(n(),n=void 0,r.clear(),r=Jw)}const u={addNestedSub:i,notifyNestedSubs:s,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:c,getListeners:()=>r};return u}const O9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",j9=O9?h.useLayoutEffect:h.useEffect;function L9({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",noopCheck:s="once"}){const o=h.useMemo(()=>{const c=N9(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:s}},[t,r,i,s]),a=h.useMemo(()=>t.getState(),[t]);j9(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||hi;return h.createElement(l.Provider,{value:o},n)}function dA(t=hi){const e=t===hi?iA:Ev(t);return function(){const{store:r}=e();return r}}const D9=dA();function M9(t=hi){const e=t===hi?D9:dA(t);return function(){return e().dispatch}}const jn=M9();v9(h9.useSyncExternalStoreWithSelector);p9(gl.unstable_batchedUpdates);const $9={actuallySongs:[]},V9={state:$9,setActuallySongs:()=>{}},hA=h.createContext(V9),F9=({children:t})=>{const{adminSongs:e,userSongs:n,initial:r}=ln(),{song:i}=wt(_t),[s,o]=h.useState([]),[a,l]=h.useState([]);return h.useEffect(()=>{if(r&&i.name){if(i.song_in.includes("playlist")){console.log("set actually songs"),l(s);return}i.song_in==="admin"?l(e):l(n),console.log("set actually songs")}},[i.song_in,r,s,n.length]),d.jsx(hA.Provider,{value:{state:{actuallySongs:a},setActuallySongs:o},children:t})},Bl=()=>{const{setActuallySongs:t,state:{actuallySongs:e}}=h.useContext(hA);return{actuallySongs:e,setActuallySongs:t}},Cv={userInfo:{status:"loading",display_name:"",playlist_ids:[],role:"user",song_count:0,song_ids:[],email:"",photoURL:"",latest_seen:new Ze(0,0)}},U9=(t,e)=>{switch(e.type){case 0:return console.log("dispatch set user info"),{userInfo:{...t.userInfo,...e.payload.userInfo}};default:return console.log("default case"),{userInfo:t.userInfo}}},B9=()=>{const[t,e]=h.useReducer(U9,Cv),n=h.useCallback(r=>{e({type:0,payload:{userInfo:r}})},[]);return{userInfo:t.userInfo,setUserInfo:n}},z9={userInfo:Cv.userInfo,setUserInfo:()=>{}},fA=h.createContext(z9),W9=({children:t})=>{const{userInfo:e,setUserInfo:n}=B9();return d.jsx(fA.Provider,{value:{userInfo:e,setUserInfo:n},children:t})},xn=()=>{const{userInfo:t,setUserInfo:e}=h.useContext(fA);return{userInfo:t,setUserInfo:e}};let cl=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");const H9={toasts:[]},q9={state:H9,setToasts:()=>{},setErrorToast:()=>{},setSuccessToast:()=>{}},pA=h.createContext(q9),K9=({children:t})=>{const[e,n]=h.useState([]),r=({message:s="Somethings went wrong"})=>n(o=>[...o,{title:"error",id:cl(4),desc:s}]),i=({message:s="Success"})=>n(o=>[...o,{title:"success",id:cl(4),desc:`${s}`}]);return d.jsx(pA.Provider,{value:{state:{toasts:e},setToasts:n,setErrorToast:r,setSuccessToast:i},children:t})},Ln=()=>{const{state:{toasts:t},setToasts:e,setErrorToast:n,setSuccessToast:r}=h.useContext(pA);return{toasts:t,setToasts:e,setErrorToast:n,setSuccessToast:r}};function mA({bgRef:t,songInStore:e}){h.useEffect(()=>{if(e.image_url){const n=t.current;n&&(n.style.backgroundImage=`url(${e.image_url})`)}},[e])}function gA({songInStore:t,audioEle:e}){const[n,r]=h.useState({base:"",real_time:[]}),i=async()=>{const s=(await Yu({collection:"lyrics",id:t.lyric_id})).data();s&&r(s)};return h.useEffect(()=>{if(t.lyric_id)return e&&e.addEventListener("loadeddata",i),()=>{console.log("use get lyric clean up"),e&&e.removeEventListener("loadeddata",i),r({base:"",real_time:[]})}},[t]),n}const Bm=(t,e)=>{const[n,r]=h.useState(JSON.parse(localStorage.getItem(t)||JSON.stringify(e)));return h.useEffect(()=>{localStorage.setItem(t,JSON.stringify(n))},[n]),[n,r]};function Dh(){const{setErrorToast:t}=Ln(),{userInfo:e,setUserInfo:n}=xn(),{initial:r,adminSongs:i,initSongsContext:s,userSongs:o}=ln(),[a,l]=h.useState(""),[c,u]=h.useState(!(i.length||o.length)),f=Ai(pn,"songs"),p=Ai(pn,"playlist"),m=_=>{u(!1),l(_),t({message:"Use song error"})},v=async()=>{try{const _=Os(Ai(pn,"songs"),js("by","==","admin")),x=Os(Ai(pn,"playlists"),js("by","==","admin")),S=await Ls(_),T=await Ls(x),R={adminSongs:[],adminPlaylists:[]};if(S.docs||T.docs){const I=S.docs.map(A=>A.data()),C=T.docs.map(A=>A.data());return R.adminPlaylists=C||[],R.adminSongs=I||[],R}}catch(_){console.log({message:_}),m("GetAdminSongsAndPlaylists error")}},w=async()=>{if(!e)return;const _=Ai(pn,"users"),x=fo(_,e==null?void 0:e.email);try{const S=await MR(x);if(S.exists())return S.data()}catch(S){console.log(S),m("Get userData error")}},E=async()=>{var _;try{const x=Os(p,js("by","==",e==null?void 0:e.email)),S=await Ls(x);if(S.docs.length)return(_=S.docs)==null?void 0:_.map(T=>T.data())}catch(x){console.log("getUserPlaylists",x),m("Get users playlist error")}},y=async()=>{var _,x;try{const S=await w(),T={userSongs:[],userPlaylists:[]};if(!(S!=null&&S.song_ids))return;if((_=S==null?void 0:S.song_ids)!=null&&_.length){const R=Os(f,js("by","==",S==null?void 0:S.email)),I=await Ls(R);I.docs.length&&(T.userSongs=I.docs.map(C=>C.data()))}if((x=S==null?void 0:S.playlist_ids)!=null&&x.length){const R=await E();R!=null&&R.length&&(T.userPlaylists=R)}return{userData:T,userInfo:S}}catch(S){console.log({message:S}),m("GetUserSongsAndPlaylists error")}},g=async()=>{console.log("run initial"),u(!0);let _;if(i.length||(console.log("get admin data"),_=await v()),!e.email){console.log("no logged in"),s({..._,userPlaylists:[],userSongs:[]}),u(!1);return}const x=await y();if(x){console.log("logged in");const{userInfo:S,userData:T}=x;s(_?{...T,..._}:{...T}),n({latest_seen:S.latest_seen,song_ids:S.song_ids,song_count:S.song_count,playlist_ids:S.playlist_ids,role:S.role})}u(!1)};return h.useEffect(()=>{if(e.status==="loading"){u(!0);return}if(r&&i.length&&e.email&&!o.length){g();return}if(!r&&!i.length){g();return}else{u(!1);return}},[e]),{initial:r,loading:c,errorMsg:a}}const bv=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop / Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast  Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Rock/Pop"];function Me(t,e,n=0,r){let i=e||t.byteLength-n;const s=typeof Buffer<"u";i<0&&(i+=t.byteLength);const o=[],a=n+i;for(let c=n;c<a;c++){const u=t.getUint8(c);if(u===0)break;o.push(u)}if(s)return Buffer.from(o).toString();const l=o.map(c=>String.fromCharCode(c)).join("");return r?l:decodeURIComponent(escape(l))}function ms(t,e,n=0,r){let i=!1,s=e||t.byteLength-n;const o=[],a=typeof Buffer<"u";if(s<0&&(s+=t.byteLength),n+1>t.byteLength)return"";r&&(t.getUint16(n)===65534&&(i=!0),n+=2,s-=2);const l=n+s;for(let c=n;c<l;c+=2){let u=t.getUint16(c,i);if(c<l-1&&u===0&&t.getUint16(c+1,i)===0)break;u>=0&&u<=55295||u>=57344&&u<=65535?o.push(u):u>=65536&&u<=1114111&&(u-=65536,o.push(((1047552&u)>>10)+55296),o.push((1023&u)+56320))}if(a){const c=Buffer.alloc(o.length*2);for(let u=0;u<o.length;u++){const f=o[u];i?c.writeUInt16LE(f,u*2):c.writeUInt16BE(f,u*2)}return c.toString()}return String.fromCharCode.apply(null,new Uint16Array(o))}function G9(t){let e=0,n=2130706432;for(;n;)e>>=1,e|=t&n,n>>=8;return e}function Xc(t,e=0){return G9(t.getUint32(e))}function yA(t,e=0,n){return n?t.getUint8(e)+(t.getUint8(e+1)<<8)+(t.getUint8(e+2)<<16):t.getUint8(e+2)+(t.getUint8(e+1)<<8)+(t.getUint8(e)<<16)}const vA=new Map([["TALB","album"],["TBPM","bpm"],["TCOM","composer"],["TCON","genre"],["TCOP","copyright"],["TDEN","encoding-time"],["TDLY","playlist-delay"],["TDOR","original-release-time"],["TDRC","recording-time"],["TDRL","release-time"],["TDTG","tagging-time"],["TENC","encoder"],["TEXT","writer"],["TFLT","file-type"],["TIPL","involved-people"],["TIT1","content-group"],["TIT2","title"],["TIT3","subtitle"],["TKEY","initial-key"],["TLAN","language"],["TLEN","length"],["TMCL","credits"],["TMED","media-type"],["TMOO","mood"],["TOAL","original-album"],["TOFN","original-filename"],["TOLY","original-writer"],["TOPE","original-artist"],["TOWN","owner"],["TPE1","artist"],["TPE2","band"],["TPE3","conductor"],["TPE4","remixer"],["TPOS","set-part"],["TPRO","produced-notice"],["TPUB","publisher"],["TRCK","track"],["TRSN","radio-name"],["TRSO","radio-owner"],["TSOA","album-sort"],["TSOP","performer-sort"],["TSOT","title-sort"],["TSRC","isrc"],["TSSE","encoder-settings"],["TSST","set-subtitle"],["TAL","album"],["TBP","bpm"],["TCM","composer"],["TCO","genre"],["TCR","copyright"],["TDY","playlist-delay"],["TEN","encoder"],["TFT","file-type"],["TKE","initial-key"],["TLA","language"],["TLE","length"],["TMT","media-type"],["TOA","original-artist"],["TOF","original-filename"],["TOL","original-writer"],["TOT","original-album"],["TP1","artist"],["TP2","band"],["TP3","conductor"],["TP4","remixer"],["TPA","set-part"],["TPB","publisher"],["TRC","isrc"],["TRK","track"],["TSS","encoder-settings"],["TT1","content-group"],["TT2","title"],["TT3","subtitle"],["TXT","writer"],["WCOM","url-commercial"],["WCOP","url-legal"],["WOAF","url-file"],["WOAR","url-artist"],["WOAS","url-source"],["WORS","url-radio"],["WPAY","url-payment"],["WPUB","url-publisher"],["WAF","url-file"],["WAR","url-artist"],["WAS","url-source"],["WCM","url-commercial"],["WCP","url-copyright"],["WPB","url-publisher"],["COMM","comments"],["APIC","image"],["PIC","image"],["PRIV","private"]]),_A=["other","file-icon","icon","cover-front","cover-back","leaflet","media","artist-lead","artist","conductor","band","composer","writer","location","during-recording","during-performance","screen","fish","illustration","logo-band","logo-publisher"];function Q9(t){const e={id:null,tag:null,value:null},n=new DataView(t),r={id:Me(n,3),type:Me(n,1),size:yA(n,3)},i=vA.get(r.id);if(!i)return null;if(e.id=r.id,e.tag=i,r.type==="T"){let s=Me(n,-7,7);r.id==="TCO"&&parseInt(s)&&(s=bv[parseInt(s)]),e.value=s}else if(r.type==="W")e.value=Me(n,-7,7);else if(r.id==="COM"){let s=Me(n,-10,10);s.indexOf("\0")!==-1&&(s=s.substr(s.indexOf("\0")+1)),e.value=s}else if(r.id==="PIC"){const s={type:null,mime:"image/"+Me(n,3,7).toLowerCase(),description:null,data:null};s.type=_A[n.getUint8(11)]||"other";const o=11;let a=0;for(let l=o;;l++)if(n.getUint8(l)===0){a=l-o;break}s.description=a===0?null:Me(n,a,o),s.data=t.slice(o+1),e.value=s}return e.tag?e:null}function Y9(t,e,n){e=e||4;const r={id:null,tag:null,value:null},i=new DataView(t);if(e<3)return Q9(t);const s={id:Me(i,4),type:Me(i,1),size:Xc(i,4),flags:[i.getUint8(8),i.getUint8(9)]};if(s.flags[1]!==0)return null;const o=vA.get(s.id);if(!o)return null;if(r.tag=o,r.id=s.id,s.type==="T"){const a=i.getUint8(10);let l=null;a===0||a===3?l=Me(i,-11,11):a===1?l=ms(i,-11,11,!0):a===2&&(l=ms(i,-11,11)),s.id==="TCON"&&l!==null&&parseInt(l)&&(l=bv[parseInt(l)]),r.value=l}else if(s.type==="W")r.value=Me(i,-10,10);else if(s.id==="PRIV"){let l=0;for(let c=0;;c++)if(i.getUint8(c)===0){l=c-10;break}r.value={identifier:l===0?null:Me(i,l,10),data:t.slice(l+10+1)}}else if(s.id==="COMM"){const a=i.getUint8(10);let l=14;for(let c=l;;c++)if(a===1||a===2){if(i.getUint16(c)===0){l=c+2;break}c++}else if(i.getUint8(c)===0){l=c+1;break}a===0||a===3?r.value=Me(i,-1*l,l):a===1?r.value=ms(i,-1*l,l,!0):a===2&&(r.value=ms(i,-1*l,l))}else if(s.id==="APIC"){const a=i.getUint8(10),l={type:null,mime:null,description:null,data:null};let c=11,u=0;for(let f=c;;f++)if(i.getUint8(f)===0){u=f-c;break}l.mime=Me(i,u,c),l.type=_A[i.getUint8(c+u+1)]||"other",c+=u+2,u=0;for(let f=c;;f++)if(i.getUint8(f)===0){u=f-c;break}u!==0&&(a===0||a===3?l.description=Me(i,u,c):a===1?l.description=ms(i,u,c,!0):a===2&&(l.description=ms(i,u,c))),l.data=t.slice(c+1),r.value=l}return r.tag?r:null}async function X9(t){let e=null;const n=await t.read(128,t.size-128),r=new DataView(n);n.byteLength===128&&Me(r,3,void 0,!0)==="TAG"&&(e={kind:"v1",title:Me(r,30,3).trim()||null,album:Me(r,30,63).trim()||null,artist:Me(r,30,33).trim()||null,year:Me(r,4,93).trim()||null,genre:null,comment:null,track:null},r.getUint8(125)===0?(e.comment=Me(r,28,97),e.version=1.1,e.track=r.getUint8(126)):e.comment=Me(r,30,97),e.genre=bv[r.getUint8(127)]||null);const i=await t.read(14,0),s=new DataView(i);if(i.byteLength===14&&Me(s,3,void 0,!0)==="ID3"&&s.getUint8(3)<=4){let o=10,a=0;const l=[s.getUint8(3),s.getUint8(4)],c=s.getUint8(5);if(!(c&128)){e={kind:"v2",title:e?e.title:null,album:e?e.album:null,artist:e?e.artist:null,year:e?e.year:null,version:l,frames:[],images:[]},c&64&&(o+=Xc(s,11)),a+=Xc(s,6);const u=await t.read(a,o),f=new DataView(u);let p=0;for(;p<u.byteLength;){let m,v=!0;for(let E=0;E<3;E++){const y=f.getUint8(p+E);(y<65||y>90)&&(y<48||y>57)&&(v=!1)}if(!v)break;l[0]<3?m=u.slice(p,p+6+yA(f,p+3)):l[0]===3?m=u.slice(p,p+10+f.getUint32(p+4)):m=u.slice(p,p+10+Xc(f,p+4));const w=await Y9(m,l[0],l[1]);if(w&&w.tag){const E=e;E.frames.push(w),w.tag==="image"?E.images.push(w.value):e[w.tag]=w.value}p+=m.byteLength}}}return e}class J9{constructor(){this.size=0}async close(){}async readBlob(e,n=0,r="application/octet-stream"){const i=await this.read(e,n);return new Blob([i],{type:r})}}class Z9 extends J9{constructor(e){super(),this._file=e}async open(){this.size=this._file.size}async read(e,n){const r=this._file.slice(n,n+e);return new Promise((i,s)=>{const o=new FileReader;o.onload=()=>{i(o.result)},o.onerror=()=>{s(new Error("File read failed"))},o.readAsArrayBuffer(r)})}}const eF=typeof window<"u"&&"File"in window&&"FileReader"in window&&typeof ArrayBuffer<"u";async function tF(t){await t.open();const e=await X9(t);return await t.close(),e}function nF(t){if(!eF)throw new Error("Browser does not have support for the File API and/or ArrayBuffers");return tF(new Z9(t))}const rF=t=>new Date(t.toDate().getTime()).toLocaleString(),wA=t=>(n=>n.toLocaleLowerCase().replace(/||||||||||/g,"a").replace(/||||||||||/g,"e").replace(/||||/g,"i").replace(/||||||||||/g,"o").replace(/||||||||||/g,"u").replace(/||||/g,"y").replace(//g,"d"))(t).toLocaleLowerCase().replaceAll(/[\W_]/g,"")+"_"+cl(4),iF=async t=>{if(!t)return;const e=await nF(t);if(!e)return;const{title:n,artist:r,images:i}=e,s={name:"",singer:"",image:null};return(!n||!r)&&console.log("song don't have tags"),s.name=n||t.name,s.singer=r||"...",i.length&&(s.image=i[0].data),s},sF=async t=>{console.log("get blurHash encode");const e=await fetch("https://express-zingmp3.onrender.com/api/image/encode",{method:"post",body:t});let n;if(e.ok){const r=await e.json();r&&(n=r.encode)}return{encode:n}},nd=t=>{if(!t)return"";let e=0,n=+t.toFixed(0);for(;n>=60;)n-=60,e++;return e<10?n>=10?`0${e}:${n}`:`0${e}:0${n}`:n>=10?`${e}:${n}`:`${e}:0${n}`},Br=(t,e)=>{console.log("update songs list");const n=e.findIndex(r=>r.id===t.id);if(n!=-1)return e[n]=t,n},zl=(t,e)=>{console.log("update playlist value");const n=e.findIndex(r=>r.id===t.id);n!=-1&&(e[n]=t)},oF=t=>{let e=0,n=[];return t.forEach(r=>{e+=r.duration,n.push(r.id)}),{time:e,ids:n}},Gf=({newPlaylistSongs:t,existingPlaylist:e})=>{console.log("generate playlist");const{ids:n,time:r}=oF(t);return{...e,time:+r.toFixed(1),song_ids:n,count:n.length}},Zw=({song:t,playlist:e})=>(console.log("generate playlist"),{...e,time:+(e.time+t.duration).toFixed(1),song_ids:[...e.song_ids,t.id],count:e.count+1}),xA=({...t})=>({...{name:"",singer:"",image_url:"",song_url:"",by:"",duration:0,lyric_id:"",image_file_path:"",song_file_path:"",id:"",in_playlist:[],blurhash_encode:""},...t});function aF({firstTimeRender:t}){const e=jn(),{userInfo:n}=xn(),{setActuallySongs:r}=Bl(),{song:i,playlist:s}=wt(_t),{loading:o,errorMsg:a,initial:l}=Dh(),{adminSongs:c,userSongs:u,userPlaylists:f,setUserPlaylists:p}=ln(),[m,v]=h.useState(o),[w,E]=h.useState([]),y=h.useRef(!0),g=h.useRef(0),{setErrorToast:_}=Ln(),x=Pd(),S=_i(),T=h.useCallback(async()=>{if(!l||!x.id){S($e.Home);return}const C=f.find(A=>A.id===x.id);C&&(console.log("set playlist after init"),e(go(C)),v(!1))},[x,n]),R=h.useCallback(()=>{console.log("get playlist songs");let C=[],A;if(!s.song_ids.length){E([]);return}if(s.song_ids.some(F=>F.includes("admin")))A=[...c,...u];else switch(s.by){case"admin":A=c;break;default:A=u}if(s.song_ids.forEach(F=>{const N=A.find(Y=>F===Y.id);N&&C.push(N)}),s.song_ids.length!==C.length){console.log("get playlist song error"),_({});return}E(C),g.current||(g.current=C.length)},[s.song_ids,u]),I=h.useCallback(async C=>{try{await yt({collection:"playlist",id:s.id,data:{newPlaylist:C}})}catch{console.log("error when set playlist image"),_({})}},[]);return h.useEffect(()=>{if(console.log("useEffect 1",t.current),!t.current&&!(!l||a)){if(s.id===x.id){console.log("already have playlist"),v(!1);return}T()}},[l]),h.useEffect(()=>{t.current||!s.name||a||s.id===x.id&&R()},[s.song_ids]),h.useEffect(()=>{if(t.current||!l||!w.length)return;const C=w.find(F=>F.image_url);if(!C||s.image_url&&s.image_url===C.image_url)return;console.log("get playlist feature image");const A={...s,image_url:C.image_url,blurhash_encode:C.blurhash_encode||""};I(A);const b=[...f];zl(A,b),p(b,[]),e(go(A)),pv(b,n)},[w]),h.useEffect(()=>{if(t.current){t.current=!1;return}if(y.current){y.current=!1;return}!i.song_in.includes(s.name)||x.id===s.name&&g.current===w.length||(g.current=w.length,r(w))},[w]),{playlistSongs:w,loading:m}}function lF({containerRef:t,songItemRef:e,firstTimeRender:n,isOpenFullScreen:r}){const{song:i}=wt(_t);!scroll||!t||!e||h.useEffect(()=>{if(n.current){n.current=!1;return}if(i.name&&r)if(t&&e){const s=window.innerWidth,o=e.current,a=t.current,c=o.getBoundingClientRect().left,u=s-(c+o.offsetWidth),f=Math.abs(c-u)/2;(Math.abs(c)>s||Math.abs(u)>s)&&(a.style.scrollBehavior="auto"),u>c?setTimeout(()=>{a.scrollLeft=a.scrollLeft-f,a.style.scrollBehavior="smooth"},300):u<c&&setTimeout(()=>{a.scrollLeft=a.scrollLeft+f,a.style.scrollBehavior="smooth"},300)}else console.log("element undefined")},[i,r])}function cF({text:t,textWrapper:e,autoScroll:n}){const{song:r}=wt(_t),{setErrorToast:i}=Ln(),s=h.useRef(),o=h.useRef(),a=h.useRef(0),l=h.useRef(""),c=h.useRef(0),[u,f]=h.useState(!1),p=h.useCallback(()=>{if(!t){console.log("lack props");return}const w=t.current;w&&(w.style.transition="none",w.style.transform="translateX(0)",f(!1))},[t]),m=h.useCallback(()=>{if(!t){console.log("lack of prop");return}if(!a.current&&!c.current)return;const w=t.current;w&&(w.innerHTML=l.current+"&nbsp; &nbsp; &nbsp;"+l.current,f(!0),w.style.transition=`transform linear ${a.current}s`,w.style.transform=`translateX(-${c.current}px)`,o.current=setTimeout(()=>{p()},a.current*1e3))},[t,e]),v=h.useCallback(()=>{if(!n||!t||!e||u)return;const w=t.current,E=e.current;w.offsetWidth-E.offsetWidth>0&&(l.current=w.innerText,c.current=w.offsetWidth+20,a.current=+(c.current/35).toFixed(1))},[u,t,e]);h.useEffect(()=>{if(r.name&&(v(),!!c.current))return n&&a.current&&!u&&(setTimeout(()=>{m()},1e3),s.current=setInterval(()=>{m()},a.current*1e3+3e3+1e3)),()=>{s.current?(clearInterval(s.current),console.log("clear timer")):(console.log("No timer id"),i({})),o.current?clearTimeout(o.current):(console.log("No timer id"),i({})),l.current&&(p(),a.current=0,c.current=0)}},[r])}const kv=()=>{const t=jn(),{userPlaylists:e,setUserPlaylists:n,userSongs:r,setUserSongs:i}=ln(),{playlist:s}=wt(_t),o=h.useCallback(async({newPlaylist:l})=>{const c=[...e];zl(l,c),s.name===l.name&&t(go(l)),await yt({collection:"playlist",data:l,id:l.id}),n(c,[])},[e,s]),a=h.useCallback(async({song:l})=>{let c=[...r];const u=c.indexOf(l);c.splice(u,1);const f=c.map(p=>p.id);if(c.length!==r.length)return i(c),f},[r]);return{setPlaylistDocAndSetUserPlaylists:o,updateAndSetUserSongs:a}};function EA({audioRef:t,admin:e,songs:n,setSongs:r,firstTempSong:i}){const{userInfo:s}=xn(),{setErrorToast:o,setSuccessToast:a,setToasts:l}=Ln(),{setUserSongs:c,userSongs:u}=ln(),[f,p]=h.useState("idle"),[m,v]=h.useState([]),[w,E]=h.useState([]),y=h.useRef([]),g=h.useRef([]),_=h.useRef(!1),x=h.useCallback(async T=>{if(!s.email){o({message:"Missing user data"});return}p("uploading");const I=T.target.files;if(!I.length){p("finish");return}let C=xA({by:e?"admin":s.email}),A=[],b=[];e&&n?b=n:b=u;const F=Date.now();try{let N;for(N=0;N<=I.length-1;N++){const Y=I[N],J=await iF(Y);if(!J){o({message:"Error when parser song"});return}let U={...C,name:J.name,singer:J.singer},re;if(J.image){re=new Blob([J.image],{type:"application/octet-stream"});const L=URL.createObjectURL(re);U.image_url=L}if((()=>b.some(L=>L.singer===U.singer&&L.name===U.name))()){console.log(">>>duplicate"),_.current=!0,y.current.push(U);continue}A.push(U),g.current=[...g.current,N],Object.assign(Y,{for_song_id:A.length-1,imageBlob:re})}if(u.length+g.current.length>20&&s.role!=="admin"){p("finish-error"),o({message:"You have reach the upload limit"});return}if(!A.length){p("finish-error"),o({message:"Duplicate song"});return}v(A);for(let Y of g.current){let J=I[Y];const U=FR({file:J,folder:"/songs/",email:s.email});let re=wA(A[J.for_song_id].name);e?re+="_admin":re+="_"+s.email.replace("@gmail.com","");const P=J.for_song_id,L={...A[P]};if(L.image_url){const{encode:X}=await sF(J.imageBlob);X&&(L.blurhash_encode=X);const{fileURL:V,filePath:$}=await nV({blob:J.imageBlob,folder:"/images/",songId:re});URL.revokeObjectURL(L.image_url),L.image_url=V,L.image_file_path=$}const{filePath:M,fileURL:O}=await U;A[P]={...L,id:re,song_file_path:M,song_url:O};const z=t.current;z.src=URL.createObjectURL(J),await S(A,P)}}catch(N){console.log(N),p("finish-error"),o({message:"error when upload song file"}),v([]);return}try{if(g.current=[],!e){const Y=A.map(re=>re.id),U=[...u.map(re=>re.id),...Y];await UR({songIds:U,userInfo:s}),c([...u,...A])}v([]),r&&r([...b,...A]),_.current?(p("finish-error"),l(Y=>[...Y,{id:cl(4),title:"warning",desc:"Song duplicate"}])):(p("finish"),A.length>1&&a({message:`${A.length} songs uploaded`}));const N=Date.now();console.log("finished after",(N-F)/1e3)}catch(N){console.log(N),o({message:"Update user data failed"}),p("finish-error");return}},[s,u,n]),S=h.useCallback(async(T,R)=>new Promise(I=>{const C=t.current,A=async()=>{let b=T[R];const F=+C.duration.toFixed(1)||99;b={...b,duration:F},T[R]=b,await yt({collection:"songs",data:b,id:b.id}),v(T),E(N=>[...N,b.id]),URL.revokeObjectURL(C.src),l(N=>[...N,{title:"success",id:cl(4),desc:`'${b.name}' uploaded`}]),C.removeEventListener("loadedmetadata",A),I()};C.addEventListener("loadedmetadata",A)}),[]);return h.useEffect(()=>{if(!m.length)return;const T=i.current;T&&T.scrollIntoView({behavior:"smooth",block:"center"})},[m]),{tempSongs:m,setTempSongs:v,addedSongIds:w,status:f,handleInputChange:x}}function uF(t,e,n){const[r,i]=h.useState(!1),[s,o]=Bm("volume",1),a=c=>{const f=c.target.getBoundingClientRect();if(console.log("handleSetVolume"),t.current){let p=+((c.clientX-f.x)/t.current).toFixed(2);p>.9?p=1:p<.1?(p=0,i(!0)):i(!1),o(p)}},l=()=>{n.muted?(n.muted=!1,i(!1)):(n.muted=!0,i(!0))};return h.useEffect(()=>{e.current&&n&&(e.current.style.width=s*100+"%",n.volume=s)},[s]),{volume:s,handleSetVolume:a,isMute:r,handleMute:l}}const dF=/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;function hF({data:t,inputFields:e,localImageURL:n}){const[r,i]=h.useState(!!t.name),[s,o]=h.useState(!!t.singer),[a,l]=h.useState(!1),[c,u]=h.useState(!1),[f,p]=h.useState(!1);return h.useEffect(()=>{e.name?i(!0):i(!1)},[e.name]),h.useEffect(()=>{e.singer?o(!0):o(!1)},[e.singer]),h.useEffect(()=>{if(!e.image_url){l(!0);return}const m=dF.test(e.image_url);l(m)},[e.image_url]),h.useEffect(()=>{(e.name!==t.name||e.singer!==t.singer||e.image_url)&&p(!0)},[e,n]),h.useEffect(()=>{u(r&&s&&a&&f)},[r,s,a,f]),{validName:r,validSinger:s,validURL:a,isAbleToSubmit:c,isChangeInEdit:f,setValidURL:l}}function SA({data:t,setIsOpenModal:e,userSongs:n,setUserSongs:r,theme:i}){const{setErrorToast:s,setSuccessToast:o}=Ln(),{userInfo:a}=xn(),[l,c]=h.useState(!1),[u,f]=h.useState(!1),[p,m]=h.useState(t.image_url),[v,w]=h.useState(""),[E,y]=h.useState(),[g,_]=h.useState({name:t.name,singer:t.singer,image_url:""}),x=h.useRef(null),{isAbleToSubmit:S,validName:T,validSinger:R,validURL:I,isChangeInEdit:C,setValidURL:A}=hF({data:t,inputFields:g,localImageURL:v}),b=h.useMemo(()=>{if(v)return v;if(p)return p;if(I)return g.image_url},[g,v,p,t,I]),F=h.useMemo(()=>!!v||!!p,[v,p]),N=(M,O)=>{_({...g,[M]:O})},Y=h.useCallback(()=>{t.image_file_path&&!v?m(""):v?(w(""),y(void 0)):m(""),f(!0);const M=x.current;M&&(M.value="")},[v,t.image_file_path]),J=h.useCallback(M=>{const z=M.target.files[0];w(URL.createObjectURL(z)),f(!0),y(z)},[]),U=()=>{c(!1),e(!1)},re=M=>{M.stopPropagation(),U(),e(!1)},P=h.useCallback(async()=>{if(!n||!r){s({message:"Lack of props"});return}if(!t.id){s({message:"Edit song wrong data id"});return}try{const M=[...n];let O={...t};if(C){if(console.log("is change in edit"),!g.name||!g.singer){console.log("input invalid"),s({});return}const z=g.image_url&&I?g.image_url:O.image_url;if(c(!0),O={...O,name:g.name,singer:g.singer,image_url:z},O.name!==g.name||O.singer!==g.singer){console.log("input invalid"),s({});return}if(E&&u){const{filePath:X,fileURL:V}=await FR({file:E,folder:"/images/",email:a.email});O.image_file_path=X,O.image_url=V}else u&&(O.image_file_path="");if(!u&&Br(O,M)==null){s({message:"New user song Error"});return}}if(u){if(c(!0),console.log("isImpactOnImage"),t.image_file_path&&(O.image_file_path="",O.image_url=""),Br(O,M)==null){s({message:"New user song Error"});return}await Dm({filePath:t.image_file_path})}r(M),await yt({collection:"songs",data:O,id:O.id}),o({message:`${O.name} edited`})}catch(M){console.log(M),s({})}finally{U()}},[g,E,n,t,u]),L={textColor:i.type==="light"?"text-[#333]":"text-[#fff]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${i.alpha} text-[14px] font-[500]`};return d.jsxs("div",{className:"w-[50vw] h-[auto]",children:[d.jsx("input",{ref:x,id:"editImageInput",type:"file",onChange:J,className:"hidden"}),d.jsx("h1",{className:"text-[20px] font-semibold",children:"Edit"}),d.jsxs("div",{className:"flex mt-[10px]",children:[d.jsxs("div",{children:[d.jsx("div",{className:"w-[130px] h-[130px] flex-shrink-0 rounded-[5px] overflow-hidden",children:d.jsx(as,{onError:()=>A(!1),src:b,blurHashEncode:t.blurhash_encode})}),d.jsxs("div",{className:"flex items-center gap-[12px] mt-[10px]",children:[d.jsx("label",{htmlFor:"editImageInput",className:`inline-block cursor-pointer hover:brightness-90 px-[20px] py-[5px] bg-${i.alpha} rounded-full text-[14px]`,children:d.jsx(qk,{className:"w-[15px]"})}),F&&d.jsx(ee,{onClick:()=>Y(),className:`inline-block hover:brightness-90 px-[20px] py-[5px] ${i.content_bg} rounded-full text-[14px]`,children:d.jsx(Vn,{className:"w-[15px]"})})]}),d.jsx("p",{className:`text-[12px] ${L.textColor} mt-[10px]`,children:"* Image from URL will not be apply until you remove current image"})]}),d.jsxs("div",{className:"ml-[20px] w-full flex flex-col gap-[10px]",children:[d.jsxs("div",{className:"flex flex-col gap-[5px]",children:[d.jsxs("p",{className:"text-[14px] inline-flex",children:["Name:",T?d.jsx(ua,{className:"w-[20px] text-emerald-500 ml-[10px]"}):d.jsx(Vn,{className:"w-[20px] text-red-500 ml-[10px]"})]}),d.jsx("input",{className:`${L.input} ${L.textColor}`,value:g.name,type:"text",onChange:M=>N("name",M.target.value),placeholder:t.name})]}),d.jsxs("div",{className:"flex flex-col gap-[5px]",children:[d.jsxs("p",{className:"inline-flex text-[14px]",children:["Singer:",R?d.jsx(ua,{className:"w-[20px] text-emerald-500 ml-[10px]"}):d.jsx(Vn,{className:"w-[20px] text-red-500 ml-[10px]"})]}),d.jsx("input",{className:L.input,value:g.singer,onChange:M=>N("singer",M.target.value),type:"text",placeholder:t.singer})]}),d.jsxs("div",{className:"flex flex-col gap-[5px]",children:[d.jsxs("p",{className:"inline-flex text-[14px]",children:["Image URL:",g.image_url&&d.jsx(d.Fragment,{children:I?d.jsx(ua,{className:"w-[20px] text-emerald-500 ml-[10px]"}):d.jsx(Vn,{className:"w-[20px] text-red-500 ml-[10px]"})})]}),d.jsx("input",{className:L.input,value:g.image_url,onChange:M=>N("image_url",M.target.value),type:"text"})]}),d.jsxs("div",{className:"flex gap-[10px] mt-[10px]",children:[d.jsx(ee,{onClick:re,className:`bg-${i.alpha} rounded-full text-[14px]`,variant:"primary",children:d.jsx(Vn,{className:"w-[20px]"})}),d.jsx(ee,{isLoading:l,onClick:()=>P(),className:`${i.content_bg} rounded-full text-[14px] ${S?"":!u&&"pointer-events-none opacity-60"}`,variant:"primary",children:"Save"})]})]})]})]})}function fF({toast:t,theme:e,onClick:n}){const r={icon:"w-[30px] max-[549px]:w-[25px]",container:`text-white px-[20px] py-[10px] rounded-[4px] flex items-center  ${e.bottom_player_bg} border border-${e.alpha}`,text:`font-[500] text-[16px] max-[549px]:text-[14px] ${e.type==="light"?"text-[#333]":""}`};return d.jsxs("div",{onClick:()=>n(t.id),className:`${r.container} animate-[fadeIn_0.3s_linear]`,children:[d.jsxs("span",{className:"mr-[10px]",children:[t.title==="success"&&d.jsx(KE,{className:`${r.icon} text-emerald-500 `}),t.title==="error"&&d.jsx(RN,{className:`${r.icon} text-red-500`}),t.title==="warning"&&d.jsx(YE,{className:`${r.icon} text-yellow-500`})]}),d.jsx("p",{className:r.text,children:t.desc})]})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function TA(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function IA(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ds=function(){return Ds=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ds.apply(this,arguments)},RA=function(t){return{loading:t==null,value:t}},pF=function(){return function(t,e){switch(e.type){case"error":return Ds(Ds({},t),{error:e.error,loading:!1,value:void 0});case"reset":return RA(e.defaultValue);case"value":return Ds(Ds({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},mF=function(t){var e=t?t():void 0,n=h.useReducer(pF(),RA(e)),r=n[0],i=n[1],s=h.useCallback(function(){var l=t?t():void 0;i({type:"reset",defaultValue:l})},[t]),o=h.useCallback(function(l){i({type:"error",error:l})},[]),a=h.useCallback(function(l){i({type:"value",value:l})},[]);return h.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}},[r.error,r.loading,s,o,a,r.value])},Mh=function(t,e){var n=mF(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,a=n.value;return h.useEffect(function(){var l=NL(t,function(c){return TA(void 0,void 0,void 0,function(){var u;return IA(this,function(f){switch(f.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return f.sent(),[3,4];case 3:return u=f.sent(),s(u),[3,4];case 4:return o(c),[2]}})})},s);return function(){l()}},[t]),[a,i,r]},AA=function(t){var e=h.useCallback(function(n,r){var i=new Fn;return n&&n.forEach(function(s){return i.addScope(s)}),r&&i.setCustomParameters(r),i},[]);return gF(t,e)},gF=function(t,e){var n=h.useState(),r=n[0],i=n[1],s=h.useState(),o=s[0],a=s[1],l=h.useState(!1),c=l[0],u=l[1],f=h.useCallback(function(p,m){return TA(void 0,void 0,void 0,function(){var v,w,E;return IA(this,function(y){switch(y.label){case 0:u(!0),i(void 0),y.label=1;case 1:return y.trys.push([1,3,4,5]),v=e(p,m),[4,e4(t,v)];case 2:return w=y.sent(),a(w),[2,w];case 3:return E=y.sent(),i(E),[3,5];case 4:return u(!1),[7];case 5:return[2]}})})},[t,e]);return[f,o,c,r]};function yF({children:t}){const[e,n]=Mh(es),{setUserInfo:r,userInfo:i}=xn();return h.useEffect(()=>{const s=async()=>{try{await yt({collection:"users",data:{email:e==null?void 0:e.email,latest_seen:Z$(),photoURL:e==null?void 0:e.photoURL},id:e==null?void 0:e.email}),r({status:"finish",email:e==null?void 0:e.email,display_name:e==null?void 0:e.displayName,photoURL:e==null?void 0:e.photoURL})}catch(o){console.log(o)}};if(!n){if(!e){console.log("auth no user"),i.status!=="finish"&&r({status:"finish"});return}s()}},[e,n]),t}function CA({audioEle:t,isPlaying:e,isOpenFullScreen:n,isWaiting:r,setIsPlaying:i,setIsWaiting:s}){const o=jn(),{theme:a}=ct(),{song:l}=wt(_t),{actuallySongs:c}=Bl(),u=os(),[f,p]=h.useState(!1),[m,v]=h.useState(!1),[w,E]=Bm("repeat",!1),[y,g]=Bm("shuffle",!1),_=h.useRef(0),x=h.useRef(),S=h.useRef(null),T=h.useRef(null),R=h.useRef(null),I=h.useRef(null),C=h.useRef(!0),A=h.useRef(!1),b=h.useMemo(()=>u.pathname.includes("edit"),[u]),F=()=>{t==null||t.play()},N=()=>{t==null||t.pause()},Y=Q=>c[Q],J=()=>{e?N():F()},U=()=>{i(!1)},re=()=>{i(!0),s(!1),p(!1)},P=()=>{s(!0)},L=h.useCallback(()=>{N(),s(!0),v(!1);const Q=T.current;Q&&R.current&&I.current&&(R.current.innerText="00:00",Q.style.width="0%")},[]),M=h.useCallback(Q=>{const pe=Q.target;if(x.current&&_.current){s(!0);const Lt=pe.getBoundingClientRect(),le=T.current,ie=(Q.clientX-Lt.left)/x.current,H=ie*_.current;t&&le&&(t.currentTime=+H.toFixed(1),le.style.width=(ie*100).toFixed(1)+"%",e||F())}},[n,l]),O=h.useCallback(()=>{let Q=l.currentIndex+1,pe;Q<c.length?pe=c[Q]:(pe=c[0],Q=0),o(kn({...pe,currentIndex:Q,song_in:l.song_in}))},[l,c]),z=h.useCallback(()=>{let Q=l.currentIndex-1,pe;Q>=0?pe=c[Q]:(pe=c[c.length-1],Q=c.length-1),o(kn({...pe,currentIndex:Q,song_in:l.song_in}))},[l,c]),X=h.useCallback(()=>{if(!t)return;const Q=t==null?void 0:t.currentTime,pe=T.current;if(_.current&&Q){const Lt=Q/(_.current/100);pe.style.width=Lt.toFixed(1)+"%"}R.current&&(R.current.innerText=nd(Q)||"00:00")},[l,n]),V=h.useCallback(()=>{if(w)return console.log("song repeat"),F();if(y){console.log("song shuffle");let Q=l.currentIndex;for(;Q===l.currentIndex;)Q=Math.floor(Math.random()*c.length);const pe=Y(Q);return o(kn({...pe,currentIndex:Q,song_in:l.song_in}))}return l.currentIndex===c.length-1&&(A.current=!0),O()},[w,y,l,c]),$=h.useCallback(()=>{var Q;if(t){if(v(!0),_.current=t.duration,x.current=(Q=S.current)==null?void 0:Q.offsetWidth,A.current){A.current=!1,s(!1),i(!1);return}if(C.current||b){s(!1),i(!1);return}F()}},[b]),W=h.useCallback(()=>{p(!0),s(!1)},[]);h.useEffect(()=>{if(t)return t.addEventListener("error",W),t.addEventListener("pause",U),t.addEventListener("playing",re),t.addEventListener("timeupdate",X),t.addEventListener("waiting",P),()=>{t.removeEventListener("error",W),t.removeEventListener("pause",U),t.removeEventListener("playing",re),t.removeEventListener("timeupdate",X),t.removeEventListener("waiting",P)}},[]),h.useEffect(()=>{if(t)return t.src=l.song_url,()=>{if(C.current){C.current=!1;return}L()}},[l]),h.useEffect(()=>{if(t)return t==null||t.addEventListener("ended",V),()=>t==null?void 0:t.removeEventListener("ended",V)},[w,y,l,c]),h.useEffect(()=>{var Q;x.current=(Q=S.current)==null?void 0:Q.offsetWidth},[n]),h.useEffect(()=>{if(t&&u)return b&&e&&N(),t.addEventListener("loadedmetadata",$),()=>{t.removeEventListener("loadedmetadata",$)}},[b]);const te={button:`p-[5px] ${c.length<=1&&"opacity-20 pointer-events-none"}`,buttonsContainer:"w-full flex justify-center items-center gap-x-[20px] h-[50px]",processContainer:"flex flex-row items-center h-[30px]",processLineBase:"h-[4px] flex-grow relative cursor-pointer rounded-[99px] bg-gray-400 ",processLineCurrent:`absolute left-0 rounded-l-[99px] top-0 h-full ${a.content_bg}`,currentTime:"text-gray-500 text-[14px] font-semibold",duration:"text-[14px] font-semibold",icon:"w-[30px] max-[549px]:w-[40px]",before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]"};return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:`${te.buttonsContainer}`,children:[d.jsx("button",{className:`${te.button} ${w&&a.content_text}`,onClick:()=>E(!w),children:d.jsx(Lk,{className:te.icon})}),d.jsx("button",{className:te.button,onClick:()=>z(),children:d.jsx(Qk,{className:te.icon})}),d.jsx(t5,{isError:f,isWaiting:r,isPlaying:e,handlePlayPause:J,songInStore:l}),d.jsx("button",{className:`${te.button}`,onClick:()=>O(),children:d.jsx(XE,{className:te.icon})}),d.jsx("button",{className:`${te.button} ${y&&a.content_text}`,onClick:()=>g(!y),children:d.jsx(zk,{className:te.icon})})]}),d.jsxs("div",{className:te.processContainer,children:[d.jsx("div",{className:"w-[45px]",children:t&&d.jsx("span",{ref:R,className:`${te.currentTime}`,children:"00:00"})}),d.jsx("div",{ref:S,onClick:Q=>M(Q),className:`${te.processLineBase} ${!m&&"opacity-20 pointer-events-none"}  ${te.before}`,children:d.jsx("div",{ref:T,className:`${te.processLineCurrent}`})}),d.jsx("div",{className:"w-[55px] pl-[5px]",children:t&&d.jsx("span",{ref:I,className:te.duration,children:nd(_.current)||"00:00"})})]})]})}function rd({label:t,classNames:e,autoScroll:n}){const r=h.useRef(null),i=h.useRef(null);return cF({text:i,textWrapper:r,autoScroll:n}),d.jsx("div",{ref:r,className:"overflow-hidden scroll-smooth relative h-full",children:d.jsx("div",{ref:i,className:`${e} absolute left-0 whitespace-nowrap line-clamp-1`,children:t||"..."})})}function vF({idle:t,audioEle:e,isOpenFullScreen:n,isPlaying:r,isWaiting:i,setIsWaiting:s,setIsPlaying:o,setIsOpenFullScreen:a}){const l=wt(_t),{song:c}=l,{theme:u}=ct(),f=h.useRef(),p=h.useRef(null),m=h.useRef(null),v=os(),{handleSetVolume:w,isMute:E,handleMute:y}=uF(f,m,e),g=h.useMemo(()=>v.pathname.includes("edit"),[v]);h.useEffect(()=>{var x;f.current=(x=p.current)==null?void 0:x.offsetWidth},[n]);const _={before:"before:content-[''] before:w-[100%] before:h-[16px] before:absolute before:top-[50%] before:translate-y-[-50%]",wrapper:`border-${u.alpha} fixed bottom-0 w-full h-[90px] border-t transition-transform z-50 px-10`,container:"flex flex-row gap-[10px] h-full items-stretch",controlWrapper:"flex max-w-[400px] flex-grow",controlWrapperChild_1:`${n?"max-w-[600px] flex-col-reverse pb-[10px]":"flex-col justify-center"}`,controlWrapperChild_2:`${!c.song_url&&"pointer-events-none opacity-60"}`,volumeWrapper:"volume-control w-1/3 flex items-center justify-end gap-5",volumeLineBase:"ml-3 w-full relative h-[4px] cursor-pointer rounded-3xl",volumeLineCurrent:"absolute left-0 top-0 h-full w-full rounded-l-full"};return d.jsxs("div",{className:`${_.wrapper} ${n?"border-transparent":""} ${t&&"hidden"} ${g&&"translate-y-[100%] "} bg-transparent`,children:[d.jsx("div",{className:`absolute inset-0 ${u.bottom_player_bg} bg-opacity-[0.7] backdrop-blur-[15px] z-[-1] ${n?"opacity-0":""}`}),d.jsxs("div",{className:`${_.container} ${n?"justify-center text-white":"justify-between"}`,children:[d.jsx("div",{className:`current-song w-1/3 ${n?"hidden":""}`,children:d.jsxs("div",{className:`flex flex-row items-center h-full origin-center ${n?"hidden":""}`,children:[d.jsx("div",{className:"w-[2.5rem] h-[2.5rem]",children:d.jsx(as,{blurHashEncode:c.blurhash_encode,src:c.image_url,classNames:"rounded-full"})}),d.jsxs("div",{className:"ml-[10px] flex-grow",children:[d.jsx("div",{className:"h-[24px] w-full mask-image-horizontal",children:h.useMemo(()=>d.jsx(rd,{songInStore:c,autoScroll:!0,classNames:"text-[18px] font-[500]",label:(c==null?void 0:c.name)||"name"}),[c])}),d.jsx("div",{className:"h-[20px] w-full mask-image-horizontal",children:h.useMemo(()=>d.jsx(rd,{songInStore:c,autoScroll:!0,classNames:"text-[14px] opacity-60",label:(c==null?void 0:c.singer)||"singer"}),[c])})]})]})}),d.jsx("div",{className:` ${_.controlWrapper} ${_.controlWrapperChild_1}  ${_.controlWrapperChild_2}`,children:h.useMemo(()=>d.jsx(CA,{audioEle:e,idle:!1,isPlaying:r,isWaiting:i,isOpenFullScreen:n,setIsWaiting:s,setIsPlaying:o}),[r,n,i])}),d.jsxs("div",{className:`${_.volumeWrapper}  ${n?"hidden":""}`,children:[d.jsxs("div",{className:"flex items-center w-[150px]",children:[d.jsx("button",{onClick:()=>y(),children:E?d.jsx(gN,{className:"w-6 h-6"}):d.jsx(fN,{className:"w-6 h-6"})}),d.jsx("div",{onClick:x=>w(x),ref:p,className:`${_.volumeLineBase} ${u.type==="light"?"bg-gray-400":"bg-gray-200"} ${_.before}`,children:d.jsx("div",{ref:m,className:`${_.volumeLineCurrent} ${u.content_bg}`})})]}),d.jsx(ee,{onClick:()=>a(!0),variant:"circle",className:`h-[35px] w-[35px] p-[8px] ${c.name?"":"opacity-20 pointer-events-none"}`,children:d.jsx(yP,{})})]})]})]})}const No=({loading:t,theme:e,callback:n,label:r,setOpenModal:i,buttonLabel:s,desc:o,className:a})=>d.jsxs("div",{className:a||"w-[30vw]",children:[d.jsx("h1",{className:"text-[20px] text-red-500 font-semibold",children:r||"Wait a minute"}),d.jsx("p",{className:" text-[16px]",children:o}),d.jsxs("div",{className:"flex gap-[10px] mt-[20px]",children:[d.jsx(ee,{isLoading:t,className:` bg-${e.alpha} hover:bg-red-500 rounded-full text-[14px]`,variant:"primary",onClick:()=>n(),children:s||"Yes please"}),d.jsx(ee,{onClick:()=>i&&i(!1),className:`${e.content_bg} rounded-full text-[14px]`,variant:"primary",children:"Close"})]})]}),hs=({children:t,setOpenModal:e})=>d.jsx(d.Fragment,{children:gl.createPortal(d.jsxs("div",{className:"fixed inset-0 z-[99]",children:[d.jsx("div",{onClick:n=>{n.stopPropagation,e(!1)},className:"absolute bg-black opacity-60 inset-0 z-[90]"}),d.jsx("div",{className:"absolute z-[99] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:t})]}),document.getElementById("portals"))}),_F=({data:t,theme:e,selectedSongList:n,setSelectedSongList:r,isChecked:i,adminSongs:s,setAdminSongs:o,inProcess:a},l)=>{const[c,u]=h.useState(!1),[f,p]=h.useState(!1),[m,v]=h.useState(),{setErrorToast:w,setSuccessToast:E}=Ln(),{song:y}=wt(_t),g=I=>{v(I),p(!0)},_=()=>{u(!1),p(!1)},x=async()=>{if(!o||!s){w({message:"Lack of props"});return}try{u(!0);const I=[...s],C=I.indexOf(t);I.splice(C,1),o(I),await ph(t),E({message:`'${t.name}' deleted`})}catch(I){console.log({message:I}),w({})}finally{_()}},S=I=>{if(!n||!r)return;let C=[...n];const A=C.indexOf(I);A===-1?C.push(I):C.splice(A,1),r(C)},T=h.useMemo(()=>No({loading:c,label:`Delete '${t.name}'`,desc:"This action cannot be undone",theme:e,callback:x,setOpenModal:p}),[c,e,s,y]),R={td:`py-[10px] my-[10px] border-${e.alpha} border-b-[1px]`,th:"py-[5px]"};return d.jsxs(d.Fragment,{children:[d.jsxs("tr",{ref:l,className:"",children:[d.jsx("td",{className:`${R.td} text-center`,children:!a&&d.jsx("input",{checked:i,onChange:()=>S(t),className:"scale-[1.2]",type:"checkbox"})}),d.jsx("td",{className:R.td,children:d.jsx("div",{className:"h-[44px] w-[44px]",children:d.jsx("img",{className:"rounded-[4px]",src:t.image_url})})}),d.jsx("td",{className:R.td,children:t.name}),d.jsx("td",{className:R.td,children:t.singer}),a?d.jsx("td",{className:R.td,children:d.jsx("h1",{children:"...in process"})}):d.jsx("td",{className:R.td,children:d.jsxs("div",{className:"flex items-center gap-[5px]",children:[d.jsx(ee,{variant:"circle",onClick:()=>g("confirm"),children:d.jsx(qg,{className:"w-[20px]"})}),d.jsx(ee,{variant:"circle",onClick:()=>g("edit"),children:d.jsx(Hg,{className:"w-[20px]"})}),d.jsx(_n,{to:`${$e.Dashboard}/edit/${t.id}`,children:d.jsx(ee,{variant:"circle",onClick:()=>g("edit"),children:d.jsx(AP,{className:"w-[20px]"})})})]})})]}),f&&!a&&d.jsx(hs,{setOpenModal:p,children:d.jsxs(Gn,{theme:e,children:[m==="edit"&&d.jsx(SA,{setIsOpenModal:p,setUserSongs:o,theme:e,userSongs:s,data:t}),m==="confirm"&&T]})})]})},Qf=h.forwardRef(_F);function wF({isOpenFullScreen:t,setIsOpenFullScreen:e,idle:n,audioEle:r}){const i=jn(),{theme:s}=ct(),{song:o}=wt(_t),{actuallySongs:a}=Bl(),[l,c]=h.useState("Lyric"),u=h.useRef(null),f=h.useRef(null),p=h.useRef(),m=h.useRef(null),v=h.useRef(!0),w=_i(),E=gA({songInStore:o,audioEle:r});mA({bgRef:u,songInStore:o}),lF({containerRef:f,songItemRef:m,firstTimeRender:v,isOpenFullScreen:t});const y=(R,I)=>{o.id!==R.id&&i(kn({...R,currentIndex:I,song_in:o.song_in}))},g=R=>{const I=f.current;R==="next"?(I.scrollLeft+=500,p.current&&clearTimeout(p.current)):R==="previous"&&(I.scrollLeft-=500)},_=()=>{e(!1),setTimeout(()=>{w(`/React-Zingmp3/mysongs/edit/${o.id}`)},300)},x={button:`p-[8px] bg-gray-500 bg-opacity-20 text-xl ${s.content_hover_text}`,mainContainer:`fixed inset-0 bg-zinc-900 bottom-[0]  overflow-hidden text-white  ${t?"translate-y-0":"translate-y-full"} transition-[transform] duration-[.4s] linear delay-100`,bg:"absolute h-[100vh] w-[100vw] -z-10 inset-0 bg-no-repeat bg-cover bg-center blur-[99px] transition-[background] duration-100",overplay:"absolute h-[100vh] w-[100vw] inset-0 bg-zinc-900 bg-opacity-80 bg-blend-multiply",header:"header-left flex px-10 py-[20px] relative h-[75px] max-[549px]:px-[10px]",headerRight:`flex items-center absolute right-10 gap-[10px] max-[549px]:right-[10px] top-0 h-full ${n?"hidden":""}`,contentContainer:"h-[calc(100%-100px)] max-[549px]:h-[calc(100%-150px)] relative overflow-hidden",songsListTab:`${l!=="Songs"?"opacity-0":""} relative h-full no-scrollbar flex items-center flex-row overflow-auto scroll-smooth max-[549px]:px-[150px] px-[calc(50%-390px/2)]`,absoluteButton:`p-[8px] bg-gray-500 bg-opacity-50 text-xl fixed top-1/2 -translate-y-1/2 max-[549px]:hidden opacity-[.5] hover:opacity-100 ${s.content_hover_text}`,songNameSinger:"relative text-center text-white text-[14px] opacity-80",lyricTabContainer:"px-[40px] h-full w-full flex items-center justify-center flex-row",lyricContainer:"flex-grow ml-[50px] max-[549px]:ml-0 h-full overflow-hidden"},S=h.useMemo(()=>{if(a.length)return a.map((R,I)=>{const C=I===o.currentIndex;return C?d.jsx(eu,{theme:s,ref:m,classNames:"items-end justify-center flex-shrink-0 w-[350px] h-[350px]",hasHover:!0,hasTitle:!0,onClick:()=>y(R,I),active:C,data:R},I):d.jsx(eu,{theme:s,classNames:"items-end justify-center flex-shrink-0 w-[350px] h-[350px]",hasHover:!0,hasTitle:!0,onClick:()=>y(R,I),active:C,data:R},I)})},[o,a]),T=d.jsxs("div",{className:x.lyricTabContainer,children:[d.jsx(eu,{theme:s,active:!0,data:o}),d.jsx("div",{className:x.lyricContainer,children:d.jsx(eC,{audioEle:r,songLyric:E})})]});return d.jsxs("div",{className:`${x.mainContainer}`,children:[d.jsx("div",{ref:u,className:x.bg}),d.jsx("div",{className:x.overplay}),d.jsxs("div",{className:"h-[calc(100vh-90px)]",children:[d.jsxs("div",{className:x.header,children:[d.jsx("div",{className:`relative h-full ${n?"":"hidden"}`,children:d.jsx("div",{className:"absolute left-0 top-0 h-full "})}),d.jsx(iC,{idle:n,activeTab:l,setActiveTab:c,tabs:["Songs","Lyric"]}),d.jsxs("div",{className:`${x.headerRight}`,children:[o.by!="admin"&&d.jsx(ee,{onClick:()=>_(),variant:"circle",size:"normal",className:x.button,children:d.jsx(TP,{})}),d.jsx(ee,{onClick:()=>e(!1),variant:"circle",size:"normal",className:x.button,children:d.jsx(GE,{})})]})]}),d.jsxs("div",{className:x.contentContainer,children:[d.jsxs("div",{ref:f,className:` ${x.songsListTab}`,children:[S,d.jsx(ee,{onClick:()=>g("previous"),variant:"circle",size:"large",className:`${x.absoluteButton} left-[20px]`,children:d.jsx(vl,{})}),d.jsx(ee,{onClick:()=>g("next"),variant:"circle",size:"large",className:`${x.absoluteButton} right-[20px]`,children:d.jsx(QE,{})})]}),t&&l==="Lyric"&&d.jsx("div",{className:"absolute inset-0 z-20  ",children:T})]}),t&&l==="Lyric"&&d.jsxs("p",{className:x.songNameSinger,children:[o.name," - ",d.jsx("span",{className:"opacity-30",children:o.singer})]})]})]})}const xF=["top","right","bottom","left"],e1=["start","end"],t1=xF.reduce((t,e)=>t.concat(e,e+"-"+e1[0],e+"-"+e1[1]),[]),id=Math.min,Fi=Math.max,sd=Math.round,Cc=Math.floor,fi=t=>({x:t,y:t}),EF={left:"right",right:"left",bottom:"top",top:"bottom"},SF={start:"end",end:"start"};function n1(t,e,n){return Fi(t,id(e,n))}function Wl(t,e){return typeof t=="function"?t(e):t}function Tr(t){return t.split("-")[0]}function fr(t){return t.split("-")[1]}function bA(t){return t==="x"?"y":"x"}function kA(t){return t==="y"?"height":"width"}function $h(t){return["top","bottom"].includes(Tr(t))?"y":"x"}function PA(t){return bA($h(t))}function NA(t,e,n){n===void 0&&(n=!1);const r=fr(t),i=PA(t),s=kA(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=ad(o)),[o,ad(o)]}function TF(t){const e=ad(t);return[od(t),e,od(e)]}function od(t){return t.replace(/start|end/g,e=>SF[e])}function IF(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function RF(t,e,n,r){const i=fr(t);let s=IF(Tr(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(od)))),s}function ad(t){return t.replace(/left|right|bottom|top/g,e=>EF[e])}function AF(t){return{top:0,right:0,bottom:0,left:0,...t}}function CF(t){return typeof t!="number"?AF(t):{top:t,right:t,bottom:t,left:t}}function ld(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function r1(t,e,n){let{reference:r,floating:i}=t;const s=$h(e),o=PA(e),a=kA(o),l=Tr(e),c=s==="y",u=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-i.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-i.width,y:f};break;default:m={x:r.x,y:r.y}}switch(fr(e)){case"start":m[o]-=p*(n&&c?-1:1);break;case"end":m[o]+=p*(n&&c?-1:1);break}return m}const bF=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:f}=r1(c,r,l),p=r,m={},v=0;for(let w=0;w<a.length;w++){const{name:E,fn:y}=a[w],{x:g,y:_,data:x,reset:S}=await y({x:u,y:f,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});if(u=g??u,f=_??f,m={...m,[E]:{...m[E],...x}},S&&v<=50){v++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):S.rects),{x:u,y:f}=r1(c,p,l)),w=-1;continue}}return{x:u,y:f,placement:p,strategy:i,middlewareData:m}};async function Pv(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=Wl(e,t),v=CF(m),E=a[p?f==="floating"?"reference":"floating":f],y=ld(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(E)))==null||n?E:E.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),g=f==="floating"?{...o.floating,x:r,y:i}:o.reference,_=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),x=await(s.isElement==null?void 0:s.isElement(_))?await(s.getScale==null?void 0:s.getScale(_))||{x:1,y:1}:{x:1,y:1},S=ld(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:g,offsetParent:_,strategy:l}):g);return{top:(y.top-S.top+v.top)/x.y,bottom:(S.bottom-y.bottom+v.bottom)/x.y,left:(y.left-S.left+v.left)/x.x,right:(S.right-y.right+v.right)/x.x}}function kF(t,e,n){return(t?[...n.filter(i=>fr(i)===t),...n.filter(i=>fr(i)!==t)]:n.filter(i=>Tr(i)===i)).filter(i=>t?fr(i)===t||(e?od(i)!==i:!1):!0)}const PF=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,r,i;const{rects:s,middlewareData:o,placement:a,platform:l,elements:c}=e,{crossAxis:u=!1,alignment:f,allowedPlacements:p=t1,autoAlignment:m=!0,...v}=Wl(t,e),w=f!==void 0||p===t1?kF(f||null,m,p):p,E=await Pv(e,v),y=((n=o.autoPlacement)==null?void 0:n.index)||0,g=w[y];if(g==null)return{};const _=NA(g,s,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(a!==g)return{reset:{placement:w[0]}};const x=[E[Tr(g)],E[_[0]],E[_[1]]],S=[...((r=o.autoPlacement)==null?void 0:r.overflows)||[],{placement:g,overflows:x}],T=w[y+1];if(T)return{data:{index:y+1,overflows:S},reset:{placement:T}};const R=S.map(A=>{const b=fr(A.placement);return[A.placement,b&&u?A.overflows.slice(0,2).reduce((F,N)=>F+N,0):A.overflows[0],A.overflows]}).sort((A,b)=>A[1]-b[1]),C=((i=R.filter(A=>A[2].slice(0,fr(A[0])?2:3).every(b=>b<=0))[0])==null?void 0:i[0])||R[0][0];return C!==a?{data:{index:y+1,overflows:S},reset:{placement:C}}:{}}}},Nv=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:r,middlewareData:i,rects:s,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:v=!0,...w}=Wl(t,e),E=Tr(r),y=Tr(o)===o,g=await(a.isRTL==null?void 0:a.isRTL(l.floating)),_=f||(y||!v?[ad(o)]:TF(o));!f&&m!=="none"&&_.push(...RF(o,v,m,g));const x=[o,..._],S=await Pv(e,w),T=[];let R=((n=i.flip)==null?void 0:n.overflows)||[];if(c&&T.push(S[E]),u){const b=NA(r,s,g);T.push(S[b[0]],S[b[1]])}if(R=[...R,{placement:r,overflows:T}],!T.every(b=>b<=0)){var I,C;const b=(((I=i.flip)==null?void 0:I.index)||0)+1,F=x[b];if(F)return{data:{index:b,overflows:R},reset:{placement:F}};let N=(C=R.filter(Y=>Y.overflows[0]<=0).sort((Y,J)=>Y.overflows[1]-J.overflows[1])[0])==null?void 0:C.placement;if(!N)switch(p){case"bestFit":{var A;const Y=(A=R.map(J=>[J.placement,J.overflows.filter(U=>U>0).reduce((U,re)=>U+re,0)]).sort((J,U)=>J[1]-U[1])[0])==null?void 0:A[0];Y&&(N=Y);break}case"initialPlacement":N=o;break}if(r!==N)return{reset:{placement:N}}}return{}}}};async function NF(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Tr(n),a=fr(n),l=$h(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,f=Wl(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof v=="number"&&(m=a==="end"?v*-1:v),l?{x:m*u,y:p*c}:{x:p*c,y:m*u}}const Vh=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,i=await NF(e,t);return{x:n+i.x,y:r+i.y,data:i}}}},Ov=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:E=>{let{x:y,y:g}=E;return{x:y,y:g}}},...l}=Wl(t,e),c={x:n,y:r},u=await Pv(e,l),f=$h(Tr(i)),p=bA(f);let m=c[p],v=c[f];if(s){const E=p==="y"?"top":"left",y=p==="y"?"bottom":"right",g=m+u[E],_=m-u[y];m=n1(g,m,_)}if(o){const E=f==="y"?"top":"left",y=f==="y"?"bottom":"right",g=v+u[E],_=v-u[y];v=n1(g,v,_)}const w=a.fn({...e,[p]:m,[f]:v});return{...w,data:{x:w.x-n,y:w.y-r}}}}};function pi(t){return OA(t)?(t.nodeName||"").toLowerCase():"#document"}function en(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Rr(t){var e;return(e=(OA(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function OA(t){return t instanceof Node||t instanceof en(t).Node}function nt(t){return t instanceof Element||t instanceof en(t).Element}function Ft(t){return t instanceof HTMLElement||t instanceof en(t).HTMLElement}function zm(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof en(t).ShadowRoot}function Hl(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=sn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function OF(t){return["table","td","th"].includes(pi(t))}function jv(t){const e=Lv(),n=sn(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function jF(t){let e=ns(t);for(;Ft(e)&&!ql(e);){if(jv(e))return e;e=ns(e)}return null}function Lv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ql(t){return["html","body","#document"].includes(pi(t))}function sn(t){return en(t).getComputedStyle(t)}function Fh(t){return nt(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ns(t){if(pi(t)==="html")return t;const e=t.assignedSlot||t.parentNode||zm(t)&&t.host||Rr(t);return zm(e)?e.host:e}function jA(t){const e=ns(t);return ql(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ft(e)&&Hl(e)?e:jA(e)}function Ui(t,e){var n;e===void 0&&(e=[]);const r=jA(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=en(r);return i?e.concat(s,s.visualViewport||[],Hl(r)?r:[]):e.concat(r,Ui(r))}function LA(t){const e=sn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Ft(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=sd(n)!==s||sd(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Dv(t){return nt(t)?t:t.contextElement}function Ys(t){const e=Dv(t);if(!Ft(e))return fi(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=LA(e);let o=(s?sd(n.width):n.width)/r,a=(s?sd(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const LF=fi(0);function DA(t){const e=en(t);return!Lv()||!e.visualViewport?LF:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function DF(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==en(t)?!1:e}function rs(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=Dv(t);let o=fi(1);e&&(r?nt(r)&&(o=Ys(r)):o=Ys(t));const a=DF(s,n,r)?DA(s):fi(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,f=i.height/o.y;if(s){const p=en(s),m=r&&nt(r)?en(r):r;let v=p.frameElement;for(;v&&r&&m!==p;){const w=Ys(v),E=v.getBoundingClientRect(),y=sn(v),g=E.left+(v.clientLeft+parseFloat(y.paddingLeft))*w.x,_=E.top+(v.clientTop+parseFloat(y.paddingTop))*w.y;l*=w.x,c*=w.y,u*=w.x,f*=w.y,l+=g,c+=_,v=en(v).frameElement}}return ld({width:u,height:f,x:l,y:c})}function MF(t){let{rect:e,offsetParent:n,strategy:r}=t;const i=Ft(n),s=Rr(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0},a=fi(1);const l=fi(0);if((i||!i&&r!=="fixed")&&((pi(n)!=="body"||Hl(s))&&(o=Fh(n)),Ft(n))){const c=rs(n);a=Ys(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function $F(t){return Array.from(t.getClientRects())}function MA(t){return rs(Rr(t)).left+Fh(t).scrollLeft}function VF(t){const e=Rr(t),n=Fh(t),r=t.ownerDocument.body,i=Fi(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Fi(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+MA(t);const a=-n.scrollTop;return sn(r).direction==="rtl"&&(o+=Fi(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function FF(t,e){const n=en(t),r=Rr(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=Lv();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function UF(t,e){const n=rs(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Ft(t)?Ys(t):fi(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function i1(t,e,n){let r;if(e==="viewport")r=FF(t,n);else if(e==="document")r=VF(Rr(t));else if(nt(e))r=UF(e,n);else{const i=DA(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return ld(r)}function $A(t,e){const n=ns(t);return n===e||!nt(n)||ql(n)?!1:sn(n).position==="fixed"||$A(n,e)}function BF(t,e){const n=e.get(t);if(n)return n;let r=Ui(t).filter(a=>nt(a)&&pi(a)!=="body"),i=null;const s=sn(t).position==="fixed";let o=s?ns(t):t;for(;nt(o)&&!ql(o);){const a=sn(o),l=jv(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Hl(o)&&!l&&$A(t,o))?r=r.filter(u=>u!==o):i=a,o=ns(o)}return e.set(t,r),r}function zF(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?BF(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const f=i1(e,u,i);return c.top=Fi(f.top,c.top),c.right=id(f.right,c.right),c.bottom=id(f.bottom,c.bottom),c.left=Fi(f.left,c.left),c},i1(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function WF(t){return LA(t)}function HF(t,e,n){const r=Ft(e),i=Rr(e),s=n==="fixed",o=rs(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=fi(0);if(r||!r&&!s)if((pi(e)!=="body"||Hl(i))&&(a=Fh(e)),r){const c=rs(e,!0,s,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else i&&(l.x=MA(i));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function s1(t,e){return!Ft(t)||sn(t).position==="fixed"?null:e?e(t):t.offsetParent}function VA(t,e){const n=en(t);if(!Ft(t))return n;let r=s1(t,e);for(;r&&OF(r)&&sn(r).position==="static";)r=s1(r,e);return r&&(pi(r)==="html"||pi(r)==="body"&&sn(r).position==="static"&&!jv(r))?n:r||jF(t)||n}const qF=async function(t){let{reference:e,floating:n,strategy:r}=t;const i=this.getOffsetParent||VA,s=this.getDimensions;return{reference:HF(e,await i(n),r),floating:{x:0,y:0,...await s(n)}}};function KF(t){return sn(t).direction==="rtl"}const GF={convertOffsetParentRelativeRectToViewportRelativeRect:MF,getDocumentElement:Rr,getClippingRect:zF,getOffsetParent:VA,getElementRects:qF,getClientRects:$F,getDimensions:WF,getScale:Ys,isElement:nt,isRTL:KF};function QF(t,e){let n=null,r;const i=Rr(t);function s(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:f,height:p}=t.getBoundingClientRect();if(a||e(),!f||!p)return;const m=Cc(u),v=Cc(i.clientWidth-(c+f)),w=Cc(i.clientHeight-(u+p)),E=Cc(c),g={rootMargin:-m+"px "+-v+"px "+-w+"px "+-E+"px",threshold:Fi(0,id(1,l))||1};let _=!0;function x(S){const T=S[0].intersectionRatio;if(T!==l){if(!_)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},100)}_=!1}try{n=new IntersectionObserver(x,{...g,root:i.ownerDocument})}catch{n=new IntersectionObserver(x,g)}n.observe(t)}return o(!0),s}function Kl(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Dv(t),u=i||s?[...c?Ui(c):[],...Ui(e)]:[];u.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=c&&a?QF(c,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(y=>{let[g]=y;g&&g.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{m&&m.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let v,w=l?rs(t):null;l&&E();function E(){const y=rs(t);w&&(y.x!==w.x||y.y!==w.y||y.width!==w.width||y.height!==w.height)&&n(),w=y,v=requestAnimationFrame(E)}return n(),()=>{u.forEach(y=>{i&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),f&&f(),m&&m.disconnect(),m=null,l&&cancelAnimationFrame(v)}}const YF=(t,e,n)=>{const r=new Map,i={platform:GF,...n},s={...i.platform,_c:r};return bF(t,e,{...i,platform:s})};var Jc=typeof document<"u"?h.useLayoutEffect:h.useEffect;function cd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!cd(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!cd(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function FA(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function o1(t,e){const n=FA(t);return Math.round(e*n)/n}function a1(t){const e=h.useRef(t);return Jc(()=>{e.current=t}),e}function XF(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,f]=h.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=h.useState(r);cd(p,r)||m(r);const[v,w]=h.useState(null),[E,y]=h.useState(null),g=h.useCallback(U=>{U!=T.current&&(T.current=U,w(U))},[w]),_=h.useCallback(U=>{U!==R.current&&(R.current=U,y(U))},[y]),x=s||v,S=o||E,T=h.useRef(null),R=h.useRef(null),I=h.useRef(u),C=a1(l),A=a1(i),b=h.useCallback(()=>{if(!T.current||!R.current)return;const U={placement:e,strategy:n,middleware:p};A.current&&(U.platform=A.current),YF(T.current,R.current,U).then(re=>{const P={...re,isPositioned:!0};F.current&&!cd(I.current,P)&&(I.current=P,gl.flushSync(()=>{f(P)}))})},[p,e,n,A]);Jc(()=>{c===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,f(U=>({...U,isPositioned:!1})))},[c]);const F=h.useRef(!1);Jc(()=>(F.current=!0,()=>{F.current=!1}),[]),Jc(()=>{if(x&&(T.current=x),S&&(R.current=S),x&&S){if(C.current)return C.current(x,S,b);b()}},[x,S,b,C]);const N=h.useMemo(()=>({reference:T,floating:R,setReference:g,setFloating:_}),[g,_]),Y=h.useMemo(()=>({reference:x,floating:S}),[x,S]),J=h.useMemo(()=>{const U={position:n,left:0,top:0};if(!Y.floating)return U;const re=o1(Y.floating,u.x),P=o1(Y.floating,u.y);return a?{...U,transform:"translate("+re+"px, "+P+"px)",...FA(Y.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:re,top:P}},[n,a,Y.floating,u.x,u.y]);return h.useMemo(()=>({...u,update:b,refs:N,elements:Y,floatingStyles:J}),[u,b,N,Y,J])}function _s(t){let e=t.activeElement;for(;((n=e)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;e=e.shadowRoot.activeElement}return e}function Qt(t,e){if(!t||!e)return!1;const n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&zm(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function JF(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function ZF(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function e6(t){if(t.mozInputSource===0&&t.isTrusted)return!0;const e=/Android/i;return(e.test(JF())||e.test(ZF()))&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function t6(t){return t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType!=="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0}function n6(){return/apple/i.test(navigator.vendor)}function l1(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function r6(t){return"nativeEvent"in t}function i6(t){return t.matches("html,body")}function Bn(t){return(t==null?void 0:t.ownerDocument)||document}function Yf(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function UA(t){return"composedPath"in t?t.composedPath()[0]:t.target}const s6="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function BA(t){return Ft(t)&&t.matches(s6)}function Xf(t){t.preventDefault(),t.stopPropagation()}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var o6=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Wm=o6.join(","),zA=typeof Element>"u",ul=zA?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ud=!zA&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},dd=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",o=s||n&&e&&t(e.parentNode);return o},a6=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},l6=function(e,n,r){if(dd(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(Wm));return n&&ul.call(e,Wm)&&i.unshift(e),i=i.filter(r),i},c6=function t(e,n,r){for(var i=[],s=Array.from(e);s.length;){var o=s.shift();if(!dd(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=t(l,!0,r);r.flatten?i.push.apply(i,c):i.push({scopeParent:o,candidates:c})}else{var u=ul.call(o,Wm);u&&r.filter(o)&&(n||!e.includes(o))&&i.push(o);var f=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),p=!dd(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(f&&p){var m=t(f===!0?o.children:f.children,!0,r);r.flatten?i.push.apply(i,m):i.push({scopeParent:o,candidates:m})}else s.unshift.apply(s,o.children)}}return i},WA=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},HA=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||a6(e))&&!WA(e)?0:e.tabIndex},u6=function(e,n){var r=HA(e);return r<0&&n&&!WA(e)?0:r},d6=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},qA=function(e){return e.tagName==="INPUT"},h6=function(e){return qA(e)&&e.type==="hidden"},f6=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},p6=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},m6=function(e){if(!e.name)return!0;var n=e.form||ud(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=p6(i,e.form);return!s||s===e},g6=function(e){return qA(e)&&e.type==="radio"},y6=function(e){return g6(e)&&!m6(e)},v6=function(e){var n,r=e&&ud(e),i=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var o,a,l;for(s=!!((o=i)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(i)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&i;){var c,u,f;r=ud(i),i=(c=r)===null||c===void 0?void 0:c.host,s=!!((u=i)!==null&&u!==void 0&&(f=u.ownerDocument)!==null&&f!==void 0&&f.contains(i))}}return s},c1=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},_6=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=ul.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(ul.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=e;e;){var l=e.parentElement,c=ud(e);if(l&&!l.shadowRoot&&i(l)===!0)return c1(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(v6(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return c1(e);return!1},w6=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return ul.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},x6=function(e,n){return!(n.disabled||dd(n)||h6(n)||_6(n,e)||f6(n)||w6(n))},u1=function(e,n){return!(y6(n)||HA(n)<0||!x6(e,n))},E6=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},S6=function t(e){var n=[],r=[];return e.forEach(function(i,s){var o=!!i.scopeParent,a=o?i.scopeParent:i,l=u6(a,o),c=o?t(i.candidates):a;l===0?o?n.push.apply(n,c):n.push(a):r.push({documentOrder:s,tabIndex:l,item:i,isScope:o,content:c})}),r.sort(d6).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(n)},KA=function(e,n){n=n||{};var r;return n.getShadowRoot?r=c6([e],n.includeContainer,{filter:u1.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:E6}):r=l6(e,n.includeContainer,u1.bind(null,n)),S6(r)};function hd(){return hd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hd.apply(this,arguments)}var zr=typeof document<"u"?h.useLayoutEffect:h.useEffect;let Jf=!1,T6=0;const d1=()=>"floating-ui-"+T6++;function I6(){const[t,e]=h.useState(()=>Jf?d1():void 0);return zr(()=>{t==null&&e(d1())},[]),h.useEffect(()=>{Jf||(Jf=!0)},[]),t}const R6=Ym["useId".toString()],GA=R6||I6;function A6(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(i=>i!==n))||[])}}}const C6=h.createContext(null),b6=h.createContext(null),k6=()=>{var t;return((t=h.useContext(C6))==null?void 0:t.id)||null},Mv=()=>h.useContext(b6);function fd(t){return"data-floating-ui-"+t}function Zf(t){const e=h.useRef(t);return zr(()=>{e.current=t}),e}let h1=0;function Ei(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=e;r&&cancelAnimationFrame(h1);const s=()=>t==null?void 0:t.focus({preventScroll:n});i?s():h1=requestAnimationFrame(s)}function P6(t,e){var n;let r=[],i=(n=t.find(s=>s.id===e))==null?void 0:n.parentId;for(;i;){const s=t.find(o=>o.id===i);i=s==null?void 0:s.parentId,s&&(r=r.concat(s))}return r}function wa(t,e){let n=t.filter(i=>{var s;return i.parentId===e&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=t.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}let gs=new WeakMap,bc=new WeakSet,kc={},ep=0;const N6=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,QA=t=>t&&(t.host||QA(t.parentNode)),O6=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=QA(n);return t.contains(r)?r:null}).filter(n=>n!=null);function j6(t,e,n,r){const i="data-floating-ui-inert",s=r?"inert":n?"aria-hidden":null,o=O6(e,t),a=new Set,l=new Set(o),c=[];kc[i]||(kc[i]=new WeakMap);const u=kc[i];o.forEach(f),p(e),a.clear();function f(m){!m||a.has(m)||(a.add(m),m.parentNode&&f(m.parentNode))}function p(m){!m||l.has(m)||Array.prototype.forEach.call(m.children,v=>{if(a.has(v))p(v);else{const w=s?v.getAttribute(s):null,E=w!==null&&w!=="false",y=(gs.get(v)||0)+1,g=(u.get(v)||0)+1;gs.set(v,y),u.set(v,g),c.push(v),y===1&&E&&bc.add(v),g===1&&v.setAttribute(i,""),!E&&s&&v.setAttribute(s,"true")}})}return ep++,()=>{c.forEach(m=>{const v=(gs.get(m)||0)-1,w=(u.get(m)||0)-1;gs.set(m,v),u.set(m,w),v||(!bc.has(m)&&s&&m.removeAttribute(s),bc.delete(m)),w||m.removeAttribute(i)}),ep--,ep||(gs=new WeakMap,gs=new WeakMap,bc=new WeakSet,kc={})}}function f1(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=Bn(t[0]).body;return j6(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const YA=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function XA(t,e){const n=KA(t,YA());e==="prev"&&n.reverse();const r=n.indexOf(_s(Bn(t)));return n.slice(r+1)[0]}function L6(){return XA(document.body,"next")}function D6(){return XA(document.body,"prev")}function p1(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!Qt(n,r)}const JA={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let M6;function m1(t){t.key==="Tab"&&(t.target,clearTimeout(M6))}const g1=h.forwardRef(function(e,n){const[r,i]=h.useState();zr(()=>(n6()&&i("button"),document.addEventListener("keydown",m1),()=>{document.removeEventListener("keydown",m1)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[fd("focus-guard")]:"",style:JA};return h.createElement("span",hd({},e,s))}),$6=h.createContext(null),V6=()=>h.useContext($6),F6=h.forwardRef(function(e,n){return h.createElement("button",hd({},e,{type:"button",ref:n,tabIndex:-1,style:JA}))});function Gl(t){const{context:e,children:n,disabled:r=!1,order:i=["content"],guards:s=!0,initialFocus:o=0,returnFocus:a=!0,modal:l=!0,visuallyHiddenDismiss:c=!1,closeOnFocusOut:u=!0}=t,{open:f,refs:p,nodeId:m,onOpenChange:v,events:w,dataRef:E,elements:{domReference:y,floating:g}}=e,_=N6()?s:!0,x=Zf(i),S=Zf(o),T=Zf(a),R=Mv(),I=V6(),C=typeof o=="number"&&o<0,A=h.useRef(null),b=h.useRef(null),F=h.useRef(!1),N=h.useRef(null),Y=h.useRef(!1),J=I!=null,U=y&&y.getAttribute("role")==="combobox"&&BA(y),re=h.useCallback(function(O){return O===void 0&&(O=g),O?KA(O,YA()):[]},[g]),P=h.useCallback(O=>{const z=re(O);return x.current.map(X=>y&&X==="reference"?y:g&&X==="floating"?g:z).filter(Boolean).flat()},[y,g,x,re]);h.useEffect(()=>{if(r||!l)return;function O(X){if(X.key==="Tab"){Qt(g,_s(Bn(g)))&&re().length===0&&!U&&Xf(X);const V=P(),$=UA(X);x.current[0]==="reference"&&$===y&&(Xf(X),X.shiftKey?Ei(V[V.length-1]):Ei(V[1])),x.current[1]==="floating"&&$===g&&X.shiftKey&&(Xf(X),Ei(V[0]))}}const z=Bn(g);return z.addEventListener("keydown",O),()=>{z.removeEventListener("keydown",O)}},[r,y,g,l,x,p,U,re,P]),h.useEffect(()=>{if(r||!u)return;function O(){Y.current=!0,setTimeout(()=>{Y.current=!1})}function z(X){const V=X.relatedTarget;queueMicrotask(()=>{const $=!(Qt(y,V)||Qt(g,V)||Qt(V,g)||Qt(I==null?void 0:I.portalNode,V)||V!=null&&V.hasAttribute(fd("focus-guard"))||R&&(wa(R.nodesRef.current,m).find(W=>{var te,Q;return Qt((te=W.context)==null?void 0:te.elements.floating,V)||Qt((Q=W.context)==null?void 0:Q.elements.domReference,V)})||P6(R.nodesRef.current,m).find(W=>{var te,Q;return((te=W.context)==null?void 0:te.elements.floating)===V||((Q=W.context)==null?void 0:Q.elements.domReference)===V})));V&&$&&!Y.current&&V!==N.current&&(F.current=!0,v(!1,X))})}if(g&&Ft(y))return y.addEventListener("focusout",z),y.addEventListener("pointerdown",O),!l&&g.addEventListener("focusout",z),()=>{y.removeEventListener("focusout",z),y.removeEventListener("pointerdown",O),!l&&g.removeEventListener("focusout",z)}},[r,y,g,l,m,R,I,v,u]),h.useEffect(()=>{var O;if(r)return;const z=Array.from((I==null||(O=I.portalNode)==null?void 0:O.querySelectorAll("["+fd("portal")+"]"))||[]);if(g){const X=[g,...z,A.current,b.current,x.current.includes("reference")||U?y:null].filter($=>$!=null),V=l?f1(X,_,!_):f1(X);return()=>{V()}}},[r,y,g,l,x,I,U,_]),zr(()=>{if(r||!g)return;const O=Bn(g),z=_s(O);queueMicrotask(()=>{const X=P(g),V=S.current,$=(typeof V=="number"?X[V]:V.current)||g,W=Qt(g,z);!C&&!W&&f&&Ei($,{preventScroll:$===g})})},[r,f,g,C,P,S]),zr(()=>{if(r||!g)return;let O=!1;const z=Bn(g),X=_s(z),V=E.current;N.current=X;function $(W){if(W.type==="escapeKey"&&p.domReference.current&&(N.current=p.domReference.current),["referencePress","escapeKey"].includes(W.type))return;const te=W.data.returnFocus;typeof te=="object"?(F.current=!1,O=te.preventScroll):F.current=!te}return w.on("dismiss",$),()=>{w.off("dismiss",$);const W=_s(z);(Qt(g,W)||R&&wa(R.nodesRef.current,m).some(Q=>{var pe;return Qt((pe=Q.context)==null?void 0:pe.elements.floating,W)})||V.openEvent&&["click","mousedown"].includes(V.openEvent.type))&&p.domReference.current&&(N.current=p.domReference.current),T.current&&Ft(N.current)&&!F.current&&Ei(N.current,{cancelPrevious:!1,preventScroll:O})}},[r,g,T,E,p,w,R,m]),zr(()=>{if(!(r||!I))return I.setFocusManagerState({modal:l,closeOnFocusOut:u,open:f,onOpenChange:v,refs:p}),()=>{I.setFocusManagerState(null)}},[r,I,l,f,v,p,u]),zr(()=>{if(!r&&g&&typeof MutationObserver=="function"){const O=()=>{const X=g.getAttribute("tabindex");x.current.includes("floating")||_s(Bn(g))!==p.domReference.current&&re().length===0?X!=="0"&&g.setAttribute("tabindex","0"):X!=="-1"&&g.setAttribute("tabindex","-1")};O();const z=new MutationObserver(O);return z.observe(g,{childList:!0,subtree:!0,attributes:!0}),()=>{z.disconnect()}}},[r,g,p,x,re]);function L(O){return r||!c||!l?null:h.createElement(F6,{ref:O==="start"?A:b,onClick:z=>v(!1,z.nativeEvent)},typeof c=="string"?c:"Dismiss")}const M=!r&&_&&!U&&(J||l);return h.createElement(h.Fragment,null,M&&h.createElement(g1,{"data-type":"inside",ref:I==null?void 0:I.beforeInsideRef,onFocus:O=>{if(l){const X=P();Ei(i[0]==="reference"?X[0]:X[X.length-1])}else if(I!=null&&I.preserveTabOrder&&I.portalNode)if(F.current=!1,p1(O,I.portalNode)){const X=L6()||y;X==null||X.focus()}else{var z;(z=I.beforeOutsideRef.current)==null||z.focus()}}}),!U&&L("start"),n,L("end"),M&&h.createElement(g1,{"data-type":"inside",ref:I==null?void 0:I.afterInsideRef,onFocus:O=>{if(l)Ei(P()[0]);else if(I!=null&&I.preserveTabOrder&&I.portalNode)if(u&&(F.current=!0),p1(O,I.portalNode)){const X=D6()||y;X==null||X.focus()}else{var z;(z=I.afterOutsideRef.current)==null||z.focus()}}}))}function y1(t){return Ft(t.target)&&t.target.tagName==="BUTTON"}function v1(t){return BA(t)}function Ql(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:s}}=t,{enabled:o=!0,event:a="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:u=!0}=e,f=h.useRef(),p=h.useRef(!1);return h.useMemo(()=>o?{reference:{onPointerDown(m){f.current=m.pointerType},onMouseDown(m){m.button===0&&(l1(f.current,!0)&&c||a!=="click"&&(n&&l&&(!i.current.openEvent||i.current.openEvent.type==="mousedown")?r(!1,m.nativeEvent):(m.preventDefault(),r(!0,m.nativeEvent))))},onClick(m){if(a==="mousedown"&&f.current){f.current=void 0;return}l1(f.current,!0)&&c||(n&&l&&(!i.current.openEvent||i.current.openEvent.type==="click")?r(!1,m.nativeEvent):r(!0,m.nativeEvent))},onKeyDown(m){f.current=void 0,!(m.defaultPrevented||!u||y1(m))&&(m.key===" "&&!v1(s)&&(m.preventDefault(),p.current=!0),m.key==="Enter"&&r(!(n&&l),m.nativeEvent))},onKeyUp(m){m.defaultPrevented||!u||y1(m)||v1(s)||m.key===" "&&p.current&&(p.current=!1,r(!(n&&l),m.nativeEvent))}}}:{},[o,i,a,c,u,s,l,n,r])}const U6=Ym["useInsertionEffect".toString()],B6=U6||(t=>t());function Zc(t){const e=h.useRef(()=>{});return B6(()=>{e.current=t}),h.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}const z6={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},W6={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},H6=t=>{var e,n;return{escapeKeyBubbles:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePressBubbles:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function Yl(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:i,nodeId:s,elements:{reference:o,domReference:a,floating:l},dataRef:c}=t,{enabled:u=!0,escapeKey:f=!0,outsidePress:p=!0,outsidePressEvent:m="pointerdown",referencePress:v=!1,referencePressEvent:w="pointerdown",ancestorScroll:E=!1,bubbles:y}=e,g=Mv(),_=k6()!=null,x=Zc(typeof p=="function"?p:()=>!1),S=typeof p=="function"?x:p,T=h.useRef(!1),{escapeKeyBubbles:R,outsidePressBubbles:I}=H6(y),C=Zc(b=>{if(!n||!u||!f||b.key!=="Escape")return;const F=g?wa(g.nodesRef.current,s):[];if(!R&&(b.stopPropagation(),F.length>0)){let N=!0;if(F.forEach(Y=>{var J;if((J=Y.context)!=null&&J.open&&!Y.context.dataRef.current.__escapeKeyBubbles){N=!1;return}}),!N)return}i.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1,r6(b)?b.nativeEvent:b)}),A=Zc(b=>{const F=T.current;if(T.current=!1,F||typeof S=="function"&&!S(b))return;const N=UA(b),Y="["+fd("inert")+"]",J=Bn(l).querySelectorAll(Y);let U=nt(N)?N:null;for(;U&&!ql(U);){const L=ns(U);if(L===Bn(l).body||!nt(L))break;U=L}if(J.length&&nt(N)&&!i6(N)&&!Qt(N,l)&&Array.from(J).every(L=>!Qt(U,L)))return;if(Ft(N)&&l){const L=N.clientWidth>0&&N.scrollWidth>N.clientWidth,M=N.clientHeight>0&&N.scrollHeight>N.clientHeight;let O=M&&b.offsetX>N.clientWidth;if(M&&sn(N).direction==="rtl"&&(O=b.offsetX<=N.offsetWidth-N.clientWidth),O||L&&b.offsetY>N.clientHeight)return}const re=g&&wa(g.nodesRef.current,s).some(L=>{var M;return Yf(b,(M=L.context)==null?void 0:M.elements.floating)});if(Yf(b,l)||Yf(b,a)||re)return;const P=g?wa(g.nodesRef.current,s):[];if(P.length>0){let L=!0;if(P.forEach(M=>{var O;if((O=M.context)!=null&&O.open&&!M.context.dataRef.current.__outsidePressBubbles){L=!1;return}}),!L)return}i.emit("dismiss",{type:"outsidePress",data:{returnFocus:_?{preventScroll:!0}:e6(b)||t6(b)}}),r(!1,b)});return h.useEffect(()=>{if(!n||!u)return;c.current.__escapeKeyBubbles=R,c.current.__outsidePressBubbles=I;function b(Y){r(!1,Y)}const F=Bn(l);f&&F.addEventListener("keydown",C),S&&F.addEventListener(m,A);let N=[];return E&&(nt(a)&&(N=Ui(a)),nt(l)&&(N=N.concat(Ui(l))),!nt(o)&&o&&o.contextElement&&(N=N.concat(Ui(o.contextElement)))),N=N.filter(Y=>{var J;return Y!==((J=F.defaultView)==null?void 0:J.visualViewport)}),N.forEach(Y=>{Y.addEventListener("scroll",b,{passive:!0})}),()=>{f&&F.removeEventListener("keydown",C),S&&F.removeEventListener(m,A),N.forEach(Y=>{Y.removeEventListener("scroll",b)})}},[c,l,a,o,f,S,m,n,r,E,u,R,I,C,A]),h.useEffect(()=>{T.current=!1},[S,m]),h.useMemo(()=>u?{reference:{onKeyDown:C,[z6[w]]:b=>{v&&(i.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1,b.nativeEvent))}},floating:{onKeyDown:C,[W6[m]]:()=>{T.current=!0}}}:{},[u,i,v,m,w,r,C])}function Xl(t){var e;t===void 0&&(t={});const{open:n=!1,onOpenChange:r,nodeId:i}=t,[s,o]=h.useState(null),a=((e=t.elements)==null?void 0:e.reference)||s,l=XF(t),c=Mv(),u=Zc((x,S)=>{x&&(p.current.openEvent=S),r==null||r(x,S)}),f=h.useRef(null),p=h.useRef({}),m=h.useState(()=>A6())[0],v=GA(),w=h.useCallback(x=>{const S=nt(x)?{getBoundingClientRect:()=>x.getBoundingClientRect(),contextElement:x}:x;l.refs.setReference(S)},[l.refs]),E=h.useCallback(x=>{(nt(x)||x===null)&&(f.current=x,o(x)),(nt(l.refs.reference.current)||l.refs.reference.current===null||x!==null&&!nt(x))&&l.refs.setReference(x)},[l.refs]),y=h.useMemo(()=>({...l.refs,setReference:E,setPositionReference:w,domReference:f}),[l.refs,E,w]),g=h.useMemo(()=>({...l.elements,domReference:a}),[l.elements,a]),_=h.useMemo(()=>({...l,refs:y,elements:g,dataRef:p,nodeId:i,floatingId:v,events:m,open:n,onOpenChange:u}),[l,i,v,m,n,u,y,g]);return zr(()=>{const x=c==null?void 0:c.nodesRef.current.find(S=>S.id===i);x&&(x.context=_)}),h.useMemo(()=>({...l,context:_,refs:y,elements:g}),[l,y,g,_])}function tp(t,e,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...t,...e.map(i=>i?i[n]:null).concat(t).reduce((i,s)=>(s&&Object.entries(s).forEach(o=>{let[a,l]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof l=="function"){var c;(c=r.get(a))==null||c.push(l),i[a]=function(){for(var u,f=arguments.length,p=new Array(f),m=0;m<f;m++)p[m]=arguments[m];return(u=r.get(a))==null?void 0:u.map(v=>v(...p)).find(v=>v!==void 0)}}}else i[a]=l}),i),{})}}function Jl(t){t===void 0&&(t=[]);const e=t,n=h.useCallback(s=>tp(s,t,"reference"),e),r=h.useCallback(s=>tp(s,t,"floating"),e),i=h.useCallback(s=>tp(s,t,"item"),t.map(s=>s==null?void 0:s.item));return h.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}function $v(t,e){e===void 0&&(e={});const{open:n,floatingId:r}=t,{enabled:i=!0,role:s="dialog"}=e,o=GA();return h.useMemo(()=>{const a={id:r,role:s};return i?s==="tooltip"?{reference:{"aria-describedby":n?r:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":s==="alertdialog"?"dialog":s,"aria-controls":n?r:void 0,...s==="listbox"&&{role:"combobox"},...s==="menu"&&{id:o}},floating:{...a,...s==="menu"&&{"aria-labelledby":o}}}:{}},[i,s,n,r,o])}function ZA({audioRef:t,theme:e,song:n,lyric:r}){const i=jn(),{userSongs:s,setUserSongs:o}=ln(),{setSuccessToast:a,setErrorToast:l}=Ln(),[c,u]=h.useState(!1),[f,p]=h.useState(!1),[m,v]=h.useState(r?r.base:""),[w,E]=h.useState([]),[y,g]=h.useState(r?r.real_time:[]),[_,x]=h.useState(!1),[S,T]=h.useState(1),[R,I]=h.useState(!1),[C,A]=h.useState(!1),[b,F]=h.useState(y?y.length:0),N=h.useRef(!0),Y=h.useRef(null),J=h.useRef(0),U=h.useRef(0),{refs:re,floatingStyles:P,context:L}=Xl({open:_,onOpenChange:x,placement:"bottom",middleware:[Vh(10)],whileElementsMounted:Kl}),M=Ql(L),O=Yl(L),{getReferenceProps:z,getFloatingProps:X}=Jl([M,O]),V=h.useMemo(()=>y.length>=w.length,[w,y,f]),$=h.useMemo(()=>y.length===w.length-1,[w,y,f]),W=h.useMemo(()=>f&&!!w.length&&!V,[V,w,f]),te=h.useMemo(()=>!!w.length,[w]),Q=()=>{const se=t.current;se&&(se.play(),u(!0),p(!0))},pe=()=>{const se=t.current;se&&(se.pause(),u(!1))},Lt=se=>{const Re=t.current;Re&&(Re.playbackRate=se,T(se))},le=()=>{if(!Y.current)return;const se=Y.current;v(se.value),A(!1)},Ie=se=>{const Re=t.current;Re&&(Re.currentTime=se)},ie=h.useCallback(()=>{if(!w.length)return;const se=t.current;if(!se||V||U.current==+se.currentTime.toFixed(1))return;$?J.current=+se.duration.toFixed(1):J.current=+se.currentTime.toFixed(1);const Re=w[b],Zl={start:U.current,text:Re,end:J.current};U.current=J.current,g([...y,Zl]),F(b+1)},[w,b]),H=()=>{if(b<=0)return;if(t.current){U.current=y[b-1].start,J.current=0;const Re=y.slice(0,b-1);g(Re),F(b-1)}},q=async()=>{try{I(!0),pe(),await yt({collection:"lyrics",data:{real_time:y,base:m},id:n.id});const se={...n,lyric_id:n.id},Re=[...s],Zl=Br(se,Re);if(Zl==null){l({message:"No song found"}),I(!1);return}o(Re),await yt({collection:"songs",data:{lyric_id:n.id},id:n.id}),i(kn({...se,currentIndex:Zl,song_in:"user"})),a({message:"Add lyric successful"}),I(!1)}catch(se){console.log({message:se})}},he=()=>{pe(),ie()},Oe=se=>{const Re=t.current;se==="next"?Re.currentTime+=2:Re.currentTime-=2};h.useEffect(()=>{if(m){const se=m.split(/\r?\n/).filter(Re=>Re);E(se)}w.length&&N.current&&(N.current=!1),console.log("check firstTimeRender",N.current)},[m]),h.useEffect(()=>{const se=t.current;if(se){if(y.length){const Re=y[y.length-1].end;se&&(se.currentTime=Re,U.current=Re)}return se.addEventListener("ended",he),()=>{se.removeEventListener("ended",he)}}},[]);const et=`${e.type==="light"?"text-[#333]":"text-white"}`,ce={section:`bg-${e.alpha} py-[10px] px-[20px] rounded-[12px] w-full`,row:"flex no-scrollbar justify-between gap-[20px]",col:"flex-grow flex flex-col gap-[20px]",formGroup:"flex flex-col gap-[5px] flex-grow",label:"text-md font-[500]",button:`${e.content_bg} rounded-full text-white text-[14px] px-[10px]`,disable:" opacity-60 pointer-events-none ",icon:"h-[20px] w-[20px]",lyricBox:"list-none h-full max-[549px]:w-[100%] pb-[20%]",listItem:`w-full cursor-pointer py-[2px] ${e.content_hover_text}`},Uh=d.jsxs("div",{className:`flex flex-wrap gap-[10px] mb-[20px] ${et}`,children:[d.jsx("button",{onClick:()=>A(!0),className:ce.button,children:m?"Change lyric":"Add lyric"}),d.jsxs("button",{ref:re.setReference,...z(),className:ce.button+"  inline-flex items-center hover:brightness-90 px-[20px] py-[5px] rounded-full text-white text-[14px]",children:[S,"x"]}),c?d.jsx(ee,{variant:"primary",onClick:pe,className:ce.button+(f?"":ce.disable),children:"Pause"}):d.jsx(ee,{variant:"primary",onClick:Q,className:ce.button+(c||!te?ce.disable:""),children:"Play"}),d.jsx(ee,{variant:"primary",onClick:ie,className:ce.button+(!W&&ce.disable),children:d.jsx(uN,{className:"w-[16px]"})}),d.jsx(ee,{variant:"primary",onClick:H,className:ce.button+(!y.length||!w.length?ce.disable:""),children:d.jsx(HP,{className:"w-[16px]"})}),d.jsxs(ee,{variant:"primary",onClick:()=>Oe("prev"),className:ce.button+(!f||!w.length?ce.disable:""),children:[d.jsx(sP,{className:"w-[16px] mr-[5px]"}),"2s"]}),d.jsxs(ee,{variant:"primary",onClick:()=>Oe("next"),className:ce.button+(!f||!w.length?ce.disable:""),children:["2s",d.jsx(lP,{className:"w-[16px] ml-[5px]"})]})]});return d.jsxs(d.Fragment,{children:[Uh,d.jsxs("div",{className:`${ce.row} ${ce.section} mb-[0] h-[60vh] pb min-h-[200px] overflow-auto`,children:[d.jsx("div",{className:ce.lyricBox+"min-w-[50%] max-w-[50%] pr-[20px]",children:w.length?d.jsx(d.Fragment,{children:w.map((se,Re)=>d.jsx(uS,{firstTimeRender:N,className:"pb-[30px] leading-[1.2]",inUpload:!0,active:Re===b,done:Re!=b,children:se},Re))}):d.jsx("h1",{children:"Base lyric..."})}),d.jsx("div",{className:ce.lyricBox+" border-none w-[50%]",children:!!(y!=null&&y.length)&&y.map((se,Re)=>d.jsxs("div",{className:"pb-[10px]",children:[d.jsx("p",{className:"text-[16px] leading-[1.2] font-bold select-none",children:se.text}),d.jsxs("div",{className:"flex gap-[10px] h-[20px]",children:[d.jsxs("button",{className:` ${e.content_hover_text}`,onClick:()=>Ie(se.start),children:[se.start,"s"]}),d.jsx("span",{children:" - "}),d.jsxs("button",{className:` ${e.content_hover_text}`,onClick:()=>Ie(se.end),children:[se.end,"s"]})]})]},Re))})]}),d.jsx(ee,{isLoading:R,className:`${e.content_bg} text-[14px] rounded-full mt-[20px]`,variant:"primary",onClick:()=>q(),children:"Save"}),_&&d.jsx(Gl,{context:L,modal:!1,children:d.jsx("div",{className:"z-[99]",ref:re.setFloating,style:P,...X(),children:d.jsx(Gn,{theme:e,children:d.jsxs("ul",{className:"w-[50px] text-center text-[14px]",children:[d.jsx("li",{onClick:()=>Lt(1),className:`
                  ${S===1&&e.content_text} 
                  ${ce.listItem}`,children:"1x"}),d.jsx("li",{onClick:()=>Lt(1.2),className:`
                  ${S===1.2&&e.content_text}
                  ${ce.listItem}`,children:"1.2x"}),d.jsx("li",{onClick:()=>Lt(1.5),className:`
                  ${S===1.5&&e.content_text}
                  ${ce.listItem}`,children:"1.5x"})]})})})}),C&&d.jsx(hs,{setOpenModal:A,children:d.jsxs("div",{className:`w-[700px] max-w-[90vw]  rounded-[8px] p-[20px] ${e.side_bar_bg} ${et}`,children:[d.jsx("textarea",{ref:Y,value:m,onChange:se=>v(se.target.value),className:"w-full rounded-[4px] mb-[10px] min-h-[50vh] bg-transparent border p-[10px]"}),d.jsx(ee,{variant:"primary",onClick:()=>le(),className:ce.button,children:"Save"})]})})]})}const eC=({audioEle:t,songLyric:e,className:n})=>{const[r,i]=h.useState(0),s=h.useRef(!0),o=h.useRef("instant"),a=h.useRef(null),l=h.useCallback(()=>{i(t.currentTime)},[]),c=()=>e.real_time.map((u,f)=>{const m=r>=u.start-.3&&u.end>r+.3;return d.jsx(uS,{firstTimeRender:s,scrollBehavior:o,done:!m&&r>u.end,active:m,className:"mb-[30px]",children:u.text},f)});return h.useEffect(()=>{if(t)return t.addEventListener("timeupdate",l),()=>{i(0),s.current=!0;const u=a.current;u&&(u.scrollTop=0),t&&t.removeEventListener("timeupdate",l)}},[]),e.real_time.length?d.jsx("div",{ref:a,className:`${n&&n} overflow-y-auto overflow-x-hidden no-scrollbar h-full pt-[30px] mask-image`,children:c()}):d.jsx("h1",{className:"text-[50px] mt-[30px] text-center",children:"..."})},q6="/React-Zingmp3/assets/icon-zing-b16ab47b.svg",K6=({audioEle:t,isWaiting:e,setIsOpenFullScreen:n,isPlaying:r})=>{const i=jn(),s=wt(_t),{userSongs:o}=ln(),{theme:a}=ct(),{song:l}=s,c=()=>{t==null||t.play()},u=()=>{t==null||t.pause()},f=()=>{r?u():c()},p=()=>{let m=l.currentIndex+1,v;m<o.length?v=o[m]:(v=o[0],m=0),i(kn({...v,currentIndex:m,song_in:l.song_in}))};return d.jsx("div",{className:`fixed bottom-0 w-full h-[70px] border-t z-40  px-[20px] ${a.bottom_player_bg}`,children:d.jsxs("div",{className:"flex flex-row  h-full",children:[d.jsx("div",{onClick:()=>n(!0),className:"mobile-current-song flex-grow",children:d.jsxs("div",{className:" flex flex-row items-center flex-grow h-full",children:[d.jsx("div",{className:"w-[40px] h-[40px]",children:d.jsx("img",{className:"w-full object-cover object-center rounded-full",src:l.image_url?l.image_url:q6})}),d.jsx("div",{className:"flex-grow  ml-[10px]",children:l.song_url&&d.jsxs(d.Fragment,{children:[d.jsx("h5",{className:"text-[18px] font-[500] line-clamp-1",children:(l==null?void 0:l.name)||"name"}),d.jsx("p",{className:"text-[14px] font-[400] line-clamp-1",children:(l==null?void 0:l.singer)||"singer"})]})})]})}),d.jsxs("div",{className:`mobile-bottom-player flex items-center h-full pl-[15px] gap-[10px] ${!l.name&&"opacity-60 pointer-events-none"}`,children:[d.jsx("button",{className:"p-[4px]",onClick:()=>f(),children:e?d.jsx(SN,{className:"w-[35px]"}):r?d.jsx(So,{className:"w-[35px]"}):d.jsx(ZE,{className:"w-[35px]"})}),d.jsx("button",{onClick:p,className:"p-[4px]",children:d.jsx(XE,{className:"w-[35px]"})})]})]})})};function G6({audioEle:t,isPlaying:e,isWaiting:n,isOpenFullScreen:r,setIsPlaying:i,setIsWaiting:s,setIsOpenFullScreen:o}){const a=jn(),{theme:l}=ct(),{userInfo:c}=xn(),{song:u}=wt(_t),{actuallySongs:f}=Bl(),[p,m]=h.useState(!1),[v,w]=h.useState("Playing"),[E,y]=h.useState(!1),g=h.useRef(),_=h.useRef(null),x=h.useRef(null),S=h.useRef(null),T=h.useRef(null),R=h.useRef(null);mA({bgRef:x,songInStore:u});const I=gA({songInStore:u,audioEle:t}),C=h.useMemo(()=>window.innerHeight,[]),{refs:A,floatingStyles:b,context:F}=Xl({open:p,onOpenChange:m,placement:"bottom-start",middleware:[Vh(10),Nv(),Ov()],whileElementsMounted:Kl}),N=Ql(F),Y=Yl(F),J=$v(F),{getReferenceProps:U,getFloatingProps:re}=Jl([N,Y,J]),P=V=>{let $=0,W=V.parentElement;for(;!W.classList.contains("item-container")&&$<5;)W=W.parentElement,$++;return W},L={height:"0px",opacity:"0",padding:"0px 5px",border:"none"},M=V=>{let $=0,W=V.previousElementSibling;for(;W&&$<20;)Object.assign(W.style,L),$++,W=W.previousElementSibling},O=(V,$,W)=>{const te=V.target,Q=P(te),pe=M(Q);Object.assign(Q.style,L),console.log("check previousSibling",pe),setTimeout(()=>{a(kn({...$,currentIndex:W,song_in:u.song_in}))},250)};h.useEffect(()=>{var W;g.current=(W=_.current)==null?void 0:W.offsetWidth;const V=S.current,$=T.current;V.style.height=`${C-65}px`,$.style.height=`${C-(65+60+20)-120}px`},[]);const z=h.useMemo(()=>d.jsx(d.Fragment,{children:u&&d.jsxs(d.Fragment,{children:[d.jsx("h3",{className:"text-white text-[16px] mt-[10px] mb-[7px]",children:"Playing next"}),u.currentIndex===f.length-1?d.jsx("p",{children:"..."}):d.jsx("div",{ref:R,className:"relative h-full no-scrollbar overflow-auto transition-transform duration-200",children:f.map((V,$)=>{if($>u.currentIndex)return d.jsx(_l,{theme:l,data:V,onClick:W=>O(W,V,$),active:V.song_url===u.song_url},$)})})]})}),[u,f]),X=h.useMemo(()=>d.jsx(eC,{className:"flex-shrink-0 overflow-auto",audioEle:t,songLyric:I}),[I]);return d.jsxs("div",{className:`fixed inset-0 z-50 bg-zinc-900 text-white overflow-hidden  ${r?"translate-y-0":"translate-y-full"} transition-[transform] duration-300 ease-in-out delay-150  `,children:[d.jsx("div",{ref:x,className:"absolute  inset-0 bg-no-repeat bg-cover bg-center blur-[99px]"}),d.jsx("div",{className:"absolute inset-0 bg-zinc-900 bg-opacity-60 bg-blend-multiply"}),d.jsxs("div",{className:"absolute inset-0 z-10",children:[d.jsxs("div",{className:"h-[65px] p-[15px]",children:[d.jsx("button",{ref:A.setReference,...U(),className:"rounded-full p-[5px] bg-gray-500 bg-opacity-20 absolute left-[15px]",children:d.jsx(Wg,{className:"w-[25px]"})}),d.jsx(iC,{className:"w-fit",idle:!1,setActiveTab:w,activeTab:v,tabs:["Songs","Playing","Lyric"]}),d.jsx("button",{className:"bg-gray-500 bg-opacity-20 rounded-full absolute right-[15px] top-[15px] p-[6px]",onClick:()=>o(!1),children:d.jsx(GE,{className:"w-[25px]"})}),p&&d.jsx(Gl,{context:F,modal:!1,children:d.jsx("div",{className:"z-[99]",ref:A.setFloating,style:b,...re(),children:d.jsx(Vv,{loggedIn:!!c.email,setIsOpenMenu:m})})})]}),d.jsxs("div",{ref:S,className:"relative px-[15px] overflow-hidden",children:[d.jsxs("div",{className:`${v!="Playing"&&!E&&"flex"}`,children:[h.useMemo(()=>d.jsx(eu,{theme:l,classNames:`flex-shrink-0 transition-[height, width] origin-top-left ${v!="Playing"?"max-[549px]:w-[60px] max-[549px]:h-[60px]":"justify-center items-center w-full px-[20px]"}`,active:!0,data:u}),[u,e,v]),d.jsxs("div",{className:`flex flex-grow justify-between items-center ${v!="Playing"?"ml-[10px]":"mt-[15px]"}`,children:[d.jsxs("div",{className:"group flex-grow overflow-hidden",children:[d.jsx("div",{className:"h-[30px] mask-image-horizontal",children:h.useMemo(()=>d.jsx(rd,{songInStore:u,autoScroll:!0,classNames:`${v==="Playing"?"text-[24px] leading-[30px]":"text-[20px]"} font-[500]`,label:u.name||"..."}),[u,v])}),d.jsx("div",{className:"h-[30px] mask-image-horizontal",children:h.useMemo(()=>d.jsx(rd,{songInStore:u,autoScroll:!0,classNames:`${v==="Playing"?"text-[22px]":"text-[16px] text-gray-500"} font-[400]`,label:u.singer||"..."}),[u,v])})]}),d.jsx("div",{className:"pl-[20px]",children:d.jsx("button",{className:"p-[5px]",children:d.jsx(JE,{className:"w-[25px]"})})})]})]}),d.jsx("div",{ref:T,className:`fixed bottom-[120px] overflow-hidden right-0 left-0 ${v==="Lyric"?"block":"hidden"}`,children:d.jsx("div",{className:"relative h-full",children:X})}),d.jsx("div",{className:`absolute h-full top-[60px] w-full ${v==="Songs"?"block":"hidden"}`,children:d.jsx("div",{className:"relative",children:z})}),d.jsx("div",{className:`absolute bottom-[30px] left-[15px] right-[15px] ${v==="Songs"&&"opacity-0 pointer-events-none h-[0px] mb-[0px]"}`,children:d.jsx("div",{className:"flex flex-col justify-start flex-1",children:d.jsx("div",{className:"flex-col-reverse flex",children:h.useMemo(()=>d.jsx(CA,{audioEle:t,isOpenFullScreen:!1,isPlaying:e,isWaiting:n,setIsWaiting:s,setIsPlaying:i,idle:!1}),[e,n])})})})]})]})]})}const Q6=()=>{const t=wt(_t),{song:e}=t,[n,r]=h.useState(!1),[i,s]=h.useState(!1),[o,a]=h.useState(!1),[l,c]=h.useState(!1),u=h.useRef(null),f=h.useMemo(()=>window.innerWidth<550,[]),p=d.jsxs(d.Fragment,{children:[d.jsx(wF,{audioEle:u.current,idle:!1,isPlaying:n,isOpenFullScreen:o,setIsOpenFullScreen:a}),d.jsx(vF,{audioEle:u.current,idle:!1,isPlaying:n,isWaiting:i,isOpenFullScreen:o,setIsPlaying:r,setIsWaiting:s,setIsOpenFullScreen:a})]}),m=d.jsxs(d.Fragment,{children:[d.jsx(G6,{audioEle:u.current,idle:!1,isPlaying:n,isWaiting:i,isOpenFullScreen:o,setIsPlaying:r,setIsWaiting:s,setIsOpenFullScreen:a}),d.jsx(K6,{audioEle:u.current,idle:!1,isPlaying:n,isOpenFullScreen:o,isWaiting:i,setIsOpenFullScreen:a})]});return h.useEffect(()=>{l||u.current&&c(!0)},[]),d.jsxs("div",{className:"absolute",children:[d.jsx("audio",{ref:u,src:e.song_url,className:"hidden"}),l?f?m:p:""]})},Hm=({data:t,inDetail:e,theme:n,onClick:r})=>{const i={button:`rounded-full text-[#fff] p-[4px] hover:bg-${n==null?void 0:n.alpha}`,imageContainer:"absolute inset-0 overflow-hidden rounded-[6px]",absoluteContainer:"absolute hidden inset-0 group-hover:block",overlay:"absolute inset-0 bg-[#333] opacity-60",buttonContainer:"justify-center items-center h-full relative z-10 relative",buttonWrapper:"flex items-center justify-center z-10 h-full w-full relative"},s=h.useMemo(()=>window.innerWidth<550,[]);return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"group relative pt-[100%]",onClick:()=>s&&r&&r(),children:d.jsxs("div",{className:i.imageContainer,children:[d.jsx(as,{classNames:"",src:t.image_url,blurHashEncode:t.blurhash_encode}),!s&&!e&&d.jsxs("div",{className:i.absoluteContainer,children:[d.jsx("div",{className:i.overlay}),d.jsx("div",{className:i.buttonWrapper,children:d.jsx(_n,{to:`${$e.Playlist}/${t.id}`,children:d.jsx(ee,{onClick:()=>r&&r(),className:i.button,children:d.jsx(So,{className:"w-[35px]"})})})})]})]})}),!e&&d.jsx("h5",{className:"text-[20px] font-[500]",children:t.name})]})};function _1({onClick:t,theme:e,active:n}){return d.jsx(d.Fragment,{children:d.jsxs("div",{className:"w-[25%] px-[10px] max-[549px]:w-[50%]",children:[d.jsx("div",{onClick:()=>t(e),className:`relative border pt-[100%] rounded-xl ${e.content_hover_border} ${e.side_bar_bg} ${n?e.content_border:"border-transparent"}`,children:n&&d.jsx("div",{className:"absolute bottom-[10px] right-[10px]",children:d.jsx(KE,{className:`${e.content_text} w-[25px]`})})}),d.jsx("p",{className:"text-[14px] mt-[6px]",children:e.name})]})})}function Vv({setIsOpenMenu:t,loggedIn:e}){const{theme:n,setTheme:r}=ct(),{setUserInfo:i}=xn(),{initSongsContext:s,adminSongs:o,adminPlaylists:a}=ln(),[l,c]=h.useState(!1),u=h.useRef(),f=h.useCallback(T=>{localStorage.setItem("theme",JSON.stringify(T.id)),r(T)},[]),p=T=>d.jsxs("div",{className:"flex justify-between py-[15px]",children:[d.jsx("h1",{className:"text-[26px] font-semibold",children:T}),d.jsx(ee,{onClick:()=>w(),size:"normal",variant:"circle",children:d.jsx(Vn,{})})]}),m=async()=>{try{await OL(es),i({...Cv.userInfo,status:"finish"}),s({adminSongs:o,adminPlaylists:a}),w()}catch(T){console.log("signOut error",{messsage:T})}},v=T=>{switch(T){case"theme":u.current="theme";break;case"info":u.current="info";break;case"logout":u.current="confirm";break;default:u.current="info",console.log("invalid case")}c(!0)},w=()=>{c(!1),t(!1)},E={popupWrapper:"w-[700px] max-w-[90vw] max-[549px]:w-[85vw]",themeContainer:"overflow-auto no-scrollbar h-[calc(70vh-60px)]  pb-[5vh]",themeList:"flex flex-row -mx-[10px] flex-wrap gap-y-[20px]",themeItem:"w-[25%] px-[10px] max-[549px]:w-[50%]"},y=h.useMemo(()=>d.jsxs("div",{className:E.popupWrapper,children:[p("Zingmp3 clone"),d.jsxs("div",{className:"",children:[d.jsx("h5",{className:"text-lg font-bold",children:"Cc cng ngh s dng:"}),d.jsx("ul",{children:d.jsx("li",{className:"text-lg my-[10px]  ml-[20px]",children:"- Ny tui ly ca ngi ta nn hng bit   "})}),d.jsx("a",{href:"asldj",target:"_blank",className:"text-lg font-bold",children:"#Github"})]})]}),[]),g=[],_=[];h.useMemo(()=>{Zp.forEach((T,R)=>{const I=T.id===n.id;if(T.type==="dark")return g.push(d.jsx(_1,{active:I,theme:T,onClick:f},R));_.push(d.jsx(_1,{active:I,theme:T,onClick:f},R))})},[n]);const x=h.useMemo(()=>d.jsxs("div",{className:E.popupWrapper,children:[p("Appearance"),d.jsxs("div",{className:E.themeContainer,children:[d.jsx("h2",{className:"text-md font-semibold mb-[10px]",children:"Dark"}),d.jsx("div",{className:E.themeList,children:g}),d.jsx("h2",{className:"text-md font-semibold mb-[10px] mt-[30px]",children:"Light"}),d.jsx("div",{className:E.themeList,children:_})]})]}),[n]),S=h.useMemo(()=>No({loading:!1,label:"Log out ?",theme:n,callback:m,setOpenModal:w,className:"w-[auto]"}),[n]);return d.jsxs(d.Fragment,{children:[d.jsxs(Gn,{theme:n,classNames:"flex flex-col gap-[15px]",children:[d.jsxs(ee,{onClick:()=>v("theme"),children:[d.jsx(YP,{className:"w-6 h-6 mr-2"}),"Themes"]}),e&&d.jsxs(ee,{onClick:()=>v("logout"),children:[d.jsx(Fk,{className:"w-6 h-6 mr-2"}),"Log out"]}),d.jsxs(ee,{onClick:()=>v("info"),children:[d.jsx(VP,{className:"w-6 h-6 mr-2"}),"Info"]})]}),l&&d.jsx(hs,{setOpenModal:w,children:d.jsxs(Gn,{theme:n,children:[u.current==="info"&&y,u.current==="theme"&&x,u.current==="confirm"&&S]})})]})}function Y6(){var _;const{theme:t}=ct(),{userInfo:e}=xn(),[n,r]=Mh(es),[i]=AA(es),[s,o]=h.useState(!1),{refs:a,floatingStyles:l,context:c}=Xl({open:s,onOpenChange:o,placement:"right-start",middleware:[Vh(0),Nv(),Ov()],whileElementsMounted:Kl}),u=Ql(c),f=Yl(c),p=$v(c),{getReferenceProps:m,getFloatingProps:v}=Jl([u,f,p]),w=()=>{i()},E=[...Array(3).keys()].map(x=>d.jsxs("div",{className:"px-[10px] py-[5px] flex items-center",children:[d.jsx(ze,{className:"w-[25px] h-[25px] flex-shrink-0"}),d.jsx(ze,{className:"w-[80px] h-[19px] ml-[5px]"})]},x)),y=d.jsxs("div",{className:"flex items-center",children:[d.jsx(ze,{className:"w-[36px] h-[36px] flex-shrink-0 rounded-full"}),d.jsx(ze,{className:"w-[104px] h-[16px] ml-[5px]"})]}),g={container:`pt-[30px] w-[180px] flex-shrink-0 border-r-[1px] h-screen overflow-y-auto ${t.side_bar_bg} border-${t.alpha}`,button:`px-[10px] py-[5px] w-full text-[14px] font-[500] ${t.content_hover_text}`,text:t.type==="light"?"text-[#333]":"text-white",icon:"w-[25px] mr-[5px]",divide:`h-[1px]  w-[calc(100%-20px)] mb-[10px] mt-[20px] mx-auto bg-${t.alpha}`,userName:"text-[16px] font-[500] ml-[8px] line-clamp-1",imageFrame:`w-[36px] h-[36px] flex-shrink-0 rounded-full overflow-hidden ${n!=null&&n.photoURL?"":"flex items-center justify-center bg-[#ccc]"}`};return d.jsxs("div",{className:`${g.container} ${g.text}`,children:[d.jsx("div",{className:"px-[10px] flex items-center",children:r?y:d.jsxs(d.Fragment,{children:[d.jsx("div",{className:g.imageFrame,children:n!=null&&n.photoURL?d.jsx(as,{src:n.photoURL,classNames:"w-full"}):d.jsx("h1",{className:"text-[20px]",children:n!=null&&n.email?(_=n==null?void 0:n.displayName)==null?void 0:_.charAt(1):"Z"})}),d.jsx("h3",{className:g.userName,children:n!=null&&n.email?n==null?void 0:n.displayName:"Guest"})]})}),d.jsx("div",{className:g.divide}),d.jsxs("div",{className:"flex flex-col gap-[15px] items-start",children:[r&&E,!r&&d.jsxs(d.Fragment,{children:[d.jsx(_n,{className:"w-full",to:$e.Home,children:d.jsxs(ee,{className:g.button,children:[d.jsx(DP,{className:g.icon}),"Discover"]})}),n!=null&&n.email?d.jsx(_n,{className:"w-full",to:$e.MySongs,children:d.jsxs(ee,{className:g.button,children:[d.jsx(da,{className:g.icon}),"My songs"]})}):d.jsxs(ee,{onClick:()=>w(),className:g.button,children:[d.jsx(Nk,{className:g.icon}),"Login"]}),d.jsxs("button",{ref:a.setReference,...m(),className:`flex items-center hover:brightness-75 ${g.button} ${s&&t.content_text}`,children:[d.jsx(Wg,{className:g.icon}),"Settings"]})]})]}),s&&d.jsx(Gl,{context:c,modal:!1,children:d.jsx("div",{className:"z-[99]",ref:a.setFloating,style:l,...v(),children:d.jsx(Vv,{loggedIn:!!e.email,setIsOpenMenu:o})})})]})}const tC="data:image/gif;base64,R0lGODlhJAAkAIABAP///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NmRjOGMyNC03YmYxLTQxZTMtYjQ2Zi1mY2ZhMDk4MDE1YWYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTBDRTc0QzlGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTBDRTc0QzhGNDBEMTFFQTk4NDZENjI0QzI1MENFQzgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YzBhNGU4OWYtNjc4Yy00NmMyLTg4NmUtYzIxNGE0NTIwZDRjIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ODRlMDBjYmEtZjhlNy03YzQ4LWE4MTgtNDc3NTI3MGQ1ZTAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQgAAQAsAAAAACQAJAAAAnKMj5nArQ9jc7HWyax+GOx/dCAojltpWmgqYazqvu0kz1StrHgYp6tO6gWAn59wZKSxkjcTM7MUEk/SY1BpmGqeHhs0W8Vywk3tkPw9iztcBLfNW7Pl9PLcXk/f8Xz9vguWB6h254Y2+Id4aLjH2Kc4UQAAIfkECQgAAQAsAAAAACQAJAAAAnSMj6nL7Q+jnAzYS+XFGW7beV/4fADpmGijrkvrJnA2z1Q9hvhG7lznA+lyBpuMGAieDiYlQulkIpvTKk9KFRatv2RW671uxeHskwv+ptHLsRnbhbLPZHW7vK6r6XF21J33Bngnp2fY98UXuNikSOg3B8dYAAAh+QQJCAABACwAAAAAJAAkAAACfIyPqcvtD6OctNqLKdg8N955C7iJI4mQAKam6NUeMTMHda3cr4EnOugCfnY2Yi8Y4hmXKqHSWYQ2mclodSqllmTY7fOqbSK9VnLXHB6Ludk2Vg1nv+Vo9zT+rc/zK3qf/wNmt8aHV0Z4aHj2l+inFqgXiQjJuKgYRnkJUgAAIfkECQgAAQAsAAAAACQAJAAAAnuMj6nL7Q+jnLTaC7K+T2/eeBkYiiQjAlyKsJh5uJYc0BRtTzgMpbsn8fFqQ4cQGCuWjqok0vA7toZR4fRJxDJHzg+Uur16s+Nt86sFM8VcdDncbZPlZvZ5fq/H82rp3m5XxZe29mfoZnWIF9hH1+gDqKiHOPhWSBlJWQAAIfkECQgAAQAsAAAAACQAJAAAAn6Mj6nL7Q8RmDTaQ+u1eW7efVg4ZqLRARIppqsZpW6pQTIbzPZd57jD6+keQQ/NuAu+esDiEkl0HlUxKerXKFKvsCTvuY0qp2Dw8IzTlslTdNf3VrO5Qiu8Hre78d/5HSpHB5imR5g3Jhi2d7OWaGbIN4j4pwjJ6Lco00gJVgAAIfkECQgAAQAsAAAAACQAJAAAAn2EH6nL7XnQmxRGULO7WHsbfRPHiQ95mRsqqQvbBqUGG29K13eYw3tMqXVAwJFOMcsIf7YeizmsLJE45ZHYtPqoPO2TWzxdZVXpOGneYqPBc7mtJnflsekaCkXry3Z61h/VtzcnyGcYN1jnRnj4dQf2V8g46QiIB0ly+bhWAAAh+QQJCAABACwAAAAAJAAkAAACfYyPqcvtD+MDtMobqt6Y7Q90C8iJCamZJ0qpCNu6Bhwen0S/JZTb+wTTpSK92c9RzBwbyRsx6BvyoEYpkCW0RLVVVDbWBSuxW7EzDPrW0OrzmPs2U+Nrevvnzs/11ib+T8ZWVufXB+g1qHZnyAhX6HhIopg4yAfZKEkpiFYAACH5BAkIAAEALAAAAAAkACQAAAJ7jI+py+0Po5y02ouB3tht3jGfFopjuYwqgK5npCLuJ8XHDEK2gZP3ywMGeqwfzZgb9mTCnRLHPAalz1k06SRefVPsEsmthrXgYnf8PZvFa7J6206z4fBs8w4t08t2at+qF6j2h+YnRxiX9ybIhrg3iOdlqDjH6Fa5qFYAACH5BAkIAAEALAAAAAAkACQAAAJ1jI+py+0Po5y02otzArxr1nmfEnIjWZ5bqh4l0Lqs8WK1HNpzcFs9/9o5fkFhg1gUQZBJWISZlECL0l3ThFMCc1lq10mzXhFT8Db6JYubam7Yffa+teVymz5O6+fyuLm+hgd39ReIxRd0d+inmLjH+GX3+FIAACH5BAUIAAEALAAAAAAkACQAAAJwjI+py+0Po5y0PoCzhVlv12EfGI5NCJgMqi5sm7zwIc9BPeOw3vKqb6oBLyUaqshB3o4diZDpSTaN0FTkWUVgo8sslbtlapXh43hqKJfP4Ko1TY574ehue24XffV0KJuf9xa4tifoZih351f4h9hRAAA7",nC=(t,e)=>{const n=[...e.song_ids],r=n.findIndex(o=>o===t.id);n.splice(r,1);const i=n.length,s={...e,count:i,song_ids:n,time:i===0?0:+(e.time-t.duration).toFixed(1)};return console.log("handle playlist prev",e.name,e.song_ids),s.count<0||s.time<0||s.song_ids.length===e.song_ids.length||s.count===e.count||s.time===e.time?{error:!0,newPlaylist:s}:(console.log("handle playlist current",s.name,s.song_ids),{error:!1,newPlaylist:s})},X6=(t,e,n)=>{let r;for(let i of t.in_playlist){const s=e.findIndex(c=>c.id===i),o=s!==-1;if(o)r=e[s];else{const c=n.find(u=>u.id===i);if(!c)return{error:!0};r=c}const{error:a,newPlaylist:l}=nC(t,r);if(a)return{error:!0};o?(console.log("update to existing list "),zl(l,e)):(console.log("push to existing list "),e.push(l))}return{error:!1}},J6=async(t,e)=>{let n=[];for(let r of t.in_playlist){const i=e.find(a=>a.id===r);if(!i)return{error:!0,playlistsNeedToUpdateDoc:n};const{error:s,newPlaylist:o}=nC(t,i);if(s)return{error:!0,playlistsNeedToUpdateDoc:n};n.push(o)}return{error:!1,playlistsNeedToUpdateDoc:n}},w1=(t,e)=>{let n;if(!t.in_playlist.length)return console.log("No song in playlist"),{error:!0,newSong:n};const r=[...t.in_playlist],i=r.findIndex(s=>s===e.id);return r.splice(i,1),n={...t,in_playlist:r},t.in_playlist.length===r.length?(console.log("song in playlist no change"),{error:!0,newSong:n}):{error:!1,newSong:n}},rC=(t,e)=>{let n;const r=[...t.in_playlist];return r.find(s=>s===e.id)?{error:!0,newSong:n}:(r.push(e.id),n={...t,in_playlist:r},r.length===t.in_playlist.length?{error:!0,newSong:n}:{error:!1,newSong:n})},Z6=(t,e)=>{const n=[];if(console.log("delete playlist"),!t)return console.log("no playlist"),{error:!0,songsNeedToUpdate:n};for(let r of e){if(!r.in_playlist.includes(t.id))return console.log("not in playlist"),{error:!0,songsNeedToUpdate:n};const i=[...r.in_playlist],s=i.findIndex(a=>a===t.id);i.splice(s,1);let o={...r,in_playlist:i};if(console.log("check new songs",o),o.in_playlist.length===r.in_playlist.length)return console.log("new song error"),{error:!0,songsNeedToUpdate:n};n.push(o)}return n.length===0?{error:!0,songsNeedToUpdate:n}:{error:!1,songsNeedToUpdate:n}};function xa({data:t,active:e,onClick:n,theme:r,inProcess:i,inPlaylist:s,userInfo:o,userSongs:a,userPlaylists:l,setUserSongs:c,setUserPlaylists:u,songItemActions:f,deleteFromPlaylist:p,selectedSongList:m,isCheckedSong:v,setSelectedSongList:w,setIsCheckedSong:E,handleOpenParentModal:y}){const g=jn(),{setErrorToast:_,setSuccessToast:x}=Ln(),{playlist:S,song:T}=wt(_t),[R,I]=h.useState(!1),[C,A]=h.useState(!1),[b,F]=h.useState(!1),[N,Y]=h.useState(),{refs:J,floatingStyles:U,context:re}=Xl({open:C,onOpenChange:A,middleware:[PF()],whileElementsMounted:Kl}),P=Ql(re),L=Yl(re),{getReferenceProps:M,getFloatingProps:O}=Jl([P,L]),z=h.useMemo(()=>window.innerWidth<550,[]),X=h.useMemo(()=>m?(m==null?void 0:m.indexOf(t))!=-1:!1,[m]),V=ie=>{Y(ie),F(!0)},$=()=>{I(!1),F(!1)},W=h.useCallback(async()=>{if(!o||!a||!l||!c||!u||!f){_({message:"Lack of props"});return}try{I(!0);let ie,H;if(t.in_playlist.length){ie=[...l];const{error:he,playlistsNeedToUpdateDoc:Oe}=await J6(t,ie);if(he||!Oe){$(),_({message:"Error when handle playlist"});return}H=Oe}const q=await f.updateAndSetUserSongs({song:t});if(!q){_({message:"Error when handle user songs"}),$();return}if(H&&ie){for(let he of H)zl(he,ie),he.id===S.id&&g(go(he)),await yt({collection:"playlist",data:he,id:he.id});u(ie,[])}if(await ph(t),await yt({collection:"users",data:{song_ids:q,song_count:q.length},id:o.email}),T.id===t.id){const he=xA({});g(kn({...he,song_in:"user",currentIndex:0}))}x({message:`'${t.name}' deleted`})}catch(ie){console.log({message:ie}),_({})}finally{$()}},[a,T,t]),te=h.useCallback(async(ie,H)=>{if(!ie||!H||!f){_({message:"Lack of props"});return}try{if(t.by==="admin"){console.log("song by admin");const ce=Zw({song:ie,playlist:H});if(ce.count<0||ce.time<0||ce.song_ids.length===H.song_ids.length){_({message:"New playlist error"});return}console.log("check new playlist",ce),await f.setPlaylistDocAndSetUserPlaylists({newPlaylist:ce}),x({message:`'${ie.name}' added to ${H.name}`});return}if(!a||!c){_({message:"Lack of props"});return}const{error:q,newSong:he}=rC(ie,H);if(q||!he){_({message:"New song error"});return}const Oe=[...a];Br(he,Oe);const et=Zw({song:he,playlist:H});if(et.count<0||et.time<0||et.song_ids.length===H.song_ids.length){_({message:"New playlist error"});return}c(Oe),await yt({collection:"songs",data:he,id:he.id}),await f.setPlaylistDocAndSetUserPlaylists({newPlaylist:et}),x({message:`'${ie.name}' added to ${H.name}`})}catch(q){console.log(q),_({})}finally{A(!1)}},[a,t]),Q=h.useCallback(ie=>{if(!w||!m||!E){_({message:"Selected lack of props"});return}E(!0);let H=[...m];const q=H.indexOf(ie);q===-1?H.push(ie):H.splice(q,1),w(H),H.length||E(!1)},[m]),pe={textColor:r.type==="light"?"text-[#333]":"text-[#fff]",button:`${r.content_hover_bg} p-[8px] rounded-full`,songListButton:"mr-[10px] text-[inherit]",itemContainer:`border-b border-${r.alpha} ${window.innerWidth>549&&"p-[0px] hover:bg-"+r.alpha}  ${X&&"bg-"+r.alpha}`,imageFrame:"h-[54px] w-[54px] relative rounded-[4px] overflow-hidden group/image flex-shrink-0",before:"after:content-[''] after:absolute after:h-[100%] after:w-[10px] after:right-[100%]",input:`px-[10px] py-[5px] rounded-[4px] bg-transparent border border-${r.alpha} text-[14px] font-[500]`},Lt=d.jsxs("div",{className:`flex flex-row ${i?"opacity-60":""}`,children:[d.jsx(d.Fragment,{children:i?d.jsx("button",{className:`${pe.songListButton}`,children:d.jsx(da,{className:"w-[18px]"})}):d.jsx(d.Fragment,{children:v?d.jsx("button",{onClick:()=>Q(t),className:`${pe.songListButton} text-[inherit]`,children:X?d.jsx(ua,{className:"w-[18px]"}):d.jsx(Au,{className:"w-[18px]"})}):d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>Q(t),className:`${pe.songListButton} hidden group-hover/main:block`,children:d.jsx(Au,{className:"w-[18px] "})}),d.jsx("button",{className:`${pe.songListButton} group-hover/main:hidden group-hover/main:mr-[0px]`,children:d.jsx(da,{className:"w-[18px]"})})]})})}),d.jsxs("div",{className:`${pe.imageFrame}`,children:[d.jsx(as,{src:t.image_url,blurHashEncode:t.blurhash_encode}),!i&&d.jsx(d.Fragment,{children:e?d.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center",children:d.jsx("div",{className:"relative h-[18px] w-[18px]",children:d.jsx("img",{src:tC,alt:""})})}):d.jsx("div",{className:`absolute  inset-0 bg-black bg-opacity-60 
songContainers-center justify-center items-center hidden group-hover/image:flex`,children:d.jsx(ee,{onClick:n,variant:"default",className:"h-[25px] w-[25px] text-white",children:d.jsx(So,{})})})})]}),d.jsxs("div",{className:"ml-[10px]",children:[d.jsx("h5",{className:"text-mg line-clamp-1",children:t.name}),d.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:t.singer})]})]}),le=h.useMemo(()=>d.jsxs("div",{className:"w-[200px]",children:[!z&&d.jsxs(d.Fragment,{children:[d.jsx("h5",{className:"text-mg line-clamp-1",children:t.name}),d.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:t.singer})]}),(o==null?void 0:o.email)&&d.jsx(d.Fragment,{children:s?d.jsx(d.Fragment,{children:!e&&d.jsxs(ee,{className:`mt-[15px] ${r.content_hover_text}`,variant:"list",onClick:()=>p&&p(t),children:[d.jsx(BP,{className:"w-[18px] mr-[5px]"}),"Remove from playlist"]})}):d.jsxs(ee,{className:`mt-[15px] group relative ${r.content_hover_text} ${pe.before}`,variant:"list",children:[d.jsx(Ua,{className:"w-[18px] mr-[5px]"}),"Add to playlist",d.jsx(Gn,{classNames:"w-[100%] absolute right-[calc(100%+5px)] hidden group-hover:block hover:block",theme:r,children:d.jsxs("ul",{className:"w-[150px]",children:[!!(l!=null&&l.length)&&d.jsx(d.Fragment,{children:l.map((ie,H)=>{const q=ie.song_ids.includes(t.id);return d.jsxs("li",{onClick:()=>!q&&te(t,ie),className:`list-none flex rounded-[4px] p-[5px] ${q&&"opacity-60"} ${!q&&r.content_hover_text}`,children:[d.jsx(da,{className:"w-[20px] mr-[5px]"}),d.jsxs("p",{children:[ie.name," ",q&&"(added)"]})]},H)})}),d.jsxs("li",{onClick:()=>y&&y("ADD_PLAYLIST"),className:`list-none flex rounded-[4px] p-[5px] ${r.content_hover_text}`,children:[d.jsx(Ua,{className:"w-[18px] mr-[5px]"}),"Add new playlist"]})]})})]})}),t.by!="admin"&&d.jsxs(d.Fragment,{children:[d.jsxs(ee,{onClick:()=>V("edit"),className:`${r.content_hover_text}`,variant:"list",children:[d.jsx(Hg,{className:"w-[18px] mr-[5px]"}),"Edit"]}),t.lyric_id?d.jsx(_n,{to:`/React-Zingmp3/mysongs/edit/${t.id}`,children:d.jsxs(ee,{className:`${r.content_hover_text}`,variant:"list",children:[d.jsx(s_,{className:"w-[18px] mr-[5px]"}),"Edit lyric"]})}):d.jsx(_n,{to:`/React-Zingmp3/mysongs/edit/${t.id}`,children:d.jsxs(ee,{className:`${r.content_hover_text}`,variant:"list",children:[d.jsx(s_,{className:"w-[18px] mr-[5px]"}),"Add lyric"]})}),d.jsxs(ee,{onClick:()=>V("confirm"),className:`${r.content_hover_text}`,variant:"list",children:[d.jsx(qg,{className:"w-[18px] mr-[5px]"}),"Delete"]})]}),d.jsxs("p",{className:"opacity-60 text-center text-[12px] mt-[10px]",children:["uploaded by ",t.by]})]}),[r,e,l,t,te,p]),Ie=h.useMemo(()=>No({loading:R,label:`Delete '${t.name}'`,desc:"This action cannot be undone",theme:r,callback:W,setOpenModal:F}),[R,r,a,t,T]);return d.jsxs("div",{className:`${!i&&"group/main"} flex flex-row rounded justify-between songContainers-center px-[10px] py-[10px] max-[549px]:px-[0px] ${pe.itemContainer}`,children:[Lt,i?d.jsxs("div",{className:"flex items-center",children:[d.jsx("span",{children:d.jsx(Nd,{className:"w-[20px] mr-[10px] animate-spin"})}),d.jsx("p",{className:"text-[14px]",children:"In process..."})]}):d.jsx(d.Fragment,{children:d.jsxs("div",{className:"flex flex-row items-center gap-x-[5px]",children:[d.jsx(ee,{className:`${pe.button} ${r.type==="light"?"hover:text-[#333]":"hover:text-white"}`,children:d.jsx(JE,{className:"w-[20px]"})}),d.jsxs("div",{className:"w-[80px] flex justify-center songContainers-center",children:[d.jsx("button",{ref:J.setReference,...M(),className:`group-hover/main:block ${pe.button}
            ${C?"block cursor-default":"hidden "}
            ${r.type==="light"?"hover:text-[#333]":"hover:text-white"}
            max-[549px]:block
            `,children:d.jsx(Jk,{className:"w-[20px]"})}),d.jsx("span",{className:`text-[12px] group-hover/main:hidden ${C&&"hidden"} max-[549px]:hidden`,children:nd(t.duration)})]})]})}),C&&!i&&d.jsx(Gl,{context:re,modal:!1,children:d.jsx("div",{className:"z-[99]",ref:J.setFloating,style:U,...O(),children:d.jsx(Gn,{theme:r,children:le})})}),b&&!i&&d.jsx(hs,{setOpenModal:F,children:d.jsxs(Gn,{theme:r,children:[N==="edit"&&d.jsx(SA,{setIsOpenModal:F,setUserSongs:c,theme:r,userSongs:a,data:t}),N==="confirm"&&Ie]})})]})}const eU=({data:t,active:e,hasHover:n,onClick:r,hasTitle:i,classNames:s,theme:o},a)=>{const l={container:"flex flex-col min-[549px]:px-[20px]",imageFrame:"group relative transition-[width] duration-300 origin-center rounded-[6px] overflow-hidden",image:"select-none object-cover object-center rounded w-full",overlay:"absolute inset-0 bg-[#333] bg-opacity-60 items-center justify-center hidden max-[549px]:hidden group-hover:flex",playingGifFrame:"absolute h-[30px] w-[30px] bottom-[15px] left-[15px]",title:"text-2xl text-white  text-center mt-[10px] font-bold max-[549px]:text-xl text-ellipsis line-clamp-1"},c=`${e?"w-[320px] max-[549px]:w-[100%]":"w-[280px] max-[549px]:w-[75%]"}`;if(t)return d.jsxs("div",{ref:a,className:l.container,children:[d.jsx("div",{className:`flex ${s&&s}`,children:d.jsxs("div",{className:`${l.imageFrame} ${c}`,children:[d.jsx("img",{src:t.image_url||"https://placehold.co/100",className:"w-full",alt:""}),n&&!e&&d.jsx("div",{className:l.overlay,children:d.jsx(ee,{onClick:r,variant:"circle",className:`h-[50px] w-[50px] text-white ${o.content_hover_text}`,children:d.jsx(So,{})})}),e&&window.innerWidth>=550&&d.jsx("div",{className:l.playingGifFrame,children:d.jsx("img",{src:tC,alt:""})})]})}),i&&d.jsxs("div",{children:[d.jsx("h2",{className:l.title,children:(t==null?void 0:t.name)||"Some song"}),d.jsx("p",{className:"text-center text-md  text-gray-500 line-clamp-1",children:(t==null?void 0:t.singer)||"..."})]})]})},eu=h.forwardRef(eU),iC=({tabs:t,idle:e,activeTab:n,setActiveTab:r,className:i})=>d.jsx("ul",{className:`flex px-[2px] flex-row py-[4px] h-full px-[4px] items-center bg-indio-650 mx-auto rounded-full bg-gray-500 bg-opacity-20  ${e?"hidden":""}`+i,children:t.map((s,o)=>d.jsx("li",{onClick:()=>r(s),className:`px-[30px] h-full rounded-full max-[549px]:px-[15px] ${n===s?"bg-gray-400 bg-opacity-20 text-white":""}`,children:d.jsx("span",{className:"leading-[27px] font-bold max-[549px]:font-normal",children:s})},o))}),tU=({time:t=3e3,autoClose:e})=>{const{setToasts:n,toasts:r}=Ln(),{theme:i}=ct(),[s,o]=h.useState(""),a=c=>{n(u=>u.filter(f=>f.id!=c))};h.useEffect(()=>{s&&n(c=>c.filter(u=>u.id!=s))},[s]),h.useEffect(()=>{if(!e||!r.length)return;const c=r[r.length-1].id;setTimeout(()=>{o(c)},t)},[r]);const l={container:"fixed z-[99] bottom-[120px] right-[30px] max-[549px]:bottom-[unset] max-[540px]:top-[10px] max-[540px]:right-[10px]"};return d.jsx(d.Fragment,{children:gl.createPortal(d.jsx("div",{className:l.container,children:d.jsx("div",{className:"flex flex-col gap-[10px]",children:!!r.length&&r.map((c,u)=>d.jsx(fF,{onClick:a,theme:i,toast:c},u))})}),document.getElementById("portals"))})};function nU({user:t},e){return e?d.jsx("p",{className:"text-xl mb-4 ml-2",ref:e,children:t.display_name}):d.jsx("p",{className:"text-xl mb-4 ml-2",children:t.display_name})}h.forwardRef(nU);function rU(){const{theme:t}=ct(),[e]=Mh(es),[n,r]=h.useState(!1),{refs:i,floatingStyles:s,context:o}=Xl({open:n,onOpenChange:r,placement:"bottom-end",middleware:[Vh(20),Nv(),Ov()],whileElementsMounted:Kl}),a=Ql(o),l=Yl(o),c=$v(o),{getReferenceProps:u,getFloatingProps:f}=Jl([a,l,c]),p=t.type==="light"?"text-[#333]":"text-[#fff]";return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:`${t.side_bar_bg} ${p}`,children:d.jsxs("div",{className:"container mx-auto flex justify-between items-center h-[50px]",children:[d.jsx("h1",{className:"text-[20px] uppercase",children:"Zing dash board"}),d.jsxs("div",{className:"flex items-center",children:[(e==null?void 0:e.displayName)&&d.jsx("p",{className:"text-[14px] mr-[8px]",children:e.displayName}),d.jsx("div",{className:"w-[30px] h-[30px] rounded-full overflow-hidden border-[#ccc] border",children:(e==null?void 0:e.photoURL)&&d.jsx("img",{src:e.photoURL,className:"w-full",alt:""})}),d.jsx("button",{ref:i.setReference,...u(),className:`flex ml-[12px] justify-center rounded-full items-center h-[30px] w-[30px] hover:brightness-75  ${n&&t.content_text} bg-${t.alpha}`,children:d.jsx(Wg,{className:"w-[24px]"})})]})]})}),n&&d.jsx(Gl,{context:o,modal:!1,children:d.jsx("div",{className:"z-[99]",ref:i.setFloating,style:s,...f(),children:d.jsx(Vv,{loggedIn:!!(e!=null&&e.email),setIsOpenMenu:r})})})]})}function x1({children:t}){const{theme:e}=ct(),n=`${e.type==="light"?"text-[#333]":"text-white"}`;return d.jsxs(d.Fragment,{children:[d.jsx(rU,{}),d.jsx("div",{className:`${e.container} ${n} min-h-screen`,children:t})]})}function iU(){const t=jn(),{theme:e}=ct(),{userInfo:n}=xn(),{loading:r}=Dh(),{adminSongs:i,userPlaylists:s}=ln(),{song:o}=wt(_t),a=kv(),[l]=AA(es),[c,u]=h.useState([]),[f,p]=h.useState(!1),m=(g,_)=>{o.id!==g.id&&t(kn({...g,currentIndex:_,song_in:"admin"}))},v=h.useMemo(()=>window.innerWidth<550,[]),w=()=>{l()},E=h.useMemo(()=>i.map((g,_)=>{const x=g.id===o.id&&o.song_in==="admin";return v?d.jsx("div",{className:"w-full max-[549px]:w-full",children:d.jsx(_l,{theme:e,onClick:()=>m(g,_),active:x,data:g,isCheckedSong:f,selectedSongList:c,setIsCheckedSong:p,setSelectedSongList:u},_)},_):d.jsx("div",{className:"w-full max-[549px]:w-full",children:d.jsx(xa,{theme:e,onClick:()=>m(g,_),active:x,data:g,userInfo:n,isCheckedSong:f,userPlaylists:s,selectedSongList:c,setIsCheckedSong:p,setSelectedSongList:u,songItemActions:a},_)},_)}),[i,e,o,c,f]),y={icon:"w-6 h-6 mr-2 inline"};return d.jsxs(d.Fragment,{children:[v&&d.jsx("div",{className:"pb-[20px]",children:d.jsxs("div",{className:"flex flex-col gap-3 items-start ",children:[d.jsx("h1",{className:"text-[24px] font-bold",children:"Library"}),n.status==="loading"?LN:d.jsx(d.Fragment,{children:n.email?d.jsx(d.Fragment,{children:d.jsx(QN,{className:`py-[10px] border-b border-${e.alpha}`,to:$e.MySongs,icon:d.jsx(da,{className:y.icon+e.content_text}),label:"All songs",arrowIcon:d.jsx(QE,{className:"w-5 h-5 text-gray-500"})})}):d.jsx(ee,{onClick:w,className:`${e.content_bg} rounded-[4px] px-[40px]`,variant:"primary",children:"Login"})})]})}),d.jsxs("div",{className:"pb-[30px]",children:[d.jsx("h3",{className:"text-[24px] font-bold mb-[10px]",children:"Popular"}),r&&nS,!r&&d.jsx(d.Fragment,{children:i.length?E:"No songs jet..."})]})]})}function sU(){const{theme:t}=ct(),{song:e}=wt(_t),{userSongs:n}=ln(),[r,i]=h.useState(),[s,o]=h.useState({base:"",real_time:[]}),a=h.useRef(null),[l,c]=h.useState(!1),u=h.useRef(!0),{errorMsg:f,loading:p,initial:m}=Dh(),v=_i(),w=Pd(),E=h.useCallback(async g=>{console.log("get lyric");try{if(g.lyric_id){c(!0);const x=(await Yu({collection:"lyrics",id:g.lyric_id})).data();o(x)}}catch(_){console.log({message:_})}finally{c(!1)}},[]),y=h.useCallback(async()=>{if(console.log("get song"),e.name&&e.id===w.id)e.by==="admin"?v($e.Home):(i(e),await E(e));else{const g=n.find(_=>_.id===w.id);g?(i(g),await E(g)):v($e.Home)}},[e,n]);return h.useEffect(()=>{m&&u.current&&(r||y(),u.current=!1)},[m]),p||l?d.jsx("h1",{children:d.jsx(Nd,{className:"w-[25px] animate-spin"})}):f?d.jsx("h1",{children:f}):d.jsxs("div",{className:"pb-[30px]",children:[d.jsx("audio",{ref:a,src:r==null?void 0:r.song_url,className:"hidden"}),r&&d.jsxs(d.Fragment,{children:[d.jsxs(_n,{to:$e.MySongs,className:`inline-flex text-[20px] font-bold mb-[14px] ${t.content_hover_text}`,children:[d.jsx(vl,{className:"w-[25px]"}),d.jsx("span",{className:"ml-[12px]",children:r.name})]}),d.jsx(ZA,{lyric:s,audioRef:a,theme:t,song:r})]})]})}function oU(){const{theme:t}=ct(),[e,n]=Mh(es),[r,i]=h.useState([]),[s,o]=h.useState([]),[a,l]=h.useState(!1),[c,u]=h.useState("songs"),[f,p]=h.useState(!1),[m,v]=h.useState(!1),[w,E]=h.useState(""),[y,g]=h.useState([]),[_,x]=h.useState("setting"),S=h.useRef(null),T=h.useRef(""),R=h.useRef(null),I=h.useRef(null),C=_i(),{addedSongIds:A,handleInputChange:b,status:F,tempSongs:N}=EA({audioRef:S,message:T,admin:!0,songs:r,setSongs:i,firstTempSong:I}),Y=h.useMemo(()=>n?0:N.length+r.length,[N,r]),J=async()=>{try{console.log("get songs"),v(!0);const $=Os(Ai(pn,"songs"),js("by","==","admin")),W=await Ls($);if(W.docs){const te=W.docs.map(Q=>({...Q.data(),id:Q.id}));i(te)}}catch($){console.log($),E("get users list error")}finally{v(!1)}},U=async()=>{console.log("get user");try{v(!0);const $=Os(Ai(pn,"users"),js("email","!=",e==null?void 0:e.email)),W=await Ls($);if(W.docs){const te=W.docs.map(Q=>Q.data());console.log("get user",te),o(te)}}catch($){console.log($),E("get users list error")}finally{v(!1)}},re=()=>y.length?g([]):g(r),P=async()=>{try{const $=[...r];v(!0);for(let W of y){await ph(W);const te=r.findIndex(Q=>Q.id===W.id);$.splice(te,1)}v(!1),i($)}catch($){console.log({message:$})}},L=$=>{x($),l(!0)},M=()=>r.map(($,W)=>{const te=y.length?y.some(Q=>$.name===Q.name):!1;return d.jsx(Qf,{inProcess:!1,data:$,adminSongs:r,setAdminSongs:i,isChecked:te,selectedSongList:y,setSelectedSongList:g,theme:t},W)}),O=()=>N.map(($,W)=>{const te=A.some(Q=>Q===$.id);return W==0?d.jsx(Qf,{ref:I,data:$,theme:t,inProcess:!te},W):d.jsx(Qf,{data:$,theme:t,inProcess:!te},W)}),z=()=>s.map(($,W)=>d.jsxs("tr",{className:"",children:[d.jsx("td",{className:V.td,children:d.jsx("div",{className:"h-[44px] w-[44px] ml-[20px]",children:d.jsx(as,{classNames:"rounded-[4px]",src:$.photoURL})})}),d.jsx("td",{className:V.td,children:$.display_name}),d.jsx("td",{className:V.td,children:$.email}),d.jsx("td",{className:V.td,children:rF($==null?void 0:$.latest_seen)})]},W)),X=h.useMemo(()=>No({loading:m,label:`Delete '${y.length} songs'`,desc:"This action cannot be undone",theme:t,callback:P,setOpenModal:l}),[m,t,y]);h.useEffect(()=>{if(n)return;const $=async()=>{try{p(!0)}catch(W){console.log(W)}};if(!e)return C($e.Home);$()},[e]),h.useEffect(()=>{n||!f||(c==="users"&&!s.length&&U(),c==="songs"&&!r.length&&J())},[c,f]);const V={inActiveBtn:`bg-${t.alpha}`,activeBtn:`${t.content_bg}`,td:`py-[10px] my-[10px] border-${t.alpha} border-b-[1px]`,th:"py-[5px]",tableContainer:`border border-${t.alpha} rounded-[4px]`,tableHeader:`border-b border-${t.alpha} ${t.side_bar_bg} flex items-center h-[50px] gap-[15px]`};return d.jsxs(d.Fragment,{children:[d.jsx("input",{onChange:b,type:"file",multiple:!0,accept:".mp3",id:"file",className:"hidden"}),d.jsx("audio",{ref:S,className:"hidden"}),!n&&d.jsxs("div",{className:"container mx-auto pt-[30px] pb-[60px]",children:[d.jsxs("div",{className:"mb-[20px]",children:[d.jsx(ee,{onClick:()=>u("songs"),className:`${c==="songs"?V.activeBtn:V.inActiveBtn}  rounded-full`,variant:"primary",children:"Songs"}),d.jsx(ee,{onClick:()=>u("users"),className:` ${c==="users"?V.activeBtn:V.inActiveBtn} rounded-full ml-[10px]`,variant:"primary",children:"Users"})]}),w&&d.jsx("p",{children:w}),d.jsxs("div",{className:V.tableContainer,children:[d.jsx("div",{className:V.tableHeader,children:y.length?d.jsxs(d.Fragment,{children:[d.jsxs("h2",{className:"ml-[20px]",children:[y.length," selected"]}),d.jsxs("div",{className:"flex items-stretch gap-[12px]",children:[d.jsx(ee,{onClick:()=>L("confirm"),variant:"primary",className:`${V.activeBtn} rounded-full`,children:"Delete"}),d.jsx(ee,{onClick:()=>g([]),variant:"primary",className:`${V.activeBtn} rounded-full`,children:d.jsx(Vn,{className:"w-[20px]"})})]})]}):d.jsx("label",{className:`${t.content_bg} ${F==="uploading"?"opacity-60 pointer-events-none":""} rounded-full ml-[auto] mr-[10px] px-[20px] py-[4px] cursor-pointer`,htmlFor:"file",children:"Upload"})}),c==="songs"&&d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:`${t.bottom_player_bg} w-full text-[14px]`,children:d.jsxs("tr",{children:[d.jsx("th",{className:`${V.th} w-[10%]`,children:d.jsx("input",{className:"scale-[1.2]",onChange:()=>re(),ref:R,checked:r.length?r.length===y.length:!1,type:"checkbox"})}),d.jsx("th",{}),d.jsx("th",{className:`${V.th} text-left`,children:"Name"}),d.jsx("th",{className:`${V.th} text-left`,children:"Singer"}),d.jsx("th",{className:`${V.th} text-left`,children:"Action"})]})}),d.jsx("tbody",{children:Y?d.jsxs(d.Fragment,{children:[!!r.length&&M(),!!N.length&&O()]}):m?d.jsx("tr",{children:d.jsx("td",{colSpan:5,className:`${V.td} text-center`,children:d.jsx("p",{children:"...Loading"})})}):d.jsx("tr",{children:d.jsx("td",{colSpan:5,className:`${V.td} text-center`,children:d.jsx("p",{children:"No song jet..."})})})})]}),c==="users"&&d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"text-[14px]",children:d.jsxs("tr",{children:[d.jsx("th",{}),d.jsx("th",{className:"text-left",children:"Name"}),d.jsx("th",{className:"text-left",children:"Email"}),d.jsx("th",{className:"text-left",children:"Latest Seen"})]})}),d.jsx("tbody",{children:z()})]})]})]}),a&&d.jsx(hs,{setOpenModal:l,children:d.jsx(Gn,{theme:t,children:_==="confirm"&&X})})]})}function aU(){const t=jn(),e=Pd(),{theme:n}=ct(),{userInfo:r}=xn(),{setSuccessToast:i,setErrorToast:s}=Ln(),{setActuallySongs:o}=Bl(),{userSongs:a,userPlaylists:l,setUserPlaylists:c,setUserSongs:u,adminSongs:f}=ln(),{song:p,playlist:m}=wt(_t),[v,w]=h.useState(!1),E=h.useRef(!0),y=_i(),{playlistSongs:g,loading:_}=aF({firstTimeRender:E,playlistInStore:m,songInStore:p}),{setPlaylistDocAndSetUserPlaylists:x}=kv(),[S,T]=h.useState(!1),[R,I]=h.useState(),[C,A]=h.useState([]),[b,F]=h.useState(!1),[N,Y]=h.useState(m.name),J=(le,Ie)=>{if(p.id!==le.id||!p.song_in.includes(m.name)){const ie=m.by==="admin"?`admin-playlist-${m.name}`:`user-playlist-${m.name}`;t(kn({...le,currentIndex:Ie,song_in:ie})),p.song_in.includes(m.name)||o(g)}},U=()=>{const le=g[0];p.song_in.includes(e.name)||J(le,0)},re=h.useCallback(async le=>{const Ie=[...g,...le],ie=[...a],H=[];for(let he of le){const{error:Oe,newSong:et}=rC(he,m);if(Oe){s({message:"handleSongWhenDeleteFromPlaylist error"});return}else et&&(H.push(et),Br(et,ie))}const q=Gf({newPlaylistSongs:Ie,existingPlaylist:m});if(q.count<0||q.time<0||q.song_ids.length===m.song_ids.length){s({message:"New playlist data error"});return}u(ie),await x({newPlaylist:q}),H.forEach(async he=>{await yt({collection:"songs",data:he,id:he.id})}),z(),i({message:`${le.length} songs added`})},[C,S]),P=async le=>{if(!m.song_ids){console.log("Wrong playlist data"),s({});return}const Ie=[...a],ie=[...g],{error:H,newSong:q}=w1(le,m);if(H||!q){s({message:"Handle song when delete from playlist error"});return}Br(q,Ie);const he=ie.findIndex(et=>et.id===le.id);ie.splice(he,1);const Oe=Gf({newPlaylistSongs:ie,existingPlaylist:m});if(Oe.count<0||Oe.time<0||Oe.song_ids.length===m.song_ids.length){s({message:"New playlist data error"});return}u(Ie),await yt({collection:"songs",data:q,id:q.id}),await x({newPlaylist:Oe}),i({message:`'${le.name}' removed`})},L=async()=>{if(!m.song_ids){console.log("Wrong playlist data"),s({});return}if(C.length===1)return P(C[0]);const le=[...g],Ie=[...a],ie=[];for(let q of C){const he=le.findIndex(ce=>ce.id===q.id);le.splice(he,1);const{error:Oe,newSong:et}=w1(q,m);Oe?s({message:"handleSongWhenDeleteFromPlaylist error"}):et&&(ie.push(et),Br(et,Ie))}const H=Gf({newPlaylistSongs:le,existingPlaylist:m});if(H.count<0||H.time<0||H.song_ids.length===m.song_ids.length){s({message:"New playlist data error"});return}u(Ie),ie.forEach(async q=>{console.log("update doc",q.name)}),await x({newPlaylist:H}),i({message:`${C.length} songs removed`})},M=async()=>{try{w(!0);const le=[...l];let Ie=[],ie=[];if(g.length){ie=[...a];const{error:q,songsNeedToUpdate:he}=Z6(m,g);if(q){z(),console.log("Song error when handle delete playlist"),s({});return}Ie=he}if(Ie.length)for(let q of Ie)Br(q,ie),await yt({collection:"songs",data:q,id:q.id});const H=le.findIndex(q=>q.id===m.id);le.splice(H,1),c(le,[]),Ie.length&&u(ie),await tV({collection:"playlist",id:m.id}),await pv(le,r),w(!1),T(!1),t(go({id:"",name:"",song_ids:[],time:0,count:0,by:"",image_by:"",image_file_path:"",image_url:"",blurhash_encode:""})),i({message:`${m.name} deleted`}),y(`${$e.Playlist}`)}catch(le){console.log(le),s({})}},O=le=>{I(le),T(!0)},z=()=>{w(!1),T(!1),F(!1),A([])},X=h.useMemo(()=>g.length,[g]),V=h.useMemo(()=>window.innerWidth<550,[]),$={addSongContainer:"pb-[50px] relative",addSongContent:"max-h-[calc(90vh-50px)] w-[700px] max-w-[80vw] overflow-auto",songItem:"w-full max-[549px]:w-full",editContainer:"w-[700px] max-w-[90vw] max-h-[90vh]",input:"text-[20px] rounded-[4px] px-[10px] h-[40px] mb-[15px] outline-none w-full",button:`${n.content_bg} rounded-full`,playListTop:"w-full flex max-[549px]:flex-col max-[549px]:gap-[12px]",playlistInfoContainer:"ml-[15px] flex flex-col justify-between max-[549px]:ml-0 max-[549px]:mb-[30px] max-[549px]:gap-[12px]",songListContainer:"h-[50px] mb-[10px] flex gap-[20px] max-[549px]:gap-[12px] items-center border-b",countSongText:"text-[14px]] font-semibold text-gray-500 w-[100px]",buttonAddSongContainer:"w-full text-center mt-[30px]"},W=h.useMemo(()=>g.map((le,Ie)=>{const ie=le.id===p.id&&p.song_in.includes(m.name);return V?d.jsx("div",{className:"w-full max-[549px]:w-full",children:d.jsx(_l,{theme:n,onClick:()=>J(le,Ie),active:ie,data:le,isCheckedSong:b,selectedSongList:C,setIsCheckedSong:F,setSelectedSongList:A},Ie)},Ie):d.jsx("div",{className:"w-full max-[549px]:w-full",children:d.jsx(xa,{isCheckedSong:b&&!S,setIsCheckedSong:F,selectedSongList:C,setSelectedSongList:A,deleteFromPlaylist:P,userInfo:r,userSongs:a,setUserSongs:u,onClick:()=>J(le,Ie),theme:n,active:ie,data:le,inPlaylist:!0})},Ie)}),[m.name,p,g,b,C]),te=d.jsxs("div",{className:$.editContainer,children:[d.jsx("label",{htmlFor:"",className:"text-[18px] font-semibold",children:"Name:"}),d.jsx("input",{value:N,onChange:le=>Y(le.target.value),type:"text",className:`${$.input} bg-${n.alpha} ${n.type==="light"?"text-[#333]":"text-white"}`}),d.jsx(ee,{variant:"primary",className:`${n.content_bg} rounded-full self-end mt-[15px]`,children:"Save"})]}),Q=h.useMemo(()=>No({loading:v,label:"Delete playlist ?",theme:n,callback:M,setOpenModal:T}),[v,n]),pe=d.jsxs("div",{className:"flex max-[549px]:flex-col max-[549px]:gap-[12px]",children:[d.jsx("div",{className:"w-1/4 max-[549px]:w-full max-[549px]:px-[20px]",children:d.jsx(ze,{className:"pt-[100%] rounded-[8px]"})}),d.jsxs("div",{className:"min-[550px]:ml-[15px] max-[549px]:flex max-[549px]:mb-[30px] justify-between",children:[d.jsx(ze,{className:"h-[30px]  w-[100px]"}),d.jsx(ze,{className:"h-[20px] mt-[9px] w-[100px]"}),!V&&d.jsxs(d.Fragment,{children:[d.jsx(ze,{className:"h-[20px] mt-[9px] w-[100px]"}),d.jsx(ze,{className:"h-[15px] mt-[9px] w-[200px]"})]})]})]}),Lt=[...Array(4).keys()].map(le=>d.jsxs("div",{className:"flex p-[10px]",children:[d.jsx(ze,{className:"h-[54px] w-[54px] ml-[33px] rounded-[4px]"}),d.jsxs("div",{className:"ml-[10px]",children:[d.jsx(ze,{className:"h-[20px] mb-[5px] w-[150px]"}),d.jsx(ze,{className:"h-[12px] mt-[5px] w-[100px]"})]})]},le));return d.jsxs(d.Fragment,{children:[V&&d.jsxs(_n,{to:$e.MySongs,className:"inline-flex items-center mb-[30px] hover:opacity-75",children:[d.jsx("button",{className:"",children:d.jsx(vl,{className:"w-[25px]"})}),d.jsx("span",{className:"text-[20px] font-semibold leading-1",children:"My songs"})]}),_&&pe,!_&&!!m.name&&d.jsxs("div",{className:$.playListTop,children:[d.jsx("div",{className:"w-1/4 max-[549px]:w-full max-[549px]:px-[20px]",children:d.jsx(Hm,{data:m,inDetail:!0,theme:n})}),d.jsx("div",{className:$.playlistInfoContainer,children:d.jsxs("div",{className:"max-[549px]:flex justify-between items-center gap-[12px]",children:[d.jsxs("h3",{className:"text-[20px] font-semibold max-[549px]:text-[30px] leading-1",children:[m.name,d.jsx("button",{onClick:()=>O("edit"),className:"p-[5px]",children:d.jsx(Hg,{className:"w-[20px]"})})]}),d.jsx("p",{className:"text-[16px]",children:nd(m==null?void 0:m.time)}),d.jsxs("p",{className:"text-[14px] opacity-60 max-[549px]:hidden",children:["create by ",m.by]})]})})]}),d.jsxs("div",{className:"flex items-center mt-[15px] gap-[12px] max-[549px]:justify-center",children:[d.jsxs(ee,{onClick:()=>U(),className:`rounded-full px-[20px] py-[6px] ${n.content_bg} ${!m.song_ids.length&&"opacity-60 pointer-events-none"}`,children:["Play",d.jsx(sN,{className:"ml-[5px] w-[25px]"})]}),d.jsx(ee,{onClick:()=>O("confirm"),className:`p-[8px] rounded-full ${n.content_hover_bg} bg-${n.alpha}`,children:d.jsx(qg,{className:"w-[25px]"})})]}),d.jsxs("div",{className:"pb-[50px]",children:[d.jsxs("div",{className:`${$.songListContainer} border-${n.alpha}`,children:[_&&d.jsx(ze,{className:"h-[20px] w-[150px]"}),b?d.jsx("p",{className:$.countSongText,children:C.length+" selected"}):d.jsx("p",{className:$.countSongText,children:X+" songs"}),b&&a.length&&d.jsxs(d.Fragment,{children:[d.jsx(ee,{onClick:()=>A(g),variant:"primary",className:$.button,children:"All"}),d.jsx(ee,{onClick:()=>L(),variant:"primary",className:$.button,children:"Remove"}),d.jsx(ee,{onClick:()=>{F(!1),A([])},className:"p-[5px]",children:d.jsx(Vn,{className:"w-[20px]"})})]})]}),_&&Lt,!_&&!!g.length&&W,(!!a.length||!!f.length)&&d.jsx("div",{className:$.buttonAddSongContainer,children:d.jsxs(ee,{onClick:()=>O("addSongs"),className:`${n.content_bg} rounded-full`,variant:"primary",children:[d.jsx(Ua,{className:"w-[30px] mr-[5px]"}),"Add song"]})})]}),S&&d.jsx(hs,{setOpenModal:z,children:d.jsxs(Gn,{theme:n,children:[R==="edit"&&te,R==="confirm"&&Q,R==="addSongs"&&d.jsx(e5,{theme:n,handleAddSongsToPlaylist:re,playlistSongs:g})]})})]})}function lU(){const t=jn(),{theme:e}=ct(),{userInfo:n}=xn(),{setErrorToast:r,setSuccessToast:i}=Ln(),{loading:s,errorMsg:o,initial:a}=Dh(),{song:l,playlist:c}=wt(_t),{userPlaylists:u,setUserSongs:f,setUserPlaylists:p,userSongs:m}=ln(),v=kv(),[w,E]=h.useState(!1),[y,g]=h.useState(!1),[_,x]=h.useState("ADD_PLAYLIST"),[S,T]=h.useState(""),R=h.useRef(null),I=h.useRef(null),[C,A]=h.useState([]),[b,F]=h.useState(!1),N=h.useRef(null),Y=h.useRef(""),J=_i(),{tempSongs:U,addedSongIds:re,status:P,handleInputChange:L}=EA({audioRef:N,message:Y,firstTempSong:R,testImageRef:I}),M=H=>{x(H),g(!0)},O=(H,q)=>{(l.id!==H.id||l.song_in!=="user")&&(console.log("set song"),t(kn({...H,currentIndex:q,song_in:"user"})))},z=h.useMemo(()=>s||!a?0:U.length+m.length,[U,m,a,s]),X=h.useMemo(()=>window.innerWidth<550,[]),V=()=>{A([]),F(!1)},$=()=>{E(!1),g(!1)},W=async()=>{let H=!1;const q=[...m],he=[...u];try{E(!0);const Oe=[];for(let ce of C){if(ce.in_playlist.length){H=!0;const{error:se}=X6(ce,Oe,he);if(se){E(!1),$(),r({message:"Error when handle playlist"});return}}const Uh=q.findIndex(se=>se.id===ce.id);q.splice(Uh,1)}for(let ce of Oe)zl(ce,he),ce.id===c.id&&t(go(ce)),await yt({collection:"playlist",data:ce,id:ce.id});H&&p(he,[]),f(q);for(let ce of C)await ph(ce);const et=q.map(ce=>ce.id);UR({songIds:et,userInfo:n}),V(),$(),i({message:`${C.length} songs deleted`})}catch{r({message:"Catch error"})}},te=async()=>{const H=wA(S)+n.email.replace("@gmail.com","");if(!H||!S||!n){r({message:"Add playlist lack of props"});return}const q={id:H,image_by:"",image_file_path:"",image_url:"",by:(n==null?void 0:n.email)||"users",name:S,song_ids:[],count:0,time:0,blurhash_encode:""},he=[...u,q];try{E(!0),await yt({collection:"playlist",data:q,id:H}),await pv(he,n),p(he,[]),$(),T(""),i({message:`'${S}' created`})}catch{r({message:"Add playlist catch error"})}},Q=h.useMemo(()=>{if(U.length)return U.map((H,q)=>{const he=re.some(Oe=>Oe===H.id);return q==0&&!R.current?d.jsx("div",{ref:R,className:"w-full max-[549px]:w-full",children:d.jsx(xa,{theme:e,onClick:()=>O(H,q),inProcess:!he,data:H},q)},q):d.jsx("div",{className:"w-full max-[549px]:w-full",children:d.jsx(xa,{theme:e,onClick:()=>O(H,q),inProcess:!he,data:H},q)},q)})},[U,re,e]),pe=h.useMemo(()=>{if(m.length)return m.map((H,q)=>{const he=H.id===l.id&&l.song_in==="user"&&H.singer===l.singer;return X?d.jsx("div",{className:"w-full max-[549px]:w-full",children:d.jsx(_l,{theme:e,onClick:()=>O(H,q),active:he,data:H,isCheckedSong:b,selectedSongList:C,setIsCheckedSong:F,setSelectedSongList:A},q)},q):d.jsx("div",{className:"w-full max-[549px]:w-full",children:d.jsx(xa,{theme:e,onClick:()=>O(H,q),active:he,data:H,userInfo:n,userSongs:m,userPlaylists:u,setUserSongs:f,setUserPlaylists:p,isCheckedSong:b,setIsCheckedSong:F,selectedSongList:C,setSelectedSongList:A,handleOpenParentModal:M,songItemActions:v},q)},q)})},[e,n,m,l,C,b,u]),Lt={button:`${e.content_bg} rounded-full`},le=h.useMemo(()=>No({loading:w,label:"Wait a minute",theme:e,callback:W,setOpenModal:g}),[w,e,C]),ie={ADD_PLAYLIST:d.jsxs("div",{className:"w-[300px]",children:[d.jsx(ee,{className:"absolute top-2 right-2",onClick:()=>g(!1),children:d.jsx(Vn,{className:"w-6 h-6"})}),d.jsx("h2",{className:"text-[18px] font-semibold",children:"Add Playlist"}),d.jsx("input",{className:`bg-${e.alpha} px-[20px] rounded-full outline-none mt-[10px] text-[16px]  h-[35px] w-full`,type:"text",placeholder:"name...",value:S,onChange:H=>T(H.target.value)}),d.jsx(ee,{isLoading:w,onClick:()=>te(),variant:"primary",className:`${Lt.button} mt-[15px]`,children:"Save"})]}),CONFIRM:le};return h.useEffect(()=>{if(n.status!=="loading"&&!n.email){J($e.Home);return}},[n]),o?d.jsx("h1",{children:o}):d.jsxs(d.Fragment,{children:[d.jsx("img",{className:"hidden",ref:I}),d.jsxs("div",{className:"pb-[30px] ",children:[X&&d.jsxs(_n,{to:$e.Home,className:"inline-flex items-center mb-[30px] hover:opacity-75",children:[d.jsx("button",{className:"",children:d.jsx(vl,{className:"w-[25px]"})}),d.jsx("span",{className:"text-[20px] font-semibold leading-1",children:"Home"})]}),d.jsx("h3",{className:"text-2xl font-bold mb-[10px]",children:"Playlist"}),d.jsxs("div",{className:"flex flex-row flex-wrap",children:[!!u.length&&!s&&u.map((H,q)=>d.jsx("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2",children:X?d.jsx(_n,{to:`${$e.Playlist}/${H.id}`,children:d.jsx(Hm,{data:H})}):d.jsx(Hm,{theme:e,data:H})},q)),!s&&d.jsx("div",{className:"w-1/4 p-[8px] max-[549px]:w-1/2 mb-[25px]",children:d.jsx(GN,{theme:e,className:"pt-[100%]",onClick:()=>M("ADD_PLAYLIST")})}),s&&DN]})]}),d.jsxs("div",{className:"pb-[30px] max-[549px]:pb-[80px]",children:[d.jsxs("div",{className:"flex justify-between mb-[10px]",children:[d.jsx("h3",{className:"text-2xl font-bold",children:"Songs"}),d.jsx("input",{onChange:L,type:"file",multiple:!0,accept:".mp3",id:"file",className:"hidden"}),d.jsx("audio",{ref:N,className:"hidden"}),d.jsx("div",{className:"flex items-center",children:d.jsxs("label",{className:`${e.content_bg} ${P==="uploading"||s?"opacity-60 pointer-events-none":""} rounded-full flex px-[20px] py-[4px] cursor-pointer`,htmlFor:"file",children:[d.jsx(Ua,{className:"w-[20px] mr-[5px]"}),"Upload"]})})]}),d.jsxs("div",{className:`flex gap-[12px] items-center border-b border-${e.alpha} h-[50px] mb-[10px]`,children:[s&&d.jsx(ze,{className:"h-[20px] w-[150px]"}),!s&&d.jsx(d.Fragment,{children:b?d.jsx("p",{className:"text-[14px]] font-semibold text-gray-500 w-[100px]",children:C.length+" selected"}):d.jsx("p",{className:"text-[14px]] font-semibold text-gray-500 w-[100px]",children:(z||0)+" songs"})}),b&&m.length&&d.jsxs(d.Fragment,{children:[d.jsx(ee,{onClick:()=>A(m),variant:"primary",className:Lt.button,children:"All"}),d.jsx(ee,{onClick:()=>M("CONFIRM"),variant:"primary",className:Lt.button,children:"Delete"}),d.jsx(ee,{onClick:()=>{F(!1),A([])},className:"px-[5px]",children:d.jsx(Vn,{className:"w-[25px]"})})]})]}),d.jsxs("div",{className:"min-h-[50vh]",children:[z&&!s?d.jsxs(d.Fragment,{children:[!!m.length&&pe,!!U.length&&Q]}):!s&&d.jsx("p",{children:"No songs jet..."}),s&&nS]})]}),y&&d.jsx(hs,{setOpenModal:g,children:d.jsx(Gn,{theme:e,children:ie[_]})})]})}function cU(){const{theme:t}=ct(),{userInfo:e}=xn(),[n,r]=h.useState(),[i,s]=h.useState({base:"",real_time:[]}),o=h.useRef(null),a=Pd(),l=_i();return h.useEffect(()=>{if(e.status==="loading")return;if(!e.email){l($e.Home);return}(async()=>{try{const u=await Yu({collection:"songs",id:a==null?void 0:a.id}),f=u.data();if(f.lyric_id){const m=(await Yu({collection:"lyrics",id:f.lyric_id})).data();s(m)}r({...f,id:u.id})}catch(u){console.log({message:u})}})()},[]),d.jsxs("div",{className:"container mx-auto pt-[30px]",children:[d.jsx("audio",{ref:o,src:n&&n.song_url,className:"hidden"}),n&&d.jsxs(d.Fragment,{children:[d.jsxs(_n,{to:$e.Dashboard,className:`inline-flex text-[20px] font-bold mb-[14px] ${t.content_hover_text}`,children:[d.jsx(vl,{className:"w-[25px]"}),d.jsx("span",{className:"ml-[12px]",children:n.name})]}),d.jsx(ZA,{lyric:i,audioRef:o,theme:t,song:n})]})]})}const $e={Home:"/React-Zingmp3",Dashboard:"/React-Zingmp3/dashboard",DashboardEdit:"/React-Zingmp3/dashboard/edit/:id",MySongs:"/React-Zingmp3/mysongs",MobileMySongs:"/React-Zingmp3/mobile-mysongs",Playlist:"/React-Zingmp3/mysongs/playlist",Edit:"/React-Zingmp3/mysongs/edit/:id"},uU=[{path:$e.Home,component:iU,layout:""},{path:$e.Dashboard,component:oU,layout:x1},{path:$e.MySongs,component:lU,layout:""},{path:`${$e.Playlist}/:id`,component:aU,layout:""},{path:$e.Edit,component:sU,layout:""},{path:$e.DashboardEdit,component:cU,layout:x1}],dU=({children:t})=>{const{theme:e}=ct(),n=os(),i={container:`w-full overflow-y-auto overflow-x-hidden ${h.useMemo(()=>n.pathname.includes("edit"),[n])?"h-[100vh]":"h-[calc(100vh)] pb-[90px]"} max-[549px]:h-full max-[549px]:pb-[70px]`,content:"px-[40px] max-[549px]:px-[15px]",page:`min-h-screen flex overflow-hidden ${e.type==="dark"?"text-white":"text-[#333]"} ${e.container}`};return d.jsx(d.Fragment,{children:d.jsxs("div",{className:i.page,children:[window.innerWidth>=550&&d.jsx(Y6,{}),d.jsxs("div",{className:i.container,children:[d.jsx("div",{className:"h-[100px]"}),d.jsx("div",{className:i.content,children:t})]}),d.jsx(Q6,{})]})})};function hU(){return d.jsxs(d.Fragment,{children:[d.jsx(Tk,{children:d.jsx(vk,{children:uU.map((t,e)=>{let n;const r=t.component;return t.layout?n=t.layout:n=dU,d.jsx(HE,{path:t.path,element:d.jsx(n,{children:d.jsx(r,{})})},e)})})}),d.jsx(tU,{autoClose:!0})]})}const fU=LV({reducer:{song:KV}});np.createRoot(document.getElementById("root")).render(d.jsx(P1.StrictMode,{children:d.jsx(W9,{children:d.jsx(jN,{theme:eS,children:d.jsx(ZN,{songsStore:lS,children:d.jsx(L9,{store:fU,children:d.jsx(K9,{children:d.jsx(F9,{children:d.jsx(yF,{children:d.jsx(hU,{})})})})})})})})}));
